"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4832],{97039:(e,t,o)=>{o.d(t,{Z:()=>Ii});var r=o(10434),n=o.n(r),i=o(67294),l=o(33125),a=o(11368),s=o(58299),c=o(23174),d=o.n(c),u=o(480),p=o(86628),y=o(24405),m=o(90559),h=o(80951),f=o(39694),S=o(65473),v=o(8606),b=o(78030),g=o(53876),w=o(77722);const C=i.memo((0,i.forwardRef)(((e,t)=>{const{store:o,collectionStore:r,buttonStyle:n,onContextMenu:l,quickActionButtons:a,property:s}=e,{baseStyles:c}=(0,i.useContext)(v.O),u=(0,p.VK)((()=>o.getPropertyValue(s)),[s,o]),m=(0,y.yK)((()=>({buttonStyle:{...c.buttonStyle,...n},buttonPressedStyle:c.buttonPressedStyle??{},buttonHoveredStyle:c.buttonHoveredStyle??{}})),[c.buttonHoveredStyle,c.buttonPressedStyle,c.buttonStyle,n]);return i.createElement(S.Z,{ref:t,style:m.buttonStyle,hoveredStyle:m.buttonHoveredStyle,pressedStyle:m.buttonPressedStyle,onContextMenu:l,quickActionButtons:a,editButtonClickProps:void 0},d()(w.Y,{fontColor:"light"},void 0,d()(P,{propertyValue:u,collectionStore:r})))})));function P(e){window.__c={n:"AutoIncrementIdPropertyValue"};const{propertyValue:t,collectionStore:o}=e,r=(0,p.VK)((()=>{var e;const r=null==o||null===(e=o.getRecordKeyStore())||void 0===e?void 0:e.getRecordKey(),n=(0,h.ah)(t);return void 0===n?"...":(0,m.wf)(r,n)}),[o,t]);return i.createElement(i.Fragment,null,r)}const _=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageAutoIncrementIdProperty"};const{store:o,collectionStore:r,property:l,format:a}=e,s=(0,p.VK)((()=>r.getSchema()),[r]),c=(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].text}})),[]),u=(0,i.useMemo)((()=>d()(f.Z,{store:o,schema:s,property:l,format:a})),[a,l,s,o]),m=I(e,t,c);return i.createElement(C,n()({},m,{quickActionButtons:u}))})),x=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableAutoIncrementIdProperty"};const{store:o,collectionStore:r,property:l,format:a}=e,{isMobile:s}=(0,u.Fy)(),c=(0,p.VK)((()=>r.getSchema()),[r]),m=(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].text}})),[]),h=(0,i.useMemo)((()=>{if(!s)return d()(f.Z,{store:o,schema:c,property:l,format:a},"copy")}),[a,s,l,c,o]),S=I(e,t,m);return i.createElement(C,n()({},S,{quickActionButtons:h}))})),k=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CompactAutoIncrementIdProperty"};const o=I(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].text}})),[]));return i.createElement(C,o)})),R=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListAutoIncrementIdProperty"};const o=I(e,t);return i.createElement(C,o)})),E=(0,i.forwardRef)(((e,t)=>{window.__c={n:"BoardAutoIncrementIdProperty"};const o=I(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].text}})),[]));return i.createElement(C,o)})),B=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CalendarAutoIncrementIdProperty"};const o=I(e,t);return i.createElement(C,o)})),T=(0,i.forwardRef)(((e,t)=>{window.__c={n:"GalleryAutoIncrementIdProperty"};const o=I(e,t);return i.createElement(C,o)})),M=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TimelineAutoIncrementIdProperty"};const o=I(e,t);return i.createElement(C,o)})),V=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationAutoIncrementIdProperty"};const o=I(e,t);return i.createElement(C,o)})),A=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionAutoIncrementIdProperty"};const o=I(e,t);return i.createElement(C,o)}));function I(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var F=o(98963),K=o(5366),O=o(94291),Z=o(82343),L=o(33929),H=o(57559),D=o(27755),z=o(63296);const W=i.memo((0,i.forwardRef)(((e,t)=>{const{store:o,property:r,collectionStore:n,buttonStyle:l,innerButtonStyle:a,onContextMenu:s}=e,c=(0,u.O7)(),{baseStyles:m,propertySchema:h,collectionContextStore:f}=(0,i.useContext)(v.O),b=h,g=(null==m?void 0:m.sizing)??"default",w=(0,p.VK)((()=>{const e=c.currentUser.id;if(!f||"button"!==(null==b?void 0:b.type)||!b.automation_id)return;const t=H.Mz.createChildStore(n,{table:F.cv,id:b.automation_id,spaceId:n.getSpaceId()});return{type:"button_property",persisted:!0,automationStore:t,collectionContextStore:f,propertyId:r,propertySchema:b,intl:L.default.getIntl(),parentRecordStore:t,currentUserId:e}}),[f,n,c.currentUser.id,r,b]),C=(0,i.useCallback)((async()=>{w&&await O.oS({environment:c,store:o,clientContext:w})}),[w,c,o]),P=(0,p.VK)((()=>null==w?void 0:w.automationStore.getNameStore().getValue()),[w]),_=(0,p.VK)((()=>w&&"sufficient"===(0,Z.Gb)(w).state.executionPermissionStatus),[w]),x=!P||0===P.length,k=(0,y.yK)((e=>({textStyle:{...m.textStyle,color:e.lightTextColor},buttonStyle:{...m.buttonStyle,...l},buttonPressedStyle:m.buttonPressedStyle??{},buttonHoveredStyle:m.buttonHoveredStyle??{},innerButtonStyle:{pointerEvents:"auto",overflow:"hidden",height:"small"===g?20:24,...a},innerButtonLabelStyle:{overflow:"hidden",textOverflow:"ellipsis",color:x?e.lightTextColor:void 0},innerButtonLabelPlaceholderStyle:{color:e.lightTextColor}})),[m.buttonHoveredStyle,m.buttonPressedStyle,m.buttonStyle,m.textStyle,l,a,x,g]);return i.createElement(S.Z,{ref:t,style:k.buttonStyle,hoveredStyle:k.buttonHoveredStyle,pressedStyle:k.buttonPressedStyle,editButtonClickProps:void 0,onContextMenu:s},d()(z.Z,{isSmall:!0,disabled:!_,onClick:C,disabledFeedback:!0,style:k.innerButtonStyle},void 0,d()("span",{style:k.innerButtonLabelStyle},void 0,x?i.createElement(K.FormattedMessage,D.y.buttonPlaceholder):P)))}))),U=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableButtonProperty"};const o=ee(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].button},innerButtonStyle:{maxWidth:"100%"}})),[]));return i.createElement(W,o)})),N=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageButtonProperty"};const o=ee(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].button}})),[]));return i.createElement(W,o)})),q=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CompactButtonProperty"};const o=ee(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].button}})),[]));return i.createElement(W,o)})),G=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListButtonProperty"};const o=ee(e,t);return i.createElement(W,o)})),$=(0,i.forwardRef)(((e,t)=>{window.__c={n:"BoardButtonProperty"};const o=ee(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].button}})),[]));return i.createElement(W,o)})),Q=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CalendarButtonProperty"};const o=ee(e,t);return i.createElement(W,o)})),Y=(0,i.forwardRef)(((e,t)=>{window.__c={n:"GalleryButtonProperty"};const o=ee(e,t);return i.createElement(W,o)})),j=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TimelineButtonProperty"};const o=ee(e,t,(0,y.yK)((()=>({buttonStyle:{maxWidth:200}})),[]));return i.createElement(W,o)})),J=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationButtonProperty"};const o=ee(e,t,(0,y.yK)((()=>({buttonStyle:{height:void 0}})),[]));return i.createElement(W,o)})),X=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionButtonProperty"};const o=ee(e,t);return i.createElement(W,o)}));function ee(e,t,o){const{store:r,collectionStore:n,property:i,disabled:l,onContextMenu:a}=e;return{ref:t,store:r,collectionStore:n,property:i,disabled:l,onContextMenu:a,buttonStyle:null==o?void 0:o.buttonStyle,innerButtonStyle:null==o?void 0:o.innerButtonStyle}}var te=o(51365),oe=o(39699),re=o(24118),ne=o(69823);const ie=i.memo(i.forwardRef(((e,t)=>{const{store:o,property:r,enablePointerEventsForInteractiveTypes:n,editButtonClickProps:l,onClick:a,onContextMenu:s,buttonStyle:c,showLabel:m,disabled:f}=e,b=(0,u.O7)(),g=(0,p.VK)((()=>h.Ml(o.getPropertyValue(r))),[r,o]),{baseStyles:w,trackEditBlockProperty:C,propertySchema:P}=(0,i.useContext)(v.O),_=le(o,r,f),x=P,k=(0,i.useCallback)((()=>{o.getPropertyStore(r)&&oe.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:b,perform:e=>{te.vO({stores:[o],property:r,transaction:e})}}),C(),a&&a()}),[b,a,r,o,C]),R=(0,y.yK)((()=>({buttonStyle:{...w.buttonStyle,...c},buttonPressedStyle:w.buttonPressedStyle??{},buttonHoveredStyle:w.buttonHoveredStyle??{}})),[w,c]);return i.createElement(S.Z,{ref:t,onContextMenu:s,editButtonClickProps:l,style:R.buttonStyle,hoveredStyle:R.buttonHoveredStyle,pressedStyle:R.buttonPressedStyle},d()(ne.n,{propertyLabel:m?null==x?void 0:x.name:void 0,checked:g,enablePointerEventsForInteractiveTypes:n,onClick:k,disabled:_}))})));function le(e,t,o){return(0,p.VK)((()=>o||!e.canEdit()||h.wl(t)||e.isLocked()),[o,t,e])}const ae=i.forwardRef(((e,t)=>{window.__c={n:"TableCheckboxProperty"};const o=ve(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].checkbox}})),[]));return i.createElement(ie,n()({},o,{showLabel:!1}))})),se=i.forwardRef(((e,t)=>{window.__c={n:"PageCheckboxProperty"};const o=ve(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].checkbox}})),[]));return i.createElement(ie,n()({},o,{showLabel:!1}))})),ce=i.forwardRef(((e,t)=>{window.__c={n:"CompactCheckboxProperty"};const o=ve(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].checkbox}})),[]));return i.createElement(ie,n()({},o,{showLabel:!0}))})),de=i.forwardRef(((e,t)=>{window.__c={n:"ListCheckboxProperty"};const o=ve(e,t);return i.createElement(ie,n()({},o,{showLabel:!1}))})),ue=i.forwardRef(((e,t)=>{window.__c={n:"BoardCheckboxProperty"};const o=ve(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].checkbox}})),[]));return i.createElement(ie,n()({},o,{showLabel:!0}))})),pe=i.forwardRef(((e,t)=>{window.__c={n:"CalendarCheckboxProperty"};const o=ve(e,t);return i.createElement(ie,n()({},o,{showLabel:!0}))})),ye=i.forwardRef(((e,t)=>{window.__c={n:"GalleryCheckboxProperty"};const o=ve(e,t);return i.createElement(ie,n()({},o,{showLabel:!0}))})),me=i.forwardRef(((e,t)=>{window.__c={n:"TimelineCheckboxProperty"};const o=ve(e,t);return i.createElement(ie,n()({},o,{showLabel:!1}))})),he=i.forwardRef(((e,t)=>{window.__c={n:"RelationCheckboxProperty"};const o=ve(e,t);return i.createElement(ie,n()({},o,{showLabel:!1}))})),fe=i.forwardRef(((e,t)=>{window.__c={n:"RelationSectionCheckboxProperty"};const o=ve(e,t);return i.createElement(ie,n()({},o,{showLabel:!1}))})),Se=i.forwardRef(((e,t)=>{window.__c={n:"MiniPeekCheckboxProperty"};const o=ve(e,t);return i.createElement(ie,n()({},o,{showLabel:!1}))}));function ve(e,t,o){const{store:r,disabled:n,collectionStore:i,property:l,enablePointerEventsForInteractiveTypes:a,onClick:s,onContextMenu:c}=e;return{ref:t,store:r,disabled:n,collectionStore:i,property:l,editButtonClickProps:(0,re.Am)(e),enablePointerEventsForInteractiveTypes:a,onClick:s,onContextMenu:c,buttonStyle:null==o?void 0:o.buttonStyle}}var be=o(77729),ge=o(77866);const we=i.memo(i.forwardRef(((e,t)=>{const{onContextMenu:o,editButtonClickProps:r,property:n,store:l,buttonStyle:a,EmptyComponent:s,quickActionButtons:c=[],showIfEmpty:u}=e,{propertySchema:m,isEmpty:h,baseStyles:f}=(0,i.useContext)(v.O),b=m,g=(0,p.VK)((()=>l.getPropertyValue(n)),[n,l]),C=(0,y.yK)((()=>({buttonStyle:{...f.buttonStyle,...a},buttonPressedStyle:f.buttonPressedStyle??{},buttonHoveredStyle:f.buttonHoveredStyle??{}})),[f.buttonHoveredStyle,f.buttonPressedStyle,f.buttonStyle,a]);return h&&void 0===s?null:i.createElement(S.Z,{ref:t,editButtonClickProps:r,onContextMenu:o,style:C.buttonStyle,pressedStyle:C.buttonPressedStyle,hoveredStyle:C.buttonHoveredStyle,quickActionButtons:c},h&&void 0!==s?d()(s,{}):b?d()(w.Y,{},void 0,d()(be.t,{type:b.type,textValue:g,useShortenedUrl:!1,disableLinkify:u})):null)}))),Ce=i.forwardRef(((e,t)=>{window.__c={n:"TableContactProperty"};const{store:o,property:r,format:l,collectionStore:a}=e,{isMobile:s}=(0,u.Fy)(),c=(0,p.VK)((()=>a.getSchema()),[a]),m=(0,i.useMemo)((()=>{if(!s)return d()(f.Z,{store:o,schema:c,property:r,format:l},"copy")}),[l,s,r,c,o]),h=Ae(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].text}})),[]));return i.createElement(we,n()({},h,{EmptyComponent:ge.q8,quickActionButtons:m}))})),Pe=i.forwardRef(((e,t)=>{window.__c={n:"PageContactProperty"};const{store:o,property:r,format:l,collectionStore:a}=e,s=(0,p.VK)((()=>a.getSchema()),[a]),c=(0,i.useMemo)((()=>d()(f.Z,{store:o,schema:s,property:r,format:l},"copy")),[l,r,s,o]),u=Ae(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].text}})),[]));return i.createElement(we,n()({},u,{EmptyComponent:ge.T$,quickActionButtons:c}))})),_e=i.forwardRef(((e,t)=>{window.__c={n:"CompactContactProperty"};const o=Ae(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].text}})),[]));return i.createElement(we,n()({},o,{EmptyComponent:ge.T$}))})),xe=i.forwardRef(((e,t)=>{window.__c={n:"ListContactProperty"};const{showIfEmpty:o}=e,r=Ae(e,t);return i.createElement(we,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),ke=i.forwardRef(((e,t)=>{window.__c={n:"BoardContactProperty"};const{showIfEmpty:o}=e,r=Ae(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].text}})),[]));return i.createElement(we,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Re=i.forwardRef(((e,t)=>{window.__c={n:"CalendarContactProperty"};const o=Ae(e,t);return i.createElement(we,o)})),Ee=i.forwardRef(((e,t)=>{window.__c={n:"GalleryContactProperty"};const{showIfEmpty:o}=e,r=Ae(e,t);return i.createElement(we,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Be=i.forwardRef(((e,t)=>{window.__c={n:"TimelineContactProperty"};const o=Ae(e,t);return i.createElement(we,o)})),Te=i.forwardRef(((e,t)=>{window.__c={n:"RelationContactProperty"};const o=Ae(e,t);return i.createElement(we,o)})),Me=i.forwardRef(((e,t)=>{window.__c={n:"RelationSectionContactProperty"};const o=Ae(e,t);return i.createElement(we,o)})),Ve=i.forwardRef(((e,t)=>{window.__c={n:"MiniPeekContactProperty"};const o=Ae(e,t);return i.createElement(we,n()({},o,{EmptyComponent:ge.a4,showIfEmpty:!0}))}));function Ae(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,re.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var Ie=o(53877),Fe=o(42875),Ke=o(81381),Oe=o(69582);const Ze=i.memo((0,i.forwardRef)(((e,t)=>{const{store:o,onContextMenu:r,editButtonClickProps:n,quickActionButtons:l,EmptyComponent:a,buttonStyle:s,property:c}=e,{isEmpty:u,baseStyles:m,templateVariableContext:f,propertySchema:b}=(0,i.useContext)(v.O),g=b,C=function(e,t,o){return(0,p.VK)((()=>{switch(t){case"created_time":const t=e.getCreatedTime();return t?Ie.CQ(t,(0,Fe.r)()):void 0;case"last_edited_time":const r=e.getLastEditedTime();return r?Ie.CQ(r,(0,Fe.r)()):void 0;default:const n=e.getPropertyValue(o);return(0,h.Gl)(n)}}),[o,e,t])}(o,null==g?void 0:g.type,c),P=(0,y.yK)((e=>({buttonStyle:{...m.buttonStyle,...s},buttonPressedStyle:m.buttonPressedStyle??{},buttonHoveredStyle:m.buttonHoveredStyle??{}})),[m.buttonHoveredStyle,m.buttonPressedStyle,m.buttonStyle,s]);if(u&&void 0===a&&void 0===f)return null;let _;return _=f?d()(Oe.P,{templateVariableType:f.templateVariable}):u&&void 0!==a?d()(a,{}):d()(w.Y,{},void 0,d()(Ke.z,{dateValue:C,dateFormat:null==g?void 0:g.date_format,timeFormat:null==g?void 0:g.time_format})),i.createElement(S.Z,{ref:t,style:P.buttonStyle,hoveredStyle:P.buttonHoveredStyle,pressedStyle:P.buttonPressedStyle,onContextMenu:r,editButtonClickProps:n,quickActionButtons:l},_)})));const Le=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageDateProperty"};const{store:o,collectionStore:r,property:l,format:a}=e,{isMobile:s}=(0,u.Fy)(),c=(0,p.VK)((()=>r.getSchema()),[r]),m=(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].text}})),[]),h=(0,i.useMemo)((()=>{if(!s)return d()(f.Z,{store:o,schema:c,property:l,format:a},"copy")}),[a,s,l,c,o]),S=Ye(e,t,m);return i.createElement(Ze,n()({},S,{EmptyComponent:ge.T$,quickActionButtons:h}))})),He=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableDateProperty"};const{store:o,collectionStore:r,property:l,format:a}=e,{isMobile:s}=(0,u.Fy)(),c=(0,p.VK)((()=>r.getSchema()),[r]),m=(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].text}})),[]),h=(0,i.useMemo)((()=>{if(!s)return d()(f.Z,{store:o,schema:c,property:l,format:a},"copy")}),[a,s,l,c,o]),S=Ye(e,t,m);return i.createElement(Ze,n()({},S,{EmptyComponent:ge.q8,quickActionButtons:h}))})),De=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CompactDateProperty"};const o=Ye(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].text}})),[]));return i.createElement(Ze,n()({},o,{EmptyComponent:ge.T$}))})),ze=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListDateProperty"};const{showIfEmpty:o}=e,r=Ye(e,t);return i.createElement(Ze,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),We=(0,i.forwardRef)(((e,t)=>{window.__c={n:"BoardDateProperty"};const{showIfEmpty:o}=e,r=Ye(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].text}})),[]));return i.createElement(Ze,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Ue=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CalendarDateProperty"};const o=Ye(e,t);return i.createElement(Ze,o)})),Ne=(0,i.forwardRef)(((e,t)=>{window.__c={n:"GalleryDateProperty"};const{showIfEmpty:o}=e,r=Ye(e,t);return i.createElement(Ze,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),qe=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TimelineDateProperty"};const o=Ye(e,t);return i.createElement(Ze,o)})),Ge=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationDateProperty"};const o=Ye(e,t);return i.createElement(Ze,o)})),$e=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionDateProperty"};const o=Ye(e,t);return i.createElement(Ze,o)})),Qe=(0,i.forwardRef)(((e,t)=>{window.__c={n:"MiniPeekDateProperty"};const o=Ye(e,t);return i.createElement(Ze,n()({},o,{EmptyComponent:ge.a4}))}));function Ye(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,re.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var je=o(79954),Je=o(79074),Xe=o(83559);const et=i.memo(i.forwardRef(((e,t)=>{const{store:o,EmptyComponent:r,onContextMenu:n,buttonStyle:l,selectableStyle:a,property:s,editButtonClickProps:c}=e,m=(0,u.O7)(),{baseStyles:f,collectionContextStore:b,isReadOnly:g}=(0,i.useContext)(v.O),[w,C]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{C(o.clone())}),[o]);const P=(0,i.useCallback)((e=>{te.bA({environment:m,blockPropertyValueOverlayStore:c.blockPropertyValueOverlayStore,store:o,property:s,format:c.format,uploadFiles:e.files,disableHorizontalEdgeScroll:c.disableHorizontalEdgeScroll,collectionContextStore:b})}),[b,c.blockPropertyValueOverlayStore,c.disableHorizontalEdgeScroll,c.format,m,s,o]),_=(0,p.VK)((()=>{const e=o.getPropertyValue(s);return h.g(e)}),[o,s]),x=(0,y.yK)((()=>{var e;return{buttonStyle:{...f.buttonStyle,...l},buttonPressedStyle:f.buttonPressedStyle??{},buttonHoveredStyle:f.buttonHoveredStyle??{},selectableStyle:{display:"inherit",borderRadius:null===(e=f.buttonStyle)||void 0===e?void 0:e.borderRadius,...a}}}),[f.buttonHoveredStyle,f.buttonPressedStyle,f.buttonStyle,l,a]),k=!_||0===_.length,R=(0,i.useMemo)((()=>d()(Xe.K,{},void 0,_.map(((e,t)=>d()(Je.e,{linkValue:e,permissionRecord:o.pointer},e.url+t))))),[_,o.pointer]);return!w||k&&void 0===r?null:d()(je.Z,{store:w,canNativeDropOnto:!g,onNativeDrop:P,analyticsName:"file_property",shouldShowDropZone:!g,style:x.selectableStyle},void 0,i.createElement(S.Z,{ref:t,onContextMenu:n,editButtonClickProps:c,style:x.buttonStyle,pressedStyle:x.buttonPressedStyle,hoveredStyle:x.buttonHoveredStyle},k&&void 0!==r?d()(r,{}):R))}))),tt=i.forwardRef(((e,t)=>{window.__c={n:"TableFileProperty"};const o=ut(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].button,height:"100%"}})),[]));return i.createElement(et,n()({},o,{EmptyComponent:ge.q8}))})),ot=i.forwardRef(((e,t)=>{window.__c={n:"PageFileProperty"};const o=ut(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].button,width:"100%"},selectableStyle:{width:"100%"}})),[]));return i.createElement(et,n()({},o,{EmptyComponent:ge.T$}))})),rt=i.forwardRef(((e,t)=>{window.__c={n:"CompactFileProperty"};const o=ut(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].button}})),[]));return i.createElement(et,n()({},o,{EmptyComponent:ge.T$}))})),nt=i.forwardRef(((e,t)=>{window.__c={n:"ListFileProperty"};const{showIfEmpty:o}=e,r=ut(e,t);return i.createElement(et,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),it=i.forwardRef(((e,t)=>{window.__c={n:"BoardFileProperty"};const{showIfEmpty:o}=e,r=ut(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].button,width:"100%"},selectableStyle:{width:"100%"}})),[]));return i.createElement(et,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),lt=i.forwardRef(((e,t)=>{window.__c={n:"CalendarFileProperty"};const o=ut(e,t);return i.createElement(et,o)})),at=i.forwardRef(((e,t)=>{window.__c={n:"GalleryFileProperty"};const{showIfEmpty:o}=e,r=ut(e,t);return i.createElement(et,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),st=i.forwardRef(((e,t)=>{window.__c={n:"TimelineFileProperty"};const o=ut(e,t);return i.createElement(et,o)})),ct=i.forwardRef(((e,t)=>{window.__c={n:"RelationFileProperty"};const o=ut(e,t);return i.createElement(et,o)})),dt=i.forwardRef(((e,t)=>{window.__c={n:"RelationSectionFileProperty"};const o=ut(e,t);return i.createElement(et,o)}));function ut(e,t,o){const{store:r,onContextMenu:n,property:i}=e;return{ref:t,store:r,property:i,editButtonClickProps:(0,re.Am)(e),onContextMenu:n,buttonStyle:null==o?void 0:o.buttonStyle,selectableStyle:null==o?void 0:o.selectableStyle}}var pt=o(30752),yt=o(30694);const mt=i.memo(i.forwardRef(((e,t)=>{const{store:o,EmptyComponent:r,onContextMenu:n,buttonStyle:l}=e,{baseStyles:a,collectionContextStore:s}=(0,i.useContext)(v.O),c=(0,p.VK)((()=>o.getParentCollectionStore()),[o]),u=(0,y.yK)((()=>({buttonStyle:{...a.buttonStyle,...l},buttonPressedStyle:a.buttonPressedStyle??{},buttonHoveredStyle:a.buttonHoveredStyle??{}})),[a.buttonHoveredStyle,a.buttonPressedStyle,a.buttonStyle,l]),m=!c||!s;return m&&void 0===r?null:i.createElement(S.Z,{ref:t,onContextMenu:n,editButtonClickProps:void 0,style:u.buttonStyle,pressedStyle:u.buttonPressedStyle,hoveredStyle:u.buttonHoveredStyle},m&&void 0!==r?d()(r,{}):d()(yt.Z,{collectionContextStore:s,parentStore:o,collectionForLocation:c}))}))),ht=i.forwardRef(((e,t)=>{window.__c={n:"TableLocationProperty"};const o=xt(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].text}})),[]));return i.createElement(mt,n()({},o,{EmptyComponent:ge.q8}))})),ft=i.forwardRef(((e,t)=>{window.__c={n:"PageLocationProperty"};const o=xt(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].text}})),[]));return i.createElement(mt,n()({},o,{EmptyComponent:ge.T$}))})),St=i.forwardRef(((e,t)=>{window.__c={n:"CompactLocationProperty"};const o=xt(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].text}})),[]));return i.createElement(mt,n()({},o,{EmptyComponent:ge.T$}))})),vt=i.forwardRef(((e,t)=>{window.__c={n:"ListLocationProperty"};const{showIfEmpty:o}=e,r=xt(e,t);return i.createElement(mt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),bt=i.forwardRef(((e,t)=>{window.__c={n:"BoardLocationProperty"};const{showIfEmpty:o}=e,r=xt(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].text}})),[]));return i.createElement(mt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),gt=i.forwardRef(((e,t)=>{window.__c={n:"CalendarLocationProperty"};const o=xt(e,t);return i.createElement(mt,o)})),wt=i.forwardRef(((e,t)=>{window.__c={n:"GalleryLocationProperty"};const{showIfEmpty:o}=e,r=xt(e,t);return i.createElement(mt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Ct=i.forwardRef(((e,t)=>{window.__c={n:"TimelineLocationProperty"};const o=xt(e,t);return i.createElement(mt,o)})),Pt=i.forwardRef(((e,t)=>{window.__c={n:"RelationLocationProperty"};const o=xt(e,t);return i.createElement(mt,o)})),_t=i.forwardRef(((e,t)=>{window.__c={n:"RelationSectionLocationProperty"};const o=xt(e,t);return i.createElement(mt,o)}));function xt(e,t,o){const{store:r,onContextMenu:n}=e;return{ref:t,store:r,onContextMenu:n,buttonStyle:null==o?void 0:o.buttonStyle}}var kt=o(84619),Rt=o(4023),Et=o(26388),Bt=o(88071),Tt=o(44731);const Mt=i.memo((0,i.forwardRef)(((e,t)=>{const{buttonStyle:o,editButtonClickProps:r,property:n,EmptyComponent:l,onContextMenu:a,tokenLimit:s,store:c}=e,{propertySchema:u,isEmpty:m,baseStyles:f}=(0,i.useContext)(v.O),b=(null==f?void 0:f.tokenFormat)??kt.l.Medium,g=u,w=(0,p.VK)((()=>(null==g?void 0:g.options)??[]),[g]),C=(0,p.VK)((()=>null==g?void 0:g.type),[g]),[P,_]=(0,p.VK)((()=>{const e=c.getPropertyValue(n);let t=[];if("select"===C){const o=h.P4(e,w);t=o?[o]:[]}else t=h.ib(e,w);return[s?t.slice(0,s):t,s?t.slice(s):[]]}),[c,n,C,s,w]),x=(0,y.yK)((e=>({buttonStyle:{...f.buttonStyle,...o},buttonPressedStyle:f.buttonPressedStyle??{},buttonHoveredStyle:f.buttonHoveredStyle??{},overflowIndicator:{marginRight:4,color:e.mediumTextColor},tooltip:{padding:8},remainderPropertiesContainer:{display:"flex",flexWrap:"wrap",fontWeight:"normal",width:"max-content",maxWidth:"240px",gap:4},selectToken:{margin:0},moreToken:{margin:0}})),[f.buttonHoveredStyle,f.buttonPressedStyle,f.buttonStyle,o]);return m&&void 0===l?null:i.createElement(S.Z,{ref:t,editButtonClickProps:r,onContextMenu:a,style:x.buttonStyle,hoveredStyle:x.buttonHoveredStyle,pressedStyle:x.buttonPressedStyle},m&&void 0!==l?d()(l,{}):d()(Vt,{shownOptions:P,hiddenOptions:_,tokenLimit:s,tokenFormat:b,styles:x}))})));function Vt(e){let{shownOptions:t,hiddenOptions:o,tokenLimit:r,styles:n,tokenFormat:l}=e;return d()(Xe.K,{},void 0,t.map((e=>d()(Tt.J,{type:"select",value:e.value,color:e.color,shouldShrink:!!r},e.id))),o.length>0&&d()(Et.Z,{style:n.tooltip,renderTooltip:()=>d()("div",{style:n.remainderPropertiesContainer},void 0,o.map((e=>d()(Tt.J,{type:"select",value:e.value,color:e.color,shouldShrink:!1},e.id)))),isLightBackground:!0,textWrap:!0,alignment:Rt.v.Center,placement:Rt.u.Bottom,render:e=>i.createElement("div",e,d()(Bt.Z,{count:o.length,format:l,fixedHeight:!1,style:n.moreToken,isCompact:!0}))}))}const At=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableMultiSelectProperty"};const o=Ut(e,t);return i.createElement(Mt,n()({},o,{EmptyComponent:ge.q8}))})),It=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageMultiSelectProperty"};const o=Ut(e,t);return i.createElement(Mt,n()({},o,{EmptyComponent:ge.T$}))})),Ft=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CompactMultiSelectProperty"};const o=Ut(e,t);return i.createElement(Mt,n()({},o,{EmptyComponent:ge.T$,tokenLimit:2}))})),Kt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListMultiSelectProperty"};const{showIfEmpty:o}=e,r=Ut(e,t);return i.createElement(Mt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Ot=(0,i.forwardRef)(((e,t)=>{window.__c={n:"BoardMultiSelectProperty"};const{showIfEmpty:o}=e,r=Ut(e,t);return i.createElement(Mt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Zt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CalendarMultiSelectProperty"};const o=Ut(e,t);return i.createElement(Mt,o)})),Lt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"GalleryMultiSelectProperty"};const{showIfEmpty:o}=e,r=Ut(e,t);return i.createElement(Mt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Ht=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TimelineMultiSelectProperty"};const o=Ut(e,t);return i.createElement(Mt,o)})),Dt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationMultiSelectProperty"};const o=Ut(e,t);return i.createElement(Mt,o)})),zt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionMultiSelectProperty"};const o=Ut(e,t);return i.createElement(Mt,o)})),Wt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"MiniPeekMultiSelectProperty"};const o=Ut(e,t);return i.createElement(Mt,n()({},o,{EmptyComponent:ge.a4,tokenLimit:1}))}));function Ut(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,re.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var Nt=o(49616),qt=o(59580);const Gt=i.memo((0,i.forwardRef)(((e,t)=>{var o,r;const{store:n,buttonStyle:l,onContextMenu:a,editButtonClickProps:s,quickActionButtons:c,EmptyComponent:u,isRightAligned:m,property:f}=e,{isEmpty:b,baseStyles:g,propertySchema:C,shouldRenderTooltip:P}=(0,i.useContext)(v.O),_=C,x=(0,p.VK)((()=>{const e=n.getPropertyValue(f);return h.VY(e)}),[f,n]),k=(0,Nt.X7)({numberValue:x,numberFormat:null==_?void 0:_.number_format,numberShowAs:null==_?void 0:_.show_as}),R=(0,y.yK)((()=>({buttonStyle:{...g.buttonStyle,...l},buttonPressedStyle:g.buttonPressedStyle??{},buttonHoveredStyle:g.buttonHoveredStyle??{}})),[g.buttonHoveredStyle,g.buttonPressedStyle,g.buttonStyle,l]);if(b&&void 0===u)return null;const E="bar"===(null==_||null===(o=_.show_as)||void 0===o?void 0:o.type)||"ring"===(null==_||null===(r=_.show_as)||void 0===r?void 0:r.type);return i.createElement(S.Z,{ref:t,style:R.buttonStyle,hoveredStyle:R.buttonHoveredStyle,pressedStyle:R.buttonPressedStyle,onContextMenu:a,editButtonClickProps:s,quickActionButtons:c,quickActionButtonsAlign:m?"left":void 0,tooltipPropertyValue:P?k:void 0},b&&void 0!==u?d()(u,{}):d()(E?Xe.K:w.Y,{isRightAligned:m},void 0,d()(qt.A,{numberValue:x,isRightAligned:m})))}))),$t=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageNumberProperty"};const{store:o,property:r,format:l,collectionStore:a}=e,s=io(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].text}})),[])),c=(0,p.VK)((()=>a.getSchema()),[a]),u=(0,i.useMemo)((()=>d()(f.Z,{store:o,schema:c,property:r,format:l},"copy")),[l,r,c,o]);return i.createElement(Gt,n()({},s,{EmptyComponent:ge.T$,quickActionButtons:u}))})),Qt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableNumberProperty"};const{store:o,property:r,format:l,collectionStore:a}=e,{isMobile:s}=(0,u.Fy)(),c=io(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].text}})),[])),m=(0,p.VK)((()=>a.getSchema()),[a]),h=(0,i.useMemo)((()=>{if(!s)return d()(f.Z,{store:o,schema:m,property:r,format:l},"copy")}),[l,s,r,m,o]);return i.createElement(Gt,n()({},c,{EmptyComponent:ge.q8,quickActionButtons:h,isRightAligned:!0}))})),Yt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CompactNumberProperty"};const o=io(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].text}})),[]));return i.createElement(Gt,n()({},o,{EmptyComponent:ge.T$}))})),jt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListNumberProperty"};const{showIfEmpty:o}=e,r=io(e,t);return i.createElement(Gt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Jt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"BoardNumberProperty"};const{showIfEmpty:o}=e,r=io(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].text}})),[]));return i.createElement(Gt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Xt=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CalendarNumberProperty"};const o=io(e,t);return i.createElement(Gt,o)})),eo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"GalleryNumberProperty"};const{showIfEmpty:o}=e,r=io(e,t);return i.createElement(Gt,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),to=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TimelineNumberProperty"};const o=io(e,t);return i.createElement(Gt,o)})),oo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationNumberProperty"};const o=io(e,t);return i.createElement(Gt,o)})),ro=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionNumberProperty"};const o=io(e,t);return i.createElement(Gt,o)})),no=(0,i.forwardRef)(((e,t)=>{window.__c={n:"MiniPeekNumberProperty"};const o=io(e,t);return i.createElement(Gt,n()({},o,{EmptyComponent:ge.a4}))}));function io(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,re.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var lo=o(66897),ao=o(17215),so=o(70203),co=o(97880),uo=o(93044),po=o(11061),yo=o(18417);const mo=i.memo(i.forwardRef(((e,t)=>{const{buttonStyle:o,onContextMenu:r,editButtonClickProps:n,property:l,store:a,EmptyComponent:s,tokenLimit:c}=e,{propertySchema:u,isEmpty:m,baseStyles:h,templateVariableContext:f}=(0,i.useContext)(v.O),b=(null==h?void 0:h.tokenFormat)??kt.l.Medium,g=function(e){let{property:t,store:o,propertySchema:r}=e;return(0,p.VK)((()=>{const e=null==r?void 0:r.type;switch(e){case"created_by":{const e=o.getCreatedByPointer();if(e)return[e];break}case"last_edited_by":{const e=o.getLastEditedByPointer();if(e)return[e];break}case"person":return(0,ao.VV)({value:o.getPropertyValue(t),isTemplatePage:o.isTemplate(),propertySchema:r,blockCreatorPointer:o.getCreatedByPointer()});case void 0:return[];default:(0,co.t1)(e)}return[]}),[t,r,o])}({store:a,property:l,propertySchema:u}),w=(0,y.yK)((()=>({buttonStyle:{...h.buttonStyle,...o},buttonPressedStyle:h.buttonPressedStyle??{},buttonHoveredStyle:h.buttonHoveredStyle??{},tokensContainer:{...b===kt.l.Inline?{gap:0}:{}},actorTokenOverlap:{...b===kt.l.Inline?{margin:uo.wS[b].margin}:{}},moreToken:{margin:0}})),[h.buttonHoveredStyle,h.buttonPressedStyle,h.buttonStyle,o,b]);return m&&void 0===s?null:i.createElement(S.Z,{ref:t,editButtonClickProps:n,onContextMenu:r,style:w.buttonStyle,pressedStyle:w.buttonPressedStyle,hoveredStyle:w.buttonHoveredStyle,tooltipHide:b===kt.l.Inline},m&&void 0!==s&&!f?d()(s,{}):d()(ho,{values:g,tokenLimit:c,tokenFormat:b,styles:w}))})));function ho(e){let{values:t,tokenLimit:o,tokenFormat:r,styles:n}=e;const i=t.slice(0,o);return d()(Xe.K,{style:n.tokensContainer},void 0,i.map(((e,o)=>(0,lo.Wk)(e)?d()(yo.H,{actorPointer:e,style:o<t.length-1?n.actorTokenOverlap:void 0},e.id):(0,so.D4X)(e)?d()(Oe.w,{templateVariableType:e},`person-property-value-${e}`):void(0,co.t1)(e))),o&&t.length>o&&d()(Bt.Z,{count:t.length-o,format:r,style:n.moreToken,fixedHeight:!0,isCompact:!0}))}const fo=i.forwardRef(((e,t)=>{window.__c={n:"TablePersonProperty"};const o=Ro(e,t);return i.createElement(mo,n()({},o,{EmptyComponent:ge.q8}))})),So=i.forwardRef(((e,t)=>{window.__c={n:"PagePersonProperty"};const{store:o,property:r,collectionStore:l}=e,a=Ro(e,t);return d()(po.O,{store:o,property:r,collectionStore:l},void 0,i.createElement(mo,n()({},a,{EmptyComponent:ge.T$})))})),vo=i.forwardRef(((e,t)=>{window.__c={n:"CompactPersonProperty"};const o=Ro(e,t);return i.createElement(mo,n()({},o,{EmptyComponent:ge.T$,tokenLimit:1}))})),bo=i.forwardRef(((e,t)=>{window.__c={n:"MiniPeekPersonProperty"};const o=Ro(e,t);return i.createElement(mo,n()({},o,{EmptyComponent:ge.a4,tokenLimit:1}))})),go=i.forwardRef(((e,t)=>{window.__c={n:"ListPersonProperty"};const{showIfEmpty:o}=e,r=Ro(e,t);return i.createElement(mo,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),wo=i.forwardRef(((e,t)=>{window.__c={n:"BoardPersonProperty"};const{showIfEmpty:o}=e,r=Ro(e,t);return i.createElement(mo,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Co=i.forwardRef(((e,t)=>{window.__c={n:"CalendarPersonProperty"};const o=Ro(e,t);return i.createElement(mo,o)})),Po=i.forwardRef(((e,t)=>{window.__c={n:"GalleryPersonProperty"};const{showIfEmpty:o}=e,r=Ro(e,t);return i.createElement(mo,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),_o=i.forwardRef(((e,t)=>{window.__c={n:"TimelinePersonProperty"};const o=Ro(e,t);return i.createElement(mo,o)})),xo=i.forwardRef(((e,t)=>{window.__c={n:"RelationPersonProperty"};const o=Ro(e,t);return i.createElement(mo,o)})),ko=i.forwardRef(((e,t)=>{window.__c={n:"RelationSectionPersonProperty"};const o=Ro(e,t);return i.createElement(mo,o)}));function Ro(e,t,o){const{store:r,property:n,onContextMenu:i}=e;return{ref:t,store:r,property:n,editButtonClickProps:(0,re.Am)(e),onContextMenu:i,buttonStyle:null==o?void 0:o.buttonStyle}}o(57658);var Eo=o(99036),Bo=o(87916),To=o(31869),Mo=o(14473),Vo=o(66890),Ao=o(29798),Io=o(64921),Fo=o(32163),Ko=o(72495),Oo=o(68139),Zo=o(90692);const Lo=i.memo((0,i.forwardRef)(((e,t)=>{const{collectionStore:o,buttonStyle:r,editButtonClickProps:n,property:l,EmptyComponent:a,onContextMenu:s,blockPropertyValueOverlayStore:c,store:u,format:m,renderAs:f}=e,{propertySchema:b,isReadOnly:g,baseStyles:w}=(0,i.useContext)(v.O),C=b,P=(null==w?void 0:w.tokenFormat)??kt.l.Medium,_=(0,p.qz)(void 0,Ao.Z),x=(0,p.VK)((()=>{const e=u.getPropertyValue(l);return C?h.j$({relationValue:h.rq(e),propertySchema:C,getRecordModel:u.getRecordModel}):void 0}),[u,l,C]),k=(0,i.useMemo)((()=>{const e=C?Eo.j0(C):void 0;return e?H.NW.createChildStore(u,e):void 0}),[C,u]),R=(0,p.VK)((()=>{const e=null!=C&&C.limit&&x?x.slice(0,C.limit):x;return e?e.map((e=>{const t=H.G.createChildStore(u,e),o=t.getAssociatedCollectionStore();if(!o)return;const r=o.id;return C&&r===Eo.F0(C)?{pointer:e,pageStore:t}:void 0})).filter(co.$K):[]}),[C,x,u]),E=0===R.length,B="rows"===f&&!E,T=(0,y.yK)((e=>({buttonStyle:{...w.buttonStyle,...r,...B&&{padding:0}},buttonPressedStyle:w.buttonPressedStyle??{},buttonHoveredStyle:w.buttonHoveredStyle??{},overflowIndicator:{marginRight:4,color:e.mediumTextColor}})),[w.buttonHoveredStyle,w.buttonPressedStyle,w.buttonStyle,r,B]),M=(0,i.useMemo)((()=>k?"rows"===f?C&&x&&d()(Ho,{relationItemPointers:R,relationValue:x,collectionStore:o,menuListStore:_,store:u,targetCollectionStore:k,property:l,disabled:g,buttonContainerRef:t,blockPropertyValueOverlayStore:c,format:m,propertySchema:C}):"inline"===f?d()(Do,{relationItemPointers:R,store:u,tokenFormat:P}):void(0,co.t1)(f):null),[c,o,m,g,_,l,C,t,R,x,f,u,k,P]);return E&&void 0===a?null:i.createElement(S.Z,{ref:t,editButtonClickProps:B?void 0:n,onContextMenu:s,style:T.buttonStyle,hoveredStyle:T.buttonHoveredStyle,pressedStyle:T.buttonPressedStyle},E&&void 0!==a?d()(a,{}):M)})));function Ho(e){window.__c={n:"RelationRows"};const{collectionStore:t,targetCollectionStore:o,relationItemPointers:r,relationValue:l,property:a,store:s,disabled:c,menuListStore:m,buttonContainerRef:h,blockPropertyValueOverlayStore:f,format:S,propertySchema:v}=e,b=(0,Vo.Y$)(),g=(0,u.O7)(),w=(0,i.useCallback)(((e,t)=>{te.bA({environment:g,blockPropertyValueOverlayStore:f,store:s,property:a,rect:null==t?void 0:t.getBoundingClientRect(),format:S,mode:e,collectionContextStore:b})}),[f,b,g,S,a,s]),C=(0,i.useCallback)(((e,t)=>{if(!b)return;const o=e.filter((e=>e.id!==t.id));oe.createAndCommit({userAction:"RelationBlockPropertyValue.handleRemoveRelationClick",environment:g,perform:e=>{To.sf({store:s,propertyId:a,value:o,environment:g,relatedPageId:t.id,propertySchema:v,transaction:e,collectionContextStore:b,analyticsData:{isFromBulkActionsToolbar:Nt.VM(f),analyticsFrom:Nt.Sy(S)},isUnthrottled:!1})}})}),[f,b,g,S,a,v,s]),P=(0,p.VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===Bo.p$),[o]),_=(0,y.yK)((()=>({moreMenuItem:{width:"100%",display:"flex",alignItems:"center",justifyItems:"center",borderRadius:3,fontSize:14,minHeight:32,margin:0,padding:"6px 8px"},moreMenuItemLabel:{lineHeight:"normal",margin:0}})),[]),x=r.slice(0,5).map(((e,r)=>{let{pageStore:d}=e;return{key:d.id,render:e=>i.createElement(Oo.Z,n()({},e,{canDrag:!1,collectionStore:t,targetCollectionStore:o,relatedPageStore:d,disabled:c,isSelected:!0,pageStore:s,property:a,rowType:"inline",onActionButtonClick:()=>{C(l,d)},onMouseLeave:()=>m.unsetFocus(),onSecondaryButtonClick:e=>{w({type:P?"view":"add",index:r+1},e)},onOpenPageButtonClick:()=>{Mo.O(l,d,g,"relation_property")}})),action:()=>{}}}));return r.length>5&&x.push({key:"add",render:e=>i.createElement(Io.Z,n()({},e,{style:_.moreMenuItem,onClick:e=>w({type:"view"},h&&"current"in h?h.current:void 0)}),d()(Bt.Z,{style:_.moreMenuItemLabel,count:r.length-5,format:kt.l.Medium,fixedHeight:!1,isCompact:!1})),action:()=>{w({type:"add",index:l.length},void 0)}}),d()(Fo.Z,{type:Fo.i.Vertical,store:m,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"results",render:e=>i.createElement(Ko.Z,n()({},e,{disableDesktopPadding:!0,disableMobileBorders:!0,children:e.children})),items:x}]})}function Do(e){window.__c={n:"RelationInlineTokens"};const{relationItemPointers:t,store:o,tokenFormat:r}=e,n=(0,y.yK)((()=>({moreToken:{margin:0}})),[]),i=t.slice(0,10).map((e=>{let{pointer:t}=e;return d()(Zo.Z,{recordPointer:t,parentStore:o},t.id)}));return t.length>10&&i.push(d()(Bt.Z,{style:n.moreToken,count:t.length-10,format:r,fixedHeight:!1,isCompact:!0})),d()(Xe.K,{},void 0,i)}const zo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableRelationProperty"};const o=Xo(e,t);return i.createElement(Lo,n()({},o,{EmptyComponent:ge.q8,renderAs:"inline"}))})),Wo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageRelationProperty"};const{store:o,property:r,collectionStore:l}=e,a=Xo(e,t);return d()(po.O,{store:o,property:r,collectionStore:l},void 0,i.createElement(Lo,n()({},a,{EmptyComponent:ge.T$,renderAs:"rows"})))})),Uo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CompactRelationProperty"};const o=Xo(e,t);return i.createElement(Lo,n()({},o,{EmptyComponent:ge.T$,renderAs:"rows"}))})),No=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListRelationProperty"};const{showIfEmpty:o}=e,r=Xo(e,t);return i.createElement(Lo,n()({},r,{EmptyComponent:o?ge.s3:void 0,renderAs:"inline"}))})),qo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"BoardRelationProperty"};const{showIfEmpty:o}=e,r=Xo(e,t);return i.createElement(Lo,n()({},r,{EmptyComponent:o?ge.s3:void 0,renderAs:"inline"}))})),Go=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CalendarRelationProperty"};const o=Xo(e,t);return i.createElement(Lo,n()({},o,{renderAs:"inline"}))})),$o=(0,i.forwardRef)(((e,t)=>{window.__c={n:"GalleryRelationProperty"};const{showIfEmpty:o}=e,r=Xo(e,t);return i.createElement(Lo,n()({},r,{EmptyComponent:o?ge.s3:void 0,renderAs:"inline"}))})),Qo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TimelineRelationProperty"};const o=Xo(e,t);return i.createElement(Lo,n()({},o,{renderAs:"inline"}))})),Yo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationRelationProperty"};const o=Xo(e,t);return i.createElement(Lo,n()({},o,{renderAs:"inline"}))})),jo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionRelationProperty"};const o=Xo(e,t);return i.createElement(Lo,n()({},o,{renderAs:"inline"}))})),Jo=(0,i.forwardRef)(((e,t)=>{window.__c={n:"MiniPeekRelationProperty"};const o=Xo(e,t);return i.createElement(Lo,n()({},o,{EmptyComponent:ge.a4,renderAs:"inline"}))}));function Xo(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l,blockPropertyValueOverlayStore:a,format:s}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,re.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle,blockPropertyValueOverlayStore:a,format:s}}var er=o(35011),tr=o(34299),or=o(7057),rr=o(78106),nr=o(84682),ir=o(72126),lr=o(82883),ar=o(89470),sr=o(16187),cr=o(17809),dr=o(73807),ur=o(25651),pr=o(43664),yr=o(31792),mr=o(73063);function hr(e){const{href:t,icon:o,iconStyle:r,tooltip:l,externalLink:a,onClick:s}=e;return d()(Et.Z,{renderTooltip:()=>l,render:e=>i.createElement(mr.Z,n()({ariaLabel:l,icon:o,iconStyle:r,href:t,onClick:s,hasBackground:!0,showShadow:!0,external:a},e))})}const fr=(0,K.defineMessages)({rollup:{defaultMessage:"Configure rollup",id:"database.editButton.configureRollupTooltip"}});function Sr(e){window.__c={n:"EditButton"};const{type:t,editButtonClickProps:o}=e,r=(0,u.O7)(),{isMobile:n}=(0,u.Fy)(),{containerRef:l,collectionContextStore:a,isReadOnly:s}=(0,i.useContext)(v.O),c=(0,p.qz)(void 0,yr.Z),y=(0,i.useMemo)((()=>L.default.formatMessage(fr[t])),[t]),m=(0,i.useCallback)((async e=>{if(void 0===o)return;const{onClick:t,store:n,property:i,format:s,collectionStore:d,blockPropertyValueOverlayStore:u,disableHorizontalEdgeScroll:p}=o;await pr.z({element:l&&"current"in l&&(null==l?void 0:l.current)||void 0,environment:r,onClick:t,store:n,property:d.getMappedProperty(i),format:s,collectionStore:d,blockPropertyValueOverlayStore:u,disableHorizontalEdgeScroll:p,collectionContextStore:a,mouseStore:c})}),[a,l,o,r,c]);return s||n?null:d()(hr,{icon:ur.R,tooltip:y,onClick:m})}var vr=o(19629);const br=i.memo(i.forwardRef(((e,t)=>{const{store:o,property:r,EmptyComponent:n,collectionStore:l,onContextMenu:a,editButtonClickProps:s,checkboxButtonStyle:c,textButtonStyle:m,buttonButtonStyle:f,quickActionButtons:b,numberRightAlign:C}=e,{baseStyles:P,collectionContextStore:_}=(0,i.useContext)(v.O),x=(0,p.VK)((()=>{var e;return null==_||null===(e=_.collectionStore())||void 0===e?void 0:e.getSchema()}),[_]),k=(0,p.VK)((()=>o.getModel()),[o]),R=(0,dr._)(),E=(0,p.VK)((()=>{if(void 0!==x)return(0,tr.gT)({property:r,schema:x,getRecordModel:l.getRecordModel})}),[x,r,l.getRecordModel]),{propertySchema:B,targetPropertySchema:T}=E||{},M=function(e){var t;const{block:o,schema:r,property:n,store:i,propertySchema:l,targetPropertySchema:a,numberRightAlign:s,clientFormulaTimeoutMs:c}=e,{rollupAggregationValue:u,numberFormat:y}=(0,p.VK)((()=>{if(!(null!=l&&l.aggregation&&"show_unique"!==l.aggregation&&o&&null!=a&&a.type&&r))return{rollupAggregationValue:void 0,numberFormat:void 0};const e=(0,tr.O0)({block:o,property:n,schema:r,getRecordModel:i.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,Fe.r)(),depth:0,intl:L.default.getIntl(),visitedProperties:new Set,resultCache:{},formulaTimeoutTimestampMs:Date.now()+c}});if(!e)return{rollupAggregationValue:void 0,numberFormat:void 0};const t=(0,sr.SD)(l.aggregation,"formula"===(null==a?void 0:a.type)||"number"===(null==a?void 0:a.type)?a.number_format:void 0);if(t){const o=void 0===(null==e?void 0:e.value)||"number"!=typeof e.value?void 0:ir.NM(e.value,3);if(void 0!==o&&!isNaN(o))return{rollupAggregationValue:o,numberFormat:t}}const s=(0,sr.Ol)({numberFormat:void 0,dateFormat:a&&"date_format"in a?a.date_format:void 0,aggregationType:l.aggregation,value:e,userTimeZone:(0,Fe.r)(),roundDecimal:3});return void 0===s||""===s?{rollupAggregationValue:void 0,numberFormat:void 0}:{rollupAggregationValue:s,numberFormat:void 0}}),[o,n,l,r,i.getRecordModel,a,c]);return(0,p.VK)((()=>{if(void 0===u)return null;if(y){var e,t;const o="bar"===(null==l||null===(e=l.show_as)||void 0===e?void 0:e.type)||"ring"===(null==l||null===(t=l.show_as)||void 0===t?void 0:t.type);return d()(o?Xe.K:w.Y,{isRightAligned:s},void 0,d()(qt.A,{numberFormat:y,numberValue:u,isRightAligned:s}))}return d()(w.Y,{},void 0,u)}),[s,y,null==l||null===(t=l.show_as)||void 0===t?void 0:t.type,u])}({store:o,block:k,schema:x,property:r,propertySchema:B,targetPropertySchema:T,numberRightAlign:C,clientFormulaTimeoutMs:R}),V=function(e){const{block:t,store:o,rollupPropertyData:r,numberRightAlign:n,clientFormulaTimeoutMs:l}=e,{propertySchema:a,relationPropertySchema:s,targetPropertySchema:c,targetProperty:y,targetCollectionModel:m}=r||{},{collectionContextStore:f}=(0,i.useContext)(v.O),S=(0,p.VK)((()=>{if(void 0!==(null==a?void 0:a.aggregation)&&"show_unique"!==(null==a?void 0:a.aggregation)||!a||!s||!c||!m||!t||void 0===(null==a?void 0:a.relation_property))return[];return h.j$({relationValue:h.rq(h.wS(t,a.relation_property)),getRecordModel:o.getRecordModel,propertySchema:s}).map((e=>H.G.createChildStore(o,e))).filter((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)===m.id}))}),[a,s,c,m,t,o]),b=(0,u.O7)(),g=(0,p.VK)((()=>{if(void 0===s||void 0===c||void 0===y||void 0===a)return[];const e=null==f?void 0:f.collectionViewBlockStore(),t=s.collection_pointer;if(void 0===t||void 0===e)return[];const o=H.NW.createChildStore(e,t),r=[];for(const n of S){const e=n.getPropertyValue(y);if(void 0===e&&!["status","checkbox","formula","last_edited_time","last_edited_by","created_time","created_by","title"].includes(c.type))continue;const t=wr({textValue:e,blockStore:n,targetCollectionStore:o,targetPropertySchema:c,targetProperty:y,currentUserId:b.currentUser.id,clientFormulaTimeoutMs:l}).map((e=>[e,n]));r.push(...t)}return"show_unique"===a.aggregation?ir.mN(r,(e=>{let[t,o]=e;return t.id})):r}),[S,f,s,a,y,c,b.currentUser.id,l]);return(0,p.VK)((()=>{if(null==g||!g.length||!a)return null;const e=g[0][0].type,t=(0,vr.vQ)(e,a);return d()(vr.E1,{propertyType:e,rootPropertySchema:a,numberRightAlign:n},void 0,g.map(((e,o)=>{let[r,i]=e;return d()(vr.gZ,{token:r,targetPropertySchema:c,blockStore:i,withComma:t&&o<g.length-1,numberRightAlign:n},`${r.id}-${o}`)})))}),[n,a,g,c])}({block:k,store:o,rollupPropertyData:E,numberRightAlign:C,clientFormulaTimeoutMs:R}),A=!M&&!V,I=(0,p.VK)((()=>A||void 0===E?"text":void 0!==(null==B?void 0:B.aggregation)&&"show_unique"!==B.aggregation?void 0!==(0,sr.SD)(B.aggregation,"number")?"number":"text":null!=E&&E.targetPropertySchema?function(e){if("formula"===e.type){if(e.formula2&&(0,cr.formulasPrototypeEnabled)()){const t=(0,rr.aL)(e.formula2.result_type).type;return"block"===t?"relation":"unknown"===t||"array"===t?"text":t}return"text"}return"rollup"===e.type?"text":e.type}(E.targetPropertySchema):"text"),[A,null==B?void 0:B.aggregation,E]),F=(0,y.yK)((e=>({buttonStyle:{...P.buttonStyle,..."checkbox"===I?c:{},..."title"!==I&&(0,g.A2)(I)?m:{},...(0,g.e4)(I)?f:{}},buttonPressedStyle:P.buttonPressedStyle??{},buttonHoveredStyle:P.buttonHoveredStyle??{}})),[P.buttonHoveredStyle,P.buttonPressedStyle,P.buttonStyle,f,c,I,m]);if(A&&void 0===n)return null;const K=!0===C&&"number"===I;return i.createElement(S.Z,{ref:t,onContextMenu:a,editButtonClickProps:s,style:F.buttonStyle,pressedStyle:F.buttonPressedStyle,hoveredStyle:F.buttonHoveredStyle,quickActionButtons:b?d()(gr,{buttons:b,editButtonClickProps:s}):void 0,quickActionButtonsAlign:K?"left":void 0},A?n?d()(n,{}):null:M??V)}))),gr=e=>{let{buttons:t,editButtonClickProps:o}=e;const r=t.map((e=>{switch(e){case"edit":return d()(Sr,{type:"rollup",editButtonClickProps:o});default:(0,co.t1)(e)}})).filter(co.K0);return r?i.createElement(i.Fragment,null,r):null};function wr(e){var t;const{textValue:o,blockStore:r,targetCollectionStore:n,targetPropertySchema:i,targetProperty:l,clientFormulaTimeoutMs:a}=e,{type:s}=i;switch(s){case"auto_increment_id":if(void 0===o)return[];const d=null===(t=n.getRecordKeyStore())||void 0===t?void 0:t.getRecordKey(),u=(0,m.wf)(d,h.ah(o));return u?[{id:u,type:"text",value:[[u]]}]:[];case"button":return[];case"checkbox":{const e=h.Ml(o);return[{id:e,type:"checkbox",value:e}]}case"date":{const e=h.Gl(o);if(void 0===e)return[];return[{id:or.ZV({allowRelativeDates:!1,value:e,userTimeZone:(0,Fe.r)(),intl:L.default.getIntl()}),type:"date",value:e}]}case"email":case"phone_number":case"url":return void 0===o?[]:[{id:(0,so.Jcv)(o),type:s,value:o}];case"file":return h.g(o).map((e=>({id:e.url,type:"file",value:e})));case"formula":{const e=r.getModel();if(void 0===e)return[];const t=L.default.getIntl(),o=(0,Fe.r)();if("v2"===i.version){var c;if(null===(c=i.formula2)||void 0===c||!c.code)return[];const n=(0,er.EC)({block:e,property:l,formulaCode:i.formula2.code,getRecordModel:r.getRecordModel,intl:t,userTimeZone:o,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+a});return n?(0,pt.$I)(n,r.getRecordModel,o):[]}{const n=(0,nr.AH)({property:l,schema:r.getSchema(),block:e,getRecordModel:r.getRecordModel,userTimeZone:o,depth:0,intl:t,resultCache:{},visitedProperties:new Set});return(0,pt.tT)(n)}}case"select":{const e=h.Sj(o,i.options??[]);if(!i.options||!e)return[];return[{id:e,type:"select",value:e,color:(0,h.wI)(i.options??[],e)}]}case"multi_select":return h.uP(o,i.options??[]).map((e=>({id:e,type:"select",value:e,color:(0,h.wI)(i.options??[],e)})));case"number":{const e=h.VY(o);return void 0===e?[]:[{id:e,type:"number",value:e}]}case"person":return h.DW({textValue:o,propertySchema:i}).map((e=>({id:e.id,type:"person",value:e})));case"title":if(void 0===n)return[];return[{id:(0,lr.X)({textValue:o,getRecordModel:r.getRecordModel,deterministic:!0,userTimeZone:(0,Fe.r)(),intl:L.default.getIntl()}),type:"relation",value:{id:r.id,table:"block",spaceId:n.getSpaceId()}}];case"relation":if(void 0===n)return[];return h.j$({relationValue:h.rq(o),getRecordModel:r.getRecordModel,propertySchema:i}).map((e=>({id:e.id,type:"relation",value:e})));case"status":{const e=h.ZG(o,i),{options:t,groups:r}=i,n=null==t?void 0:t.find((t=>t.value===e));if(void 0===e||void 0===n)return[];const l=null==r?void 0:r.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(n.id)}));return[{id:e,type:"select",value:e,color:n.color,groupColor:(null==l?void 0:l.color)??"default"}]}case"text":if(void 0===o)return[];const p=(0,lr.X)({textValue:o,getRecordModel:r.getRecordModel,deterministic:!0,userTimeZone:(0,Fe.r)(),intl:L.default.getIntl()});return 0===p.length?[]:[{id:p,type:"text",value:o}];case"created_by":const y=r.getCreatedByPointer();return y?[{id:y.id,type:"person",value:y}]:[];case"created_time":{const e=r.getCreatedTime();return[{id:e,type:"date",value:(0,Ie.CQ)(e,(0,Fe.r)())}]}case"last_edited_by":{const e=r.getLastEditedByPointer();return e?[{id:e.id,type:"person",value:e}]:[]}case"last_edited_time":{const e=r.getLastEditedTime();return[{id:e,type:"date",value:(0,Ie.CQ)(e,(0,Fe.r)())}]}case"last_visited_time":{const{currentUserId:t}=e;if(!t)return[];const o=(0,ar.Pv)({parent_id:r.id,user_id:t}),n=H.H8.createChildStore(r,{table:ar.UI,id:o,spaceId:r.getSpaceId()}).getModel(),i=null==n?void 0:n.getVisitedAt();if(!i)return[];return[{id:i,type:"date",value:(0,Ie.CQ)(i,(0,Fe.r)())}]}case"rollup":case"location":case"verification":return[];default:(0,co.t1)(s)}}const Cr=["edit"],Pr=i.forwardRef(((e,t)=>{window.__c={n:"TableRollupProperty"};const o=Ir(e,t,(0,y.yK)((()=>({checkboxButtonStyle:{padding:g.sf[b.C.Table].checkbox},textButtonStyle:{padding:g.sf[b.C.Table].text},buttonButtonStyle:{padding:g.sf[b.C.Table].button}})),[]));return i.createElement(br,n()({},o,{numberRightAlign:!0,EmptyComponent:ge.q8,quickActionButtons:Cr}))})),_r=["edit"],xr=i.forwardRef(((e,t)=>{window.__c={n:"PageRollupProperty"};const o=Ir(e,t,(0,y.yK)((()=>({checkboxButtonStyle:{padding:g.sf[b.C.Page].checkbox},textButtonStyle:{padding:g.sf[b.C.Page].text},buttonButtonStyle:{padding:g.sf[b.C.Page].button}})),[]));return i.createElement(br,n()({},o,{quickActionButtons:_r,EmptyComponent:ge.T$}))})),kr=i.forwardRef(((e,t)=>{window.__c={n:"CompactRollupProperty"};const o=Ir(e,t,(0,y.yK)((()=>({checkboxButtonStyle:{padding:g.sf[b.C.CompactPage].checkbox},textButtonStyle:{padding:g.sf[b.C.CompactPage].text},buttonButtonStyle:{padding:g.sf[b.C.CompactPage].button}})),[]));return i.createElement(br,n()({},o,{EmptyComponent:ge.T$}))})),Rr=i.forwardRef(((e,t)=>{window.__c={n:"ListRollupProperty"};const o=Ir(e,t);return i.createElement(br,o)})),Er=i.forwardRef(((e,t)=>{window.__c={n:"BoardRollupProperty"};const o=Ir(e,t,(0,y.yK)((()=>({checkboxButtonStyle:{padding:g.sf[b.C.Board].checkbox},textButtonStyle:{padding:g.sf[b.C.Board].text},buttonButtonStyle:{padding:g.sf[b.C.Board].button}})),[]));return i.createElement(br,o)})),Br=i.forwardRef(((e,t)=>{window.__c={n:"CalendarRollupProperty"};const o=Ir(e,t);return i.createElement(br,o)})),Tr=i.forwardRef(((e,t)=>{window.__c={n:"GalleryRollupProperty"};const o=Ir(e,t);return i.createElement(br,o)})),Mr=i.forwardRef(((e,t)=>{window.__c={n:"TimelineRollupProperty"};const o=Ir(e,t);return i.createElement(br,o)})),Vr=i.forwardRef(((e,t)=>{window.__c={n:"RelationRollupProperty"};const o=Ir(e,t);return i.createElement(br,o)})),Ar=i.forwardRef(((e,t)=>{window.__c={n:"RelationSectionRollupProperty"};const o=Ir(e,t);return i.createElement(br,o)}));function Ir(e,t,o){const{store:r,onContextMenu:n,property:i,collectionStore:l}=e;return{ref:t,store:r,property:i,collectionStore:l,editButtonClickProps:(0,re.Am)(e),onContextMenu:n,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,textButtonStyle:null==o?void 0:o.textButtonStyle,buttonButtonStyle:null==o?void 0:o.buttonButtonStyle}}const Fr=(0,i.forwardRef)(((e,t)=>i.createElement(At,n()({},e,{ref:t})))),Kr=(0,i.forwardRef)(((e,t)=>i.createElement(It,n()({},e,{ref:t})))),Or=(0,i.forwardRef)(((e,t)=>i.createElement(Ft,n()({},e,{ref:t})))),Zr=(0,i.forwardRef)(((e,t)=>i.createElement(Kt,n()({},e,{ref:t})))),Lr=(0,i.forwardRef)(((e,t)=>i.createElement(Ot,n()({},e,{ref:t})))),Hr=(0,i.forwardRef)(((e,t)=>i.createElement(Zt,n()({},e,{ref:t})))),Dr=(0,i.forwardRef)(((e,t)=>i.createElement(Lt,n()({},e,{ref:t})))),zr=(0,i.forwardRef)(((e,t)=>i.createElement(Ht,n()({},e,{ref:t})))),Wr=(0,i.forwardRef)(((e,t)=>i.createElement(Dt,n()({},e,{ref:t})))),Ur=(0,i.forwardRef)(((e,t)=>i.createElement(zt,n()({},e,{ref:t})))),Nr=(0,i.forwardRef)(((e,t)=>i.createElement(Wt,n()({},e,{ref:t})))),qr=i.memo(i.forwardRef(((e,t)=>{const{store:o,onContextMenu:r,property:n,disabled:l,enablePointerEventsForInteractiveTypes:a,editButtonClickProps:s,selectButtonStyle:c,checkboxButtonStyle:u,checkboxShowLabel:m}=e,{baseStyles:f,collectionContextStore:b,propertySchema:g,shouldRenderTooltip:w}=(0,i.useContext)(v.O),C=g,P=(null==f?void 0:f.tokenFormat)??kt.l.Medium,_=(0,p.VK)((()=>o.getPropertyValue(n)),[n,o]),x=(0,i.useMemo)((()=>C?h.ZG(_,C)??"":""),[_,C]),k=(0,p.VK)((()=>{var e;return(null==b||null===(e=b.getPropertyFormat(n))||void 0===e?void 0:e.statusShowAs)??"select"}),[b,n]),R=(0,y.yK)((()=>({buttonStyle:{...f.buttonStyle,..."select"===k?c:u},buttonPressedStyle:f.buttonPressedStyle??{},buttonHoveredStyle:f.buttonHoveredStyle??{}})),[f.buttonHoveredStyle,f.buttonPressedStyle,f.buttonStyle,c,u,k]);return i.createElement(S.Z,{ref:t,onContextMenu:r,editButtonClickProps:s,style:R.buttonStyle,pressedStyle:R.buttonPressedStyle,hoveredStyle:R.buttonHoveredStyle,tooltipPropertyValue:w&&"checkbox"===k?x:void 0},"checkbox"===k?d()($r,{enablePointerEventsForInteractiveTypes:a,showLabel:m,propertyName:null==C?void 0:C.name,propertyValue:_,statusValue:x,editButtonClickProps:s,containerRef:t,store:o,property:n,disabled:l}):d()(Gr,{statusValue:x,tokenFormat:P}))})));function Gr(e){window.__c={n:"StatusSelectPropertyValue"};const{statusValue:t}=e,{propertySchema:o}=(0,i.useContext)(v.O),r=o,{foundOption:n,foundGroup:l}=(0,i.useMemo)((()=>{const e=(null==r?void 0:r.options)??[],o=e.find((e=>e.value===t)),n=(null==r?void 0:r.groups)??[],i=o&&n.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(o.id)}));return{options:e,foundOption:o,foundGroup:i}}),[r,t]);return n?d()(Xe.K,{},void 0,d()(Tt.J,{type:"status",value:n.value,color:n.color,groupColor:null==l?void 0:l.color})):null}function $r(e){window.__c={n:"StatusCheckboxPropertyValue"};const{propertyName:t,propertyValue:o,statusValue:r,showLabel:n,enablePointerEventsForInteractiveTypes:l,editButtonClickProps:a,containerRef:s,store:c,property:p,disabled:y}=e,{propertySchema:m,shouldRenderTooltip:f}=(0,i.useContext)(v.O),S=m,b=le(c,p,y),g=(0,u.O7)(),w=(0,i.useMemo)((()=>!!S&&h.rO(o,S,L.default.getIntl())),[o,S]),C=(0,i.useCallback)((async e=>{const t=e.altKey;await pr.z({...a,element:s&&"current"in s?(null==s?void 0:s.current)??void 0:void 0,environment:g,statusSetCheckbox:!t})}),[s,a,g]);return d()(ne.n,{onClick:C,propertyLabel:n?t:void 0,checked:w,enablePointerEventsForInteractiveTypes:l,tooltip:f?void 0:r,disabled:b})}const Qr=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableStatusProperty"};const o=an(e,t,(0,y.yK)((()=>({checkboxButtonStyle:{padding:g.sf[b.C.Table].checkbox}})),[]));return i.createElement(qr,n()({},o,{checkboxShowLabel:!1}))})),Yr=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageStatusProperty"};const{store:o,property:r,collectionStore:l}=e,a=an(e,t,(0,y.yK)((()=>({checkboxButtonStyle:{padding:g.sf[b.C.Page].checkbox}})),[]));return d()(po.O,{store:o,property:r,collectionStore:l},void 0,i.createElement(qr,n()({},a,{checkboxShowLabel:!1})))})),jr=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CompactStatusProperty"};const o=an(e,t,(0,y.yK)((()=>({checkboxButtonStyle:{padding:g.sf[b.C.CompactPage].checkbox}})),[]));return i.createElement(qr,n()({},o,{checkboxShowLabel:!1}))})),Jr=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListStatusProperty"};const o=an(e,t);return i.createElement(qr,n()({},o,{checkboxShowLabel:!1}))})),Xr=(0,i.forwardRef)(((e,t)=>{window.__c={n:"BoardStatusProperty"};const o=an(e,t,(0,y.yK)((()=>({checkboxButtonStyle:{padding:g.sf[b.C.Board].checkbox}})),[]));return i.createElement(qr,n()({},o,{checkboxShowLabel:!0}))})),en=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CalendarStatusProperty"};const o=an(e,t);return i.createElement(qr,n()({},o,{checkboxShowLabel:!0}))})),tn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"GalleryStatusProperty"};const o=an(e,t);return i.createElement(qr,n()({},o,{checkboxShowLabel:!0}))})),on=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TimelineStatusProperty"};const o=an(e,t);return i.createElement(qr,n()({},o,{checkboxShowLabel:!1}))})),rn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationStatusProperty"};const o=an(e,t);return i.createElement(qr,n()({},o,{checkboxShowLabel:!1}))})),nn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionStatusProperty"};const o=an(e,t);return i.createElement(qr,n()({},o,{checkboxShowLabel:!1}))})),ln=(0,i.forwardRef)(((e,t)=>{window.__c={n:"MiniPeekStatusProperty"};const o=an(e,t);return i.createElement(qr,n()({},o,{checkboxShowLabel:!1}))}));function an(e,t,o){const{store:r,disabled:n,property:l,onContextMenu:a,enablePointerEventsForInteractiveTypes:s}=e,{collectionContextStore:c}=(0,i.useContext)(v.O),d=(0,p.VK)((()=>{var e;return"checkbox"===((null==c||null===(e=c.getPropertyFormat(l))||void 0===e?void 0:e.statusShowAs)??"select")}),[c,l]),u=(0,re.Am)(e,{isStatusCheckbox:d});return{ref:t,store:r,disabled:n,property:l,selectButtonStyle:null==o?void 0:o.selectButtonStyle,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,editButtonClickProps:u,onContextMenu:a,enablePointerEventsForInteractiveTypes:s}}var sn=o(20669),cn=o(72899),dn=o(12921),un=o(85957),pn=o(79576),yn=o(19671),mn=o(13023),hn=o(83212);function fn(e){window.__c={n:"AIAutofillButton"};const{store:t,property:o}=e,r=(0,u.O7)(),n=(0,y.Fg)(),{propertySchema:l,format:a,collectionContextStore:s,isEmpty:c,isReadOnly:m}=(0,i.useContext)(v.O),h=(0,i.useCallback)((async()=>{if(!l)return;const e=(0,un.wq)(t)?mn.Z:yn.Z;te.bA({blockPropertyValueOverlayStore:e,collectionContextStore:s,format:a,environment:r,store:t,property:o});const n=pn.W.setIsWriting({propertySchema:l,stores:[t]});(await cn.l4.loader()).autofillPropertyForBlocks({environment:r,stores:[t],property:o,propertySchema:l,userEventForAnalytics:"generate_from_action_button",collectionContextStore:s,sessionIdForAnalytics:n,from:Nt.Sy(a)})}),[s,r,a,o,l,t]);return(0,p.VK)((()=>!m&&(!r.device.isMobile||c)&&(0,dn.RT)(r,hn.Z.getMode(r,t),t)&&(0,Eo.q3)(l)),[r,m,c,l,t])?d()(hr,{icon:sn.y,iconStyle:{fill:n.aiPurpleColor},tooltip:L.default.formatMessage(Sn.update),onClick:h}):null}const Sn=(0,K.defineMessages)({update:{defaultMessage:"Update",id:"database.editButton.autofillWithAiTooltip"}});var vn=o(18746);const bn=i.memo((0,i.forwardRef)(((e,t)=>{const{store:o,buttonStyle:r,onContextMenu:n,editButtonClickProps:l,quickActionButtons:a=[],EmptyComponent:s,property:c}=e,{isEmpty:u,baseStyles:m}=(0,i.useContext)(v.O),h=(0,p.VK)((()=>o.getPropertyValue(c)),[c,o]),f=(0,y.yK)((()=>({buttonStyle:{...m.buttonStyle,...r},buttonPressedStyle:m.buttonPressedStyle??{},buttonHoveredStyle:m.buttonHoveredStyle??{}})),[m.buttonHoveredStyle,m.buttonPressedStyle,m.buttonStyle,r]);return u&&void 0===s?null:i.createElement(S.Z,{ref:t,style:f.buttonStyle,hoveredStyle:f.buttonHoveredStyle,pressedStyle:f.buttonPressedStyle,onContextMenu:n,editButtonClickProps:l,quickActionButtons:a},u&&void 0!==s?d()(s,{}):d()(w.Y,{},void 0,d()(vn.A,{textValue:h,parentStore:o})))}))),gn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"PageTextProperty"};const{store:o,property:r,format:l,collectionStore:a}=e,s=(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].text}})),[]),c=(0,p.VK)((()=>a.getSchema()),[a]),u=(0,i.useMemo)((()=>i.createElement(i.Fragment,null,d()(fn,{store:o,property:r},"autofill"),d()(f.Z,{store:o,schema:c,property:r,format:l},"copy"))),[l,r,c,o]),m=Mn(e,t,s);return i.createElement(bn,n()({},m,{EmptyComponent:ge.T$,quickActionButtons:u}))})),wn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableTextProperty"};const{store:o,property:r,format:l,collectionStore:a}=e,{isMobile:s}=(0,u.Fy)(),c=(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].text}})),[]),m=(0,p.VK)((()=>a.getSchema()),[a]),h=(0,i.useMemo)((()=>i.createElement(i.Fragment,null,d()(fn,{store:o,property:r},"autofill"),s?void 0:d()(f.Z,{store:o,schema:m,property:r,format:l},"copy"))),[l,s,r,m,o]),S=Mn(e,t,c);return i.createElement(bn,n()({},S,{EmptyComponent:ge.q8,quickActionButtons:h}))})),Cn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CompactTextProperty"};const o=Mn(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].text,maxWidth:"300px"}})),[]));return i.createElement(bn,n()({},o,{EmptyComponent:ge.T$}))})),Pn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListTextProperty"};const{showIfEmpty:o}=e,r=Mn(e,t);return i.createElement(bn,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),_n=(0,i.forwardRef)(((e,t)=>{window.__c={n:"BoardTextProperty"};const{showIfEmpty:o}=e,r=Mn(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].text}})),[]));return i.createElement(bn,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),xn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"CalendarTextProperty"};const o=Mn(e,t);return i.createElement(bn,o)})),kn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"GalleryTextProperty"};const{showIfEmpty:o}=e,r=Mn(e,t);return i.createElement(bn,n()({},r,{EmptyComponent:o?ge.s3:void 0}))})),Rn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TimelineTextProperty"};const o=Mn(e,t);return i.createElement(bn,o)})),En=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationTextProperty"};const o=Mn(e,t);return i.createElement(bn,o)})),Bn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionTextProperty"};const o=Mn(e,t);return i.createElement(bn,o)})),Tn=(0,i.forwardRef)(((e,t)=>{window.__c={n:"MiniPeekTextProperty"};const o=Mn(e,t);return i.createElement(bn,n()({},o,{EmptyComponent:ge.a4}))}));function Mn(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,re.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var Vn=o(92785),An=o(95855),In=o(54497),Fn=o(23867),Kn=o(82990),On=o(64002),Zn=o(8406),Ln=o(76427),Hn=o(9953),Dn=o(24677),zn=o(98104),Wn=o(60682),Un=o(28020),Nn=o(14976),qn=o(52821),Gn=o(41232),$n=o(65598),Qn=o(19511),Yn=o(20362),jn=o(31278),Jn=o(65187),Xn=o(50906),ei=o(75079);function ti(e){window.__c={n:"TitlePropertyEditButton"};const{store:t}=e,o=(0,u.O7)(),r=(0,Vo.DK)(),l=(0,i.useCallback)((()=>{const e=t.getBlockTitleStore();Ln.Z5({store:t}),Dn.eP({environment:o,store:t}),zn.NX({store:e}),Xn.sdb(o,"list_item_edit_mode_enter",{...(0,ei.Pn)(r),block_id:t.id,from:"click",view_type:"list"})}),[t,o,r]),a=(0,y.yK)((e=>({buttonStyle:{color:e.mediumTextColor,fill:e.mediumTextColor,height:24,width:30},iconStyle:{color:e.mediumTextColor,fill:e.mediumTextColor}})),[]);return d()(Et.Z,{renderTooltip:()=>d()(K.FormattedMessage,{defaultMessage:"Edit",id:"collectionViewItem.edit.tooltip"}),render:e=>i.createElement(mr.Z,n()({icon:ur.R,ariaLabel:"edit",onClick:l,hasBackground:!0,showShadow:!0,style:a.buttonStyle,iconStyle:a.iconStyle},e))})}var oi=o(15145),ri=o(75018),ni=o(78316),ii=o(84210),li=o(80444);const ai=(0,K.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"}});function si(e){window.__c={n:"TitlePropertyPeekButton"};const{store:t,handleOpenPeekPage:o,showLabel:r,showIcon:l}=e,a=(0,u.O7)(),s=(0,Vo.DK)(),c=(0,p.VK)((()=>null==s?void 0:s.collectionViewStore()),[s]),{peekModeProps:m}=(0,p.VK)((()=>{const e=void 0!==c?ni.kr(c):"full_page";return{peekModeProps:(0,Nt.X9)(e,!1)}}),[c],{useDeepEqual:!0}),h=(0,p.VK)((()=>(0,ii.ZP)({store:t,fullyQualified:!1,pageVisitSource:oi.tY.LinkInPage})),[t]),f=(0,i.useCallback)((()=>{const{mainEditorCurrentBlockStore:e}=li.default.state;return ni.mb({store:t,mainEditorCurrentBlockStore:e,collectionContextStore:s,fullyQualified:!1})}),[t,s]),S=(0,i.useCallback)((e=>{if(e.metaKey||e.ctrlKey)ri.navigate({environment:a,url:h,openInNew:"tab"});else{const e=f();e&&(o&&o(),ri.navigate({environment:a,url:e}))}}),[a,f,h,o]),v=(0,i.useCallback)((e=>{1===e.button&&ri.navigate({environment:a,url:h,openInNew:"tab"})}),[a,h]),b=(0,y.yK)((e=>({buttonStyle:{color:e.mediumTextColor,fill:e.mediumTextColor,...!r&&{width:30,height:24},background:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,border:void 0,fontSize:12,fontWeight:Kn.Z.fontWeight.medium,textTransform:"uppercase",letterSpacing:.5},buttonHoveredStyle:{background:e.whiteButtonHoveredBackground},buttonPressedStyle:{background:e.whiteButtonPressedBackground},iconStyle:{color:e.mediumTextColor,fill:e.mediumTextColor}})),[r]);return d()(Et.Z,{renderTooltip:()=>m.tooltip,render:e=>d()("div",{onAuxClick:v},void 0,i.createElement(z.Z,n()({onClick:S,icon:l?m.icon:void 0,ariaLabel:m.tooltip,isSmall:!0,style:b.buttonStyle,iconStyle:b.iconStyle,hoveredStyle:b.buttonHoveredStyle,pressedStyle:b.buttonPressedStyle},e),r?L.default.formatMessage(ai.openAsPageTitle):void 0))})}const ci=i.memo((0,i.forwardRef)(((e,t)=>{const{store:o,collectionStore:r,buttonStyle:n,textStyle:l,recordIconStyle:a,format:s,editButtonClickProps:c,onContextMenu:m,quickActionButtons:h,quickActionButtonsStyle:f,onTab:b,onUntab:g,forceMouseEntered:w,iconActionFrom:C,iconSize:P,showIcon:_,hidePlaceholderText:x,property:k,isInlineEditable:R,linkifyText:E}=e,B=(0,u.O7)(),T=(0,y.Fg)(),{baseStyles:M,collectionContextStore:V,isReadOnly:A,propertySchema:I}=(0,i.useContext)(v.O),F=(0,p.VK)((()=>(0,qn.JI)(o)),[o],{useDeepEqual:!0}),K=(0,p.VK)((()=>{if(!R)return;const e=Qn.Z.state;return Boolean(e.isActive&&e.store.id===o.id)}),[R,o.id]),{icon:O,iconStore:Z,isEmptyPage:H,recordTable:D,blockType:z,hasError:W}=(0,p.VK)((()=>{var e;return{icon:o.getIcon(),iconStore:o.getIconStore(),isEmptyPage:o.isEmptyPage(),recordTable:null===(e=o.getIconStore())||void 0===e?void 0:e.table,blockType:o.getType(),hasError:o.hasError()}}),[o],{useDeepEqual:!0}),U=(0,p.VK)((()=>$n.Xp(o,{recursivelyLoadAllDiscussions:!1})),[o]),N=(0,Eo.us)(k),q=(0,p.VK)((()=>{if(!N)return E?Nt.Hw({store:o,propertySchema:I,property:k}):void 0;const e=o.getFormatStore().getKeyStore("uri").getValue(),t=e&&On.Nm({str:e,allowNoProtocol:!1});return t&&(0,Gn.pI)(t,o.pointer.spaceId)}),[N,o,E,I,k]),G=(0,y.yK)((()=>({textStyle:{...M.textStyle,display:"inline",fontWeight:Kn.Z.fontWeight.medium,...l},buttonStyle:{...M.buttonStyle,...n},quickActionButtonsStyle:{...f},buttonPressedStyle:{...M.buttonPressedStyle,background:"none"},buttonHoveredStyle:{...M.buttonHoveredStyle,background:"none"},recordIconStyle:{display:"inline-flex",verticalAlign:"text-top",...a},link:{display:"inline"},discussionIndicator:{display:"inline-flex",alignItems:"center",color:T.lightTextColor,fontSize:12,fontWeight:Kn.Z.fontWeight.semibold,marginLeft:8,verticalAlign:"text-top"},errorIcon:{display:"inline-block",verticalAlign:"text-top",marginLeft:1,marginRight:7,paddingBottom:4,width:16,fill:T.accentColors.orange[500]}})),[M.buttonHoveredStyle,M.buttonPressedStyle,M.buttonStyle,M.textStyle,n,f,a,l,T]),$=(0,i.useCallback)((()=>{V&&N&&Zn.YU({environment:B,collectionContextStore:V,block_id:o.id,property:k,from:Nt.Sy(s),is_external_title_property_id:!0})}),[V,B,s,k,o.id,N]),Q=(0,i.useCallback)((e=>{Z&&oe.createAndCommit({userAction:"TitleProperty.handleRecordIconChange",environment:B,perform:t=>{Hn.sO({store:Z,value:e,transaction:t})}})}),[B,Z]),Y=(0,i.useCallback)((e=>{"Enter"!==(null==e?void 0:e.key)&&Ln.IH({store:o})}),[o]),j=(0,i.useCallback)((()=>{Qn.Z.setState({isActive:!1}),zn.ZH(B),Dn.Ys({environment:B,store:o})}),[o,B]),J=(0,p.VK)((()=>{var e;if(R){const e=x?void 0:K?L.default.formatMessage(mi.typeAName):L.default.formatMessage(mi.untitledBlock);return d()(Jn.Z,{store:F,disabled:!K,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableEmbedMenu:!0,disableShiftEnter:!0,onEnter:j,onEsc:j,onTab:b,onUntab:g,onChange:Y,placeholder:e,style:G.textStyle,disableSelectAllBlocks:!0,pasteBehavior:"inline"})}let t=null===(e=o.getTitleStore())||void 0===e?void 0:e.getValue();o.isType("external_object_instance_page")&&(t=o.getPropertyValue(k));const r=Nn.IY({environment:B,textValue:t&&{value:t,spaceId:(0,Fn.C)(o.pointer.spaceId)},parentStore:o,disableHover:!0,disableStyleAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,theme:T,emojiType:(0,Wn.e_)(B),katex:B.KatexStore.getKatex(),formulaValueTypes:[]});return d()("span",{style:G.textStyle},void 0,r)}),[F,B,x,R,K,Y,b,g,k,o,G.textStyle,T,j]),X=(0,i.useMemo)((()=>W?(0,In.t)(G.errorIcon):"withContent"===_&&void 0===O&&H?null:d()(jn.Z,A?{disabled:!0,icon:O,isEmptyPage:H,size:P,style:G.recordIconStyle}:{disabled:!1,bucket:"secure",store:o,icon:O,isEmptyPage:H,size:P,iconLoggingData:{collection_id:r.id,recordTable:D,source:C,block_type:z},style:G.recordIconStyle,onChange:Q})),[z,r.id,Q,W,O,C,H,A,P,D,_,o,G.errorIcon,G.recordIconStyle]),ee=(0,i.useMemo)((()=>U>0&&d()("span",{style:G.discussionIndicator},"discussion-indicator",(0,An.z)({width:14,height:14,marginRight:4,fill:T.mediumIconColor}),U)),[U,G.discussionIndicator,T.mediumIconColor]);return i.createElement(S.Z,{ref:t,editButtonClickProps:c,onContextMenu:m,style:G.buttonStyle,pressedStyle:G.buttonPressedStyle,hoveredStyle:G.buttonHoveredStyle,quickActionButtons:h,quickActionButtonsStyle:G.quickActionButtonsStyle,quickActionButtonsForceVisible:B.device.isMobile?void 0:w,tooltipHide:!0},X,!K&&q?d()(Yn.Z,{href:q,external:N,onClick:$,style:G.link},void 0,J):J,ee)}))),di=(0,i.forwardRef)(((e,t)=>{window.__c={n:"TableTitleProperty"};const{store:o,handleOpenPeekPage:r,width:l}=e,{isMobile:a}=(0,u.Fy)(),{isReadOnly:s}=(0,i.useContext)(v.O),c=(0,y.yK)((e=>({buttonStyle:{padding:"5px 8px"},textStyle:{...Nt.z0(e)},recordIconStyle:{height:22,width:22,margin:"-2px 3px 0px -2px"}})),[]),p=(0,i.useMemo)((()=>d()(si,{handleOpenPeekPage:r,store:o,showLabel:a||void 0===l||l>100,showIcon:!a})),[r,a,o,l]),m=yi(e,t,c);return i.createElement(ci,n()({},m,{iconActionFrom:"collection_table_view",showIcon:"withContent",iconSize:20,hidePlaceholderText:!0,quickActionButtons:p,linkifyText:s}))})),ui=(0,i.forwardRef)(((e,t)=>{window.__c={n:"ListTitleProperty"};const{store:o}=e,{isReadOnly:r}=(0,i.useContext)(v.O),{isPhone:l,isMobile:a}=(0,u.Fy)(),s=(0,p.VK)((()=>{const e=Qn.Z.state;return Boolean(e.isActive&&e.store.id===o.id)}),[o]),{collectionContextStore:c}=(0,i.useContext)(v.O),m=(0,p.VK)((()=>{const e=null==c?void 0:c.collectionViewBlockStore();return!!e&&(0,Un.aT)(e.id)}),[c]),h=(0,y.yK)((e=>({buttonStyle:{marginLeft:0,marginRight:"auto",maxWidth:m?"100%":"max(75%, 400px)",minWidth:l?void 0:240,padding:0},textStyle:{fontSize:m?14:16,whiteSpace:s?"normal":"nowrap",pointerEvents:s?void 0:"none",cursor:s?"text":void 0,borderBottom:`1px solid ${e.tableDividerColor}`,width:"auto"},recordIconStyle:{marginRight:5},actionButton:{marginLeft:10,marginRight:1,order:3}})),[s,l,m]),f=(0,i.useMemo)((()=>!a&&(!r&&!s?d()(ti,{store:o}):d()(si,{store:o,showLabel:!1,showIcon:!0}))),[s,a,r,o]),S=yi(e,t,h);return i.createElement(ci,n()({},S,{iconActionFrom:"collection_list_view",showIcon:"always",iconSize:m?20:22,editButtonClickProps:void 0,quickActionButtonsStyle:h.actionButton,quickActionButtons:f,isInlineEditable:!0}))})),pi=(0,i.forwardRef)(((e,t)=>{window.__c={n:"UnsupportedTitleProperty"},Vn.log({level:"error",from:"BlockPropertyValue",type:"BlockPropertyValue.InvalidTitlePropertyFormat"});const o=yi(e,t);return i.createElement(ci,n()({},o,{iconActionFrom:"collection_table_view",showIcon:"always",iconSize:20}))}));function yi(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l,format:a,onTab:s,onUntab:c,forceMouseEntered:d}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,re.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle,textStyle:null==o?void 0:o.textStyle,recordIconStyle:null==o?void 0:o.recordIconStyle,quickActionButtonsStyle:null==o?void 0:o.quickActionButtonsStyle,format:a,onTab:s,onUntab:c,forceMouseEntered:d}}const mi=(0,K.defineMessages)({untitledBlock:{defaultMessage:"Untitled",id:"collectionViewItemTitle.untitledBlock"},typeAName:{defaultMessage:"Type a name",id:"collectionViewItemTitle.itemName.placeholder"}});var hi=o(4308),fi=o(19870),Si=o(58230);const vi=i.memo(i.forwardRef(((e,t)=>{var o;const{property:r,collectionStore:n,store:l,buttonStyle:a,editButtonClickProps:s,EmptyComponent:c}=e,{isReadOnly:u,propertySchema:m,baseStyles:f}=(0,i.useContext)(v.O),b=m,g=(0,p.VK)((()=>n.getSchema()),[n]),w=(0,p.VK)((()=>!!b&&qn._W(b,l,g)),[b,g,l]),C=u||!w,P=(0,y.yK)((e=>({buttonStyle:{...f.buttonStyle,...a,cursor:C?"text":"pointer"},buttonPressedStyle:f.buttonPressedStyle??{},buttonHoveredStyle:f.buttonHoveredStyle??{},secondaryTooltipText:{color:e.mediumInvertedTextColor}})),[f.buttonHoveredStyle,f.buttonPressedStyle,f.buttonStyle,a,C]),_=(0,p.VK)((()=>{const e=l.getPropertyValue(r);return(0,h._w)(e)}),[r,l]),x=(0,i.useMemo)((()=>(0,hi.WN)(_)),[_]),k=(0,i.useMemo)((()=>{if("none"!==x.type)return d()(Si.Z,{verificationState:x,blockStore:l})}),[l,x]),R=(0,i.useMemo)((()=>{var e;if(!!w)return;const t=null==b?void 0:b.verifier_property,o=t?null===(e=g[t])||void 0===e?void 0:e.name:void 0;return d()(bi,{verifierPropertyName:o})}),[w,g,b]),E="none"===x.type;return E&&void 0===c?null:i.createElement(S.Z,{ref:t,editButtonClickProps:C?void 0:s,style:P.buttonStyle,hoveredStyle:P.buttonHoveredStyle,pressedStyle:P.buttonPressedStyle,tooltipPropertyValue:k,tooltipPropertyCaption:R},E&&void 0!==c?d()(c,{}):d()(fi.z,{verificationValue:_,fontSize:null===(o=f.buttonStyle)||void 0===o?void 0:o.fontSize}))})));function bi(e){const{verifierPropertyName:t}=e;return d()(K.FormattedMessage,t?{defaultMessage:"Only people listed in {verifierPropertyName} can verify this page",id:"VerificationPropertyButton.tooltip.editRestrictedToVerifier",values:{verifierPropertyName:d()("span",{style:{fontWeight:Kn.Z.fontWeight.bold}},void 0,t)}}:{defaultMessage:"Only page owners can verify this page",id:"VerificationPropertyButton.tooltip.editRestrictedToOwner"})}const gi=i.forwardRef(((e,t)=>{window.__c={n:"TableVerificationProperty"};const o=Ti(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Table].text}})),[]));return i.createElement(vi,n()({},o,{EmptyComponent:ge.q8}))})),wi=i.forwardRef(((e,t)=>{window.__c={n:"PageVerificationProperty"};const o=Ti(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Page].text}})),[]));return i.createElement(vi,n()({},o,{EmptyComponent:ge.T$}))})),Ci=i.forwardRef(((e,t)=>{window.__c={n:"CompactVerificationProperty"};const o=Ti(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.CompactPage].text}})),[]));return i.createElement(vi,n()({},o,{EmptyComponent:ge.T$}))})),Pi=i.forwardRef(((e,t)=>{window.__c={n:"ListVerificationProperty"};const{collectionStore:o,store:r,showIfEmpty:l}=e,{propertySchema:a}=(0,i.useContext)(v.O),s=a,c=(0,p.VK)((()=>o.getSchema()),[o]),d=(0,p.VK)((()=>!!s&&qn._W(s,r,c)),[s,c,r]),u=Ti(e,t);return i.createElement(vi,n()({},u,{EmptyComponent:l&&d?ge.s3:void 0}))})),_i=i.forwardRef(((e,t)=>{window.__c={n:"BoardVerificationProperty"};const{collectionStore:o,store:r,showIfEmpty:l}=e,{propertySchema:a}=(0,i.useContext)(v.O),s=a,c=(0,p.VK)((()=>o.getSchema()),[o]),d=(0,p.VK)((()=>!!s&&qn._W(s,r,c)),[s,c,r]),u=Ti(e,t,(0,y.yK)((()=>({buttonStyle:{padding:g.sf[b.C.Board].text}})),[]));return i.createElement(vi,n()({},u,{EmptyComponent:l&&d?ge.s3:void 0}))})),xi=i.forwardRef(((e,t)=>{window.__c={n:"CalendarVerificationProperty"};const o=Ti(e,t);return i.createElement(vi,o)})),ki=i.forwardRef(((e,t)=>{window.__c={n:"GalleryVerificationProperty"};const o=Ti(e,t);return i.createElement(vi,o)})),Ri=i.forwardRef(((e,t)=>{window.__c={n:"TimelineVerificationProperty"};const o=Ti(e,t);return i.createElement(vi,o)})),Ei=i.forwardRef(((e,t)=>{window.__c={n:"RelationVerificationProperty"};const o=Ti(e,t);return i.createElement(vi,o)})),Bi=i.forwardRef(((e,t)=>{window.__c={n:"RelationSectionVerificationProperty"};const o=Ti(e,t);return i.createElement(vi,o)}));function Ti(e,t,o){const{store:r,collectionStore:n,property:i,onClick:l,onContextMenu:a}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,re.Am)(e),onClick:l,onContextMenu:a,buttonStyle:null==o?void 0:o.buttonStyle}}function Mi(e){window.__c={n:"BlockPropertyRouter"};const{property:t,collectionStore:o,format:r}=e,{type:c}=(0,re.PJ)(o,t)||{},d=(0,i.useContext)(a.Ue),u=(0,i.useRef)(null),p=(0,re.Ri)(o,t);if((0,l.c)(s.Z,(()=>({getNode:()=>{const{current:e}=u;return e?"getNode"in e?e.getNode():e:null},getProps:()=>({...e,property:p}),getContextHorizontalScroller:()=>null==d?void 0:d.horizontalScroller,getContextVerticalScroller:()=>null==d?void 0:d.verticalScroller})),[e]),!c)return null;const y=Ai[r][c];return null===y?null:i.createElement(v.Z,n()({},e,{property:p,containerRef:u}),i.createElement(y,n()({ref:u},e,{property:p})))}const Vi=null,Ai={[b.C.Table]:{checkbox:ae,created_by:fo,created_time:He,date:He,email:Ce,file:tt,formula:pt.n8,last_edited_by:fo,last_edited_time:He,last_visited_time:He,location:ht,multi_select:At,number:Qt,person:fo,phone_number:Ce,relation:zo,rollup:Pr,select:Fr,status:Qr,text:wn,title:di,url:Ce,verification:gi,auto_increment_id:x,button:U},[b.C.Board]:{checkbox:ue,created_by:wo,created_time:We,date:We,email:ke,file:it,formula:pt.mm,last_edited_by:wo,last_edited_time:We,last_visited_time:We,location:bt,multi_select:Ot,number:Jt,person:wo,phone_number:ke,relation:qo,rollup:Er,select:Lr,status:Xr,text:_n,title:pi,url:ke,verification:_i,auto_increment_id:E,button:$},[b.C.Calendar]:{checkbox:pe,created_by:Co,created_time:Ue,date:Ue,email:Re,file:lt,formula:pt.yJ,last_edited_by:Co,last_edited_time:Ue,last_visited_time:Ue,location:gt,multi_select:Zt,number:Xt,person:Co,phone_number:Re,relation:Go,rollup:Br,select:Hr,status:en,text:xn,title:pi,url:Re,verification:xi,auto_increment_id:B,button:Q},[b.C.ListView]:{checkbox:de,created_by:go,created_time:ze,date:ze,email:xe,file:nt,formula:pt.p5,last_edited_by:go,last_edited_time:ze,last_visited_time:ze,location:vt,multi_select:Kt,number:jt,person:go,phone_number:xe,relation:No,rollup:Rr,select:Zr,status:Jr,text:Pn,title:ui,url:xe,verification:Pi,auto_increment_id:R,button:G},[b.C.GalleryView]:{checkbox:ye,created_by:Po,created_time:Ne,date:Ne,email:Ee,file:at,formula:pt.tD,last_edited_by:Po,last_edited_time:Ne,last_visited_time:Ne,location:wt,multi_select:Lt,number:eo,person:Po,phone_number:Ee,relation:$o,rollup:Tr,select:Dr,status:tn,text:kn,title:pi,url:Ee,verification:ki,auto_increment_id:T,button:Y},[b.C.Timeline]:{checkbox:me,created_by:_o,created_time:qe,date:qe,email:Be,file:st,formula:pt.uS,last_edited_by:_o,last_edited_time:qe,last_visited_time:qe,location:Ct,multi_select:Ht,number:to,person:_o,phone_number:Be,relation:Qo,rollup:Mr,select:zr,status:on,text:Rn,title:pi,url:Be,verification:Ri,auto_increment_id:M,button:j},[b.C.Page]:{checkbox:se,created_by:So,created_time:Le,date:Le,email:Pe,file:ot,formula:pt.wC,last_edited_by:So,last_edited_time:Le,last_visited_time:Le,location:ft,multi_select:It,number:$t,person:So,phone_number:Pe,relation:Wo,rollup:xr,select:Kr,status:Yr,text:gn,title:pi,url:Pe,verification:wi,auto_increment_id:_,button:N},[b.C.CompactPage]:{checkbox:ce,created_by:vo,created_time:De,date:De,email:_e,file:rt,formula:pt.lE,last_edited_by:vo,last_edited_time:De,last_visited_time:De,location:St,multi_select:Ft,number:Yt,person:vo,phone_number:_e,relation:Uo,rollup:kr,select:Or,status:jr,text:Cn,title:pi,url:_e,verification:Ci,auto_increment_id:k,button:q},[b.C.Relation]:{checkbox:he,created_by:xo,created_time:Ge,date:Ge,email:Te,file:ct,formula:pt.eQ,last_edited_by:xo,last_edited_time:Ge,last_visited_time:Ge,location:Pt,multi_select:Dt,number:oo,person:xo,phone_number:Te,relation:Yo,rollup:Vr,select:Wr,status:rn,text:En,title:pi,url:Te,verification:Ei,auto_increment_id:V,button:J},[b.C.RelationSection]:{checkbox:fe,created_by:ko,created_time:$e,date:$e,email:Me,file:dt,formula:pt.CJ,last_edited_by:ko,last_edited_time:$e,last_visited_time:$e,location:_t,multi_select:zt,number:ro,person:ko,phone_number:Me,relation:jo,rollup:Ar,select:Ur,status:nn,text:Bn,title:pi,url:Me,verification:Bi,auto_increment_id:A,button:X},[b.C.Mini]:{checkbox:Se,created_by:Vi,created_time:Vi,date:Qe,email:Ve,file:Vi,formula:Vi,last_edited_by:Vi,last_edited_time:Vi,last_visited_time:Vi,location:Vi,multi_select:Wt,number:no,person:bo,phone_number:Ve,relation:Jo,rollup:Vi,select:Nr,status:ln,text:Tn,title:pi,url:Ve,verification:Vi,auto_increment_id:Vi,button:Vi}},Ii=i.memo(Mi)},96310:(e,t,o)=>{o.d(t,{Z:()=>r});const r=32},11977:(e,t,o)=>{o.d(t,{Z:()=>We});var r=o(23174),n=o.n(r),i=(o(57658),o(67294)),l=o(83355),a=o(1302),s=o(480),c=o(24405),d=o(66897),u=o(17215),p=o(41432),y=o(99036),m=o(80951),h=o(45433),f=o(40506),S=o(20669),v=o(76725),b=o(72126),g=o(21202),w=o(6287),C=o(3791),P=o(70203),_=o(95371),x=o(97880),k=o(82990),R=o(63143),E=o(5366),B=o(50906),T=o(8406),M=o(51365),V=o(26797),A=o(98834),I=o(76427),F=o(19785),K=o(9953),O=o(79978),Z=o(39699),L=o(44866),H=o(66890),D=o(28020),z=o(49616),W=o(75079),U=o(78316),N=o(12921),q=o(17809),G=o(88804),$=o(87279),Q=o(77907),Y=o(18245),j=o(1018),J=o(79576),X=o(69454),ee=o(57559),te=o(78291),oe=o(73420),re=o(56940),ne=o(3386),ie=o(91839),le=o(68785),ae=o(78140),se=o(40721),ce=o(89728),de=o(53437),ue=o(64369),pe=o(16972),ye=o(72589),me=o(83785),he=o(3044),fe=o(18145),Se=o(21121),ve=o(56633),be=o(56596),ge=o(65187),we=o(68750),Ce=o(32056),Pe=o(33846),_e=o(74194),xe=o(83197);class ke extends l.Z{constructor(){super(...arguments),this.storeTypes={inputStore:Pe.Z},this.handleInputChange=e=>{const t=e.target.value;this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:t}),this.props.onChange(this.parseInputChange(t))}}willMount(e){super.willMount(e);const{value:t,format:o,insertChar:r,intl:n}=e;r?(this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:r}),this.props.onChange(this.parseInputChange(r))):this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:Ce.uf(t,o,n)||""})}renderComponent(){const{disabled:e}=this.props;return n()(ne.Z,{capture:!e,onDelete:b.yR,onSpace:b.yR,onBackspace:b.yR,onLeft:b.yR,onRight:b.yR,onUp:b.yR,onDown:b.yR,onSelectAll:b.yR,onRedo:b.yR,onUndo:b.yR,onCut:b.yR,onCopy:b.yR,onPaste:b.yR,onKeypress:b.yR},void 0,n()(_e.Z,{style:{...xe.F,display:"block"},value:this.stores.inputStore.state.inputValue,format:_e.Z.Format.Transparent,onChange:this.handleInputChange,inputStyle:this.getInputStyle(),focus:!e,disabled:e}))}getInputStyle(){const{isTable:e}=this.props;return{textAlign:e?"right":"left"}}parseInputChange(e){this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:e});let t=Ce.p3(e);return"percent"===this.props.format&&void 0!==t&&(t/=100),t}}ke.displayName="NumberPropertyValue";const Re=(0,E.injectIntl)(ke);class Ee extends l.Z{constructor(){super(...arguments),this.storeTypes={inputStore:Pe.Z},this.handleInputChange=e=>{const{onChange:t}=this.props,o=e.target.value;this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:o}),t(o)}}willMount(e){super.willMount(e);const{value:t}=e;this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:t||""})}renderComponent(){const{disabled:e}=this.props;return n()(ne.Z,{capture:!e,onDelete:b.yR,onSpace:b.yR,onBackspace:b.yR,onLeft:b.yR,onRight:b.yR,onUp:b.yR,onDown:b.yR,onSelectAll:b.yR,onRedo:b.yR,onUndo:b.yR,onCut:b.yR,onCopy:b.yR,onPaste:b.yR,onKeypress:b.yR},void 0,n()(_e.Z,{type:this.props.inputType,style:{...xe.F,display:"block"},value:this.stores.inputStore.state.inputValue,format:_e.Z.Format.Transparent,onChange:this.handleInputChange,focus:!e,disabled:e}))}}Ee.displayName="URLPropertyValue";const Be=Ee;var Te=o(78030),Me=o(86628),Ve=o(64964),Ae=o(16859),Ie=o(68709),Fe=o(24118);function Ke(e,t){const o=(0,s.O7)(),r=(0,E.useIntl)(),[n,l]=(0,i.useState)(),[a,c]=(0,i.useState)(!1),d=(0,Me.VK)((()=>{const r=y.q3(t);return!(0,Fe.bb)({store:e.store,schema:e.store.getSchema(),property:e.property,userId:o.currentUser.id})&&(null==r?void 0:r.auto_update_on_edit)&&!a}),[e.property,e.store,t,a,o]),u=(0,i.useCallback)((()=>{l(void 0)}),[]),p=(0,Me.VK)((()=>{var t;return null===(t=e.store)||void 0===t||null===(t=t.getFormat())||void 0===t||null===(t=t.ai_property_inference_map)||void 0===t||null===(t=t[e.property])||void 0===t?void 0:t.inference_id}),[e]),m=(0,i.useCallback)((e=>{L.submitFeedbackForAiAutofill({environment:o,inferenceId:p,feedbackType:e.type,userContent:e.userContent,shareWithNotion:e.shareWithNotion}),c(!0),Ve.oV({label:r.formatMessage({id:"database.propertyValues.submitAIAutofillFeedbackThanks",defaultMessage:"Thank you for making Notion better!"})})}),[o,r,p]);return{feedbackState:n,setFeedbackState:l,handleFeedbackButtonDismiss:u,handleFeedbackButtonSubmit:m,shouldDisplayFeedbackButtons:Boolean(d)}}function Oe(e){let{autofillBlockPropertyValueFeedbackButtonsState:t}=e;window.__c={n:"AutofillBlockPropertyValueFeedbackButtons"};const o=(0,s.O7)(),r=(0,c.yK)((()=>({iconButtonStyles:{height:o.device.isMobile?24:28,width:o.device.isMobile?24:28}})),[o.device.isMobile]);return n()(i.Fragment,{},void 0,n()(Ae.d,{type:"thumbsup",ariaLabel:"thumbs-up",onClick:()=>{t.setFeedbackState({type:"thumbsup",userContent:"",shareWithNotion:!0})},feedbackState:t.feedbackState,onDismiss:t.handleFeedbackButtonDismiss,onSubmit:t.handleFeedbackButtonSubmit,onUpdate:t.setFeedbackState,showShareDataPopup:!1,onDataShareSubmit:b.ZT,userOptIn:!1,iconButtonStyles:r.iconButtonStyles}),n()(Ae.d,{type:"thumbsdown",ariaLabel:"thumbs-down",onClick:()=>{t.setFeedbackState({type:"thumbsdown",userContent:"",shareWithNotion:!0})},feedbackState:t.feedbackState,onDismiss:t.handleFeedbackButtonDismiss,onSubmit:t.handleFeedbackButtonSubmit,onUpdate:t.setFeedbackState,showShareDataPopup:!1,onDataShareSubmit:b.ZT,userOptIn:!1,iconButtonStyles:r.iconButtonStyles}))}function Ze(e){let{overlayState:t,theme:o,propertySchema:r}=e;window.__c={n:"AutofillUpdateButtonSection"};const i=(0,Me.VK)((()=>J.W.isWriting()),[]),l=(0,s.O7)(),a=Ke(t,r);return l.device.isMobile||i?null:n()(Ie.p,{allowSelectionWithin:!1},void 0,n()("div",{style:{position:"absolute",top:-36,right:0,borderRadius:5,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",background:o.popoverBackground,boxShadow:o.mediumBoxShadow,zIndex:-1,padding:2}},void 0,n()(Le,{overlayState:t,propertySchema:r}),a.shouldDisplayFeedbackButtons&&n()(Oe,{autofillBlockPropertyValueFeedbackButtonsState:a})))}function Le(e){let{overlayState:t,propertySchema:o}=e;window.__c={n:"AutofillUpdateButton"};const r=(0,s.O7)(),i=(0,c.yK)((e=>({buttonStyle:{display:"flex",height:28},iconStyle:{height:16,width:16,fill:e.aiPurpleColor},updateTextStyle:{fontWeight:500,color:e.aiPurpleColor}})),[]);return n()(ce.Z,{style:i.buttonStyle,onClick:()=>{o&&L.autofillPropertyForBlocks({environment:r,stores:[t.store],property:t.property,propertySchema:o,userEventForAnalytics:"generate_from_overlay_button",collectionContextStore:t.collectionContextStore,from:z.Sy(t.format)})}},void 0,n()(oe.X2,{gap:4},void 0,(0,S.y)(i.iconStyle),n()("span",{style:i.updateTextStyle},void 0,n()(E.FormattedMessage,{defaultMessage:"Update",id:"database.propertyValues.reGenerateAiAutofill"}))))}function He(e){let{overlayState:t,propertySchema:o,showSeparator:r}=e;window.__c={n:"AutofillBlockPropertyValueOverlayFeedbackButtonsMobile"};const l=Ke(t,o),a=(0,c.yK)((e=>({dot:{color:e.lightTextColor}})),[]);return l.shouldDisplayFeedbackButtons?i.createElement(i.Fragment,null,r?n()("div",{style:a.dot},void 0,""):null,n()(Oe,{autofillBlockPropertyValueFeedbackButtonsState:l})):null}class De extends l.Z{constructor(){super(...arguments),this.previousPopupProps=void 0,this.renderOverlay=()=>{const e=this.props.store.state;if(e.isOpen)return n()(ne.Z,{capture:!0,onTab:this.handleTab,onUntab:this.handleUntab,onEnter:this.handleEnter,onDelete:b.yR,onBackspace:b.yR},`${e.store.id}${e.property}`,n()(H.L1,{value:e.collectionContextStore},void 0,this.renderAutofillUpdateButton(e),n()("div",{style:{display:"flex",flexDirection:"column",overflowY:"auto",flexGrow:1,height:"100%"}},void 0,this.renderOverlayContent(e))))},this.renderTitle=(e,t)=>{const{clonedStore:o}=e;return n()(re.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!1,render:()=>n()("div",{style:De.titleStyle},void 0,n()(ge.Z,{store:o.getTitleStore()||o.getPropertyStore(e.property),disableSlashCommands:!0,onEnter:this.handleEnter,onEsc:this.handleEsc,onTab:this.handleTab,onUntab:this.handleUntab,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableShiftEnter:!0,onChange:()=>this.handleTextChange(e,t),disabled:this.isDisabled(e),pasteBehavior:"inline"}))})},this.aiAutofillExplanationTextIfAIProperty=e=>{var t;const o=this.getNormalizedPropertySchema(e),r=(0,y.q3)(o);if(!(0,N.Zt)(this.environment))return!1;if(J.W.isWriting())return n()(ue.Z,{isSecondaryColor:!0,style:{fontSize:12,color:this.theme.aiPurpleColor,display:"flex",alignItems:"inline",fontWeight:500,marginTop:6,marginBottom:2},isSmall:!0,isMultiline:!0},void 0,n()(E.FormattedMessage,{defaultMessage:"AI is writing",id:"BlockPropertyValueOverlay.AIActionText.overlay"}),n()("div",{style:{marginLeft:4}},void 0,n()(ie.Z,{})));const i=(0,N.RT)(this.environment,null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,e.store);return null!=r&&r.auto_update_on_edit?n()("div",{style:{display:"flex",alignItems:"center",marginTop:6,marginBottom:2}},void 0,n()(ue.Z,{isSecondaryColor:!0,style:{fontSize:12},isSmall:!0,isMultiline:!0},void 0,n()(E.FormattedMessage,{defaultMessage:"Auto-updated by AI",id:"BlockPropertyValueOverlay.helpText.overlay"})),this.environment.device.isMobile&&i&&n()("div",{style:{paddingLeft:2,display:"flex",alignItems:"center"}},void 0,n()("div",{style:{color:this.theme.lightTextColor}},void 0,""),n()(ze,{overlayState:e,propertySchema:o,style:{paddingLeft:2,paddingRight:2}}),n()(He,{overlayState:e,propertySchema:o,showSeparator:!0}))):this.environment.device.isMobile&&r&&i?n()(ze,{overlayState:e,propertySchema:o,style:{marginTop:6,marginBottom:2}}):void 0},this.handleBulkAutofillClick=(e,t)=>{const{collectionsBulkActionsToolbarStore:o}=e;if(o)if(t){const t=o.state.textStoresBeingEdited;if(!(0,x.Of)(t))return;const r=this.getNormalizedPropertySchema(e);if(!r)return;L.autofillPropertyForBlocks({environment:this.environment,stores:t,property:e.property,propertySchema:r,userEventForAnalytics:"generate_from_overlay_button",isBulkAction:!0,from:z.Sy(e.format),collectionContextStore:e.collectionContextStore})}else L.triggerAiAutofillUpsell({environment:this.environment,from:"ai_autofill_bulk_fill"})},this.bulkAutofillButton=e=>{var t;const{store:o,collectionsBulkActionsToolbarStore:r}=e,i=this.getNormalizedPropertySchema(e),l=null==i?void 0:i.name;if((0,N.RT)(this.environment,null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,o)&&(0,y.q3)(i)&&r){var a;const t=r.getNumberOfTextStoresBeingEdited(),o=(null===(a=te.default.state.data)||void 0===a?void 0:a.addOns)??[],i=(0,C.de)(o)||t<=5;return n()(ce.Z,{style:{width:"100%",height:"auto",borderTop:`1px solid ${this.theme.regularDividerColor}`},onClick:()=>this.handleBulkAutofillClick(e,i)},void 0,n()(oe.X2,{gap:8,padding:8,alignItems:"start"},void 0,(0,S.y)({width:18,fill:this.theme.aiPurpleColor}),n()(oe.sg,{gap:4},void 0,n()("div",{style:{fontSize:14,whiteSpace:"normal"}},void 0,n()(E.FormattedMessage,l?{defaultMessage:'Update "{propertyName}" with AI',id:"BlockPropertyValueOverlay.bulkAiAutofillButton.titleWithPropertyName",values:{propertyName:l}}:{defaultMessage:"Update with AI",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.title"})),n()("div",{style:{fontSize:12,color:this.theme.mediumTextColor,whiteSpace:"normal",lineHeight:"1.4em"}},void 0,n()(E.FormattedMessage,i?{defaultMessage:"{numPages, select, 1 {Update {numPages} page} other {Update {numPages} pages}}",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.countAndDescription",values:{numPages:t}}:{defaultMessage:"Get the AI add-on to update more than {maxItems} pages at once",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.largeBulkFillUpsellMessage",values:{maxItems:5}})))))}},this.renderText=(e,t)=>{var o;const{clonedStore:r}=e,l=this.getNormalizedPropertySchema(e);let a;return"text"===(null==l?void 0:l.type)&&null!==(o=l.ai_inference)&&void 0!==o&&o.auto_update_on_edit&&(a="Empty"),n()(re.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!1,render:()=>i.createElement(i.Fragment,null,n()("div",{style:xe.F},void 0,n()(ge.Z,{store:r.getPropertyStore(e.property),disableSlashCommands:!0,onEnter:this.handleEnter,onEsc:this.handleEsc,onTab:this.handleTab,onUntab:this.handleUntab,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onChange:()=>this.handleTextChange(e,t),disabled:this.isDisabled(e),pasteBehavior:"inline",placeholder:a}),this.aiAutofillExplanationTextIfAIProperty(e)),this.bulkAutofillButton(e))})},this.renderURL=(e,t)=>{const o=m.zB(this.getPropertyValue(e));let r="url";return"phone_number"===t?r="tel":"email"===t&&(r="email"),n()(Be,{value:o,inputType:r,disabled:this.isDisabled(e),onChange:this.handleURLValueChange,onDismiss:this.close})},this.renderNumber=e=>{const t=e.format===Te.C.Table,o=m.VY(this.getPropertyValue(e)),r=this.getNormalizedPropertySchema(e);if(r&&"number"===r.type)return n()(Re,{value:o,isTable:t,format:r.number_format||"number",disabled:this.isDisabled(e),insertChar:e.insertChar,onChange:this.handleNumberValueChange})},this.renderSelect=e=>{const t=this.getSchema(e),o=this.getCollectionStore(e),r=this.getNormalizedPropertySchema(e);if(!o||!r||"select"!==r.type)return;const i=r.options||[],l=m.Sj(this.getPropertyValue(e),i);return n()(Se.Z,{allowMultiple:!1,value:l?[l]:[],property:e.property,collectionId:o.id,schema:t,disabled:this.isDisabled(e),canConfigureCollection:this.canConfigureCollection(e),onChange:this.handleSelectPropertyMenuUpdate,analyticsFrom:this.getAnalyticsFrom(e),insertChar:e.insertChar,onAccept:this.handleSelectPropertyMenuAccept,onDismiss:this.close})},this.renderMultiSelect=e=>{const t=this.getSchema(e),o=this.getCollectionStore(e),r=this.getNormalizedPropertySchema(e);if(!o||!r||"multi_select"!==r.type)return;const i=r.options||[],l=m.uP(this.getPropertyValue(e),i);return n()(Se.Z,{allowMultiple:!0,value:l,property:e.property,collectionId:o.id,schema:t,disabled:this.isDisabled(e),canConfigureCollection:this.canConfigureCollection(e),onChange:this.handleSelectPropertyMenuUpdate,analyticsFrom:this.getAnalyticsFrom(e),insertChar:e.insertChar,onAccept:this.handleSelectPropertyMenuAccept,onDismiss:this.close})},this.renderStatus=e=>{const t=this.getCollectionStore(e),o=this.getNormalizedPropertySchema(e);if(!t||!o||"status"!==o.type)return;const r={initialValue:m.ZG(this.getPropertyValue(e),o),property:e.property,propertySchema:o,disabled:this.isDisabled(e),onDismiss:this.close,onChange:e=>{this.handleSelectPropertyMenuUpdate({value:e?[e]:[]})},onAccept:this.handleSelectPropertyMenuAccept,blockPropertyValueOverlayStore:this.props.store};return e.property===h.b0.StatusV2?i.createElement(ve.G,r):i.createElement(be.x,r)},this.renderPerson=e=>{const t=this.getSchema(e),o=this.getNormalizedPropertySchema(e);if(!o||"person"!==o.type)return;const r=e.store.isTemplate(),i=(0,u.VV)({value:this.getPropertyValue(e),isTemplatePage:r,propertySchema:o,blockCreatorPointer:e.store.getCreatedByPointer()});return n()(he.Z,{value:i,property:e.property,schema:t,disabled:this.isDisabled(e),onChange:this.handlePersonPropertyMenuUpdate,insertChar:e.insertChar,onDismiss:this.close,parentStore:e.store,isTemplatePage:r})},this.renderRelation=e=>{const t=this.getSchema(e),o=m.rq(this.getPropertyValue(e)),r=this.getCollectionStore(e);if(r)return n()(j.ev,{value:o,property:e.property,collectionStore:r,schema:t,disabled:this.isDisabled(e),canConfigureCollection:this.canConfigureCollection(e),onChange:this.handleRelationPropertyMenuUpdate,analyticsFrom:this.getAnalyticsFrom(e),insertChar:e.insertChar,onDismiss:this.close,blockStore:e.store,blockPropertyValueOverlayStore:this.props.store,overlayMode:e.mode})},this.renderRollup=e=>{const t=this.getSchema(e);return n()(fe.Z,{context:fe.t.BlockPropertyOverlay,property:e.property,schema:t,disabled:this.isDisabled(e)||!this.canConfigureCollection(e)||this.isTypedPropertyStore.state,onChange:this.handleRollupPropertyMenuUpdate,parentStore:e.store,analyticsFrom:this.getAnalyticsFrom(e),onDismiss:this.close})},this.renderDate=e=>{const t=this.getNormalizedPropertySchema(e);if(!t||"date"!==t.type)return;const o=m.Gl(this.getPropertyValue(e));return n()(Q.DependencyConsumer,{dependency:Q.deps.menus},void 0,(r=>{let{DatePropertyMenu:i}=r;return n()(i,{firstDayOfWeek:D.AK.state,value:o,onChangeValue:this.handleDatePropertyValueChange,dateFormat:t.date_format,onChangeDateFormat:this.handleDatePropertyDateFormatChange,timeFormat:t.time_format,disabled:this.isDisabled(e),canConfigureCollection:this.canConfigureCollection(e),onChangeTimeFormat:this.handleDatePropertyTimeFormatChange,onDismiss:this.close,shouldShowReminder:!0,isTemplatePage:e.store.isTemplate()})}))},this.renderFile=e=>{const t=this.getSchema(e),o=m.g(this.getPropertyValue(e));return n()(pe.Z,{store:e.store,value:o,property:e.property,schema:t,onDismiss:this.close,uploadFiles:e.uploadFiles,disabled:this.isDisabled(e),onChange:t=>{Z.createAndCommit({userAction:"BlockPropertyValueOverlay.renderFile",environment:this.environment,perform:o=>{if(R.z4(t.schema)||this.setSchema(t.schema,o),!R.z4(t.value)){const r=m.CC(t.value);for(const t of this.getPropertyStores(e))K.sO({store:t,value:r,transaction:o});this.trackEditPropertyValue(e)}}})}})},this.renderFormula=e=>{const{device:t}=this.environment,r=this.getSchema(e),{store:i}=e,l=i.getModel(),a=this.getCollectionStore(e),s=this.getNormalizedPropertySchema(e),c=this.isDisabled(e)||!this.canConfigureCollection(e)||this.isTypedPropertyStore.state;if((0,q.formulasPrototypeEnabled)()){if(l&&a&&s&&"formula"===s.type)return n()(Q.DependencyConsumer,{dependency:Q.deps.formulas},void 0,(t=>n()(ye.Z,{handleClose:this.close,property:e.property,getRecordModel:i.getRecordModel,propertySchema:s,collectionStore:a,handleSave:this.handleFormula2CodeChange,formulas:t,disabled:c,blockStore:i})))}else if(l)return n()(me.Z,{fetch:()=>o.e(71).then(o.bind(o,41389)),loading:e=>t.isMobile?n()(ae.Z,{menuType:$.og.Modal,title:n()(E.FormattedMessage,{defaultMessage:"Formula",id:"database.propertyValues.mobileFormulaMenu.title"}),left:n()(se.CancelMenuText,{}),onClickLeft:this.handleFormulaPropertyMenuCancelClick},void 0,n()("div",{style:{width:"100%",paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"}},void 0,e&&n()(le.Z,{}))):n()("div",{style:{height:358,width:580,display:"flex",alignItems:"center",justifyContent:"center"}},void 0,e&&n()(le.Z,{})),render:t=>{let{default:o}=t;return n()(o,{property:e.property,exampleBlock:l,disabled:c,schema:r,onChange:this.handleFormulaPropertyMenuUpdate,onClickCancel:this.handleFormulaPropertyMenuCancelClick,analyticsFrom:this.getAnalyticsFrom(e)})}})},this.renderVerificationOverlay=e=>{const t=this.getNormalizedPropertySchema(e);if("verification"!==(null==t?void 0:t.type))return;const o=m._w(this.getPropertyValue(e));return n()(we.O,{propertyName:t.name,onChange:t=>{Z.createAndCommit({userAction:"BlockPropertyValueOverlay.verification",environment:this.environment,perform:o=>{const r=m.Tp(t.value);for(const t of this.getPropertyStores(e))K.sO({store:t,value:r,transaction:o});this.trackEditPropertyValue(e)}}),this.close()},verificationValue:o,getRecordModel:e.store.getRecordModel,blockId:e.store.id,onClose:this.close})},this.isTypedPropertyStore=this.createComputedStore((()=>{var e;const t=this.props.store.state;if(!t.isOpen)return!1;const o=null===(e=t.collectionContextStore)||void 0===e?void 0:e.collectionStore();if(!o)return!1;const r=t.property;return Boolean(o.getDatabaseType()&&o.isTypedProperty(r))})),this.renderFunctions={title:this.renderTitle,text:this.renderText,relation:this.renderRelation,rollup:this.renderRollup,select:this.renderSelect,multi_select:this.renderMultiSelect,status:this.renderStatus,person:this.renderPerson,number:this.renderNumber,date:this.renderDate,file:this.renderFile,url:this.renderURL,phone_number:this.renderURL,email:this.renderURL,formula:this.renderFormula,checkbox:void 0,created_by:void 0,created_time:void 0,last_edited_by:void 0,last_edited_time:void 0,last_visited_time:void 0,button:void 0,auto_increment_id:void 0,location:void 0,verification:this.renderVerificationOverlay},this.handleBgClick=()=>{M.fG({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleEsc=()=>{M.i2({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleTab=e=>{e.preventDefault(),M.$o({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleUntab=e=>{e.preventDefault(),M.RX({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleEnter=()=>{M.gT({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleSelectPropertyMenuAccept=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=this.getNormalizedPropertySchema(t);!o||"select"!==o.type&&"status"!==o.type||a.default.afterNextFlush((()=>{e?M.gT({environment:this.environment,blockPropertyValueOverlayStore:this.props.store}):M.i2({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})}))},this.handleSelectPropertyMenuUpdate=e=>{const t=this.props.store.state;t.isOpen&&Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleSelectPropertyMenuUpdate",environment:this.environment,perform:o=>{if(R.z4(e.operations)||this.applyOperationsToSchema(e.operations,o),!R.z4(e.value)){const r=m.zq(e.value);for(const e of this.getPropertyStores(t))K.sO({store:e,value:r,transaction:o});this.trackEditPropertyValue(t)}}})},this.handlePersonPropertyMenuUpdate=e=>{const t=this.props.store.state;t.isOpen&&Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handlePersonPropertyMenuUpdate",environment:this.environment,perform:o=>{if(R.z4(e.schema)||this.setSchema(e.schema,o),!R.z4(e.value)){const r=e.value,n=[];r.forEach((e=>{let t;P.D4X(e)?t=P.WBu({type:e}):(0,d.Wk)(e)?t=P.tEo(e.id):(0,x.t1)(e),n.push(P.YCD(t))}));const i=(0,v.Z)(n,(()=>P.V3y(",")));for(const e of this.getPropertyStores(t))K.sO({store:e,value:i,transaction:o});this.trackEditPropertyValue(t)}}})},this.handleRelationPropertyMenuUpdate=async e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=this.getNormalizedPropertySchema(t);if(!o||"relation"!==o.type)return;const r="relation"===o.type&&y.F0(o),n=r&&new ee.NW(this.environment,{table:w.v,id:r});n&&await n.load();const i=this.getSchema(t);Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleRelationPropertyMenuUpdate",environment:this.environment,perform:o=>{if(e.newPage&&r&&n){const r=P.TPx(e.newPage.name),i=n.getRootPagePointer(),l=i??n.pointer,a={id:e.newPage.id,version:0,type:p.Ti.page,parent_id:l.id,parent_table:l.table,properties:{title:r},alive:!0,collection_id:void 0,space_id:e.newPage.spaceId},s=K.ae({environment:this.environment,table:g.iU,value:a,inMemoryRecordCache:t.store.inMemoryRecordCache,transaction:o});if(i){const e=new ee.G(this.environment,{table:i.table,id:i.id}),t=new ee.G(this.environment,{table:g.iU,id:a.id});F.jG({parentStore:e,childStore:t,transaction:o})}const c=n.getDefaultTemplatePageStore();c&&A.ob({title:{text:r},environment:this.environment,store:ee.G.createChildStore(n,s.pointer),templateStore:c,isKeyboard:!1,isCreateIn:!1,transaction:o,from:"relation_property_menu_update"})}if(e.value){for(const r of this.getAllEditStores(t))O.tG({environment:this.environment,store:r,pointers:e.value,propertyId:t.property,transaction:o});this.trackEditPropertyValue(t)}if(e.rollupPropertyId&&e.rollupPropertySchema){const t={...i,[e.rollupPropertyId]:e.rollupPropertySchema};this.setSchema(t,o)}}}),e.rollupPropertyId&&(await a.default.afterNextFlush(),M.mm({environment:this.environment,blockPropertyValueOverlayStore:this.props.store,openProperty:e.rollupPropertyId}))},this.handleDatePropertyValueChange=e=>{const t=this.props.store.state;t.isOpen&&Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyValueChange",environment:this.environment,perform:o=>{for(const r of this.getAllEditStores(t))!e||f.U3(e)?(V.xD({environment:this.environment,store:r,type:"dateValue",dateValue:e,propertyId:t.property,transaction:o}),e||this.close()):(K.sW({store:r.getPropertiesStore(),transaction:o,data:{[t.property]:[P.YCD(P.WBu({type:e}))]}}),this.close()),this.trackEditPropertyValue(t)}})},this.handleDatePropertyDateFormatChange=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=this.getNormalizedPropertySchema(t);if(!o||"date"!==o.type)return;const r=this.getSchema(t),n={...o,date_format:e},i={...r,[t.property]:n};var l;(Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyDateFormatChange",environment:this.environment,perform:e=>{this.setSchema(i,e)}}),n)&&(this.getAnalyticsFrom(t),B.$qu(this.environment,{property_type:n.type,action:"date_change_format",from:this.getAnalyticsFrom(t),collection_id:null===(l=this.getCollectionStore(t))||void 0===l?void 0:l.id}))},this.handleDatePropertyTimeFormatChange=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=this.getNormalizedPropertySchema(t);if(!o||"date"!==o.type)return;const r=this.getSchema(t),n={...o,time_format:e},i={...r,[t.property]:n};var l;(Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyTimeFormatChange",environment:this.environment,perform:e=>{this.setSchema(i,e)}}),n)&&(this.getAnalyticsFrom(t),B.$qu(this.environment,{property_type:n.type,action:"date_change_format",from:this.getAnalyticsFrom(t),collection_id:null===(l=this.getCollectionStore(t))||void 0===l?void 0:l.id}))},this.handleFormula2CodeChange=e=>{const{newValue:t,newType:o,propertySchema:r,property:n,collectionStore:i}=e,l=t?{...r,formula2:{code:t,result_type:o},version:"v2"}:{...r,formula2:void 0,version:"v2"};Z.createAndCommit({userAction:"CollectionSettingsFormulaOptions.handleFormulaChange",environment:this.environment,perform:e=>{I.xO({environment:this.environment,collectionStore:i,update:{[n]:l},transaction:e})}})},this.handleFormulaPropertyMenuUpdate=e=>{let{propertySchema:t,close:o}=e;const r=this.props.store.state;r.isOpen&&(Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleFormulaPropertyMenuUpdate",environment:this.environment,perform:e=>{this.updateSchema({[r.property]:t},e)}}),o&&this.close())},this.handleNumberValueChange=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=m.eP(e);Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleNumberValueChange",environment:this.environment,perform:e=>{for(const r of this.getPropertyStores(t))K.sO({store:r,value:o,transaction:e})}}),this.trackEditPropertyValue(t)},this.handleURLValueChange=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=m.iD(e);Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleURLValueChange",environment:this.environment,perform:e=>{for(const r of this.getPropertyStores(t))K.sO({store:r,value:o,transaction:e})}}),this.trackEditPropertyValue(t),B.bOx(this.environment,{pastedText:e,source:"url_property"})},this.handleTextChange=(e,t)=>{this.measurePropertyOverlayTypingLagUntilNextRender(e,t);const{store:o,property:r,additionalStores:n}=e,i=o.getPropertyStore(r).getValue();Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleTextChange",environment:this.environment,perform:e=>{for(const t of n)K.sO({store:t.getPropertyStore(r),value:i,transaction:e})}}),this.trackEditPropertyValue(e)},this.handleRollupPropertyMenuUpdate=e=>{const t=this.props.store.state;t.isOpen&&Z.createAndCommit({userAction:"BlockPropertyValueOverlay.handleRollupPropertyMenuUpdate",environment:this.environment,perform:o=>{this.updateSchema({[t.property]:e.propertySchema},o)}})},this.handleFormulaPropertyMenuCancelClick=()=>{this.props.store.setState({...this.props.store.state,isOpen:!1})},this.close=()=>{M.xv({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})}}willMount(e){super.willMount(e),this.trackRenderTime({isFirstRender:!0})}willUpdate(e){super.willUpdate(e),this.trackRenderTime({isFirstRender:!1})}renderComponent(){const{device:e}=this.environment,t=this.props.store.state;let o,r,n;if(t.isOpen){const i=t.format===Te.C.Page,s=this.getNormalizedPropertySchema(t),c=s&&s.type,d=t.store.canEdit();let u=t.rect.top,p=t.rect.left,m=t.rect.width,h=t.rect.height;if(i?(p-=1,m+=1):(u-=1,p-=1,m+=1,h+=2),"number"===c)r={width:m};else if("date"===c)u+=h-1,r={};else if("relation"===c){const e=j.NW;r={width:Math.max(e,m),minHeight:d?65:void 0,overflow:"hidden"}}else if("person"===c)r={width:Math.max(240,m),minHeight:d?100:void 0};else if("formula"===c)u+=h-1,r={borderRadius:12};else if("select"===c||"multi_select"===c)r={width:Math.max(300,m)};else if("rollup"===c)u+=h-1,r={};else if("text"!==c&&"title"!==c||!e.isMobile)if("file"===c)r={minWidth:Math.max(240,m)};else if("verification"===c)r={width:b.uZ(m,265,365)};else{const e=24+(this.shouldShowAutofillUpdateButton(t)?28:0);r={width:Math.max(240,m),minHeight:Math.min(h,window.innerHeight-e),maxHeight:window.innerHeight-e,overflow:"visible",display:"flex",flexDirection:"column"}}else{const e=X.Z.estimatedNativeWebBottomOverlap()+24;n={overflowY:"auto",WebkitOverflowScrolling:"touch",width:Math.max(240,m),maxHeight:`calc(100vh - ${e}px)`}}const f=t.collectionContextStore;if(f){var l,a;const e=f.subitemTreeStore.state,o=(0,_.DY)(e.children,(e=>e.value.store===t.store)),n=null==o?void 0:o.length,i=null===(l=f.formatStore())||void 0===l||null===(l=l.getFormat())||void 0===l||null===(l=l.table_properties)||void 0===l?void 0:l.filter((e=>e.visible)),s=i&&(null===(a=i[0])||void 0===a?void 0:a.property)===t.property;n&&s&&(r={...r,...c&&y.Yl(c)&&{width:Math.max(90,m)}})}o=new DOMRect(p,u,m,0)}if(t.isOpen||!this.previousPopupProps){const l=this.getPopupType(),a=!e.isMobile||l===de.ZP.PopupType.Popup,s={key:this.getPopupKey(),popupType:l,open:t.isOpen,originRect:o,style:e.isMobile?{width:r?r.width:void 0,...n}:r,alignmentToOrigin:de.ZP.Alignment.Start,placementToOrigin:de.ZP.Placement.Bottom,preventScaleTransition:a,preventOpacityTransition:a,render:this.renderOverlay,onDismiss:this.handleBgClick};return this.previousPopupProps=s,i.createElement(de.ZP,s)}{const e={...this.previousPopupProps,open:!1};return i.createElement(de.ZP,e)}}trackRenderTime(e){let{isFirstRender:t}=e;const o=this.props.store.state;if(!o.isOpen||!o.collectionContextStore)return;const r=Y.default.mark("collections.block_property_value_overlay_render");Y.default.measureAfterNextFlush(r,{environment:this.environment,getData:()=>{var e;return{...W.vS(o.collectionContextStore),is_first_render:t,property_type:null===(e=this.getNormalizedPropertySchema(o))||void 0===e?void 0:e.type,from:z.Sy(o.format)}}})}shouldShowAutofillUpdateButton(e){var t;const{store:o}=e,r=this.getNormalizedPropertySchema(e);return r&&(0,N.RT)(this.environment,null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,o)&&y.q3(r)&&!e.collectionsBulkActionsToolbarStore}renderAutofillUpdateButton(e){if(this.shouldShowAutofillUpdateButton(e))return n()(Ze,{theme:this.theme,propertySchema:this.getNormalizedPropertySchema(e),overlayState:e})}renderOverlayContent(e){const t=this.getNormalizedPropertySchema(e);if(!t)return;const o=this.renderFunctions[t.type];return o?o(e,t.type):void 0}getPopupType(){const{device:e}=this.environment;if(e.isMobile){const e=this.props.store.state;if(!e.isOpen)return de.kQ.SlideUp;const t=this.getNormalizedPropertySchema(e);return t?xe.m[t.type]:de.kQ.SlideUp}return de.kQ.Popup}getPopupKey(){const e=this.props.store.state;if(!e.isOpen)return"ignore";const t=this.getNormalizedPropertySchema(e);return t?t.type:"ignore"}measurePropertyOverlayTypingLagUntilNextRender(e,t){const o=Y.default.mark("collections.property_overlay_typing_lag");Y.default.measureAfterNextFlush(o,{environment:this.environment,getData:()=>({...W.vS(e.collectionContextStore),property_type:t,from:z.Sy(e.format)})})}getSchema(e){return e.store.getSchema()||{}}getNormalizedPropertySchema(e){return this.getSchema(e)[e.property]}getCollectionStore(e){return e.store.getAssociatedCollectionStore()}getPropertyStores(e){return this.getAllEditStores(e).map((t=>t.getPropertyStore(e.property)))}getPropertyValue(e){return e.store.getPropertyValue(e.property)}updateSchema(e,t){const o=this.props.store.state;if(o.isOpen&&o.isOpen){const r=this.getCollectionStore(o);r&&I.xO({environment:this.environment,collectionStore:r,update:e,transaction:t})}}setSchema(e,t){const o=this.props.store.state;if(o.isOpen&&o.isOpen){const r=this.getCollectionStore(o);r&&I.Rm({environment:this.environment,collectionStore:r,update:{schema:e},transaction:t})}}applyOperationsToSchema(e,t){const o=this.props.store.state;if(o.isOpen&&o.isOpen){const r=this.getCollectionStore(o);if(r){const o=r.getSchema();for(const i of e)Z.applyOperation({store:(0,ee.Kv)(r,i.pointer),operation:i,transaction:t});const n=r.getSchema();I.C_({environment:this.environment,collectionStore:r,oldSchema:o,newSchema:n,transaction:t})}}}trackEditPropertyValue(e){const t=e.store.getType(),o=this.getNormalizedPropertySchema(e),{collectionContextStore:r}=e;t&&o&&r&&T.rv({environment:this.environment,collectionContextStore:r,block_id:e.store.id,property:e.property,property_type:o.type,from:this.getAnalyticsFrom(e),isFromBulkActionsToolbar:z.VM(this.props.store)})}getAnalyticsFrom(e){return z.Sy(e.format)}getAllEditStores(e){return[e.store,...e.additionalStores]}canConfigureCollection(e){const t=this.getCollectionStore(e),o=null==t?void 0:t.getParentBlockStore();return U.eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!1})}isDisabled(e){const t=this.getNormalizedPropertySchema(e),o=(0,y.q3)(t);return!!(o&&o.auto_update_on_edit&&(0,N.Zt)(this.environment))||((0,G.N)(this.environment,e.store)||m.wl(e.property))}}function ze(e){let{overlayState:t,propertySchema:o,style:r}=e;window.__c={n:"AutofillUpdateMobileLink"};const i=(0,s.O7)(),l=(0,c.yK)((e=>({linkStyle:{color:e.aiPurpleColor,fontSize:12,...r}})),[r]);return n()("div",{style:l.linkStyle,onClick:()=>{o&&L.autofillPropertyForBlocks({environment:i,stores:[t.store],property:t.property,propertySchema:o,userEventForAnalytics:"generate_from_overlay_button",collectionContextStore:t.collectionContextStore,from:z.Sy(t.format)})}},void 0,n()(E.FormattedMessage,{defaultMessage:"Update",id:"database.propertyValues.reGenerateAiAutofill"}))}De.displayName="BlockPropertyValueOverlay",De.titleStyle={...xe.F,fontWeight:k.Z.fontWeight.medium};const We=De},83197:(e,t,o)=>{o.d(t,{F:()=>i,m:()=>n});var r=o(53437);const n={title:r.kQ.Popup,text:r.kQ.Popup,number:r.kQ.Popup,url:r.kQ.Popup,phone_number:r.kQ.Popup,email:r.kQ.Popup,relation:r.kQ.SlideUp,rollup:r.kQ.SlideUp,select:r.kQ.SlideUp,multi_select:r.kQ.SlideUp,status:r.kQ.SlideUp,person:r.kQ.SlideUp,date:r.kQ.SlideUp,file:r.kQ.SlideUp,formula:r.kQ.SlideUp,checkbox:r.kQ.SlideUp,created_by:r.kQ.SlideUp,created_time:r.kQ.SlideUp,last_edited_by:r.kQ.SlideUp,last_edited_time:r.kQ.SlideUp,last_visited_time:r.kQ.SlideUp,button:r.kQ.SlideUp,auto_increment_id:r.kQ.Popup,location:r.kQ.Popup,verification:r.kQ.SlideUp},i=Object.freeze({paddingLeft:9,paddingRight:9,paddingTop:6,paddingBottom:6,fontSize:14,minHeight:34,display:"flex",height:"100%",flexDirection:"column",justifyContent:"space-between",flexGrow:1})},77866:(e,t,o)=>{o.d(t,{T$:()=>u,a4:()=>m,q8:()=>p,s3:()=>y});var r=o(23174),n=o.n(r),i=o(67294),l=o(24405),a=o(39068),s=o(5366),c=o(8606),d=o(77722);function u(){return n()(d.Y,{fontColor:"light",style:{lineHeight:"20px"}},void 0,n()(s.FormattedMessage,{defaultMessage:"Empty",id:"database.pageProperty.emptyTitle"}))}function p(){return null}function y(){window.__c={n:"QuickEditEmptyPropertyText"};const e=(0,l.Fg)(),{propertySchema:t}=(0,i.useContext)(c.O),o=(0,l.yK)((()=>({textContainer:{display:"inline-flex",alignItems:"center"},propertyIcon:{marginRight:6}})),[]);return t?n()(d.Y,{fontColor:"light",style:o.textContainer},void 0,n()(a.ZP,{type:t.type,icon:t.icon,size:14,theme:e,style:o.propertyIcon}),n()(s.FormattedMessage,{defaultMessage:"Add {propertyName}",id:"database.boardProperty.fillProperty",values:{propertyName:t.name}})):null}function m(){window.__c={n:"MiniPeekEmptyPropertyText"};const e=(0,l.Fg)(),{propertySchema:t,baseStyles:o}=(0,i.useContext)(c.O),r=(0,l.yK)((e=>({container:{...null==o?void 0:o.textStyle,display:"inline-flex",alignItems:"center",overflow:"hidden",color:e.lightTextColor},text:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},icon:{marginRight:6}})),[o]);return t?n()("div",{style:r.container},void 0,n()(a.ZP,{type:t.type,icon:t.icon,size:14,theme:e,style:r.icon}),n()("div",{style:r.text},void 0,t.name)):null}},30752:(e,t,o)=>{o.d(t,{$I:()=>j,CJ:()=>$,eQ:()=>G,lE:()=>D,mm:()=>W,n8:()=>Z,p5:()=>z,tD:()=>N,tT:()=>Y,uS:()=>q,wC:()=>H,yJ:()=>U});var r=o(10434),n=o.n(r),i=o(23174),l=o.n(i),a=(o(21703),o(67294)),s=o(480),c=o(86628),d=o(24405),u=o(14577),p=o(35011),y=o(40506),m=o(7057),h=o(47218),f=o(84682),S=o(42875),v=o(72126),b=o(82883),g=o(68626),w=o(97880),C=o(5366),P=o(17809),_=o(33929),x=o(73807),k=o(77907),R=o(39694),E=o(65473),B=o(8606),T=o(78030),M=o(24118),V=o(53876),A=o(19629),I=o(77866);const F=a.memo(a.forwardRef(((e,t)=>{var o,r;const{store:n,property:i,EmptyComponent:s,collectionStore:y,onContextMenu:m,editButtonClickProps:v,checkboxButtonStyle:b,textButtonStyle:w,quickActionButtons:_,checkboxShowLabel:R}=e,{baseStyles:T,propertySchema:M,format:V}=(0,a.useContext)(B.O),I=M,F=(0,c.VK)((()=>"v2"===(null==I?void 0:I.version)&&(0,P.formulasPrototypeEnabled)()),[null==I?void 0:I.version])?null==I||null===(o=I.formula2)||void 0===o?void 0:o.result_type.type:null==I||null===(r=I.formula)||void 0===r?void 0:r.result_type,O=!0===e.numberRightAlign&&"number"===(0,p.r9)(I),Z=function(e){const{store:t,collectionStore:o,property:r,formulas:n,checkboxShowLabel:i,numberRightAlign:s}=e,d=(0,C.useIntl)(),y=(0,c.VK)((()=>o.getSchema()),[o]),{propertySchema:m}=(0,a.useContext)(B.O),v=m,b=(0,c.VK)((()=>(0,P.formulasPrototypeEnabled)()),[]),w=(0,x._)(),_=(0,c.VK)((()=>{var e;const i=t.getModel(),l=o.getModel();if(!l)return;const a=l.getNormalizedSchema()[r],s=null==a||null===(e=a.formula2)||void 0===e?void 0:e.code;if(!(b&&i&&n&&l&&s))return;const c=(0,p.cO)(i,l,r);if(c)return c;const y=new u.Z((()=>{const e=(0,p.NM)({block:i,formulaCode:s,getRecordModel:t.getRecordModel,intl:d,userTimeZone:(0,S.r)(),depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+w});return!e||g.x.isFail(e)?{error:{type:h.FY.UnexpectedError,error:new Error("Something went wrong in formula evaluation.")}}:{value:e.value}}),{debugName:`${Math.random()}`});return(0,p.HU)(i,l,r,(()=>y.getState())),y.getState()}),[o,n,b,d,r,t,w]),k=(0,c.VK)((()=>{const e=_;return!e||g.x.isFail(e)?{type:"undefined"}:e.value}),[_]),R=null==v?void 0:v.formula,E=(0,c.VK)((()=>{if(b&&"v2"===(null==v?void 0:v.version)){var e;if(void 0===k)return[[],"formula"];const o=j(k,t.getRecordModel,(0,S.r)());return[o,(null===(e=o[0])||void 0===e?void 0:e.type)??"text"]}if(!t.isDefined())return[[],"formula"];return[Y((0,f.AH)({property:r,schema:y,block:t.getModel(),getRecordModel:t.getRecordModel,userTimeZone:(0,S.r)(),depth:0,intl:d,resultCache:{},visitedProperties:new Set([])})),(null==R?void 0:R.result_type)??"text"]}),[null==R?void 0:R.result_type,k,null==v?void 0:v.version,b,d,r,y,t]);return(0,c.VK)((()=>{const[e,o]=E;if(0===e.length)return null;const r=i&&"checkbox"===(0,p.mm)(v)&&1===e.length?null==v?void 0:v.name:void 0,n=!!v&&(0,A.vQ)(o,v);return v&&l()(A.E1,{propertyType:o,rootPropertySchema:v,numberRightAlign:s},void 0,e.map(((o,i)=>l()(A.gZ,{token:o,targetPropertySchema:v,blockStore:t,checkboxPropertyLabel:r,withComma:n&&i<e.length-1,numberRightAlign:s},`${o.id}-${i}`))))}),[i,v,E,s,t])}({store:n,collectionStore:y,property:i,numberRightAlign:O,checkboxShowLabel:R,formulas:(0,k.useDependency)(k.deps.formulas)}),L=(0,d.yK)((e=>({buttonStyle:{...T.buttonStyle,..."checkbox"===F?b:{},..."number"===F||"date"===F||"text"===F?w:{}},buttonPressedStyle:T.buttonPressedStyle??{},buttonHoveredStyle:T.buttonHoveredStyle??{}})),[T.buttonHoveredStyle,T.buttonPressedStyle,T.buttonStyle,b,F,w]),H=null===Z;return H&&void 0===s?null:a.createElement(E.Z,{ref:t,onContextMenu:m,editButtonClickProps:v,style:L.buttonStyle,pressedStyle:L.buttonPressedStyle,hoveredStyle:L.buttonHoveredStyle,quickActionButtons:_?l()(K,{buttons:_,store:n,collectionStore:y,property:i,format:V,isEmpty:H}):void 0,quickActionButtonsAlign:O?"left":void 0},H?s?l()(s,{}):null:Z)})));function K(e){window.__c={n:"FormulaQuickActionButtons"};const{buttons:t,store:o,collectionStore:r,property:n,format:i,isEmpty:s}=e,d=(0,c.VK)((()=>r.getSchema()),[r]);if(s)return null;const u=t.map((e=>{switch(e){case"copy":return l()(R.Z,{store:o,schema:d,property:n,format:i},"copy");default:(0,w.t1)(e)}})).filter(w.K0);return u?a.createElement(a.Fragment,null,u):null}const O=["copy"],Z=a.forwardRef(((e,t)=>{window.__c={n:"TableFormulaProperty"};const{isMobile:o}=(0,s.Fy)(),r=Q(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:V.sf[T.C.Table].checkbox},textButtonStyle:{padding:V.sf[T.C.Table].text}})),[]));return a.createElement(F,n()({},r,{numberRightAlign:!0,EmptyComponent:I.q8,quickActionButtons:o?void 0:O}))})),L=["copy"],H=a.forwardRef(((e,t)=>{window.__c={n:"PageFormulaProperty"};const o=Q(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:V.sf[T.C.Page].checkbox},textButtonStyle:{padding:V.sf[T.C.Page].text}})),[]));return a.createElement(F,n()({},o,{EmptyComponent:I.T$,quickActionButtons:L}))})),D=a.forwardRef(((e,t)=>{window.__c={n:"CompactFormulaProperty"};const o=Q(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:V.sf[T.C.CompactPage].checkbox},textButtonStyle:{padding:V.sf[T.C.CompactPage].text}})),[]));return a.createElement(F,n()({},o,{EmptyComponent:I.T$}))})),z=a.forwardRef(((e,t)=>{window.__c={n:"ListFormulaProperty"};const o=Q(e,t);return a.createElement(F,o)})),W=a.forwardRef(((e,t)=>{window.__c={n:"BoardFormulaProperty"};const o=Q(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:V.sf[T.C.Board].checkbox},textButtonStyle:{padding:V.sf[T.C.Board].text}})),[]));return a.createElement(F,n()({},o,{checkboxShowLabel:!0}))})),U=a.forwardRef(((e,t)=>{window.__c={n:"CalendarFormulaProperty"};const o=Q(e,t);return a.createElement(F,n()({},o,{checkboxShowLabel:!0}))})),N=a.forwardRef(((e,t)=>{window.__c={n:"GalleryFormulaProperty"};const o=Q(e,t);return a.createElement(F,n()({},o,{checkboxShowLabel:!0}))})),q=a.forwardRef(((e,t)=>{window.__c={n:"TimelineFormulaProperty"};const o=Q(e,t);return a.createElement(F,o)})),G=a.forwardRef(((e,t)=>{window.__c={n:"RelationFormulaProperty"};const o=Q(e,t);return a.createElement(F,o)})),$=a.forwardRef(((e,t)=>{window.__c={n:"RelationSectionFormulaProperty"};const o=Q(e,t);return a.createElement(F,o)}));function Q(e,t,o){const{store:r,onContextMenu:n,property:i,collectionStore:l}=e;return{ref:t,store:r,property:i,collectionStore:l,editButtonClickProps:(0,M.Am)(e),onContextMenu:n,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,textButtonStyle:null==o?void 0:o.textButtonStyle}}function Y(e){if(void 0===e)return[];if("string"==typeof e)return 0===e.length?[]:[{id:e,type:"text",value:[[e]]}];if("number"==typeof e)return[{id:e,type:"number",value:e}];if((0,y.U3)(e)){return[{id:m.ZV({allowRelativeDates:!1,value:e,userTimeZone:(0,S.r)(),intl:_.default.getIntl()}),type:"date",value:e}]}if("boolean"==typeof e)return[{id:e,type:"checkbox",value:e}];(0,w.t1)(e)}function j(e,t,o){switch(e.type){case"text":const r=(0,b.X)({textValue:e.value,getRecordModel:t,userTimeZone:o,intl:_.default.getIntl(),deterministic:!0});return 0===r.length?[]:[{id:r,type:"text",value:e.value}];case"block":return[{id:e.value.id,type:"relation",value:e.value}];case"date":return[{id:m.ZV({allowRelativeDates:!1,value:e.value,userTimeZone:(0,S.r)(),intl:_.default.getIntl()}),type:"date",value:e.value}];case"checkbox":return[{id:e.value,type:"checkbox",value:e.value}];case"number":return[{id:e.value,type:"number",value:e.value}];case"person":return[{id:e.value.id,type:"person",value:e.value}];case"array":return v.Ar(e.values.map((e=>j(e,t,o))));case"undefined":return[];default:(0,w.t1)(e)}}},69823:(e,t,o)=>{o.d(t,{n:()=>c});var r=o(23174),n=o.n(r),i=o(67294),l=o(24405),a=o(60458),s=o(8606);const c=i.memo((e=>{window.__c={n:"CheckboxPropertyValue"};const{propertyLabel:t,checked:o,enablePointerEventsForInteractiveTypes:r,onClick:c,disabled:d,tooltip:u}=e,{baseStyles:p}=(0,i.useContext)(s.O),y=(null==p?void 0:p.sizing)??"default",m=(0,l.yK)((()=>({cardCheckboxWrapStyle:{display:"flex",alignItems:"center"},cardCheckboxNameStyle:{marginLeft:"small"===y?5:6,marginRight:2}})),[y]),h={checked:o,disabled:d,style:{...r&&{pointerEvents:"auto"}},onClick:c,..."small"===y?{size:14,checkSize:10}:{size:16,checkSize:12},tooltipHeader:u};return t?n()("div",{style:m.cardCheckboxWrapStyle},void 0,i.createElement(a.Z,h),n()("div",{style:m.cardCheckboxNameStyle},void 0,t)):i.createElement(a.Z,h)}))},77729:(e,t,o)=>{o.d(t,{t:()=>d});var r=o(23174),n=o.n(r),i=o(67294),l=o(24405),a=o(80951),s=o(49616),c=o(84076);const d=i.memo((e=>{window.__c={n:"ContactPropertyValue"};const{textValue:t,type:o,useShortenedUrl:r,disableLinkify:d,withComma:u}=e,p=(0,l.yK)((e=>({linkBoxStyle:{pointerEvents:"all",display:"inline",background:void 0,...(0,s.z0)(e)},hoveredLinkBoxStyle:{background:void 0,...(0,s.z0)(e)},pressedLinkBoxStyle:{background:void 0,...(0,s.z0)(e)}})),[]),y=(0,a.Hw)(o,t),m=r&&void 0!==t?(0,s.yt)(t,o):(0,a.zB)(t);return!y||d?i.createElement(i.Fragment,null,m):n()(c.Z,{href:y,onClick:e=>{(e.metaKey||e.ctrlKey)&&window.open(y,"_blank")},style:p.linkBoxStyle,hoveredStyle:p.hoveredLinkBoxStyle,pressedStyle:p.pressedLinkBoxStyle,external:!0},void 0,m,u?", ":null)}))},81381:(e,t,o)=>{o.d(t,{z:()=>d});var r=o(23174),n=o.n(r),i=o(67294),l=o(24405),a=o(40506),s=o(89845),c=o(8606);const d=i.memo((e=>{window.__c={n:"DatePropertyValue"};const{dateValue:t,dateFormat:o,timeFormat:r,withComma:d}=e,{baseStyles:u,shouldRenderTooltip:p}=(0,i.useContext)(c.O),y=(0,l.yK)((()=>({dateBox:{...u.textStyle,display:"inline"}})),[u.textStyle]);return n()(s.Z,{value:t,dateFormat:o??a.sF,timeFormat:r??a.c_,style:y.dateBox,disableTooltip:p||"relative"!==o,withComma:d,displayInUserTimezone:!0})}))},79074:(e,t,o)=>{o.d(t,{e:()=>m});var r=o(23174),n=o.n(r),i=o(67294),l=o(480),a=o(24405),s=o(95538),c=o(82990),d=o(54604),u=o(75018),p=o(81865),y=o(8606);const m=i.memo((e=>{window.__c={n:"FilePropertyValue"};const{linkValue:t,permissionRecord:o}=e,{url:r,name:m}=t,{baseStyles:h}=(0,i.useContext)(y.O),f=(0,l.O7)(),S=i.createRef(),v=(null==h?void 0:h.sizing)??"default",b=(0,a.yK)((e=>({fileTextStyle:{display:"inline-block",height:"small"===v?20:24,lineHeight:"small"===v?"20px":"24px",borderRadius:3,background:e.legacyDefaultSelectColor,padding:"0px 6px",maxWidth:120,cursor:"zoom-in",...c.Z.textOverflowStyle},fileImageStyle:{maxHeight:"small"===v?20:24,borderRadius:3,cursor:"zoom-in"}})),[v]),g=(0,i.useCallback)(((e,t)=>{if(t){const e=e=>{e.stopPropagation(),e.preventDefault(),d.ui({environment:f,renderFullScreenNode:()=>n()(p.Z,{url:r,isAuthenticated:!0,permissionRecord:o,width:300,render:(e,t)=>n()("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:S.current.getBoundingClientRect(),imageUrl:r})};return i.createElement("img",{ref:S,key:r,src:t,style:b.fileImageStyle,onClick:e})}}),[f,S,o,b.fileImageStyle,r]);if((0,s.SR)({url:r}))return n()(p.Z,{url:r,isAuthenticated:!0,permissionRecord:o,width:20,render:g},r);return n()("span",{style:b.fileTextStyle,onClick:e=>{e.stopPropagation(),u.openFileUrl(f,{url:r,type:"file",from:"view_original",downloadName:m,permissionRecord:o})}},r,m)}))},90692:(e,t,o)=>{o.d(t,{Z:()=>d});var r=o(23174),n=o.n(r),i=o(67294),l=o(24405),a=o(84619),s=o(10009),c=o(8606);const d=i.memo((e=>{window.__c={n:"InlineRelationPropertyValue"};const{recordPointer:t,parentStore:o,linkify:r}=e,{isReadOnly:d,shouldWrap:u,baseStyles:p,containerRef:y}=(0,i.useContext)(c.O),m=(null==p?void 0:p.tokenFormat)??a.l.Medium,h=(0,l.yK)((()=>({relationToken:{margin:0}})),[]);return n()(s.Z,{blockId:t.id,isSingle:!1,parentStore:o,shouldWrap:u,format:m,showRelationTooltip:!1,style:h.relationToken,containingParentRef:y,clickTitleBehavior:r||d?"peek":void 0},t.id)}))},59580:(e,t,o)=>{o.d(t,{A:()=>d});var r=o(23174),n=o.n(r),i=o(67294),l=o(24405),a=o(32056),s=o(56247),c=o(8606);function d(e){var t;window.__c={n:"NumberPropertyValue"};const{numberValue:o,numberFormat:r,withComma:d,isRightAligned:u}=e,{baseStyles:p,propertySchema:y,shouldRenderTooltip:m,shouldWrap:h}=(0,i.useContext)(c.O),f=y,S=(0,l.yK)((()=>{var e,t,o;const r="bar"===(null==f||null===(e=f.show_as)||void 0===e?void 0:e.type)||"ring"===(null==f||null===(t=f.show_as)||void 0===t?void 0:t.type);return{style:{...!r&&{display:void 0},..."bar"===(null==f||null===(o=f.show_as)||void 0===o?void 0:o.type)?{flex:"1 0 auto",justifyContent:u?"flex-end":void 0}:{},...!h&&{display:r?"inline-flex":"inline",textWrap:"nowrap"}},barStyle:"small"===(null==p?void 0:p.sizing)?{flexGrow:1,minWidth:48,maxWidth:120}:{flexGrow:1,minWidth:48,maxWidth:160}}}),[null==p?void 0:p.sizing,u,null==f||null===(t=f.show_as)||void 0===t?void 0:t.type,h]);return n()(s.b,{style:S.style,barStyle:S.barStyle,progressSize:p.textLineHeight,numberValue:o,numberFormat:r||"number"===(null==f?void 0:f.type)&&(null==f?void 0:f.number_format)||a.dk,numberShowAs:null==f?void 0:f.show_as,shouldRenderTooltip:!m,withComma:d})}},18417:(e,t,o)=>{o.d(t,{H:()=>p});var r=o(23174),n=o.n(r),i=o(67294),l=o(86628),a=o(24405),s=o(66897),c=o(84619),d=o(92864),u=o(8606);const p=i.memo((e=>{var t;window.__c={n:"PersonPropertyValue"};const{actorPointer:o,style:r,shouldShrink:p}=e,{store:y,baseStyles:m,shouldRenderTooltip:h,propertySchema:f}=(0,i.useContext)(u.O),S=(null==m?void 0:m.tokenFormat)??c.l.Medium,v=(0,a.yK)((()=>({actorStyle:{margin:0,...r,...(null==m?void 0:m.tokenFormat)===c.l.Inline&&{pointerEvents:"auto"}}})),[null==m?void 0:m.tokenFormat,r]),b=(0,l.VK)((()=>{const e=null==y?void 0:y.getRecordModel;if(e)return(0,s.Hl)({pointer:o,getRecordModel:e})}),[o,null==y?void 0:y.getRecordModel]);return void 0===b?null:n()(d.ZP,{actor:b,showRemoveButton:!1,format:S,isSingle:!1,shouldShrink:p,style:v.actorStyle,hasTooltip:!h||S===c.l.Inline,tooltipHeader:null==f?void 0:f.name},null===(t=b.asActor)||void 0===t?void 0:t.id)}))},19629:(e,t,o)=>{o.d(t,{E1:()=>C,gZ:()=>w,vQ:()=>P});var r=o(23174),n=o.n(r),i=o(67294),l=o(32056),a=o(97880),s=o(8606),c=o(53876),d=o(69823),u=o(77729),p=o(81381),y=o(79074),m=o(90692),h=o(59580),f=o(18417),S=o(44731),v=o(77722),b=o(18746),g=o(83559);function w(e){const{token:t,targetPropertySchema:o,blockStore:r,checkboxPropertyLabel:i,withComma:s,numberRightAlign:c}=e,{type:v,value:g}=t;switch(v){case"url":case"email":case"phone_number":return n()(u.t,{textValue:g,type:v,useShortenedUrl:!1,withComma:s});case"checkbox":return n()(d.n,{checked:g,propertyLabel:i,disabled:!0});case"number":return n()(h.A,{numberValue:g,numberFormat:o&&"number_format"in o?null==o?void 0:o.number_format:l.dk,withComma:s,isRightAligned:c});case"date":return n()(p.z,{dateValue:g,dateFormat:o&&"date_format"in o?o.date_format:void 0,timeFormat:o&&"time_format"in o?o.time_format:void 0,withComma:s});case"file":return n()(y.e,{linkValue:g,permissionRecord:r.pointer});case"person":return n()(f.H,{actorPointer:g,shouldShrink:!1});case"relation":return n()(m.Z,{recordPointer:g,parentStore:r,linkify:!0});case"select":return n()(S.J,{type:t.groupColor?"status":"select",value:g,groupColor:t.groupColor,color:t.color});case"text":return n()(b.A,{textValue:g,parentStore:r,withComma:s,linkifyUrls:!0});default:return(0,a.t1)(v)}}const C=e=>{let{children:t,propertyType:o,rootPropertySchema:r,numberRightAlign:l}=e;window.__c={n:"PropertyValueTokensWrapper"};const{shouldWrap:a}=(0,i.useContext)(s.O),c="number"===o&&l;return P(o,r)?n()(v.Y,{style:a?{display:"flex",flexWrap:"wrap"}:void 0,isRightAligned:c},void 0,t):n()(g.K,{isRightAligned:c},void 0,t)},P=(e,t)=>{var o,r;return void 0!==e&&"title"!==e&&(!!(0,c.A2)(e)&&("number"!==e||"bar"!==(null==t||null===(o=t.show_as)||void 0===o?void 0:o.type)&&"ring"!==(null==t||null===(r=t.show_as)||void 0===r?void 0:r.type)))}},44731:(e,t,o)=>{o.d(t,{J:()=>y});var r=o(23174),n=o.n(r),i=o(67294),l=o(24405),a=o(8848),s=o(84619),c=o(82990),d=o(62896),u=o(85567),p=o(8606);const y=i.memo((e=>{window.__c={n:"SelectPropertyValue"};const{value:t,color:o,shouldShrink:r,type:y}=e,m="status"===y?e.groupColor??"default":void 0,h=(0,l.Fg)(),{baseStyles:f}=(0,i.useContext)(p.O),S=(null==f?void 0:f.tokenFormat)??s.l.Medium,v=(0,l.yK)((()=>({token:{margin:0,...c.Z.textOverflowStyle}})),[]);if(!t)return null;const{textColor:b,backgroundColor:g}=(0,a.KR)(h,o??m),w="status"===y?o&&"default"!==o?o:m??"gray":void 0;return n()(u.Z,{format:S,value:n()(d.Z,{},void 0,t),color:b,backgroundColor:g,showRemoveButton:!1,shouldShrink:r,isRound:"status"===y,isSingle:!1,showColoredDot:w,style:v.token,showFullValueTooltip:!1})}))},69582:(e,t,o)=>{o.d(t,{P:()=>h,w:()=>f});var r=o(23174),n=o.n(r),i=(o(67294),o(24405)),l=o(84619),a=o(69651),s=o(22686),c=o(5366),d=o(70203),u=o(97880),p=o(93044),y=o(77722);const m=(0,c.defineMessages)({me:{id:"templateVariablePropertyValueComponent.templateVariables.text.me",defaultMessage:"Person who duplicated page"},now:d.olT.nowText,today:d.olT.todayText});function h(e){window.__c={n:"TemplateVariablePropertyValueText"};const t=(0,i.yK)((e=>({textWrapper:{lineHeight:"20px"}})),[]);return n()(y.Y,{fontColor:"light",style:t.textWrapper},void 0,n()(f,{templateVariableType:e.templateVariableType}))}function f(e){window.__c={n:"TemplateVariableUIToken"};const{templateVariableType:t,showRemoveButton:o,onRemove:r,style:y}=e,m=(0,c.useIntl)(),h=(0,i.yK)((e=>({uiToken:{background:e.outlineBlueButtonPressedBackground,color:e.blueColor,padding:"2px 4px",width:"max-content",...y||{}}})),[y]);return n()(p.ZP,{format:l.l.Medium,isSingle:!0,title:S(t,m),renderAvatar:()=>function(e){let t;(0,d.pJX)(e)?t=s.f:(0,d.tXA)(e)?t=a.C:(0,u.t1)(e);return t}(t)({width:12,height:12,marginRight:4}),shouldShrink:!0,onClickRemove:r,showRemoveButton:Boolean(o),style:h.uiToken})}function S(e,t){let o;return"me"===e?o=t.formatMessage(m.me):"now"===e?o=t.formatMessage(m.now):"today"===e?o=t.formatMessage(m.today):(0,u.t1)(e),o}},18746:(e,t,o)=>{o.d(t,{A:()=>S});var r=o(23174),n=o.n(r),i=o(67294),l=o(480),a=o(86628),s=o(24405),c=o(80951),d=o(12549),u=o(23867),p=o(70203),y=o(60682),m=o(49616),h=o(14976),f=o(16354);const S=i.memo((e=>{window.__c={n:"TextPropertyValue"};const{textValue:t,parentStore:o,withComma:r,linkifyUrls:S}=e,v=(0,l.O7)(),b=(0,s.Fg)(),g=(0,y.kw)();(0,i.useEffect)((()=>{void 0!==t&&v.KatexStore.loadIfNeeded((()=>t))}),[v.KatexStore,t]);const w=(0,a.VK)((()=>v.KatexStore.getKatex()),[v.KatexStore]),C=(0,a.VK)((()=>void 0===t?null:h.IY({environment:v,textValue:t&&{value:t,spaceId:(0,u.C)(o.pointer.spaceId)},parentStore:o,disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!0,theme:b,emojiType:g,katex:w,formulaValueTypes:[],stopLinkPropagation:!0})),[g,v,w,o,t,b]),P=(0,i.useMemo)((()=>{if(!S||void 0===t)return null;const e=(0,p.Jcv)(t);return(0,d.Z)(e)?(0,c.zB)(t):null}),[S,t]);return n()("span",{},void 0,P?n()(f.Z,{href:P,style:{display:"inline",pointerEvents:"auto",...(0,m.z0)(b)},external:!0,onClick:e=>e.stopPropagation()},void 0,C):C,r?", ":null)}))},77722:(e,t,o)=>{o.d(t,{Y:()=>l});var r=o(67294),n=o(24405),i=o(8606);const l=r.forwardRef(((e,t)=>{let{children:o,fontColor:l,style:a,isRightAligned:s}=e;window.__c={n:"TextlikePropertyValueWrapper"};const{baseStyles:c}=(0,r.useContext)(i.O),d=(0,n.yK)((e=>({textStyle:{...c.textStyle,...a,...s?{justifyContent:"right",textAlign:"right"}:{},..."light"===l?{color:e.lightTextColor}:{}}})),[c.textStyle,a,s,l]);return r.createElement("div",{ref:t,style:d.textStyle},o)}))},83559:(e,t,o)=>{o.d(t,{K:()=>l});var r=o(67294),n=o(24405),i=o(8606);const l=r.forwardRef(((e,t)=>{let{children:o,style:l,isRightAligned:a}=e;window.__c={n:"TokenPropertyValueWrapper"};const{baseStyles:s}=(0,r.useContext)(i.O),c=(0,n.yK)((()=>({tokenWrapStyle:{...s.tokenWrapStyle,...a?{justifyContent:"end"}:void 0,...l}})),[s.tokenWrapStyle,l,a]);return r.createElement("div",{ref:t,style:c.tokenWrapStyle},o)}))},65473:(e,t,o)=>{o.d(t,{Z:()=>K});var r=o(23174),n=o.n(r),i=o(10434),l=o.n(i),a=o(67294),s=o(480),c=o(86628),d=o(24405),u=o(48299),p=o(43664),y=o(12534),m=o(80444),h=o(31792),f=o(64921),S=o(36596);function v(){window.__c={n:"PropertyValueShimmer"};const e=(0,d.yK)((e=>({outer:{display:"inline-flex",overflow:"hidden",position:"relative",width:"100%"},inner:{width:"60%",height:10,borderRadius:12,backgroundColor:e.lightDividerColor}})),[]);return n()("div",{style:e.outer},void 0,n()(S.Z,{style:{...e.inner}}))}var b=o(51454),g=o(66890),w=o(45094),C=o(8606),P=o(78030);function _(e){window.__c={n:"QuickActionButtonsBase"};const{style:t,children:o,align:r}=e,i=(0,d.yK)((()=>({buttonWrapperStyle:{display:"flex",position:"absolute",top:4,gap:"4px",zIndex:b.XP,..."right"===r&&{right:6},..."left"===r&&{left:6},...t}})),[r,t]);return o?n()("div",{style:i.buttonWrapperStyle},void 0,o):null}function x(e){const{format:t,align:o}=e;switch(t){case P.C.Table:return a.createElement(T,l()({},e,{align:o??"right"}));case P.C.Page:return a.createElement(R,l()({},e,{align:o??"right"}));case P.C.Board:return a.createElement(k,l()({},e,{align:o??"right"}));case P.C.GalleryView:return a.createElement(E,l()({},e,{align:o??"right"}));case P.C.ListView:return a.createElement(B,l()({},e,{align:o??"right"}));default:return a.createElement(_,l()({},e,{align:o??"right"}))}}function k(e){window.__c={n:"BoardQuickActionButtons"};const t=(0,d.yK)((()=>({buttonWrapperStyle:{top:0,...e.style}})),[e.style]);return a.createElement(_,l()({},e,{style:t.buttonWrapperStyle}))}function R(e){window.__c={n:"PageQuickActionButtons"};const t=(0,d.yK)((()=>({buttonWrapperStyle:{top:5,...e.style}})),[e.style]);return a.createElement(_,l()({},e,{style:t.buttonWrapperStyle}))}function E(e){window.__c={n:"GalleryQuickActionButtons"};const t=(0,d.yK)((()=>({buttonWrapperStyle:{top:-1,...e.style}})),[e.style]);return a.createElement(_,l()({},e,{style:t.buttonWrapperStyle}))}function B(e){window.__c={n:"ListQuickActionButtons"};const t=(0,d.yK)((()=>({buttonWrapperStyle:{position:void 0,...e.style}})),[e.style]);return a.createElement(_,l()({},e,{style:t.buttonWrapperStyle}))}function T(e){window.__c={n:"TableQuickActionButtons"};const{containerRef:t,align:o="right",children:r}=e,n=(0,g.DK)(),{isMobile:i}=(0,s.Fy)(),{shouldWrap:u}=(0,a.useContext)(C.O),p=function(e){const{containerEl:t,collectionContextStore:o,skip:r}=e,n=(0,s.O7)(),i=(0,c.VK)((()=>r?0:n.WindowSizeStore.state.width),[n.WindowSizeStore,r]),l=(0,c.VK)((()=>r||null!=o&&o.isInPeekRenderer.state?0:(0,w.vJ)(n)),[o,n,r]),[d,u]=(0,a.useMemo)((()=>{if(!l||r||!t)return[void 0,void 0];const e=t.getBoundingClientRect();return[e.right,e.width]}),[l,t,r]);return(0,c.VK)((()=>{if(r||!l||void 0===u||void 0===d)return 0;const e=i-l;return Math.min(u-60,Math.max(0,d-e))}),[l,i,u,d,r],{debugName:"useTableViewMarginRight"})}({containerEl:t.current,collectionContextStore:n,skip:"left"===o||!r||i}),y=(0,d.yK)((()=>({buttonWrapperStyle:{..."right"===o?{right:6+p}:void 0,...e.style,...i&&u?{position:"static",float:o,marginLeft:2}:{}}})),[o,i,p,e.style,u]);return a.createElement(_,l()({},e,{style:y.buttonWrapperStyle}))}var M=o(26388);function V(e){window.__c={n:"BlockPropertyButtonTooltip"};const{propertyValue:t,propertyCaption:o,render:r}=e,{propertySchema:i,format:l,shouldRenderTooltip:s}=(0,a.useContext)(C.O),c=null==i?void 0:i.name,u=!s,p=l===P.C.Board||l===P.C.GalleryView,y=(null==c?void 0:c.length)&&!u,m=void 0!==t,h=void 0!==o,f=y||m||h,S=(0,d.yK)((e=>({value:{color:y?e.mediumInvertedTextColor:void 0},caption:{color:y||m?e.mediumInvertedTextColor:void 0}})),[y,m]),v=(0,a.useCallback)((()=>a.createElement(a.Fragment,null,y&&n()("div",{},void 0,c),m&&n()("div",{style:S.value},void 0,t),h&&n()("span",{style:S.caption},void 0,o))),[h,y,m,o,c,t,S.caption,S.value]);return f?n()(M.Z,{renderTooltip:v,render:e=>r(e),placement:p?M.Z.Placement.Left:M.Z.Placement.Bottom}):r()}var A=o(11061);const I=(0,a.forwardRef)(((e,t)=>{const{tooltipPropertyValue:o,tooltipPropertyCaption:r,tooltipHide:i}=e,s=o=>a.createElement(F,l()({ref:t},e,{tooltipEvents:o}));return i?s():n()(V,{propertyValue:o,propertyCaption:r,render:s})})),F=(0,a.forwardRef)(((e,t)=>{window.__c={n:"BlockPropertyButtonInner"};const o=(0,s.O7)(),{device:r}=o,i=(0,c.qz)(void 0,h.Z),{style:S,quickActionButtons:b,quickActionButtonsAlign:g,quickActionButtonsStyle:w,quickActionButtonsForceVisible:P,editButtonClickProps:_}=e,{collectionContextStore:k,format:R,isReadOnly:E,store:B}=(0,a.useContext)(C.O),{tooltipPhase:T,nextTooltipPhase:M}=(0,a.useContext)(A.J),V=(0,c.VK)((()=>{var e,t;const o=null==k?void 0:k.collectionStore(),r=null==o?void 0:o.isSyncedCollection();return Boolean(r&&!(null!=B&&null!==(e=B.getFormat())&&void 0!==e&&null!==(e=e.attributes)&&void 0!==e&&e.length)&&!(null!=B&&null!==(t=B.getFormat())&&void 0!==t&&t.error))}),[k,B]),I=(0,d.yK)((()=>({buttonStyle:{position:"relative",...S}})),[S]),F=(0,c.VK)((()=>i.state.mouseEntered),[i]),K=(0,a.useCallback)((()=>{i.setState({...i.state,mouseEntered:!0})}),[i]),O=(0,a.useCallback)((()=>{i.setState({...i.state,mouseEntered:!1})}),[i]),Z=(0,a.useRef)(null),L=e=>{Z.current=e,"function"==typeof t?t(e):t&&(t.current=e)},H=(0,a.useMemo)((()=>{if(!b)return null;return(void 0!==P?P:F||r.isMobile)?n()(x,{align:g,style:w,format:R,containerRef:Z},void 0,b):void 0}),[r.isMobile,R,F,b,g,w,P]);return V?n()("div",{style:I.buttonStyle},void 0,n()(v,{})):E||void 0===_?a.createElement("div",l()({ref:L,style:I.buttonStyle,onMouseMove:K,onMouseLeave:O},e.tooltipEvents),H,e.children):a.createElement(f.Z,l()({ref:L,hoveredStyle:e.hoveredStyle,pressedStyle:e.pressedStyle,style:I.buttonStyle,onMouseMove:K,onMouseLeave:O,onContextMenu:t=>{const{onContextMenu:o}=e;r.isAndroid&&r.isPhone?t.preventDefault():o&&(0,y.ZP)({event:t,context:y.Af.EditorContextMenu,callback:()=>{o(t)}})},onClick:async e=>{if(void 0===_)return;const{onClick:t,store:r,property:n,format:l,collectionStore:a,blockPropertyValueOverlayStore:s,disableHorizontalEdgeScroll:c,isStatusCheckbox:d}=_;await p.z({element:Z.current??void 0,environment:o,onClick:t,store:r,property:a.getMappedProperty(n),format:l,collectionStore:a,blockPropertyValueOverlayStore:s,disableHorizontalEdgeScroll:c,collectionContextStore:k,mouseStore:i,statusSetCheckbox:d?!e.altKey:void 0});const{currentUserSettingsStore:y,currentSpaceStore:h}=m.default.state;void 0!==y&&void 0!==h&&void 0!==T&&void 0!==M&&u.uR({environment:o,requiredCurrPhase:T,nextPhase:M,currentUserSettingsStore:y,currentSpaceStore:h})},testId:"property-value"},e.tooltipEvents),H,e.children)})),K=I},11061:(e,t,o)=>{o.d(t,{J:()=>h,O:()=>m});var r=o(23174),n=o.n(r),i=o(67294),l=o(480),a=o(86628),s=o(45433),c=o(93959),d=o(80444),u=o(91007),p=o(8606);const y={[s.Es.Assign]:"assign_to_someone",[s.Es.Status]:"change_task_status",[s.Es.TaskToProjectRelation]:"select_a_project"};function m(e){window.__c={n:"BlockPropertyIntroTourTooltipWrapper"};const{store:t,collectionStore:o,property:r,children:m}=e,{isReadOnly:h}=(0,i.useContext)(p.O),S=(0,l.O7)(),v=(0,a.VK)((()=>{if(S.device.isMobile||t.pathIsDead()||h||o.getFormatStore().getKeyStore("app_config_uri").getValue()!==s.iS)return;const e=(0,c.jH)(d.default.state.currentUserSettingsStore,d.default.state.currentSpaceStore);return void 0===y[r]||y[r]!==e||t.getFormat().app_config_uri?void 0:e}),[S.device.isMobile,t,h,o,r]);return void 0!==v?n()(f,{tooltipPhase:v,collectionStore:o},void 0,n()(u.Z,{store:t,origin:m,isFirstTooltip:!1,phase:v})):m}const h=(0,i.createContext)({tooltipPhase:void 0,nextTooltipPhase:void 0});function f(e){window.__c={n:"BlockPropertyIntroTourTooltipContextProvider"};const{tooltipPhase:t,collectionStore:o,children:r}=e,i=(0,a.VK)((()=>{var e;const r=null===(e=o.getFormat().app_uri_map)||void 0===e?void 0:e[s.Es.TaskToProjectRelation],n=Boolean(r&&!o.getDeletedSchema()[r]);return(0,c.$j)(t,n)}),[o,t]);return n()(h.Provider,{value:{tooltipPhase:t,nextTooltipPhase:i}},void 0,r)}},8606:(e,t,o)=>{o.d(t,{O:()=>C,Z:()=>P});var r=o(23174),n=o.n(r),i=o(67294),l=o(480),a=o(86628),s=o(99036),c=o(80951),d=o(42875),u=o(72126),p=o(70203),y=o(8406),m=o(66890),h=o(49616),f=o(33929),S=o(96620),v=o(77080),b=o(78030),g=o(24118),w=o(53876);const C=(0,i.createContext)({collectionContextStore:void 0,propertySchema:void 0,isEmpty:!1,isReadOnly:!0,shouldRenderTooltip:!1,shouldWrap:!1,baseStyles:{},trackEditBlockProperty:()=>{},format:0,containerRef:null,store:void 0,templateVariableContext:void 0});function P(e){window.__c={n:"BlockPropertyValueContextProvider"};const{format:t,children:o,disabled:r,store:P,tableWrap:_,collectionStore:x,property:k,width:R,shouldSetCellHeight:E,isLast:B,disableTableBorderRight:T,locked:M,containerRef:V,showIfEmpty:A}=e,I=(0,l.O7)(),F=(0,m.Y$)(),K=(0,a.VK)((()=>x.getSchema()),[x]),O=(0,a.VK)((()=>P.getPropertyStore(k)),[P,k],{debugName:"propertyStore"}),Z=(0,g.PJ)(x,k),L=(0,a.qz)(void 0,S.Z),H=function(e,t,o,r){const n=(0,l.O7)();return(0,a.VK)((()=>{if(!e.isDefined())return!1;const i=null==r?void 0:r.type;return"checkbox"!==i&&"status"!==i&&"button"!==i&&"created_time"!==i&&"created_by"!==i&&"formula"!==i&&"rollup"!==i&&"auto_increment_id"!==i&&(0,c.wV)({block:e.getModel(),property:o,schema:t,getRecordModel:e.getRecordModel,userTimeZone:(0,d.r)(),intl:f.default.getIntl(),userId:n.currentUser.id})}),[n.currentUser.id,t,o,r,e],{debugName:"BlockPropertyValueContext.useIsEmpty"})}(P,K,k,Z),D=function(e,t,o,r,n){return(0,a.VK)((()=>o||!e.canEdit()||(0,c.wl)(t)||(0,g.Sm)(n)||e.isLocked()||r===b.C.Calendar||r===b.C.Timeline||(0,c.KK)(e.getModel(),t)),[o,r,t,n,e],{debugName:"BlockPropertyValueContext.useIsReadOnly"})}(P,k,r,t,Z),z=function(e,t){if([b.C.Board,b.C.GalleryView,b.C.ListView,b.C.Relation,b.C.RelationSection].includes(e))return!0;if(e===b.C.Mini)return!t;return!1}(t,H),W=function(e,t){return e===b.C.Page||e===b.C.CompactPage||e===b.C.Table&&t||e===b.C.Board&&t||e===b.C.GalleryView&&t}(t,_),U=(0,w.uo)({width:R,shouldSetCellHeight:E,format:t,shouldWrap:W,isLast:B,disableTableBorderRight:T,locked:M,disabled:r,showIfEmpty:A}),N=function(e,t,o){return(0,a.VK)((()=>{if(!v.default.checkGate("template-variable-properties"))return;if(!e.isDefined())return;if(!e.isTemplate())return;const r=null==o?void 0:o.type;if((0,s.fc)(r)){const o=e.getPropertyValue(t),r=u.Ps(o);if(r&&p.km_(r)){const e=p.QGY(p.hn0(r)),t=e&&p.fsE(e);return t&&{templateVariable:t.type}}}}),[t,o,e],{debugName:"BlockPropertyValueContext.useTemplateVariableContext"})}(P,k,Z),q=(0,i.useCallback)((()=>{F&&(null==Z?void 0:Z.type)&&y.rv({environment:I,collectionContextStore:F,block_id:O.id,property:k,property_type:null==Z?void 0:Z.type,from:h.Sy(t),isFromBulkActionsToolbar:Boolean(L)})}),[F,L,I,t,k,null==Z?void 0:Z.type,O.id]),G=(0,i.useMemo)((()=>({store:P,collectionContextStore:F,propertySchema:Z,isEmpty:H,isReadOnly:D,shouldRenderTooltip:z,shouldWrap:W,baseStyles:U,trackEditBlockProperty:q,format:t,containerRef:V,templateVariableContext:N})),[P,F,Z,H,D,z,W,U,q,t,V,N]);return n()(C.Provider,{value:G},void 0,o)}},78030:(e,t,o)=>{o.d(t,{C:()=>r});let r=function(e){return e[e.Table=0]="Table",e[e.Board=1]="Board",e[e.Calendar=2]="Calendar",e[e.ListView=3]="ListView",e[e.GalleryView=4]="GalleryView",e[e.Timeline=5]="Timeline",e[e.Page=6]="Page",e[e.CompactPage=7]="CompactPage",e[e.Relation=8]="Relation",e[e.RelationSection=9]="RelationSection",e[e.Mini=10]="Mini",e}({})},88071:(e,t,o)=>{o.d(t,{Z:()=>c});var r=o(23174),n=o.n(r),i=(o(67294),o(24405)),l=o(84619),a=o(5366);const s={[l.l.ExtraSmall]:{height:14,fontSize:12,margin:"0 4px 0 0"},[l.l.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0"},[l.l.Medium]:{height:21,fontSize:14,margin:"0 12px 6px 0"},[l.l.Inline]:{height:21,fontSize:14,margin:"0 12px 0 0"},[l.l.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0"}};const c=function(e){window.__c={n:"BlockPropertyValueTokenMore"};const{count:t,format:o,fixedHeight:r,style:l,isCompact:c}=e,{margin:d,height:u,fontSize:p}=s[o],y=(0,i.yK)((e=>({wrapper:{display:"flex",alignItems:"center",lineHeight:1.2,borderRadius:3,fontSize:p,margin:d,color:e.mediumTextColor,...r&&{height:u},...l},compact:{whiteSpace:"nowrap"}})),[p,u,r,d,l]);return n()("div",{style:y.wrapper},void 0,c?n()("span",{style:y.compact},void 0,n()(a.FormattedMessage,{defaultMessage:"+{thinSpace}{moreItemsCount}",id:"database.tokens.moreItems.message",values:{moreItemsCount:t,thinSpace:n()("span",{},void 0,"")}})):n()("span",{},void 0,n()(a.FormattedMessage,{defaultMessage:"{relationMoreItemsCount} more",id:"database.relationPropertyValue.moreItems.message",values:{relationMoreItemsCount:t}})))}},39694:(e,t,o)=>{o.d(t,{Z:()=>C});var r=o(10434),n=o.n(r),i=o(23174),l=o.n(i),a=o(67294),s=o(480),c=o(24405),d=o(18955),u=o(75553),p=o(5366),y=o(43664),m=o(80402),h=o(66890),f=o(33929),S=o(29370),v=o(73063),b=o(26388),g=o(8606),w=o(78030);function C(e){window.__c={n:"CopyButton"};const{store:t,schema:o,property:r,style:i,format:p}=e,C=(0,s.O7)(),_=(0,c.Fg)(),x=(0,h.DK)(),{isEmpty:k,propertySchema:R,isReadOnly:E}=(0,a.useContext)(g.O);if(void 0===R||k||C.device.isMobile&&!1===E||"checkbox"===(0,d.z6)(R))return null;const B=p===w.C.Table,T=f.default.formatMessage(P.copy);return l()(b.Z,{renderTooltip:()=>T,render:e=>a.createElement("div",n()({onClick:()=>{let e;B&&(e=S.Z.getState(),m.MO()),y.r({environment:C,theme:_,store:t,schema:o,property:r,collectionContextStore:x}),B&&e&&S.Z.setState(e)},style:i},e),l()(v.Z,{ariaLabel:T,hasBackground:!0,icon:u.U,showShadow:!0}))})}const P=(0,p.defineMessages)({copy:{defaultMessage:"Copy to Clipboard",id:"database.copyButton.copyToClipboard"}})},24118:(e,t,o)=>{o.d(t,{Ae:()=>d,Am:()=>y,PJ:()=>m,Ri:()=>h,Sm:()=>u,bb:()=>p});var r=o(67294),n=o(86628),i=o(35011),l=o(80951),a=o(42875),s=o(66890),c=o(33929);const d=["last_edited_by","created_by","last_edited_time","created_time","auto_increment_id","location"],u=e=>!e||d.includes(e.type);function p(e){const{store:t,schema:o,property:r,userId:n}=e,s=o[r],d=null==s?void 0:s.type;return"checkbox"!==d&&"button"!==d&&"checkbox"!==(0,i.mm)(s)&&(!t.isDefined()||l.wV({block:t.getModel(),property:r,schema:o,getRecordModel:t.getRecordModel,userId:n,userTimeZone:(0,a.r)(),intl:c.default.getIntl()}))}function y(e,t){let{store:o,property:n,format:i,onClick:l,collectionStore:a,blockPropertyValueOverlayStore:s,disableHorizontalEdgeScroll:c}=e;return(0,r.useMemo)((()=>({store:o,property:n,format:i,onClick:l,collectionStore:a,blockPropertyValueOverlayStore:s,disableHorizontalEdgeScroll:c,isStatusCheckbox:null==t?void 0:t.isStatusCheckbox})),[s,a,c,i,null==t?void 0:t.isStatusCheckbox,l,n,o])}function m(e,t){const o=(0,s.Y$)();return(0,n.VK)((()=>{const r=e.getSchema(),n=e.getMappedProperty(t),i=o.normalizedSchemaStore.state;return r[n]??i[t]}),[o,e,t],{debugName:"usePropertySchema"})}function h(e,t){return(0,n.VK)((()=>e.getMappedProperty(t)),[e,t],{debugName:"useMappedProperty"})}},53876:(e,t,o)=>{o.d(t,{A2:()=>v,Ac:()=>u,IT:()=>h,RQ:()=>w,_w:()=>y,ch:()=>m,e4:()=>g,sf:()=>f,uo:()=>C,z6:()=>c});var r=o(67294),n=o(480),i=o(24405),l=o(84619),a=o(97880),s=o(78030);const c="14px",d="12px",u=1.5,p=18,y=34,m=24,h=30,f={[s.C.Table]:{default:"6px 8px",text:"5px 8px",checkbox:"8px",button:"4px 8px"},[s.C.Page]:{default:"7px 8px",text:"6px 8px",checkbox:"9px 8px",button:"5px 8px"},[s.C.CompactPage]:{default:"5px 6px",text:"4px 8px",token:"5px 6px",checkbox:"7px 6px",button:"3px 6px"},[s.C.Board]:{default:"5px",text:"5px",checkbox:"5px",button:"4px"}},S=["title","text","email","phone_number","number","url","date","created_time","last_edited_time","auto_increment_id"];function v(e){return S.includes(e)}const b=["button","file"];function g(e){return b.includes(e)}const w={[l.l.Small]:{columnGap:6,rowGap:4},[l.l.Medium]:{columnGap:8,rowGap:6},[l.l.Inline]:{columnGap:6,rowGap:4}};function C(e){let{width:t,shouldSetCellHeight:o,format:S,shouldWrap:v,isLast:b,disableTableBorderRight:g,disabled:C,locked:P,showIfEmpty:_}=e;const x=(0,i.Fg)(),{isPhone:k}=(0,n.Fy)();return(0,r.useMemo)((()=>{switch(S){case s.C.Table:return{buttonStyle:{display:"block",fontSize:c,overflow:"hidden",width:t,borderRight:g?"none":`1px solid ${x.tableDividerColor}`,whiteSpace:v?"normal":"nowrap",height:o?32:void 0,minHeight:32,cursor:C||P?"default":"pointer",padding:f[s.C.Table].default},buttonHoveredStyle:{background:"unset"},buttonPressedStyle:{background:"unset"},textStyle:{lineHeight:u,whiteSpace:v?"pre-wrap":"nowrap",wordBreak:v?"break-word":"normal"},tokenWrapStyle:{display:"flex",flexWrap:v?"wrap":"nowrap",...w[l.l.Medium]},textLineHeight:21,sizing:"default",tokenFormat:l.l.Medium};case s.C.GalleryView:return{buttonStyle:{display:"flex",overflow:"hidden",alignItems:"center",borderRadius:5,margin:"0 6px 2px 6px",padding:"0 5px",fontSize:k?c:d,minHeight:24,whiteSpace:v?"normal":"nowrap",width:_?"auto":"fit-content"},textStyle:{lineHeight:u,whiteSpace:v?"pre-wrap":"nowrap",wordBreak:v?"break-word":"normal",overflow:"hidden"},tokenWrapStyle:{display:"flex",minWidth:0,flexShrink:0,flexWrap:v?"wrap":"nowrap",width:v?"100%":void 0,...w[k?l.l.Medium:l.l.Small]},textLineHeight:k?21:p,sizing:k?"default":"small",tokenFormat:k?l.l.Medium:l.l.Small};case s.C.Board:return{buttonStyle:{display:"flex",overflow:"hidden",alignItems:"center",borderRadius:5,fontSize:d,margin:"0 6px 2px 6px",padding:f[s.C.Board].default,minHeight:28,whiteSpace:v?"normal":"nowrap",width:_?"auto":"fit-content"},textStyle:{lineHeight:u,whiteSpace:v?"pre-wrap":"nowrap",wordBreak:v?"break-word":"normal"},tokenWrapStyle:{display:"flex",flexWrap:v?"wrap":"nowrap",...w[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Small};case s.C.RelationSection:return{buttonStyle:{display:"inline-flex",fontSize:d,overflow:"hidden",alignItems:"center",marginLeft:0,minHeight:32,padding:"0 8px",borderRadius:5},tokenWrapStyle:{display:"flex",minWidth:0,...w[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Small};case s.C.Relation:return{buttonStyle:{fontSize:d,overflow:"hidden",alignItems:"center",padding:"0 4px",borderRadius:5,display:"flex",marginLeft:k?0:8,marginRight:k?8:0,height:24,minWidth:20},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",minWidth:0,...w[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Small};case s.C.ListView:return{buttonStyle:{fontSize:d,overflow:"hidden",alignItems:"center",padding:"0 6px 0 8px",borderRadius:5,display:"flex",marginLeft:k?0:2,marginRight:k?8:0,minHeight:30,minWidth:20},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",minWidth:0,...w[l.l.Inline]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Inline};case s.C.Page:return{buttonStyle:{fontSize:c,overflow:"hidden",display:"inline-block",borderRadius:3,width:"100%",minHeight:y,padding:f[s.C.Page].default},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"pre-wrap"},tokenWrapStyle:{display:"flex",flexWrap:"wrap",...w[l.l.Medium]},textLineHeight:21,sizing:"default",tokenFormat:l.l.Medium};case s.C.Timeline:return{buttonStyle:{display:"flex",alignItems:"center",fontSize:d,marginRight:b?0:10},buttonHoveredStyle:{background:"unset"},buttonPressedStyle:{background:"unset"},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap"},tokenWrapStyle:{display:"flex",minWidth:0,...w[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Inline};case s.C.Calendar:return{buttonStyle:{fontSize:d,display:"flex",alignItems:"center",height:m,whiteSpace:"nowrap",width:"100%"},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden"},tokenWrapStyle:{display:"flex",flexShrink:0,flexWrap:"nowrap",...w[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Small};case s.C.CompactPage:return{buttonStyle:{fontSize:c,overflow:"hidden",alignItems:"center",borderRadius:3,display:"flex",width:"100%",minHeight:30,padding:f[s.C.CompactPage].default},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},tokenWrapStyle:{display:"flex",flexWrap:"nowrap",overflow:"hidden",alignItems:"center",...w[l.l.Medium]},textLineHeight:21,sizing:"default",tokenFormat:l.l.Medium};case s.C.Mini:return{buttonStyle:{fontSize:c,overflow:"hidden",alignItems:"center",borderRadius:4,display:"flex",padding:"0 6px",minWidth:0,height:h},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",flexWrap:"nowrap",overflow:"hidden",alignItems:"center",...w[l.l.Medium]},textLineHeight:21,sizing:"default",tokenFormat:l.l.Medium};default:(0,a.t1)(S)}}),[g,C,S,b,k,P,o,v,_,x.tableDividerColor,t])}}}]);