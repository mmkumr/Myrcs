"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4864],{76463:(e,t,i)=>{i.d(t,{P0:()=>F,RN:()=>P,VG:()=>D,Yw:()=>T,jX:()=>Z,k2:()=>A,lz:()=>M,v2:()=>_});var o=i(5366),n=i(26825),r=i(27006),a=i(45953),s=i(21202),d=i(77420),l=i(15047),c=i(19889),m=i(97880),u=i(47307),p=i(33929),g=i(67669),f=i(57559),v=i(54642),y=i(92625),h=i(76464),S=i(9953),b=i(64964),w=i(28014),C=i(39699),x=i(61202);const k=(0,o.defineMessages)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function I(e,t){const{environment:i,spaceStore:o,spaceRole:n}=t,r=function(e){const{name:t,spaceStore:i,userId:o,icon:n,type:r}=e,a=Date.now(),s={name:t,created_at:a,created_by_table:c.KJ,created_by_id:o,alive:!0,icon:n,space_id:i.id,last_edited_at:a,last_edited_by_id:o,last_edited_by_table:c.KJ};switch(r){case"guest":return{...s,type:"guest",capabilities:e.capabilities,parent_table:l.bx,parent_id:i.id,integration_id:void 0};case"scim":return{...s,type:"scim",parent_table:c.KJ,parent_id:o};default:(0,m.t1)(r)}}(t),a=S.ae({environment:i,table:d.cZ,value:r,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,transaction:e});return h.ep({environment:i,store:o,permissionItems:[{type:"bot_permission",role:n,bot_id:a.id}],transaction:e}),{botStore:a}}function M(e){const{environment:t}=e,{serverCommitResult:i,performResult:{botStore:o}}=C.createAndCommit({userAction:"botActions.createSpaceBot",environment:t,perform:t=>I(t,e)});return{botStore:o,transactionPromise:i}}async function F(e){const{environment:t,botId:i,onSuccess:o}=e,n=await v.deleteBot(t,{botId:i});"failed"===n.type?u.showError(n):"success"===n.type&&o&&(await x.pJ({environment:t}),o())}async function T(e){const{environment:t,table:i,id:o,type:n}=e,r=await v.getBots(t,{table:i,id:o,type:n});if("failed"===r.type)throw u.showError(r),r;return{botIds:r.data.botIds,recordMap:r.data.recordMap}}async function D(e){const{environment:t,botId:i}=e,o=await v.getBotToken(t,{botId:i});if("failed"!==o.type)return o.data.token;u.showError(o)}function _(e){const{botValue:t,store:i,environment:o}=e,{id:r,parent_id:a,parent_table:s,capabilities:d}=t,l={type:"bot_permission",bot_id:r,parent_id:a,parent_table:s,role:(0,n.uH)(d)};C.createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,perform:e=>{h.ep({environment:o,store:i,permissionItems:[l],transaction:e})}})}function P(e){const{botId:t,store:i,environment:o}=e,n=i.getPermissionItems().filter((0,m.AO)((e=>(0,r.FB)(e)?{true:e}:{false:e})));for(const r of n)if(r.bot_id===t){const e={...r,role:"none"};C.createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,perform:t=>{h.ep({environment:o,store:i,permissionItems:[e],transaction:t})}})}}function Z(e){const{currentSpaceStore:t,environment:i,pages:o,botStore:n,addPermission:r}=e;if(!t)return;const a=(0,g.zT)({botStore:n,addPermission:r});o.forEach((e=>{const o=f.t1.createChildStore(t,{table:s.iU,id:e});C.createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:i,perform:e=>{h.ep({environment:i,store:o,permissionItems:[a],transaction:e})}})}))}async function A(e){const{environment:t,spaceStore:i,spaceViewStore:o,templatePageId:n,botValue:r,pages:s}=e;if(!i)return;const l=f.t1.createChildStore(i,{table:d.cZ,id:r.id});if(n)return await async function(e){const{environment:t,spaceStore:i,spaceViewStore:o,templatePageId:n,botStore:r}=e;if(!i||!o)return;try{y.j({message:k.duplicatingTemplate});const e=await v.loadBlockSubtree(t,{block:{id:n,spaceId:i.id},shallow:!1});if("failed"===e.type)return;const s=a.PF.create(e.data.subtreeRecordMap),{performResult:d}=C.createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,perform:e=>{const a=w.cc({environment:t,recordMap:s,copyPageId:n,isPrivate:!0,spaceStore:i,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),d=o.getPrivatePageIds();d.length>0&&S.sW({store:o,data:{private_pages:[a.id,...d]},transaction:e});const l=(0,g.zT)({botStore:r,addPermission:!0});return h.ep({environment:t,store:a,permissionItems:[l],transaction:e}),a}});return d}catch(s){b.oV({label:p.default.formatMessage(k.duplicatingTemplateError)})}finally{y.x()}}({environment:t,templatePageId:n,botStore:l,spaceStore:i,spaceViewStore:o});Z({environment:t,currentSpaceStore:i,botStore:l,pages:s,addPermission:!0})}},10912:(e,t,i)=>{i.d(t,{Z:()=>C});var o=i(23174),n=i.n(o),r=(i(57658),i(67294)),a=i(83355),s=i(27531),d=i(41432),l=i(80951),c=i(95538),m=i(21202),u=i(97880),p=i(78316),g=i(17311),f=i(35328),v=i(57559),y=i(16550),h=i(12981),S=i(81865);function b(e){return"number"==typeof e}class w extends a.Z{constructor(){super(...arguments),this.renderContentBlock=e=>{const{store:t}=this.props,i=v.G.createChildStore(t,{table:m.iU,id:e}),o=(0,y.h)(i);if(o)return n()(s.D,{value:this.restrictedContentStore},void 0,n()(o,{store:i,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:(0,f.BX)(i),style:{fontSize:12,opacity:.8,pointerEvents:"none"},isQuickFind:!0,numberedListCounterStore:this.createComputedStore((()=>({depth:0,numberedListBlockIdsWithFormat:this.createNumberedListCounterStore(e)})))},e))},this.coverStore=this.createComputedStore((()=>{const{store:e}=this.props,t=(0,p.NU)(e);return t.image?t.image:t.blockIds})),this.restrictedContentStore=this.createComputedStore((()=>{const{store:e}=this.props,t=(0,p.wK)(e);return t.image?void 0:t.blockIds})),this.numberedLists=this.createComputedStore((()=>{const{store:e}=this.props,t=this.coverStore.state,i=[];if(Array.isArray(t)){let o=0;for(;o<t.length;){let n=t[o],r=v.G.createChildStore(e,{table:m.iU,id:n});if(r.getType()===d.Ti.numberedList){const a=[{blockId:n,idx:1}],s=[{id:n,format:void 0,depth:a.length-1,index:a[0].idx}];for(o+=1;o<t.length&&(n=t[o],r=v.G.createChildStore(e,{table:m.iU,id:n}),r.getType()===d.Ti.numberedList);){{const e=r.getParentId();if(r.getParentId()===a[a.length-1].blockId)a.push({blockId:n,idx:1});else{let t=a[a.length-1].idx;for(;a.length>0&&a[a.length-1].blockId!==e;)t=a[a.length-1].idx,a.pop();a.push({blockId:n,idx:t+1})}s.push({id:n,format:void 0,depth:a.length-1,index:a[a.length-1].idx})}o+=1}i.push(s)}else o+=1}}return i}))}didUpdate(e){this.props.coverFormat.type!==e.coverFormat.type&&this.props.onLoadProxiedImage()}renderComponent(){const{coverFormat:e}=this.props;return"page_cover"===e.type?this.renderPageCover():"page_content"===e.type?this.renderPageContent():"property"===e.type?this.renderProperty(e.property):void 0}renderPageCover(){var e;const{store:t}=this.props,i=null===(e=t.getCover())||void 0===e?void 0:e.cover;return i?n()("div",{style:this.getImageCoverWrapStyle()},void 0,n()(S.Z,{url:i,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),render:(e,t)=>{if(t)return n()(h.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderPageContent(){const e=this.coverStore.state,t=this.restrictedContentStore.state;if(e){if(!Array.isArray(e))return n()("div",{style:this.getImageCoverWrapStyle()},void 0,n()(S.Z,{url:e.url,onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),isAuthenticated:!0,permissionRecord:e.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return n()(h.Z,{style:{...this.getImageStyle(),...this.getPageContentImageStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder());if(e.length>0)return r.createElement(r.Fragment,null,n()("div",{style:this.getContentWrapStyle()},void 0,t?e.filter((e=>t.indexOf(e)>=0)).map(this.renderContentBlock):e.map(this.renderContentBlock),this.props.coverContentFadedOverlay&&n()("div",{style:this.getContentFadedOverlayStyle()})));if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}else if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}renderProperty(e){const{store:t}=this.props,i=(0,l.g)(t.getPropertyValue(e)).find((e=>(0,c.SR)({url:e.url})));return i?n()("div",{style:this.getImageCoverWrapStyle()},void 0,n()(S.Z,{onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),url:i.url,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return n()(h.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderEmptyGalleryCover(){return n()("div",{style:{height:this.getCoverHeight(),...this.props.emptyGalleryCoverStyle}})}renderImageBorder(){switch(this.props.variant){case"default":return null;case"gallery":return n()("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${this.theme.regularDividerColor}`}});default:(0,u.t1)(this.props.variant)}}get imagePosition(){const{coverPosition:e,store:t}=this.props;if(b(e))return e;if(t.getFormatStore().isDefined()){const{page_cover_position:e,card_cover_position:i}=t.getFormat();if(b(i))return i;if(b(e))return e}return.5}createNumberedListCounterStore(e){const t=this.numberedLists.state;for(const i of t)if(i.find((t=>t.id===e)))return i;return[]}getImageStyle(){return this.props.style||{}}getCoverHeight(){const{coverHeight:e,coverSizeFormat:t}=this.props;if(e)return e;switch(t){case"large":return g.Z.card.desktop.large.height;case"small":return g.Z.card.desktop.small.height;case"medium":default:return g.Z.card.desktop.medium.height}}getCoverWidth(){const{coverWidth:e,coverSizeFormat:t}=this.props;return e||(0,p.rD)(t)}getImageCoverWrapStyle(){return{height:this.getCoverHeight(),position:"relative",pointerEvents:"none",overflow:"hidden"}}getContentWrapVariantStyle(){const{ThemeStore:e}=this.environment,t="dark"===e.state.mode;switch(this.props.variant){case"default":return{};case"gallery":return{background:this.theme.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:t?"transparent":`inset 0 -1px 0 0 ${this.theme.regularDividerColor}`,...this.props.contentWrapStyle};default:(0,u.t1)(this.props.variant)}}getContentWrapStyle(){return{height:this.getCoverHeight(),pointerEvents:"none",overflow:"hidden",position:this.props.coverContentFadedOverlay?"relative":"static",...this.getContentWrapVariantStyle(),...this.props.contentWrapStyle}}getContentFadedOverlayStyle(){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${this.theme.accentColors.gray[30]} 100%)`,...this.props.coverContentFadedOverlayStyle}}getCoverVariantStyle(){switch(this.props.variant){case"default":return{border:`1px solid ${this.theme.stroke.regular}`,borderRadius:4};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,u.t1)(this.props.variant)}}getCoverStyle(){return{width:"100%",height:this.getCoverHeight(),...this.getCoverVariantStyle(),objectPosition:"center"}}getCoverAspectStyle(){const{coverAspectFormat:e}=this.props;return{objectFit:void 0===e?"cover":e}}getPageContentImageStyle(){return{...this.getCoverStyle(),objectPosition:"center center"}}}w.displayName="CollectionItemCover";const C=w},86249:(e,t,i)=>{i.d(t,{ZP:()=>Q,UV:()=>X,f4:()=>J});var o=i(10434),n=i.n(o),r=i(23174),a=i.n(r),s=(i(57658),i(67294)),d=i(24405),l=i(56666),c=i(44495),m=i(37612),u=i(5366),p=i(97880),g=i(47307),f=i(40394),v=i(42922),y=i(52275),h=i(53695),S=i(64369),b=i(480),w=i(86628),C=i(50906),x=i(54642),k=i(33954),I=i(52507),M=i(50506),F=i(13991),T=i(82990),D=i(74194),_=i(68785);const P=(0,u.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const Z=function(e){let{handleAddNewDomain:t,loading:i,verificationType:o}=e;window.__c={n:"AddNewDomain"};const[r,l]=(0,s.useState)(""),c=!Boolean(r),m=(0,s.useCallback)((e=>{l(e.target.value)}),[]),g=(0,d.yK)((()=>({title:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:c?.5:1}})),[c]);let f;switch(o){case"integration":f=P.integrationSubtitle;break;case"saml_config":f=P.samlConfigSubtitle;break;default:(0,p.t1)(o)}return a()(s.Fragment,{},void 0,a()(S.Z,{style:g.title},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})),a()(S.Z,{style:g.subtitle,isMultiline:!0},void 0,s.createElement(u.FormattedMessage,n()({},f,{values:{br:a()("br",{})}}))),a()(D.Z,{value:r,style:g.input,placeholder:"notion.so",onChange:m}),a()(v.Z,{onClick:()=>t(r),style:g.button,isLarge:!0,disabled:c},void 0,i?a()(_.Z,{}):a()(u.FormattedMessage,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})))};var A=i(63296);const B=function(e){let{domain:t,isExpired:i,onClose:o}=e;window.__c={n:"InvalidDomain"};const n=(0,d.yK)((e=>({title:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return a()(s.Fragment,{},void 0,a()(S.Z,{style:n.title,isMultiline:!0},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:t}})),a()(S.Z,{style:n.subtitle,isMultiline:!0},void 0,a()(u.FormattedMessage,i?{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain's verification has expired."}:{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})),a()(A.Z,{onClick:o,style:{width:"100%"}},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"Okay"})))},E=(0,u.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const R=function(e){let{domain:t,onClose:i,verificationType:o}=e;window.__c={n:"VerifyDomain"};const r=(0,d.yK)((()=>({title:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let l;switch(o){case"saml_config":l=E.samlConfigSubtitle;break;case"integration":l=E.integrationSubtitle;break;default:(0,p.t1)(o)}return a()(s.Fragment,{},void 0,a()(S.Z,{style:r.title,isMultiline:!0},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:t}})),a()(S.Z,{style:r.subtitle,isMultiline:!0},void 0,s.createElement(u.FormattedMessage,n()({},l,{values:{br:a()("br",{})}}))),a()(A.Z,{onClick:i,style:{width:"100%"}},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"Okay"})))};var V=i(75553),W=i(63143),O=i(14871),L=i(16402),U=i(64921);const z=function(e){let{handleVerifyDomain:t,domainVerification:i,loading:o}=e;window.__c={n:"VerifyExistingDomain"};const n=(0,b.O7)(),r=i.expiresAt-Date.now()<2*W.U6,l=(0,d.yK)((e=>({title:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{paddingInlineStart:22,margin:"24px 0"},listItem:{fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",marginBottom:12},expiresSoonText:{color:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500]},copyButton:{borderRadius:3,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:T.Z.getCompositeFontFamily(F.SP).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},code:{width:"100%",color:e.mediumTextColor,fontFamily:T.Z.getCompositeFontFamily(F.SP).mono,fontSize:14,fontWeight:400,lineHeight:"18px"},codeContainer:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:3,marginTop:4,marginBottom:8}})),[]);return a()(s.Fragment,{},void 0,a()(S.Z,{style:l.title},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})),a()(S.Z,{style:l.subtitle},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})),a()(S.Z,{isSmall:!0,style:{marginTop:22}},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"})),a()("div",{style:l.codeContainer},void 0,a()(S.Z,{style:l.code},void 0,`notion-domain-verification=${i.verificationCode}`),a()(U.Z,{onClick:function(){O.RD({environment:n,stringValue:`notion-domain-verification=${i.verificationCode}`,copiedMessage:O.tq.copiedLinkToClipboard})},style:l.copyButton},void 0,(0,V.U)(l.copyIcon),a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.copy",defaultMessage:"Copy"}))),a()(S.Z,{style:r?l.expiresSoonText:void 0,isSmall:!0},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"Expires on {timeLeft}",values:{timeLeft:(0,L.gs)(i.expiresAt)}})),a()("ol",{style:l.list},void 0,a()("li",{style:l.listItem},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Navigate to the DNS record section of your domain host."})),a()("li",{style:l.listItem},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a new TXT record and paste in the code above as the value."})),a()("li",{style:l.listItem},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"Typically, this change takes only minutes to occur, however, there are cases where it may take up to 72 hours for the DNS record to propagate."})),a()("li",{style:l.listItem},void 0,a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:'Click "Verify" to notify Notion to check your DNS record.'}))),a()(A.Z,{style:{width:"100%"},onClick:()=>t(i),disabled:o},void 0,o?a()(_.Z,{}):a()(u.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify"})))};const H=function(e){window.__c={n:"VerifyDomainModal"};const t=(0,b.O7)(),i=(0,u.useIntl)(),o=(0,d.Fg)(),[n,r]=(0,w.AF)(e.store,I.ZP),{verificationType:l,verificationTargetId:c,refreshDomains:m}=e,f=(0,s.useCallback)((()=>{r((e=>({...e,loading:!1,modalOpen:!1})))}),[r]),v=(0,s.useCallback)((async e=>{r((e=>({...e,loading:!0})));const o="integration"===l?{type:l,integrationId:c,domain:e}:{type:l,spaceId:c,domain:e},n=await x.createDomainVerificationCode(t,o);if("success"===n.type){m(),C.G7$(t,{type:l});const e=n.data.domainVerification,i=(0,I.Hs)(e);r((e=>({...e,domainVerification:i,loading:!1})))}else g.showErrorMessage((0,k.wf)(i,n)),r((e=>({...e,loading:!1})))}),[t,r,c,m,l,i]),y=(0,s.useCallback)((async e=>{r((e=>({...e,loading:!0})));const o=await x.verifyDomain(t,{verificationId:e.id});if(C.DoK(t,{type:l}),"success"===o.type){m(),C.aOs(t,{type:l});const i={type:"verified",domain:e.domain};r((e=>({...e,domainVerification:i,loading:!1})))}else g.showErrorMessage((0,k.wf)(i,o)),r((e=>({...e,loading:!1})))}),[t,i,r,m,l]),h=(0,s.useCallback)((()=>{if(!n.domainVerification)return a()(Z,{handleAddNewDomain:v,loading:n.loading,verificationType:l});switch(n.domainVerification.type){case"invalid":return a()(B,{domain:n.domainVerification.domain,isExpired:Date.now()>n.domainVerification.expiresAt,onClose:f});case"unverified":return a()(z,{handleVerifyDomain:y,domainVerification:n.domainVerification,loading:n.loading});case"verified":return a()(R,{domain:n.domainVerification.domain,onClose:f,verificationType:l});default:(0,p.t1)(n.domainVerification)}}),[n.domainVerification,n.loading,y,v,f,l]);return a()(M.Z,{open:n.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:f,render:()=>a()("div",{style:{background:o.popoverBackground,width:410,padding:24,borderRadius:3}},void 0,h())})};var K=i(5478);const j=[{id:"domain",headerTitle:a()(u.FormattedMessage,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>a()(S.Z,{},void 0,e.domain),widthData:{width:100},sortable:!1},{id:"status",headerTitle:a()(u.FormattedMessage,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>a()(q,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>a()($,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],N=(0,u.defineMessages)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}}),G={fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},Y={fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"};function q(e){let{status:t}=e;window.__c={n:"VerificationToken"};const i=(0,d.yK)((e=>{const i={[K.YF.Success]:e.statusTokenBackground.green,[K.YF.Pending]:e.statusTokenBackground.yellow,[K.YF.Failure]:e.statusTokenBackground.red},o={[K.YF.Success]:e.statusTokenIndicator.green,[K.YF.Pending]:e.statusTokenIndicator.yellow,[K.YF.Failure]:e.statusTokenIndicator.red},n={[K.YF.Success]:e.statusTokenText.green,[K.YF.Pending]:e.statusTokenText.yellow,[K.YF.Failure]:e.statusTokenText.red};return{container:{background:i[t],color:n[t],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:o[t],width:10,height:10,borderRadius:"100%"}}}),[t]);return a()("div",{style:i.container},void 0,a()("div",{style:i.dot}),function(e){switch(e){case K.YF.Success:return a()(u.FormattedMessage,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case K.YF.Pending:return a()(u.FormattedMessage,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case K.YF.Failure:return a()(u.FormattedMessage,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,p.t1)(e)}}(t))}function $(e){let{onShowDetails:t,onRemove:i}=e;window.__c={n:"DropdownMenu"};const o=(0,d.yK)((e=>({primaryIcon:{width:14,height:14,color:e.mediumIconColor,fill:"currentColor"},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.regularIconColor,fill:"currentColor"}})),[]),r=[];return t&&r.push({key:"details",action:()=>t(),render:e=>s.createElement(y.Z,n()({},e,{style:o.menuItem,focused:!1,icon:(0,c.D)(o.menuIcon),title:a()(u.FormattedMessage,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:a()(u.FormattedMessage,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0}))}),i&&r.push({key:"remove",action:()=>i(),render:e=>s.createElement(y.Z,n()({},e,{style:o.menuItem,focused:!1,icon:(0,m.y)(o.menuIcon),title:a()(u.FormattedMessage,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:a()(u.FormattedMessage,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0}))}),0===r.length?null:a()(h.N,{hideDropdownIcon:!0,title:(0,l.o)(o.primaryIcon),items:r})}function J(e){return{domain:e,status:K.YF.Success,data:{type:"verified",domain:e}}}function X(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:K.YF.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:K.YF.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const Q=function(e){window.__c={n:"DomainVerificationTable"};const{disabled:t,domains:i,domainVerificationStore:o,verificationType:n,verificationTargetId:r,refreshDomains:l,onRemoveDomain:c,onClickAddDomain:m,renderOverrideAddDomainButton:y}=e,h=(0,d.yK)((e=>(0,f.b)({columnRenderInfo:j,theme:e,containerMarginTop:0})),[]);function b(){t||(m&&m(),o.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}const w=i.map((e=>{let{domain:i,status:r,data:d}=e;return{id:"verified"===d.type?i:d.id,isClickable:!1,domain:i,status:r,onShowDetails:t?void 0:()=>function(e){t||o.setState({domainVerification:e,loading:!1,modalOpen:!0})}(d),onRemove:t?void 0:()=>async function(e,t){let i;if(t===K.YF.Failure)return void c(e);t===K.YF.Pending?i=N.unverifiedDomainWarning:t===K.YF.Success?i="saml_config"===n?N.verifiedSAMLWarning:N.verifiedIntegrationsWarning:(0,p.t1)(t),await g.confirmUserAction({message:a()("div",{style:G},void 0,a()(u.FormattedMessage,{defaultMessage:"Are you sure you want to delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"})),description:a()("div",{style:Y},void 0,s.createElement(u.FormattedMessage,i)),acceptLabel:a()(u.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:a()(u.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})})&&c(e)}(d,r)}}));return a()(s.Fragment,{},void 0,y?y(b):a()(v.Z,{isLarge:!0,disabled:t,onClick:b,style:{margin:"4px 0px 16px",width:"fit-content"}},void 0,a()(u.FormattedMessage,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})),a()(f.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:j,rows:w,styles:h,renderNoRowsComponent:()=>a()(S.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"}},void 0,a()(u.FormattedMessage,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."}))}),a()(H,{store:o,verificationTargetId:r,verificationType:n,refreshDomains:l}))}},69255:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var o=i(23174),n=i.n(o),r=i(10434),a=i.n(r),s=(i(57658),i(67294)),d=i(480),l=i(86628),c=i(77657),m=i(62208),u=i(60291),p=i(77420),g=i(97880),f=i(5366),v=i(49386),y=i(39699),h=i(61202),S=i(87279),b=i(30874),w=i(93405),C=i(78140),x=i(32163),k=i(72495);const I=function(e){window.__c={n:"ExternalObjectInstanceBlockMenu"};const{titleForReloadMenuOption:t,store:i,parentBlockStore:o,onAccept:r,onDismiss:I,extraSecondaryItemKey:M,token:F}=e,T=(0,d.O7)(),D=(0,s.useCallback)((e=>{const t={blocks:[i],environment:T,publicEditMode:void 0};return{key:e.key,render:(i,o)=>e.render(i,t,{onAccept:r,onFocus:o.onFocus}),action:i=>{let{event:o}=i;return e.action(t,o)}}}),[r,T,i]),_=[];(0,l.VK)((()=>{const e=i.getFormat().bot_id,t=b.Z.getBotsAsRecordMap();if(e&&!0===b.Z.state.loaded){const i=t.getValue({table:p.cZ,id:e});if(i&&i.integration_id&&i.integration_id===c.U9)return!1}return!0}),[i])&&_.push({key:0,render:e=>s.createElement(k.Z,a()({},e,{style:{paddingTop:0,paddingBottom:0}})),items:[{key:"reload external instance object",render:e=>s.createElement(w.Z,a()({},e,{title:t,svg:u.b})),action:()=>{i&&(i.isExternalObjectInstanceBlockStore()||i.isExternalObjectInstancePageBlockStore())&&h.qK({environment:T,from:"page_more_menu",store:i,spaceId:i.getSpaceId()})}}]});const P=(0,l.VK)((()=>{switch(M){case"preview_to_mention":return[D(v.OH)];case"mention_to_preview":if(!i.isExternalObjectInstanceBlockStore())return[];return[{key:"turn preview into block",render:e=>s.createElement(w.Z,a()({},e,{title:n()(f.FormattedMessage,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:m.z})),action:()=>{o&&F&&y.createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:T,perform:e=>{h.aV({block:i,parentStore:o,transaction:e,token:F}),e.postSubmitCallbacks.push((e=>{e||null==I||I()}))}})}}];default:(0,g.t1)(M)}}),[M,D,i,o,F,T,I]);return _.push({key:1,render:e=>s.createElement(k.Z,a()({},e,{style:{paddingTop:0,paddingBottom:0}})),items:[...P,D(v.IK)]}),n()(C.Z,{menuType:S.og.Popup},void 0,n()(x.Z,{type:x.i.Vertical,initialFocus:void 0,onAccept:r,sections:_,style:{paddingTop:3,paddingBottom:3}}))}},98567:(e,t,i)=>{i.d(t,{D5:()=>Ze,s6:()=>Me});var o=i(10434),n=i.n(o),r=i(23174),a=i.n(r),s=i(67294),d=i(1302),l=i(13991),c=i(480),m=i(86628),u=i(24405),p=i(15145),g=i(1800),f=i(7057),v=i(78601),y=i(66673),h=i(69651),S=i(75553),b=i(56666),w=i(40462),C=i(11751),x=i(64572),k=i(76725),I=i(72126),M=i(4615),F=i(515),T=i(21202),D=i(70279),_=i(70203),P=i(18613),Z=i(82990),A=i(44876),B=i(5366),E=i(50906),R=i(14871),V=i(45990),W=i(97444),O=i(24539),L=i(95477),U=i(60682),z=i(24990),H=i(49616),K=i(4708),j=i(73744),N=i(41232),G=i(6398),Y=i(88804),q=i(75024),$=i(4023),J=i(15723),X=i(80444),Q=i(77080),ee=i(96049),te=i(42653),ie=i(72014),oe=i(57559),ne=i(48588),re=i(10912),ae=i(18746),se=i(64921),de=i(31945),le=i(51077),ce=i(73063),me=i(12981),ue=i(53437),pe=i(31278),ge=i(76798),fe=i(94096),ve=i(27186),ye=i(19987),he=i(69255),Se=i(25735),be=i(19889),we=i(36517);function Ce(e){window.__c={n:"HoverUserPreviewOverlayRenderer"};const t=(0,m.VK)((()=>X.default.state.currentSpaceStore),[]),i=(0,m.VK)((()=>{if(t)return oe.U6.createChildStore(t,{id:e.state.annotation[1],table:be.KJ})}),[t,e.state.annotation]);return i&&i.isDefined()&&t?a()(we.Z,{targetUserStore:i}):null}var xe=i(29551),ke=i(74169);const Ie=(0,B.defineMessages)({aiSummary:{defaultMessage:"Summary",id:"hoverPreviewOverlay.aiSummary.label"}});function Me(e){window.__c={n:"HoverPreviewOverlay"};const t=(0,m.Kw)(ee.Z,{debugName:"HoverPreviewOverlay"}),{state:i,pinPopup:o,unpinPopup:n,hasBeenHovering:r,isPinned:d}=function(){const[e]=(0,m.AF)(ne.Z),t=(0,y.Kt)(e,400,Object.is),[i,o]=(0,s.useState)(void 0),n=i||t,r=(0,s.useCallback)((()=>o(n)),[n]),a=(0,s.useCallback)((()=>{o(void 0)}),[]);return{state:n,pinPopup:r,unpinPopup:a,hasBeenHovering:e&&e===n,isPinned:Boolean(i)}}(),l=(0,m.VK)((()=>Q.default.checkGate("first_party_links")),[]),u=function(e){const t=(0,c.O7)();return(0,m.VK)((()=>!!e&&(0,Y.E)(t,e.store)),[e,t])}(i),p=(0,s.useMemo)((()=>Boolean(i&&function(e,t,i){return t&&(e.annotations.some(_.j0F)||e.annotations.some(_.nSN)||i&&e.annotations.some(_.STW))}(i,u,l))),[i,u,l]),g=!!p||Boolean(!t&&r),f=(0,s.useMemo)((()=>i&&i.token.node.getBoundingClientRect()),[i]),[,v]=(0,m.AF)(te.Z);(0,s.useEffect)((()=>(v({isPinned:d}),()=>v({isPinned:!1}))),[d,v]);const h=!(null!=i&&i.annotations.some(_.nSN))&&l&&!(null!=i&&i.annotations.some(_.STW));return a()(ue.ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:!p,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:ue.ZP.PopupType.Popup,open:g,originRect:f,originGap:8,alignmentToOrigin:ue.ZP.Alignment.Start,placementToOrigin:ue.ZP.Placement.Bottom,useLightBoxShadow:h,render:()=>i&&a()("div",{onMouseEnter:o,onMouseLeave:n},void 0,a()(Fe,{state:i,isHoveredTokenEditable:u,onDismiss:n}))})}function Fe(e){window.__c={n:"HoverPreviewOverlayRenderer"};const t=(0,m.VK)((()=>Q.default.checkGate("first_party_links")),[]),i=(0,m.VK)((()=>(0,K.En)()),[]);(0,s.useEffect)((()=>{const e=I.P2(O.l,200,{leading:!0});return j.lj(window,"scroll",e,!0),()=>j.ZV(window,"scroll",e,!0)}),[]);const o=(0,c.Fy)(),r=(0,m.VK)((()=>{const{currentSpaceStore:e}=X.default.state;return e?e.getPermissionGroups():[]}),[]),d=(0,u.yK)((e=>({noMembersInGroupStyle:{fontSize:Z.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]),l=e.state.annotations,p=l.find(_.j0F),g=l.find(_.fpG),f=l.find(_._bk),v=l.find(_.aq),y=_.frE(l),h=t?l.find(_.STW):void 0,S=i?l.find(_.IWo):void 0;if(p&&e.state.store.table!==D.x_)return s.createElement(Te,n()({},e,{state:{...e.state,annotation:p}}));if(g)return s.createElement(De,n()({},e,{state:{...e.state,annotation:g}}));if(f){const e=_.kxk(f);if(e){const t=e.groupId,i=r.find((e=>e.id===t));if(i)return a()(Se.Y,{group:i,limit:10,color:"white_background",trackHover:!0,noMembersMessage:a()(xe.gq,{style:d.noMembersInGroupStyle},void 0,a()("div",{style:Z.Z.textOverflowStyle},void 0,a()(B.FormattedMessage,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})))})}}return v?s.createElement(_e,n()({},e,{state:{...e.state,annotation:v}})):y&&!o.isMobile?s.createElement(Ze,n()({},e,{state:{...e.state,annotation:y},onDismiss:e.onDismiss})):t&&h&&!o.isMobile?s.createElement(Be,n()({},e,{state:{...e.state,annotation:h},onDismiss:e.onDismiss})):S&&!o.isMobile?s.createElement(Ce,n()({},e,{state:{...e.state,annotation:S},onDismiss:e.onDismiss})):null}function Te(e){window.__c={n:"HoverLinkPreviewOverlayRenderer"};const{onDismiss:t}=e,{annotation:i,store:o,token:n}=e.state,r=(0,c.O7)(),l=(0,u.Fg)(),f=_.zW$(i),v=(0,x.A5)({url:f,baseUrl:L.default.domainBaseUrl,publicDomainName:L.default.publicDomainName}),y=(0,s.useCallback)((async()=>{t(),W.AE({token:n,store:o,readOnly:!1}),await d.default.afterNextFlush(),V.dz({type:"focusOnly",focus:!0})}),[t,o,n]),h=(0,s.useCallback)((async()=>{t(),await d.default.afterNextFlush();const e=R.tq.copiedLinkToClipboard;let i=f;const n=(0,F.Wj)({url:f,baseUrl:L.default.domainBaseUrl,publicDomainName:L.default.publicDomainName,isMobile:r.device.isMobile,protocol:L.default.protocol,currentUrl:window.location.href});if("page"===n.name){const e=oe.G.createChildStore(o,{table:T.iU,id:n.blockId});i=(0,g.Z)({pageId:n.blockId,pageModel:e.getModel(),baseUrl:L.default.domainBaseUrl,discussionId:n.discussionId,scrollToBlockId:n.scrollToBlockId,peekViewBlockId:n.peekViewBlockId,peekMode:n.peekMode,pageVisitSource:p.tY.CopyLink})}R.RD({environment:r,stringValue:i,copiedMessage:e})}),[r,t,o,f]),b=(0,u.yK)((e=>({wrapper:{fontSize:Z.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,fontWeight:Z.Z.fontWeight.regular,fill:e.mediumIconColor},destination:{padding:"4px 0 4px 6px"},button:{display:"flex",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:3,color:e.regularTextColor},destinationText:{paddingRight:6,maxWidth:250,...Z.Z.textOverflowStyle},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),C=(0,m.VK)((()=>{if(!v)return;const e=oe.G.createChildStore(o,{table:T.iU,id:v});return{pageIcon:(0,P.tp)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:L.default.domainBaseUrl,getRecordModel:o.getRecordModel,emojiType:(0,U.e_)(r),isSafariOrIOS:r.device.isSafari||r.device.isIOS,isClient:!0,showEmojiInline:r.device.isWindows,currentUserId:r.currentUser.id,theme:l,emojiData:z.Z.state}),title:a()(ge.Z,{style:b.destinationText,store:e})}}),[r,o,v,b,l])||{pageIcon:(0,w.o)(b.icon),title:a()("div",{style:b.destinationText},void 0,f)};return a()(xe.gq,{style:b.wrapper,alignItems:"center"},void 0,a()(xe.gq,{style:b.destination,alignItems:"center"},void 0,C.pageIcon,C.title),a()(ce.Z,{onClick:h,icon:S.U,isDarkIconColor:!0}),e.isHoveredTokenEditable&&a()(se.Z,{style:b.button,onClick:y},void 0,a()(B.FormattedMessage,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})))}function De(e){window.__c={n:"HoverDatePreviewOverlayRenderer"};const{annotation:t}=e.state,i=_.zyO(t),o=(0,u.yK)((e=>({container:{fontSize:Z.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),n=(0,B.useIntl)(),r="relative"===i.date_format?"ll":"relative",s=(0,f.ZV)({value:i,date_format:r,time_format:"h:mm A",allowRelativeDates:!0,intl:n});return s===(0,f.ZV)({value:i,date_format:i.date_format,time_format:i.time_format,allowRelativeDates:!0,intl:n})?null:a()(xe.gq,{style:o.container,alignItems:"center"},void 0,(0,h.C)(o.icon),a()("div",{style:Z.Z.textOverflowStyle},void 0,s))}function _e(e){window.__c={n:"HoverTemplateVariablePreviewOverlayRenderer"};const{annotation:t}=e.state,i=_.fsE(t),o=(0,B.useIntl)(),n=_.Z08(i.type,o),r=(0,u.yK)((e=>({container:{fontSize:Z.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]);return a()(xe.gq,{style:r.container,alignItems:"center"},void 0,a()("div",{style:Z.Z.textOverflowStyle},void 0,n))}function Pe(e){var t;window.__c={n:"ExternalObjectInstancePreviewContent"};const{renderConfig:i,store:o}=e,r=(0,u.yK)((e=>({title:{color:e.regularTextColor,fontWeight:Z.Z.fontWeight.medium,whiteSpace:"initial"},header:{color:e.mediumTextColor,fontSize:Z.Z.fontSize.UISmall.desktop},dictionaryKey:{color:e.mediumTextColor,fontWeight:Z.Z.fontWeight.regular,fontSize:Z.Z.fontSize.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:Z.Z.fontSize.UIRegular.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return s.createElement(s.Fragment,null,i.title&&a()(xe.gq,{},void 0,s.createElement(G.ox,n()({},i.title,{store:o,style:r.title}))),i.headerAttributes&&i.headerAttributes.length>0&&a()(xe.gq,{alignItems:"center",style:{...r.header,marginBottom:3}},void 0,(0,k.Z)(i.headerAttributes.map(((e,t)=>s.createElement(G.ox,n()({key:`attribute-${t}`},e,{store:o,style:{...r.header,...Z.Z.textOverflowStyle}}))))||[],(e=>a()("span",{},`dot-${e}`," ","·"," ")))),i.dictionaryAttributes&&i.dictionaryAttributes.length>0&&a()(xe.Ht,{},void 0,i.dictionaryAttributes.map(((e,t)=>{var d;let{key:l,value:c}=e;return a()(xe.gq,{style:{marginBottom:t!==((null===(d=i.dictionaryAttributes)||void 0===d?void 0:d.length)??0)-1?3:0}},t,a()("div",{style:{marginRight:10,width:"30%",display:"flex",alignItems:"center"}},void 0,a()("span",{style:r.dictionaryKey},void 0,s.createElement(B.FormattedMessage,n()({},l.formatter,{values:{value:c.attribute.name}})))),a()("div",{style:{width:"70%",display:"flex",alignItems:"center"}},void 0,c.icon&&(0,A.li)(c.icon)&&a()(le.Z,{type:"image_url",imageURL:c.icon.values[0],size:16,style:{marginRight:4}}),s.createElement(G.ox,n()({},c,{store:o,style:r.dictionaryValue,avatarStyle:{marginRight:4}}))))}))),i.bodyAttribute&&a()(xe.gq,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{}},void 0,a()(G.hx,{attribute:i.bodyAttribute})),i.previewImageAttribute&&a()("div",{style:{marginTop:i.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"}},void 0,a()("div",{},void 0,a()(me.Z,{src:i.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}}))))}function Ze(e){window.__c={n:"HoverExternalObjectInstanceOverlayRenderer"};const{state:{annotation:t,store:i,token:o},onDismiss:r}=e,d=_.frW(t),l=(0,c.O7)(),p=(0,u.Fg)(),g=(0,s.useRef)(null),f=(0,m.VK)((()=>{const t=oe.G.createChildStore(i,{table:T.iU,id:d,spaceId:i.pointer.spaceId}),c=t.canEdit(),m=(0,N._F)({store:t,isInDarkMode:"dark"===p.mode,canEdit:c,currentUserId:l.currentUser.id,getRenderFn:e=>t=>{var i,o;return(null===(i=e.hover)||void 0===i?void 0:i.call(e,t))||(null===(o=v.j.hover)||void 0===o?void 0:o.call(v.j,t))},showAction:void 0});if(!m)return;const{renderConfig:u,integration:f}=m,y=Boolean(m.action),h=e.isHoveredTokenEditable,S=i.recordStoreUIParentStore&&i.recordStoreUIParentStore instanceof oe.G?i.recordStoreUIParentStore:void 0;return s.createElement("div",{style:{display:"flex",flexDirection:"column"},ref:g},a()(xe.gq,{alignItems:"center",style:{fontSize:12}},void 0,a()(le.Z,{type:"image_url",imageURL:f.icon,size:16,style:{marginRight:"4px"}}),a()("div",{style:{flexGrow:1,fontWeight:Z.Z.fontWeight.medium}},void 0,f.name),o&&!y&&h&&a()("div",{},void 0,a()(de.ZP,{popupType:de.Z4.Popup,placementToOrigin:$.u.Right,alignmentToOrigin:$.v.Start,originGap:4,onClose:()=>{let e=!1;const t=g.current;t&&(e=(0,J.uh)(t.getBoundingClientRect(),ve.IL.x,ve.IL.y)),e||null==r||r()},renderOrigin:e=>s.createElement(se.Z,n()({style:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:3}},e),(0,b.o)({width:14})),render:e=>a()(he.default,{titleForReloadMenuOption:a()(B.FormattedMessage,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:S,store:t,token:o,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})}))),y&&h?a()("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"}},void 0,a()(ye.Z,{canEdit:c,store:t,isHoverPreview:!0,postActionCallback:r})):a()(Pe,{renderConfig:u,store:t}))}),[d,i,l,p,o,r,e.isHoveredTokenEditable,g]);return f?a()("div",{style:{padding:"8px 16px",minWidth:300,maxWidth:350}},void 0,f):null}function Ae(e){window.__c={n:"HoverPagePreviewContent"};const t=(0,c.O7)(),i=(0,B.useIntl)(),{store:o}=e,n=(0,m.VK)((()=>H.TP(o)),[o]),r=(0,u.yK)((e=>({icon:{height:16,width:16,fill:e.icon.purple,marginRight:2},title:{fontSize:12,color:e.icon.purple},summary:{...(0,q.pd)(4),fontSize:12,color:e.text.primary},contentCover:{color:e.text.primary,backgroundColor:e.accentColors.gray[30],borderColor:e.stroke.deemphasized,padding:"8px 12px",borderWidth:1,borderStyle:"solid",borderRadius:4}})),[]),d=n&&_.Vkf(n)>=20,l=(0,s.useMemo)((()=>(0,M.ZP)()),[]);return(0,s.useEffect)((()=>{const e=ie.$g.getCurrentPageVisitId();return E.piO(t,{hover_session_id:l,mentioned_page_id:o.pointer.id,hover_content_type:d?"ai_summary":"content_preview",page_visit_id:e}),()=>{E.Yo0(t,{hover_session_id:l,hover_content_type:d?"ai_summary":"content_preview",mentioned_page_id:o.pointer.id,page_visit_id:e})}}),[t,l,d,o.pointer.id]),d?a()("div",{},void 0,a()(xe.gq,{alignItems:"center"},void 0,(0,C.t)(r.icon),a()("div",{style:r.title},void 0,i.formatMessage(Ie.aiSummary))),a()("div",{style:r.summary},void 0,a()(ae.A,{textValue:n,parentStore:o}))):a()(re.Z,{variant:"default",store:o,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverHeight:160,contentWrapStyle:r.contentCover,showEmptyGalleryCover:!1,onLoadProxiedImage:()=>{}})}function Be(e){window.__c={n:"HoverPagePreviewOverlayRenderer"};const t=(0,B.useIntl)(),i=(0,u.yK)((e=>({wrapper:{width:320},content:{padding:"12px 16px 16px"},breadcrumb:{color:e.text.secondary},pageTitle:{display:"inline",fontWeight:Z.Z.fontWeight.semibold,color:e.text.primary},pageTitleIcon:{display:"inline",float:"left",marginTop:2,marginRight:4,lineHeight:1},pageTitleContainer:{...(0,q.pd)(2),verticalAlign:"top",fontSize:16,lineHeight:1.25},description:{fontSize:Z.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:2}})),[]),o=(0,m.VK)((()=>{const t=X.default.state.currentSpaceStore;if(!t)return;const i=oe.G.createChildStore(t,{id:e.state.annotation[1],table:"block"});return i.isNavigableBlock()&&i.isDefined()?i:void 0}),[e.state.annotation]),[n,r,s,d]=(0,m.VK)((()=>{if(!o)return[void 0,!1,null,null];const e=o.getLastEditedTime(),i=o.getLastEditedByStore(),n=e&&i?a()(B.FormattedMessage,{id:"hoverPreview.pagePreview.editedBy",defaultMessage:"Edited {timeAgo} by {editedBy}",values:{timeAgo:(0,f.tv)(e,l.SP),editedBy:i.getDisplayName(t)}}):null,r=a()(Ae,{store:o});return[o.getIcon(),o.isEmptyPage(),n,r]}),[o,t]);return o?a()("div",{style:i.wrapper},void 0,a()(ke.Z,{store:o,disabled:!0,paddingLeft:0,paddingRight:0,height:60,proxyWidth:320}),a()(xe.Ht,{gap:10,style:i.content},void 0,a()(fe.Z,{store:o,style:i.breadcrumb}),a()("div",{},void 0,a()("div",{style:i.pageTitleContainer},void 0,n&&a()(pe.Z,{disabled:!0,icon:n,isEmptyPage:r,isLarge:!0,disableShrinking:!0,size:16,emojiSize:16,style:i.pageTitleIcon}),a()(ge.Z,{shouldWrap:!0,maxLines:2,store:o,style:i.pageTitle})),a()("div",{style:i.description},void 0,s)),d)):null}},36517:(e,t,i)=>{i.d(t,{Z:()=>Z});var o=i(23174),n=i.n(o),r=(i(57658),i(67294)),a=i(480),s=i(86628),d=i(24405),l=i(6695),c=i(72126),m=i(4615),u=i(21202),p=i(19889),g=i(82990),f=i(5366),v=(i(95477),i(66890)),y=i(41168),h=i(80444),S=i(886),b=i(88632),w=i(77080),C=i(19671),x=i(57559),k=i(78291),I=i(97039),M=i(78030),F=i(45653),T=i(29551),D=i(49778);const _=["Title","Pronoun","Teams (via Teams DB)","Office","Manager","Languages (Fluency)","Tenure"],P={"Teams (via Teams DB)":"Teams","Languages (Fluency)":"Languages"};function Z(e){let{targetUserStore:t}=e;window.__c={n:"PeopleProfilePopup"};const i=(0,d.yK)((e=>({wrapper:{minWidth:320,maxWidth:720},profile:{padding:"12px 16px 16px",borderBottom:`1px solid ${e.regularDividerColor}`},content:{padding:"12px 16px 16px"},breadcrumb:{color:e.text.secondary},profileTitle:{paddingLeft:8,fontSize:22,lineHeight:1.25,fontWeight:g.Z.fontWeight.semibold,color:e.text.primary},profileSubtitle:{paddingLeft:8,paddingTop:4,fontSize:g.Z.fontSize.UIRegular.desktop,color:e.icon.primary,paddingBottom:2},profileKeyRow:{minWidth:100},profileKeyText:{textTransform:"capitalize",fontWeight:500},description:{padding:"12px 16px 12px 26px",fontSize:g.Z.fontSize.UIRegular.desktop,color:e.icon.primary}})),[]),o=(0,s.VK)((()=>h.default.state.currentSpaceStore),[]),c=(0,s.VK)((()=>{if(!t)return;const e=t.getEmail();if(!e)return;const i=w.default.getConfigKey("notion_people_block_id","data")[e];if(!i)return;return x.G.createChildStore(t,{table:u.iU,id:(0,m.Mt)(i)})}),[t]),{collectionStore:p,schema:f,format:y}=(0,D.d)(c),b=function(e){let{collectionStore:t,format:i,schema:o,userPeopleCollectionPage:r}=e;return(0,s.VK)((()=>{var e;if(!(t&&i&&o&&r))return;const a=l.iB(i,o,void 0,l.j5.Collection),s=null==a||null===(e=a.collection_page_properties)||void 0===e?void 0:e.filter((e=>{var t;const i=null===(t=o[e.property])||void 0===t?void 0:t.name;return void 0!==i&&_.includes(i)}));if(!s)return;const d={};return s.forEach((e=>{var i;d[(null===(i=o[e.property])||void 0===i?void 0:i.name)||""]=n()(I.Z,{store:r,property:e.property,locked:!0,disabled:!0,format:M.C.Page,onTab:()=>{},onUntab:()=>{},tableWrap:!1,blockPropertyValueOverlayStore:C.Z,showRelationTooltip:!1,collectionStore:t})})),d}),[t,o,i,r])}({collectionStore:p,format:y,schema:f,userPeopleCollectionPage:c}),k=(0,a.O7)(),F=(0,r.useMemo)((()=>new S.Z(k)),[k]);return(0,r.useEffect)((()=>{p&&F.setContext({type:"collectionPage",collectionStore:p})}),[F,p]),t&&t.isDefined()&&o?n()("div",{style:i.wrapper},void 0,c&&F?n()(v.L1,{value:F},void 0,n()(T.Ht,{},void 0,n()(T.gq,{gap:6,alignItems:"center",style:i.profile},void 0,n()(A,{userStore:t,styles:i})),n()("div",{style:i.description},void 0,n()(B,{userProfile:b,styles:i}),n()(T.gq,{gap:2,alignItems:"center"},void 0,n()(E,{spaceStore:o,limit:5,styles:i}))))):n()(T.Ht,{},void 0,n()(T.gq,{gap:6,alignItems:"center",style:i.profile},void 0,n()(A,{userStore:t,styles:i})),n()("div",{style:i.description},void 0,n()(T.gq,{gap:2,alignItems:"center"},void 0,n()(E,{spaceStore:o,limit:5,styles:i}))))):null}function A(e){let{userStore:t,styles:i}=e;window.__c={n:"UserContactCard"};const o=(0,f.useIntl)(),{name:a,email:d}=(0,s.VK)((()=>({name:t.getFullName(o),email:t.getEmail()})),[t,o]);return r.createElement(r.Fragment,null,n()(F.Z,{userStore:t,size:100,borderStyle:"none"}),n()(T.Ht,{gap:2},void 0,n()("div",{style:i.profileTitle},void 0,a),n()("div",{style:i.profileSubtitle},void 0,d)))}function B(e){let{userProfile:t,styles:i}=e;return t?r.createElement(r.Fragment,null,_.filter((e=>t[e])).map((e=>n()(T.gq,{gap:2,alignItems:"center"},e,n()(T.Ht,{},void 0,n()(T.gq,{style:i.profileKeyRow},void 0,n()("div",{style:i.profileKeyText},void 0,P[e]?P[e]:e))),n()(T.Ht,{},void 0,t[e]))))):null}function E(e){let{spaceStore:t,limit:i,styles:o}=e;window.__c={n:"UserSimilarity"};const{userSimilarityList:r}=(0,s.VK)((()=>{var e,o;const n=null===(e=k.default.state)||void 0===e?void 0:e.data,r=n?y.CM(n):[],a=(null==n?void 0:n.userSimilarity)||{},s=r.map((e=>{const t=a[e.userId];return{id:e.userId,similarity:t||0}})).sort(((e,t)=>t.similarity-e.similarity)).slice(0,i),d=[],l=c.yW(s.map((e=>{const i=x.U6.createChildStore(t,{table:p.KJ,id:e.id});return d.push({id:e.id,similarity:e.similarity,userStore:i}),i.isReady()})));return{isOnline:b.Z.state.online,subscriptionDataStoreData:n,userSimilarityData:(null===(o=k.default.state.data)||void 0===o?void 0:o.userSimilarity)||{},visibleUsersLoaded:l,visibleUsers:r,userSimilarityList:d}}),[t,i]);return t&&r&&0!==r.length?n()(T.gq,{gap:2,alignItems:"center",style:{paddingTop:4}},void 0,n()(T.Ht,{},void 0,n()(T.gq,{style:o.profileKeyRow},void 0,n()("div",{style:o.profileKeyText},void 0,"Coworkers"))),n()(T.Ht,{},void 0,n()(T.gq,{gap:10},void 0,n()("div",{},void 0,n()("div",{style:{display:"flex",position:"relative",float:"right"}},void 0,r.map((e=>n()("div",{style:{marginLeft:3}},e.id,n()(F.Z,{userStore:e.userStore,size:28}))))))))):null}},46978:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(23174),n=i.n(o),r=i(67294),a=i(24405);function s(e,t){let{isSelected:i}=e;window.__c={n:"RadioButtonIcon"};const{radioButtonStyle:o,dotStyle:s}=(0,a.yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:8,background:i?e.blueColor:e.whiteButtonBackground,border:i?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:i?1:0}})),[i]);return r.createElement("div",{ref:t,style:o},n()("div",{style:s}))}const d=r.forwardRef(s)},5478:(e,t,i)=>{i.d(t,{YF:()=>u,ZP:()=>g});var o=i(10434),n=i.n(o),r=i(23174),a=i.n(r),s=i(67294),d=i(24405),l=i(4023),c=i(26388),m=i(85567);const u={Success:"success",Pending:"pending",Failure:"failure"};const p={display:"flex",justifyContent:"center",alignItems:"baseline"},g=function(e){let{status:t,value:i,renderTooltip:o,...r}=e;window.__c={n:"StatusToken"};const g=(0,d.Fg)(),f={[u.Success]:g.statusTokenBackground.green,[u.Pending]:g.statusTokenBackground.yellow,[u.Failure]:g.statusTokenBackground.red},v={[u.Success]:g.statusTokenIndicator.green,[u.Pending]:g.statusTokenIndicator.yellow,[u.Failure]:g.statusTokenIndicator.red},y={[u.Success]:g.statusTokenText.green,[u.Pending]:g.statusTokenText.yellow,[u.Failure]:g.statusTokenText.red};return o?s.createElement(m.Z,n()({},r,{backgroundColor:f[t],color:y[t],value:a()(c.Z,{placement:l.u.Bottom,alignment:l.v.Start,renderTooltip:o,render:e=>s.createElement("div",n()({style:p},e),a()("div",{style:{background:v[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),i)})})):s.createElement(m.Z,n()({},r,{backgroundColor:f[t],color:y[t],value:a()("div",{style:p},void 0,a()("div",{style:{background:v[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),i)}))}},719:(e,t,i)=>{i.d(t,{Z:()=>u});var o=i(10434),n=i.n(o),r=i(23174),a=i.n(r),s=i(67294),d=i(83355),l=i(98742),c=i(74194);class m extends d.Z{constructor(){super(...arguments),this.handleKeyDown=e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken()}}renderComponent(){const{device:e}=this.environment;return a()("div",{className:this.props.readOnly?void 0:"notion-focusable-within",onClick:this.props.onClick,style:e.isMobile?this.getMobileWrapStyle():this.getDesktopWrapStyle()},void 0,this.props.tokens,this.renderInput())}renderInput(){const{device:e}=this.environment,t=0===this.props.tokens.length;return s.createElement(c.Z,n()({format:c.Z.Format.Transparent},(0,l.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,onSubmit:this.props.onSubmit,onBlur:this.props.onBlur,focus:this.props.focus,style:{...m.inputStyle,margin:e.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this.props.readOnly,inputStyle:{height:18},size:1,type:this.props.type,placeholder:t?this.props.placeholder:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))}getDesktopWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this.props.style}}getMobileWrapStyle(){return{...this.getDesktopWrapStyle(),fontSize:14,padding:"7px 10px 0"}}}m.displayName="TokenInput",m.inputStyle={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};const u=m},25735:(e,t,i)=>{i.d(t,{Y:()=>f});var o=i(23174),n=i.n(o),r=i(67294),a=i(480),s=i(86628),d=i(24405),l=i(5366),c=i(82990),m=i(50906),u=i(16639),p=i(80444),g=i(29302);function f(e){window.__c={n:"GroupMembersListTooltip"};const{group:t,limit:i,noMembersMessage:o,color:f,trackHover:v}=e,y=(0,d.yK)((e=>({container:{marginBottom:4,..."white_background"===f?{fontSize:c.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===f?{fontSize:c.Z.fontSize.UISmall.desktop,color:e.mediumTextColor}:{color:e.mediumInvertedTextColor}}})),[f]),h=(0,s.VK)((()=>p.default.state.currentSpaceStore),[]),S=(0,a.O7)();(0,s.VK)((()=>{v&&m.iHH(S,{group_id:t.id})}),[v,t.id,S]);const{countRemainingUsers:b,limitedUserStores:w}=(0,s.VK)((()=>(0,u.rm)({group:t,spaceStore:h,limit:i})),[t,h,i]);return 0===w.length?r.createElement(r.Fragment,null,o):n()("div",{style:y.container},void 0,w.map((e=>n()("div",{style:y.userContainer},e.id,n()(g.Z,{style:y.user,userStore:e,avatarSize:18})))),b>0&&n()("div",{style:y.moreMessage},void 0,n()(l.FormattedMessage,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:b}})))}},88804:(e,t,i)=>{i.d(t,{E:()=>d,N:()=>s});var o=i(83212),n=i(57559),r=i(98165),a=i(67669);function s(e,t){const i=t.getRecordStoreUIRoot(),s=i instanceof n.G&&i.isPageBlock()&&i.isLocked(),d=(0,r.n3)(i)&&o.Z.getMode(e,i),l=Boolean((0,a.YF)(d));return!t.canEdit()||s||l}function d(e,t){return!s(e,t)}},52507:(e,t,i)=>{i.d(t,{AS:()=>d,Hs:()=>l,ZP:()=>c});var o=i(49085),n=i(59753),r=i(44312),a=i(97880);class s extends o.default{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const d=(0,a.AO)((e=>"invalid"===e.type||"unverified"===e.type?{true:e}:{false:e}));function l(e){const t=n.kk.fromValue(r.Jd,e);return{type:t.verified_at?"verified":"unverified",id:t.id,domain:t.domain,verificationCode:t.verification_code,createdAt:t.created_at,expiresAt:t.expires_at,invalidatedAt:t.getInfo().invalidated_at}}const c=s},39248:(e,t,i)=>{i.d(t,{E:()=>s});var o=i(4615),n=i(89101),r=i(64002);function a(e,t){const i=t.trim().toLowerCase(),o=(0,r.Of)(i).replace(/\./g,"-");return o?`${o}-${e}`:e}function s(e,t){if(!(0,o.e)(e))return`${n._j.integrations}/${e}`;const i=a(e,void 0===t?"":t);return`${n._j.integrations}/${i}`}}}]);