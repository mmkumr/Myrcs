"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3370],{76463:(e,t,i)=>{i.d(t,{P0:()=>P,RN:()=>z,VG:()=>_,Yw:()=>x,jX:()=>T,k2:()=>Z,lz:()=>k,v2:()=>N});var o=i(5366),n=i(26825),a=i(27006),r=i(45953),s=i(21202),l=i(77420),d=i(15047),c=i(19889),p=i(97880),u=i(47307),m=i(33929),g=i(67669),h=i(57559),v=i(54642),f=i(92625),b=i(76464),y=i(9953),S=i(64964),w=i(28014),M=i(39699),C=i(61202);const A=(0,o.defineMessages)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function I(e,t){const{environment:i,spaceStore:o,spaceRole:n}=t,a=function(e){const{name:t,spaceStore:i,userId:o,icon:n,type:a}=e,r=Date.now(),s={name:t,created_at:r,created_by_table:c.KJ,created_by_id:o,alive:!0,icon:n,space_id:i.id,last_edited_at:r,last_edited_by_id:o,last_edited_by_table:c.KJ};switch(a){case"guest":return{...s,type:"guest",capabilities:e.capabilities,parent_table:d.bx,parent_id:i.id,integration_id:void 0};case"scim":return{...s,type:"scim",parent_table:c.KJ,parent_id:o};default:(0,p.t1)(a)}}(t),r=y.ae({environment:i,table:l.cZ,value:a,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,transaction:e});return b.ep({environment:i,store:o,permissionItems:[{type:"bot_permission",role:n,bot_id:r.id}],transaction:e}),{botStore:r}}function k(e){const{environment:t}=e,{serverCommitResult:i,performResult:{botStore:o}}=M.createAndCommit({userAction:"botActions.createSpaceBot",environment:t,perform:t=>I(t,e)});return{botStore:o,transactionPromise:i}}async function P(e){const{environment:t,botId:i,onSuccess:o}=e,n=await v.deleteBot(t,{botId:i});"failed"===n.type?u.showError(n):"success"===n.type&&o&&(await C.pJ({environment:t}),o())}async function x(e){const{environment:t,table:i,id:o,type:n}=e,a=await v.getBots(t,{table:i,id:o,type:n});if("failed"===a.type)throw u.showError(a),a;return{botIds:a.data.botIds,recordMap:a.data.recordMap}}async function _(e){const{environment:t,botId:i}=e,o=await v.getBotToken(t,{botId:i});if("failed"!==o.type)return o.data.token;u.showError(o)}function N(e){const{botValue:t,store:i,environment:o}=e,{id:a,parent_id:r,parent_table:s,capabilities:l}=t,d={type:"bot_permission",bot_id:a,parent_id:r,parent_table:s,role:(0,n.uH)(l)};M.createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,perform:e=>{b.ep({environment:o,store:i,permissionItems:[d],transaction:e})}})}function z(e){const{botId:t,store:i,environment:o}=e,n=i.getPermissionItems().filter((0,p.AO)((e=>(0,a.FB)(e)?{true:e}:{false:e})));for(const a of n)if(a.bot_id===t){const e={...a,role:"none"};M.createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,perform:t=>{b.ep({environment:o,store:i,permissionItems:[e],transaction:t})}})}}function T(e){const{currentSpaceStore:t,environment:i,pages:o,botStore:n,addPermission:a}=e;if(!t)return;const r=(0,g.zT)({botStore:n,addPermission:a});o.forEach((e=>{const o=h.t1.createChildStore(t,{table:s.iU,id:e});M.createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:i,perform:e=>{b.ep({environment:i,store:o,permissionItems:[r],transaction:e})}})}))}async function Z(e){const{environment:t,spaceStore:i,spaceViewStore:o,templatePageId:n,botValue:a,pages:s}=e;if(!i)return;const d=h.t1.createChildStore(i,{table:l.cZ,id:a.id});if(n)return await async function(e){const{environment:t,spaceStore:i,spaceViewStore:o,templatePageId:n,botStore:a}=e;if(!i||!o)return;try{f.j({message:A.duplicatingTemplate});const e=await v.loadBlockSubtree(t,{block:{id:n,spaceId:i.id},shallow:!1});if("failed"===e.type)return;const s=r.PF.create(e.data.subtreeRecordMap),{performResult:l}=M.createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,perform:e=>{const r=w.cc({environment:t,recordMap:s,copyPageId:n,isPrivate:!0,spaceStore:i,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),l=o.getPrivatePageIds();l.length>0&&y.sW({store:o,data:{private_pages:[r.id,...l]},transaction:e});const d=(0,g.zT)({botStore:a,addPermission:!0});return b.ep({environment:t,store:r,permissionItems:[d],transaction:e}),r}});return l}catch(s){S.oV({label:m.default.formatMessage(A.duplicatingTemplateError)})}finally{f.x()}}({environment:t,templatePageId:n,botStore:d,spaceStore:i,spaceViewStore:o});T({environment:t,currentSpaceStore:i,botStore:d,pages:s,addPermission:!0})}},78948:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(23174),n=i.n(o),a=(i(67294),i(83355)),r=i(68785),s=i(28992);class l extends a.Z{renderComponent(){return n()(s.Z,{title:n()(r.Z,{})})}}l.displayName="LoadingMenuItem";const d=l},24409:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ge});var o=i(23174),n=i.n(o),a=i(67294),r=i(480),s=i(86628),l=i(24405),d=i(63123),c=i(49085),p=i(15070),u=i(8848),m=i(59054),g=i(56589),h=i(4615),v=i(77420),f=i(9844),b=i(19889),y=i(90965),S=i(94826),w=i(97880),M=i(82990),C=i(64002),A=i(75018),I=i(29974),k=i(21325),P=i(91924),x=i(38755),_=i(41168),N=i(80444),z=i(57559),T=i(62213),Z=i(78291),V=i(3403),B=i(80750),L=i(5366),F=i(82036),R=i(36110),W=i(42922),E=i(63296),O=i(42402);function U(e){window.__c={n:"OauthAuthorizationError"};const{integrationValue:t,oauthParams:i}=e,o=(0,r.O7)(),{oauthErrorType:a,title:s,body:d,primaryAction:c}=function(e){const t=n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.genericError.title",defaultMessage:"Something went wrong"});if("invalidClientId"===e.type)return{oauthErrorType:F._.invalid_request,title:t,body:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidClientId.body",defaultMessage:"Missing or incomplete Client ID. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>n()(O.Z,{href:"https://developers.notion.com/#handling-errors"},void 0,e)}})};if("clientNotFound"===e.type)return{oauthErrorType:F._.invalid_request,title:t,body:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.clientNotFound.body",defaultMessage:"Missing or incomplete Client ID. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>n()(O.Z,{href:"https://developers.notion.com/#handling-errors"},void 0,e)}})};if("invalidResponseType"===e.type)return{oauthErrorType:F._.invalid_request,title:t,body:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidResponseType",defaultMessage:"Missing or invalid response_type. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>n()(O.Z,{href:"https://developers.notion.com/#handling-errors"},void 0,e)}})};if("integrationAlreadyInstalled"===e.type)return{oauthErrorType:F._.access_denied,title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.title",defaultMessage:"This integration has already been added to {workspaceName}",values:{workspaceName:e.spaceName}}),body:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.body",defaultMessage:"You can review and remove added integrations in Settings."}),primaryAction:{onClick:e.primaryAction,title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.openWorkspaceSettingsButton.label",defaultMessage:"Open Settings"})}};if("notAnAdmin"===e.type)return{oauthErrorType:F._.access_denied,title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.title",defaultMessage:"You're not allowed to add integrations to {workspaceName}",values:{workspaceName:e.spaceName}}),body:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.body",defaultMessage:"Contact an admin to grant you access, or switch to another workspace."}),primaryAction:{onClick:e.primaryAction,title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.switchWorkspaceButton.label",defaultMessage:"Switch workspace"})}};if("integrationNotApproved"===e.type)return{oauthErrorType:F._.access_denied,title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationNotApproved.title",defaultMessage:'You are not permitted to add the integration "{integrationName}" to {workspaceName}',values:{integrationName:e.integrationValue.name,workspaceName:e.spaceName}}),body:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationNotApproved.body",defaultMessage:"Contact your system administrator for more information."}),primaryAction:{onClick:e.primaryAction,title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.switchWorkspaceButton.label",defaultMessage:"Switch workspace"})}};if("invalidRedirectUri"===e.type)return{oauthErrorType:F._.invalid_request,title:t,body:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidRedirectUri.body",defaultMessage:"Missing or invalid redirect_uri. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>n()(O.Z,{href:"https://developers.notion.com/#handling-errors"},void 0,e)}})};(0,w.t1)(e.type)}(e),p=function(){const{isMobile:e}=(0,r.Fy)(),t=e?25:48,i=e?18:20;return(0,l.yK)((()=>({container:{textAlign:"center",flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fill:u.ZP.red,width:t,height:t,marginBottom:20,display:"inline-block"},title:{fontSize:i,margin:"0 50px 32px",textAlign:"center",fontWeight:M.Z.fontWeight.medium,marginBottom:12},body:{marginTop:0,marginBottom:24,width:"80%"}})),[t,i])}();return n()("section",{style:p.container},void 0,(0,B.l)(p.icon),n()("header",{style:p.title},void 0,s),n()("p",{style:p.body},void 0,d),c&&n()("div",{style:p.body},void 0,n()(W.Z,{isLarge:!0,onClick:c.onClick},void 0,c.title)),n()(E.Z,{onClick:()=>{R.V({environment:o,integration:t,errorType:a,params:i})}},void 0,n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.cancelButton.label",defaultMessage:"Cancel"})))}var K=i(10434),H=i.n(K),D=i(15145),j=i(59753),G=i(26825),Y=i(50906),$=i(76463),J=i(42631),q=i(92625),X=i(41623),Q=i(30874),ee=i(31278),te=i(45238);const ie=(0,te.I)("pageAdd",{viewBox:"0 0 16 17",svg:n()("path",{d:"M4.135 8.707c2.46 0 4.491 2.023 4.491 4.484 0 .828-.232 1.607-.636 2.277h5.647c1.463 0 2.221-.773 2.221-2.242V7.107h-5.113c-.854 0-1.265-.417-1.265-1.271V.668H6.356c-1.462 0-2.221.772-2.221 2.242v5.797zm6.733-2.598h4.915c-.04-.307-.266-.601-.615-.963l-3.74-3.794c-.334-.342-.642-.575-.956-.616V5.72c0 .26.136.39.396.39zM4.135 16.712c1.914 0 3.52-1.593 3.52-3.52 0-1.928-1.593-3.514-3.52-3.514-1.928 0-3.52 1.592-3.52 3.513a3.537 3.537 0 003.52 3.52zm0-1.285a.441.441 0 01-.465-.465v-1.299h-1.3a.441.441 0 01-.465-.465c0-.287.192-.471.465-.471h1.3v-1.292c0-.274.184-.465.465-.465.28 0 .465.184.465.465v1.292h1.298c.28 0 .465.184.465.471 0 .28-.184.465-.465.465H4.6v1.299a.441.441 0 01-.465.465z"})}),oe=(0,te.I)("taskList",{viewBox:"0 0 18 17",svg:n()("path",{d:"M3.48438 7.29688C5.35938 7.29688 6.92188 5.73438 6.92188 3.85938C6.92188 1.96875 5.35938 0.40625 3.48438 0.40625C1.59375 0.40625 0.0390625 1.96875 0.0390625 3.85938C0.0390625 5.73438 1.60156 7.29688 3.48438 7.29688ZM3.07031 5.70312C2.89844 5.70312 2.77344 5.61719 2.65625 5.47656L1.78125 4.42969C1.69531 4.32812 1.66406 4.23438 1.66406 4.10156C1.66406 3.85938 1.85156 3.67188 2.08594 3.67188C2.24219 3.67188 2.35156 3.73438 2.45312 3.875L3.05469 4.625L4.44531 2.39062C4.54688 2.23438 4.67969 2.15625 4.83594 2.15625C5.07031 2.15625 5.26562 2.33594 5.26562 2.55469C5.26562 2.66406 5.24219 2.76562 5.16406 2.88281L3.5 5.46875C3.39844 5.61719 3.25 5.70312 3.07031 5.70312ZM9.39844 4.54688H17.2578C17.6406 4.54688 17.9531 4.24219 17.9531 3.85938C17.9531 3.47656 17.6406 3.17188 17.2578 3.17188H9.39844C9.01562 3.17188 8.71875 3.47656 8.71875 3.85938C8.71875 4.24219 9.01562 4.54688 9.39844 4.54688ZM3.48438 16.3281C5.35938 16.3281 6.92188 14.7656 6.92188 12.8828C6.92188 10.9922 5.35938 9.4375 3.48438 9.4375C1.59375 9.4375 0.0390625 11 0.0390625 12.8828C0.0390625 14.7656 1.60156 16.3281 3.48438 16.3281ZM3.48438 15C2.32812 15 1.36719 14.0312 1.36719 12.8828C1.36719 11.7344 2.33594 10.7578 3.48438 10.7578C4.625 10.7578 5.60156 11.7344 5.60156 12.8828C5.60156 14.0312 4.625 15 3.48438 15ZM9.39844 13.5859H17.2578C17.6406 13.5859 17.9531 13.2812 17.9531 12.8984C17.9531 12.5156 17.6406 12.2109 17.2578 12.2109H9.39844C9.01562 12.2109 8.71875 12.5156 8.71875 12.8984C8.71875 13.2812 9.01562 13.5859 9.39844 13.5859Z"})});var ne=i(67669),ae=i(38493);function re(e){window.__c={n:"OauthAuthorizationBotAccessOptionsStep"};const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:o,setBotAccessOption:r}=e,[{value:s}]=(0,m.r5)((async()=>!!i&&await(0,ne.JI)(i)),[i]);a.useEffect((()=>{r(s?"duplicate_template":"pick_pages")}),[s,r]);const d=(0,l.yK)((()=>({container:{display:"grid",gridTemplateRows:"1fr 1fr",gap:8,marginTop:8},icon:{fill:u.ZP.red,width:20,height:20,marginRight:12},errorContainer:{display:"flex",alignItems:"center"}})),[]);return n()("div",{style:d.container},void 0,n()(se,{disabled:!s,title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.title",defaultMessage:"Use a template provided by the developer"}),subtitle:s?n()(L.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.subtitle",defaultMessage:"{integrationName} will duplicate this template into the Private pages of your workspace. The integration will then be able to {capabilities} content in this new page.",values:{capabilities:n()(L.FormattedList,{value:(0,ae.O)(t.capabilities),type:"conjunction"}),integrationName:t.name}}):n()("div",{style:d.errorContainer},void 0,n()("div",{},void 0,n()(L.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidTemplate.body",defaultMessage:"The page template is no longer public. <inlinetextlink>Contact the developer</inlinetextlink> for more help.",values:{inlinetextlink:t=>n()(O.Z,{href:`mailto:${e.integrationValue.info.email}`},void 0,t)}}))),icon:ie,isSelected:"duplicate_template"===o,selectOption:()=>r("duplicate_template")}),n()(se,{title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.pickPages.title",defaultMessage:"Select pages to share with {integrationName}",values:{integrationName:t.name}}),subtitle:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.pickPages.subtitle",defaultMessage:"Select one or multiple pages to share with {integrationName}",values:{integrationName:t.name}}),icon:oe,isSelected:"pick_pages"===o,selectOption:()=>r("pick_pages")}))}function se(e){window.__c={n:"BotAccessOptions"};const{title:t,subtitle:i,icon:o,isSelected:a,selectOption:r,disabled:s}=e,d=(0,l.yK)((e=>({button:{height:"none",padding:12,width:"100%",borderWidth:1,borderColor:e.outlineButtonBorder,borderRadius:4,cursor:s?"not-allowed":void 0},buttonSelected:{background:"white",borderWidth:2,borderColor:u.ZP.blue,padding:11,boxShadow:"0px 4px 8px rgba(66, 129, 219, 0.09), 0px 0px 2px rgba(0, 0, 0, 0.06), 0px 0px 1px rgba(0, 0, 0, 0.04)"},option:{width:"100%",whiteSpace:"normal",display:"grid",gridTemplateColumns:"min-content auto min-content",padding:6},text:{overflowWrap:"normal"},title:{fontSize:14,fontWeight:M.Z.fontWeight.medium,color:u.ZP.frontTextMedium,marginBottom:6},subtitle:{fontSize:12,lineHeight:"140%",color:e.mediumTextColor},icon:{width:14,height:14,color:u.ZP.regularIconColor,marginRight:12}})),[s]);return n()(E.Z,{onClick:r,style:d.button,hovered:a,hoveredStyle:d.buttonSelected,pressedStyle:d.buttonSelected,disabled:s},void 0,n()("div",{style:d.option},void 0,o(d.icon),n()("div",{style:d.text},void 0,n()("div",{style:d.title},void 0,t),n()("div",{style:d.subtitle},void 0,i))))}var le=i(74181),de=i(73084);function ce(e){window.__c={n:"OauthAuthorizationPagePickerStep"};const{integrationValue:t,selectedBlockIdsStore:i}=e,o=(0,le.VM)(t),r=(0,l.yK)((e=>({subtitle:{fontSize:14,textAlign:"center",fontWeight:M.Z.fontWeight.medium,marginBottom:16},linkPreviewSubtitle:{fontSize:14,textAlign:"left",marginBottom:16,color:e.lightTextColor}})),[]);return a.createElement(a.Fragment,null,n()("div",{style:r.subtitle},void 0,n()(L.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.title",defaultMessage:'Allow "{integrationName}" to access these pages',values:{integrationName:t.name}})),n()("div",{style:r.linkPreviewSubtitle},void 0,o&&n()(L.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.linkPreviewSubtitle",defaultMessage:"Your selections here will not impact this integration's ability to unfurl links across your workspace"})),n()(de.Z,{selectedBlockIdsStore:i}))}var pe=i(72787),ue=i(39132),me=i(61248);const ge=(0,te.I)("scribble",{viewBox:"0 0 16 15",svg:n()("path",{d:"M1.048 9.972c.424.41 1.237.505 1.866-.069.226-.198.67-.67 1.367-1.374 3.418-3.459 5.524-5.64 5.9-5.298.3.274-.862 1.921-2.024 3.535-2.126 2.946-3.917 5.1-2.57 6.446 1.053 1.053 2.652.096 5.216-2.153 1.374-1.21 2.33-2.106 2.57-1.873.15.15-.212.745-.677 1.544-.656 1.135-1.531 2.42-.676 3.275.594.595 1.729.335 3.048-.97.274-.267.335-.589.103-.814-.212-.212-.513-.178-.738.027-.855.82-1.49 1.176-1.593 1.06-.13-.123.232-.773.861-1.894.868-1.552 1.401-2.59.602-3.37-1.074-1.04-2.331.061-4.512 1.982-1.853 1.627-2.611 2.051-2.782 1.867-.246-.26.437-1.183 2.46-4.013 2.188-3.049 3.487-5.031 2.257-6.234-1.607-1.566-3.767-.41-9.12 4.887-.779.766-1.264 1.23-1.503 1.518-.623.718-.486 1.51-.055 1.92z"})}),he=(0,te.I)("settingsMembersFilled",{viewBox:"0 0 20 13",svg:n()("path",{d:"M13.582 6.00293C15.0723 6.00293 16.3369 4.67676 16.3369 2.96094C16.3369 1.28613 15.0654 0.0078125 13.582 0.0078125C12.0986 0.0078125 10.8203 1.30664 10.8271 2.97461C10.8271 4.67676 12.0918 6.00293 13.582 6.00293ZM5.67969 6.16016C6.97852 6.16016 8.0791 4.99805 8.0791 3.50781C8.0791 2.04492 6.97168 0.9375 5.67969 0.9375C4.3877 0.9375 3.27344 2.06543 3.28027 3.52148C3.28027 4.99805 4.38086 6.16016 5.67969 6.16016ZM1.91309 12.3604H7.0332C6.30859 11.3145 7.1084 9.25 8.64648 8.04688C7.89453 7.55469 6.91016 7.19922 5.67969 7.19922C2.62402 7.19922 0.648438 9.44824 0.648438 11.3076C0.648438 11.9775 0.990234 12.3604 1.91309 12.3604ZM9.31641 12.3604H17.8408C18.9619 12.3604 19.3516 12.0186 19.3516 11.3965C19.3516 9.63281 17.123 7.21289 13.5752 7.21289C10.0342 7.21289 7.80566 9.63281 7.80566 11.3965C7.80566 12.0186 8.19531 12.3604 9.31641 12.3604Z"})}),ve=(0,te.I)("topbarComment",{viewBox:"0 0 20 20",svg:n()("path",{d:"M5.9375 18.4844C6.38281 18.4844 6.71094 18.2656 7.25 17.7891L9.92969 15.4297H14.6328C16.9844 15.4297 18.3047 14.0703 18.3047 11.75V5.67969C18.3047 3.35938 16.9844 2 14.6328 2H4.67188C2.32812 2 1 3.35938 1 5.67969V11.75C1 14.0781 2.36719 15.4297 4.61719 15.4297H4.9375V17.3438C4.9375 18.0391 5.30469 18.4844 5.9375 18.4844ZM6.32812 16.7344V14.5078C6.32812 14.0469 6.125 13.8672 5.6875 13.8672H4.72656C3.25781 13.8672 2.55469 13.125 2.55469 11.7031V5.72656C2.55469 4.30469 3.25781 3.5625 4.72656 3.5625H14.5859C16.0469 3.5625 16.75 4.30469 16.75 5.72656V11.7031C16.75 13.125 16.0469 13.8672 14.5859 13.8672H9.84375C9.36719 13.8672 9.13281 13.9453 8.80469 14.2891L6.32812 16.7344Z"})});var fe=i(47560);function be(e){var t,i;window.__c={n:"OauthAuthorizationPermissionStep"};const{integrationValue:o,spaceName:r}=e,s=o.info.website_url,d=(0,G.FD)(o.capabilities),c=(0,S.uw)(o.id),p=o.capabilities,u=(0,l.yK)((()=>({inlineTextLink:{color:"black",textDecoration:"none"}})),[]);return a.createElement(a.Fragment,null,n()("div",{},void 0,n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.intro",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> will have permission to",values:{integrationName:o.name,inlinetextlink:e=>s?n()(O.Z,{href:s,style:u.inlineTextLink},void 0,e):e}})),(null==p?void 0:p.read_content)&&n()(ye,{icon:ue.c,title:n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess",defaultMessage:"View pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess",defaultMessage:"View all pages"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent",defaultMessage:"View pages you select"})},void 0,n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to view pages you can view.",values:{integrationName:o.name}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to view all pages in your workspace",values:{integrationName:o.name}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent.description",defaultMessage:"{integrationName} will be able to view pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name}})),(null==p?void 0:p.update_content)&&n()(ye,{icon:ge,title:n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess",defaultMessage:"Edit pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess",defaultMessage:"Edit all pages"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent",defaultMessage:"Edit pages you select"})},void 0,n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to edit pages you can edit",values:{integrationName:o.name}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to edit all pages",values:{integrationName:o.name}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent.description",defaultMessage:"{integrationName} will be able to edit pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name}})),(null==p?void 0:p.insert_content)&&n()(ye,{icon:ie,title:n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess",defaultMessage:"Create new content within pages you have access to"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent",defaultMessage:"Create new content within pages you select"})},void 0,n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to add new content or sub-pages wherever you have permission to add new content or sub-pages",values:{integrationName:o.name,workspaceName:r}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent.description",defaultMessage:"{integrationName} will be able to add new content or sub-pages to pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name,workspaceName:r}})),(null==p?void 0:p.read_comment)&&n()(ye,{icon:ve,title:n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess",defaultMessage:"View comments within pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess",defaultMessage:"View all comments"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment",defaultMessage:"View comments within pages you select"})},void 0,n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to view comments within pages you can access",values:{integrationName:o.name}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to view comments within all pages",values:{integrationName:o.name}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment.description",defaultMessage:"{integrationName} will be able to view comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name}})),(null==p?void 0:p.insert_comment)&&n()(ye,{icon:fe.o,title:n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess",defaultMessage:"Create comments within pages you have access to"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment",defaultMessage:"Create comments within pages you select"})},void 0,n()(L.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to create comments within pages you can access",values:{integrationName:o.name}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment.description",defaultMessage:"{integrationName} will be able to create comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name}})),((null==p?void 0:p.read_user_without_email)||(null==p?void 0:p.read_user_with_email))&&n()(ye,{icon:he,title:null!==(t=o.capabilities)&&void 0!==t&&t.read_user_with_email?n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail",defaultMessage:"View workspace users and their emails"}):n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers",defaultMessage:"View workspace users"})},void 0,null!==(i=o.capabilities)&&void 0!==i&&i.read_user_with_email?n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail.detail",defaultMessage:"{integrationName} will be able to see basic information about all workspace members and guest data, including their names, profile images, and email addresses",values:{integrationName:o.name}}):n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers.detail",defaultMessage:"{integrationName} will be able to see basic information about all workspace members and guests, like their names and profile images, but not their email addresses",values:{integrationName:o.name}})),(null==p?void 0:p.webhooks)&&n()(ye,{icon:me.F,title:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks",defaultMessage:"Receive updates on workspace activity"})},void 0,n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks.description",defaultMessage:"Changes to pages, permissions, or workspace settings will be shared with {integrationName}",values:{integrationName:o.name}})))}function ye(e){window.__c={n:"PermissionDetailToggle"};const[t,i]=a.useState(!1),o=(0,l.yK)((e=>({permissionItem:{border:`1px ${u.FN.dark.gray[850]} solid`,borderRadius:4,marginTop:8},permissionItemTitle:{display:"flex",justifyContent:"space-between",padding:"6px 12px",cursor:"pointer",userSelect:"none"},permissionItemHeading:{display:"flex",alignItems:"center"},permissionItemDetails:{paddingLeft:38,paddingRight:24,transition:"all 0.2s ease",color:e.mediumTextColor},rightStyle:{width:22,height:18},sharedIconStyle:{width:24,height:16,textAlign:"center"}})),[]);return n()("div",{style:o.permissionItem},void 0,n()("div",{style:o.permissionItemTitle,onClick:()=>i(!t)},void 0,n()("div",{style:o.permissionItemHeading},void 0,n()("div",{style:o.sharedIconStyle},void 0,e.icon({width:16,height:16,color:u.ZP.regularIconColor})),n()("div",{},void 0,e.title)),e.children&&n()("div",{style:{display:"flex",alignItems:"center"}},void 0,(0,pe.Y)({width:12,height:12,color:u.ZP.lightIconColor,transform:t?"rotate(180deg)":void 0,transition:"transform 0.2s ease"}))),n()("div",{style:{...o.permissionItemDetails,opacity:t?1:0,flex:t?1:0,paddingBottom:t?8:0,transform:t?"translate3d(0,-4px,0)":"translate3d(0,-8px,0)"}},void 0,t&&e.children))}const Se={permissions:{header:!0,warning:!0,footer:!0},bot_access_option:{header:!0,warning:!1,footer:!0},page_picker:{header:!1,warning:!1,footer:!1}},we=(0,L.defineMessages)({loadingMessage:{id:"oauthAuthorization.loadingMessage",defaultMessage:"Authorizing…"}});function Me(e){const{showApprovalWarning:t}=e,[i,o]=a.useState("permissions"),[r,s]=a.useState("duplicate_template"),[l,d]=a.useState(void 0),c=Se[i].header,p=t&&Se[i].warning,u=Se[i].footer;return a.createElement(a.Fragment,null,c&&a.createElement(ke,e),a.createElement(Pe,H()({},e,{currentStep:i,botAccessOption:r,setBotAccessOption:s})),a.createElement(xe,H()({},e,{currentStep:i,setCurrentStep:o,acceptedIntegrationCapabilities:l,setAcceptedIntegrationCapabilities:d,botAccessOption:r})),p&&n()("div",{style:{display:"flex",alignItems:"center",marginTop:20}},void 0,n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.integrationApprovalNotice",defaultMessage:"Authorizing this integration will add it to your workspace's approval list. Other workspace members will be able to install this integration."})),u&&a.createElement(_e,e))}function Ce(){const{isMobile:e}=(0,r.Fy)();return(0,l.yK)((t=>({title:{fontSize:e?18:20,margin:"0 50px 32px",textAlign:"center",fontWeight:M.Z.fontWeight.medium},inlineTextLink:{color:"black",textDecoration:"none"},buttonGroup:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:24},footer:{fontSize:M.Z.fontSize.UISmall.desktop,color:t.mediumTextColor,paddingTop:32,paddingBottom:16},innerFooterContainer:{color:t.regularTextColor,fontWeight:M.Z.fontWeight.semibold,marginBottom:4}})),[e])}const Ae={cancel:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.cancelButton.label",defaultMessage:"Cancel"}),back:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.backButton.label",defaultMessage:"Back"})},Ie={bot_access_option:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.nextButton.label",defaultMessage:"Next"}),page_picker:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.continueButton.label",defaultMessage:"Select pages"}),authorize:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.finishButton.label",defaultMessage:"Allow access"})};function ke(e){window.__c={n:"IntegrationHeader"};const{integrationValue:t,spaceName:i}=e,o=t.info.website_url,r=t.info.icon?{pointer:{table:f.K2,id:t.id},icon:t.info.icon}:void 0,s=Ce();return a.createElement(a.Fragment,null,n()("div",{style:{padding:15}},void 0,n()(ee.Z,{icon:r,disabled:!0,title:t.name,size:54,isEmptyPage:!1,style:{margin:"auto"}})),n()("div",{style:s.title},void 0,n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.title",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> is requesting access to {workspaceName}",values:{integrationName:t.name,workspaceName:i,inlinetextlink:e=>o?n()(O.Z,{style:s.inlineTextLink,href:o},void 0,e):e}})))}function Pe(e){const{currentStep:t,integrationValue:i,spaceName:o}=e;return"permissions"===t?n()(be,{integrationValue:i,spaceName:o}):"bot_access_option"===t?a.createElement(re,H()({},e,{integrationValue:i})):"page_picker"===t?a.createElement(ce,H()({},e,{integrationValue:i})):void(0,w.t1)(t)}function xe(e){window.__c={n:"OptionButtons"};const{currentStep:t,setCurrentStep:i,acceptedIntegrationCapabilities:o,setAcceptedIntegrationCapabilities:l,integrationValue:d,validIntegrationTemplateId:c,oauthParams:p,botAccessOption:u,spaceId:m,selectedBlockIdsStore:g}=e,h=(0,r.O7)(),[v,b]=a.useState(!1),y=(0,s.VK)((()=>g.state),[g]),M=(0,s.VK)((()=>{const e=Q.Z.state;return(0,X.yh)({integrationId:d.id,externalIntegrationStoreState:e})}),[d]),C=function(e){const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:o}=e;if((0,G.FD)(t.capabilities))return["permissions"];if(i){if("duplicate_template"===o)return["permissions","bot_access_option"];if("pick_pages"===o)return["permissions","bot_access_option","page_picker"];if("admin"===o)return["permissions"];(0,w.t1)(o)}return["permissions","page_picker"]}({integrationValue:d,validIntegrationTemplateId:c,botAccessOption:u}),I=C.indexOf(t),k=(0,S.z6)(d.id),P=C[I-1],x=k?void 0:C[I+1],_=P?Ae.back:Ae.cancel,z=P?()=>{i(P)}:()=>{!function(e){const{environment:t,oauthParams:i,integrationValue:o,createdBotValue:n}=e;n?A.handleRedirectToLastVisitedPage(t):R.V({environment:t,params:i,integration:o,errorType:F._.access_denied})}({environment:h,oauthParams:p,integrationValue:d,createdBotValue:M})},T=x?Ie[x]:Ie.authorize,Z=x?()=>{"permissions"===t&&l(d.capabilities),i(x)}:()=>{k?J.$$({environment:h,spaceId:m,from:"workspace_connections_redirect",integration:j.kk.fromValue(f.K2,d)}):async function(e){const{environment:t,botAccessOption:i,integrationValue:o,acceptedIntegrationCapabilities:n,setIsLoading:a,oauthParams:r,spaceId:s,selectedBlockIds:l,createdBotValue:d}=e;let c;"duplicate_template"===i&&(c=o.info.template_page_id),a(!0),q.j({message:we.loadingMessage});const p=c?[]:Object.keys(l).filter((e=>l[e])),{currentSpaceStore:u,currentSpaceViewStore:m}=N.default.state;if(d){const e=await $.k2({environment:t,templatePageId:c,botValue:d,spaceStore:u,spaceViewStore:m,pages:p});e?A.navigateToBlock({environment:t,store:e,pageVisitSource:D.tY.Duplicate}):A.handleRedirectToLastVisitedPage(t)}else await R.V({environment:t,params:r,integration:o,acceptedIntegrationCapabilities:n,spaceId:s,blockIdsForBot:p,templatePageId:c}),Y.Dah(t,{selection:i});q.x(),a(!1)}({environment:h,botAccessOption:u,integrationValue:d,setIsLoading:b,oauthParams:p,spaceId:m,selectedBlockIds:y,createdBotValue:M,acceptedIntegrationCapabilities:o})},V=Ce();return n()("div",{style:V.buttonGroup},void 0,n()(E.Z,{isLarge:!0,onClick:z,style:{height:32}},void 0,_),n()(W.Z,{isLarge:!0,onClick:Z,disabled:v},void 0,T))}function _e(e){window.__c={n:"Footer"};const{integrationValue:t,oauthParams:i}=e,o=t.info.terms_of_use_url,a=t.info.privacy_policy_url,r=(i.redirectUri||t.redirect_uris[0]||"").replace("http://","").replace("https://","").split(/[/?#]/)[0],s=Ce(),l=(0,S.z6)(t.id)?n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.body.partnerIntegration",defaultMessage:"The third-party products or services to which this integration connects are non-Notion Applications. By enabling this integration, you agree to Notion's <notiontermslink>Integration Gallery Terms</notiontermslink>.",values:{notiontermslink:e=>n()(O.Z,{href:"https://notion.notion.site/Integration-Gallery-Terms-of-Service-b74cada95062442d98c2abb1fe3efd9b"},void 0,e)}}):n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.body",defaultMessage:'If you continue, you may be sharing sensitive information. Notion does not review third party integrations such as "{integrationName}". Learn how "{integrationName}" handles your data by reviewing their <privacypolicylink>Privacy Policy</privacypolicylink> and <termsofservicelink>Terms of Service</termsofservicelink>.',values:{integrationName:t.name,privacypolicylink:e=>a?n()(O.Z,{href:a},void 0,e):e,termsofservicelink:e=>o?n()(O.Z,{href:o},void 0,e):e}});return n()("footer",{style:s.footer},void 0,n()("div",{style:s.innerFooterContainer},void 0," ",n()(L.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.title",defaultMessage:"Make sure you trust {integrationName} ({redirectUriDomain})",values:{integrationName:t.name,redirectUriDomain:r}})),n()("div",{},void 0,l))}var Ne=i(70954),ze=i(22709),Te=(i(57658),i(77451)),Ze=i(28125),Ve=i(45094),Be=i(27177),Le=i(77062),Fe=i(76453),Re=i(81236),We=i(17364),Ee=i(72495),Oe=i(1101);class Ue extends ze.g6{renderAccountHeader(e){const t=We.Z.getUserEmailAddress(this.environment,e);return t&&n()(Oe.Z,{emailAddress:t,userId:e,disabled:!1,accountActions:[(0,Te.qu)(e)]})}renderFooter(){return n()("div",{style:(0,Fe.Ax)({isMobile:this.environment.device.isMobile,theme:this.theme})},void 0,n()(Ee.Z,{},void 0,Ze.k(this.environment)&&a.createElement(Be.Z,H()({createType:"add-account",disableLoginLink:this.props.disableLoginLink},this.stores))))}getMenuListSections(e){const{device:t}=this.environment;return[{key:"spaces",render:e=>a.createElement(Ee.Z,H()({},e,{disableMobilePadding:!0,topBorder:t.isMobile,style:{borderBottom:`1px solid ${this.theme.regularDividerColor}`}})),items:this.getSpaceMenuListItems(e)}].filter((e=>e.items.length>0))}getSpaceMenuListItems(e){const{singleSpaceToSelect:t}=this.props,{currentUserRootStore:i,currentSpaceStore:o}=N.default.state,n=[],a=We.Z.getSpaceViewStores(this.environment,e);if(!i||!o)return[];if(a.sort(((e,t)=>{var i,o;const n=Number(Boolean(null===(i=e.getSpaceStore())||void 0===i?void 0:i.canAdmin()));return Number(Boolean(null===(o=t.getSpaceStore())||void 0===o?void 0:o.canAdmin()))-n})),t){const r=a.find((e=>e.getSpaceId()===t));if(r){const t=r.getSpaceStore();t&&n.push(this.getGeneratedSpaceMenuListItem({currentSpaceStore:o,currentUserRootStore:i,spaceStoreForSpaceView:t,spaceViewStore:r,userId:e}))}}else for(const r of a){const t=r.getSpaceStore();t&&n.push(this.getGeneratedSpaceMenuListItem({currentSpaceStore:o,currentUserRootStore:i,spaceStoreForSpaceView:t,spaceViewStore:r,userId:e}))}return n}getUnreadCountForOtherSpaces(){return 0}getGeneratedSpaceMenuListItem(e){const{onSpaceClick:t}=this.props,{spaceStoreForSpaceView:i,currentSpaceStore:o,currentUserRootStore:r,userId:s,spaceViewStore:l}=e,d=s===r.id&&i.id===o.id,c=(0,x.Cx)(i),p=(0,x.rn)(this.environment,i),u=(0,Fe.bM)(this.environment,this.props.intl,i),m=this.getSpaceSubtitle(this.environment,i);return{key:l.id,render:e=>a.createElement(Le.Z,H()({},e,{id:l.id,icon:(0,x.Wd)(this.environment,i),spaceName:p,title:u,caption:m,isCheck:d,showDragHandle:!1,disabled:c,disableTooltip:!c,tooltipMessage:n()(L.FormattedMessage,{id:"oauthAuthorizationPage.workspaceSwitcher.disabledWorkspace.tooltip",defaultMessage:"This integration can only be added by a member or admin."})})),action:async e=>{let{event:i}=e;T.Z.setState({...T.Z.state,open:!1}),d||await t({event:i,spaceViewStore:l})}}}getSpaceSubtitle(e,t){const i=Re.Z.getPublicSpaceData(e,t.id);if(!i||"none"===i.role)return;const o=this.props.intl.formatNumber(i.memberCount),n="personal"===t.getPlanType()?Ve.js.workspaceSubtitleWithoutMembers:Ve.js.workspaceSubtitleWithMembers;let a;a=i.productId?(0,Ve.em)(i.subscriptionTier):"team"===t.getPlanType()?Ve.js.teamTrialPlan:Ve.js.personalPlan;const r=this.props.intl.formatMessage(a);return this.props.intl.formatMessage(n,{numberOfWorkspaceMembers:o,planType:r})}}const Ke=(0,L.injectIntl)(Ue);function He(e){window.__c={n:"OauthAuthorizationTopBar"};const{onSpaceSwitch:t,disableAccountSwitcher:i,singleSpaceToSelect:o}=e,a=function(){const{isMobile:e}=(0,r.Fy)();return(0,l.yK)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"space-between",height:60,paddingLeft:20,paddingRight:8,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:u.ZP.contentBorder},notionLogo:{width:e?28:30,height:e?28:30,marginRight:10,flexShrink:0},notionTitle:{fontWeight:M.Z.fontWeight.medium,fontSize:16},switcherButton:{borderRadius:3,marginBottom:0}})),[e])}();return n()("div",{style:a.container},void 0,(0,Ne.C)(a.notionLogo),n()("div",{style:a.notionTitle},void 0,"Notion"),n()("div",{style:{flexGrow:1,flexShrink:1}}),n()("div",{style:{flexShrink:0}},void 0,n()(Ke,{format:ze._S.Regular,onSpaceClick:e=>{let{spaceViewStore:i}=e;return t(i)},shouldShowUnexpandButton:!1,disableLoginLink:!0,buttonStyle:{borderRadius:3,marginBottom:0},disabled:i,singleSpaceToSelect:o})))}const De={"929cdebb-09e8-4c5c-bfe5-e8c3c3902987":"development","5dbd3ed0-1160-4532-b10a-1a6749748fc4":"staging"},je=["makenotion.com","qasource.com"];function Ge(e){window.__c={n:"OauthAuthorization"};const t=e.userId,i=e.spaceId,o=(0,r.O7)(),a=(0,s.VK)((()=>N.default.state.currentUserRootStore),[]),d=(0,s.VK)((()=>N.default.state.currentSpaceStore),[]),c=(0,s.VK)((()=>N.default.state.currentSpaceViewStore),[]),p=(0,s.VK)((()=>{var e;return null===(e=N.default.state.currentUserStore)||void 0===e?void 0:e.getEmail()}),[]),m=(0,s.VK)((()=>!!(t&&i&&c)&&(c.getSpaceId()===i&&c.getUserRootParentId()===t)),[t,i,c]),g=function(e){const{WindowSizeStore:t}=e.environment,i=(0,s.VK)((()=>t.state.width>500),[t]),o=(0,s.VK)((()=>t.state.height<900),[t]);return(0,l.yK)((e=>({layoutContainer:{height:"100%",overflow:"auto",backgroundColor:i?u.ZP.frontCreamBackground:u.ZP.white},pageContainer:{display:"flex",justifyContent:"center"},contentBox:{width:"500px",minHeight:"600px",borderRadius:5,backgroundColor:u.ZP.white,boxShadow:i?e.lightBoxShadow:"none",display:"flex",flexDirection:"column",fontSize:M.Z.fontSize.UIRegular.desktop,marginTop:o?16:i?"calc((100vh - 900px) / 2)":0,marginBottom:40,transition:"all 0.2s ease"},contentBody:{paddingLeft:40,paddingRight:40,paddingTop:25,paddingBottom:25,flex:1,display:"flex",flexDirection:"column"}})),[i,o])}({environment:o});return n()("div",{style:g.layoutContainer},void 0,n()("div",{style:g.pageContainer},void 0,n()("div",{style:g.contentBox},void 0,n()(He,{disableAccountSwitcher:m,singleSpaceToSelect:i,onSpaceSwitch:async t=>{await I.ce({environment:o,spaceViewStore:t});const i=t.getSpaceId(),n=je.find((e=>null==p?void 0:p.endsWith(e)));if(i&&n&&De[i]&&e.integrationId&&e.redirectUri){const t=(0,C.LH)({baseUrl:(0,P.k2)(De[i]),clientId:e.integrationId,redirectUri:e.redirectUri,state:e.state});A.navigateToExternalURL({environment:o,url:t,targetSelf:!0})}}}),n()("div",{style:g.contentBody},void 0,n()(Ye,{oauthParams:e,spaceStore:d,userRootStore:a})))))}function Ye(e){const{oauthParams:t,spaceStore:i,userRootStore:o}=e;return i&&o?n()($e,{oauthParams:t,spaceStore:i,userRootStore:o}):n()(V.Z,{})}function $e(e){window.__c={n:"ErrorOrAuthorizationPage"};const{oauthParams:t,spaceStore:i,userRootStore:o}=e,{integrationId:l,responseType:u}=t,M=(0,r.O7)(),C=(0,s.VK)((()=>x.rn(M,i)),[M,i]),[A,I]=a.useState(),P=(0,s.VK)((()=>{if(l){return(0,z.Kv)(o,{id:l,table:f.K2}).getValue()}}),[l,o]),N=(0,d.V)({value:P,waitTimeInMs:1e3}),[{value:B}]=(0,m.r5)((async()=>{await k.bi(M);const{data:e}=Z.default.state;return e?_.NM(e):[]}),[M]),L=(0,s.VK)((()=>{if(B&&B.length>0){return B.map((e=>{const t=(0,z.Kv)(o,{table:v.cZ,id:e.botId}).getValue();if(t&&t.alive&&(0,p.hA)(t)&&t.created_by_id===o.id&&t.created_by_table===b.KJ&&t.integration_id===l)return{botValue:t,pageIds:e.pageIds}})).filter(w.$K)[0]}}),[B,o,l]),F=(0,s.VK)((()=>{let e={};return L&&(e=L.pageIds.reduce(((e,t)=>(e[t]=!0,e)),{})),c.default.createValue(e)}),[L]),R=(0,s.VK)((()=>{if(!l)return!1;const e=i.getBotSettingsStore().getValue();if(!e)return!0;if((0,y.CJ)(e)){const t=e.integration_approval_statuses;return!(!t||!t[l])&&Boolean("approved"===t[l].status)}return!0}),[l,i]),W=(0,s.VK)((()=>{const e=N.value;if(e)return e.info.template_page_id}),[N]),E=(0,s.VK)((()=>Boolean(l&&("datadog"===(0,S.EY)(l)||(0,S.uw)(l)))),[l]),O=(0,s.VK)((()=>x.Cx(i)),[i]),K=(0,s.VK)((()=>i.canAdmin()),[i]);a.useEffect((()=>{N.value&&!A&&I(P)}),[A,I,P,N]);const H=N.value??A;return"pending"===N.status?n()(V.Z,{}):l&&(0,h.e)(l)||E?H?"code"===u||E?O?n()(U,{oauthParams:t,spaceName:C,type:"notAnAdmin",integrationValue:H,primaryAction:()=>{T.Z.setState({...T.Z.state,open:!0})}}):K||R?g._(H,t.redirectUri)||E?n()(Me,{integrationValue:H,validIntegrationTemplateId:W,spaceName:C,spaceId:i.id,oauthParams:t,showApprovalWarning:K&&!R&&!E,selectedBlockIdsStore:F}):n()(U,{oauthParams:t,spaceName:C,type:"invalidRedirectUri",integrationValue:H}):n()(U,{oauthParams:t,spaceName:C,type:"integrationNotApproved",integrationValue:H,primaryAction:()=>{T.Z.setState({...T.Z.state,open:!0})}}):n()(U,{type:"invalidResponseType",oauthParams:t,spaceName:C,integrationValue:H}):n()(U,{type:"clientNotFound",oauthParams:t,spaceName:C}):n()(U,{type:"invalidClientId",oauthParams:t,spaceName:C})}},27386:(e,t,i)=>{i.d(t,{Z:()=>u,k:()=>c});var o=i(23174),n=i.n(o),a=(i(67294),i(83355)),r=i(34859),s=i(91754),l=i(61519),d=i(53336);function c(e){return e?18:60}class p extends a.Z{static renderDivider(){return n()(l.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:i,bannerText:o,controlRowPaddingTopBottom:a=16}=this.props,l=()=>e.isMobile?18:36;return this.props.disableScroller?n()("div",{style:{paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile)}},void 0,n()("div",{style:{paddingTop:l(),paddingBottom:l()}},void 0,t),i&&n()("div",{style:{paddingTop:a,paddingBottom:a,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`}},void 0,i)):n()("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.cardContentBackground}},void 0,o&&n()(s.Z,{styleKey:s.v.Blue,isMobile:!1},void 0,o),n()(d.Z,{type:r.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile),paddingTop:o?15:l(),paddingBottom:o?22:l()}},void 0,t),i&&n()("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile),paddingTop:a,paddingBottom:a,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`}},void 0,i))}}p.displayName="SettingBox";const u=p},14720:(e,t,i)=>{i.d(t,{Aj:()=>s,Rv:()=>a,Ry:()=>d,p7:()=>l,tn:()=>n,vs:()=>r});var o=i(77907);const n=(0,o.lazyComponent)(o.deps.sidebar,(e=>e.SidebarTeamBrowserContent)),a=(0,o.lazyComponent)(o.deps.sidebar,(e=>e.SidebarSwitcherMultiAccountPopup)),r=(0,o.lazyComponent)(o.deps.sidebar,(e=>e.SidebarFooter)),s=(0,o.lazyComponent)(o.deps.sidebar,(e=>e.SidebarSectionOnboardingHighlightPopup)),l=(0,o.lazyComponent)(o.deps.sidebar,(e=>e.TeamAddAppTemplateMenu)),d={LazyTeamAddAppTemplateMenu:{width:250,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}}},22709:(e,t,i)=>{i.d(t,{_S:()=>L,g6:()=>F,ZP:()=>R});var o=i(23174),n=i.n(o),a=(i(67294),i(83355)),r=i(49085),s=i(80503),l=i(5366),d=i(14720),c=i(50906),p=i(94507),u=i(65452),m=i(64921),g=i(31945),h=i(39849),v=i(92955),f=i(37240),b=i(82990),y=i(38755),S=i(56496),w=i(31278),M=i(14694),C=i(46783);class A extends a.Z{renderComponent(){return n()("div",{style:this.getPlaceholderPageStyle()},void 0,this.props.showIcon&&(0,C.w)({width:16,height:16,fill:this.theme.buttonHoveredBackground}),n()("div",{style:this.getPlaceholderTextWrapStyle()},void 0,n()("div",{style:A.getPlaceholderTextStyle(this.theme)})))}getPlaceholderPageStyle(){return{height:28,display:"flex",alignItems:"center",width:"100%",padding:this.props.showIcon?"0 15px":"0 0px"}}getPlaceholderTextWrapStyle(){return{flexGrow:1,marginLeft:this.props.showIcon?10:0,height:28,display:"flex",alignItems:"center"}}static getPlaceholderTextStyle(e){const t=Math.ceil(60),i=Math.floor(85),o=`${Math.floor(Math.random()*(i-t+1))+t}%`;return{height:4,background:e.buttonHoveredBackground,width:o}}}A.displayName="SidebarPlaceholderItem";const I=A;class k extends a.Z{willMountOrUpdate(){"store"===this.props.type&&this.props.spaceStore.getValue()}renderComponent(){const{device:e}=this.environment,{props:t}=this,{activeUserEmailAddress:i,isMobile:o,style:a,showExpand:r}=t,s="store"===t.type?(0,y.rn)(this.environment,t.spaceStore):t.spaceName;return n()(M.Z,{style:{overflow:"hidden",width:"100%",...o&&{fontSize:14,padding:0,marginRight:12},...!o&&{paddingLeft:14,paddingRight:14},...a||{}},left:s?this.renderRecordIcon(s,"store"===t.type?void 0:t.spaceIcon,o,"store"===t.type?t.spaceStore:void 0):this.renderPlaceholderRecordIcon(),disableMobileBorder:!0},void 0,!s&&this.renderPlaceholderTitle(),s&&n()("div",{style:{display:"flex",alignItems:"center",justifyContent:i?"space-between":"start"},className:"notranslate"},void 0,n()("div",{style:{display:"flex",flexDirection:"column",marginRight:6,marginTop:e.isAndroid?3:0,...k.truncateStyle}},void 0,n()("div",{style:{color:this.theme.regularTextColor,fontWeight:b.Z.fontWeight.medium,...k.truncateStyle}},void 0,s),n()("div",{style:{color:this.theme.mediumTextColor,fontSize:11,lineHeight:"12px",fontWeight:b.Z.fontWeight.regular,...k.truncateStyle}},void 0,i)),r&&n()("div",{style:{flexGrow:0,flexShrink:0,width:12,height:12,fill:this.theme.mediumIconColor}},void 0,(0,f.s)())))}renderRecordIcon(e,t,i,o){const a=o?(0,y.Wd)(this.environment,o):t?{icon:t,pointer:{table:"space",id:"undefined"}}:void 0,r=o?(0,y.rn)(this.environment,o):e;return n()(w.Z,{disabled:!0,icon:a,isEmptyPage:!1,title:r,size:i?24:22,style:{marginTop:1,color:this.theme.regularTextColor,fontWeight:b.Z.fontWeight.medium}})}renderPlaceholderRecordIcon(){return n()("div",{style:{opacity:.25}},void 0,n()(S.Z,{size:20,title:void 0}))}renderPlaceholderTitle(){return n()(I,{showIcon:!1})}}k.displayName="SidebarSpaceName",k.truncateStyle={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};const P=k;var x=i(29538),_=i(43250),N=i(80444),z=i(30278),T=i(85974),Z=i(76487),V=i(62213),B=i(17364);let L=function(e){return e[e.Regular=0]="Regular",e[e.DesktopMac=1]="DesktopMac",e[e.Mobile=2]="Mobile",e}({});class F extends a.Z{constructor(){super(...arguments),this.sidebarSwitcherIsHovered=r.default.createValue(!1),this.storeTypes={loginStore:T.Z,loginPermissionsStore:z.Z},this.height={[L.Regular]:s.Aj,[L.DesktopMac]:s.br,[L.Mobile]:"auto"},this.handleClick=()=>{V.Z.setState({...V.Z.state,open:!0}),c.air(this.environment),B.Z.getUserIds(this.environment).forEach((e=>{B.Z.getSpaceViewStores(this.environment,e).forEach((t=>{const i=t.getSpaceId();i&&(u.h({environment:this.environment,spaceId:i,userId:e}),p.I({environment:this.environment,spaceId:i,userId:e}))}))}))}}renderComponent(){const{device:e}=this.environment,{shouldShowUnexpandButton:t}=this.props,{currentSpaceStore:i,currentUserStore:o}=N.default.state,a=B.Z.getUserIds(this.environment);if(!i||!o)return;const r=a.length>1?o.getEmail():void 0,s=this.getUnreadCountForOtherSpaces(),l=Boolean(this.props.disabled),c=this.stores;return n()(g.ZP,{popupType:e.isMobile?g.Z4.SlideUp:g.Z4.Popup,buttonPopupStore:V.Z,renderOrigin:()=>n()(m.Z,{style:{...F.buttonStyle,height:this.height[this.props.format],marginBottom:r?e.isMobile?0:8:0,padding:0,...this.props.buttonStyle},mobileFeedback:e.isMobile,onClick:this.handleClick,disabled:l,className:_.rli,hovered:this.sidebarSwitcherIsHovered.state,ignoreLocalHoverState:!0,onMouseEnter:()=>this.sidebarSwitcherIsHovered.setState(!0),onMouseLeave:()=>this.sidebarSwitcherIsHovered.setState(!1)},void 0,n()(P,{isMobile:this.isMobile,spaceStore:i,activeUserEmailAddress:r,showExpand:!l,type:"store",style:{marginLeft:0}}),n()("div",{className:_.JiD,style:{display:"flex",alignItems:"center",height:"100%",marginLeft:"auto",marginRight:s?0:12}},void 0,t&&n()(x.V,{}),n()(v.Z,{type:"otherSpaces",color:h.Z.Color.Red,style:{marginLeft:6,marginRight:14}}))),originGap:0,disableMutationObserver:!0,forceInitialInbound:!0,style:e.isMobile?{}:{width:320,overflow:"hidden"},render:e=>n()(d.Rv,{parent:e,redirectURL:this.props.redirectURL,disableLoginLink:this.props.disableLoginLink,onSpaceClick:this.props.onSpaceClick,loginStore:c.loginStore,loginPermissionsStore:c.loginPermissionsStore})})}get isMobile(){return this.props.format===L.Mobile}getUnreadCountForOtherSpaces(){return Z.Z.getUnreadMentionsCountForOtherSpaces()}}F.displayName="SidebarSwitcherMultiAccount",F.Format=L,F.buttonStyle={display:"flex",alignItems:"center",minWidth:0,height:"100%",width:"100%"};const R=(0,l.injectIntl)(F)},30278:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(49085);class n extends o.default{getInitialState(){return{contacts:!1}}}const a=n},61248:(e,t,i)=>{i.d(t,{F:()=>a});var o=i(23174),n=i.n(o);i(67294);const a=(0,i(45238).I)("notificationUnread",{viewBox:"0 0 20 21.5",svg:n()("path",{d:"M0 14.521c0 1.67.146 3.057 1.143 4.053.996.996 2.402 1.153 4.062 1.153h7.588c1.67 0 3.076-.157 4.072-1.153s1.143-2.383 1.143-4.053v-6.65c-.43.147-.899.225-1.387.205-.068.02-.117.02-.185.03v6.68c0 1.015-.127 2.05-.723 2.646-.586.586-1.64.722-2.647.722H4.941c-1.005 0-2.06-.136-2.656-.722-.586-.596-.713-1.631-.713-2.647V6.768c0-1.026.127-2.08.713-2.666.596-.596 1.66-.723 2.686-.723h6.738c0-.068.01-.127.02-.186-.02-.488.058-.957.205-1.386H5.186c-1.641 0-3.047.156-4.043 1.152C.146 3.955 0 5.352 0 6.982Zm16.426-7.744c1.846 0 3.379-1.533 3.379-3.388C19.805 1.533 18.27 0 16.425 0a3.403 3.403 0 0 0-3.388 3.389 3.403 3.403 0 0 0 3.389 3.388Z"})})}}]);