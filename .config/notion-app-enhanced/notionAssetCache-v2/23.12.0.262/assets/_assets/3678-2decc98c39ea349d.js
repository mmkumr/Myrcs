"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3678],{65544:(e,a,n)=>{n.d(a,{SP:()=>v,W_:()=>g,l_:()=>m,nf:()=>b});var t=n(19234),r=n(31919),s=n(47425),i=n(27242),l=n(78291),o=n(88893),u=n(63423),d=n(62142),c=n(33493),p=n(25692),f=n(54642);async function g(e){const a=i.Z.state,n=l.default.state.data;if(!a.open||!n)return;const r=a.temporaryAddress;if(!(0,t.A)(r))return;i.Z.update((e=>({...e,calculatingTax:!0})));const{planAmount:s,promoInfo:u,accountBalance:d}=(0,o.uN)({promo:a.appliedPromo,currencyCode:c.Z.selectedCurrencyCode,data:n,addOnFeature:a.addOnFeature,onlyShowAddOn:a.onlyShowAddOn,subscriptionTier:a.subscriptionTier,taxAmount:a.taxAmount,calculatingTax:a.calculatingTax,billingInterval:a.temporaryBillingInterval??"year",coupon:a.coupon}),p=Math.max(0,s-u.amount+d),g=await f.calculateTax(e,{address:r,price:p,vatId:a.vatApplicable?a.temporaryVatCode:void 0,customerId:"subscribed_admin"===n.type?n.customerData.stripe.customerId:void 0});if("failed"===g.type)i.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=g.data;e.valid?i.Z.update((a=>({...a,taxAmount:e.taxAmount,calculatingTax:!1,taxCalculationError:void 0}))):i.Z.update((a=>({...a,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function m(e){var a;const n=d.Z.state,s=l.default.state.data;if(!n.open||!s)return;const i=n.temporaryAddress;if(!(0,t.A)(i))return;d.Z.update((e=>({...e,calculatingTax:!0})));const o=(null===(a=n.totalUpgradeCost)||void 0===a?void 0:a.amount)||0,u=await f.calculateTax(e,{address:i,price:o,vatId:n.vatApplicable?n.temporaryVatCode:void 0,customerId:"subscribed_admin"===s.type?s.customerData.stripe.customerId:void 0});if("failed"===u.type)d.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=u.data;e.valid?d.Z.update((a=>({...a,taxAmount:r.n.fromValue({amount:e.taxAmount,currencyCode:c.Z.selectedCurrencyCode}),calculatingTax:!1,taxCalculationError:void 0}))):d.Z.update((a=>({...a,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function b(e){const{environment:a,priceForTaxCalculation:n,address:t,customerId:r,vatId:s}=e,i=u.Z.state,l=await f.calculateTax(a,{address:t,customerId:r,vatId:s,price:n});if("failed"===l.type);else{const e=l.data;e.valid&&i.open&&u.Z.update((a=>({...a,tax:Math.max(0,e.taxAmount)})))}}async function v(e){var a;const n=p.Z.state,r=l.default.state.data;if(!n.open||!r)return;if("subscribed_admin"!==r.type&&"unsubscribed_admin"!==r.type)return;const i=null===(a=r.customerData)||void 0===a?void 0:a.stripe;if(!i)return;const u=i.address;if(!u||!(0,t.A)(u))return;p.Z.update((e=>({...e,calculatingTax:!0})));const d=n.temporarySubscriptionTier??n.subscriptionTier,g=(0,s.QM)(d)&&n.addOnFeature?"month":"year",m=n.temporaryBillingInterval??n.billingInterval??g,b=!(0,s.QM)(d)&&Boolean(n.addOnFeature),{payAmount:v}=(0,o.uN)({promo:void 0,currencyCode:c.Z.selectedCurrencyCode,data:r,addOnFeature:n.addOnFeature,onlyShowAddOn:b,subscriptionTier:d,taxAmount:n.taxAmount,calculatingTax:n.calculatingTax,billingInterval:m,coupon:n.coupon}),h=await f.calculateTax(e,{address:u,price:v.amount,vatId:i.vatId,customerId:i.customerId});if("failed"===h.type)return void p.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1,taxCalculationError:h.error})));const y=h.data;y.valid?p.Z.update((e=>({...e,taxAmount:y.taxAmount,calculatingTax:!1}))):p.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})))}},1865:(e,a,n)=>{n.d(a,{y:()=>A});n(67294);var t=n(94919),r=n(47425),s=n(97880),i=n(31412),l=n(47307),o=n(33929),u=n(52533),d=n(80444),c=n(92083),p=n(78291),f=n(22616),g=n(34583),m=n(64891),b=n(70060),v=n(88893),h=n(35057),y=n(33493),M=n(39343),P=n(50906),w=n(85893);const A=async function(e,a){var n;P.sA6(e,{from:a.from,for_subscription_tier:a.for,addOnFeature:a.addOnFeature});if((0,h.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(a.from)&&!a.addOnFeature&&(0,b.XA)())return void c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});function A(){a.dontOpenPlansOnCancel||c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0})}if(!a.addOnFeature&&(0,r.QM)(a.for))return;const x=(0,u.S$)({environment:e})&&"personal"===a.for;if(e.device.isMobileNative){if("ai"===a.addOnFeature){const a=(0,u.Y2)({environment:e})?(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void l.showErrorMessage(a)}if(!x)return}const I=d.default.state.currentSpaceStore;if(!I)return;if(!I.canAdmin())return;await g.bi(e);const S=p.default.state.data;if(!S)return;if("unsubscribed_admin"!==S.type&&"subscribed_admin"!==S.type)return void A();if(v.Q6(S)){const e=(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void l.showErrorMessage(e)}if(x)return void(e.mobileNative&&I.id&&e.mobileNative.openUpgradeModal(I.id));if("revenueCat"===(null===(n=S.customerData)||void 0===n?void 0:n.activeSubscriptionPlatform)){const e=(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void l.showErrorMessage(e)}const T=v.XX(S);if(a.addOnFeature&&(0,M.Fk)(T)){const e=(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:a.addOnFeature}});l.showErrorMessage(e)}else if(T&&v.MM(S)){if(a.addOnFeature)return void m.af({environment:e,from:a.from,view:"add_ons",addOnFeature:a.addOnFeature,billingInterval:T.interval,pageSection:a.pageSection});f.Z({environment:e,spaceId:I.id});const{status:n,prices:u}=y.Z.state;if("ready"!==n)return;const{interval:d}=T,c=u.find((e=>e.product===a.for&&e.billingInterval===d&&e.currencyCode===T.currencyCode));if(void 0===c)return;const p=function(e){let{price:a,isSubscribed:n}=e;if(a.isAddOn())return null;const l=a.product;if((0,r.QM)(l)||(0,r.iJ)(l))return null;const u={tier:l,price:(0,w.jsx)(t.W,{cost:a.getMonthlyUnitCost(),trailingZeroDisplay:"stripIfInteger",intl:o.default.intl}),br:(0,w.jsx)("br",{}),isSubscribed:n};if((0,h.Aw)())switch(l){case"personal":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.personalMessage.fromSinglePlayerPlus",defaultMessage:"You are about to subscribe to Notion’s Personal Plan for {price} per member per month.{br}You will lose your current discounted price, and will be charged a prorated amount, minus any account balance.",values:u});case"plus":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.plusMessage.fromSinglePlayerPlus",defaultMessage:"You are about to subscribe to Notion’s Plus Plan with no member limit for {price} per member per month.{br}You will lose your current discounted price, and will be charged a prorated amount, minus any account balance.",values:u});case"business":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.businessMessage.fromSinglePlayerPlus",defaultMessage:"You are about to subscribe to Notion’s Business Plan for {price} per member per month.{br}You will lose your current discounted price, and will be charged a prorated amount, minus any account balance.",values:u});case"enterprise":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.enterpriseMessage.fromSinglePlayerPlus",defaultMessage:"You are about to subscribe to Notion’s Enterprise Plan for {price} per member per month.{br}You will lose your current discounted price, and will be charged a prorated amount, minus any account balance.",values:u});default:return(0,s.t1)(l)}switch(l){case"personal":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.personalMessage",defaultMessage:"You are about to subscribe to Notion’s Personal Plan for {price} per member per month.{br}{isSubscribed, select, true {You will be charged a prorated amount, minus any account balance.} other {}}",values:u});case"plus":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.plusMessage",defaultMessage:"You are about to subscribe to Notion’s Plus Plan for {price} per member per month.{br}{isSubscribed, select, true {You will be charged a prorated amount, minus any account balance.} other {}}",values:u});case"business":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.businessMessage",defaultMessage:"You are about to subscribe to Notion’s Business Plan for {price} per member per month.{br}{isSubscribed, select, true {You will be charged a prorated amount, minus any account balance.} other {}}",values:u});case"enterprise":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.enterpriseMessage",defaultMessage:"You are about to subscribe to Notion’s Enterprise Plan for {price} per member per month.{br}{isSubscribed, select, true {You will be charged a prorated amount, minus any account balance.} other {}}",values:u});default:return(0,s.t1)(l)}}({price:c,isSubscribed:void 0===T.canceledAt});if(!(await l.confirmUserAction({message:p,acceptLabel:(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.acceptLabel",defaultMessage:"Upgrade to {plan, select, personal {Personal} team {Plus} plus {Plus} business {Business} other {Enterprise}}",values:{plan:a.for}})})))return void A();const b=null==c?void 0:c.externalId;await g.Mg({environment:e,spaceStore:I,plan:b,from:"upsell_modal"})}else{const n=(0,b.px)(e,a.for)?"ai_fifty_percent":void 0;g.I0(e,{subscriptionTier:a.for,from:a.from,addOnFeature:a.addOnFeature,coupon:n,isTrial:a.isTrial})}}},64891:(e,a,n)=>{n.d(a,{LZ:()=>T,Mg:()=>I,OT:()=>x,Zo:()=>O,af:()=>P,bX:()=>A,cM:()=>w,y5:()=>S});var t=n(4615),r=n(3791),s=n(97880),i=n(50906),l=n(54642),o=n(47307),u=n(92625),d=n(91376),c=n(64964),p=n(65544),f=n(80444),g=n(40670),m=n(35057),b=n(87598),v=n(33493),h=n(25692),y=n(22616),M=n(34583);function P(e){const{environment:a,from:n,view:r,temporarySubscriptionTier:s,temporaryBillingInterval:l,billingInterval:o,addOnFeature:u,pageSection:d,onSuccess:c}=e,f=(0,t.ZP)();i.YTO(a,{from:n,pageSection:d,view:r,modal_id:f,currency_code:v.Z.selectedCurrencyCode}),h.Z.setState({open:!0,modalId:f,view:r,subscriptionTier:(0,m.zt)(),temporarySubscriptionTier:s,billingInterval:o,temporaryBillingInterval:l,calculatingTax:!1,isExpandedView:!1,addOnFeature:u,onSuccess:c}),p.SP(a)}function w(e){const a=h.Z.state;a.open&&(i.q7Y(e,{state:a}),h.Z.setState({open:!1}))}function A(e){const a=h.Z.state;a.open&&(i.y$F(e,{state:a}),h.Z.setState({...a,isExpandedView:!0}))}function x(e){const a=h.Z.state;a.open&&(i.k1K(e,{state:a}),h.Z.setState({...a,isExpandedView:!1}))}async function I(e,a){const n=h.Z.state;if(!n.open)return;i.ndA(e,{state:n});const{view:t,subscriptionTier:l,temporarySubscriptionTier:o,temporaryBillingInterval:u,billingInterval:d,addOnFeature:p,onSuccess:m}=n;let b;switch(t){case"add_ons":if(await async function(e){const{environment:a,addOnFeature:n,billingInterval:t,inAppOffer:s}=e,i=f.default.state.currentSpaceStore;if(!i||!n||!t)return;const l=(0,r.aG)({addOnFeature:n,addOnTier:"base",addOnBillingInterval:t,addOnPricingModel:"standard",addOnPricingVariant:"retail",currencyCode:v.Z.selectedCurrencyCode,isCancellation:!1});await M.Mg({environment:a,from:"space_settings-billing_tab",spaceStore:i,addOns:l,inAppOffer:s})}({environment:e,addOnFeature:p,billingInterval:d,inAppOffer:a}),w(e),p){const e=g.mV({type:"purchaseAddOn",addOnFeature:p});e&&c.oV(e)}break;case"billing_interval":if(!u)return;u!==d&&await async function(e){const{environment:a,tier:n,newInterval:t}=e,r=f.default.state.currentSpaceStore,{prices:s,selectedCurrencyCode:i}=v.Z,l=s.find((e=>e.product===n&&e.billingInterval===t&&e.currencyCode===i));if(!r||!l)return;await M.Mg({environment:a,from:"space_settings-billing_tab",spaceStore:r,plan:l.externalId})}({environment:e,tier:l,newInterval:u}),w(e),b=g.mV({type:"billingInterval",billingInterval:u}),b&&c.oV(b);break;case"plans":if(!o||!d)return;await async function(e){const{environment:a,tier:n,billingInterval:t}=e,r=f.default.state.currentSpaceStore,{prices:s,selectedCurrencyCode:i}=v.Z,l=s.find((e=>e.product===n&&e.billingInterval===t&&e.currencyCode===i));if(!r||!l)return;await M.Mg({environment:a,from:"space_settings-plans_tab",spaceStore:r,plan:l.externalId})}({environment:e,tier:o,billingInterval:d}),w(e),b=g.mV({type:"upgradePlan",newTier:o}),b&&c.oV(b);break;case"default":w(e);break;default:(0,s.t1)(t)}null==m||m()}async function S(e){const{environment:a,customerData:n}=e;if(n.willCancelAt){const e=f.default.state.currentSpaceStore;if(e)return await M.Mg({environment:a,from:"space_settings-billing_tab",spaceStore:e}),void c.oV({label:(0,g.UW)()})}const t=(0,g.dY)(n);if(!t)return o.showErrorMessage((0,g.JC)());if(!(0,g.bM)(n))return o.showErrorMessage((0,g.iS)());const r=await l.releaseSubscriptionSchedule(a,{id:t});if("success"===r.type&&r.data.subscriptionSchedule)return c.oV({label:(0,g.UW)()}),await M.bi(a);o.showErrorMessage((0,g.js)())}async function T(e){const{environment:a,customerData:n}=e,t=(0,r.Xi)(n.addOns),s=("interval"in n?n.interval:void 0)||t;if(!s)return;const i=f.default.state.currentSpaceStore;if(!i)return;await y.Z({environment:a,spaceId:i.id});const{prices:l,selectedCurrencyCode:u}=v.Z;let d,c;if((0,r.de)(n.addOns)&&(d=(0,r.aG)({addOnFeature:"ai",addOnTier:"base",addOnBillingInterval:s,addOnPricingModel:"standard",addOnPricingVariant:"retail",currencyCode:u,isCancellation:!1})),!(0,m.QM)()){const e=(0,m.zt)(),a=l.find((a=>a.product===e&&a.billingInterval===s&&a.currencyCode===u));c=null==a?void 0:a.externalId}if(!c&&!d)return o.showErrorMessage((0,g.js)());await M.Mg({environment:a,spaceStore:i,from:"space_settings-billing_tab",addOns:d,plan:c})}async function O(e){const a=f.default.state.currentSpaceStore;a&&(u.j({message:b.z.cancellingTrial}),await M.EO({environment:e,spaceStore:a,planType:a.getPlanType()??"personal",from:"space_settings-plans_tab"}),u.x(),d.r$({currentTab:"billing"}))}},40670:(e,a,n)=>{n.d(a,{A0:()=>V,JC:()=>w,Tg:()=>Y,UW:()=>A,Z_:()=>k,bM:()=>S,dA:()=>I,dY:()=>x,iS:()=>P,js:()=>M,mV:()=>B,n8:()=>j,rO:()=>D});n(57658),n(67294);var t=n(13991),r=n(7057),s=n(36591),i=n(3791),l=n(47425),o=n(97880),u=n(31412),d=n(33929),c=n(88893),p=n(35057),f=n(85893);const g=(0,u.defineMessages)({cancellationError:{id:"midtermSubscriptionHelpers.cancellationFailed",defaultMessage:"There was an error attempting to cancel your pending changes. Please try again."},unableToCancelError:{id:"midtermSubscriptionHelpers.unableToCancel",defaultMessage:"We cannot cancel your scheduled changes right now. Please contact support for more help."},cancellationSuccess:{id:"midtermSubscriptionHelpers.cancellationSucceeded",defaultMessage:"Pending changes have been canceled"},invalidSubscriptionId:{id:"midtermSubscriptionHelpers.invalidSubscriptionId",defaultMessage:"Unable to cancel your pending changes. Something was wrong with your pending subscription changes."}});function m(e){return(0,l.QM)(e)?"free":(0,l.iJ)(e)?"education":(0,l.Aw)(e)?"singlePlayerPlus":(0,l.eR)(e)?"plus":(0,l.NG)(e)?"business":(0,c.gG)(e)?"enterprise":"legacy"}const b=(0,u.defineMessages)({personalFreePlan:{defaultMessage:"Personal Plan",id:"personalFreePlan.title"},personalFree:{defaultMessage:"Personal",id:"personalFree.title"},teamTrialPlan:{defaultMessage:"Team Plan (Trial)",id:"teamTrialPlan.title"},freePlan:{defaultMessage:"Free Plan",id:"freePlan.title"},free:{defaultMessage:"Free",id:"free.title"},personalPlan:{defaultMessage:"Personal Pro Plan",id:"personalPlan.label"},personal:{defaultMessage:"Personal Pro",id:"personal.label"},singlePlayerPlusPlan:{defaultMessage:"Plus Plan with a 1-member limit",id:"singlePlayerPlusPlan.title"},educationPlan:{defaultMessage:"Personal Pro Plan (Education)",id:"personalEducationPlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"educationPlusPlan.title"},teamPlan:{defaultMessage:"Team Plan",id:"teamPlan.title"},team:{defaultMessage:"Team",id:"team.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},plus:{defaultMessage:"Plus",id:"plus.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},business:{id:"business.title",defaultMessage:"Business"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"enterprisePlan.label"},enterprise:{defaultMessage:"Enterprise",id:"enterprise.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"legacyPlan.label"}}),v={free:{planTitle:b.freePlan},singlePlayerPlus:{planTitle:b.plusPlan},education:{planTitle:b.educationPlusPlan},plus:{planTitle:b.plusPlan},business:{planTitle:b.businessPlan},enterprise:{planTitle:b.enterprisePlan},legacy:{planTitle:b.legacyPlan}},h=(0,u.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"notionAI.title"},removeAI:{defaultMessage:"Remove AI",id:"notionAI.remove.title"}}),y=(0,u.defineMessages)({month:{defaultMessage:"Monthly billing",id:"billingInterval.monthly"},year:{defaultMessage:"Annual billing",id:"billingInterval.annual"}});function M(){return d.default.formatMessage(g.cancellationError)}function P(){return d.default.formatMessage(g.unableToCancelError)}function w(){return d.default.formatMessage(g.invalidSubscriptionId)}function A(){return d.default.formatMessage(g.cancellationSuccess)}function x(e){var a;return null===(a=e.schedule)||void 0===a?void 0:a.id}function I(e){return e.willCancelAt}function S(e){var a;const n=null===(a=e.schedule)||void 0===a?void 0:a.status;return"not_started"===n||"active"===n}const T={personal_monthly_5:"personal",personal_yearly_48:"personal",team_monthly_10:"plus",team_yearly_96:"plus",business_monthly:"business",business_yearly:"business",enterprise_monthly_25:"enterprise",enterprise_yearly_240:"enterprise"};function O(e){for(const a of e)if(a.plan in T)return T[a.plan]}function C(e){for(const n of e)try{const e=(0,i.PG)(n.plan);if(e)return e}catch(a){}}function F(e){for(const a of e)return a.billingInterval}function _(e){var a;if(e.willCancelAt)return{oldTier:p.zt(),newTier:"free",oldAddOn:null===(a=e.addOns[0])||void 0===a?void 0:a.feature,newAddOn:void 0,oldInterval:e.interval,newInterval:void 0,phaseOneEndDate:e.willCancelAt,phaseTwoEndDate:NaN};const n=e.schedule;if(!n)return;const t=n.phases;if(!t)return;const r=t[0],s=t[1];if(!r)return;const i=[],l=[];for(const o of r.items)i.push({billingInterval:o.billing_interval,plan:o.plan});if(s)for(const o of s.items)l.push({billingInterval:o.billing_interval,plan:o.plan});return{oldTier:p.zt(),newTier:O(l),oldAddOn:C(i),newAddOn:C(l),oldInterval:F(i),newInterval:F(l),phaseOneEndDate:1e3*r.end_date,phaseTwoEndDate:1e3*(null==s?void 0:s.end_date)}}function E(e,a){const n=m(e),t=d.default.formatMessage(v[n].planTitle);if(!a)return"";const r=m(a);return`${t} → ${d.default.formatMessage(v[r].planTitle)}`}function Z(e,a){return`${d.default.formatMessage(e?h.notionAI:h.removeAI)} → ${d.default.formatMessage(a?h.notionAI:h.removeAI)}`}function j(e){const a=[];return p.QM()||a.push(E(p.zt(),"free")),(0,i.de)(e.addOns)&&a.push(Z("ai",void 0)),{cancelledChanges:a}}function Y(e){const a=_(e),n=[];if(!a)return{scheduledChanges:n,periodEndDate:0};const{newTier:t,oldTier:r,oldAddOn:s,newAddOn:i,oldInterval:l,newInterval:o,phaseOneEndDate:u}=a;return r!==t&&n.push(E(r,t)),s!==i&&n.push(Z(s,i)),l!==o&&n.push(function(e,a){return e&&a?`${d.default.formatMessage("month"===e?y.month:y.year)} → ${d.default.formatMessage("month"===a?y.month:y.year)}`:""}(l,o)),{scheduledChanges:n,periodEndDate:u}}function k(e,a,n){return"billing_interval"===e&&"year"===a&&"month"===n}function D(e,a,n){return"plans"===e||"add_ons"===e||"billing_interval"===e&&"month"===a&&"year"===n}function V(e){if(e.willCancelAt)return!0;const a=_(e),{oldAddOn:n,newAddOn:t}=a||{};return"ai"===n&&!t}function N(e){return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,s.e)({width:12}),e.children]})}function B(e){const{type:a}=e;switch(a){case"upgradePlan":return function(e){const{newTier:a}=e;switch(a){case"plus":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.upgradePlan.plus",defaultMessage:"You have successfully upgraded to the Plus plan"})})};case"business":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.upgradePlan.business",defaultMessage:"You have successfully upgraded to the Business plan"})})};case"enterprise":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.upgradePlan.enterprise",defaultMessage:"You have successfully upgraded to the Enterprise plan"})})};case"student":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.upgradePlan.student",defaultMessage:"You have successfully upgraded to the Student plan"})})};case"free":case"personal":case"personal_free":case"team_free":return;default:(0,o.t1)(a)}}(e);case"downgradePlan":return function(e){const{newTier:a}=e,n=(0,r.Yx)(e.effectiveDateEpochMs,"medium",t.SP);switch(a){case"plus":return{label:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.downgradePlan.plus",defaultMessage:"Downgrade to Plus plan will be effective {date}.",values:{date:n}})};case"business":return{label:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.downgradePlan.business",defaultMessage:"Downgrade to Business plan will be effective {date}.",values:{date:n}})};case"free":return{label:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.downgradePlan.free",defaultMessage:"Downgrade to Free plan will be effective {date}.",values:{date:n}})};case"enterprise":case"personal":case"personal_free":case"student":case"team_free":return;default:(0,o.t1)(a)}}(e);case"purchaseAddOn":return function(e){const{addOnFeature:a}=e;switch(a){case"ai":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.purchaseAddOn.ai",defaultMessage:"You have successfully added Notion AI"})})};default:(0,o.t1)(a)}}(e);case"removeAddOn":return function(e){const{addOnFeature:a}=e;switch(a){case"ai":return{label:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.removeAddOn.ai",defaultMessage:"AI will be removed effective {effectiveDate}",values:{effectiveDate:(0,r.Yx)(e.effectiveDateEpochMs,"medium",t.SP)}})};default:(0,o.t1)(a)}}(e);case"billingInterval":return function(e){const{billingInterval:a,effectiveDateEpochMs:n}=e,s=n?(0,r.Yx)(n,"medium",t.SP):void 0;return s?{label:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.billingInterval.future",defaultMessage:"{billingInterval, select, year {Yearly} other {Monthly}} billling will be effective {date}",values:{billingInterval:a,date:s}})}:{label:(0,f.jsx)(N,{children:(0,f.jsx)(u.FormattedMessage,{id:"midtermChangeHelpers.snackbar.billingInterval.success",defaultMessage:"You have successfully changed to {billingInterval, select, year {yearly} other {monthly}} billing",values:{billingInterval:a}})})}}(e);default:(0,o.t1)(a)}}},87598:(e,a,n)=>{n.d(a,{z:()=>t});const t=(0,n(31412).defineMessages)({cancellingTrial:{defaultMessage:"Cancelling your trial.",id:"cancelTrial.error.message"},cancellationConfirmationMessage:{defaultMessage:"Are you sure you want to cancel your trial?",id:"cancelTrial.confirmation.message"},yes:{defaultMessage:"Yes, cancel my trial",id:"cancelTrial.yes.confirmation.message"}})},63423:(e,a,n)=>{n.d(a,{Z:()=>s});var t=n(49085);class r extends t.default{getInitialState(){return{open:!1}}}const s=new r},25692:(e,a,n)=>{n.d(a,{Z:()=>s});var t=n(49085);class r extends t.default{getInitialState(){return{open:!1}}}const s=new r},39343:(e,a,n)=>{n.d(a,{Fk:()=>i,nx:()=>l});var t=n(30120),r=n(13991),s=n(7057);function i(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=t.ou.now().toSeconds()}function l(e){const a=function(e){if(!i(e))return;const a=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=t.ou.now().toSeconds()&&e.periodEnd<a?e.periodEnd:a}(e);return a?(0,s.Yx)(a,"long",r.SP):void 0}},19234:(e,a,n)=>{n.d(a,{A:()=>s});n(72126);const t=/^\d{5}(-\d{4})?$/,r=/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ] ?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i;function s(e){if(!e.country)return!1;switch(e.country){case"US":return t.test(e.zipCode);case"CA":return r.test(e.zipCode);default:return!0}}},94919:(e,a,n)=>{n.d(a,{W:()=>s});n(67294);var t=n(31919),r=n(85893);function s(e){const{cost:a,intl:n}=e,s=e.trailingZeroDisplay??"auto",i=e.currencySign??"accounting",l=t.n.fromValue(a);let o=n.formatNumber(l.amount/Math.pow(10,l.currencyValue.minorUnitDigits),{style:"currency",currency:l.currencyCode,currencyDisplay:"symbol",currencySign:i});return"stripIfInteger"===s&&(o=o.replace(new RegExp(`[.,]0{${l.currencyValue.minorUnitDigits}}(\\s+.*)?$`),"$1")),(0,r.jsx)(r.Fragment,{children:o})}}}]);