(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5906],{78519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initialize:()=>o});var i=n(80444),s=n(54642);async function o(e,t){if(await i.default.waitUntilRendered(),e.currentUser.isLoggedIn()&&!Boolean(t.fromPageRefresh)){const{CsatMilestoneStore:t}=e,n=await s.getCsatMilestones(e,{});"success"===n.type&&t.setState({data:n.data})}}},16091:(e,t,n)=>{"use strict";n.d(t,{RD:()=>j,gc:()=>T,gl:()=>I,u7:()=>M});var i=n(67294),s=n(36769),o=n(480),r=n(86628),a=n(41432),d=n(31412),l=n(39699),c=n(37181),u=n(81415),p=(n(95477),n(19124)),h=n(68056),m=n(89086),g=n(28685),v=n(80444),f=n(77080),b=n(83212),S=n(26350),y=n(24666),w=n(41752),k=n(89626),x=n(85893);const C=(0,d.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Get instant answers to your questions"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"Ask a question about anything in your workspace. Notion AI will search across your pages and generate an answer."}});function M(){window.__c={n:"SpaceForAiOnboardingTooltip"};const e=(0,o.O7)(),t=function(){const e=(0,o.O7)(),t=(0,r.VK)((()=>{const t=v.default.state.mainEditorCurrentBlockStore;return t&&b.Z.getMode(e,t)}),[e]);return(0,r.VK)((()=>{if(e.device.isMobile)return;if(!f.default.checkGate("space_for_ai_tooltip_enabled"))return;const{currentUserSettingsStore:n,inAppCalloutStore:i}=v.default.state;if(!i.canShow("ai_onboarding_tooltip"))return;const s=null==n?void 0:n.getSettings();if(!s)return;if(s.signup_time&&s.signup_time>16770636e5)return;if("space_for_ai"!==(0,k.sy)())return;if(!(0,p.GD)(t))return;const o=y.default.state;if("editing"===o.mode){const e=(0,h.QY)(o.multiSelection);if(e&&(0,m.wd)(e.selection)){const t=e.store,n=g.E.findEditableWithStore(t);if(n){const e="block"===t.pointer.table?S.G.createChildStore(t,t.pointer):void 0,i=e&&e.getType(),s=Boolean(i&&(0,a.hD)(i)),o=t.getValue();if(s&&!o)return n}}}}),[e,t])}();return t?(0,x.jsx)(u.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,x.jsx)(d.FormattedMessage,{...C.spaceForAiHeader}),content:(0,x.jsx)(d.FormattedMessage,{...C.spaceForAiContent}),onCloseClick:()=>(0,k.h1)(e)}):null}function j(e){window.__c={n:"AskAIAnythingOnboardingTooltip"};const{originRef:t,openState:n}=e,i=(0,o.O7)(),s=(0,r.VK)((()=>(0,k.sy)()),[]);if(i.device.isMobile)return null;return"ask_ai_anything"===s&&"initialPrompt"===n.stage?(0,x.jsx)(u.U,{origin:t,placementToOrigin:"top",header:(0,x.jsx)(d.FormattedMessage,{...C.askAiAnythingHeader}),content:(0,x.jsx)(d.FormattedMessage,{...C.askAiAnythingContent}),onCloseClick:()=>(0,k.h1)(i)}):null}function I(e){window.__c={n:"RefineAIResponseOnboardingTooltip"};const{originRef:t,openState:n,isInputEmpty:i}=e,s=(0,o.O7)(),a=(0,r.VK)((()=>(0,k.sy)()),[]);if(s.device.isMobile)return null;const l="refine_ai_response"===a&&"results"===n.stage&&!n.loading&&"cursor"===n.context.type&&i;return(0,x.jsx)(u.U,{origin:l?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,x.jsx)(d.FormattedMessage,{...C.refineAiResponseHeader}),content:(0,x.jsx)(d.FormattedMessage,{...C.refineAiResponseContent}),onCloseClick:()=>(0,k.h1)(s)})}function T(e){window.__c={n:"ShowAssistantLocationTooltip"};const{origin:t}=e,n=(0,o.O7)(),s=(0,i.useCallback)((()=>{const{currentUserSettingsStore:e}=v.default.state;e&&(0,w.C)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e})}),[n]);return(0,x.jsx)(u.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,x.jsx)(d.FormattedMessage,{...C.showAssistantLocationHeader}),content:(0,x.jsx)(d.FormattedMessage,{...C.showAssistantLocationContent}),onCloseClick:s})}(0,s.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=v.default.state;t&&l.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{c.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},77207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});n(67294);var i=n(480),s=n(86628),o=n(55367),r=n(80796),a=n(69784),d=n(85893);const l=function(e){window.__c={n:"CursorListener"};const t=(0,i.Fy)(),n=(0,s.VK)((()=>({initiator:r.Z.state.initiator,isDragging:o.ZP.state.isDragging})),[]),l=(0,s.VK)((()=>({active:a.Z.state.isActive,moved:!!a.Z.state.isActive&&a.Z.state.moved})),[]),c=l.moved?"default":n.isDragging?"-webkit-grabbing":"text";let u="notion-cursor-listener";return"-webkit-grabbing"===c&&(u+=" notion-disable-local-cursor"),t.isIOS&&("touch"===n.initiator||n.isDragging||l.active?document.body.classList.add("notion-disable-webkit-user-select"):document.body.classList.remove("notion-disable-webkit-user-select")),(0,d.jsx)("div",{style:{...e.style,cursor:c},className:u,children:e.children})}},49273:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ja});var i=n(67294),s=n(34958),o=n(77907),r=n(83355),a=n(13991),d=n(79946),l=n(49271),c=n(8848),u=n(25278),p=n(71644),h=n(99405),m=n(89101),g=n(29369),v=n(32739),f=n(12139),b=n(31412),S=n(50906),y=n(47839),w=n(32603),k=n(91376),x=n(75018),C=n(73966),M=n(70782),j=n(39634),I=n(37181),T=n(95477),_=n(80444),A=n(26350);const P=(0,o.lazyComponent)(o.deps.StudentGroupSignup,(e=>e.default));var L=n(480),U=n(86628),E=n(24405),Z=n(59054),R=n(49204),B=n(82990),N=n(42922),V=n(61519),O=n(63296),D=n(64369),z=n(74016),F=n(85893);const W=function(e){window.__c={n:"TeamInviteLinkJoinPage"};const{teamStore:t}=e,n=(0,L.O7)(),{teamName:i}=(0,U.VK)((()=>({teamName:t.getName()})),[t]),s=(0,E.yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:B.Z.fontWeight.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:B.Z.fontWeight.semibold,marginLeft:10}})),[]);return(0,F.jsxs)("div",{style:s.container,children:[(0,F.jsx)(z.p,{store:t,disabled:!0,size:55}),(0,F.jsx)("div",{style:s.title,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.page.title",defaultMessage:"You've been invited to join {teamName}",values:{teamName:i}})}),(0,F.jsx)("div",{style:s.subtitle,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.page.subtitle",defaultMessage:"You can access the content in the teamspace if you join the teamspace."})}),(0,F.jsxs)("div",{style:s.buttonContainer,children:[(0,F.jsx)(N.Z,{isLarge:!0,onClick:async()=>{const e=n.currentUser.id;if(!e)return;const i=[{type:"member",entity_type:"user",user_id:e}];await R.um({environment:n,userId:e,teamStore:t,user:i}),S.Phj(n,{store:t,selection:"yes"})},children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.joinTeam.label",defaultMessage:"Join teamspace"})}),(0,F.jsx)(O.Z,{isLarge:!0,style:s.rightButton,onClick:async()=>{S.Phj(n,{store:t,selection:"no"}),await R.Id({environment:n})},children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,F.jsx)(V.Z,{size:48,innerStyle:s.divider}),(0,F.jsx)(D.Z,{isSmall:!0,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})};var q=n(14889);function H(e){window.__c={n:"TeamInviteLinkRequestPageContent"};const{teamStore:t,teamName:n,onRequestClick:i}=e,s=(0,L.O7)(),o=(0,E.yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:B.Z.fontWeight.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:B.Z.fontWeight.semibold,marginLeft:10}})),[]);return(0,F.jsxs)("div",{style:o.container,children:[(0,F.jsx)(z.p,{store:t,disabled:!0,size:55}),(0,F.jsx)("div",{style:o.title,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.title",defaultMessage:"Request access to {teamName}",values:{teamName:n??K()}})}),(0,F.jsx)("div",{style:o.subtitle,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.subtitle",defaultMessage:"You can access this teamspace if a teamspace owner approves your request."})}),(0,F.jsxs)("div",{style:o.buttonContainer,children:[(0,F.jsx)(N.Z,{isLarge:!0,onClick:i,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.label",defaultMessage:"Request access"})}),(0,F.jsx)(O.Z,{isLarge:!0,style:o.rightButton,onClick:async()=>{await R.Id({environment:s})},children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,F.jsx)(V.Z,{size:48,innerStyle:o.divider}),(0,F.jsx)(D.Z,{isSmall:!0,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})}function K(){return(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.privateTeamspace.label",defaultMessage:"Private Teamspace"})}const G=function(e){window.__c={n:"TeamInviteLinkRequestPage"};const{teamStore:t}=e,[n,s]=(0,i.useState)(!1),{teamName:o}=(0,U.VK)((()=>({teamName:t.getName()})),[t]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(H,{teamStore:t,teamName:o,onRequestClick:()=>s(!0)}),(0,F.jsx)(q.Z,{teamStore:t,teamName:o??K(),teamId:t.id,isModalOpen:n,onDismiss:()=>s(!1)})]})};function $(e){const{teamAccessLevel:t,teamStore:n}=e;switch(t){case"open":return(0,F.jsx)(W,{teamStore:n});case"closed":case"private":return(0,F.jsx)(G,{teamStore:n})}}const Q=function(e){window.__c={n:"TeamInviteLinkPage"};const{teamId:t}=e,n=(0,L.O7)(),{teamAccessLevel:s,teamStore:r}=(0,U.VK)((()=>{const e=new A.zX(n,{table:g.e0,id:t});return{teamAccessLevel:e.getTeamAccessLevel(),teamStore:e}}),[n,t]),[{value:a}]=(0,Z.r5)((async()=>await R.Ng({environment:n,teamId:t})),[n,t]);(0,i.useEffect)((()=>{!0===(null==a?void 0:a.isValidTeamRequest)&&null!=a&&a.isTeamMember&&(async()=>{var e;const t=null===(e=n.currentUser)||void 0===e?void 0:e.id;t&&r&&await R.t_({environment:n,userId:t,teamStore:r})})()}),[n,r,a]);const d=(0,E.yK)((()=>({container:{display:"flex",justifyContent:"center",height:"100%"}})),[]);return a?(0,F.jsx)("div",{style:d.container,children:a.isValidTeamRequest?(0,F.jsx)($,{teamStore:r,teamAccessLevel:s}):"nonSpaceMember"===a.invalidRequestReason?(0,F.jsx)(o.LazyPageError,{route:{name:"teamsInvite",teamId:t},publicPageData:void 0}):(0,F.jsx)(o.LazyPageError,{route:{name:"notFound"},publicPageData:void 0})}):null},Y=(0,o.lazyComponent)(o.deps.Templates,(e=>e.TemplateSubmission));var X=n(84549),J=n(6495),ee=n(11342);function te(e,t){const n=t.deviceType,i=t.mobileAppVersion;if(!(0,J.wv)(e)||"local"===e||!t.isMobileNative||!i)return!1;return function(e){const{environmentName:t,deviceType:n,mobileAppVersion:i,androidVersions:s,iosVersions:o}=e,r=(0,ee.parseMobileAppVersion)(i,"android"===n);if(!r)return!1;if("android"===n&&!s||"ios"===n&&!o)return!1;let a;if("android"===n){if(!s)return!1;a=(0,ee.parseMobileAppVersion)(s[t],!0)}else{if(!o)return!1;a=(0,ee.parseMobileAppVersion)(o[t],!1)}return!!a&&(0,ee.isLessThanVersion)(r,a)}({environmentName:e,deviceType:n,mobileAppVersion:i,iosVersions:{staging:"0.1.1022",development:"0.5.1168",production:"0.4.1021"}})}var ne=n(51454),ie=n(50950),se=n(16971),oe=n(72899),re=n(16091),ae=n(81598),de=n(69098),le=n(30106),ce=n(28020),ue=n(19124),pe=n(64286),he=n(67669);const me=(0,o.lazyComponent)(o.deps.moveTo,(e=>e.MoveToMenuRenderer));var ge=n(48451),ve=n(50770),fe=n(94841),be=n(74948),Se=n(36596),ye=n(38676);function we(){window.__c={n:"SidebarLoadingSkeleton"};const e=(0,U.VK)((()=>ye.gV.state?ye.GZ.state:0),[]),t=(0,E.yK)((t=>{const n={width:22,height:22,borderRadius:4},i={height:10,minHeight:10,borderRadius:10};return{sidebar:{backgroundColor:t.sidebarBackground,boxShadow:t.sidebarBoxShadow,display:"flex",minWidth:e,flexDirection:"column",padding:"12px 14px",overflow:"hidden"},heroSection:{marginBottom:19,display:"flex",alignItems:"center"},heroSectionIcon:{padding:"1px",...n},heroSectionTitle:{width:177,marginLeft:8,...i},toplevelMenu:{marginBottom:16,width:78,...i},toplevelMenuLast:{marginBottom:36,width:135,...i},sectionHeader:{marginBottom:12,width:56,...i},pageRow:{display:"flex",alignItems:"center",marginBottom:8},pageChevron:{width:12,height:12,display:"block",marginRight:4,fill:"dark"===t.mode?t.accentColors.gray[300]:t.accentColors.gray[100]},pageIcon:{...n},pageTitle:{marginLeft:6,...i}}}),[e]),n=(0,F.jsxs)("div",{style:t.heroSection,children:[(0,F.jsx)(Se.Z,{style:t.heroSectionIcon,emphasized:!0}),(0,F.jsx)(Se.Z,{style:t.heroSectionTitle,emphasized:!0})]}),s=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Se.Z,{style:t.toplevelMenu,emphasized:!0}),(0,F.jsx)(Se.Z,{style:t.toplevelMenu,emphasized:!0}),(0,F.jsx)(Se.Z,{style:t.toplevelMenuLast,emphasized:!0})]}),o=(0,F.jsx)(Se.Z,{style:t.sectionHeader,emphasized:!0}),r=(0,i.useMemo)((()=>Array(5).fill(null).map((()=>Array(4).fill(null).map((()=>Math.floor(4*Math.random())))))),[]).map(((e,n)=>e.map(((e,i)=>(0,F.jsxs)("div",{style:{...ke(n),...t.pageRow},children:[(0,F.jsx)("svg",{viewBox:"0 0 30 30",style:t.pageChevron,children:(0,F.jsx)("polygon",{points:"17.4,15 7,25.2 9.8,28 23,15 9.8,2 7,4.8"})}),(0,F.jsx)(Se.Z,{style:t.pageIcon,emphasized:!0}),(0,F.jsx)(Se.Z,{style:{...t.pageTitle,width:80+20*e},emphasized:!0})]},`${n}-${i}`)))));return(0,F.jsxs)("div",{style:t.sidebar,children:[n,s,o,r]})}function ke(e){return 0===e?{}:{animation:`1s ease-in ${e}s 1 normal both running fadein`}}var xe=n(24646),Ce=n(5162),Me=n(51),je=n(21273),Ie=n(43604),Te=n(77080),_e=n(27242),Ae=n(78291),Pe=n(12309),Le=n(33293);function Ue(){window.__c={n:"BillingModalContainer"};const e=(0,U.VK)((()=>Pe.Z.state.modalInfoById),[]);return(0,F.jsx)(F.Fragment,{children:Object.entries(e).map((e=>{let[t,n]=e;const{content:i,dismissUsing:s,isOpen:o,modalStyle:r,onClosed:a,onDismiss:d}=n;return(0,F.jsx)(Le.q,{dismissUsing:s,isOpen:o,onClosed:a,onDismiss:d,style:r,children:i},t)}))})}n(21703);var Ee=n(30120),Ze=n(92595),Re=n(54642);async function Be(e,t){const n=await Re.stripeGetTestClock(t,{spaceId:e});if("success"===n.type){if("advancing"===n.data.status)throw new Error("Test clock is advancing. Please try again in a few seconds.");return n.data.epochSeconds}}async function Ne(e){const{environment:t,spaceId:n,advanceTestClockArgument:i}=e;if(i)return"number"==typeof i?i:"function"==typeof i?await async function(e){const{environment:t,spaceId:n,callback:i}=e,s=await Be(n,t);if(s)return i(s)}({environment:t,spaceId:n,callback:i}):"object"==typeof i?await async function(e){const{environment:t,spaceId:n,durationLike:i}=e,s=await Be(n,t);if(!s)return;const o=Ee.ou.fromSeconds(s),r=Ee.nL.fromDurationLike(i);return o.plus(r).toSeconds()}({environment:t,spaceId:n,durationLike:i}):void 0}const Ve=function(){window.__c={n:"StripeTestClockSupport"};const e=["local","staging","development"].includes("production"),t=(0,L.O7)();return(0,i.useEffect)((()=>{e&&((0,Ze.exposeDebugValue)("refreshTestClock",(async()=>{const{spaceId:e}=Ae.default.state;if(e){const n=await Be(e,t);if(n){const e=Ee.ou.fromSeconds(n);console.log(`Test clock time is ${e.toString()} (${n} seconds)`),Ae.default.setTestClockSeconds(n)}}})),(0,Ze.exposeDebugValue)("advanceTestClock",(async e=>{if(!e)throw new Error("advanceTestClock requires an argument. You can pass an epoch timestamp in seconds, a relative DurationLike object like { months: 2 }, or a function that takes the current epoch seconds and returns the new epoch seconds.");const{spaceId:n}=Ae.default.state;if(!n)return;const i=await Ne({environment:t,spaceId:n,advanceTestClockArgument:e});i&&(await Re.stripeAdvanceTestClock(t,{spaceId:n,epochSeconds:i}),Ae.default.setTestClockSeconds(i))})))}),[e,t]),null};var Oe=n(1404),De=n(59260),ze=n(62142),Fe=(n(57658),n(9852)),We=n(63143),qe=n(99334);const He=10*We.C0,Ke=5*He;function Ge(){return window.__c={n:"TabAnalyticsTracker"},(0,i.useEffect)((()=>{if(!window.BroadcastChannel)return;const e=(0,Fe.getSessionTabId)(),t=new Map,n=new BroadcastChannel("notion_tab_tracker");n.onmessage=e=>{const n=e.data;"string"==typeof n&&t.set(n,Date.now())};const i=window.setInterval((()=>{(()=>{const e=[],n=Date.now();for(const[i,s]of t.entries())n-s>Ke&&e.push(i);e.length;for(const i of e)t.delete(i)})(),n.postMessage(e);const i=t.size+1;(0,qe.$)(i)}),He);return()=>{n.close(),window.clearInterval(i)}}),[]),null}var $e=n(22491),Qe=n(72126),Ye=n(70203),Xe=n(44805),Je=n(92120),et=n(24229),tt=n(48588);function nt(e){const{discussionId:t,level:n}=e;return`\n\t\t.${(0,$e.vE)({level:n})}.${(0,$e.dk)({discussionId:t})}.${Xe.kB} {\n\t\t\tbackground: ${(0,c.Hu)(e)} !important;\n\t\t\topacity: unset !important;\n\t\t\tborder-bottom: 2px solid ${c.mO};\n\t\t}\n\t`}function it(){function e(){var e,t,n;const i=(null===(e=Je.Z.state)||void 0===e?void 0:e.discussionIds)||[],s=null!==(t=et.Z.state)&&void 0!==t&&t.open&&(null===(n=et.Z.state)||void 0===n?void 0:n.discussionIds)||[];return[...i.flatMap((e=>Qe.DZ($e.nB).map((t=>nt({discussionId:e,level:t+1,hovered:!0,selected:!1}))))),...s.flatMap((e=>Qe.DZ($e.nB).map((t=>nt({discussionId:e,level:t+1,hovered:!1,selected:!0})))))].join("\n")}function t(){var e,t;const n=null===(e=tt.Z.state)||void 0===e?void 0:e.store,i=null===(t=tt.Z.state)||void 0===t||null===(t=t.annotations)||void 0===t?void 0:t.find(Ye.j0F);if(!i)return"";const s=(0,Ye.zW$)(i);return"block"!==(null==n?void 0:n.table)?"":`\n\t\t\t.${(0,$e.S$)({href:s,blockId:n.id})}.${Xe.kB} {\n\t\t\t\ttransition: border-color 100ms ease-in, opacity 100ms ease-in;\n\t\t\t\tborder-color: currentColor !important;\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`}window.__c={n:"CSSOverrideStyle"};const n=(0,U.VK)((()=>[e(),t()].filter(Boolean).join("\n")),[]);return n?(0,F.jsx)("style",{dangerouslySetInnerHTML:{__html:n}}):null}var st=n(77207),ot=n(74055),rt=n(7339);function at(e){return(0,F.jsx)("div",{id:"test-customer-io",style:{width:334,height:200,position:"absolute",bottom:64,right:21,zIndex:1,display:e?void 0:"none"}})}const dt=function(){window.__c={n:"CustomerIoInAppCallout"};const e=(0,L.O7)(),{currentUser:t}=e,n=(0,U.VK)((()=>rt.C.state.ready),[]),s=(0,U.VK)((()=>t.isLoggedIn()&&n&&Te.default.checkGate("customerio")),[t,n]),o=(0,U.VK)((()=>_.default.state.inAppCalloutStore),[]),r=(0,U.VK)((()=>"dark"!==e.ThemeStore.state.mode),[e]);(0,i.useEffect)((()=>{s&&(o.canShow("customer_io")?r?ot.Z.state.suppressReason===ot.V.IN_APP_CALLOUT_CONFLICT?ot.Z.setState({...ot.Z.state,isVisible:!0,suppressReason:void 0}):ot.Z.setState({...ot.Z.state,suppressReason:void 0}):ot.Z.setState({isVisible:!1,suppressReason:ot.V.DARK_MODE}):ot.Z.setState({isVisible:!1,suppressReason:ot.V.IN_APP_CALLOUT_CONFLICT}))}),[o,s,r]);const a=(0,U.VK)((()=>ot.Z.state.isVisible&&o.canShow("customer_io")),[o]);return(0,i.useEffect)((()=>{if(a)return o.updateCalloutStatus({calloutId:"customer_io",visible:!0}),()=>{o.updateCalloutStatus({calloutId:"customer_io",visible:!1})}}),[o,a]),s?at(!!a):null};var lt=n(41056);function ct(e){return window.__c={n:"DateTodayUpdater"},(0,i.useEffect)((()=>{const e=window.setInterval(lt.u,5e3);return()=>{window.clearInterval(e)}}),[]),null}var ut=n(41892),pt=n(15095),ht=n(43593),mt=n(17755),gt=n(42875),vt=n(79362),ft=n(22808),bt=n(82883),St=n(64002),yt=n(60682),wt=n(24990),kt=n(19037);async function xt(e){const t=document.createElement("canvas");t.width=32,t.height=32;const n=t.getContext("2d"),i=document.createElement("img");return i.src=e,new Promise((e=>{i.onload=()=>{n.drawImage(i,0,0,32,32),e(t.toDataURL("image/png"))},i.onerror=()=>{e("")}}))}var Ct=n(84210),Mt=n(83055),jt=n(33929),It=n(19034),Tt=n(80641),_t=n(5315);class At extends r.Z{constructor(){super(...arguments),this.lastSetIconString=void 0,this.updateBrowserState=()=>{const{device:e}=this.environment,t=this.computedStore.state;if(!t)return;const{url:n,title:i,icon:s}=t;let r,a,d;s&&(0,vt.V2)(s.icon)?d=s.icon:s&&(0,ft.Z)(s.icon)?r=s.icon:s&&ht.F8(s.icon)&&(a=s);const{intl:l}=this.props,c=t.isNonverified&&!t.hasBypassedContentClassification&&!t.isMemberOfSpace;i&&document.title!==i&&(c?document.title=l.formatMessage({id:"pageTitle.flaggedContent",defaultMessage:"Flagged Content"}):e.isSafari&&r?document.title=`${r} ${i}`:document.title=i),n&&St.T1(n)!==St.T1(window.location.href)&&(window.history.replaceState(window.history.state,void 0,n),x.updateRouterStateForDocumentTitleChange({environment:this.environment,url:window.location.href}));const u=document.querySelector("link[rel='shortcut icon']");if(u){const t=ut.Z.images.faviconIco;if(c)u.href=t,this.lastSetIconString=t;else if(r)r!==this.lastSetIconString&&(this.lastSetIconString=r,async function(e,t){const n=document.createElement("canvas");n.width=32,n.height=32;const i=n.getContext("2d");if(i.font="normal normal normal 32px/32px sans",i.textAlign="center",i.textBaseline="middle","raw"===t)return i.fillText(e,n.width/2,n.height/2+4),n;const s=await o.deps.emojiData.loader(),r=(0,pt.yz)(e,s);if(!r)return;const a=document.createElement("img");a.src=(0,pt.bk)(t);const d=(0,pt.G0)(r);return new Promise((e=>{a.onload=()=>{i.drawImage(a,d.x,d.y,d.size,d.size,0,0,32,32),e(n)},a.onerror=()=>{e(void 0)}}))}(r,(0,yt.e_)(this.environment)).then((async e=>{await Mt.aO(),u.href=(null==e?void 0:e.toDataURL("image/png"))||""})));else if(d){if(d!==this.lastSetIconString){this.lastSetIconString=d;const t=`${d}?mode=${this.theme.mode}`;e.isFirefox?u.href=t:xt(t).then((e=>{u.href=e}))}}else if(a){const{icon:e,...t}=a,n=mt.EK({url:e,width:100,permissionRecord:t.pointer,baseUrl:T.default.domainBaseUrl,fullyQualified:!1,userId:this.environment.currentUser.id});n!==this.lastSetIconString&&(this.lastSetIconString=n,_t.transactionQueue.awaitRecordTransaction(t.pointer).then((()=>xt(n))).then((e=>{u.href=e})))}else t!==this.lastSetIconString&&(u.href=t,this.lastSetIconString=t)}y.electronApi&&y.electronApi.setWindowTitle&&i&&y.electronApi.setWindowTitle(i)},this.updateBrowserStateDebounced=Qe.Ds(this.updateBrowserState,500,{leading:!0}),this.computedStore=this.createComputedStore((()=>{const{intl:e}=this.props,{RouterStore:t,device:n}=this.environment,i=t.state.route;if("chat"===i.name)return{title:"Ask AI"};const s=_.default.state.mainEditorCurrentBlockStore;if(!s||!s.isReady())return;if("page"!==i.name||i.blockId!==s.id)return;const o=It.Z.getTotalUnreadMentionsCount(),r=s.getTitleStore();let a;const d=s.getModel(),l=s.getCollectionViewIds(),c=null==r?void 0:r.getRecordModel(r.pointer);if(r&&c){if(a=(0,bt.X)({intl:jt.default.getIntl(),textValue:r.getValue(),userTimeZone:(0,gt.r)(),getRecordModel:s.getRecordModel})||c.getEmptyTitlePlaceholder({getRecordModel:r.getRecordModel,userTimeZone:(0,gt.r)(),intl:e}),"block"===r.table&&(0,fe.WE)(s)){const{currentSpaceStore:t}=_.default.state;if(t){a=`${t.getName()} - ${e.formatMessage({id:"DocumentTitleListener.personalHomeLabel",defaultMessage:"Home"})}`}}if("collection"===r.table&&d&&d.isCollectionView()&&l.length>1){const e=_.default.state.currentCollectionViewStore;e&&e.getName()&&(a=`${a} | ${e.getName()}`)}n.isElectron||(a=(0,pt.db)(a.slice(0,100),wt.Z.state)),he.IJ(this.environment,s)||this.environment.device.isElectron||(o>9?a=`(9+) ${a}`:o>0&&(a=`(${o}) ${a}`))}const u=(0,Ct.ZP)({store:s,fullyQualified:!1,scrollToBlockId:i.scrollToBlockId,peekViewBlockId:i.peekViewBlockId,peekMode:i.peekMode,collectionViewId:i.collectionViewId,discussionId:i.discussionId,showMoveTo:i.showMoveTo,saveParent:i.saveParent,templateGalleryItem:i.templateGalleryItem,projectManagementLaunch:i.projectManagementLaunch,pageVisitSource:void 0}),p=s.getIcon(),h=null==d?void 0:d.isNonverifiedContentClassification();return{title:a,url:u,icon:p,isNonverified:h,hasBypassedContentClassification:h&&d&&Tt.Z.bypassedPage(s.id),isMemberOfSpace:(0,kt.I)({blocks:[s],environment:this.environment,publicEditMode:void 0})}}))}willMount(){this.savedTitle=document.title,this.computedStore.addListener(this.updateBrowserStateDebounced)}willUnmount(){this.computedStore.removeListener(this.updateBrowserStateDebounced),document.title=this.savedTitle}}At.displayName="DocumentTitleListener";const Pt=(0,b.injectIntl)(At);class Lt extends r.Z{constructor(){super(...arguments),this.konami=void 0,this.unlock=!1,this.handleSuccess=()=>{this.unlock=!0,this.forceUpdate()}}willMountOrUpdate(){this.environment.device.isDesktop?this.loadKonami():this.unloadKonami()}loadKonami(){var e,t;this.konami||(this.konami=(e=this.handleSuccess,(t={addEvent:function(e,t,n){e.addEventListener(t,n,!1)},removeEvent:function(e,t,n){e.removeEventListener(t,n)},input:"",pattern:"38384040373937396665",keydownHandler:function(n){t.input+=n.keyCode,t.input.length>t.pattern.length&&(t.input=t.input.substr(t.input.length-t.pattern.length)),t.input===t.pattern&&(e(),t.input="")},load:function(){this.addEvent(document,"keydown",this.keydownHandler)},unload:function(){this.removeEvent(document,"keydown",this.keydownHandler)}}).load(),t))}unloadKonami(){this.konami&&(this.konami.unload(),this.konami=void 0)}renderComponent(){if(this.unlock)return(0,F.jsx)("img",{className:"nyan",style:{position:"fixed",top:"calc(50vh - 100px)",zIndex:1e3,left:"50%",animationName:"leftOrRight",animationDuration:"9s",animationIterationCount:"infinite",pointerEvents:"none",userSelect:"none"},src:ut.Z.images.nyancatGif})}}Lt.displayName="EasterEgg";const Ut=Lt;var Et=n(15944),Zt=n(81415);const Rt=(0,b.defineMessages)({pressSlashHeader:{id:"EducationTooltips.pressSlash.header",defaultMessage:"Press {slashkey} for commands"}});function Bt(e){return(0,F.jsx)("div",{style:{background:c.ZP.whiteWithAlpha(.1),padding:3,paddingRight:8,paddingLeft:8,marginRight:6,marginLeft:6,borderRadius:4},children:e.char})}function Nt(){window.__c={n:"PressSlashTooltip"};const e=(0,L.O7)(),t=Et.o();return(0,U.VK)((()=>{const{currentUserSettingsStore:e}=_.default.state;var t;return!e||!e.isReady()||Boolean(null===(t=e.getSettings())||void 0===t?void 0:t.pressed_slash_tooltip)}),[])||e.device.isMobile||!t?null:(0,F.jsx)(Zt.U,{hideCloseButton:!0,origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,F.jsx)(b.FormattedMessage,{...Rt.pressSlashHeader,values:{slashkey:(0,F.jsx)(Bt,{char:"/"})}}),content:null,onCloseClick:()=>Et.q(e)})}n(30541);var Vt=n(41432),Ot=n(82855),Dt=n(16880),zt=n(9953),Ft=n(3898),Wt=n(42858),qt=n(39699),Ht=n(69316),Kt=n(83212),Gt=n(24666),$t=n(68894),Qt=n(32302);function Yt(e){window.__c={n:"FindAndReplace"};const[t,n]=(0,i.useState)(""),s=(0,i.useCallback)((e=>{Ht.Z.setState({...Ht.Z.state,findQuery:e})}),[]),o=(0,U.VK)((()=>Ht.Z.state),[]);return(0,F.jsx)("div",{children:o.open?(0,F.jsx)(Xt,{...e,find:o.findQuery,setFind:s,replace:t,setReplace:n}):null})}function Xt(e){window.__c={n:"FindAndReplaceComponent"};const{environment:t,pageStore:n,replace:s,setReplace:o,find:r,setFind:a}=e,[d,l]=(0,i.useState)(0);(0,i.useEffect)((()=>{l(-1),"empty"!==Gt.default.state.mode&&Gt.default.setState({mode:"empty"})}),[r,n]);const c=(0,U.VK)((()=>function(e){const{pageStore:t,find:n}=e;if(!t||!t.getContentStores()||0===n.length)return[];const i=[],s=t.getContentStores();for(;s.length>0;){const e=s.shift(),t=null==e?void 0:e.getType();if(!e||!t)continue;const o=(0,Vt.XD)(t),r=e.getProperties();if(o&&r){const{title:t}=r,s=[...t?Ye.Oqk({textValue:t,substring:n,ignoreCase:!0}).map((t=>({blockId:e.id,propertyType:"title",selection:t,blockStore:e}))):[]];s.length>0&&i.push(...s)}const a=e.getContentStores();a&&s.unshift(...a)}return i}({find:r,pageStore:n})),[r,n]),u=(0,i.useCallback)((async e=>{if(!c||0===c.length)return;const i="down"===e?1:-1,s=c[d+i],[o,r]=[c[0],c[c.length-1]];if(!o||!r)return;const a="down"===e?o:r;switch(e){case"down":l((e=>s?e+i:0));break;case"up":l((e=>s?e+i:c.length-1))}const u=(null==s?void 0:s.blockId)??a.blockId;await Ft.Nz(n,[u]),Wt.WG(t,[u])}),[d,c,t,n]),p=(0,E.yK)((e=>({container:{position:"absolute",top:0,right:0,display:"grid",gridTemplateColumns:"repeat(4, auto)",gridTemplateRows:"repeat(3, auto)",flexDirection:"column",padding:10,margin:"3rem 2rem 0",gap:10,boxShadow:e.lightBoxShadow,backgroundColor:"white",zIndex:999,borderRadius:10}})),[]);return(0,F.jsxs)("div",{style:p.container,children:[(0,F.jsx)(Jt,{currentSelectionIndex:d,totalResults:c.length,jumpToResultFn:u}),(0,F.jsx)($t.ZP,{value:r,itemMarginLeft:0,itemMarginRight:0,showClearButton:!0,onChange:e=>a(e.target.value),title:"input title",placeholder:"Find",style:{gridColumn:"1/3",gridRow:"1/1"},onSubmit:()=>u("down"),onCancel:()=>Qt.x(),focusInitial:!0},"find input element"),(0,F.jsx)($t.ZP,{value:s,itemMarginLeft:0,itemMarginRight:0,showClearButton:!0,onChange:e=>o(e.target.value),title:"input title",placeholder:"Replace",style:{gridColumn:"1/3",gridRow:"2/2"}},"replace input element"),(0,F.jsx)(O.Z,{onClick:()=>{},style:{gridArea:"3/1"},disabled:!0,children:"Replace"}),(0,F.jsx)(O.Z,{onClick:()=>{!function(e){const{find:t,replace:n,pageStore:i,environment:s}=e,o=null==i?void 0:i.getContentStores();if(!i||i.isLocked()||!o)return;for(;o.length>0;){var r,a;const e=o.shift();if(!e)continue;const i=Kt.Z.getMode(s,e),d=e.canEdit()&&"comment"!==i.permission;if(i.permission,!d)continue;const l=null===(r=e.getModel())||void 0===r?void 0:r.type,c=null===(a=e.getModel())||void 0===a?void 0:a.getProperties();if(c&&l&&(0,Vt.XD)(l)){const i=c.title;if(!i)continue;for(const e of i)e[0]=e[0].replace(t,n);qt.createAndCommit({userAction:"findAndReplaceAll",environment:s,perform:t=>{zt.sW({store:e.getPropertiesStore(),data:{title:i},transaction:t})}})}const u=null==e?void 0:e.getContentStores();u&&o.unshift(...u)}}({find:r,replace:s,pageStore:n,environment:t})},style:{gridArea:"3/2"},children:"Replace All"})]})}function Jt(e){const{jumpToResultFn:t,totalResults:n,currentSelectionIndex:i}=e;return(0,F.jsxs)("div",{style:{gridArea:"1/3",fontSize:".8rem",display:"flex",alignItems:"center",gap:"5px"},children:[(0,F.jsxs)("div",{style:{fontSize:".8rem",display:"flex",gap:"5px"},children:[(0,F.jsx)("span",{children:i+1}),(0,F.jsx)("span",{children:"of"}),(0,F.jsx)("span",{children:n})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{style:{cursor:"pointer"},onClick:()=>t("up"),children:(0,Dt.R)({width:10,height:10})}),(0,F.jsx)("div",{style:{cursor:"pointer"},onClick:()=>t("down"),children:(0,Ot.E)({width:10,height:10})})]})]})}var en=n(21202),tn=n(3297),nn=n(87279),sn=n(78140),on=n(32163),rn=n(50506),an=n(72495),dn=n(26673);class ln extends r.Z{constructor(){super(...arguments),this.didSingleWorkspaceFork=!1}didMountOrUpdate(){const e=(e,t,n,i)=>{this.didSingleWorkspaceFork=!0;return tn.DK({environment:this.environment,store:e,spaceStore:t,spaceViewStore:n,isPrivate:i,context:"public_page_duplicate_single_workspace"})};if(!this.environment.currentUser.isLoggedIn()){const{environment:e}=this;return tn.nM({currentUserId:void 0,blockId:this.props.blockId}),"public_page"!==this.props.from&&"notion_template_gallery"!==this.props.from||S.HU0(e,{from:this.props.from,is_paid:!1,template_block_id:this.props.blockId,public_page_device_id:this.props.tid}),void x.navigate({environment:e,url:m._j.login})}const{currentUserRootStore:t}=_.default.state;if(t&&t&&!this.didSingleWorkspaceFork){const n=A.G.createChildStore(t,{table:en.iU,id:this.props.blockId}),i=ce.o(t);if(1===i.length){const t=i[0],s=t.getSpaceStore();if(!s)return;e(n,s,t,!0)}else if(this.props.workspaceId&&i.length>1){const t=i.filter((e=>e.pointer.spaceId===this.props.workspaceId))[0],s=null==t?void 0:t.getSpaceStore();if(!s)return;e(n,s,t,!0)}else if(!this.environment.device.isMobile){"on"===Te.default.getEligibleGroup({experimentId:"duplication_workspace_selection_modal",defaultGroup:"control"})&&(le.Z.setState({open:!0,blockStore:n,spaceStore:void 0,spaceViewStore:void 0,teamStore:void 0}),x.navigate({environment:this.environment,url:m._j.root,redirect:!0}))}}}renderComponent(){const{device:e}=this.environment,{currentUserRootStore:t}=_.default.state;if(!t)return;const{mainEditorCurrentBlockStore:n}=_.default.state;if(!n)return;if(!n.isDefined())return;const i=[{key:"spaces",render:t=>(0,F.jsx)(an.Z,{title:e.isMobile?void 0:(0,F.jsx)(b.FormattedMessage,{id:"forkPageScreen.chooseWorkspaceForDuplication.message",defaultMessage:"Choose a workspace to duplicate into"}),isTitleUppercase:!0,...t}),items:dn.default.getSpaceViewMenuItems(this.environment,n)}];let s;return s=e.isMobile?{menuType:nn.og.Modal,title:(0,F.jsx)(b.FormattedMessage,{id:"forkPageScreen.chooseWorkspace.message",defaultMessage:"Choose a workspace"}),width:"100vw"}:{menuType:nn.og.Popup,height:"auto"},(0,F.jsx)(rn.Z,{open:!0,render:()=>(0,F.jsx)("div",{style:this.getStyle(),children:(0,F.jsx)(sn.Z,{...s,children:(0,F.jsx)(on.Z,{type:on.i.Vertical,sections:i,initialFocus:1})})})})}getStyle(){const{device:e}=this.environment;return{width:"100vw",height:"100vh",paddingLeft:e.isMobile?16:30,paddingRight:e.isMobile?16:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}}ln.displayName="ForkPageScreen";const cn=ln;var un=n(81059),pn=n(24553),hn=n(35253),mn=n(4708),gn=n(5382),vn=n(91754);function fn(){window.__c={n:"InviteBannerListener"};const e=(0,L.Fy)(),t=(0,L.O7)(),n=(0,U.VK)((()=>_.default.state.currentSpaceStore),[]),{isBannerVisible:s,bannerType:o}=(0,U.VK)((()=>{if(e.isMobile)return{isBannerVisible:!1,bannerType:void 0};if(n&&!(0,mn.fW)(t,{spaceStore:n}))return{isBannerVisible:!1,bannerType:void 0};const i=(0,Fe.getRedirectType)();return i&&["invite_page","invite_space"].includes(i||"")?{isBannerVisible:!0,bannerType:i}:{isBannerVisible:!1,bannerType:void 0}}),[e.isMobile,n,t]);return i.useEffect((()=>{if(s)switch(o){case"invite_page":hn.Bw({bannerStore:gn.Z,id:"InvitePageBanner",contentKey:"invite_page",styleKey:vn.v.PageNotification});break;case"invite_space":hn.Bw({bannerStore:gn.Z,id:"InviteSpaceBanner",contentKey:"invite_space",styleKey:vn.v.PageNotification})}return()=>{hn.qL({bannerStore:gn.Z,id:"InviteSpaceBanner"}),hn.qL({bannerStore:gn.Z,id:"InvitePageBanner"})}}),[s,o,t,n]),null}var bn=n(65556);function Sn(){window.__c={n:"PageReloadConfirmationListener"};const e=(0,L.O7)();return(0,i.useEffect)((()=>{function t(t){S.f73(e,{reason:t})}return bn.showConfirmationDialogEventEmitter.addListener(t),()=>{bn.showConfirmationDialogEventEmitter.removeListener(t)}}),[e]),null}var yn=n(82540),wn=n(15145),kn=n(99553),xn=n(61045),Cn=n(43250),Mn=n(75079),jn=n(78316),In=n(85957),Tn=n(45010),_n=n(18245),An=n(34859),Pn=n(4926),Ln=n(42330),Un=n(82136),En=n(88923),Zn=n(42057),Rn=n(27724),Bn=n(41464),Nn=n(23063),Vn=n(3386),On=n(68785),Dn=n(4827),zn=n(53336),Fn=n(26957),Wn=n(88274),qn=n(31192),Hn=n(45433),Kn=n(7525),Gn=n(80503),$n=n(34700);function Qn(e){const{theme:t,isSidePeekOpen:n,borderRadius:i}=e;return{zIndex:n?ne.LI:ne.Bh,background:t.peekModalBackground,borderTopLeftRadius:i??5,borderTopRightRadius:i??5}}function Yn(e){const{environment:t,padding:n,height:i}=e,s=t.device.isMobile?4:n??12;return{height:i??Gn.R6(t.device.isElectronMac)-1,display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:s,paddingRight:s}}var Xn=n(73742),Jn=n(91551);const ei=new(n(61766).Z);var ti=n(98452),ni=n(99332),ii=n(24612),si=n(73063),oi=n(58261),ri=n(26388),ai=n(22789),di=n(73935),li=n(42853),ci=n(11302),ui=n(58239);var pi=n(38755),hi=n(89728),mi=n(31278),gi=n(76798),vi=n(45653);class fi extends r.Z{constructor(){super(...arguments),this.buttonEl=null,this.handleButtonMount=e=>{this.buttonEl=e},this.handleOpenPopup=e=>{if(e.preventDefault(),this.buttonEl){const e=di.findDOMNode(this.buttonEl);e&&ci.bA({environment:this.environment,blocks:[this.props.store],originRect:e.getBoundingClientRect(),moveToContext:this.moveToContext.state,onAccept:this.handleMoveToAccept,isAddTo:!0,isDefaultPrivateLocation:wi(this.props.store),disableSuccessToast:!0,forceUntyped:(t=this.props.pageType,!t||"page"===t)})}var t},this.handleMoveToAccept=e=>{const{pageType:t,saveParent:n}=this.props,{currentSpaceStore:i}=_.default.state;if(i&&n){let n;!function(e){const{pageType:t,spaceStore:n,currentUserId:i,result:s}=e;(0,ui.rq)({currentUserId:i,spaceId:n.id,value:s}),t&&(0,ui.ZT)({currentUserId:i,spaceId:n.id,databaseType:Hn.wg[t],parent:s})}({pageType:n||t,spaceStore:i,currentUserId:this.environment.currentUser.id,result:e})}},this.moveToContext=this.createComputedStore((()=>{const e=_.default.state.mainEditorCurrentBlockStore;return e&&((0,fe.WE)(e)||(0,ce.qG)(e.id))?"aggregated_type":"quick_add"}))}renderComponent(){const{store:e,prefix:t,buttonStyle:n}=this.props,i=e.getParentStore();if(i&&!(i instanceof A.T5)&&!(i instanceof A.zq)&&!(i instanceof A.Vf)){const e=t?(0,F.jsx)("span",{style:{color:this.theme.mediumTextColor,marginRight:4},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:t.defaultMessage,id:t.id})}):void 0;return(0,F.jsx)(Vn.Z,{capture:!0,onMoveTo:this.handleOpenPopup,children:(0,F.jsx)("div",{style:fi.wrapStyle,children:(0,F.jsx)(ri.Z,{renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Set the default page or database",id:"peekMoveToMenu.tooltip"}),(0,F.jsx)("br",{}),(0,F.jsx)(oi.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"moveTo"})]}),render:t=>(0,F.jsxs)(hi.Z,{onClick:this.handleOpenPopup,ref:this.handleButtonMount,shouldShrink:!0,style:n,...t,children:[(0,F.jsx)(Si,{parentStore:i,prefixText:e}),(0,li.i)({width:10,marginLeft:4,fill:this.theme.lightTextColor})]})})})})}}}function bi(e,t){return e&&e instanceof A.H2&&t&&e.id===t.id}function Si(e){window.__c={n:"PeekMoveToPageName"};const{parentStore:t,prefixText:n}=e,i=(0,L.O7)(),s=(0,U.VK)((()=>(0,ce.B7)(i)),[i]),o=(0,U.VK)((()=>t instanceof A.G&&t.isEmptyPage()),[t]),r=(0,U.VK)((()=>t instanceof A.H2?(0,pi.Wd)(i,t):t.getIcon()),[i,t]),a=(0,U.VK)((()=>t instanceof A.H2?(0,pi.rn)(i,t):void 0),[i,t]),d=(0,U.VK)((()=>{const{currentSpaceStore:e}=_.default.state;return bi(t,e)}),[t]),l=(0,E.yK)((()=>({privatePagesText:{fontWeight:B.Z.fontWeight.medium,marginLeft:4,...B.Z.textOverflowStyle,overflow:"hidden"},icon:{marginRight:4,marginTop:1},title:{fontWeight:B.Z.fontWeight.semibold}})),[]);return(0,F.jsx)(F.Fragment,{children:d?(0,F.jsxs)(F.Fragment,{children:[n,(0,F.jsx)(vi.Z,{size:22,avatarShouldShowShadow:!0,userStore:s}),(0,F.jsx)("span",{style:l.privatePagesText,children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Private pages",id:"peekMoveToMenu.addTo.privatePages"})})]}):(0,F.jsxs)(F.Fragment,{children:[n,(0,F.jsx)(mi.Z,{disabled:!0,icon:r,isEmptyPage:o,title:a,size:18,style:l.icon}),(0,F.jsx)(gi.Z,{style:l.title,store:t})]})})}fi.displayName="PeekMoveToMenu",fi.wrapStyle={display:"flex",alignItems:"center",fontSize:14,minWidth:0};const yi=fi;function wi(e){const t=e.getParentStore(),{currentSpaceStore:n}=_.default.state;return bi(t,n)}var ki=n(3553),xi=n(60526),Ci=n(79075),Mi=n(96677),ji=n(10137),Ii=n(63437),Ti=n(68626),_i=n(64530),Ai=n(91155),Pi=n(8406),Li=n(5149),Ui=n(48543),Ei=n(98165),Zi=n(52275),Ri=n(31945),Bi=n(16354),Ni=n(53437),Vi=n(49085),Oi=n(13148),Di=n(3418);class zi extends r.Z{constructor(){super(...arguments),this.storeTypes={visible:Vi.default.createClass(!1)},this.timeout=void 0,this.renderPopup=()=>(0,F.jsxs)("div",{style:{fontSize:12,color:c.ZP.white,position:"absolute",top:"calc(100% + 12px)",left:"calc(50% - 110px)",background:c.ZP.blue,borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:this.theme.largeLightBoxShadow,zIndex:99},children:[(0,F.jsx)("div",{style:{position:"absolute",top:-12,left:"calc(50% - 2.5px)",background:c.ZP.blue,width:5,height:5,borderRadius:5,boxShadow:`0 0 0 1.5px ${this.theme.contentBackground}`}}),(0,F.jsx)("div",{style:{position:"absolute",top:-12,left:"calc(50% - 1px)",background:c.ZP.blue,width:2,height:12}}),(0,F.jsx)("div",{style:{width:"90%",fontWeight:500,marginBottom:2},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"New! Open pages in side peek",id:"peekModeIntroTooltip.title"})}),(0,F.jsx)("div",{style:{opacity:.8,lineHeight:1.35},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Use Tables, Boards, Lists and Timelines while opening pages on the side for faster workflows. Switch to other peek modes here.",id:"peekModeIntroTooltip.subtitle"})}),(0,F.jsx)(si.Z,{icon:Oi.U,style:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:c.ZP.white},onClick:this.handleCloseClick})]}),this.handleCloseClick=()=>{kn.Om({environment:this.environment,seen:!0})}}willMountOrUpdate(){this.shouldBeVisible()?(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.stores.visible.setState(!0)}),500)):(clearTimeout(this.timeout),this.stores.visible.setState(!1))}renderComponent(){const{origin:e}=this.props,{visible:t}=this.stores,{device:n}=this.environment;return n.isMobile?e:(0,F.jsxs)("div",{style:{position:"relative"},children:[e,(0,F.jsx)(Nn.Z,{isVisible:t.state,animationStyle:{opacity:1},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:this.renderPopup})]})}shouldBeVisible(){const{device:e}=this.environment;if(e.isPhone)return!1;if(Di.Z.state.openPopups.size>0)return!1;const{currentUserSettingsStore:t}=_.default.state;if(!t||!t.isReady())return!1;const n=t.getSettings();return!(null!=n&&n.signup_time&&(null==n?void 0:n.signup_time)>165888e7)&&(null==n||!n.seen_peek_mode_tooltip)}}zi.displayName="PeekModeIntroTooltip";const Fi=(0,b.injectIntl)(zi),Wi=(0,b.defineMessages)({changeForThisView:{id:"peekTopbar.changePeekOption.changeForThisView",defaultMessage:"Edit view default"}});class qi extends r.Z{constructor(){super(...arguments),this.getPeekModeUrl=e=>{const{store:t}=this.props,{mainEditorCurrentBlockStore:n}=_.default.state,i=Ei.uJ(t),s=t.isNavigableBlock()?i.slice(1):[...i],o=s.length>0?s[0]:void 0;return(0,jn.mb)({store:t,mainEditorCurrentBlockStore:o instanceof A.G&&!En.default.state.open?o:n,collectionContextStore:En.default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,En.getPeekModeFromCollectionPeekModeFormat)(e)})},this.handlePeekModePickerClick=()=>{if(!En.default.state.open)return;const e=En.default.state.collectionContextStore;e?Pi.nS({environment:this.environment,collectionContextStore:e,from:"peek_topbar",peek_target_id:En.default.state.target.id,from_peek_mode:En.default.state.mode}):S.v2k(this.environment,{from:"peek_topbar",peek_target_id:En.default.state.target.id,from_peek_mode:En.default.state.mode})}}willMount(){const e=this.getPeekModeFormatOptions(),t=En.default.getPeekMode();e.find((e=>Qe.Xy(e.key,t)))||Ti.log({level:"warning",from:"TopbarPeekModeButton",type:"InvalidSelectedPeekMode",error:(0,Ai.Ui)("Selected key is invalid.")})}renderComponent(){const{device:e}=this.environment,{mainEditorCurrentBlockStore:t}=_.default.state,n=this.getPeekModeFormatOptions(),i=En.default.getPeekMode();return i?(0,F.jsx)(Ri.ZP,{popupType:e.isMobile?Ni.kQ.SlideUp:Ni.kQ.Popup,alignmentToOrigin:Ri.vR.Center,placementToOrigin:Ri.pO.Bottom,style:{minWidth:190},originGap:0,onClick:this.handlePeekModePickerClick,renderOrigin:e=>(0,F.jsx)(Fi,{origin:(0,F.jsx)(ri.Z,{renderTooltip:()=>(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Switch peek mode",id:"peekTopbar.openPagesAs.button"})}),render:t=>(0,F.jsx)(si.Z,{...e,...t,icon:(0,Ui.RO)(i),iconStyle:{fill:this.theme.mediumIconColor}})})}),render:s=>{var o,r,a;let d;d=e.isMobile?{menuType:nn.og.ActionSheet}:{menuType:nn.og.Popup,width:220};const l=Qe.oA([...n.map(((e,t)=>{const n=e.key,o="full_page"===n?(0,Ct.ZP)({store:this.props.store,fullyQualified:!1,pageVisitSource:wn.tY.Expand}):this.getPeekModeUrl(n);return{key:t,render:t=>(0,F.jsx)(Bi.Z,{href:o,onClick:()=>{var e;kn.Om({environment:this.environment,seen:!0}),S.UZT(this.environment,{from:"peek_topbar",peek_mode:n,from_peek_mode:i,target_page_id:null===(e=En.default.peekTarget.state)||void 0===e?void 0:e.id}),s.close()},children:(0,F.jsx)(Zi.Z,{...t,disabled:!1,title:e.title,icon:e.icon,caption:e.caption,body:e.body,checkState:Qe.Xy(e.key,i)})}),action:()=>{}}}))]),c=En.default.state.open?En.default.state.collectionContextStore:void 0,u=En.default.state.open?En.default.state.target:void 0,p=t&&t.id===(null==c||null===(o=c.collectionViewBlockStore())||void 0===o?void 0:o.getRecordStoreUIRoot().id),h=(null==c||null===(r=c.collectionStore())||void 0===r?void 0:r.id)===(null==u||null===(a=u.getAssociatedCollectionStore())||void 0===a?void 0:a.id)&&(null==c?void 0:c.permissionScopes.state.canConfigureBlock)&&p;return(0,F.jsx)(sn.Z,{...d,children:(0,F.jsx)(on.Z,{type:on.i.Vertical,sections:Qe.oA([{key:0,render:e=>(0,F.jsx)(an.Z,{enableActionSheetTitle:!0,...e}),items:l},h&&{key:1,render:e=>(0,F.jsx)(an.Z,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:[{key:"change_for_view",render:e=>(0,F.jsx)(Zi.Z,{...e,disabled:!1,title:jt.default.formatMessage(Wi.changeForThisView),icon:(0,_i.y)({width:16,height:16,fill:this.theme.regularIconColor})}),action:e=>{this.handlePeekModeChangeForViewClick(),s.close()}}]}]),initialFocus:0})})}}):null}getPeekModeFormatOptions(){return["side_peek","center_peek","full_page"].map((e=>({key:e,title:(0,Ui.LQ)(e),icon:(0,Ui.RO)(e)({width:16,fill:this.theme.mediumTextColor})})))}handlePeekModeChangeForViewClick(){const e=En.default.state.open?En.default.state.collectionContextStore:void 0;e&&(kn.Om({environment:this.environment,seen:!0}),En.default.isCenterPeekOpen()&&this.props.onClose&&this.props.onClose(),Li.r$({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),Li.H4({collectionSettingsStore:e.settingsStore,item:{type:"layout"}}),e.settingsStore.setState({...e.settingsStore.state,openButtonPopup:"peekModeFormat"}))}}qi.displayName="TopbarPeekModeButton";const Hi=qi;var Ki=n(58810);const Gi=function(e){window.__c={n:"TopbarPeekOpenAsPageButton"};const{store:t,shouldShowMoveToMenu:n}=e,s=(0,L.O7)(),o=(0,b.useIntl)(),r=(0,U.VK)((()=>(0,Ct.ZP)({store:t,fullyQualified:!1,pageVisitSource:wn.tY.Expand})),[t]),a=(0,E.yK)((e=>({keyboardShortcut:{color:e.mediumInvertedTextColor},iconButtonWrapper:{height:24}})),[]),d=(0,i.useCallback)((()=>{var e,t,i;S.sxo(s,{isNewPage:n,peek_mode:En.default.state.mode,from:"topbar_button",target_page_id:null===(e=En.default.peekTarget.state)||void 0===e?void 0:e.id}),S.$CH(s,{peek_mode:En.default.state.mode,from:"topbar_open_as_page_button",target_page_id:null===(t=En.default.peekTarget.state)||void 0===t?void 0:t.id,target_parent_id:null===(i=En.default.peekTarget.state)||void 0===i?void 0:i.getParentId()})}),[s,n]);return(0,F.jsx)(ri.Z,{renderTooltip:()=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Open in full page",id:"peekTopbar.navigateToPage.tooltip"})}),(0,F.jsx)(oi.Z,{style:a.keyboardShortcut,name:"commandEnter"})]}),render:e=>(0,F.jsx)("div",{style:a.iconButtonWrapper,children:(0,F.jsx)(si.Z,{...e,icon:Ki.Z,iconStyle:{width:16,height:16},href:r,onClick:d,ariaLabel:o.formatMessage({id:"peekTopbar.navigateToPage.tooltip",defaultMessage:"Open in full page"})})})})};var $i=n(67485),Qi=n(12253),Yi=n(19368),Xi=n(23727);const Ji=(0,b.defineMessages)({moveToPrefixText:{id:"peekMoveToMenu.addTo.addTo",defaultMessage:"Add to"}});class es extends r.Z{renderComponent(){const{store:e,shouldShowMoveToMenu:t}=this.props,n=En.default.isSidePeekOpen();return(0,F.jsx)(ki.Z,{store:e,disableRectangularSelection:!0,disableEditNearestBlock:!0,isPeekRenderer:!0,render:i=>{let{selectableEvents:s}=i;return(0,F.jsxs)("div",{...s,style:Qn({theme:this.theme,isSidePeekOpen:n}),children:[(0,F.jsxs)("div",{style:Yn({environment:this.environment}),children:[(0,F.jsxs)("div",{style:(r=this.environment,{...(0,$n.X)({noDrag:r.device.isElectronMac}),display:"grid",gridAutoFlow:"column",gridColumnGap:2,alignItems:"center"}),children:[this.renderPeekClose(),(0,F.jsx)(Gi,{store:e,shouldShowMoveToMenu:t}),En.default.state.open&&(0,F.jsx)(Hi,{store:e,onClose:this.props.onClose}),this.renderPeekNavArrows(),this.renderMoveToMenu(),(0,F.jsx)(ai.Z,{store:e,isMobile:!1,buttonStyle:{...!this.props.shouldShowMoveToMenu&&{marginLeft:12}}})]}),(0,F.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),this.renderActionButtons()]}),(0,F.jsx)(o.LazyBannersRenderer,{banners:Jn.Z.state.banners,isMobile:!1,isInPeekRenderer:!0})]});var r}})}renderPeekClose(){if(En.default.isSidePeekOpen())return(0,F.jsx)(ri.Z,{renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Close",id:"peekTopbar.close.button"}),(0,F.jsx)("br",{}),(0,F.jsx)(oi.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"esc"})]}),render:e=>(0,F.jsx)(si.Z,{...e,icon:Kn.t,iconStyle:{width:16,height:16},onClick:()=>this.props.onClose("close_button")})})}renderPeekNavArrows(){if(!En.default.state.open)return;if(this.props.shouldShowMoveToMenu)return;const{target:e,resultsStore:t}=En.default.state,n=null==t?void 0:t.getState(),i=e.id;return n&&n.length>0&&n.some((e=>e.id===i))?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ii.Z,{}),(0,F.jsx)(ri.Z,{renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Previous page",id:"peekTopbar.peekNavUpArrow.tooltip"}),(0,F.jsx)("br",{}),(0,F.jsx)(oi.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"peekUp"})]}),render:e=>(0,F.jsx)(si.Z,{...e,disabled:i===n[0].id,icon:Dt.R,onClick:()=>x.goUpInPeekMode(),iconStyle:{fill:this.theme.mediumIconColor}})}),(0,F.jsx)(ri.Z,{renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Next page",id:"peekTopbar.peekNavDownArrow.tooltip"}),(0,F.jsx)("br",{}),(0,F.jsx)(oi.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"peekDown"})]}),render:e=>(0,F.jsx)(si.Z,{...e,disabled:i===n[n.length-1].id,icon:Ot.E,onClick:()=>x.goDownInPeekMode(),iconStyle:{fill:this.theme.mediumIconColor}})})]}):void 0}renderMoveToMenu(){const e=En.default.state,t=this.props.store.getParentCollectionStore(),n=(null==t?void 0:t.getDatabaseType())===Hn.iS?"tasks":void 0;if(e.open&&this.props.shouldShowMoveToMenu)return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ii.Z,{}),(0,F.jsx)(yi,{store:this.props.store,saveParent:e.saveParent,prefix:Ji.moveToPrefixText,pageType:n})]})}renderActionButtons(){const{device:e}=this.environment,{store:t,spaceStore:n,spaceViewStore:i}=this.props,s=(0,he.IJ)(this.environment,t),o=ce.qG(t.id),r=!e.isMobile&&n&&i&&!s&&!o,a=Boolean(n&&!n.canEdit()),d=n&&i&&!s&&(0,xi.UP)({isSpaceGuest:a,canEditPage:t.canEdit()})&&!o;return(0,F.jsxs)("div",{style:{display:"flex",alignItems:"stretch",flexGrow:0,flexShrink:0,zIndex:1},children:[t.isRestricted()&&(0,F.jsx)(Qi.Z,{style:{marginRight:14},onClick:()=>{ni.Z.setState({open:!0})}}),t.canEdit()&&(0,F.jsx)($i.Z,{rootStore:t,pageVisitStore:this.props.pageVisitStore,presenceStore:this.props.presenceStore}),d&&(0,F.jsx)(Yi.Z,{store:t,buttonPopupStore:ni.Z}),r&&(0,F.jsx)(Ci.Z,{blockStore:t,spaceStore:n,buttonPopupStore:ei}),r&&(0,F.jsx)(Xi.Z,{blockStore:t,spaceStore:n,buttonPopupStore:ii.Z}),n&&i&&!s&&(0,F.jsx)(Mi.Z,{store:t,spaceViewStore:i}),o&&(0,F.jsx)(Xn.Z,{}),r&&(0,F.jsx)(ji.Z,{store:t,buttonPopupStore:ti.Z})]})}getWrapStyle(){return{zIndex:En.default.isSidePeekOpen()?ne.LI:ne.Bh,background:this.theme.peekModalBackground,borderTopLeftRadius:5,borderTopRightRadius:5}}getStyle(){const{device:e}=this.environment,t=e.isMobile?4:12;return{height:Gn.R6(this.environment.device.isElectronMac)-1,display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:t,paddingRight:t}}}es.displayName="PeekTopbar";const ts=es;var ns=n(78901),is=n(55064);function ss(){window.__c={n:"CenterPeekRenderer"};const{open:e}=(0,U.VK)((()=>En.default.state),[]),t=(0,U.VK)((()=>Pn.Z.state),[]),n=(0,E.yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:ne.Nn,background:e.overlaySmokescreen},contentStyles:{...ls(e),top:En.PeekModeOuterPadding,left:En.PeekModeOuterPadding,right:En.PeekModeOuterPadding,marginRight:"auto",height:`calc(100% - ${En.PeekModeOuterPadding}px*2)`,maxWidth:En.CenterPeekModeOuterWidth+t,borderRadius:4}})),[t]);return(0,F.jsx)(Dn.Z,{open:e,children:(0,F.jsx)(as,{enableCaptureClick:!0,horizontalPadding:En.PeekModePadding.horizontal[En.PeekModeCenter],priority:void 0,showResizer:!1,styles:n})})}function os(){window.__c={n:"SidePeekRenderer"};const e=(0,L.O7)(),t=(0,U.VK)((()=>En.default.state),[]),n=(0,U.VK)((()=>En.default.getSidePeekWidth(e.WindowSizeStore.state.width)),[e]),i=(0,E.yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,translateX:n,width:n,zIndex:ne.YO},contentStyles:{...ls(e),top:0,right:0,width:"100%",height:"100%",borderRadius:0}})),[n]);return(0,F.jsx)(Nn.Z,{isVisible:!0,useCompositeLayer:!0,animationStyle:{translateX:t.open&&!t.isClosing?0:n},springConfig:{translateX:{stiffness:t.open&&t.isClosing?50:80,precision:1}},render:()=>(0,F.jsx)(as,{enableCaptureClick:!1,horizontalPadding:En.PeekModePadding.horizontal[En.PeekModeSide],priority:-1,showResizer:!0,styles:i}),enterAnimationStyle:{translateX:t.open?0:n},onAnimationEnd:()=>{t.open&&t.isClosing?(En.default.setState({...t,isClosing:!1}),kn.ME()):t.open&&t.isOpening&&En.default.setState({...t,isOpening:!1})}})}function rs(){window.__c={n:"SideAndCenterPeekTopbar"};const e=(0,L.O7)(),t=(0,U.VK)((()=>En.default.state),[]),{currentSpaceStore:n,currentSpaceViewStore:i}=(0,U.VK)((()=>_.default.state),[]);return t.open?(0,F.jsx)(ts,{store:t.target,spaceStore:n,spaceViewStore:i,pageVisitStore:t.pageVisitStore,presenceStore:t.presenceStore,shouldShowMoveToMenu:t.showMoveTo,onClose:t=>{ps(e,t)}}):null}function as(e){window.__c={n:"PeekContainer"};const{priority:t}=e,n=(0,L.O7)(),s=(0,U.VK)((()=>En.default.state),[]),{shouldShowFrame:o}=(0,U.VK)((()=>(0,ce.h1)(n)),[n]),r=(0,U.VK)((()=>In.Tx()),[]),a=(0,U.VK)((()=>s.open&&0===Rn.default.state.stores.length&&!Rn.default.state.pivot&&"editing"!==Gt.default.state.mode&&!Ln.ZP.state.isOpen),[s.open]),d=(0,i.useCallback)((()=>{hs(n)}),[n]),l=(0,i.useCallback)((()=>{!function(e){En.default.peekTarget.state&&(x.navigateToBlock({environment:e,store:En.default.peekTarget.state,pageVisitSource:wn.tY.Expand}),S.sxo(e,{isNewPage:En.default.state.open&&En.default.state.showMoveTo,peek_mode:En.default.state.mode,from:"command_enter",target_page_id:En.default.peekTarget.state.id}),S.$CH(e,{peek_mode:En.default.state.mode,from:"command_enter",target_page_id:En.default.peekTarget.state.id,target_parent_id:En.default.peekTarget.state.getParentId()}))}(n)}),[n]);return o?s.open?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Bn.Z,{priority:t,capture:r}),(0,F.jsx)(Vn.Z,{capture:a,onEsc:d,onCommandEnter:l,children:(0,F.jsx)(ds,{...e})},s.target.id)]}):(0,F.jsx)(ds,{...e}):null}function ds(e){window.__c={n:"PeekContentContainer"};const{enableCaptureClick:t,bottomBar:n,horizontalPadding:s,showResizer:o,styles:r}=e,a=(0,i.useRef)(void 0);Tn.Z.PeekViewScroller=a.current;const d=(0,b.useIntl)(),l=(0,L.O7)(),c=(0,U.VK)((()=>En.default.state),[]),u=(0,U.SI)((()=>c.open?Kt.Z.getMode(l,c.target):Kt.m.disabled),[l,c]),p=(0,U.VK)((()=>{if(!c.open)return;const{currentSpaceStore:e,currentSpaceViewStore:t}=_.default.state;return{pageStore:c.target,spaceStore:e,spaceViewStore:t,presenceStore:c.presenceStore,pageVisitStore:c.pageVisitStore,publicEditModeStore:u}}),[c,u]),h=(0,i.useCallback)((()=>{hs(l)}),[l]),m=(0,i.useCallback)((e=>{let{startTime:t,endTime:n}=e;const i=c.open?jn.fm(c.target):void 0;_n.default.measure({metricName:"collections.max_scroll_lag_in_session",startTime:t,endTime:n},{environment:l,data:Mn.vS(i)})}),[l,c]),g=(0,i.useCallback)((()=>{!function(e){ps(e,"empty_space_click")}(l)}),[l]);return(0,F.jsx)(yn.Mi,{value:p,children:(0,F.jsx)("div",{role:"region","aria-label":d.formatMessage({id:"peekRenderer.ariaLabel",defaultMessage:"Side Peek"}),"aria-hidden":!c.open||void 0,style:r.containerStyles,className:Cn.p1Q,children:c.open&&(0,F.jsxs)(F.Fragment,{children:[t&&(0,F.jsx)("div",{style:{width:"100%",height:"100%"},onClick:g}),(0,F.jsxs)("div",{style:r.contentStyles,children:[o&&(0,F.jsx)(is.Z,{type:"peek"}),(0,F.jsx)(rs,{}),(0,F.jsx)(ki.Z,{store:c.target,isDefaultContainer:!0,droppable:!0,isPeekRenderer:!0,render:e=>{let{selectableEvents:t,selectableHoverMenuOverlay:n}=e;return(0,F.jsx)(i.Suspense,{fallback:(0,F.jsx)(Fn.Z,{peekMode:En.default.getPeekMode(),isVisible:!0,store:c.target}),children:(0,F.jsx)(Wn.Z,{pageStore:c.target,pageVisitStore:c.pageVisitStore,initialChunkSize:25,incrementChunkSize:25,store:c.loadingContainerStore,render:e=>{let{ready:o,initialRequestCompleted:r,endOfResultsReached:d,isCollectionInPage:p}=e;return(0,F.jsxs)(i.Fragment,{children:[(0,F.jsxs)(zn.Z,{ref:a,onScrollLagMeasure:p?m:void 0,preventType:o?xn.Q7(l):An.Z.All,type:An.Z.Y,style:{display:"flex",flexDirection:"column",flexGrow:1,position:"relative",transform:"translateZ(0)",...o?{}:cs},store:Zn.Z,...t,children:[n,(0,ue.GD)(u.state)&&(0,F.jsx)(oe.GC,{scrollerStore:Zn.Z}),r&&(0,F.jsxs)(i.Fragment,{children:[(0,F.jsx)(qn.Z,{context:Un.S.PeekView,loadingContainerStore:c.loadingContainerStore,store:c.target,onTitleEsc:h,forceSelectTitleOnMount:!0,paddingLeft:s,paddingRight:s,paddingBottom:80,pageCoverHeight:"20vh",disabled:!c.open||c.isClosing}),(0,F.jsx)(ns.Z,{pageVisitStore:c.pageVisitStore,presenceStore:c.presenceStore,isPeekView:!0})]}),o&&!d&&(0,F.jsx)(On.Z,{style:{zIndex:1,opacity:.5,width:us,height:us,marginTop:0,marginBottom:24,marginLeft:"auto",marginRight:"auto"}})]}),(0,F.jsx)(Fn.Z,{peekMode:En.default.getPeekMode(),isVisible:!o,store:c.target})]})}})})}},c.target.id),n]})]})})})}function ls(e){return{flexDirection:"column",position:"absolute",display:"flex",marginLeft:"auto",background:e.peekModalBackground,boxShadow:e.largeLightBoxShadow}}const cs={opacity:0,pointerEvents:"none",height:0},us="1.375em";function ps(e,t){kn.xv(e,t)}function hs(e){ps(e,"esc")}const ms=function(){window.__c={n:"PeekRenderer"};const e=(0,L.O7)(),t=(0,i.useCallback)((()=>{En.default.state.open&&En.default.isSidePeekOpen()&&(be.toggleLeftSidebarByWindowSize(e),En.default.setState({...En.default.state,isOpening:!1}))}),[e]);switch((0,i.useEffect)((()=>(e.WindowSizeStore.addListener(t),e.WindowSizeStore.removeListener(t))),[e.WindowSizeStore,t]),(0,U.VK)((()=>En.default.getPeekMode()),[])){case En.PeekModeCenter:return(0,F.jsx)(ss,{});case En.PeekModeSide:return(0,F.jsx)(os,{})}};var gs=n(20993),vs=n(64275),fs=n(55449),bs=n(15157),Ss=n(60113);const ys=(0,b.defineMessages)({"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.a.title":{defaultMessage:"Import your workspace (A)",id:"templateChecklist.quickNote.a.title"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.a.description":{defaultMessage:"See your docs and wiki in action (A)",id:"templateChecklist.quickNote.a.description"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.b.title":{defaultMessage:"Import your workspace (B)",id:"templateChecklist.quickNote.b.title"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.b.description":{defaultMessage:"See your docs and wiki in action (B)",id:"templateChecklist.quickNote.b.description"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.c.title":{defaultMessage:"Import your workspace (C)",id:"templateChecklist.quickNote.c.title"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.c.description":{defaultMessage:"See your docs and wiki in action (C)",id:"templateChecklist.quickNote.c.description"}});function ws(e){return`templateChecklist--${e}--visible`}class ks extends Vi.default{getInitialState(){return{open:!0}}}const xs=new ks;class Cs extends Vi.default{getInitialState(){return{templateChecklistRecord:void 0,completed:!1,hide:!1}}}const Ms=Cs;class js extends Vi.default{getInitialState(){return{step:"list",templateChecklistRecord:void 0}}}const Is=js;var Ts=n(64921),_s=n(77137),As=n(15047);const Ps=e=>{let{percentComplete:t=.33}=e;return(0,F.jsx)("div",{style:{height:4,width:288,borderRadius:10,backgroundColor:"#E7E6E5"},children:(0,F.jsx)("div",{style:{height:4,width:288*t+"px",borderRadius:10,position:"relative",backgroundColor:"#2383E2"}})})};class Ls extends r.Z{renderComponent(){return(0,F.jsxs)("div",{children:[(0,fs.L)({height:24,width:24}),(0,F.jsx)("div",{style:this.getHeaderStyle(),children:Es(this.props.useCase)}),(0,F.jsx)(Ps,{...this.props})]})}getHeaderStyle(){return{paddingTop:12,paddingBottom:12,color:this.theme.regularTextColor,fontWeight:B.Z.fontWeight.semibold,fontSize:17,lineHeight:1.4}}}Ls.displayName="TemplateChecklistHeader";const Us=Ls;function Es(e){switch(e){case"wiki":return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.wiki",defaultMessage:"Getting started with wikis & docs"});case"doc_notes":case"notes":return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.notes",defaultMessage:"Getting started with notes"});case"bookmarks":return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.databases",defaultMessage:"Getting started with databases"});case"project_management":return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.projectManagement",defaultMessage:"Getting started with projects & tasks"});default:return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.default",defaultMessage:"Getting started with Notion"})}}var Zs=n(5257),Rs=n(60458);class Bs extends r.Z{constructor(){super(...arguments),this.showingMore=Vi.default.createValue(!1)}renderComponent(){const{title:e,description:t}=this.props;return(0,F.jsxs)("div",{style:{paddingTop:12,display:"flex",flexDirection:"row",width:"100%",...this.showingMore.state?{borderBottom:"1px solid #ECEBEA",marginBottom:12,paddingBottom:12}:{}},children:[(0,F.jsx)("div",{style:{paddingRight:10},children:(0,F.jsx)(Rs.Z,{size:22,checked:this.props.checked,onClick:()=>this.props.onClick(),round:!0,fill:c.ZP.white})}),(0,F.jsxs)("div",{style:{width:"100%",paddingRight:"14px"},children:[(0,F.jsxs)("div",{style:{fontSize:14,fontWeight:B.Z.fontWeight.semibold,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e,(0,F.jsx)("span",{onClick:()=>this.showingMore.setState(!this.showingMore.state),children:this.showingMore.state?(0,li.i)({height:11,width:11,display:"inline"}):(0,Zs.o)({height:11,width:11,display:"inline"})})]}),this.showingMore.state&&(0,F.jsx)("div",{style:{fontSize:14,color:this.theme.mediumTextColor},children:t})]})]})}}Bs.displayName="TemplateChecklistStep";const Ns=Bs;class Vs extends r.Z{constructor(){super(...arguments),this.completed=Vi.default.createValue(!1),this.renderStepContent=e=>(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{style:{paddingBottom:8,width:"100%"},children:(0,F.jsx)(Us,{percentComplete:e.getStepsCompleted().length/e.getSteps().length,useCase:As.rz})}),e.getSteps().map((t=>{if(null==e||!e.isDefined())return;const{title:n,description:i}=function(e,t){const n=ys[`${e}.${t}.title`],i=ys[`${e}.${t}.description`];if(!n||!i)throw new Error(`No title or description for ${e} at step ${t}`);return{title:n,description:i}}(e.getCopiedFrom(),t);return(0,F.jsx)(Ns,{title:(0,F.jsx)(b.FormattedMessage,{...n}),description:(0,F.jsx)(b.FormattedMessage,{...i}),checked:e.getStepsCompleted().includes(t),onClick:()=>{!function(e){const{environment:t,record:n,step:i}=e;if(!n.isDefined())return;const s=n.getStepsCompleted(),o={steps_completed:s.includes(i)?Qe.hX(s,(e=>e!==i)):Qe.jj([...s,i])};qt.createAndCommit({userAction:"templateChecklistActions.toggleStep",environment:t,perform:e=>{zt.sW({store:n,data:o,transaction:e})}})}({environment:this.environment,record:e,step:t})}},t)}))]}),this.renderCompleted=()=>(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",textAlign:"center"},children:[(0,F.jsx)("img",{style:{width:165,height:80},src:ut.Z.images.feedbackThankYouPng}),(0,F.jsx)("div",{style:this.getCompletedTitleStyle(),children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"You're done!",id:"templateChecklist.completed.header"})}),(0,F.jsx)("div",{style:this.getCompletedDescriptionStyle(),children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"For more inspirations, go to Notion Guides to sharpen your skills and explore new ways to use Notion.",id:"templateChecklist.completed.description"})})]}),this.handleCancel=()=>{this.props.onCancel()},this.flexCenteredStyle={display:"flex",alignItems:"center",flexDirection:"column"}}renderComponent(){return(0,F.jsx)(Nn.Z,{isVisible:xs.state.open,enterAnimationStyle:{opacity:1,scale:1},exitAnimationStyle:{opacity:0,scale:.95},render:()=>(0,F.jsxs)("div",{style:this.getContainerStyle(),children:[this.renderCancel(),this.renderStep()]})})}renderCancel(){return(0,F.jsx)(Ts.Z,{onClick:this.handleCancel,style:this.getCancelStyle(),hoveredStyle:{background:this.theme.buttonPressedBackground},children:(0,vs.D)({width:14,fill:this.theme.mediumTextColor})})}renderStep(){const e=this.props.templateChecklistStore.state.templateChecklistRecord;if(null==e||!e.isDefined())return;const t=e.getStepsCompleted().length!==e.getSteps().length;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Nn.Z,{isVisible:t,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},onAnimationEnd:()=>{this.completed.setState(!0),Qe.gw((()=>{xs.setState({open:!1}),this.props.onComplete()}),2e3)},render:()=>this.renderStepContent(e)}),(0,F.jsx)(Nn.Z,{isVisible:!t&&this.completed.state,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},render:this.renderCompleted})]})}getContainerStyle(){return{...this.flexCenteredStyle,cursor:"default",padding:16,textAlign:"left",justifyContent:"start",background:this.theme.popoverBackground,borderRadius:4,boxShadow:this.theme.lightBoxShadow,position:"absolute",bottom:65+Pn.Z.state,right:16+Pn.Z.state,width:325,height:400,zIndex:ne.hT,clipPath:"inset(-10px -10px -10px -10px)"}}getCancelStyle(){return{position:"absolute",top:"10px",right:"10px",background:this.theme.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center"}}getCompletedTitleStyle(){return{color:this.theme.regularTextColor,fontWeight:B.Z.fontWeight.semibold,fontSize:14}}getCompletedDescriptionStyle(){return{color:this.theme.mediumTextColor,fontSize:12}}}Vs.displayName="TemplateChecklist";const Os=Vs;var Ds=n(31156);class zs extends r.Z{constructor(){super(...arguments),this.storeTypes={templateChecklistButtonStore:Ms},this.handleCancel=()=>{const{templateChecklistRecord:e}=this.stores.templateChecklistButtonStore.state;e&&(!function(e){const{environment:t,record:n}=e,i={opt_out:!0};qt.createAndCommit({userAction:"templateChecklistActions.optOut",environment:t,perform:e=>{zt.sW({store:n,data:i,transaction:e})}})}({environment:this.environment,record:e}),xs.setState({...xs.state,open:!1}))}}renderComponent(){const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=_.default.state;if(null!=e&&e.isDefined()&&null!=t&&t.isDefined())return(0,F.jsx)(_s.Z,{throttle:1e3,request:{spaceId:t.id,blockId:e.id},performRequest:async e=>{let{blockId:t,spaceId:n}=e;const i=await Re.getTemplateChecklistForBlock(this.environment,{blockId:t,spaceId:n});if("success"===i.type){const{templateChecklistId:e}=i.data;if(!e)return;const t=new A.XJ(this.environment,{table:Ss.$,id:e});if(this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,templateChecklistRecord:t}),t.isDefined()){const e=bs.Z.get({userId:this.environment.currentUser.id,key:ws(t.id)});this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,hide:"boolean"==typeof e&&!e})}}},render:(e,t,n)=>{if(!n)return;const{templateChecklistRecord:i,completed:s}=this.stores.templateChecklistButtonStore.state;if(null==i||!i.isDefined()||i.getStepsCompleted().length===i.getSteps().length||s)return;const o=new Is;return o.setState({...o.state,templateChecklistRecord:i}),this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,templateChecklistRecord:i}),i.getOptOut()?void 0:(0,F.jsxs)("div",{children:[(0,F.jsxs)(Ts.Z,{style:this.getRoundButtonStyle(),hoveredStyle:{background:this.theme.whiteButtonHoveredBackground},pressedStyle:{background:this.theme.whiteButtonPressedBackground},onClick:()=>{const e=this.stores.templateChecklistButtonStore.state.hide;this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,hide:!e}),this.setVisibilityLocalStorage(e,i.id)},children:[(0,fs.L)({height:18}),this.stores.templateChecklistButtonStore.state.hide&&(0,F.jsx)(Ts.Z,{onClick:this.handleCancel,style:this.getCancelStyle(),hoveredStyle:{background:this.theme.buttonPressedBackground},children:(0,vs.D)({width:14,fill:this.theme.mediumTextColor})})]}),!this.stores.templateChecklistButtonStore.state.hide&&(0,F.jsx)(Os,{templateChecklistStore:o,onComplete:()=>this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,completed:!0}),onCancel:()=>{this.setVisibilityLocalStorage(!1,i.id),this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,hide:!0})}})]})}})}setVisibilityLocalStorage(e,t){bs.Z.set({userId:this.environment.currentUser.id,key:ws(t),value:e})}getRoundButtonStyle(){return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",background:this.theme.buttonBackground,bottom:16+Pn.Z.state,right:60+Pn.Z.state,width:36,height:36,borderRadius:"100%",boxShadow:this.theme.lightBoxShadow,zIndex:ne.hT,opacity:ce.tu.state?0:1,transition:`\n\t\t\t\topacity ${Ds.Z.transitionDuration}ms,\n\t\t\t\tcolor ${Ds.Z.transitionDuration}ms\n\t\t\t`}}getCancelStyle(){return{position:"absolute",top:-2,right:-1,background:this.theme.buttonHoveredBackground,borderRadius:"100%"}}}zs.displayName="TemplateChecklistButton";const Fs=zs;var Ws=n(90965);function qs(e){let{}=e;window.__c={n:"TransferWorkspaceModalWrapper"};const t=(0,U.VK)((()=>_.default.state.currentSpaceStore),[]),n=(0,U.VK)((()=>{var e;if(!t)return;const n=null===(e=t.getSettings())||void 0===e?void 0:e.space_request;return(0,Ws.DI)(n)?n:void 0}),[t]);return n?(0,F.jsx)(o.LazyTransferWorkspaceModal,{workspaceTransfer:n}):null}class Hs extends r.Z{constructor(){super(...arguments),this.appRenderState=this.createComputedStore((()=>ce.h1(this.environment))),this.handleFrameBlockerClick=()=>{be.close()},this.showHelpButtonStore=this.createComputedStore((()=>{if(!this.environment.currentUser.isLoggedIn())return!1;if(this.environment.device.isMobile)return!1;const{mainEditorCurrentBlockStore:e}=_.default.state;return!!e&&(!(0,he.IJ)(this.environment,e)&&!this.shouldIncludeAssistantButton.state)})),this.showTemplateChecklistStore=this.createComputedStore((()=>{if(!this.environment.currentUser.isLoggedIn())return!1;if(this.environment.device.isMobile)return!1;const{mainEditorCurrentBlockStore:e}=_.default.state;if(!e)return!1;return!("on"!==Te.default.getGroup("template-checklist"))})),this.isAssistantLabelerModeEnabledStore=this.createComputedStore((()=>(0,ue.Gw)())),this.isAssistant2EnabledStore=this.createComputedStore((()=>je.Z.isAssistant2Enabled())),this.shouldIncludeAssistantButton=this.createComputedStore((()=>{const{device:e}=this.environment,{RouterStore:t}=this.environment,{route:n}=t.state;return"chat"!==n.name&&je.Z.shouldShowAssistantInCorner(e)})),this.frameBlockerStyle={position:"absolute",top:0,left:(0,xe.qG)(this.environment),right:0,bottom:0,zIndex:ne.l6}}didMount(){var e;null!==(e=this.environment.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&this.environment.mobileNative.api.appComponentMountState(!0),Te.default.checkGate("use_new_undo_redo_behavior")&&se.mF()}willUnmount(){var e;null!==(e=this.environment.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&this.environment.mobileNative.api.appComponentMountState(!1)}renderComponent(){const{isElectronMac:e,isMobile:t}=this.environment.device,{RouterStore:n}=this.environment,{route:i}=n.state,{mainEditorCurrentBlockStore:s,currentSpaceStore:r,currentUserRootStore:a,currentCollectionViewStore:d,currentUserSettingsStore:l}=_.default.state,{publicPageData:c}=Me.Z.state,u=this.environment.currentUser.isLoggedIn(),g=ye.TC.state,v=(0,xe.in)(this.environment),{state:{shouldShowSidebar:f,shouldShowFrame:b,shouldShowError:S}}=this.appRenderState,y="page"===i.name&&i.shouldDuplicate&&s&&(0,he.S4)(s),w="page"===i.name&&s&&le.Z.state.open&&(0,he.S4)(le.Z.state.blockStore),k=!u&&"modal"===i.name&&(i.templateGalleryItem||i.projectManagementLaunch),C="page"===i.name&&i.workspaceId?i.workspaceId:void 0,M=(0,h.wO)(i)&&a||"nativeTab"===i.name&&a||"quickSearch"===i.name&&a||a||s,j="nativeTab"===i.name&&"search"===i.tab||"quickSearch"===i.name,I=this.isAssistant2EnabledStore.state&&"chat"===i.name,T="quickSearch"===i.name,A="nativeTab"===i.name,P=(0,Ce.Y)("supportsNativeHome"),L=te("production",this.environment.device)||!(0,Ce.Y)("supportsNativeSearch"),U=(0,ve.H)(),E=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o.LazySidebarCreateTeamModal,{}),(0,F.jsx)(o.LazySidebarTeamModal,{}),(0,F.jsx)(o.LazyCreateTeamFromPageConfirmModal,{}),(0,F.jsx)(o.LazyConfirmPrivilegedActionModal,{})]});ie.wk({environment:this.environment});const Z=Ae.default.state.data;if(k){const{environment:e}=this;return i.projectManagementLaunch?x.setQueryParamRedirect({currentUserId:void 0,params:{tg:"gallery"}}):i.templateGalleryItem&&x.setQueryParamRedirect({currentUserId:void 0,params:{tg:i.templateGalleryItem}}),void x.navigate({environment:e,url:m._j.login})}return T?(0,F.jsxs)(st.Z,{style:this.getStyle(),children:[M&&!S&&L&&(0,F.jsx)(o.LazySearch,{parentStore:M,renderAsPage:!0,renderId:(0,p.ZP)(),quickSearchMode:!0}),"rendered"===_.default.state.renderPhase&&(0,F.jsx)(o.LazyAppComponents,{})]}):(0,F.jsxs)(st.Z,{style:this.getStyle(),children:[f&&!t&&(0,F.jsx)(Ks,{isElectronMac:e,isExpanded:v}),f&&t&&!P&&(0,F.jsx)(o.LazySidebarMobile,{}),f&&t&&P&&(0,F.jsx)(o.LazyTopLevelMobileComponents,{}),f&&U&&(0,F.jsx)(ge.HX,{}),(0,F.jsx)(it,{}),(0,F.jsx)(X.R,{}),"workspaceSetup"===i.name&&(0,F.jsx)(o.LazyAppsSetup,{}),s&&b&&(0,F.jsx)(un.Z,{routerState:this.props.routerState,store:s,collectionViewStore:d}),I&&"chat"===i.name&&(0,F.jsx)(ae.PS,{route:i}),y?(0,F.jsx)(cn,{blockId:i.blockId,workspaceId:C,tid:i.tid,from:i.from}):w&&(0,F.jsx)(o.LazyForkPageModal,{}),S&&c&&!y&&(0,F.jsx)(o.LazyPageError,{route:this.props.routerState.route,publicPageData:c}),f&&!(0,xe.Jr)(this.environment)&&g&&this.renderMobileSidebarFrameBlocker(),(0,F.jsx)(dt,{}),this.showHelpButtonStore.state&&(0,F.jsx)(pn.Z,{}),this.shouldIncludeAssistantButton.state&&(0,F.jsx)(ae.eC,{}),this.shouldIncludeAssistantButton.state&&(0,F.jsx)(ae.Q,{}),this.showTemplateChecklistStore.state&&(0,F.jsx)(Fs,{}),this.isAssistantLabelerModeEnabledStore.state&&(0,F.jsx)(ae.Zl,{}),s&&(0,F.jsx)(Yt,{pageStore:s,environment:this.environment}),(0,ue.GD)(void 0)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(re.u7,{}),(0,F.jsx)(oe.oF,{})]}),(0,pe.u)(this.environment)&&(0,F.jsx)(Nt,{}),this.shouldShowMobileBottomBar()&&u&&s&&r&&(0,F.jsx)(o.LazyMobileBottomBar,{store:s}),!t&&"nativeTab"!==this.props.routerState.route.name&&"workspaceSetup"!==this.props.routerState.route.name&&(0,F.jsx)(ms,{}),"rendered"===_.default.state.renderPhase&&(0,F.jsxs)(F.Fragment,{children:[u&&(0,F.jsxs)(F.Fragment,{children:[E,(0,F.jsx)(me,{}),(0,F.jsx)(o.LazyCustomizePageMenuRenderer,{}),(0,F.jsx)(o.LazyTopbarPageAnalyticsOptOutMenu,{}),(0,F.jsx)(o.LazyImportModal,{}),(0,F.jsx)(o.LazyExportModal,{}),(0,F.jsx)(o.LazyPageTemplateModal,{}),(0,F.jsx)(o.LazyTemplateGalleryModal,{}),(0,F.jsx)(o.LazyIntegrationGalleryModal,{}),(0,F.jsx)(o.LazyGoogleAuthPromptModal,{}),(0,F.jsx)(o.LazyStudentNotEligibleModal,{}),(0,F.jsx)(o.LazyTypedDBMigrationModal,{}),(0,F.jsx)(o.LazyContactModal,{}),(0,F.jsx)(o.LazyPersonaCollectionModal,{}),(0,F.jsx)(o.LazyCookieModal,{}),(0,F.jsx)(o.LazyAutomationModal,{}),Ie.Z.state.open&&(0,F.jsx)(o.LazyConfirmOverwriteModal,{...Ie.Z.state}),(0,F.jsx)(o.LazyConfigureIntegrationModal,{}),(0,F.jsx)(o.LazyConnectOAuthIntegrationModal,{}),r&&Z&&_e.Z.state.open&&(0,F.jsx)(o.LazySpaceSubscriptionUpgradeModal,{data:Z,spaceStore:r}),r&&Z&&ze.Z.state.open&&(0,F.jsx)(o.LazyClaimAndUpgradeModal,{spaceStore:r,data:Z}),r&&Z&&(0,F.jsx)(o.LazySpaceSubscriptionUpdateModal,{data:Z}),r&&Z&&(0,F.jsx)(o.LazyAddOnUpgradeModal,{data:Z}),r?(0,F.jsx)(o.LazySubscriptionDebugCommands,{}):null,l&&r&&s&&(0,F.jsx)(o.LazyCsatPopup,{userSettingsStore:l,spaceStore:r,blockStore:s}),b&&(0,F.jsx)(o.LazyOpenInDesktopAppPopup,{}),b&&(0,F.jsx)(o.LazyWikiPromoPopup,{}),b&&(0,F.jsx)(o.LazyAddOnDiscountPopup,{}),b&&!1,b&&!1,b&&(0,F.jsx)(o.LazyEnterpriseLaunchModal,{})]}),(0,F.jsx)(o.LazyReportPageModal,{}),M&&!S&&L&&(0,F.jsx)(o.LazySearch,{parentStore:M,renderAsPage:j,renderId:j?(0,p.ZP)():void 0,quickSearchMode:!1}),A&&(0,F.jsx)(o.LazyMobileNativeFullPageComponents,{route:i}),(0,F.jsx)(o.LazyForkPagePopup,{}),void 0,(0,F.jsx)(qs,{}),void 0]}),(0,F.jsx)(Pt,{}),"rendered"===_.default.state.renderPhase&&(0,F.jsx)(ct,{}),"rendered"===_.default.state.renderPhase&&(0,F.jsx)(o.LazyAppComponents,{}),(0,F.jsx)(Ut,{}),f&&!t&&s&&(0,F.jsx)(ge.$H,{currentBlockStore:s,isElectronMac:e}),(0,F.jsx)(o.LazyAdminModeBannerListener,{}),(0,F.jsx)(Oe.Z,{}),(0,F.jsx)(De.Z,{}),(0,F.jsx)(gs.Z,{subscriptionDataStore:Ae.default}),(0,F.jsx)(fn,{}),(0,F.jsx)(Ve,{}),(0,F.jsx)(Ue,{}),(0,F.jsx)(de.j,{}),(0,F.jsx)(Ge,{}),(0,F.jsx)(Sn,{})]})}renderMobileSidebarFrameBlocker(){return(0,F.jsx)("div",{style:this.frameBlockerStyle,onClick:this.handleFrameBlockerClick})}shouldShowMobileBottomBar(){const{isTablet:e,isMobileNative:t,isIOS:n}=this.environment.device;return t&&n&&!e}getStyle(){const{mainEditorCurrentBlockStore:e}=_.default.state;return{width:"100vw",height:"100%",position:"relative",display:"flex",flex:1,background:(0,fe.WE)(e)?this.theme.personalHomeBackground:this.theme.contentBackground}}}function Ks(e){let{isElectronMac:t,isExpanded:n}=e;window.__c={n:"AppLazySidebarComponent"};const s=(0,i.useCallback)((()=>(0,F.jsx)(we,{})),[]);return(0,F.jsx)(o.LazySidebarComponent,{isElectronMac:t,isExpanded:n,renderLoading:s})}Hs.displayName="App";const Gs=Hs;var $s=n(3403),Qs=n(97880);var Ys=n(40754);function Xs(e){let{payload:t}=e;window.__c={n:"ConfirmUnsubscribePage"};const n=(0,L.O7)(),[s,o]=(0,i.useState)(t?{type:"unconfirmed"}:{type:"error"}),r=(0,i.useCallback)((async()=>{if(!t)return void o({type:"error"});o({type:"loading"});const e=await async function(e){let{environment:t,payload:n}=e;const i=await Re.unsubscribeFromEmails(t,{payload:n});return"success"===i.type?{type:"success",spaceName:i.data.spaceName}:{type:"error"}}({environment:n,payload:t});o("error"===e.type?{type:"error"}:{type:"confirmed",spaceName:e.spaceName})}),[n,t]),a=(0,E.yK)((()=>({confirmUnsubscribeDescription:{marginBottom:10}})),[]);switch(s.type){case"loading":return(0,F.jsx)(Ys.Z,{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Loading…",id:"confirmUnsubscribePage.loadingMessage"})});case"unconfirmed":return(0,F.jsxs)(Ys.Z,{children:[(0,F.jsx)("div",{style:a.confirmUnsubscribeDescription,children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Are you sure you want to unsubscribe from this list?",id:"unsubscribeFromEmails.workspace.confirmUnsubscribeDescription"})}),(0,F.jsx)(N.Z,{isLarge:!0,onClick:r,children:(0,F.jsx)(b.FormattedMessage,{id:"confirmUnsubscribePage.confirmButton",defaultMessage:"Unsubscribe"})})]});case"confirmed":return(0,F.jsx)(Ys.Z,{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"You have successfully unsubscribed from emails for {workspaceName}",values:{workspaceName:(0,F.jsx)("b",{children:s.spaceName})},id:"unsubscribeFromEmails.workspace.message"})});case"error":return(0,F.jsx)(Ys.Z,{children:(0,F.jsx)(b.FormattedMessage,{id:"confirmUnsubscribePage.errorMessage",defaultMessage:"Could not unsubscribe."})});default:(0,Qs.t1)(s)}}n(82801);var Js=n(73420);const eo=(0,b.defineMessages)({pageTitle:{id:"desktopEmailConfirmPage.title",defaultMessage:"Please check your email to confirm"},pageCaption:{id:"desktopEmailConfirmPage.subtitle",defaultMessage:"Almost there!"},pageDescription1:{id:"desktopEmailConfirmPage.description1",defaultMessage:"Please check your email and click the link to confirm."},pageDescription2:{id:"desktopEmailConfirmPage.description2",defaultMessage:"Once confirmed, you'll be able to return to the desktop app to complete signup."},checkYourGmail:{id:"desktopEmailConfirmPage.button.checkYourGmail",defaultMessage:"Check your Gmail inbox"}}),to=()=>(0,F.jsxs)("svg",{style:{display:"block",height:42},viewBox:"0 0 87 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,F.jsx)("path",{d:"M1.805 1.294l16.6-1.226c2.039-.175 2.563-.057 3.845.875l5.299 3.733c.874.642 1.165.817 1.165 1.516v20.473c0 1.283-.466 2.042-2.097 2.158L7.34 29.99c-1.224.058-1.807-.117-2.448-.934L.99 23.982c-.7-.934-.99-1.633-.99-2.45V3.334c0-1.049.466-1.924 1.805-2.04z",fill:"#fff"}),(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.405.068l-16.6 1.226C.466 1.41 0 2.285 0 3.334v18.198c0 .817.29 1.516.99 2.45l3.902 5.074c.641.817 1.224.992 2.448.934l19.277-1.167c1.63-.116 2.097-.875 2.097-2.158V6.192c0-.663-.262-.854-1.033-1.42a85.473 85.473 0 01-.133-.096L22.25.943c-1.282-.932-1.806-1.05-3.845-.875zM7.776 5.857c-1.574.106-1.931.13-2.825-.597L2.678 3.452c-.231-.234-.115-.526.467-.584l15.958-1.166c1.34-.117 2.038.35 2.562.758l2.737 1.983c.117.059.408.408.058.408l-16.48.992-.204.014zM5.941 26.49V9.11c0-.759.233-1.109.931-1.168L25.8 6.834c.642-.058.932.35.932 1.108v17.264c0 .759-.117 1.401-1.165 1.459l-18.113 1.05c-1.048.058-1.513-.291-1.513-1.225zm17.88-16.448c.116.525 0 1.05-.525 1.11l-.873.173v12.832c-.758.408-1.456.641-2.039.641-.932 0-1.165-.292-1.863-1.166l-5.709-8.982v8.69l1.806.409s0 1.05-1.457 1.05l-4.017.233c-.117-.234 0-.817.407-.933l1.049-.291v-11.49L9.144 12.2c-.117-.525.174-1.283.99-1.342l4.31-.29 5.94 9.098v-8.049l-1.514-.174c-.117-.643.349-1.11.931-1.167l4.02-.234z",fill:"#000"}),(0,F.jsx)("path",{className:"fill",d:"M41.434 21.251v-7.91h.137l5.704 7.91h1.796V9.627h-1.997v7.902h-.137l-5.704-7.902H39.43V21.25h2.005zM54.715 21.429c2.635 0 4.238-1.724 4.238-4.584 0-2.852-1.611-4.584-4.238-4.584-2.618 0-4.237 1.74-4.237 4.584 0 2.86 1.595 4.584 4.237 4.584zm0-1.676c-1.393 0-2.19-1.063-2.19-2.908 0-1.837.797-2.908 2.19-2.908 1.386 0 2.183 1.071 2.183 2.908 0 1.845-.789 2.908-2.183 2.908zM60.778 10.28v2.215h-1.393v1.595h1.393v4.809c0 1.708.806 2.393 2.828 2.393.386 0 .757-.04 1.047-.097v-1.563c-.242.024-.395.04-.677.04-.837 0-1.208-.386-1.208-1.256V14.09h1.885v-1.595h-1.885v-2.216h-1.99zM65.85 21.251h1.99v-8.813h-1.99v8.813zm.991-10.27c.66 0 1.192-.533 1.192-1.201 0-.669-.531-1.209-1.192-1.209-.652 0-1.192.54-1.192 1.209 0 .668.54 1.2 1.192 1.2zM73.299 21.429c2.634 0 4.237-1.724 4.237-4.584 0-2.852-1.611-4.584-4.237-4.584-2.619 0-4.238 1.74-4.238 4.584 0 2.86 1.595 4.584 4.238 4.584zm0-1.676c-1.394 0-2.192-1.063-2.192-2.908 0-1.837.798-2.908 2.192-2.908 1.385 0 2.183 1.071 2.183 2.908 0 1.845-.79 2.908-2.183 2.908zM78.725 21.251h1.998V16.12c0-1.297.75-2.119 1.941-2.119 1.217 0 1.78.677 1.78 2.022v5.228h1.999v-5.703c0-2.103-1.072-3.287-3.037-3.287-1.314 0-2.2.604-2.619 1.587h-.137v-1.41h-1.925v8.813z",fill:"#000"})]});function no(){return(0,F.jsx)("div",{style:{padding:24},children:(0,F.jsx)(to,{})})}function io(e){const{experimentVariant:t}=e;return(0,F.jsx)("div",{style:{width:800,height:"80vh",margin:"0 auto"},children:(0,F.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},children:[(0,F.jsxs)(Js.sg,{gap:16,padding:16,children:[(0,F.jsx)("div",{style:{fontSize:36,fontWeight:B.Z.fontWeight.bold},children:(0,F.jsx)(b.FormattedMessage,{...eo.pageTitle})}),(0,F.jsx)("div",{style:{fontWeight:B.Z.fontWeight.bold},children:(0,F.jsx)(b.FormattedMessage,{...eo.pageCaption})}),(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{...eo.pageDescription1})}),(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{...eo.pageDescription2})}),"with_gmail_cta"===t&&(0,F.jsx)(N.Z,{style:{width:"fit-content"},isLarge:!0,onClick:()=>{window.location.href="https://mail.google.com/mail/u/0/#search/Your+Notion+signup+code+is"},children:(0,F.jsx)(b.FormattedMessage,{...eo.checkYourGmail})})]}),(0,F.jsx)(Js.sg,{children:(0,F.jsx)("img",{style:{width:350},src:ut.Z.images.onboarding.couch2Png})})]})})}function so(){window.__c={n:"DesktopEmailConfirmPage"};const e=(0,L.O7)(),[t,n]=(0,i.useState)(null);return(0,i.useEffect)((()=>{try{const t=new URLSearchParams(window.location.search).get("state");if(!t)return;const i=JSON.parse(atob(t));i.experimentVariant&&n(i.experimentVariant),i.email&&i.deviceId&&S.$kb(e,{desktopAppRerouteEmail:i.email,desktopAppDeviceId:i.deviceId})}catch(t){}}),[e,n]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(no,{}),(0,F.jsx)(io,{experimentVariant:t})]})}n(84456),n(53238);var oo=n(13559),ro=n(44819);function ao(e){window.__c={n:"FrontFallbackPage"};const{preventFrontRedirect:t}=e,n=(0,L.O7)(),{pathname:i,search:s,hash:r}=window.location;if(!t&&(0,ro.XR)(n,i)){const e=s.length>0?`${s}&${oo.AM}=1`:`?${oo.AM}=1`;return window.location.href=i+e+r,null}return(0,F.jsx)(o.LazyFrontLoginPage,{isSignup:!n.currentUser.isLoggedIn()})}var lo=n(26198);class co extends r.Z{constructor(){super(...arguments),this.intersectionObserver=void 0,this.registry=new Map,this.handleIntersectionObserverEntries=(e,t)=>{for(const n of e){if(!(n.target instanceof HTMLElement))continue;const e=this.registry.get(n.target);e&&(e.isVisible=n.isIntersecting,e.latestTimestamp=n.time,e.isVisible&&!e.isSpawned&&(e.isSpawned=!0,e.onVisibilityChange(!0)))}this.despawnOldFrames()}}willMount(){void 0!==window.IntersectionObserver&&(this.intersectionObserver=new IntersectionObserver(this.handleIntersectionObserverEntries))}willUnmount(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}didUpdate(e){this.props.maxPreferredIFrames<e.maxPreferredIFrames&&this.despawnOldFrames()}despawnOldFrames(){const e=Array.from(this.registry.values()).filter((e=>e.isSpawned)),t=e.length-this.props.maxPreferredIFrames;if(t<=0)return;const n=e.filter((e=>!e.isVisible));n.sort(((e,t)=>e.latestTimestamp-t.latestTimestamp));for(const i of n.slice(0,t))i.isSpawned=!1,i.onVisibilityChange(!1)}track(e,t){this.intersectionObserver?(this.registry.set(e,{isVisible:!1,isSpawned:!1,latestTimestamp:0,onVisibilityChange:Qe.Ds(t,50)}),this.intersectionObserver.observe(e)):lo.uf.track(e,t)}untrack(e){this.intersectionObserver?(this.intersectionObserver.unobserve(e),this.registry.delete(e)):lo.uf.untrack(e)}renderComponent(){return(0,F.jsx)(lo.Lr.Provider,{value:this,children:this.props.children})}}function uo(e){let t=e.isMobile?10:50;return e.ramSizeInGB&&(t=Math.floor(2*e.ramSizeInGB)),{maxPreferredIFrames:t}}co.displayName="IFrameManager";var po=n(25777);const ho=function(e){window.__c={n:"Index"};const t=(0,L.O7)(),n={position:"absolute",top:0,left:0,bottom:0,right:0},{device:i}=t;return t.currentUser.isLoggedIn()?(0,F.jsx)("div",{style:n,children:(0,F.jsx)(po.Z,{style:{width:"100%",height:"100%"},spinnerSize:un.Z.spinnerSize,showSpinnerTimeout:500})}):i.isElectron?(0,F.jsx)(o.LazyLoginDesktop,{}):i.isMobileNative?(0,F.jsx)(o.LazyLoginMobileNative,{}):(0,F.jsx)(ao,{preventFrontRedirect:!0})};var mo=n(42402),go=n(83785),vo=n(84076);class fo extends r.Z{constructor(){super(...arguments),this.handleOpenInNativeApp=()=>{x.openInNativeApp({url:this.props.redirect,environment:this.environment})}}didMount(){this.handleOpenInNativeApp()}renderComponent(){return(0,F.jsxs)(Ys.Z,{children:[(0,F.jsx)("div",{style:{color:this.theme.regularTextColor},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Redirecting to your Notion app…",id:"webApp.redirectingToDesktop.message"})}),(0,F.jsx)(vo.Z,{onClick:this.handleOpenInNativeApp,style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:this.theme.lightTextColor},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"If you weren't redirected, click here.",id:"webApp.redirectingToDesktop.directLink.message"})}),(0,F.jsx)(vo.Z,{href:this.props.redirect,style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:c.ZP.uiGray},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Or, continue in your browser",id:"webApp.redirectingToDesktop.continueInBrowser.message"})})]})}}fo.displayName="NativeRedirect";const bo=fo;var So=n(93214),yo=n(24211),wo=n(90287),ko=n(47307),xo=n(57400),Co=n(24215),Mo=n(22974),jo=n(30021);function Io(){return window.__c={n:"AppearanceSettingListener"},function(){const e=(0,L.O7)(),t=(0,i.useCallback)((()=>{Mo.LH(e)}),[e]);(0,i.useEffect)((()=>(t(),jo.Z.addListener(t),()=>{jo.Z.removeListener(t)})),[t])}(),null}var To=n(12955),_o=n(81236);function Ao(){return window.__c={n:"IdentifyCurrentUser"},function(){const e=(0,L.O7)(),t=(0,L.Fy)(),n=(0,U.VK)((()=>{const{currentUserStore:n,currentUserSettingsStore:i,currentUserRootStore:s}=_.default.state;if(!(e.currentUser.id&&n&&i&&s)){const t=(0,To.getPublicDomainUserId)(e);return t?{user_id:t}:void 0}const o=s.getSpaceViewStores(),r=o.length>0&&o.every((e=>e.isReady()));if(!n.isDefined()||!i.isDefined()||!r)return;const a=Qe.oA(o.map((e=>e.getSpaceId()))).map((t=>_o.Z.getPublicSpaceData(e,t)));if(!a.every((e=>Boolean(e)||null===e)))return;const d=(0,Co.ls)(a),l=i.getSettings();if(!l)return;if(void 0===Ae.default.state.data)return;const c={user_id:n.id,email:n.getEmail(),user_persona:l.persona,user_team_role:l.team_role,user_use_cases:l.use_cases,user_company_size:l.company_size,user_source:l.source,user_plan_type:d,user_subscription_tier:Ae.default.state.data.subscriptionTier,user_has_at_least_one_free_tier_space:(0,Co.nZ)(a),time_zone:l.time_zone,locale:l.locale,preferred_locale:l.preferred_locale,signup_time:l.signup_time,app_version:t.version};return l.signup_time&&(c.created_at=Math.floor(l.signup_time/1e3)),t.desktopAppVersion&&(c.desktop_app_version=t.desktopAppVersion),t.mobileAppVersion&&(c.mobile_app_version=t.mobileAppVersion),l.used_desktop_web_app&&(c.used_desktop_web_app=l.used_desktop_web_app),l.used_mobile_web_app&&(c.used_mobile_web_app=l.used_mobile_web_app),l.used_mac_app&&(c.used_mac_app=l.used_mac_app),l.used_windows_app&&(c.used_windows_app=l.used_windows_app),l.used_ios_app&&(c.used_ios_app=l.used_ios_app),l.used_android_app&&(c.used_android_app=l.used_android_app),c}),[e,t],{useDeepEqual:!0});(0,i.useEffect)((()=>{n&&"none"!==n.user_plan_type&&Po(e,n)}),[e,n]);const s=void 0!==n;(0,i.useEffect)((()=>{const t=window.setTimeout((()=>{!s&&e.currentUser.id&&Po(e,{user_id:e.currentUser.id})}),5e3);return()=>{window.clearTimeout(t)}}),[e,s])}(),null}const Po=Qe.P2(S.XWf,5e3);var Lo=n(55632),Uo=n(58455);function Eo(){return window.__c={n:"InitializeEventTrailApi"},function(){const e=(0,L.O7)(),t=(0,U.VK)((()=>Uo.default.state.isLoaded),[]),n=(0,U.VK)((()=>Uo.default.state.isLoggingEnabled),[]);(0,i.useEffect)((()=>{t&&async function(){const t=await(0,Co.cG)(e);await Lo.j2({config:T.default,isEnabled:n,deviceId:t})}()}),[e,t,n])}(),null}var Zo=n(2991);function Ro(){return window.__c={n:"RegisterDesktopApp"},function(){const{deviceType:e}=(0,L.Fy)(),t=(0,L.O7)(),n=t.currentUser.isLoggedIn();(0,i.useEffect)((()=>{if(!n)return;if("windows-desktop"!==e&&"mac-desktop"!==e)return;const i=async()=>{await y.isMainTabOrWindow()&&Re.registerDesktopApp(t,{deviceType:e})};i();const s=window.setInterval((()=>{i()}),5*We.hM);return()=>{window.clearInterval(s)}}),[n,e,t])}(),null}function Bo(){return window.__c={n:"TrackLoadCachedPageChunkMetrics"},function(){const e=(0,L.O7)(),t=(0,i.useCallback)((t=>{const n={compressed:t.decodedBodySize!==t.encodedBodySize,local_cache_hit:0===t.transferSize,next_hop_protocol:t.nextHopProtocol,did_prefetch:e.prefetchCache.isEnabled},i={dns_lookup:{startTime:t.domainLookupStart,endTime:t.domainLookupEnd},connection_establish:{startTime:t.connectStart,endTime:t.connectEnd},request_queued:{startTime:t.connectEnd,endTime:t.requestStart},response_wait:{startTime:t.requestStart,endTime:t.responseStart},response_download:{startTime:t.responseStart,endTime:t.responseEnd}};_n.default.measure({metricName:"load_cached_page_chunk.fetch",startTime:t.fetchStart,endTime:t.responseEnd},{environment:e,data:{...n,sub_metrics:{dns_lookup:i.dns_lookup.endTime-i.dns_lookup.startTime,connection_establish:i.connection_establish.endTime-i.connection_establish.startTime,request_queued:i.request_queued.endTime-i.request_queued.startTime,response_wait:i.response_wait.endTime-i.response_wait.startTime,response_download:i.response_download.endTime-i.response_download.startTime}}});for(const[s,{startTime:o,endTime:r}]of Object.entries(i))_n.default.measure({metricName:`load_cached_page_chunk.fetch.${s}`,startTime:o,endTime:r},{environment:e,data:n})}),[e]);(0,i.useEffect)((()=>{const e=new PerformanceObserver((n=>{const i=n.getEntries().find((e=>e.name.includes(`${T.default.api.http}/loadCachedPageChunk`)&&!e.name.endsWith("s")));i&&("resource"===i.entryType&&t(i),null==e||e.disconnect())}));return e.observe({type:"resource",buffered:!0}),()=>{e.disconnect()}}),[t])}(),null}var No=n(98794),Vo=n(27534);class Oo extends r.Z{constructor(){super(...arguments),this.multiSelectionStartStore=void 0,this.multiSelectionEndStore=void 0,this.handleTextSelectionChange=()=>{const e=Gt.default.state,t="empty"===e.mode?void 0:e.multiSelection.start.store,n="empty"===e.mode?void 0:e.multiSelection.end.store;if(this.multiSelectionStartStore===t&&this.multiSelectionEndStore===n)return;if(this.multiSelectionStartStore=t,this.multiSelectionEndStore=n,this.multiSelectionStartStore!==this.multiSelectionEndStore)return;const i=Vo.getSimpleTableCellFromTextSelection();if(!i)return;const{rowIndex:s,columnIndex:o,simpleTableStore:r}=i.props;No.selectCell({environment:this.environment,rowIndex:s,columnIndex:o,simpleTableStore:r})}}willMount(){Gt.default.addListener(this.handleTextSelectionChange)}willUnmount(){Gt.default.removeListener(this.handleTextSelectionChange),this.multiSelectionStartStore=void 0,this.multiSelectionEndStore=void 0}}Oo.displayName="TextAndSimpleTableSelectionSyncer";const Do=Oo;var zo=n(82246),Fo=n(81212),Wo=n(4615);async function qo(e){var t,n;void 0!==_.default.state.currentUserStore&&void 0!==_.default.state.currentSpaceStore||await _.default.waitUntil((()=>void 0!==_.default.state.currentUserStore&&void 0!==_.default.state.currentSpaceStore));const i=null===(t=_.default.state.currentUserStore)||void 0===t?void 0:t.id,s=null===(n=_.default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(!document.hasFocus())return;if(!i||!s)return;const o=Co.Cd({userId:i,spaceId:s}),r=Date.now();o?Co.ci({userId:i,spaceId:s,session:{...o,lastFocusedTime:r}}):Co.ci({userId:i,spaceId:s,session:{id:(0,Wo.ZP)(),sessionStartTime:r,lastFocusedTime:r}})}function Ho(){return window.__c={n:"AnalyticsSessionListener"},function(){const e=(0,L.O7)();(0,i.useEffect)((()=>{let e;document.hasFocus()&&(e=setInterval((()=>{qo()}),6e4),qo());const t=()=>{e&&clearInterval(e),e=setInterval((()=>{qo()}),6e4),qo()},n=()=>{e&&clearInterval(e),e=void 0};return window.addEventListener("focus",t),window.addEventListener("blur",n),()=>{e&&clearInterval(e),window.removeEventListener("focus",t),window.removeEventListener("blur",n)}}),[e])}(),null}var Ko=n(54064),Go=n(88632),$o=n(29755),Qo=n(17963);const Yo=new Ko.Z;const Xo=function(){window.__c={n:"ApiListener"};const e=(0,i.useRef)(!1),t=(0,L.O7)(),n=(0,i.useCallback)((async e=>{if(e.currentUser.id&&Re.pendingTaskIds.size>0){const t=await Re.getTasks(e,{taskIds:Array.from(Re.pendingTaskIds.values())});if("success"===t.type){const{results:n}=t.data,i=new Set(Re.pendingTaskIds);for(const t of n)i.delete(t.id),t.status&&Re.handleRecordMapForResponse({environment:e,eventName:t.eventName,response:t.status,userId:e.currentUser.id}),Re.pendingTaskEventsById.emit(t.id,t),Yo.emit(t.eventName,t),"failure"!==t.state&&"success"!==t.state||Re.pendingTaskIds.delete(t.id);if(i.size>0)for(const e of i.values())Re.pendingTaskIds.delete(e)}}}),[]),s=(0,i.useCallback)((async e=>{if(e.currentUser.id){const t=await Re.getUserTasks(e,{});if("success"===t.type){for(const e of t.data.taskIds)Re.pendingTaskIds.add(e);t.data.taskIds.length>0&&n(e)}}}),[n]),o=(0,i.useCallback)((()=>{const n=Go.Z.state.online;n&&!e.current&&s(t),e.current=n}),[t,s]);function r(e){"success"===e.state?$o.Z.setStatus(e.request.blockId,void 0):"in_progress"===e.state||"not_started"===e.state?$o.Z.setStatus(e.request.blockId,e.status):$o.Z.setStatus(e.request.blockId,void 0)}function a(e){"success"===e.state?Qo.Z.setStatus(e.request.blockId,!1):"in_progress"===e.state||"not_started"===e.state?Qo.Z.setStatus(e.request.blockId,!0):Qo.Z.setStatus(e.request.blockId,!1)}return(0,i.useEffect)((()=>{e.current=Go.Z.state.online;const i=setInterval((()=>n(t)),1e3);return s(t),Go.Z.addListener(o),Yo.addListener("importEvernote",r),Yo.addListener("extractWebClipperContent",a),()=>{clearInterval(i),Go.Z.removeListener(o),Yo.removeListener("importEvernote",r),Yo.removeListener("extractWebClipperContent",a)}}),[t,n,o,s]),null};var Jo=n(12321);class er extends r.Z{async willMountOrUpdate(){const{currentUserRootStore:e}=_.default.state;if(!e)return;await Jo.w();const t=e.getSpaceViewStores();for(const n of t){const e=n.getBookmarkedPageStores();for(const n of e)nr(n);const t=n.getSharedPageStores();for(const n of t)nr(n);const i=n.getTeamsStores();for(const n of i){const e=n.getTeamPagesStores();for(const t of e)nr(t)}const s=n.getSpaceStore();if(s){_o.Z.getPublicSpaceData(this.environment,s.id);const e=(0,pi.XD)(this.environment,s);for(const t of e)nr(t)}}}}er.displayName="AppRecordStoreListener";const tr=er;function nr(e){e.load();const t=e.getCollectionViewSourceOrLinkCollectionStores();for(const n of t)n.load()}var ir=n(54153),sr=n(2449),or=n(10854),rr=n(73329),ar=n(85844);class dr extends r.Z{constructor(){super(...arguments),this.handleElectronUpdateChecking=()=>{const{AppUpdateStore:e}=this.environment;e.setState({appUpdate:e.state.appUpdate,electronUpdate:{state:"checking"}})},this.handleElectronUpdateError=(e,t)=>{const{AppUpdateStore:n}=this.environment;n.setState({appUpdate:n.state.appUpdate,electronUpdate:{state:"error",error:t}})},this.handleElectronUpdateNotAvailable=()=>{const{AppUpdateStore:e}=this.environment;e.setState({appUpdate:e.state.appUpdate,electronUpdate:{state:"no-update",timestamp:Date.now()}})},this.handleElectronUpdateAvailable=(e,t)=>{const{AppUpdateStore:n}=this.environment,i=(0,ee.parseVersion)(t.version),s=y.getDesktopVersion(),o=(0,ee.getUpdateType)({currentVersion:s,nextVersion:i,app:"desktop"});n.setState({appUpdate:n.state.appUpdate,electronUpdate:{state:"downloading",type:o,version:i,timestamp:Date.now(),progress:0}})},this.handleElectronUpdateProgress=(e,t)=>{const{AppUpdateStore:n}=this.environment,i=n.state;i.electronUpdate&&"downloading"===i.electronUpdate.state&&n.setState({appUpdate:i.appUpdate,electronUpdate:{...i.electronUpdate,progress:t.transferred/t.total}})},this.handleElectronUpdateReady=(e,t)=>{const{device:n}=this.environment,{AppUpdateStore:i}=this.environment,s=ir.Z.get(or.Tm),o=t.version;if(s===o){if(n.isMac)return i.setState({appUpdate:i.state.appUpdate,electronUpdate:{state:"ready",type:ee.UpdateType.Major,version:void 0}}),void ko.showDialog({message:(0,F.jsx)(b.FormattedMessage,{id:"desktopAppUpdater.moveNotionToApplicationsFolderDialog.prompt",defaultMessage:"Please move the Notion app into the Applications folder for the auto-updater to work."}),showCancel:!1,keepFocus:!1,handleCancel:()=>(0,or.mK)(this.environment),items:[{label:(0,F.jsx)(b.FormattedMessage,{id:"desktopAppUpdater.moveNotionToApplicationsFolderDialog.dismissButton.label",defaultMessage:"Okay"}),onAccept:()=>(0,or.mK)(this.environment)}]});Ti.log({level:"error",from:"AppUpdateListener",type:"electronUpdateFailed",data:{miscDataToConvertToString:{previousUpdateReady:s,nextUpdateReady:o}}})}const r=y.getDesktopVersion(),a=(0,ee.parseVersion)(t.version),d=(0,ee.getUpdateType)({currentVersion:r,nextVersion:a,app:"desktop"});i.setState({appUpdate:i.state.appUpdate,electronUpdate:{state:"ready",type:d,version:a}})},this.handleAppUpdateChecking=()=>{const{AppUpdateStore:e}=this.environment;e.state.appUpdate&&"ready"===e.state.appUpdate.state||e.setState({electronUpdate:e.state.electronUpdate,appUpdate:{state:"checking"}})},this.handleElectronAppUpdateError=(e,t)=>{this.handleAppUpdateError(t)},this.handleAppUpdateError=e=>{const{AppUpdateStore:t}=this.environment;t.state.appUpdate&&"ready"===t.state.appUpdate.state||t.setState({electronUpdate:t.state.electronUpdate,appUpdate:{state:"error",error:e}})},this.handleAppUpdateNotAvailable=()=>{const{AppUpdateStore:e}=this.environment;e.state.appUpdate&&"ready"===e.state.appUpdate.state||e.setState({electronUpdate:e.state.electronUpdate,appUpdate:{state:"no-update",timestamp:Date.now()}})},this.handleElectronAppUpdateAvailable=(e,t)=>{this.handleAppUpdateAvailable(t)},this.handleAppUpdateAvailable=e=>{const{AppUpdateStore:t}=this.environment;if(t.state.appUpdate&&"ready"===t.state.appUpdate.state)return;const n=(0,ee.parseVersion)(e.version),i=sr.ac(),s=(0,ee.getUpdateType)({currentVersion:i,nextVersion:n,app:"client"});t.setState({electronUpdate:t.state.electronUpdate,appUpdate:{state:"downloading",type:s,version:n,timestamp:Date.now(),progress:0}})},this.handleElectronAppUpdateProgress=(e,t)=>{this.handleAppUpdateProgress(t)},this.handleAppUpdateProgress=e=>{const{AppUpdateStore:t}=this.environment,n=t.state;n.appUpdate&&"downloading"===n.appUpdate.state&&t.setState({electronUpdate:n.electronUpdate,appUpdate:{...n.appUpdate,progress:e.downloaded/e.total}})},this.handleElectronAppUpdateReady=(e,t)=>{this.handleAppUpdateReady(t)},this.handleAppUpdateReady=e=>{const{AppUpdateStore:t}=this.environment,n=(0,ee.parseVersion)(e.version),i=sr.ac(),s=(0,ee.getUpdateType)({currentVersion:i,nextVersion:n,app:"client"});if(!sr.M0(n)){const e={state:"ready",type:s,version:n};t.setState({electronUpdate:t.state.electronUpdate,appUpdate:e})}this.displayUpdateBanner(s,n)},this.handleAppUpdateReload=e=>{hn.Js({bannerStore:rr.Z}),sr.hC({environment:this.environment,url:window.location.href,version:e})},this.handleElectronAppUpdateInstall=()=>{const e=this.environment.AppUpdateStore;if(Go.Z.getState().online&&e.isSilentUpdate()){const t=e.state.appUpdate;sr.hC({environment:this.environment,url:window.location.href,version:t.version})}},this.pollForAppJsUpdates=async()=>{let e="";for(await new Promise((e=>setTimeout(e,5e3)));this.componentIsMounted;){if(void 0===ar.Z.state.isVisible||!0===ar.Z.state.isVisible)try{const t=sr.ac(),n=await Re.getAssetsJsonV2(this.environment,{hash:e});if("success"===n.type){const i=n.data;if("version"in i){const e=(0,ee.parseVersion)(i.version);e&&((0,ee.isEqualVersion)(e,t)||this.handleAppUpdateReady(i))}"hash"in i&&(e=i.hash||"")}}catch(t){}await new Promise((e=>setTimeout(e,6e4)))}}}didMount(){const{device:e,mobileNative:t}=this.environment;if(e.isElectron?(y.electronUpdateReady.addListener(this.handleElectronUpdateReady),y.electronUpdateError.addListener(this.handleElectronUpdateError),y.electronUpdateChecking.addListener(this.handleElectronUpdateChecking),y.electronUpdateAvailable.addListener(this.handleElectronUpdateAvailable),y.electronUpdateProgress.addListener(this.handleElectronUpdateProgress),y.electronUpdateNotAvailable.addListener(this.handleElectronUpdateNotAvailable),y.appUpdateReady.addListener(this.handleElectronAppUpdateReady),y.appUpdateError.addListener(this.handleElectronAppUpdateError),y.appUpdateChecking.addListener(this.handleAppUpdateChecking),y.appUpdateAvailable.addListener(this.handleElectronAppUpdateAvailable),y.appUpdateInstall.addListener(this.handleElectronAppUpdateInstall),y.appUpdateProgress.addListener(this.handleElectronAppUpdateProgress),y.appUpdateNotAvailable.addListener(this.handleAppUpdateNotAvailable),y.appUpdateReload.addListener(this.handleAppUpdateReload)):t?t.updateReceiveApiHandlers({appUpdateReady:this.handleAppUpdateReady,appUpdateError:this.handleAppUpdateError,appUpdateChecking:this.handleAppUpdateChecking,appUpdateAvailable:this.handleAppUpdateAvailable,appUpdateProgress:this.handleAppUpdateProgress,appUpdateNotAvailable:this.handleAppUpdateNotAvailable}):T.default.isAdminMode||T.default.isLocalhost&&!T.default.offline||this.pollForAppJsUpdates(),this.displayBannerIfSilentUpdate(),e.isMobileNative&&t&&t.api.openUpdateSettings){const t=e.osVersion,n=e.isAndroid&&(0,ee.isLessThanVersion)(t,[7,0]),i=e.isIOS&&(0,ee.isLessThanVersion)(t,[15,0]);(n||i)&&this.displayPlatformUpdateWarning()}}willUnmount(){const{device:e}=this.environment;e.isElectron&&(y.electronUpdateReady.removeListener(this.handleElectronUpdateReady),y.electronUpdateError.removeListener(this.handleElectronUpdateError),y.electronUpdateChecking.removeListener(this.handleElectronUpdateChecking),y.electronUpdateAvailable.removeListener(this.handleElectronUpdateAvailable),y.electronUpdateProgress.removeListener(this.handleElectronUpdateProgress),y.electronUpdateNotAvailable.removeListener(this.handleElectronUpdateNotAvailable),y.appUpdateReady.removeListener(this.handleElectronAppUpdateReady),y.appUpdateError.removeListener(this.handleElectronAppUpdateError),y.appUpdateChecking.removeListener(this.handleAppUpdateChecking),y.appUpdateAvailable.removeListener(this.handleElectronAppUpdateAvailable),y.appUpdateProgress.removeListener(this.handleElectronAppUpdateProgress),y.appUpdateNotAvailable.removeListener(this.handleAppUpdateNotAvailable),y.appUpdateReload.removeListener(this.handleAppUpdateReload))}displayMajorUpdateDialog(){ko.showDialog({message:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"We just launched new features!",id:"breakingUpdateDialog.title"}),showCancel:!1,keepFocus:!1,handleCancel:()=>(0,or.mK)(this.environment),items:[{label:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Update and see what's new",id:"breakingUpdateDialog.updateButtonTitle"}),color:"blue",onAccept:()=>(0,or.mK)(this.environment)}],innerStyle:{width:380}})}async displayMinorUpdateBanner(){await this.shouldShowMinorUpdateBanner()&&hn.Bw({bannerStore:rr.Z,id:"AppUpdate",contentKey:"minor_app_update",styleKey:vn.v.Blue})}displayUpdateBanner(e,t){e===ee.UpdateType.Major?t&&sr.M0(t)?(sr.D$(t),this.displayMinorUpdateBanner()):this.displayMajorUpdateDialog():e===ee.UpdateType.Minor?(t&&sr.M0(t)&&sr.D$(t),this.displayMinorUpdateBanner()):t&&sr.M0(t)&&sr.D$(t)}displayBannerIfSilentUpdate(){const e=sr.ac(),t=sr.uG();if(!(0,ee.isEqualVersion)(e,t)){const n=(0,ee.getUpdateType)({currentVersion:e,nextVersion:t,app:"client"});0,this.displayUpdateBanner(n,t)}}displayPlatformUpdateWarning(){const{mobileNative:e}=this.environment;e&&hn.Bw({bannerStore:rr.Z,id:"PlatformUpdateWarning",contentKey:"mobile_platform_unsupported",styleKey:vn.v.Red})}async shouldShowMinorUpdateBanner(){await _.default.waitUntilRendered();const{mainEditorCurrentBlockStore:e,currentUserStore:t}=_.default.state;return!(!t||!e)&&!(0,he.IJ)(this.environment,e)}}dr.displayName="AppUpdateListener";const lr=(0,b.injectIntl)(dr);var cr=n(32223);function ur(e){Go.Z.setState({...Go.Z.state,online:e,lastOfflineTimestamp:e?Go.Z.state.lastOfflineTimestamp:Date.now()})}class pr extends r.Z{constructor(){super(...arguments),this.connectionIntervalUpdateRequest=void 0}willMount(){this.connectionIntervalUpdateRequest||(this.connectionIntervalUpdateRequest=window.setInterval((()=>async function(e){if((e.device.isBrowser||e.device.isElectron)&&document.hidden)return;if(cr.isConnected())return void ur(!0);if(!1===navigator.onLine&&!T.default.isLocalhost)return void ur(!1);"success"===(await Re.ping(e,{})).type?ur(!0):ur(!1)}(this.environment)),5e3))}willUnmount(){window.clearInterval(this.connectionIntervalUpdateRequest),this.connectionIntervalUpdateRequest=void 0}}pr.displayName="ConnectionListener";const hr=pr;var mr=n(78354),gr=n(77788),vr=n(27186),fr=n(24042);function br(){window.__c={n:"ElectronListener"};const e=(0,L.O7)(),t=(0,U.VK)((()=>({observedWidth:ye.H3.rect.state.width,targetWidth:ye.GZ.state,isExpanded:ye.gV.state,resizing:ye.cY.state})),[]),n=e.currentUser.isLoggedIn(),[s,o]=(0,i.useState)(!1),{isTabsFeatureEnabled:r}=(0,U.Kw)(fr.Z);(0,i.useEffect)((()=>{s&&r&&y.windowSidebarState.set({isLoggedIn:n,...t})}),[t,n,s,r]),(0,i.useEffect)((()=>{let e;e=n?t.isExpanded?"expanded":"collapsed":"disabled",y.sidebarState.set(e)}),[t.isExpanded,n]);const a=(0,i.useCallback)(((t,n,i)=>{Co.j(e,n,i)}),[e]);(0,i.useEffect)((()=>(y.track.addListener(a),()=>{y.track.removeListener(a)})),[a]);const d=(0,i.useCallback)(((e,t)=>{o(t)}),[]);(0,i.useEffect)((()=>(y.isActiveTab.get().then((e=>{o(e)})),y.isActiveTab.addListener(d),()=>{y.isActiveTab.removeListener(d)})),[d]);const l=(0,i.useCallback)(((e,t)=>{void 0===t.isShowingTabBar&&(t.isShowingTabBar=t.isTabsFeatureEnabled),fr.Z.setState(t)}),[]);(0,i.useEffect)((()=>{var e;return null===(e=y.electronAppFeatures.get())||void 0===e||e.then((e=>{fr.Z.setState(e)})),y.electronAppFeatures.addListener(l),()=>{y.electronAppFeatures.removeListener(l)}}),[l]);const c=(0,i.useCallback)((n=>{be.setExpand({environment:e,isExpanded:!t.isExpanded,from:"electron_listener"})}),[e,t.isExpanded]);(0,i.useEffect)((()=>(y.sidebarState.addToggleListener(c),()=>{y.sidebarState.removeToggleListener(c)})),[c]);const u=(0,i.useCallback)(((e,t)=>{ye.gV.setState(t.isExpanded),ye.GZ.setState(t.targetWidth)}),[]);return(0,i.useEffect)((()=>(y.windowSidebarState.addListener(u),()=>{y.windowSidebarState.removeListener(u)})),[u]),null}var Sr=n(64496);class yr extends r.Z{constructor(){super(...arguments),this.experimentIntervalRequest=void 0}willMount(){this.load(),this.experimentIntervalRequest||(this.experimentIntervalRequest=window.setInterval((()=>this.load()),6e5))}willUnmount(){window.clearInterval(this.experimentIntervalRequest),this.experimentIntervalRequest=void 0}load(){(0,Sr._3)(this.environment)?xo.Tm(this.environment):xo.Th({environment:this.environment,force:!1})}}yr.displayName="ExperimentListener";const wr=yr;var kr=n(24608);class xr extends r.Z{constructor(){super(...arguments),this.refreshFileTokenRequest=void 0}willMount(){this.refresh(),this.refreshFileTokenRequest||(this.refreshFileTokenRequest=window.setInterval((()=>this.refresh()),36e5))}willUnmount(){window.clearInterval(this.refreshFileTokenRequest),this.refreshFileTokenRequest=void 0}refresh(){(0,kr.ZP)({url:`${T.default.secureFileConfig.rootPath}/refresh`,environment:this.environment,method:"GET",format:"text"})}}xr.displayName="FileTokenRefresh";const Cr=xr;var Mr=n(45483);function jr(e){window.__c={n:"InertWhenModalsAreOpen"};const t=(0,U.VK)((()=>"on"===Te.default.getEligibleGroup({experimentId:"use_inert_html_attribute"})),[]),n=(0,U.VK)((()=>Mr.Z.state.openModals.size>0),[]),i={inert:t&&n?"true":null};return(0,F.jsx)("div",{style:e.style,...i,children:e.children})}var Ir=n(62134),Tr=n(45023);class _r extends r.Z{constructor(){super(...arguments),this.handleEvent=e=>{Ir.Zm(this.environment,e)},this.handleKeyDown=e=>{const{shortcutMap:t}=this.environment.KeyboardShortcutStackStore,n=Qe.w_(t,((t,n)=>(0,Tr.Z)(this.environment,e,t)));n&&!{cut:!0,copy:!0,paste:!0}[n]&&Ir.dJ(this.environment,e,n)}}willMount(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("cut",this.handleEvent),window.addEventListener("copy",this.handleEvent),window.addEventListener("paste",this.handleEvent),window.addEventListener("keypress",this.handleEvent)}willUnmount(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("cut",this.handleEvent),window.removeEventListener("copy",this.handleEvent),window.removeEventListener("paste",this.handleEvent),window.removeEventListener("keypress",this.handleEvent)}}_r.displayName="KeyboardShortcutStackListener";const Ar=_r;var Pr=n(91948),Lr=n(31104),Ur=n(17294);class Er extends r.Z{constructor(){super(...arguments),this.renderModal=()=>{const e=Lr.Z.state;if(!e.open)return;const{targetRecordId:t}=e;return(0,F.jsxs)("div",{style:this.getStyle(),children:[(0,F.jsxs)("div",{style:this.getMessageStyle(),children:[e.message,(0,F.jsx)(On.Z,{style:{marginLeft:6}})]}),Rr(t)&&(0,F.jsx)(Pr.Z,{targetRecordId:t,style:{marginTop:10}})]})}}renderComponent(){const e=Lr.Z.state;return(0,F.jsx)(rn.Z,{open:e.open,render:this.renderModal,overlayZIndex:ne._})}getStyle(){return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:180,padding:"18px 24px 20px",textAlign:"center",maxWidth:this.environment.device.isMobile?"300px":"100%"}}getMessageStyle(){return{display:"flex",alignItems:"center",fontSize:14,color:this.theme.mediumTextColor}}}Er.displayName="LoadingStateRenderer";const Zr=Er;function Rr(e){return void 0!==e&&Boolean(Ur.Z.state[e])}class Br extends r.Z{willMountOrUpdate(){const{device:e,mobileNative:t}=this.environment;e.isElectron&&y.setLogglyData(Ti.clientLogglyEnvironmentData),t&&t.setLogglyData(Ti.clientLogglyEnvironmentData)}}Br.displayName="LogglyDataListener";const Nr=Br;var Vr=n(1302),Or=n(69454);class Dr extends r.Z{constructor(){super(...arguments),this.handleEstimatedKeyboardWebViewOverlapStoreChange=()=>{Vr.default.afterNextFlush((()=>{xn.hQ(this.environment)}))},this.estimatedKeyboardWebViewOverlapStore=this.createComputedStore((()=>{const e=Or.Z.state;return e.phase===Or.i.willShow?0:e.estimatedKeyboardWebViewOverlap}))}willMount(){this.environment.device.isMobile&&(Gt.default.addListener(this.handleEstimatedKeyboardWebViewOverlapStoreChange),this.estimatedKeyboardWebViewOverlapStore.addListener(this.handleEstimatedKeyboardWebViewOverlapStoreChange))}willUnmount(){this.environment.device.isMobile&&(Gt.default.removeListener(this.handleEstimatedKeyboardWebViewOverlapStoreChange),this.estimatedKeyboardWebViewOverlapStore.removeListener(this.handleEstimatedKeyboardWebViewOverlapStoreChange))}}Dr.displayName="MobileListener";const zr=Dr;var Fr=n(27328);const Wr=["compact","regular","unknown"];var qr=n(92338),Hr=n(36054),Kr=n(74487),Gr=n(97977),$r=n(98958),Qr=n(31299),Yr=n(87531),Xr=n(24677),Jr=n(29974),ea=n(98104),ta=n(51783),na=n(44499),ia=n(45162),sa=n(18514),oa=n(48141);function ra(e){const t=(0,Fr.w_)(e);switch(t.type){case"native":return;case"web":const e=t.route;switch(e.name){case"page":return e.collectionViewId?"collection":"page";case"nativeTab":switch(e.tab){case"search":return"search";case"updates":return"updates"}break;default:return}}}var aa=n(19361),da=n(55081),la=n(75538),ca=n(97799),ua=n(91190),pa=n(36896),ha=n(44604),ma=n(12252),ga=n(64233),va=n(69327),fa=n(475),ba=n(65686),Sa=n(53610),ya=n(66881),wa=n(62820),ka=n(34583);const xa=(0,b.defineMessages)({failedToMovePageGeneric:{id:"MobileNativeListener.failedToMovePage",defaultMessage:"Failed to move page"}});let Ca;class Ma extends r.Z{constructor(){super(...arguments),this.bottomBarVisibility=this.createComputedStore((()=>{const{currentUserStore:e,renderPhase:t}=_.default.state,n=Boolean(null==e?void 0:e.id),{shouldShowError:i}=ce.h1(this.environment),s="rendered"===t&&i,o=la.default.state.isOnboarding,r=(0,Ce.Y)("supportsNativeBottomBarOverlappingWebView")?Di.Z.hasOpenMobileSlideUps():Di.Z.hasOpenPopups();return!s&&n&&!o&&!r})),this.customAddCommentMenuItemEnabled=this.createComputedStore((()=>{var e;if(!(0,Ce.Y)("supportsCustomAddCommentMenuItem"))return!1;const{currentUserStore:t}=_.default.state;if(!Boolean(null==t?void 0:t.id))return!1;if((0,Ce.Y)("supportsNativeBottomBarOverlappingWebView")?Di.Z.hasOpenMobileSlideUps():Di.Z.hasOpenPopups())return!1;const{TabbedRouterStore:n}=this.environment,i=(0,Fr.w_)(n.state),s="web"===i.type&&((null===(e=i.redirectedTo)||void 0===e?void 0:e.route)||i.route);if(!s||"page"!==s.name)return!1;const o=Gt.default.state;if("empty"===o.mode)return!1;const r=(0,ia.tp)({multiSelection:o.multiSelection,filterCommonAncestors:!0,focus:void 0});if(!r||0===r.stores.length)return!1;let a=!0;return r.stores.forEach((e=>{a&&(a=a&&e.canComment())})),a})),this.isOnUpdatesPage=this.createComputedStore((()=>{const e=this.environment.TabbedRouterStore.state;return"updates"===e.activeTab&&0===e.tabs.updates.pages.length})),this.aiAssistantEnabledState=this.createComputedStore((()=>{const{currentUserStore:e,currentSpaceStore:t}=_.default.state;if(!e||!t)return;const n=je.Z.isShowingQNAOnMobile();return{userId:e.id,spaceId:t.id,enabled:n}})),this.sideBarExpandedStateChangeHandler=()=>{var e;null===(e=this.environment.mobileNative)||void 0===e||e.sidebarVisibility(ye.gV.state&&!(0,xe.YR)(this.environment),(0,xe.qG)(this.environment))},this.bottomBarVisibilityChange=()=>{var e;const t=this.bottomBarVisibility.state;null===(e=this.environment.mobileNative)||void 0===e||e.toggleBottomBar(t),t||aa.Z.update((e=>({...e,active:!1})))},this.aiAssistantEnabledStateChange=()=>{var e;const t=this.aiAssistantEnabledState.state;t&&(null===(e=this.environment.mobileNative)||void 0===e||e.updateAiAssistantEnabledState(t))},this.handleStatusBarTap=()=>{this.scrollToTop()},this.scrollToTop=()=>{ba.Z.getPreventScrollType()===An.Z.None&&(ye.TC.state?Tn.Z.SidebarMobileScroller&&Tn.Z.SidebarMobileScroller.scrollToTop({animate:!0,animationCallback:Qe.yR}):Tn.Z.MenuScroller?Tn.Z.MenuScroller.scrollToTop({animate:!0,animationCallback:Qe.yR}):Tn.Z.MenuPageScroller?Tn.Z.MenuPageScroller.scrollToTop({animate:!0,animationCallback:Qe.yR}):Tn.Z.PageScroller&&Tn.Z.PageScroller.scrollToTop({animate:!0,animationCallback:Qe.yR}))},this.handleSwipeNavigation=()=>{const{mobileNative:e,RouterStore:t}=this.environment;if(e&&e.setWebViewAllowsNavigationGestures){const{route:n}=t.state;"onboarding"===n.name||ye.TC.state||ba.Z.getPreventScrollType()!==An.Z.None?!1!==Ca&&(Ca=!1,e.setWebViewAllowsNavigationGestures(!1)):!0!==Ca&&(Ca=!0,e.setWebViewAllowsNavigationGestures(!0))}},this.spaceViewId=void 0,this.userId=void 0,this.handleAppChange=()=>{const{currentUserStore:e,currentSpaceStore:t}=_.default.state;null!=e&&e.id&&null!=t&&t.id&&va.Z.reinitializeState(this.environment,e.id,t.id);(void 0===(null==e?void 0:e.id)||this.userId!==(null==e?void 0:e.id))&&this.handleUserChange(e);const n=_.default.state.currentSpaceViewStore;this.spaceViewId!==(null==n?void 0:n.id)&&this.handleSpaceViewChange(n)},this.handleSpaceViewChange=e=>{var t;this.spaceViewId=null==e?void 0:e.id;const{mobileNative:n,TabbedRouterStore:i,currentUser:s}=this.environment,o=_.default.state.currentSpaceStore,r=null==o?void 0:o.id;if(null!=n&&null!==(t=n.api)&&void 0!==t&&t.setCurrentSpaceInfo&&(Ti.log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"Web calling nativeAPI setCurrentSpaceInfo",spaceId:r}}),n.api.setCurrentSpaceInfo({spaceId:r,spaceViewId:null==e?void 0:e.id,userId:s.id,editable:(null==o?void 0:o.canEdit())??!0})),(0,sa.__)(this.environment)){const e=e=>{if("web"!==e.type)return;const t={...e.queryParams},n=r&&(0,Wo.cj)(r);t.spaceId=n,e.queryParams=t,e.route.spaceId=n},t=Qe.Xh(i.state);e(t.tabs.search.rootPage),e(t.tabs.updates.rootPage),e(t.tabs.addPage.rootPage),this.clearTabbedRouterStoreState(t),i.setState(t)}this.getLocalSearchCache(this.environment,void 0)},this.handleUserChange=e=>{var t;this.userId=null==e?void 0:e.id,null!==(t=this.environment.mobileNative)&&void 0!==t&&null!==(t=t.api)&&void 0!==t&&t.setCurrentUserInfo&&this.environment.mobileNative.api.setCurrentUserInfo({userId:null==e?void 0:e.id,loggedInUserIds:this.environment.currentUser.loggedInUserIds});const n=!(0,sa.__)(this.environment)||void 0===this.environment.currentUser.id,{TabbedRouterStore:i}=this.environment,s=Qe.Xh(i.state);this.clearTabbedRouterStoreState(s,n),i.setState(s)},this.handleKeyboardAutoScroll=()=>{Or.Z.state.phase===Or.i.willShow&&Vr.default.afterNextFlush((()=>xn.hQ(this.environment)))},this.handleMobileNativeKeyboardStore=()=>{if(Or.Z.state.phase===Or.i.hidden){if(ga.Z.state.open)return;const{NativeMobileActionBarStore:e,device:t}=this.environment;if(e&&null!==e.state.menuType&&t.isAndroid)return;ea.ZH(this.environment)}},this.setCurrentUserId=async e=>{this.environment.currentUser.id!==e&&await M.x({environment:this.environment,newCurrentUserId:e})},this.setCurrentSpace=async(e,t)=>{const n=await M.x({environment:this.environment,newCurrentUserId:e}),{currentUserRootStore:i,currentUserSettingsStore:s}=_.default.state;if(!i)return;await i.load();const o=(0,pi.w3)(t);o&&await Jr.y3({environment:n,spaceViewStore:o,userSettingsStore:s,userRootStore:i,pageVisitSource:wn.tY.SwitchSpace})},this.openSearch=()=>{(0,Ce.Y)("supportsNativeHome")&&this.environment.device.isPhone?(x.clearHistoryState({RouterStore:this.environment.RouterStore,currentUserId:this.environment.currentUser.id}),Yr.UT({environment:this.environment,analyticsFrom:"mobile-bottom-bar",renderAsPage:!0})):Yr.UT({environment:this.environment,analyticsFrom:"mobile-bottom-bar"}),S.nBz(this.environment,{itemName:"search",logging_source:"mobile_native"})},this.openAllUpdates=()=>{(0,Ce.Y)("supportsNativeHome")&&this.environment.device.isPhone?(x.clearHistoryState({RouterStore:this.environment.RouterStore,currentUserId:this.environment.currentUser.id}),x.navigate({environment:this.environment,url:`${m.VP.nativeTab}/updates`,redirect:!0})):wa.Z.setState({...wa.Z.state,open:!0})},this.openMembersSettings=()=>{Sa.Z.setState({...Sa.Z.state,open:!0})},this.openHelp=()=>{fa.Z.setState({...fa.Z.state,open:!0})},this.openSupportMessages=()=>{j.j({environment:this.environment,from:"help_button"})},this.openMoveTo=e=>{const t=new A.G(this.environment,{table:en.iU,id:e});ci.bA({environment:this.environment,blocks:[t],moveToContext:"home_tab",onAccept:e=>{x.navigateToPage({store:t,environment:this.environment,pageVisitSource:wn.tY.Move})}})},this.createOrJoinWorkspace=async()=>{await da.xN(this.environment)},this.openSettings=()=>{ca.Z.setState({open:!0,source:ca.Y.Home})},this.openTrash=e=>{pa.Z.setState({open:!0});const{query:t}=e;t&&ha.Z.setState({...ha.Z.state,currentTab:"all_pages",filter:t,limit:ha.Z.startLimit})},this.openAIAssistant=e=>{ya.g.update((t=>({query:e.query,searchSessionId:e.searchSessionId,from:e.from??"search",shouldReset:Boolean(e.query&&e.query.trim().length>0)}))),x.navigate({environment:this.environment,url:`${m.VP.nativeTab}/assistant`,redirect:!0})},this.openAddAccount=()=>{ua.C.setState({...ua.C.state,open:!0})},this.openAddPage=()=>{(0,Ce.Y)("supportsNativeHome")&&this.environment.device.isPhone?(x.clearHistoryState({RouterStore:this.environment.RouterStore,currentUserId:this.environment.currentUser.id}),be.quickAddPage({environment:this.environment,from:"mobile_bottom_bar",redirect:!0,quickAddParentOverride:{type:"space-private-pages"}})):be.quickAddPage({environment:this.environment,from:"mobile_bottom_bar"}),S.nBz(this.environment,{itemName:"add_page"})},this.handleTabbedRouterStoreChange=()=>{var e;const{mobileNative:t,TabbedRouterStore:n}=this.environment,i=null==t||null===(e=t.api)||void 0===e?void 0:e.handleTabbedRouterStateUpdate;if(i){const e=n.state;i({state:e,topPage:(0,Fr.w_)(e),webTransitionType:ra(e),updateId:(0,Wo.ZP)()});const t=n.getPreviousState();if(!t)return;const s=(0,Fr.F9)(t),o=(0,Fr.F9)(e);Qe.Xy(s,o)||S.w3M(this.environment,{origin:s,destination:o,from:e.navigationSource,action:e.navigationAction,logging_source:"mobile_native"})}},this.handleCustomAddMenuItemEnabledChanged=()=>{if(!(0,Ce.Y)("supportsCustomAddCommentMenuItem"))return;const e=this.customAddCommentMenuItemEnabled.state,{mobileNative:t}=this.environment;null==t||t.updateCustomAddCommentMenuItemEnabled(e)},this.getLocalSearchCache=Qe.HP(((e,t)=>Qr.tw(e)),((e,t)=>{var n;return`${e.currentUser.id}-${(null===(n=_.default.state.currentSpaceViewStore)||void 0===n?void 0:n.id)??"none"}-${t??"none"}`})),this.clearTabbedRouterStoreState=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.keys(e.tabs).forEach((n=>{const i=n;t&&(e.tabs[i].nativeRootPageOverrideEnabled=void 0),e.tabs[i].pages="home"!==i?[]:e.tabs[i].pages.splice(0,1)}))}}willMount(){const{mobileNative:e,RouterStore:t,TabbedRouterStore:n,device:i}=this.environment;var s;i.isMobileNative&&e&&(this.handleAppChange(),_.default.addListener(this.handleAppChange),ye.TC.addListener(this.handleSwipeNavigation),ye.gV.addListener(this.sideBarExpandedStateChangeHandler),zo.Z.addListener(this.handleSwipeNavigation),t.addListener(this.handleSwipeNavigation),Or.Z.addListener(this.handleKeyboardAutoScroll),this.bottomBarVisibility.addListener(this.bottomBarVisibilityChange),this.aiAssistantEnabledState.addListener(this.aiAssistantEnabledStateChange),this.environment.WindowSizeStore.addListener(this.sideBarExpandedStateChangeHandler),n.addListener(this.handleTabbedRouterStoreChange),this.customAddCommentMenuItemEnabled.addListener(this.handleCustomAddMenuItemEnabledChanged),e.updateReceiveApiHandlers({statusBarTap:this.handleStatusBarTap,backButtonPress:()=>Ir.Zm(this.environment,{type:"backbutton"}),keyboardWillShow:e=>{Or.Z.updateKeyboardPhase(this.environment,Or.i.willShow,e??0)},keyboardDidShow:e=>Or.Z.updateKeyboardPhase(this.environment,Or.i.shown,e??0),keyboardWillHide:()=>{var e;(Or.Z.updateKeyboardPhase(this.environment,Or.i.willHide,0),(0,Ce.Y)("supportsIpadOS16Keyboard"))||i.isIpad&&(Xr.ZH(this.environment),null===(e=this.environment.NativeMobileActionBarStore)||void 0===e||e.clear(!0))},keyboardDidHide:()=>{var e;(Or.Z.updateKeyboardPhase(this.environment,Or.i.hidden,0),(0,Ce.Y)("supportsIpadOS16Keyboard"))&&(i.isIpad&&(Xr.ZH(this.environment),null===(e=this.environment.NativeMobileActionBarStore)||void 0===e||e.clear(!0)))},keyboardShortcut:e=>Ir.Zm(this.environment,e),pushNotificationTokenRefresh:e=>$r.handleTokenRefresh(this.environment,e,"refresh"),resume:ma.Z.resume,pause:ma.Z.pause,refreshSubscriptionData:async e=>{await Re.invalidateSubscriptionData(this.environment,{spaceId:e,provider:"revenue_cat"}),await ka.bi(this.environment)},refreshSubscriptionDataV2:async()=>{await ka.bi(this.environment)},processMobileActionBarAction:t=>{const{componentId:n,action:i}=t;e.componentEvents.dispatch("MobileActionBar",n,"onAction",{action:i})},updateExperimentData:async e=>{if((0,Sr._3)(this.environment)){const t=await(0,To.getExperimentDeviceId)(this.environment),n=this.environment.currentUser.id,i=(0,Sr.fP)(t,n,e);i&&Te.default.updateState(i,this.environment)}},trackExperimentExposure:async e=>{await S.Bb7({environment:this.environment,experiment_id:e.experimentId,experiment_version:e.experimentVersion,experiment_group:e.group||"ineligible",logging_source:"mobile_native"})},receiveRawMessageStoreMessage:e=>{cr.onMobileNativeReceiveRawMessageStoreMessage(e,this.environment)},updateMessageStoreState:e=>{cr.onMobileNativeUpdateMessageStoreState(e,this.environment)},logout:e=>{Gr.logoutSingleAccount({environment:this.environment,userId:e})},logoutAll:()=>{Gr.logout(this.environment)},openDestinationV2:e=>{switch(Di.Z.closeAll(),(0,sa.__)(this.environment)&&x.navigateToTab({environment:this.environment,tab:n.state.activeTab,nativeRootPageOverrideEnabled:!1}),e.type){case"moveTo":this.openMoveTo(e.blockId);break;case"trash":this.openTrash({query:e.query});break;case"AIAssistant":this.openAIAssistant({query:e.query,searchSessionId:e.searchSessionId,from:e.from})}},openDestination:e=>{Di.Z.closeAll();switch("closePopup"!==e&&(0,sa.__)(this.environment)&&x.navigateToTab({environment:this.environment,tab:n.state.activeTab,nativeRootPageOverrideEnabled:!1}),e){case"search":this.openSearch();break;case"addPage":this.openAddPage();break;case"allUpdates":this.openAllUpdates();break;case"addAccount":this.openAddAccount();break;case"createOrJoinWorkspace":return this.createOrJoinWorkspace();case"notificationAndSettings":this.openSettings();break;case"trash":this.openTrash({});break;case"memberSettings":this.openMembersSettings();break;case"help":this.openHelp();break;case"intercom_messages":this.openSupportMessages()}},setCurrentUserId:async e=>{await this.setCurrentUserId(e)},setCurrentSpace:async e=>{await this.setCurrentSpace(e.userId,e.spaceId)},updateHorizontalSizeClass:t=>{const n=(0,Hr.Gu)(Kr.literals(...Wr),t)?"unknown":t;n!==e.horizontalSizeClass.state&&e.horizontalSizeClass.setState(n)},updateTabbedRouterState:e=>{var t;const{TabbedRouterStore:n}=this.environment,i=n.state;e.tab!==i.activeTab||null!==(t=e.pages)&&void 0!==t&&t.length||i.tabs[i.activeTab].pages.length?x.navigateToTab({environment:this.environment,tab:e.tab,queryParams:e.queryParams,pages:e.pages,nativeRootPageOverrideEnabled:e.nativeRootPageOverrideEnabled,navigationAction:e.navigationAction,navigationSource:e.navigationSource}):this.scrollToTop();const s=n.state;return[{state:s,topPage:(0,Fr.w_)(s),webTransitionType:ra(s),updateId:e.updateId??(0,Wo.ZP)()}]},getLocalSearchResults:async e=>{const t=await this.getLocalSearchCache(this.environment,e.searchSessionId);if(!t)return[{error:"Local cache does not exist"}];const n=(0,Hr.Gu)(qr.GA,e.sort);if(n)return[{error:`old sort type is unsupported! ${n}`}];const i=e.sort,s=oa.iA({query:{query:{text:e.query??"",filters:e.filters,sort:i},limit:e.limit},localCachedPages:t,includeRecordMap:!1,userId:this.environment.currentUser.id,environment:this.environment,applyRecallScoreThreshold:!1,canUseLtr:!1}),o=[{value:{total:0,results:[],recordMap:{},trackEventProperties:{}}}];if(!s||0===s.results.length)return o;const r=Go.Z.state.online?oa.g8(this.environment,s.results):s.results;return[{value:{results:r,total:r.length,recordMap:{},trackEventProperties:{}}}]},customAddCommentMenuItemTapped:()=>{(0,ta.ol)(this.environment,!0,"custom_add_comment_menu_item")},filterValidMoveToBlocks:e=>{const t=e.targets.map((e=>new A.G(this.environment,{table:en.iU,id:e}))),n=e.blocks.filter((e=>{const n=new A.G(this.environment,{table:en.iU,id:e});return n.canEdit()&&(0,na.Xk)(n,t)}));return[{value:{targets:e.targets,blocks:n}}]},completeMoveToTransaction:async e=>{const{targets:t,destination:n,moveToContext:i,timeToSelectMs:s,isSearchResult:o,flowId:r}=e,a=this.environment,d=t.map((e=>new A.G(this.environment,{table:en.iU,id:e}))),l=ci.QF(a,t,n);if(d&&d.length>0&&!l)try{return await qt.createAndCommitAsync({userAction:"MobileNativeListener.completeMoveTo",environment:a,waitForServerCommit:!1,perform:async e=>{await ci.RL({targets:d,value:n,transaction:e,environment:a,moveToContext:i,renderType:"native",timeToSelectMs:s,disableSuccessToast:!0,isSearchResult:o,flowId:r})}}),[{value:e}]}catch(c){}return S.fW6(a,{type:"moved_to_subpage"}),[{error:jt.default.formatMessage(xa.failedToMovePageGeneric)}]},undoRevision:()=>{se.Yw(this.environment,!0)},searchTeams:async e=>{const{query:t}=e,n=_.default.state.currentSpaceStore,i=_.default.state.currentSpaceViewStore;if(!n||!i)return[{error:"SpaceStore or SpaceViewStore was undefined"}];return[{value:{ids:(await Qr.zf({spaceViewStore:i,query:t,teamStores:i.getTeamsStores()})).map((e=>e.id))}}]}}),i.isAndroid&&Or.Z.addListener(this.handleMobileNativeKeyboardStore),null!==(s=this.environment.mobileNative)&&void 0!==s&&s.api.ready&&this.environment.mobileNative.api.ready(),this.sideBarExpandedStateChangeHandler(),this.handleCustomAddMenuItemEnabledChanged())}willUnmount(){const{mobileNative:e,RouterStore:t,TabbedRouterStore:n,device:i}=this.environment;i.isMobileNative&&e&&(_.default.removeListener(this.handleAppChange),ye.TC.removeListener(this.handleSwipeNavigation),ye.gV.removeListener(this.sideBarExpandedStateChangeHandler),zo.Z.removeListener(this.handleSwipeNavigation),t.removeListener(this.handleSwipeNavigation),Or.Z.removeListener(this.handleKeyboardAutoScroll),this.bottomBarVisibility.removeListener(this.bottomBarVisibilityChange),this.aiAssistantEnabledState.removeListener(this.aiAssistantEnabledStateChange),n.removeListener(this.handleTabbedRouterStoreChange),this.customAddCommentMenuItemEnabled.removeListener(this.handleCustomAddMenuItemEnabledChanged),i.isAndroid&&Or.Z.removeListener(this.handleMobileNativeKeyboardStore))}}Ma.displayName="MobileNativeListener";const ja=Ma;var Ia=n(71474);const Ta=()=>{window.__c={n:"NativeMetricsLoader"};const e=(0,L.O7)();return(0,i.useEffect)((()=>{const{mobileNative:t}=e;t&&t.enableBridgeMetricsCollection(e,_n.default,Te.default)}),[e]),null};class _a extends r.Z{constructor(){super(...arguments),this.updatePageVisibility=()=>{ar.Z.setState({...ar.Z.state,isVisible:!document.hidden});const e=sr.W$(),t=e&&(Date.now()-e)/We.A0>=7;if(this.environment.device.isBrowser&&!document.hidden&&(!e||t)&&Go.Z.getState().online){const e=this.environment.AppUpdateStore;if(e.isSilentUpdate()){const t=e.state.appUpdate;sr.hC({environment:this.environment,url:window.location.href,version:t.version})}}}}didMount(){document.addEventListener("visibilitychange",this.updatePageVisibility),this.updatePageVisibility()}willUnmount(){document.removeEventListener("visibilitychange",this.updatePageVisibility)}}_a.displayName="PageVisibilityListener";const Aa=_a;var Pa=n(18466);new Set(["destinations","emergencyThrottlePercentage","amplitudeOptions","datadogOptions","snowflakeOptions","statsigOptions"]),Kr.literals("connected_apps_settings","compliance_connected_apps_settings","external_object_instance_block","external_object_instance_inline_popup","external_object_instance_block_error_dropdown","placeholder_root_external_collection_view_block","connected_relation_property_menu","source_picker_connect_another_account","integration_gallery","collection_settings_property_type","integration_file_picker","send_to_notion","unfurl","messages_tab","install_redirect","all_updates","notifications_and_settings","collection_view_settings","share_menu","workspace_connections_redirect");var La=n(77897);function Ua(){return 1}function Ea(e){let{id:t,targetRenderPhase:n="all",samplePercent:s=Ua(),children:o}=e;window.__c={n:"PerformanceProfiler"};const r=(0,L.O7)(),a=(0,i.useCallback)(((e,t,i,o,a,d)=>{(0,La.lB)(s)&&("all"!==n&&t!==n||Co.j(r,`render_duration.${e}`,{time:i,render_phase:t}))}),[r,n,s]),[d]=(0,i.useState)(Pa.Z.withListenerIgnored((()=>Te.default.checkGate("client-performance-profiler"))));return d?(0,F.jsx)(i.Profiler,{id:t,onRender:a,children:o}):(0,F.jsx)(F.Fragment,{children:o})}var Za=n(89224),Ra=n(59238);const Ba=()=>{window.__c={n:"TouchSelectionGestureListener"};const e=(0,L.O7)(),t=(0,i.useRef)("none"),n=(0,i.useCallback)((e=>{const n=t.current;e!==n&&(t.current=e,"dragging"===e?Ra.Z.setState({isDragging:!0}):"dragging"===n&&Ra.Z.setState({isDragging:!1}))}),[]),s=(0,i.useCallback)((()=>{"none"===t.current&&n("touching")}),[n]),o=(0,i.useCallback)((()=>{n("none")}),[n]),r=(0,i.useCallback)((()=>{"touching"===t.current&&Za.isExpanded(Za.get())&&n("dragging")}),[n]);return(0,i.useEffect)((()=>{if(e.device.isIOS)return window.addEventListener("touchstart",s),window.addEventListener("touchend",o),window.addEventListener("touchcancel",o),document.addEventListener("selectionchange",r),()=>{window.removeEventListener("touchstart",s),window.removeEventListener("touchend",o),window.removeEventListener("touchcancel",o),document.removeEventListener("selectionchange",r)}}),[e.device.isIOS,s,o,r]),null},Na=()=>{window.__c={n:"SelectionListener"};const e=(0,L.O7)(),t=(0,i.useCallback)((()=>{Vr.default.afterNextFlush((()=>{ea.ls()}))}),[]),n=(0,i.useCallback)((()=>{setTimeout((()=>{Za.get()||ea.ZH(e)}),0)}),[e]);return(0,i.useEffect)((()=>(window.addEventListener("mousedown",t),e.device.isMobileBrowser&&document.addEventListener("focusout",n),()=>{window.removeEventListener("mousedown",t),document.removeEventListener("focusout",n)})),[e,t,n]),(0,F.jsx)(Ba,{})};class Va extends r.Z{constructor(e){super(e),this.mediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),this.initialSet=Vi.default.createValue(!1),this.handleThemeChange=this.handleThemeChange.bind(this)}willMount(){this.setTheme();const{mobileNative:e,device:t}=this.environment;t.isAndroid&&e?e.updateReceiveApiHandlers({themeChanged:e=>this.setTheme()}):this.mediaQueryList.addEventListener?this.mediaQueryList.addEventListener("change",this.handleThemeChange):this.mediaQueryList.addListener&&this.mediaQueryList.addListener(this.handleThemeChange)}willUnmount(){this.mediaQueryList.removeEventListener?this.mediaQueryList.removeEventListener("change",this.handleThemeChange):this.mediaQueryList.removeListener&&this.mediaQueryList.removeListener(this.handleThemeChange)}willUpdate(){var e;!this.initialSet.state&&null!==(e=_.default.state.mainEditorCurrentBlockStore)&&void 0!==e&&e.isReady()&&(this.setTheme(),this.initialSet.setState(!0))}handleThemeChange(e){this.setTheme()}setTheme(){"system"===Mo.MH(this.environment)&&jo.Z.emit()}}Va.displayName="SystemThemeListener";const Oa=Va;class Da extends r.Z{constructor(){super(...arguments),this.updateConnectionStateWithEnvironment=()=>qt.updateConnectionState(this.environment)}willMount(){Go.Z.addListener(this.updateConnectionStateWithEnvironment),qt.updateConnectionState(this.environment)}willUnmount(){Go.Z.removeListener(this.updateConnectionStateWithEnvironment)}}Da.displayName="TransactionListener";const za=Da;var Fa=n(64964);function Wa(){window.__c={n:"WebpackHotReloadIndicator"};const e=T.default.isLocalhost||!1;return(0,i.useEffect)((()=>{function t(t){if(!e)return;if(!t.data||"string"!=typeof t.data.type)return;const n=t.data.type;"webpackInvalid"===n?Fa.oV({label:(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{style:{paddingRight:10},children:"Webpack Compiling"}),(0,F.jsx)("img",{src:"/images/favicon-local.ico",className:"loading-spinner",style:{display:"inline-block"}})]}),position:"top",durationMs:"keep"}):"webpackOk"!==n&&"webpackWarnings"!==n||Fa.rN()}return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}),[e]),null}class qa extends r.Z{willMount(){const{device:e,mobileNative:t}=this.environment;if(wo.mc(this.environment),xo.Yh(this.environment),t&&t.hideSplashscreen(),e.isMobile){const e=document.body.parentElement;e&&e.classList.add(Cn.aiP)}Co.pH(this.environment),d.rQ(e,T.default),e.isElectronMac&&y.getAppPath().then((e=>{e&&(e.startsWith("/Volumes/Notion Installer")||e.startsWith("/Volumes/Notion Dev Installer")||e.startsWith("/Volumes/Notion Stg Installer"))&&ko.showMessage({message:this.props.intl.formatMessage({defaultMessage:"Please move the Notion.app into the /Applications folder for the auto-updater to work.",id:"notionAppContainer.dialog.notionAppNotInApplications.message"})})})),yo.DM(a.SP),(0,So.np)(window.location.href)}didMount(){const{device:e,mobileNative:t}=this.environment;"external"===(0,h.Wj)({url:window.location.href,isMobile:e.isMobile,baseUrl:T.default.domainBaseUrl,publicDomainName:T.default.publicDomainName,protocol:T.default.protocol,currentUrl:window.location.href}).name&&ko.showDialog({message:"Mismatch between origin and baseUrl (dev).",showCancel:!1,keepFocus:!1,items:[{label:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Okay",id:"notionAppContainer.dialog.mismatchedOriginURL.okayButton.label"}),onAccept:()=>{const e=St.O_({relativeUrl:St.T1(window.location.href),baseUrl:T.default.domainBaseUrl}),t=St.Qc(e);t.protocol=St.Qc(window.location.href).protocol,window.location.href=St.WU(t)}}]}),null==t||t.markTransitionReady({type:"mount"})}renderComponent(){const e="light"===this.theme.mode?Cn.MsS:Cn.Xj_;return(0,F.jsx)(Ea,{id:"app",targetRenderPhase:"mount",children:(0,F.jsxs)("div",{style:this.getStyle(),className:["notion-app-inner",e].join(" "),children:[(0,F.jsx)(Wa,{}),(0,F.jsx)(lr,{},"AppUpdateListener"),(0,F.jsx)(Nr,{},"ElectronLogglyDataListener"),(0,F.jsx)(jr,{style:{height:"100%"},children:this.props.children}),(0,F.jsx)(gr.Z,{store:zo.Z,zIndex:ne.mJ,isDefault:!0}),(0,F.jsx)(gr.Z,{store:Fo.Z,zIndex:ne.O7,isDefault:!1}),(0,F.jsx)(mr.Z,{}),(0,F.jsx)(Zr,{}),(0,F.jsx)(tr,{}),(0,F.jsx)(Ao,{}),!this.environment.device.isMobileNative&&(0,F.jsx)(Ho,{}),(0,F.jsx)(za,{}),(0,F.jsx)(Na,{}),(0,F.jsx)(Ar,{}),(0,F.jsx)(ja,{}),(0,F.jsx)(Ta,{}),this.environment.device.isMobileNative&&(0,F.jsx)(o.LazyNativeVoiceInput,{}),this.environment.device.isElectron&&(0,F.jsx)(br,{}),(0,F.jsx)(Ro,{}),(0,F.jsx)(zr,{}),(0,F.jsx)(vr._g,{}),(0,F.jsx)(Io,{}),(0,F.jsx)(Oa,{}),(0,F.jsx)(Ia.Z,{}),(0,F.jsx)(Xo,{}),(0,F.jsx)(Cr,{}),(0,F.jsx)(wr,{}),(0,F.jsx)(hr,{}),(0,F.jsx)(Aa,{}),(0,F.jsx)(Do,{}),(0,F.jsx)(Eo,{}),(0,F.jsx)(o.LazyInjectThirdPartyScripts,{}),(0,F.jsx)(Zo.Kd,{}),(0,F.jsx)(Bo,{})]})})}getStyle(){return{...(0,l.N7)(a.SP),color:this.theme.regularTextColor,WebkitFontSmoothing:"auto",backgroundColor:this.theme.contentBackground}}}qa.displayName="Notion";const Ha=(0,b.injectIntl)(qa);var Ka=n(94273);class Ga extends r.Z{willMount(){const e=v.u5({schemeUrl:window.location.href,baseUrl:T.default.domainBaseUrl});x.navigateToExternalURL({environment:this.environment,url:e}),Ka.vq(),x.navigate({environment:this.environment,url:m._j.root,redirect:!0})}}Ga.displayName="OpenExternal";const $a=Ga;class Qa extends r.Z{constructor(){super(...arguments),this.didCatchError=!1,this.caughtErrorId=void 0,this.openSupportMessages=()=>{j.j({environment:this.environment,from:"page_error"})},this.handleOpenNativeLink=e=>{"string"==typeof e?this.handleOpenNativeLinkV2(e,!1,!1):this.handleOpenNativeLinkV2(e.url,!1,!1)},this.handleOpenNativeLinkV2=(e,t,n)=>{const{RouterStore:i}=this.environment,s=v.RD({url:e,protocol:T.default.protocol,baseUrl:T.default.domainBaseUrl}),o=v.u5({schemeUrl:s,baseUrl:T.default.domainBaseUrl}),r=h.Wj({url:o,baseUrl:T.default.domainBaseUrl,publicDomainName:T.default.publicDomainName,isMobile:this.environment.device.isMobile,protocol:T.default.protocol,currentUrl:window.location.href});(this.environment.device.isAndroid||t)&&x.clearHistoryState({RouterStore:i,currentUserId:this.environment.currentUser.id}),this.environment.mobileNative&&this.environment.mobileNative.closeInAppBrowser(),"googleAuthCallback"!==r.name&&"samlAuthCallback"!==r.name?x.navigate({environment:this.environment,url:o,redirect:t,updateMobileTabbedRouterArgs:{clearNativeRootPageOverride:n},queryId:"page"===r.name?r.queryId:void 0}):x.navigate({environment:this.environment,url:o})}}didMount(){this.environment.currentUser.isLoggedIn()&&_.default.waitUntil((()=>{const e=_.default.state.currentUserSettingsStore,t=(null==e?void 0:e.isDefined())??!1;if(e&&t){const t=e.getSettings(),n=null==t?void 0:t.disable_auto_set_timezone;t&&!n&&C.wk({environment:this.environment,userSettingsStore:e})}return t}))}willMount(){const{RouterStore:e,currentUser:t}=this.environment,n=t.id;window.addEventListener("beforeunload",(()=>{x.updateHistoryState({historyId:e.state.id,currentUserId:n})})),window.onpopstate=async t=>{const n=window.location.href,i=t.state?t.state.currentUserId:void 0;let s=this.environment;i&&i!==this.environment.currentUser.id&&(s=await M.x({environment:s,newCurrentUserId:i}));const o=e.state.route,r=h.Wj({url:n,isMobile:s.device.isMobile,baseUrl:T.default.domainBaseUrl,publicDomainName:T.default.publicDomainName,protocol:T.default.protocol,currentUrl:window.location.href}),a="page"===o.name&&"page"===r.name&&o.blockId===r.blockId,d="onboarding"!==o.name&&"onboarding"===r.name;x.updateHistoryState({historyId:e.state.id,currentUserId:i}),await x.updateRouterState({environment:s,id:t.state&&t.state.id||(0,p.ZP)(),action:"pop",href:n}),d&&!this.environment.device.isMobileNative&&x.navigate({environment:s,url:m._j.root}),a&&x.handleNavigateWithinSamePage(s)},this.environment.mobileNative&&this.environment.mobileNative.subscribeToOpenLink(this.handleOpenNativeLinkV2),y.subscribeToProtocolUrl(this.handleOpenNativeLink),y.subscribeToSettingsMenuItem(Xa),y.ready(),y.onNewWindow(((e,t)=>{e.preventDefault(),x.navigate({environment:this.environment,url:t,openInNew:"tab"})}))}componentDidCatch(e,t){console.error("Client crash during React render:",e),this.caughtErrorId=f.rn(e,{from:"Router",type:"ClientCrash",data:{miscDataToConvertToString:t}}),this.didCatchError=!0,this.forceUpdate()}renderComponent(){return(0,F.jsx)(b.IntlProvider,{defaultLocale:"en-US",locale:a.SP,messages:a.sY,children:(0,F.jsx)(co,{...uo(this.environment.device),children:this.renderRouteOrError()})})}renderRouteOrError(){return this.didCatchError?(0,F.jsxs)("div",{style:Qa.reactErrorStyle,children:[(0,u.H)({width:42,height:42}),(0,F.jsxs)("div",{style:Qa.reactErrorMessageStyle,children:[(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Oops! Something went wrong.",id:"router.renderErrorPage.message.part1"})}),(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Please refresh and try again or <textlink>message support</textlink>.",id:"router.renderErrorPage.message.part2",values:{textlink:e=>(0,F.jsx)(mo.Z,{onClick:this.openSupportMessages,children:e})}})}),this.caughtErrorId&&(0,F.jsx)("div",{style:Qa.reactErrorMessageIdStyle,children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Error ID: {errorId}",id:"router.renderErrorPage.message.errorId",values:{errorId:this.caughtErrorId.slice(0,8)}})})]}),(0,F.jsx)(N.Z,{isLarge:!0,onClick:()=>window.location.reload(),children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Refresh",id:"router.renderErrorPage.reloadButton.label"})})]}):(0,F.jsx)(Ha,{children:this.renderRoute()})}renderRoute(){const{RouterStore:e}=this.environment,t=e.state;if("root"!==t.route.name&&"page"!==t.route.name&&"space"!==t.route.name&&(w.setInitialRenderCompleted(),_.default.setState({..._.default.state,renderPhase:"rendered"})),this.environment.currentUser.isLoggedIn()||"page"===t.route.name||"space"===t.route.name||d.j(this.environment.device,{facebook:{eventName:"PageView",data:{content_name:window.location.href}},google:{eventName:"pageView",path:window.location.pathname}}),this.environment.currentUser.isLoggedIn()&&_.default.state.currentUserSettingsStore){const{currentUserSettingsStore:e}=_.default.state;I.dM(this.environment,e)}const{device:i}=this.environment;if(i.isNative&&h.lQ[t.route.name])return(0,F.jsx)($a,{});if("front"===t.route.name)return(0,F.jsx)(ao,{preventFrontRedirect:t.route.alreadyRedirected});if("root"===t.route.name)return(0,F.jsx)(ho,{route:t.route});if("nativeRedirect"===t.route.name)return(0,F.jsx)(bo,{redirect:t.route.redirect});if("login"===t.route.name)return(0,F.jsx)(o.LazyLoginPage,{isSignup:!1,email:t.route.email,redirectURL:t.route.redirectURL});if("desktopEmailConfirm"===t.route.name)return(0,F.jsx)(so,{});if("teamsInvite"===t.route.name){const{teamId:e}=t.route;return S.uAt(this.environment,{teamId:e}),(0,F.jsx)(go.Z,{fetch:async()=>{const t=new A.zX(this.environment,{table:g.e0,id:e});await t.load()},render:()=>(0,F.jsx)(Q,{teamId:e})})}if("signup"===t.route.name)return(0,F.jsx)(o.LazyLoginPage,{isSignup:!0,email:t.route.email});if("unsubscribe"===t.route.name)return(0,F.jsx)(Xs,{payload:t.route.payload});if("onboarding"===t.route.name)return(0,F.jsx)(o.LazyOnboarding,{});if("upcomingInvoice"===t.route.name)return(0,F.jsx)(o.LazyInvoice,{route:t.route});if("invoiceById"===t.route.name)return(0,F.jsx)(o.LazyInvoice,{route:t.route});if(t.route.name,t.route.name,"admin"===t.route.name&&T.default.isAdminMode)return(0,F.jsx)(go.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(1798),n.e(7760),n.e(2328)]).then(n.bind(n,68611)),render:e=>{let{default:t}=e;return(0,F.jsx)(t,{})}});if("adminListData"===t.route.name){const{category:e}=t.route;if(T.default.isAdminMode)return(0,F.jsx)(go.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(1798),n.e(7760),n.e(2328)]).then(n.bind(n,65585)),render:t=>{let{default:n}=t;return(0,F.jsx)(n,{category:e})}})}if("adminSingleRecord"===t.route.name&&T.default.isAdminMode){const{id:e,table:i}=t.route;return(0,F.jsx)(go.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(1798),n.e(7760),n.e(3854)]).then(n.bind(n,48807)),render:t=>{let{default:n}=t;return(0,F.jsx)(n,{table:i,id:e})}})}if("oauthAuthorization"===t.route.name){const{responseType:e,redirectUri:i,integrationId:s,state:o,owner:r,userId:a,spaceId:d}=t.route;return(0,F.jsx)(go.Z,{fetch:()=>Promise.all([n.e(2774),n.e(2743),n.e(7848),n.e(9342),n.e(3370)]).then(n.bind(n,31074)),render:t=>{let{default:n}=t;return(0,F.jsx)(n,{responseType:e,redirectUri:i,integrationId:s,state:o,owner:r,userId:a,spaceId:d})}})}if("initiateExternalAuthentication"===t.route.name){const{notion_user_id:e,notion_workspace_id:i,notion_last_visited_url:s,notion_authorization_code:o,external_object_instance_block_id:r,callback_type:a,integration_id:d,redirectToAuth:l}=t.route;return(0,F.jsx)(go.Z,{fetch:()=>n.e(1023).then(n.bind(n,84750)),render:t=>{let{default:n}=t;return(0,F.jsx)(n,{notion_user_id:e,notion_workspace_id:i,notion_last_visited_url:s,notion_authorization_code:o,external_object_instance_block_id:r,callback_type:a,integration_id:d,redirectToAuth:l})}})}return"myIntegrations"===t.route.name?"pointer"in t.route?(0,F.jsx)(o.LazyDeveloperIntegrationViewV2,{botOrIntegrationPointer:t.route.pointer}):(0,F.jsx)(o.LazyDeveloperIntegrationsList,{}):"myIntegrationsLab"===t.route.name?(0,F.jsx)(o.LazyDeveloperIntegrationLab,{integrationPointer:t.route.pointer}):"inAppTemplateSubmission"===t.route.name?"inAppTemplateCreatorSubmission"===(null===(s=t.initialRoute)||void 0===s?void 0:s.name)?(0,F.jsx)(Y,{openCreatorProfileModal:!0}):(0,F.jsx)(Y,{openCreatorProfileModal:!1}):("inAppTemplateCreatorSubmission"===t.route.name&&x.navigate({environment:this.environment,url:m._j.templateSubmission,redirect:!0}),"studentGroupSignup"===t.route.name?(0,F.jsx)(P,{}):"notFound"===t.route.name?(0,F.jsx)(o.LazyPageError,{route:t.route,publicPageData:void 0}):"page"===t.route.name||"space"===t.route.name||"nativeTab"===t.route.name||"workspaceSetup"===t.route.name||"modal"===t.route.name||"quickSearch"===t.route.name||"chat"===t.route.name?(0,F.jsx)(Gs,{routerState:t}):(0,F.jsx)($s.Z,{}));var s}}Qa.displayName="Router",Qa.reactErrorStyle={width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:100,...(0,l.N7)(a.SP)},Qa.reactErrorMessageStyle={fontSize:14,textAlign:"center",marginTop:6,marginBottom:12,color:c.ZP.uiGray},Qa.reactErrorMessageIdStyle={fontSize:10,marginTop:8};const Ya=Qa;function Xa(e){k.r$({currentTab:e})}function Ja(e){let{environment:t,onMount:n}=e;window.__c={n:"NotionRoot"};const r=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{r.current||(r.current=!0,null==n||n())}),[n]),(0,F.jsx)(s.B9,{value:t,children:(0,F.jsx)(o.DependencyProviderAll,{children:(0,F.jsx)(Ya,{})})})}},55064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var i=n(67294),s=n(83355),o=n(97880),r=n(51454),a=n(31412),d=n(17659),l=n(99553),c=n(24677),u=n(98742),p=n(89224),h=n(74948),m=n(24646),g=n(38676),v=n(36391),f=n(96049),b=n(31792),S=n(45325),y=n(88923),w=n(6685),k=n(26388),x=n(85893);class C extends s.Z{constructor(){super(...arguments),this.didDragMove=!1,this.storeTypes={mouseStore:b.Z},this.renderTooltip=()=>{const e=this.isSidebarExpanded(),t=this.theme.mediumInvertedTextColor;return(0,x.jsxs)("div",{style:{textAlign:"center"},children:[(0,x.jsx)(a.FormattedMessage,{defaultMessage:"Drag <invertedcolor>to resize</invertedcolor>",id:"sidebarResizer.tooltip.dragMessage",values:{invertedcolor:e=>(0,x.jsx)("span",{style:{color:t},children:e})}}),(0,x.jsxs)(i.Fragment,{children:[(0,x.jsx)("br",{}),(0,x.jsx)(a.FormattedMessage,{defaultMessage:"Click <invertedcolor>to {expanded, select, true {close} other {lock open}}</invertedcolor>",id:"sidebarResizer.clickToToggleSidebar.message",values:{expanded:e,invertedcolor:e=>(0,x.jsx)("span",{style:{color:t},children:e})}})]})]})},this.handleMouseEnter=e=>{g.ck.setState(e.clientY)},this.handleMouseMove=()=>{j({isResizerHovered:!0},this.props.type)},this.handleMouseLeave=()=>{j({isResizerHovered:!1},this.props.type)},this.handleDragStart=()=>{c.ZH(this.environment),this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!0}),this.didDragMove=!1,j({...g.cY.state,isResizing:!0},this.props.type)},this.handleDragMove=e=>{const{type:t}=this.props;switch(p.clear(this.environment),this.didDragMove=!0,t){case"page":h.setWidth({width:this.calculateWidth(e.currentX),environment:this.environment});break;case"update":h.setUpdateWidth({width:this.calculateWidth(e.currentX),environment:this.environment});break;case"peek":h.setPeekWidth({width:this.calculateWidth(e.currentX),environment:this.environment});break;case"inbox":S.ZP.update((t=>({...t,width:this.calculateWidth(e.currentX)})));break;default:(0,o.t1)(t)}},this.handleDragEnd=()=>{const{type:e}=this.props;if(!this.didDragMove){switch(e){case"page":h.setExpand({environment:this.environment,isExpanded:!g.gV.state,from:"sidebar_resizer"}),g.TC.setState(!1);break;case"update":h.setUpdateExpand({environment:this.environment,isExpanded:!(0,m.Sx)(this.environment),from:"drag"});break;case"peek":l.xv(this.environment,"resizer_click");break;case"inbox":d.qQ({environment:this.environment,open:!S.ZP.isOpen()});break;default:(0,o.t1)(e)}this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1})}this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!1}),j({isResizing:!1},this.props.type)},this.handleDragCancel=()=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!1}),j({isResizing:!1},this.props.type)}}renderComponent(){const{device:e}=this.environment,{type:t}=this.props,n=this.getTooltipX(),i=g.ck.state;if(!f.Z.state&&!e.isChromebook)return(0,x.jsx)(k.Z,{renderTooltip:this.renderTooltip,originRect:new DOMRect(n,i,0,0),delayThreshold:500,placement:"page"===t||"inbox"===t?k.Z.Placement.Right:k.Z.Placement.Left,originGap:10,render:e=>(0,x.jsx)("div",{style:this.getWrapStyle(),...(0,u.Z)(e,{onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter}),children:(0,x.jsx)(w.Z,{onDraggableDragStart:this.handleDragStart,onDraggableDragMove:this.handleDragMove,onDraggableDragEnd:this.handleDragEnd,onDraggableDragCancel:this.handleDragCancel,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,x.jsx)("div",{style:I(this.props.type),...e})})})})}calculateWidth(e){const{type:t}=this.props;let n;switch(t){case"page":n=e;break;case"inbox":n=e-(g.gV.state?g.GZ.state:0);break;case"peek":case"update":n=window.innerWidth-e;break;default:(0,o.t1)(t)}const i=function(e){const t=window.innerWidth;switch(e){case"page":return 480;case"update":return Math.min(t/2,m.Nc);case"peek":return t>2*y.sidePeekMinWidth?t/1.5:t;case"inbox":return 420;default:(0,o.t1)(e)}}(t),s=function(e){switch(e){case"page":return g.nP;case"update":return v.AO;case"peek":return y.sidePeekMinWidth;case"inbox":return 320;default:(0,o.t1)(e)}}(t);return n>i?i:n<s?s:n}getTooltipX(){const{type:e}=this.props,t=function(e){switch(e){case"page":return g.GZ.state;case"inbox":return S.ZP.getPanelWidth();case"update":return v.ZP.state.width;case"peek":return y.default.state.preferredSidePeekWidth;default:(0,o.t1)(e)}}(this.props.type);switch(e){case"page":return t;case"inbox":return g.GZ.state+S.ZP.getPanelWidth();case"peek":case"update":return window.innerWidth-t;default:(0,o.t1)(e)}}isSidebarExpanded(){const{type:e}=this.props;switch(e){case"page":return(0,m.in)(this.environment);case"update":return(0,m.Sx)(this.environment);case"peek":return y.default.state.open;case"inbox":return S.ZP.isOpen();default:(0,o.t1)(e)}}getWrapStyle(){const{type:e}=this.props,t=(0,m.in)(this.environment);return{position:"absolute",left:"peek"===e?0:void 0,right:"peek"!==e?0:void 0,width:0,flexGrow:0,zIndex:"peek"===e?r.YO:1,top:t?0:-1,bottom:t?0:-1,pointerEvents:"auto"}}}C.displayName="SidebarResizer";const M=C;function j(e,t){switch(t){case"page":g.cY.update((t=>({...t,...e})));break;case"update":v.ZP.update((t=>({...t,...e})));break;case"inbox":S.ZP.update((t=>({...t,...e})));break;case"peek":break;default:(0,o.t1)(t)}}function I(e){return{cursor:"col-resize",height:"100%",width:12,marginLeft:"update"===e?-v.ZP.state.width:-6}}},24553:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(67294),s=n(13991),o=n(480),r=n(6740),a=n(86628),d=n(24405),l=n(84169),c=n(88642),u=n(31412),p=n(50906),h=n(39634),m=n(24215),g=n(43250),v=n(79897),f=n(98742),b=n(77907),S=n(58455),y=n(77080),w=n(475),k=n(16194),x=n(55031),C=n(64921),M=n(31945),j=n(26388),I=n(14694),T=n(85893);function _(e){window.__c={n:"HelpButtonOrigin"};const t=(0,o.O7)(),{isMobile:n}=t.device,s=(0,u.useIntl)(),c=(0,d.Fg)(),p=(0,a.VK)((()=>w.Z.state.open),[]),h=(0,d.yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),m=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&k.Z.setState(!0)}),[]),v=(0,i.useCallback)((()=>{k.Z.setState(!1)}),[]);if(n)return(0,T.jsx)(C.Z,{hovered:p,testId:g.lmr,mobileFeedback:n,...e,children:(0,T.jsx)(I.Z,{left:(0,l.m)(h.helpIcon),disableMobileBorder:!0,children:(0,T.jsx)(u.FormattedMessage,{defaultMessage:"Help & feedback",id:"helpButton.mobileHelpFeedbackButton.label"})})});const b=s.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),S=(0,f.Z)(e,{onFocus:m,onBlur:v});return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(j.Z,{renderTooltip:()=>(0,T.jsx)("span",{children:(0,T.jsx)(u.FormattedMessage,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,T.jsx)("br",{})}})}),render:e=>(0,T.jsx)(C.Z,{ariaLabel:b,className:g.lmr,testId:g.lmr,style:(0,x.y)(t,{theme:c,rightEdgeDistance:16,isInPeekRenderer:!1}),hoveredStyle:h.hoveredStyle,pressedStyle:h.pressedStyle,...(0,f.Z)(S,e),children:"?"})})})}const A=(0,u.injectIntl)((function(){window.__c={n:"HelpButton"};const e=(0,o.O7)(),{isMobile:t}=e.device,n=(0,a.VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),r=(0,i.useCallback)((()=>{p.Ar6(e);const t=S.default.state;if((0,m.Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:n,isSalesAssistedPlan:i}=(0,v.r)(e);c.j({locale:s.SP,analyticsSettings:t,isForethoughtEnabled:y.default.checkGate("forethought"),forethoughtInitializeArgs:h.z(),userHighestPlanType:n,isSalesAssistedPlan:i})}}),[e]);return(0,T.jsx)(M.ZP,{popupType:t?M.Z4.SlideUp:M.Z4.Popup,hidesMobileNativeBottomBar:n,preventSlideUpTransition:n,renderOrigin:e=>(0,T.jsx)(_,{...e}),originGap:t?0:12,placementToOrigin:t?M.pO.Right:M.pO.Top,alignmentToOrigin:t?M.vR.Center:M.vR.End,buttonPopupStore:w.Z,onClick:r,render:()=>(0,T.jsx)(b.LazyHelpButtonContent,{shouldRenderAsStaticModal:n})})}))},30106:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(49085);class s extends i.default{getInitialState(){return{open:!1}}}const o=new s},65556:(e,t,n)=>{"use strict";n.r(t),n.d(t,{setupOnBeforeUnload:()=>a,showConfirmationDialogEventEmitter:()=>o});var i=n(33147),s=n(51214);const o=new i.Z,r={transaction_queue_has_tasks:"Changes you made may not be saved. Are you sure you want to quit?",uploading_files:"The files you are currently uploading may not be saved. Are you sure you want to quit?",generating_ai_completions:"Changes being made by AI may not be saved. Are you sure you want to quit?"};function a(e){const{TransactionQueue:t,device:n,AppUpdateStore:i,GlobalFileUploadStore:a}=e;window.onbeforeunload=function(){const e=!t.hasTasks()||n.isMobileNative||n.isElectron||i.isMajorUpdate()?a.isUploading()?"uploading_files":s.Z.isGeneratingAtAll()?"generating_ai_completions":void 0:"transaction_queue_has_tasks";if(e)return o.emit(e),r[e]}}},70511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{setupTransactionLoadGenerator:()=>d});var i=n(92595),s=n(97444),o=n(39699),r=n(80444),a=n(24666);function d(e){(0,i.exposeDebugValue)("generateTransactionLoad",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const d=r.default.state.mainEditorCurrentBlockStore;if(!d)return void console.info("Cannot generateTransactionLoad: No current block");const l=d.getTitleStore();if(!l)return void console.info("Cannot generateTransactionLoad: block has no title");if("editing"!==a.default.state.mode)return void console.info("not editing anything. Click the page title.");const c=t=>{o.createAndCommit({userAction:"generateTransactionLoad.createTransaction",environment:e,perform:i=>{console.info("createAndCommit #",t);for(let o=0;o<n;o++){const n=`This is transaction #${t+1}, op ${o+1}, of load started at ${u}`;s.aS({environment:e,store:l,newValue:n,disableMentions:!0,disableDateMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:i})}}})},u=new Date;if(0===i)for(let e=0;e<t;e++)c(e);else{let e=0;const n=setInterval((()=>{e<t?(c(e),e++):clearInterval(n)}),i)}}))}},92725:(e,t,n)=>{"use strict";n.r(t),n.d(t,{instrumentRenderQueue:()=>l});var i=n(1302),s=n(77897),o=n(29091),r=n(24215),a=n(97448);const d={componentRender:{enabledPercent:0,sampleRate:0},recomputeStore:{enabledPercent:0,sampleRate:0}};function l(e){const t=(0,a.fastGetConfig)("event_trail_events"),n=(null==t?void 0:t.get("browser.render_queue.component_render",d.componentRender))||d.componentRender,l=(null==t?void 0:t.get("browser.render_queue.store_recompute",d.recomputeStore))||d.recomputeStore;if(0===n.enabledPercent&&0===l.enabledPercent)return;const c=Math.random(),u=(0,o.XJ)(1e4);(0,s.aw)(n.enabledPercent,(()=>c))&&i.default.setComponentRenderTracker({shouldTrackThisRender:()=>(0,s.aw)(n.sampleRate,u),trackRender:t=>{let{componentName:n,renderTime:i}=t;r.j(e,"browser.render_queue.component_render",{time:i,component:n})}}),(0,s.aw)(l.enabledPercent,(()=>c))&&i.default.setStoreRecomputeTracker({shouldTrackThisRecompute:()=>(0,s.aw)(l.sampleRate,u),trackRecompute:(t,n)=>{r.j(e,"browser.render_queue.store_recompute",{time:n,computed_store:t})}})}},19077:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initialize:()=>a});var i=n(68626),s=n(95477),o=n(77080),r=n(15517);function a(e){"object"==typeof s.default&&s.default.version&&(i.clientLogglyEnvironmentData.version=s.default.version);const{device:t,currentUser:n}=e;t.isMobileNative&&(i.clientLogglyEnvironmentData.isMobileNative=!0),t.isMobile&&(i.clientLogglyEnvironmentData.isMobile=!0),t.isAndroid&&(i.clientLogglyEnvironmentData.isAndroid=!0),t.isIOS&&(i.clientLogglyEnvironmentData.isIOS=!0),t.isElectron&&(i.clientLogglyEnvironmentData.isElectron=!0),t.isChromeExtension&&(i.clientLogglyEnvironmentData.isChromeExtension=!0),i.clientLogglyEnvironmentData.os=t.os,i.clientLogglyEnvironmentData.platform=t.platform,window.navigator.userAgent&&(i.clientLogglyEnvironmentData.userAgent=window.navigator.userAgent),document.referrer&&(i.clientLogglyEnvironmentData.referrer=document.referrer),n.id&&(i.clientLogglyEnvironmentData.userId=n.id),i.clientLogglyEnvironmentData.experiments=o.default.getUsedNonControlExperimentsMap(),o.default.addListener((()=>{i.clientLogglyEnvironmentData.experiments=o.default.getUsedNonControlExperimentsMap()})),(0,r.sK)().then((e=>{e&&(i.clientLogglyEnvironmentData.storageUsageEstimate=e.usage,i.clientLogglyEnvironmentData.storageQuotaEstimate=e.quota)}))}},44499:(e,t,n)=>{"use strict";n.d(t,{Hn:()=>m,XQ:()=>p,Xk:()=>u,qB:()=>h});n(57658);var i=n(41432),s=n(45433),o=n(21202),r=n(6287),a=n(55367),d=n(42330),l=n(26350),c=n(75770);function u(e,t){return!(!e.isNavigableBlock()&&e.getType()!==i.Ti.alias)&&(!e.isLinkedCollectionView()&&(!e.getMovedStore().getValue()&&!(0,c.ru)({targets:t,destination:e,direction:a.vh.Onto})))}function p(e){let{recentPageResults:t,blockResults:n,suggestedPages:i}=e;const s=new Set;for(const o of i){const e=o instanceof l.NW?o.getParentId():o.id;e&&s.add(e)}return[...t.filter((e=>!s.has(e.blockId))),...n.filter((e=>!s.has(e.blockId)))]}function h(e){const t=[];for(const i of e){const e=i.getParentPointer();if(e)if(e.table===o.iU)t.push(e.id);else if(e.table===r.v){var n;const e=null===(n=i.getAssociatedCollectionStore())||void 0===n?void 0:n.getParentPointer();e&&e.table===o.iU&&t.push(e.id)}}return t}function m(){const e=d.ZP.getTargetsDatabaseType(),t=d.ZP.getVariant();return("typedInitialized"===t||"typedUninitialized"===t)&&e&&e!==s.GZ}},48916:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mainApp:()=>s});n(21703);var i=n(95477);async function s(e){const{mainStartTime:t,prefetchInitiatedTime:s,device:o,mobileNative:r,prefetchCache:a}=e,[{setupOnBeforeUnload:d},l,{createClientEnvironment:c},{setupTransactionQueue:u},{default:p},h]=await Promise.all([Promise.resolve().then(n.bind(n,65556)),Promise.resolve().then(n.bind(n,68626)),Promise.resolve().then(n.bind(n,78200)),Promise.resolve().then(n.bind(n,5315)),Promise.resolve().then(n.bind(n,27411)),Promise.resolve().then(n.bind(n,44133))]);let m=await c({device:o,mobileNative:r,prefetchCache:a});const{ElectronSqlite:g}=m;h.setupRecordCacheDebugging(o);const v=await u(m);d({device:o,TransactionQueue:v,AppUpdateStore:m.AppUpdateStore,GlobalFileUploadStore:p});const[f,{default:b}]=await Promise.all([Promise.resolve().then(n.bind(n,19077)),Promise.resolve().then(n.bind(n,18245))]);if(f.initialize(m),o.isMobileNative){const e=b.mark("initialize_react_native_from_js"),[t,i]=await Promise.all([Promise.resolve().then(n.bind(n,98958)),Promise.resolve().then(n.bind(n,57491))]);await t.initializeMobileNativeApp(m),Object.assign(l.clientLogglyEnvironmentData,i.getMobileNativeDeviceInfo()),b.measure(e,{environment:m})}if(o.isElectron){const e=await Promise.resolve().then(n.bind(n,47839));await e.initializeElectron({device:o,electronSqlite:g});const t=await Promise.resolve().then(n.bind(n,74503)),i=await t.getDesktopDeviceInfo();Object.assign(l.clientLogglyEnvironmentData,i,{desktopVersion:o.desktopAppVersion})}const[S,y,w,k,x,C,{getAppRefreshed:M}]=await Promise.all([Promise.resolve().then(n.bind(n,97977)),Promise.resolve().then(n.bind(n,74948)),Promise.resolve().then(n.bind(n,89224)),Promise.resolve().then(n.bind(n,75018)),Promise.resolve().then(n.bind(n,39699)),Promise.resolve().then(n.bind(n,78519)),Promise.resolve().then(n.bind(n,9852))]),{setupTransactionLoadGenerator:j}=await Promise.resolve().then(n.bind(n,70511));j(m);const I=performance.now(),[{default:T},_,A,P,{CurrentUser:L},{getGhostAdminUserId:U},{default:E}]=await Promise.all([Promise.resolve().then(n.bind(n,49273)),Promise.resolve().then(n.t.bind(n,67294,19)),Promise.resolve().then(n.t.bind(n,73935,19)),Promise.resolve().then(n.t.bind(n,20745,19)),Promise.resolve().then(n.bind(n,87997)),Promise.resolve().then(n.bind(n,12955)),Promise.resolve().then(n.bind(n,77080))]);y.initialize(),w.startListeners(o),m=await S.initialize(m),m.updateCurrentUserId=async e=>{const t=await U(m),n={...e.environment,currentUser:new L({id:e.currentUserId,loggedInUserIds:e.userIds,adminUserId:t})};H(n)},k.initialize(m),v.startLoop();const[{maybeClearCookies:Z,refreshNotionCookies:R,validateHasPermissionArgsClient:B},{clearNotionCookiesWithNoPermission:N,clearThirdPartyCookiesAndLocalStorageWithNoPermission:V},{clearNotionLocalStorageWithNoPermission:O},{instrumentRenderQueue:D},z,F,{deviceSupportsSqlite:W}]=await Promise.all([Promise.resolve().then(n.bind(n,12955)),Promise.resolve().then(n.bind(n,29450)),Promise.resolve().then(n.bind(n,18613)),Promise.resolve().then(n.bind(n,92725)),Promise.resolve().then(n.bind(n,32223)),Promise.resolve().then(n.bind(n,32603)),Promise.resolve().then(n.bind(n,26492))]);Z(),N(i.default),V(i.default),O(),R(m),B(m),C.initialize(m,{fromPageRefresh:M()});const[{TransactionQueueDependenciesImpl:q}]=await Promise.all([Promise.resolve().then(n.bind(n,68026))]);if(W(m.device)){const{default:e}=await Promise.resolve().then(n.bind(n,41226));e.setNotionPerformance(b)}D(m);const H=e=>{const n=performance.now(),i=document.querySelector("#notion-app");if(!i)throw new Error('Could not find element with id "notion-app"');const o=E.checkGate("react_18_concurrent_rendering");v.updateDependencies(new q(e)),x.updateConnectionState(e),z.updateEnvironment(e),l.clientLogglyEnvironmentData.userId=e.currentUser.id;const r=()=>{const e=document.getElementById("initial-loading-spinner"),i=document.getElementById("skeleton");e&&e.remove(),i&&i.remove();const o=performance.now();F.setSubMetricsAtRenderCallback({mainStartTime:t,prefetchInitiatedTime:s,renderStartTime:n,renderEndTime:o,mainImportEndTime:I})},a=_.createElement(T,{environment:e,onMount:o?r:void 0});if(o){P.createRoot(i).render(a)}else A.render(a,i,r)};return H(m),{transactionQueue:v,environment:m}}},19361:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(49085);class s extends i.default{getInitialState(){return{isSupported:!1,active:!1,stage:"inactive",totalResults:0}}toggleActiveState(e){this.update((t=>({...t,active:e,stage:e?t.stage:"inactive",totalResults:e?0:t.totalResults})))}}const o=new s},78200:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createClientEnvironment:()=>ae});var i=n(26263),s=n(45631),o=n(87997),r=n(58287),a=n(94023),d=n(91814),l=n(27328),c=n(42389),u=n(20475),p=n(99747),h=n(47839),m=n(84709),g=(n(21703),n(57658),n(28084)),v=n(68626),f=n(55652),b=n(72126),S=n(45953),y=n(21202),w=n(97664),k=n(12139),x=n(66504),C=n(84693);let M=1;class j{constructor(e,t){this.getLatency=new f.s,this.batchReadWorkers=15,this.pendingWrites=S.Ao.create(),this.getManyFromDisk=async e=>{const t=S.Ao.create();e.forEach(((e,n)=>{let{pointer:i}=e;t.set(i,n)}));const n=await C.Q6(this.connection,e),i=S.Ao.create();for(const s of n)this.setCachedRecordMap(i,s);return e.map((e=>{let{pointer:t,userId:n}=e;const s=this.getInMemory(t,n);if(s)return s;const o=i.get(t);return o&&o[n]}))},this.diskReadQueue=new g.Z({batchSize:Math.floor(w.mz/3)-1,maxWorkers:this.batchReadWorkers>0?this.batchReadWorkers:1,performRequests:this.getManyFromDisk}),this.flushWrites=async()=>{const e=this.pendingWrites;this.pendingWrites=S.Ao.create();const t=b.VS(Array.from(e),(e=>{let{value:t}=e;return t?Object.values(t):[]}));await C.Y3(this.connection,this.maxSize,t)},this.debouncedFlushWrites=b.Ds(this.flushWrites,500,{maxWait:3e3}),this.connection=e,this.maxSize=t}async initialize(e){}set(e,t,n,i,s){if(void 0===e||void 0===e.id){const t=new Error("Attempting to set a record with an invalid pointer.");return v.log({level:"error",from:"SqliteRecordCache",type:"SqliteRecordCache.setBadPointer",error:{message:"Attempting to set a record with an invalid pointer.",stack:t.stack},data:{pointer:e}}),void k.IE(t)}const o={pointer:e,userId:i=i||x.I,value:t,timestamp:Date.now(),importance:n};this.removePendingWrite(e,i,"delete"),this.enqueueWrite({type:"set",record:o,maybeStaleRecord:s})}async get(e,t){const n=`get ${M}`;t=t||x.I,M++,this.getLatency.start(n);try{const i=this.getInMemory(e,t);if(i)return this.enqueueWrite({type:"access",record:i}),this.getLatency.end(n,"memory"),i.value;const s=await(this.batchReadWorkers>0?this.diskReadQueue.enqueue({pointer:e,userId:t}):this.getFromDiskUnbatched(e,t));if(s)return this.enqueueWrite({type:"access",record:s}),this.getLatency.end(n,"disk"),s.value}finally{this.getLatency.end(n,"miss")}}deleteRecord(e,t){t=t||x.I,this.removePendingWrite(e,t,"set"),this.enqueueWrite({type:"delete",record:{pointer:e,userId:t}})}async getBlocksWithParent(e){const t=Date.now(),n=e.userId||x.I,i=await C.lR(this.connection,{...e,timestamp:t,userId:n}),s=S.Ao.create(),o=b.oA(Array.from(this.pendingWrites).map((i=>{const o=i&&i.value&&n&&i.value[n];if(!o||"set"!==o.type)return;const r=o.record.value?o.record.value.value:void 0;if(!r)return;if(o.record.pointer.table!==y.iU)return;const a=r;return a.parent_id===e.parent.id&&a.parent_table===e.parent.table?(s.set(o.record.pointer,!0),o.record.timestamp<t&&(o.record.timestamp=t),o.record.value):void 0})));for(const r of i)s.get(r.pointer)||this.getInMemory(r.pointer,r.userId)||o.push(r.value);return o}async getPageBlocksByParent(e){const t=Date.now(),n=e.userId||x.I,i=await C.GF(this.connection,{...e,timestamp:t,userId:n});return i.forEach((e=>{this.enqueueWrite({type:"access",record:{pointer:e.pointer,timestamp:t,userId:n,importance:void 0,value:e.value}})})),i}async reset(){this.pendingWrites=S.Ao.create(),await C.G$(this.connection)}enqueueWrite(e){this.debouncedFlushWrites();const{pointer:t,userId:n}=e.record,i=this.pendingWrites.get(t),s=i&&i[n];if(s){if("set"===s.type&&"access"===e.type){const t={type:"set",record:{...s.record,timestamp:e.record.timestamp}};return void this.setCacheOperationMap(this.pendingWrites,t)}const t="set"===s.type&&!s.maybeStaleRecord&&s.record.value&&s.record.value.value?s.record.value.value.version:void 0,n="set"===e.type&&e.maybeStaleRecord&&e.record.value&&e.record.value.value?e.record.value.value.version:void 0;if("number"==typeof t&&"number"==typeof n&&t>=n)return}this.setCacheOperationMap(this.pendingWrites,e)}async getFromDiskUnbatched(e,t){const[n]=await this.getManyFromDisk([{pointer:e,userId:t}]);return n}getInMemory(e,t){const n=this.pendingWrites.get(e),i=n&&n[t];if(i&&"set"===i.type)return i.record}setCacheOperationMap(e,t){const n=t,{pointer:i,userId:s}=n.record,o=e.get(i)||{};e.set(i,{...o,[s]:n})}setCachedRecordMap(e,t){const{pointer:n,userId:i}=t,s=e.get(n)||{};e.set(n,{...s,[i]:t})}removePendingWrite(e,t,n){const i=this.pendingWrites.get(e);i&&i[t]&&i[t].type===n&&this.pendingWrites.delete(e)}}var I=n(4615),T=n(65044),_=n(77892);const A=[WebSocket.OPEN,WebSocket.CONNECTING];class P{constructor(){this.sqliteConnection=void 0,this.environment=void 0,this.requests=new Map}setEnvironment(e){var t;this.environment=e,null===(t=this.sqliteConnection)||void 0===t||t.setEnvironment(e)}async initialize(){if(h.electronApi&&h.electronApi.sqliteServerEnabled){await this.initializeWebSocket();const e={execSqliteBatchV2:async e=>{const t=(0,I.ZP)(),{batch:n,precondition:i}=e,s=JSON.stringify({id:t,batch:n,precondition:i,auth:this.authToken});return await this.execSqliteBatchInner(t,s)},execSqliteBatch:async e=>{const t=(0,I.ZP)(),n=JSON.stringify({id:t,batch:e,auth:this.authToken});return await this.execSqliteBatchInner(t,n)}};this.sqliteConnection=new T.s({connection:e,type:"v2",migrations:await(0,_.kk)(e)})}}async execSqliteBatchInner(e,t){const n=new Promise((t=>{this.requests.set(e,t)}));this.ws.readyState===WebSocket.CLOSED&&await this.initializeWebSocket();try{this.ws.send(t)}catch(s){const e=this.ws;this.ws.onopen=function(n){e.send(t)}}const i=await n;if(i.error)throw new Error("Received SQLite error.");return i.value}async initializeWebSocket(){if(!h.electronApi||!h.electronApi.getSqliteMeta)return;const e=await h.electronApi.getSqliteMeta();if(e.error)return;if(this.ws&&A.includes(this.ws.readyState))return;const{serverProcessPort:t,authToken:n}=e.value;this.authToken=n;const i=`ws://127.0.0.1:${t}`;this.ws=new WebSocket(i),this.ws.onclose=()=>{v.log({level:"warning",from:"electronSqlite",type:"reinitializingWebsocket"}),this.initializeWebSocket()},this.ws.addEventListener("message",(e=>{const t=e.data.toString(),{id:n,result:i}=JSON.parse(t),s=this.requests.get(n);s&&(this.requests.delete(n),s({value:i}))})),await new Promise((e=>{this.ws.onopen=()=>{e()}}))}}var L=n(758),U=n(49085);class E extends U.default{getInitialState(){return{}}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state.data)))}}const Z=E;var R=n(70203),B=n(77907);class N extends U.default{getInitialState(){return{loading:!1,loaded:!1}}async loadIfNeeded(e){if(this.state.loaded||this.state.loading)return;const t=e();if(!t)return;if(0===R.CGe(t).length)return;const n=B.deps.katex.loader();this.setState({loading:!0,loaded:!1,result:n}),this.setState({loading:!1,loaded:!0,result:await n})}getKatex(){if(this.state.loaded)return this.state.result}}var V=n(15157),O=n(44615),D=n(606),z=n(63143),F=n(54642),W=n(2688),q=n(5315);class H extends U.default{static getCacheKey(e){return`LocalBacklinkStore2:${e}`}getInitialState(){return{}}initializeBacklinks(e){let{block:t,currentUserId:n,environment:i}=e;if(this.instanceState[t.id])return;const s=this.getCachedBacklinkState({blockId:t.id,currentUserId:n});s?this.setState({...this.instanceState,[t.id]:{state:s,loaded:!0}}):this.setState({...this.instanceState,[t.id]:{state:{backlinks:[],inaccessibleBacklinkCount:0},loaded:!1}}),K(i,t),this.startMessageListeners(t,i)}awaitLoaded(e){return this.waitUntil((()=>{const t=this.state[e];return Boolean(t&&t.loaded)}))}destroyBacklinks(e,t){this.stopMessageListeners(e,t),delete this.instanceState[e]}getBacklinkState(e){let{blockId:t,currentUserId:n}=e;const i=this.state[t];return i?i.state:this.getCachedBacklinkState({blockId:t,currentUserId:n})||{backlinks:[],inaccessibleBacklinkCount:0}}setBacklinkState(e){let{blockId:t,state:n,currentUserId:i}=e;this.setCachedBacklinkState({blockId:t,state:n,currentUserId:i});const s=this.state[t];s&&this.setState({...this.state,[t]:{...s,state:n,loaded:!0}})}updateBacklinks(e){const{createdBacklinks:t,deletedBacklinks:n,currentUserId:i}=e,s=(0,z.cf)(t),o=(0,z.cf)(n),r=s.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),a=o.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),d=new Set([...Object.keys(r),...Object.keys(a)]);return d.forEach((e=>{const t=r[e]||[],n=a[e]||[],s=this.getBacklinkState({blockId:e,currentUserId:i}),o=t.filter((e=>!s.backlinks.some((t=>b.Xy(e,t))))),d=[...s.backlinks,...o].filter((e=>!n.some((t=>b.Xy(e,t)))));this.setBacklinkState({blockId:e,state:{...s,backlinks:d},currentUserId:i})})),Array.from(d)}resetBacklinkState(e){let{blockIds:t,currentUserId:n}=e;for(const i of t)this.setCachedBacklinkState({blockId:i,state:{backlinks:[],inaccessibleBacklinkCount:0},currentUserId:n})}getCachedBacklinkState(e){let{blockId:t,currentUserId:n}=e;return V.Z.get({userId:n,key:H.getCacheKey(t)})}setCachedBacklinkState(e){let{blockId:t,state:n,currentUserId:i}=e;return V.Z.set({userId:i,key:H.getCacheKey(t),value:n})}async startMessageListeners(e,t){const n=D.dr.fromSpaceShardRecordId(e,y.iU);q.transactionQueue.isPendingTransactionForRecord(n)&&await q.transactionQueue.drain();const i=this.instanceState[n.id];if(!i)return;let s,o=!1;const r=b.P2(((n,i)=>{const r=s,a=i||void 0;s=a,o?r!==a&&K(t,e):o=!0}),1e3),a=(0,O.Mv)(n.id);i.messageStoreListenerReference=W.Z.addListener(a,r,void 0,t)}stopMessageListeners(e,t){const n=this.instanceState[e];n&&n.messageStoreListenerReference&&(W.Z.removeListener(n.messageStoreListenerReference,t),n.messageStoreListenerReference=void 0)}}async function K(e,t){await q.transactionQueue.awaitRecordTransaction({id:t.id,table:y.iU});const n=await F.getBacklinksForBlock(e,{block:t});"failed"!==n.type&&e.LocalBacklinkStore.setBacklinkState({blockId:t.id,state:{backlinks:n.data.backlinks,inaccessibleBacklinkCount:n.data.inaccessibleBacklinkCount},currentUserId:e.currentUser.id})}var G=n(29477);class $ extends U.default{getInitialState(){return{isOpen:!1,isSubMenuOverridden:!1,subMenuType:null,menuType:null,shouldRestoreSelectionForMenu:!0,enableShouldShowDebugging:!1}}clear(e){this.update((t=>({...t,menuType:null,shouldRestoreSelectionForMenu:e})))}async clearNativeActionMenuAndRestoreSelectionIfNecessary(){null!==this.state.menuType&&(this.clear(!0),await G.Vs(10))}}var Q=n(97880);function Y(e){return`PageDetailsStore:${e.type}:${e.id}`}class X extends U.default{getInitialState(){return{}}static getDefaultToggleState(e){return"discussion"===e.type||"backlinks"!==e.type&&void(0,Q.t1)(e)}getToggleState(e){const t=Y(e);if(t in this.state)return this.state[t]}setToggleState(e,t){const n=Y(e);this.setState({...this.state,[n]:t})}}var J=n(54153);const ee="spellcheckEnabled";class te{constructor(e){let{device:t}=e;this.enabled=void 0,this.currentLanguages=void 0;const n=J.Z.get(ee);this.setEnabled(void 0===n||n)}setEnabled(e){var t,n;(this.enabled=e,J.Z.set(ee,e),null!==(t=h.electronApi)&&void 0!==t&&t.setSpellCheckerEnabled)&&(null===(n=h.electronApi)||void 0===n||n.setSpellCheckerEnabled(e))}isEnabled(){return this.enabled}getCorrections(e){return e.dictionarySuggestions}addToDictionary(e){var t;null!==(t=h.electronApi)&&void 0!==t&&t.addToDictionary&&h.electronApi.addToDictionary(e)}setLanguages(e){var t;b.Xy(this.currentLanguages,e)||(this.currentLanguages=e,null!==(t=h.electronApi)&&void 0!==t&&t.setSpellCheckerLanguages&&h.electronApi.setSpellCheckerLanguages(0===e.length?[navigator.language]:e))}async getLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=h.electronApi)&&void 0!==e&&e.getSpellCheckerLanguages){const e=await h.electronApi.getSpellCheckerLanguages();for(const i of e)n.push({code:i,name:t.of(i)})}return n}async getAvailableLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=h.electronApi)&&void 0!==e&&e.getAvailableSpellCheckerLanguages){const e=await h.electronApi.getAvailableSpellCheckerLanguages();for(const i of e)n.push({code:i,name:t.of(i)})}return n}}var ne=n(14577);class ie extends ne.Z{}const se=["nativeRedirect","page","space","nativeTab","onboarding","unsubscribe","unknown","uiDoc","root"],oe=[...se,"login","signup","quickSearch"];let re=0;async function ae(e){var t,n;const{device:g,mobileNative:v,prefetchCache:f}=e,b=""+re++,S=g.isElectron&&Boolean(null===(t=h.electronApi)||void 0===t?void 0:t.sqliteServerEnabled)?await async function(e){var t;if(!e.device.isElectron||null===(t=h.electronApi)||void 0===t||!t.sqliteServerEnabled)return;const n=new P;return await n.initialize(),n}({device:g}):void 0,y=new d.Z,w=new l.Xk,k=new u.Z;let x;x=null!==(n=h.electronApi)&&void 0!==n&&n.getAvailableSpellCheckerLanguages?new te({device:g}):new L.P({device:g});const C=(null==v?void 0:v.sqliteConnection)||(null==S?void 0:S.sqliteConnection),M=C?new j(C,1e5):void 0,I=function(e){const{device:t,RouterStore:n,ThemeStore:i}=e;let s=se;return(t.isElectron||t.isMobileNative)&&(s=oe),new ie((()=>{const e=n.state.route;return e&&s.includes(e.name)?i.state.mode:"light"}),{debugName:"ThemeModeStore"})}({device:g,RouterStore:y,ThemeStore:k}),T=g.isMobile?new $:void 0,_={key:b,AppUpdateStore:new r.D,device:g,WindowSizeStore:new p.j({device:g},window),KeyboardShortcutStackStore:new a.h({device:g}),defaultRecordCache:new s.q({inMemoryRecordCache:new i.Z({name:"default"}),persistedRecordCache:M}),mobileNative:v,RouterStore:y,ThemeStore:k,ThemeModeStore:I,ElectronSqlite:S,KatexStore:new N,LocalBacklinkStore:new H,PageDetailsStore:new X,updateCurrentUserId:void 0,currentUser:new o.CurrentUser,SpellCheckStore:x,CsatMilestoneStore:new Z,NativeMobileActionBarStore:T,TextSelectionCompositionStore:new c.h,recordSubscriptionActions:m,prefetchCache:f,TabbedRouterStore:w};return null==S||S.setEnvironment(_),null==v||v.setEnvironment(_),_}},91190:(e,t,n)=>{"use strict";n.d(t,{C:()=>o,E:()=>s});var i=n(61766);const s=new i.Z,o=new i.Z},26492:(e,t,n)=>{"use strict";function i(e){return e.isElectron||e.isMobileNative}n.r(t),n.d(t,{deviceSupportsSqlite:()=>i})},43604:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n(49085).default.createValue({open:!1})},74055:(e,t,n)=>{"use strict";n.d(t,{V:()=>s,Z:()=>r});var i=n(49085);let s=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class o extends i.default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const r=new o},81212:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=new(n(61364).Z)},53610:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=new(n(61766).Z)},66881:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});const i=n(49085).default.createValue({shouldReset:!1})},82855:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});n(67294);var i=n(45238),s=n(85893);const o=(0,i.I)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,s.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},64878:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});n(67294);var i=n(45238),s=n(85893);const o=(0,i.I)("dot",{viewBox:"0 0 5 4",svg:(0,s.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},25278:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});n(67294);var i=n(45238),s=n(85893);const o=(0,i.I)("eyes",{viewBox:"0 0 72 72",svg:(0,s.jsx)("path",{d:"M17.0312 64.4375C26.25 64.4375 33.5625 52.9688 33.5625 36.4375C33.5625 19.9062 26.25 8.46875 17.0312 8.46875C7.8125 8.46875 0.5 19.9062 0.5 36.4375C0.5 52.9688 7.8125 64.4375 17.0312 64.4375ZM54.9688 64.4375C64.1875 64.4375 71.5 52.9688 71.5 36.4375C71.5 19.9062 64.1875 8.46875 54.9688 8.46875C45.75 8.46875 38.4375 19.9062 38.4375 36.4375C38.4375 52.9688 45.75 64.4375 54.9688 64.4375ZM10.0625 47.1875C15.125 47.1875 18.4688 43.6562 18.4688 38.3438C18.4688 33.0938 15.125 29.5625 10.0625 29.5625C7.6875 29.5625 5.71875 30.3125 4.25 31.6875C5.375 19.9375 10.6875 11.9375 17.0312 11.9062C24.25 11.875 30.125 22.0312 30.125 36.4375C30.125 50.7812 24.25 60.9688 17.0312 61C11.5312 61.0312 6.78125 54.9688 4.90625 45.5938C6.28125 46.625 8.03125 47.1875 10.0625 47.1875ZM47.9688 47.1875C53 47.1875 56.4062 43.6562 56.4062 38.3438C56.4062 33.0938 53 29.5625 47.9688 29.5625C45.5938 29.5625 43.5938 30.3438 42.1562 31.6875C43.2812 19.9375 48.5938 11.9375 54.9688 11.9375C62.1562 11.9062 68 22.0938 68 36.4375C68 50.7812 62.1562 60.9688 54.9688 60.9688C49.4375 61 44.6875 54.9375 42.7812 45.5938C44.1562 46.5938 45.9375 47.1875 47.9688 47.1875ZM45.5312 37.4062C44.4375 37.25 43.75 35.9688 44.0312 34.6562C44.3125 33.3125 45.3125 32.3438 46.375 32.5312C47.4688 32.75 48.0938 34.0312 47.8438 35.3125C47.5938 36.6562 46.5938 37.5938 45.5312 37.4062ZM7.625 37.4062C6.53125 37.25 5.84375 35.9688 6.09375 34.6562C6.375 33.3125 7.40625 32.3438 8.4375 32.5312C9.5625 32.7812 10.1875 34.0312 9.9375 35.3125C9.6875 36.6562 8.65625 37.5938 7.625 37.4062Z"})})},70954:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});n(67294);var i=n(45238),s=n(85893);const o=(0,i.I)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})},55449:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});n(67294);var i=n(45238),s=n(85893);const o=(0,i.I)("onboardingUseCaseBook",{viewBox:"0 0 18 22",svg:(0,s.jsx)("path",{d:"M3.654 21.535H16.36c.518 0 .918-.4.918-.918 0-.44-.302-.762-.674-.937-1.2-.537-1.435-2.198-.214-3.36.498-.44.879-.927.879-1.914V3.596c0-2.11-1.084-3.213-3.184-3.213H3.674C1.584.383.49 1.477.49 3.596v14.756c0 2.09 1.094 3.183 3.164 3.183zM13.908 2.326c.947 0 1.416.498 1.416 1.397v10.38c0 .479-.273.743-.761.743h-9.59V2.326h8.935zM2.434 15.187V3.723c0-.81.38-1.29 1.152-1.377v12.51a3 3 0 00-1.152.332zM6.72 6.8h6.826c.38 0 .693-.313.693-.694a.696.696 0 00-.693-.693H6.72a.696.696 0 00-.694.693c0 .381.313.694.694.694zm0 2.724h5.175c.381 0 .694-.312.694-.693a.696.696 0 00-.694-.693H6.721a.696.696 0 00-.694.693c0 .38.313.693.694.693zM3.918 19.7c-1.045 0-1.592-.596-1.592-1.514 0-.888.625-1.503 1.66-1.503h9.746c.108 0 .215-.01.313-.03-.488 1.035-.43 2.159.098 3.047H3.918z",fill:"#6E6C62"})})},18613:(e,t,n)=>{"use strict";n.r(t),n.d(t,{clearNotionLocalStorageWithNoPermission:()=>o});var i=n(46637),s=n(72128);function o(){i.Z.removeAllIfNoPermission(),s.Z.removeAllIfNoPermission()}},35717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},27117:(e,t,n)=>{var i=n(17187),s=n(35717);function o(e){if(!(this instanceof o))return new o(e);"number"==typeof e&&(e={max:e}),e||(e={}),i.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}e.exports=o,s(o,i.EventEmitter),Object.defineProperty(o.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),o.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},o.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},o.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},o.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},o.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},o.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge)||(this.remove(e),this.emit("evict",{key:e,value:t.value}),!1)},o.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},o.prototype.evict=function(){if(this.tail){var e=this.tail,t=this.remove(this.tail);this.emit("evict",{key:e,value:t})}}},20745:(e,t,n)=>{"use strict";var i=n(73935);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot}}]);