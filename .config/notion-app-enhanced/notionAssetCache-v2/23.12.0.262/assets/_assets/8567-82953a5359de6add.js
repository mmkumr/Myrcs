"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8567],{10912:(e,t,r)=>{r.d(t,{Z:()=>C});r(57658),r(67294);var i=r(83355),o=r(27531),n=r(41432),s=r(80951),a=r(95538),l=r(21202),d=r(97880),c=r(78316),p=r(17311),u=r(35328),h=r(26350),m=r(24927),g=r(12981),v=r(43568),y=r(81865),f=r(33411),x=r(35541),S=r(85893);function j(e){return"number"==typeof e}class b extends i.Z{constructor(){super(...arguments),this.renderContentBlock=e=>{const{store:t,renderAdditionalBlocks:r,rendererBlockStyle:i}=this.props,n=h.G.createChildStore(t,{table:l.iU,id:e}),s=n.getType(),a=r&&void 0!==s?(0,x.u)(n):(0,m.h)(n);if(a)return(0,S.jsx)(o.D,{value:this.restrictedContentStore,children:(0,S.jsx)(a,{store:n,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:(0,u.BX)(n),style:{fontSize:12,opacity:.8,pointerEvents:"none",...i},isQuickFind:!0,numberedListCounterStore:this.createComputedStore((()=>({depth:0,numberedListBlockIdsWithFormat:this.createNumberedListCounterStore(e)})))})},e)},this.coverStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,r=(0,c.NU)(e,t);return r.image?r.image:!(this.props.showLoadingShimmer&&0===r.blockIds.length&&!r.isDefined)&&r.blockIds})),this.restrictedContentStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,r=(0,c.wK)(e,t);return r.image?void 0:r.blockIds})),this.numberedLists=this.createComputedStore((()=>{const{store:e}=this.props,t=this.coverStore.state,r=[];if(Array.isArray(t)){let i=0;for(;i<t.length;){let o=t[i],s=h.G.createChildStore(e,{table:l.iU,id:o});if(s.getType()===n.Ti.numberedList){const a=[{blockId:o,idx:1}],d=[{id:o,format:void 0,depth:a.length-1,index:a[0].idx}];for(i+=1;i<t.length&&(o=t[i],s=h.G.createChildStore(e,{table:l.iU,id:o}),s.getType()===n.Ti.numberedList);){{const e=s.getParentId();if(s.getParentId()===a[a.length-1].blockId)a.push({blockId:o,idx:1});else{let t=a[a.length-1].idx;for(;a.length>0&&a[a.length-1].blockId!==e;)t=a[a.length-1].idx,a.pop();a.push({blockId:o,idx:t+1})}d.push({id:o,format:void 0,depth:a.length-1,index:a[a.length-1].idx})}i+=1}r.push(d)}else i+=1}}return r}))}didUpdate(e){this.props.coverFormat.type!==e.coverFormat.type&&this.props.onLoadProxiedImage()}renderComponent(){const{coverFormat:e}=this.props;return"page_cover"===e.type?this.renderPageCover():"page_content"===e.type?this.renderPageContent():"property"===e.type?this.renderProperty(e.property):void 0}renderPageCover(){var e;const{store:t}=this.props,r=null===(e=t.getCover())||void 0===e?void 0:e.cover;return r?(0,S.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,S.jsx)(y.Z,{url:r,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:P(this.props.coverWidth,this.props.coverSizeFormat),onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),render:(e,t)=>{if(t)return(0,S.jsx)(g.Z,{style:{...I(this.props.style),...this.getCoverStyle(),..._(this.props.coverAspectFormat),objectPosition:`center ${100*(1-w(this.props.store,this.props.coverPosition))}%`},src:t})}}),this.renderImageBorder()]}):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderPageContent(){const e=this.coverStore.state,t=this.restrictedContentStore.state;if(!1===e)return this.renderLoadingShimmer();if(e){if(!Array.isArray(e))return(0,S.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,S.jsx)(y.Z,{url:e.url,onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),isAuthenticated:!0,permissionRecord:e.pointer,width:P(this.props.coverWidth,this.props.coverSizeFormat),render:(e,t)=>{if(t)return(0,S.jsx)(g.Z,{style:{...I(this.props.style),...this.getPageContentImageStyle(),..._(this.props.coverAspectFormat),objectPosition:`center ${100*(1-w(this.props.store,this.props.coverPosition))}%`},src:t})}}),this.renderImageBorder()]});if(e.length>0)return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{style:this.getContentWrapStyle(),children:[t?e.filter((e=>t.indexOf(e)>=0)).map(this.renderContentBlock):e.map(this.renderContentBlock),this.props.coverContentFadedOverlay&&(0,S.jsx)("div",{style:this.getContentFadedOverlayStyle()})]})});if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}else if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}renderProperty(e){const{store:t}=this.props,r=(0,s.g)(t.getPropertyValue(e)).find((e=>(0,a.SR)({url:e.url})));return r?(0,S.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,S.jsx)(y.Z,{onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),url:r.url,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:P(this.props.coverWidth,this.props.coverSizeFormat),render:(e,t)=>{if(t)return(0,S.jsx)(g.Z,{style:{...I(this.props.style),...this.getCoverStyle(),..._(this.props.coverAspectFormat),objectPosition:`center ${100*(1-w(this.props.store,this.props.coverPosition))}%`},src:t})}}),this.renderImageBorder()]}):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderEmptyGalleryCover(){return(0,S.jsx)("div",{style:{height:k(this.props.coverHeight,this.props.coverSizeFormat),...this.props.emptyGalleryCoverStyle}})}renderLoadingShimmer(){return(0,S.jsx)("div",{style:{height:k(this.props.coverHeight,this.props.coverSizeFormat),...this.props.loadingShimmerStyle},children:(0,S.jsx)(f.Z,{show:!0,showDelay:100,showHold:0,render:e=>e?(0,S.jsx)(v.Z,{paragraphs:[{lineHeight:12,lineMargin:6,sectionWidths:[100,100,50],repeat:1,sectionMargin:0}]}):void 0})})}renderImageBorder(){switch(this.props.variant){case"default":return null;case"gallery":return(0,S.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${this.theme.regularDividerColor}`}});default:(0,d.t1)(this.props.variant)}}createNumberedListCounterStore(e){const t=this.numberedLists.state;for(const r of t)if(r.find((t=>t.id===e)))return r;return[]}getImageCoverWrapStyle(){return{height:k(this.props.coverHeight,this.props.coverSizeFormat),position:"relative",pointerEvents:"none",overflow:"hidden",...this.props.imageCoverWrapStyle}}getContentWrapVariantStyle(){const{ThemeStore:e}=this.environment,t="dark"===e.state.mode;switch(this.props.variant){case"default":return{};case"gallery":return{background:this.theme.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:t?"transparent":`inset 0 -1px 0 0 ${this.theme.regularDividerColor}`,...this.props.contentWrapStyle};default:(0,d.t1)(this.props.variant)}}getContentWrapStyle(){return{height:k(this.props.coverHeight,this.props.coverSizeFormat),pointerEvents:"none",overflow:"hidden",position:this.props.coverContentFadedOverlay?"relative":"static",...this.getContentWrapVariantStyle(),...this.props.contentWrapStyle}}getContentFadedOverlayStyle(){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${this.theme.accentColors.gray[30]} 100%)`,...this.props.coverContentFadedOverlayStyle}}getCoverVariantStyle(){switch(this.props.variant){case"default":return{border:`1px solid ${this.theme.stroke.regular}`,borderRadius:4};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,d.t1)(this.props.variant)}}getCoverStyle(){return{width:"100%",height:k(this.props.coverHeight,this.props.coverSizeFormat),...this.getCoverVariantStyle(),objectPosition:"center"}}getPageContentImageStyle(){return{...this.getCoverStyle(),objectPosition:"center center"}}}b.displayName="CollectionItemCover";const C=b;function w(e,t){if(j(t))return t;if(e.getFormatStore().isDefined()){const{page_cover_position:t,card_cover_position:r}=e.getFormat();if(j(r))return r;if(j(t))return t}return.5}function I(e){return e||{}}function k(e,t){if(e)return e;switch(t){case"large":return p.Z.card.desktop.large.height;case"small":return p.Z.card.desktop.small.height;case"medium":default:return p.Z.card.desktop.medium.height}}function P(e,t){return e||(0,c.rD)(t)}function _(e){return{objectFit:void 0===e?"cover":e}}},98567:(e,t,r)=>{r.d(t,{D5:()=>ke,E5:()=>Te,s6:()=>Se,Tq:()=>Ze});var i=r(67294),o=r(1302),n=r(480),s=r(86628),a=r(24405),l=r(15145),d=r(1800),c=r(7057),p=r(78601),u=r(66673),h=r(69651),m=r(75553),g=r(56666),v=r(40462),y=r(64572),f=r(76725),x=r(72126),S=r(4615),j=r(99405),b=r(21202),C=r(70279),w=r(70203),I=r(44805),k=r(82990),P=r(44876),_=r(31412),Z=r(50906),T=r(14871),U=r(45990),F=r(97444),R=r(32741),B=r(95477),z=r(60682),K=r(24990),M=r(49616),O=r(4708),W=r(73744),L=r(41232),E=r(6398),H=r(88804),V=r(75024),A=r(4023),D=r(15723),G=r(80444),q=r(77080),N=r(96049),$=r(42653),Y=r(72014),J=r(26350),X=r(48588),Q=r(10912),ee=r(18746),te=r(64921),re=r(31945),ie=r(51077),oe=r(73063),ne=r(12981),se=r(53437),ae=r(31278),le=r(76798),de=r(94096),ce=r(27186),pe=r(19987),ue=r(69255),he=r(25735),me=r(19889),ge=r(12740),ve=r(85893);function ye(e){window.__c={n:"HoverUserPreviewOverlayRenderer"};const t=(0,s.VK)((()=>G.default.state.currentSpaceStore),[]),r=(0,s.VK)((()=>{var t;return null===(t=e.state)||void 0===t?void 0:t.annotation}),[e.state]),i=(0,u.Rm)(r,void 0,600,Object.is),o=(0,s.VK)((()=>{if(t&&i)return J.U6.createChildStore(t,{id:i[1],table:me.KJ})}),[t,i]),n=(0,s.VK)((()=>!!o&&o.isDefined()),[o]);return o&&n&&t?(0,ve.jsx)(ge.Z,{targetUserStore:o}):null}var fe=r(29551),xe=r(74169);function Se(e){window.__c={n:"HoverPreviewOverlay"};const t=(0,n.O7)(),r=(0,s.Kw)(N.Z,{debugName:"HoverPreviewOverlay"}),{state:o,pinPopup:a,unpinPopup:l,hasBeenHovering:d,isPinned:c,dismissPopup:p}=function(){const[e,t]=(0,i.useState)(!1),[r]=(0,s.AF)(X.Z),o=(0,u.Kt)(r,400,Object.is),[n,a]=(0,i.useState)(void 0),l=n||(e?void 0:o),d=(0,i.useCallback)((()=>a(l)),[l]),c=(0,i.useCallback)((()=>{a(void 0)}),[]),p=(0,i.useCallback)((()=>{c(),t(!0)}),[c]);return(0,i.useEffect)((()=>{t(!1)}),[o]),{state:l,pinPopup:d,unpinPopup:c,hasBeenHovering:r&&r===l,isPinned:Boolean(n),dismissPopup:p}}(),h=(0,s.VK)((()=>q.default.checkGate("first_party_links")),[]),m=(0,s.VK)((()=>(0,O.En)()),[]),g=function(e){const t=(0,n.O7)();return(0,s.VK)((()=>!!e&&(0,H.E)(t,e.store)),[e,t])}(o),v=(0,i.useMemo)((()=>Boolean(o&&function(e,t){return t&&(e.annotations.some(w.j0F)||e.annotations.some(w.nSN))}(o,g))),[o,g]),y=(0,i.useMemo)((()=>o&&o.token.node.getBoundingClientRect()),[o]),f=y&&0===y.width&&0===y.height&&0===y.left&&0===y.top,S=v?!f:Boolean(!r&&d&&!f),[,j]=(0,s.AF)($.Z);(0,i.useEffect)((()=>(j({isPinned:c}),()=>j({isPinned:!1}))),[c,j]);const b=!(null!=o&&o.annotations.some(w.nSN))&&h&&!(null!=o&&o.annotations.some(w.STW)),C=(m&&(null==o?void 0:o.annotations.some(w.IWo)))??!1,I=(0,s.VK)((()=>t.RouterStore.state),[t.RouterStore]);return(0,i.useEffect)((()=>{p()}),[I,p]),(0,i.useEffect)((()=>{const e=x.P2((()=>{R.lY(),p()}),200,{leading:!0});return W.lj(window,"scroll",e,!0),()=>W.ZV(window,"scroll",e,!0)}),[p]),(0,ve.jsx)(se.ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:!v,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:se.ZP.PopupType.Popup,open:S,originRect:y,originGap:6,alignmentToOrigin:C?se.ZP.Alignment.End:se.ZP.Alignment.Start,placementToOrigin:C?se.ZP.Placement.Top:se.ZP.Placement.Bottom,useLightBoxShadow:b,render:()=>o&&(0,ve.jsx)("div",{onMouseEnter:a,onMouseLeave:l,children:(0,ve.jsx)(je,{state:o,isHoveredTokenEditable:g,onDismiss:l})})})}function je(e){window.__c={n:"HoverPreviewOverlayRenderer"};const t=(0,s.VK)((()=>q.default.checkGate("first_party_links")),[]),r=(0,s.VK)((()=>(0,O.En)()),[]),i=(0,n.Fy)(),o=(0,s.VK)((()=>{const{currentSpaceStore:e}=G.default.state;return e?e.getPermissionGroups():[]}),[]),l=(0,a.yK)((e=>({noMembersInGroupStyle:{fontSize:k.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]),d=e.state.annotations,c=d.find(w.j0F),p=d.find(w.fpG),u=d.find(w._bk),h=d.find(w.aq),m=w.frE(d),g=t?d.find(w.STW):void 0,v=r?d.find(w.IWo):void 0;if(c&&e.state.store.table!==C.x_)return(0,ve.jsx)(be,{...e,state:{...e.state,annotation:c}});if(p)return(0,ve.jsx)(Ce,{...e,state:{...e.state,annotation:p}});if(u){const e=w.kxk(u);if(e){const t=e.groupId,r=o.find((e=>e.id===t));if(r)return(0,ve.jsx)(he.Y,{group:r,limit:10,color:"white_background",trackHover:!0,noMembersMessage:(0,ve.jsx)(fe.gq,{style:l.noMembersInGroupStyle,children:(0,ve.jsx)("div",{style:k.Z.textOverflowStyle,children:(0,ve.jsx)(_.FormattedMessage,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})})})})}}return h?(0,ve.jsx)(we,{...e,state:{...e.state,annotation:h}}):m&&!i.isMobile?(0,ve.jsx)(ke,{...e,state:{...e.state,annotation:m},onDismiss:e.onDismiss}):t&&g&&!i.isMobile?(0,ve.jsx)(_e,{...e,state:{...e.state,annotation:g},onDismiss:e.onDismiss}):v&&!i.isMobile?(0,ve.jsx)(ye,{...e,state:{...e.state,annotation:v},onDismiss:e.onDismiss}):null}function be(e){window.__c={n:"HoverLinkPreviewOverlayRenderer"};const{onDismiss:t}=e,{annotation:r,store:c,token:p}=e.state,u=(0,n.O7)(),h=(0,a.Fg)(),g=w.zW$(r),f=(0,y.A5)({url:g,baseUrl:B.default.domainBaseUrl,publicDomainName:B.default.publicDomainName}),x=(0,i.useCallback)((async()=>{t(),F.AE({token:p,store:c,readOnly:!1}),await o.default.afterNextFlush(),U.dz({type:"focusOnly",focus:!0})}),[t,c,p]),S=(0,i.useCallback)((async()=>{t(),await o.default.afterNextFlush();const e=T.tq.copiedLinkToClipboard;let r=g;const i=(0,j.Wj)({url:g,baseUrl:B.default.domainBaseUrl,publicDomainName:B.default.publicDomainName,isMobile:u.device.isMobile,protocol:B.default.protocol,currentUrl:window.location.href});if("page"===i.name){const e=J.G.createChildStore(c,{table:b.iU,id:i.blockId});r=(0,d.Z)({pageId:i.blockId,pageModel:e.getModel(),baseUrl:B.default.domainBaseUrl,discussionId:i.discussionId,scrollToBlockId:i.scrollToBlockId,peekViewBlockId:i.peekViewBlockId,peekMode:i.peekMode,pageVisitSource:l.tY.CopyLink})}T.RD({environment:u,stringValue:r,copiedMessage:e})}),[u,t,c,g]),C=(0,a.yK)((e=>({wrapper:{fontSize:k.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,fontWeight:k.Z.fontWeight.regular,fill:e.mediumIconColor},destination:{padding:"4px 0 4px 6px"},button:{display:"flex",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:4,color:e.regularTextColor},destinationText:{paddingRight:6,maxWidth:250,...k.Z.textOverflowStyle},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),P=(0,_.useIntl)(),Z=(0,_.defineMessages)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"}}),R=(0,s.VK)((()=>{if(!f)return;const e=J.G.createChildStore(c,{table:b.iU,id:f});return{pageIcon:(0,I.tp)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:B.default.domainBaseUrl,getRecordModel:c.getRecordModel,emojiType:(0,z.e_)(u),isSafariOrIOS:u.device.isSafari||u.device.isIOS,isClient:!0,showEmojiInline:u.device.isWindows,currentUserId:u.currentUser.id,theme:h,emojiData:K.Z.state}),title:(0,ve.jsx)(le.Z,{style:C.destinationText,store:e})}}),[u,c,f,C,h])||{pageIcon:(0,v.o)(C.icon),title:(0,ve.jsx)("div",{style:C.destinationText,children:g})};return(0,ve.jsxs)(fe.gq,{style:C.wrapper,alignItems:"center",children:[(0,ve.jsxs)(fe.gq,{style:C.destination,alignItems:"center",children:[R.pageIcon,R.title]}),(0,ve.jsx)(oe.Z,{onClick:S,icon:m.U,isDarkIconColor:!0,ariaLabel:P.formatMessage(Z.copyLink)}),e.isHoveredTokenEditable&&(0,ve.jsx)(te.Z,{style:C.button,onClick:x,children:(0,ve.jsx)(_.FormattedMessage,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})})]})}function Ce(e){window.__c={n:"HoverDatePreviewOverlayRenderer"};const{annotation:t}=e.state,r=w.zyO(t),i=(0,a.yK)((e=>({container:{fontSize:k.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),o=(0,_.useIntl)(),n="relative"===r.date_format?"ll":"relative",s=(0,c.ZV)({value:r,date_format:n,time_format:"h:mm A",allowRelativeDates:!0,intl:o});return s===(0,c.ZV)({value:r,date_format:r.date_format,time_format:r.time_format,allowRelativeDates:!0,intl:o})?null:(0,ve.jsxs)(fe.gq,{style:i.container,alignItems:"center",children:[(0,h.C)(i.icon),(0,ve.jsx)("div",{style:k.Z.textOverflowStyle,children:s})]})}function we(e){window.__c={n:"HoverTemplateVariablePreviewOverlayRenderer"};const{annotation:t}=e.state,r=w.fsE(t),i=(0,_.useIntl)(),o=w.Z08(r.type,i),n=(0,a.yK)((e=>({container:{fontSize:k.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]);return(0,ve.jsx)(fe.gq,{style:n.container,alignItems:"center",children:(0,ve.jsx)("div",{style:k.Z.textOverflowStyle,children:o})})}function Ie(e){var t;window.__c={n:"ExternalObjectInstancePreviewContent"};const{renderConfig:r,store:i}=e,o=(0,a.yK)((e=>({title:{color:e.regularTextColor,fontWeight:k.Z.fontWeight.semibold,whiteSpace:"initial",fontSize:13,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:k.Z.fontSize.UISmall.desktop},dictionaryKey:{color:e.lightTextColor,fontWeight:k.Z.fontWeight.regular,fontSize:k.Z.fontSize.UISmall.desktop},dictionaryValue:{color:e.mediumTextColor,fontSize:k.Z.fontSize.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return(0,ve.jsxs)(ve.Fragment,{children:[r.title&&(0,ve.jsx)(fe.gq,{children:(0,ve.jsx)(E.ox,{...r.title,store:i,style:o.title})}),r.headerAttributes&&r.headerAttributes.length>0&&(0,ve.jsx)(fe.gq,{alignItems:"center",style:{...o.header,marginBottom:8},children:(0,f.Z)(r.headerAttributes.map(((e,t)=>(0,ve.jsx)(E.ox,{...e,store:i,style:{...o.header,...k.Z.textOverflowStyle}},`attribute-${t}`)))||[],(e=>(0,ve.jsxs)("span",{children:[" ","·"," "]},`dot-${e}`)))}),r.dictionaryAttributes&&r.dictionaryAttributes.length>0&&(0,ve.jsx)(fe.Ht,{children:r.dictionaryAttributes.map(((e,t)=>{var n;let{key:s,value:a}=e;return(0,ve.jsxs)(fe.gq,{style:{marginBottom:t!==((null===(n=r.dictionaryAttributes)||void 0===n?void 0:n.length)??0)-1?4:8},children:[(0,ve.jsx)("div",{style:{marginRight:8,width:"30%",display:"flex",alignItems:"center"},children:(0,ve.jsx)("span",{style:o.dictionaryKey,children:(0,ve.jsx)(_.FormattedMessage,{...s.formatter,values:{value:a.attribute.name}})})}),(0,ve.jsxs)("div",{style:{width:"70%",display:"flex",alignItems:"center"},children:[a.icon&&(0,P.li)(a.icon)&&(0,ve.jsx)(ie.Z,{type:"image_url",imageURL:a.icon.values[0],size:16,style:{marginRight:6}}),(0,ve.jsx)(E.ox,{...a,store:i,style:o.dictionaryValue,avatarStyle:{marginRight:6}})]})]},t)}))}),r.bodyAttribute&&(0,ve.jsx)(fe.gq,{style:((null===(t=r.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,ve.jsx)(E.hx,{attribute:r.bodyAttribute})}),r.previewImageAttribute&&(0,ve.jsx)("div",{style:{marginTop:r.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,ve.jsx)("div",{children:(0,ve.jsx)(ne.Z,{src:r.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})})]})}function ke(e){window.__c={n:"HoverExternalObjectInstanceOverlayRenderer"};const{state:{annotation:t,store:r,token:o},onDismiss:l}=e,d=w.frW(t),c=(0,n.O7)(),u=(0,a.Fg)(),h=(0,i.useRef)(null),m=(0,s.VK)((()=>{const t=J.G.createChildStore(r,{table:b.iU,id:d,spaceId:r.pointer.spaceId}),i=t.canEdit(),n=(0,L._F)({store:t,isInDarkMode:"dark"===u.mode,canEdit:i,currentUserId:c.currentUser.id,getRenderFn:e=>t=>{var r,i;return(null===(r=e.hover)||void 0===r?void 0:r.call(e,t))||(null===(i=p.j.hover)||void 0===i?void 0:i.call(p.j,t))},showAction:void 0});if(!n)return;const{renderConfig:s,integration:a}=n,m=Boolean(n.action),v=e.isHoveredTokenEditable,y=r.recordStoreUIParentStore&&r.recordStoreUIParentStore instanceof J.G?r.recordStoreUIParentStore:void 0;return(0,ve.jsxs)("div",{style:{display:"flex",flexDirection:"column"},ref:h,children:[(0,ve.jsxs)(fe.gq,{alignItems:"center",style:{fontSize:12},children:[(0,ve.jsx)(ie.Z,{type:"image_url",imageURL:a.icon,size:16,style:{margin:4}}),(0,ve.jsx)("div",{style:{flexGrow:1,fontWeight:k.Z.fontWeight.medium},children:a.name}),o&&!m&&v&&(0,ve.jsx)("div",{children:(0,ve.jsx)(re.ZP,{popupType:re.Z4.Popup,placementToOrigin:A.u.Right,alignmentToOrigin:A.v.Start,originGap:4,onClose:()=>{let e=!1;const t=h.current;t&&(e=(0,D.uh)(t.getBoundingClientRect(),ce.IL.x,ce.IL.y)),e||null==l||l()},renderOrigin:e=>(0,ve.jsx)(te.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:u.lightIconColor},...e,children:(0,g.o)({width:14})}),render:e=>(0,ve.jsx)(ue.default,{titleForReloadMenuOption:(0,ve.jsx)(_.FormattedMessage,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:y,store:t,token:o,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),m&&v?(0,ve.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"},children:(0,ve.jsx)(pe.Z,{canEdit:i,store:t,isHoverPreview:!0,postActionCallback:l})}):(0,ve.jsx)(Ie,{renderConfig:s,store:t})]})}),[d,r,c,u,o,l,e.isHoveredTokenEditable,h]);return m?(0,ve.jsx)("div",{style:{padding:"12px 16px",minWidth:260,maxWidth:320},children:m}):null}function Pe(e){window.__c={n:"HoverPagePreviewContent"};const t=(0,n.O7)(),{store:r}=e,o=(0,s.VK)((()=>M.TP(r)),[r]),l=(0,a.yK)((e=>({icon:{height:16,width:16,fill:e.icon.purple,marginRight:2},title:{fontSize:12,color:e.icon.purple},summary:{...(0,V.pd)(4),fontSize:12,lineHeight:1.35,color:e.text.secondary,marginBottom:12},contentCover:{color:e.text.primary,fontSize:11,lineHeight:1.5,marginBottom:0,width:"110%",transform:"translateX(-13px) translateY(-2px) scale(0.91)"},contentCoverEmpty:{height:16},imageCoverWrap:{marginBottom:16},contentCoverFade:{height:48,background:`linear-gradient(to bottom, transparent, ${e.fill.elevated} 100%)`},loadingShimmer:{marginBottom:0},rendererBlockStyle:{fontSize:9}})),[]),d=o&&w.Vkf(o)>=20,c=(0,i.useMemo)((()=>(0,S.ZP)()),[]);return(0,i.useEffect)((()=>{const e=Y.$g.getCurrentPageVisitId();return Z.piO(t,{hover_session_id:c,mentioned_page_id:r.pointer.id,hover_content_type:d?"ai_summary":"content_preview",page_visit_id:e}),()=>{Z.Yo0(t,{hover_session_id:c,hover_content_type:d?"ai_summary":"content_preview",mentioned_page_id:r.pointer.id,page_visit_id:e})}}),[t,c,d,r.pointer.id]),d?(0,ve.jsx)("div",{children:(0,ve.jsx)("div",{style:l.summary,children:(0,ve.jsx)(ee.A,{textValue:o,parentStore:r})})}):(0,ve.jsx)(Q.Z,{variant:"default",store:r,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:l.contentCoverFade,coverHeight:86,contentWrapStyle:l.contentCover,imageCoverWrapStyle:l.imageCoverWrap,emptyGalleryCoverStyle:l.contentCoverEmpty,loadingShimmerStyle:l.loadingShimmer,showLoadingShimmer:!0,showEmptyGalleryCover:!0,onLoadProxiedImage:()=>{},rendererBlockStyle:l.rendererBlockStyle})}function _e(e){window.__c={n:"HoverPagePreviewOverlayRenderer"};const t=(0,s.VK)((()=>{const t=G.default.state.currentSpaceStore;if(!t)return;const r=J.G.createChildStore(t,{id:e.state.annotation[1],table:"block"});return r.isNavigableBlock()&&r.isDefined()?r:void 0}),[e.state.annotation]);return(0,ve.jsx)(Te,{store:t})}const Ze=260;function Te(e){let{store:t,events:r}=e;window.__c={n:"HoverPagePreview"};const i=(0,a.yK)((e=>({wrapper:{width:Ze},coverContainer:{height:36},content:{padding:"0 16px"},breadcrumb:{color:e.text.tertiary,fontSize:11,marginBottom:-2},pageTitle:{display:"inline",fontWeight:k.Z.fontWeight.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},pageTitleIcon:{position:"relative",marginLeft:16,marginTop:-15,marginBottom:8},pageTitleContainer:{...(0,V.pd)(2),verticalAlign:"top",lineHeight:1.15},description:{fontSize:k.Z.fontSize.UISmall.desktop,color:e.icon.primary,lineHeight:1.2},empty:{height:16}})),[]),[o,n,l]=(0,s.VK)((()=>{if(!t)return[void 0,!1,null,null];const e=t.isEmptyPage(),r=e?(0,ve.jsx)("div",{style:{height:24}}):(0,ve.jsx)(Pe,{store:t});return[t.getIcon(),e,r]}),[t]);return t?(0,ve.jsxs)("div",{style:i.wrapper,...r,children:[(0,ve.jsx)("div",{style:i.coverContainer,children:(0,ve.jsx)(xe.Z,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:36,proxyWidth:260})}),(0,ve.jsx)(ae.Z,{disabled:!0,icon:o,isEmptyPage:n,isLarge:!0,disableShrinking:!0,size:26,emojiSize:26,largeIcon:!0,style:i.pageTitleIcon}),(0,ve.jsxs)(fe.Ht,{gap:4,style:i.content,children:[(0,ve.jsxs)(fe.Ht,{gap:2,children:[(0,ve.jsx)(de.Z,{store:t,style:i.breadcrumb}),(0,ve.jsx)("div",{style:i.pageTitleContainer,children:(0,ve.jsx)(le.Z,{shouldWrap:!0,maxLines:2,store:t,style:i.pageTitle})})]}),l]})]}):null}},12740:(e,t,r)=>{r.d(t,{Z:()=>B});r(57658);var i=r(67294),o=r(480),n=r(86628),s=r(24405),a=r(6695),l=r(72126),d=r(4615),c=r(21202),p=r(19889),u=r(82990),h=r(31412),m=(r(95477),r(66890)),g=r(80444),v=r(886),y=r(88632),f=r(77080),x=r(19671),S=r(26350),j=r(78291),b=r(88893),C=r(97039),w=r(78030),I=r(45653),k=r(29551),P=r(99036),_=(r(51365),r(33929)),Z=(r(61766),r(13023),r(24118)),T=(r(53876),r(12867),r(85893));Z.Ae;function U(e){return(0,n.VK)((()=>{if(!e)return{collectionStore:void 0,schema:void 0,format:void 0};const t=e.getAssociatedCollectionStore();let r,i;return r=t?t.getSchema():P.Kc(_.default.getIntl()),t&&(i=a.iB(t.getFormat(),r,void 0,a.j5.Collection)),{collectionStore:t,schema:r,format:i}}),[e])}const F=["Title","Pronoun","Teams (via Teams DB)","Office","Manager","Languages (Fluency)","Tenure"],R={"Teams (via Teams DB)":"Teams","Languages (Fluency)":"Languages"};function B(e){let{targetUserStore:t}=e;window.__c={n:"PeopleProfilePopup"};const r=(0,s.yK)((e=>({wrapper:{minWidth:100,maxWidth:300},profile:{padding:"10px 12px 12px 10px"},content:{padding:"8px 10px 10px"},breadcrumb:{color:e.text.secondary},profileTitle:{paddingLeft:20,fontSize:18,lineHeight:1.25,fontWeight:u.Z.fontWeight.semibold,color:e.text.primary},profileSubtitle:{paddingLeft:20,paddingTop:2,fontSize:u.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:1},profileKeyRow:{minWidth:80},profileKeyText:{textTransform:"capitalize",fontWeight:500},description:{padding:"6px 8px 12px 20px",fontSize:u.Z.fontSize.UISmall.desktop,color:e.icon.primary,borderTop:`1px solid ${e.regularDividerColor}`}})),[]),l=(0,n.VK)((()=>g.default.state.currentSpaceStore),[]),p=(0,n.VK)((()=>g.default.state.currentUserStore),[]),h=(0,n.VK)((()=>!!t&&t.isDefined()),[t]),y=(0,n.VK)((()=>{if(!t)return;const e=t.getEmail();if(!e)return;const r=f.default.getConfigKey("notion_people_block_id","data")[e];if(!r)return;return S.G.createChildStore(t,{table:c.iU,id:(0,d.Mt)(r)})}),[t]),{collectionStore:j,schema:b,format:I}=U(y),P=function(e){let{collectionStore:t,format:r,schema:i,userPeopleCollectionPage:o}=e;return(0,n.VK)((()=>{var e;if(!(t&&r&&i&&o))return;const n=a.iB(r,i,void 0,a.j5.Collection),s=null==n||null===(e=n.collection_page_properties)||void 0===e?void 0:e.filter((e=>{var t;const r=null===(t=i[e.property])||void 0===t?void 0:t.name;return void 0!==r&&F.includes(r)}));if(!s)return;const l={};return s.forEach((e=>{var r;l[(null===(r=i[e.property])||void 0===r?void 0:r.name)||""]=(0,T.jsx)(C.Z,{store:o,property:e.property,locked:!0,disabled:!0,format:w.C.Page,onTab:()=>{},onUntab:()=>{},tableWrap:!1,blockPropertyValueOverlayStore:x.Z,showRelationTooltip:!1,collectionStore:t})})),l}),[t,i,r,o])}({collectionStore:j,format:I,schema:b,userPeopleCollectionPage:y}),_=(0,o.O7)(),Z=(0,i.useMemo)((()=>new v.Z(_)),[_]);(0,i.useEffect)((()=>{j&&Z.setContext({type:"collectionPage",collectionStore:j})}),[Z,j]);const R=(0,n.VK)((()=>!!(t&&p&&h)&&t.id===p.id),[t,p,h]);return t&&h&&l?y&&Z&&P?(0,T.jsx)("div",{style:r.wrapper,children:(0,T.jsx)(m.L1,{value:Z,children:(0,T.jsxs)(k.Ht,{children:[(0,T.jsx)(k.gq,{gap:3,alignItems:"center",style:r.profile,children:(0,T.jsx)(z,{userStore:t,styles:r})}),(0,T.jsxs)("div",{style:r.description,children:[(0,T.jsx)(K,{userProfile:P,styles:r}),R?(0,T.jsx)(k.gq,{gap:1,alignItems:"center",children:(0,T.jsx)(M,{spaceStore:l,limit:5,styles:r})}):void 0]})]})})}):(0,T.jsx)("div",{style:r.wrapper,children:(0,T.jsxs)(k.Ht,{children:[(0,T.jsx)(k.gq,{gap:3,alignItems:"center",style:r.profile,children:(0,T.jsx)(z,{userStore:t,styles:r})}),R?(0,T.jsx)("div",{style:r.description,children:(0,T.jsx)(k.gq,{gap:1,alignItems:"center",children:(0,T.jsx)(M,{spaceStore:l,limit:5,styles:r})})}):void 0]})}):null}function z(e){let{userStore:t,styles:r}=e;window.__c={n:"UserContactCard"};const i=(0,h.useIntl)(),{name:o,email:s}=(0,n.VK)((()=>({name:t.getFullName(i),email:t.getEmail()})),[t,i]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(I.Z,{userStore:t,size:70,borderStyle:"none"}),(0,T.jsxs)(k.Ht,{gap:1,children:[(0,T.jsx)("div",{style:r.profileTitle,children:o}),(0,T.jsx)("div",{style:r.profileSubtitle,children:s})]})]})}function K(e){let{userProfile:t,styles:r}=e;return t?(0,T.jsx)(T.Fragment,{children:F.filter((e=>t[e])).map((e=>(0,T.jsxs)(k.gq,{gap:1,alignItems:"center",children:[(0,T.jsx)(k.Ht,{children:(0,T.jsx)(k.gq,{style:r.profileKeyRow,children:(0,T.jsx)("div",{style:r.profileKeyText,children:R[e]?R[e]:e})})}),(0,T.jsx)(k.Ht,{style:{transform:"scale(0.9)",transformOrigin:"center left"},children:t[e]})]},e)))}):null}function M(e){let{spaceStore:t,limit:r,styles:i}=e;window.__c={n:"UserSimilarity"};const{userSimilarityList:o}=(0,n.VK)((()=>{var e,i;const o=null===(e=j.default.state)||void 0===e?void 0:e.data,n=o?b.CM(o):[],s=(null==o?void 0:o.userSimilarity)||{},a=n.map((e=>{const t=s[e.userId];return{id:e.userId,similarity:t||0}})).sort(((e,t)=>t.similarity-e.similarity)).slice(0,r),d=[],c=l.yW(a.map((e=>{const r=S.U6.createChildStore(t,{table:p.KJ,id:e.id});return d.push({id:e.id,similarity:e.similarity,userStore:r}),r.isReady()})));return{isOnline:y.Z.state.online,subscriptionDataStoreData:o,userSimilarityData:(null===(i=j.default.state.data)||void 0===i?void 0:i.userSimilarity)||{},visibleUsersLoaded:c,visibleUsers:n,userSimilarityList:d}}),[t,r]);return t&&o&&0!==o.length?(0,T.jsxs)(k.gq,{gap:1,alignItems:"center",style:{paddingTop:4},children:[(0,T.jsx)(k.Ht,{children:(0,T.jsx)(k.gq,{style:i.profileKeyRow,children:(0,T.jsx)("div",{style:i.profileKeyText,children:"Coworkers"})})}),(0,T.jsx)(k.Ht,{children:(0,T.jsx)(k.gq,{gap:5,children:(0,T.jsx)("div",{children:(0,T.jsx)("div",{style:{display:"flex",position:"relative",float:"right"},children:o.map((e=>(0,T.jsx)("div",{style:{marginLeft:1.5},children:(0,T.jsx)(I.Z,{userStore:e.userStore,size:18})},e.id)))})})})})]}):null}},25735:(e,t,r)=>{r.d(t,{Y:()=>h});r(67294);var i=r(480),o=r(86628),n=r(24405),s=r(82990),a=r(31412),l=r(50906),d=r(16639),c=r(80444),p=r(29302),u=r(85893);function h(e){window.__c={n:"GroupMembersListTooltip"};const{group:t,limit:r,noMembersMessage:h,color:m,trackHover:g}=e,v=(0,n.yK)((e=>({container:{marginBottom:4,..."white_background"===m?{fontSize:s.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===m?{fontSize:s.Z.fontSize.UISmall.desktop,color:e.mediumTextColor}:{color:e.mediumInvertedTextColor}}})),[m]),y=(0,o.VK)((()=>c.default.state.currentSpaceStore),[]),f=(0,i.O7)();(0,o.VK)((()=>{g&&l.iHH(f,{group_id:t.id})}),[g,t.id,f]);const{countRemainingUsers:x,limitedUserStores:S}=(0,o.VK)((()=>(0,d.rm)({group:t,spaceStore:y,limit:r})),[t,y,r]);return 0===S.length?(0,u.jsx)(u.Fragment,{children:h}):(0,u.jsxs)("div",{style:v.container,children:[S.map((e=>(0,u.jsx)("div",{style:v.userContainer,children:(0,u.jsx)(p.Z,{style:v.user,userStore:e,avatarSize:18})},e.id))),x>0&&(0,u.jsx)("div",{style:v.moreMessage,children:(0,u.jsx)(a.FormattedMessage,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:x}})})]})}},88804:(e,t,r)=>{r.d(t,{E:()=>l,N:()=>a});var i=r(83212),o=r(26350),n=r(98165),s=r(67669);function a(e,t){const r=t.getRecordStoreUIRoot(),a=r instanceof o.G&&r.isPageBlock()&&r.isLocked(),l=(0,n.n3)(r)&&i.Z.getMode(e,r),d=Boolean((0,s.YF)(l));return!t.canEdit()||a||d}function l(e,t){return!a(e,t)}}}]);