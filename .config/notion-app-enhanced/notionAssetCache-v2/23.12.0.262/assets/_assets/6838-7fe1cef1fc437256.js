"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6838],{45669:(e,t,o)=>{o.d(t,{Z:()=>s});o(67294);var i=o(31412),n=o(78316),r=o(62896),a=o(85893);const s=function(e){let{collectionViewName:t,collectionViewType:o}=e;return t?(0,a.jsx)(r.Z,{children:t}):"page"===o?(0,a.jsx)(i.FormattedMessage,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,a.jsx)(i.FormattedMessage,{...n.b1[o]})}},29921:(e,t,o)=>{o.d(t,{Z:()=>we});var i=o(67294),n=o(83355),r=o(480),a=o(53150),s=o(6740),l=o(86628),d=o(24405),c=o(49085),u=o(75071),p=o(15157),g=o(69246),m=o(97880),h=o(82990),S=o(31412),y=o(89858),b=o(43250),f=o(87279),v=o(98742),x=o(50659);var T=o(8848),I=o(3338),w=o(50906),j=o(23063),M=o(31945),C=o(55118),B=o(26388),P=o(12534),k=o(35026),Z=o(75024),L=o(77907),O=o(80444),_=o(3418),V=o(42185),A=o(33052),K=o(9867),F=o(5210),R=o(85893);const D=function(e){window.__c={n:"TeamCaratSwitcher"};const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:o,style:i}=e,n=(0,d.Fg)(),r=(0,d.yK)((()=>({caratContainer:{minHeight:20,minWidth:20,...i||{}}})),[i]),a=(0,l.VK)((()=>t.state.isHidden),[t]);return(0,R.jsx)("div",{style:r.caratContainer,children:(0,R.jsx)(F.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:!a,color:n.lightIconColor,onClick:o,disabled:!0})})};var H=o(86232),N=(o(57658),o(19889)),E=o(64684),z=o(29302),W=o(95697),U=o(26350);function $(e){window.__c={n:"TeamMembersList"};const t=(0,r.O7)(),[o,n]=(0,i.useState)(!1),{teamStore:a,spaceStore:s,teamOutlinerType:c}=e,{isReady:u,allMembersUserIds:p,userStores:g}=(0,l.VK)((()=>{const e=(0,W.tO)({teamStore:a,spaceStore:s}),t=e.map((e=>U.U6.createChildStore(a,{table:N.KJ,id:e}))),o=t&&t.every((e=>e.isReady()));return{allMembersUserIds:e,userStores:t,isReady:o}}),[a,s]),{ownerStores:m,memberStores:h}=(0,l.VK)((()=>{const e=[],t=[];if(!a.isReady())return{ownerStores:e,memberStores:t};for(const o of g){(null==o?void 0:o.id)&&((0,E.pd)({membership:a.getMembers()},null==o?void 0:o.id)?e.push(o):t.push(o))}return{ownerStores:e,memberStores:t}}),[a,g]),y=(0,d.yK)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},members:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginRight:10,marginLeft:5},avatar:{width:23,height:23,borderRadius:23,marginRight:-5,position:"relative"},teamMemberTooltipSectionLabel:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.mediumInvertedTextColor}})),[]);let b=0,f=g;return f=[...m,...h],g.length>5&&(b=g.length-5,f=f.slice(0,5)),u?(0,R.jsx)("div",{style:y.membershipSection,children:(0,R.jsx)(B.Z,{placement:B.Z.Placement.Bottom,disableTooltip:p.length<=0,render:t=>{return(0,R.jsxs)("span",{...t,style:e.renderStyle,children:[p.length," ",(o=p.length,o>1?(0,R.jsx)(S.FormattedMessage,{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}):(0,R.jsx)(S.FormattedMessage,{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"}))]});var o},renderTooltip:e=>(o||(n(!0),w.v2V(t,{teamStore:a,outliner_type:c})),(0,R.jsx)("div",{...e,children:(0,R.jsxs)("div",{style:{marginBottom:4},children:[f.map((e=>(0,R.jsx)(z.Z,{style:y.teamMemberList,userStore:e,avatarSize:18},e.id))),b>0&&(0,R.jsx)("div",{style:y.moreMessage,children:(0,R.jsx)(S.FormattedMessage,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:b}})})]})}))})}):null}var G=o(74016),J=o(64552);var Q=o(22487),Y=o(14720),q=o(64921),X=o(68785),ee=o(61766),te=o(37181),oe=o(28451),ie=o(81415),ne=o(75769);function re(e){let{teamId:t,origin:o}=e;window.__c={n:"TeamAddAppTemplateTooltip"};const n=(0,r.O7)(),[a,s]=(0,i.useState)(!1),l=(0,d.yK)((()=>({tooltip:{width:240}})),[]);(0,i.useEffect)((()=>{if(!o)return;const{current:e}=o;if(!e)return;const t="IntersectionObserver"in window?new IntersectionObserver((e=>{let[t]=e;return s(t.isIntersecting)}),{threshold:1}):void 0;return null==t||t.observe(e),()=>null==t?void 0:t.unobserve(e)}),[o]);const c=(0,i.useCallback)((()=>{ne.Z.setState({hasShownTooltip:!0,teamId:t}),w.Khd(n,{from:"team_add_app_template"})}),[n,t]),u=(0,i.useCallback)((()=>te.$n({environment:n,teamId:t})),[n,t]);return a?(0,R.jsx)(oe.P,{calloutId:"team_add_app_template_tooltip",onShow:c,children:(0,R.jsx)(ie.U,{origin:o,placementToOrigin:"right",header:(0,R.jsx)(S.FormattedMessage,{id:"teamAddAppTemplateTooltip.header",defaultMessage:"Add templates to your teamspace"}),content:(0,R.jsx)(S.FormattedMessage,{id:"teamAddAppTemplateTooltip.content",defaultMessage:"Get started with projects, docs, wiki, and more"}),onCloseClick:()=>u(),shouldDismissUponOutsideClick:!1,pointerPosition:"0%",pointerLength:24,style:l.tooltip})}):null}function ae(e){const t=(0,r.O7)();return(0,l.VK)((()=>(0,W.dY)({environment:t,teamId:e})),[t,e])}function se(e){window.__c={n:"OutlinerTeamToggleAddPageButton"};const{teamStore:t}=e,o=(0,S.useIntl)(),n=(0,l.qz)(void 0,ee.Z),a=(0,i.useRef)(null),s=ae(t.id),c=o.formatMessage({id:"sidebar.addAPageOrTemplateButtonTeamToggle.tooltip",defaultMessage:"Add a page or template"}),p=function(){const e=(0,r.Fy)(),t=e.isMobile?32:20;return(0,d.yK)((o=>({button:{height:t,width:t,border:"none",borderRadius:4,marginLeft:e.isMobile?0:4},mediumText:{color:o.mediumInvertedTextColor},plusIcon:{fill:e.isMobile?o.lightIconColor:o.sidebarTextColor,...e.isMobile?{width:18,height:18}:{width:14,height:14}},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:o.legacyRedSelectColor,height:t,width:t},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20},menuItemButton:{minWidth:200},caption:{minWidth:230}})),[e.isMobile,t])}();return(0,R.jsxs)(R.Fragment,{children:[s&&(0,R.jsx)(re,{teamId:t.id,origin:a}),(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,buttonPopupStore:n,alignmentToOrigin:M.vR.Start,originGap:2,renderOrigin:e=>(0,R.jsx)(B.Z,{textWrap:!1,renderTooltip:()=>c,placement:B.Z.Placement.Bottom,render:t=>(0,R.jsx)(q.Z,{ariaLabel:c,ref:a,style:p.button,...(0,v.Z)(t,e),children:(0,R.jsx)("div",{style:p.plusIconContainer,children:(0,u.f)(p.plusIcon)})})}),render:e=>(0,R.jsx)(Y.p7,{renderLoading:e=>(0,R.jsx)("div",{style:Y.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,R.jsx)(X.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_new_page"})})]})}function le(e){window.__c={n:"OutlinerTeamToggleButton"};const{teamStore:t,label:o,isHovered:n,outlinerToggleButtonStore:a,teamOutlinerType:s,outlinerTeamOnToggle:c,onTeamJoinComplete:u,labelAriaId:p}=e,b=(0,r.Fy)().isMobile,f=function(e){switch(e){case g.cz:case g.mu:return!0;case g.PT:case g.kg:return!1;default:(0,m.t1)(e)}}(s),v=(0,r.O7)(),{name:x,showAddPageButton:F}=(0,l.VK)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),N=(0,J.e)(t),E=function(e){const t=(0,r.O7)(),o=(0,l.VK)((()=>O.default.state.currentSpaceStore),[]);return(0,l.VK)((()=>(0,W.zz)({teamStore:e,spaceStore:o,userId:t.currentUser.id})),[o,t.currentUser.id,e])}(t),z=(0,Q.K)(t),U=(0,l.VK)((()=>O.default.state.currentSpaceStore),[]),[,,Y]=(0,l.AF)(void 0,A.Z),q=(0,r.Fy)(),X=b||n,ee=(0,d.yK)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:T.ZP.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:4},container:{position:"relative",display:"flex",alignItems:"center",minHeight:b?48:f?30:28,padding:f?"6px 12px":"0px 10px 0px 11px"},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center"},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...h.Z.textOverflowStyle},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:h.Z.lineHeight.UISmall.desktop,marginBottom:1,...h.Z.textOverflowStyle},membersCountText:{display:"flex",fontSize:12,fontWeight:h.Z.fontWeight.regular,lineHeight:1.3,color:e.lightTextColor,width:"100%",...h.Z.textOverflowStyle},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...h.Z.textOverflowStyle},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.mediumTextColor,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...X?{}:Z.jy},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,...X?{}:Z.jy},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabelContainer:{display:"flex"},closedTeamLabel:{display:"flex",alignItems:"center"},closedTeamTooltip:{whiteSpace:"normal",width:220},carat:{minHeight:f?15:20,height:f?15:20}})),[b,f,X]),te=(0,l.VK)((()=>t.getTeamPagesStore()),[t]),oe=(0,l.VK)((()=>V.Z.state===t.id),[t.id]),ie=(0,l.VK)((()=>t.getTeamAccessLevel()),[t]),[ne,re]=(0,i.useState)(void 0),le=ae(t.id),ce=(0,i.useCallback)((e=>{let{draggingStores:t}=e;return!!U&&(0,k.Pl)({environment:v,draggingStores:t,parentStore:te,currentSpaceStore:U})}),[U,v,te]),ue=(0,i.useCallback)((async e=>{await y.NP({dropArgs:e,environment:v,type:"team",isTopLevel:!0,parentStore:te})}),[v,te]);if(!x)return null;const pe=!E,ge=function(e,t){if(!t)return!1;switch(e){case g.mu:return!0;case g.PT:case g.kg:case g.cz:return!1;default:(0,m.t1)(e)}}(s,N),me=!q.isMobile&&!N&&"closed"===ie,he=e=>{_.Z.addNamedPopup("team_more_actions"),w.QkQ(v,{store:t,from:e})},Se=()=>{_.Z.removeNamedPopup("team_more_actions")};return(0,R.jsxs)(C.G,{dropTargetKey:K.Ui(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:ce,onSelectableDrop:ue,children:[(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,alignmentToOrigin:M.vR.Start,placementToOrigin:M.pO.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:ne,render:e=>(0,R.jsx)(L.LazyTeamOverflowMenu,{teamStore:t,permissionsInviteStore:Y,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:i}=e;return(0,R.jsxs)("div",{style:ee.container,onContextMenu:e=>{!q.isMobile&&(0,P.ZP)({event:e,context:P.Af.EditorContextMenu,callback:()=>{e.preventDefault(),re(new DOMRect(e.clientX,e.clientY)),i()}})},children:[q.isMobile&&(0,R.jsx)(D,{store:t,outlinerToggleButtonStore:a,outlinerTeamOnToggle:c}),(0,R.jsx)("div",{style:ee.teamIconContainer,children:(0,R.jsx)(G.p,{size:20,store:t,disabled:!0,style:{fontWeight:h.Z.fontWeight.medium}})}),(0,R.jsxs)("div",{style:ee.labelContainer,children:[(0,R.jsxs)("div",{style:ee.labelText,id:p,children:[o,!q.isMobile&&(0,R.jsx)(D,{store:t,outlinerToggleButtonStore:a,outlinerTeamOnToggle:c,style:X?ee.carat:Z.jy})]}),f&&void 0!==z&&(0,R.jsxs)("div",{style:ee.membersCountText,children:[U&&(0,R.jsx)($,{teamStore:t,spaceStore:U,renderStyle:ee.membersCountText,teamOutlinerType:s}),me&&(0,R.jsx)(B.Z,{placement:B.Z.Placement.Bottom,renderTooltip:e=>(0,R.jsx)("div",{style:ee.closedTeamTooltip,...e,children:de({accessLevel:ie})}),render:e=>(0,R.jsxs)("div",{style:ee.closedTeamLabel,...e,children:[" ","·"," ",(0,R.jsx)(S.FormattedMessage,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"})]})}),ge&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{children:" "})," ·",(0,R.jsx)("span",{children:(0,I.p)(ee.joinedBadgeIcon)}),(0,R.jsx)("span",{style:ee.joinedBadge,children:(0,R.jsx)(S.FormattedMessage,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"})})]})]})]}),N&&(0,R.jsxs)("div",{style:{...ee.overflow,...X||le?{}:Z.jy},children:[(0,R.jsx)(L.LazyOutlinerTeamOverflow,{teamStore:t,from:s,onPopupClick:()=>he(s),onPopupClose:Se}),F&&!q.isMobile&&(0,R.jsx)(se,{teamStore:t})]}),!N&&(0,R.jsx)("div",{style:ee.unjoinedOverflowMenu,children:(0,R.jsx)(L.LazyOutlinerTeamOverflow,{teamStore:t,from:s,hideJoin:!0,onPopupClick:()=>he(s),onPopupClose:Se})}),!q.isMobile&&pe&&(0,R.jsx)(H.M,{style:ee.joinLeaveButton,hoveredStyle:ee.joinLeaveButtonHovered,teamStore:t,placement:B.Z.Placement.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0,onJoinedTeam:u}),F&&q.isMobile&&(0,R.jsx)("div",{style:{...ee.overflow,...X?{}:Z.jy},children:(0,R.jsx)(se,{teamStore:t})}),(0,R.jsx)(j.Z,{isVisible:oe,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},exitAnimationStyle:{opacity:0},springConfig:{stiffness:30,damping:10,precision:.001},render:()=>(0,R.jsx)("div",{style:ee.teamHighlightAnimationBackgroundContainer})})]})},onClick:()=>he("teamSidebar"),onClose:Se}),(0,R.jsx)(L.LazyTeamPermissionsInviteWithModal,{permissionsInviteStore:Y,store:t})]})}function de(e){let{accessLevel:t}=e;if("private"===t)return(0,R.jsx)(S.FormattedMessage,{id:"teamJoinLeaveButton.joinTeam.privateTeamTooltip",defaultMessage:"You can only join a private teamspace with an invite from a member"})}var ce=o(38676),ue=(o(77080),o(31792)),pe=o(70704),ge=o(73292),me=o(52275),he=o(78140),Se=o(32163),ye=o(72495),be=o(14694);class fe extends n.Z{constructor(){super(...arguments),this.storeTypes={mouseStore:ue.Z,focusStore:c.default.createClass(!1),labelMouseStore:ue.Z,labelFocusStore:c.default.createClass(!1),outlinerToggleButtonStore:pe.Z},this.headerRef=i.createRef(),this.contentsAriaId=(0,a.Z)(),this.labelAriaId=(0,a.Z)(),this.handleHideClick=()=>{const{isHidden:e}=this.getToggleButtonStore().state,t=!e;"team"===this.props.type?ge.k7({environment:this.environment,spaceViewStore:this.props.spaceViewStore,teamStore:this.props.teamStore,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState,teamOutlinerType:this.props.teamOutlinerType,isExplicitUserAction:!0}):this.props.type===g.g$?y.Eo({environment:this.environment,type:this.props.type,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:!1}):y.Eo({environment:this.environment,spaceViewStore:this.props.spaceViewStore,type:this.props.type,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState})}}willMount(e){if(super.willMount(e),e.initialToggleState&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:"hidden"===e.initialToggleState}),!e.shouldPersistToggleState)return;const t=function(e){const{type:t,spaceViewStore:o}=e;if(t===g.g$)return;if("team"===t)return ge.RW(o,e.teamStore.id);return y.B8(o,t)}(this.props);if(!t)return;const o=p.Z.get({userId:this.environment.currentUser.id,key:t});o&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:o})}renderComponent(){const{renderSidebar:e,isLastTeam:t,marginBottomOverrideWhenExpanded:o,marginBottomOverrideWhenCollapsed:i}=this.props,{isHidden:n}=this.getToggleButtonStore().state,r={bookmarks:b.F4o,workspace:b.j35,shared:b.MU2,private:b.aL4,offline:b.yNE,team:b.l24,[g.PT]:b.RG3,[g.cz]:b.Uwd,[g.mu]:b.jWx,[g.kg]:b.rIE,[g.g$]:b.Y6l}[this.props.type];return(0,R.jsxs)("div",{ref:this.headerRef,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&this.stores.focusStore.setState(!0)},onBlur:()=>this.stores.focusStore.setState(!1),onMouseMove:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0}),onMouseLeave:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1}),style:{marginBottom:n||t&&!this.environment.device.isMobile?i:o??fe.marginBottom,width:"100%"},className:`${r}-container`,children:[this.renderLabel(r),!n&&e({headerRef:this.headerRef,labelAriaId:this.labelAriaId,contentsAriaId:this.contentsAriaId})]})}renderLabel(e){const{isMobile:t}=this.environment.device,{isHidden:o}=this.getToggleButtonStore().state,{labelMouseStore:i,labelFocusStore:n}=this.stores,r=o?(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Click to show section",id:"sidebar.sectionHeaderShow.tooltip"}):(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Click to hide section",id:"sidebar.sectionHeaderHide.tooltip"}),a={...t?this.getMobileSectionLabelStyle():this.getSectionLabelStyle(),transition:"color 100ms ease-out",..."team"===this.props.type?{width:"100%"}:{}};(i.state.mouseEntered||n.state)&&Object.assign(a,this.getSectionLabelHoverStyles());const l="team"===this.props.type?{width:"100%",display:"flex",alignItems:"center",...(0,x.G$)({isMobile:t})}:this.getLabelButtonStyle();return(0,R.jsx)(be.Z,{className:e,disableMobileBorder:o&&"team"!==this.props.type,shouldShowMobileMarginBottom:o&&"team"!==this.props.type,style:je(this.props.type),childrenStyle:{overflow:"visible"},right:(0,R.jsx)(ve,{right:this.props.right,showAddButton:this.props.showAddButton,type:this.props.type,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,shouldPersistToggleState:this.props.shouldPersistToggleState,focusStore:this.stores.focusStore,outlinerToggleButtonStore:this.stores.outlinerToggleButtonStore}),children:(0,R.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,R.jsx)(B.Z,{textWrap:!1,disableTooltip:"team"===this.props.type||"publicPageTemplateIncludes"===this.props.type,renderTooltip:()=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{children:r}),(0,R.jsx)("span",{style:{color:this.theme.mediumInvertedTextColor,whiteSpace:"nowrap"},children:this.props.labelTooltip})]}),placement:B.Z.Placement.Top,render:e=>(0,R.jsx)(q.Z,{..."team"===this.props.type&&this.props.teamHeaderLabel?{"aria-labelledby":this.labelAriaId}:{id:this.labelAriaId},"aria-expanded":!o,"aria-controls":this.contentsAriaId,mobileFeedback:t,style:l,hovered:!!this.props.forceHoveredButtonStyle||void 0,onClick:()=>this.handleHideClick(),...(0,v.Z)(e,{onMouseMove:()=>i.setState({...i.state,mouseEntered:!0}),onMouseLeave:()=>i.setState({...i.state,mouseEntered:!1}),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&n.setState(!0)},onBlur:()=>n.setState(!1)}),disabled:"publicPageTemplateIncludes"===this.props.type,children:(0,R.jsx)("span",{style:a,children:this.renderLabelContent()})})})})})}renderLabelContent(){switch(this.props.type){case"bookmarks":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});case"team":if(this.props.teamHeaderLabel){const{isHidden:e}=this.getToggleButtonStore().state,{mouseEntered:t}=this.stores.labelMouseStore.state;return(0,R.jsx)(le,{isHovered:t||this.stores.labelFocusStore.state,isExpanded:!e,teamStore:this.props.teamStore,label:this.props.teamHeaderLabel,outlinerToggleButtonStore:this.getToggleButtonStore(),outlinerTeamOnToggle:()=>this.handleHideClick(),teamOutlinerType:this.props.teamOutlinerType,onTeamJoinComplete:this.props.onTeamJoinComplete,labelAriaId:this.labelAriaId})}break;case g.kg:case g.mu:case g.cz:case g.PT:case g.g$:return this.props.sectionLabel;default:(0,m.t1)(this.props)}}getToggleButtonStore(){return this.props.customToggleButtonStore||this.stores.outlinerToggleButtonStore}getSectionLabelStyle(){return{textTransform:"initial",fontSize:12,lineHeight:1,color:this.theme.lightTextColor,fontWeight:h.Z.fontWeight.semibold}}getMobileSectionLabelStyle(){return{textTransform:"initial",fontSize:13,lineHeight:1,color:this.theme.lightTextColor,fontWeight:h.Z.fontWeight.semibold}}getSectionLabelHoverStyles(){return{color:this.theme.darkTextColor}}getLabelButtonStyle(){const{isMobile:e}=this.environment.device;return{display:"flex",alignItems:"center",borderRadius:4,padding:"2px 4px",marginLeft:-4,...e&&{marginBottom:8}}}}function ve(e){let{right:t,showAddButton:o,focusStore:i,...n}=e;window.__c={n:"OutlinerToggleButtonRightLabel"};const r=(0,l.VK)((()=>ce.xH.state||i.state),[i]),a=(0,d.yK)((()=>({wrapper:{display:"flex",alignItems:"center",opacity:r?1:0,pointerEvents:r?"auto":"none",transition:"opacity 200ms ease-in"}})),[r]);return(0,R.jsxs)("div",{style:a.wrapper,children:[t,o&&(0,R.jsx)(xe,{...n})]})}function xe(e){let{type:t,disableTooltip:o,labelTooltip:n,spaceStore:a,spaceViewStore:s,shouldPersistToggleState:c,outlinerToggleButtonStore:p}=e;window.__c={n:"OutlinerToggleAddButton"};const h=(0,r.O7)(),b=h.device.isMobile,f=function(e){switch(e){case"bookmarks":case"private":case"shared":case"team":case"workspace":case g.g$:return!1;case g.PT:case g.cz:case g.mu:case g.kg:return!0;default:(0,m.t1)(e)}}(t),v=(0,S.useIntl)(),x=(0,i.useRef)(null),T=(0,i.useCallback)((e=>{s&&"team"!==t&&t!==g.g$&&y.kC({environment:h,spaceStore:a,spaceViewStore:s,type:t,outlinerToggleButtonStore:p,prepend:!0,shouldPersistToggleState:c,useCrdt:e})}),[h,p,c,a,s,t]),I=(0,i.useCallback)((()=>{K.lo("sidebar_team_section")}),[]),w=(0,d.yK)((e=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:4,marginLeft:b?0:4},plusIcon:{fill:e.mediumIconColor,width:14,height:14},tutorialTooltip:{width:230},tutorialText:{fontSize:16,lineHeight:.85},labelTooltip:{color:e.mediumInvertedTextColor}})),[b]),j=f?v.formatMessage({defaultMessage:"New teamspace",id:"sidebar.addButton.addTeamTooltip"}):v.formatMessage({defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}),M=(0,l.VK)((()=>!1),[]);return(0,R.jsx)(B.Z,{textWrap:!1,disableTooltip:o,renderTooltip:()=>(0,R.jsxs)(R.Fragment,{children:[j,(0,R.jsx)("br",{}),(0,R.jsx)("span",{style:w.labelTooltip,children:!f&&n})]}),placement:B.Z.Placement.Bottom,render:e=>!f&&M?(0,R.jsx)(Te,{...e,createPageFn:T}):(0,R.jsxs)(q.Z,{ariaLabel:j,style:w.plusButton,mobileFeedback:b,onClick:f?I:()=>T(),className:"private"===t?"shadow-cursor-new-page-sidebar":void 0,...e,children:[(0,R.jsx)("span",{ref:x}),(0,u.f)(w.plusIcon)]})})}function Te(e){window.__c={n:"AddCrdtPageButtonPopup"};const{createPageFn:t}=e,o=(0,d.yK)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:4},icon:{fill:e.mediumIconColor,width:14,height:14}})),[]);return(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,alignmentToOrigin:M.vR.Start,originGap:2,renderOrigin:t=>(0,R.jsx)(q.Z,{mobileFeedback:!1,style:o.button,...e,...t,children:(0,u.f)(o.icon)}),render:e=>(0,R.jsx)(Ie,{onDismiss:e.close,createPageFn:t}),onClick:()=>{_.Z.addNamedPopup("outliner_add_page")},onClose:()=>{_.Z.removeNamedPopup("outliner_add_page")}})}function Ie(e){const{onDismiss:t,createPageFn:o}=e,i=[{key:"addRegularPage",render:e=>(0,R.jsx)(me.Z,{...e,title:"Add regular page"}),action:()=>{t(),o(!1)}},{key:"addCrdtPage",render:e=>(0,R.jsx)(me.Z,{...e,title:"Add CRDT page"}),action:()=>{t(),o(!0)}}];return(0,R.jsx)(he.Z,{menuType:f.og.Popup,children:(0,R.jsx)(Se.Z,{type:Se.i.Vertical,sections:[{key:"addPageOptions",render:e=>(0,R.jsx)(ye.Z,{...e}),items:i}],initialFocus:void 0})})}fe.displayName="OutlinerToggleButton",fe.marginBottom=18;const we=fe;function je(e){if("team"===e)return{padding:0,margin:0,paddingLeft:10,borderRadius:0};const t={paddingTop:0,paddingBottom:0,paddingRight:14,paddingLeft:15,minHeight:24,marginBottom:2,marginTop:6};return e===g.g$?{...t,marginTop:0}:t}},60442:(e,t,o)=>{o.d(t,{Z:()=>l});o(67294);var i=o(83355),n=o(82990),r=o(47853),a=o(85893);class s extends i.Z{renderComponent(){const{imageURL:e,imageWidth:t,imageHeight:o}=this.props;if(e){const i=(0,r.D)(e);return(0,a.jsxs)("div",{style:{width:t||200,marginTop:4,marginBottom:4},children:[(0,a.jsx)("div",{style:{width:"100%",height:o||100,borderRadius:4,backgroundImage:`url(${i})`,backgroundSize:"cover",marginBottom:6}}),this.renderText()]})}return this.renderText({width:t})}renderText(e){const{caption:t,title:o}=this.props;return(0,a.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...e},children:[o&&(0,a.jsx)("header",{style:{fontWeight:n.Z.fontWeight.bold,marginBottom:4},children:o}),t]})}}s.displayName="TooltipThumbnailLayout";const l=s},3392:(e,t,o)=>{o.d(t,{Z:()=>C});var i=o(67294),n=o(480),r=o(86628),a=o(24405),s=o(75071),l=o(72126),d=o(69246),c=o(31412),u=o(89858),p=o(64921),g=o(55118),m=o(25777),h=o(14694),S=o(43250),y=o(35026),b=o(80444),f=o(74948),v=o(72655),x=o(85893);function T(e){window.__c={n:"EmptyChildrenPlaceholder"};const t=(0,n.Fy)(),o=(0,a.yK)((e=>({placeholder:{color:e.lightTextColor,paddingLeft:12,...t.isMobile&&{display:"flex",alignItems:"center",height:32}}})),[t]);return(0,x.jsx)(h.Z,{role:"treeitem",style:e.itemStyle,children:(0,x.jsx)("div",{style:o.placeholder,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function I(e){window.__c={n:"AddPageButton"};const{type:t}=e,o=(0,n.O7)(),{currentSpaceStore:i,currentSpaceViewStore:s}=(0,r.VK)((()=>b.default.state),[]),l=o.device.isMobile,d=(0,a.yK)((e=>({sidebarItem:{color:e.mediumTextColor}})),[]);if(!i||!s)return null;return(0,x.jsx)(p.Z,{mobileFeedback:l,onClick:async()=>{if("team"===t)return;await u.kC({environment:o,spaceStore:i,spaceViewStore:s,type:t,prepend:!1,shouldPersistToggleState:!0})&&l&&f.close()},children:(0,x.jsx)(h.Z,{style:d.sidebarItem,left:(0,x.jsx)(M,{}),disableMobileBorder:!0,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"Add a page",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}function w(e){const{store:t,index:o}=e;return(0,x.jsx)(v.ZP,{type:e.type,store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:o,itemDepth:e.itemDepth,itemOpenByDefault:e.itemOpenByDefault,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled},t.id)}function j(e){window.__c={n:"EmptyDroppable"};const t=(0,n.O7)(),{type:o,parentStore:i}=e,r=l.oA(["OutlinerItem",o,null==i?void 0:i.id]).join("_");return(0,x.jsx)(g.G,{dropTargetKey:r,canDropBelow:!0,onSelectableDrop:async e=>{await u.NP({dropArgs:e,environment:t,type:o,isTopLevel:!0,parentStore:i})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=b.default.state;return!!o&&(0,y.Pl)({environment:t,draggingStores:e.draggingStores,parentStore:i,currentSpaceStore:o})}})}function M(){window.__c={n:"PlusIcon"};const e=(0,a.yK)((e=>({icon:{fill:e.mediumIconColor,width:16,height:16},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,x.jsx)("div",{style:e.iconContainer,children:(0,s.f)(e.icon)})}const C=function(e){window.__c={n:"Outliner"};const{disabled:t,childStores:o,areChildrenLoading:r,itemDepth:a,type:s}=e,l=(0,n.Fy)(),c=o.map(((t,o)=>(0,i.createElement)(w,{...e,key:t.id,store:t,index:o}))),u=0===a,p=0===c.length,g=(p||e.isHeaderless||l.isMobile)&&u&&("private"===s||"workspace"===s)&&!t,h=p&&!g&&!u,y={offline:S.blN,bookmarks:S.fe0,workspace:S.BEs,shared:S.JkF,private:S.q1J,team:S.l24,[d.PT]:void 0,[d.cz]:void 0,[d.mu]:void 0,[d.kg]:void 0,[d.g$]:void 0}[e.type];return(0,x.jsxs)(m.Z,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:u?"tree":"group",style:e.style,className:y,loaded:!r,showSpinnerTimeout:3e3,spinnerSize:"1em",children:[c,p&&u&&(0,x.jsx)(j,{type:e.type,parentStore:e.parentStore}),g&&(0,x.jsx)(I,{type:e.type}),h&&(0,x.jsx)(T,{itemStyle:e.itemStyle})]})}},72655:(e,t,o)=>{o.d(t,{gZ:()=>Oe,aZ:()=>_e,ZP:()=>Ve});var i=o(67294),n=o(480),r=o(6740),a=o(97511),s=o(33125),l=o(86628),d=o(24405),c=o(41432),u=o(15157),p=o(97880),g=o(89858),m=o(79954),h=o(19037),S=o(35026),y=o(52315),b=o(81844),f=o(80796),v=o(26350),x=o(26664),T=o(24646),I=o(21202),w=o(82990),j=o(50906),M=o(17659),C=o(84076),B=o(68785),P=o(76798),k=o(14694),Z=o(93959),L=o(84210),O=o(50659),_=o(98165),V=o(95697),A=o(91948),K=o(50770),F=o(80444),R=o(5315),D=o(31412),H=o(9953),N=o(39699),E=o(31278),z=o(26388),W=o(28020),U=o(85893);function $(e){window.__c={n:"OutlinerItemIcon"};const{targetStore:t,canEditItem:o}=e,i=(0,D.useIntl)(),r=(0,n.O7)(),{isMobile:a}=r.device,s=(0,l.VK)((()=>t.getIcon()),[t]),c=(0,l.VK)((()=>!a&&o&&!t.isLocked()&&!(0,W.qG)(t.id)),[a,o,t]),u=(0,l.VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),p=(0,d.yK)((e=>({pageIcon:{fill:e.mediumIconColor}})),[]),g=e=>{const o=t.getIconStore();o&&N.createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:r,perform:t=>{H.sO({store:o,value:e,transaction:t})}})};return(0,U.jsx)(z.Z,{renderTooltip:()=>(0,U.jsx)(D.FormattedMessage,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:z.Z.Placement.Bottom,render:e=>{var o;return c?(0,U.jsx)(E.Z,{bucket:"secure",disabled:!1,icon:s,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:a?24:20,onChange:g,pageIconStyle:p.pageIcon,...e,largeIcon:!0,iconLoggingData:{recordTable:u,source:"sidebar",block_type:t.getType(),collection_id:"collection"===u?null===(o=t.getIconStore())||void 0===o?void 0:o.id:void 0},label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"})}):(0,U.jsx)(E.Z,{disabled:!0,icon:s,title:void 0,isEmptyPage:t.isEmptyPage(),size:a?24:20,pageIconStyle:p.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"})})}})}var G=o(5210);function J(e){window.__c={n:"OutlinerItemLeftToggleButton"};const{store:t,targetStore:o,type:i,itemIndex:r,itemDepth:a,isOpen:s,onToggle:c}=e,u=(0,n.O7)(),{isMobile:p}=u.device,g=(0,l.VK)((()=>{if((0,V.ku)()){const e=Boolean(null==o?void 0:o.isCollectionView()),i=S.Yz(t).length>0;return e||i}return!0}),[t,o]),m=(0,d.yK)((e=>({hiddenToggle:{width:(0,G.q)({isMobile:p,isSidebar:!0})},toggle:{color:e.lightIconColor}})),[p]);if(!g)return(0,U.jsx)("div",{style:m.hiddenToggle});return(0,U.jsx)(G.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:s,color:m.toggle.color,onClick:()=>{const e=0===a,o=_.VP(t);j.t8_(u,{teamStore:o,type:e?"top_level":"nested",is_toggled:!s,outliner_type:i,outliner_position:r,outliner_depth:a}),c(),S.Ps({store:t,toOpen:!s,environment:u,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var Q=o(56666),Y=o(75071),q=o(69246),X=o(6404),ee=o(24677),te=o(64921),oe=o(52275),ie=o(31945),ne=o(78140),re=o(32163),ae=o(40721),se=o(72495),le=o(33929),de=o(87279),ce=o(98742),ue=o(75024),pe=o(34583),ge=o(74948);const me=(0,D.defineMessages)({addAPageInside:{defaultMessage:"Quickly add a page inside",id:"sidebarItem.addAPageInside.tooltip"}});function he(e){window.__c={n:"OutlinerItemRightIcons"};const{store:t,type:o,canEditItem:i,itemDepth:r,isHovered:a,isFocused:s,onToggle:c}=e,{isMobile:u}=(0,n.Fy)(),p=u||a||s,g=(0,l.VK)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),n=null===(e=t.getCollectionViewCollectionStore())||void 0===e?void 0:e.isSyncedCollection(),r=(0,W.qG)(t.id);return Boolean(t.getType()&&i&&!o&&!n&&!r)}),[t,i]),m=(0,d.yK)((()=>({iconContainer:{display:"flex",paddingLeft:3,...p?{}:{...ue.jy,display:"block"}}})),[p]);return o===q.g$?null:(0,U.jsxs)("div",{style:m.iconContainer,children:[(0,U.jsx)(fe,{store:t,type:e.type,itemIndex:e.itemIndex,itemDepth:r}),g&&(0,U.jsx)(Se,{store:t,onToggle:c,isTopLevelItem:0===r})]})}function Se(e){window.__c={n:"AddPageButton"};const{store:t,onToggle:o,isTopLevelItem:i}=e,r=(0,n.O7)(),{isMobile:a}=r.device,s=(0,l.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),d=le.default.formatMessage(me.addAPageInside);return s.length<=1?(0,U.jsx)(z.Z,{renderTooltip:()=>d,placement:z.Z.Placement.Bottom,render:e=>{const n={...e,onClick:()=>{ve({store:t,onToggle:o,sourceStore:s[0]??t,shouldNavigateToSource:!1,environment:r,isTopLevelItem:i})}};return(0,U.jsx)(ye,{events:n})}}):(0,U.jsx)(z.Z,{renderTooltip:()=>d,placement:z.Z.Placement.Bottom,render:e=>(0,U.jsx)(ie.ZP,{popupType:a?ie.Z4.SlideUp:ie.Z4.Popup,renderOrigin:t=>(0,U.jsx)(ye,{events:(0,ce.Z)(e,t)}),render:e=>(0,U.jsx)(be,{store:t,onToggle:o,parent:e,isTopLevelItem:i})})})}function ye(e){window.__c={n:"AddPageButtonInternal"};const{isMobile:t}=(0,n.Fy)(),o=xe();return(0,U.jsx)(te.Z,{ariaLabel:le.default.formatMessage(me.addAPageInside),mobileFeedback:t,style:o.button,...e.events,children:(0,Y.f)(o.buttonIcon)})}function be(e){window.__c={n:"AddToCollectionViewMenu"};const{store:t,onToggle:o,parent:i,isTopLevelItem:r}=e,a=(0,n.O7)(),{isMobile:s}=a.device,c=(0,l.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),u=(0,d.yK)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),p={menuType:s?de.og.Modal:de.og.Popup,right:s?(0,U.jsx)(ae.DoneMenuText,{}):void 0},g={key:"collections",render:e=>(0,U.jsx)(se.Z,{...e,title:(0,U.jsx)(D.FormattedMessage,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:c.map((e=>({key:e.id,render:t=>(0,U.jsx)(oe.Z,{...t,title:(0,U.jsx)("div",{style:u.menuItem,children:(0,U.jsx)(P.Z,{store:e})}),icon:(0,U.jsx)(E.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})}),action:()=>{ve({store:e,onToggle:o,sourceStore:e,shouldNavigateToSource:!0,environment:a,isTopLevelItem:r})}})))};return(0,U.jsx)(ne.Z,{...p,children:(0,U.jsx)(re.Z,{type:re.i.Vertical,onAccept:i.close,initialFocus:void 0,sections:[g]})})}function fe(e){window.__c={n:"MenuButton"};const{store:t,type:o,itemDepth:i,itemIndex:r}=e,a=(0,D.useIntl)(),s=(0,n.O7)(),{isMobile:l}=s.device,d=xe(),c=e=>{const n=_.VP(t);ee.Ys({environment:s,store:t}),X.Qn({environment:s,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:n,type:0===i?"top_level":"nested",outliner_type:o,outliner_position:r,outliner_depth:i}})},u="bookmarks"===o?a.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):a.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,U.jsx)(z.Z,{renderTooltip:()=>u,placement:z.Z.Placement.Bottom,render:e=>(0,U.jsx)(te.Z,{ariaLabel:u,mobileFeedback:l,style:d.button,onClick:c,...e,children:(0,Q.o)(d.buttonIcon)})})}function ve(e){const{store:t,sourceStore:o,shouldNavigateToSource:i,environment:n,isTopLevelItem:r,onToggle:a}=e;pe.M_(n)&&(n.device.isMobile&&ge.close(),N.createAndCommit({userAction:"OutlinerItem.createdPage",environment:n,perform:e=>g.D0({environment:n,store:o,transaction:e,navigateToParent:i})}),t.isCollectionView()||(a(!0),S.Ps({store:t,toOpen:!0,environment:n,isTopLevelItem:r})))}function xe(){const e=(0,n.O7)().device.isMobile;return(0,d.yK)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4},buttonIcon:e?{fill:t.lightIconColor,width:18}:{fill:t.sidebarTextColor,width:14}})),[e])}function Te(e){window.__c={n:"BlockSidebarItem"};const{store:t,style:o,targetStore:i,itemDepth:r,type:a,nestedOutlinerAriaId:s,titleAriaId:c,isOpen:u,onFocus:p,onBlur:g,onMouseMove:m,onMouseLeave:h}=e,y=(0,n.O7)(),b=y.device.isMobile,f=(0,l.VK)((()=>"copy_indicator"===t.getType()),[t]),v=(0,l.VK)((()=>function(e){const{targetStore:t,type:o}=e;if(!t)return;const i=(0,S.N)(o);if(t.isNavigableBlock())return(0,L.ZP)({store:t,fullyQualified:!1,pageVisitSource:i});{const e=_.Dg(t);if(e)return(0,L.ZP)({store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:i})}}({targetStore:i,type:a})),[i,a]),x=(0,l.VK)((()=>f&&R.transactionQueue.isPendingTransactionForRecord(t.pointer)),[f,t]),T=(0,l.VK)((()=>{const{mainEditorCurrentBlockStore:e}=F.default.state;return e&&t.id===e.id}),[t]),I=(0,l.VK)((()=>(0,K.H)()),[]),P=(0,d.yK)((e=>({sidebarItem:{...!b&&{paddingLeft:5},...T&&{fontWeight:w.Z.fontWeight.semibold,background:e.sidebarItemSelectedBackground,color:e.regularTextColor,...b&&{boxShadow:`\n                            0 1px 0 ${e.buttonHoveredBackground}\n                        `}},...(0,O.Z3)({isMobile:b}),...o},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:b?10:6,marginRight:b?12:void 0},link:{width:"100%"}})),[b,T,o]),Z={role:"treeitem","aria-current":T?"page":void 0,"aria-expanded":!!u,"aria-owns":s,"aria-labelledby":c};if(f)return x?(0,U.jsxs)(k.Z,{style:P.sidebarItem,childrenStyle:P.children,onFocus:p,onBlur:g,onMouseMove:m,onMouseLeave:h,children:[(0,U.jsx)(B.Z,{style:P.loadingSpinner}),(0,U.jsx)(A.Z,{targetRecordId:t.id,style:P.moveOrDuplicateProgress})]}):null;if(v){const o=()=>{e.onNavigate&&e.onNavigate(t),I&&M.qQ({environment:y,open:!1});const o=_.VP(t);j.Yg1(y,{teamStore:o,type:0===r?"top_level":"nested",outliner_type:e.type,outliner_position:e.itemIndex,outliner_depth:r})};return(0,U.jsx)(C.Z,{onFocus:p,onBlur:g,style:P.link,href:v,onClick:o,innerStyle:(0,O.G$)({isMobile:b}),...Z,children:(0,U.jsx)(Ie,{...e,sidebarItemStyle:P.sidebarItem,sidebarItemChildrenStyle:P.children,titleAriaId:c,nestedOutlinerAriaId:s})})}return(0,U.jsx)(Ie,{...e,onFocus:p,onBlur:g,sidebarItemStyle:P.sidebarItem,sidebarItemChildrenStyle:P.children,titleAriaId:c,nestedOutlinerAriaId:s,...Z})}function Ie(e){window.__c={n:"SidebarItemContainer"};const{store:t,parentStore:o,targetStore:i,itemDepth:n,type:r,onFocus:a,onBlur:s,onMouseMove:d,onMouseLeave:u,onToggle:p,titleAriaId:g,nestedOutlinerAriaId:m,isOpen:h,isHovered:S,isFocused:y}=e,b=(0,l.VK)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:n}=e;if(t.isDefined()&&(0,Z.h7)(t))return!1;if(t.isCollectionView()&&!(0,V.bq)())return!t.getCollectionViewSourceCollectionStore();if("block"===(null==o?void 0:o.table)){if(v.G.createChildStore(o,{table:I.iU,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===c.Ti.alias)return!0;if(i&&"team"!==n)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:o,isTopLevelItem:0===n,type:r})),[t,o,n,r]);return(0,U.jsx)(k.Z,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:e.sidebarItemChildrenStyle,left:(0,U.jsx)(J,{store:t,targetStore:i,type:r,itemIndex:e.itemIndex,itemDepth:n,"aria-controls":m,"aria-describedby":g,onToggle:p,isOpen:h}),icon:i&&(0,U.jsx)($,{targetStore:i,canEditItem:e.canEditItem}),right:(0,U.jsx)(he,{store:t,type:r,itemIndex:e.itemIndex,itemDepth:n,canEditItem:e.canEditItem,onToggle:p,isHovered:S,isFocused:y}),onFocus:a,onBlur:s,onMouseMove:d,onMouseLeave:u,isAlias:b,children:(0,U.jsx)(P.Z,{id:g,store:t})})}var we=o(12534),je=o(45669),Me=o(3392);function Ce(e){window.__c={n:"CollectionViewOutlinerItem"};const{store:t,collectionViewStore:o,onNavigate:i,type:r}=e,a=(0,n.O7)(),s=(0,l.VK)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),c=(0,l.VK)((()=>{const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=F.default.state;return!s&&Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,s]),u=(0,d.yK)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.mediumTextColor},sideBarItem:{...c&&{fontWeight:w.Z.fontWeight.semibold,background:t.buttonHoveredBackground,color:t.regularTextColor,...a.device.isMobile&&{boxShadow:`\n\t\t\t\t\t\t0 1px 0 ${t.buttonHoveredBackground}\n\t\t\t\t\t`}},...e.style}})),[a.device.isMobile,c,e.style]),p=(0,l.VK)((()=>(0,L.ZP)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,S.N)(r)})),[o.id,t,r]),g=(0,l.VK)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),m=(0,l.VK)((()=>{if("page"!==g.type||!g.pagePointer)return null;const e=v.G.createChildStore(t,{table:g.pagePointer.table,id:g.pagePointer.id}),o=(0,S.Q2)(e);return{pageStore:e,ready:(0,y.b)(e),outlinerItems:o}}),[g,t]);if(!g.ready)return null;if("page"===g.type&&m){const{ready:o,outlinerItems:i}=m;return(0,U.jsx)(Me.Z,{type:e.type,childStores:i,areChildrenLoading:!o,itemDepth:e.itemDepth+1,parentStore:t.getContentStore(),itemStyle:u.sideBarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled})}return s?null:(0,U.jsx)(C.Z,{href:p,style:{width:"100%"},innerStyle:(0,O.G$)({isMobile:a.device.isMobile}),onClick:()=>{i&&i(t)},role:"treeitem","aria-current":c?"step":void 0,children:(0,U.jsx)(k.Z,{icon:(0,U.jsx)("div",{style:u.initialIcon,children:"•"}),style:u.sideBarItem,children:(0,U.jsx)(je.Z,{collectionViewName:g.name,collectionViewType:g.type??"table"})})})}function Be(e){window.__c={n:"CollectionViewOutliner"};const{store:t}=e,o=(0,l.VK)((()=>t.getCollectionViewStores()),[t]);return(0,U.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,we.ZP)({event:e,context:we.Af.EditorContextMenu,callback:()=>{}})},children:o.map((o=>(0,U.jsx)(Ce,{store:t,collectionViewStore:o,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores},o.id)))})}function Pe(e){window.__c={n:"NestedOutliner"};const{disabled:t,store:o,style:i,targetStore:r,itemDepth:a,nestedOutlinerAriaId:s,titleAriaId:c}=e,{isMobile:u}=(0,n.Fy)(),p=(0,l.VK)((()=>!(0,y.b)(o)),[o]),g=(0,l.VK)((()=>r.isCollectionView()?r:null),[r]),m=(0,l.VK)((()=>(0,S.Yz)(o)),[o]),h=(0,d.yK)((()=>{const e="number"==typeof(null==i?void 0:i.paddingLeft)?i.paddingLeft:u?Oe:5,t=u?_e:14;return{item:{...i,paddingLeft:e+t}}}),[i,u]);return g?(0,U.jsx)(Be,{store:g,itemStyle:h.item,onNavigate:e.onNavigate,type:e.type,childStores:m,areChildrenLoading:!1,itemDepth:a+1,parentStore:r.getContentStore(),itemToggleStyle:e.toggleStyle,disabled:t,id:s,"aria-labelledby":c}):(0,U.jsx)(Me.Z,{type:e.type,childStores:m,areChildrenLoading:p,itemDepth:a+1,parentStore:r.getContentStore(),itemStyle:h.item,itemToggleStyle:e.toggleStyle,onNavigate:e.onNavigate,disabled:t,id:s,"aria-labelledby":c})}function ke(e){return`Outliner-${e.id}`}function Ze(e){let{store:t,type:o,isTopLevelItem:i}=e;return e=>{const n=t.getRecordStoreUIParent();null!=n&&n.valueIs(x.i)&&g.A5({...e,type:o,targetStore:t,targetParentStore:n,isTopLevelItem:i})}}function Le(e){let{environment:t,store:o,parentStore:i,type:n,isTopLevelItem:r}=e;return async e=>{const{droppedDirection:a,droppedStores:s,duplicate:l}=e;i&&await g.v9({environment:t,type:n,targetParentStore:i,targetStore:o,isTopLevelItem:r,droppedDirection:a,droppedStores:s,duplicate:l})}}const Oe=6,_e=22,Ve=function(e){window.__c={n:"OutlinerItem"};const{store:t,itemIndex:o,parentStore:d,type:S,itemDepth:y,disabled:x}=e,I=(0,n.O7)(),w=(0,a.l)(),j=function(e){return 0===e}(y),[M,C]=(0,i.useState)((()=>{if((0,p.$K)(e.itemOpenByDefault))return e.itemOpenByDefault;if(j){const e=u.Z.get({userId:I.currentUser.id,key:ke(t)});if((0,p.$K)(e))return e}return!1})),[B,P]=(0,i.useState)(!1),[k,Z]=(0,i.useState)(!1),L=(0,i.useId)(),O=(0,i.useId)(),_=(0,l.VK)((()=>function(e){if(e.getType()===c.Ti.alias){const t=e.getAliasTargetStore();return t instanceof v.G?t:void 0}return e}(t)),[t]),V=(0,l.VK)((()=>T.Bb(t)),[t]),A=(0,l.VK)((()=>!x&&(0,h.J5)({environment:I,blocks:[t],publicEditMode:w&&w.publicEditModeStore.state})),[x,w,I,t]),K=(0,l.VK)((()=>A&&!t.isLinkedCollectionView()),[t,A]),F=(0,i.useRef)(null);(0,s.c)(b.Z,(()=>({store:t,parentStore:d,type:S,isTopLevelItem:j,getNode:()=>F.current})),[t,d,S,j]);const R=V&&d?{onInsertBelow:e=>g.LR({...e,environment:I,store:t,parentStore:d,before:!0,type:S}),onInsertAbove:e=>g.LR({...e,environment:I,store:t,parentStore:d,before:!1,type:S})}:{},D=0===o,H=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&Z(!0)}),[]),N=(0,i.useCallback)((()=>{Z(!1)}),[]),E=(0,i.useCallback)((()=>{f.Z.state.isDragging||P(!0)}),[]),z=(0,i.useCallback)((()=>{P(!1)}),[]),W=(0,i.useCallback)((e=>{C(void 0!==e?e:e=>!e)}),[]);return _?(0,U.jsxs)(m.Z,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:V,canDropAbove:D,canDropBelow:V,canDropOnto:K,canInsertBelow:V,canInsertAbove:V,canSelect:V,canTriggerContextMenu:!0,onRemove:Ze({store:t,type:S,isTopLevelItem:j}),onSelectableDrop:Le({environment:I,store:t,parentStore:d,type:S,isTopLevelItem:j}),shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,...R,ref:F,children:[(0,U.jsx)(Te,{store:t,style:e.style,parentStore:d,type:S,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:_,canEditItem:A,nestedOutlinerAriaId:L,titleAriaId:O,onFocus:H,onBlur:N,onMouseMove:E,onMouseLeave:z,onToggle:W,isHovered:B,isFocused:k,isOpen:M}),M&&(0,U.jsx)(Pe,{...e,targetStore:_,nestedOutlinerAriaId:L,titleAriaId:O})]}):null}},75546:(e,t,o)=>{o.d(t,{o:()=>c});o(67294);var i=o(480),n=o(86628),r=o(24405),a=o(82990),s=o(95697),l=o(43488),d=o(85893);function c(e){let{teamStore:t,withSelectedStyle:o}=e;window.__c={n:"TeamHeaderLabel"};const c=(0,i.Fy)(),u=(0,n.VK)((()=>{var e;return{teamName:t.getName()??"",shouldShowLock:(0,s.C2)(null==t||null===(e=t.getSettingsStore())||void 0===e?void 0:e.getValue())}}),[t]),p=(0,r.yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},lockIcon:{width:15,marginLeft:6,marginBottom:1,fill:e.mediumIconColor},labelText:{...a.Z.textOverflowStyle,...o?{color:e.regularTextColor,fontWeight:a.Z.fontWeight.semibold}:{color:e.darkTextColor,fontWeight:a.Z.fontWeight.medium},fontSize:c.isMobile?a.Z.fontSize.UIRegular.mobile:a.Z.fontSize.UIRegular.desktop}})),[c.isMobile,o]);return u?(0,d.jsxs)("div",{style:p.container,children:[(0,d.jsx)("div",{style:p.labelText,children:u.teamName}),u.shouldShowLock&&(0,d.jsx)(l.Z,{iconStyle:p.lockIcon})]}):null}},29165:(e,t,o)=>{o.d(t,{O:()=>T});var i=o(67294),n=o(480),r=o(86628),a=o(29369),s=o(31412),l=o(29921),d=o(80444),c=o(70704),u=o(75546),p=o(24405),g=o(75071),m=o(14720),h=o(64921),S=o(31945),y=o(68785),b=o(14694),f=o(85893);function v(e){let{teamStore:t}=e;window.__c={n:"TeamOutlinerEmptyState"};const o=(0,n.Fy)(),a=(0,r.VK)((()=>t.canAddOrRemoveTopLevelPages()),[t]),[l,d]=(0,i.useState)(void 0),c=(0,p.yK)((e=>({emptyPlaceholder:{color:e.lightTextColor,paddingLeft:12,...!o.isMobile&&{fontSize:14},...o.isMobile&&{display:"flex",alignItems:"center",height:32},display:"flex",alignItems:"center"},addPage:{color:e.mediumTextColor,borderRadius:4},addPageButton:{borderRadius:4,marginLeft:4,marginRight:4},addPageIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},addPageIcon:{fill:e.mediumIconColor,width:16,height:16}})),[o]);return a?(0,f.jsx)(S.ZP,{popupType:S.Z4.Popup,alignmentToOrigin:S.vR.Start,originGap:2,originRect:l,renderOrigin:e=>(0,f.jsx)(h.Z,{mobileFeedback:o.isMobile,style:c.addPageButton,...e,onClick:t=>{d(new DOMRect(t.clientX,t.clientY)),e.onClick(t)},children:(0,f.jsx)(b.Z,{style:c.addPage,disableMobileBorder:!0,left:(0,f.jsx)("div",{style:c.addPageIconContainer,children:(0,g.f)(c.addPageIcon)}),children:(0,f.jsx)(s.FormattedMessage,{id:"teamOutliner.addPage",defaultMessage:"Add a page"})})}),render:e=>(0,f.jsx)(m.p7,{renderLoading:e=>(0,f.jsx)("div",{style:m.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,f.jsx)(y.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_empty_new_page"})}):(0,f.jsx)(b.Z,{disableMobileBorder:!0,children:(0,f.jsx)("div",{style:c.emptyPlaceholder,children:(0,f.jsx)("span",{children:(0,f.jsx)(s.FormattedMessage,{defaultMessage:"No pages inside",id:"teamOutliner.noOverflowEmptyMessage"})})})})}var x=o(54396);function T(e){let{teamStore:t,sidebarState:o,isLastTeam:i,initialToggleState:p,shouldPersistToggleState:g,customToggleStore:m,teamOutlinerType:h,onNavigate:S,onTeamJoinComplete:y}=e;window.__c={n:"TeamOutliner"};const{currentSpaceStore:b,currentSpaceViewStore:x,currentUserSettingsStore:T}=(0,r.VK)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}=d.default.state;return{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}}),[]),w=(0,r.qz)(void 0,c.Z),j=m??w,M=(0,r.VK)((()=>t.getTeamPagesStores()),[t]),C=(0,n.Fy)(),B=(0,r.VK)((()=>{const e=d.default.state.mainEditorCurrentBlockStore;return(null==e?void 0:e.getParentTable())===a.e0&&(null==e?void 0:e.getParentId())===t.id&&!C.isMobile&&j.state.isHidden}),[C.isMobile,t.id,j]);return b&&x&&T?(0,f.jsx)(l.Z,{type:"team",customToggleButtonStore:j,forceHoveredButtonStyle:B,initialToggleState:p,shouldPersistToggleState:g,teamHeaderLabel:(0,f.jsx)(u.o,{teamStore:t,withSelectedStyle:B}),teamStore:t,spaceStore:b,spaceViewStore:x,showAddButton:!1,isLastTeam:i,teamOutlinerType:h,labelTooltip:(0,f.jsx)(s.FormattedMessage,{defaultMessage:"One of your teams",id:"sidebar.teamSection.tooltip"}),onTeamJoinComplete:y,marginBottomOverrideWhenExpanded:C.isMobile?0:16,marginBottomOverrideWhenCollapsed:C.isMobile?0:1,renderSidebar:e=>{let{labelAriaId:i,contentsAriaId:n}=e;if(!t)return;const r=new Set(M.map((e=>e.id)));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(I,{teamSectionType:h,sidebarState:o,teamStore:t,onNavigate:S,labelAriaId:i,contentsAriaId:n}),0===r.size&&(0,f.jsx)(v,{teamStore:t})]})}}):null}const I=i.memo((e=>{window.__c={n:"MemoizedTeamTopLevelSidebarOutliner"};const{teamSectionType:t,teamStore:o,sidebarState:n,contentsAriaId:r,onNavigate:a,labelAriaId:s}=e,l=(0,i.useMemo)((()=>({type:"team",teamSectionType:t,teamStore:o})),[t,o]),d=(0,i.useMemo)((()=>({id:r,"aria-labelledby":s})),[r,s]);return(0,f.jsx)(x.r,{state:l,sidebarState:n,onNavigate:a,additionalOutlinerProps:d})}))},54396:(e,t,o)=>{o.d(t,{r:()=>S});var i=o(67294),n=o(480),r=o(86628),a=o(24405),s=o(97880),l=o(35683),d=o(35026),c=o(80444),u=o(61738),p=o(99757),g=o(3392),m=o(72655),h=o(85893);function S(e){window.__c={n:"TopLevelSidebarOutliner"};const{state:t,sidebarState:o,onNavigate:S,additionalOutlinerProps:y,id:b,isHeaderless:f}=e,v=(0,r.VK)((()=>c.default.state.currentSpaceStore),[]),x=(0,r.VK)((()=>c.default.state.currentSpaceViewStore),[]),T=(0,n.O7)(),I=(0,n.Fy)().isMobile,w=(0,r.VK)((()=>!p.n.state),[]),j=(0,r.VK)((()=>(null==v?void 0:v.canEdit())&&w),[v,w]),M=(0,r.VK)((()=>t),[t]),C=(0,r.VK)((()=>{if(x)return(0,d.EE)({currentSpaceViewStore:x,typeWithTeam:M,environment:T,sidebarState:o})}),[x,T,o,M]),B=(0,r.VK)((()=>{if(x&&v)return(0,d.P4)({currentSpaceStore:v,currentSpaceViewStore:x,typeWithTeam:M})}),[v,x,M]),P=(0,i.useCallback)((e=>{switch(M.type){case"bookmarks":u.Z.recordVisit({id:e.id,systemBlockType:e.getSystemBlockTypeStore().getValue(),type:l.vu.Favorite,currentUserId:T.currentUser.id});break;case"team":case"workspace":case"shared":u.Z.recordVisit({id:e.id,systemBlockType:e.getSystemBlockTypeStore().getValue(),type:l.vu.Link,currentUserId:T.currentUser.id});break;case"private":break;default:(0,s.t1)(M)}null==S||S()}),[T.currentUser.id,S,M]),k=(0,a.yK)((()=>({outliner:{display:"block"},outlinerItem:{...I&&"team"===M.type?{paddingLeft:m.gZ+m.aZ}:void 0}})),[I,M.type]);return v&&x&&C?(0,h.jsx)(g.Z,{type:M.type,disabled:!j,itemDepth:0,childStores:C,parentStore:B,style:k.outliner,itemStyle:k.outlinerItem,onNavigate:P,id:b,"aria-labelledby":e["aria-labelledby"],isHeaderless:f,...y}):null}},14720:(e,t,o)=>{o.d(t,{Rv:()=>r,Ry:()=>d,p7:()=>l,rH:()=>s,tn:()=>n,vs:()=>a});var i=o(77907);const n=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarTeamBrowserContent)),r=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSwitcherMultiAccountPopup)),a=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarFooter)),s=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSectionWithPopup)),l=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.TeamAddAppTemplateMenu)),d={LazyTeamAddAppTemplateMenu:{width:250,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}}},56638:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(49085);class n extends i.default{getInitialState(){return{open:!1}}}const r=new n},30278:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(49085);class n extends i.default{getInitialState(){return{contacts:!1}}}const r=n},43488:(e,t,o)=>{o.d(t,{Z:()=>s});o(67294);var i=o(16184),n=o(31412),r=o(26388),a=o(85893);function s(e){let{iconStyle:t}=e;return(0,a.jsx)(r.Z,{textWrap:!0,style:{width:210},placement:r.Z.Placement.Bottom,renderTooltip:()=>(0,a.jsx)(n.FormattedMessage,{id:"teamLockIcon.tooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>(0,a.jsx)("div",{...e,children:(0,i.Q)(t)})})}},22487:(e,t,o)=>{o.d(t,{K:()=>s});var i=o(86628),n=o(27006),r=o(95697),a=o(80444);function s(e){return(0,i.VK)((()=>{if(!e)return 0;const t=a.default.state.currentSpaceStore,o=a.default.state.currentUserStore;if(!n.YX((null==t?void 0:t.getRole())??"none")){return(0,r.tu)({currentUserStore:o,currentSpaceStore:t,teamStore:e,members:e.getMembers()}).length}return(0,r.tO)({teamStore:e,spaceStore:t}).length}),[e])}},64878:(e,t,o)=>{o.d(t,{h:()=>r});o(67294);var i=o(45238),n=o(85893);const r=(0,i.I)("dot",{viewBox:"0 0 5 4",svg:(0,n.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})}}]);