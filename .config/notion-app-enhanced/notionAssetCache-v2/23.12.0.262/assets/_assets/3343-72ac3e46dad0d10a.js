"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3343],{98481:(e,t,a)=>{a.d(t,{J:()=>l});var n=a(40506),i=a(97880);var o=a(78291),s=a(88893),r=a(35057);function l(e){let{environment:t}=e;const a=(0,r.zt)(),{data:l}=o.default.state,d=(0,s.XX)(l);return function(e){let{subscriptionTier:t,subscriptionCreatedAtTime:a}=e;return"enterprise"===t||"plus"===t&&(0,i.$K)(a)&&a<n.Xn}({subscriptionTier:a,subscriptionCreatedAtTime:null==d?void 0:d.created})}},73343:(e,t,a)=>{a.r(t),a.d(t,{OutlinerTeamOverflow:()=>ae,TeamOverflowMenu:()=>ne});var n=a(67294),i=a(480),o=a(86628),s=a(24405),r=a(85397),l=a(52867),d=a(9767),c=a(56666),m=a(88437),p=a(13797),u=a(19981),g=a(3577),f=a(47453),T=a(15028),b=a(5108),v=a(47425),h=a(64684),w=a(97880),S=a(31412),y=a(62967),M=a(50906),x=a(37181),j=a(93405),A=a(48019),O=a(64921),P=a(31945),k=a(78140),I=a(72495),B=a(26388),C=a(43250),D=a(87279),_=a(35026),V=a(95697),K=a(77907),L=a(55838),N=a(80444),F=a(61766),Z=a(33052),U=a(73466),W=a(9867);function J(e){let{adminStatus:t,accessLevel:a,isArchivedTeam:n}=e;if("adminThatCanPerformPrivilegedActions"===t)return new Set(["join","joinAsOwner"]);if(n)switch(t){case"none":return new Set;case"admin":return new Set("open"===a?["join"]:[]);default:(0,w.t1)(t)}switch(a){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,w.t1)(a)}}var R=a(82740),z=a(73365),$=a(30297),E=a(11628),q=a(97082),G=a(64552),X=a(31931),Y=a(85893);const H=["addPages","join","view","add","duplicate","leave","archive","restore"],Q=["addPages","add"],ee=["join","joinAsOwner","upgradeSelfToOwner","leave"],te=(0,S.defineMessages)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"},appTemplates:{defaultMessage:"Add pages",id:"sidebar.outlinerTeamToggleButton.addPages"}});function ae(e){let{teamStore:t,style:a,from:n,hideJoin:r,onPopupClick:l,onPopupClose:d}=e;window.__c={n:"OutlinerTeamOverflow"};const m=(0,i.Fy)(),p=(0,S.useIntl)(),u=(0,o.qz)(void 0,Z.Z),g=(0,o.VK)((()=>N.default.state.currentSpaceStore),[]),f=(0,o.qz)(void 0,F.Z),T=(0,s.yK)((e=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...a},icon:{fill:e.sidebarTextColor,width:14,height:14}})),[a]),b=p.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"});return g?m.isMobile?null:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(B.Z,{textWrap:!1,renderTooltip:()=>b,placement:B.Z.Placement.Bottom,render:e=>(0,Y.jsx)(P.ZP,{popupType:P.Z4.Popup,buttonPopupStore:f,alignmentToOrigin:P.vR.Start,originGap:2,renderOrigin:t=>(0,Y.jsx)(O.Z,{ariaLabel:b,className:C.qxR,style:T.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,c.o)(T.icon)}),render:e=>(0,Y.jsx)(ne,{teamStore:t,permissionsInviteStore:u,onDismiss:e.close,from:n,hideJoin:r,buttonPopupStore:f}),onClick:l,onClose:d})}),(0,Y.jsx)(K.LazyTeamPermissionsInviteWithModal,{permissionsInviteStore:u,store:t})]}):null}function ne(e){window.__c={n:"TeamOverflowMenu"};const{teamStore:t,permissionsInviteStore:a,onDismiss:c,from:O,hideJoin:P,buttonPopupStore:K}=e,F=(0,s.Fg)(),Z=(0,i.O7)(),ae=(0,s.yK)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),ne=(0,o.VK)((()=>N.default.state.currentSpaceStore),[]),ie=(0,G.e)(t),oe=(0,o.VK)((()=>(0,h.m4)({archived_by:t.getArchivedBy()})),[t]),se=Z.currentUser.id,re=(0,o.VK)((()=>se?(0,h.Rk)({userId:se,team:{is_default:t.isDefault(),membership:t.getRawMembership()},space:{permissions:null==ne?void 0:ne.getPermissionItems(),permission_groups:null==ne?void 0:ne.getPermissionGroups()}}):"none"),[ne,se,t]),le=(0,o.VK)((()=>!(!t.isDefined()||!se)&&(0,h.pd)({membership:t.getMembers()},se)),[se,t]),de=(0,q.y)(t.id),ce=(0,R.e)(t),{id:me,name:pe,isDefault:ue}=(0,o.VK)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),ge=(0,z.n)(ne),fe=(0,o.VK)((()=>(0,V.Xq)({environment:Z,spaceStore:ne})),[ne,Z]),Te=(0,$.r)(O),be=function(e){const{isDefault:t,accessLevel:a,settings:n}=(0,o.VK)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),i="private"===a,s=(0,E.P)(),r=i&&!s?"business":void 0,l=(null==n?void 0:n.disable_public_access)||(null==n?void 0:n.disable_export)||(null==n?void 0:n.disable_guests),d=(0,E.z)(),c=l&&!d?"enterprise":void 0,m=(0,v.bo)([c,r]);if(t)return"isDefault";if(m)return m}(t),ve="isDefault"===(he=be)?(0,Y.jsx)(S.FormattedMessage,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===he?(0,Y.jsx)(S.FormattedMessage,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===he?(0,Y.jsx)(S.FormattedMessage,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===he?void 0:(0,w.t1)(he);var he;const we=(0,o.VK)((()=>t.getTeamAccessLevel()),[t]),Se=(0,n.useCallback)((e=>{M.zah(Z,{store:t,from:O,option:e})}),[Z,t,O]),ye=de&&!ge,Me=(0,o.VK)((()=>Boolean(null==ne?void 0:ne.canAdmin())),[ne]),{joinLeaveOptionsToShow:xe,leaveOptionDisabledState:je}=function(e){let{teamRole:t,adminStatus:a,isDefaultTeam:n,accessLevel:i,isArchivedTeam:o}=e;switch(t){case"owner":case"member":const e=new Set,s=!o;return s&&e.add("leave"),"owner"!==t&&"adminThatCanPerformPrivilegedActions"===a&&e.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:e,leaveOptionDisabledState:s&&n?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:J({adminStatus:a,accessLevel:i,isArchivedTeam:o}),leaveOptionDisabledState:void 0};default:(0,w.t1)(t)}}({teamRole:re,adminStatus:Te?"adminThatCanPerformPrivilegedActions":Me?"admin":"none",isArchivedTeam:oe,isDefaultTeam:ue,accessLevel:we}),Ae=(0,X.Z)({teamStore:t,from:"sidebar_team_overflow"}),Oe=(0,o.VK)((()=>(0,_.si)({environment:Z,teamStore:t})),[Z,t]),Pe=xe.has("joinAsOwner"),ke=Te&&!(1===xe.size&&xe.has("leave")),Ie={add:{type:"action",show:!oe&&ce,handle:()=>{a.update((e=>({...e,modalOpen:!0})))},title:te.add,icon:(0,r.a)({width:17})},leave:{type:"action",...ke&&{colorOverride:F.redBadgeBackground},show:xe.has("leave"),handle:()=>{W.s({environment:Z,teamStore:t,currentSpaceStore:ne,from:O})},title:te.leave,disabled:Boolean(null==je?void 0:je.disabled),icon:(0,u.V)({width:17}),disabledTooltipText:"defaultTeam"===(null==je?void 0:je.disabledReasonKey)&&(0,Y.jsx)(S.FormattedMessage,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!P&&xe.has("join"),handle:async()=>{if(ne)switch(we){case"open":await W.um({environment:Z,teamStore:t,currentSpaceStore:ne,from:O,andNavigateToTeamHome:!1});break;case"closed":case"private":await W.wT({environment:Z,teamStore:t,currentSpaceStore:ne,from:O,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,w.t1)(we)}},title:Pe?te.joinAsMember:te.joinTeamspace,icon:(0,f.R)({width:17})},joinAsOwner:{type:"action",show:Pe,handle:()=>W.wT({environment:Z,teamStore:t,currentSpaceStore:ne,from:O,action:"joinTeamAsOwner"}),title:te.joinAsOwner,icon:(0,g.J)({width:17})},upgradeSelfToOwner:{type:"action",show:xe.has("upgradeSelfToOwner"),handle:()=>W.wT({environment:Z,teamStore:t,currentSpaceStore:ne,from:O,action:"upgradeToOwner"}),title:te.upgradeSelfToOwner,icon:(0,g.J)({width:17})},archive:{type:"action",show:!oe&&le,colorOverride:F.redBadgeBackground,handle:()=>{!ye&&W.aQ({teamStore:t,environment:Z,from:O})},title:te.archive,disabled:ye,disabledTooltipText:(0,Y.jsx)("div",{style:{whiteSpace:"normal"},children:(0,Y.jsx)(S.FormattedMessage,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"There must only be one member in the workspace to archive this teamspace"})}),icon:(0,l.H)({width:17})},restore:{type:"action",show:oe,handle:()=>{le&&W.YH({environment:Z,teamStore:t,teamName:pe,from:O})},title:te.restore,icon:(0,T.a)({width:17}),disabled:!le,disabledTooltipText:(0,Y.jsx)(S.FormattedMessage,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText",defaultMessage:"Only teamspace owners can restore archived teamspaces."})},duplicate:{type:"action",show:!oe&&fe,handle:()=>{U.tW({environment:Z,teamStore:t,from:O,buttonPopupStore:K})},title:te.duplicate,disabled:void 0!==be,icon:(0,m.a)({width:17}),disabledTooltipText:ve,caption:(0,Y.jsx)(S.FormattedMessage,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!oe||"manage_teams_table"===O,handle:()=>W.RF({environment:Z,teamId:me,tab:L.a.Members,from:O}),title:ie?te.teamspaceSettings:te.viewMembers,icon:ie?(0,p.F)({width:15}):(0,b.n)({width:17})},addPages:{type:"extensionAction",show:"teamSidebar"===O&&Oe,title:te.appTemplates,icon:(0,d.s)({width:17}),subActionSections:Ae}},Be=(ke?[{sectionName:"join/leave section",orderedOptions:ee},{sectionName:"other actions",orderedOptions:H.filter((e=>!ee.includes(e)))}]:[{sectionName:"add section",orderedOptions:Q},{sectionName:"other actions section",orderedOptions:H.filter((e=>!Q.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>Ie[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(w.$K).map((e=>{const t=e.filteredOptions.map((e=>{const t=Ie[e],{type:a}=t;return"action"===a?(0,y.cN)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{c(),Se(e),t.handle()},render:e=>(0,Y.jsx)(B.Z,{placement:B.Z.Placement.Left,textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:a=>(0,Y.jsx)(j.Z,{...e,...a,svg:()=>t.icon,title:(0,Y.jsx)(S.FormattedMessage,{...t.title}),buttonStyle:{...ae.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:F.regularIconColor,color:F.regularTextColor}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:ae.caption,shouldWrapCaption:!0})})}):"extensionAction"===a?(0,y.MV)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:a=>{c(),Se(e),t.action(a)}})))})))}):void(0,w.t1)(a)}));return(0,y.$J)({key:e.sectionName,render:e=>(0,Y.jsx)(I.Z,{...e}),actions:t})}));return(0,n.useEffect)((()=>{x.$n({environment:Z,teamId:t.id})}),[Z,t.id]),(0,Y.jsx)(k.Z,{className:C.Mdu,menuType:D.og.Popup,minWidth:"100%",children:(0,Y.jsx)(A.Z,{context:{blocks:[],environment:Z,publicEditMode:void 0},sections:Be,initialFocus:void 0})})}},82740:(e,t,a)=>{a.d(t,{e:()=>l});var n=a(86628),i=a(97880),o=a(35057),s=a(64552),r=a(56187);function l(e){const t=(0,r.q)(e),a=(0,s.e)(e);return(0,n.VK)((()=>{if(!(0,o.Mk)())return!1;const n=e.getSetting("invite_access");switch(n){case void 0:return!1;case"team_members":return a;case"team_owners":return t;default:(0,i.t1)(n)}}),[e,t,a])}},73365:(e,t,a)=>{a.d(t,{n:()=>r});var n=a(480),i=a(86628),o=a(64684),s=a(30397);function r(e){const t=(0,n.O7)();return(0,i.VK)((()=>{const a=s.Z.state.teams.map((e=>({membership:e.getMembers(),id:e.id,archived_by:e.getArchivedBy(),is_default:e.isDefault()}))),n=t.currentUser.id;return!(!n||!e)&&(0,o.wN)({spaceValue:{permissions:e.getPermissionItems(),permission_groups:e.getPermissionGroups()},teamsInSpace:a,currentUserId:n})}),[t,e])}},11628:(e,t,a)=>{a.d(t,{P:()=>d,z:()=>c});var n=a(480),i=a(86628),o=a(47425),s=a(98481),r=a(80444),l=a(70060);function d(){const{currentSpaceStore:e}=(0,i.Kw)(r.default);return(0,i.VK)((()=>{const t=(null==e?void 0:e.getSubscriptionTier())??"free";return(0,o.$V)(t,"business")}),[e])}function c(){const e=(0,n.O7)(),{currentSpaceStore:t}=(0,i.Kw)(r.default);return(0,i.VK)((()=>{const a=(null==t?void 0:t.getSubscriptionTier())??"free";return!(0,l.fX)()?(0,o.$V)(a,"business"):(0,s.J)({environment:e})}),[e,t])}},97082:(e,t,a)=>{a.d(t,{y:()=>o});var n=a(86628),i=a(30397);function o(e){const[t]=(0,n.AF)(i.Z);return(0,n.VK)((()=>{if(!e)return!1;const a=t.teams.filter((e=>e.isDefault()&&!e.isArchived()));return 1===a.length&&a[0].id===e}),[t,e])}},56187:(e,t,a)=>{a.d(t,{q:()=>s});var n=a(480),i=a(86628),o=a(64684);function s(e){const t=(0,n.O7)();return(0,i.VK)((()=>{const a=t.currentUser.id;return!!(e&&e.isDefined()&&a)&&(0,o.pd)({membership:e.getMembers()},a)}),[t.currentUser.id,e])}},31931:(e,t,a)=>{a.d(t,{Z:()=>U,l:()=>K});a(57658);var n=a(67294),i=a(480),o=a(86628),s=a(24405),r=a(15145),l=a(45433),d=a(15652),c=a(9767),m=a(90334),p=a(82990),u=a(31412),g=a(62967),f=a(50906),T=a(47307),b=a(89858),v=a(75018),h=a(54814),w=a(93405),S=a(72495),y=a(64369),M=(a(74523),a(34045)),x=a(93959),j=a(75081),A=a(35683),O=(a(18514),a(77907)),P=a(74948),k=a(80444),I=a(35057),B=a(29949),C=a(85893);const D=(0,u.defineMessages)({moreTemplates:{id:"sidebar.addAPageButtonTeamToggle.moreTemplates",defaultMessage:"More templates"},browseTemplates:{id:"sidebar.addAPageButtonTeamToggle.browseTemplates",defaultMessage:"Browse templates"},blankPage:{id:"sidebar.addAPageButtonTeamToggle.addBlankPage",defaultMessage:"Blank page"},suggestedTemplatesSection:{id:"sidebar.addAPageButtonTeamToggle.suggestedTemplatesSection",defaultMessage:"Suggested templates"}});function _(e){let{type:t,icon:a,title:n,action:i}=e;return(0,g.cN)({key:t,displayName:void 0,analyticsName:t,validators:[],closeParentMenu:!0,action:i,render:e=>(0,C.jsx)(w.Z,{...e,svg:()=>a,title:n})})}function V(e){let{preset:t,databaseTypes:a}=e;const n=(0,l.Pi)(t);for(const i of n)if(a.has(i))return!0;return!1}async function K(e){let{environment:t,spaceId:a,presetUri:n,parentStore:i,teamId:o,from:s}=e;const r=await async function(e){let{environment:t,spaceId:a,presetUri:n,parentStore:i,teamId:o}=e;const s=a?await h.nc({environment:t,spaceId:a,databaseTypes:(0,l.Pi)(n),parentStore:i,teamId:o}):[];return 0===s.length?{shouldShowConfirmModal:!1}:{shouldShowConfirmModal:!0,existingDatabaseTypes:s}}({environment:t,spaceId:a,presetUri:n,parentStore:i,teamId:o}),{shouldShowConfirmModal:d}=r;if(!d)return!0;const{existingDatabaseTypes:c}=r;return new Promise((e=>{f.YnN(t,{from:s}),T.showDialog({handleCancel:()=>{f.nnP(t,{from:s,option:"no"}),e(!1)},showCancel:!0,keepFocus:!1,message:(0,C.jsx)(L,{presetUri:n,existingDatabaseTypes:c}),description:false,items:[{label:(0,C.jsx)(u.FormattedMessage,{id:"sidebar.appTemplate.confirmAdditionalAppTemplate.confirmAddAnyway.label",defaultMessage:"Add anyway"}),color:"red",onAccept:()=>{f.nnP(t,{from:s,option:"yes"}),e(!0)}}]})}))}function L(e){window.__c={n:"DialogMessage"};const{presetUri:t,existingDatabaseTypes:a}=e,n=(0,u.useIntl)(),i=(0,s.yK)((()=>({messageContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:12,marginTop:8,marginBottom:8},titleIcon:{height:38,width:38,color:"#D34F43"},confirmationTitle:{fontWeight:p.Z.fontWeight.medium,fontSize:18,textAlign:"center",marginTop:8,marginBottom:4},confirmationSubtitle:{fontSize:14,textAlign:"center"}})),[]),{title:r,icon:l}=(0,o.VK)((()=>N({presetUri:t,iconStyle:i.titleIcon})),[t,i.titleIcon]);return(0,C.jsxs)("div",{style:i.messageContainer,children:[l,(0,C.jsx)(y.Z,{isMultiline:!0,style:i.confirmationTitle,children:(0,C.jsx)(u.FormattedMessage,{id:"sidebar.appTemplate.confirmAdditionalAppTemplate",defaultMessage:"Are you sure you want to add another {templateName} template?",values:{templateName:r}})}),(0,C.jsx)(y.Z,{isMultiline:!0,style:i.confirmationSubtitle,children:a&&a.length>0?(0,C.jsx)(u.FormattedMessage,{id:"sidebar.appTemplate.confirmAdditionalAppTemplate.existingAppsCaption",defaultMessage:"{existingDatabaseTypes} already exist in this teamspace. This template works best if there is only one per teamspace.",values:{existingDatabaseTypes:n.formatList(a.map((e=>(0,j.Mn)(e))))}}):(0,C.jsx)(u.FormattedMessage,{id:"sidebar.appTemplate.confirmAdditionalAppTemplate.caption",defaultMessage:"{templateName} template works best if there is only one per teamspace.",values:{templateName:r}})})]})}function N(e){let{presetUri:t,iconStyle:a}=e;return{title:F(t),icon:Z({presetUri:t,style:a})}}function F(e){return e===l.rK?(0,C.jsx)(u.FormattedMessage,{id:"sidebar.addTemplateToExistingTeam.wiki",defaultMessage:"Wiki"}):(0,x.YC)((0,M.appConfigs)(),e).name}function Z(e){var t,a;let{presetUri:n,style:i}=e;return l.xm.includes(n)?null===(t=(a=d.y[n]).icon)||void 0===t?void 0:t.call(a,i):null}const U=function(e){const{teamStore:t,from:a}=e,d=(0,i.O7)(),p=(0,i.Fy)(),{spaceStore:T,spaceViewStore:h}=(0,o.VK)((()=>({spaceStore:k.default.state.currentSpaceStore,spaceViewStore:k.default.state.currentSpaceViewStore})),[]),w=(0,n.useCallback)((async e=>{const{appTemplatesSetupActions:n}=await O.deps.AppTemplates.loader();f.ZEy(d,{option:e,from:a});if(!(await K({presetUri:e,spaceId:t.getSpaceId(),environment:d,parentStore:t,teamId:t.id,from:a})))return;let i=!1;const o=[];if(T&&h){if((0,l.it)(e))i=await n.createWikiInTeam({environment:d,spaceStore:T,spaceViewStore:h,teamStore:t,appendOrPrepend:"append"}),o.push(i.id);else{const o=n.createTypedDBsInTeam({presetUri:e,spaceViewStore:h,environment:d,teamStore:t,from:a});o.length>0&&(i=o[0])}i&&v.navigateToBlock({environment:d,store:i,visitType:A.vu.Link,pageVisitSource:r.tY.Create})}}),[d,t,T,h,a]),M=(0,n.useCallback)((()=>{B.Z.open({analyticsFrom:a,cloneTo:"destination_picker",selectedTeam:t}),f.ZEy(d,{option:"more_templates",from:a})}),[d,t,a]),x=(0,n.useCallback)((()=>{T&&h&&(b.mv({environment:d,from:"sidebar_team_section",spaceStore:T,spaceViewStore:h,teamStore:t,andNavigate:!0,appendOrPrepend:"append"}),p.isMobile&&P.close(),f.ZEy(d,{option:"blank_page",from:a}))}),[p.isMobile,d,T,h,t,a]),j=(0,s.yK)((e=>({actionItemIcon:{fill:e.regularIconColor,width:16,height:16},actionItemIconGray:{fill:e.mediumIconColor,width:16,height:16},blankPageSection:{paddingTop:6,paddingBottom:0},blankPageWithBrowseTemplatesSection:{paddingTop:6,paddingBottom:6}})),[]),L=(0,o.VK)((()=>{if((0,I.QM)()||(0,I.Aw)())return[];const e=l.wC.existing_team,a=function(e){let{teamStore:t,presets:a}=e;if(!t.getSpaceId())return new Set;const n=new Set;for(const s of t.getTeamPageStores()){var i;const e=null===(i=s.getCollectionStore())||void 0===i?void 0:i.getDatabaseType();e&&n.add(e)}const o=new Set;for(const s of a){V({preset:s,databaseTypes:n})&&o.add(s)}return o}({teamStore:t,presets:e});return e.filter((e=>!a.has(e)))}),[t]),F=(0,o.VK)((()=>L.map((e=>{const{icon:t,title:a}=N({presetUri:e,iconStyle:j.actionItemIcon});return _({type:e,icon:t,title:a,action:()=>w(e)})}))),[w,L,j.actionItemIcon]),Z=(0,g.cN)({key:"blank_page",displayName:D.blankPage,analyticsName:"blank_page",svg:()=>(0,c.s)(j.actionItemIcon),validators:[],closeParentMenu:!0,action:()=>x()}),U=0===L.length,{moreType:W,moreMessage:J}=U?{moreType:"browse_templates",moreMessage:D.browseTemplates}:{moreType:"more_templates",moreMessage:D.moreTemplates},R=!p.isMobile?_({type:W,title:(0,C.jsx)(y.Z,{isSecondaryColor:!0,children:(0,C.jsx)(u.FormattedMessage,{...J})}),icon:(0,m.O)(j.actionItemIconGray),action:M}):void 0;return U?[(0,g.$J)({key:"blank page with browse templates",render:e=>(0,C.jsx)(S.Z,{...e,style:j.blankPageWithBrowseTemplatesSection}),actions:[Z,...R?[R]:[]]})]:[(0,g.$J)({key:"add blank page",render:e=>(0,C.jsx)(S.Z,{...e,style:j.blankPageSection}),actions:[Z]}),(0,g.$J)({key:"add app templates",title:D.suggestedTemplatesSection,overrideSearchTitle:D.suggestedTemplatesSection,render:e=>(0,C.jsx)(S.Z,{...e}),actions:[...F,...R?[R]:[]]})]}}}]);