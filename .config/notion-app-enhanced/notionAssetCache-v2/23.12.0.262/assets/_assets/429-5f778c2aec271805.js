"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[429],{86282:(e,t,n)=>{n.d(t,{RL:()=>F,xv:()=>H,rC:()=>A,Hp:()=>D,Lf:()=>N,$7:()=>O,zO:()=>R,GF:()=>U});n(21703);var i=n(15145),s=n(68626),r=n(59730),o=n(15157),a=n(45953),l=n(21202),d=n(23867),c=n(31412),p=(n(95477),n(33929)),h=n(98165),u=n(74948),m=n(80444),g=n(77080),b=n(56638),v=n(50906),f=n(54642),S=n(54532),Z=n(89858),M=n(9953),y=n(4408),x=n(75018),C=n(24677),T=n(28014),k=n(42875),j=n(29477),w=n(33954);var B=n(39699),I=n(39865);const P="LastViewedTemplateId",_=(0,c.defineMessages)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function O(e){const{environment:t,item:n,createNewPage:i,isPrivate:s}=e;C.ZH(t),b.Z.setState({open:!0,item:n,createNewPage:i,isPrivate:s,isLoading:!1}),o.Z.set({userId:t.currentUser.id,key:P,value:n.rootId}),v.jWY(t,{template_name:n.name,from:i?"sidebar":"newPage"})}function R(e){let{templateItem:t,currentUserId:n}=e;const i=b.Z.state.item;b.Z.setState({...b.Z.state,item:t}),i!==t&&o.Z.set({userId:n,key:P,value:t.rootId})}function H(e){b.Z.setState({item:b.Z.state.item,open:!1}),C.ZH(e)}async function F(e){const{item:t,environment:n,spaceStore:s}=e;b.Z.state.open&&b.Z.setState({...b.Z.state,isLoading:!0});const r=e.initializeStore?{...e,initializeStore:e.initializeStore,isPrivate:!1,type:"inExistingStore",useMinimalTemplates:!1}:{...e,type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let o=!1;const a=Date.now();let l;try{l=await A(r),o=!0,x.navigateToBlock({environment:n,store:l,pageVisitSource:i.tY.Create}),H(n),n.device.isMobile&&u.close()}finally{var d;const i=Date.now()-a,r=e.initializeStore?h.VP(e.initializeStore):void 0,c=e.initializeStore?!Boolean(r):e.isPrivate;v.enX(n,{template_name:t.name,destination:c?"private":"team",template_block_id:t.rootId,template_duplication_duration_ms:i,team_id:null==r?void 0:r.id,created_page_id:null===(d=l)||void 0===d?void 0:d.id}),v.XyT(n,{from:"inApp",success:o,context:e.from,template_name:t.name,template_block_id:t.rootId,target_space_id:s.id,template_duplication_duration_ms:i})}}async function N(e){const{environment:t,initializeStore:n,item:i,isPrivate:s,useMinimalTemplates:r,spaceStore:o,spaceViewStore:l}=e,d=r?i.rootId:i.previewRootId,c=await f.loadBlockSubtree(t,{block:{id:d,spaceId:i.spaceId},shallow:!1});let h;"success"===c.type&&(h=a.PF.create(c.data.subtreeRecordMap));const u="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:m}=B.createAndCommit({userAction:u,environment:t,perform:e=>{const i=n||T.KE({environment:t,spaceStore:o,spaceViewStore:l,isPrivate:s,loading:!0,transaction:e});y.fL({environment:t,inMemoryRecordCache:i.inMemoryRecordCache,recordMap:h,debugSource:u});const r=S.K8(t,{blockId:d,inMemoryRecordCache:i.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0});if(!r)throw new Error(p.default.getIntl().formatMessage(_.clientCopyError));return S.E9({environment:t,sourceBlockId:d,targetBlockPointer:i.pointer,sourceBlockSubtree:r,targetInMemoryRecordCache:i.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:i.useCrdt()}),i}});return m}async function A(e){const{environment:t,item:n,useRecordCache:i,isPrivate:s,useMinimalTemplates:r,spaceStore:o,spaceViewStore:a,isOnboarding:d}=e,{serverCommitResult:c,performResult:{pageStore:p,copyBlock:h}}=B.createAndCommit({userAction:"pageTemplateModalActions.createTemplateInstance",environment:t,perform:d=>{let c;c="inExistingStore"===e.type&&e.initializeStore?e.initializeStore:"inTeam"===e.type&&e.teamStore?Z.pq({environment:t,spaceStore:o,spaceViewStore:a,teamStore:e.teamStore,from:e.from,loading:!0,appendOrPrepend:e.appendOrPrepend?e.appendOrPrepend:"append",transaction:d}):T.KE({environment:t,spaceStore:o,spaceViewStore:a,isPrivate:s,loading:!0,transaction:d});const p={id:i&&!r?n.previewRootId:n.rootId,table:l.iU,spaceId:n.spaceId};return U({item:n,spaceViewStore:a,transaction:d}),function(e){const{item:t,transaction:n,spaceViewStore:i}=e;if(i){const e=i.getSidebarHiddenTemplateIds();if(e.indexOf(t.rootId)<0){const s=e.concat([t.rootId]);M.sW({store:i,data:{sidebar_hidden_templates:s},transaction:n})}}}({item:n,spaceViewStore:a,transaction:d}),{pageStore:c,copyBlock:p}}});return await c,await D({environment:t,pageStore:p,copyBlock:h,useRecordCache:i,item:n,isOnboarding:Boolean(d)}),p}const E={block:!0,collection:!0,collection_view:!0,discussion:!0,comment:!0};async function D(e){const{environment:t,pageStore:n,copyBlock:i,item:o,useRecordCache:l,isOnboarding:c}=e,h=a.Ak.create();l&&l.forEachRecord(t.currentUser.id,(e=>{let{model:t}=e;E[t.table]&&h.setModel(t.pointer,t)}));const{currentSpaceStore:u}=m.default.state;if(!u)throw new r.p8("Could not get currentSpaceStore.");const b=()=>{B.createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplate.deletePageWhenError",environment:t,perform:e=>{I.y8({environment:t,blocks:[n],transaction:e})}}),c&&v.XyT(t,{success:!1,template_name:o.name,template_id:o.id,template_block_id:o.rootId,target_space_id:u.id,from:"onboarding"}),s.log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{template_name:o.name,template_id:o.id,template_block_id:o.rootId,is_onboarding:c}}})},S=g.default.getConfigKey("template_ids_to_use_duplicate_block","data");if(null!=S&&S.includes(i.id))await async function(e){const{environment:t,templateBlock:n,targetBlock:i}=e,s=j.UZ(),r=f.duplicateBlock(t,{sourceBlocks:[n],targetBlocks:[i],snapshotData:void 0,addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:{currentUserId:t.currentUser.id,currentTimeZone:(0,k.r)()},convertExternalObjectInstancesToPlaceholders:n.spaceId!==i.spaceId,useCrdt:!1});let o;for await(const a of r)o=a;if(o)if(o.error){const e=(0,w.HV)(p.default.getIntl(),o.error);s.reject(e)}else s.resolve(o);else s.reject(void 0);return s.promise}({environment:t,templateBlock:i,targetBlock:{id:n.pointer.id,spaceId:(0,d.C)(n.pointer.spaceId)}}).catch(b);else{"failed"===(await f.initializePageTemplate(t,{recordMap:h.toJson({allowVersionDowngrade:!1}),sourceBlock:i,targetBlock:{id:n.pointer.id,table:n.pointer.table,spaceId:(0,d.C)(n.pointer.spaceId)},isOnboarding:c})).type&&b()}return n}function U(e){const{item:t,transaction:n,spaceViewStore:i}=e;if(i){const e=i.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const s=e.concat([t.rootId]);M.sW({store:i,data:{visited_templates:s},transaction:n})}}}},52187:(e,t,n)=>{n.d(t,{Z:()=>f});n(67294);var i=n(83355),s=n(78197),r=n(31412),o=n(75018),a=n(87279),l=n(88632),d=n(53610),c=n(35057),p=n(64921),h=n(31945),u=n(78140),m=(n(64369),n(27386),n(14694)),g=n(14266),b=n(85893);class v extends i.Z{constructor(){super(...arguments),this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{d.Z.setState({open:!1})};null!=e&&e.supportsNativeHomeOnPhone()?o.navigateToHomeTab(this.environment,t):t()}}renderComponent(){const{store:e}=this.props;if(!(0,c.Mk)()||!e.isDefined())return;const{mobileNative:t}=this.environment,n=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return(0,b.jsx)(h.ZP,{buttonPopupStore:d.Z,popupType:h.Z4.SlideUp,hidesMobileNativeBottomBar:n,preventSlideUpTransition:n,renderOrigin:e=>(0,b.jsx)(p.Z,{mobileFeedback:!0,...e,children:(0,b.jsx)(m.Z,{left:this.renderIcon(),disableMobileBorder:!0,children:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileSidebar.label"})})}),render:()=>{if(l.Z.state.online){const t={menuType:a.og.Modal,title:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileMemberSettings.title"}),right:(0,b.jsx)(r.FormattedMessage,{defaultMessage:"Done",id:"memberSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,onCancel:this.handleClose};return(0,b.jsx)(u.Z,{...t,children:(0,b.jsx)(g.Z,{store:e,isMobile:!0})})}}})}renderIcon(){return(0,s.S)({fill:this.theme.mediumIconColor,width:16})}}v.displayName="MemberSettingsButton";const f=v},61671:(e,t,n)=>{n.d(t,{Z:()=>b});n(67294);var i=n(83355),s=n(16001),r=n(31412),o=n(75018),a=n(87279),l=n(97799),d=n(64921),c=n(31945),p=n(78140),h=n(15311),u=n(14694),m=n(85893);class g extends i.Z{constructor(){super(...arguments),this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{l.Z.setState({open:!1})};l.Z.state.source!==l.Y.Updates&&((null==e?void 0:e.supportsNativeHomeOnPhone())||!1)?o.navigateToHomeTab(this.environment,t):t()}}renderComponent(){const{device:e,mobileNative:t}=this.environment,n=l.Z.state.open,i=l.Z.state.source!==l.Y.Updates&&((null==t?void 0:t.supportsNativeHomeOnPhone())||!1);return(0,m.jsx)(c.ZP,{popupType:e.isMobile?c.Z4.SlideUp:c.Z4.Popup,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,buttonPopupStore:l.Z,renderOrigin:t=>(0,m.jsx)(d.Z,{mobileFeedback:e.isMobile,...t,children:(0,m.jsx)(u.Z,{left:(0,s.r)({fill:this.theme.mediumIconColor,width:16}),style:{background:n?this.theme.buttonHoveredBackground:"none"},disableMobileBorder:!0,children:(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.label"})})}),render:()=>{let t;return t=e.isMobile?{menuType:a.og.Modal,title:(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.title"}),right:(0,m.jsx)(r.FormattedMessage,{defaultMessage:"Done",id:"notificationSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,onCancel:this.handleClose,whiteBackground:!0}:{menuType:a.og.Popup},(0,m.jsx)(p.Z,{...t,children:(0,m.jsx)(h.Z,{isMobile:!0,passwordRequestStore:this.props.passwordRequestStore})})}})}}g.displayName="NotificationSettingsButton";const b=g},5480:(e,t,n)=>{n.d(t,{Z:()=>oe});var i=n(67294),s=n(83355),r=n(97107),o=n(31412),a=n(50906),l=n(42858),d=n(39699),c=n(98742),p=n(36896),h=n(44604),u=n(80444),m=n(64921),g=n(31945),b=n(79954),v=n(14694),f=n(15145),S=n(1800),Z=n(35840),M=n(37612),y=n(55863),x=n(21202),C=n(75018),T=n(31299),k=n(39865),j=n(95477),w=n(43250),B=n(33929),I=n(87279),P=n(18514),_=n(74948),O=n(88632),R=n(26350),H=n(72087),F=n(68894),N=n(68785),A=n(78140),E=n(32163),D=n(43765),U=n(40721),L=n(89728),V=n(11470),z=n(77137),q=n(43145),Y=n(72495),G=n(30506),K=n(33411),W=n(26388),$=n(83182),X=n(46247),J=n(66957),Q=n(85893);const ee=(0,o.defineMessages)({filterByPlaceholder:{id:"sidebarTrash.filterBy.placeholder",defaultMessage:"Filter by page titleâ€¦"}});class te extends s.Z{constructor(){super(...arguments),this.storeTypes={requestStore:H.Z},this.renderTrashPages=(e,t)=>{const{device:n}=this.environment,s=t?t.results:[],{mainEditorCurrentBlockStore:r}=u.default.state;if(!r)return;const a=s.map((e=>R.G.createChildStore(r,{table:x.iU,id:e}))).filter((e=>e.isDefined()&&!h.Z.state.excludePages.has(e.id))).map((e=>({key:e.id,action:t=>{let{event:i}=t;if("metaKey"in i&&i.metaKey){const t=(0,S.Z)({baseUrl:j.default.domainBaseUrl,pageId:e.id,pageVisitSource:f.tY.SidebarTrash});C.navigateToExternalURL({environment:this.environment,url:t})}else C.navigateToBlock({environment:this.environment,store:e,pageVisitSource:f.tY.SidebarTrash}),p.Z.setState({...p.Z.state,open:!1});n.isMobile&&_.close()},render:t=>(0,Q.jsx)(V.Z,{...t,dontShrinkRight:!0,store:e,right:(0,Q.jsxs)("div",{style:{display:"flex"},children:[(0,Q.jsx)(W.Z,{placement:W.Z.Placement.Bottom,renderTooltip:()=>(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Restore",id:"sidebarTrash.restorePageButton.tooltip"}),render:t=>(0,Q.jsx)(L.Z,{isGray:!0,onClick:()=>this.handleRestoreClick(e),...t,children:(0,y.s)({width:18,height:18})})}),(0,Q.jsx)(W.Z,{placement:W.Z.Placement.Bottom,renderTooltip:()=>(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Delete permanently",id:"sidebarTrash.deletePagePermanentlyButton.tooltip"}),render:t=>(0,Q.jsx)(L.Z,{isGray:!0,onClick:()=>this.handleDeleteClick(e),...t,children:(0,M.y)({width:18,height:18})})})]})})})));return 0===a.length?(0,Q.jsx)(Y.Z,{children:n.isMobile?(0,Q.jsx)(D.Z,{title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"No matches found.",id:"sidebarTrash.mobileFilterBy.noMatchesPrompt"})}):(0,Q.jsx)("div",{style:{fontSize:14,color:this.theme.mediumTextColor,textAlign:"center"},children:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"No matches found.",id:"sidebarTrash.filterBy.noMatchesPrompt"})})}):(0,Q.jsxs)(i.Fragment,{children:[(0,Q.jsx)(E.Z,{type:E.i.Vertical,initialFocus:void 0,sections:[{key:0,items:a,render:e=>(0,Q.jsx)(Y.Z,{...e})}]}),(0,Q.jsx)(K.Z,{show:this.stores.requestStore.state.loading,showDelay:500,showHold:200,render:e=>{if(e)return(0,Q.jsx)("div",{style:{height:44,display:"flex",flex:1,alignItems:"center",justifyContent:"center"},children:(0,Q.jsx)(N.Z,{})})}}),(0,Q.jsx)(q.Z,{onChange:this.handleScrollOffsetChange})]})},this.handleSwipeLeft=()=>{const e=te.tabs.indexOf(h.Z.state.currentTab)+1,t=te.tabs[e];void 0!==t&&this.changeTab(t)},this.handleSwipeRight=()=>{const e=te.tabs.indexOf(h.Z.state.currentTab)-1,t=te.tabs[e];void 0!==t&&this.changeTab(t)},this.handleTabChange=e=>{const t=te.tabs[e];this.changeTab(t)},this.handleRestoreClick=e=>{const{currentSpaceStore:t}=u.default.state;t&&k.DV({environment:this.environment,block:e,spaceId:e.pointer.spaceId||t.id})},this.handleDeleteClick=e=>{k.Rn({environment:this.environment,blocks:[e]})},this.handleSearchInputChange=e=>{h.Z.setState({...h.Z.state,filter:e.target.value,limit:h.Z.startLimit})},this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{p.Z.setState({...p.Z.state,open:!1})};null!=e&&e.supportsNativeHomeOnPhone()?C.navigateToHomeTab(this.environment,t):t()},this.handleScrollOffsetChange=e=>{const{requestStore:t}=this.stores,{ready:n,loading:i,result:s}=t.state,r=s;e<=h.Z.loadMoreOffset&&r&&n&&!i&&!r.endOfResultsReached&&h.Z.setState({...h.Z.state,limit:h.Z.state.limit+h.Z.limitIncrement})},this.performSearchRequest=async e=>{const{currentSpaceStore:t,mainEditorCurrentBlockStore:n,currentUserStore:i}=u.default.state;if(!t||!n||!i)return;const{limit:s,filter:r,currentTab:o}=h.Z.state;let a,l;if("in_current_page"===o)if(n.isCollectionView()){if(!n.isDefined())return;const e=n.getCollectionPointer();if(!e)return;l=e.id}else l=n.id;else"last_edited_by_me"===o&&(a=i.id);return await T.bI({environment:this.environment,query:r,limit:s,ancestorId:l,spaceId:t.id,editedById:a})}}willMount(e){super.willMount(e),h.Z.setState({...h.Z.state,limit:h.Z.startLimit,excludePages:new Set})}willUnmount(){h.Z.setState({...h.Z.state,filter:""})}renderComponent(){const{mobileNative:e}=this.environment;return null!=e&&e.supportsNativeHomeOnPhone()?this.renderNativeHomeEnabledLayout():this.renderLayout()}renderLayout(){const{device:e}=this.environment;let t;return t=e.isMobile?{menuType:I.og.Modal,title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:(0,Q.jsx)(se,{}),right:(0,Q.jsx)(U.DoneMenuText,{}),onClickRight:this.handleClose,onCancel:this.handleClose,header:this.renderHeaderWithTabs()}:{menuType:I.og.Popup,height:"50vh",width:414,header:this.renderHeaderWithTabs(),footer:(0,Q.jsx)(ie,{})},(0,Q.jsx)(G.Z,{onSwipeLeft:this.handleSwipeLeft,onSwipeRight:this.handleSwipeRight,render:e=>(0,Q.jsx)(A.Z,{...t,...e,className:w.TYv,children:this.renderPages()})})}renderNativeHomeEnabledLayout(){const e={menuType:I.og.Modal,title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:(0,Q.jsx)(se,{}),right:(0,Q.jsx)(U.DoneMenuText,{}),onClickRight:this.handleClose,onCancel:this.handleClose,header:this.renderSearchInput()};return(0,Q.jsx)(A.Z,{...e,className:w.TYv,children:this.renderPages()})}renderHeaderWithTabs(){const{device:e}=this.environment,t=h.Z.state.currentTab,n=te.tabs.indexOf(t);return(0,Q.jsxs)(i.Fragment,{children:[(0,Q.jsx)(J.Z,{tabs:[(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"All pages",id:"sidebarTrash.allPages.tabHeader"},"allPages"),(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"In current page",id:"sidebarTrash.inCurrentPage.tabHeader"},"currentPage"),(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Last edited by me",id:"sidebarTrash.lastEditedByMe.tabHeader"},"lastEditedByMe")],selectedIndex:n,onChange:this.handleTabChange}),(0,Q.jsx)("div",{style:{margin:e.isMobile?0:"10px 0"},children:this.renderSearchInput()})]})}renderSearchInput(){const{device:e}=this.environment;return(0,Q.jsx)(F.ZP,{left:(0,Q.jsx)(K.Z,{show:this.stores.requestStore.state.loading,showDelay:500,showHold:200,render:e=>e?(0,Q.jsx)(N.Z,{style:this.getSearchIconStyle()}):(0,Z.R)(this.getSearchIconStyle())}),style:{...e.isAndroid&&{borderBottom:"none"}},showClearButton:!0,placeholder:B.default.formatMessage(ee.filterByPlaceholder),focus:!e.isMobile||void 0,value:h.Z.state.filter,onChange:this.handleSearchInputChange})}renderPages(){if(!O.Z.state.online)return(0,Q.jsx)(Y.Z,{children:(0,Q.jsx)(D.Z,{title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Please go online to view the Trash.",id:"sidebarTrash.goOnline.prompt"})})});{const{filter:e,limit:t,currentTab:n}=h.Z.state,i=`${e}:${t}${n}`;return(0,Q.jsx)(z.Z,{requestStore:this.stores.requestStore,request:i,performRequest:this.performSearchRequest,render:this.renderTrashPages,debounce:T.vp})}}changeTab(e){h.Z.setState({...h.Z.state,currentTab:e,limit:h.Z.startLimit}),this.stores.requestStore.setState({...this.stores.requestStore.state,result:null}),a.vqh(this.environment,{tab:e})}getSearchIconStyle(){return{width:14,height:14,flexGrow:0,flexShrink:0,color:this.theme.regularIconColor}}}te.displayName="SidebarTrash",te.tabs=["all_pages","in_current_page","last_edited_by_me"];const ne=te;function ie(){return(0,Q.jsx)(Y.Z,{topBorder:!0,disableDesktopPadding:!0,children:(0,Q.jsx)($.Z,{title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Learn about deleting and restoring pages",id:"sidebarTrash.learnMore.prompt"}),href:(0,P.UY)("guides.trash"),analyticsFrom:"trash"})})}function se(){return(0,Q.jsx)(X.Z,{href:(0,P.UY)("guides.trash"),analyticsFrom:"trash"})}class re extends s.Z{constructor(){super(...arguments),this.renderOrigin=e=>{const{onClick:t,...n}=(0,c.Z)(e,{onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave});return(0,Q.jsx)(b.Z,{store:this.clonedStore,canDropOnto:!0,onSelectableDrop:this.handleDrop,analyticsName:"sidebar_trash",shouldShowDropZone:!0,children:(0,Q.jsx)(m.Z,{...n,style:this.props.buttonStyle,onClick:t||this.handleClick,mobileFeedback:this.props.isMobile,children:(0,Q.jsx)(v.Z,{left:this.renderIcon(),style:{...p.Z.state.open&&{background:this.theme.buttonHoveredBackground}},disableMobileBorder:!0,children:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})})},this.renderSidebarTrash=()=>{const{currentSpaceStore:e}=u.default.state;if(e)return(0,Q.jsx)(ne,{spaceStore:e})},this.handleClick=e=>{h.Z.setState({...h.Z.state,currentTab:"all_pages"}),a.YFJ(this.environment)},this.handleDrop=e=>{const{droppedStores:t,duplicate:n}=e;n||d.createAndCommit({userAction:"SidebarTrashButton.handleDrop",environment:this.environment,perform:e=>{l.Cl({environment:this.environment,blocks:t,transaction:e})}})}}willMount(e){super.willMount(e),this.clonedStore=e.store.clone()}renderComponent(){const{device:e,mobileNative:t}=this.environment,n=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return(0,Q.jsx)(g.ZP,{popupType:e.isMobile?g.Z4.SlideUp:g.Z4.Popup,hidesMobileNativeBottomBar:n,preventSlideUpTransition:n,buttonPopupStore:p.Z,alignmentToOrigin:g.vR.Start,placementToOrigin:g.pO.Right,originGap:0,onClick:this.handleClick,isFullWidthOnMobile:!0,render:this.renderSidebarTrash,preventScaleTransition:!0,renderOrigin:this.renderOrigin})}renderIcon(){const{device:e}=this.environment,t=this.theme.mediumIconColor;return e.isMobile?(0,r.w)({fill:t,height:16}):(0,r.w)({fill:t,width:14})}}re.displayName="SidebarTrashButton";const oe=re},24553:(e,t,n)=>{n.d(t,{Z:()=>I});var i=n(67294),s=n(13991),r=n(480),o=n(6740),a=n(86628),l=n(24405),d=n(84169),c=n(88642),p=n(31412),h=n(50906),u=n(39634),m=n(24215),g=n(43250),b=n(79897),v=n(98742),f=n(77907),S=n(58455),Z=n(77080),M=n(475),y=n(16194),x=n(55031),C=n(64921),T=n(31945),k=n(26388),j=n(14694),w=n(85893);function B(e){window.__c={n:"HelpButtonOrigin"};const t=(0,r.O7)(),{isMobile:n}=t.device,s=(0,p.useIntl)(),c=(0,l.Fg)(),h=(0,a.VK)((()=>M.Z.state.open),[]),u=(0,l.yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),m=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o.E)(t)&&y.Z.setState(!0)}),[]),b=(0,i.useCallback)((()=>{y.Z.setState(!1)}),[]);if(n)return(0,w.jsx)(C.Z,{hovered:h,testId:g.lmr,mobileFeedback:n,...e,children:(0,w.jsx)(j.Z,{left:(0,d.m)(u.helpIcon),disableMobileBorder:!0,children:(0,w.jsx)(p.FormattedMessage,{defaultMessage:"Help & feedback",id:"helpButton.mobileHelpFeedbackButton.label"})})});const f=s.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),S=(0,v.Z)(e,{onFocus:m,onBlur:b});return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(k.Z,{renderTooltip:()=>(0,w.jsx)("span",{children:(0,w.jsx)(p.FormattedMessage,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,w.jsx)("br",{})}})}),render:e=>(0,w.jsx)(C.Z,{ariaLabel:f,className:g.lmr,testId:g.lmr,style:(0,x.y)(t,{theme:c,rightEdgeDistance:16,isInPeekRenderer:!1}),hoveredStyle:u.hoveredStyle,pressedStyle:u.pressedStyle,...(0,v.Z)(S,e),children:"?"})})})}const I=(0,p.injectIntl)((function(){window.__c={n:"HelpButton"};const e=(0,r.O7)(),{isMobile:t}=e.device,n=(0,a.VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),o=(0,i.useCallback)((()=>{h.Ar6(e);const t=S.default.state;if((0,m.Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:n,isSalesAssistedPlan:i}=(0,b.r)(e);c.j({locale:s.SP,analyticsSettings:t,isForethoughtEnabled:Z.default.checkGate("forethought"),forethoughtInitializeArgs:u.z(),userHighestPlanType:n,isSalesAssistedPlan:i})}}),[e]);return(0,w.jsx)(T.ZP,{popupType:t?T.Z4.SlideUp:T.Z4.Popup,hidesMobileNativeBottomBar:n,preventSlideUpTransition:n,renderOrigin:e=>(0,w.jsx)(B,{...e}),originGap:t?0:12,placementToOrigin:t?T.pO.Right:T.pO.Top,alignmentToOrigin:t?T.vR.Center:T.vR.End,buttonPopupStore:M.Z,onClick:o,render:()=>(0,w.jsx)(f.LazyHelpButtonContent,{shouldRenderAsStaticModal:n})})}))},53610:(e,t,n)=>{n.d(t,{Z:()=>i});const i=new(n(61766).Z)},97107:(e,t,n)=>{n.d(t,{w:()=>r});n(67294);var i=n(45238),s=n(85893);const r=(0,i.I)("sidebarTrash",{viewBox:"0 0 14 14",svg:(0,s.jsx)("path",{d:"M13.5000308,3.23952 C13.5000308,4.55848168 11.9230308,12.0493 11.9230308,12.0782 C11.9230308,12.6571 9.73825083,14 7.04165083,14 C4.34504083,14 2.16025083,12.6571 2.16025083,12.0782 C2.16025083,12.0541 0.5,4.55799105 0.5,3.23952 C0.5,1.91780104 3.02713083,0 7.03525083,0 C11.0433308,0 13.5000308,1.9178004 13.5000308,3.23952 Z M7,2 C3.625,2 2.5,3.25 2.5,4 C2.5,4.75 3.625,6 7,6 C10.375,6 11.5,4.75 11.5,4 C11.5,3.25 10.375,2 7,2 Z"})})},78197:(e,t,n)=>{n.d(t,{S:()=>r});n(67294);var i=n(45238),s=n(85893);const r=(0,i.I)("teamSize",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7.333 14.667a4.667 4.667 0 1 0 0-9.334 4.667 4.667 0 0 0 0 9.334zm4.356-.548A5.977 5.977 0 0 1 7.333 16a5.977 5.977 0 0 1-4.355-1.881A7.295 7.295 0 0 0 0 20h14.667a7.296 7.296 0 0 0-2.978-5.881zm1.599-4.832a4.664 4.664 0 1 0-5.242-5.241 6.01 6.01 0 0 1 5.242 5.241zm.003 1.347a6.024 6.024 0 0 1-.794 2.414 8.571 8.571 0 0 1 1.656 1.619H20a7.296 7.296 0 0 0-2.978-5.882 5.983 5.983 0 0 1-3.731 1.849z"})})}}]);