"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4360],{42253:(e,t,n)=>{n.d(t,{K:()=>p});n(21703);var a=n(7406),r=n(84116),o=n(73152),i=n(47218);const s=new RegExp(/\\([\\nt"])/g);function u(e){return e.find((e=>void 0!==e&&!isNaN(e)))}function p(e){const t=function(){const e=(0,o.XR)(),t=(0,o.Z8)(e).getBaseCstVisitorConstructor();return new class extends t{constructor(){super(),this.validateVisitor()}expression(e){return this.visit(e.conditionalExpression)}primaryExpression(e){if(void 0!==e.parenthesisExpression)return this.visit(e.parenthesisExpression);if(void 0!==e.arrayExpression)return this.visit(e.arrayExpression);if(void 0!==e.NumberLiteral)return{kind:i.bG.Number,text:e.NumberLiteral[0].image,startOffset:e.NumberLiteral[0].startOffset,endOffset:e.NumberLiteral[0].endOffset};if(void 0!==e.StringLiteral){const t=e.StringLiteral[0].image.slice(1,-1).replace(s,((e,t)=>{switch(t){case"n":return"\n";case"t":return"\t";default:return t}}));return{kind:i.bG.String,text:t,startOffset:e.StringLiteral[0].startOffset,endOffset:e.StringLiteral[0].endOffset}}return void 0!==e.UnclosedStringLiteral?{kind:i.bG.String,text:e.UnclosedStringLiteral[0].image.substring(1,e.UnclosedStringLiteral[0].image.length),startOffset:e.UnclosedStringLiteral[0].startOffset,endOffset:e.UnclosedStringLiteral[0].endOffset}:void 0!==e.BooleanLiteral?{kind:i.bG.Boolean,text:e.BooleanLiteral[0].image,startOffset:e.BooleanLiteral[0].startOffset,endOffset:e.BooleanLiteral[0].endOffset}:void 0!==e.InputToken?{kind:i.bG.NotionToken,token:e.InputToken[0].payload,startOffset:e.InputToken[0].startOffset,endOffset:e.InputToken[0].endOffset}:void 0!==e.IdentifierName?{kind:i.bG.Identifier,text:e.IdentifierName[0].image,startOffset:e.IdentifierName[0].startOffset,endOffset:e.IdentifierName[0].endOffset}:{kind:i.bG.RecoveryNode,startOffset:-1,endOffset:-1}}conditionalExpression(e){const t=this.visit(e.condition[0]);var n,a,r,o;return void 0!==e.QuestionMark?{kind:i.bG.Conditional,condition:t,expIfTrue:this.visit(e.expIfTrue[0]),expIfFalse:void 0!==(null===(n=e.expIfFalse)||void 0===n?void 0:n[0])?this.visit(e.expIfFalse[0]):void 0,startOffset:e.condition[0].location.startOffset,endOffset:u([null===(a=e.expIfFalse)||void 0===a||null===(a=a[0].location)||void 0===a?void 0:a.endOffset,null===(r=e.Colon)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.endOffset,null===(o=e.expIfTrue[0].location)||void 0===o?void 0:o.endOffset,e.QuestionMark[0].endOffset])}:t}logicalOrExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.Or){var n,a;const r=(null===(n=e.rhs)||void 0===n?void 0:n.map((e=>this.visit(e))))??[];return{kind:i.bG.LogicalOr,elements:[t,...r],startOffset:e.lhs[0].location.startOffset,endOffset:u([null===(a=e.rhs)||void 0===a||null===(a=a[e.rhs.length-1])||void 0===a||null===(a=a.location)||void 0===a?void 0:a.endOffset,e.Or[0].endOffset])}}return t}logicalAndExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.And){var n,a;const r=(null===(n=e.rhs)||void 0===n?void 0:n.map((e=>this.visit(e))))??[];return{kind:i.bG.LogicalAnd,elements:[t,...r],startOffset:e.lhs[0].location.startOffset,endOffset:u([null===(a=e.rhs)||void 0===a||null===(a=a[e.rhs.length-1])||void 0===a||null===(a=a.location)||void 0===a?void 0:a.endOffset,e.And[0].endOffset])}}return t}equalityExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.EqualityOperator){var n;const a=e.rhs[0];return{kind:i.bG.Equality,op:e.EqualityOperator[0].image,lhs:t,rhs:this.visit(a),startOffset:e.lhs[0].location.startOffset,endOffset:u([null===(n=a.location)||void 0===n?void 0:n.endOffset,e.EqualityOperator[0].endOffset])}}return t}relationalExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.RelationalOperator){var n;const a=e.rhs[0];return{kind:i.bG.Relational,op:e.RelationalOperator[0].image,lhs:t,rhs:this.visit(a),startOffset:e.lhs[0].location.startOffset,endOffset:u([null===(n=a.location)||void 0===n?void 0:n.endOffset,e.RelationalOperator[0].endOffset])}}return t}additionExpression(e){let t=this.visit(e.lhs[0]);if(void 0!==e.AdditionOperator)for(let a=0;a<e.AdditionOperator.length;a++){var n;const r=e.rhs[a];t={kind:i.bG.Additive,op:e.AdditionOperator[a].image,lhs:t,rhs:this.visit(r),startOffset:e.lhs[0].location.startOffset,endOffset:u([null===(n=r.location)||void 0===n?void 0:n.endOffset,e.AdditionOperator[a].endOffset])}}return t}multiplicationExpression(e){let t=this.visit(e.lhs[0]);if(void 0!==e.MultiplicationOperator)for(let a=0;a<e.MultiplicationOperator.length;a++){var n;const r=e.rhs[a];t={kind:i.bG.Multiplicative,op:e.MultiplicationOperator[a].image,lhs:t,rhs:this.visit(r),startOffset:e.lhs[0].location.startOffset,endOffset:u([null===(n=r.location)||void 0===n?void 0:n.endOffset,e.MultiplicationOperator[a].endOffset])}}return t}exponentiationExpression(e){let t;const n=this.visit(e.lhs[0]);if(void 0!==e.Caret){var a;const r=e.Caret.length-1;let o,s=null===(a=e.rhs[r].location)||void 0===a?void 0:a.endOffset;(void 0===s||isNaN(s))&&(s=e.Caret[r].endOffset);for(let n=e.Caret.length-1;n>=0;n--){const a=e.rhs[n];t=void 0===o?this.visit(a):{kind:i.bG.Exponentiation,op:o,lhs:this.visit(a),rhs:t,startOffset:a.location.startOffset,endOffset:s},o=e.Caret[n].image}return{kind:i.bG.Exponentiation,op:o,lhs:n,rhs:t,startOffset:e.lhs[0].location.startOffset,endOffset:s}}return n}unaryExpression(e){let t=this.visit(e.primaryExpression[0]),n=e.primaryExpression[0].location.startOffset;const a=void 0!==e.UnaryOperator&&"-"===e.UnaryOperator[0].image&&t.kind===i.bG.Number;var o;if(a&&(t={kind:i.bG.Unary,op:e.UnaryOperator[0].image.toLowerCase(),expression:t,startOffset:e.UnaryOperator[0].startOffset,endOffset:t.endOffset}),isNaN(n)&&(n=null===(o=e.memberCallSubExpression)||void 0===o?void 0:o[0].location.startOffset),void 0!==e.memberCallSubExpression)for(const l of e.memberCallSubExpression){const e=l.location.endOffset;if(void 0!==l.children.callArguments){var s,u,p;const a=l.children.callArguments[0].children;t={kind:i.bG.Call,expression:t,arguments:(null===(s=l.children.callArguments[0])||void 0===s||null===(s=s.children.expression)||void 0===s?void 0:s.map((e=>this.visit(e))))??[],lParenOffset:a.LParen[0].startOffset,rParenOffset:null===(u=a.RParen)||void 0===u?void 0:u[0].startOffset,commaOffsets:(null===(p=a.Comma)||void 0===p?void 0:p.map((e=>e.startOffset)))??[],startOffset:n,endOffset:e}}else if(void 0!==l.children.dotMemberExpression){const a=l.children.dotMemberExpression[0].children;if(void 0!==a.IdentifierName){const r=a.IdentifierName[0];t={kind:i.bG.UnifiedFunctionProperty,expression:t,name:r.image,nameStartOffset:r.startOffset,nameEndOffset:r.endOffset,startOffset:n,endOffset:e}}else if(void 0!==a.InputToken){const o=a.InputToken[0],s=o.payload;switch(s.type){case r.Oy.BlockProperty:t={kind:i.bG.MemberBlockProperty,expression:t,propertyToken:void 0===s.collection?{property:s.property,collection:void 0}:{property:s.property,collection:s.collection},propertyStartOffset:o.startOffset,propertyEndOffset:o.endOffset,startOffset:n,endOffset:e}}}}}return void 0===e.UnaryOperator||a?t:{kind:i.bG.Unary,op:e.UnaryOperator[0].image.toLowerCase().trimEnd(),expression:t,startOffset:e.UnaryOperator[0].startOffset,endOffset:t.endOffset}}parenthesisExpression(e){return this.visit(e.expression[0])}arrayExpression(e){var t,n,a,r,o;return{kind:i.bG.Array,elements:(null===(t=e.expression)||void 0===t?void 0:t.map((e=>this.visit(e))))??[],lBracketOffset:e.LBracket[0].startOffset,rBracketOffset:null===(n=e.RBracket)||void 0===n?void 0:n[0].startOffset,commaOffsets:(null===(a=e.Comma)||void 0===a?void 0:a.map((e=>e.startOffset)))??[],startOffset:e.LBracket[0].startOffset,endOffset:u([null===(r=e.RBracket)||void 0===r?void 0:r[0].endOffset,null===(o=e.expression)||void 0===o||null===(o=o[e.expression.length-1])||void 0===o||null===(o=o.location)||void 0===o?void 0:o.endOffset,e.LBracket[0].endOffset])}}memberCallSubExpression(e){throw new Error("unexpected memberCallSubExpression")}dotMemberExpression(e){throw new Error("unexpected dotMemberExpression")}callArguments(e){throw new Error("unexpected callArguments")}}}();try{return{value:t.visit(e)}}catch(n){return{error:{type:i.$E.UnexpectedError,error:(0,a.tg)(n),offset:0}}}}},23790:(e,t,n)=>{n.d(t,{Jy:()=>s,qT:()=>r,uy:()=>i,xK:()=>o});var a=n(606);function r(e,t){return Array.isArray(t)?t.some((t=>r(e,t))):"unknown"===e.type||"unknown"===t.type||"expression"===t.type||e.type===t.type&&("block"===e.type||"select"===e.type||"function"===e.type?s(e,t):"array"!==e.type||"array"!==t.type||r(e.of,t.of))}function o(e,t){return!!r(e,t)||(r({type:"checkbox"},t)?{type:"checkbox"}:!!r({type:"text"},t)&&{type:"text"})}function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=n?s:(e,t)=>e.type===t.type;return a(e,t)||"array"===e.type&&a(e.of,t)}function s(e,t){return e.type===t.type&&("block"===e.type&&"block"===t.type?void 0===e.collection?void 0===t.collection:void 0!==t.collection&&(0,a.qo)(e.collection,t.collection):"select"===e.type&&"select"===t.type?(0,a.qo)(e.collection,t.collection)&&e.property===t.property:"array"===e.type&&"array"===t.type?s(e.of,t.of):"function"!==e.type||"function"!==t.type||e.libraryFunction===t.libraryFunction&&void 0!==e.boundTargetType==(void 0!==t.boundTargetType))}},21114:(e,t,n)=>{n.d(t,{FR:()=>y,OY:()=>c,ic:()=>d,sB:()=>l,sG:()=>p,y_:()=>m});var a=n(72126),r=n(97880),o=n(68602),i=n(47218),s=n(78106);function u(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,r.t1)(e)}}function p(e){switch(e.type){case i.$E.InvalidCharacter:return{...o.mr.InvalidCharacter,values:{errorCharacter:e.character}};case i.$E.UnclosedStringLiteral:return o.mr.UnclosedStringLiteral;case i.$E.UnclosedComment:return o.mr.UnclosedComment;case i.$E.TokenExpected:return{...o.mr.TokenExpected,values:{expectedToken:e.token}};case i.$E.StringLiteralContainsToken:return o.mr.StringLiteralContainsToken;case i.$E.ExpressionExpected:return o.mr.ExpressionExpected;case i.$E.PropertyTokenOrFunctionExpected:return o.mr.PropertyExpected;case i.$E.EndOfInputExpected:return o.mr.EndOfInputExpected;case i.$E.UnexpectedError:return o.mr.UnexpectedError;default:(0,r.t1)(e)}}function l(e){switch(e.type){case i.h4.FunctionCallArgumentWrongType:case i.h4.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function d(e){let t;switch(e.type){case i.h4.ThisRowTypeNotFound:t=o.o8.ThisRowTypeNotFound;break;case i.h4.ThisRowNotBlockWithCollection:t=o.o8.ThisRowNotBlockWithCollection;break;case i.h4.MissingPropertyOnThisRow:t={...o.o8.MissingPropertyOnThisRow,values:{propertyName:e.property}};break;case i.h4.MissingContextVariable:t={...o.o8.MissingContextVariable,values:{valueId:e.token.valueId}};break;case i.h4.MissingBlock:t={...o.o8.MissingBlock,values:{blockId:e.token.blockId}};break;case i.h4.CallingNotFunction:t={...o.o8.CallingNotFunction,values:{expressionType:u(e.callee.type.type)}};break;case i.h4.FunctionCallTooFewArguments:t={...o.o8.FunctionCallTooFewArguments,values:{minNumParameters:e.minNumParameters,functionName:e.libraryFunction.name,numArguments:e.numArguments}};break;case i.h4.FunctionCallUnexpectedArgument:t={...o.o8.FunctionCallUnexpectedArgument,values:{functionName:e.libraryFunction.name}};break;case i.h4.FunctionCallArgumentWrongType:t={...o.o8.FunctionCallArgumentWrongType,values:{argumentType:u(e.argument.type.type),functionName:e.libraryFunction.name}};break;case i.h4.MemberPropertyMismatchCollection:t={...o.o8.MemberPropertyMismatchCollection,values:{propertyName:e.token.property}};break;case i.h4.MemberPropertyMissing:t={...o.o8.MemberPropertyMissing,values:{propertyName:e.property}};break;case i.h4.MemberPropertyTargetNotBlock:t=o.o8.MemberPropertyTargetNotBlock;break;case i.h4.MemberPropertyTypeInvalid:t={...o.o8.MemberPropertyTypeInvalid,values:{propertyName:e.propertyName,propertyType:e.propertyType}};break;case i.h4.UndefinedIdentifier:t={...o.o8.UndefinedIdentifier,values:{identifier:e.node.text}};break;case i.h4.UnifiedFunctionCannotFindFunction:t={...o.o8.UnifiedFunctionCannotFindFunction,values:{functionName:e.name}};break;case i.h4.UnifiedFunctionNoArguments:t={...o.o8.UnifiedFunctionNoArguments,values:{functionName:e.libraryFunction.name}};break;case i.h4.UnifiedFunctionTargetWrongType:t={...o.o8.UnifiedFunctionTargetWrongType,values:{functionName:e.libraryFunction.name,targetType:u(e.expression.type.type)}};break;case i.h4.CannotRelativelyCompareTypes:t={...o.o8.CannotRelativelyCompareTypes,values:{lhsType:u(e.lhsType.type),rhsType:u(e.rhsType.type)}};break;case i.h4.CannotDoMathOnType:t={...o.o8.CannotDoMathOnType,values:{lhsType:u(e.lhsType.type),rhsType:u(e.rhsType.type)}};break;case i.h4.UnaryMinusOnNonNumber:t={...o.o8.UnaryMinusOnNonNumber,values:{type:u(e.expression.type.type)}};break;case i.h4.CircularDependency:t=o.o8.CircularDependency;break;case i.h4.IdentifierExpected:t=o.o8.IdentifierExpected;break;case i.h4.FunctionCallExpected:t={...o.o8.FunctionCallExpected,values:{functionName:e.functionName}};break;case i.h4.RenamedIdentifier:t={...o.o8.RenamedIdentifier,values:{identifier:e.identifier,renamedTo:e.renamedTo}};break;case i.h4.RemovedFunction:t={...o.o8.RemovedFunction,values:{functionName:e.functionName,alternative:e.alternative}};break;default:(0,r.t1)(e)}return{...t,values:{...t.values,startOffset:e.node.startOffset,endOffset:e.node.endOffset+1}}}function c(e){let t;switch(e.type){case i.FY.MissingThisRow:t=o.YG.MissingThisRow;break;case i.FY.MissingSchemaPropertyOnThisRow:t={...o.YG.MissingSchemaPropertyOnThisRow,values:{propertyName:e.property}};break;case i.FY.ThisRowBlockPropertyMismatchCollection:t=o.YG.ThisRowBlockPropertyMismatchCollection;break;case i.FY.MissingContextVariable:t={...o.YG.MissingContextVariable,values:{valueId:e.valueId}};break;case i.FY.IdentifierNotFound:t={...o.YG.IdentifierNotFound,values:{identifier:e.node.text}};break;case i.FY.CannotRelativelyCompareTypes:t={...o.YG.CannotRelativelyCompareTypes,values:{lhsType:u(e.lhsType),rhsType:u(e.rhsType)}};break;case i.FY.CannotDoMathOnType:t={...o.YG.CannotDoMathOnType,values:{valueType:u(e.valueType)}};break;case i.FY.CannotCallNonFunction:t={...o.YG.CannotCallNonFunction,values:{calleeType:u(e.calleeType)}};break;case i.FY.UnifiedFunctionPropertyNotFound:t={...o.YG.UnifiedFunctionPropertyNotFound,values:{functionName:e.node.name}};break;case i.FY.LibraryFunctionExecutionError:t={...o.YG.LibraryFunctionExecutionError,values:{functionName:e.libraryFunction.name}};break;case i.FY.FunctionCallTooFewArguments:t={...o.YG.FunctionCallTooFewArguments,values:{functionName:e.libraryFunction.name}};break;case i.FY.FunctionCallUnexpectedArgument:t={...o.YG.FunctionCallUnexpectedArgument,values:{functionName:e.libraryFunction.name}};break;case i.FY.FunctionCallArgumentWrongType:t={...o.YG.FunctionCallArgumentWrongType,values:{functionName:e.libraryFunction.name,argumentType:u(e.argumentType)}};break;case i.FY.AccessingPropertyOnNonBlock:t=o.YG.AccessingPropertyOnNonBlock;break;case i.FY.MissingDataDependencyBlock:t={...o.YG.MissingDataDependencyBlock,values:{blockId:e.blockPointer.id}};break;case i.FY.MissingDataDependencyPerson:t={...o.YG.MissingDataDependencyPerson,values:{personId:e.personPointer.id}};break;case i.FY.MemberPropertyMismatchCollection:t=o.YG.MemberPropertyMismatchCollection;break;case i.FY.MissingPropertyOnSchemaForMemberProperty:t=o.YG.MissingPropertyOnSchemaForMemberProperty;break;case i.FY.UnaryMinusOnNonNumber:t={...o.YG.UnaryMinusOnNonNumber,values:{expressionType:u(e.expressionType)}};break;case i.FY.UnexpectedRecoveryNode:t=o.YG.UnexpectedRecoveryNode;break;case i.FY.UnexpectedError:t=o.YG.UnexpectedError;break;case i.FY.DepthExceeded:t=o.YG.DepthExceeded;break;case i.FY.CycleDetected:t=o.YG.CycleDetected;break;case i.FY.MaxEvaluationTimeExceeded:t=o.YG.MaxEvaluationTimeExceeded;break;default:(0,r.t1)(e)}return(0,s.w7)(e)?{...t,values:{...t.values,startOffset:e.node.startOffset,endOffset:e.node.endOffset+1}}:t}function y(e){const t=null==e?void 0:e.values;return[a.CE(e,"values"),t]}function m(e){return e.type===i.FY.DepthExceeded||e.type===i.FY.CycleDetected||e.type===i.FY.MaxEvaluationTimeExceeded}},33063:(e,t,n)=>{n.d(t,{kg:()=>R,u6:()=>P,vW:()=>D});var a=n(90559),r=n(80951),o=n(34299),i=n(60246),s=n(56373),u=n(7406),p=n(72126),l=n(29477),d=n(606),c=n(68626),y=n(21202),m=n(6287),f=n(19889),h=n(70203),v=n(97880),b=n(84682),x=n(42253),g=n(84116),T=n(21027),k=n(51849),M=n(32620),E=n(47218),w=n(78106),C=n(83158);const O=3e5;function N(e,t,n){if("number"!==t.type&&"undefined"!==t.type)throw new E.WV({type:E.FY.CannotDoMathOnType,op:n,operand:e,valueType:t.type})}function*D(e,t){if(t.depth>7)throw new E.WV({type:E.FY.DepthExceeded});if(t.formulaTimeoutTimestampMs&&Date.now()>t.formulaTimeoutTimestampMs)throw t.logFormulaTimeoutFn&&t.logFormulaTimeoutFn(),new E.WV({type:E.FY.MaxEvaluationTimeExceeded});switch(e.kind){case E.bG.Number:return{type:"number",value:parseFloat(e.text)};case E.bG.String:return{type:"text",value:[[e.text]]};case E.bG.Boolean:return{type:"checkbox",value:"true"===e.text.toLowerCase()};case E.bG.NotionToken:{const a=e.token;switch(a.type){case g.Oy.Checkbox:return{type:"checkbox",value:a.checked};case g.Oy.BlockProperty:{const n=t.values.find((e=>e.kind===g.yp.ThisRow));if("block"!==(null==n?void 0:n.value.type))throw new E.WV({type:E.FY.MissingThisRow,node:e});const r=n.value.value,o=(yield{recordPointers:[r]}).getRecordModel(r);if(void 0===o)throw new E.WV({type:E.FY.MissingThisRow,node:e});if(void 0===a.collection)return(0,w.SQ)(o,a.property);const i=(0,w.SR)(a.property),s={table:m.v,id:o.getParentId(),spaceId:o.getSpaceId()};if(!(0,d.qo)(a.collection,s))throw new E.WV({type:E.FY.ThisRowBlockPropertyMismatchCollection,node:e,thisRowCollection:s});const u=(yield{recordPointers:[s]}).getRecordModel(s),p=null==u?void 0:u.getNormalizedSchema(),l=null==p?void 0:p[i];if(void 0===l||void 0===p)throw new E.WV({type:E.FY.MissingSchemaPropertyOnThisRow,node:e,collectionId:o.getParentId(),property:i});return yield*L(o,i,p,l,t)}case g.Oy.Block:return{type:"block",value:{table:y.iU,id:a.blockId,spaceId:a.spaceId}};case g.Oy.ContextValue:{var n;const r=null===(n=t.values.find((e=>e.kind===g.yp.ContextValue&&e.id===(0,w.Kv)(a.valueId))))||void 0===n?void 0:n.value;if(void 0===r)throw new E.WV({type:E.FY.MissingContextVariable,node:e,valueId:a.valueId});return r}case g.Oy.Date:return{type:"date",value:a.date};case g.Oy.Person:return{type:"person",value:{table:f.KJ,id:a.userId}};default:return(0,v.t1)(a)}}case E.bG.Identifier:{var a;const n=null===(a=t.values.find((t=>t.kind===g.yp.Binding&&t.id===e.text)))||void 0===a?void 0:a.value;if(void 0!==n)return n;if(e.text in M.Vr)return{type:"function",function:M.Vr[e.text]};throw new E.WV({type:E.FY.IdentifierNotFound,node:e})}case E.bG.Array:return{type:"array",values:yield*(0,w.LD)(e.elements.map((e=>D(e,t))))};case E.bG.Conditional:{const n=yield*D(e.condition,t);return(0,w.vh)(n)?yield*D(e.expIfTrue,t):yield*D(e.expIfFalse,t)}case E.bG.LogicalOr:return{type:"checkbox",value:(yield*(0,w.LD)(e.elements.map((e=>D(e,t))))).map(w.vh).some((e=>e))};case E.bG.LogicalAnd:return{type:"checkbox",value:(yield*(0,w.LD)(e.elements.map((e=>D(e,t))))).map(w.vh).every((e=>e))};case E.bG.Equality:{const[n,a]=yield*(0,w.LD)([D(e.lhs,t),D(e.rhs,t)]),r=yield*(0,w.Jr)(n,a,t),o=e.op;switch(o){case"==":return{type:"checkbox",value:r};case"!=":return{type:"checkbox",value:!r};default:return(0,v.t1)(o)}}case E.bG.Relational:{const[n,a]=yield*(0,w.LD)([D(e.lhs,t),D(e.rhs,t)]);if("undefined"===n.type||"undefined"===a.type)return{type:"checkbox",value:!1};if("date"===n.type&&"date"===a.type){const r=(0,w.SU)(n.value,a.value,t.userTimeZone);switch(e.op){case"<":return{type:"checkbox",value:r<0};case"<=":return{type:"checkbox",value:r<=0};case">":return{type:"checkbox",value:r>0};case">=":return{type:"checkbox",value:r>=0}}}if("text"===n.type&&"text"===a.type){const[r,o]=yield*(0,w.LD)([(0,w.PX)(n.value,t),(0,w.PX)(a.value,t)]);switch(e.op){case"<":return{type:"checkbox",value:r<o};case"<=":return{type:"checkbox",value:r<=o};case">":return{type:"checkbox",value:r>o};case">=":return{type:"checkbox",value:r>=o}}}if("number"===n.type&&"number"===a.type||"checkbox"===n.type&&"checkbox"===a.type)switch(e.op){case"<":return{type:"checkbox",value:n.value<a.value};case"<=":return{type:"checkbox",value:n.value<=a.value};case">":return{type:"checkbox",value:n.value>a.value};case">=":return{type:"checkbox",value:n.value>=a.value}}throw new E.WV({type:E.FY.CannotRelativelyCompareTypes,lhs:e.lhs,rhs:e.rhs,lhsType:n.type,rhsType:a.type})}case E.bG.Additive:{let[n,a]=yield*(0,w.LD)([D(e.lhs,t),D(e.rhs,t)]);if("undefined"===n.type&&"undefined"===a.type)return{type:"number",value:0};switch("undefined"===n.type&&"number"===a.type?n={type:"number",value:0}:"undefined"===a.type&&"number"===n.type&&(a={type:"number",value:0}),e.op){case"+":return"number"===n.type&&"number"===a.type?{type:"number",value:n.value+a.value}:{type:"text",value:(0,h.Zxt)((0,w.j4)(n).concat((0,w.j4)(a)))};case"-":if(N(e.lhs,n,e.op),N(e.rhs,a,e.op),"number"===n.type&&"number"===a.type)return{type:"number",value:n.value-a.value}}return{type:"undefined"}}case E.bG.Multiplicative:{let[n,a]=yield*(0,w.LD)([D(e.lhs,t),D(e.rhs,t)]);if(N(e.lhs,n,e.op),N(e.rhs,a,e.op),"undefined"===n.type&&"undefined"===a.type)return{type:"number",value:0};switch("undefined"===n.type&&"number"===a.type?n={type:"number",value:0}:"undefined"===a.type&&"number"===n.type&&(a={type:"number",value:0}),e.op){case"*":if("number"===n.type&&"number"===a.type)return{type:"number",value:n.value*a.value};break;case"/":if("number"===n.type&&"number"===a.type)return 0===a.value?{type:"undefined"}:{type:"number",value:n.value/a.value};break;case"%":if("number"===n.type&&"number"===a.type)return{type:"number",value:n.value%a.value}}return{type:"undefined"}}case E.bG.Exponentiation:{const[n,a]=yield*(0,w.LD)([D(e.lhs,t),D(e.rhs,t)]);switch(N(e.lhs,n,e.op),N(e.rhs,a,e.op),e.op){case"^":if("number"===n.type&&"number"===a.type)return{type:"number",value:n.value**a.value}}return{type:"undefined"}}case E.bG.Unary:{const n=yield*D(e.expression,t),a=e.op;switch(a){case"-":if("number"!==n.type)throw new E.WV({type:E.FY.UnaryMinusOnNonNumber,node:e.expression,expressionType:n.type});return{type:"number",value:-n.value};case"!":case"not":return{type:"checkbox",value:!(0,w.vh)(n)};default:return(0,v.t1)(a)}}case E.bG.Call:{const n=yield*D(e.expression,t);if("function"!==n.type)throw new E.WV({type:E.FY.CannotCallNonFunction,node:e,calleeType:n.type});const a=n.function,o=(0,w.P2)(a),i=void 0!==n.boundTarget?[n.boundTarget,...e.arguments]:e.arguments;if(i.length<o)throw new E.WV({type:E.FY.FunctionCallTooFewArguments,node:e,libraryFunction:a,numArguments:i.length});const s=yield*(0,w.LD)(i.map(((n,r)=>function*(e,t,n,a,r){const o=(0,w.J3)(a,n);if(void 0===o)throw new E.WV({type:E.FY.FunctionCallUnexpectedArgument,node:e,argument:t,libraryFunction:a,parameterIndex:n});if(!Array.isArray(o.type)&&"expression"===o.type.type)return t;const i=yield*D(t,r);if(!(0,w.mB)(i,o.type)){if(Array.isArray(o.type)?o.type.some((e=>"checkbox"===e.type)):"checkbox"===o.type.type)return{type:"checkbox",value:(0,w.vh)(i)};if(Array.isArray(o.type)?o.type.some((e=>"text"===e.type)):"text"===(0,w.B8)(o.type).type)return"array"===i.type&&(Array.isArray(o.type)?o.type.some((e=>"array"===e.type)):"array"===o.type.type)?{type:"array",values:i.values.map((e=>({type:"text",value:(0,w.j4)(e)})))}:"array"===i.type&&0===i.values.length?{type:"text",value:[[""]]}:{type:"text",value:(0,w.j4)(i)};if(!g.zq.includes(a.name))throw new E.WV({type:E.FY.FunctionCallArgumentWrongType,node:e,argument:t,libraryFunction:a,parameterIndex:n,argumentType:i.type})}return i}(e,n,r,a,t))));try{return yield*a.eval(s,t)}catch(r){throw new E.WV({type:E.FY.LibraryFunctionExecutionError,node:e,libraryFunction:a,error:r})}}case E.bG.UnifiedFunctionProperty:if(e.name in M.Vr)return{type:"function",function:M.Vr[e.name],boundTarget:e.expression};throw new E.WV({type:E.FY.UnifiedFunctionPropertyNotFound,node:e});case E.bG.MemberBlockProperty:{const n=yield*D(e.expression,t);if("undefined"===n.type)return{type:"undefined"};if("block"!==n.type)throw new E.WV({type:E.FY.AccessingPropertyOnNonBlock,node:e,expressionValue:n});const a=(yield{recordPointers:[n.value]}).getRecordModel(n.value);if(void 0===a)throw new E.WV({type:E.FY.MissingDataDependencyBlock,node:e,blockPointer:n.value});if(void 0===e.propertyToken.collection)return(0,w.SQ)(a,e.propertyToken.property);const r={table:m.v,id:a.getParentId(),spaceId:a.getSpaceId()},o=(0,w.SR)(e.propertyToken.property);if(!(0,d.qo)(e.propertyToken.collection,r))throw new E.WV({type:E.FY.MemberPropertyMismatchCollection,node:e,blockCollection:r});const i=(yield{recordPointers:[r]}).getRecordModel(r),s=null==i?void 0:i.getNormalizedSchema(),u=null==s?void 0:s[o];if(void 0===u||void 0===s)throw new E.WV({type:E.FY.MissingPropertyOnSchemaForMemberProperty,node:e});return yield*L(a,o,s,u,t)}case E.bG.RecoveryNode:throw new E.WV({type:E.FY.UnexpectedRecoveryNode,recovery:e});default:(0,v.t1)(e)}}function P(e,t,n){try{t.formulaTimeoutTimestampMs=t.formulaTimeoutTimestampMs??Date.now()+O;const n=D(e,t);let a=n.next();for(;!a.done;){const e=t.handleDataRequest(a.value);a=n.next(e)}return{value:a.value}}catch(a){if(a instanceof E.WV){const e=a.info;return n&&(0,w.w7)(e)?{error:{...e,node:(0,k.tE)(e.node,n)}}:{error:e}}return{error:{type:E.FY.UnexpectedError,error:(0,u.tg)(a)}}}}async function R(e,t,n){try{t.formulaTimeoutTimestampMs=t.formulaTimeoutTimestampMs??Date.now()+O;const n=D(e,t);let a=n.next();for(;!a.done;){const e=t.handleDataRequest(a.value);a=n.next((0,l.tI)(e)?await e:e)}return{value:a.value}}catch(a){if(a instanceof E.WV){const e=a.info;return n&&(0,w.w7)(e)?{error:{...e,node:(0,k.tE)(e.node,n)}}:{error:e}}return{error:{type:E.FY.UnexpectedError,error:(0,u.tg)(a)}}}}function*L(e,t,n,u,l){const d=`${e.id}:${t}`;if(l.visitedProperties.has(d))throw new E.WV({type:E.FY.CycleDetected});const f=new Set(l.visitedProperties);f.add(d);const M={...l,visitedProperties:f,depth:l.depth+1};if("rollup"===u.type){if(u.aggregation&&"show_unique"!==u.aggregation){var O;const a=yield*(0,T.g)(t,n),{relation_property:i}=u;if(null==a||!a.targetCollectionPointer||!i)return{type:"undefined"};const s=(0,r.rq)(null===(O=e.getProperties())||void 0===O?void 0:O[i]);if(!s)return{type:"undefined"};const{getRecordModel:p}=yield{recordPointers:[a.targetCollectionPointer,e.pointer,...s],collectionBlockProperties:[{blockPointers:[e.pointer],collectionPointer:{table:m.v,id:e.getParentId(),spaceId:e.getSpaceId()},schema:n,property:t}]},l=(0,o.O0)({property:t,schema:n,block:e,getRecordModel:p,collectionRequestContext:{userId:void 0,userTimeZone:M.userTimeZone,depth:M.depth,intl:M.intl,visitedProperties:M.visitedProperties,resultCache:{},formulaTimeoutTimestampMs:M.formulaTimeoutTimestampMs,logFormulaTimeoutFn:M.logFormulaTimeoutFn}});return void 0===l?{type:"undefined"}:function(e){if(void 0===e.value)return{type:"undefined"};switch(e.type){case"text":return{type:"text",value:(0,h.TPx)(e.value)};case"number":return{type:"number",value:e.value};case"date":return{type:"date",value:e.value}}}(l)}{var N;const a=yield*(0,T.g)(t,n),{relation_property:o,target_property:s}=u;if(void 0===a||void 0===o||void 0===s)return{type:"undefined"};const{relationPropertySchema:l,targetCollectionSchema:d}=a,c=(0,r.rq)(null===(N=e.getProperties())||void 0===N?void 0:N[o]),y=yield*(0,T.u)(c,l),m=yield*(0,w.LD)(y.flatMap((e=>{if(void 0===e)return[];const t=d[s];if(void 0===t)return[];const n={kind:g.yp.ThisRow,value:{type:"block",value:e.pointer}},a={...M,values:[n]};return[L(e,s,d,t,a)]}))),f=(0,w.Yw)({type:"array",values:m});if("show_unique"===u.aggregation){const{getRecordModel:t}=yield{recordPointers:[e.pointer,...c]};return{type:"array",values:p.mN(f.values,(e=>(0,i.QT)({result:e,getRecordModel:t,userTimeZone:M.userTimeZone,intl:M.intl})))}}return{type:"array",values:f.values}}}if("formula"===u.type){const{getRecordModel:a}=yield{collectionBlockProperties:[{blockPointers:[e.pointer],collectionPointer:{table:m.v,id:e.getParentId(),spaceId:e.getSpaceId()},schema:n,property:t}]};if(void 0!==u.version){var P;const t=null===(P=u.formula2)||void 0===P?void 0:P.code;if(!t)return{type:"undefined"};const[n,a]=(0,k.dJ)(t),[r,o]=(0,C.K)(n);if(o.length>0)return{type:"undefined"};const i=(0,x.K)(r);if(c.x.isFail(i))return{type:"undefined"};const s={kind:g.yp.ThisRow,value:{type:"block",value:e.pointer}},p={...M,values:[s]};return yield*D(i.value,p)}{const r=(0,b.AH)({schema:n,property:t,block:e,getRecordModel:a,userTimeZone:M.userTimeZone,intl:M.intl,depth:0,resultCache:{},visitedProperties:new Set});switch(typeof r){case"string":return{type:"text",value:(0,h.TPx)(r)};case"number":return{type:"number",value:r};case"boolean":return{type:"checkbox",value:r};case"object":return{type:"date",value:r};case"undefined":default:return{type:"undefined"}}}}else if(g.WG.includes(u.type))return(0,w.SQ)(e,u.type);const R=(0,r.wS)(e,t);if("status"===u.type){const e=(0,r.ZG)(R,u);return void 0===e?{type:"undefined"}:{type:"text",value:(0,h.TPx)(e)}}if("checkbox"===u.type&&void 0===R)return{type:"checkbox",value:!1};if(("person"===u.type||"relation"===u.type||"multi_select"===u.type)&&void 0===R)return{type:"array",values:[]};if(void 0===R)return{type:"undefined"};switch(u.type){case"title":case"text":return{type:"text",value:R};case"url":case"email":case"phone_number":return{type:"text",value:(0,h.TPx)((0,r.zB)(R))};case"select":{const e=(0,r.Sj)(R,u.options??[]);return void 0===e?{type:"undefined"}:{type:"text",value:(0,h.TPx)(e)}}case"multi_select":return{type:"array",values:(0,r.uP)(R,u.options??[]).map((e=>({type:"text",value:(0,h.TPx)(e)})))};case"checkbox":return{type:"checkbox",value:(0,r.Ml)(R)};case"date":{const e=(0,r.Gl)(R);return void 0===e?{type:"undefined"}:{type:"date",value:e}}case"person":return{type:"array",values:(0,r.DW)({textValue:R,propertySchema:u}).map((e=>({type:"person",value:e})))};case"relation":return{type:"array",values:(yield*(0,T.u)((0,r.rq)(R),u)).map((e=>({type:"block",value:{table:y.iU,id:e.id,spaceId:e.getSpaceId()}})))};case"number":const t=(0,r.VY)(R);return"number"==typeof t?{type:"number",value:t}:{type:"undefined"};case"auto_increment_id":{var S;const{getRecordModel:t}=yield{recordPointers:[e.pointer]},n=null===(S=t((0,s.We)({spaceId:e.getSpaceId(),parentTable:m.v,parentId:e.getParentId()})))||void 0===S?void 0:S.getRecordKey(),o=(0,r.VY)(R),i=(0,a.wf)(n,o);return void 0!==i?{type:"text",value:[[i]]}:{type:"undefined"}}case"file":return{type:"array",values:(0,r.g)(R).map((e=>{let{url:t}=e;return{type:"text",value:(0,h.TPx)(t)}}))};case"created_time":case"last_edited_time":case"created_by":case"last_edited_by":case"last_visited_time":case"button":case"location":case"verification":return{type:"undefined"};default:(0,v.t1)(u)}}},51849:(e,t,n)=>{n.d(t,{Eh:()=>s,aU:()=>u,dJ:()=>p,eD:()=>d,tE:()=>l});n(57658);var a=n(15095),r=n(70203),o=n(97880),i=n(78106);function s(e,t){if(0===t)return 0;let n=0,r=0;for(let i=0;i<e.length;i++){const s=e[i];switch(s.type){case"code":if(t<=n+s.codeLength)return r+(0,a.p4)(s.text).slice(0,t-n).join("").length;n+=s.codeLength,r+=s.length;break;case"token":if(t<=n+1)return r+s.length;n+=1,r+=s.length;break;default:(0,o.t1)(s)}}return r}function u(e,t,n){if(0===t)return 0;let r=0,o=0;for(let i=0;i<e.length;i++){const s=e[i];switch(s.type){case"code":if(t<=o+s.length)return r+(0,a.p4)(s.text.substring(0,t-o)).length;r+=s.codeLength,o+=s.length;break;case"token":if(o+s.length>=t)return r+("right"===n?1:0);r+=1,o+=s.length}}return r}function p(e){let t="";const n=[];return e.forEach((e=>{const o=(0,r.hDy)(e),s=(0,i._u)(o);if(void 0!==s)return t+=s,void n.push({type:"token",length:s.length});const u=(0,r.WiV)(e);t+=u,n.push({type:"code",length:u.length,codeLength:(0,a.p4)(u).length,text:u})})),[t,n]}function l(e,t){return{...e,startOffset:u(t,e.startOffset,"left"),endOffset:u(t,e.endOffset,"left")}}function d(e){return e.reduce(((e,t)=>{const n=t.type;return"token"===n?e+1:"code"===n?e+t.codeLength:void(0,o.t1)(n)}),0)}},32620:(e,t,n)=>{n.d(t,{GV:()=>R,N7:()=>A,Vr:()=>I,WY:()=>L,rq:()=>B,yx:()=>S});n(21703),n(52262),n(24506),n(57658);var a=n(30120),r=n(5366),o=n(40506),i=n(53877),s=n(84795),u=n(64340),p=n(42875),l=n(76725),d=n(4615),c=n(70203),y=n(97880),m=n(63143),f=n(23790),h=n(84116),v=n(33063),b=n(3067),x=n(68602),g=n(47218),T=n(78106);function k(e){if(!e)throw new Error("Assertion failed in formulaLibraryFunctions")}const M=(0,r.defineMessages)({if:{id:"database.formula2.operator.if.description",defaultMessage:"Returns the first value if the condition is true; otherwise, returns the second value."},ifs:{id:"database.formula2.operator.ifs.description",defaultMessage:"Returns the value that corresponds to the first true condition. This can be used as an alternative to multiple nested if() statements."},e:{id:"database.formula2.constant.e.description",defaultMessage:"Returns the base of the natural logarithm."},pi:{id:"database.formula2.constant.pi.description",defaultMessage:"Returns the ratio of a circle's circumference to its diameter."},add:{id:"database.formula2.operator.add.description",defaultMessage:"Returns the sum of two numbers."},at:{id:"database.formula2.operator.at.description",defaultMessage:"Returns the value at the specified index in a list."},every:{id:"database.formula2.operator.every.description",defaultMessage:"Returns true if every item in the list satisfies the given condition, and false otherwise."},filter:{id:"database.formula2.operator.filter.description",defaultMessage:"Returns the values in the list for which the condition is true."},find:{id:"database.formula2.operator.find.description",defaultMessage:"Returns the first element in the list for which the condition returns true."},first:{id:"database.formula2.operator.first.description",defaultMessage:"Returns the first item in the list."},flat:{id:"database.formula2.operator.flat.description",defaultMessage:"Flattens a list of lists into a single list."},includes:{id:"database.formula2.operator.includes.description",defaultMessage:"Returns true if the list contains the specified value, and false otherwise."},last:{id:"database.formula2.operator.last.description",defaultMessage:"Returns the last item in the list."},map:{id:"database.formula2.operator.map.description",defaultMessage:"Returns the list populated with the results of calling the expression on every item in the input list."},reverse:{id:"database.formula2.operator.reverse.description",defaultMessage:"Returns the reversed list."},slice:{id:"database.formula2.operator.slice.description",defaultMessage:"Returns the items of the list from the provided start index (inclusive) to the end index (optional and exclusive)."},findIndex:{id:"database.formula2.operator.findIndex.description",defaultMessage:"Returns the index of the first item in the list for which the condition evaluates to true."},unique:{id:"database.formula2.operator.unique.description",defaultMessage:"Returns the list of unique values in the input list."},toPlainText:{id:"database.formula2.operator.toPlainText.description",defaultMessage:"Returns the plain text representation of the input text."},toText:{id:"database.formula2.operator.toText.description",defaultMessage:"Returns the text representation of the input value."},sort:{id:"database.formula2.operator.sort.description",defaultMessage:"Returns the list in sorted order."},some:{id:"database.formula2.operator.some.description",defaultMessage:"Returns true if any item in the list satisfies the given condition, and false otherwise."},let:{id:"database.formula2.operator.let.description",defaultMessage:"Assigns a value to a variable and evaluates the expression using that variable."},lets:{id:"database.formula2.operator.lets.description",defaultMessage:"Assigns values to multiple variables and evaluates the expression using those variables."},sum:{id:"database.formula2.operator.sum.description",defaultMessage:"Returns the sum of its arguments."},subtract:{id:"database.formula2.operator.subtract.description",defaultMessage:"Returns the difference of two numbers."},multiply:{id:"database.formula2.operator.multiply.description",defaultMessage:"Returns the product of two numbers."},divide:{id:"database.formula2.operator.divide.description",defaultMessage:"Returns the quotient of two numbers."},pow:{id:"database.formula2.operator.pow.description",defaultMessage:"Returns the result of a base number raised to an exponent power."},mod:{id:"database.formula2.operator.mod.description",defaultMessage:"Returns the first number modulo the second number."},equal:{id:"database.formula2.operator.equal.description",defaultMessage:"Returns true if both values are equal and false otherwise."},unequal:{id:"database.formula2.operator.unequal.description",defaultMessage:"Returns false if both values are equal and true otherwise."},concat:{id:"database.formula2.function.concat.description",defaultMessage:"Returns the concatenation of multiple lists."},join:{id:"database.formula2.function.join.description",defaultMessage:"Returns the values of the list with the joiner placed between each of the values."},split:{id:"database.formula2.function.split.description",defaultMessage:"Returns the list of values created by splitting a text by a separator."},substring:{id:"database.formula2.function.slice.description",defaultMessage:"Returns the substring of the text from the start index (inclusive) to the end index (optional and exclusive)."},length:{id:"database.formula2.function.length.description",defaultMessage:"Returns the length of the text or list value."},format:{id:"database.formula2.function.format.description",defaultMessage:"Returns the value formatted as text."},style:{id:"database.formula2.function.style.description",defaultMessage:'Adds styles and colors to the text. Valid formatting styles: "b" (bold), "u" (underline), "i" (italics), "c" (code), or "s" (strikethrough). Valid colors: "gray", "brown", "orange", "yellow", "green", "blue", "purple", "pink", and "red". Add "_background" to colors to set background colors.'},unstyle:{id:"database.formula2.function.unstyle.description",defaultMessage:"Removes formatting styles from the text. If no styles are specified, all styles are removed."},link:{id:"database.formula2.function.link.description",defaultMessage:"Creates a hyperlink from the label text and the URL."},toNumber:{id:"database.formula2.function.toNumber.description",defaultMessage:"Parses a number from text."},contains:{id:"database.formula2.function.contains.description",defaultMessage:"Returns true if the search string is present in the value."},replace:{id:"database.formula2.function.replace.description",defaultMessage:"Replaces the first match of the regular expression with the replacement value."},replaceAll:{id:"database.formula2.function.replaceAll.description",defaultMessage:"Replaces all matches of the regular expression with the replacement value."},test:{id:"database.formula2.function.test.description",defaultMessage:"Returns true if the value matches the regular expression and false otherwise."},match:{id:"database.formula2.function.match.description",defaultMessage:"Returns all matches of the regular expression as a list."},empty:{id:"database.formula2.function.empty.description",defaultMessage:"Returns true if the value is empty. 0, “”, false, and [] are considered empty."},abs:{id:"database.formula2.function.abs.description",defaultMessage:"Returns the absolute value of the number."},cbrt:{id:"database.formula2.function.cbrt.description",defaultMessage:"Returns the cube root of the number."},ceil:{id:"database.formula2.function.ceil.description",defaultMessage:"Returns the smallest integer greater than or equal to the number."},exp:{id:"database.formula2.function.exp.description",defaultMessage:"Returns e^x, where x is the argument, and e is Euler's number (2.718…), the base of the natural logarithm."},floor:{id:"database.formula2.function.floor.description",defaultMessage:"Returns the largest integer less than or equal to the number."},ln:{id:"database.formula2.function.ln.description",defaultMessage:"Returns the natural logarithm of the number."},log10:{id:"database.formula2.function.log10.description",defaultMessage:"Returns the base 10 logarithm of the number."},log2:{id:"database.formula2.function.log2.description",defaultMessage:"Returns the base 2 logarithm of the number."},max:{id:"database.formula2.function.max.description",defaultMessage:"Returns the largest number of the arguments."},min:{id:"database.formula2.function.min.description",defaultMessage:"Returns the smallest number of the arguments."},round:{id:"database.formula2.function.round.description",defaultMessage:"Returns the value of a number rounded to the nearest integer."},sign:{id:"database.formula2.function.sign.description",defaultMessage:"Returns 1 if the number is positive, -1 if it is negative, and 0 if it is zero."},sqrt:{id:"database.formula2.function.sqrt.description",defaultMessage:"Returns the positive square root of the number."},start:{id:"database.formula2.function.start.description",defaultMessage:"Returns the start of the date range."},end:{id:"database.formula2.function.end.description",defaultMessage:"Returns the end of the date range."},now:{id:"database.formula2.function.now.description",defaultMessage:"Returns the current date and time."},timestamp:{id:"database.formula2.function.timestamp.description",defaultMessage:"Returns the current Unix timestamp, representing the number of milliseconds that have elapsed since January 1, 1970."},fromTimestamp:{id:"database.formula2.function.fromTimestamp.description",defaultMessage:"Returns the date from the given Unix timestamp. The timestamp represents the number of milliseconds that have elapsed since January 1, 1970. Note: the returned date will not retain the seconds & milliseconds."},dateAdd:{id:"database.formula2.function.dateAdd.description",defaultMessage:'Adds time to the date. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", or "minutes".'},dateSubtract:{id:"database.formula2.function.dateSubtract.description",defaultMessage:'Subtracts time from the date. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", or "minutes".'},dateBetween:{id:"database.formula2.function.dateBetween.description",defaultMessage:'Returns the difference between two dates. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", or "minutes".'},formatDate:{id:"database.formula2.function.formatDate.description",defaultMessage:'Formats the date using a custom format string. The format string can contain the following text to represent parts of the date: "YYYY" for year, "MM" for month, "DD" for day, "HH" for hour, "mm" for minute.'},date:{id:"database.formula2.function.date.description",defaultMessage:"Returns the day of the month from the date (1-31)."},day:{id:"database.formula2.function.day.description",defaultMessage:"Returns the day of the week of the date, between 1 (Monday) and 7 (Sunday)."},month:{id:"database.formula2.function.month.description",defaultMessage:"Returns the month of the date (1-12)."},week:{id:"database.formula2.function.week.description",defaultMessage:"Returns the ISO week of the year of the date (1-53)."},year:{id:"database.formula2.function.year.description",defaultMessage:"Returns the year of the date."},hour:{id:"database.formula2.function.hour.description",defaultMessage:"Returns the hour of the date (0-23)."},minute:{id:"database.formula2.function.minute.description",defaultMessage:"Returns the minute of the date (0-59)."},parseDate:{id:"database.formula2.function.parseDate.description",defaultMessage:"Returns the date parsed according to the ISO 8601 standard."},dateRange:{id:"database.formula2.function.dateRange.description",defaultMessage:"Returns a date range constructed from the start and end dates."},dateStart:{id:"database.formula2.function.dateStart.description",defaultMessage:"Returns the start of the date range."},dateEnd:{id:"database.formula2.function.dateEnd.description",defaultMessage:"Returns the end of the date range."},id:{id:"database.formula2.function.id.description",defaultMessage:"Returns the id of the page. If no page is provided, returns the id of the page the formula is on."},name:{id:"database.formula2.function.name.description",defaultMessage:"Returns the name of a person."},email:{id:"database.formula2.function.email.description",defaultMessage:"Returns the email address of a person."},lower:{id:"database.formula2.function.lower.description",defaultMessage:"Converts the text to lowercase."},upper:{id:"database.formula2.function.upper.description",defaultMessage:"Converts the text to uppercase."},repeat:{id:"database.formula2.function.repeat.description",defaultMessage:"Repeats the text a given number of times."}});function E(e,t,n){return{name:e,eval:function*(e,t){return{type:"number",value:n}},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:`${e}()`,output:n.toString()}]],syntax:[`${e}()`],description:t}}function w(e,t,n,a){const r=a.map((t=>({input:`${e}(${t})`,output:`${n(t)}`}))),o=a.map((t=>({input:`${t}.${e}()`,output:`${n(t)}`})));return{name:e,eval:function*(e,t){const[a]=e;return k("number"===a.type),{type:"number",value:n(a.value)}},parameters:{expected:[{name:"input",type:{type:"number"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[r,o],syntax:[`${e}(number)`,`number.${e}()`],description:t}}function C(e,t,n,a){return{name:e,eval:function*(t,a){let[r,o]=t;if(h.zq.includes(e)){if("undefined"===r.type&&"undefined"===o.type)return{type:"number",value:0};"undefined"===r.type&&"number"===o.type?r={type:"number",value:0}:"undefined"===o.type&&"number"===r.type&&(o={type:"number",value:0})}return k("number"===r.type&&"number"===o.type),{type:"number",value:n(r.value,o.value)}},parameters:{expected:[{name:"lhs",type:{type:"number"}},{name:"rhs",type:{type:"number"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:`${e}(5, 10)`,output:`${n(5,10)}`},{input:`5 ${a} 10`,output:`${n(5,10)}`}],[{input:`5.${e}(10)`,output:`${n(5,10)}`},{input:`5 ${a} 10`,output:`${n(5,10)}`}]],syntax:[`${e}(number, number)`,`number.${e}(number)`],description:t}}const O=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"];function*N(e,t){let n=yield*(0,T.PX)(e,t);if("s"!==n.at(-1)&&(n+="s"),!O.includes(n.toLowerCase()))throw new g.Mu({type:g.sj.DateInvalidDurationUnit,invalidUnit:n});return n}function D(e){return function*(t,n){const[a,r,o]=t;k("date"===a.type&&"number"===r.type&&"text"===o.type);const s=(0,i.NK)(a.value,n.userTimeZone),u=yield*N(o.value,n),p=e(s.start,r.value,u),l="hours"===u||"minutes"===u||"seconds"===u||"milliseconds"===u;return{type:"date",value:"date"!==a.value.type&&"daterange"!==a.value.type||l?(0,i.CQ)(p,n.userTimeZone):(0,i.hT)(p,n.userTimeZone)}}}function P(e){return function*(t,n){const[a]=t;return k("date"===a.type),{type:"number",value:e((0,i.NK)((0,o.Ws)(a.value),n.userTimeZone,n.intl.locale).start)}}}const R="current",L="index",S={expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"expression",type:{type:"expression"},augmentScope:e=>{var t;const n="array"===(null===(t=e[0])||void 0===t?void 0:t.type)?e[0].of:{type:"unknown"};return{[R]:n,[L]:{type:"number"}}}}]};function F(e,t,n){return(0,T.LD)(e.map(((e,a)=>(0,v.vW)(t,{...n,values:[{kind:h.yp.Binding,id:R,value:e},{kind:h.yp.Binding,id:L,value:{type:"number",value:a}},...n.values]}))))}const U={type:"undefined"},I={if:{name:"if",eval:function*(e,t){const[n,a,r]=e;return k("checkbox"===n.type),n.value?yield*(0,v.vW)(a,t):yield*(0,v.vW)(r,t)},parameters:{expected:[{name:"condition",type:{type:"checkbox"}},{name:"ifTrue",type:{type:"expression"}},{name:"ifFalse",type:{type:"expression"}}]},returnType:e=>{let[t,n,a]=e;return void 0!==n&&void 0!==a&&(0,f.Jy)(n,a)?n:{type:"unknown"}},iconType:{type:"checkbox"},examples:[[{input:"if(true, 1, 2)",output:"1"},{input:"if(false, 1, 2)",output:"2"},{input:[(0,b.h0)("Checked"),[' == true ? "Complete" : "Incomplete"']]}],[{input:"true.if(1, 2)",output:"1"},{input:"false.if(1, 2)",output:"2"}]],syntax:["if(condition, ifTrue, ifFalse)","condition.if(ifTrue, ifFalse)"],description:M.if},ifs:{name:"ifs",parameters:{expected:[{name:"condition",type:{type:"checkbox"}},{name:"ifTrue",type:{type:"expression"}}],varargs:[{name:"rest",type:{type:"expression"}}]},returnType:e=>{if(e.length<2)return{type:"unknown"};const t=e[1];let n=2;for(;n<e.length-1;n+=2)if(!(0,f.Jy)(e[n+1],t))return{type:"unknown"};if(n===e.length-1){const a=e[n];if(!(0,f.Jy)(a,t))return{type:"unknown"}}return t},eval:function*(e,t){const n=e[0];if(k("checkbox"===n.type),n.value)return yield*(0,v.vW)(e[1],t);for(let a=2;a<e.length-1;a+=2){const n=e[a];if((0,T.vh)(yield*(0,v.vW)(n,t)))return yield*(0,v.vW)(e[a+1],t)}return e.length%2==1?yield*(0,v.vW)(e[e.length-1],t):U},iconType:{type:"checkbox"},examples:[[{input:"ifs(true, 1, true, 2, 3)",output:"1"},{input:"ifs(false, 1, false, 2, 3)",output:"3"}],[{input:"true.ifs(1, true, 2, 3)",output:"1"},{input:"false.ifs(1, false, 2, 3)",output:"3"}]],syntax:["ifs(condition, ifTrue, condition2, ifTrue2, ..., else)","condition.ifs(ifTrue, condition2, ifTrue2, ..., else)"],description:M.ifs},and:{name:"and",eval:function*(e,t){return{type:"checkbox",value:e.every((e=>(0,T.vh)(e)))}},parameters:{varargs:[{name:"value",type:[{type:"unknown"}]}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"and(true, true, true)",output:"true"},{input:"and(3 > 2, 2 < 3)",output:"false"}],[{input:"true.and(true, true)",output:"true"},{input:"(3 > 2).and(2 < 3)",output:"false"}]],syntax:["and(boolean, boolean, ...)","boolean.and(boolean, ...)"],description:x.Gw.and},or:{name:"or",eval:function*(e,t){return{type:"checkbox",value:e.some((e=>(0,T.vh)(e)))}},parameters:{varargs:[{name:"value",type:[{type:"unknown"}]}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"or(true, false, false)",output:"true"},{input:"or(3 > 2, 2 < 3)",output:"true"}],[{input:"true.or(false, false)",output:"true"},{input:"(3 > 2).or(2 < 3)",output:"true"}]],syntax:["or(boolean, boolean, ...)","boolean.or(boolean, ...)"],description:x.Gw.or},empty:{name:"empty",eval:function*(e,t){const[n]=e;return{type:"checkbox",value:"array"===n.type?0===n.values.length:!(0,T.vh)(n)}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"empty(0)",output:"true"},{input:"empty([])",output:"true"}],[{input:"0.empty()",output:"true"},{input:"[].empty()",output:"true"}]],syntax:["empty(value)","value.empty()"],description:M.empty},length:{name:"length",eval:function*(e,t){const[n]=e;return"array"===n.type?{type:"number",value:n.values.length}:(k("text"===n.type),{type:"number",value:n.value.reduce(((e,t)=>e+(0,c.J1x)(t)),0)})},parameters:{expected:[{name:"input",type:[{type:"text"},{type:"array",of:{type:"unknown"}}]}]},returnType:{type:"number"},iconType:{type:"text"},examples:[[{input:'length("hello")',output:"5"},{input:"length([1, 2, 3])",output:"3"}],[{input:'"hello".length()',output:"5"},{input:"[1, 2, 3].length()",output:"3"}]],syntax:["length(value)","value.length()"],description:M.length},substring:{name:"substring",eval:function*(e,t){const[n,a,r]=e;k("text"===n.type&&"number"===a.type);return{type:"text",value:[[(yield*(0,T.PX)(n.value,t)).slice(a.value,"number"===(null==r?void 0:r.type)?r.value:void 0)]]}},parameters:{expected:[{name:"target",type:{type:"text"}},{name:"startIndex",type:{type:"number"}},{name:"endIndex",optional:!0,type:{type:"number"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'substring("Notion", 0, 3)',output:'"Not"'},{input:'substring("Notion", 3)',output:'"ion"'}],[{input:'"Notion".substring(0, 3)',output:'"Not"'},{input:'"Notion".substring(3)',output:'"ion"'}]],syntax:["substring(text, startIndex, endIndex?)","text.substring(startIndex, endIndex?)"],description:M.substring},contains:{name:"contains",eval:function*(e,t){const[n,a]=e;k("text"===n.type&&"text"===a.type);const r=yield*(0,T.PX)(n.value,t),o=yield*(0,T.PX)(a.value,t);return{type:"checkbox",value:r.includes(o)}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"search",type:{type:"text"}}]},returnType:{type:"checkbox"},iconType:{type:"text"},examples:[[{input:'contains("Notion", "ot")',output:"true"}],[{input:'"Notion".contains("ot")',output:"true"}]],syntax:["contains(value, search)","value.contains(search)"],description:M.contains},test:{name:"test",eval:function*(e,t){const[n,a]=e;return k("text"===n.type&&"text"===a.type),{type:"checkbox",value:new RegExp(yield*(0,T.PX)(a.value,t)).test(yield*(0,T.PX)(n.value,t))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:'test("Notion", "Not")',output:"true"},{input:'test("Notion", "\\d")',output:"false"}],[{input:'"Notion.test("Not")',output:"true"},{input:'"Notion".test("\\d")',output:"false"}]],syntax:["test(text, pattern)","text.test(pattern)"],description:M.test},match:{name:"match",eval:function*(e,t){const[n,a]=e;k("text"===n.type&&"text"===a.type);const r=yield*(0,T.PX)(n.value,t),o=yield*(0,T.PX)(a.value,t),i=r.match(new RegExp(o,"g"));return i?{type:"array",values:i.map((e=>({type:"text",value:(0,c.TPx)(e)})))}:{type:"array",values:[]}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}}]},returnType:{type:"array",of:{type:"text"}},iconType:{type:"text"},examples:[[{input:'match("Notion Notion", "Not")',output:'["Not", "Not"]'},{input:'match("Notion 123 Notion 456", "\\d+")',output:'["123", "456"]'}],[{input:'"Notion Notion".match("Not")',output:'["Not", "Not"]'},{input:'"Notion 123 Notion 456".match("\\d+")',output:'["123", "456"]'}]],syntax:["match(text, pattern)","text.match(pattern)"],description:M.match},replace:{name:"replace",eval:function*(e,t){const[n,a,r]=e;k("text"===n.type&&"text"===a.type);const o=yield*(0,T.PX)(n.value,t),i=yield*(0,T.PX)(a.value,t);return{type:"text",value:(0,c.TPx)(o.replace(new RegExp(i),"text"===(null==r?void 0:r.type)?yield*(0,T.PX)(r.value,t):""))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}},{name:"replacement",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'replace("Notion Notion", "N", "M")',output:'"Motion Notion"'}],[{input:'"Notion Notion".replace("N", "M")',output:'"Motion Notion"'}]],syntax:["replace(text, pattern, replacement?)","text.replace(pattern, replacement?)"],description:M.replace},replaceAll:{name:"replaceAll",eval:function*(e,t){const[n,a,r]=e;k("text"===n.type&&"text"===a.type);const o=yield*(0,T.PX)(n.value,t);return{type:"text",value:(0,c.TPx)(o.replace(new RegExp(yield*(0,T.PX)(a.value,t),"g"),"text"===(null==r?void 0:r.type)?yield*(0,T.PX)(r.value,t):""))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}},{name:"replacement",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'replaceAll("Notion Notion", "N", "M")',output:'"Motion Motion"'},{input:'replaceAll("Notion 123", "\\d", "")',output:'"Notion"'}],[{input:'"Notion Notion".replaceAll("N", "M")',output:'"Motion Motion"'},{input:'"Notion 123".replaceAll("\\d", "")',output:'"Notion"'}]],syntax:["replaceAll(text, pattern, replacement?)","text.replaceAll(pattern, replacement?)"],description:M.replaceAll},lower:{name:"lower",eval:function*(e){const[t]=e;k("text"===t.type);return{type:"text",value:t.value.map((e=>{const t=(0,c.hDy)(e),n=(0,c.WiV)(e);return(0,c.V3y)(n.toLowerCase(),t)}))}},parameters:{expected:[{name:"text",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'lower("NOTION")',output:'"notion"'}],[{input:'"NOTION".lower()',output:'"notion"'}]],syntax:["lower(text)","text.lower()"],description:M.lower},upper:{name:"upper",eval:function*(e){const[t]=e;k("text"===t.type);return{type:"text",value:t.value.map((e=>{const t=(0,c.hDy)(e),n=(0,c.WiV)(e);return(0,c.V3y)(n.toUpperCase(),t)}))}},parameters:{expected:[{name:"text",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'upper("notion")',output:'"NOTION"'}],[{input:'"notion".upper()',output:'"NOTION"'}]],syntax:["upper(text)","text.upper()"],description:M.upper},repeat:{name:"repeat",eval:function*(e){const[t,n]=e;k("text"===t.type),k("number"===n.type);const a=[],r=Math.min(n.value,1e4);for(let o=0;o<r;o++)a.push(...t.value);return{type:"text",value:a}},parameters:{expected:[{name:"text",type:{type:"text"}},{name:"count",type:{type:"number"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'repeat("0", 4)',output:'"0000"'},{input:'repeat("~=", 10).style("blue")',output:[['"'],["~=~=~=~=~=~=~=~=~=~=",[["h","blue"]]],['"']]}],[{input:'"0".repeat(4)',output:'"0000"'},{input:'"~=".repeat(10).style("blue")',output:[['"'],["~=~=~=~=~=~=~=~=~=~=",[["h","blue"]]],['"']]}]],syntax:["repeat(text, count)","text.repeat(count)"],description:M.repeat},link:{name:"link",eval:function*(e){const[t,n]=e;return k("text"===t.type),k("text"===n.type),{type:"text",value:(0,c.C9B)(t.value,(0,c.Jcv)(n.value))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"url",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'link("Notion", "https://notion.so")',output:[['"'],["Notion",[(0,c.edl)("https://notion.so")]],['"']]}],[{input:'"Notion".link("https://notion.so")',output:[['"'],["Notion",[(0,c.edl)("https://notion.so")]],['"']]}]],syntax:["link(text, url)","text.link(url)"],description:M.link},style:{name:"style",eval:function*(e){const[t,...n]=e;k("text"===t.type),n.forEach((e=>k("text"===e.type)));const a=n.length>0?(0,T.LF)(n.map((e=>(k("text"===e.type),e.value))).filter(y.$K)):[];return{type:"text",value:(0,T.ET)(t.value,a)}},parameters:{expected:[{name:"input",type:{type:"text"}}],varargs:[{name:"styles",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'style("Notion", "b", "u")',output:[['"'],["Notion",[["b"],["_"]]],['"']]},{input:'style("Notion", "blue", "gray_background")',output:[['"'],["Notion",[["h","blue"],["h","blue_background"]]],['"']]}],[{input:'"Notion".style("b", "u")',output:[['"'],["Notion",[["b"],["_"]]],['"']]},{input:'"Notion".style("blue", "blue_background")',output:[['"'],["Notion",[["h","blue"],["h","blue_background"]]],['"']]}]],syntax:["style(value, styles)","value.style(styles)"],description:M.style},unstyle:{name:"unstyle",eval:function*(e){const[t,...n]=e;k("text"===t.type);const a=n.length>0?(0,T.LF)(n.map((e=>(k("text"===e.type),e.value))).filter(y.$K)):void 0;return{type:"text",value:(0,T.P7)(t.value,a)}},parameters:{expected:[{name:"input",type:{type:"text"}}],varargs:[{name:"styles",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:[['unstyle("'],["Text",[["b"],["c"]]],['")']],output:[['"Text"']]},{input:[['unstyle("'],["Text",[["h","blue"],["b"]]],['", "blue")']],output:[['"'],["Text",[["b"]]],['"']]}],[{input:[['"'],["Text",[["b"],["c"]]],['".unstyle()']],output:[['"Text"']]},{input:[['"'],["Text",[["h","blue"],["b"]]],['".unstyle("blue")']],output:[['"'],["Text",[["b"]]],['"']]}]],syntax:["unstyle(value, styles?)","value.unstyle(styles?)"],description:M.unstyle},format:{name:"format",eval:function*(e,t){const[n]=e,a=(0,T.j4)(n);return{type:"text",value:(0,c.TPx)(yield*(0,T.PX)(a,t))}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:"format(1234)",output:'"1234"'},{input:"format(now())",output:[['"'],[(0,u.P)(a.ou.now(),"MMMM D, Y HH:mm")],['"']]}],[{input:"1234.format()",output:'"1234"'},{input:"now().format()",output:[['"'],[(0,u.P)(a.ou.now(),"MMMM D, Y HH:mm")],['"']]}]],syntax:["format(value)","value.format()"],description:M.format},add:C("add",M.add,((e,t)=>e+t),"+"),subtract:C("subtract",M.subtract,((e,t)=>e-t),"-"),multiply:C("multiply",M.multiply,((e,t)=>e*t),"*"),mod:C("mod",M.mod,((e,t)=>e%t),"%"),pow:C("pow",M.pow,((e,t)=>e**t),"^"),divide:{name:"divide",description:M.divide,eval:function*(e,t){const[n,a]=e;return k("number"===n.type&&"number"===a.type),0===a.value?{type:"undefined"}:{type:"number",value:n.value/a.value}},returnType:{type:"number"},iconType:{type:"number"},syntax:["divide(number, number)","number.divide(number)"],parameters:{expected:[{name:"lhs",type:{type:"number"}},{name:"rhs",type:{type:"number"}}]},examples:[[{input:"divide(5, 10)",output:"0.5"},{input:"5 / 10",output:"0.5"}],[{input:"5.divide(10)",output:"0.5"},{input:"5 / 10",output:"0.5"}]]},min:{name:"min",eval:function*(e,t){const n=e.flatMap((e=>"array"===e.type?e.values.map((e=>{if("number"===e.type)return e.value})).filter(y.$K):"number"===e.type?[e.value]:void 0)).filter(y.$K);return{type:"number",value:Math.min(...n)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"min(1, 2, 3)",output:"1"},{input:"min([1, 2, 3])",output:"1"}],[{input:"[1, 2, 3].min()",output:"1"}]],syntax:["min(list)","list.min()"],description:M.min},max:{name:"max",eval:function*(e,t){const n=e.flatMap((e=>"array"===e.type?e.values.map((e=>{if("number"===e.type)return e.value})).filter(y.$K):"number"===e.type?[e.value]:void 0)).filter(y.$K);return{type:"number",value:Math.max(...n)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"max(1, 2, 3)",output:"3"},{input:"max([1, 2, 3])",output:"3"}],[{input:"[1, 2, 3].max()",output:"3"}]],syntax:["max(list)","list.max()"],description:M.max},sum:{name:"sum",eval:function*(e,t){return{type:"number",value:e.reduce(((e,t)=>e+("number"===t.type?t.value:"array"===t.type?t.values.reduce(((e,t)=>e+("number"===t.type?t.value:0)),0):0)),0)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"sum(1, 2, 3)",output:"6"},{input:"sum([1, 2, 3], 4, 5)",output:"15"}],[{input:"[1, 2, 3].sum()",output:"6"},{input:"[1, 2, 3].sum(4, 5)",output:"15"}]],syntax:["sum(list)","list.sum()"],description:M.sum},abs:w("abs",M.abs,Math.abs,[10,-10]),round:w("round",M.round,Math.round,[.4,-.6]),ceil:w("ceil",M.ceil,Math.ceil,[.4,-.6]),floor:w("floor",M.floor,Math.floor,[.4,-.6]),sqrt:w("sqrt",M.sqrt,Math.sqrt,[4,7]),cbrt:w("cbrt",M.cbrt,Math.cbrt,[9,64]),exp:w("exp",M.exp,Math.exp,[1,-1]),ln:w("ln",M.ln,Math.log,[Math.E,10]),log10:w("log10",M.log10,Math.log10,[10,1e5]),log2:w("log2",M.log2,Math.log2,[4,1024]),sign:w("sign",M.sign,Math.sign,[-10,10]),pi:E("pi",M.pi,Math.PI),e:E("e",M.e,Math.E),toNumber:{name:"toNumber",eval:function*(e,t){const[n]=e;switch(n.type){case"number":return n;case"checkbox":return{type:"number",value:n.value?1:0};case"text":{const e=yield*(0,T.PX)(n.value,t),a=parseFloat(e);return(0,m.hj)(a)?{type:"number",value:parseFloat(e)}:U}case"date":return{type:"number",value:(0,i.NK)(n.value,t.userTimeZone).start.valueOf()};default:return U}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:'toNumber("2")',output:"2"},{input:"toNumber(now())",output:(0,i.uO)((0,i.R_)((0,p.r)()),(0,p.r)()).toString()},{input:"toNumber(true)",output:"1"}],[{input:'"2".toNumber()',output:"2"},{input:"now().toNumber()",output:(0,i.uO)((0,i.R_)((0,p.r)()),(0,p.r)()).toString()},{input:"true.toNumber()",output:"1"}]],syntax:["toNumber(value)","value.toNumber()"],description:M.toNumber},now:{name:"now",eval:function*(e,t){return{type:"date",value:(0,i.R_)(t.userTimeZone)}},parameters:{},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:"now()",output:[(0,c.YCD)((0,c.pZr)((0,i.R_)((0,p.r)())))]}]],syntax:["now()"],description:M.now},minute:{name:"minute",eval:P((e=>e.minute)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'minute(parseDate("2023-07-10T17:35Z"))',output:"35"}],[{input:'parseDate("2023-07-10T17:35Z").minute()',output:"35"}]],syntax:["minute(date)","date.minute()"],description:M.minute},hour:{name:"hour",eval:P((e=>e.hour)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'hour(parseDate("2023-07-10T17:35Z"))',output:"17"}],[{input:'parseDate("2023-07-10T17:35Z").hour()',output:"17"}]],syntax:["hour(date)","date.hour()"],description:M.hour},day:{name:"day",eval:P((e=>e.weekday)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'day(parseDate("2023-07-10T17:35Z"))',output:"1"}],[{input:'parseDate("2023-07-10T17:35Z").day()',output:"1"}]],syntax:["day(date)","date.day()"],description:M.day},date:{name:"date",eval:P((e=>e.day)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'date(parseDate("2023-07-10T17:35Z"))',output:"10"}],[{input:'parseDate("2023-07-10T17:35Z").date()',output:"10"}]],syntax:["date(date)","date.date()"],description:M.date},week:{name:"week",eval:P((e=>e.weekNumber)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'week(parseDate("2023-01-02"))',output:"1"}],[{input:'parseDate("2023-01-02").week()',output:"1"}]],syntax:["week(date)","date.week()"],description:M.week},month:{name:"month",eval:P((e=>e.month)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'month(parseDate("2023-07-10T17:35Z"))',output:"7"}],[{input:'parseDate("2023-07-10T17:35Z").month()',output:"7"}]],syntax:["month(date)","date.month()"],description:M.month},year:{name:"year",eval:P((e=>e.year)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:"year(now())",output:a.ou.now().year.toString()}],[{input:"now().year()",output:a.ou.now().year.toString()}]],syntax:["year(date)","date.year()"],description:M.year},dateAdd:{name:"dateAdd",eval:D(((e,t,n)=>e.plus({[n]:t}).valueOf())),parameters:{expected:[{name:"input",type:{type:"date"}},{name:"num",type:{type:"number"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'dateAdd(now(), 1, "days")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({days:1}))))]},{input:'dateAdd(now(), 2, "months")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({months:2}))))]},{input:'dateAdd(now(), 3, "years")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({years:3}))))]}],[{input:'now().dateAdd(1, "days")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({days:1}))))]},{input:'now().dateAdd(2, "months")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({months:2}))))]},{input:'now().dateAdd(3, "years")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({years:3}))))]}]],syntax:["dateAdd(date, num, unit)","date.dateAdd(num, unit)"],description:M.dateAdd},dateSubtract:{name:"dateSubtract",eval:D(((e,t,n)=>e.minus({[n]:t}).valueOf())),parameters:{expected:[{name:"input",type:{type:"date"}},{name:"num",type:{type:"number"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'dateSubtract(now(), 1, "days")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({days:1}))))]},{input:'dateSubtract(now(), 2, "months")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({months:2}))))]},{input:'dateSubtract(now(), 3, "years")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({years:3}))))]}],[{input:'now().dateSubtract(1, "days")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({days:1}))))]},{input:'now().dateSubtract(2, "months")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({months:2}))))]},{input:'now().dateSubtract(3, "years")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({years:3}))))]}]],syntax:["dateSubtract(date, num, unit)","date.dateSubtract(num, unit)"],description:M.dateSubtract},dateBetween:{name:"dateBetween",eval:function*(e,t){const[n,a,r]=e;k("date"===n.type&&"date"===a.type&&"text"===r.type);const o=(0,i.NK)(n.value,t.userTimeZone).start,s=(0,i.NK)(a.value,t.userTimeZone).start,u=yield*N(r.value,t);return{type:"number",value:Math.trunc(o.diff(s,u).get(u))}},parameters:{expected:[{name:"left",type:{type:"date"}},{name:"right",type:{type:"date"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'dateBetween(now(), parseDate("2022-09-07"), "days")',output:Math.trunc(a.ou.now().diff(a.ou.fromISO("2022-09-07"),"days").days).toString()},{input:'dateBetween(parseDate("2030-01-01"), now(), "years")',output:Math.trunc(a.ou.fromISO("2030-01-01").diffNow("years").years).toString()}],[{input:'now().dateBetween(parseDate("2022-09-07"), "days")',output:Math.trunc(a.ou.now().diff(a.ou.fromISO("2022-09-07"),"days").days).toString()},{input:'parseDate("2030-01-01").dateBetween(now(), "years")',output:Math.trunc(a.ou.fromISO("2030-01-01").diffNow("years").years).toString()}]],syntax:["dateBetween(date, date, unit)","date.dateBetween(date, unit)"],description:M.dateBetween},dateRange:{name:"dateRange",eval:function*(e,t){const[n,a]=e;return k("date"===n.type&&"date"===a.type),"start_time"in n.value||"start_time"in a.value?{type:"date",value:{type:"datetimerange",start_date:n.value.start_date,start_time:"start_time"in n.value?n.value.start_time:"00:00",end_date:"end_date"in a.value?a.value.end_date:a.value.start_date,end_time:"end_time"in a.value?a.value.end_time:"start_time"in a.value?a.value.start_time:"23:59",time_zone:"time_zone"in n.value&&n.value.time_zone||"time_zone"in a.value&&a.value.time_zone||t.userTimeZone}}:{type:"date",value:{type:"daterange",start_date:n.value.start_date,end_date:"end_date"in a.value?a.value.end_date:a.value.start_date}}},parameters:{expected:[{name:"start",type:{type:"date"}},{name:"end",type:{type:"date"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:[["dateRange("],(0,b.h0)("Start Date"),[", "],(0,b.h0)("End Date"),[")"]],output:[(0,c.YCD)((0,c.pZr)({type:"daterange",start_date:"2022-09-07",end_date:"2023-09-07"}))]}],[{input:[(0,b.h0)("Start Date"),[".dateRange("],(0,b.h0)("End Date"),[")"]],output:[(0,c.YCD)((0,c.pZr)({type:"daterange",start_date:"2022-09-07",end_date:"2023-09-07"}))]}]],syntax:["dateRange(start, end)"],description:M.dateRange},dateStart:{name:"dateStart",eval:function*(e,t){const[n]=e;return k("date"===n.type),{type:"date",value:(0,o.Ws)(n.value)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:[["dateStart("],(0,b.h0)("Date Range"),[")"]],output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-09-07"))))]},{input:[["dateBetween(dateStart("],(0,b.h0)("Date Range"),["), dateEnd("],(0,b.h0)("Date Range"),['), "days")']],output:[["-365"]]}],[{input:[(0,b.h0)("Date Range"),[".dateStart()"]],output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-09-07"))))]},{input:[(0,b.h0)("Date Range"),[".dateStart().dateBetween("],(0,b.h0)("Date Range"),['.dateEnd(), "days")']],output:[["-365"]]}]],syntax:["dateStart(dateRange)","dateRange.dateStart()"],description:M.dateStart},dateEnd:{name:"dateEnd",eval:function*(e,t){const[n]=e;return k("date"===n.type),{type:"date",value:(0,o.S$)(n.value)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:[["dateEnd("],(0,b.h0)("Date range"),[")"]],output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2023-09-07"))))]},{input:[["dateBetween(dateEnd("],(0,b.h0)("Date Range"),["), dateStart("],(0,b.h0)("Date Range"),['), "days")']],output:"365"}],[{input:[(0,b.h0)("Date Range"),[".dateEnd()"]],output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2023-09-07"))))]},{input:[(0,b.h0)("Date Range"),[".dateEnd().dateBetween("],(0,b.h0)("Date Range"),['.dateStart(), "days")']],output:"365"}]],syntax:["dateEnd(dateRange)","dataRange.dateEnd()"],description:M.dateEnd},timestamp:{name:"timestamp",eval:function*(e,t){const[n]=e;return k("date"===n.type),{type:"number",value:(0,i.uO)(n.value,t.userTimeZone)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:"timestamp(now())",output:(0,i.uO)((0,i.R_)((0,p.r)()),(0,p.r)()).toString()}],[{input:"now().timestamp()",output:(0,i.uO)((0,i.R_)((0,p.r)()),(0,p.r)()).toString()}]],syntax:["timestamp(date)","date.timestamp()"],description:M.timestamp},fromTimestamp:{name:"fromTimestamp",eval:function*(e,t){const[n]=e;return k("number"===n.type),{type:"date",value:(0,i.CQ)(n.value,t.userTimeZone)}},parameters:{expected:[{name:"input",type:{type:"number"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:"fromTimestamp(1689024900000)",output:[(0,c.YCD)((0,c.pZr)((0,i.CQ)(16890249e5,(0,p.r)())))]}],[{input:"1689024900000.fromTimestamp()",output:[(0,c.YCD)((0,c.pZr)((0,i.CQ)(16890249e5,(0,p.r)())))]}]],syntax:["fromTimestamp(timestamp)","timestamp.fromTimestamp()"],description:M.fromTimestamp},formatDate:{name:"formatDate",eval:function*(e,t){const[n,a]=e;k("date"===n.type&&"text"===a.type);const r=(0,i.NK)((0,o.Ws)(n.value),t.userTimeZone,t.intl.locale).start;return{type:"text",value:(0,c.TPx)((0,u.P)(r,yield*(0,T.PX)(a.value,t)))}},parameters:{expected:[{name:"date",type:{type:"date"}},{name:"format",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"date"},examples:[[{input:'formatDate(now(), "MMMM D, Y")',output:[['"'],[(0,u.P)(a.ou.now(),"MMMM D, Y")],['"']]},{input:'formatDate(now(), "MM/DD/YYYY")',output:[['"'],[(0,u.P)(a.ou.now(),"MM/DD/YYYY")],['"']]},{input:'formatDate(now(), "HH:mm A")',output:[['"'],[(0,u.P)(a.ou.now(),"HH:mm A")],['"']]}],[{input:'now().formatDate("MMMM D, Y")',output:[['"'],[(0,u.P)(a.ou.now(),"MMMM D, Y")],['"']]},{input:'now().formatDate("MM/DD/YYYY")',output:[['"'],[(0,u.P)(a.ou.now(),"MM/DD/YYYY")],['"']]},{input:'now().formatDate("HH:mm A")',output:[['"'],[(0,u.P)(a.ou.now(),"HH:mm")],['"']]}]],syntax:["formatDate(date, format)","date.formatDate(format)"],description:M.formatDate},parseDate:{name:"parseDate",eval:function*(e,t){const[n]=e;k("text"===n.type);const a=yield*(0,T.PX)(n.value,t),r=(0,s.fuzzyValidDateTimeFromISO)(a);return r?{type:"date",value:(0,s.luxonDateToNotionDateOrDateTime)(r)}:U},parameters:{expected:[{name:"dateString",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'parseDate("2022-01-01")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-01-01"))))]},{input:'parseDate("2022-01-01T00:00Z")',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-01-01T00:00Z"))))]}],[{input:'"2022-01-01".parseDate()',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-01-01"))))]},{input:'"2022-01-01T00:00Z".parseDate()',output:[(0,c.YCD)((0,c.pZr)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-01-01T00:00Z"))))]}]],syntax:["parseDate(dateText)","dateText.parseDate()"],description:M.parseDate},name:{name:"name",eval:function*(e,t){const[n]=e;k("person"===n.type);const a=(yield{recordPointers:[n.value]}).getRecordModel(n.value);if(!a)throw new g.Mu({type:g.sj.UserNotFound});return{type:"text",value:(0,c.TPx)(a.getDisplayName(t.intl))}},parameters:{expected:[{name:"person",type:{type:"person"}}]},returnType:{type:"text"},iconType:{type:"person"},examples:[[{input:[["name("],(0,b.um)(h.vz.CreatedBy),[")"]],isCopyable:!0},{input:[(0,b.h0)("Pioneers"),['.map(name(current)).join(", ")']],output:'"Grace Hopper, Ada Lovelace"'}],[{input:[(0,b.um)(h.vz.CreatedBy),[".name()"]],isCopyable:!0},{input:[(0,b.h0)("Pioneers"),['.map(current.name()).join(", ")']],output:'"Grace Hopper, Ada Lovelace"'}]],syntax:["name(person)","person.name()"],description:M.name},email:{name:"email",eval:function*(e,t){const[n]=e;k("person"===n.type);const a=(yield{recordPointers:[n.value]}).getRecordModel(n.value);if(!a)throw new g.Mu({type:g.sj.UserNotFound});return{type:"text",value:(0,c.TPx)(a.getEmail())}},parameters:{expected:[{name:"person",type:{type:"person"}}]},returnType:{type:"text"},iconType:{type:"person"},examples:[[{input:[["email("],(0,b.um)(h.vz.CreatedBy),[")"]],isCopyable:!0},{input:[(0,b.h0)("People"),['.map(email(current)).join(", ")']]}],[{input:[(0,b.um)(h.vz.CreatedBy),[".email()"]],isCopyable:!0},{input:[(0,b.h0)("People"),['.map(current.email()).join(", ")']]}]],syntax:["email(person)","person.email()"],description:M.email},at:{name:"at",eval:function*(e,t){const[n,a]=e;k("array"===n.type&&"number"===a.type);const r=n.values.at(a.value);return void 0!==r?r:U},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"index",type:{type:"number"}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"at([1, 2, 3], 1)",output:"2"}],[{input:"[1, 2, 3].at(1)",output:"2"}]],syntax:["at(list, index)","list.at(index)"],description:M.at},first:{name:"first",eval:function*(e,t){const[n]=e;return k("array"===n.type),n.values.length>0?n.values[0]:U},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"first([1, 2, 3])",output:"1"}],[{input:"[1, 2, 3].first()",output:"1"},{input:"[].first()",output:"Empty"}]],syntax:["first(list)","list.first()"],description:M.first},last:{name:"last",eval:function*(e,t){const[n]=e;return k("array"===n.type),n.values.length>0?n.values[n.values.length-1]:U},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"last([1, 2, 3])",output:"3"}],[{input:"[1, 2, 3].last()",output:"3"}]],syntax:["last(list)","list.last()"],description:M.last},slice:{name:"slice",eval:function*(e,t){const[n,a,r]=e;return k("array"===n.type&&"number"===a.type),{type:"array",values:n.values.slice(a.value,"number"===(null==r?void 0:r.type)?r.value:void 0)}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"startIndex",type:{type:"number"}},{name:"endIndex",optional:!0,type:{type:"number"}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"slice([1, 2, 3], 1, 2)",output:"[2]"},{input:'slice(["a", "b", "c"], 1)',output:'["b", "c"]'}],[{input:"[1, 2, 3].slice(1, 2)",output:"[2]"},{input:'["a", "b", "c"].slice(1)',output:'["b", "c"]'}]],syntax:["slice(list, startIndex, endIndex?)","list.slice(startIndex, endIndex?)"],description:M.slice},concat:{name:"concat",eval:function*(e){return{type:"array",values:e.flatMap((e=>(k("array"===e.type),e.values.filter((e=>"undefined"!==e.type)))))}},parameters:{varargs:[{name:"arg",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{const t=null==e?void 0:e[0];if(void 0===t)return{type:"array",of:{type:"unknown"}};for(let n=1;n<e.length;n++)if(void 0!==e[n]&&!(0,f.Jy)(e[n],t))return{type:"array",of:{type:"unknown"}};return t},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"concat([1, 2], [3, 4])",output:"[1, 2, 3, 4]"},{input:'concat(["a", "b"], ["c", "d"])',output:'["a", "b", "c", "d"]'}],[{input:"[1, 2].concat([3, 4])",output:"[1, 2, 3, 4]"},{input:'["a", "b"].concat(["c", "d"])',output:'["a", "b", "c", "d"]'}]],syntax:["concat(list, list2, ...)","list.concat(list2, ...)"],description:M.concat},sort:{name:"sort",eval:function*(e,t){const[n]=e;k("array"===n.type);const a=n.values.filter((e=>"undefined"!==e.type));return{type:"array",values:yield*(0,T.Ex)(a,t)}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"sort([3, 1, 2])",output:"[1, 2, 3]"},{input:'sort(["Yash", "Stephen", "Paul", "Simon", "Ryo"])',output:'["Paul", "Ryo", "Simon", "Stephen", "Yash"]'}],[{input:"[3, 1, 2].sort()",output:"[1, 2, 3]"},{input:'["Yash", "Stephen", "Paul", "Simon", "Ryo"].sort()',output:'["Paul", "Ryo", "Simon", "Stephen", "Yash"]'}]],syntax:["sort(list)","list.sort()"],description:M.sort},reverse:{name:"reverse",eval:function*(e,t){const[n]=e;k("array"===n.type);return{type:"array",values:[...n.values].reverse()}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'reverse(["green", "eggs", "ham"])',output:'["ham", "eggs", "green"]'}],[{input:'["green", "eggs", "ham"].reverse()',output:'["ham", "eggs", "green"]'}]],syntax:["reverse(list)","list.reverse()"],description:M.reverse},join:{name:"join",eval:function*(e,t){const[n,a]=e;k("array"===n.type&&"text"===a.type);const r=n.values.map((e=>(0,T.j4)(e)));return{type:"text",value:(0,c.Zxt)((0,l.Z)(r,(()=>a.value)).flat())}},parameters:{expected:[{name:"input",type:{type:"array",of:{type:"unknown"}}},{name:"joiner",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'join(["a", "b", "c"], ", ")',output:'"a, b, c"'},{input:'join(["dog", "go"], "")',output:'"doggo"'}],[{input:'["a", "b", "c"].join(", ")',output:'"a, b, c"'},{input:'["dog", "go"].join("")',output:'"doggo"'}]],syntax:["join(list, joiner)","list.join(joiner)"],description:M.join},split:{name:"split",eval:function*(e,t){const[n,a]=e;k("text"===n.type),k(void 0===a||"text"===a.type);const r=yield*(0,T.PX)(n.value,t);if(""===r)return{type:"array",values:[]};const o=a?yield*(0,T.PX)(a.value,t):void 0,i=" "===o||void 0===o,s=i?/\s+/:o;return{type:"array",values:r.split(s).filter((e=>!i||e.length>0)).map((e=>({type:"text",value:(0,c.TPx)(e)})))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"separator",optional:!0,type:{type:"text"}}]},returnType:{type:"array",of:{type:"text"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'split("apple,pear,orange", ",")',output:'["apple", "pear", "orange"]'}],[{input:'"apple,pear,orange".split(",")',output:'["apple", "pear", "orange"]'}]],syntax:["split(text, separator)","text.split(separator)"],description:M.split},unique:{name:"unique",eval:function*(e,t){const[n]=e;k("array"===n.type);const a=[];for(const r of n.values){(yield*(0,T.LD)(a.map((e=>(0,T.Jr)(e,r,t))))).some((e=>e))||a.push(r)}return{type:"array",values:a}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"unique([1, 1, 2])",output:"[1, 2]"}],[{input:"[1, 1, 2].unique()",output:"[1, 2]"}]],syntax:["unique(list)","list.unique()"],description:M.unique},includes:{name:"includes",eval:function*(e,t){const[n,a]=e;k("array"===n.type);for(const r of n.values){if(yield*(0,T.Jr)(r,a,t))return{type:"checkbox",value:!0}}return{type:"checkbox",value:!1}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"needle",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'includes(["a", "b", "c"], "b")',output:"true"},{input:"includes([1, 2, 3], 4)",output:"false"}],[{input:'["a", "b", "c"].includes("b")',output:"true"},{input:"[1, 2, 3].includes(4)",output:"false"}]],syntax:["includes(list, search)","list.includes(search)"],description:M.includes},find:{name:"find",eval:function*(e,t){const[n,a]=e;k("array"===n.type);const r=yield*F(n.values,a,t);return n.values.find(((e,t)=>(0,T.vh)(r[t])))??{type:"undefined"}},parameters:S,returnType:e=>{let[t,n]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"text"},examples:[[{input:'find(["a", "b", "c"], current == "b")',output:'"b"'},{input:"find([1, 2, 3], current > 100)",output:"Empty"}],[{input:'["a", "b", "c"].find(current == "b")',output:'"b"'},{input:"[1, 2, 3].find(current > 100)",output:"Empty"}]],syntax:["find(list, condition)","list.find(condition)"],description:M.find},findIndex:{name:"findIndex",eval:function*(e,t){const[n,a]=e;k("array"===n.type);return{type:"number",value:(yield*F(n.values,a,t)).findIndex((e=>(0,T.vh)(e)))}},parameters:S,returnType:{type:"number"},iconType:{type:"text"},examples:[[{input:'findIndex(["a", "b", "c"], current == "b")',output:"1"},{input:"findIndex([1, 2, 3], current > 100)",output:"-1"}],[{input:'["a", "b", "c"].findIndex(current == "b")',output:"1"},{input:"[1, 2, 3].findIndex(current > 100)",output:"-1"}]],syntax:["findIndex(list, condition)","list.findIndex(condition)"],description:M.findIndex},filter:{name:"filter",eval:function*(e,t){const[n,a]=e;k("array"===n.type);const r=yield*F(n.values,a,t);return{type:"array",values:n.values.filter(((e,t)=>(0,T.vh)(r[t])))}},parameters:S,returnType:e=>{let[t,n]=e;return"array"===(null==t?void 0:t.type)?t:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"filter([1, 2, 3], current > 1)",output:"[2, 3]"},{input:'filter(["a", "b", "c"], current == "a")',output:'["a"]'}],[{input:"[1, 2, 3].filter(current > 1)",output:"[2, 3]"},{input:'["a", "b", "c"].filter(current == "a")',output:'["a"]'}]],syntax:["filter(list, condition)","list.filter(condition)"],description:M.filter},some:{name:"some",eval:function*(e,t){const[n,a]=e;k("array"===n.type);return{type:"checkbox",value:(yield*F(n.values,a,t)).some((e=>(0,T.vh)(e)))}},parameters:S,returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"some([1, 2, 3], current == 2)",output:"true"},{input:'some(["a", "b", "c"], current.length > 2)',output:"false"}],[{input:"[1, 2, 3].some(current == 2)",output:"true"},{input:'["a", "b", "c"].some(current.length > 2)',output:"false"}]],syntax:["some(list, expression)","list.some(expression)"],description:M.some},every:{name:"every",eval:function*(e,t){const[n,a]=e;k("array"===n.type);return{type:"checkbox",value:(yield*F(n.values,a,t)).every((e=>(0,T.vh)(e)))}},parameters:S,returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"every([1, 2, 3], current > 0)",output:"true"},{input:'every(["a", "b", "c"], current == "b")',output:"false"}],[{input:"[1, 2, 3].every(current > 0)",output:"true"},{input:'["a", "b", "c"].every(current == "b")',output:"false"}]],syntax:["every(list, condition)","list.every(condition)"],description:M.every},map:{name:"map",eval:function*(e,t){const[n,a]=e;return k("array"===n.type),{type:"array",values:yield*F(n.values,a,t)}},parameters:S,returnType:e=>{let[t,n]=e;return{type:"array",of:n??{type:"unknown"}}},iconType:{type:"array",of:{type:"text"}},examples:[[{input:"map([1, 2, 3], current + 1)",output:"[2, 3, 4]"},{input:"map([1, 2, 3], current + index)",output:"[1, 3, 5]"}],[{input:"[1, 2, 3].map(current + 1)",output:"[2, 3, 4]"},{input:"[1, 2, 3].map(current + index)",output:"[1, 3, 5]"}]],syntax:["map(list, expression)","list.map(expression)"],description:M.map},flat:{name:"flat",eval:function*(e,t){const[n]=e;k("array"===n.type);const a=[];for(const r of n.values)"array"===r.type?a.push(...r.values):a.push(r);return{type:"array",values:a}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e,n={type:"unknown"};return"array"===(null==t?void 0:t.type)&&(n="array"===t.of.type?t.of.of:t.of),{type:"array",of:n}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"flat([1, 2, 3])",output:"[1, 2, 3]"},{input:"flat([[1, 2], [3, 4]])",output:"[1, 2, 3, 4]"}],[{input:"[1, 2, 3].flat()",output:"[1, 2, 3]"},{input:"[[1, 2], [3, 4]].flat()",output:"[1, 2, 3, 4]"}]],syntax:["flat(list, list2?, ...)","list.flat(list2?, ...)"],description:M.flat},id:{name:"id",eval:function*(e,t){const[n]=e;if(!n){var a;const e=null===(a=t.values.find((e=>e.kind===h.yp.ThisRow)))||void 0===a?void 0:a.value;if("block"!==(null==e?void 0:e.type))throw new g.Mu({type:g.sj.TryingToGetIdWithoutThisRow});return{type:"text",value:(0,c.TPx)((0,d.cj)(e.value.id))}}return k("block"===n.type),{type:"text",value:(0,c.TPx)((0,d.cj)(n.value.id))}},parameters:{expected:[{name:"block",type:{type:"block"},optional:!0}]},returnType:{type:"text"},iconType:{type:"text"},syntax:["id(block?)","block.id()"],examples:[[{input:"id()"},{input:"id(block)"}],[{input:"block.id()"}]],description:M.id},equal:{name:"equal",eval:function*(e,t){const[n,a]=e;return{type:"checkbox",value:yield*(0,T.Jr)(n,a,t)}},parameters:{expected:[{name:"lhs",type:{type:"unknown"}},{name:"rhs",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"equal(1, 1)",output:"true"},{input:'"a" == "b"',output:"false"}],[{input:"1.equal(1)",output:"true"},{input:'"a" == "b"',output:"false"}]],syntax:["equal(value, value)","value.equal(value)"],description:M.equal},unequal:{name:"unequal",eval:function*(e,t){const[n,a]=e;return{type:"checkbox",value:!(yield*(0,T.Jr)(n,a,t))}},parameters:{expected:[{name:"lhs",type:{type:"unknown"}},{name:"rhs",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"unequal(1, 2)",output:"true"},{input:'"a" != "a"',output:"false"}],[{input:"1.unequal(2)",output:"true"},{input:'"a" != "a"',output:"false"}]],syntax:["unequal(value, value)","value.unequal(value)"],description:M.unequal},let:{name:"let",eval:function*(e,t){const[n,a,r]=e;if(n.kind!==g.bG.Identifier)throw new g.Mu({type:g.sj.LetBindingNameNotIdentifier,node:n});return yield*(0,v.vW)(r,{...t,values:[{kind:h.yp.Binding,id:n.text,value:yield*(0,v.vW)(a,t)},...t.values]})},parameters:{expected:[{name:"identifier",type:{type:"expression"}},{name:"value",type:{type:"expression"}},{name:"expression",type:{type:"expression"}}]},returnType:e=>{let[t,n,a]=e;return a??{type:"unknown"}},iconType:{type:"text"},examples:[[{input:'let(name, "Doug Engelbart", "Hello, " + name + "!")',output:'"Hello, Doug Engelbart!"'},{input:"let(radius, 4, round(pi() * radius ^ 2))",output:"50"}],[{input:'name.let("Alan Kay", "Hello, " + name + "!")',output:'"Hello, Alan Kay!"'},{input:"radius.let(4, round(pi() * radius ^ 2)",output:"50"}]],syntax:["let(variable, value, expression)","variable.let(value, expression)"],description:M.let},lets:{name:"lets",eval:function*(e,t){const n=e;if(n.length<3||n.length%2!=1)throw new g.Mu({type:g.sj.NotEnoughArguments});const a={...t};for(let o=0;o<n.length-1;o+=2){const e=n[o],t=n[o+1];if(e.kind!==g.bG.Identifier)throw new g.Mu({type:g.sj.LetBindingNameNotIdentifier,node:e});a.values=[{kind:h.yp.Binding,id:e.text,value:yield*(0,v.vW)(t,a)},...a.values]}const r=n[n.length-1];return yield*(0,v.vW)(r,a)},parameters:{varargs:[{name:"args",type:{type:"expression"}}]},returnType:e=>e[e.length-1]??{type:"unknown"},iconType:{type:"text"},examples:[[{input:'lets(a, "Hello", b, "world", a + " " + b)',output:'"Hello world"'},{input:"lets(base, 3, height, 8, base * height / 2)",output:"12"}],[]],syntax:["lets(variable, value, variable2, value2, ..., expression)","variable.lets(value, variable2, value2, ..., expression)"],description:M.lets}},A=["block","array","person"],B=["let","lets"]},3067:(e,t,n)=>{n.d(t,{QP:()=>p,h0:()=>l,um:()=>d});n(30541),n(57658);var a=n(5366),r=n(2032),o=n(70203),i=n(84116),s=n(78106);const u=(0,a.defineMessages)({property:{id:"formula2Input.propertyHelper.descriptionGeneric",defaultMessage:"Database property."},titlePropertyDescription:{id:"formulaLibrary.property.title.description",defaultMessage:"Title property."},textPropertyDescription:{id:"formulaLibrary.property.text.description",defaultMessage:"Text property."},urlPropertyDescription:{id:"formulaLibrary.property.url.description",defaultMessage:"URL property."},emailPropertyDescription:{id:"formulaLibrary.property.email.description",defaultMessage:"Email property."},phoneNumberPropertyDescription:{id:"formulaLibrary.property.phoneNumber.description",defaultMessage:"Phone number property."},selectPropertyDescription:{id:"formulaLibrary.property.select.description",defaultMessage:"Select property."},multiSelectPropertyDescription:{id:"formulaLibrary.property.multiSelect.description",defaultMessage:"Multi-select property, list."},statusPropertyDescription:{id:"formulaLibrary.property.status.description",defaultMessage:"Status property."},checkboxPropertyDescription:{id:"formulaLibrary.property.checkbox.description",defaultMessage:"Checkbox property."},datePropertyDescription:{id:"formulaLibrary.property.date.description",defaultMessage:"Date property."},personPropertyDescription:{id:"formulaLibrary.property.person.description",defaultMessage:"Person property, list."},relationPropertyDescription:{id:"formulaLibrary.property.relation.description",defaultMessage:"Relation property, list."},rollupPropertyDescriptionList:{id:"formulaLibrary.property.rollup.description",defaultMessage:"Rollup property, list."},rollupPropertyDescription:{id:"formulaLibrary.property.rollup.descriptionWithList",defaultMessage:"Rollup property."},numberPropertyDescription:{id:"formulaLibrary.property.number.description",defaultMessage:"Number property."},formulaPropertyDescription:{id:"formulaLibrary.property.formula.description",defaultMessage:"Formula property."},formulaPropertyDescriptionList:{id:"formulaLibrary.property.formula.descriptionWithList",defaultMessage:"Formula property, list."},createdTimePropertyDescription:{id:"formulaLibrary.property.createdTime.description",defaultMessage:"Created time property."},lastEditedTimePropertyDescription:{id:"formulaLibrary.property.lastEditedTime.description",defaultMessage:"Last edited time property."},createdByPropertyDescription:{id:"formulaLibrary.property.createdBy.description",defaultMessage:"Created by property."},lastEditedByPropertyDescription:{id:"formulaLibrary.property.lastEditedBy.description",defaultMessage:"Last edited by property."},filePropertyDescription:{id:"formulaLibrary.property.file.description",defaultMessage:"File property, list."},autoincrementIdDescription:{id:"formulaLibrary.property.autoincrementId.description",defaultMessage:"ID property."}}),p={title:{name:"title",type:{type:"text"},description:u.titlePropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),['.style("b")']],isCopyable:!0},{input:[l("Full Name"),['.split(" ").at(0)']]}]:[{input:[l("Title")]},{input:[l("Title"),['.style("b")']]},{input:[l("Name"),['.split(" ").at(0)']]}]},text:{name:"text",type:{type:"text"},description:u.textPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[["upper("],c(e),[")"]],isCopyable:!0},{input:[c(e),['.style("b", "red")']],isCopyable:!0}]:[{input:[["upper("],l("Name"),[")"]]},{input:[l("Name"),['.style("b", "red")']]}]},url:{name:"url",type:{type:"text"},description:u.urlPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[' ? link("Link", '],c(e),[').style("green") : ""']],isCopyable:!0}]:[{input:[l("URL"),[' ? link("Link", '],l("URL"),[').style("green") : ""']]}]},email:{name:"email",type:{type:"text"},description:u.emailPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[' ? link("Email", "mailto:" + '],c(e),[').style("blue") : ""']],isCopyable:!0}]:[{input:[l("Email"),[' ? link("Email", "mailto:" + '],l("Email"),[').style("blue") : ""']]}]},phone_number:{name:"phone_number",type:{type:"text"},description:u.phoneNumberPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[' ? link("Call", "tel:" + '],c(e),[').style("blue") : ""']],isCopyable:!0}]:[{input:[l("Email"),[' ? link("Call", "tel:" + '],l("Email"),[').style("blue") : ""']]}]},number:{name:"number",type:{type:"number"},description:u.numberPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[" / 2"]],isCopyable:!0},{input:[["pi() * "],c(e),[" ^ 2"]],isCopyable:!0}]:[{input:[l("Cost"),[" / "],l("Total Units")]},{input:[["pi() * "],l("Radius"),[" ^ 2"]]}]},select:{name:"select",type:{type:"text"},description:u.selectPropertyDescription,examples:e=>{const t=[{input:[l("Priority"),[' == "High"']]},{input:[['["Feature", "Bug"].includes('],l("Task Type"),[")"]]}];return e&&t.unshift({input:[c(e)],isCopyable:!0}),t}},multi_select:{name:"select",type:{type:"array",of:{type:"text"}},description:u.multiSelectPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[".length()"]],isCopyable:!0}]:[{input:[l("Tags"),[".length()"]]},{input:[l("Tags"),['.includes("Finance")']]}]},status:{name:"status",type:{type:"text"},description:u.statusPropertyDescription,examples:e=>"Status"===(null==e?void 0:e.name)?[{input:[c(e)],isCopyable:!0},{input:[c(e),[' == "Done"']],isCopyable:!0},{input:[['["Not started", "In progress"].includes('],c(e),[")"]],isCopyable:!0}]:[{input:[l("Status"),[' == "Done"']]},{input:[['["Not started", "In progress"].includes('],l("Status"),[")"]]}]},checkbox:{name:"checkbox",type:{type:"checkbox"},description:u.checkboxPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[["not "],c(e)],isCopyable:!0},{input:[l("Signed"),[" and "],l("Sealed"),[" and "],l("Delivered")]}]:[{input:[["not"],l("Done")]},{input:[l("Signed"),[" and "],l("Sealed"),[" and "],l("Delivered")]}]},date:{name:"date",type:{type:"date"},description:u.datePropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[" > now()"]],isCopyable:!0},{input:[c(e),['.dateAdd(1, "weeks")']],isCopyable:!0},{input:[["dateBetween("],c(e),[', now(), "days")']],isCopyable:!0}]:[{input:[l("Due Date"),[" > now()"]]},{input:[["formatDate("],l("Date"),[', "YYYY/MM/DD HH:mm")']]},{input:[["dateBetween("],l("Birthday"),[', now(), "days")']]}]},person:{name:"person",type:{type:"array",of:{type:"text"}},description:u.personPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[".length()"]],isCopyable:!0},{input:[c(e),[".at(0)"]],isCopyable:!0},{input:[c(e),[".map(current.email())"]],isCopyable:!0}]:[{input:[l("Participants"),[".at(0)"]]},{input:[l("Participants"),[".length()"]]}]},relation:{name:"relation",type:{type:"array",of:{type:"block"}},description:u.relationPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[".length()"]],isCopyable:!0},{input:[l("Tasks"),[".filter(current."],l("Status"),[' !== "Done")']]}]:[{input:[l("Tasks"),[".length()"]]},{input:[l("Tasks"),[".filter(current."],l("Status"),[' !== "Done")']]}]},rollup:{name:"rollup",type:e=>{if("rollup"===(null==e?void 0:e.type)&&("show_unique"===e.aggregation||void 0===e.aggregation))return{type:"array",of:{type:"unknown"}};if(e&&"aggregation"in e&&void 0!==e.aggregation){return{type:(0,r.W6)((0,r.gu)(e.aggregation))}}return{type:"unknown"}},description:e=>"rollup"!==(null==e?void 0:e.type)||"show_unique"!==e.aggregation&&void 0!==e.aggregation?u.rollupPropertyDescription:u.rollupPropertyDescriptionList,examples:(e,t)=>{let n;return n=!t||"rollup"!==(null==t?void 0:t.type)||"show_unique"!==t.aggregation&&void 0!==t.aggregation?[{input:[l("Average cost"),[" * 12"]]},{input:[l("Sum of customers"),[" > 100"]]}]:[void 0!==e?{input:[c(e),[".length()"]],isCopyable:!0}:{input:[l("Purchases"),[".length()"]]},{input:[["sum("],l("Purchases"),[".map(current."],l("Cost"),["))"]]}],e&&n.unshift({input:[c(e)],isCopyable:!0}),n}},file:{name:"file",type:{type:"array",of:{type:"text"}},description:u.filePropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[".length()"]],isCopyable:!0},{input:[c(e),['.filter(current.match(".pdf$"))']],isCopyable:!0},{input:[c(e),['.map(link("File", current))']],isCopyable:!0}]:[{input:[l("Attachments"),[".length()"]]},{input:[l("Attachments"),['.filter(current.match(".pdf$"))']]},{input:[l("Attachments"),['.map(link("File", current))']]}]},formula:{name:"formula",type:e=>{var t,n,a;return e&&"formula2"in e&&null!==(t=e.formula2)&&void 0!==t&&null!==(t=t.result_type)&&void 0!==t&&t.type?e.formula2.result_type:e&&"formula"in e&&null!==(n=e.formula)&&void 0!==n&&n.result_type?{type:null===(a=e.formula)||void 0===a?void 0:a.result_type}:{type:"unknown"}},description:e=>{var t;return e&&"formula2"in e&&"array"===(null===(t=e.formula2)||void 0===t||null===(t=t.result_type)||void 0===t?void 0:t.type)?u.formulaPropertyDescriptionList:u.formulaPropertyDescription},examples:(e,t)=>{var n,a;let r={type:"unknown"};if(t&&"formula2"in t&&null!==(n=t.formula2)&&void 0!==n&&null!==(n=n.result_type)&&void 0!==n&&n.type)r=t.formula2.result_type;else if(t&&"formula"in t&&null!==(a=t.formula)&&void 0!==a&&a.result_type){var o;r={type:null===(o=t.formula)||void 0===o?void 0:o.result_type}}if(!e)return[];const i=[{input:[c(e)],isCopyable:!0}];switch(r.type){case"array":switch(i.push({input:[c(e),[".length()"]],isCopyable:!0}),r.of.type){case"text":i.push({input:[c(e),['.join("\\n")']],isCopyable:!0});break;case"number":i.push({input:[c(e),[".sum()"]],isCopyable:!0});break;case"date":i.push({input:[c(e),['.map(dateBetween(now(), current, "days"))']],isCopyable:!0});break;case"person":i.push({input:[c(e),[".map(current.name())"]],isCopyable:!0});break;case"checkbox":i.push({input:[c(e),[".every(current == true)"]],isCopyable:!0});break;case"block":i.push({input:[l("Primary Tasks"),[".filter(current."],l("Status"),[' == "Done")']]})}break;case"number":i.push({input:[c(e),[" * 2 > 100"]],isCopyable:!0});break;case"text":i.push({input:[c(e),[".upper()"]],isCopyable:!0});break;case"date":i.push({input:[c(e),[" > now()"]],isCopyable:!0});break;case"person":i.push({input:[c(e),[".name()"]],isCopyable:!0});break;case"checkbox":i.push({input:[["not "],c(e)],isCopyable:!0});break;case"block":i.push({input:[l("Primary Task"),["."],l("Status")]})}return i}},created_time:{name:"created_time",type:{type:"date"},description:u.createdTimePropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),['.dateAdd(1, "weeks")']],isCopyable:!0},{input:[c(e),[' > dateSubtract(now(), 1, "years")']],isCopyable:!0}]:[{input:[d(i.vz.CreatedTime),['.dateAdd(1, "weeks")']]},{input:[d(i.vz.CreatedTime),[' > dateSubtract(now(), 1, "years")']]}]},last_edited_time:{name:"last_edited_time",type:{type:"date"},description:u.lastEditedTimePropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),['.dateAdd(1, "weeks")']],isCopyable:!0},{input:[c(e),[' > dateSubtract(now(), 1, "month")']],isCopyable:!0}]:[{input:[d(i.vz.LastEditedTime),['.dateAdd(1, "weeks")']]},{input:[d(i.vz.LastEditedTime),[' > dateSubtract(now(), 1, "month")']]}]},created_by:{name:"created_by",type:{type:"person"},description:u.createdByPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[".name()"]],isCopyable:!0},{input:[c(e),[".email()"]],isCopyable:!0}]:[{input:[d(i.vz.CreatedBy),[".name()"]]},{input:[d(i.vz.CreatedBy),[".email()"]]}]},last_edited_by:{name:"last_edited_by",type:{type:"person"},description:u.lastEditedByPropertyDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),[".name()"]],isCopyable:!0},{input:[c(e),[".email()"]],isCopyable:!0}]:[{input:[d(i.vz.LastEditedBy),[".name()"]]},{input:[d(i.vz.LastEditedBy),[".email()"]]}]},auto_increment_id:{name:"auto_increment_id",type:{type:"number"},description:u.autoincrementIdDescription,examples:e=>e?[{input:[c(e)],isCopyable:!0},{input:[c(e),['.split("-").first() /* Prefix */']],isCopyable:!0},{input:[c(e),['.split("-").last().toNumber() /* ID */']],isCopyable:!0}]:[{input:[l("ID Code")]},{input:[l("Task ID"),['.split("-").first() /* Prefix */']],output:'"TASK"'},{input:[l("Task ID"),['.split("-").last().toNumber() /* ID */']],output:"123"}]},button:null,location:null,last_visited_time:null,verification:null};function l(e){return(0,o.YCD)((0,o.kbv)({collection:void 0,name:e,property:""}))}function d(e){return(0,o.YCD)((0,o.kbv)({collection:void 0,name:(0,s.Ve)(e),property:e}))}function c(e){return(0,o.YCD)((0,o.kbv)(e))}},68602:(e,t,n)=>{n.d(t,{Gw:()=>s,YG:()=>i,mr:()=>r,o8:()=>o});var a=n(5366);const r=(0,a.defineMessages)({InvalidCharacter:{defaultMessage:'Invalid character "{errorCharacter}".',id:"formulas.formulaParseError.invalidCharacter"},UnclosedStringLiteral:{defaultMessage:"Unclosed string literal.",id:"formulas.formulaParseError.unclosedStringLiteral"},UnclosedComment:{defaultMessage:"Unclosed comment. Comments must be closed with a */ sequence.",id:"formulas.formulaParseError.unclosedComment"},TokenExpected:{defaultMessage:'Expected token "{expectedToken}".',id:"formulas.formulaParseError.tokenExpected"},StringLiteralContainsToken:{defaultMessage:"String literal contains token.",id:"formulas.formulaParseError.stringLiteralContainsToken"},ExpressionExpected:{defaultMessage:"Expression expected.",id:"formulas.formulaParseError.expressionExpected"},PropertyExpected:{defaultMessage:"Property token or function expected.",id:"formulas.formulaParseError.propertyExpected"},EndOfInputExpected:{defaultMessage:"End of input expected.",id:"formulas.formulaParseError.endOfInputExpected"},UnexpectedError:{defaultMessage:"Unexpected error.",id:"formulas.formulaParseError.unexpectedError"}}),o=(0,a.defineMessages)({ThisRowTypeNotFound:{defaultMessage:"Cannot find this row in context.",id:"formulas.formulaTypecheckerError.thisRowTypeNotFound"},ThisRowNotBlockWithCollection:{defaultMessage:"This row is not a block with a collection.",id:"formulas.formulaTypecheckerError.thisRowNotBlockWithCollection"},MissingPropertyOnThisRow:{defaultMessage:'Cannot find property "{propertyName}" on this row.',id:"formulas.formulaTypecheckerError.missingPropertyOnThisRow"},MissingContextVariable:{defaultMessage:"Cannot find context variable {valueId}.",id:"formulas.formulaTypecheckerError.missingContextVariable"},MissingBlock:{defaultMessage:"Could not find block {blockId}.",id:"formulas.formulaTypecheckerError.missingBlock"},CallingNotFunction:{defaultMessage:"Cannot call expression of type {expressionType}.",id:"formulas.formulaTypecheckerError.callingNotFunction"},FunctionCallTooFewArguments:{defaultMessage:"Function {functionName} expects {minNumParameters} arguments, but only {numArguments} were provided.",id:"formulas.formulaTypecheckerError.functionCallTooFewArguments"},FunctionCallUnexpectedArgument:{defaultMessage:"Function {functionName} received unexpected argument.",id:"formulas.formulaTypecheckerError.functionCallUnexpectedArgument"},FunctionCallArgumentWrongType:{defaultMessage:"Argument of type {argumentType} does not satisfy function {functionName}.",id:"formulas.formulaTypecheckerError.functionCallArgumentWrongType"},MemberPropertyMismatchCollection:{defaultMessage:"Token {propertyName} does not match block's collection.",id:"formulas.formulaTypecheckerError.memberPropertyMismatchCollection"},MemberPropertyMissing:{defaultMessage:'Cannot find property "{propertyName}" on collection.',id:"formulas.formulaTypecheckerError.memberPropertyMissing"},MemberPropertyTargetNotBlock:{defaultMessage:"Cannot access property on non-block.",id:"formulas.formulaTypecheckerError.memberPropertyTargetNotBlock"},MemberPropertyTypeInvalid:{defaultMessage:"Cannot access {propertyName} due to an unsupported property type.",id:"formulas.formulaTypecheckerError.memberInvalidPropertyType"},UndefinedIdentifier:{defaultMessage:"{identifier} is not defined.",id:"formulas.formulaTypecheckerError.undefinedIdentifier"},IdentifierExpected:{defaultMessage:"Expected identifier.",id:"formulas.formulaTypecheckerError.identifierExpected"},UnifiedFunctionCannotFindFunction:{defaultMessage:"Cannot find function {functionName}.",id:"formulas.formulaTypecheckerError.unifiedFunctionCannotFindFunction"},UnifiedFunctionNoArguments:{defaultMessage:"Function {functionName} does not expect any arguments.",id:"formulas.formulaTypecheckerError.unifiedFunctionNoArguments"},UnifiedFunctionTargetWrongType:{defaultMessage:"Cannot call {functionName} with target of type {targetType}.",id:"formulas.formulaTypecheckerError.unifiedFunctionTargetWrongType"},CannotRelativelyCompareTypes:{defaultMessage:"Cannot compare {lhsType} and {rhsType}.",id:"formulas.formulaTypecheckerError.cannotRelativelyCompareTypes"},CannotDoMathOnType:{defaultMessage:"Cannot do math on {lhsType} and {rhsType}.",id:"formulas.formulaTypecheckerError.cannotDoMathOnType"},UnaryMinusOnNonNumber:{defaultMessage:"Cannot apply minus to {type}.",id:"formulas.formulaTypecheckerError.unaryMinusOnNonNumber"},CircularDependency:{defaultMessage:"Circular dependency detected; this formula references itself.",id:"formulas.formulaTypecheckerError.circularDependency"},FunctionCallExpected:{defaultMessage:"Expected function {functionName}() to be called.",id:"formulas.formulaTypecheckerError.functionCallExpected"},RenamedIdentifier:{defaultMessage:'The function "{identifier}()" was renamed to "{renamedTo}()".',id:"formulas.formulaEvaluatorError.renamedIdentifier"},RemovedFunction:{defaultMessage:'The function "{functionName}()" was removed. You can use {alternative} instead.',id:"formulas.formulaEvaluatorError.removedFunction"}}),i=(0,a.defineMessages)({MissingThisRow:{defaultMessage:"Cannot find this row.",id:"formulas.formulaEvaluatorError.missingThisRow"},MissingSchemaPropertyOnThisRow:{defaultMessage:'Missing property "{propertyName}" on this row.',id:"formulas.formulaEvaluatorError.missingSchemaPropertyOnThisRow"},ThisRowBlockPropertyMismatchCollection:{defaultMessage:"This row property belongs to a different collection.",id:"formulas.formulaEvaluatorError.thisRowBlockPropertyMismatchCollection"},MissingContextVariable:{defaultMessage:'Missing context variable "{valueId}".',id:"formulas.formulaEvaluatorError.missingContextVariable"},IdentifierNotFound:{defaultMessage:'"{identifier}" is not defined.',id:"formulas.formulaEvaluatorError.identifierNotFound"},CannotRelativelyCompareTypes:{defaultMessage:'Cannot compare types "{lhsType}" and "{rhsType}".',id:"formulas.formulaEvaluatorError.cannotRelativelyCompareTypes"},CannotDoMathOnType:{defaultMessage:'Cannot do math on type "{valueType}".',id:"formulas.formulaEvaluatorError.cannotDoMathOnType"},CannotCallNonFunction:{defaultMessage:'Cannot call type "{calleeType}".',id:"formulas.formulaEvaluatorError.cannotCallNonFunction"},UnifiedFunctionPropertyNotFound:{defaultMessage:'Function "{functionName}" not found.',id:"formulas.formulaEvaluatorError.unifiedFunctionPropertyNotFound"},LibraryFunctionExecutionError:{defaultMessage:'Error occurred while calling "{functionName}".',id:"formulas.formulaEvaluatorError.libraryFunctionExecutionError"},FunctionCallTooFewArguments:{defaultMessage:'Called "{functionName}" with too few arguments.',id:"formulas.formulaEvaluatorError.functionCallTooFewArguments"},FunctionCallUnexpectedArgument:{defaultMessage:'Called "{functionName}" with unexpected argument.',id:"formulas.formulaEvaluatorError.functionCallUnexpectedArgument"},FunctionCallArgumentWrongType:{defaultMessage:'Called "{functionName}" with wrong argument type "{argumentType}".',id:"formulas.formulaEvaluatorError.functionCallArgumentWrongType"},AccessingPropertyOnNonBlock:{defaultMessage:"Target value is not a block.",id:"formulas.formulaEvaluatorError.accessingPropertyOnNonBlock"},AccessingUserPropertyOnNonPerson:{defaultMessage:"Target value is not a person.",id:"formulas.formulaEvaluatorError.accessingUserPropertyOnNonPerson"},MissingDataDependencyBlock:{defaultMessage:'Cannot find target block "{blockId}".',id:"formulas.formulaEvaluatorError.missingDataDependencyBlock"},MissingDataDependencyPerson:{defaultMessage:'Cannot find target person "{personId}".',id:"formulas.formulaEvaluatorError.missingDataDependencyPerson"},MemberPropertyMismatchCollection:{defaultMessage:"Cannot access property of a different collection.",id:"formulas.formulaEvaluatorError.memberPropertyMismatchCollection"},MissingPropertyOnSchemaForMemberProperty:{defaultMessage:"Cannot find property on collection.",id:"formulas.formulaEvaluatorError.missingPropertyOnSchemaForMemberProperty"},UnaryMinusOnNonNumber:{defaultMessage:"Cannot negate value of type {expressionType}.",id:"formulas.formulaEvaluatorError.unaryMinusOnNonNumber"},UnexpectedRecoveryNode:{defaultMessage:"Unexpected recovery node.",id:"formulas.formulaEvaluatorError.unexpectedRecoveryNode"},UnexpectedError:{defaultMessage:"Unexpected error.",id:"formulas.formulaEvaluatorError.unexpectedError"},DepthExceeded:{defaultMessage:"Maximum recursion depth exceeded.",id:"formulas.formulaEvaluatorError.depthExceeded"},CycleDetected:{defaultMessage:"Cycle detected in formula.",id:"formulas.formulaEvaluatorError.cycleDetected"},MaxEvaluationTimeExceeded:{defaultMessage:"Max Evaluation Time Exceeded.",id:"formulas.formulaEvaluatorError.maxEvaluationTimeExceeded"}}),s=(0,a.defineMessages)({true:{id:"formula2Input.builtin.true",defaultMessage:"The boolean value true."},false:{id:"formula2Input.builtin.false",defaultMessage:"The boolean value false."},and:{id:"formula2Input.builtin.and",defaultMessage:"The boolean operator and."},or:{id:"formula2Input.builtin.or",defaultMessage:"The boolean operator or."},not:{id:"formula2Input.builtin.not",defaultMessage:"Returns the opposite of a boolean value."},"+":{id:"formula2Input.builtin.plus",defaultMessage:"Adds two values together."},"-":{id:"formula2Input.builtin.subtract",defaultMessage:"Subtracts two numbers."},"*":{id:"formula2Input.builtin.mult",defaultMessage:"Multiplies two numbers."},"/":{id:"formula2Input.builtin.div",defaultMessage:"Divides two numbers."},"%":{id:"formula2Input.builtin.mod",defaultMessage:"The modulo operator, which returns the remainder of a division."},"^":{id:"formula2Input.builtin.pow",defaultMessage:"Raises a number to a power."},"==":{id:"formula2Input.builtin.eq",defaultMessage:"Checks if two values are equal."},"!=":{id:"formula2Input.builtin.neq",defaultMessage:"Checks if two values are not equal."},">":{id:"formula2Input.builtin.gt",defaultMessage:"Checks if the first value is greater than the second."},"<":{id:"formula2Input.builtin.lt",defaultMessage:"Checks if the first value is less than the second."},">=":{id:"formula2Input.builtin.ge",defaultMessage:"Checks if the first value is greater than or equal to the second."},"<=":{id:"formula2Input.builtin.le",defaultMessage:"Checks if the first value is less than or equal to the second."}})},73152:(e,t,n)=>{n.d(t,{Nh:()=>y,XR:()=>p,Z8:()=>c,mK:()=>f,s:()=>l});n(92087),n(21703);var a=n(77090),r=n(72126),o=n(6287),i=n(84116),s=n(47218),u=n(78106);const p=r.HP((()=>function(){const e=(0,a.V3)({name:"AdditionOperator",pattern:a.hW.NA}),t=(0,a.V3)({name:"UnaryOperator",pattern:a.hW.NA}),n=(0,a.V3)({name:"Plus",pattern:/\+/,categories:e}),r=(0,a.V3)({name:"Minus",pattern:/-/,categories:[e,t]}),s=(0,a.V3)({name:"ExclamationPoint",pattern:/!/,categories:t}),p=(0,a.V3)({name:"MultiplicationOperator",pattern:a.hW.NA}),l=(0,a.V3)({name:"Multi",pattern:/\*/,categories:p}),d=(0,a.V3)({name:"Div",pattern:/\//,categories:p}),c=(0,a.V3)({name:"Modulo",pattern:/%/,categories:p}),y=(0,a.V3)({name:"Caret",pattern:/\^/}),m=(0,a.V3)({name:"BooleanLiteral",pattern:a.hW.NA}),f=(0,a.V3)({name:"True",pattern:/true/i,categories:m}),h=(0,a.V3)({name:"False",pattern:/false/i,categories:m}),v=(0,a.V3)({name:"And",pattern:/and |&&/i}),b=(0,a.V3)({name:"Or",pattern:/or |\|\|/i}),x=(0,a.V3)({name:"Not",pattern:/not /i,categories:t}),g=(0,a.V3)({name:"RelationalOperator",pattern:a.hW.NA}),T=(0,a.V3)({name:"LessThan",pattern:/<=?/,categories:g}),k=(0,a.V3)({name:"GreaterThan",pattern:/>=?/,categories:g}),M=(0,a.V3)({name:"EqualityOperator",pattern:a.hW.NA}),E=(0,a.V3)({name:"Equal",pattern:/==/,categories:M}),w=(0,a.V3)({name:"NotEqual",pattern:/!=/,categories:M}),C=(0,a.V3)({name:"LParen",pattern:/\(/}),O=(0,a.V3)({name:"RParen",pattern:/\)/}),N=(0,a.V3)({name:"LBracket",pattern:/\[/}),D=(0,a.V3)({name:"RBracket",pattern:/\]/}),P=(0,a.V3)({name:"Comma",pattern:/,/}),R=(0,a.V3)({name:"Dot",pattern:/\./}),L=(0,a.V3)({name:"QuestionMark",pattern:/\?/}),S=(0,a.V3)({name:"Colon",pattern:/:/}),F=(0,a.V3)({name:"StringLiteral",pattern:/"(?:[^\\"]|\\.)*"/,start_chars_hint:['"']}),U=(0,a.V3)({name:"UnclosedStringLiteral",pattern:/"(?:[^\\"]|\\.)*/,start_chars_hint:['"']}),I=(0,a.V3)({name:"NumberLiteral",pattern:/(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?/}),A=(0,a.V3)({name:"Comment",pattern:/\/\*(?:[^*]|\*(?:[^\/]))*\*\//,group:a.hW.SKIPPED,start_chars_hint:["/*"]}),B=(0,a.V3)({name:"UnclosedComment",pattern:/\/\*(?:[^*]|\*(?:[^\/]))*/,group:a.hW.SKIPPED,start_chars_hint:["/*"]}),Y=(0,a.V3)({name:"InputToken",pattern:{exec:(e,t)=>{if(!e.startsWith(i.Eb,t))return null;const n=e.substring(t),a=i.kA.exec(n);if(null!==a){const e=[a[0]],t=(0,u.i0)(a[1]);let n;if(void 0!==a[2])n={type:i.Oy.BlockProperty,property:t,collection:{table:o.v,id:a[3],spaceId:a[4]}};else{if(!i.WG.includes(t))return null;n={type:i.Oy.BlockProperty,property:t,collection:void 0}}return e.payload=n,e}const r=i.QQ.exec(n);if(null!==r){const e=[r[0]],t={type:i.Oy.Block,blockId:r[1],spaceId:void 0!==r[2]?r[2].substring(1):void 0};return e.payload=t,e}const s=i.eO.exec(n);if(null!==s){const e=[s[0]],t={type:i.Oy.Person,userId:s[1]};return e.payload=t,e}const p=i.DF.exec(n);if(null!==p){const e=[p[0]],t={type:i.Oy.Checkbox,checked:"true"===p[1]};return e.payload=t,e}const l=i.Uq.exec(n);if(null!==l){const e=[l[0]],t=(0,u.wf)(l[1]),n={type:i.Oy.ContextValue,valueId:t};return e.payload=n,e}const d=i.Xm.exec(n);if(null!==d){const e=[d[0]],t={type:i.Oy.Date,date:(0,u.DF)(d[1])};return e.payload=t,e}return null}},line_breaks:!1,start_chars_hint:[i.Eb]}),_=(0,a.V3)({name:"IdentifierName",pattern:(V=/[\p{Letter}_][\p{Number}\p{Letter}_]*/u,(e,t)=>{const n=new RegExp(V.source,`${V.flags}y`);return n.lastIndex=t,n.exec(e)}),line_breaks:!1});var V;return{WhiteSpace:(0,a.V3)({name:"WhiteSpace",pattern:/\s+/,group:a.hW.SKIPPED}),NumberLiteral:I,StringLiteral:F,UnclosedStringLiteral:U,Comment:A,UnclosedComment:B,InputToken:Y,True:f,False:h,And:v,Or:b,Not:x,IdentifierName:_,Equal:E,NotEqual:w,Plus:n,Minus:r,ExclamationPoint:s,Multi:l,Div:d,Modulo:c,Caret:y,LParen:C,RParen:O,LBracket:N,RBracket:D,AdditionOperator:e,MultiplicationOperator:p,LessThan:T,GreaterThan:k,QuestionMark:L,Colon:S,Comma:P,Dot:R,UnaryOperator:t,EqualityOperator:M,RelationalOperator:g,BooleanLiteral:m}}()));const l=r.HP((e=>new a.hW(function(e){return Object.values(e)}(e))));class d extends a.wd{constructor(e){super(Object.values(e),{recoveryEnabled:!0,nodeLocationTracking:"onlyOffset"}),this.formulaTokens=void 0,this.expression=this.RULE("expression",(()=>{this.SUBRULE(this.conditionalExpression)})),this.primaryExpression=this.RULE("primaryExpression",(()=>{this.OR([{ALT:()=>this.SUBRULE(this.parenthesisExpression)},{ALT:()=>this.SUBRULE(this.arrayExpression)},{ALT:()=>this.CONSUME(this.formulaTokens.NumberLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.StringLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.UnclosedStringLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.BooleanLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.IdentifierName)},{ALT:()=>this.CONSUME(this.formulaTokens.InputToken)}])})),this.conditionalExpression=this.RULE("conditionalExpression",(()=>{this.SUBRULE(this.logicalOrExpression,{LABEL:"condition"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.QuestionMark),this.SUBRULE2(this.logicalOrExpression,{LABEL:"expIfTrue"}),this.CONSUME(this.formulaTokens.Colon),this.SUBRULE3(this.logicalOrExpression,{LABEL:"expIfFalse"})}))})),this.logicalOrExpression=this.RULE("logicalOrExpression",(()=>{this.SUBRULE(this.logicalAndExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.Or),this.SUBRULE2(this.logicalAndExpression,{LABEL:"rhs"})}))})),this.logicalAndExpression=this.RULE("logicalAndExpression",(()=>{this.SUBRULE(this.equalityExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.And),this.SUBRULE2(this.equalityExpression,{LABEL:"rhs"})}))})),this.equalityExpression=this.RULE("equalityExpression",(()=>{this.SUBRULE(this.relationalExpression,{LABEL:"lhs"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.EqualityOperator),this.SUBRULE2(this.relationalExpression,{LABEL:"rhs"})}))})),this.relationalExpression=this.RULE("relationalExpression",(()=>{this.SUBRULE(this.additionExpression,{LABEL:"lhs"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.RelationalOperator),this.SUBRULE2(this.additionExpression,{LABEL:"rhs"})}))})),this.additionExpression=this.RULE("additionExpression",(()=>{this.SUBRULE(this.multiplicationExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.AdditionOperator),this.SUBRULE2(this.multiplicationExpression,{LABEL:"rhs"})}))})),this.multiplicationExpression=this.RULE("multiplicationExpression",(()=>{this.SUBRULE(this.exponentiationExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.MultiplicationOperator),this.SUBRULE2(this.exponentiationExpression,{LABEL:"rhs"})}))})),this.exponentiationExpression=this.RULE("exponentiationExpression",(()=>{this.SUBRULE(this.unaryExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.Caret),this.SUBRULE2(this.unaryExpression,{LABEL:"rhs"})}))})),this.unaryExpression=this.RULE("unaryExpression",(()=>{this.OPTION((()=>{this.CONSUME(this.formulaTokens.UnaryOperator)})),this.SUBRULE(this.primaryExpression),this.MANY((()=>{this.SUBRULE2(this.memberCallSubExpression)}))})),this.memberCallSubExpression=this.RULE("memberCallSubExpression",(()=>{this.OR([{ALT:()=>this.SUBRULE(this.dotMemberExpression)},{ALT:()=>this.SUBRULE(this.callArguments)}])})),this.dotMemberExpression=this.RULE("dotMemberExpression",(()=>{this.CONSUME(this.formulaTokens.Dot),this.OR([{ALT:()=>this.CONSUME(this.formulaTokens.IdentifierName)},{GATE:()=>{var e;const t=this.LA(1);return t.tokenType===this.formulaTokens.InputToken&&(null===(e=t.payload)||void 0===e?void 0:e.type)===i.Oy.BlockProperty},ALT:()=>this.CONSUME(this.formulaTokens.InputToken)}])})),this.callArguments=this.RULE("callArguments",(()=>{this.CONSUME(this.formulaTokens.LParen),this.OPTION((()=>{this.SUBRULE(this.expression),this.MANY((()=>{this.CONSUME(this.formulaTokens.Comma),this.SUBRULE2(this.expression)}))})),this.CONSUME(this.formulaTokens.RParen)})),this.parenthesisExpression=this.RULE("parenthesisExpression",(()=>{this.CONSUME(this.formulaTokens.LParen),this.SUBRULE(this.expression),this.CONSUME(this.formulaTokens.RParen)})),this.arrayExpression=this.RULE("arrayExpression",(()=>{this.CONSUME(this.formulaTokens.LBracket),this.OPTION((()=>{this.SUBRULE(this.expression),this.MANY((()=>{this.CONSUME(this.formulaTokens.Comma),this.SUBRULE2(this.expression)}))})),this.CONSUME(this.formulaTokens.RBracket)})),this.formulaTokens=e,this.performSelfAnalysis()}}const c=r.HP((e=>new d(e)));function y(e){const t=/unexpected character: ->(.+)<- at offset/.exec(e.message);if(null!==t)return{type:s.$E.InvalidCharacter,character:t[1],offset:e.offset};if("unclosed string literal"===e.message)return{type:s.$E.UnclosedStringLiteral,offset:e.offset};if("unclosed comment"===e.message)return{type:s.$E.UnclosedComment,offset:e.offset};throw new Error(`Unhandled chevrotain recognition error: ${e.message}`)}const m={RParen:")",RBracket:"]",Colon:":"};function f(e){const t=e.token.tokenType===a.sd?"eof":e.token.startOffset;switch(e.name){case"MismatchedTokenException":{const n=/Expecting token of type --> (.+) <-- but found/.exec(e.message);if(null!==n){const e=n[1],a=m[e];if(void 0!==a)return{type:s.$E.TokenExpected,token:a,offset:t}}break}case"NoViableAltException":{const n=e.context.ruleStack[e.context.ruleStack.length-1];switch(n){case"primaryExpression":return{type:s.$E.ExpressionExpected,offset:t};case"dotMemberExpression":return{type:s.$E.PropertyTokenOrFunctionExpected,offset:t}}throw new Error(`Unhandled unviable alt: ${n}`)}case"NotAllInputParsedException":return{type:s.$E.EndOfInputExpected,offset:t}}return{type:s.$E.UnexpectedError,error:new Error(`Unhandled chevrotain recognition error: ${e.name}`),offset:t}}},83158:(e,t,n)=>{n.d(t,{K:()=>s});n(57658);var a=n(84116),r=n(51849),o=n(73152),i=n(47218);function s(e,t){const n=(0,o.XR)(),s=(0,o.s)(n).tokenize(e),u=[...s.errors],p=[];for(const a of u)p.push((0,o.Nh)(a));for(const a of s.tokens.filter((e=>e.tokenType===n.UnclosedStringLiteral||e.tokenType===n.UnclosedComment)))p.push({type:a.tokenType===n.UnclosedStringLiteral?i.$E.UnclosedStringLiteral:i.$E.UnclosedComment,offset:t?(0,r.aU)(t,a.startOffset,"left"):a.startOffset});for(const o of s.tokens.filter((e=>e.tokenType===n.StringLiteral)))a.zF.test(o.image)&&p.push({type:i.$E.StringLiteralContainsToken,offset:t?(0,r.aU)(t,o.startOffset,"left"):o.startOffset});const l=(0,o.Z8)(n);l.input=s.tokens;const d=l.expression();for(const a of l.errors)p.push((0,o.mK)(a));return[d,p]}}}]);