"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8586],{63923:(e,t,i)=>{i.d(t,{Op:()=>N,DN:()=>U,Oq:()=>z});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=(i(57658),i(67294)),l=i(41432),d=i(88437),c=i(66466),u=i(79310),m=i(37612);const p=(0,i(45238).I)("unstar",{viewBox:"0 0 16 16",svg:s()("path",{d:"M11.6641 9.32227L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L6.22949 3.9082L7.2002 4.87207L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.7754 8.44043L11.6641 9.32227ZM13.9268 14.2783C14.1387 14.4902 14.4941 14.4902 14.6992 14.2783C14.9043 14.0664 14.9111 13.7246 14.6992 13.5127L3.44043 2.28809C3.22852 2.07617 2.87988 2.06934 2.66797 2.28809C2.46289 2.49316 2.46289 2.84863 2.66797 3.05371L13.9268 14.2783ZM3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4092 14.9961 12.7441 14.7637C12.8193 14.709 12.8672 14.6406 12.9629 14.5107L8.3418 10.7236C8.10254 10.5254 7.84277 10.5391 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L4.88281 6.42383L3.67969 5.2207L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637Z"})});var g=i(5366),h=i(50906),f=i(3297),v=i(42858),y=i(74647),S=i(21325),b=i(39699),M=i(52275),w=i(31278),C=i(72495),_=i(19037),k=i(28020),T=i(38755),I=i(80444),P=i(49386),x=i(82763),Z=i(29768),F=i(62967),A=i(42784),E=i(2295),B=i(6471),R=i(5337);const D=(0,g.defineMessages)({unpinName:{id:"action.unpin.name",defaultMessage:"Remove from sidebar"},leaveName:{id:"action.leave.name",defaultMessage:"Leave"},removefromFavoritesName:{id:"action.removefromFavorites.name",defaultMessage:"Remove from Favorites"},duplicateToPrivateName:{id:"action.duplicateToPrivate.name",defaultMessage:"Duplicate to Private"},duplicateToName:{id:"action.duplicateTo.name",defaultMessage:"Duplicate to"}}),L=(0,F.cN)({key:"remove pinned shared page",displayName:D.unpinName,analyticsName:D.unpinName.defaultMessage,svg:u.A,validators:[_.cW,_.uq],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i}=e;const{currentSpaceViewStore:a,currentUserSettingsStore:n}=I.default.state;a&&n&&(b.createAndCommit({userAction:"actionRegistry.removePinnedSharedPage",environment:i,perform:e=>{for(const o of t)y.unpinSharedPage({environment:i,transaction:e,spaceViewStore:a,userSettingsStore:n,store:o})}}),h.An9(i,{type:"shared",from:"sidebar_dropdown_menu"}))}}),N=(0,F.cN)({key:"delete block without shortcuts",displayName:F.RE.deleteName,analyticsName:F.RE.deleteName.defaultMessage,svg:m.y,validators:[_.DF,_.eo,_.ff(_.sR),_.ff(_.P9(l.Ti.externalObjectInstancePage)),_.vd],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:i}=e;await v.Qw({environment:i,blocks:t})}}),O=(0,F.cN)({key:"leave shared page",displayName:D.leaveName,analyticsName:D.leaveName.defaultMessage,svg:c.S,validators:[_.cW,_.zl,_.ff(_.uq)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i}=e;b.createAndCommit({userAction:"actionRegistry.leaveSharedPage",environment:i,perform:e=>{y.leaveBlocks({environment:i,blocks:t,transaction:e})}})}}),V=(0,F.cN)({key:"remove from favorites",displayName:D.removefromFavoritesName,analyticsName:D.removefromFavoritesName.defaultMessage,svg:p,validators:[_.UI,_.U7,_.ff(_.xD([_.uq,_.cW]))],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i}=e;const{currentSpaceViewStore:a}=I.default.state;a&&b.createAndCommit({userAction:"actionRegistry.removeFromFavorites",environment:i,perform:e=>{y.unbookmarkPage({spaceViewStore:a,store:t[0],transaction:e})}})}}),U=(0,F.cN)({key:"duplicate into private",displayName:D.duplicateToPrivateName,analyticsName:D.duplicateToPrivateName.defaultMessage,svg:d.a,validators:[_.ff(_.sR),_.DF,_.J5,_.ff(_.nJ),_.or([_.cW,_.ff(_.KE),_.b1])],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:i}=e;if(!S.M_(i))return;const a=t[0],n=I.default.state.currentSpaceStore,o=I.default.state.currentSpaceViewStore;n&&o&&await f.DK({environment:i,store:a,spaceStore:n,spaceViewStore:o,isPrivate:!0,context:"duplicate_to_private_space"})}}),W=(0,F.MV)({key:"duplicate to workspace",displayName:D.duplicateToName,analyticsName:D.duplicateToName.defaultMessage,svg:d.a,validators:[_.DF,_.nJ,_.zz,_.ff(_.KE),_.Jl],subActions:e=>{let{blocks:t,environment:i}=e;const{currentUserRootStore:a}=I.default.state;if(!a)return[];const o=t[0],l=k.o(a),d=[];for(const c of l){const e=c.getSpaceStore();if(e){const t=(0,T.rn)(i,e),a=(0,T.Wd)(i,e);d.push({key:c.id,displayName:t||"",analyticsName:"Duplicate to workspace",searchName:t||"",closeParentMenu:!0,action:async()=>{await f.DK({environment:i,store:o,spaceStore:e,spaceViewStore:c,isPrivate:!0,context:"duplicate_to_another_space"})},render:(e,i)=>{let{environment:o}=i;return r.createElement(M.Z,n()({title:t,icon:s()(w.Z,{icon:a,isEmptyPage:!1,title:t,size:o.device.isMobile?24:20,disabled:!0})},e))}})}}return[(0,F.$J)({key:"duplicate-to",render:e=>r.createElement(C.Z,e),actions:d})]}}),z=[A.ww,{key:"outliner primary actions",render:e=>r.createElement(C.Z,e),actions:[L,N,O,P._p,V,Z.A,U,W,x.H,x.K,P.Dw,P.IK,B.$]},{key:"outliner move actions",render:e=>r.createElement(C.Z,e),actions:[E.A]},{key:"turn page into teamspace or wiki",render:e=>r.createElement(C.Z,e),actions:[R.NO,R.LM,R.BW]}]},68714:(e,t,i)=>{i.d(t,{l:()=>f});var a=i(10434),n=i.n(a),o=i(67294),s=i(8848),r=i(23174),l=i.n(r);const d=(0,i(45238).I)("reportPage",{viewBox:"0 0 13 14",svg:l()("path",{d:"M.832 13.846c.349 0 .636-.28.636-.636V9.47a4.696 4.696 0 011.634-.273c2.488 0 4.156 1.244 6.562 1.244 1.053 0 1.538-.13 2.065-.376.492-.218.779-.622.779-1.25v-6.81c0-.45-.349-.73-.814-.73-.39 0-1.005.26-2.098.26C7.216 1.534 5.515.29 3.033.29 2.001.29 1.53.42.976.666.49.892.189 1.247.189 1.869V13.21c0 .349.294.636.643.636zm8.805-4.703c-2.215 0-3.931-1.238-6.508-1.238-.663 0-1.265.075-1.627.212v-6.07c.123-.198.629-.465 1.552-.465 2.33 0 4.047 1.244 6.514 1.244.657 0 1.21-.075 1.627-.191v6.05c-.116.198-.635.458-1.558.458z",fill:"#ED6A5F"})});var c=i(5366),u=i(360),m=i(93405),p=i(19037),g=i(62967);const h=(0,c.defineMessages)({reportPageName:{id:"action.reportPage.name",defaultMessage:"Report page"}}),f=(0,g.cN)({key:"action report page",displayName:h.reportPageName,analyticsName:h.reportPageName.defaultMessage,validators:[p.Gg,p.iK,p.Id],closeParentMenu:!0,render:e=>o.createElement(m.Z,n()({},e,{style:{color:s.ZP.red},svg:d,title:o.createElement(c.FormattedMessage,h.reportPageName)})),action:e=>{let{blocks:t,environment:i}=e;u.l()}})},5337:(e,t,i)=>{i.d(t,{NO:()=>D,LM:()=>B,BW:()=>N,bV:()=>V,R$:()=>U});var a=i(23174),n=i.n(a),o=i(67294),s=i(62208),r=i(73039),l=i(55863),d=i(70203),c=i(82990),u=i(5366),m=i(47307),p=i(39699),g=i(29919),h=i(72495),f=i(10434),v=i.n(f),y=i(24405),S=i(98742),b=i(93405),M=i(74420),w=i(26388);function C(e){let{menuListItemProps:t,title:i,caption:a,icon:s,disabled:r,tooltipText:l,showNewBadge:d}=e;window.__c={n:"CreateFromPageMenuItem"};const c=(0,y.yK)((()=>({menuItem:{WebkitBackfaceVisibility:"hidden"},caption:{whiteSpace:"pre-wrap"}})),[]);return n()(w.Z,{placement:w.Z.Placement.Right,textWrap:!1,disableTooltip:!l,renderTooltip:()=>l,render:e=>o.createElement(b.Z,v()({},(0,S.Z)(t,e),{style:c.menuItem,title:i,caption:a,captionStyle:a?c.caption:void 0,svg:s,disabled:r,disabledFeedback:r,right:d&&n()(M.Z,{})}))})}var _=i(19037),k=i(8323),T=i(95697),I=i(77080),P=i(21884),x=i(8053),Z=i(62967),F=i(11732);const A=(0,u.defineMessages)({createTeamFromPageFullName:{id:"action.createTeamFromPage.fullName",defaultMessage:"Turn into teamspace"},createTeamFromPageCaption:{id:"action.createTeamFromPage.caption",defaultMessage:"Space for your team to customize permissions and collaborate"},createTeamFromPageName:{id:"action.createTeamFromPage.name",defaultMessage:"Teamspace"},turnPageIntoWikiCaption:{id:"action.turnPageIntoWiki.caption",defaultMessage:"Organize by owner, tags, verification, and more"},turnPageIntoWikiName:{id:"action.turnPageIntoWiki.name",defaultMessage:"Wiki"},undoTurnPageIntoWikiName:{id:"action.undoTurnPageIntoWiki.name",defaultMessage:"Undo wiki"},turnPageIntoWikiFullName:{id:"action.turnPageIntoWiki.fullName",defaultMessage:"Turn into wiki"}}),E=(e,t)=>(0,Z.cN)({key:"turn page into team",displayName:t,analyticsName:A.createTeamFromPageFullName.defaultMessage,svg:s.z,validators:e,closeParentMenu:!0,render:(e,i)=>{const a=function(e){const{block:t,environment:i}=e;if(!i.currentUser.id)return;if(0===d.QaF(t.getTitleValue()).length)return n()(u.FormattedMessage,{defaultMessage:"Cannot turn page without a title into a Teamspace",id:"sidebar.turnPageIntoTeamButton.missingTitleDisabledTooltip"});if("private"===(0,T.Pr)(t).accessLevel&&!(0,k.Rs)())return n()(u.FormattedMessage,{defaultMessage:"Only Business Plans and above can turn a private page into a Teamspace",id:"sidebar.turnPageIntoTeamButton.privateTeamsOnlyOnBusinessPlansAndAboveDisabledTooltip"})}({environment:i.environment,block:i.blocks[0]});return n()(C,{menuListItemProps:e,title:o.createElement(u.FormattedMessage,t),caption:n()(u.FormattedMessage,{defaultMessage:A.createTeamFromPageCaption.defaultMessage,id:A.createTeamFromPageCaption.id}),disabled:Boolean(a),tooltipText:a,icon:r.K})},action:e=>{let{blocks:t,environment:i}=e;const a=t[0];x.VG({environment:i,page:a})}}),B=E([_.xD([_.jp,_.ff(_.KS)])],A.createTeamFromPageFullName),R=E([_.jp],A.createTeamFromPageName),D=(0,Z.MV)({key:"turn into teamspace or wiki",displayName:F.s.turnIntoSection,analyticsName:F.s.turnIntoSection.defaultMessage,svg:s.z,validators:[_.jp,_.KS],subActions:()=>[(0,Z.$J)({key:"turn into teamspace or wiki",render:e=>o.createElement(h.Z,e),actions:[R,O]})],width:300}),L=(e,t)=>(0,Z.cN)({key:"turn page into wiki",displayName:t,analyticsName:A.turnPageIntoWikiFullName.defaultMessage,svg:s.z,validators:e,closeParentMenu:!0,action:e=>{let{environment:t,blocks:i}=e;"bottom_right"===I.default.getEligibleGroup({experimentId:"wiki_education_convert_modal",defaultGroup:"control"})?P.E.setState({showConvertTooltip:!1,forceShow:!0}):p.createAndCommit({userAction:"actionRegistry.turnIntoAction.wiki",environment:t,perform:e=>{g.Y({environment:t,blocks:i,transaction:e,source:"page_menu"})}})},render:e=>n()(C,{menuListItemProps:e,title:o.createElement(u.FormattedMessage,t),disabled:!1,icon:s.z,caption:o.createElement(u.FormattedMessage,A.turnPageIntoWikiCaption)})}),N=L([_.xD([_.KS,_.ff(_.jp)])],A.turnPageIntoWikiFullName),O=L([_.KS],A.turnPageIntoWikiName);const V=L([_.KS],A.turnPageIntoWikiFullName),U=(0,Z.cN)({key:"undo turn page into wiki",displayName:A.undoTurnPageIntoWikiName,analyticsName:A.undoTurnPageIntoWikiName.defaultMessage,svg:l.s,validators:[_.U7,_.U_,_.ff(_.p1),_.f7,_.QL("wiki_database")],closeParentMenu:!0,action:async e=>{let{environment:t,blocks:i}=e;await m.confirmUserAction({message:n()("div",{style:{textAlign:"center"}},void 0,n()(u.FormattedMessage,{defaultMessage:"Are you sure you want to turn <bold>{pageName}</bold> back into a normal page?",id:"action.undoTurnIntoWiki.message",values:{pageName:d.QaF(i[0].getTitleValue()),bold:e=>n()("span",{style:{fontWeight:c.Z.fontWeight.semibold}},void 0,e)}})),description:n()("div",{style:{textAlign:"center"}},void 0,n()(u.FormattedMessage,{defaultMessage:"This will remove properties like owners and verification from your pages",id:"action.undoTurnIntoWiki.description"}))})&&p.createAndCommit({userAction:"actionRegistry.undoTurnIntoAction.wiki",environment:t,perform:e=>{g.Cq({environment:t,blocks:i,transaction:e,source:"page_menu"})}})}})},41311:(e,t,i)=>{i.d(t,{B3:()=>Z,T_:()=>x,XP:()=>T,bA:()=>P,h7:()=>F,w1:()=>k,y2:()=>I});i(57658);var a=i(45433),n=i(92785),o=i(4615),s=i(515),r=i(23867),l=i(64002),d=i(5366),c=i(95477),u=i(93959),m=i(91924),p=i(77907),g=i(80444),h=i(22756),f=i(67940),v=i(50906),y=i(54642),S=i(47307),b=i(84908),M=i(43181),w=i(15356),C=i(39699);const _=(0,d.defineMessages)({authenticatingWithAsana:{id:"asanaActions.authenticatingWithAsana.loadingMessage",defaultMessage:"Authenticating with Asana…"},titleMessage:{id:"asanaActions.loginWithAsanaPopupModal.title",defaultMessage:"Asana login"}});async function k(e){const{environment:t,flowId:i}=e;await y.disconnectAsana(t,{});const a=(0,m.eC)(t);let n=(0,s.s1)(c.default.domainBaseUrl,{authType:a,userId:t.currentUser.id});if(n=a.redirectToAuth?n:await(0,m.HU)(t,n),t.device.isElectron)return h.Z.setState({...h.Z.state,isAccountLinkingInProgress:!0}),void b.openExternalUrl(n);const o=await w.M(t,{width:580,height:800,url:n,titleMessage:_.titleMessage});if(!o)return;const r=l.Qc(o);if(!r.query.code||!r.query.state)return;h.Z.setState({...h.Z.state,isAccountLinkingInProgress:!0});const d=await y.authWithAsana(t,{code:r.query.code,encryptedState:r.query.state}),u=await y.getAsanaWorkspacesNames(t,{});if("failed"===d.type)v.a1y(t,{import_source:"asana",data:{import_type:"api",status:"failure",error:d.error},flowId:i}),console.error(d.error),S.showError(d);else if(v.a1y(t,{import_source:"asana",data:{import_type:"api",status:"success"},flowId:i}),"success"===u.type){const{data:{account:e,workspaces:t}}=u;h.Z.setState({...h.Z.state,isAccountLinkingInProgress:!1,account:e,workspaces:t,currentTab:"selectData",isModalOpen:!0})}}async function T(e){const{environment:t}=e;h.Z.setState({...h.Z.state,isAccountDelinkingInProgress:!0});const i=await y.disconnectAsana(t,{});"failed"===i.type?(console.error(i.error),S.showError(i)):(v.qJZ(t,{integration_name:"asana"}),"success"===i.type&&h.Z.setState({...h.Z.state,isAccountDelinkingInProgress:!1,account:void 0,workspaces:[]}))}async function I(e){const{selectedWorkspace:t,environment:i}=e;h.Z.setState({...h.Z.state,isLoadingProjects:!0});const a=await y.getTeamsAndProjectsInAsanaWorkspace(i,{workspaceId:t,size:5});"success"===a.type&&h.Z.setState({...h.Z.state,teamsAndProjects:a.data,isLoadingProjects:!1})}async function P(e){let{environment:t}=e;h.Z.setState({...h.Z.state,isLoadingAsanaWorkspaces:!0});const i=await y.getAsanaWorkspacesNames(t,{});"success"===i.type&&h.Z.setState({...h.Z.state,account:i.data.account,workspaces:i.data.workspaces,isLoadingAsanaWorkspaces:!1})}async function x(e){let{environment:t,spaceStore:i,currentSpaceViewStore:s,teamsStores:l,flowId:d}=e;const{appTemplatesSetupActions:c,appPackageConfigs:m}=await p.deps.AppTemplates.loader(),S=h.Z.state.selectedWorkspace;if(!S)return;h.Z.setState({...h.Z.state,templateCreationInProgress:!0});const b={},w={};try{for(const e in h.Z.state.selectedProjectsAndTeamspaces){if(0===h.Z.state.selectedProjectsAndTeamspaces[e].projects.length)continue;let n;const o=h.Z.state.selectedProjectsAndTeamspaces[e],{notionTeamspaceId:r}=o;if(!r)continue;const d=l.find((e=>e.id===o.notionTeamspaceId));if(n=d||i,w[r])b[e]=w[r];else{const{serverCommitResult:i,performResult:o}=C.createAndCommit({environment:t,perform:e=>{const i={type:"preset",uri:a._F};if("preset"===i.type&&!i.uri.startsWith("notion://wiki")){var o;const a=i.uri,r=null===(o=(0,u.SP)(m(),a))||void 0===o?void 0:o.uri;if(!r)return;const l=m().find((e=>e.uri===r));if(null==l?void 0:l.presets.find((e=>e.uri===a))){return c.initializeApp({environment:t,spaceViewStore:s,appParentStore:n,appUri:r,presetUri:a,transaction:e,from:"asana_import"})}return[]}},userAction:"importActions.importAsana"});b[e]=o,w[r]=o,await i}}}catch(E){return void h.Z.setState({...h.Z.state,templateCreationInProgress:!1,currentTab:"failure"})}const _=[],k=g.default.state.currentSpaceViewStore;if(!k)return;const T=M.Ym({environment:t,spaceStore:i,spaceViewStore:k,append:!0});await T.deferred.promise;const I=T.pageId;h.Z.setState({...h.Z.state,loggerPageId:I});const P=new Set,x=[],Z=[];for(const a in b){const e=h.Z.state.selectedProjectsAndTeamspaces[a],t=b[a];if(!(t&&e.notionTeamspaceId&&e.projects.length))continue;const n="string"==typeof e.projects?[]:e.projects;x.push(...n),P.add(e.notionTeamspaceId),Z.push(a),_.push({collectionViewBlocks:t.map((e=>({id:e.id,spaceId:(0,r.C)(i.id)}))),projectIds:n,asanaTeamId:a,notionTeamSpaceId:e.notionTeamspaceId,importAllProjects:"all"===e.projects,importOnlyIncompleteProjects:"in_complete"===e.projects})}const F=y.parallelAsanaImport(t,{importParams:_,spaceId:(0,r.C)(i.id),asanaWorkspaceId:S,importCompletedTasks:h.Z.state.importCompletedTasks,loggerPageId:I,flowId:d||(0,o.ZP)()});h.Z.setState({...h.Z.state,templateCreationInProgress:!1,currentTab:"importingData"}),f.Z.reset();const A=h.Z.state.workspaces.find((e=>e.gid===S));A&&function(e,t,i){try{v.qyQ(e,{import_source:"asana",data:t,flowId:i})}catch(a){n.log({level:"error",from:"asanaV2Actions",type:"parallelAsanaImport",error:{miscDataString:JSON.stringify({error:a,message:"Errored in tracking import_source_input event."})}})}}(t,{workspaceName:A.name,teams:Z,projects:x,numberOfTeamspacesUsed:P.size,completedTasks:h.Z.state.importCompletedTasks,userId:t.currentUser.id,spaceId:(0,r.C)(i.id)},d);for await(const a of F){if(!h.Z.state.isModalOpen)break;if(a.error)return void h.Z.setState({...h.Z.state,currentTab:"failure"});"success"===a.taskStatus&&h.Z.setState({...h.Z.state,currentTab:"confirm",result:a.value.status,isComplete:!0})}}function Z(e){var t;let{teamId:i,spaceId:a}=e;h.Z.setState({...h.Z.state,selectedProjectsAndTeamspaces:{...h.Z.state.selectedProjectsAndTeamspaces,[i]:{projects:(null===(t=h.Z.state.selectedProjectsAndTeamspaces[i])||void 0===t?void 0:t.projects)||[],notionTeamspaceId:a}}})}function F(){h.Z.setState({...h.Z.state,isModalOpen:!0})}},79257:(e,t,i)=>{i.d(t,{D2:()=>h,Do:()=>g,M0:()=>m,W4:()=>p,bA:()=>c,xv:()=>u});var a=i(85680),n=i(98452),o=i(52258),s=i(50906),r=i(6404),l=i(96802),d=i(39699);function c(e){const{originRect:t}=e;o.Z.reset(),n.Z.reset(),r.xv(),a.Z.setState({isOpen:!0,rect:t})}function u(){a.Z.setState({isOpen:!1})}function m(e){const{format:t,store:i,property:a,visibility:n,transaction:o}=e,s=t.property_visibility;s&&o&&l.FH({stores:[i],update:{property_visibility:Object.values(s||{}).map((e=>({property:e.property,visibility:a===e.property?n:e.visibility})))},transaction:o})}function p(e){const{store:t,pageSection:i,visibility:a,environment:n,format:o}=e,r=o.page_section_visibility;r&&(s.Mzl(n,{section:i,visibility:a}),d.createAndCommit({userAction:"customizePageActions.updatePageSectionVisibility",environment:n,perform:e=>{l.FH({stores:[t],update:{page_section_visibility:{...r,[i]:a}},transaction:e})}}))}function g(e){const{store:t,transaction:i,pageSectionFormats:a}=e;l.FH({stores:[t],update:{collection_page_sections:a},transaction:i})}function h(e){const{store:t,properties:i,environment:a}=e;d.createAndCommit({userAction:"customizePageActions.updateCollectionPageProperties",environment:a,perform:e=>{l.FH({stores:[t],update:{collection_page_properties:i},transaction:e})}})}},61652:(e,t,i)=>{i.d(t,{y1:()=>Y,BO:()=>$,Qr:()=>Q,gJ:()=>se,PN:()=>te,ZO:()=>U,hN:()=>oe,g:()=>ie,$G:()=>q,AW:()=>W,Tp:()=>ne,zh:()=>re,GI:()=>ee,q$:()=>H});var a=i(23174),n=i.n(a),o=i(67294),s=i(92785),r=i(42875),l=i(59730),d=i(15157),c=i(72126),u=i(29477),m=i(19889),p=i(5366),g=i(83355),h=i(82990),f=i(19306),v=i(61519),y=i(68785);const S={fontWeight:h.Z.fontWeight.semibold};class b extends g.Z{renderComponent(){return n()("div",{style:this.getMessageStyle()},void 0,n()("div",{style:this.getSpinnerContainerStyle()},void 0,n()(y.Z,{})),this.renderProgress(),this.renderEmail(),this.renderDisabledTeamsWarning())}renderDisabledTeamsWarning(){const e=this.props.disabledExportTeamNames;if(e.length>0)return n()("span",{},void 0,n()(v.Z,{size:10}),n()("p",{},void 0,n()(p.FormattedMessage,{id:"exportActions.exportDisabledTeams.message",defaultMessage:"Export is disabled for the following teamspaces: <b>{teamNames}</b>",values:{teamNames:(0,f.W)(e),b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n()("span",{style:S},void 0,t)}}})))}renderEmail(){const{targetEmailAddress:e}=this.props.exportProgressStore.state;if(e)return n()("p",{},void 0,n()(p.FormattedMessage,{id:"exportProgressDialog.emailMessage",defaultMessage:"We'll also send you an email with the download link."}))}renderProgress(){const{pagesExported:e}=this.props.exportProgressStore.state;return n()("p",{},void 0,n()(p.FormattedMessage,e>0?{id:"exportProgressDialog.exportedPagesMessage",defaultMessage:"{pagesExported, plural, one {{pagesExported} page exported} other {{pagesExported} pages exported}}",values:{pagesExported:e}}:{id:"exportProgressDialog.exportStartedMessage",defaultMessage:"Exporting…"}))}getMessageStyle(){return{fontSize:14,color:this.theme.mediumTextColor,textAlign:"center"}}getSpinnerContainerStyle(){return{marginTop:24,marginBottom:24,display:"flex",justifyContent:"center"}}}b.displayName="ExportProgress";const M=b;var w=i(19037),C=i(30546),_=i(33954),k=i(33929),T=i(41168),I=i(13630),P=i(80444),x=i(886),Z=i(71071),F=i(49085);class A extends F.default{getInitialState(){return{pagesExported:0}}}const E=A;var B=i(20454),R=i(50906),D=i(54642),L=i(47307),N=i(92625),O=i(75018);const V=(0,p.defineMessages)({exporting:{id:"exportActions.exporting.loadingMessage",defaultMessage:"Exporting"},exportAuditLogEmail:{id:"exportActions.auditLog.exporting.EmailMessage",defaultMessage:"Your CSV export is currently being generated. The generated CSV has a 2-hour delay from the real time audit log. Once it is ready, an email will be sent to you with the download link."},exportCSVEmail:{id:"exportActions.exportingCSV.EmailMessage",defaultMessage:"Your CSV export is currently being generated. Once it is ready, an email will be sent to you with the download link."},exportFailed:{id:"exportActions.exportFailedError.message",defaultMessage:"Export failed."},adminMessage:{defaultMessage:"Admin",id:"export.userPermissionsRole.admin.message"},workspaceOwnerMessage:{defaultMessage:"Workspace owner",id:"export.userPermissionsRole.workspaceOwner.message"},memberMessage:{defaultMessage:"Member",id:"export.userPermissionsRole.member.message"},membershipAdminMessage:{defaultMessage:"Membership admin",id:"export.userPermissionsRole.membershipAdmin.message"},guestMessage:{defaultMessage:"Guest",id:"export.userPermissionsRole.guest.message"},idMessage:{defaultMessage:"ID",id:"export.csvHeader.id"},emailMessage:{defaultMessage:"Email",id:"export.csvHeader.email"},nameMessage:{defaultMessage:"Name",id:"export.csvHeader.name"},roleMessage:{defaultMessage:"Role",id:"export.csvHeader.role"},permissionGroupsMessage:{defaultMessage:"Permission groups",id:"export.csvHeader.permissionGroups"},partitionMessage:{defaultMessage:"Export is still in progress due to file size. We will send you an email about its progress.",id:"export.exportPartitioned.message"}});async function U(e,t){if(!j({environment:e,...t}))return void R.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const{currentUserStore:i}=P.default.state;if(!i)return void R.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const a=i.getEmail();if(!a)return void R.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});R.Md8(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=K(i.id));const n=D.exportBlock(e,t);await z(e,n,t.recursive,a)}async function W(e,t){if(!j({environment:e,recursive:!0,exportOptions:t.exportOptions}))return void R.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const{currentUserStore:i}=P.default.state;if(!i)return void R.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const a=i.getEmail();if(!a)return void R.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});R.Md8(e,{target:"space",format:t.exportOptions.exportType,recursive:!0}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=K(i.id));const n=D.exportSpace(e,t);await z(e,n,!0,a)}async function z(e,t,i,a){const{currentSpaceViewStore:s,currentSpaceStore:r}=P.default.state;if(!s)return;const d=new E;d.setState({pagesExported:0,targetEmailAddress:a});let c,m=!1;const g=s.getTeamsStores().filter((e=>e.getSetting("disable_export"))).flatMap((e=>e.getName()||[]));if(i){const t=g.length>0?6e3:1250;c=(0,u.Vs)(t);const i={exportProgressStore:d,disabledExportTeamNames:g};L.showDialog({message:o.createElement(M,i),showCancel:!1,keepFocus:!0,disableBackgroundDismiss:!0,items:[{label:n()(p.FormattedMessage,{id:"exportProgressDialog.closeButton.label",defaultMessage:"Close"}),onAccept:()=>{re({environment:e,spaceId:null==r?void 0:r.id}),m=!0}}]})}else c=Promise.resolve(),N.j({message:V.exporting});for await(const n of t){if(m)return;if(n.error){if(N.x(),(0,l.a3)(n.error)&&"team_export_disabled"===n.error.clientData.type){const e=(0,_.HV)(k.default.getIntl(),n.error);L.showErrorMessage(e)}else L.showErrorMessage(k.default.formatMessage(V.exportFailed));return}{const{value:t}=n;if("complete"===t.type||"partition"===t.type)return await c,N.x(),void("complete"===t.type?(L.dismissDialog(),!m&&t.exportURL&&O.downloadUrl({environment:e,url:t.exportURL})):L.showMessage({message:k.default.formatMessage(V.partitionMessage)}));d.setState({...d.state,pagesExported:t.pagesExported})}}}function K(e){const t={};return d.Z.scan(((i,a)=>{if(i.includes(x.Z.PREFERENCE_KEY_PREFIX)&&i.includes(e)){const e=i.split(x.Z.PREFERENCE_KEY_PREFIX)[1];e&&a&&(t[e]=a)}})),t}function H(e){const{root:t,environment:i,isCollectionViewExportTypeSupported:a}=e,n=i.currentUser.id,o=X(n),s=o&&o.exportType||"markdown",l=a?"currentView":void 0,d="pdf"===s?{exportType:"pdf",timeZone:(0,r.r)(),pdfFormat:ee(n),locale:"en",collectionViewExportType:l}:{exportType:s,timeZone:(0,r.r)(),locale:"en",collectionViewExportType:l};$(i,{open:!0,root:t,recursive:"space"===t.table,exportOptions:d})}const G=(e,t)=>{switch(t){case"editor":return e.formatMessage(V.workspaceOwnerMessage);case"membership_admin":return e.formatMessage(V.membershipAdminMessage);case"read_and_write":return e.formatMessage(V.memberMessage);case"none":return e.formatMessage(V.guestMessage);default:return s.log({level:"error",from:"exportActions",type:"roleNotFound",data:{miscDataToConvertToString:{role:t}}}),""}};async function q(e,t){const{spaceStore:i,subscriptionData:a,intl:n}=t,o=i.getPermissionGroups();await D.exportSpaceMembers(e,{spaceId:i.getSpaceId()});const s=c.oA(await Promise.all(a.users.map((async e=>{const t=B.U.createChildStore(i,{table:m.KJ,id:e.userId});await t.load();const a=t.getEmail(),s=t.getFullName(n),r=c.oA(o.filter((t=>(t.user_ids||[]).includes(e.userId))).map((e=>e.name)).sort());if(a||s)return[a||"",s||"",G(n,e.role),r.join(","),t.id]})))),r=[[V.emailMessage,V.nameMessage,V.roleMessage,V.permissionGroupsMessage,V.idMessage].map((e=>n.formatMessage(e))),...s].map((e=>e.map((e=>((e=e.replace(/"/g,'""')).search(/("|,|\n)/g)>=0&&(e=`"${e}"`),e))).join(","))).join("\n");var l=document.createElement("a");l.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURIComponent(r)}`),l.setAttribute("download","members.csv"),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function j(e){return!("pdf"===e.exportOptions.exportType&&e.recursive)||Y(e.environment)}function Y(e){return(0,T.qb)(e,"enterprise")||(0,T.qb)(e,"business")||w._T()}function $(e,t){const i=Z.ZP.state,a=e.currentUser.id;let n=t;if(Z.Sw(n)&&!Y(e))if("space"===n.root.table){const e=i.open&&!Z.Sw(i)?i.exportOptions.exportType:"html";n={...n,exportOptions:{...n.exportOptions,exportType:e}}}else n={...n,recursive:!1};if(!j({environment:e,...n}))throw new l.D3("Invalid export options",{data:n});Z.ZP.setState(n),function(e){const t=Z.ZP.state;if(t.open){const i={...X(e),exportType:t.exportOptions.exportType};"pdf"===t.exportOptions.exportType&&(i.pdfFormat=t.exportOptions.pdfFormat),d.Z.set({userId:e,key:J,value:i})}}(a)}function Q(){Z.ZP.setState({open:!1})}const J="ExportSettings";function X(e){return d.Z.get({userId:e,key:J})}function ee(e){const t=X(e);return t&&t.pdfFormat||Z.jR()}async function te(e,t){const{currentUserStore:i}=P.default.state,{spaceId:a}=t;if(!i)return s.log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserStoreNotFound",data:{miscDataToConvertToString:{spaceId:a}}}),L.showMessage({message:k.default.formatMessage(V.exportFailed)}),void R.y4(e,{target:"auditLog",format:"csv",recursive:!1});if(!i.isDefined())return s.log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserValueNotFound",data:{miscDataToConvertToString:{spaceId:a}}}),L.showMessage({message:k.default.formatMessage(V.exportFailed)}),void R.y4(e,{target:"auditLog",format:"csv",recursive:!1});R.Md8(e,{target:"auditLog",format:"csv",recursive:!1});const n=D.exportAuditLog(e,t);await ae(n,V.exportAuditLogEmail)}async function ie(e){const{environment:t,data:i}=e;R.Md8(t,{target:"domainClaimableSpaces",format:"csv",recursive:!1});const a=D.exportDomainClaimableSpaces(t,i);await ae(a,V.exportCSVEmail)}async function ae(e,t){const i=await e.next();if(i.value.error){const e=(0,_.HV)(k.default.getIntl(),i.value.error);L.showErrorMessage(e)}else L.showMessage({message:k.default.formatMessage(t)})}async function ne(e,t){R.Md8(e,{target:"userAnalytics",format:"csv",recursive:!1});const i=D.exportUserAnalytics(e,t);await ae(i,V.exportCSVEmail)}async function oe(e,t){R.Md8(e,{target:"contentAnalytics",format:"csv",recursive:!1});const i=D.exportContentAnalytics(e,t);await ae(i,V.exportCSVEmail)}async function se(e,t){R.Md8(e,{target:"adminContentSearchAnalytics",format:"csv",recursive:!1});const i=D.exportAdminContentSearch(e,{spaceId:t.spaceId,sort:{field:"relevance",direction:"desc"},query:t.filters.query,audience:t.filters.audience,lastEditedTime:(0,C.Hq)(t.filters.lastEditedTime),createdTime:(0,C.Hq)(t.filters.createdTime),createdBy:t.filters.createdBy,sharedWith:t.filters.sharedWith,teamspaceIds:t.filters.teamIds});await ae(i,V.exportCSVEmail)}async function re(e){let{environment:t,spaceId:i}=e;if(!i)return;const a=await D.getActiveExportTasks(t,{spaceId:i});"success"===a.type&&I.Z.setState({count:a.data.length})}},43181:(e,t,i)=>{i.d(t,{Ym:()=>U,A1:()=>K,am:()=>z,ro:()=>V,su:()=>W});i(57658),i(21703);var a=i(13991),n=i(41432),o=i(7057),s=i(7406),r=i(92785),l=i(59730);const d=["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],c=["text/plain",".md",".mdown",".markdown",".mkdn",".mkd",".Rmd",".md.txt"],u={markdown:c,csv:["text/plain",".csv"],html:["text/html"],docx:d,gdocs:d,dropbox:d,quip:["text/html",c],workflowy:["text/plain"],confluence:["application/zip"],genericImporter:["application/zip"]};var m=i(72126),p=i(91155),g=i(32056),h=i(29477),f=i(4615),v=i(21202),y=i(23867),S=i(5366),b=i(72340),M=i(33954),w=i(8989),C=i(33929),_=(i(46190),i(78900)),k=i(90365),T=i(82066),I=i(57559),P=i(50906),x=i(54642),Z=i(47307),F=i(94419),A=i(92625),E=i(38719),B=i(9953),R=i(28014),D=i(39699),L=i(53471);const N=(0,S.defineMessages)({uploadingOneFile:{id:"importActions.uploadingOneFile.loadingMessage",defaultMessage:"Uploading… ({percentComplete}%)"},uploadingMultipleFilesNotStarted:{id:"importActions.uploadingMultipleFilesNotStarted.loadingMessage",defaultMessage:"Uploaded 0 of {totalNumberOfFiles}"},uploadingMultipleFilesInProgress:{id:"importActions.uploadingMultipleFilesInProgress.loadingMessage",defaultMessage:"Uploaded {numberOfUploadedFiles} of {totalNumberOfFiles}"},uploadingMultipleFilesComplete:{id:"importActions.uploadingMultipleFilesComplete.loadingMessage",defaultMessage:"Uploaded {totalNumberOfFiles} of {totalNumberOfFiles}"},importingOneFile:{id:"importActions.importingOneFile.loadingMessage",defaultMessage:"Importing…"},importingMultipleFilesNotStarted:{id:"importActions.importingMultipleFilesNotStarted.loadingMessage",defaultMessage:"Imported 0 of {totalNumberOfFiles}"},importingMultipleFilesInProgress:{id:"importActions.importingMultipleFilesInProgress.loadingMessage",defaultMessage:"Imported {numberOfImportedFiles} of {totalNumberOfFiles}"},importingMultipleFilesComplete:{id:"importActions.importingMultipleFilesComplete.loadingMessage",defaultMessage:"Imported {totalNumberOfFiles} of {totalNumberOfFiles}"},importingFromTrelloMessage:{id:"importActions.importingFromTrello.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} board from Trello} other {Importing {importingCount} boards from Trello}}"},importingFromAsanaMessage:{id:"importActions.importingFromAsana.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} project from Asana} other {Importing {importingCount} projects from Asana}}"},importingFromEvernoteMessage:{id:"importActions.importingFromEvernote.loadingMessage",defaultMessage:"{importingCount, plural, one {Importing {importingCount} notebook from Evernote} other {Importing {importingCount} notebooks from Evernote}}"},importingFromConfluenceViaAPIMessage:{id:"importActions.importingFromConfluenceViaAPI.loadingMessage",defaultMessage:"Importing confluence space: {confluenceSpaceKey}."},importFailed:{id:"importActions.importFailedError.message",defaultMessage:"Import failed."},fileImportFailedSizeTooLarge:{id:"importActions.fileImportFailedError.sizeTooLarge.message",defaultMessage:"Import failed: file exceeds 5MB."},trelloImportFailed:{id:"importActions.trelloImportFailedError.message",defaultMessage:"Trello import failed."},asanaImportFailed:{id:"importActions.asanaImportFailedError.message",defaultMessage:"Asana import failed."},evernoteImportFailed:{id:"importActions.evernoteImportFailedError.message",defaultMessage:"Evernote import failed."},confluenceImportViaAPIFailed:{id:"importActions.confluenceImportViaAPIFailedError.message",defaultMessage:"Confluence space import failed."},importTitle:{id:"importActions.importTitle",defaultMessage:"Import {date}"},importTitleForGenericFileImporter:{id:"importActions.importTitleForGenericFileImporter",defaultMessage:"{fileName} Import {date}"}}),O=1073741824;async function V(e){const{environment:t,pageStore:i,spaceStore:n,isTeamPage:d,spaceViewStore:c,uploadType:m,flowId:y}=e;let S;try{const s=await L.y({multiple:!0,accept:u[m].join(",")});if(0===s.length)return;const r=1===s.length;if("confluence"===m){const i=(Number((0,b.$6)(t))||15)*O;if(s[0].size>i)throw P.a1y(e.environment,{import_source:"confluence",data:{import_type:"file",status:"failure",error:"Maximum upload size exceeded",fileSize:s[0].size},flowId:y}),new l.nY("Maximum upload size exceeded",{clientData:{type:"upload_file_size_exceeded",messageValues:{maxSize:g.td(i,1)}}})}else if("genericImporter"===m){const i=(0,w.b)(t)||15,a=i*O;if(s[0].size>a)throw P.a1y(e.environment,{import_source:"file",data:{import_type:"file",status:"failure",error:"Maximum upload size exceeded",fileSize:s[0].size},flowId:y}),new l.p8("Maximum upload size exceeded",{clientData:{type:"upload_file_size_exceeded",messageValues:{maxSize:`${i} GB}`}}})}const p=await new Promise(((e,i)=>{L.IL({environment:t,uploadType:m,files:s,bucket:"temporary",preventLimitFreeFileSize:!0,flowId:y,onBatchStart:()=>{A.j({message:r?N.uploadingOneFile:N.uploadingMultipleFilesNotStarted,interpolatedValues:{totalNumberOfFiles:s.length,percentComplete:0}})},onBatchProgress:e=>{let{uploadedFiles:t,progressPercent:i}=e;A.j({message:r?N.uploadingOneFile:N.uploadingMultipleFilesInProgress,interpolatedValues:{numberOfUploadedFiles:t,totalNumberOfFiles:s.length,percentComplete:i}})},onBatchComplete:t=>{A.j({message:r?N.uploadingOneFile:N.uploadingMultipleFilesComplete,interpolatedValues:{totalNumberOfFiles:s.length,percentComplete:100}}),e(t)},onBatchError:i})}));let M,_;if(i&&i.isEmptyPage())s.length>1||i.isInsideCollection()?(M=i.id,_="AppendToBlock"):(M=i.id,_="ReplaceBlock");else{const e={date:(0,o.Yx)(Date.now(),"medium",a.SP)};"genericImporter"===m&&(null!=s&&s[0].name?e.fileName=null==s?void 0:s[0].name.replace(".zip",""):e.fileName=(null==s?void 0:s[0].name)||"Universal File");const{performResult:i}=D.createAndCommit({userAction:"importActions.result",environment:t,perform:i=>{const a=C.default.formatMessage("genericImporter"===m?N.importTitleForGenericFileImporter:N.importTitle,e),o=R.KE({environment:t,spaceStore:n,spaceViewStore:c,isPrivate:!d,prepend:!d,title:a,transaction:i});let r;r=s.length>1?"AppendToBlock":"ReplaceBlock";const l=h.UZ();return i.postSubmitCallbacks.push((e=>{e?l.reject(e):l.resolve()})),{deferred:l,createdPage:o,pageId:o.id,importType:r}}});S=i.createdPage,M=i.pageId,_=i.importType,await i.deferred.promise}const k=p.map(((e,t)=>({fileURL:e,fileName:s[t].name})));let T=0;A.j({message:r?N.importingOneFile:N.importingMultipleFilesInProgress,interpolatedValues:{numberOfImportedFiles:T,totalNumberOfFiles:s.length}});for(const{fileURL:e,fileName:i}of k){if("confluence"===m){P.a1y(t,{import_source:"confluence",data:{import_type:"file",status:"success",fileSize:s[0].size},flowId:y});const a=U({environment:t,spaceStore:n,spaceViewStore:c});await a.deferred.promise;const o=a.pageId,r=x.parallelImportConfluenceExport(t,{fileURL:e,fileName:i,page:{id:M,spaceId:n.id},loggerPageId:o,flowId:y||(0,f.ZP)()});for await(const e of r){if(e.error)throw e.error;e.value.isComplete||A.j(e.value.status)}}else if("AppendToBlock"===_){const a={fileURL:e,fileName:i,importType:_,block:{id:M,spaceId:n.id},flowId:y};P.qyQ(t,{import_source:"file",data:a,flowId:y});const{value:o}=await x.importFile(t,a).next();if(o.error)throw o.error}else if("ReplaceBlock"===_){const a={fileURL:e,fileName:i,importType:_,block:{id:M,spaceId:n.id},flowId:y};P.qyQ(t,{import_source:"file",data:a,flowId:y});const{value:o}=await x.importFile(t,a).next();if(o.error)throw o.error}T++,A.j({message:r?N.importingOneFile:N.importingMultipleFilesInProgress,interpolatedValues:{numberOfImportedFiles:T,totalNumberOfFiles:s.length}})}return A.x(),I.G.createChildStore(n,{table:v.iU,id:M})}catch(k){var _;let e;r.log({level:"error",from:"importFiles",type:"importFilesFailure",error:(0,p.Ui)(k),data:{spaceId:n.id}}),A.x(),D.createAndCommit({userAction:"importActions.importFiles",environment:t,perform:e=>{S&&F.Od({parent:n.getPagesStore(),childToRemove:S,transaction:e})}});let i=null,a=null;throw k instanceof l.hm&&k.clientData?(i=k.clientData,M.Em[k.clientData.type]&&"ImportFileSizeTooLargeError"===(0,s.tg)(k).message?a=M.Em[k.clientData.type]:M.$5[k.clientData.type]&&"CsvImportError"===(0,s.tg)(k).message?a=M.$5[k.clientData.type]:M.zP[k.clientData.type]&&(a=M.zP[k.clientData.type])):k instanceof l.nY&&"upload_file_size_exceeded"===(null===(_=k.body)||void 0===_||null===(_=_.clientData)||void 0===_?void 0:_.type)&&M.zP[k.body.clientData.type]&&(i=k.body.clientData,a=M.zP[i.type]),e=i&&a?C.default.formatMessage(a,i.messageValues):"ImportFileSizeTooLargeError"===(0,s.tg)(k).message?C.default.formatMessage(N.fileImportFailedSizeTooLarge):C.default.formatMessage(N.importFailed),Z.showErrorMessage(e),k}}function U(e){const{environment:t,spaceStore:i,spaceViewStore:n,append:s}=e,{performResult:r}=D.createAndCommit({userAction:"importActions.result",environment:t,perform:e=>{const r=C.default.formatMessage(N.importTitle,{date:(0,o.Yx)(Date.now(),"medium",a.SP)}),l=R.KE({environment:t,spaceStore:i,spaceViewStore:n,isPrivate:!0,prepend:!s,title:`${r} Logs`,transaction:e}),d=h.UZ();return e.postSubmitCallbacks.push((e=>{e?d.reject(e):d.resolve()})),{deferred:d,pageId:l.id}}});return r}async function W(e){const{environment:t,boards:i,spaceStore:a,spaceViewStore:n}=e;A.j({message:N.importingFromTrelloMessage,interpolatedValues:{importingCount:i.length}}),T.Z.setState({open:!1});const{performResult:{deferred:o,pages:r}}=D.createAndCommit({userAction:"importActions.importTrello",environment:t,perform:e=>{const o=i.map((i=>R.KE({environment:t,spaceStore:a,spaceViewStore:n,isPrivate:!0,prepend:!0,loading:!0,title:i.name,transaction:e}))),s=h.UZ();return e.postSubmitCallbacks.push((e=>{e?s.reject(e):s.resolve()})),{deferred:s,pages:o}}});await o.promise;try{return await Promise.all(r.map((async(e,a)=>{const n=i[a],{value:o}=await x.importTrello(t,{boardId:n.id,block:{id:e.id,spaceId:(0,y.C)(e.pointer.spaceId)}}).next();if(o.error)throw o.error}))),A.x(),r[0]}catch(l){throw D.createAndCommit({userAction:"importActions.importTrello",environment:t,perform:e=>{for(const t of r)F.Od({parent:a.getPagesStore(),childToRemove:t,transaction:e})}}),Z.showErrorMessage(C.default.formatMessage(N.trelloImportFailed)),A.x(),new Error((0,s.tg)(l).message)}}async function z(e){const{environment:t,spaceStore:i,spaceViewStore:a,notebooks:o,userSettingsStore:s}=e;if(0===o.length)throw new Error("Expected at least one notebook");A.j({message:N.importingFromEvernoteMessage,interpolatedValues:{importingCount:o.length}}),k.Z.setState({open:!1});const r=await async function(e){const{environment:t,spaceStore:i,spaceViewStore:a,notebooks:o}=e,{serverCommitResult:s,performResult:{blockStores:r}}=D.createAndCommit({userAction:"importActions.createStacks",environment:t,perform:e=>{const s=m.jj(m.oA(o.map((e=>e.stack)))).sort().reverse(),r={};let l=e=>!0;return o.length>1&&s.length>0&&(s.forEach((s=>{const l=R.KE({environment:t,spaceStore:i,spaceViewStore:a,isPrivate:!0,prepend:!0,loading:!1,title:s,transaction:e}),d=l.getContentStore();o.filter((e=>e.stack===s)).forEach((i=>{const a=B.j4({environment:t,type:n.Ti.copyIndicator,inMemoryRecordCache:l.inMemoryRecordCache,transaction:e,spaceId:d.pointer.spaceId,useCrdt:l.useCrdt()});F.R3({parent:d,append:a,transaction:e}),r[i.guid]=a}))})),l=e=>!Boolean(e.stack)),o.filter(l).reverse().forEach((n=>{const o=R.KE({environment:t,spaceStore:i,spaceViewStore:a,isPrivate:!0,prepend:!0,loading:!0,title:n.title,transaction:e});r[n.guid]=o})),{blockStores:r}}});return await s,r}({environment:t,spaceStore:i,spaceViewStore:a,notebooks:o}),l=r[o[0].guid];try{return await async function(e){const{environment:t,spaceStore:i,spaceViewStore:a,notebooks:n,waitForNotebook:o,notebookMapping:s,userSettingsStore:r}=e;let l;if(h.dC(n,2,(async e=>{await Promise.all(e.map((async e=>{const i=s[e.guid];if(!i)throw new Error(`Missing notebook page ${e.guid}`);const a=h.UZ();i===o&&(l=a),await async function(e){const{environment:t,notebookStore:i,notebook:a,firstCompleted:n}=e,o=x.importEvernote(t,{notebookId:a.guid,block:{id:i.id,spaceId:(0,y.C)(i.pointer.spaceId)},timestamp:Date.now(),parentTable:v.iU}),{value:s}=await o.next();s.error&&(console.error(s.error),D.createAndCommit({userAction:"importActions.importEvernoteNotebook",environment:t,perform:e=>{const t=i.getParentBlockStore();if(t){const a=t.getContentStore();F.Od({parent:a,childToRemove:i,transaction:e})}}}),Z.showErrorMessage(C.default.formatMessage(N.evernoteImportFailed)));n.resolve(void 0)}({environment:t,notebookStore:i,notebook:e,firstCompleted:a})})))})),!l)throw new Error("waitForNotebookFirstCompleted not defined.");const d=r.getSettings();null!=d&&d.created_evernote_getting_started||await E.FI({environment:t,type:"evernote",spaceStore:i,spaceViewStore:a,userSettingsStore:r});await l.promise}({environment:t,waitForNotebook:l,notebookMapping:r,notebooks:o,spaceStore:i,spaceViewStore:a,userSettingsStore:s}),A.x(),l}catch(d){throw A.x(),Z.showErrorMessage(C.default.formatMessage(N.evernoteImportFailed)),d}}async function K(e){const{environment:t,spaceStore:i,spaceViewStore:n,space:l,flowId:d}=e;if(!t.currentUser.id)throw new Error("User does not exist.");A.j({message:N.importingFromConfluenceViaAPIMessage,interpolatedValues:{confluenceSpaceKey:l.name}}),_.Z.setState({open:!1});const c=U({environment:t,spaceStore:i,spaceViewStore:n});await c.deferred.promise;const u=c.pageId,{performResult:m}=D.createAndCommit({userAction:"importActions.importConfluenceViaApi",environment:t,perform:e=>{const s=C.default.formatMessage(N.importTitle,{date:(0,o.Yx)(Date.now(),"medium",a.SP)}),r=R.KE({environment:t,spaceStore:i,spaceViewStore:n,isPrivate:!0,prepend:!0,title:s,transaction:e}),l=h.UZ();return e.postSubmitCallbacks.push((e=>{e?l.reject(e):l.resolve()})),{deferred:l,createdPage:r,pageId:r.id}}});await m.deferred.promise;const g=m.createdPage;try{if(!g)throw new Error("No root page");const e=x.parallelImportConfluenceViaApi(t,{userId:t.currentUser.id,confluenceSpaceKey:l.key,confluenceSpaceId:l.id,page:{id:m.pageId,spaceId:i.id},loggerPageId:u,flowId:d});for await(const t of e){if(t.error)throw t.error;t.value.isComplete||A.j(t.value.status)}return A.x(),g}catch(f){throw r.log({level:"error",from:"importConfluenceViaAPI",type:"importConfluenceViaAPIFailure",error:(0,p.Ui)(f),data:{spaceId:i.id}}),D.createAndCommit({userAction:"importActions.importConfluenceViaApi",environment:t,perform:e=>{g&&F.Od({parent:i.getPagesStore(),childToRemove:g,transaction:e})}}),Z.showErrorMessage(C.default.formatMessage(N.confluenceImportViaAPIFailed)),A.x(),new Error((0,s.tg)(f).message)}}},38719:(e,t,i)=>{i.d(t,{FI:()=>T,sM:()=>k,vY:()=>I});i(21703);var a=i(13991),n=i(72126),o=(i(4615),i(45953)),s=(i(21202),i(15047),i(11002)),r=i(27095),l=i(73314),d=i(5366),c=(i(95477),i(33929)),u=i(27249),m=i(80444),p=i(88632),g=i(77080),h=i(50906),f=i(54642),v=i(9284),y=i(54532),S=i(70442),b=i(9953),M=i(4408),w=i(28014),C=i(39699);const _=(0,d.defineMessages)({invalidSpaceStore:{defaultMessage:"Invalid space data.",id:"spaceActions.dialogError.createTemplatesInSpace.invalidStorage.message"},invalidSpaceStoreOnCreateTemplate:{defaultMessage:"Invalid space view data.",id:"spaceActions.dialogError.createTemplatesInWorkspace.invalidStorage.message"},invalidUserSettings:{defaultMessage:"Invalid user settings data.",id:"spaceActions.dialogError.createTemplatesInWorkspace.invalidUserSettings.message"}});async function k(e){const{environment:t,spaceViewStore:i,isPrivate:o,userSettingsStore:s,redirectData:r,userRootStore:d,planType:p,spaceJoinOrCreate:f,teamStore:y,templates:M,templateType:k,personaTeamStore:I,isNewUserOnboarding:P}=e,x=i.getSpaceStore();if(!x)throw new Error(c.default.formatMessage(_.invalidSpaceStore));let F,A=[];if(s&&x&&M&&(A=await async function(e){const{spaceStore:t,spaceViewStore:i,userSettingsStore:a,teamStore:o}=e;if(await Promise.all(n.oA([t.load(),i.load(),a.load(),null==o?void 0:o.load()])),t.canEdit()){if(!i.isDefined())throw new Error(c.default.formatMessage(_.invalidSpaceStoreOnCreateTemplate));if(!a.isDefined())throw new Error(c.default.formatMessage(_.invalidUserSettings));if(!i.getCreatedOnboardingTemplates()){return await async function(e){var t;const{environment:i,spaceStore:a,spaceViewStore:o,isPrivate:s,teamStore:r,personaTeamStore:d,templateType:m,userSettingsStore:p,isOnboardingCreatorNoJoinableSpaces:h}=e;let f=[];if("page_template"===m&&e.templates){const t=e.templates.map((e=>r?S.rC({environment:i,item:e,isPrivate:!1,spaceStore:a,spaceViewStore:o,useMinimalTemplates:!0,teamStore:r,type:"inTeam",from:"onboarding",isOnboarding:!0}):S.rC({environment:i,item:e,isPrivate:s,spaceStore:a,spaceViewStore:o,useMinimalTemplates:!0,type:"inSpace",isOnboarding:!0})));f=n.oA(await Promise.all(t))}else if("app_template"===m&&e.templates&&r){f="on"===g.default.getEligibleGroup({defaultGroup:"control",experimentId:"app_template_removal"})?n.oA(await Promise.all((0,l.H)(Z,c.default.getIntl()).map((e=>S.rC({environment:i,item:e,isPrivate:!1,spaceStore:a,spaceViewStore:o,useMinimalTemplates:!0,teamStore:r,type:"inTeam",from:"onboarding",isOnboarding:!0}))))):await v.installAppsInTeam({environment:i,presets:e.templates,spaceStore:a,spaceViewStore:o,teamStore:r})}const y=null===(t=p.getSettings())||void 0===t?void 0:t.persona;if(d&&y){let e=[];if(["product","marketing","sales","eng"].includes(y)){e="on"===g.default.getEligibleGroup({defaultGroup:"control",experimentId:"persona_template_truncation"})?(0,u.OJ)(y,g.default,c.default.getIntl()):(0,u.CN)(y,g.default,c.default.getIntl())}else h&&(e=(0,u.xX)({userFunction:y,experimentStore:g.default,intl:c.default.getIntl()}));const t=e.map((e=>S.rC({environment:i,item:e,isPrivate:!1,spaceStore:a,spaceViewStore:o,useMinimalTemplates:!0,teamStore:d,type:"inTeam",from:"onboarding",isOnboarding:!0})));f=[...f,...n.oA(await Promise.all(t))]}e.templates&&e.templates.length>0&&C.createAndCommit({userAction:"spaceActions.createOnboardingTemplatesInSpace",environment:i,perform:e=>{const t={created_onboarding_templates:!0};b.sW({store:o,data:t,transaction:e})}});return f}({...e})}}return[]}({...e,spaceStore:x,userSettingsStore:s,teamStore:y,personaTeamStore:I})),s)F=await async function(e){const{environment:t,spaceStore:i,spaceViewStore:n,userSettingsStore:o,planType:s,spaceJoinOrCreate:r,isNewUserOnboarding:l}=e;if(await Promise.all([i.load(),n.load(),o.load()]),i.canEdit()){if(!n.isDefined())throw new Error(c.default.formatMessage(_.invalidSpaceStoreOnCreateTemplate));if(!o.isDefined())throw new Error(c.default.formatMessage(_.invalidUserSettings));const e=function(e,t){if(e.device.isMobile)return null;if("en-US"!==a.SP)return null;if(!t)return null;switch(g.default.getEligibleGroup({defaultGroup:"control",experimentId:"learn_notion_three_steps"})){case"on":return"learnNotionThreeSteps";case"control":return null}}(t,l);let d;if(d=e||(t.device.isMobile?"mobile":"personal"===s?"desktopPersonal":"create"===r?"desktopTeamCreate":"desktopTeamJoin"),!n.getCreatedGettingStarted())return T({environment:t,spaceStore:i,spaceViewStore:n,type:d,userSettingsStore:o});h.VUL(t,{getting_started_page_type:d,spaceId:i.id,errorType:"createdGettingStartedPageAlreadyExists"})}}({isNewUserOnboarding:P,environment:t,spaceStore:x,spaceViewStore:i,userSettingsStore:s,planType:p,spaceJoinOrCreate:f});else{const{currentUserSettingsStore:e}=m.default.state;h.VUL(t,{errorType:"userSettingsStoreNotDefined",spaceId:x.id,errorMessage:e?"currentUserSettingsStore is defined but not userSettingsStore from onboarding data":"currentUserSettingsStore is not defined as well"})}if("fork_page"===r.type){return await w.ux({environment:t,userRootStore:d,isPrivate:o,forkedPageId:r.pageId,spaceStore:x,spaceViewStore:i})}return"app_template"===k&&A.length>0?A[0]:F}async function T(e){const{environment:t,type:i,spaceStore:a,spaceViewStore:n,userSettingsStore:s}=e;if(!p.Z.state.online)return;const d=function(e,t){return(0,l.G)(r.S$[e],t)}(i,c.default.getIntl()).rootId,u=await f.loadBlockSubtree(t,{block:{id:d,spaceId:a.id},shallow:!1});let m;if("failed"===u.type)return void h.VUL(t,{getting_started_page_type:i,errorType:"loadBlockSubtreeFailed",spaceId:a.id,errorMessage:u.error.message,copyPageId:d});m=o.PF.create(u.data.subtreeRecordMap);const g="spaceActions.createGettingStartedPageInSpace",{performResult:v}=C.createAndCommit({userAction:g,environment:t,perform:e=>{const o=w.KE({environment:t,spaceStore:a,spaceViewStore:n,isPrivate:!0,prepend:!0,transaction:e});M.fL({environment:t,inMemoryRecordCache:o.inMemoryRecordCache,recordMap:m,debugSource:g});const r=y.K8(t,{blockId:d,inMemoryRecordCache:o.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0});if(!r)throw h.VUL(t,{getting_started_page_type:i,errorType:"createAndDuplicatePageFailed",spaceId:a.id}),new Error(c.default.formatMessage(w.sY.createAndDuplicatePageError));y.E9({environment:t,sourceBlockId:d,targetBlockPointer:o.pointer,sourceBlockSubtree:r,targetInMemoryRecordCache:o.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:o.useCrdt()});const l={},u={};return"evernote"===i?u.created_evernote_getting_started=!0:l.created_getting_started=!0,Object.keys(l).length>0&&b.sW({store:n,data:l,transaction:e}),Object.keys(u).length>0&&b.sW({store:s.getSettingsStore(),data:u,transaction:e}),o}});return h.yvO(t,{getting_started_page_type:i,getting_started_page_id:d,duplicated_from_page_id:d,duplicated_to_page_id:v.id}),v}function I(e,t){return"personal"===e?(0,l.H)(P,t):(0,l.H)(x,t)}const P=[s.Y.quickNoteV2,s.Y.personalHomeV2,s.Y.taskList,s.Y.journalV2,s.Y.readingListV2],x=[s.Y.teamMeetingNotes,s.Y.teamDocs,s.Y.teamHome,s.Y.teamTasks,s.Y.taskList],Z=[s.Y.teamDocs,s.Y.teamMeetingNotes,s.Y.teamTasks]},360:(e,t,i)=>{i.d(t,{l:()=>n,q:()=>o});var a=i(25399);function n(){a.Z.setState({open:!0,submitted:!1,error:void 0})}function o(){a.Z.setState({open:!1})}},16859:(e,t,i)=>{i.d(t,{d:()=>E});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(5366),c=i(73063),u=i(53437),m=i(26388),p=i(51224),g=i(24405),h=i(64275),f=i(81570),v=i(83065),y=i(82990),S=i(42922),b=i(64921),M=i(60458),w=i(1743),C=i(74194),_=i(16354),k=i(64369),T=i(42402),I=i(43250),P=i(18514);function x(e){const{checked:t,onChange:i}=e;return s()("div",{style:{display:"flex",gap:6,alignItems:"center"}},void 0,s()(M.Z,{checked:t,onClick:i,size:14}),s()("div",{onClick:i},void 0,s()(k.Z,{style:{cursor:"pointer"},isSmall:!0},void 0,s()(d.FormattedMessage,{defaultMessage:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"}))))}function Z(){window.__c={n:"OptInLearnMore"};const e=(0,g.yK)((e=>({container:{display:"flex",flexDirection:"row"},giftIcon:{width:16,height:16,fill:e.lightIconColor},message:{marginLeft:9,color:e.mediumTextColor,fontSize:12}})),[]);return s()("div",{style:e.container},void 0,(0,f.T)(e.giftIcon),s()("div",{style:e.message},void 0,s()(d.FormattedMessage,{defaultMessage:"You’re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>s()(T.Z,{external:!0,href:(0,P.UY)("ai.dataSharingTerms")},void 0,e)}})))}function F(e){window.__c={n:"ShareDataPopup"};const{onSubmit:t}=e,i=(0,g.yK)((e=>({container:{width:300,display:"flex",flexDirection:"column",alignItems:"center",padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},giftIcon:{width:24,height:24,fill:e.lightIconColor},terms:{color:e.mediumTextColor,textAlign:"center",fontSize:13},shareButton:{width:"100%",marginTop:17,paddingTop:7,paddingBottom:7},notNowButton:{color:e.mediumTextColor,fontSize:14,marginTop:15},title:{textAlign:"center",marginTop:9,marginBottom:8,fontWeight:y.Z.fontWeight.semibold}})),[]);return s()("div",{style:i.container},void 0,s()("div",{style:i.closeButtonContainer},void 0,s()(b.Z,{onClick:()=>{t({optIn:!1})},style:i.closeButton,hoveredStyle:i.closeButtonHover},void 0,(0,h.D)(i.closeButtonIcon))),(0,f.T)(i.giftIcon),s()("div",{style:i.title},void 0,s()(d.FormattedMessage,{defaultMessage:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})),s()("div",{style:i.terms},void 0,s()(d.FormattedMessage,{defaultMessage:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:s()("br",{}),aiTerms:e=>s()(T.Z,{external:!0,href:(0,P.UY)("ai.dataSharingTerms")},void 0,e)}})),s()(S.Z,{style:i.shareButton,onClick:()=>{t({optIn:!0})}},void 0,s()(d.FormattedMessage,{defaultMessage:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})),s()(_.Z,{style:i.notNowButton,onClick:()=>{t({optIn:!1})}},void 0,s()(d.FormattedMessage,{defaultMessage:"Not now",id:"completions.ShareDataPopup.notNowButton"})))}function A(e){window.__c={n:"FeedbackPopup"};const{state:t,onUpdate:i,onSubmit:a,onCancel:n,userOptIn:o}=e,u=(0,r.useCallback)((()=>{i({...t,shareWithNotion:!t.shareWithNotion})}),[t,i]),m=(0,r.useCallback)((()=>{a(t)}),[a,t]),p=(0,r.useCallback)((e=>{i({...t,userContent:e.target.value})}),[i,t]),g=(0,d.useIntl)(),h=(0,l.O7)(),f=!o;return s()("div",{style:{padding:14,...h.device.isMobile?{width:"100%"}:{minWidth:400}},className:I.YOJ},void 0,s()(w.Z,{capture:!0},void 0,s()(C.Z,{value:t.userContent,onChange:p,onSubmit:e=>{e.stopPropagation(),m()},onCancel:n,focusInitial:!0,placeholder:g.formatMessage({id:"completions.FeedbackPopup.userCommentPlaceholder",defaultMessage:"How could the output be improved? (optional)"})}),s()("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10}},void 0,f?s()(x,{checked:t.shareWithNotion,onChange:u}):s()(Z,{}),s()(c.Z,{icon:v._,onClick:m,ariaLabel:g.formatMessage({id:"completions.FeedbackPopup.submitButtonLabel",defaultMessage:"Submit feedback"}),isBlue:!0,iconStyle:{height:24,width:24},style:{height:20,width:20}}))))}function E(e){window.__c={n:"FeedbackButtonWithPopup"};const{type:t,ariaLabel:i,onClick:a,feedbackState:o,onDismiss:g,onSubmit:h,onUpdate:f,showShareDataPopup:v,onDataShareSubmit:y,userOptIn:S,iconButtonStyles:b}=e,M=(0,l.O7)(),w=t===(null==o?void 0:o.type),C=(0,p.L)(t,w),_=(0,r.useCallback)((()=>a(t)),[a,t]),k=s()(m.Z,{renderTooltip:()=>s()("div",{},void 0,s()(d.FormattedMessage,{defaultMessage:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})),placement:m.Z.Placement.Bottom,render:e=>r.createElement(c.Z,n()({onClick:_,icon:C,ariaLabel:i,style:{...b}},e))});return s()(u.ZP,{origin:k,open:(null==o?void 0:o.type)===t,popupType:M.device.isMobile?u.kQ.SlideUp:u.kQ.Popup,onDismiss:g,render:()=>o?v?s()(F,{onCancel:g,onSubmit:y}):s()(A,{state:o,onSubmit:h,onUpdate:f,onCancel:g,userOptIn:S}):null})}},51224:(e,t,i)=>{i.d(t,{u:()=>k,L:()=>_});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(33676),d=i(45238);const c=n()("path",{d:"M4 12.1875C3.99219 15.1641 6.34375 17.4297 10.0859 17.4375H11.1719C12.1953 17.4375 12.9766 17.3594 13.4297 17.2422C14.1016 17.0781 14.7031 16.6562 14.7031 15.8828C14.7031 15.5859 14.625 15.3594 14.5312 15.1875C14.4766 15.1016 14.4922 15.0234 14.5703 14.9922C15.0859 14.7578 15.4766 14.2812 15.4766 13.6562C15.4766 13.2969 15.375 12.9766 15.2031 12.75C15.125 12.6406 15.1406 12.5469 15.2656 12.4766C15.625 12.25 15.875 11.7891 15.875 11.2656C15.875 10.8828 15.7578 10.4844 15.5547 10.2812C15.4453 10.1797 15.4609 10.1094 15.5781 10.0156C15.8281 9.78906 15.9844 9.41406 15.9844 8.96094C15.9844 8.15625 15.3516 7.5 14.5234 7.5H11.7031C11.0234 7.5 10.5781 7.15625 10.5781 6.60156C10.5781 5.54688 11.9141 3.57812 11.9141 2.14844C11.9141 1.375 11.4219 0.90625 10.75 0.90625C10.1641 0.90625 9.85938 1.28906 9.53125 1.9375C8.33594 4.24219 6.75781 6.11719 5.54688 7.72656C4.49219 9.11719 4.00781 10.3125 4 12.1875ZM0.015625 12.25C0.015625 14.6719 1.52344 16.6719 3.53125 16.6719H4.89062C3.47656 15.5938 2.85156 13.9922 2.86719 12.1719C2.875 10.2031 3.57812 8.77344 4.32031 7.79688H3.23438C1.41406 7.79688 0.015625 9.75 0.015625 12.25Z"}),u=(0,d.I)("thumbUpFilled",{viewBox:"0 0 16 18",svg:c}),m=(0,d.I)("thumbDownFilled",{viewBox:"0 0 16 18",svg:n()("g",{transform:"rotate(180 8 9)"},void 0,c)});var p=i(39986),g=i(5366),h=i(50906),f=i(64964),v=i(39699),y=i(37181),S=i(8323),b=i(80444),M=i(77080),w=i(84254),C=i(16859);function _(e,t){switch(e){case"thumbsup":return t?u:p.P;case"thumbsdown":return t?m:l.A}}function k(e){window.__c={n:"FeedbackButtons"};const{revision:t}=e,i=(0,g.useIntl)(),a=(0,s.O7)(),[l,d]=(0,o.useState)(void 0),[c,u]=(0,o.useState)(!1),m=(0,o.useRef)(null),p=(0,r.VK)((()=>M.default.checkGate("ai_data_sharing")),[]),_=(0,r.VK)((()=>b.default.state.currentUserSettingsStore),[]),k=(0,r.VK)((()=>{var e;const t=null==_||null===(e=_.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,i=!(0,S.mq)();return!Boolean(t)&&i}),[_]),T=(0,r.VK)((()=>{var e;return(null==_||null===(e=_.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??false}),[_]),I=(0,o.useCallback)((()=>{f.oV({label:i.formatMessage({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",defaultMessage:"Thanks for submitting feedback!"})})}),[i]),P=(0,o.useCallback)((e=>{m.current=document.activeElement,d((t=>({userContent:"",shareWithNotion:true,...t,type:e})))}),[]),x=(0,o.useCallback)((e=>{e.shareWithNotion&&k&&p?u(!0):(I(),d(void 0)),w.submitFeedbackForRevision({...e,environment:a,revision:t,userOptIn:T})}),[t,a,T,k,p,I]),Z=(0,o.useCallback)((e=>{e&&e.stopPropagation&&e.stopPropagation(),d(void 0),m.current&&m.current instanceof HTMLElement&&m.current.focus()}),[]),F=(0,o.useCallback)((e=>{const{optIn:t}=e;_&&(v.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:a,userId:_.id,perform:e=>{y.d2({userSettingsStore:_,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),h.bd0(a,{user_opt_in:t}),t?f.oV({label:i.formatMessage({id:"completions.CompletionMenuFooter.dataShareThanks",defaultMessage:"Thank you for your help making Notion better!"})}):I(),u(!1),d(void 0))}),[i,_,a,I]);return t.hasFeedback&&!c?null:o.createElement(o.Fragment,null,n()(C.d,{type:"thumbsup",ariaLabel:i.formatMessage({id:"completions.CompletionMenuFooter.thumbsUp",defaultMessage:"Submit positive feedback"}),onClick:P,feedbackState:l,onDismiss:Z,onSubmit:x,onUpdate:d,showShareDataPopup:c,onDataShareSubmit:F,userOptIn:T}),n()(C.d,{type:"thumbsdown",ariaLabel:i.formatMessage({id:"completions.CompletionMenuFooter.thumbsDown",defaultMessage:"Submit negative feedback"}),onClick:P,feedbackState:l,onDismiss:Z,onSubmit:x,onUpdate:d,showShareDataPopup:c,onDataShareSubmit:F,userOptIn:T}))}},35878:(e,t,i)=>{i.d(t,{cP:()=>Be,ZP:()=>Ee,a_:()=>Ae});var a=i(23174),n=i.n(a),o=(i(57658),i(67294)),s=i(13991),r=i(480),l=i(86628),d=i(24405),c=i(7057),u=i(77657),m=i(80920),p=i(74181),g=i(77420),h=i(9844),f=i(90965),v=i(94826),y=i(97880),S=i(82990),b=i(7928),M=i(5366),w=(i(95477),i(38755)),C=i(80444),_=i(57559),k=i(20454),T=i(10434),I=i.n(T),P=i(15070),x=i(8848),Z=i(58573),F=i(19889),A=i(50906),E=i(76463),B=i(75018),R=i(64964),D=i(39699),L=i(87279),N=i(18514),O=i(61766),V=i(74021),U=i(24736),W=i(26825),z=i(15025),K=i(28992);function H(e){window.__c={n:"BotCapabilitiesTooltip"};const{capabilities:t}=e,i=(0,M.useIntl)(),{device:a}=(0,r.O7)(),s=(0,W.uH)(t),l=(0,W.Rh)(t),d=(0,W.WM)(e.capabilities),c=[...(0,z.zq)(s),...(0,z.ac)(l),...(0,z.VR)(d)];return o.createElement(K.Z,I()({},e,{title:i.formatMessage((0,W.Gx)(s,void 0).label),shouldWrapCaption:!0,style:a.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:n()("div",{},void 0,c)}))}var G=i(52275),q=i(31945),j=i(68894),Y=i(68785),$=i(78140),Q=i(32163),J=i(50506),X=i(63296),ee=i(53437),te=i(72495),ie=i(64369),ae=i(29302);function ne(e){window.__c={n:"AdminIntegrationSettingsActionMenu"};const{integrationId:t,integrationTable:i,isLegacy:a,disableDisconnectUser:s,disableDisconnectAll:d,disableDisallow:c,botIds:m}=e,v=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),S=(0,r.Fy)(),b=(0,r.O7)(),w=(0,M.useIntl)(),T=be(),[P,x]=(0,o.useState)(void 0),[A,E]=(0,o.useState)(!1),[B,R]=(0,o.useState)(!1),[O,V]=(0,o.useState)(!1),[W,z]=(0,o.useState)(void 0),K=(0,l.VK)((()=>v&&i?(0,_.Kv)(v,{table:i,id:t}):void 0),[v,t,i]),H=(0,l.VK)((()=>{if(a){const e=p.ns.find((e=>e.id===t));return{name:null==e?void 0:e.name,url:(0,N.UY)("guides.connectedApps")}}if(v&&i){const a=v.getRecordModel({table:i,id:t});if(i===h.K2&&!(0,u.BP)({integrationId:t,env:"production"})){var e,n;const t=a;return{name:null==a?void 0:a.name,url:null==t||null===(e=t.getInfo())||void 0===e?void 0:e.website_url,email:null==t||null===(n=t.getInfo())||void 0===n?void 0:n.email}}return{name:null==a?void 0:a.name}}}),[v,t,i,a]),G=(0,l.VK)((()=>m&&!s?m.map((e=>v&&K?_.t1.createChildStore(K,{table:g.cZ,id:e,spaceId:v.id}):void 0)):[]),[v,m,K,s]).filter(y.$K),Y=(0,l.VK)((()=>G.filter((e=>e.getAlive()))),[G]),X=(0,l.VK)((()=>{if(v&&Y&&!s){return Y.map((e=>e.getCreatedById())).filter(y.$K).map((e=>k.U.createChildStore(v,{table:F.KJ,id:e}))).filter((e=>e.isDefined()))}return[]}),[Y,v,s]),ee=(0,l.VK)((()=>null==v?void 0:v.getBotSettingsStore().getValue()),[v]),ie=(0,l.VK)((()=>null==Y?void 0:Y.reduce(((e,t)=>{const i=X.find((e=>e.id===t.getCreatedById()));return e[t.id]={userStore:i,botCapabilities:t.getCapabilities()},e}),{})),[Y,X]),ae=(0,l.VK)((()=>P?(0,Z.ZP)(P,Object.entries(ie),(e=>{let[,{userStore:t}]=e;return t.getSearchName(w)})):Object.entries(ie)),[ie,P,w]),ne=!s&&(null==m?void 0:m.length)&&n()(te.Z,{isInput:!0,style:{padding:8}},void 0,n()(j.ZP,{textWrapperStyle:{margin:0},focus:!S.isMobile||void 0,focusAfterAnimation:!0,value:P||"",onChange:e=>x(e.target.value),placeholder:w.formatMessage({id:"integrationInstallerFilter.userSearch.placeholder",defaultMessage:"Filter by user"})})),re=ae.length?[{key:"disconnect user section",render:e=>o.createElement(te.Z,e),items:se({users:ae,disableDisconnectUser:s,showDisplayModal:()=>R(!0),setSelectedUser:z,intl:w})}]:[],Se=(null==H?void 0:H.url)||(null==H?void 0:H.email),Me=Boolean(null==m?void 0:m.length)||(0,f.CJ)(ee)&&!c,we=o.createElement(o.Fragment,null,Se&&n()(te.Z,{topBorder:Boolean(ae.length)},"app-links",(null==H?void 0:H.url)&&n()(le,{environment:b,developerWebsite:H.url}),(null==H?void 0:H.email)&&n()(de,{environment:b,developerEmail:H.email})),Me&&n()(te.Z,{topBorder:Boolean(ae.length||Se)},void 0,Boolean(null==m?void 0:m.length)&&n()(ce,{showDisplayModal:()=>V(!0)}),(0,f.CJ)(ee)&&!c&&n()(ue,{showDisplayModal:()=>E(!0)})));return(Se||Me)&&H?n()(q.ZP,{popupType:S.isMobile?q.Z4.SlideUp:q.Z4.Popup,renderOrigin:e=>o.createElement(U.Z,I()({},e,{isMobile:S.isMobile,style:{marginLeft:8,marginRight:8}})),render:()=>o.createElement(o.Fragment,null,n()($.Z,{menuType:S.isMobile?L.og.ActionSheet:L.og.Popup,header:!s&&ne,footer:we,width:230},void 0,n()(Q.Z,{type:Q.i.Vertical,sections:re,initialFocus:void 0})),n()(J.Z,{open:!s&&B,onDismiss:()=>{R(!1)},disableAnimation:!0,showCloseIcon:!0,innerStyle:T.innerModal,render:()=>n()(me,{title:n()(ve,{integrationName:H.name}),caption:n()(ye,{integrationName:H.name,userName:null==W?void 0:W.userName}),type:"disconnect",handleCancel:()=>{R(!1),z(void 0)},handleConfirmation:async()=>{W&&(await oe({botIds:[W.botId],environment:b}),z(void 0)),R(!1)}})}),n()(J.Z,{open:!d&&O,onDismiss:()=>{V(!1)},disableAnimation:!0,showCloseIcon:!0,innerStyle:T.innerModal,render:()=>n()(me,{title:n()(he,{integrationName:H.name}),caption:n()(fe,{integrationName:H.name}),type:"disconnect",handleCancel:()=>V(!1),handleConfirmation:async()=>{await oe({botIds:m,environment:b}),V(!1)}})}),n()(J.Z,{open:!c&&A,onDismiss:()=>{E(!1)},disableAnimation:!0,showCloseIcon:!0,innerStyle:T.innerModal,render:()=>n()(me,{title:n()(pe,{integrationName:H.name}),caption:n()(ge,{integrationName:H.name,disableDisconnectAll:d}),type:"disapprove",handleCancel:()=>E(!1),handleConfirmation:async()=>{!function(e){const{currentSpaceStore:t,environment:i,integrationId:a}=e;t&&D.createAndCommit({userAction:"AdminIntegrationSettingsActionMenu.handleDisapproveIntegration",environment:i,perform:e=>{D.applyOperation({store:t,operation:{pointer:t.pointer,path:["bot_settings","integration_approval_statuses"],command:"update",args:{[a]:null}},transaction:e})}})}({currentSpaceStore:v,environment:b,integrationId:t}),d||await oe({botIds:m,environment:b}),E(!1)}})}))}):null}async function oe(e){let{botIds:t,environment:i}=e;t&&await Promise.all(t.map((e=>E.P0({environment:i,botId:e,onSuccess:()=>{A.IN8(i,{type:"public"})}}))))}function se(e){const{intl:t,disableDisconnectUser:i,users:a,showDisplayModal:o,setSelectedUser:s}=e;return i?[]:a.map((e=>{let[i,{userStore:a,botCapabilities:r}]=e;return{key:a.id,render:e=>n()(re,{buttonMenuProps:e,userStore:a,botCapabilities:r,selectAction:()=>{o(),s({botId:i,userName:a.getDisplayName(t)})}}),action:()=>{o(),s({botId:i,userName:a.getDisplayName(t)})}}}))}function re(e){window.__c={n:"UserMenuActionItem"};const{buttonMenuProps:t,userStore:i,botCapabilities:a,selectAction:s}=e,l=(0,r.Fy)(),[d,c]=(0,o.useState)(!1);return n()(ee.ZP,{popupType:l.isMobile?q.Z4.SlideUp:q.Z4.Popup,placementToOrigin:q.pO.Right,open:d,onDismiss:()=>c(!1),origin:o.createElement(G.Z,I()({},t,{title:n()("div",{style:{display:"flex",alignContent:"center",justifyContent:"space-between"}},void 0,n()(ae.Z,{userStore:i,avatarSize:18,inline:!0,avatarShouldShowShadow:!0,style:{flexShrink:1}})),textWrapperStyle:{marginLeft:12,marginRight:12},focused:!1,onClick:()=>c(!0)})),render:()=>n()($.Z,{width:240,menuType:l.isMobile?L.og.ActionSheet:L.og.Popup,header:n()("div",{style:{padding:2,marginTop:4,marginBottom:4}},void 0,n()(H,{capabilities:a}))},void 0,n()(Q.Z,{type:Q.i.Vertical,sections:[{key:"integration capabilities",render:e=>o.createElement(te.Z,I()({},e,{topBorder:!0})),items:[{key:"remove",render:e=>o.createElement(G.Z,I()({},e,{focused:!1,title:n()("div",{style:{color:x.ZP.red}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.revokeUserAccess.label",defaultMessage:"Disconnect user"}))})),action:s}]}],initialFocus:void 0}))})}function le(e){let{environment:t,developerWebsite:i}=e;return n()(G.Z,{onClick:()=>{B.navigateToExternalURL({environment:t,url:i}),A.fco(t,{href:i,from:"integration-settings"})},title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.visitDeveloperWebsite.label",defaultMessage:"Visit developer website"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginLeft:12,marginRight:12}})}function de(e){let{environment:t,developerEmail:i}=e;return n()(G.Z,{onClick:()=>{B.navigateToExternalURL({environment:t,url:`mailto:${i}`}),A.Z9y(t,{from:"integration-settings"})},title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.contactDeveloperSupport.label",defaultMessage:"Contact support"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginLeft:12,marginRight:12}})}function ce(e){let{showDisplayModal:t}=e;return n()(G.Z,{onClick:t,title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.label",defaultMessage:"Disconnect all users"}),shouldWrapCaption:!0,focused:!1,textWrapperStyle:{marginLeft:12,marginRight:12,color:x.ZP.red}})}function ue(e){let{showDisplayModal:t}=e;return n()(G.Z,{onClick:t,title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.label",defaultMessage:"Remove from approved list"}),focused:!1,textWrapperStyle:{marginLeft:12,marginRight:12,color:x.ZP.red}})}function me(e){let{title:t,caption:i,handleConfirmation:a,handleCancel:s,type:r}=e;window.__c={n:"ModalContent"};const[l,d]=(0,o.useState)(!1);return n()("div",{style:{padding:20,width:333}},void 0,n()(ie.Z,{isMultiline:!0,style:{marginBottom:8,fontWeight:S.Z.fontWeight.semibold,paddingRight:30}},void 0,t),n()(ie.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginBottom:8}},void 0,i),n()("div",{style:{display:"flex",marginTop:12}},void 0,n()(X.Z,{style:{width:140,marginRight:9},isLarge:!0,onClick:s,disabled:l},void 0,n()(ie.Z,{},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.cancel",defaultMessage:"Cancel"}))),n()(X.Z,{style:{width:140},isLarge:!0,onClick:async()=>await a(d),backgroundColor:x.ZP.red,disabled:l},void 0,n()(ie.Z,{style:{color:x.ZP.white}},void 0,"disconnect"===r&&!0===l&&n()(Y.Z,{isWhite:!0}),"disconnect"===r&&!1===l&&n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.disconnect",defaultMessage:"Disconnect"}),"disapprove"===r&&n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.remove",defaultMessage:"Remove"})))))}function pe(e){let{integrationName:t}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.title",defaultMessage:"Remove {integrationName} from approved integrations",values:{integrationName:t}})}function ge(e){let{integrationName:t,disableDisconnectAll:i}=e;return n()(M.FormattedMessage,i?{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.caption",defaultMessage:"Prevent members from installing {integrationName}.",values:{integrationName:t}}:{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApprovalAndDisconnectAll.caption",defaultMessage:"Revoke access for {integrationName} for all users in this workspace and prevent members from installing {integrationName}.",values:{integrationName:t}})}function he(e){let{integrationName:t}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.modal.label",defaultMessage:"Disconnect {integrationName} for all users in workspace",values:{integrationName:t}})}function fe(e){let{integrationName:t}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectAll.modal.caption",defaultMessage:"Revoke access for {integrationName} for all users in this workspace.",values:{integrationName:t}})}function ve(e){let{integrationName:t}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectUser.modal.label",defaultMessage:"Disconnect {integrationName}?",values:{integrationName:t}})}function ye(e){let{integrationName:t,userName:i}=e;return n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectUser.modal.caption",defaultMessage:"Revoke access for {integrationName} for {userName}",values:{integrationName:t,userName:i}})}function Se(e){window.__c={n:"AdminComplianceIntegrationSettingsActionMenu"};const{adminIntegrationConfig:t,botId:i,maybeWebhookSubscriptionId:a}=e,s=(0,r.Fy)(),d=(0,r.O7)(),[c,u]=(0,o.useState)(!1),m=be(),p=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),h=(0,l.VK)((()=>{const e=null==p?void 0:p.getRecordModel({table:g.cZ,id:i});return null==e?void 0:e.getCapabilities()}),[p,i]),f=t.developer_name;if(!f)return null;const y=new O.Z,S={key:"manage",action:()=>{V.Z.setState({open:!0,integrationId:t.id,webhookSubscriptionId:a}),y.setState({open:!1})},render:e=>o.createElement(G.Z,I()({},e,{title:n()(M.FormattedMessage,{id:"complianceIntegrationSettings.actionMenu.manage",defaultMessage:"Manage"})}))},b={key:"disconnect",action:()=>{y.setState({open:!1}),u(!0)},render:e=>o.createElement(G.Z,I()({},e,{title:n()("span",{style:m.disconnect},void 0,n()(M.FormattedMessage,{id:"complianceIntegrationSettings.actionMenu.disconnect",defaultMessage:"Disconnect"}))}))},w=[...t.oauth||(0,P.ms)(h)||(0,v.Uw)(t.id)?[]:[S],b];return o.createElement(o.Fragment,null,n()(q.ZP,{popupType:s.isMobile?q.Z4.SlideUp:q.Z4.Popup,renderOrigin:e=>o.createElement(U.Z,I()({},e,{isMobile:s.isMobile,style:{marginLeft:8,marginRight:8}})),buttonPopupStore:y,render:()=>n()($.Z,{menuType:s.isMobile?L.og.ActionSheet:L.og.Popup,width:230},void 0,n()(Q.Z,{type:Q.i.Vertical,sections:[{key:"options",render:e=>o.createElement(te.Z,e),items:w}],initialFocus:void 0}))}),n()(J.Z,{open:c,onDismiss:()=>u(!1),disableAnimation:!0,showCloseIcon:!0,innerStyle:m.innerModal,render:()=>n()(me,{title:n()(M.FormattedMessage,{id:"complianceIntegrationSettings.disconnectModal.title",defaultMessage:"Disconnect {integrationName}?",values:{integrationName:f}}),caption:n()(M.FormattedMessage,{id:"complianceIntegrationSettings.disconnectModal.subtitle",defaultMessage:"Revoke {integrationName}'s access to this workspace. Workspace events will no longer be sent to {integrationName}.",values:{integrationName:f}}),type:"disconnect",handleCancel:()=>u(!1),handleConfirmation:async()=>{await E.P0({environment:d,botId:i,onSuccess:()=>{}}),A.wi(d,{integration_id:t.id}),R.oV({label:n()(M.FormattedMessage,{id:"complianceIntegrationSettings.snackbar.title",defaultMessage:"Disconnected {integrationName} from your workspace",values:{integrationName:f}})})}})}))}function be(){return(0,d.yK)((()=>({disconnect:{color:x.ZP.red},innerModal:{borderRadius:10}})),[])}var Me=i(74136),we=i(31278),Ce=i(69219),_e=i(26388),ke=i(45653),Te=i(59054),Ie=i(4615),Pe=i(14871);function xe(e){window.__c={n:"InternalIntegrationActionMenu"};const{botId:t}=e,[,,i]=(0,l.AF)(void 0,O.Z),a=(0,r.Fy)(),s=(0,r.O7)(),d=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),[c,u]=(0,o.useState)(!1),m=(0,l.VK)((()=>d?_.t1.createChildStore(d,{table:g.cZ,id:t,spaceId:d.id}):void 0),[t,d]),p=(0,l.VK)((()=>(0,P.Mh)(null==m?void 0:m.getModel())),[m]),[{value:h}]=(0,Te.r5)((async()=>{if(m){return await E.VG({environment:s,botId:null==m?void 0:m.id})}}),[s,m]);if(!m)return null;let f;return f=a.isMobile?{menuType:L.og.ActionSheet}:{menuType:L.og.Popup},n()(q.ZP,{popupType:a.isMobile?q.Z4.SlideUp:q.Z4.Popup,buttonPopupStore:i,renderOrigin:e=>o.createElement(U.Z,I()({isMobile:a.isMobile},e,{style:{marginLeft:8,marginRight:8}})),render:()=>o.createElement(o.Fragment,null,o.createElement($.Z,f,n()(Q.Z,{type:Q.i.Vertical,sections:[{key:"integration options",render:e=>o.createElement(te.Z,e),items:[...h?[Ze({environment:s,botToken:h})]:[],{key:"manage",action:()=>B.navigate({environment:s,url:`/my-integrations/internal/${Ie.cj(t)}`,openInNew:"tab"}),render:e=>o.createElement(G.Z,I()({title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.manageIntegration.label",defaultMessage:"Manage in developer portal"})},e))},{key:"delete",action:()=>u(!0),render:e=>o.createElement(G.Z,I()({title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectIntegrationButton.label",defaultMessage:"Disconnect {integrationName}",values:{integrationName:p}}),style:{color:x.ZP.red}},e))}]}],initialFocus:void 0})),n()(J.Z,{open:c,onDismiss:()=>{u(!1)},disableAnimation:!0,render:()=>n()("div",{style:{padding:20,width:333}},void 0,n()(ie.Z,{isMultiline:!0,style:{marginBottom:8,fontWeight:S.Z.fontWeight.semibold}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegration.modal.label.title",defaultMessage:"Disconnect {integrationName} in workspace",values:{integrationName:p}})),n()(ie.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginBottom:8}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegration.modal.label.caption",defaultMessage:"Revoke access for {integrationName} in workspace",values:{integrationName:p}})),n()("div",{style:{display:"flex",marginTop:12}},void 0,n()(X.Z,{style:{width:140,marginRight:9},isLarge:!0,onClick:()=>u(!1)},void 0,n()(ie.Z,{},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.removeIntegrationApproval.modal.button.cancel",defaultMessage:"Cancel"}))),n()(X.Z,{style:{width:140},isLarge:!0,onClick:async()=>{u(!1),await E.P0({environment:s,botId:m.id,onSuccess:()=>{A.IN8(s,{type:"internal"})}})},backgroundColor:x.ZP.red},void 0,n()(ie.Z,{style:{color:x.ZP.white}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.disconnectIntegration..modal.button.disconnect",defaultMessage:"Disconnect"})))))}))})}function Ze(e){const{botToken:t,environment:i}=e;return{key:"copy bot token",action:()=>{Pe.RD({environment:i,stringValue:t,copiedMessage:Pe.tq.copiedLinkToClipboard}),A.IVn(i,{from:"integration-settings",table:g.cZ})},render:e=>o.createElement(G.Z,I()({title:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.actionMenu.copyInternalIntegrationTokenButton.label",defaultMessage:"Copy internal integration token"})},e))}}var Fe=i(40235);const Ae={internal:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.pillLabel.internal",defaultMessage:"INTERNAL"}),databaseSync:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.pillLabel.sync",defaultMessage:"SYNC"}),linkPreview:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.pillLabel.preview",defaultMessage:"LINK PREVIEW"}),importer:n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.pillLabel.importer",defaultMessage:"IMPORTER"})};function Ee(e){window.__c={n:"AdminIntegrationSettingsTable"};const{integrationIdToBotIds:t,internalIntegrationIds:i,integrationIdToUsers:a}=e,s=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),r=(0,d.Fg)(),c=(0,l.VK)((()=>null==s?void 0:s.getBotSettingsStore().getValue()),[s]),m=(0,l.VK)((()=>"approved_or_built_by_notion"===(null==c?void 0:c.integration_restrictions)),[c]),v=(0,l.VK)((()=>Boolean(null==c?void 0:c.integration_restrictions)),[c]),y=(0,l.VK)((()=>null!=c&&c.integration_approval_statuses?Object.keys(c.integration_approval_statuses):[]),[c]),S=y.filter((e=>!Object.keys(t).includes(e)&&!p.T2.includes(e))),b=S.some((e=>e===u.f3)),w=(0,l.VK)((()=>null==s?void 0:s.id),[s]),_=t?Object.entries(t).map((e=>{let[t,i]=e;return Re({integrationPointer:{table:h.K2,id:t},userStores:a[t],botIds:i,autoApproveBuiltByNotion:m})})):[],k=w?i.map((e=>Re({integrationPointer:{table:g.cZ,id:e,spaceId:w},userStores:a[e],botIds:[e]}))):[],T=v?S.map((e=>Re({integrationPointer:{table:h.K2,id:e},userStores:[],botIds:[],autoApproveBuiltByNotion:m}))):[],I=p.ns.filter((e=>!(0,f.CJ)(c)||y.includes(e.id)&&(e.id!==p._o||!b))).map((e=>function(e){const{legacyIntegration:t}=e,{id:i,name:a,info:o}=t;return{key:i,columns:[n()("div",{style:{display:"flex",alignItems:"center",maxWidth:300}},0,n()("img",{src:o.icon,style:{height:28}}),n()("div",{style:{minWidth:0,marginLeft:15}},void 0,n()("div",{style:{display:"flex"}},void 0,n()(ie.Z,{},void 0,a)),n()(ie.Z,{isSmall:!0,style:{display:"flex"}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.legacy",defaultMessage:"Notion Connected App"})))),n()(We,{renderedUsers:void 0,displayUsers:!1},1),n()("div",{},2,n()(ne,{integrationId:i,isLegacy:!0,disableDisconnectAll:!0,disableDisconnectUser:!0}))]}}({botSettings:c,legacyIntegration:e}))),P=_.length+k.length+T.length+I.length;return o.createElement(o.Fragment,null,n()(Fe.Z,{columns:[{key:"integration",header:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.connectionsTable.connectionsColumn.title",defaultMessage:"Connection"}),style:{width:"40%"}},{key:"added_by",header:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.connectionsTable.creationInfoColumn.title",defaultMessage:"Users and access"})},{key:"more",header:void 0,style:{width:"5%"}}],rows:[..._,...k,...T,...I]}),0===P?n()("div",{style:{height:120,width:"100%",fontSize:12,color:r.lightTextColor,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${r.lightDividerColor}`}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.emptyTable.message",defaultMessage:"No integration installed"})):void 0)}function Be(e){window.__c={n:"AdminIntegrationComplianceSettingsTable"};const{botIdToWebhookSubscriptionId:t,complianceIntegrationsIdToBotIds:i}=e,a=(0,d.yK)((e=>({emptyTable:{height:120,width:"100%",fontSize:12,color:e.lightTextColor,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${e.lightDividerColor}`}})),[]),s=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),r=(0,l.VK)((()=>{if(!s)return[];return Object.entries(i).flatMap((e=>{let[i,a]=e;return a.map((e=>{const a=_.Qx.createChildStore(s,{table:g.cZ,id:e,spaceId:s.id});return{integrationPointer:{table:h.K2,id:i},botId:e,lastEditedAt:Number(a.getLastEditedAt()),lastEditedByPointer:a.getLastEditedByPointer(),webhookSubscriptionId:t[e]}}))})).filter(y.$K)}),[t,s,i]).map((e=>function(e){const{integrationPointer:t,lastEditedAt:i,lastEditedByPointer:a,botId:o,webhookSubscriptionId:s}=e,r=t.id,l=(0,v.EY)(r);if(!l)return;const d=v.ZB[l];if(!d)return;return{key:`${r}:${o}`,columns:[n()(De,{integrationTable:h.K2,integrationId:r},"integration-title"),n()(Ve,{lastEditedByPointer:a},"integration-installer"),n()(Ue,{installedAt:i},"integration-installed-at"),n()(Se,{adminIntegrationConfig:d,maybeWebhookSubscriptionId:s,botId:o},"integration-menu")]}}(e))).filter(y.$K);return o.createElement(o.Fragment,null,n()(Fe.Z,{columns:[{key:"integration",header:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.complianceConnectionsTable.connectionsColumn.title",defaultMessage:"Connection"}),style:{width:"40%"}},{key:"integration-installer",header:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.complianceConnectionsTable.integrationInstallerColumn.title",defaultMessage:"Added by"}),style:{width:"20%"}},{key:"integration-installed-at",header:n()(M.FormattedMessage,{id:"spaceConnectionsSettings.complianceConnectionsTable.integrationDateAdded.title",defaultMessage:"Date added"})},{key:"more",header:void 0,style:{width:"5%"}}],rows:r,tableStyle:{borderTop:"none"}}),0===r.length?n()("div",{style:a.emptyTable},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.emptyTable.message",defaultMessage:"No integration installed"})):void 0)}function Re(e){const{integrationPointer:t,userStores:i,botIds:a,autoApproveBuiltByNotion:o}=e;if(t.table===h.K2){const e=t.id,s=(0,u.BP)({integrationId:e,env:"production"});return{key:e,columns:[n()(De,{integrationTable:h.K2,integrationId:e},"integration-title"),n()(We,{renderedUsers:i,displayUsers:!s},"integration-installer-info"),n()(ne,{integrationId:e,integrationTable:h.K2,botIds:a,disableDisconnectUser:s||void 0,disableDisallow:s&&o},"admin-integration-settings-menu")]}}if(t.table===g.cZ)return{key:t.id,columns:[n()(De,{integrationTable:g.cZ,integrationId:t.id},"integration-title"),n()(We,{renderedUsers:i,displayUsers:!1},"integration-installer-info"),n()(xe,{botId:t.id},"integration-settings-menu")]};(0,y.t1)(t)}function De(e){window.__c={n:"IntegrationTitle"};const{integrationId:t,integrationTable:i}=e,a=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),o=(0,l.VK)((()=>{if(a)return a.getRecordModel({table:i,id:t})}),[a,t,i]),[s,r,d,c]=(0,l.VK)((()=>{if(!o)return[];let e;const a=[];let s;if(i===g.cZ){const r=o;r.icon&&(e={pointer:{table:i,id:t},icon:r.icon}),a.push("internal"),s=n()(Le,{botId:r.id})}else if(i===h.K2){const r=o,l=r.getInfo();l.icon&&(e={pointer:{table:i,id:t},icon:l.icon}),(0,p.mo)(r)&&(a.push("linkPreview"),(0,p.zc)(r)&&a.push("databaseSync")),s=(0,v.z6)(r.id)?null:n()(Ne,{integrationId:r.id})}else(0,y.t1)(i);return[null==o?void 0:o.name,e,a,s]}),[i,t,o]);return o&&d?n()("div",{style:{display:"flex",alignItems:"center",maxWidth:300}},void 0,n()(we.Z,{disabled:!0,icon:r,title:s,isEmptyPage:!1,size:28,isLarge:!0,useInvertedColors:!0}),n()("div",{style:{minWidth:0,marginLeft:15}},void 0,n()("div",{style:{display:"flex",marginRight:16}},void 0,n()(ie.Z,{},void 0,s),d.map((e=>e&&n()(Me.Z,{desktopStyle:{marginLeft:4}},e,Ae[e])))),c)):n()(Y.Z,{})}const Le=e=>{let{botId:t}=e;window.__c={n:"InternalIntegrationDeveloperName"};const i=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),a=(0,M.useIntl)(),o=(0,l.VK)((()=>null==i?void 0:i.getRecordModel({table:g.cZ,id:t})),[i,t]),s=(0,l.VK)((()=>{if(i&&o){const e=i.getRecordModel({table:o.created_by_table,id:o.created_by_id});return(0,b.Nz)(a,e)}}),[i,o,a]);return s?n()(ie.Z,{className:"notranslate",isSmall:!0},void 0,s):n()(Oe,{})},Ne=e=>{let{integrationId:t}=e;window.__c={n:"PublicIntegrationDeveloperName"};const i=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),a=(0,d.Fg)(),s=(0,l.VK)((()=>{const e=null==i?void 0:i.getRecordModel({table:h.K2,id:t});return null==e?void 0:e.getInfo().developer_name}),[i,t]);return(0,u.BP)({integrationId:t,env:"production"})?n()(ie.Z,{isSmall:!0,style:{display:"flex",alignItems:"center"}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.notion",defaultMessage:"Notion {icon}",values:{icon:n()(_e.Z,{renderTooltip:()=>n()("div",{},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfo.notion.tooltip",defaultMessage:"Developed by Notion"})),placement:_e.Z.Placement.Right,render:e=>o.createElement("div",e,(0,m.X)({width:12,height:12,fill:a.invoiceGreen}))})}})):s?n()(ie.Z,{className:"notranslate",isSmall:!0},void 0,s):n()(Oe,{})},Oe=()=>n()(ie.Z,{isSmall:!0},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.label.unverifiedDeveloper",defaultMessage:"Unverified developer"}));function Ve(e){window.__c={n:"AdminComplianceInstaller"};const{lastEditedByPointer:t}=e,i=(0,M.useIntl)(),a=(0,l.VK)((()=>{const e=C.default.state.currentSpaceStore;if(e)return e&&t?k.U.createChildStore(e,t):void 0}),[t]),o=(0,l.VK)((()=>null==a?void 0:a.getDisplayName(i)),[a,i]);return a&&o?n()("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"}},void 0,n()(ke.Z,{userStore:a,size:18}),n()(ie.Z,{},void 0,o)):null}function Ue(e){const{installedAt:t}=e;return void 0===t?null:n()(Ce.i,{useThinTitle:!0,title:(0,c.Yx)(t,"medium_with_time",s.SP)})}function We(e){window.__c={n:"IntegrationInstallerInfo"};const{renderedUsers:t,displayUsers:i}=e,a=(0,l.VK)((()=>C.default.state.currentSpaceStore),[]),s=(0,M.useIntl)(),d=(0,r.O7)(),c=(0,l.VK)((()=>{if(a)return(0,w.rn)(d,a)}),[d,a]),u=(0,o.useMemo)((()=>t&&t.length),[t]),m=(0,l.VK)((()=>t&&t.length>0?t[0]:void 0),[t]),p=(0,l.VK)((()=>m?m.getDisplayName(s):void 0),[m,s]);return i&&void 0!==u?m?n()("div",{style:{display:"flex",alignItems:"center"}},void 0,n()(ke.Z,{userStore:m,avatarShouldShowShadow:!0,style:{marginRight:8},size:28}),n()(ie.Z,{},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.listOfUsers",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} +{remainingCount}} other {{firstUser} +{remainingCount}}}",values:{firstUser:p,remainingCount:u-1}}))):n()(ie.Z,{isSecondaryColor:!0,style:{display:"flex",alignItems:"center"}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.noUsers",defaultMessage:"No users"})):n()(ie.Z,{style:{display:"flex",alignItems:"center"}},void 0,n()(M.FormattedMessage,{id:"spaceIntegrationSettings.integrationTable.installerInfoColumn.anyone",defaultMessage:"Anyone in {spaceName}",values:{spaceName:n()(ie.Z,{style:{fontWeight:S.Z.fontWeight.medium}},void 0,c)}}))}},87493:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var a=i(23174),n=i.n(a),o=(i(67294),i(480)),s=i(49386),r=i(87279),l=i(48019),d=i(78140);const c=function(e){let{block:t,onAccept:i}=e;window.__c={n:"AliasBlockPopupMenu"};const a={blocks:[t],environment:(0,o.O7)(),publicEditMode:void 0};return n()(d.Z,{menuType:r.og.Popup},void 0,n()(l.Z,{sections:s.Qi,context:a,onAccept:i}))}},66309:(e,t,i)=>{i.r(t),i.d(t,{default:()=>M});var a=i(23174),n=i.n(a),o=(i(67294),i(480)),s=i(86628),r=i(24405),l=i(27328),d=i(24677),c=i(98104),u=i(95477),m=i(18514),p=i(34859),g=i(69454),h=i(36488),f=i(28451),v=i(50506),y=i(53437),S=i(53336),b=i(32662);function M(e){window.__c={n:"AnnouncementModal"};const t=(0,o.O7)(),i=(0,r.Fg)(),a=(0,o.Fy)(),M=(0,s.VK)((()=>(0,m.__)(t)),[t]),w=(0,s.VK)((()=>t.TabbedRouterStore),[t.TabbedRouterStore]),C=(0,s.VK)((()=>(0,l.w_)(w.state)),[w]);let _=e.shouldShow&&!u.default.isAdminMode;const k=(0,s.VK)((()=>t.WindowSizeStore.isLandscape()),[t.WindowSizeStore]),T=(0,s.VK)((()=>{const e=g.Z.state.phase===g.i.hidden||g.Z.state.phase===g.i.willHide;let i=g.Z.estimatedNativeWebBottomOverlap();return a.isMobileBrowser&&(i+=32),e?t.WindowSizeStore.getSafePaddingBottomPx(i):i}),[a.isMobileBrowser,t.WindowSizeStore]);if(a.isPhone){if(M){var I;const e="web"===C.type&&((null===(I=C.redirectedTo)||void 0===I?void 0:I.route)||C.route);_=e&&"page"===e.name}function a(){var i;null===(i=e.onModalShow)||void 0===i||i.call(e),d.ZH(t),c.sD()}return n()(f.g,{calloutId:e.calloutId,shouldShow:_,onShow:a},void 0,n()(y.ZP,{open:!0,forceFullScreenSlideUp:!0,hidesMobileNativeBottomBar:!0,preventBlockRenderQueueOnEnter:!0,popupType:y.ZP.PopupType.SlideUp,style:{background:i.sidebarBackground,borderRadius:0,width:"100%",height:"100%",...e.mobileInnerStyle},render:()=>n()(S.Z,{type:p.Z.Y,style:{width:k?"80%":"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},void 0,n()(b.Z,{size:k?200:0}),e.mobileRenderInner(),n()(b.Z,{size:T}))}))}return n()(f.g,{calloutId:e.calloutId,shouldShow:e.shouldShow,onShow:e.onModalShow},void 0,n()(v.Z,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:e.desktopOnDismiss,innerStyle:{background:i.sidebarBackground,borderRadius:12,...e.desktopInnerStyle},render:()=>n()(h.Z,{capture:!0,allowEsc:!0,render:e.desktopRenderInner})}))}},90303:(e,t,i)=>{i.r(t),i.d(t,{default:()=>nd});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(10434),d=i.n(l),c=i(83355),u=i(72126),m=i(70203),p=i(50906),g=i(4727),h=i(39699),f=i(78140),v=i(53437),y=i(87279),S=i(68056),b=i(31352),M=i(24666),w=i(72187),C=i(69783),_=(i(57658),i(8848)),k=i(90902),T=i(15095),I=i(54153),P=i(5366),x=i(73657),Z=i(32163),F=i(43145),A=i(72495),E=i(70177),B=i(33929),R=i(29798),D=i(60682),L=i(24990),N=i(49085);const O="recentEmojis";class V extends N.default{getInitialState(){return{recentEmojis:[],loadEmojiCount:0}}cleanupSkinTonedRecents(e){const t=u.jj(T.p4(I.Z.get(O)).map((t=>void 0===e?t:T.Gb(t))));return I.Z.set(O,t.join("")),this.setState({...this.state,recentEmojis:t}),t}}const U=new V;var W=i(64921),z=i(31945),K=i(1743),H=i(3386),G=i(26388),q=i(98742),j=i(61766),Y=i(11059),$=i(37181),Q=i(68894),J=i(80444);function X(){window.__c={n:"EmojiPickerSkinTonePicker"};const e=(0,r.VK)((()=>{var e;return null===(e=J.default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}),[]),t=(0,s.O7)(),i=(0,r.qz)(void 0,j.Z);return n()(G.Z,{renderTooltip:()=>n()(P.FormattedMessage,{defaultMessage:"Select skin tone",id:"emojiPickerSkinTonePicker.selectSkinTone"}),placement:G.Z.Placement.Bottom,render:a=>o.createElement(z.ZP,d()({buttonPopupStore:i,popupType:z.Z4.Popup,renderOrigin:t=>o.createElement(Q.DO,d()({icon:()=>n()("div",{style:{paddingRight:6}},void 0,void 0!==e?k.YN[e]:"✋"),style:{fontSize:20}},(0,q.Z)(t,a))),render:i=>function(e){const{parent:t,environment:i,currentSkinTone:a}=e,s=k.YN.map(((e,a)=>({key:e,action:()=>{t.close(),ee({environment:i,skinTone:a})},render:t=>o.createElement(ie,d()({},t,{insertEmoji:()=>{},emoji:e,variations:void 0,tooltip:void 0}))})));return n()(K.Z,{capture:!0,allowEsc:!0},void 0,n()(Z.Z,{type:Z.i.Horizontal,initialFocus:a,sections:[{key:"variations",render:e=>o.createElement("div",d()({style:{display:"flex",padding:4}},e)),items:s}]}))}({parent:i,environment:t,currentSkinTone:e})},a))})}function ee(e){const{environment:t,skinTone:i}=e,{currentUserSettingsStore:a}=J.default.state;a&&(void 0!==i&&U.cleanupSkinTonedRecents(i),h.createAndCommit({userAction:"mediaPicker.setEmojiSkinTone",environment:t,perform:e=>{$.d2({userSettingsStore:a,transaction:e,data:{emoji_picker_skin_tone:i}})}}))}class te extends c.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:j.Z},this.renderEmojiWithVariations=()=>{const{emoji:e,focused:t}=this.props,{buttonPopupStore:i}=this.stores;return n()(H.Z,{capture:t,onEnter:this.handleOpenMenu,onEsc:this.handleCloseMenu},e,n()(z.ZP,{buttonPopupStore:i,popupType:z.Z4.Popup,renderOrigin:e=>this.renderSingleEmoji(e),render:this.renderVariationMenu}))},this.renderSingleEmoji=e=>{const{emoji:t,focused:i,onClick:a,onMouseEnter:s,tooltip:r}=this.props,{fontSize:l}=this.getButtonStyles();return n()(G.Z,{allowHover:Boolean(r),renderTooltip:()=>r,closeDelay:0,disableTooltip:!r,render:r=>o.createElement(W.Z,d()({key:t,focused:i,onClick:a},(0,q.Z)(e||{},(0,q.Z)({onMouseEnter:s},r)),{ignoreLocalHoverState:!0,style:this.styles.emojiButton}),n()(Y.Z,{size:l,char:t}))})},this.renderVariationMenu=e=>{const{emoji:t,variations:i,insertEmoji:a}=this.props,s=(i&&i.length>0?[t,...i]:[t]).map(((t,n)=>({key:t,action:o=>{e.close(),(null==i?void 0:i.length)===k.tN&&ee({environment:this.environment,skinTone:n}),a(t,n)},render:e=>o.createElement(te,d()({},this.props,e,{emoji:t,variations:void 0}))})));return n()(K.Z,{capture:!0,allowEsc:!0},void 0,n()(Z.Z,{type:Z.i.Horizontal,initialFocus:0,sections:[{key:"variations",render:this.renderVariationWrapper,items:s}]}))},this.renderVariationWrapper=e=>o.createElement("div",d()({style:this.styles.variationMenu},e)),this.handleOpenMenu=e=>{e.preventDefault();const{buttonPopupStore:t}=this.stores;t.setState({...t.state,open:!0})},this.handleCloseMenu=()=>{const{buttonPopupStore:e}=this.stores;e.setState({...e.state,open:!1})},this.styles={emojiButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:3,...this.getButtonStyles()},variationMenu:{display:"flex",padding:4}}}renderComponent(){const{variations:e}=this.props;return void 0===(0,D.sg)()&&e&&e.length>0?this.renderEmojiWithVariations():this.renderSingleEmoji()}getButtonStyles(){const{device:e}=this.environment;return e.isMobile?{width:w.mz,height:w.mz,fontSize:w.jo}:{width:w.T8,height:w.T8,fontSize:w.WB}}}te.displayName="EmojiPickerMenuItem";const ie=te,ae=["💡","👉","☝","👌","🔑","🚧","⚠️","🔥","📌","✂️","❓","🚫","⛔","⏰","☎️","🚨","♻️","✅","🔒","📎","📖","🗣","➡️","📢","🛠","⚙"],ne=(0,P.defineMessages)({noResults:{defaultMessage:"No results",id:"emojiPicker.noResults.message"}});var oe=!1;class se extends c.Z{constructor(){super(...arguments),this.filter="",this.splitFilter=[],this.storeTypes={menuListStore:R.Z},this.insertEmoji=e=>{this.props.onSubmit(e),this.addToRecentEmojis(e),this.props.iconLoggingData&&p.fAb(this.environment,"pick_emoji",{icon:e,...this.props.iconLoggingData})},this.createCategory=e=>{let t=[];if(t="recent"===e.id?U.state.recentEmojis||[]:"callout"===e.id?ae:L.Z.state.emojiByCategory[e.id]||[],this.filter&&(t=this.filterAndSortEmojis(t)),0!==t.length)return{key:e.id,items:t.map((e=>this.getTonedEmojiIfSkinToneSet(e))).map(this.createListItem),render:t=>n()(A.Z,{isTitleUppercase:!0,title:e.title},t.key,n()("div",{style:this.getEmojiSectionWrapStyle()},void 0,t.children))}},this.createListItem=e=>{const t=T.Hk(e,L.Z.state),i=void 0===(0,D.sg)()?T.yS(e,L.Z.state):[];return{key:e,action:()=>{0===i.length&&this.insertEmoji(e)},render:a=>o.createElement(ie,d()({},a,{emoji:e,tooltip:t,variations:i,insertEmoji:this.insertEmoji}))}},this.removeSkinToneModifierIfSkinToneSet=e=>void 0===(0,D.sg)()?e:T.Gb(e),this.getTonedEmojiIfSkinToneSet=e=>{var t;const i=(0,D.sg)(),a=void 0!==i&&0!==i,n=null===(t=T.yz(e,L.Z.state))||void 0===t?void 0:t.variations;return(null==n?void 0:n.length)===k.tN&&a?n[i-1]:e},this.handleScroll=e=>{if(e<se.loadMoreCategoryEdgeDistance){const{loadEmojiCount:e}=U.state,t=Math.max(this.getNumIconsPerRow()*this.getNumRowsPerPage(),this.getAllSectionsEmojiCount());U.setState({...U.state,loadEmojiCount:Math.min(t,e+this.getNumIconsPerRow()*this.getNumRowsPerPage())})}}}willMount(e){super.willMount(e),U.setState({...U.state,loadEmojiCount:this.getNumIconsPerRow()*this.getNumRowsPerPage()}),U.cleanupSkinTonedRecents((0,D.sg)()),this.loadEmojiData()}didUpdate(e){const{menuListStore:t}=this.stores;e.filter!==this.props.filter&&t.setState({...t.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}renderComponent(){const{menuListStore:e}=this.stores,t=this.getVisibleSections(this.getAllSections()),i=this.environment.device.isDesktop&&t.length>0?0:void 0;return 0===t.length&&(this.props.onNoResults&&this.props.onNoResults(),t.push({key:"no results",items:[{key:"no results",action:()=>{},render:(e,t)=>o.createElement(x.Z,d()({},e,{caption:B.default.formatMessage(ne.noResults)}))}],render:e=>o.createElement(A.Z,e)})),n()("div",{style:se.wrapStyle},void 0,n()("div",{style:{flexGrow:1}},void 0,o.createElement(Z.Z,d()({},this.getMenuListProps(),{store:e,initialFocus:i,sections:t,disableKeyboardArrowWrap:!0,unfocusOnScroll:this.environment.device.isMobile}))),n()(F.Z,{onChange:this.handleScroll}))}getNumIconsPerRow(){var e,t;const{device:i,WindowSizeStore:a}=this.environment;return i.isPhone?(window.innerWidth-a.getSafePaddingLeftPx(w.$P)-a.getSafePaddingRightPx(w.qJ))/w.mz:i.isTablet?w.tg:null!==(e=this.props)&&void 0!==e&&null!==(e=e.menuRef)&&void 0!==e&&null!==(e=e.current)&&void 0!==e&&e.offsetWidth?((null===(t=this.props)||void 0===t||null===(t=t.menuRef)||void 0===t||null===(t=t.current)||void 0===t?void 0:t.offsetWidth)-2*w.PS)/w.T8:w.IQ}getNumRowsPerPage(){return this.environment.device.isMobile?w.pq:w.II}async loadEmojiData(){await(0,E.L)(),await this.loadUniqueKeywords()}async loadUniqueKeywords(){if(!oe){await L.Z.waitUntilLoaded();for(const t in L.Z.state.positionalEmojiData){var e;const i=null===(e=T.yz(t,L.Z.state))||void 0===e?void 0:e.keywords;i&&(k.Q4[t]={...k.Q4[t],uniqueKeywords:u.jj(i.flatMap((e=>e.split(" "))))})}oe=!0}}addToRecentEmojis(e){const t=I.Z.get(O),i=u.jj(u.G0([this.removeSkinToneModifierIfSkinToneSet(e)],T.p4(t))),a=u.qn(i,w.Nm*this.getNumIconsPerRow());I.Z.set(O,a.join("")),U.setState({...U.state,recentEmojis:a})}getAllSections(){this.filter=T.rJ(this.props.filter)??"",this.splitFilter=this.filter?this.filter.split(" ").filter(Boolean):[];const e=u.oA(this.getCategories().map(this.createCategory));return this.props.filter&&this.filter?this.getEmojiItemCount(e)>this.getNumIconsPerRow()*this.getNumRowsPerPage()/2?e:this.createFilteredSection():e}getAllSectionsEmojiCount(){const e=this.getAllSections();let t=0;for(const i of e)t+=i.items.length;return t}getEmojiItemCount(e){let t=0;for(const i of e)t+=i.items.length;return t}getVisibleSections(e){const{loadEmojiCount:t}=U.state,i=[];let a=0;for(const n of e){if(!(a+n.items.length<=t)){i.push({...n,items:n.items.slice(0,t-a)});break}i.push(n),a+=n.items.length}return i}getCategories(){return u.oA([!this.props.filter&&{id:"recent",title:n()(P.FormattedMessage,{id:"emojiPicker.section.recent",defaultMessage:"Recent"})},this.props.isCallout?{id:"callout",title:n()(P.FormattedMessage,{id:"emojiPicker.section.callout",defaultMessage:"Callout"})}:void 0,{id:"People & Body",title:n()(P.FormattedMessage,{id:"emojiPicker.section.people",defaultMessage:"People"})},{id:"Animals & Nature",title:n()(P.FormattedMessage,{id:"emojiPicker.section.animals",defaultMessage:"Animals and nature"})},{id:"Food & Drink",title:n()(P.FormattedMessage,{id:"emojiPicker.section.food",defaultMessage:"Food and drink"})},{id:"Activities",title:n()(P.FormattedMessage,{id:"emojiPicker.section.activity",defaultMessage:"Activity"})},{id:"Travel & Places",title:n()(P.FormattedMessage,{id:"emojiPicker.section.travel",defaultMessage:"Travel and places"})},{id:"Objects",title:n()(P.FormattedMessage,{id:"emojiPicker.section.objects",defaultMessage:"Objects"})},{id:"Symbols",title:n()(P.FormattedMessage,{id:"emojiPicker.section.symbols",defaultMessage:"Symbols"})},{id:"Flags",title:n()(P.FormattedMessage,{id:"emojiPicker.section.flags",defaultMessage:"Flags"})}])}filterAndSortEmojis(e){const{filter:t,splitFilter:i}=this,a=u.oA(e.map((e=>{const a=T.yz(e,L.Z.state),n=a&&a.keywords||[],o=t.length<3||t.includes(" ")?n:n.map((e=>e.replaceAll(" ",""))),s=o.findIndex((e=>e===`:${t}`));if(-1!==s)return[100-s,e];const r=o.findIndex((e=>e===t));if(-1!==r)return[10*(10-r),e];const l=o.findIndex((e=>e.startsWith(t)));if(-1!==l)return[10-l,e];if(i.length>1){const t=a&&a.uniqueKeywords||[];if(i.every((e=>t.find((t=>t.startsWith(e))))))return[i.length,e]}return o.some((e=>e.includes(t)))?[1,e]:void 0})));return u.MR(a,(e=>-e[0])).map((e=>e[1]))}createFilteredSection(){const e=this.filterAndSortEmojis(u.xH(this.getCategories().map((e=>L.Z.state.emojiByCategory[e.id]))));return 0===e.length?[]:[{key:"search-results",items:e.map((e=>this.getTonedEmojiIfSkinToneSet(e))).map(this.createListItem),render:e=>n()(A.Z,{},e.key,n()("div",{style:this.getEmojiSectionWrapStyle()},void 0,e.children))}]}getMenuListProps(){return{type:Z.i.Grid,itemsPerRow:this.getNumIconsPerRow(),renderRow:(e,t)=>n()("div",{style:se.rowStyle},t,e)}}getEmojiSectionWrapStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"flex-start",...e.isPhone?{background:this.theme.popoverBackground,paddingTop:10,paddingBottom:10,paddingLeft:t.getSafePaddingLeftCSS(w.$P),paddingRight:t.getSafePaddingRightCSS(w.qJ),boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,marginBottom:1}:{background:_.ZP.transparent,paddingLeft:e.isTablet?w.vP:w.PS,paddingRight:e.isTablet?w.vP:w.PS}}}}se.displayName="EmojiPicker",se.loadMoreCategoryEdgeDistance=100,se.wrapStyle={display:"flex",flexDirection:"column"},se.rowStyle={display:"flex"};const re=se;class le extends c.Z{constructor(){super(...arguments),this.renderMenu=()=>{const{device:e}=this.environment,t=C.Z.state,i=o.createRef();if(!t.open)return;let a;return a=e.isMobileNative&&!e.isTablet?{menuType:y.og.ActionSheet}:{menuType:y.og.Popup,width:w.fG,maxHeight:w.VJ,onClickOutside:g.xv},o.createElement(f.Z,d()({innerRef:i},a),n()(re,{filter:this.getFilter(t)||"",onSubmit:this.handleSubmit,onNoResults:this.handleNoResults,isCallout:!1,menuRef:i}))},this.handleNoResults=()=>{const e=C.Z.state;if(!e.open)return;const t=this.getFilter(e);if(!t)return;const i=u.Z$(t);i&&(/\s/g.test(i)?g.xv():this.trackNoResultsDebounced(t))},this.trackNoResultsDebounced=u.Ds((e=>{p.VJs(this.environment,{searchQuery:e})}),500),this.handleSubmit=e=>{h.createAndCommit({userAction:"EmojiMenu.handleSubmit",environment:this.environment,perform:t=>{g.RL({environment:this.environment,emoji:e,transaction:t})}})},this.handleCancel=()=>{g.xv()}}willMountOrUpdate(){const e=C.Z.state;if(e.open){var t;const i=M.default.state,a=this.getFilter(e);if("editing"!==i.mode)return void g.xv();const n=m.eeV(i.multiSelection.start.store.getValue())[i.multiSelection.start.index-1];if(!a&&":"!==n)return void g.xv();((null===(t=(0,S.QY)(i.multiSelection))||void 0===t?void 0:t.store)!==e.textStore||void 0===a||":"===a||a.startsWith("\n")||a.startsWith(" "))&&g.xv()}}renderComponent(){const{device:e}=this.environment,t=C.Z.state;let i=!1;if(t.open){const e=this.getFilter(t);e&&e.length>0&&(i=!0),t.showPopupWithEmptyFilter&&(i=!0)}return n()(v.ZP,{popupType:e.isMobileNative&&!e.isTablet?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:i,originRect:t.open?t.selectionRect:void 0,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,onDismiss:this.handleCancel,render:this.renderMenu,keepFocus:!0})}getFilter(e){return b.zK(e.textStore,e.oldTextValue,!0)}}le.displayName="EmojiMenu";const de=le;var ce=i(95697),ue=i(77907),me=i(35868);function pe(){window.__c={n:"MessageStoreDebugPanelWrapper"};return(0,r.VK)((()=>me.Z.state.open),[],{debugName:"MessageStoreDebugPanelWrapper.isOpen"})?n()(ue.LazyMessageStoreDebugPanel,{}):null}var ge=i(19671),he=i(13023),fe=i(41464),ve=i(54564),ye=i(63698),Se=i(45094),be=i(24229),Me=i(41432),we=i(78089),Ce=i(65598),_e=i(34859),ke=i(16550),Te=i(36488),Ie=i(72897),Pe=i(40721),xe=i(3553),Ze=i(66957);const Fe=[be.u.Open,be.u.Resolved];class Ae extends c.Z{constructor(){super(...arguments),this.deepDiscussionsStores=this.createComputedStore((()=>{const{discussionIds:e}=this.props,{blockStore:t,recursivelyLoadAllDiscussions:i}=this.props;return Ce.al(t,{recursivelyLoadAllDiscussions:i}).filter((t=>!e||e.includes(t.id)||(0,we.De)(t)))})),this.handleChangeTab=e=>{const t=be.Z.state;t.open&&be.Z.setState({...t,tab:Fe[e]})},this.handleBackspace=e=>{null==e||e.preventDefault(),ve.LZ()}}renderComponent(){if((0,Se.Sx)(this.environment))return null;const{device:e}=this.environment;let t;return t=e.isMobile?{menuType:y.og.Modal,title:n()(P.FormattedMessage,{defaultMessage:"Comments",id:"blockDiscussionMenu.mobileMenu.title"}),header:this.renderMenuHeader(),right:n()(Pe.DoneMenuText,{}),onClickRight:ve.LZ,whiteBackground:!0}:{menuType:y.og.Popup,header:this.renderMenuHeader(),width:480,maxHeight:"50vh",onClickOutside:ve.LZ},n()(Ie.Z,{capture:!0,preventType:_e.Z.All},void 0,n()(Te.Z,{capture:!0,allowMobileAutoScroll:!0,render:()=>n()(H.Z,{capture:!0,onEsc:ve.LZ,onBackspace:this.handleBackspace,onDelete:this.handleBackspace},void 0,n()(xe.Z,{store:this.props.blockStore,droppable:!0,render:()=>o.createElement(f.Z,t,this.renderMenuContent())},this.props.blockStore.id))}))}renderMenuHeader(){const{device:e}=this.environment,{resolved:t,unresolved:i}=Ce.bB(this.deepDiscussionsStores.state),a=i.length,o=t.length;return 0===o||0===a?null:n()(Ze.Z,{tabs:[n()(P.FormattedMessage,{defaultMessage:"Open ({numberOfOpenDiscussions})",id:"blockDiscussionMenu.openDiscussionsTab.title",values:{numberOfOpenDiscussions:a}}),n()(P.FormattedMessage,{defaultMessage:"Resolved ({numberOfResolvedDiscussions})",id:"blockDiscussionMenu.resolvedDiscussionsTab.title",values:{numberOfResolvedDiscussions:o}})],selectedIndex:Fe.indexOf(this.props.tab),onChange:this.handleChangeTab,style:{...e.isAndroid&&{borderBottom:"none"}}})}renderMenuContent(){const{device:e}=this.environment,{resolved:t,unresolved:i}=Ce.bB(this.deepDiscussionsStores.state);if(this.props.tab===be.u.Open){if(i.length){const t=i.map(((e,t,i)=>n()(ue.LazyDiscussion,{store:e,format:we.O2.Menu,isFirst:0===t,isOnly:1===i.length,discussionLocation:"block_menu",showResolveButtonByDefaultIfPossible:!0,blockStore:this.props.blockStore,onDismiss:ve.LZ},e.id))),a=this.props.blockStore.getType(),s=a&&Me.p2[a];if(e.isMobile&&s){const e=ke.h(this.props.blockStore);return e?n()(o.Fragment,{},void 0,n()("div",{style:{padding:"12px 16px",boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,marginBottom:1}},void 0,n()(e,{store:this.props.blockStore,disabled:!0,hideContent:!0,style:{fontSize:14,pointerEvents:"none"},isQuickFind:!0})),t):t}return t}return this.renderEmptyState(n()(P.FormattedMessage,{defaultMessage:"No comments to show.",id:"blockDiscussionMenu.emptyState.noCommentsMessage"}))}return t.length?t.map(((e,t,i)=>n()(ue.LazyDiscussion,{store:e,format:we.O2.Menu,isFirst:0===t,isOnly:1===i.length,discussionLocation:"block_menu",showResolveButtonByDefaultIfPossible:!0,blockStore:this.props.blockStore,onDismiss:ve.LZ},e.id))):this.renderEmptyState(n()(P.FormattedMessage,{defaultMessage:"No resolved comments.",id:"blockDiscussionMenu.emptyState.noResolvedCommentsMessage"}))}renderEmptyState(e){const{device:t}=this.environment;return n()("div",{style:{textAlign:"center",padding:t.isMobile?"64px 18px":"32px 18px 36px",fontSize:14,color:this.theme.mediumTextColor}},void 0,e)}}Ae.displayName="BlockDiscussionMenu";const Ee=Ae;const Be=function(){window.__c={n:"BlockDiscussionMenuPopup"};const e=(0,s.O7)(),{device:t}=e,i=(0,r.VK)((()=>be.Z.state.rect),[]),a=(0,r.VK)((()=>!(0,Se.Sx)(e)&&be.Z.state.open&&!(0,ye.az)(e,be.Z.state.blockStore)),[e]),l=(0,o.useCallback)((()=>{if(be.Z.state.open&&!(0,Se.Sx)(e))return n()(Ee,{rect:be.Z.state.rect,tab:be.Z.state.tab,blockStore:be.Z.state.blockStore,discussionIds:be.Z.state.discussionIds,recursivelyLoadAllDiscussions:be.Z.state.recursivelyLoadAllDiscussions})}),[e]);return n()(v.ZP,{popupType:t.isMobile?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:a,originRect:i,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Center,disableMouseCapture:!0,originGap:4,render:l,preventScaleTransition:!0,preventOpacityTransition:!0,onDismiss:ve.LZ})};var Re=i(29369),De=i(97880),Le=i(49386);const Ne=[{key:"block in comment menu primary",render:e=>o.createElement(A.Z,e),actions:[i(35067).G,Le.yN,Le.TH]}];var Oe=i(63923),Ve=i(82763),Ue=i(34658);const We=[{key:"page mention context menu primary",render:e=>o.createElement(A.Z,d()({isTitleUppercase:!1},e)),actions:[Ue.sN,Ue.Jw,Ue.KB,Ue.oL,Ve.K,Ve.H]}];var ze=i(6404),Ke=i(28020),He=i(75079),Ge=i(18514),qe=i(35328),je=i(40745),Ye=i(37652),$e=i(33907),Qe=i(8597),Je=i(80988),Xe=i(53465),et=i(88437),tt=i(77734),it=i(73599),at=i(37612),nt=i(62967),ot=i(41216),st=i(19037),rt=i(80025),lt=i(98794);const dt=(0,P.defineMessages)({simpleTableHeaderColumn:{id:"action.rowHeader.title",defaultMessage:"Header column"},simpleTableHeaderRow:{id:"action.columnHeader.title",defaultMessage:"Header row"},simpleTableInsertColumnLeft:{id:"action.insertColumnLeft.title",defaultMessage:"Insert Left"},simpleTableInsertColumnRight:{id:"action.insertColumnRight.title",defaultMessage:"Insert Right"},simpleTableClearContents:{id:"action.clearContents.title",defaultMessage:"Clear Contents"},simpleTableInsertRowAbove:{id:"action.insertRowAbove.title",defaultMessage:"Insert Above"},simpleTableInsertRowBelow:{id:"action.insertRowBelow.title",defaultMessage:"Insert Below"},textColorSection:{id:"action.section.textColor",defaultMessage:"Text Color"},backgroundColorSection:{id:"action.section.backgroundColor",defaultMessage:"Background Color"}}),ct=(0,nt.wL)({key:"simple table header column",displayName:dt.simpleTableHeaderColumn,label:B.default.formatMessage(dt.simpleTableHeaderColumn),property:"table_block_row_header",svg:tt.s,validators:[st.J5,st.ff(st.b4),st.W5,st.p4],afterAction:(e,t)=>{}}),ut=(0,nt.wL)({key:"simple table header row",displayName:dt.simpleTableHeaderRow,label:B.default.formatMessage(dt.simpleTableHeaderRow),property:"table_block_column_header",svg:it.f,validators:[st.J5,st.ff(st.b4),st.W5,st.zO],afterAction:(e,t)=>{}}),mt=(0,nt.cN)({key:"insert column left",displayName:dt.simpleTableInsertColumnLeft,analyticsName:dt.simpleTableInsertColumnLeft.defaultMessage,svg:Ye.V,validators:[st.J5,st.ff(st.fI),st.W5,st.z2],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.insertColumnLeft",environment:t,perform:e=>{lt.insertColumnLeft({environment:t,transaction:e})}})}}),pt=(0,nt.cN)({key:"insert column right",displayName:dt.simpleTableInsertColumnRight,analyticsName:dt.simpleTableInsertColumnRight.defaultMessage,svg:$e.n,validators:[st.J5,st.ff(st.fI),st.W5,st.z2],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.insertColumnRight",environment:t,perform:e=>{lt.insertColumnRight({environment:t,transaction:e})}})}}),gt=(0,nt.cs)({key:"duplicate columns",displayName:nt.RE.duplicateName,analyticsName:nt.RE.duplicateName.defaultMessage,svg:et.a,validators:[st.J5,st.ff(st.fI),st.W5,st.z2],shortcuts:["duplicate"],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.duplicateColumns",environment:t,perform:e=>{lt.duplicateColumns({transaction:e})}})}}),ht=(0,nt.cs)({key:"delete columns",displayName:nt.RE.deleteName,analyticsName:nt.RE.deleteName.defaultMessage,svg:at.y,validators:[st.J5,st.ff(st.fI),st.W5,st.OT,st.z2],shortcuts:["delete","backspace"],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.deleteColumns",environment:t,perform:e=>{lt.deleteColumns({environment:t,transaction:e})}})}}),ft=(0,nt.cN)({key:"clear column contents",displayName:dt.simpleTableClearContents,analyticsName:dt.simpleTableClearContents.defaultMessage,svg:Xe.X,validators:[st.J5,st.ff(st.fI),st.W5,st.z2],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.clearColumnContents",environment:t,perform:e=>{lt.clearSelectionContents({environment:t,transaction:e})}}),lt.clearSelection()}}),vt=(0,nt.cN)({key:"insert row above",displayName:dt.simpleTableInsertRowAbove,analyticsName:dt.simpleTableInsertRowAbove.defaultMessage,svg:Qe.Z,validators:[st.J5,st.ff(st.fI),st.W5,st.EJ],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.insertRowAbove",environment:t,perform:e=>{lt.insertRowAbove({environment:t,transaction:e})}})}}),yt=(0,nt.cN)({key:"insert row below",displayName:dt.simpleTableInsertRowBelow,analyticsName:dt.simpleTableInsertRowBelow.defaultMessage,svg:je.M,validators:[st.J5,st.ff(st.fI),st.W5,st.EJ],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.insertRowBelow",environment:t,perform:e=>{lt.insertRowBelow({environment:t,transaction:e})}})}}),St=(0,nt.cs)({key:"duplicate rows",displayName:nt.RE.duplicateName,analyticsName:nt.RE.duplicateName.defaultMessage,svg:et.a,validators:[st.J5,st.ff(st.fI),st.W5,st.EJ],shortcuts:["duplicate"],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.duplicateRows",environment:t,perform:e=>{lt.duplicateRows({environment:t,transaction:e})}})}}),bt=(0,nt.cs)({key:"delete rows",displayName:nt.RE.deleteName,analyticsName:nt.RE.deleteName.defaultMessage,svg:at.y,validators:[st.J5,st.ff(st.fI),st.W5,st.W3,st.EJ],shortcuts:["delete","backspace"],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.deleteRows",environment:t,perform:e=>{lt.deleteRows({environment:t,transaction:e})}})}}),Mt=(0,nt.cN)({key:"clear row contents",displayName:dt.simpleTableClearContents,analyticsName:dt.simpleTableClearContents.defaultMessage,svg:Xe.X,validators:[st.J5,st.ff(st.fI),st.W5,st.EJ],closeParentMenu:!0,action:e=>{let{environment:t}=e;h.createAndCommit({userAction:"actionRegistry.clearRowContents",environment:t,perform:e=>{lt.clearSelectionContents({environment:t,transaction:e})}}),lt.clearSelection()}}),wt=[st.J5,st.ff(st.fI),st.W5,st.z2],Ct=[st.J5,st.ff(st.fI),st.W5,st.EJ];function _t(e,t,i,a){const n=a||(0,rt.qf)(e),s=(0,nt.cN)({key:`color ${i||e}`,displayName:n,analyticsName:n.defaultMessage,fuzzySearchKeywords:(0,nt.CJ)(e),validators:"column"===t?wt:Ct,action:t=>{let{blocks:i,environment:a}=t;h.createAndCommit({userAction:"actionRegistry.createSimpleTableColorAction",environment:a,perform:t=>{lt.setColor(a,e,t)}})},closeParentMenu:!0,render:t=>o.createElement(ot.Z,d()({},t,{color:e,overrideDisplayName:s.displayName})),nativeRender:t=>{let{environment:a}=t;return(0,nt.fi)(a,e,i)}});return s}const kt=(0,nt.$J)({key:"simple table column background color actions",title:nt.RE.backgroundSection,overrideSearchTitle:nt.RE.backgroundSectionKeywords,render:e=>o.createElement(A.Z,e),actions:[_t("default","column","default background",rt.mF.backgroundColorDefault),..._._K.map((e=>_t(e,"column")))]}),Tt=(0,nt.$J)({key:"simple table column text color actions",title:nt.RE.colorSection,overrideSearchTitle:nt.RE.colorSection,render:e=>o.createElement(A.Z,e),actions:[..._.CY.map((e=>_t(e,"column")))]}),It=(0,nt.$J)({key:"simple table row background color actions",title:nt.RE.backgroundSection,overrideSearchTitle:nt.RE.backgroundSectionKeywords,render:e=>o.createElement(A.Z,e),actions:[_t("default","row","default background",rt.mF.backgroundColorDefault),..._._K.map((e=>_t(e,"row")))]}),Pt=(0,nt.$J)({key:"simple table row text color actions",title:nt.RE.colorSection,overrideSearchTitle:nt.RE.colorSection,render:e=>o.createElement(A.Z,e),actions:[..._.CY.map((e=>_t(e,"row")))]}),xt=(0,nt.MV)({key:"set column color",displayName:nt.RE.colorName,analyticsName:nt.RE.colorName.defaultMessage,svg:Je.U,validators:wt,subActions:()=>[{key:0,title:B.default.formatMessage(dt.textColorSection),render:e=>o.createElement(A.Z,e),actions:Tt.actions},{key:1,title:B.default.formatMessage(dt.backgroundColorSection),render:e=>o.createElement(A.Z,e),actions:kt.actions}]}),Zt=(0,nt.MV)({key:"set row color",displayName:nt.RE.colorName,analyticsName:nt.RE.colorName.defaultMessage,svg:Je.U,validators:Ct,subActions:()=>[{key:0,title:B.default.formatMessage(dt.textColorSection),render:e=>o.createElement(A.Z,e),actions:Pt.actions},{key:1,title:B.default.formatMessage(dt.backgroundColorSection),render:e=>o.createElement(A.Z,e),actions:It.actions}]}),Ft=[(0,nt.$J)({key:"column section",render:e=>o.createElement(A.Z,e),actions:[ct,xt,mt,pt,gt,ft,ht]}),(0,nt.$J)({key:"row section",render:e=>o.createElement(A.Z,e),actions:[ut,Zt,vt,yt,St,Mt,bt]})];var At=i(8949),Et=i(57559),Bt=i(27724),Rt=i(13713),Dt=i(80209),Lt=i(48019),Nt=i(83182);class Ot extends c.Z{constructor(){super(...arguments),this.renderOverlay=()=>{const{device:e}=this.environment,t=At.Z.state;if(!t.isActive)return;const{originBlockRect:i,actionSectionGroupKey:a,inputValue:s,publicEditMode:r}=t,l={environment:this.environment,blocks:t.stores,originRect:i,publicEditMode:r},d=t.showInput&&this.renderInputSection(),c=t.stores[0];let m;return m=e.isPhone?{menuType:y.og.Modal,title:n()(P.FormattedMessage,{defaultMessage:"Actions",id:"blockMenu.actionButton.label"}),right:n()(Pe.DoneMenuText,{}),onClickRight:this.handleOverlayBgClick,header:d}:{menuType:y.og.Popup,width:265,header:d},n()(H.Z,{capture:!0,onBackspace:u.yR},void 0,o.createElement(f.Z,m,n()(Lt.Z,{filter:s,context:l,sections:Vt(a),onAccept:this.handleAccept,initialFocus:s?0:void 0}),!s&&this.renderBlockAuthorInfo(),!s&&n()(Dt.Z,{store:c}),!s&&c.isCollectionView()&&this.renderCollectionHelpButton()))},this.handleOverlayBgClick=()=>{ze.xv()},this.handleAccept=e=>{const t=At.Z.state;if(!t.isActive)return;const{stores:i}=Bt.default.state,{analyticsFrom:a,collectionContextStore:n}=t,o=i[0];if(o){const t=o.getParentTable(),i=o.getType();if(i&&t){let s;if(t===Re.e0){const e=o.getParentId(),{currentSpaceStore:t}=J.default.getState();t&&void 0!==e&&(s=Et.zX.createChildStore(t,{table:Re.e0,id:e}))}const r=(0,He.Pn)(n)||{};p.dhV(this.environment,{analyticsName:e.analyticsName,from:a,block_id:o.id,block_type:i,parentTeamStore:s,is_toggleable:(0,qe._A)(i,o.getFormat()),...r})}}e.closeParentMenu&&ze.xv()},this.handleInputChange=e=>{At.Z.state.isActive&&At.Z.setState({...At.Z.state,inputValue:e.target.value})}}renderComponent(){const{device:e}=this.environment,t=At.Z.state;return n()(v.ZP,{popupType:e.isPhone?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:t.isActive,originRect:t.isActive?t.originBlockRect:void 0,onDismiss:this.handleOverlayBgClick,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,originGap:0,preventScaleTransition:!0,render:this.renderOverlay,preventBlockRenderQueueOnEnter:e.isMobile})}renderBlockAuthorInfo(){const e=At.Z.state;if(this.environment.currentUser.isLoggedIn()&&e.isActive&&!(e.stores.length>1)&&(1!==e.stores.length||!(0,Ke.qG)(e.stores[0].id)))return n()(Rt.Z,{store:e.stores[0],isPageMoreButton:!1})}renderInputSection(){const{device:e}=this.environment,{intl:t}=this.props,i=At.Z.state;if(!i.isActive||e.isPhone)return;const{inputValue:a}=i;return n()(A.Z,{isInput:!0},void 0,n()(Q.ZP,{value:a,onChange:this.handleInputChange,focus:!0,focusAfterAnimation:!0,placeholder:t.formatMessage({defaultMessage:"Search actions…",id:"blockMenu.filterForActions.placeholder"}),preventCaptureDeleteWhenEmpty:!0}))}renderCollectionHelpButton(){return n()(A.Z,{topBorder:!0},void 0,n()(Nt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Learn about databases",id:"blocks.blockMenu.collectionHelpButton"}),href:(0,Ge.UY)("guides.database"),analyticsFrom:"block_menu"}))}}function Vt(e){switch(e){case"default":return Le.Qi;case"simple_table":return Ft;case"page_mention":return We;case"sidebar_outliner":return Oe.Oq;case"comment_media":return Ne;default:(0,De.t1)(e)}}Ot.displayName="BlockMenu";const Ut=(0,P.injectIntl)(Ot);var Wt=i(62965),zt=i(79554),Kt=i(43250),Ht=i(61207),Gt=i(52275);const qt=(0,P.defineMessages)({createTransclusion:{defaultMessage:"Paste and sync",id:"blockPasteMenu.actions.createTransclusion.title"},linkToPage:{defaultMessage:"Link to page",id:"blockPasteMenu.actions.linkToPage.title"},dismissItem:{defaultMessage:"Dismiss",id:"blockPasteMenu.actions.dismiss.title"}});class jt extends c.Z{constructor(){super(...arguments),this.renderMenu=()=>{const{device:e}=this.environment,t=Ht.Z.state;if(!t.open)return;const i=this.getSections(t);let a;return a=e.isMobile?{menuType:y.og.ActionSheet}:{menuType:y.og.Popup,width:320,maxHeight:"40vh"},o.createElement(f.Z,d()({},a,{className:Kt.srZ}),n()(Z.Z,{type:Z.i.Vertical,sections:i,initialFocus:0}))},this.handleDismiss=()=>{zt.xv()}}willMountOrUpdate(){const e=Ht.Z.state;if(e.open){const{stores:t,phase:i}=Bt.default.state;(0,Wt.Z)(t,e.blocks)&&i===Bt.SelectionPhase.Selected||zt.xv()}}renderComponent(){const{device:e}=this.environment,t=Ht.Z.state;return n()(v.ZP,{popupType:e.isMobileNative&&!e.isTablet?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:t.open,originRect:t.open?t.rect:void 0,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:e.isMobile,keepFocus:e.isMobile,render:this.renderMenu,onDismiss:this.handleDismiss})}getSections(e){const{blocks:t}=e,{currentSpaceStore:i}=J.default.state,a=[];if("blocks"===e.type){const{copiedStores:n,pageSource:o}=e;zt.H8({currentSpaceId:null==i?void 0:i.id,blocks:t,copiedStores:n})&&a.push({name:B.default.formatMessage(qt.createTransclusion),action:async()=>{await zt.ry({environment:this.environment,blocks:t,copiedBlockIds:n.map((e=>e.id))})}}),zt.wK({blocks:t})&&a.push({name:B.default.formatMessage(qt.linkToPage),action:async()=>zt.Dq({environment:this.environment,blocks:t,source:{type:"blocks",copiedStores:n,pageSource:o}})})}"links"===e.type&&a.push({name:B.default.formatMessage(qt.linkToPage),action:async()=>zt.Dq({environment:this.environment,blocks:t,source:{type:"links",copiedLinks:e.copiedLinks}})});return[{key:"embed section",render:e=>o.createElement(A.Z,e),items:[{key:"dismiss",render:e=>o.createElement(Gt.Z,d()({},e,{title:B.default.formatMessage(qt.dismissItem)})),action:this.handleDismiss},...a.map((e=>{let{name:t,action:i}=e;return{key:`embed ${t}`,render:e=>o.createElement(Gt.Z,d()({},e,{title:t})),action:i}}))]}]}}jt.displayName="BlockPasteMenu";const Yt=jt;var $t=i(87143),Qt=i(74194),Jt=i(64369);class Xt extends c.Z{constructor(){super(...arguments),this.handleOverlayBgClick=e=>{$t.Z.setState({...$t.Z.state,active:!1,stringValue:""})}}renderComponent(){const{device:e}=this.environment,{active:t,stringValue:i}=$t.Z.state,a=window.innerWidth/2-150,o=window.innerHeight/2,s=e.isMobileNative?n()(P.FormattedMessage,{defaultMessage:"Tap to copy the link above",id:"clipboardInputRenderer.copyLink.mobile_message"}):n()(P.FormattedMessage,{defaultMessage:"Right click and copy the link above",id:"clipboardInputRenderer.copyLink.message"});return n()(v.ZP,{popupType:e.isMobileNative?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:t,originRect:{top:o,left:a},onDismiss:this.handleOverlayBgClick,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,originGap:0,render:()=>n()(H.Z,{capture:!0,onEnter:u.yR,onCommandEnter:u.yR,onCommandShiftEnter:u.yR,onCommandSlash:u.yR,onDelete:u.yR,onBackspace:u.yR,onEsc:u.yR,onLeft:u.yR,onRight:u.yR,onUntab:u.yR,onTab:u.yR,onSelectAll:u.yR,onRedo:u.yR,onUndo:u.yR,onToggleBold:u.yR,onToggleItalics:u.yR,onToggleStrike:u.yR,onToggleCode:u.yR,onCut:u.yR,onCopy:u.yR,onPaste:u.yR,onKeypress:u.yR},void 0,n()("div",{style:{padding:8,width:300}},void 0,n()(Qt.Z,{style:{width:"100%",fontSize:12},value:i,focus:!0,textarea:!0,selectAll:!0,readOnly:!0}),n()(Jt.Z,{isSmall:!0,style:{marginTop:6,pointerEvents:"none"}},void 0,s)))})}}Xt.displayName="ClipboardInputRenderer";const ei=Xt;var ti=i(11977),ii=i(14131),ai=i(7337),ni=i(29193),oi=i(40506),si=i(67133),ri=i(9953),li=i(28748);class di extends c.Z{constructor(){super(...arguments),this.handleChangeValue=e=>{if(!e)return void this.removeDateAnnotation();if(!oi.U3(e))return;const t=this.getEverythingIWant();if(!t)return;const{date_format:i,time_format:a}=t;this.setDateAnnotationData({date_format:i,time_format:a,...e})},this.handleChangeDateFormat=e=>{const t=this.getEverythingIWant();if(!t)return;const{dateValue:i,time_format:a}=t;this.setDateAnnotationData({date_format:e,time_format:a,...i})},this.handleChangeTimeFormat=e=>{const t=this.getEverythingIWant();if(!t)return;const{dateValue:i,date_format:a}=t;this.setDateAnnotationData({date_format:a,time_format:e,...i})},this.setDateAnnotationData=e=>{const t=this.getEverythingIWant();if(!t)return;const{textStore:i,textValue:a,tokenIndex:n,annotations:o}=t,s=a.map(((t,i)=>{if(i===n){const i=o.map((t=>m.fpG(t)?["d",e]:t));return m.V3y(t[0],i)}return t}));h.createAndCommit({userAction:"DateMentionMenu.setDateAnnotationData",environment:this.environment,perform:e=>{ri.sO({store:i,value:s,transaction:e})}})},this.removeDateAnnotation=()=>{const e=this.getEverythingIWant();if(!e)return;const{textStore:t,textValue:i,tokenIndex:a}=e,n=i.filter(((e,t)=>t!==a));h.createAndCommit({userAction:"DateMentionMenu.removeDateAnnotation",environment:this.environment,perform:e=>{ri.sO({store:t,value:n,transaction:e})}})}}renderComponent(){const{device:e}=this.environment,t=li.Z.state;return n()(v.ZP,{popupType:e.isMobile?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:t.open,originRect:t.originRect,onDismiss:si.x,render:()=>{const e=this.getEverythingIWant();if(!e)return null;const{date_format:i,time_format:a,dateValue:o}=e;return n()(ue.DependencyConsumer,{dependency:ue.deps.menus},void 0,(e=>{let{DatePropertyMenu:s}=e;return n()(s,{firstDayOfWeek:Ke.AK.state,value:o,canConfigureCollection:!0,onChangeValue:this.handleChangeValue,dateFormat:i,onChangeDateFormat:this.handleChangeDateFormat,timeFormat:a,onChangeTimeFormat:this.handleChangeTimeFormat,onDismiss:si.x,disabled:!1,shouldShowReminder:!!t.open&&t.allowReminders,isTemplatePage:!1})}))}})}getEverythingIWant(){const e=li.Z.state;if(e.open){const{textStore:t,tokenIndex:i}=e,a=t.getValue();if(a){const e=a[i];if(e){const n=m.hDy(e),o=m.K9C(n);if(o){const{date_format:s,time_format:r,...l}=m.zyO(o);return{textStore:t,textValue:a,tokenIndex:i,token:e,annotations:n,date_format:s,time_format:r,dateValue:l}}}}}}}di.displayName="DateMentionMenu";const ci=di;i(30541);var ui=i(95538),mi=i(515),pi=i(21202),gi=i(63143),hi=i(89951),fi=i(95477),vi=i(64233),yi=i(88923);const Si=(0,P.defineMessages)({image:{defaultMessage:"Embed image",id:"embedMenu.action.image"},video:{defaultMessage:"Embed video",id:"embedMenu.action.video"},tweet:{defaultMessage:"Embed Tweet",id:"embedMenu.action.tweet"},drive:{defaultMessage:"Embed Google Drive",id:"embedMenu.action.drive"},gist:{defaultMessage:"Embed GitHub Gist",id:"embedMenu.action.gist"},figma:{defaultMessage:"Embed Figma",id:"embedMenu.action.figma"},invision:{defaultMessage:"Embed Invision project",id:"embedMenu.action.invision"},abstract:{defaultMessage:"Embed Abstract project",id:"embedMenu.action.abstract"},framer:{defaultMessage:"Embed Framer prototype",id:"embedMenu.action.framer"},whimsical:{defaultMessage:"Embed Whimsical board",id:"embedMenu.action.whimsical"},mixpanel:{defaultMessage:"Embed Mixpanel project",id:"embedMenu.action.mixpanel"},sketch:{defaultMessage:"Embed Sketch document",id:"embedMenu.action.sketch"},excalidraw:{defaultMessage:"Embed excalidraw",id:"embedMenu.action.excalidraw"},replit:{defaultMessage:"Embed a repl",id:"embedMenu.action.replit"},miro:{defaultMessage:"Embed Miro board",id:"embedMenu.action.miro"},audio:{defaultMessage:"Embed audio",id:"embedMenu.action.audio"},maps:{defaultMessage:"Embed Google Map",id:"embedMenu.action.maps"},loom:{defaultMessage:"Embed Loom",id:"embedMenu.action.loom"},typeform:{defaultMessage:"Embed Typeform",id:"embedMenu.action.typeform"},codepen:{defaultMessage:"Embed CodePen",id:"embedMenu.action.codepen"},pdf:{defaultMessage:"Embed PDF",id:"embedMenu.action.pdf"},embed:{defaultMessage:"Create embed",id:"embedMenu.action.createEmbed"},hex:{defaultMessage:"Embed Hex",id:"embedMenu.action.hex"},deepnote:{defaultMessage:"Embed Deepnote",id:"embedMenu.action.deepnote"},drawing:{defaultMessage:"Embed a drawing",id:"embedMenu.action.drawing"}}),bi=(0,P.defineMessages)({linkToPage:{defaultMessage:"Link to page",id:"embedMenu.actions.linkToPage.title"},mentionPage:{defaultMessage:"Mention page",id:"embedMenu.actions.mentionPage.title"},mentionBlock:{defaultMessage:"Mention block",id:"embedMenu.actions.mentionBlock.title"},createLinkedDatabase:{defaultMessage:"Create linked database",id:"embedMenu.actions.createLinkedDatabase.title"},createLinkedViewOfDatabase:{defaultMessage:"Create linked view of database",id:"embedMenu.actions.createLinkedViewOfDatabase.title"},bookmarkMenuItem:{defaultMessage:"Create bookmark",id:"embedMenu.actions.createBookmark.title"},createTransclusionItem:{defaultMessage:"Paste and sync",id:"embedMenu.actions.createTransclusion.title"},dismissItem:{defaultMessage:"Dismiss",id:"embedMenu.actions.dismiss.title"}}),Mi={image:B.default.formatMessage(Si.image),video:B.default.formatMessage(Si.video),tweet:B.default.formatMessage(Si.tweet),drive:B.default.formatMessage(Si.drive),gist:B.default.formatMessage(Si.gist),figma:B.default.formatMessage(Si.figma),invision:B.default.formatMessage(Si.invision),abstract:B.default.formatMessage(Si.abstract),framer:B.default.formatMessage(Si.framer),whimsical:B.default.formatMessage(Si.whimsical),mixpanel:B.default.formatMessage(Si.mixpanel),miro:B.default.formatMessage(Si.miro),sketch:B.default.formatMessage(Si.sketch),excalidraw:B.default.formatMessage(Si.excalidraw),replit:B.default.formatMessage(Si.replit),audio:B.default.formatMessage(Si.audio),maps:B.default.formatMessage(Si.maps),loom:B.default.formatMessage(Si.loom),typeform:B.default.formatMessage(Si.typeform),codepen:B.default.formatMessage(Si.codepen),pdf:B.default.formatMessage(Si.pdf),embed:B.default.formatMessage(Si.embed),hex:B.default.formatMessage(Si.hex),deepnote:B.default.formatMessage(Si.deepnote),drawing:B.default.formatMessage(Si.drawing)};class wi extends c.Z{constructor(){super(...arguments),this.renderMenu=()=>{const{device:e}=this.environment,t=vi.Z.state;if(!t.open)return;const i=this.getSections(t);let a;return 0===i.length&&hi.xv(),a=e.isMobile?{menuType:y.og.ActionSheet}:{menuType:y.og.Popup,width:320,maxHeight:"40vh"},o.createElement(f.Z,d()({},a,{className:Kt.srZ}),n()(Z.Z,{type:Z.i.Vertical,sections:i,initialFocus:0}))},this.handleDismiss=()=>{const e=vi.Z.state,{url:t}=e;p.X0y(this.environment,{url:t,type:"close"}),hi.xv()},this.handleAccept=e=>{const t=vi.Z.state,{url:i}=t;hi.RL({environment:this.environment,type:e}),p.X0y(this.environment,{url:i,type:e})}}willMountOrUpdate(){const e=vi.Z.state;if(e.open){const t=M.default.state;if("editing"===t.mode){const{multiSelection:i}=t;(0,S.qS)(i)&&i.start.store.id===e.textStore.id&&i.end.index===e.urlSelection.endIndex||hi.xv()}}}renderComponent(){const{device:e}=this.environment,t=vi.Z.state;return n()(v.ZP,{popupType:e.isMobileNative&&!e.isTablet?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:t.open,originRect:t.open?t.selectionRect:void 0,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:e.isMobile,keepFocus:e.isMobile,render:this.renderMenu,onDismiss:this.handleDismiss})}isInCollection(e){const t=e.getRecordStoreAtRootPath();return t instanceof Et.G&&void 0!==t.getParentCollectionStore()}isCollectionViewWithContent(e,t){const i=e.getCollectionViewStores(),a=u.sE(i,(e=>e.id===t&&"page"===e.getType()));return Boolean(a)}getSections(e){const{device:t}=this.environment,{url:i,textStore:a}=e,{currentSpaceStore:n}=J.default.state,s=[],r=(0,mi.Wj)({url:i,baseUrl:fi.default.domainBaseUrl,publicDomainName:fi.default.publicDomainName,isMobile:t.isMobile,protocol:fi.default.protocol,currentUrl:window.location.href});if("page"===r.name){const e=Et.G.createChildStore(a,{table:pi.iU,id:r.blockId}),t=r.scrollToBlockId?Et.G.createChildStore(a,{table:pi.iU,id:r.scrollToBlockId}):void 0;s.push({name:B.default.formatMessage(bi.createLinkedViewOfDatabase),validator:()=>!t&&e.isCollectionView()&&!this.isInCollection(a)&&(!e.isCollectionViewPageWithContent()||!this.isCollectionViewWithContent(e,r.collectionViewId))&&!yi.default.isMiniPeekOpen()&&(null==n?void 0:n.id)===e.getSpaceId(),type:Me.Ti.collectionView}),s.push({name:B.default.formatMessage(void 0===t?bi.mentionPage:bi.mentionBlock),validator:()=>!0,type:"mention-page"}),s.push({name:B.default.formatMessage(bi.createTransclusionItem),validator:()=>Boolean(t&&!t.isNavigableBlock()&&!this.isInCollection(a)&&!t.isLocked()&&!t.isNavigableAncestorLocked()&&t.canEdit()&&t.getSpaceId()===(null==n?void 0:n.id)),type:"create-transclusion"}),s.push({name:B.default.formatMessage(bi.linkToPage),validator:()=>!t&&!e.isCollectionView()&&!this.isInCollection(a),type:Me.Ti.page})}const l=gi.XP(Mi);for(const o of l)"embed"!==o&&s.push({name:Mi[o],validator:ui.Wb[o],type:o});s.push({name:B.default.formatMessage(bi.bookmarkMenuItem),validator:e=>!this.isInCollection(a)&&ui.Cm(e),type:Me.Ti.bookmark}),s.push({name:Mi.embed,validator:e=>!this.isInCollection(a)&&ui.Wb.embed(e),type:"embed"});const c=u.oA(s.map((e=>{let{name:t,validator:a,type:n}=e;if(a({url:i,baseUrl:fi.default.domainBaseUrl,publicDomainName:fi.default.publicDomainName})){return{key:`embed ${t}`,render:e=>o.createElement(Gt.Z,d()({},e,{title:t})),action:()=>this.handleAccept(n)}}}))),m={key:"dismiss",render:e=>o.createElement(Gt.Z,d()({},e,{title:B.default.formatMessage(bi.dismissItem)})),action:this.handleDismiss};if(0===c.length)return[];"page"===r.name?c.push(m):c.unshift(m);return[{key:"embed section",render:e=>o.createElement(A.Z,e),items:c}]}}wi.displayName="EmbedMenu";const Ci=wi;var _i=i(43593),ki=i(45238);const Ti=(0,ki.I)("collapse",{viewBox:"0 0 16 16",svg:n()("path",{d:"M2.477 7.51h3.787c.396 0 .701-.106.916-.32.214-.22.321-.525.321-.917V2.534a.723.723 0 00-.745-.745.731.731 0 00-.54.212.736.736 0 00-.205.533v.486l.15 2.146-1.6-1.682-1.968-1.982a.695.695 0 00-.52-.219.791.791 0 00-.574.219.736.736 0 00-.219.554.78.78 0 00.055.294.917.917 0 00.17.253L3.482 4.57l1.675 1.593-2.153-.143h-.526a.723.723 0 00-.746.745.723.723 0 00.746.745zm6.74 6.912a.71.71 0 00.526-.212.7.7 0 00.212-.526v-.554l-.143-2.14 1.6 1.682 2.002 2.016a.69.69 0 00.526.22c.224 0 .41-.074.561-.22a.725.725 0 00.226-.553.707.707 0 00-.062-.294.728.728 0 00-.164-.246l-2.01-2.017-1.688-1.586 2.16.144h.588a.736.736 0 00.533-.205.711.711 0 00.219-.534.72.72 0 00-.219-.54.723.723 0 00-.533-.211H9.702c-.392 0-.697.109-.916.328-.214.214-.321.517-.321.909v3.8a.7.7 0 00.212.527.746.746 0 00.54.212z"})});var Ii,Pi=i(64330),xi=i(80342),Zi=i(47453),Fi=i(51454),Ai=i(54604),Ei=i(42858),Bi=i(24677),Ri=i(39500),Di=i(17504),Li=i(58202),Ni=i(38302),Oi=i(23063),Vi=i(68785),Ui=i(4827),Wi=i(89728),zi=i(1445);class Ki extends c.Z{constructor(){var e;super(...arguments),e=this,this.zoomFocusPercentageX=0,this.zoomFocusPercentageY=0,this.isListeningToWheel=!1,this.hideControlsTimeout=void 0,this.isMovingToPrevOrNextTimeout=void 0,this.isEditingZoom=N.default.createValue(!1),this.contentDimensions=N.default.createValue(void 0),this.showControls=N.default.createValue(!1),this.responsiveSettings=this.createComputedStore((()=>{const e=this.environment.WindowSizeStore.state.width;return{edgePadding:Ai.zp(e),backgroundOpacity:.8}})),this.renderOverlay=()=>{const{isOpen:e,renderFullScreenNode:t,fullScreenNodeRect:i,contentAspectRatio:a,zoomScale:s,panOffset:r,skipAnimations:l}=Ni.Z.state;if(!i)return;e&&!this.isListeningToWheel?(window.addEventListener("wheel",this.handleWheel,{passive:!1}),this.isListeningToWheel=!0):!e&&this.isListeningToWheel&&(window.removeEventListener("wheel",this.handleWheel),this.isListeningToWheel=!1);const{edgePadding:c,backgroundOpacity:m}=this.responsiveSettings.state,p=window.innerWidth,g=window.innerHeight-2*c;let h=p-2*c;const f=a||i.height/i.width;let v=h*f;if(v>g){const e=v/g;v/=e,h/=e}const y={opacity:0},S={scale:s,opacity:1,translateX:r.x,translateY:r.y};let b,M;return t&&(b=t()),M=this.showControls.state?s>=1.5?"zoom-out":"zoom-in":"none",(0,Di.Z)((t=>n()(H.Z,{capture:e,onEsc:()=>{this.handleClose(!0)},onEnter:u.yR,onSpace:()=>this.handleClose(!0),onCommandEnter:()=>this.handleClose(!0),onCommandShiftEnter:u.yR,onCommandSlash:u.yR,onUp:u.yR,onDown:u.yR,onDelete:u.yR,onBackspace:u.yR,onLeft:()=>this.handlePrevious(!0),onRight:()=>this.handleNext(!0),onUntab:u.yR,onTab:u.yR,onSelectAll:u.yR,onRedo:u.yR,onUndo:u.yR,onToggleBold:u.yR,onToggleItalics:u.yR,onToggleStrike:u.yR,onToggleCode:u.yR,onCut:u.yR,onCopy:u.yR,onPaste:u.yR,onKeypress:this.handleKeypress},void 0,n()(Ie.Z,{capture:e,preventType:_e.Z.All},void 0,o.createElement("div",d()({style:this.getStyle({isOpen:e})},t,{onClick:this.handleBackgroundClick,onMouseMove:this.resetHideControlsTimeout}),n()(Oi.Z,{isVisible:e,enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},animationStyle:{opacity:m},render:()=>n()("div",{style:this.getBackgroundStyle()}),onAnimationEnd:this.handleBackgroundAnimationEnd}),n()(Oi.Z,{isVisible:e,enterAnimationStyle:y,exitAnimationStyle:y,animationStyle:S,skipAnimation:l,springConfig:{scale:this.getSpringConfig(),translateX:this.getSpringConfig(),translateY:this.getSpringConfig()},render:()=>o.createElement("div",{style:{display:"flex",cursor:M,maxWidth:h,maxHeight:v,justifyContent:"center"},ref:e=>{e&&this.contentDimensions.setState({width:e.clientWidth,height:e.clientHeight})},onClick:this.handleContentClick,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseUp,onMouseMove:this.handleMouseMove},b),onAnimationEnd:this.handleFullscreenNodeAnimationEnd}),this.renderBottomBar())))))},this.clearHideControlsTimeout=()=>{this.hideControlsTimeout&&clearTimeout(this.hideControlsTimeout)},this.resetHideControlsTimeout=()=>{const{isSaving:e}=Ni.Z.state;this.showControls.setState(!0),this.clearHideControlsTimeout(),this.isEditingZoom.state||e||(this.hideControlsTimeout=setTimeout((()=>this.showControls.setState(!1)),2e3))},this.enableZoomEditing=()=>{this.isEditingZoom.setState(!0),this.clearHideControlsTimeout()},this.disableZoomEditing=()=>{this.isEditingZoom.setState(!1),this.resetHideControlsTimeout()},this.handleBackgroundClick=e=>{(0,Ri.uG)(e)||this.handleClose()},this.handleContentClick=e=>{const{zoomScale:t,panOffset:i}=Ni.Z.state;if(e.stopPropagation(),(0,Ri.uG)(e))return;let a,n;a=t<1?1:t<1.5?1.5:1,n=a<=1?{x:0,y:0}:this.clampPanOffset({x:(window.innerWidth/2-e.clientX)/(a/(a-1)),y:(window.innerHeight/2-e.clientY)/(a/(a-1))})??i,Ni.Z.setState({...Ni.Z.state,zoomScale:a,panOffset:n}),this.resetHideControlsTimeout(),this.disableZoomEditing()},this.handleClose=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ai.xv(),e.resetControls(),p.Lfx(e.environment,{type:"close",triggered_by:t?"keypress":"click"}),Bi.ZH(e.environment),e.handleMouseUp()},this.handleResize=()=>{const{isOpen:e}=Ni.Z.state;e&&this.enqueueForceUpdate()},this.handleBackgroundAnimationEnd=()=>{const{isOpen:e}=Ni.Z.state;e||Ni.Z.setState({...Ni.Z.state,backgroundAnimationComplete:!0})},this.handleFullscreenNodeAnimationEnd=()=>{const{isOpen:e}=Ni.Z.state;e||Ni.Z.setState({...Ni.Z.state,fullscreenNodeAnimationComplete:!0})},this.cancelBackgroundClick=e=>{e.stopPropagation()},this.handlePrevious=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.moveToImageOffset(-1,t)},this.handleNext=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.moveToImageOffset(1,t)},this.handleZoomInputSubmit=e=>{const t=e.target,i=parseInt(t.value);if(!isNaN(i)){const e=i/100;p.Lfx(this.environment,{type:"set_zoom",new_zoom:e}),this.setZoomScale(e)}this.disableZoomEditing()},this.handleZoomOut=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{zoomScale:i}=Ni.Z.state;let a=Math.ceil((i-Ki.ZOOM_STEP)*Ki.INVERSE_ZOOM_STEP)/Ki.INVERSE_ZOOM_STEP;i-a<Ki.ZOOM_THRESHOLD&&(a-=Ki.ZOOM_STEP),p.Lfx(e.environment,{type:"zoom_out",new_zoom:a,triggered_by:t?"keypress":"click"}),e.setZoomScale(a)},this.handleZoomIn=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{zoomScale:i}=Ni.Z.state;let a=Math.floor((i+Ki.ZOOM_STEP)*Ki.INVERSE_ZOOM_STEP)/Ki.INVERSE_ZOOM_STEP;a-i<Ki.ZOOM_THRESHOLD&&(a+=Ki.ZOOM_STEP),p.Lfx(e.environment,{type:"zoom_in",new_zoom:a,triggered_by:t?"keypress":"click"}),e.setZoomScale(a)},this.addDeltaToZoomScale=e=>{const{zoomScale:t}=Ni.Z.state;this.setZoomScale(t+e)},this.setZoomScale=e=>{const{panOffset:t}=Ni.Z.state;this.resetHideControlsTimeout();const i=Math.max(Math.min(e,Ki.MAX_ZOOM),Ki.MIN_ZOOM),a=i<=1?{x:0,y:0}:t;Ni.Z.setState({...Ni.Z.state,zoomScale:i,panOffset:a})},this.handleWheel=e=>{const{isOpen:t,panOffset:i}=Ni.Z.state;t&&(e.preventDefault(),e.ctrlKey?e.deltaY?this.addDeltaToZoomScale(e.deltaY*Ki.TRACK_PAD_SCALE):e.deltaX&&this.addDeltaToZoomScale(e.deltaX*Ki.TRACK_PAD_SCALE):e.metaKey?e.deltaY?this.addDeltaToZoomScale(e.deltaY*Ki.MOUSE_WHEEL_SCALE):e.deltaX&&this.addDeltaToZoomScale(e.deltaX*Ki.MOUSE_WHEEL_SCALE):this.canPan()&&this.setPanOffset({x:i.x-e.deltaX,y:i.y-e.deltaY}))},this.handleMouseDown=e=>{const{panOffset:t,zoomScale:i}=Ni.Z.state;Ni.Z.setState({...Ni.Z.state,panStartPosition:{x:e.clientX/i-t.x,y:e.clientY/i-t.y},skipAnimations:!0})},this.handleMouseUp=()=>{Ni.Z.setState({...Ni.Z.state,skipAnimations:!1})},this.handleMouseMove=e=>{const{panStartPosition:t,zoomScale:i}=Ni.Z.state;this.contentDimensions.state&&1===e.buttons&&this.canPan()&&this.setPanOffset({x:e.clientX/i-t.x,y:e.clientY/i-t.y})},this.handleDownload=e=>{const{block:t,imageUrl:i}=Ni.Z.state;if(!t||!this.canDownload())return;Ni.Z.setState({...Ni.Z.state,isSaving:!0}),this.clearHideControlsTimeout();const a=null==t?void 0:t.getProperties();let n;if(n=i||m.QaF(null==a?void 0:a.source),!n)return;const o=m.QaF(null==a?void 0:a.caption);(0,_i.GN)(n,null==t?void 0:t.pointer,fi.default.domainBaseUrl,this.environment.currentUser.id,o).then((()=>{Ni.Z.setState({...Ni.Z.state,isSaving:!1}),p.Lfx(this.environment,{type:"download",triggered_by:"click"}),this.resetHideControlsTimeout()}))},this.handleKeypress=e=>{switch(e.key){case"+":case"=":this.handleZoomIn(!0);break;case"-":case"_":this.handleZoomOut(!0)}}}didMount(){super.didMount(),window.addEventListener("resize",this.handleResize)}willUnmount(){super.willUnmount(),window.removeEventListener("resize",this.handleResize),window.removeEventListener("wheel",this.handleWheel),this.isListeningToWheel=!1}renderComponent(){const{isOpen:e,fullscreenNodeAnimationComplete:t,backgroundAnimationComplete:i}=Ni.Z.state;return n()(Ui.Z,{open:e||!t||!i},void 0,this.renderOverlay())}getAllImageBlocksOnPage(){const e=Bt.default.getCurrentRootStore();return Li.R.getMembersByDOMOrder({filter:t=>t instanceof zi.Z&&Boolean(t.props.store.findRecordStoreUIAncestor((t=>Boolean(e&&t===e))).ancestor)}).map((e=>e.props.store)).filter((e=>Boolean(e.getProperties().source)))}renderBottomBar(){const{isOpen:e}=Ni.Z.state;if(!this.environment.device.isMobile)return n()(Oi.Z,{isVisible:this.showControls.state,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},animationStyle:{opacity:1},render:()=>n()("div",{style:this.getBottomContainerStyle(e),onClick:e=>{this.cancelBackgroundClick(e),this.resetHideControlsTimeout(),this.disableZoomEditing()}},void 0,n()("div",{style:{...Ki.controlBarStyle,marginRight:10}},void 0,this.renderPrevNextButtons()),n()("div",{style:Ki.controlBarStyle},void 0,this.renderZoomControls(),this.renderVerticalLine(),this.canDownload()?o.createElement(o.Fragment,null,this.renderDownloadButton(),this.renderVerticalLine()):void 0,this.renderCloseButton()))})}renderZoomControls(){const{zoomScale:e}=Ni.Z.state,t=(100*e).toFixed(0);return n()("div",{style:{alignItems:"center",display:"flex",height:"100%",justifySelf:"flex-start"}},void 0,n()(G.Z,{renderTooltip:()=>this.renderTooltip({primaryText:n()(P.FormattedMessage,{id:"fullScreenRenderer.zoomOut",defaultMessage:"Zoom out"}),secondaryText:"-"}),disableTooltip:e<=Ki.MIN_ZOOM,render:t=>o.createElement(Wi.Z,d()({},t,{disabled:e<=Ki.MIN_ZOOM,style:{...this.getButtonStyle(e<=Ki.MIN_ZOOM),...Ki.firstButtonPadding},onClick:()=>this.handleZoomOut(),icon:e=>(0,xi.$)({...e,fill:this.getBottomBarPrimaryColor(),height:16,margin:0,width:16})}))}),this.isEditingZoom.state?n()(Hi,{initialValue:t,onSubmit:this.handleZoomInputSubmit,onCancel:this.disableZoomEditing,primaryColor:this.getBottomBarPrimaryColor(),secondaryColor:this.getBottomBarSecondaryColor()}):n()(Wi.Z,{onClick:e=>{e.stopPropagation(),this.enableZoomEditing()},style:{color:this.getBottomBarSecondaryColor(),margin:0,width:46,padding:0,justifyContent:"center"}},void 0,`${t}%`),n()(G.Z,{renderTooltip:()=>this.renderTooltip({primaryText:n()(P.FormattedMessage,{id:"fullScreenRenderer.zoomIn",defaultMessage:"Zoom in"}),secondaryText:"+"}),disableTooltip:e>=Ki.MAX_ZOOM,render:t=>o.createElement(Wi.Z,d()({},t,{disabled:e>=Ki.MAX_ZOOM,style:this.getButtonStyle(e>=Ki.MAX_ZOOM),onClick:()=>this.handleZoomIn(),icon:e=>(0,Zi.R)({...e,fill:this.getBottomBarPrimaryColor(),height:16,margin:0,width:16})}))}))}renderPrevNextButtons(){const{block:e}=Ni.Z.state,t=this.getAllImageBlocksOnPage(),i=(null==t?void 0:t.length)??0,a=(null==t?void 0:t.findIndex((t=>t===e)))??-1;return i<=1||a<0?n()("div",{}):o.createElement(o.Fragment,null,n()(G.Z,{renderTooltip:()=>this.renderTooltip({primaryText:n()(P.FormattedMessage,{id:"fullScreenRenderer.previous",defaultMessage:"Back"}),secondaryText:this.renderPrevNextSecondaryText(a-1,i)}),disableTooltip:0===a,render:e=>o.createElement(Wi.Z,d()({},e,{disabled:a<=0,style:{...this.getButtonStyle(a<=0),...Ki.firstButtonPadding},hoveredStyle:Ki.hoveredButtonStyle,onClick:()=>this.handlePrevious(),icon:e=>(0,Ye.V)({...e,fill:this.getBottomBarPrimaryColor(),height:16,margin:0,width:16})}))}),n()(G.Z,{renderTooltip:()=>this.renderTooltip({primaryText:n()(P.FormattedMessage,{id:"fullScreenRenderer.next",defaultMessage:"Next"}),secondaryText:this.renderPrevNextSecondaryText(a+1,i)}),disableTooltip:a+1===i,render:e=>o.createElement(Wi.Z,d()({},e,{disabled:a>=i-1,style:{...this.getButtonStyle(a>=i-1),...Ki.lastButtonPadding},hoveredStyle:Ki.hoveredButtonStyle,onClick:()=>this.handleNext(),icon:e=>(0,$e.n)({...e,fill:this.getBottomBarPrimaryColor(),height:16,margin:0,width:16})}))}))}renderDownloadButton(){const{isSaving:e}=Ni.Z.state;return n()(G.Z,{renderTooltip:()=>this.renderTooltip({primaryText:n()(P.FormattedMessage,{id:"fullScreenRenderer.download",defaultMessage:"Download"})}),render:t=>o.createElement(Wi.Z,d()({},t,{disabled:e,onClick:this.handleDownload,style:this.getButtonStyle(!1),hoveredStyle:Ki.hoveredButtonStyle}),e?n()(Vi.Z,{style:{width:16}}):(0,Pi.a)({fill:this.getBottomBarPrimaryColor(),width:16}))})}renderCloseButton(){return n()(G.Z,{renderTooltip:()=>this.renderTooltip({primaryText:n()(P.FormattedMessage,{defaultMessage:"Close",id:"fullscreenRenderer.closeButton.label"}),secondaryText:"esc"}),render:e=>o.createElement(Wi.Z,d()({},e,{onClick:()=>this.handleClose(),style:{...this.getButtonStyle(!1),...Ki.lastButtonPadding},hoveredStyle:Ki.hoveredButtonStyle,icon:e=>Ti({...e,fill:this.getBottomBarPrimaryColor(),height:16,margin:0,width:16})}))})}renderPrevNextSecondaryText(e,t){return n()(P.FormattedMessage,{values:{currentIndex:e+1,totalCount:t},defaultMessage:"{currentIndex} of {totalCount}",id:"fullscreenRenderer.imageCount.label"})}renderTooltip(e){const{primaryText:t,secondaryText:i}=e;return o.createElement(o.Fragment,null,n()("span",{style:{marginRight:i?4:void 0}},void 0,t),i?n()("span",{style:{color:this.getBottomBarSecondaryColor()}},void 0,i):void 0)}renderVerticalLine(){return n()("span",{style:{borderLeft:`1px solid ${_.ZP.whiteWithAlpha(.25)}`,height:"100%"}})}scrollToZoomFocus(e){const t=window.innerWidth/2,i=window.innerHeight/2,a=e.scrollWidth*this.zoomFocusPercentageX,n=e.scrollHeight*this.zoomFocusPercentageY;e.scrollLeft=a-t,e.scrollTop=n-i}resetControls(){this.isEditingZoom.setState(!1),Ni.Z.setState({...Ni.Z.state,zoomScale:1,panStartPosition:{x:0,y:0},panOffset:{x:0,y:0}})}canPan(){const{zoomScale:e}=Ni.Z.state;return e>1}clampPanOffset(e){const t=this.contentDimensions.state;if(!t)return;let i,a;i=t.width*Ki.MAX_ZOOM>window.innerWidth?(t.width*Ki.MAX_ZOOM-window.innerWidth)/(2*Ki.MAX_ZOOM):(window.innerWidth-t.width*Ki.MAX_ZOOM)/(2*Ki.MAX_ZOOM),a=t.height*Ki.MAX_ZOOM>window.innerHeight?(t.height*Ki.MAX_ZOOM-window.innerHeight)/(2*Ki.MAX_ZOOM):(window.innerHeight-t.height*Ki.MAX_ZOOM)/(2*Ki.MAX_ZOOM);return{x:Math.min(Math.max(e.x,-1*i),i),y:Math.min(Math.max(e.y,-1*a),a)}}setPanOffset(e){const{panStartPosition:t}=Ni.Z.state,i=this.clampPanOffset(e);i&&(e.x!==i.x&&(t.x=t.x+(e.x-i.x)),e.y!==i.y&&(t.y=t.y+(e.y-i.y)),Ni.Z.setState({...Ni.Z.state,panOffset:i,panStartPosition:t}))}canDownload(){var e;const{block:t,imageUrl:i}=Ni.Z.state;return t&&(i||(null===(e=t.getProperties())||void 0===e?void 0:e.source)&&m.QaF(t.getProperties().source))}moveToImageOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{block:i}=Ni.Z.state,a=this.getAllImageBlocksOnPage();if(!a)return;const n=a.findIndex((e=>e===i));if(n+e<0||n+e>=a.length)return;p.Lfx(this.environment,{type:e>0?"next":"previous",image_count:a.length,image_index:n+e,triggered_by:t?"keypress":"click"}),Ni.Z.setState({...Ni.Z.state,skipAnimations:!0}),this.isMovingToPrevOrNextTimeout&&clearTimeout(this.isMovingToPrevOrNextTimeout),this.isMovingToPrevOrNextTimeout=setTimeout((()=>{Ni.Z.setState({...Ni.Z.state,skipAnimations:!1})}),250);const o=a[n+e];Ei.dK({blocks:[o]}),this.resetControls()}getSpringConfig(){return{stiffness:100,damping:10,precision:.001}}getStyle(e){const{isOpen:t}=e;return{zIndex:Fi.mJ,position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:t?"auto":"none",cursor:this.showControls.state?void 0:"none"}}getBackgroundStyle(){return{position:"absolute",top:0,left:0,right:0,bottom:0,background:_.ZP.black}}getBottomContainerStyle(e){return{bottom:30,display:e?"flex":"none",fontSize:14,left:"50%",lineHeight:1.2,position:"absolute",transform:"translate(-50%, 0)"}}getBottomBarPrimaryColor(){return _.ZP.white}getBottomBarSecondaryColor(){return _.ZP.whiteWithAlpha(.5)}getButtonStyle(e){return{borderRadius:4,opacity:e?.4:1,padding:6}}}function Hi(e){window.__c={n:"ZoomInput"};const[t,i]=(0,o.useState)(e.initialValue);return n()(Qt.Z,{style:{width:46,color:e.primaryColor},inputStyle:{textAlign:"center",border:"solid 1px rgba(45, 156, 219, 0.72)",borderRadius:3,boxShadow:"0px 0px 0px 3px rgba(45, 156, 219, 0.2)"},onClick:e=>e.stopPropagation(),onChange:e=>{const t=e.target;i(t.value)},value:t,onSubmit:e.onSubmit,focusInitial:!0,selectAll:!0,format:Qt.B.Transparent,right:n()("span",{style:{color:e.secondaryColor}},void 0,"%"),onKeyDown:t=>{t.stopPropagation(),"Escape"===t.key?e.onCancel():"Tab"===t.key&&e.onSubmit(t)}})}Ii=Ki,Ki.displayName="FullScreenRenderer",Ki.MAX_ZOOM=2,Ki.MIN_ZOOM=.5,Ki.ZOOM_STEP=.5,Ki.INVERSE_ZOOM_STEP=1/Ii.ZOOM_STEP,Ki.ZOOM_THRESHOLD=.25,Ki.MOUSE_WHEEL_SCALE=-.002,Ki.TRACK_PAD_SCALE=-.004,Ki.controlBarStyle={display:"flex",borderRadius:4,background:_.ZP.blackWithAlpha(.65)},Ki.firstButtonPadding={padding:"6px 6px 6px 10px"},Ki.lastButtonPadding={padding:"6px 10px 6px 6px"},Ki.hoveredButtonStyle={background:"rgba(255, 255, 255, 0.055)"};const Gi=Ki;var qi=i(98567),ji=i(70279),Yi=i(23867),$i=i(19889),Qi=i(36280),Ji=i(73959),Xi=i(89086),ea=i(66949),ta=i(3702);class ia extends c.Z{constructor(){super(...arguments),this.input=o.createRef(),this.handleInputChange=(e,t)=>{ea.Z.isOpen()&&ea.Z.setState({...ea.Z.state,value:e,error:t})},this.handleSubmit=()=>{h.createAndCommit({userAction:"InlineEquationOverlay.handleSubmit",environment:this.environment,perform:e=>{Qi.gt({environment:this.environment,equationStore:ea.Z,transaction:e})}})},this.handleClose=()=>{Qi.Wj()},this.handleLeft=e=>{if(!this.input.current)return;const t=this.input.current.getSelection();t&&"altKey"in e&&!e.altKey&&"shiftKey"in e&&!e.shiftKey&&0===t.startIndex&&0===t.endIndex&&(this.handleSubmit(),Qi.Wj(ea.P.Backward))},this.handleRight=e=>{if(!ea.Z.isOpen())return;if(!this.input.current)return;const t=this.input.current.getSelection();if(!t)return;const i=ea.Z.state.value.length;"altKey"in e&&!e.altKey&&"shiftKey"in e&&!e.shiftKey&&t.startIndex===i&&t.endIndex===i&&(this.handleSubmit(),Qi.Wj())},this.isDisabled=()=>{var e;if("editing"!==M.default.state.mode&&!ea.Z.isOpen())return!0;const t=ea.Z.isOpen()?null===(e=(0,S.QY)(ea.Z.state.savedTextSelectionState.multiSelection))||void 0===e?void 0:e.store:void 0;if(t&&!t.canEdit())return!0;if(t){const e=(0,Ji.J2)(t);if(e&&e.isLocked())return!0}if(t&&t.table===ji.x_){const e=Et.T5.createChildStore(t,{table:ji.x_,id:t.id,spaceId:(0,Yi.C)(t.pointer.spaceId)}),i=e.isDefined(),{currentUserStore:a}=J.default.state;if(!i||!a)return!0;const n=e.getCreatedByTable(),o=e.getCreatedById();if(n!==$i.KJ||a.id!==o)return!0}const i={[m.GKr.User]:m.GKr.User,[m.GKr.Page]:m.GKr.Page,[m.GKr.Comment]:m.GKr.Comment,[m.GKr.Bot]:m.GKr.Bot,[m.GKr.Date]:m.GKr.Date,[m.GKr.ExternalObjectInstance]:m.GKr.ExternalObjectInstance,[m.GKr.TemporaryPage]:m.GKr.TemporaryPage,[m.GKr.TemplateVariable]:m.GKr.TemplateVariable,[m.GKr.FormulaPageProperty]:m.GKr.FormulaPageProperty,[m.GKr.FormulaContextValue]:m.GKr.FormulaContextValue,[m.GKr.Group]:m.GKr.Group};for(const a of Object.values(i))if((0,Xi.J6)(a))return!0;return!1},this.INPUT_ORIGIN_GAP_PX=8}renderComponent(){if(!ea.Z.isOpen())return;const e=!ea.Z.isOpen(),t=this.isDisabled(),i=this.getInputOriginRect(),a=ea.Z.state.value,s=ea.Z.state.error;return n()(ue.DependencyConsumer,{dependency:ue.deps.prismjs},void 0,(n=>{if(!e)return o.createElement(ta.Z,{Prism:n,ref:this.input,isOpen:!0,equationValue:a,error:s,displayMode:"inline",disabled:t,originRect:i,originGap:this.INPUT_ORIGIN_GAP_PX,onDismiss:this.handleClose,onChange:this.handleInputChange,onSubmit:this.handleSubmit,onLeft:this.handleLeft,onRight:this.handleRight})}))}getInputOriginRect(){if(ea.Z.isOpen())return ea.Z.state.savedTextSelectionRect}}ia.displayName="InlineEquationOverlay";const aa=ia;var na=i(84908),oa=i(94416);class sa extends c.Z{constructor(){super(...arguments),this.handleOpen=()=>{oa.Z.setState({open:!0})},this.handleClose=()=>{oa.Z.setState({open:!1})}}willMount(){na.inPageSearch.started.addListener(this.handleOpen),na.inPageSearch.stopped.addListener(this.handleClose)}willUnmount(){na.inPageSearch.started.removeListener(this.handleOpen),na.inPageSearch.stopped.removeListener(this.handleClose)}}sa.displayName="InPageSearchListener";const ra=sa;var la=i(73935),da=i(96313),ca=i(73744),ua=i(70726),ma=i(48863),pa=i(33411);function ga(e){switch(e){case ua.Z.Preview:return n()(P.FormattedMessage,{id:"internalUnfurlingMenu.actions.pasteAsPreview.title",defaultMessage:"Paste as preview"});case ua.Z.Mention:return n()(P.FormattedMessage,{id:"internalUnfurlingMenu.actions.pasteAsMention.title",defaultMessage:"Paste as mention"});case ua.Z.Link:return n()(P.FormattedMessage,{id:"internalUnfurlingMenu.actions.pasteAsLink.title",defaultMessage:"Paste as link"});default:(0,De.t1)(e)}}const ha=function(){window.__c={n:"InternalUnfurlingMenu"};const e=(0,s.O7)(),t=(0,o.useRef)(null),[i]=(0,r.AF)(ma.Z),a=(0,o.useCallback)((t=>{if(i.open){var a;if(!t)da.pg({actionType:i.focusedIndex,environment:e,commentStore:null===(a=i.args.commentStore)||void 0===a?void 0:a.state,useTempStores:!1});ma.Z.setState({open:!1})}}),[e,i]),l=(0,o.useCallback)((e=>{i.open&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Enter"!==e.key&&a(void 0)}),[a,i.open]),c=(0,o.useCallback)((e=>{const n=t.current;if(!i.open||!e.target||!n)return;const o=la.findDOMNode(n);o&&(o.contains(e.target)||a(void 0))}),[a,i.open]);(0,o.useEffect)((()=>((0,ca.lj)(window,"keydown",l),(0,ca.lj)(window,"mousedown",c),()=>{(0,ca.ZV)(window,"keydown",l),(0,ca.ZV)(window,"mousedown",c)})),[l,c]);const m=(0,o.useRef)(!1);function p(t){var a;i.open&&void 0!==t.indexGlobal&&(ma.Z.setState({...i,focusedIndex:t.indexGlobal}),da.pg({actionType:t.indexGlobal,environment:e,commentStore:null===(a=i.args.commentStore)||void 0===a?void 0:a.state,useTempStores:!0}))}(0,r.VK)((()=>{var t,a;const n=(i.open&&(null===(t=i.args.commentStore)||void 0===t?void 0:t.state)&&(null===(a=i.args.commentStore.state)||void 0===a?void 0:a.isReady()))??!1;var o;n&&!m.current&&i.open&&da.pg({actionType:i.focusedIndex,environment:e,commentStore:null===(o=i.args.commentStore)||void 0===o?void 0:o.state,useTempStores:!0});m.current=n}),[e,i]);const g=(0,r.VK)((()=>e.device.isMobileNative&&!e.device.isTablet),[e]),h=e.device.isMobile;return n()(v.ZP,{popupType:g?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:i.open,originRect:i.open?i.selectionRect:void 0,placementToOrigin:v.ZP.Placement.Top,alignmentToOrigin:v.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:h,keepFocus:h,render:function(){var a;const{device:s}=e;if(!i.open)return;const r=function(t){const{url:i,args:a}=t,n=[];n.push({title:ga(ua.Z.Preview),validator:()=>!0,type:ua.Z.Preview}),n.push({title:ga(ua.Z.Mention),validator:()=>!0,type:ua.Z.Mention}),n.push({title:ga(ua.Z.Link),validator:()=>!0,type:ua.Z.Link});return[{key:"menu section",render:e=>o.createElement(A.Z,e),items:u.oA(n.map((t=>{let{title:n,validator:s,type:r}=t;if(s({url:i,baseUrl:fi.default.domainBaseUrl,publicDomainName:fi.default.publicDomainName})){return{key:`item ${r}`,render:t=>o.createElement(Gt.Z,d()({},t,{title:n,onMouseEnter:i=>{var n;t.onMouseEnter(i),da.pg({actionType:r,environment:e,commentStore:null===(n=a.commentStore)||void 0===n?void 0:n.state,useTempStores:!0})}})),action:()=>{var t;return da.pg({actionType:r,environment:e,commentStore:null===(t=a.commentStore)||void 0===t?void 0:t.state,useTempStores:!1})}}}})))}]}(i);let l;return l=s.isMobile?{menuType:y.og.ActionSheet}:{menuType:y.og.Popup,width:320,maxHeight:"40vh"},null!==(a=i.args.commentStore)&&void 0!==a&&a.state&&i.args.commentStore.state.isReady()?o.createElement(f.Z,d()({},l,{className:Kt.srZ,ref:t}),n()(Z.Z,{type:Z.i.Vertical,sections:r,onKeyboardArrow:p,initialFocus:0,priority:1,disallowBackspace:!0})):n()(pa.Z,{show:!0,showDelay:500,showHold:0,render:()=>o.createElement(f.Z,d()({},l,{className:Kt.srZ,ref:t}),n()(A.Z,{style:{display:"flex",justifyContent:"center"}},void 0,n()(Vi.Z,{})))})},onDismiss:()=>a(void 0)})};var fa=i(64572),va=i(88295),ya=i(45990),Sa=i(21325),ba=i(48709),Ma=i(40462),wa=i(23210),Ca=i(54882),_a=i(23178);function ka(e){window.__c={n:"LinkMenuInput"};const{state:t,focusInitial:i,defaultValue:a,onBlur:o,onKeyDown:r,style:l}=e,d=(0,s.MO)(),c=(0,P.useIntl)(),u=c.formatMessage({defaultMessage:"Paste link or search pages",id:"selectionLinkButton.search.createNewLinkPlaceholder"}),m=c.formatMessage({defaultMessage:"Edit link or search pages",id:"selectionLinkButton.search.editLinkPlaceholder"}),p=!d||!t.showCreateIn,g=d?void 0:!t.showCreateIn&&t.focusLinkInput,h=t.editingToken?m:u;return p?n()(Q.ZP,{onFocus:ba.FV,placeholder:h,value:a||t.url,onChange:Ta,onBlur:o,onKeyDown:r,focus:g,focusInitial:i,focusAfterAnimation:!0,preventCaptureArrowShortcuts:!0,style:l}):null}const Ta=e=>{const t=_a.Z.state;t.open&&_a.Z.setState({...t,url:e.target.value,focusLinkInput:!0})};function Ia(e){window.__c={n:"LinkMenuInputWithPreview"};const{state:t,showPreview:i,store:a}=e,o=(0,s.MO)(),r=(0,ba.Fs)(t),{editingToken:l,focusTitleInput:d}=t;return i&&a?n()(Ca.B,{store:a,onClick:ba.FV}):n()(ka,{state:t,onBlur:ba.cX,onKeyDown:Pa,defaultValue:i?r:void 0,style:l?void 0:{marginTop:6},focusInitial:!Boolean(l)||o&&!d})}const Pa=e=>{"Escape"===e.key&&(e.stopPropagation(),(0,ba.hy)())};function xa(e){window.__c={n:"LinkMenuTitleInput"};const{title:t,focus:i,defaultTitle:a}=e,r=(0,s.O7)(),l=(0,s.MO)(),[d,c]=(0,o.useState)(),u=(0,o.useRef)(!1),m=(0,o.useMemo)((()=>({environment:r,defaultTitle:a,setPlaceholder:c,hasTitleChanged:u})),[a,r]);return(0,o.useEffect)((()=>{const e=u.current;return()=>{e&&p.pZG(r)}}),[u,r]),n()(Q.ZP,{focus:i,focusInitial:l,onFocus:Aa,onBlur:()=>Ea(m),onChange:e=>Za(e,m),onKeyDown:e=>Ba(e,m),value:d?"":t,placeholder:d,preventCaptureArrowShortcuts:!0,style:{paddingBottom:8}})}const Za=(e,t)=>{Fa(e.target.value,t)},Fa=(e,t)=>{const i=_a.Z.state;if(!i.open)return;const{editingToken:a,savedTextSelectionState:n}=i;if(!a)return;if(!e)return void _a.Z.setState({...i,title:""});const{environment:o,setPlaceholder:s,hasTitleChanged:r}=t;h.createAndCommit({userAction:"LinkMenu.updateTitle",environment:o,perform:t=>{const l=ya.iX({environment:o,title:e,transaction:t,editingToken:a,savedTextSelectionState:n});l&&_a.Z.setState({...i,...l,title:e}),s(void 0),r.current=!0}})},Aa=()=>{(0,ba.ZG)(!0)},Ea=e=>{Ra(e),(0,ba.ZG)(!1)},Ba=(e,t)=>{"Enter"!==e.key&&"Escape"!==e.key||(e.stopPropagation(),Ea(t))},Ra=e=>{const t=_a.Z.state;if(!t.open)return;const{defaultTitle:i,setPlaceholder:a}=e;t.title||(Fa(i,e),a(i))};var Da=i(88632),La=i(18466),Na=i(59054),Oa=i(31299),Va=i(11470),Ua=i(15447);function Wa(e){const{state:t}=e,i=(0,o.useMemo)((()=>(0,ba.uP)(t)),[t]),a=(0,o.useMemo)((()=>(0,ba.dY)(i)),[i]),l=function(e){const{state:t,inputUrl:i,query:a,handleLinkSelection:l}=e,{url:c}=t,u=(0,s.O7)(),m=(0,s.MO)(),p=(0,r.VK)((()=>Da.Z.state.online),[]),g=!!c;return(0,o.useMemo)((()=>{let e,s=!1;if(!i&&g)e=n()(P.FormattedMessage,{defaultMessage:"Type a complete URL to link",id:"selectionLinkButton.invalidUrl"}),s=!0;else{if(!i)return;if("notion"===i.type&&p)return;"web"===i.type?e=n()(P.FormattedMessage,{id:"selectionLinkButton.linkToWebPage",defaultMessage:"Link to web page"}):"notion"===i.type?e=n()(P.FormattedMessage,{id:"selectionLinkButton.linkToPage",defaultMessage:"Link to page"}):"other"===i.type?e=n()(P.FormattedMessage,{id:"selectionLinkButton.linkToURL",defaultMessage:"Link to URL"}):(0,De.t1)(i.type)}return{key:"link to url",action:()=>l(u,t,a,m),render:t=>o.createElement(Gt.Z,d()({},t,{title:c,caption:e,icon:(0,Ma.o)({width:16,paddingTop:4}),disabled:s}))}}),[t,a,u,m,p,i,l,g,c])}({state:t,inputUrl:a,query:i,handleLinkSelection:za}),c=function(e){const{state:t,inputUrl:i,query:a,additionalItem:l}=e,{editingToken:c}=t,m=function(e){const{state:t,inputUrl:i,query:a,handleLinkSelection:l,disableEmptyQueryResults:c}=e,{savedTextSelectionState:m}=t,p=(0,s.O7)(),g=(0,s.MO)(),[{online:h}]=(0,r.AF)(Da.Z),f=(0,o.useMemo)((()=>{var e;const t=null===(e=(0,S.QY)(m.multiSelection))||void 0===e?void 0:e.store;if(t&&(0,Ce.NZ)(t))return t}),[m]),[{value:v,status:y}]=(0,Na.r5)((async()=>h?a?(await Oa.WL({nearBlock:f,environment:p,query:a,source:"mention_menu",limit:10})).map((e=>e.id)):c?[]:Ua.X4.state.map((e=>e.pageId)):[]),[a,f,p,h,c]),b=(0,o.useMemo)((()=>{if(i&&"notion"===i.type){const e=v?u.zu(v,i.notionPage.blockId):[];return[i,...e]}return v}),[v,i]);return(0,o.useMemo)((()=>{if(!b||0===b.length)return;if(i&&"web"===i.type&&i.url===a)return;const e=La.Z.withListenerIgnored(Ke.RM);if(!e)return;const s=t.url?5:3,r=n()(P.FormattedMessage,{id:"selectionLinkButton.linkToPage.linkToBlock",defaultMessage:"Link to block"}),c=n()(P.FormattedMessage,{defaultMessage:"Link to page",id:"selectionLinkButton.linkToPageSection.title"});return{items:b.map(((i,a)=>{const s="object"==typeof i?i.notionPage.peekViewBlockId||i.notionPage.blockId:i,c=Et.G.createChildStore(e,{table:pi.iU,id:s});return{key:a,action:()=>{if("object"==typeof i){const e=(0,fa.nR)({pageId:i.notionPage.blockId,peekViewBlockId:i.notionPage.peekViewBlockId,peekMode:i.notionPage.peekMode,discussionId:i.notionPage.discussionId,collectionViewId:i.notionPage.collectionViewId,scrollToBlockId:i.notionPage.scrollToBlockId});l(p,t,e,g)}else l(p,t,(0,fa.nR)({pageId:s}),g)},render:e=>{const t="object"==typeof i&&i.notionPage.scrollToBlockId;return o.createElement(Va.Z,d()({},e,{store:c,caption:t?r:void 0,placeholder:n()(pa.Z,{showHold:300,showDelay:300,show:"resolved"===y,render:e=>n()(P.FormattedMessage,e?{id:"selectionLinkButton.linkToPage.unknownBlock",defaultMessage:"Unknown block"}:{id:"selectionLinkButton.linkToPage.loading",defaultMessage:"Loading..."})})}))}}})).slice(0,s),title:b.some((e=>Boolean("object"==typeof e&&e.notionPage.scrollToBlockId)))?r:c}}),[b,t,p,g,a,i,y,l])}({state:t,inputUrl:i,query:a,handleLinkSelection:za,disableEmptyQueryResults:!!c});return(0,o.useMemo)((()=>{if(m||l){return{key:"results",items:u.oA([...(null==m?void 0:m.items)||[],l]),render:e=>o.createElement(A.Z,d()({},e,{title:c||a?void 0:n()(P.FormattedMessage,{id:"selectionLinkButton.recents.title",defaultMessage:"Recents"})}))}}}),[m,l,c,a])}({state:t,inputUrl:a,query:i,additionalItem:l}),g=(0,ba.Fs)(t),h=g&&(0,fa.A5)({url:g,baseUrl:fi.default.domainBaseUrl,publicDomainName:fi.default.publicDomainName}),f=(0,r.VK)((()=>{if(!h)return;const e=(0,Ke.RM)();return e?Et.G.createChildStore(e,{table:pi.iU,id:h}):void 0}),[h]),v=function(e){const{state:t,url:i,isEmptyResults:a,pageStore:s}=e;return(0,o.useMemo)((()=>{let e=n()(P.FormattedMessage,{defaultMessage:"Page or URL",id:"selectionLinkButton.currentInfo.pageOrUrl"});const r=!t.focusLinkInput&&a;let l;return s?l={key:"link to page",action:()=>{},render:()=>n()(Ia,{state:t,showPreview:r,store:s})}:i?l={key:"link to web",action:()=>{},render:()=>n()(Ia,{state:t,showPreview:!0})}:(e=void 0,l={key:"create link",action:()=>{},render:()=>n()(Ia,{state:t,showPreview:r})}),{key:"page or url",render:t=>o.createElement(A.Z,d()({title:e},t)),items:[l]}}),[t,i,a,s])}({state:t,url:g,isEmptyResults:!Boolean(c),pageStore:f}),y=function(e){const{state:t,url:i,pageStore:a}=e,{editingToken:s,title:l,focusTitleInput:c}=t,u=(0,r.VK)((()=>a?m.QaF(a.getTitleValue()):void 0),[a]);return(0,o.useMemo)((()=>{if(s)return{key:"link title",render:e=>o.createElement(A.Z,d()({title:n()(P.FormattedMessage,{defaultMessage:"Link title",id:"selectionLinkButton.currentInfo.linkTitle"})},e)),items:[{key:"update title",action:()=>{},render:()=>n()(xa,{title:l,defaultTitle:u??i,focus:c})}]}}),[s,l,c,i,u])}({state:t,url:g,pageStore:f}),b=function(e){const{state:t}=e,i=function(e){const{state:t}=e,i=(0,s.O7)();return(0,o.useMemo)((()=>{if(t.editingToken)return{key:"unlink",action:()=>{ya.PP(i);const e=(0,ba.Fs)(t);p.oSR(i,{type:"remove_link",url:e})},render:e=>o.createElement(Gt.Z,d()({},e,{title:n()(P.FormattedMessage,{id:"selectionLinkButton.removeLink",defaultMessage:"Remove link"}),icon:(0,at.y)({width:16})}))}}),[t,i])}({state:t});return(0,o.useMemo)((()=>{const e=u.oA([i]);if(0!==e.length)return{key:"link actions",render:e=>o.createElement(A.Z,d()({topBorder:!0},e)),items:e}}),[i])}({state:t});let M,w;return c?(w=1,M=u.oA([v,c])):(w=void 0,M=u.oA([v,y,b])),{initialFocus:w,sections:M}}function za(e,t,i,a){const n=(0,wa.D)(i);if(!n)return;const{editingToken:o,savedTextSelectionState:s,title:r}=t;h.createAndCommit({userAction:"LinkMenu.handleLinkSelection",environment:e,perform:i=>{const l=ya.gp({environment:e,transaction:i,url:n,title:r,editingToken:o,savedTextSelectionState:s});l?(p.oSR(e,{type:"edit_link",url:n}),_a.Z.setState({...t,...l,url:"",focusLinkInput:!1,focusTitleInput:Boolean(a)})):(p.oSR(e,{type:"create_link",url:n}),_a.Z.reset())}})}var Ka=i(9325),Ha=i(56940);function Ga(){window.__c={n:"LinkMenu"};const e=(0,r.VK)((()=>_a.Z.state),[]),t=(0,s.Fy)(),i=(0,r.VK)(ce.bq,[]),a=(0,r.VK)((()=>{if(!e.open)return!1;if(e.focusLinkInput||e.focusTitleInput)return!1;const t=M.default.state;if("editing"!==t.mode)return!0;const i=(0,S.QY)(t.multiSelection);if(!i)return!0;const{store:a,selection:n}=i;return(0,Xi.wd)(n)?!m.oP(a.getValue(),n.startIndex,n.endIndex,m.GKr.Link):!(0,S._v)(t.multiSelection,e.savedTextSelectionState.multiSelection)}),[e]);return(0,o.useEffect)((()=>{a&&ya.F5()}),[a]),n()(v.ZP,{popupType:t.isMobile?t.isTablet?v.ZP.PopupType.Popup:v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,style:{width:Ja(i)},keepFocus:t.isPhone,open:e.open,originRect:e.open?e.selectionRect:void 0,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Center,originGap:8,disableContentScroll:!0,onDismiss:ya.F5,render:()=>e.open?n()(qa,{state:e}):void 0,preventBlockRenderQueueOnEnter:!t.isMobile})}function qa(e){window.__c={n:"LinkMenuContent"};const{state:t}=e,i=(0,s.MO)(),[a,r]=(0,o.useState)(!0);if((0,o.useEffect)((()=>r(!1)),[]),t.showCreateIn&&!i)return n()(Ya,{state:t});let l;return l=i?{menuType:y.og.Modal,title:n()(P.FormattedMessage,{defaultMessage:"Link",id:"selectionLinkButton.mobile.title"}),right:n()(Pe.CancelMenuText,{}),onClickRight:ya.F5,footer:n()(v.ZP,{popupType:v.ZP.PopupType.SlideUp,open:t.showCreateIn||!1,render:()=>n()(Ya,{state:t})})}:{menuType:y.og.Popup},n()(K.Z,{capture:t.open&&(a||t.focusLinkInput||t.focusTitleInput),allowEsc:!0},void 0,o.createElement(f.Z,l,n()(Ha.Z,{capture:i&&!t.focusLinkInput&&!t.focusTitleInput,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!0,render:()=>n()(ja,{state:t,useMenuList:Wa})})),n()(H.Z,{capture:!0,onCommandSlash:ba.FV}))}function ja(e){window.__c={n:"LinkMenuList"};const{state:t,useMenuList:i}=e,{initialFocus:a,sections:o}=i({state:t});return n()(Z.Z,{type:Z.i.Vertical,initialFocus:a,sections:o})}function Ya(e){var t;window.__c={n:"LinkCreateInMenu"};const{state:i}=e,a=(0,s.O7)(),l=(0,o.useCallback)((async e=>{var t;if(!Sa.M_(a))return;const n=null===(t=(0,S.QY)(i.savedTextSelectionState.multiSelection))||void 0===t?void 0:t.store;if(!n)return;const{performResult:{createInState:o}}=await h.createAndCommitAsync({environment:a,userAction:"LinkMenu.LinkCreateInMenu",waitForServerCommit:!0,perform:async t=>{const o=va.f8({environment:a,transaction:t,titleText:i.url||"",createInValue:e,recordStoreParent:n}),[s]=o.createdPages;return s&&(ya.gp({environment:a,url:(0,fa.nR)({pageId:s.id}),transaction:t,editingToken:i.editingToken,savedTextSelectionState:i.savedTextSelectionState}),_a.Z.reset()),await o.moveToStorePromise,{createInState:o}}});await va.c_({analyticsFrom:"link_menu",createInState:o})}),[i,a]),d=null===(t=(0,S.QY)(i.savedTextSelectionState.multiSelection))||void 0===t?void 0:t.store,c=d&&"block"===d.table?d.id:void 0,u=(0,r.VK)(ce.bq,[]);return n()(Ka.Z,{targets:[],isAddTo:!0,isCreateIn:!0,onAccept:l,captureSelection:!1,restoreSelection:!1,parentBlockId:c,onAutocompleteQueryChange:$a,autocompleteQuery:i.createInQuery||"",desktopWidth:Ja(u),onCancel:Qa})}function $a(e){const t=_a.Z.state;t.open&&_a.Z.setState({...t,createInQuery:e})}function Qa(){const e=_a.Z.state;e.open&&_a.Z.setState({...e,showCreateIn:!1,createInQuery:""})}function Ja(e){return e?400:330}var Xa=i(27153),en=i(84939),tn=i(79362);const an=(0,ki.I)("giphyLogo",{viewBox:"0 0 12 12",svg:n()("path",{d:"M 1.332031 0 L 1.332031 12 L 10.667969 12 L 10.667969 4.332031 L 9.332031 5.667969 L 9.332031 10.667969 L 2.667969 10.667969 L 2.667969 1.335938 L 5 1.335938 L 6.332031 0 Z M 6.667969 0 L 6.667969 4 L 10.667969 4 L 10.667969 2.667969 L 9.332031 2.667969 L 9.332031 1.335938 L 8 1.335938 L 8 0 "})});var nn=i(35840);const on=(0,ki.I)("shuffle",{viewBox:"0 0 16 16",svg:n()("path",{d:"M0.162354 11.7542C0.162354 12.1365 0.458984 12.4067 0.867676 12.4067H2.41675C3.55054 12.4067 4.21631 12.0771 4.99414 11.1609L6.58936 9.26245L8.16479 11.1279C8.9624 12.0771 9.71387 12.4067 10.8477 12.4067H12.166V13.9954C12.166 14.3118 12.3572 14.4963 12.6736 14.4963C12.8186 14.4963 12.9504 14.4436 13.0625 14.3579L15.6465 12.2024C15.897 11.998 15.897 11.6816 15.6465 11.4641L13.0625 9.30859C12.9504 9.21631 12.8186 9.17017 12.6736 9.17017C12.3572 9.17017 12.166 9.34814 12.166 9.67114V11.095H10.8872C10.1094 11.095 9.60181 10.8379 9.0415 10.1655L7.43311 8.2605L9.0481 6.34888C9.62158 5.66992 10.083 5.42603 10.8477 5.42603H12.166V6.87622C12.166 7.19263 12.3572 7.3772 12.6736 7.3772C12.8186 7.3772 12.9504 7.32446 13.0625 7.23877L15.6465 5.08325C15.897 4.87891 15.897 4.5625 15.6465 4.34497L13.0625 2.18945C12.9504 2.09717 12.8186 2.05103 12.6736 2.05103C12.3572 2.05103 12.166 2.229 12.166 2.552V4.10767H10.8542C9.68091 4.10767 8.9624 4.43066 8.12524 5.43262L6.58936 7.25854L4.99414 5.36011C4.21631 4.44385 3.50439 4.11426 2.3772 4.11426H0.867676C0.458984 4.11426 0.162354 4.38452 0.162354 4.76685C0.162354 5.14917 0.458984 5.42603 0.867676 5.42603H2.32446C3.06274 5.42603 3.5769 5.68311 4.1438 6.35547L5.74561 8.2605L4.1438 10.1655C3.5769 10.8379 3.10229 11.095 2.37061 11.095H0.867676C0.458984 11.095 0.162354 11.3718 0.162354 11.7542Z"})});var sn=i(11751);const rn=(0,ki.I)("unsplashLogo",{viewBox:"0 0 12 12",svg:n()("path",{d:"M3.75 3.375V0H8.25V3.375H3.75ZM8.25 5.25H12V12H0V5.25H3.75V8.625H8.25V5.25Z"})});var ln=i(91584),dn=i(96802),cn=i(64964),un=i(53471),mn=i(24405),pn=i(17809),gn=i(65187);function hn(e){window.__c={n:"AiSourcePickerQueryInput"};const{placeholder:t,onSubmit:i}=e,a=(0,mn.yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:4,padding:"6px 10px",marginLeft:8,marginRight:8,overflow:"hidden",fontSize:14,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:{minHeight:60},placeholder:{minHeight:60}})),[]),s=(0,o.useCallback)((e=>{if(i&&!e.shiftKey)i();else{if("editing"!==M.default.state.mode)return}}),[i]);return n()("div",{style:a.wrap,className:Kt.Wh_},void 0,n()(gn.Z,{placeholder:t,disabled:!1,store:e.store,style:a.text,placeholderStyle:a.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:s,disableMobileActionBar:!1,disableDateReminderMentions:!0,disableStyleAnnotations:!0}))}var fn=i(6202);function vn(e){window.__c={n:"AiSourcePickerInputWrapper"};const{tab:t}=e,i=(0,s.O7)(),{store:a}=(0,pn.useMockTextStore)({initialValue:void 0,onChange:u.yR}),r=(0,mn.yK)((e=>({desktopStyle:{marginTop:8,marginBottom:6},sparkleStyle:{width:16,height:16,marginRight:4},captionStyle:{textAlign:i.device.isMobile?"left":"center"}})),[i.device.isMobile]),l=(0,o.useCallback)((async()=>{const i=a.getValue();if(!i)return;const n=[];for(const e of i){var o;if("‣"===e[0]&&null!==(o=e[1])&&void 0!==o&&o.length){if("d"===e[1][0][0]){const t=e[1][0][1].start_date;n.push(t)}else if("u"===e[1][0][0]){const t=e[1][0][1],{currentSpaceStore:i}=J.default.state;if(!i)return{users:[],bots:[]};const a=Et.U6.createChildStore(i,{table:$i.KJ,id:t});await a.load();const o=a.getEmail();n.push(o||"")}}else n.push(e[0])}const s=n.join(""),r=t.integration;if(s){e.store.setState({...e.store.state,loading:!0});const i=await t.getResults(s,r);e.store.setState({...e.store.state,loading:!1,result:i.results})}}),[a,e.store,t]);return n()("div",{},void 0,n()(A.Z,{desktopStyle:r.desktopStyle},void 0,n()(hn,{placeholder:e.placeholder,onSubmit:l,store:a})),n()(A.Z,{},void 0,n()(fn.Z,{onClick:l,title:t.buttonText||o.createElement(o.Fragment,null,n()(P.FormattedMessage,{defaultMessage:"Ask",id:"mediaPicker.aiSourcePickerTab.askButtonText"}),n()("div",{},void 0,(0,sn.t)(r.sparkleStyle))),fullWidth:e.isSmallWidth})),t.caption&&n()(x.Z,{shouldWrapCaption:!0,caption:t.caption,style:r.captionStyle}))}var yn=i(42922),Sn=i(949),bn=i(51077),Mn=i(91839),wn=i(63296),Cn=i(77137),_n=i(30506),kn=i(91718),Tn=i(23321);const In=(0,ki.I)("colorPickerCircle",{viewBox:"0 0 32 32",svg:o.createElement(o.Fragment,null,n()("circle",{cx:"16",cy:"16",r:"14",strokeWidth:"3",fill:"none"}),n()("circle",{cx:"16",cy:"16",r:"14",opacity:"0.9"}))});var Pn=i(73063),xn=i(86825),Zn=i(57670);const Fn=(0,P.defineMessages)({selectSpecificIconColor:{defaultMessage:"Select icon color {iconColor}",id:"iconPickerColorPicker.selectSpecificColor"},selectIconColor:{defaultMessage:"Select icon color",id:"iconPickerColorPicker.selectColor"},selectIconColorWithCurrentColor:{defaultMessage:"Select icon color, {iconColor} selected",id:"iconPickerColorPicker.selectColorWithCurrentColor"},noIconColor:{defaultMessage:"no color",id:"iconPickerColorPicker.noColor"}});function An(){window.__c={n:"IconPickerColorPicker"};const e=(0,r.VK)((()=>{var e;return null===(e=J.default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),t=(0,P.useIntl)(),i=(0,s.O7)(),a=(0,mn.Fg)(),l=(0,s.Fy)(),c=(0,r.qz)(void 0,j.Z);return n()(G.Z,{renderTooltip:()=>t.formatMessage(Fn.selectIconColor),placement:G.Z.Placement.Bottom,render:s=>n()(z.ZP,{preventBlockRenderQueueOnEnter:!0,buttonPopupStore:c,popupType:z.Z4.Popup,renderOrigin:i=>o.createElement(Q.DO,d()({ariaLabel:t.formatMessage(Fn.selectIconColorWithCurrentColor,{iconColor:t.formatMessage(e?tn.RR[e]:Fn.noIconColor)}),icon:t=>In({...t,stroke:e?tn.Lr[a.mode][e]:tn.Lr[a.mode].lightgray,fill:e?tn.Lr[a.mode][e]:a.lightIconColor})},(0,q.Z)(i,s))),render:s=>function(e){const{parent:t,environment:i,currentIconPickerColor:a,theme:s,device:r,intl:l}=e,c=tn.Oe.map((e=>({key:e,action:a=>{t.close(),En({environment:i,color:e})},render:t=>n()(G.Z,{renderTooltip:()=>l.formatMessage(tn.RR[e]),placement:G.Z.Placement.Bottom,render:i=>o.createElement(Pn.Z,d()({},(0,q.Z)(i,t),{ariaLabel:l.formatMessage(Fn.selectSpecificIconColor,{iconColor:l.formatMessage(tn.RR[e])}),style:{...r.isMobile?{width:Zn.Z.mobileButtonSize,height:Zn.Z.mobileButtonSize}:{width:Zn.Z.desktopButtonSize,height:Zn.Z.desktopButtonSize}},icon:t=>In({...t,height:r.isMobile?18:14,width:r.isMobile?18:14,stroke:tn.Lr[s.mode][e],fill:tn.Lr[s.mode][e]})}))})})));return c.push({key:"askEveryTime",action:()=>{t.close(),En({environment:i,color:void 0})},render:e=>o.createElement(xn.Z,d()({},e,{title:n()(P.FormattedMessage,{id:"iconPickerColorPicker.askEveryTime",defaultMessage:"Ask every time"}),onClick:()=>{En(void 0!==a?{environment:i,color:void 0}:{environment:i,color:"gray"})},on:void 0===a,style:{boxShadow:void 0},textWrapperStyle:{marginLeft:r.isMobile?10:6},rightStyle:{marginRight:4}}))}),n()(K.Z,{capture:!0,allowEsc:!0},void 0,n()(Z.Z,{type:Z.i.Grid,itemsPerRow:5,initialFocus:a?Math.max(tn.Oe.indexOf(a),0):10,sections:[{key:"variations",render:e=>o.createElement("div",e),items:c}],renderRow:(e,t)=>n()("div",{style:{display:"flex",padding:4,...t<2&&void 0===a&&{opacity:.5},...2===t&&{padding:"0 0 4px 0",flexDirection:"row-reverse"}}},t,e)}))}({parent:s,environment:i,currentIconPickerColor:e,theme:a,device:l,intl:t})})})}function En(e){const{environment:t,color:i}=e,{currentUserSettingsStore:a}=J.default.state;a&&h.createAndCommit({userAction:"mediaPicker.setIconPickerColor",environment:t,perform:e=>{const t=void 0!==i?i:null;$.d2({userSettingsStore:a,transaction:e,data:{icon_picker_color:t}})}})}var Bn=i(78948),Rn=i(5385),Dn=i(45567),Ln=i(41168);class Nn extends N.default{getInitialState(){return{inputValue:"",focus:!1,result:void 0,loading:!1,hover:""}}}const On=Nn;var Vn=i(4391),Un=i(33846),Wn=i(91390),zn=i(12768),Kn=i(78291),Hn=i(3403),Gn=i(12981),qn=i(16354),jn=i(81865),Yn=i(62385);function $n(){const{device:e,WindowSizeStore:t}=(0,s.O7)();return(0,mn.yK)((i=>({galleryWrap:{display:"flex",flexWrap:"wrap",alignContent:"flex-start",background:i.popoverBackground,paddingTop:e.isPhone?12:0,paddingBottom:e.isPhone?12:0,paddingLeft:e.isPhone?t.getSafePaddingLeftCSS(14):12,paddingRight:e.isPhone?t.getSafePaddingRightCSS(14):12,boxShadow:e.isPhone?`0 1px 0 ${i.regularDividerColor}`:""}})),[t,e])}function Qn(e){let{pageCover:t,tab:i}=e;window.__c={n:"GalleryItem"};const{coverUrl:a,title:s,subtitle:r,position:l}=t,c=(0,mn.yK)((e=>({container:{width:"25%",padding:3},tooltip:{maxWidth:180,whiteSpace:"normal"},title:{color:e.regularInvertedTextColor},subtitle:{color:e.mediumInvertedTextColor},buttonHover:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:`center ${100*(l||0)}%`,borderRadius:3}})),[l]),u=(0,o.useCallback)((()=>{i.onChange({url:a,position:l})}),[i,a,l]);return n()("div",{style:c.container},void 0,n()(G.Z,{originGap:0,placement:G.Z.Placement.Bottom,delayThreshold:600,renderTooltip:()=>n()("div",{style:c.tooltip},void 0,n()("span",{style:c.title},void 0,B.default.formatMessage(s))," ",n()("span",{style:c.subtitle},void 0,r&&B.default.formatMessage(r))),render:e=>o.createElement(W.Z,d()({hoveredStyle:c.buttonHover},e,{onClick:u}),n()(jn.Z,{url:a,width:200,isAuthenticated:!1,render:(e,t)=>t&&n()(Gn.Z,{src:t,style:c.imageBox})}))}))}const Jn=function(e){let{tab:t}=e;window.__c={n:"GalleryMediaPickerTab"};const[i,a]=(0,o.useState)({}),[s,r]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{r(!0),await ue.deps.pageCovers.loader().then((e=>{a(e.default),r(!1)}))})()}),[]);const l=$n(),d=(0,mn.yK)((e=>({container:{paddingBottom:8},groupTitle:{marginLeft:-5},loader:{height:300}})),[]);return s?n()("div",{style:d.loader},void 0,n()(Hn.Z,{})):n()("div",{style:d.container},void 0,u.UI(i,((e,i)=>n()(A.Z,{title:n()(qn.Z,{style:d.groupTitle,href:e.url,external:!0},void 0,n()(Yn.Z,{},void 0,B.default.formatMessage(e.title))),isTitleUppercase:!0,noTextOverflow:!0},i,n()("div",{style:l.galleryWrap},void 0,e.items.map(((e,i)=>n()(Qn,{pageCover:e,tab:t},i))))))))};var Xn=i(54642),eo=i(42402);const to=(0,P.defineMessages)({giphyPlaceholder:{id:"mediaPicker.giphyPlaceholder.text",defaultMessage:"Search GIPHY"}});function io(e){window.__c={n:"GiphyResults"};const{tab:t,results:i,ready:a,isSmallWidth:s,giphyRandomId:r}=e,l=(0,mn.yK)((e=>({loading:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1},captionMenuItem:{textAlign:s?"left":"center",color:e.mediumTextColor}})),[s]);return a?!i||i&&!i.length?n()(x.Z,{shouldWrapCaption:!0,caption:n()(P.FormattedMessage,{defaultMessage:"No results found.",id:"mediaPicker.giphy.noResultsText"}),style:l.captionMenuItem}):n()(o.Fragment,{},void 0,i.map(((e,i)=>n()(ao,{tab:t,image:e,giphyRandomId:r},i))),n()(x.Z,{shouldWrapCaption:!0,caption:n()(P.FormattedMessage,{defaultMessage:"Search to find more results.",id:"mediaPicker.giphy.searchText"}),style:l.captionMenuItem})):n()("div",{style:l.loading},void 0,n()(Vi.Z,{}))}function ao(e){var t;let{tab:i,image:a,giphyRandomId:r}=e;window.__c={n:"RenderedGiphyImage"};const l=(0,s.O7)(),{device:d}=l,c=(0,mn.yK)((e=>({container:{width:d.isMobile?"33%":"25%",padding:3},hoveredButton:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:3},label:{marginTop:2,marginBottom:4}})),[d.isMobile]),u=(0,o.useCallback)((async()=>{var e;if(i.onChange({url:a.imageUrl}),null!==(e=a.analytics)&&void 0!==e&&e.onclick)try{var t;await Xn.postGiphyAnalytics(l,{url:null===(t=a.analytics)||void 0===t?void 0:t.onclick.url,timestamp:Date.now(),random_id:r})}catch(n){}}),[l,r,a.imageUrl,i,null===(t=a.analytics)||void 0===t?void 0:t.onclick]);return n()("div",{style:c.container},a.id,n()(W.Z,{hoveredStyle:c.hoveredButton,onClick:u},void 0,n()(Gn.Z,{src:a.thumbUrl,style:c.imageBox})),n()(Jt.Z,{isSmall:!0,isSecondaryColor:!0,style:c.label},void 0,n()(P.FormattedMessage,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.giphy.byAuthor",values:{authorName:a.authorName||"GIPHY",inlinetextlink:e=>n()(eo.Z,{external:!0,href:a.imageUrl},void 0,e)}})))}const no=function(e){let{tab:t,isSmallWidth:i}=e;window.__c={n:"GiphyMediaPickerTab"};const[a,r]=(0,o.useState)(""),[l,d]=(0,o.useState)(""),c=(0,s.O7)(),{device:m}=c,p=$n(),g=(0,o.useCallback)((async()=>{if(!u.xb(a))return a;const e=await Xn.getGiphyRandomId(c,{});return"success"===e.type?(r(e.data.random_id),e.data.random_id):void 0}),[c,a]);return n()("div",{style:{paddingBottom:8}},void 0,n()(A.Z,{desktopStyle:{marginTop:8,marginBottom:6}},void 0,n()(Q.ZP,{value:l,placeholder:B.default.formatMessage(to.giphyPlaceholder),showClearButton:!0,focus:!m.isMobile||void 0,onChange:e=>d(e.target.value)})),n()("div",{style:p.galleryWrap},void 0,n()(Cn.Z,{request:l,debounce:Oa.vp,performRequest:async e=>{await g();const t=await Xn.searchGiphyImages(c,{query:e,page:0});if("success"===t.type)return t.data.results;throw t.error},render:(e,o,s)=>n()(io,{tab:t,results:o,ready:s,isSmallWidth:i,giphyRandomId:a})})))};var oo=i(24608);const so=(0,P.defineMessages)({unsplashPlaceholder:{id:"mediaPicker.unsplashPlaceholder.text",defaultMessage:"Search for an image…"}});function ro(e){window.__c={n:"UnsplashResults"};const{tab:t,results:i,ready:a,isSmallWidth:s}=e,r=(0,mn.yK)((e=>({loading:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1},captionMenuItem:{textAlign:s?"left":"center",color:e.mediumTextColor}})),[s]);return a?!i||i&&!i.length?n()(x.Z,{shouldWrapCaption:!0,caption:n()(P.FormattedMessage,{defaultMessage:"No results found.",id:"mediaPicker.unsplash.noResultsText"}),style:r.captionMenuItem}):n()(o.Fragment,{},void 0,i.map(((e,i)=>n()(lo,{tab:t,image:e},i))),n()(x.Z,{shouldWrapCaption:!0,caption:n()(P.FormattedMessage,{defaultMessage:"Search to find more results.",id:"mediaPicker.unsplash.searchText"}),style:r.captionMenuItem})):n()("div",{style:r.loading},void 0,n()(Vi.Z,{}))}function lo(e){let{tab:t,image:i}=e;window.__c={n:"RenderedUnsplashImage"};const a=(0,s.O7)(),{device:r}=a,l=(0,o.useCallback)((async()=>{const e=await(0,oo.ZP)({environment:a,url:i.downloadUrl,method:"GET",format:"json"});"success"===e.type&&t.onChange({url:e.data.url})}),[a,i.downloadUrl,t]);return n()("div",{style:{width:r.isMobile?"33%":"25%",padding:3}},i.id,n()(W.Z,{hoveredStyle:{opacity:.85},onClick:l},void 0,n()(Gn.Z,{src:i.thumbUrl,style:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:3}})),n()(Jt.Z,{isSmall:!0,isSecondaryColor:!0,style:{marginTop:2,marginBottom:4}},void 0,n()(P.FormattedMessage,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.unsplash.byAuthor",values:{authorName:i.authorName,inlinetextlink:e=>n()(eo.Z,{external:!0,href:i.unsplashUrl},void 0,e)}})))}const co=function(e){let{tab:t,isSmallWidth:i}=e;window.__c={n:"UnsplashMediaPickerTab"};const[a,r]=(0,o.useState)(""),l=(0,s.O7)(),{device:d}=l,c=$n();return n()("div",{style:{paddingBottom:8}},void 0,n()(A.Z,{desktopStyle:{marginTop:8,marginBottom:6}},void 0,n()(Q.ZP,{value:a,placeholder:B.default.formatMessage(so.unsplashPlaceholder),showClearButton:!0,focus:!d.isMobile||void 0,onChange:e=>r(e.target.value)})),n()("div",{style:c.galleryWrap},void 0,n()(Cn.Z,{request:a,debounce:Oa.vp,performRequest:async e=>{const t=await Xn.searchUnsplashImages(l,{query:e,page:0});if("success"===t.type)return t.data.results;throw t.error},render:(e,a,o)=>n()(ro,{tab:t,results:a,ready:o,isSmallWidth:i})})))},uo=(0,P.defineMessages)({embedPlaceholder:{id:"mediaPicker.embedPlaceholder.text",defaultMessage:"Paste in https://…"},filterPlaceholder:{id:"mediaPicker.emojiFilter.text",defaultMessage:"Filter…"},aiSourcePickerPlaceholder:{id:"mediaPicker.githubPlaceholder.text",defaultMessage:"Ask query here"},aiIsFetchingLoader:{id:"mediaPicker.aiIsFetchingLoader.text",defaultMessage:"Ai is fetching"}});class mo extends c.Z{constructor(){super(...arguments),this.menuRef=o.createRef(),this.storeTypes={embedInputStore:Un.Z,emojiInputStore:Un.Z,iconInputStore:Un.Z,iconPickerStore:Vn.Z,aiSourcePickerStore:On},this.handleEmbedSubmit=e=>()=>{const t=this.stores.embedInputStore.state.inputValue;if(t){const i=(0,_i.Wv)(t,fi.default.secureFileS3.url,fi.default.secureFileS3V2.url,fi.default.secureFileConfig.rootPath,fi.default.secureFileConfig.hostname),a=i?i.link:t;e.onChange(a),p.bOx(this.environment,{pastedText:a,source:"media_picker"})}},this.handleAiSourcePickerSubmit=(e,t)=>()=>{e&&t.onChange(e)},this.handleSwipeLeft=()=>{if(!Wn.Z.state.isActive)return;const e=this.getTabs(),t=e.map((e=>e.type)).indexOf(Wn.Z.state.currentTab),i=e[t+1];void 0!==i&&this.handleTabChange(i.type)},this.handleSwipeRight=()=>{if(!Wn.Z.state.isActive)return;const e=this.getTabs(),t=e.map((e=>e.type)).indexOf(Wn.Z.state.currentTab),i=e[t-1];void 0!==i&&this.handleTabChange(i.type)},this.handleTabChange=e=>{Wn.Z.state.isActive&&(Wn.Z.setState({...Wn.Z.state,currentTab:e}),"icon"===e&&Wn.Z.state.recordIconLoggingData&&p.kz9(this.environment,"select_icon_tab",Wn.Z.state.recordIconLoggingData))},this.handleRandomEmojiClick=()=>{const{device:e}=this.environment,t=this.getTabs().find((e=>e.type===this.props.currentTab));if(t&&"emoji"===t.type){const i=dn.zM();t.onChange(i,{keepVisible:!e.isMobile})}},this.handleRandomIconClick=()=>{const{device:e}=this.environment,{iconPickerStore:t}=this.stores,i=this.getTabs().find((e=>e.type===this.props.currentTab));if(i&&"icon"===i.type){const a=i.enforceIconColor??Rn.x(),n=`/icons/${u.UP(Object.keys(t.getState().allIcons))}_${a??u.UP(tn.Oe)}.svg`;i.onChange(n,{keepVisible:!e.isMobile})}},this.handleFilterChange=e=>{const{emojiInputStore:t,iconInputStore:i,iconPickerStore:a}=this.stores,n=this.getNumIconPerRow()*(this.environment.device.isMobile?w.pq:w.II),o=this.getNumIconPerRow()*(this.environment.device.isMobile?Tn.L6:Tn.OF);t.setState({...t.state,inputValue:e.currentTarget.value}),U.setState({...U.state,loadEmojiCount:n}),i.setState({...i.state,inputValue:e.currentTarget.value}),a.setState({...a.state,loadIconCount:o})}}renderComponent(){const{device:e}=this.environment,t=this.renderTabsHeader(),i=this.renderInputHeader(),a=(t||i)&&n()(o.Fragment,{},void 0,t,i);let s;if(e.isMobile)s={menuType:y.og.Modal,title:this.props.title,header:a,right:n()(P.FormattedMessage,{defaultMessage:"Close",id:"mediaPicker.mobileCloseButton.label"}),onClickRight:this.props.onCancel,left:this.props.onDelete&&n()(P.FormattedMessage,{defaultMessage:"Remove",id:"mediaPicker.mobileRemoveButton.label"}),onClickLeft:this.props.onDelete};else{s={menuType:y.og.Popup,header:a};const e=this.getTabs().find((e=>e.type===this.props.currentTab)),t=e&&"custom"===e.type?e.tabHeight:void 0;s.width=this.props.popupWidth||300,s.height=t||this.props.popupHeight,s.maxHeight=this.props.maxHeight,s.maxWidth=this.props.maxWidth}return n()(_n.Z,{onSwipeLeft:this.handleSwipeLeft,onSwipeRight:this.handleSwipeRight,render:e=>o.createElement(f.Z,d()({},s,e,{className:Kt.tQh,innerRef:this.menuRef}),this.renderCurrentTab())})}renderTabsHeader(){const{device:e}=this.environment;if(!(this.getTabs().length<=1)||this.props.onDelete){const t={gallery:n()(P.FormattedMessage,{id:"mediaPicker.tabs.gallery",defaultMessage:"Gallery"}),embed:n()(P.FormattedMessage,{id:"mediaPicker.tabs.embedLink",defaultMessage:"Embed link"}),file:n()(P.FormattedMessage,{id:"mediaPicker.tabs.upload",defaultMessage:"Upload"}),emoji:n()(P.FormattedMessage,{id:"mediaPicker.tabs.emoji",defaultMessage:"Emoji"}),icon:n()(P.FormattedMessage,{id:"mediaPicker.tabs.icon",defaultMessage:"Icon"}),custom:n()(P.FormattedMessage,{id:"mediaPicker.tabs.custom",defaultMessage:"Custom"}),unsplash:n()(o.Fragment,{},void 0,rn({width:12,marginRight:4,height:12}),n()("span",{},void 0,"Unsplash")),giphy:n()(o.Fragment,{},void 0,an({width:12,marginRight:4,height:12}),n()("span",{},void 0,"GIPHY")),drive:n()(P.FormattedMessage,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),box:n()(P.FormattedMessage,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),aiSourcePicker:n()("div",{style:{display:"flex",flexDirection:"row"}},void 0,n()(P.FormattedMessage,{id:"mediaPicker.tabs.ask",defaultMessage:"Ask"}),(0,sn.t)({width:16,height:16,marginRight:4,color:this.theme.accentColors.purple[400]}))},i=this.getTabs(),a=i.findIndex((e=>e.type===this.props.currentTab)),s=i.map((e=>e.title||t[e.type])),r=i.find((e=>e.type===this.props.currentTab)),l=r&&"emoji"!==r.type&&e.isAndroid;return n()(Ze.Z,{tabs:s,selectedIndex:a,onChange:e=>{const t=i[e];this.handleTabChange(t.type)},right:this.props.onDelete&&!e.isMobile&&n()(Wi.Z,{isGray:!0,onClick:this.props.onDelete},void 0,n()(P.FormattedMessage,{id:"mediaPicker.tabs.remove",defaultMessage:"Remove"})),style:{...l&&{borderBottom:"none"}}})}}renderInputHeader(){const{isPhone:e,isMobile:t,isAndroid:i}=this.environment.device,a=this.getTabs().find((e=>e.type===this.props.currentTab));if(a&&("emoji"===a.type||"icon"===a.type)){const s="emoji"===a.type?this.stores.emojiInputStore.state.inputValue:this.stores.iconInputStore.state.inputValue,r="emoji"===a.type?this.handleRandomEmojiClick:this.handleRandomIconClick,l=this.renderColorPicker({hasRandomButtonOnLeft:!a.hideRandomButton});return n()("div",{style:{display:"flex",...e?{}:{marginTop:16,marginBottom:10}}},void 0,n()(Q.ZP,{value:s,placeholder:B.default.formatMessage(uo.filterPlaceholder),autoFocus:!t||void 0,focus:!t||void 0,showClearButton:!0,inputLeft:n()(Q.f_,{icon:nn.R}),onChange:this.handleFilterChange,right:n()("div",{style:{display:"flex"}},void 0,null!=a&&a.hideRandomButton?void 0:n()(G.Z,{renderTooltip:()=>n()(P.FormattedMessage,{id:"mediaPicker.emojiTab.random",defaultMessage:"Random"}),placement:G.Z.Placement.Bottom,render:e=>o.createElement(Q.DO,d()({icon:on,onClick:r},e))}),l),isRightLastElementOfInput:!0,style:{...i&&{borderBottom:"none"}}}))}}renderColorPicker(e){const t=this.getTabs().find((e=>e.type===this.props.currentTab));if(!t)return null;let i;return"emoji"===(null==t?void 0:t.type)?i=n()(X,{}):"icon"===(null==t?void 0:t.type)&&void 0===t.enforceIconColor&&(i=n()(An,{})),e.hasRandomButtonOnLeft&&i?n()("div",{style:{marginLeft:6}},void 0,i):i}renderCurrentTab(){const e=this.getTabs().find((e=>e.type===this.props.currentTab));if(!e)return n()(P.FormattedMessage,{defaultMessage:"Uh oh! Something went wrong.",id:"mediaPicker.errorMessage"});switch(e.type){case"embed":return this.renderEmbedTab(e);case"file":return this.renderUploadTab(e);case"emoji":return this.renderEmojiTab(e);case"icon":return this.renderIconTab(e);case"gallery":return n()(Jn,{tab:e});case"unsplash":return n()(co,{tab:e,isSmallWidth:this.props.isSmallWidth});case"giphy":return n()(no,{tab:e,isSmallWidth:this.props.isSmallWidth});case"drive":return this.renderGoogleDriveTab(e);case"box":return this.renderBoxTab(e);case"aiSourcePicker":return this.renderAiSourcePickerTab(e);case"custom":return this.renderCustomEmbedUploadTab(e)}}renderEmojiTab(e){return n()(re,{onSubmit:e.onChange,filter:this.stores.emojiInputStore.state.inputValue||"",isCallout:this.props.isCallout,iconLoggingData:this.props.recordIconLoggingData,menuRef:this.menuRef})}renderIconTab(e){return n()(Tn.ZP,{store:this.stores.iconPickerStore,filter:this.stores.iconInputStore.state.inputValue||"",onSubmit:e.onChange,iconLoggingData:this.props.recordIconLoggingData,enforceIconColor:e.enforceIconColor,menuRef:this.menuRef})}renderCustomEmbedUploadTab(e){const{device:t}=this.environment,{data:i}=Kn.default.state,a=n()(yn.Z,{onClick:this.handleEmbedSubmit(e),disabled:0===this.stores.embedInputStore.state.inputValue.length,hovered:!1},void 0,e.buttonText||n()(P.FormattedMessage,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"})),s=n()(A.Z,{desktopStyle:{marginTop:16,display:"flex",paddingTop:0,paddingBottom:12}},void 0,n()(Q.ZP,{type:"url",value:this.stores.embedInputStore.state.inputValue,placeholder:e.inputPlaceholder||B.default.formatMessage(uo.embedPlaceholder),autoFocus:!t.isMobile||void 0,showClearButton:!0,focus:!t.isMobile||void 0,onSubmit:this.handleEmbedSubmit(e),onChange:e=>{this.stores.embedInputStore.setState({...this.stores.embedInputStore.state,inputValue:e.target.value})},inputRight:t.isPhone?a:void 0,right:t.isPhone?void 0:a,isRightLastElementOfInput:!0})),r=n()(Sn.Q,{type:this.getAllowedFileTypeFromTab(e)??Dn.gU,dropTargetKey:"uploadTab",onDropFile:t=>{"invalidFileDrop"!==t.type?e.onUpload(t.file):cn.oV({label:n()(P.FormattedMessage,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})})},dropzoneStyle:{background:(0,_.fn)([_.ZP.blueWithAlpha(.14),(0,en.Fq)(this.theme.contentBackground,.5)])}},void 0,n()("div",{style:{marginTop:-24,paddingTop:24}},void 0,e.fileUpload&&n()(A.Z,{desktopStyle:{marginTop:this.props.isSmallWidth?8:24}},void 0,n()(fn.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>this.handleUpload(e),fullWidth:this.props.isSmallWidth})),this.renderMediaCapture(e),e.caption&&n()(x.Z,{shouldWrapCaption:!0,caption:e.caption,style:{textAlign:this.props.isSmallWidth?"left":"center",color:this.theme.mediumTextColor}}),e.preventUploadLimitFreeFileSize||i&&Ln.YK(i)&&n()("div",{style:{height:8}}),i&&!e.preventUploadLimitFreeFileSize&&!Ln.YK(i)&&n()(x.Z,{shouldWrapCaption:!0,caption:n()("div",{style:{display:"flex",alignItems:"center",justifyContent:this.props.isSmallWidth?"flex-start":"center"}},void 0,n()("div",{style:{marginRight:6,color:this.theme.mediumTextColor}},void 0,n()(P.FormattedMessage,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:un.K_}})),!zn.default.isOnboarding.state&&n()(kn.Z,{subscriptionTier:Ln.M9(this.environment)||"plus",onClick:()=>{this.props.onCancel&&this.props.onCancel()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}}))})));return o.createElement(o.Fragment,null,s,r)}renderUploadTab(e){const{data:t}=Kn.default.state;return n()(Sn.Q,{type:this.getAllowedFileTypeFromTab(e)??Dn.gU,dropTargetKey:"uploadTab",onDropFile:t=>{"invalidFileDrop"!==t.type?e.onUpload(t.file):cn.oV({label:n()(P.FormattedMessage,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})})},dropzoneStyle:{background:(0,_.fn)([_.ZP.blueWithAlpha(.14),(0,en.Fq)(this.theme.contentBackground,.5)])}},void 0,n()("div",{style:{marginTop:-24,paddingTop:24}},void 0,e.fileUpload&&n()(A.Z,{desktopStyle:{marginTop:this.props.isSmallWidth?8:24}},void 0,n()(fn.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>this.handleUpload(e),fullWidth:this.props.isSmallWidth})),this.renderMediaCapture(e),e.caption&&n()(x.Z,{shouldWrapCaption:!0,caption:e.caption,style:{textAlign:this.props.isSmallWidth?"left":"center",color:this.theme.mediumTextColor}}),e.preventUploadLimitFreeFileSize||t&&Ln.YK(t)&&n()("div",{style:{height:8}}),t&&!e.preventUploadLimitFreeFileSize&&!Ln.YK(t)&&n()(x.Z,{shouldWrapCaption:!0,caption:n()("div",{style:{display:"flex",alignItems:"center",justifyContent:this.props.isSmallWidth?"flex-start":"center"}},void 0,n()("div",{style:{marginRight:6,color:this.theme.mediumTextColor}},void 0,n()(P.FormattedMessage,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:un.K_}})),!zn.default.isOnboarding.state&&n()(kn.Z,{subscriptionTier:Ln.M9(this.environment)||"plus",onClick:()=>{this.props.onCancel&&this.props.onCancel()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}}))})))}renderMediaCapture(e){if(e.imageUpload||e.videoUpload)return n()(A.Z,{desktopStyle:{marginTop:4,display:"flex",justifyContent:"center",marginRight:12,marginLeft:12}},void 0,e.imageUpload&&n()(wn.Z,{isLarge:!0,onClick:()=>this.handleUpload(e,"image/*"),style:{width:"100%"}},void 0,n()(P.FormattedMessage,{defaultMessage:"Upload file",id:"mediaPicker.chooseImage.buttonText"})),e.videoUpload&&n()(fn.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Choose a video",id:"mediaPicker.chooseVideo.buttonText"}),onClick:()=>this.handleUpload(e,"video/*"),fullWidth:this.props.isSmallWidth}))}renderEmbedTab(e){const{device:t}=this.environment;return n()(o.Fragment,{},void 0,n()(A.Z,{desktopStyle:{marginTop:8,marginBottom:6}},void 0,n()(Q.ZP,{type:"url",value:this.stores.embedInputStore.state.inputValue,placeholder:e.inputPlaceholder||B.default.formatMessage(uo.embedPlaceholder),autoFocus:!t.isMobile||void 0,showClearButton:!0,focus:!t.isMobile||void 0,onSubmit:this.handleEmbedSubmit(e),onChange:e=>{this.stores.embedInputStore.setState({...this.stores.embedInputStore.state,inputValue:e.target.value})}})),n()(A.Z,{},void 0,n()(fn.Z,{onClick:this.handleEmbedSubmit(e),title:e.buttonText||n()(P.FormattedMessage,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"}),fullWidth:this.props.isSmallWidth})),e.caption&&n()(x.Z,{shouldWrapCaption:!0,caption:e.caption,style:{textAlign:t.isMobile?"left":"center"}}))}renderGoogleDriveTab(e){return"accounts"in e?this.renderGoogleDriveAccounts(e):n()(Cn.Z,{request:this.environment,performRequest:ln.vQ,render:(t,i,a)=>{if(!a)return n()(A.Z,{},void 0,n()(Bn.Z,{}));const o=i&&i.accounts?i.accounts:[];return this.renderGoogleDriveAccounts(e,o)}})}renderGoogleDriveAccounts(e,t){return"accounts"in e?e.accounts&&0===e.accounts.length?this.renderGoogleDriveConnectAccountOption(e):n()(o.Fragment,{},void 0,n()(A.Z,{},void 0,e.accounts.map(((t,i)=>n()(Gt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.account_name}}),onClick:()=>e.onSelect(t),focused:!1},t.account_key)))),n()(A.Z,{topBorder:!0},void 0,n()(Gt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>e.onSelect(),style:{color:this.theme.mediumTextColor},focused:!1}))):t?0===t.length?this.renderGoogleDriveConnectAccountOption(e):n()(o.Fragment,{},void 0,n()(A.Z,{},void 0,t.map(((t,i)=>n()(Gt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.accountName}}),onClick:()=>e.onSelect(t),focused:!1},t.accountId)))),n()(A.Z,{topBorder:!0},void 0,n()(Gt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>e.onSelect(),style:{color:this.theme.mediumTextColor},focused:!1}))):void 0}renderGoogleDriveConnectAccountOption(e){return n()(A.Z,{},void 0,n()(Gt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>e.onSelect(),focused:!1,style:{color:this.theme.blueColor}}),n()(x.Z,{shouldWrapCaption:!1,caption:n()(P.FormattedMessage,{defaultMessage:"Find and embed your Google Drive files.",id:"mediaPicker.menuItem.connectFirstGoogleAccount.caption"})}))}renderAiSourcePickerTab(e){var t,i;return n()(o.Fragment,{},void 0,this.stores.aiSourcePickerStore.state.result&&!1===this.stores.aiSourcePickerStore.state.loading&&(0===(null===(t=this.stores.aiSourcePickerStore.state.result)||void 0===t?void 0:t.length)?n()(x.Z,{shouldWrapCaption:!0,caption:n()(P.FormattedMessage,{defaultMessage:"No results found.",id:"mediaPicker.aiSourcePicker.noResultsText"}),style:{textAlign:this.props.isSmallWidth?"left":"center",color:this.theme.mediumTextColor}}):null===(i=this.stores.aiSourcePickerStore.state.result)||void 0===i?void 0:i.map((t=>n()("div",{style:{cursor:"pointer",color:this.theme.mediumTextColor,textAlign:"left",hyphens:"auto",padding:"10px 8px",backgroundColor:this.stores.aiSourcePickerStore.state.hover===t.url?"rgba(55,53,47,0.08)":"",display:"flex",flexDirection:"row"},onClick:this.handleAiSourcePickerSubmit(t.url,e),onMouseEnter:()=>{this.stores.aiSourcePickerStore.setState({...this.stores.aiSourcePickerStore.state,hover:t.url})}},t.url,n()(bn.Z,{imageURL:"NONE"===t.avatar?e.defaultAvatar:t.avatar,size:24,imageStyle:{borderRadius:34,boxShadow:"0 2px 4px rgba(15, 15, 15, 0.1)"},type:"image_url"}),n()("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgb(55, 53, 47)",fontWeight:500,fontSize:"14px",paddingLeft:8}},void 0,t.title))))),this.stores.aiSourcePickerStore.state.loading&&n()("div",{style:{flex:1,color:this.theme.accentColors.purple[400],fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center",padding:"12px 12px",marginLeft:10}},void 0,n()(P.FormattedMessage,{id:"aiSourcePicker.loadingMessage.fetching",defaultMessage:B.default.formatMessage(uo.aiIsFetchingLoader)}),n()(Mn.Z,{style:{backgroundColor:this.theme.accentColors.purple[400]}})),!this.stores.aiSourcePickerStore.state.result&&!this.stores.aiSourcePickerStore.state.loading&&n()(vn,{tab:e,placeholder:e.inputPlaceholder||B.default.formatMessage(uo.aiSourcePickerPlaceholder),store:this.stores.aiSourcePickerStore,isSmallWidth:this.props.isSmallWidth}))}renderBoxTab(e){const{accounts:t}=e;return 0===t.length?n()(A.Z,{},void 0,n()(Gt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Connect Box account",id:"mediaPicker.menuItem.connectFirstBoxAccount.label"}),onClick:()=>e.onSelect(),focused:!1,style:{color:this.theme.blueColor}}),n()(x.Z,{shouldWrapCaption:!1,caption:n()(P.FormattedMessage,{defaultMessage:"Find and embed your Box files.",id:"mediaPicker.menuItem.connectFirstBoxAccount.caption"})})):o.createElement(o.Fragment,null,n()(A.Z,{},void 0,t.map((t=>n()(Gt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.account_name}}),onClick:()=>e.onSelect(t),focused:!1},t.account_key)))),n()(A.Z,{topBorder:!0},void 0,n()(Gt.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreBoxAccounts.label"}),onClick:()=>e.onSelect(),style:{color:this.theme.mediumTextColor},focused:!1})))}getTabs(){return this.props.tabs}getAllowedFileTypeFromTab(e){return e.fileUpload?Dn.jo:e.imageUpload?Dn.LR:e.videoUpload?Dn.G7:void 0}async handleUpload(e,t){const i=await un.y({multiple:!1,accept:t});i.length&&e.onUpload(i[0])}getNumIconPerRow(){var e,t;return null!==(e=this.menuRef)&&void 0!==e&&null!==(e=e.current)&&void 0!==e&&e.offsetWidth?((null===(t=this.menuRef)||void 0===t||null===(t=t.current)||void 0===t?void 0:t.offsetWidth)-24)/32:12}}mo.displayName="MediaPicker";const po=mo;class go extends c.Z{constructor(){super(...arguments),this.handleCloseOverlay=()=>{Xa.Z()}}renderComponent(){const{device:e}=this.environment,{state:t}=Wn.Z;return n()(v.ZP,{popupType:e.isMobile?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:t.isActive,originRect:t.isActive?t.originRect:void 0,originGap:t.isActive?t.originGap:void 0,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Center,preventScaleTransition:!0,onDismiss:this.handleCloseOverlay,render:()=>{if(t.isActive)return n()(H.Z,{capture:!0,onUp:u.yR,onDown:u.yR},void 0,o.createElement(po,d()({},t,{onCancel:this.handleCloseOverlay})))}})}}go.displayName="MediaMenu";const ho=go;var fo=i(66897),vo=i(15145),yo=i(41892),So=i(7057),bo=i(53877),Mo=i(84795),wo=i(58573),Co=i(42875),_o=i(9999),ko=i(82114),To=i(56666),Io=i(6746),Po=i(92338),xo=i(18613),Zo=i(7928),Fo=i(67060),Ao=i(75018),Eo=i(97444),Bo=i(65496),Ro=i(83089),Do=i(18245),Lo=i(14568),No=i(63334),Oo=i(19111),Vo=i(69454),Uo=i(72087),Wo=i(43765),zo=i(82990);const Ko={...zo.Z.textOverflowStyle,fontWeight:zo.Z.fontWeight.medium,maxWidth:160,display:"inline-block",verticalAlign:"bottom"};function Ho(e){const{pageTitle:t}=e;return n()(P.FormattedMessage,t?{defaultMessage:"New “{filterText}” page in…",id:"createPageMenuItem.title.withPageName",values:{filterText:n()("span",{style:Ko},void 0,t)}}:{defaultMessage:"Add new page in…",id:"createPageMenuItem.title.withoutPageName"})}function Go(e){const{pageTitle:t}=e;return n()(P.FormattedMessage,t?{defaultMessage:"New “{filterText}” sub-page",id:"createSubpageMenuItem.title.withPageName",values:{filterText:n()("span",{style:Ko},void 0,t)}}:{defaultMessage:"Add new sub-page",id:"createSubpageMenuItem.title.withoutPageName"})}var qo=i(85215),jo=i(60442),Yo=i(97680);function $o(e){window.__c={n:"SvgWorkaroundForChromiumBug"};const{svg:t,viewBox:i,fill:a}=e,s=(0,o.useMemo)((()=>{const e=Io.Z.renderToString(n()("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:i},void 0,t));return`url("${`data:image/svg+xml,${encodeURIComponent(e)}`}")`}),[t,i]);return n()("div",{style:{width:"100%",height:"100%",backgroundColor:a,WebkitMaskImage:s,maskImage:s}})}const Qo=(0,P.defineMessages)({mentionAll:{defaultMessage:"Mention a person, page, or date…",id:"mentionMenu.personPageDate.prompt2"},mentionPersonPage:{defaultMessage:"Mention a person or page…",id:"mentionMenu.personPage.prompt2"},mentionPersonDate:{defaultMessage:"Mention a person or date…",id:"mentionMenu.personDate.prompt2"},mentionPageDate:{defaultMessage:"Mention a page or date…",id:"mentionMenu.pageDate.prompt2"},mentionPerson:{defaultMessage:"Mention a person…",id:"mentionMenu.person.prompt2"},mentionDate:{defaultMessage:"Mention a date…",id:"mentionMenu.date.prompt2"},mentionPage:{defaultMessage:"Type to link or add page…",id:"mentionMenu.page.prompt2"},addPage:{defaultMessage:"Type to add or link page…",id:"mentionMenu.addPage.prompt2"}}),Jo=(0,P.defineMessages)({autocompleteToday:{defaultMessage:"Today",id:"mentionMenu.date.autocomplete.today"},autocompleteNextTuesday:{defaultMessage:"Next Tuesday 3pm",id:"mentionMenu.date.autocomplete.nextTuesday"},autocompleteReminder:{defaultMessage:"Remind tomorrow 9am",id:"mentionMenu.date.autocomplete.reminder"},reminder:{defaultMessage:"Remind {dateTime}",id:"mentionMenu.date.remindAtDateTime"},noResults:{defaultMessage:"No results",id:"mentionMenu.noSearchResults.title"},groupMentionCaption:{defaultMessage:"{numMembersInGroup, plural, one {{numMembersInGroup} member} other {{numMembersInGroup} members}}",id:"mentionMenu.group.caption"}});class Xo extends c.Z{constructor(){super(...arguments),this.storeTypes={ignoreSelectionAreaStore:No.Z,localPageMentionRequestStore:Uo.Z,localCachePageMentionRequestStore:Uo.Z},this.renderMentionResult=(e,t)=>{const{intl:i}=this.props,a=Oo.Z.state,s=a.open&&a.insertionType,r={sections:[],nextSectionShouldHaveTopBorder:()=>r.sections.length>0,addSection(e){e&&this.sections.push(e)}};"+"===s&&r.addSection(this.getCreatePageMenuSection(r.nextSectionShouldHaveTopBorder())),r.addSection(this.getDateResultsMenuSection(t,r.nextSectionShouldHaveTopBorder())),r.addSection(this.getUserResultsMenuSection(t,r.nextSectionShouldHaveTopBorder())),r.addSection(this.getGroupResultsMenuSection(t,r.nextSectionShouldHaveTopBorder(),this.props.intl)),r.addSection(this.getPageResultsMenuSection(t,r.nextSectionShouldHaveTopBorder())),("@"===s&&this.filterStore.state||"[["===s)&&r.addSection(this.getCreatePageMenuSection(r.nextSectionShouldHaveTopBorder()));const{sections:l}=r;let c,u;if(Da.Z.state.online){const e=a.mentionTypes.user,t=a.mentionTypes.page,n=a.mentionTypes.date;let o="";const s=Qo;e&&t&&n?o=i.formatMessage(s.mentionAll):e&&t?o=i.formatMessage(s.mentionPersonPage):e&&n?o=i.formatMessage(s.mentionPersonDate):t&&n?o=i.formatMessage(s.mentionPageDate):e?o=i.formatMessage(s.mentionPerson):n?o=i.formatMessage(s.mentionDate):t&&a&&(o=a.open&&"+"===a.insertionType?i.formatMessage(Qo.addPage):i.formatMessage(s.mentionPage)),this.setTemporaryInputData({title:o,icon:this.renderTemporaryInputEmptyIcon(),allowTabCompletion:!1}),c=void 0}else c=n()(Wo.Z,{title:n()(P.FormattedMessage,{defaultMessage:"Please go online to mention a person or page.",id:"mentionMenu.offlineMessage"})});0===l.length&&(u=n()(A.Z,{},void 0,n()(Wo.Z,{title:o.createElement(P.FormattedMessage,Jo.noResults)})));const{device:m}=this.environment;let p;return p=this.isActionSheet()?{menuType:y.og.ActionSheet,disableBottomPadding:!0,height:`calc(70vh - ${Vo.Z.estimatedNativeWebBottomOverlap()}px)`}:{menuType:y.og.Popup,width:this.getMenuDesktopWidth(),maxHeight:m.isMobile?"30vh":"40vh",onClickOutside:this.makeHandleCancelCallback()},o.createElement(f.Z,d()({},p,{header:c}),n()(H.Z,{capture:Oo.Z.state.open,onBackspace:this.shouldCaptureBackspace()?this.handleEmptyBackspace:void 0,onTab:this.handleTab}),n()(Z.Z,{type:Z.i.Vertical,initialFocus:this.getMenuInitialFocus(),sections:l,onEmptyEnter:this.makeHandleCancelCallback()}),u)},this.handleCreateInAutocompleteQueryChange=e=>{this.updateOpenState({createInQuery:e})},this.renderCreateInMenu=()=>{const e=Oo.Z.state;if(!e.open)return;const t="block"===e.textStore.table?e.textStore.id:void 0;return n()(Ka.Z,{targets:[],isAddTo:!0,isCreateIn:!0,onAccept:e=>{Fo.Br({environment:this.environment,titleText:this.getNormalizedFilter(),ignoreSelectionAreaStore:this.stores.ignoreSelectionAreaStore,createInValue:e,menuListItemAction:void 0})},captureSelection:!0,restoreSelection:!0,parentBlockId:t,onAutocompleteQueryChange:this.handleCreateInAutocompleteQueryChange,ignoreSelectionAreaStore:this.stores.ignoreSelectionAreaStore,autocompleteQuery:e.createInQuery,desktopWidth:this.getMenuDesktopWidth(),onCancel:this.handleCreateInCancel})},this.handleCreateInStart=()=>{this.updateOpenState({showCreateIn:!0})},this.handleCreateInCancel=()=>{this.updateOpenState({showCreateIn:!1,createInQuery:""})},this.handleEmptyBackspace=e=>{this.shouldCaptureBackspace()&&e.preventDefault(),this.makeHandleCancelCallback()()},this.makeHandleCancelCallback=()=>{const e=Oo.Z.state,t=this.getNormalizedFilter(),i=Fo.WI();let a=Date.now();return e.open&&(a=e.openTime),()=>{p.ewV(this.environment,{timeToAbandonInMs:Date.now()-a,queryLength:t.length,analyticsFrom:i}),Fo.xv()}},this.handleTab=e=>{e.preventDefault();const t=this.tabCompletionString;if(!t)return;const i=M.default.state;if("editing"!==i.mode)return;const a=(0,S.QY)(i.multiSelection);if(!a)return;const n=Oo.Z.state;n.open&&n.textStore===a.store&&h.createAndCommit({userAction:"MentionMenu.handleTab",environment:this.environment,perform:e=>{Eo.hJ({environment:this.environment,transaction:e,string:t,store:a.store,selection:a.selection,disableMentions:!0,disableDateMentions:!0,disableEmojiCommands:!0,disableSlashCommands:!0})}})},this.tabCompletionString=void 0,this.inputSelectionsStore=this.createComputedStore((()=>{const e=Oo.Z.state;if(e.open)return b.O2(e.textStore,e.oldTextValue,e.isEmptyPageTitle?"":e.insertionType)})),this.filterStore=this.createComputedStore((()=>{const e=this.inputSelectionsStore.state,t=Oo.Z.state;if(e&&t.open)return b.ug(t.textStore,e)})),this.popupOpenStore=this.createComputedStore((()=>{const e=Oo.Z.state;return!!e.open&&("+"!==e.insertionType||""!==this.getNormalizedFilter())})),this.performUserMentionRequest=async e=>{const t=Oo.Z.state;if(!t.open)return;const i=t.mentionTypes.user?await this.getUserResults(e):[];return""===e?i.slice(0,2):i.slice(0,20)},this.performLocalCachePageMentionRequest=async()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=J.default.state;if(!e)return;return Bo.hb({environment:this.environment,currentSpaceStore:e,currentSpaceViewStore:t})},this.performLocalPageMentionRequest=async e=>{const{localCachePageMentionRequestStore:t}=this.stores,i=t.state.result;if(!i)return;const a=Ke.RM();return a&&this.getNormalizedFilter()?Promise.resolve(Bo.Y_({query:e,localCachedPages:i,parentStore:a,isOnline:Da.Z.state.online,environment:this.environment,shouldLimitLocalResultsWhenOnline:!1,applyScoreThresholdWhenOnline:!0})):void 0},this.performServerPageMentionRequest=async e=>{const t=Oo.Z.state;return t.open&&this.getNormalizedFilter()&&t.mentionTypes.page?await this.getPageResults(e):[]},this.getUserResults=async e=>{if(Da.Z.state.online){return await Oa.Yu({environment:this.environment,query:e,membersOnly:!1})}return[]},this.getGroupResults=e=>{var t;if(!Oo.Z.state.open)return[];const i=(null===(t=J.default.state.currentSpaceStore)||void 0===t?void 0:t.getPermissionGroups())||[];return(0,wo.ZP)(e,i,(e=>e.name||""))},this.getPageResults=async e=>{if(!Da.Z.state.online)return[];const t=Oo.Z.state,i=t.open&&(0,Ce.NZ)(t.textStore)&&t.textStore;return await Oa.WL({nearBlock:i||void 0,environment:this.environment,query:e,source:"mention_menu",limit:20})},this.getDateResults=e=>{const t=Oo.Z.state;if(!t.open)return[];const{intl:i}=this.props,a=t.mentionTypes.reminder;return t.mentionTypes.date?function(e,t,i){if(0===e.length)return u.oA([{label:i.formatMessage(Jo.autocompleteToday),value:()=>bo.Lg((0,Co.r)())},t?void 0:{label:i.formatMessage(Jo.autocompleteNextTuesday),value:()=>{const e=bo.Uu((0,Co.r)()),t=e.set({weekday:2,hour:15}),i=t<=e?t.plus({week:2}):t.plus({week:1});return{type:"datetime",start_date:i.toFormat(bo.Iq),start_time:i.toFormat(oi.jK),time_zone:(0,Co.r)()}}},t?{label:i.formatMessage(Jo.autocompleteReminder),value:()=>({type:"datetime",start_date:bo.Ro((0,Co.r)()).start_date,start_time:"09:00",reminder:{unit:"day",value:0,time:oi.HZ,defaultTimeZone:(0,Co.r)()},time_zone:(0,Co.r)()})}:void 0]);const a=e.normalize("NFKD"),n=t?Mo.parsePersistedDateWithOptionalReminder(a,i):Mo.parsePersistedDate(a,i);if(n){let e=(0,So.ZV)({value:n,date_format:"relative",userTimeZone:(0,Co.r)(),intl:i,allowRelativeDates:!0});return n.reminder&&(e=i.formatMessage(Jo.reminder,{dateTime:e})),[{label:e,value:()=>n}]}return[]}(e,a,i).slice(0,6):[]},this.getTemplateVariableResults=e=>{const t=Oo.Z.state;if(!t.open)return[];if(!t.mentionTypes.templateVariable)return[];const{intl:i}=this.props;return m.XVI(e,i)}}willMountOrUpdate(){const e=Oo.Z.state,t=this.filterStore.state;if(e.open){var i;const a=M.default.state,n="editing"===a.mode?(0,S.QY)(a.multiSelection):void 0,o=(null==n?void 0:n.store)===e.textStore,s=this.stores.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,r=s&&"editing"===s.mode&&(null===(i=(0,S.QY)(s.multiSelection))||void 0===i?void 0:i.store)===e.textStore;if(!o&&!r)return void Fo.xv();const l=o&&(null==n?void 0:n.selection),d=this.inputSelectionsStore.state;if(d&&l&&(l.startIndex<d.filter.startIndex||l.endIndex>d.filter.endIndex))return void Fo.xv();const c=this.filterStore.state&&this.filterStore.state[0];if("+"===e.insertionType&&c&&!c.match(Ro.Ff))return void Fo.xv();if(void 0===t&&!e.isEmptyPageTitle)return void Fo.xv()}}renderComponent(){const{device:e}=this.environment,t=Oo.Z.state,i=Lo.Z.find((e=>e.props.capture)),a=this.popupOpenStore.state;let s;if(i&&e.isMobile){var r;const e=null===(r=i.stores.store.state.node)||void 0===r?void 0:r.getBoundingClientRect();e&&(s={height:`calc(100vh - ${e.height}px)`})}const l=t.open&&t.showCreateIn;return n()(v.ZP,{popupType:this.isActionSheet()?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:a,originRect:t.open?t.selectionRect:void 0,slideUpWrapStyle:s,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,originGap:8,disableMouseCapture:!0,disableContentScroll:!0,onDismiss:this.makeHandleCancelCallback(),disableDarkOverlayBackground:e.isMobile,keepFocus:!0,render:()=>e.isMobile?o.createElement(o.Fragment,null,this.renderMentionSearch(),n()(v.ZP,{popupType:v.ZP.PopupType.SlideUp,render:this.renderCreateInMenu,open:l,keepFocus:!0})):l?this.renderCreateInMenu():this.renderMentionSearch()})}renderMentionSearch(){const e=this.getNormalizedFilter(),t=Oo.Z.state,i=Do.default.mark("rum.mention_menu_ready"),a={field:"relevance"};return n()(Cn.Z,{requestStore:t.userRequestStore,request:e,performRequest:this.performUserMentionRequest,render:o=>n()(Cn.Z,{requestStore:t.pageRequestStore,request:e,performRequest:this.performServerPageMentionRequest,debounce:Oa.vp,render:t=>n()(Cn.Z,{requestStore:this.stores.localCachePageMentionRequestStore,request:J.default.state.currentSpaceStore&&J.default.state.currentSpaceStore.id,performRequest:this.performLocalCachePageMentionRequest,render:s=>n()(Cn.Z,{requestStore:this.stores.localPageMentionRequestStore,debounce:Oa.E5,request:{query:{text:e,filters:Po.u4({isDeletedOnly:!1,navigableBlockContentOnly:!0,excludeTemplates:!0,requireEditPermissions:void 0}),sort:a},limit:5},performRequest:this.performLocalPageMentionRequest,render:e=>this.renderMentionResult(o||t||e,this.getCurrentMentionResults(i))})})})})}getDateResultsMenuSection(e,t){const{dateResults:i}=e,{intl:a}=this.props,s=this.getNormalizedFilter(),r=this.getTemplateVariableMenuItems(e,"date");if(0===i.length&&0===r.length)return;const l=i.map((e=>{let{label:t,value:i}=e;return{key:t,render:e=>{if(e.focused&&this.setTemporaryInputData({title:t,icon:this.renderTemporaryInputAtMentionIcon(),allowTabCompletion:!0}),Mo.parseRelativeDate(t,a)){const n=(0,So.ZV)({value:i(),userTimeZone:(0,Co.r)(),intl:a,allowRelativeDates:!1});return o.createElement(Gt.Z,d()({},e,{title:t,caption:n,inline:!0}))}return o.createElement(Gt.Z,d()({},e,{title:t}))},action:e=>{h.createAndCommit({userAction:"MentionMenu.menuItem",environment:this.environment,perform:t=>{Fo.RL({environment:this.environment,annotation:["d",{...i(),date_format:"relative"}],transaction:t,menuListItemAction:e,query:s,mentionType:"date"})}})}}}));return this.applySectionLimit("date",{key:"date results",render:e=>o.createElement(A.Z,d()({},e,{title:n()(P.FormattedMessage,{defaultMessage:"Date",id:"mentionMenu.dateSection.title"}),topBorder:t,isTitleUppercase:!0})),items:r.concat(l)})}getTemplateVariableMenuItems(e,t){const{templateVariableResults:i}=e,{intl:a}=this.props,n=this.getNormalizedFilter();return i.filter((e=>m.i6A(e,t))).map((e=>({key:e,render:t=>{const i=m.U$y(e,a),n=m.Z08(e,a);return t.focused&&this.setTemporaryInputData({title:i,icon:this.renderTemporaryInputAtMentionIcon(),allowTabCompletion:!0}),o.createElement(Gt.Z,d()({},t,{title:i,caption:n,inline:!0}))},action:t=>{h.createAndCommit({userAction:"MentionMenu.menuItem",environment:this.environment,perform:i=>{Fo.RL({environment:this.environment,annotation:m.WBu({type:e}),transaction:i,menuListItemAction:t,query:n,mentionType:"templateVariable"})}})}})))}renderSpinner(e){return n()(pa.Z,{show:e,showDelay:500,showHold:300,render:e=>n()(Vi.Z,{style:{textAlign:"center",visibility:e?"visible":"hidden",display:"inline",marginLeft:8}})})}renderTemporaryInputEmptyIcon(){const e=Oo.Z.state;if(e.open)return"+"===e.insertionType?this.renderTemporaryInputAddIcon():n()("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginRight:"0.2em"}},void 0,n()($o,{svg:nn.T,viewBox:nn.R.__iconViewBox,fill:this.theme.mediumIconColor}))}renderTemporaryInputAddIcon(){return n()("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginRight:"0.2em"}},void 0,n()($o,{svg:Zi.s,viewBox:Zi.R.__iconViewBox,fill:this.theme.mediumIconColor}))}renderTemporaryInputPageIcon(e){return(0,xo.tp)({pageModel:e.getModel(),pageRole:e.getRole(),showEmojiInline:!0,emojiType:(0,D.e_)(this.environment),baseUrl:fi.default.domainBaseUrl,getRecordModel:e.getRecordModel,isClient:!0,isSafariOrIOS:this.environment.device.isSafari||this.environment.device.isIOS,currentUserId:this.environment.currentUser.id,theme:this.theme,emojiData:L.Z.state})}renderTemporaryInputAtMentionIcon(){return n()("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginRight:"0.2em"}},void 0,n()($o,{svg:ko.Q,viewBox:ko.p.__iconViewBox,fill:this.theme.mediumIconColor}))}getUserResultsMenuSection(e,t){const{userResults:i}=e,a=this.getNormalizedFilter(),s=this.getTemplateVariableMenuItems(e,"user");if(0===i.length&&0===s.length)return;const r=u.oA(i.map((e=>({key:e.id,render:t=>(t.focused&&this.setTemporaryInputData({title:(0,Zo.Nz)(this.props.intl,e),icon:this.renderTemporaryInputAtMentionIcon(),allowTabCompletion:!0}),o.createElement(Yo.Z,d()({},t,{actor:(0,fo.dp)(e),useEmailAsTooltip:!0}))),action:t=>{h.createAndCommit({userAction:"MentionMenu.menuItem",environment:this.environment,perform:i=>{Fo.RL({environment:this.environment,annotation:(0,m.tEo)(e.id),transaction:i,menuListItemAction:t,query:a,mentionType:"user"})}})}}))));return this.applySectionLimit("user",{key:"user results",render:e=>o.createElement(A.Z,d()({},e,{title:n()(P.FormattedMessage,{defaultMessage:"People",id:"mentionMenu.peopleSection.title"}),topBorder:t,isTitleUppercase:!0})),items:s.concat(r)})}getGroupResultsMenuSection(e,t,i){const{groupResults:a}=e;if(0===a.length)return;const s=this.getNormalizedFilter(),r=u.oA(a.map((e=>{var t;const a=i.formatMessage(Jo.groupMentionCaption,{numMembersInGroup:(null===(t=e.user_ids)||void 0===t?void 0:t.length)||0});return{key:e.id,render:t=>(t.focused&&this.setTemporaryInputData({title:e.name||"",icon:this.renderTemporaryInputAtMentionIcon(),allowTabCompletion:!0}),n()(qo.l,{menuListItemProps:{...t,caption:a},group:e})),action:t=>{var i;const a=null===(i=J.default.state.currentSpaceStore)||void 0===i?void 0:i.id;a&&h.createAndCommit({userAction:"MentionMenu.groupMention",environment:this.environment,perform:i=>{Fo.RL({environment:this.environment,annotation:m.XIB(e.id,a),transaction:i,menuListItemAction:t,query:s,mentionType:"group"})}})}}})));return this.applySectionLimit("group",{key:"group results",render:e=>o.createElement(A.Z,d()({},e,{title:n()(P.FormattedMessage,{defaultMessage:"Groups",id:"mentionMenu.groupSection.title"}),topBorder:t,isTitleUppercase:!0})),items:r})}getPageResultsMenuSection(e,t){const{pageResults:i}=e,a=this.getNormalizedFilter(),s=o.createElement(o.Fragment,null,0===i.length?o.createElement(P.FormattedMessage,Jo.noResults):n()(P.FormattedMessage,{defaultMessage:"Link to page",id:"mentionMenu.pagesSection.title2"}),this.renderSpinner(Oo.Z.state.pageRequestStore.state.loading));return this.applySectionLimit("page",{key:"page results",render:e=>o.createElement(A.Z,d()({},e,{title:s,topBorder:t,isTitleUppercase:!0})),items:u.oA(i.map((e=>{const t=Ke.RM();if(!t)return;const i=Et.G.createChildStore(t,{table:pi.iU,id:e});return{key:e,render:e=>{if(e.focused){const e=i.getModel();if(e){const t=e.getRenderTitle({getRecordModel:i.getRecordModel,userTimeZone:(0,Co.r)(),intl:this.props.intl});this.setTemporaryInputData({title:t||"",icon:this.renderTemporaryInputPageIcon(i),allowTabCompletion:!0})}}return o.createElement(Va.Z,d()({},e,{store:i}))},action:t=>{h.createAndCommit({userAction:"MentionMenu.getPageResultsMenuSection",environment:this.environment,perform:i=>{Fo.RL({environment:this.environment,annotation:["p",e],transaction:i,menuListItemAction:t,query:a,mentionType:"page"})}})}}})))})}getCreatePageMenuSection(e){if(!this.canCreatePage())return;const t=Oo.Z.state;if(!t.open)return;const{intl:i}=this.props,a=this.getNormalizedFilter(),s="@"===t.insertionType?n()(P.FormattedMessage,{id:"mentionMenu.createPageSection.title",defaultMessage:"New page"}):void 0;return{key:"create page",render:t=>o.createElement(A.Z,d()({title:s,isTitleUppercase:!0},t,{topBorder:e})),items:[{key:"add new subpage",action:async e=>{const i=va.gt(t.textStore);i&&await Fo.Br({environment:this.environment,ignoreSelectionAreaStore:this.stores.ignoreSelectionAreaStore,titleText:this.getNormalizedFilter(),createInValue:i.createInValue,onPageCreated:e=>{e&&""===m.QaF(e.getTitleValue())&&Ao.navigateToBlock({environment:this.environment,store:e,pageVisitSource:vo.tY.Create})},menuListItemAction:e})},render:e=>{e.focused&&this.setTemporaryInputData({title:0===a.length?i.formatMessage(Qo.addPage):"",icon:this.renderTemporaryInputAddIcon(),allowTabCompletion:!1});const t=t=>o.createElement(Gt.Z,d()({},(0,q.Z)(t||{},e),{icon:(0,Zi.R)({width:16}),title:n()(Go,{pageTitle:this.getNormalizedFilter()})}));return this.environment.device.isMobile?t():n()(G.Z,{renderTooltip:()=>n()(jo.Z,{imageURL:yo.Z.images.tooltips.pageMenu.newSubpagePng,imageWidth:140,imageHeight:100,caption:o.createElement(P.FormattedMessage,Ka.s.createSubpage)}),placement:G.Z.Placement.Right,delayThreshold:0,render:e=>t(e)})}},{key:"open create in menu",action:this.handleCreateInStart,render:e=>{e.focused&&this.setTemporaryInputData({title:0===a.length?i.formatMessage(Qo.addPage):"",icon:this.renderTemporaryInputAddIcon(),allowTabCompletion:!1});const t=n()(Ho,{pageTitle:this.getNormalizedFilter()}),s=i=>o.createElement(Gt.Z,d()({},(0,q.Z)(i||{},e),{icon:(0,_o.J)({width:16}),title:t}));return this.environment.device.isMobile?s():n()(G.Z,{renderTooltip:()=>n()(jo.Z,{imageURL:yo.Z.images.tooltips.pageMenu.newPageInPng,imageWidth:140,imageHeight:100,caption:o.createElement(P.FormattedMessage,Ka.s.newPageIn)}),placement:G.Z.Placement.Right,delayThreshold:0,render:e=>s(e)})}}]}}applySectionLimit(e,t){const i=Oo.Z.state;if(!i.open)return t;if(i.expandSection&&i.expandSection===e)return t;const{items:a}=t,s=this.environment.device.isPhone?3:5;if(a.length<=s)return t;const r=[...a.slice(0,s),{key:"show more",render:e=>o.createElement(Gt.Z,d()({},e,{icon:(0,To.o)({width:16,fill:this.theme.mediumTextColor}),title:n()("span",{style:{color:this.theme.mediumTextColor}},void 0,n()(P.FormattedMessage,{defaultMessage:"{numberMore} more results",id:"mentionMenu.showMoreResultsButton.title",values:{numberMore:a.length-s}}))})),action:()=>{this.updateOpenState({expandSection:e})}}];return{...t,items:r}}updateOpenState(e){const t=Oo.Z.state;t.open&&Oo.Z.setState({...t,...e})}getNormalizedFilter(){const e=this.filterStore.state;return e?Oo.Z.state.open&&"@"===Oo.Z.state.insertionType&&this.environment.device.isAndroid&&e.startsWith("@")?e.slice(1).trim():Oo.Z.state.open&&"[["===Oo.Z.state.insertionType&&e.endsWith("]]")?e.slice(0,-2).trim():e.trim():""}setTemporaryInputData(e){const t=Oo.Z.state;if(!t.open)return;if(!e)return void t.temporaryInputData.setState(void 0);const{device:i}=this.environment,{title:a,icon:n,allowTabCompletion:o}=e,s=this.filterStore.state||"",r=a.toLowerCase().startsWith(s)?a.slice(s.length):"";this.tabCompletionString=o?r:void 0;const l=i.isFirefox?void 0:n;t.temporaryInputData.setState({prefix:t.insertionType,suffix:"[["===t.insertionType&&s.endsWith("]]")?"]]":"",completion:r,prefixIcon:l})}getCurrentMentionResults(e){const t=Oo.Z.state,i=t.userRequestStore.state.result||[],a=t.pageRequestStore.state.result||[],n=this.getDateResults(this.getNormalizedFilter()),o=this.getTemplateVariableResults(this.getNormalizedFilter()),s=t.mentionTypes.group?this.getGroupResults(this.getNormalizedFilter()):[];let r=a;const{result:l}=this.stores.localPageMentionRequestStore.state;if(l&&!l.error){const e=l.value.results,t=Ke.RM();r=t?Bo.oO({localResults:e,serverResults:a.map(((e,i)=>({...e,serverEventProperties:void 0,originalPosition:i,store:Et.G.createChildStore(t,{table:pi.iU,id:e.id})})))})||[]:e}let d;d=this.getNormalizedFilter()?r.map((e=>e.id)):Ua.X4.state.map((e=>e.pageId));const c=t.userRequestStore.state.ready&&t.pageRequestStore.state.ready;return c&&Do.default.measure(e,{environment:this.environment}),{userResults:i,groupResults:s,pageResults:d,dateResults:n,templateVariableResults:o,ready:c}}canCreatePage(){return!!Oo.Z.state.mentionTypes.createPage}isActionSheet(){const{device:e}=this.environment;return e.isMobileNative&&!e.isTablet}shouldCaptureBackspace(){return""===this.filterStore.state}getMenuInitialFocus(){if(""!==this.getNormalizedFilter())return 0}getMenuDesktopWidth(){return(0,ce.bq)()?400:330}}Xo.displayName="MentionMenu";const es=(0,P.injectIntl)(Xo);var ts=i(42239);class is extends c.Z{constructor(){super(...arguments),this.cancelDragTimeout=void 0,this.handleDragOver=e=>{e.preventDefault(),this.startDrag(e),this.continueDragThrottled(e)},this.handleDrop=e=>{e.preventDefault();const t=Array.from(e.dataTransfer.files);t.length>0&&h.createAndCommit({userAction:"NativeDragHandler.handleDrop",environment:this.environment,perform:e=>{ts._4({environment:this.environment,files:t,analyticsFrom:"native_drag",transaction:e})}})},this.startDrag=e=>{ts.f$(this.environment,{startX:e.clientX,startY:e.clientY,stores:[],isNativeDrag:!0,getGhostElement:void 0})&&Bi.ZH(this.environment)},this.continueDrag=e=>{this.cancelDragTimeout&&window.clearTimeout(this.cancelDragTimeout),this.cancelDragTimeout=window.setTimeout(this.cancelDrag,this.getCancelDragTimeoutMS()),ts.td(this.environment,{currentX:e.clientX,currentY:e.clientY})},this.continueDragThrottled=u.P2(this.continueDrag,is.dragOverThrottleMS),this.cancelDrag=()=>{ts.cQ(this.environment)}}didMount(){super.didMount(),window.addEventListener("dragover",this.handleDragOver),window.addEventListener("drop",this.handleDrop)}willUnmount(){super.willUnmount(),window.removeEventListener("dragover",this.handleDragOver),window.removeEventListener("drop",this.handleDrop)}getCancelDragTimeoutMS(){const{device:e}=this.environment;return e.isLinux?2e3:200}}is.displayName="NativeDragHandler",is.dragOverThrottleMS=62.5;const as=is;var ns=i(40902),os=i(44615),ss=i(65311),rs=i(19719),ls=i(2688),ds=i(12252),cs=i(76487);class us extends c.Z{constructor(){super(...arguments),this.lastEmitValue=-1,this.lastSentBadgeNumber=void 0,this.lastSentCurrentSpaceBadgeNumber=void 0,this.handleNotificationEmit=async(e,t)=>{if(t===this.lastEmitValue)return;if(this.lastEmitValue=t,!this.shouldFetchUserNotifications(String(t)))return;const i=await Xn.getUserNotifications(this.environment,{size:1e3});if("failed"===i.type)return;const{results:a}=i.data;cs.Z.setState({results:a}),this.syncInitialBadgeNumber();const n=u.G0.apply(null,a.map((e=>e.unreceived.notificationIds)));for(const o of n)this.displayNotification(o)},this.handleNotificationEmitThrottled=u.P2(this.handleNotificationEmit,1e3),this.handleNotificationEmitWhenActive=(e,t)=>{ds.Z.whenActive((()=>{this.handleNotificationEmitThrottled(e,t)}))},this.listenerReference=void 0,this.updateBadgeNumbers=()=>{const{mobileNative:e}=this.environment,{allSpaces:t,currentSpace:i}=this.getBadgeCounts();e&&(t===this.lastSentBadgeNumber&&i===this.lastSentCurrentSpaceBadgeNumber||e.setBadgeNumber(t,i),this.lastSentCurrentSpaceBadgeNumber=i),t!==this.lastSentBadgeNumber&&(t>0?na.setBadge(`${t}`):na.setBadge("")),this.lastSentBadgeNumber=t},this.syncInitialBadgeNumber=u.IH(this.updateBadgeNumbers)}willMount(){this.startMessageListeners(),cs.Z.addListener(this.updateBadgeNumbers),this.environment.mobileNative&&J.default.addListener(this.updateBadgeNumbers)}didUpdate(e){e.rootStore.userId!==this.props.rootStore.userId&&(this.stopMessageListeners(),this.startMessageListeners(),this.handleNotificationEmit("initializeListener",-1))}willUnmount(){this.stopMessageListeners(),cs.Z.removeListener(this.updateBadgeNumbers),this.environment.mobileNative&&J.default.removeListener(this.updateBadgeNumbers)}startMessageListeners(){const{currentUserStore:e}=J.default.state;if(e){const t=(0,os.Lp)(e.id);this.listenerReference=ls.Z.addListener(t,this.handleNotificationEmitWhenActive,void 0,this.environment)}}stopMessageListeners(){this.listenerReference&&ls.Z.removeListener(this.listenerReference,this.environment)}getBadgeCounts(){return{allSpaces:cs.Z.getTotalUnreadMentionsCount(),currentSpace:cs.Z.getUnreadCountForCurrentSpace().mentions}}async displayNotification(e){const t=(0,Et.Kv)(this.props.rootStore,{table:ss.uX,id:e});await t.load();const i=t.getValue();if(!i)return;const a=(0,Ce.No)(t,i.activity_id,i.space_id);await a.load();const n=a.getValue(),o=a.getModel(),{currentUserStore:s,currentSpaceViewStore:r}=J.default.state;if(s&&r&&n&&o&&!n.invalid&&!ns.BX(n,s.id)&&await na.isMainTabOrWindow()&&"undefined"!=typeof Notification){if(await r.load(),!r.isDefined())return;if(!o.isMentionType())return;if(!r.getNotifyDesktop())return;if(!this.environment.device.isDesktop)return;const e=(0,(await ue.deps.desktop.loader()).Notification)({activity:n,getRecordValue:t.getRecordValue,userTimeZone:(0,Co.r)(),intl:this.props.intl,pageVisitSource:vo.tY.PushNotification});if(!e)return;const{subject:i,body:s}=e,l=new Notification(i,{body:s,silent:!0}),d=ns.Fb(n.type),c={medium:"desktop_push",type:d,badge_number:this.getBadgeCounts().allSpaces,notification_id:t.id,activity_id:a.id},u=e=>rs.b2({environment:this.environment,args:c,action:e});u("sent"),l.addEventListener("show",(()=>u("shown"))),l.addEventListener("close",(()=>u("closed"))),l.addEventListener("click",(()=>{const e=ns.hY({activity:o,getRecordModel:t.getRecordModel,baseUrl:fi.default.domainBaseUrl,pageVisitSource:vo.tY.PushNotification}),i=(0,vo.k6)(e,[d,"desktop_push"],vo.tY.PushNotification);Ao.navigate({environment:this.environment,url:i}),u("clicked")}))}}shouldFetchUserNotifications(e){return 0===cs.Z.state.results.length||(!document.hasFocus()||!e.includes("unreadCount"))}}us.displayName="NotificationListener";const ms=(0,P.injectIntl)(us);var ps=i(35683),gs=i(56171),hs=i(58261);class fs extends c.Z{constructor(){super(...arguments),this.renderTooltip=()=>n()(H.Z,{capture:!0,onEnter:this.handleEnter,onCommandEnter:this.handleCommandEnter},void 0,o.createElement(o.Fragment,null,n()(P.FormattedMessage,{defaultMessage:"Open page",id:"pageMentionOverlay.openPage"}),n()("div",{},void 0,n()(hs.Z,{onlyShowFirst:!0,name:"enter",style:{color:this.theme.mediumInvertedTextColor}})))),this.handleEnter=e=>{const t=this.pageMentionTokenStore.state;if(!t)return;const{pageId:i,store:a}=t;if(!i)return;e.preventDefault&&e.preventDefault();const n=Et.G.createChildStore(a,{table:pi.iU,id:i});Ao.navigateToBlock({store:n,environment:this.environment,visitType:ps.vu.Link,pageVisitSource:vo.tY.MentionInPage})},this.handleCommandEnter=e=>{const t=this.pageMentionTokenStore.state;if(!t)return;const{pageId:i,store:a}=t;if(!i)return;e.preventDefault();const n=Et.G.createChildStore(a,{table:pi.iU,id:i});Ao.navigateToBlock({store:n,environment:this.environment,visitType:ps.vu.Link,openInNew:"tab",pageVisitSource:vo.tY.MentionInPage})},this.pageMentionTokenStore=this.createComputedStore((()=>{const e=M.default.state;if("editing"!==e.mode)return;const t=(0,S.QY)(e.multiSelection);if(!t)return;const{store:i,selection:a}=t;if(a.endIndex!==a.startIndex+1)return;const n=i.getValue(),o=m.b1T(n,a.startIndex);if(!o||!m.eOb(o))return;const[s]=m.jDe([o]);return{pageId:s,store:i}}))}renderComponent(){if(this.environment.device.isMobile)return;const e=gs.getSelectionRect(),t=this.pageMentionTokenStore.state;return n()(G.Z,{render:()=>{},renderTooltip:this.renderTooltip,originRect:e,forceVisibleState:Boolean(t&&e),placement:G.Z.Placement.Bottom})}}fs.displayName="PageMentionOverlay";const vs=fs;var ys=i(52989),Ss=i(69784);class bs extends c.Z{constructor(){super(...arguments),this.handleKey=e=>{Ss.Z.state.isActive&&(e.preventDefault(),ys.MZ({environment:this.environment,currentX:Ss.Z.state.currentX,currentY:Ss.Z.state.currentY,toggle:e.shiftKey}))},this.handleMouseMove=e=>{Ss.Z.state.isActive&&(e.preventDefault(),ys.MZ({environment:this.environment,currentX:e.clientX,currentY:e.clientY,toggle:e.shiftKey}))},this.handleMouseUp=e=>{Ss.Z.state.isActive&&((0,Ri.N9)(e)||e.preventDefault(),ys.qw(this.environment))}}willMount(){window.addEventListener("keydown",this.handleKey),window.addEventListener("keyup",this.handleKey),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp)}willUnmount(){window.removeEventListener("keydown",this.handleKey),window.removeEventListener("keyup",this.handleKey),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}renderComponent(){return null}}bs.displayName="RectangularSelectionListener";const Ms=bs;var ws=i(43008),Cs=i(98104),_s=i(64951);class ks extends c.Z{constructor(){super(...arguments),this.renderPopupContent=()=>n()(Is,{})}renderComponent(){const{device:e}=this.environment,{blockStore:t,originRect:i}=_s.Z.state;return n()(v.ZP,{popupType:e.isMobile?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:Boolean(t),originRect:i,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Center,originGap:4,onDismiss:()=>ws.x(this.environment),render:this.renderPopupContent})}}ks.displayName="RenameFileMenuPopup";class Ts extends c.Z{didMount(){const{blockStore:e}=_s.Z.state;if(!e)return;const t=e.getTitleStore();t&&Cs.mT({environment:this.environment,store:t,canSelectAllBlocks:!1})}renderComponent(){const{device:e}=this.environment,{blockStore:t}=_s.Z.state;if(!t)return;const i=t.getTitleStore();if(!i)return;let a;return a=e.isMobile?{menuType:y.og.ActionSheet}:{menuType:y.og.Popup,width:380},o.createElement(f.Z,a,n()("div",{style:this.getWrapStyle()},void 0,n()(gn.Z,{store:i,disabled:!t.canEdit(),onEsc:()=>ws.x(this.environment),onEnter:()=>ws.x(this.environment),disableSlashCommands:!0,disableEmojiCommands:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,placeholder:this.props.intl.formatMessage({defaultMessage:"Untitled",id:"renameFileMenuPopup.input.placeholder"}),style:this.getInputStyle(),pasteBehavior:"inline"})))}getWrapStyle(){return{display:"flex",alignItems:"center",color:this.theme.regularTextColor,fontSize:"13px",padding:"4px 8px"}}getInputStyle(){return{display:"flex",alignItems:"center",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:3,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,cursor:"text",position:"relative"}}}Ts.displayName="LocalizableRenameFileMenu";const Is=(0,P.injectIntl)(Ts),Ps=ks;var xs=i(52771),Zs=i(82187),Fs=i(31278);class As extends c.Z{constructor(){super(...arguments),this.renderPopupContent=()=>{const{renderDelete:e}=Zs.Z.state;return n()(Bs,{renderDelete:Boolean(e)})}}renderComponent(){const{device:e}=this.environment,{clonedBlockStore:t,originRect:i}=Zs.Z.state;return n()(v.ZP,{popupType:e.isMobile?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:Boolean(t),originRect:i,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Center,originGap:4,onDismiss:()=>xs.x(this.environment),render:this.renderPopupContent})}}As.displayName="RenamePageMenuPopup";class Es extends c.Z{constructor(){super(...arguments),this.handleRecordIconChange=e=>{const{clonedBlockStore:t}=Zs.Z.state;if(t){const i=t.getIconStore();i&&h.createAndCommit({userAction:"RenamePageMenuPopup.handleRecordIconChange",environment:this.environment,perform:t=>{ri.sO({store:i,value:e,transaction:t})}})}}}didMount(){const{clonedBlockStore:e}=Zs.Z.state;if(!e)return;const t=e.getTitleStore();t&&Cs.mT({environment:this.environment,store:t,canSelectAllBlocks:!1})}renderComponent(){const{device:e}=this.environment,{clonedBlockStore:t}=Zs.Z.state;if(!t)return;const i=t.getTitleStore();if(!i)return;const{renderDelete:a}=this.props;let s;return s=e.isMobile?{menuType:y.og.ActionSheet}:{menuType:y.og.Popup,width:380},o.createElement(f.Z,s,n()("div",{style:this.getWrapStyle()},void 0,this.renderIcon(t),n()(gn.Z,{store:i,disabled:!t.canEdit(),onEsc:()=>xs.x(this.environment),onEnter:()=>xs.x(this.environment),disableSlashCommands:!0,disableEmojiCommands:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,placeholder:this.renderEmptyTitlePlaceholder(),style:this.getInputStyle(),pasteBehavior:"inline"}),a&&t.canEdit()&&this.renderDeleteButton()))}renderDeleteButton(){return n()(Pn.Z,{icon:e=>(0,at.y)({height:20,width:20,...e}),style:{marginLeft:6},hasBackground:!0,isDarkIconColor:!0,showShadow:!0,onClick:async()=>{const{originalBlockStore:e}=Zs.Z.state;e&&await Ei.Qw({environment:this.environment,blocks:[e]}),xs.x(this.environment)}})}renderIcon(e){const t={width:28,height:28,marginRight:6,flexShrink:0,flexGrow:0,boxShadow:`inset 0 0 0 1px ${this.theme.darkDividerColor}`};if(e.canEdit()){var i,a;const o=null===(i=e.getIconStore())||void 0===i?void 0:i.table;return n()(Fs.Z,{disabled:!1,bucket:"secure",store:e,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:18,style:t,iconLoggingData:{recordTable:o,source:"breadcrumb",block_type:e.getType(),collection_id:"collection"===o?null===(a=e.getIconStore())||void 0===a?void 0:a.id:void 0},onChange:this.handleRecordIconChange})}return n()(Fs.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:18,style:t})}renderEmptyTitlePlaceholder(){const{clonedBlockStore:e}=Zs.Z.state,{intl:t}=this.props;if(null!=e&&e.isDefined())return e.getModel().getEmptyTitlePlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,Co.r)(),intl:t})}getWrapStyle(){return{display:"flex",alignItems:"center",color:this.theme.regularTextColor,fontSize:"13px",padding:"4px 8px"}}getInputStyle(){return{display:"block",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:3,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,cursor:"text",position:"relative"}}}Es.displayName="LocalizableRenamePageMenu";const Bs=(0,P.injectIntl)(Es),Rs=As;var Ds=i(4083),Ls=i(13264);class Ns extends c.Z{constructor(){super(...arguments),this.renderDiscussion=()=>{const{device:e}=this.environment;if(Ls.Z.state.open){const{discussionStore:t,discussionInputStore:i,blockStore:a,discussionLocation:s}=Ls.Z.state;let r;return r=e.isMobile?{menuType:y.og.Modal,title:n()(P.FormattedMessage,{defaultMessage:"Comments",id:"discussion.mobileReplyMenu.title"}),right:n()(P.FormattedMessage,{defaultMessage:"Close",id:"discussion.mobileReplyMenu.closeButton.label"}),onClickRight:()=>Ds.UZ(this.environment),whiteBackground:!0}:{menuType:y.og.Popup,width:420,maxWidth:e.isMobileBrowser?"80vw":"100%"},o.createElement(f.Z,d()({className:Kt.LoZ},r),n()(Te.Z,{capture:!0,allowMobileAutoScroll:!0,render:()=>n()(ue.LazyDiscussion,{store:t,discussionInputStore:i,onDismiss:()=>Ds.UZ(this.environment),format:we.O2.Menu,isFirst:!0,isOnly:!0,discussionLocation:s,showResolveButtonByDefaultIfPossible:!0,blockStore:a})}))}}}renderComponent(){const{device:e}=this.environment,{open:t,rect:i}=Ls.Z.state;return n()(v.ZP,{popupType:e.isMobile?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:t,originRect:i,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Center,originGap:4,onDismiss:()=>Ds.UZ(this.environment),render:this.renderDiscussion})}}Ns.displayName="ReplyDiscussionMenu";const Os=Ns;var Vs=i(42853);const Us=(0,ki.I)("code",{viewBox:"0 0 30 30",svg:n()("path",{d:"M11.625,4L0,15l11.625,11L13,24.563L2.906,15L13,5.438L11.625,4z M18.375,4L17,5.438L27.094,15L17,24.563L18.375,26L30,15L18.375,4z"})});var Ws=i(69634),zs=i(22962),Ks=i(6287),Hs=i(80503),Gs=i(11732),qs=i(56863),js=i(92022),Ys=i(82343),$s=i(12921),Qs=i(40959),Js=i(87078),Xs=i(45162),er=i(67669),tr=i(15723),ir=i(45214),ar=i(17903),nr=i(4548),or=i(42057),sr=i(49557),rr=i(4935),lr=i(99757),dr=i(13966),cr=i(64131),ur=i(82945),mr=i(40464),pr=i(32404),gr=i(73383);class hr extends c.Z{constructor(){super(...arguments),this.mouseIsDownExternally=!1,this.lastRenderState=void 0,this.completionContextOnOpen=void 0,this.renderOverlay=()=>{const{isActive:e}=sr.Z.state;return n()(Oi.Z,{isVisible:e,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},exitAnimationStyle:{opacity:0},springConfig:{opacity:{stiffness:100,damping:10,precision:1e-4}},render:this.renderAnimated,onAnimationEnd:this.handleAnimationEnd})},this.renderAnimated=()=>{const{top:e,left:t}=sr.Z.state,i=this.canOnlyDiscussStore.state,a=Math.max(i?t:t-hr.leftOffset,0),s=i?"12px 0":12;return n()("div",{className:Kt.Qcf,style:{pointerEvents:"none",position:"absolute",top:e,left:0,display:"flex",width:"100%"}},void 0,n()("div",{style:{flexShrink:1,width:a,minWidth:24}}),(0,Di.Z)((e=>o.createElement("div",d()({style:{pointerEvents:"none",padding:s}},e),this.lastRenderState&&this.renderMenu(this.lastRenderState)))),n()("div",{style:{flexGrow:1,flexShrink:1,minWidth:36}}))},this.updateRichTextState=()=>{const e=sr.Z.state;if(_a.Z.state.open||rr.Z.state.open)return;if(lr.n.state)return qs.w();const t=M.default.state;if("empty"===t.mode)return qs.w();const i=(0,Xs.L5)(t.multiSelection);if(0===i.length)return qs.w();if(!i.every((e=>{let{store:t}=e;return t.table===pi.iU||t.table===ji.x_||t.table===Ks.v})))return qs.w();if(!this.environment.currentUser.isLoggedIn()||!i.every((e=>{let{store:t}=e;return t.canComment()})))return;const a=gs.get();if(Ke.JE())return qs.w();if(i.some((e=>{let{editable:t}=e;return t.props.disableAnnotation})))return qs.w();if(i.some((e=>{let{editable:t}=e;return t.props.disabled})))return qs.w();const n=i.map((e=>{let{editable:t}=e;return t.getContextClosestSelectableStore()}));if(n.some(((e,t)=>e&&i[t].store.table!==ji.x_&&(e.isLocked()||e.isNavigableAncestorLocked()))))return qs.w();if(this.mouseIsDownExternally&&e.blockTarget!==n[0])return qs.w();const o=i.some((e=>{let{store:t}=e;const i=t.getRecordStoreAtRootPath();if(!(i instanceof Et.G))return!1;const a=i.getValue();return!!a&&hr.richTextMenuBlockTypesDenylist[a.type]}));if(o)return qs.w();const s=a?gs.getRect(a):void 0;if(s&&!tr.kK(s,(0,Js.Z)()))return qs.w();if(Zs.Z.isActive()||_s.Z.isActive()||ea.Z.isOpen()||o||!a||!this.hasNonCollapsedTextSelection()||ir.Z.state.open)return qs.w();let r=0,l=0;if(s){r=s.left;const e=25,t=s.top-hr.height-e,i=Hs.R6(this.environment.device.isElectronMac),a=this.environment.WindowSizeStore.state.height-hr.height-e;l=Math.min(Math.max(t,i),a)}0===Math.abs(sr.Z.state.top-l)&&Math.abs(sr.Z.state.left-r)<10&&(l=sr.Z.state.top,r=sr.Z.state.left),sr.Z.setState({...sr.Z.state,isActive:!0,isAnimatingClosed:!1,top:l,left:r,blockTarget:Bt.default.state.stores[0]})},this.updateRichTextStateThrottled=u.P2(this.updateRichTextState,200,{leading:!1}),this.handleAnimationEnd=()=>{sr.Z.state.isActive||sr.Z.setState({...sr.Z.state,isAnimatingClosed:!1}),this.lastRenderState=this.renderStateStore.state},this.renderStateStore=this.createComputedStore((()=>{const{isActive:e,blockTarget:t}=sr.Z.state,i=M.default.state;if(!e||"empty"===i.mode)return;const{multiSelection:a}=i,n=(0,S.qS)(a),o=M.default.isEditingComment(),s=M.default.isEditingCaption(),r=t&&t.getParentTable()===Ks.v,l=n&&t&&a.start.store===t.getCollectionViewSourceDescriptionStore(),d=this.pageContext&&this.pageContext.publicEditModeStore.state,c=!(0,er.YF)(d)&&(a.start.store.canEdit()&&a.end.store.canEdit()),u=t&&t.getType(),m=u&&hr.richTextMenuActionsDenylist[u],p=null==t?void 0:t.isType("button"),g=(0,Ys.td)(a.start.store)||(0,Ys.td)(a.end.store),h={isSingleStoreSelection:n,showTurnInto:Boolean(n&&!o&&!r&&!l&&!s&&t&&c&&!p&&!yi.default.isMiniPeekOpen()),showBold:Boolean(c),showItalic:Boolean(c),showStrikethrough:Boolean(c),showUnderline:Boolean(c),showCode:Boolean(c),showLink:Boolean(n&&c),showHighlight:Boolean(c),showDiscuss:Boolean(!o&&t&&!r&&!l&&!g&&!yi.default.isMiniPeekOpen()),showEquation:Boolean(n&&c),showMention:Boolean(n&&!o&&t&&!r&&c),showActionButton:Boolean(n&&!o&&!s&&t&&!r&&!yi.default.isMiniPeekOpen()),blockTarget:t,isComment:o,showCompletions:Boolean((0,$s.GD)(this.environment,d)&&c&&!o&&!s&&t&&!r&&!l&&!p&&!g)};if(m&&m.size>0)for(const f of m)h[f]=!1;return h})),this.canOnlyDiscussStore=this.createComputedStore((()=>{const e=this.renderStateStore.state;return e&&e.showDiscuss&&!e.showBold}))}didMount(){Bt.default.addListener(this.updateRichTextStateThrottled),M.default.addListener(this.updateRichTextStateThrottled),ar.Z.addListener(this.updateRichTextState),or.Z.addListener(this.updateRichTextState),nr.Z.addListener(this.updateRichTextState)}willUnmount(){M.default.removeListener(this.updateRichTextStateThrottled),Bt.default.removeListener(this.updateRichTextStateThrottled),ar.Z.removeListener(this.updateRichTextState),or.Z.removeListener(this.updateRichTextState),nr.Z.removeListener(this.updateRichTextState)}willMountOrUpdate(){const e=this.renderStateStore.state;e&&(this.lastRenderState=e)}renderComponent(){const{isActive:e,isAnimatingClosed:t}=sr.Z.state;return n()(Ui.Z,{open:e||t},void 0,this.renderOverlay())}renderMenu(e){const{isActive:t}=sr.Z.state;return n()("div",{style:{display:"inline-flex",alignItems:"stretch",height:hr.height,background:this.theme.popoverBackground,overflow:"hidden",fontSize:14,lineHeight:1.2,borderRadius:5,boxShadow:this.theme.mediumBoxShadow,pointerEvents:t?"auto":"none"},onMouseDown:e=>e.preventDefault()},void 0,e.showCompletions&&this.renderCompletionsButton(),e.showTurnInto&&e.blockTarget&&this.renderTurnInto(e.blockTarget),e.showLink&&this.renderLinkButton(!0),e.showDiscuss&&e.blockTarget&&this.renderCommentButton(e.blockTarget),n()("div",{style:{display:"flex"}},void 0,e.showBold&&this.renderBoldButton(),e.showItalic&&this.renderItalicButton(),e.showUnderline&&this.renderUnderlineButton(),e.showStrikethrough&&this.renderStrikethroughButton(),e.showCode&&this.renderCodeButton(),e.showEquation&&this.renderEquationButton()),e.showHighlight&&n()(cr.Z,{style:this.getBorderRight()}),e.showMention&&this.renderMention(),e.showActionButton&&e.blockTarget&&this.renderActionButton(e.blockTarget))}renderTurnInto(e){let t=n()(P.FormattedMessage,{defaultMessage:"Turn into",id:"richTextMenu.turnIntoButton.label"});const{intl:i}=this.props,a=e.getType();if(a){const e=Qs.Hc[a];t=e&&e.displayName||t}return n()(z.ZP,{popupType:z.Z4.Popup,buttonPopupStore:rr.Z,originGap:4,renderOrigin:e=>n()(G.Z,{renderTooltip:()=>i.formatMessage({defaultMessage:"Turn into",id:"richTextMenu.turnIntoButton.tooltip"}),render:i=>o.createElement(W.Z,d()({style:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap",...this.getBorderRight()}},(0,q.Z)(e,i)),t,(0,Vs.i)({width:10,marginLeft:4,fill:this.theme.lightIconColor}))}),render:()=>n()(f.Z,{menuType:y.og.Popup},void 0,n()(Lt.Z,{context:{blocks:[e],environment:this.environment,publicEditMode:void 0},sections:[Gs.g],onAccept:t=>{const i=e.getType(),a=e.getFormat();qs.w(),p.dhV(this.environment,{analyticsName:t.analyticsName,from:"rich_text_menu",block_id:e.id,block_type:i,is_toggleable:i?(0,qe._A)(i,a):void 0})}})),onClick:()=>{p.mt_(this.environment,{action:"turn_into"})}})}renderBoldButton(){return n()(mr.Z,{type:"b",tooltipLabel:n()(o.Fragment,{},void 0,n()("div",{},void 0,n()(P.FormattedMessage,{defaultMessage:"Bold",id:"richTextMenu.boldButton.tooltip"})),n()("div",{},void 0,n()(hs.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleBold"})))},void 0,n()("span",{style:{fontWeight:zo.Z.fontWeight.semibold}},void 0,"B"))}renderItalicButton(){return n()(mr.Z,{type:"i",tooltipLabel:n()(o.Fragment,{},void 0,n()("div",{},void 0,n()(P.FormattedMessage,{defaultMessage:"Italicize",id:"richTextMenu.italicsButton.tooltip"})),n()("div",{},void 0,n()(hs.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleItalics"})))},void 0,n()("span",{style:{fontStyle:"italic"}},void 0,"i"))}renderStrikethroughButton(){return n()(mr.Z,{type:"s",tooltipLabel:n()(o.Fragment,{},void 0,n()("div",{},void 0,n()(P.FormattedMessage,{defaultMessage:"Strike-through",id:"richTextMenu.strikeThroughButton.tooltip"})),n()("div",{},void 0,n()(hs.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleStrike"})))},void 0,n()("span",{style:{textDecoration:"line-through"}},void 0,"S"))}renderUnderlineButton(){return n()(mr.Z,{type:"_",tooltipLabel:n()(o.Fragment,{},void 0,n()("div",{},void 0,n()(P.FormattedMessage,{defaultMessage:"Underline",id:"richTextMenu.underlineButton.tooltip"})),n()("div",{},void 0,n()(hs.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleUnderline"})))},void 0,n()("span",{style:{textDecoration:"underline"}},void 0,"U"))}renderCodeButton(){return n()(mr.Z,{type:"c",style:{padding:"0 6px"},tooltipLabel:n()(o.Fragment,{},void 0,n()("div",{},void 0,n()(P.FormattedMessage,{defaultMessage:"Mark as code",id:"richTextMenu.markAsCodeButton.tooltip"})),n()("div",{},void 0,n()(hs.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleCode"})))},void 0,Us({width:15,height:15}))}renderLinkButton(e){const t=this.environment.device.isMobile;return n()(gr.Z,{style:this.getBorderRight()},void 0,e&&(0,_o.J)({width:t?18:16,height:t?18:16,marginRight:4,fill:this.theme.regularIconColor}),n()("span",{style:{borderBottom:`1px solid ${this.theme.linkDecorationColor}`}},void 0,n()(P.FormattedMessage,{defaultMessage:"Link",id:"richTextMenu.linkButton.tooltip"})))}renderCompletionsButton(){const{intl:e}=this.props;return n()(G.Z,{renderTooltip:()=>o.createElement(o.Fragment,null,n()("div",{},void 0,e.formatMessage({defaultMessage:"Ask AI to help edit, review, or generate text.",id:"richTextMenu.assist.tooltip"})),n()("div",{},void 0,n()(hs.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"commandJ"}))),render:e=>o.createElement(W.Z,d()({style:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap",...this.getBorderRight()}},e,{onClick:()=>{(0,js.hr)({from:"rich_text_menu",environment:this.environment}),p.mt_(this.environment,{action:"completions"})}}),(0,sn.t)({width:16,height:16,fill:_.FN.light.purple[400],marginRight:4}),n()("span",{style:{color:_.FN.light.purple[400],fontWeight:500}},void 0,n()(P.FormattedMessage,{defaultMessage:"Ask AI",id:"richTextMenu.assistButton.label"})))})}renderEquationButton(){return n()(pr.Z,{style:this.getBorderRight(),onClick:()=>{p.mt_(this.environment,{action:"e"}),qs.w()}},void 0,(0,Ws.G)({width:16,height:16}))}renderMention(){return n()(G.Z,{renderTooltip:()=>n()(o.Fragment,{},void 0,n()("div",{},void 0,n()(P.FormattedMessage,{defaultMessage:"Mention a person,{br}page, or date",id:"richTextMenu.mentionButton.tooltip",values:{br:n()("br",{})}})),n()("div",{style:{color:this.theme.mediumInvertedTextColor}},void 0,"@")),render:e=>o.createElement(W.Z,d()({style:{...this.getBorderRight(),padding:"0 8px"}},e,{onClick:()=>{Fo.lZ(this.environment,{page:!0,createPage:!0,user:!0,bot:!0,date:!0,reminder:!0,templateVariable:!0,group:!0}),p.mt_(this.environment,{action:"mention"})}}),(0,zs.O)({width:14,fill:this.theme.regularTextColor}))})}renderCommentButton(e){return n()(ur.Z,{style:this.getBorderRight(),blockStore:e})}renderActionButton(e){return n()(dr.Z,{store:e,style:{borderRight:"none",borderRadius:0,padding:0,width:30,height:"none"},iconStyle:{fill:this.theme.regularTextColor},fadeIn:!1,onClick:()=>{p.mt_(this.environment,{action:"more"})}})}hasNonCollapsedTextSelection(){const e=gs.get();return!!e&&!e.collapsed&&"empty"!==M.default.state.mode&&!(0,S.iG)(M.default.state.multiSelection)}getBorderRight(){return{boxShadow:`1px 0 0 ${this.theme.regularDividerColor}`,marginRight:1}}}hr.displayName="RichTextMenu",hr.richTextMenuBlockTypesDenylist={[Me.Ti.factory]:!0},hr.richTextMenuActionsDenylist={[Me.Ti.code]:new Set(["showMention","showCode","showCompletions"]),[Me.Ti.table]:new Set(["showTurnInto","showActionButton","showCompletions"]),[Me.Ti.tableRow]:new Set(["showTurnInto","showActionButton","showCompletions"])},hr.leftOffset=60,hr.height=32;const fr=(0,P.injectIntl)(hr);i(21703);var vr=i(1302),yr=i(14248),Sr=i(14714),br=i(93959),Mr=i(78316),wr=i(79954),Cr=i(55367),_r=i(12211),kr=i(50628);const Tr=200;var Ir=function(e){return e[e.Selectable=0]="Selectable",e[e.DropTarget=1]="DropTarget",e}(Ir||{});function Pr(e){return e.type===Ir.Selectable?{type:Cr.Dl.Selectable,store:e.target.props.store,direction:e.direction}:{type:Cr.Dl.DropTarget,key:e.target.props.dropTargetKey,direction:e.direction}}function xr(e){const{target:t,device:i,direction:a,points:n}=e;return a===Cr.vh.Onto||!i.isPhone||t.props.dropzoneShouldNeverUseOrigin?n.mousePoint:{x:n.originPoint.x,y:n.mousePoint.y}}function Zr(e){return e instanceof wr.Z?{type:Ir.Selectable,target:e}:{type:Ir.DropTarget,target:e}}function Fr(e){if(!(e&&e instanceof wr.Z))return!1;let t=e;const i=Cr.ZP.state;if(!i.isDragging)return!1;const{draggedStores:a}=i;for(;t;){if(a.indexOf(t.props.store)>=0)return!0;t=t.getContextClosestSelectable()}return!1}function Ar(e){const{dropzoneMustBeWithinHorizontalBound:t,device:i}=e;return t?0:i.isPhone?9999:0}function Er(e){switch(e.direction){case Cr.vh.Onto:return function(e){const{device:t,isNativeDrag:i,rect:a,target:n,points:o,priority:s,canAcceptDrop:r}=e,l=Cr.vh.Onto,d=xr({device:t,target:n,direction:l,points:o});if((i?n.props.canNativeDropOnto:n.props.canDropOnto)&&Rr(d,a)&&!Fr(n)&&r(n,l))return{...Zr(n),direction:l,left:a.left,top:a.top,width:a.width,height:a.height,priority:s}}(e);case Cr.vh.Left:return function(e){const{device:t,isNativeDrag:i,rect:a,target:n,points:o,priority:s,optionKeyDown:r,canAcceptDrop:l}=e,d=Cr.vh.Left,c=xr({device:t,target:n,direction:d,points:o});if((i?n.props.canNativeDropLeft:n.props.canDropLeft)&&a&&c.y>=a.top&&c.y<=a.bottom&&Math.abs(c.x-a.left)<=200&&(r||!Fr(n))&&l(n,d))return{...Zr(n),direction:d,left:a.left,top:a.top,width:0,height:a.height,priority:s}}(e);case Cr.vh.Right:return function(e){const{device:t,isNativeDrag:i,rect:a,target:n,points:o,priority:s,optionKeyDown:r,canAcceptDrop:l}=e,d=Cr.vh.Right,c=xr({device:t,target:n,direction:d,points:o});if((i?n.props.canNativeDropRight:n.props.canDropRight)&&a&&c.y>=a.top&&c.y<=a.bottom&&Math.abs(c.x-a.right)<=Tr&&(r||!Fr(n))&&l(n,d))return{...Zr(n),direction:d,left:a.right,top:a.top,width:0,height:a.height,priority:s}}(e);case Cr.vh.Above:return function(e){const{device:t,isNativeDrag:i,rect:a,target:n,points:o,priority:s,optionKeyDown:r,canAcceptDrop:l}=e,d=Ar({dropzoneMustBeWithinHorizontalBound:n.props.dropzoneMustBeWithinHorizontalBound,device:t}),c=Cr.vh.Above,u=xr({device:t,target:n,direction:c,points:o});if((i?n.props.canNativeDropAbove:n.props.canDropAbove)&&a&&u.x>=a.left-14-d&&u.x<=a.right+d&&(r||!Fr(n))&&l(n,c))return{...Zr(n),direction:c,left:a.left,top:a.top,width:a.width,height:0,priority:s}}(e);case Cr.vh.Below:return function(e){const{device:t,isNativeDrag:i,rect:a,target:n,points:o,priority:s,optionKeyDown:r,canAcceptDrop:l}=e,d=Ar({dropzoneMustBeWithinHorizontalBound:n.props.dropzoneMustBeWithinHorizontalBound,device:t}),c=Cr.vh.Below,u=xr({device:t,target:n,direction:c,points:o});if((i?n.props.canNativeDropBelow:n.props.canDropBelow)&&a&&u.x>=a.left-14-d&&u.x<=a.right+d&&(r||!Fr(n))&&l(n,Cr.vh.Below))return{...Zr(n),direction:Cr.vh.Below,left:a.left,top:a.bottom,width:a.width,height:0,priority:s}}(e)}}function Br(e){const{device:t,rect:i,target:a,points:n,optionKeyDown:o}=e;return Rr(xr({device:t,target:a,direction:Cr.vh.Onto,points:n}),i)&&Fr(a)&&!o}function Rr(e,t){return Boolean(t&&e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)}var Dr=i(28314),Lr=i(75770),Nr=i(35026),Or=i(17031),Vr=i(27406),Ur=i(81844),Wr=i(16339),zr=i(95802),Kr=i(91681),Hr=i(86486);class Gr extends c.Z{constructor(){super(...arguments),this.isUpdatingDragState=!1,this.didTouchEnd=!1,this.lastMouseInfo=void 0,this.handleWindowMouseMove=e=>{const t=Hr.default.state;if(!e||t.isOpen&&t.menuIsOpen||(this.lastMouseInfo={target:e.target,x:e.clientX,y:e.clientY}),this.didTouchEnd)return void(this.didTouchEnd=!1);const{isDragging:i}=Cr.ZP.state;if(i)this.updateDragState();else{if(!this.lastMouseInfo)return;this.updateHoverState(this.lastMouseInfo.target,this.lastMouseInfo.x,this.lastMouseInfo.y)}},this.handleDragBlockStoreChange=()=>{this.isUpdatingDragState||this.handleWindowMouseMoveThrottled(void 0)},this.handleWindowMouseMoveThrottled=u.P2((e=>La.Z.withListenerIgnored((()=>this.handleWindowMouseMove(e)))),60),this.handleSelectionChange=()=>{const{isDragging:e}=Cr.ZP.state;vr.default.afterNextFlush((()=>{this.lastMouseInfo&&!e&&this.updateHoverState(this.lastMouseInfo.target,this.lastMouseInfo.x,this.lastMouseInfo.y)}))},this.handleSelectionChangeThrottled=u.P2(this.handleSelectionChange,60),this.handleWindowKeyEvent=()=>{const{isDragging:e}=Cr.ZP.state;e&&this.updateDragState()},this.handleWindowTouchEnd=()=>{this.didTouchEnd=!0},this.handleWindowScroll=()=>{Bi.Ch(),this.clearHoverState()},this.handleWindowResize=()=>{Bi.Ch(),this.clearHoverState()},this.handleGlobalMenuIsOpenChange=()=>{const e=Hr.default.state,t=Ke.kw.state;e.isOpen&&!e.menuIsOpen&&t&&Hr.default.reset()},this.memoizedCanDragCache=new WeakMap,this.memoizedCanDrag=e=>{const t=this.memoizedCanDragCache.get(e);if(this.memoizedCanDragCache.has(e))return t;const i=(0,st.OO)({environment:this.environment,blocks:e,publicEditMode:this.pageContext&&this.pageContext.publicEditModeStore.state});return this.memoizedCanDragCache.set(e,i),i},this.getDropZonePriority=e=>(null==e?void 0:e.priority)??0}didMount(){super.didMount();const{device:e}=this.environment;ca.lj(window,"mousemove",this.handleWindowMouseMoveThrottled),Bt.default.addListener(this.handleSelectionChangeThrottled),e.isIOS&&ca.lj(window,"touchend",this.handleWindowTouchEnd),ca.lj(window,"keydown",this.handleWindowKeyEvent),ca.lj(window,"keyup",this.handleWindowKeyEvent),Cr.ZP.addListener(this.handleDragBlockStoreChange),ca.lj(window,"scroll",this.handleWindowScroll,!0),ca.lj(window,"resize",this.handleWindowResize),Ke.kw.addListener(this.handleGlobalMenuIsOpenChange),Bi.Jy()}willUnmount(){super.willUnmount();const{device:e}=this.environment;ca.ZV(window,"mousemove",this.handleWindowMouseMoveThrottled),Bt.default.removeListener(this.handleSelectionChangeThrottled),e.isIOS&&ca.ZV(window,"touchend",this.handleWindowTouchEnd),ca.ZV(window,"keydown",this.handleWindowKeyEvent),ca.ZV(window,"keyup",this.handleWindowKeyEvent),Cr.ZP.removeListener(this.handleDragBlockStoreChange),ca.ZV(window,"scroll",this.handleWindowScroll,!0),ca.ZV(window,"resize",this.handleWindowResize),Ke.kw.removeListener(this.handleGlobalMenuIsOpenChange)}updateDragState(){if(this.isUpdatingDragState)throw new Error("Assertion failure, updateDragState() called when this.isUpdatingDragState === true!");this.isUpdatingDragState=!0;try{this.updateDragStateInner()}finally{this.isUpdatingDragState=!1}}updateDragStateInner(){const e=Cr.ZP.state;if(!e.isDragging)return;const{draggedStores:t,currentX:i,currentY:a,offsetX:n,offsetY:o,isNativeDrag:s}=e,r={x:i,y:a},l={x:i-n,y:a-o},d=this.findNearbyDropZones({mousePoint:r,originPoint:l},t[0],s);if(d.ontoDropZone)Cr.ZP.setState({...e,currentDropZone:d.ontoDropZone,currentHintDropZones:[],currentParentStore:void 0});else if(d.verticalDropZone)Cr.ZP.setState({...e,currentDropZone:d.verticalDropZone,currentHintDropZones:[],currentParentStore:void 0});else{if(d.horizontalDropZones.length>0){const t=d.horizontalDropZones[0],i=u.Gb(d.horizontalDropZones);if(t.type===Cr.Dl.Selectable){const a=zr.C.findSelectableFromStore(t.store);if(a){const n=a.getContextClosestSelectable();let o;return n&&n.props.store!==t.store&&n.props.shouldShowParentHalo&&(o=n.props.store),void Cr.ZP.setState({...e,currentDropZone:t,currentHintDropZones:i,currentParentStore:o})}}else{if(Vr.Z.findDropTargetFromKey(t.key))return void Cr.ZP.setState({...e,currentDropZone:t,currentHintDropZones:i,currentParentStore:void 0})}}Cr.ZP.setState({...e,currentDropZone:void 0,currentHintDropZones:[],currentParentStore:void 0})}}clearHoverState(){const e=Hr.default.state;e.isOpen&&!e.menuIsOpen&&Hr.default.reset()}updateHoverState(e,t,i){const a=Hr.default.state;if(!a.isOpen||!a.menuIsOpen){const n=this.findHoverMenuTarget(e,t,i);n?a.isOpen&&n.selectable.props.store===a.currentStore||Hr.default.setState({isOpen:!0,currentStore:n.selectable.props.store,container:n.container,menuIsOpen:!1}):Hr.default.reset()}}getHighestDropZonePriorityRects(e){const t=this.getDropZonePriority(u.UT(e,this.getDropZonePriority));return e.filter((e=>this.getDropZonePriority(e)===t))}getSelectableContainerPriority(e){return(Bt.default.state.droppableContainerStack||[]).indexOf(e)}findNearbyDropZones(e,t,i){const{device:a}=this.environment,n=Dr.yA(),o=function(){const{selectableRectMap:e}=kr.Z.state,{dropTargetRectMap:t}=_r.Z.state,i=new Map;return e.forEach(((e,t)=>{i.set(t,e)})),t.forEach(((e,t)=>{i.set(t,e)})),i}(),s=o.keys();let r=s.next();const l=zr.C.findSelectableFromStore(t),d=l?l.getContextSelectableContainer():void 0;let c=[];for(;!r.done;){const t=r.value;r=s.next();const l=o.get(t),m=t.getContextSelectableContainer();if(a.isPhone&&m!==d)continue;if(!m||m.props.disable)continue;const p=this.getSelectableContainerPriority(m),g={device:this.environment.device,isNativeDrag:i,rect:l,target:t,points:e,priority:p,optionKeyDown:n.option,canAcceptDrop:(e,t)=>this.selectableCanAcceptDrop(e,t,n.option)};if(Br(g))return{ontoDropZone:void 0,verticalDropZone:void 0,horizontalDropZones:[]};c.push(...u.oA([Er({...g,direction:Cr.vh.Onto}),Er({...g,direction:Cr.vh.Left}),Er({...g,direction:Cr.vh.Right}),Er({...g,direction:Cr.vh.Above}),Er({...g,direction:Cr.vh.Below})]))}c=this.getHighestDropZonePriorityRects(c);const m=c.filter((e=>e.direction===Cr.vh.Above||e.direction===Cr.vh.Below)),p=u.F(m,(t=>Math.abs(t.top-this.getReferencePointForRect(t,e).y)));let g=m.filter((e=>{let{top:t}=e;return Math.abs(t-(p?p.top:0))<=Gr.competingHorizontalDropZoneMinDist}));if(g.length>1){g=g.filter((t=>{const i=this.getReferencePointForRect(t,e).x,a=Ar({device:this.environment.device});return i>=t.left-a&&i<=t.left+t.width+a})),g=u.MR(g,(e=>{let{left:t}=e;return t}));let t=0;for(;t<g.length-1;t++){const i=g[t+1],a=this.getReferencePointForRect(i,e).x;if(i.left>a)break}g=g.slice(0,t+1),g.reverse()}const h=g.map(Pr);let f;const v=c.filter((e=>e.direction===Cr.vh.Onto)),y=u.F(v,(e=>e.height));if(y){m.some((t=>{const i=this.getReferencePointForRect(t,e).y;return Math.abs(t.top-i)<Gr.competingOntoDropZoneVerticalOffset}))||(f=Pr(y))}let S;const b=c.filter((e=>e.direction===Cr.vh.Left||e.direction===Cr.vh.Right));let M=u.F(b,(t=>{const i=this.getReferencePointForRect(t,e).x;return Math.abs(t.left-i)}));if(M){const e=M,t=b.filter((t=>Math.abs(t.left-e.left)<Gr.verticalDropZoneAmbiguousDist));t.length>0&&(M=u.F(t,(e=>e.left)))}if(M){const e=M;m.some((t=>t.top>=e.top&&t.top+t.height<=e.top+e.height))||(S=Pr(M))}return{ontoDropZone:f,verticalDropZone:S,horizontalDropZones:h}}findHoverMenuTarget(e,t,i){if(Kr.Z.state.isResizing||Cr.ZP.state.isDragging||Ss.Z.state.isActive||Ke.kw.state)return;const{selectableRectMap:a}=kr.Z.state,n=Wr.Z.getMembersByDOMOrder({filter:t=>{const i=t.getNode();return Boolean(i&&i.contains(e))}})[0],o=Bt.default.getCurrentDefaultContainer(),s=n||o;if(!s)return;const r=a.keys();let l=r.next();const d=[];for(;!l.done;){const e=l.value,n=a.get(e);(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu)&&e.getContextSelectableContainer()===s&&n&&i>=n.top&&i<=n.bottom&&t>=n.left-Gr.hoverMaxHorizontalOffset&&t<=n.right&&d.push(e),l=r.next()}const c=u.MR(d,(e=>{const t=a.get(e);return t?-t.left:1/0})),m=c.find((e=>{const t=e.getNode();if(t){if(c.find((i=>{if(i!==e){const e=i.getNode();return Boolean(e&&t.contains(e))}return!1})))return!1}return!0}));return m?{selectable:m,container:s}:void 0}selectableCanAcceptDrop(e,t,i){if(ge.Z.state.isOpen&&!yi.default.state.open)return!1;if(he.Z.state.isOpen)return!1;const a=Cr.ZP.state,n=a.isDragging?a.draggedStores:[],o=!!a.isDragging&&a.isNativeDrag;let s,r,l,d=!1,c=!1;n.find((e=>{const t=Ur.Z.findOutlinerItemFromStore(e);return!!t&&(s=t,r=t.type,d=t.isTopLevelItem,!0)}));const u=e instanceof wr.Z?Ur.Z.findOutlinerItemFromStore(e.props.store):void 0,m=null==u?void 0:u.parentStore;var p;u&&(l=u.type,c=u.isTopLevelItem||"team"===(null===(p=u.parentStore)||void 0===p?void 0:p.table));if(this.isDraggingSharedPageOutOfTopLevelTeamSection({draggingOutlinerItem:s,selectableOutlinerItemParent:m,direction:t}))return!1;if(!(e instanceof wr.Z))return e.props.canAcceptDrop({direction:t,draggingStores:n,isNativeDrag:o});const g=e.props.store,h=g.getAssociatedCollectionStore();if(t===Cr.vh.Onto&&h){const e=h.id,t=(0,Mr.fm)(g),i=null==t?void 0:t.collectionViewStore();if(i&&"page"!==i.getType()){if(n.find((t=>{const i=t.getAssociatedCollectionStore();return Boolean(t instanceof Et.G&&i&&i.id===e)})))return!1}}if(e.props.groupsPointer){if(e.props.groupsPointer.find((e=>!(0,yr.WL)(e)))){if(n.find((t=>{var i;const a=zr.C.findSelectableFromStore(t);return(null==a||null===(i=a.props)||void 0===i?void 0:i.groupsPointer)&&e.props.groupsPointer&&!(0,Sr.HH)(a.props.groupsPointer,e.props.groupsPointer)})))return!1}}if((0,Lr.ru)({targets:n,destination:g,direction:t,draggingOutlinerType:r}))return!1;if(i&&n.find((e=>e.isTypedCollectionViewBlock()||(0,br.h7)(e))))return!1;if(u&&t!==Cr.vh.Onto&&!c&&!(0,st.M)({environment:this.environment,blocks:[u.store],publicEditMode:this.pageContext&&this.pageContext.publicEditModeStore.state}))return!1;if(l&&o)return!1;if("bookmarks"===r&&d&&("bookmarks"!==l||!c||t===Cr.vh.Onto))return!1;if("bookmarks"===l&&c&&t!==Cr.vh.Onto&&("bookmarks"!==r||!d))return!1;if(s&&s.isTopLevelItem&&"team"===s.type&&s.parentStore&&s.parentStore.table===Re.e0){const e=s.parentStore,t=Et.zX.createChildStore(e,{...e.pointer,table:Re.e0});if(t&&!(0,Nr.si)({teamStore:t,environment:this.environment}))return!1}if(u&&u.isTopLevelItem&&"team"===u.type&&u.parentStore&&u.parentStore.table===Re.e0){const e=u.parentStore,t=Et.zX.createChildStore(e,{...e.pointer,table:Re.e0});if(t&&!(0,Nr.si)({teamStore:t,environment:this.environment}))return!1}if("shared"===l&&c&&("shared"!==r||!d))return!1;if(l&&c&&t!==Cr.vh.Onto){if(n.find((e=>{const t=e.getType();return Boolean(!t||!Me.Z7[t])})))return!1}const{device:f}=this.environment;if(l&&f.isMobile&&t===Cr.vh.Onto&&c)return!1;if(n.find((e=>Boolean(e instanceof Et.G&&e.isInlineCollectionView())))&&(t===Cr.vh.Left||t===Cr.vh.Right))return!1;if(n.some((e=>Boolean(Or.Z.findCollectionTemplatePickerItemFromStore(e))))!==Boolean(Or.Z.findCollectionTemplatePickerItemFromStore(g)))return!1;if(t===Cr.vh.Onto&&g&&!(0,st.J5)({environment:this.environment,blocks:[g],publicEditMode:this.pageContext&&this.pageContext.publicEditModeStore.state}))return!1;if(!this.memoizedCanDrag(n))return!1;if(n.some((e=>e.isTransclusionType()))){if(g.findRecordStoreUIAncestor((e=>{if(e===g)return!1;const t=e.isTable("block")&&e.isPath([])&&e.getValue();return Boolean(t&&(0,Me.nq)(t.type))})).ancestor)return!1}return!0}getReferencePointForRect(e,t){return xr({device:this.environment.device,target:e.target,points:t})}isDraggingSharedPageOutOfTopLevelTeamSection(e){var t;const{draggingOutlinerItem:i,selectableOutlinerItemParent:a,direction:n}=e;if(i&&"team"===i.type&&i.isTopLevelItem&&(null===(t=i.parentStore)||void 0===t?void 0:t.pointer.table)===Re.e0){const e=i.parentStore;if(!(i.store.getParentId()===e.pointer.id||a&&a.pointer.id===e.pointer.id&&n!==Cr.vh.Onto))return!0}return!1}}Gr.displayName="SelectableOrDropTargetListener",Gr.hoverMaxHorizontalOffset=150,Gr.competingOntoDropZoneVerticalOffset=7,Gr.verticalDropZoneAmbiguousDist=20,Gr.competingHorizontalDropZoneMinDist=2;const qr=Gr;var jr=i(74647),Yr=i(12534),$r=i(49427),Qr=i(7755);class Jr extends c.Z{constructor(){super(...arguments),this.cachedPageViewRect=void 0,this.previousMousePosition=void 0,this.mouseSpeed=1/0,this.timerId=void 0,this.setPreviousMousePosition=(e,t)=>{this.previousMousePosition={x:e,y:t},clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this.previousMousePosition=void 0}),100)},this.handleWindowMouseMove=e=>{(0,Yr.ZP)({event:e,context:Yr.Af.SidebarMouseMove,callback:()=>{if(this.updatePageViewRectThrottled(),void 0!==this.previousMousePosition&&(this.mouseSpeed=Math.sqrt(Math.pow(e.clientX-this.previousMousePosition.x,2)+Math.pow(e.clientY-this.previousMousePosition.y,2))),this.setPreviousMousePosition(e.clientX,e.clientY),this.cachedPageViewRect){const{sidebarMinTriggerWidth:t,sidebarOpenWidthPercent:i}=Jr,a=Qr.TC.state,n=(0,Se.Wk)(this.environment),o=e.clientX,s=this.cachedPageViewRect.left,r=Math.max(s*i,t,Qr.Ic.state);o<r&&!yi.default.isMiniOrCenterPeekOpen()&&this.mouseSpeed<Jr.mouseSpeedThreshold&&0!==this.mouseSpeed&&!a&&jr.open(),o>n&&o>r&&a&&jr.close()}}})},this.handleWindowMouseOut=e=>{e.toElement||e.relatedTarget||jr.close()},this.handleWindowResize=e=>{this.environment.WindowSizeStore.state.width<jr.OnlyOneSidebarVisibleWidthThreshold&&(0,Se.Sx)(this.environment)&&(0,Se.in)(this.environment)&&jr.setExpand({environment:this.environment,isExpanded:!1,from:"sidebar_listener"})},this.updatePageViewRectThrottled=u.P2(this.updatePageViewRect,500)}didMount(){window.addEventListener("mousemove",this.handleWindowMouseMove),window.addEventListener("mouseout",this.handleWindowMouseOut),window.addEventListener("resize",this.handleWindowResize)}willUnmount(){window.removeEventListener("mousemove",this.handleWindowMouseMove),window.removeEventListener("mouseout",this.handleWindowMouseOut),window.removeEventListener("resize",this.handleWindowResize)}updatePageViewRect(){const e=this.getPageViewWrapEl();this.cachedPageViewRect=e?e.getBoundingClientRect():document.body.getBoundingClientRect()}getPageViewWrapEl(){const{mainEditorCurrentBlockStore:e}=J.default.state,t=$r.Z.find((t=>t.props.store===e));if(t){const e=t.getContentWrapEl();if(e)return e}}}Jr.displayName="SidebarListener",Jr.sidebarOpenWidthPercent=.38,Jr.sidebarMinTriggerWidth=18,Jr.mouseSpeedThreshold=5;const Xr=Jr;var el=i(13991),tl=i(46225),il=i(15944),al=i(84084),nl=i(68204),ol=i(64286),sl=i(10743);class rl extends c.Z{constructor(){super(...arguments),this.renderMenu=()=>{const{device:e}=this.environment,t=sl.Z.state;if(!t.open)return;const i=this.getSections(t),a=this.getFilter(t);let s;return s=e.isMobileNative&&!e.isTablet?{menuType:y.og.ActionSheet}:{menuType:y.og.Popup,width:this.getWidth(),maxHeight:"40vh",onClickOutside:al.xv},o.createElement(f.Z,s,n()(Lt.Z,{sections:i,onAccept:this.handleAccept,context:{environment:this.environment,blocks:Bt.default.state.stores,originRect:t.selectionRect,publicEditMode:void 0},filter:a,initialFocus:0,onEmptyEnter:this.handleCancel,useLimit:!0}))},this.handleCancel=()=>{al.xv()},this.handleAccept=(e,t,i,a)=>{const n=Bt.default.state.stores[0];if(n){const t=n.getType(),i=n.getFormat();p.dhV(this.environment,{analyticsName:e.analyticsName,from:"slash_menu",block_id:n.id,block_type:t,is_toggleable:t?(0,qe._A)(t,i):void 0,slash_menu_filter_length:this.filterLength(),slash_menu_section:a})}h.createAndCommit({userAction:"SlashMenu.handleAccept",environment:this.environment,perform:e=>{al.RL({environment:this.environment,transaction:e})}})},this.filterLength=()=>{const e=sl.Z.state;return e.open?e.filter.length:0}}willMountOrUpdate(){let e=sl.Z.state;if(e.open){var t;const i=M.default.state;if("editing"!==i.mode)return!1;const a=this.getFilter(e),n=(0,nl.sG)({sections:this.getSections(e),context:{blocks:Bt.default.state.stores,environment:this.environment,publicEditMode:void 0},query:a||""});let o=0;if(a)if(0===n.length)o=a.length-e.lettersAtLastResult;else{const t={...e,lettersAtLastResult:(null==a?void 0:a.length)??0,filter:a};sl.Z.setState(t),e=t}const{currentUserSettingsStore:s}=J.default.state;!s||null!==(t=s.getSettings())&&void 0!==t&&t.pressed_slash_tooltip||!(0,ol.u)(this.environment)||il.q(this.environment);const{multiSelection:r}=i;(0,S.qS)(r)&&r.start.store===e.textStore&&!b.Ye(a,!0,n.length,o,e.textStore)||al.xv()}}renderComponent(){const{device:e}=this.environment,t=sl.Z.state;return n()(v.ZP,{popupType:e.isMobileNative&&!e.isTablet?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:t.open,originRect:t.open?t.selectionRect:void 0,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,preventBlockRenderQueueOnEnter:!0,onDismiss:this.handleCancel,render:this.renderMenu})}getFilter(e){return b.zK(e.textStore,e.oldTextValue,!e.isAddMenu)}getSections(e){const{insertActions:t,slashActions:i}=tl.w.state;return e.isAddMenu?t:i}getWidth(){return"fr-FR"===el.SP?375:324}}rl.displayName="SlashMenu";const ll=rl;var dl=i(84169),cl=i(1310),ul=i(9612),ml=i(84076);class pl extends c.Z{constructor(){super(...arguments),this.showingAnimatedList=N.default.createValue(!1),this.handleShow=()=>{this.showingAnimatedList.setState(!0)},this.handleHide=()=>{this.showingAnimatedList.setState(!1)}}renderComponent(){const{currentItem:e}=cl.ZP.state,t=Boolean(e||this.showingAnimatedList.state);return n()(Ui.Z,{open:t,zIndex:201},void 0,n()(ul.Z,{render:()=>u.oA([this.renderCurrentItem()]),onShow:this.handleShow,onHide:this.handleHide}))}renderCurrentItem(){const{currentItem:e}=cl.ZP.state;if(!e)return;const t=(null==e?void 0:e.position)??"bottom",{WindowSizeStore:i,device:a}=this.environment;let o=24;if(a.isMobileNative&&a.isIOS){o=Vo.Z.state.estimatedKeyboardWebViewOverlap>0?24+Vo.Z.estimatedNativeWebBottomOverlap():i.getSafePaddingBottomCSS(24+Vo.Z.estimatedNativeWebBottomOverlap())}const s="top"===t?{top:24}:{bottom:o};return n()(Oi.Z,{isVisible:!0,enterAnimationStyle:{translateY:"top"===t?-50:50,opacity:1,scale:1},animationStyle:{translateY:0,opacity:1,scale:1},exitAnimationStyle:{translateY:0,opacity:0,scale:.95},render:()=>n()("div",{"aria-live":"polite",style:{...s,position:"fixed",left:0,width:"100%",display:"flex",zIndex:Fi.E,padding:4}},void 0,n()("div",{style:{background:this.theme.tooltipBackground,color:this.theme.regularInvertedTextColor,borderRadius:8,padding:"11px 16px",boxShadow:this.theme.largeBoxShadow,margin:"0 auto",fontSize:14,display:"flex",alignItems:"center",...null==e?void 0:e.style}},void 0,e.label,e.helpUrl&&n()(ml.Z,{href:e.helpUrl,external:!0,style:{marginLeft:8,width:16,height:16,color:this.theme.regularInvertedTextColor}},void 0,(0,dl.m)({fill:this.theme.mediumInvertedTextColor})),n()("div",{style:{marginLeft:4,marginRight:-4}},void 0,e.right)))},e.key)}}pl.displayName="SnackbarRenderer";const gl=pl;var hl=i(6906),fl=i(76994),vl=i(65965),yl=i(47425),Sl=i(37834),bl=i(1865),Ml=i(83420),wl=i(52533),Cl=i(8323),_l=i(46096),kl=i(84787),Tl=i(50506),Il=i(76798),Pl=i(53336),xl=i(46247),Zl=i(26263),Fl=i(16691),Al=i(4615),El=i(45953),Bl=i(606),Rl=i(13493),Dl=i(66213),Ll=i(82136),Nl=i(81156);class Ol extends c.Z{constructor(){super(...arguments),this.handleOverrideLinkClick=e=>{Sl.U4(),Ao.navigate({environment:this.environment,url:e})},this.loadSnapshot=async e=>{const{timestamp:t}=e,i=e.block.id,a=await Xn.getSnapshotContents(this.environment,e);if("failed"===a.type)throw a.error;const n=El.PF.create(a.data.contentMap),o=this.environment.currentUser.id,s=new Zl.Z({name:"PageSnapshotPreview"});for(const{pointer:u,model:m}of n)m&&s.setModelAndRole({pointer:u,userId:o},m,"reader");s.snapshotData={blockId:i,timestamp:t};const r=new Map,l=e=>{const t=s.getRecord({pointer:e,userId:o}),i=(0,Fl.dn)(e);t||!(0,Al.e)(e.id)||r.has(i)||r.set(i,(0,Et.Kv)(this.props.blockStore,e))};for(const{model:p}of n)if(p)if(p.table===pi.iU){const e=p,t=e.getProperties(),i=Bl.dr.uniq(u.xH(Object.keys(t).map((e=>t[e])).map(m.cCA)));for(const d of i)l(d);const a=e.isNavigableBlock()?[]:e.getContentIds()||[];for(const d of a)l({table:pi.iU,id:d});const n=e.getCollectionPointer();n&&l(n);const o=u.jj(u.xH(Object.keys(t).map((e=>t[e])).map(m.lcG)));for(const d of o)l({table:$i.KJ,id:d});const s=p.getCreatedByPointer();s&&l(s);const r=p.getLastEditedByPointer();r&&l(r)}else if(p.table===Rl.n){var d;const e=null===(d=p.getFormat())||void 0===d?void 0:d.collection_pointer;e&&l(e)}else if(p.table===ji.x_){const e=p.getCreatedByPointer();e&&l(e)}const c=Array.from(r.values());return await Promise.all(c.map((async e=>{await e.load();const t=e.getValue();t&&s.setRecord({pointer:e.pointer,userId:o},{role:"reader",value:t})}))),{blockStore:new Et.G(this.environment,{table:pi.iU,id:i},{inMemoryRecordCache:s}),timestamp:t}}}getChildContext(){return{...this.context,overrideLinkClick:this.handleOverrideLinkClick}}renderComponent(){const e=this.props.blockStore.id,t=this.props.timestamp,i={request:{block:{id:e,spaceId:(0,Yi.C)(this.props.blockStore.pointer.spaceId)},timestamp:t},performRequest:this.loadSnapshot,render:(e,t,i)=>n()(pa.Z,{show:!i||!t,showDelay:400,showHold:400,render:i=>i?n()("div",{style:this.getSpinnerWrapperStyles()},void 0,n()(Vi.Z,{})):e?n()("div",{style:{padding:32}},void 0,n()(P.FormattedMessage,{defaultMessage:"Something went wrong.",id:"pageSnapshotPreview.unknownPreviewLoadError.message"})):t?n()(xe.Z,{store:t.blockStore,isDefaultContainer:!0,droppable:!0,render:e=>{let{selectableEvents:i}=e;return o.createElement(Pl.Z,d()({style:{background:this.theme.contentBackground,zIndex:1,flexGrow:1},type:(0,Ke.Zy)({environment:this.environment,store:t.blockStore})},i),n()(Nl.Z,{store:t.blockStore,disabled:!0,loadingContainerStore:void 0,context:Ll.S.InAppTemplatePreview,paddingBottom:Nl.Z.paddingBottom(this.environment),paddingLeft:(0,Ke.ui)(this.environment),paddingRight:(0,Ke.ui)(this.environment),pageCoverHeight:Nl.Z.defaultPageCoverHeight(this.environment)}))}},t.timestamp):void 0})};return n()(Dl.LF,{value:this.handleOverrideLinkClick},void 0,o.createElement(Cn.Z,i))}getSpinnerWrapperStyles(){return{padding:32,display:"flex",alignItems:"center",justifyContent:"center"}}}Ol.displayName="PageSnapshotPreview",Ol.contextTypes=c.w,Ol.childContextTypes={...Dl.wK,...c.w};const Vl=Ol;class Ul extends c.Z{constructor(){super(...arguments),this.renderSnapshotsListRequest=()=>{const{device:e}=this.environment,t=_l.Z.state;if(!t.open)return;const i={request:{block:{id:t.blockStore.id,spaceId:(0,Yi.C)(t.blockStore.pointer.spaceId)},size:t.size},performRequest:e=>this.loadSnapshotsList(e,t),render:(i,a,o)=>n()(pa.Z,{show:Boolean(!a||a.snapshots.length>=t.size&&t.openSnapshotNearTimestamp),showDelay:400,showHold:100,render:n=>e.isMobile?this.renderMobileHistory({snapshotValues:a?a.snapshots:[],menuState:t,error:i,initialLoading:n,loadingMore:!o}):this.renderDesktopHistory({snapshotValues:a?a.snapshots:[],menuState:t,error:i,initialLoading:n,loadingMore:!o})})};return o.createElement(Cn.Z,i)},this.renderMobileHistory=e=>{let t,i;return e.loadingMore||0!==e.snapshotValues.length||(t=this.renderUnavailableMessage(Ul.noSnapshotsMessage,!1)),i=e.error?n()("div",{style:Ul.wrapStyle},void 0,n()(P.FormattedMessage,{defaultMessage:"Something went wrong",id:"historyModal.errorMessage"})):e.initialLoading?n()("div",{style:Ul.wrapStyle},void 0,n()(Vi.Z,{})):n()(o.Fragment,{},void 0,n()(Pl.Z,{type:_e.Z.Y},void 0,this.renderSnapshotsMenuList(e)),this.renderMobileSnapshotPreview(e.menuState)),n()(f.Z,{menuType:y.og.Modal,title:n()(P.FormattedMessage,{defaultMessage:"History",id:"historyModal.mobileHistoryMenu.title"}),left:this.renderMobileHelpButton(),right:n()(Pe.DoneMenuText,{}),onClickRight:Sl.U4,header:t},void 0,i)},this.renderDesktopHistory=e=>{let t;if(e.error)t=n()("div",{style:Ul.wrapStyle},void 0,n()(P.FormattedMessage,{defaultMessage:"Something went wrong",id:"historyModal.desktopModal.errorMessage"}));else if(e.initialLoading)t=n()("div",{style:Ul.wrapStyle},void 0,n()(Vi.Z,{}));else{const i=e.menuState.snapshot&&this.getSnapshotUpsell({snapshot:e.menuState.snapshot,nextFutureSnapshot:e.menuState.nextFutureSnapshot});t=i?this.renderUnavailableMessage(i.message,i.tier):e.loadingMore||0!==e.snapshotValues.length?this.renderDesktopSnapshotPreview(e.menuState):this.renderUnavailableMessage(Ul.noSnapshotsMessage,!1)}return n()(o.Fragment,{},void 0,n()("div",{style:{display:"flex",flexDirection:"column",width:`calc(100% - ${Ul.sidebarWidth}px)`,boxShadow:`1px 0 0 ${this.theme.regularDividerColor}`}},void 0,t),this.renderDesktopSidebar(e))},this.renderSnapshotsMenuList=e=>{const{device:t}=this.environment,{menuState:i,loadingMore:a}=e,s=u.oA(e.snapshotValues.map(((a,s)=>{const r=s>0?e.snapshotValues[s-1]:void 0,l=this.getSnapshotUpsell({snapshot:a,nextFutureSnapshot:r}),c=!l;return{key:a.id,action:()=>{Sl.gs({environment:this.environment,snapshot:a,nextFutureSnapshot:r})},render:e=>{const s=a.authors||[],r=this.props.intl.formatList(u.oA(s.map((e=>(0,Ml.nc)({parentStore:i.blockStore,pointer:e}).getDisplayName(this.props.intl)))),{type:"conjunction",style:"narrow"}),m=n()("div",{style:{...zo.Z.textOverflowStyle}},void 0,r),p=Boolean(i.snapshot&&i.snapshot.id===a.id),g=parseInt(a.timestamp),h=g>Date.now()-6*gi.A0?(0,So.$b)(g,el.SP,this.props.intl):(0,So.Yx)(g,"medium",el.SP),f=(0,So.Yx)(g,"medium_with_time",el.SP);return n()(G.Z,c?{render:i=>o.createElement(Gt.Z,d()({},(0,q.Z)(e,i),{title:h,focused:!t.isMobile&&p,caption:m})),renderTooltip:()=>n()("div",{style:{maxWidth:270,whiteSpace:"normal"}},void 0,n()("div",{},void 0,f),n()("div",{},void 0,r))}:{render:i=>o.createElement(Gt.Z,d()({},(0,q.Z)(i,e),{title:n()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},void 0,n()("div",{style:{...t.isMobile&&{display:"flex",flex:1},...zo.Z.textOverflowStyle}},void 0,h),n()(kn.Z,{subscriptionTier:l.tier,analyticsName:"history_modal",desktopStyle:{marginLeft:8},onClick:()=>this.handleUpgrade(l.tier)})),focused:!t.isMobile&&p,caption:m})),renderTooltip:()=>n()(P.FormattedMessage,{defaultMessage:"Upgrade to view this snapshot.",id:"historyModal.snapshotsMenuList.upgrade.tooltip"}),disableTooltip:!yl.QM},e.key)}}}))),r=i.snapshot&&i.snapshot.id,l=s.findIndex((e=>r===e.key)),c=[{key:"snapshots",render:e=>o.createElement(A.Z,e),items:s}];return n()(o.Fragment,{},void 0,n()(Z.Z,{type:Z.i.Vertical,initialFocus:l,sections:c}),n()(kl.Z,{loading:a,fetchSize:i.size,resultSize:e.snapshotValues.length,onLoadMore:Sl.FF}),n()(pa.Z,{show:a,showDelay:300,showHold:100,render:e=>e&&n()("div",{style:Ul.wrapStyle},void 0,n()(Vi.Z,{}))}))},this.handleUpgrade=e=>{bl.y(this.environment,{from:"history_modal",for:e})},this.getAriaLabel=()=>this.props.intl.formatMessage({id:"historyModal.ariaLabel",defaultMessage:"Page History"}),this.loadSnapshotsList=async(e,t)=>{const{device:i}=this.environment,a=await Xn.getSnapshotsList(this.environment,e);if("failed"===a.type)throw a.error;const{snapshots:n}=a.data;if(t.pageHasCollection=n.some((e=>{var t;const i=null===(t=e.collection_ids)||void 0===t?void 0:t.length;return i&&0!==i})),t.openSnapshotNearTimestamp){const e=parseInt(t.openSnapshotNearTimestamp),i=n.findIndex((t=>parseInt(t.timestamp)<e));0===n.length||(0===i?Sl.gs({environment:this.environment,snapshot:n[i],nextFutureSnapshot:void 0}):i>0?Sl.gs({environment:this.environment,snapshot:n[i-1],nextFutureSnapshot:i>1?n[i-2]:void 0}):n.length<t.size?Sl.gs({environment:this.environment,snapshot:n[n.length-1],nextFutureSnapshot:n.length>1?n[n.length-2]:void 0}):Sl.FF())}else Boolean(t.snapshot)||i.isMobile||_l.Z.setState({...t,snapshot:n[0],nextFutureSnapshot:void 0});return a.data},this.iconSize=()=>{const{device:e}=this.environment;return e.isMobile?24:20}}renderComponent(){const{device:e}=this.environment,t=_l.Z.state;return e.isMobile?n()(v.ZP,{ariaLabel:this.getAriaLabel(),popupType:v.ZP.PopupType.SlideUp,open:t.open,render:this.renderSnapshotsListRequest,onDismiss:Sl.U4}):n()(Tl.Z,{ariaLabel:this.getAriaLabel(),open:t.open,innerStyle:{height:"80vh",width:"80vw",overflow:"hidden",display:"flex"},onDismiss:Sl.U4,render:this.renderSnapshotsListRequest,className:Kt.Nn$})}renderMobileSnapshotPreview(e){return n()(v.ZP,{popupType:v.ZP.PopupType.SlideUp,open:Boolean(e.snapshot),forceFullScreenSlideUp:!0,render:()=>{if(!e.snapshot)return;const t=this.getSnapshotUpsell({snapshot:e.snapshot,nextFutureSnapshot:e.nextFutureSnapshot}),i=!t,a=i?n()(Vl,{blockStore:e.blockStore,timestamp:e.snapshot.timestamp}):this.renderUnavailableMessage(t.message,t.tier);return n()(f.Z,{menuType:y.og.Modal,title:(0,So.$b)(parseInt(e.snapshot.timestamp),el.SP,B.default.getIntl()),right:n()(Pe.DoneMenuText,{}),onClickRight:Sl.zb,leftDisabled:!i,left:n()(P.FormattedMessage,{defaultMessage:"Restore",id:"historyModal.mobileSnapshotMenu.restoreButton.label"}),onClickLeft:()=>Sl.xx(this.environment),whiteBackground:i,forceFullScreenSlideUp:!0},void 0,a)}})}hasPermissionToRestore(e){return(0,st.k5)({environment:this.environment,blocks:[e.blockStore],originRect:void 0,publicEditMode:void 0})}renderDesktopSidebar(e){const{menuState:t}=e,i=Boolean(t.snapshot&&!this.getSnapshotUpsell({snapshot:t.snapshot,nextFutureSnapshot:t.nextFutureSnapshot})&&this.hasPermissionToRestore(t));return n()("div",{style:this.getSidebarStyle()},void 0,n()(Pl.Z,{type:_e.Z.Y,style:{flex:1}},void 0,this.renderSnapshotsMenuList(e)),n()("div",{style:{display:"flex",padding:14,borderTop:`\n\t\t\t\t\t\t\t1px solid ${this.theme.regularDividerColor}\n\t\t\t\t\t\t`}},void 0,n()(G.Z,{renderTooltip:()=>n()(P.FormattedMessage,{defaultMessage:"Upgrade to restore snapshots.",id:"historyModal.desktopModal.sidebar.upgradeMessage.tooltip"}),render:e=>o.createElement(yn.Z,d()({isLarge:!0,onClick:()=>Sl.xx(this.environment),disabled:!i},e),n()(P.FormattedMessage,{defaultMessage:"Restore version",id:"historyModal.desktopModal.restoreButton.label"}))}),n()(wn.Z,{isLarge:!0,style:{marginLeft:12},onClick:Sl.U4},void 0,n()(P.FormattedMessage,{defaultMessage:"Cancel",id:"historyModal.desktopModal.cancelButton.label"}))),n()(A.Z,{topBorder:!0,disableDesktopPadding:!0},void 0,n()(Nt.Z,{title:n()(P.FormattedMessage,{id:"historyModal.desktopModal.learnMoreButton.label",defaultMessage:"Learn about page history"}),href:(0,Ge.UY)("guides.pageHistory"),analyticsFrom:"page_history"})))}renderDesktopSnapshotPreview(e){if(e.snapshot)return n()(o.Fragment,{},void 0,n()("div",{style:{display:"flex",alignItems:"center",flexShrink:0,height:45,fontSize:14,paddingLeft:14}},void 0,e.blockStore.hasIcon()&&n()(Fs.Z,{disabled:!0,icon:e.blockStore.getIcon(),isEmptyPage:e.blockStore.isEmptyPage(),size:this.iconSize(),style:{marginRight:6}}),n()(Il.Z,{store:e.blockStore})),n()(Vl,{blockStore:e.blockStore,timestamp:e.snapshot.timestamp}))}deviceSupportsUpgrade(e){const{device:t}=this.environment;return!t.isMobile||"personal"===e&&(0,wl.S$)({environment:this.environment})}renderUnavailableMessage(e,t){const{device:i}=this.environment,a=Kn.default.state.data;let o=this.deviceSupportsUpgrade(t);const s=a&&Ln.GJ(a);return o&&(0,wl.S$)({environment:this.environment})&&"personal"===t&&!s&&(o=!1),n()("div",{style:this.getUnavailableMessageStyle()},void 0,this.deviceSupportsUpgrade(t)&&this.renderVersionHistoryIcon(),n()("div",{style:{...!i.isMobile&&{maxWidth:340}}},void 0,e),o&&t&&n()(yn.Z,{isLarge:!0,onClick:()=>this.handleUpgrade(t),style:{marginTop:16}},void 0,n()(P.FormattedMessage,{defaultMessage:"Upgrade",id:"historyModal.upgradeForHistoryButton.label"})))}renderVersionHistoryIcon(){return(0,fl.w)({width:64,height:"auto",fill:this.theme.lightIconColor,marginBottom:12})}renderMobileHelpButton(){return n()(xl.Z,{href:(0,Ge.UY)("guides.pageHistory"),analyticsFrom:"page_history"})}getSnapshotUpsell(e){var t;if(fi.default.isAdminMode)return;const{nextFutureSnapshot:i}=e;if(!i)return;const a=this.snapshotDaysOld(i);if((0,Cl.Aw)()&&a<=vl.hy.plus.days)return;const o=this.getTiersSupportingSnapshotAge(a);if((0,Cl.p4)(o))return;const s=o[0]??"enterprise";return(0,yl.QM)(s)?void 0:{tier:s,message:n()(P.FormattedMessage,{defaultMessage:"Please upgrade to the {upsellTier} Plan to access versions older than {snapshotLimitDays} days.",id:"historyModal.upsell.message",values:{upsellTier:(0,hl.Z)((0,yl.eR)(s)?"plus":s),snapshotLimitDays:(null===(t=this.getPlanBelow(s))||void 0===t?void 0:t.days)??Math.floor(a)}})}}getTiersSupportingSnapshotAge(e){return this.getAvailablePlansWithHistories().filter((t=>t.days>e)).map((e=>e.tier))}getPlanBelow(e){const t=this.getAvailablePlansWithHistories(),i=t.findIndex((t=>t.tier===e));if(!(i<=0))return t[i-1]}getAvailablePlansWithHistories(){return vl.sb.filter((e=>"personal"!==e.tier))}snapshotDaysOld(e){return(Date.now()-parseInt(e.timestamp))/gi.A0}getSidebarStyle(){return{display:"flex",flexDirection:"column",flexShrink:0,width:Ul.sidebarWidth}}getUnavailableMessageStyle(){const{device:e}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:28,padding:16,textAlign:"center",fontSize:14,...e.isMobile?{position:"relative",zIndex:1,background:this.theme.popoverBackground,boxShadow:`\n\t\t\t\t\t\t\t0 -1px 0 ${this.theme.regularDividerColor},\n\t\t\t\t\t\t\t0 1px 0 ${this.theme.regularDividerColor}\n\t\t\t\t\t\t`}:{height:"100%"}}}}Ul.displayName="HistoryModal",Ul.sidebarWidth=240,Ul.noSnapshotsMessage=n()(P.FormattedMessage,{defaultMessage:"This page does not have any snapshots yet. Allow up to 10 minutes for the first snapshot to be generated.",id:"historyModal.noSnapshotsYet.message"}),Ul.wrapStyle={display:"flex",justifyContent:"center",padding:32};const Wl=(0,P.injectIntl)(Ul);var zl=i(94507),Kl=i(61464);function Hl(){window.__c={n:"UserJoinedTeamsListener"};const e=(0,s.O7)(),{currentSpaceStore:t}=(0,r.Kw)(J.default),i=e.currentUser.id,a=(0,r.VK)((()=>null==t?void 0:t.id),[t]);return(0,o.useEffect)((()=>{if(!a||!i)return;const t=ls.Z.addListener((0,os.pD)({userId:i,spaceId:a}),(async(t,n)=>{(function(e){var t;let{spaceId:i,userId:a,emitValue:n}=e;const o=null===(t=Kl.Z.getUserJoinedTeamsState({userId:a,spaceId:i}))||void 0===t?void 0:t.lastEmitValue;if(o===n)return!1;if(void 0===o&&Kl.Z.getHasFetched({userId:a,spaceId:i}))return!1;return!0})({spaceId:a,userId:i,emitValue:n})&&await zl.m({environment:e,spaceId:a,userId:i,emitValue:n});const o=Kl.Z.getUserJoinedTeamsState({userId:i,spaceId:a});o&&Kl.Z.setUserJoinedTeamsState({userId:i,spaceId:a,state:{...o,lastEmitValue:n}})}),void 0,e);return function(){t&&ls.Z.removeListener(t,e)}}),[e,i,a]),null}var Gl=i(30397);const ql=function(){window.__c={n:"TeamsInSpaceListener"};const e=(0,s.O7)(),{currentSpaceStore:t,currentUserStore:i}=(0,r.Kw)(J.default),[,a,n]=(0,r.AF)(Gl.Z),l=null==i?void 0:i.id;return(0,o.useEffect)((()=>{if(!t||!l)return;const i=ls.Z.addListener((0,os.je)(t.id),(async(i,o)=>{if(!n.shouldRefetchTeamsInSpace({currentUserId:l,currentSpaceId:t.id,emitValue:o}))return;const s=await(0,ce.qX)({environment:e,spaceStore:t,includeArchived:!1,currentUserId:l});a({teams:s,lastEmitData:{spaceId:t.id,userId:l,value:o}})}),void 0,e);return function(){i&&ls.Z.removeListener(i,e)}}),[t,l,e,a,n]),null};var jl=i(13148),Yl=i(42631),$l=i(4926),Ql=i(1634);class Jl extends c.Z{constructor(){super(...arguments),this.handleConnectClick=async()=>{const e=Ql.Z.state,{currentSpaceStore:t}=J.default.state;e.open&&t&&(await Yl.hM({environment:this.environment,integration:e.integration,spaceId:t.id,unfurlUrl:e.unfurlUrl,externalObjectInstanceBlockId:e.externalObjectInstanceBlockId,from:"external_object_instance_inline_popup"}),this.markPopupAsDismissed(e.integration.id),Ql.Z.reset())},this.handleCloseClick=()=>{const e=Ql.Z.state;e.open&&this.markPopupAsDismissed(e.integration.id),Ql.Z.reset()},this.markPopupAsDismissed=e=>{const{currentUserSettingsStore:t}=J.default.state;t&&h.createAndCommit({userAction:"UnfurlingInformationPopup.markPopupAsDismissed",environment:this.environment,perform:i=>{$.GK({transaction:i,userSettingsStore:t,integrationId:e})}})}}renderComponent(){const e=Ql.Z.state;if(!e.open)return;const t=e.integration.info.icon;return t?n()("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"default",padding:16,background:this.theme.popoverBackground,borderRadius:3,boxShadow:this.theme.lightBoxShadow,position:"absolute",bottom:65+$l.Z.state,right:16+$l.Z.state,width:240,zIndex:Fi.hT,clipPath:"inset(-10px -10px -10px -10px)"}},void 0,n()(bn.Z,{type:"image_url",imageURL:t,size:38,style:{marginBottom:6}}),n()("div",{style:{color:this.theme.regularTextColor,fontSize:14,fontWeight:zo.Z.fontWeight.semibold,marginBottom:6,textAlign:"center"}},void 0,n()(P.FormattedMessage,{id:"inlineUnfurlingAuthenticationPopup.title",defaultMessage:"Connect to {integration}",values:{integration:e.integration.name}})),n()("div",{style:{color:this.theme.mediumTextColor,fontSize:12,marginBottom:8,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},void 0,n()(P.FormattedMessage,{id:"inlineUnfurlingAuthenticationPopup.caption",defaultMessage:"You, and anyone else who has access to this Notion page, will see rich previews that update live."}),n()(eo.Z,{href:(0,Ge.UY)("guides.unfurling"),external:!0},void 0,n()(P.FormattedMessage,{id:"inlineUnfurlingAuthenticationPopup.learnMore.text",defaultMessage:"Learn more"}))),n()(yn.Z,{onClick:this.handleConnectClick,style:{width:"100%"}},void 0,n()(P.FormattedMessage,{id:"inlineUnfurlingAuthenticationPopup.connectButton",defaultMessage:"Connect"})),n()(Pn.Z,{icon:jl.U,onClick:this.handleCloseClick,style:{position:"absolute",top:6,right:6}})):void 0}}Jl.displayName="UnfurlingInformationPopup";const Xl=(0,P.injectIntl)(Jl);var ed=i(61202),td=i(80064);class id extends c.Z{constructor(){super(...arguments),this.menuRef=(0,o.createRef)(),this.renderMenu=()=>{const{device:e}=this.environment,t=td.Z.state;if(!t.open)return;const{allOptionTypes:i}=t,a={key:"embed section",render:e=>o.createElement(A.Z,e),items:i.map((e=>({key:e,render:t=>o.createElement(Gt.Z,d()({},t,{title:this.renderTitleForOptionType(e),onMouseEnter:i=>{t.onMouseEnter(i),this.updateUnfurlingOptionType(e)}})),action:()=>this.handleDismiss(e)})))};let s;return s=e.isMobile?{menuType:y.og.ActionSheet}:{menuType:y.og.Popup,width:320,maxHeight:"40vh"},o.createElement(f.Z,d()({},s,{className:Kt.b_f,ref:this.menuRef}),n()(Z.Z,{type:Z.i.Vertical,sections:[a],initialFocus:0,onKeyboardArrow:this.handleMenuListKeyboardArrow,priority:1,disallowBackspace:!0}))},this.handleDefaultDismiss=()=>{this.handleDismiss(void 0)},this.handleDismiss=e=>{h.createAndCommit({userAction:"UnfurlingMenu.handleDismiss",environment:this.environment,perform:t=>{ed.xv({environment:this.environment,setType:e,transaction:t})}})},this.updateUnfurlingOptionType=e=>{h.createAndCommit({userAction:"UnfurlingMenu.handleMenuListKeyboardArrow",environment:this.environment,perform:t=>{ed.hJ({environment:this.environment,type:e,useTemporaryRecordCache:!0,transaction:t,intl:this.props.intl})}})},this.handleMenuListKeyboardArrow=e=>{const t=td.Z.state;if(!t.open||void 0===e.indexGlobal)return;const i=t.allOptionTypes[e.indexGlobal];i&&this.updateUnfurlingOptionType(i)},this.handleWindowKeydown=e=>{td.Z.state.open&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Enter"!==e.key&&this.handleDismiss(void 0)},this.handleWindowMousedown=e=>{const t=td.Z.state,i=this.menuRef.current;if(!t.open||!e.target||!i)return;const a=la.findDOMNode(i);a&&(a.contains(e.target)||this.handleDismiss(void 0))}}willMount(){(0,ca.lj)(window,"keydown",this.handleWindowKeydown),(0,ca.lj)(window,"mousedown",this.handleWindowMousedown)}willUnmount(){(0,ca.ZV)(window,"keydown",this.handleWindowKeydown),(0,ca.ZV)(window,"mousedown",this.handleWindowMousedown)}renderComponent(){const{device:e}=this.environment,t=td.Z.state;return n()(v.ZP,{popupType:e.isMobileNative&&!e.isTablet?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup,open:Boolean(t.open&&t.renderRect),originRect:t.open?t.renderRect:void 0,placementToOrigin:v.ZP.Placement.Top,alignmentToOrigin:v.ZP.Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:e.isMobile,keepFocus:e.isMobile,render:this.renderMenu,onDismiss:this.handleDefaultDismiss})}renderTitleForOptionType(e){return"preview"===e?n()(P.FormattedMessage,{id:"unfurlingMenu.actions.pasteAsPreview.title",defaultMessage:"Paste as preview"}):"mention"===e?n()(P.FormattedMessage,{id:"unfurlingMenu.actions.pasteAsMention.title",defaultMessage:"Paste as mention"}):"link"===e?n()(P.FormattedMessage,{id:"unfurlingMenu.actions.pasteAsLink.title",defaultMessage:"Paste as link"}):"collection"===e?n()(P.FormattedMessage,{id:"unfurlingMenu.actions.pasteAsDatabase.title",defaultMessage:"Paste as database"}):void(0,De.t1)(e)}}id.displayName="UnfurlingMenu";const ad=(0,P.injectIntl)(id);const nd=function(){window.__c={n:"AppComponents"};const e=(0,s.Fy)(),t=(0,s.O7)(),{isMobile:i,isElectron:a}=e;(0,o.useEffect)((()=>{if(i){function e(e){e.preventDefault()}return document.addEventListener("gesturestart",e),()=>{document.removeEventListener("gesturestart",e)}}}),[i]);const{currentSpaceStore:l,teamsEnabled:d}=(0,r.VK)((()=>({currentSpaceStore:J.default.state.currentSpaceStore,teamsEnabled:(0,ce.bq)()})),[]),c=t.currentUser.isLoggedIn();return n()(o.Fragment,{},void 0,n()(ra,{}),n()(Be,{}),n()(ue.LazyNewDiscussionMenu,{}),n()(Os,{}),n()(pe,{}),n()(ni.Z,{}),n()(fe.Z,{priority:-1,capture:!0}),n()(qr,{}),c&&!i&&n()(Xr,{}),c&&l&&n()(ms,{rootStore:l}),c&&n()(ql,{}),c&&d&&n()(Hl,{}),n()(ai.Z,{}),n()(as,{}),n()(Ut,{}),n()(Rs,{}),n()(Ps,{}),n()(Gi,{}),n()(ei,{}),!i&&n()(fr,{}),n()(aa,{}),n()(vs,{}),n()(ho,{}),n()(ti.Z,{store:ge.Z}),n()(ti.Z,{store:he.Z}),n()(es,{}),n()(ll,{}),n()(de,{}),n()(Ci,{}),n()(ad,{}),n()(ha,{}),n()(Xl,{}),n()(Yt,{}),n()(gl,{}),n()(Ga,{}),a&&n()(ue.LazyElectronContextMenu,{}),n()(ci,{}),n()(ii.Z,{}),n()(Ms,{}),c&&n()(Wl,{}),n()(qi.s6,{}))}},13713:(e,t,i)=>{i.d(t,{B:()=>M,Z:()=>w});var a=i(23174),n=i.n(a),o=i(67294),s=i(13991),r=i(480),l=i(86628),d=i(24405),c=i(66897),u=i(7057),m=i(5366),p=i(83420),g=i(33929),h=i(4023),f=i(24039),v=i(28992),y=i(72495),S=i(26388),b=i(64369);function M(e){const t=e.getCreatedByPointer(),i=e.getCreatedTime(),a=e.getLastEditedByPointer(),n=e.getLastEditedTime(),o=g.default.getIntl();if(t&&i&&n&&a){const r=(0,p.ue)({parentStore:e,pointer:t}),l=(0,u.$b)(i,s.SP,o),d=(0,p.ue)({parentStore:e,pointer:a}),c=(0,u.$b)(n,s.SP,o);if(!d)return;return{createdBy:r,createdTime:l,lastEditedBy:d,lastEditedTime:c}}}const w=function(e){let{isPageMoreButton:t,hideTopBorder:i,store:a}=e;window.__c={n:"BlockAuthorInfo"};const s=(0,l.VK)((()=>M(a)),[a]),{device:u}=(0,r.O7)(),p=(0,l.VK)((()=>u.isPhone),[u]),w=g.default.getIntl(),C=(0,d.yK)((()=>({menuItem:{paddingTop:p?8:i?0:6,paddingBottom:p?8:16}})),[i,p]);return n()(y.Z,{topBorder:!t&&!i,style:{paddingTop:t?0:8,paddingBottom:8}},void 0,n()(v.Z,{style:s?void 0:C.menuItem,shouldWrapTitle:!0,title:s?n()(S.Z,{placement:h.u.Right,render:e=>o.createElement("div",e,n()(b.Z,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isPhone,isMultiline:!0,style:{marginBottom:4}},void 0,n()(m.FormattedMessage,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:s.lastEditedBy.asActor?(0,c.$4)(w,s.lastEditedBy):void 0}})),n()(b.Z,{isSmall:!0,isSecondaryColor:!0,isMobile:u.isPhone},void 0,s.lastEditedTime)),renderTooltip:()=>n()(f.Z,{store:a,compactFormat:!0})}):void 0,loading:!s}))}},98692:(e,t,i)=>{i.d(t,{Z:()=>y});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(8848),l=i(5366),d=i(91376),c=i(1865),u=i(62216),m=i(41168),p=i(78291),g=i(64921),h=i(61519),f=i(76844);class v extends s.Z{constructor(){super(...arguments),this.handleClick=e=>{if(!e)return d.r$();c.y(this.environment,{from:"sidebar"===this.props.source?"block_limit_sidebar":"block_limit_settings",for:"plus"})}}renderComponent(){const{data:e}=p.default.state;if(!e)return;const t=m.GJ(e);if(0===m.Lz(this.environment,e))return;const i=m.zl(this.environment,e);return m.XZ(this.environment,e)?n()(o.Fragment,{},void 0,this.renderDivider("settings"===this.props.source),n()(g.Z,{style:v.buttonStyle,onClick:()=>this.handleClick(t)},void 0,n()("div",{style:v.headerStyle},void 0,n()(l.FormattedMessage,{id:"spaceSettings.sidebar.upgradeLink",defaultMessage:"Upgrade to go unlimited"})),n()("div",{style:v.labelStyle},void 0,n()("div",{style:this.usageLabelStyle(i)},void 0,m.cA(this.environment,e)),!(0,u.du)()&&n()(f.Z,{style:{marginTop:12,marginBottom:12},percent:i}),n()("div",{style:v.ctaStyle},void 0,this.renderCtaMessage(t))))):void 0}renderDivider(e){return n()(h.Z,e?{size:27,style:{paddingLeft:14,paddingRight:14}}:{size:0})}renderCtaMessage(e){return n()(l.FormattedMessage,e?{id:"spaceSettings.sidebar.button.upgrade",defaultMessage:"Upgrade plan"}:{id:"spaceSettings.sidebar.button.contactWorkspaceOwner",defaultMessage:"Contact a workspace owner"})}usageLabelStyle(e){return e>m.Tj&&!(0,u.du)()?(0,r.x7)("red",this.theme):{}}}v.displayName="BlockLimitUsage",v.buttonStyle={padding:14,fontSize:12,lineHeight:1.4},v.headerStyle={fontWeight:500,lineHeight:2},v.labelStyle={fontWeight:400},v.ctaStyle={textDecoration:"underline"};const y=v},80209:(e,t,i)=>{i.d(t,{Z:()=>y});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(26825),l=i(82990),d=i(5366),c=i(47307),u=i(76464),m=i(18878),p=i(19037),g=i(98165),h=i(64921),f=i(64369);class v extends s.Z{constructor(){super(...arguments),this.handleRestorePermissionAction=async()=>{const{store:e}=this.props,t=e.getPermissionItems(),i=g.Om(e),a=i?r.Wo(g.fJ(i)):[],o={type:"restore",permissionChanges:r.Xr(t,a)};await c.confirmUserAction({message:(0,m.mX)(o),acceptLabel:(0,m.nH)(o),cancelLabel:n()(d.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.cancel",defaultMessage:"Close"}),description:n()(m.mo,{openState:o})})&&u.hs({environment:this.environment,store:e})}}renderComponent(){const{store:e}=this.props,t={environment:this.environment,blocks:[e],publicEditMode:void 0};if(p.xD([p.X,p.ff(p.J5)])(t)){const{device:e}=this.environment,i=p.xD([p.c2,p.ff(p.zz)])(t);return o.createElement(o.Fragment,null,n()("div",{style:{backgroundColor:this.theme.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`,marginTop:e.isMobile?28:1}},void 0,n()(h.Z,{disabled:!i,style:{padding:12},onClick:this.handleRestorePermissionAction},void 0,n()(f.Z,{isMultiline:!0,isSmall:!0},void 0,n()(d.FormattedMessage,{id:"blockMenuRestrictedMessage.label",defaultMessage:"You don’t have permission to edit this block because it is restricted."})),i&&n()(f.Z,{style:{marginTop:6,fontWeight:l.Z.fontWeight.semibold}},void 0,n()(d.FormattedMessage,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",defaultMessage:"Restore permissions"})))))}}}v.displayName="BlockMenuRestrictedMessage";const y=v},81933:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(83355),d=i(41892),c=i(8848),u=i(64275),m=i(45137),p=i(30845),g=i(72126),h=i(82990),f=i(5366),v=i(50906),y=i(33929),S=i(49085);class b extends S.default{getInitialState(){return{step:"initial"}}}const M=b;var w=i(73796),C=i(37240),_=i(52275),k=i(63296),T=i(45959);class I extends l.Z{renderComponent(){const{intl:e,question:t}=this.props,i={setup_trial:s()(f.FormattedMessage,{id:"enterpriseContactModalQuestionSelect.question.setup_trial",defaultMessage:"Setup an enterprise trial"}),setup_enterprise_trial:s()(f.FormattedMessage,{id:"enterpriseContactModalQuestionSelect.question.setup_trial",defaultMessage:"Setup an enterprise trial"}),setup_business_trial:s()(f.FormattedMessage,{id:"contactModalQuestionSelect.question.setup_business_trial",defaultMessage:"Setup a business trial"}),live_demo:s()(f.FormattedMessage,{id:"enterpriseContactModalQuestionSelect.question.live_demo",defaultMessage:"Schedule a live demo"}),plan_help:s()(f.FormattedMessage,{id:"enterpriseContactModalQuestionSelect.question.plan_help",defaultMessage:"Need help choosing a plan"}),other:s()(f.FormattedMessage,{id:"enterpriseContactModalQuestionSelect.question.other",defaultMessage:"Other"})},a={menuTitle:e.formatMessage({defaultMessage:"Your question",id:"enterpriseContactModal.yourQuestion.title"}),items:["setup_enterprise_trial","setup_business_trial","live_demo","plan_help","other"],width:"auto",minWidth:280,getKey:e=>e,selectedItem:t,originGap:4,onSelect:e=>{this.props.onSelect(e)},renderItem:e=>r.createElement(_.Z,n()({title:i[e.key]},e)),renderOrigin:e=>r.createElement(k.Z,n()({},e,{isLarge:!0,style:{...this.getInputStyle(),...this.props.invalid&&{border:`1px solid ${c.ZP.red}`}}}),s()("div",{style:{display:"flex",alignItems:"center",color:t?this.theme.regularTextColor:this.theme.lightTextColor}},void 0,t?i[t]:s()(f.FormattedMessage,{defaultMessage:"Select question",id:"enterpriseContactModal.selectQuestion.label"})),(0,C.s)({width:10,fill:this.theme.lightIconColor}))};return r.createElement(T.Z,n()({key:"onboarding"},a))}getInputStyle(){const{device:e}=this.environment;return{backgroundColor:this.theme.whiteButtonBackground,height:31,...e.isMobile&&{height:42},padding:"2px 10px",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:3,border:0,transition:"box-shadow 0.3s ease",boxShadow:`0 0 0 1px ${this.theme.outlineButtonBorder}`,background:this.theme.buttonBackground}}}I.displayName="ContactModalQuestionSelect";const P=(0,f.injectIntl)(I);var x=i(23063),Z=i(42922),F=i(64921),A=i(74194),E=i(3386),B=i(50506),R=i(89728),D=i(26388),L=i(29551);const N=(0,f.defineMessages)({additionalFeedbackPlaceholder:{id:"enterpriseContactModal.additionalFeedback.placeholder",defaultMessage:"What would you like to learn more about?"}});class O extends l.Z{constructor(){super(...arguments),this.storeTypes={store:M},this.renderMenu=()=>s()("div",{style:this.getContainerStyle()},void 0,this.renderCancel(),s()(L.gq,{style:this.getInnerContainerStyle(),alignItems:"center",alignContent:"center"},void 0,this.renderStep())),this.renderInitial=()=>{const{invalidField:e}=this.stores.store.state;if(w.Z.state.open)return s()("div",{style:{...this.getSlideUpStyle(),padding:20}},void 0,(0,m.o)({width:"100%",height:24}),s()("div",{style:{fontSize:14,fontWeight:h.Z.fontWeight.semibold,paddingTop:6,paddingBottom:4}},void 0,s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.header",defaultMessage:"Get in touch with sales"})),s()("div",{style:{fontSize:12,color:this.theme.mediumTextColor,width:200,margin:"0 auto"}},void 0,s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.caption",defaultMessage:"We'll work with you on your setup and help you land on the best plan."})),s()("div",{style:{...this.getLabelStyle(),marginTop:24}},void 0,s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.nameLabel",defaultMessage:"Your name"})),s()(A.Z,{focusInitial:!0,value:this.getName(),placeholder:"Ada Lovelace",style:{marginRight:4,...this.getInputStyle(),..."name"===e&&this.getInvalidInputStyle()},onChange:e=>{w.Z.setState({...w.Z.state,open:!0,name:void 0}),this.stores.store.setState({...this.stores.store.state,name:e.target.value}),v.QOK(this.environment,{contactFieldType:"name",contactFieldValue:e.target.value})}}),s()("div",{style:this.getLabelStyle()},void 0,s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.emailLabel",defaultMessage:"Your work email"})),s()(A.Z,{value:this.getEmail(),placeholder:"ada@lovelace.app",type:"email",style:{marginRight:4,...this.getInputStyle(),..."email"===e&&this.getInvalidInputStyle()},onChange:e=>{w.Z.setState({...w.Z.state,open:!0,email:void 0}),this.stores.store.setState({...this.stores.store.state,email:e.target.value}),v.QOK(this.environment,{contactFieldType:"email",contactFieldValue:e.target.value})}}),s()("div",{style:this.getLabelStyle()},void 0,s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.companySizeLabel",defaultMessage:"Company size"})),s()(L.gq,{},void 0,this.getCompanySizeButtonData().map((e=>{let{type:t,message:i,style:a}=e;return s()(R.Z,{isLightGray:!0,isLarge:!0,style:{...this.getBaseButtonStyle(),...this.stores.store.state.companySize===t&&this.getSelectedButtonStyle(),...a},onClick:()=>{this.stores.store.setState({...this.stores.store.state,companySize:t}),v.QOK(this.environment,{contactFieldType:"companySize",contactFieldValue:t})}},t,i)}))),s()("div",{style:this.getLabelStyle()},void 0,s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.questionLabel",defaultMessage:"Your question"})),s()(P,{question:this.getQuestion(),invalid:"question"===e,onSelect:e=>{this.stores.store.setState({...this.stores.store.state,question:e,step:"other"===e?"additional_input":"initial"}),v.QOK(this.environment,{contactFieldType:"question",contactFieldValue:"other"===e?"additional_input":"initial"})}}),s()(A.Z,{textarea:!0,textareaElementAttributes:{style:this.getInnerTextAreaStyle()},style:this.getTextAreaStyle(),focus:"additional_input"===this.stores.store.state.step,value:this.stores.store.state.additionalFeedback,placeholder:y.default.formatMessage(N.additionalFeedbackPlaceholder),onChange:e=>{this.stores.store.setState({...this.stores.store.state,additionalFeedback:e.target.value}),v.QOK(this.environment,{contactFieldType:"additionalFeedback",contactFieldValue:e.target.value})}}))},this.renderCancel=()=>s()(F.Z,{onClick:()=>{v.g3X(this.environment),this.handleCancel()},style:this.getCancelStyle(),hoveredStyle:{background:this.theme.buttonPressedBackground}},void 0,(0,u.D)({width:14,fill:this.theme.mediumTextColor})),this.renderThanks=()=>s()("div",{},void 0,s()("img",{style:{width:165,height:80},src:d.Z.images.feedbackThankYouPng}),s()("div",{style:this.getThanksHeaderStyle()},void 0,s()(f.FormattedMessage,{id:"enterpriseContactModal.thanks.caption",defaultMessage:"We've received your inquiry and will be contacting you via email shortly."}))),this.handleCancel=()=>{w.Z.setState({open:!1})}}renderComponent(){return s()(B.Z,{preventHideChildrenWhileOpening:!0,open:w.Z.state.open,render:this.renderMenu,onDismiss:this.handleCancel})}renderStep(){const{step:e,companySize:t}=this.stores.store.state,i="1_100"===t;return r.createElement(r.Fragment,null,s()(x.Z,{isVisible:"initial"===e||"additional_input"===e,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},render:()=>s()(E.Z,{capture:!0,onBackspace:g.yR,onLeft:g.yR,onRight:g.yR,onSelectAll:g.yR,onRedo:g.yR,onUndo:g.yR,onCut:g.yR,onCopy:g.yR,onPaste:g.yR,onKeypress:g.yR,onDelete:g.yR,onTab:g.yR},void 0,this.renderInitial())}),s()(x.Z,{isVisible:"thanks"===e,animationStyle:this.getAnimationStyle("thanks"===e),enterAnimationStyle:this.getEnterExitAnimationStyle(),exitAnimationStyle:this.getEnterExitAnimationStyle(),render:this.renderThanks}),s()(x.Z,{isVisible:"initial"===e||"additional_input"===e,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},render:()=>s()(D.Z,{style:{width:"auto"},textWrap:!0,renderTooltip:()=>i?s()(f.FormattedMessage,{id:"enterpriseContactModal.companySize.error.label",defaultMessage:"The company size selected is not eligible for a sales assisted plan. Please message support if you have any questions."}):null,render:e=>r.createElement(Z.Z,n()({},e,{disabled:i,isLarge:!0,style:{marginTop:17,width:284,position:"absolute",bottom:20},onClick:()=>{const e=this.getInvalidField();if(e){const{question:t}=this.stores.store.state;this.stores.store.setState({...this.stores.store.state,step:"initial",invalidField:e,question:"other"===t?this.getQuestion():t})}else this.stores.store.setState({...this.stores.store.state,invalidField:void 0,step:"thanks"}),w.Z.state.open&&v.Ls9(this.environment,{email:w.Z.state.email,name:w.Z.state.name,question:w.Z.state.question,...this.stores.store.state}),g.gw((()=>{w.Z.reset(),g.gw((()=>{this.stores.store.reset()}),1e3)}),2e3)}}),s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.sendLabel",defaultMessage:"Send"}))})}))}getName(){if(w.Z.state.open)return this.stores.store.state.name||w.Z.state.name}getEmail(){if(w.Z.state.open)return this.stores.store.state.email||w.Z.state.email}getQuestion(){if(w.Z.state.open)return this.stores.store.state.question||w.Z.state.question}getInvalidField(){const e=this.getEmail(),t=this.getName(),{companySize:i}=this.stores.store.state;return t?e&&p.B(e,"email")?i?this.getQuestion()?void 0:"question":"company_size":"email":"name"}getCompanySizeButtonData(){return[{type:"1_100",message:s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.1_100Label",defaultMessage:"1-100"})},{type:"101_1000",message:s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.101_1000Label",defaultMessage:"101-1,000"}),style:{marginLeft:8,marginRight:8}},{type:"1001+",message:s()(f.FormattedMessage,{id:"enterpriseContactModal.initial.1000PlusLabel",defaultMessage:"1,001+"})}]}getThanksHeaderStyle(){return{color:this.theme.regularTextColor,fontWeight:h.Z.fontWeight.semibold,fontSize:14}}getContainerStyle(){return{background:this.theme.popoverBackground,borderRadius:5,boxShadow:this.theme.mediumBoxShadow}}getCancelStyle(){return{position:"absolute",top:"10px",right:"10px",background:this.theme.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}}getInnerContainerStyle(){return{width:320,height:470,overflow:"hidden",position:"relative",padding:20,cursor:"default",textAlign:"center",justifyContent:"center"}}getLabelStyle(){return{marginTop:17,fontSize:12,color:this.theme.mediumTextColor,fontWeight:h.Z.fontWeight.medium,lineHeight:"135%",marginBottom:4,textAlign:"left"}}getInputStyle(){return{backgroundColor:this.theme.whiteButtonBackground,height:31}}getInvalidInputStyle(){return{border:`1px solid ${c.ZP.red}`}}getAnimationStyle(e){return{opacity:e?1:0,scale:e?1:.96}}getEnterExitAnimationStyle(){return{opacity:0,scale:.96}}getBaseButtonStyle(){return{border:"1px solid #E7E6E5",flexGrow:1,justifyContent:"center"}}getSelectedButtonStyle(){return{color:c.ZP.blue,border:`1px solid ${c.ZP.blue}`}}getSlideUpStyle(){const{step:e}=this.stores.store.state;return{position:"absolute",transition:"transform 200ms ease",transform:"initial"===e?"translateY(153px)":"translateY(-180px)"}}getInnerTextAreaStyle(){return{width:"100%",height:"100%",background:"none",border:"none",resize:"none"}}getTextAreaStyle(){return{width:"100%",background:this.theme.popoverBackground,display:"block",padding:"7px 10px",height:310,marginTop:17,marginBottom:17,transition:"opacity 200ms ease-in",opacity:"additional_input"===this.stores.store.state.step?1:.001}}}O.displayName="ContactModal";const V=O},85324:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(24405),c=i(41892),u=i(86658),m=i(82990),p=i(63143),g=i(5366),h=i(50950),f=i(36867),v=i(45293),y=i(10182),S=i(42922),b=i(89728),M=i(92660),w=i(29551);function C(){window.__c={n:"SaveAllButton"};const e=(0,d.yK)(T,[]),t=(0,l.O7)();return s()(S.Z,{isLarge:!0,style:e.acceptAllButton,onClick:()=>{h.a9(t,{necessary:!0,preference:!0,performance:!0,targeting:!0}),v.Z.setState({open:!1}),h.qo()}},void 0,r.createElement(g.FormattedMessage,u.ze.acceptAllButtonLabel))}function _(){window.__c={n:"RejectAllButton"};const e=(0,d.yK)(T,[]),t=(0,l.O7)();return s()(b.Z,{isLarge:!0,isGray:!0,style:e.moreOptionsButton,onClick:()=>{h.a9(t,{necessary:!0,preference:!1,performance:!1,targeting:!1}),v.Z.setState({open:!1}),h.qo()}},void 0,r.createElement(g.FormattedMessage,u.ze.rejectAllButtonLabel))}function k(){window.__c={n:"MoreOptionsButton"};const e=(0,d.yK)(T,[]);return s()(y.Z,{hasDismissButton:!0,onDismiss:()=>{v.Z.setState({open:!1})},renderOrigin:t=>r.createElement(b.Z,n()({},t,{isLarge:!0,isGray:!0,style:e.moreOptionsButton}),r.createElement(g.FormattedMessage,u.ze.moreOptionsButtonLabel))})}function T(e){return{modal:{maxWidth:400,padding:24},image:{height:100},title:{marginTop:8,color:e.regularTextColor,fontWeight:m.Z.fontWeight.semibold,fontSize:18},description:{color:e.mediumTextColor,textAlign:"center",fontSize:14,marginTop:8,marginBottom:18},acceptAllButton:{width:"100%",marginBottom:6},moreOptionsButton:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}}const I=(0,g.injectIntl)((function(){window.__c={n:"CookieModal"};const e=(0,l.O7)().currentUser.id;(0,r.useEffect)((()=>{if(!e)return;(0,f._)(e);const t=window.setInterval((()=>{(0,f._)(e)}),p.A0);return()=>{window.clearInterval(t)}}),[e]);const t=(0,d.yK)(T,[]);return s()(M.Z,{onDismiss:()=>{},render:()=>s()("div",{style:t.modal},void 0,s()(w.gq,{flexDirection:"column",justifyContent:"center",alignItems:"center"},void 0,s()("img",{style:t.image,src:c.Z.images.feedbackThankYouPng}),s()("div",{style:t.title},void 0,s()(g.FormattedMessage,{id:"cookieModal.requestConsent.title",defaultMessage:"Set your cookie preferences"})),s()("div",{style:t.description},void 0,(0,u.Fd)(h.Tz,"banner")),s()(C,{}),s()(_,{}),s()(k,{}))),requireOnline:!0,modalStore:v.Z})}))},57037:(e,t,i)=>{i.r(t),i.d(t,{default:()=>W});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(18466),l=i(41892),d=i(64275),c=i(60651),u=i(91427),m=i(95094),p=i(72126),g=i(82990),h=i(51454),f=i(5366),v=i(54642),y=i(73409),S=i(62992);function b(e,t,i){if(i){const{templateId:a}=i;return e.some((e=>e.milestone===t&&e.template_id===a))}return e.some((e=>e.milestone===t))}var M=i(33929),w=i(38755),C=i(8323),_=i(80444),k=i(4926),T=i(49085);const I="rate",P="send",x="thanks";class Z extends T.default{getInitialState(){return{starRating:void 0,step:I}}}const F=Z;var A=i(5188),E=i(23063),B=i(42922),R=i(64921),D=i(74194),L=i(3386),N=i(31278),O=i(29551);const V=(0,f.defineMessages)({additionalFeedbackPlaceholder:{id:"csatPopup.additionalFeedback.placeholder",defaultMessage:"Tell us more..."}});class U extends s.Z{constructor(){super(...arguments),this.storeTypes={csatPopupStore:F},this.renderCancel=()=>n()(R.Z,{onClick:this.handleCancel,style:this.getCancelStyle(),hoveredStyle:{background:this.theme.buttonPressedBackground}},void 0,(0,d.D)({width:14,fill:this.theme.mediumTextColor})),this.renderStep=()=>{const{step:e}=this.stores.csatPopupStore.state,{currentSpaceStore:t}=_.default.state;let i;if(t){const e=t.getInitialUseCases();e&&(i=p.UP(e))}return o.createElement(o.Fragment,null,n()(E.Z,{isVisible:e===I,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0,translateY:-120},render:()=>n()("div",{style:{paddingBottom:40}},void 0,this.renderIcon(),this.renderFeedbackPrompt(i))}),n()(E.Z,{isVisible:e===I||e===P,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},render:()=>n()("div",{style:this.getSlideContainerStyle()},void 0,this.renderStars(i),this.renderInput(),this.renderSendButton())}),n()(E.Z,{isVisible:e===x,animationStyle:this.getAnimationStyle(e===x),enterAnimationStyle:this.getEnterExitAnimationStyle(),exitAnimationStyle:this.getEnterExitAnimationStyle(),render:this.renderThanks}))},this.renderThanks=()=>n()("div",{},void 0,n()("img",{style:{width:165,height:80},src:l.Z.images.feedbackThankYouPng}),n()("div",{style:this.getThanksHeaderStyle()},void 0,n()(f.FormattedMessage,{defaultMessage:"Thanks for your feedback!",id:"csatPopup.thanks.header"})),n()("div",{style:this.getThanksDescriptionStyle()},void 0,n()(f.FormattedMessage,{defaultMessage:"Your feedback will help us make Notion better.",id:"csatPopup.thanks.description"}))),this.renderIcon=()=>{const{mainEditorCurrentBlockStore:e}=_.default.state;if(e){const t=e.getIcon();if(t)return n()(O.gq,{justifyContent:"center",alignItems:"center"},void 0,n()(N.Z,{icon:t,isEmptyPage:!1,size:32,disabled:!0}))}return n()(O.gq,{justifyContent:"center",alignItems:"center"},void 0,(0,c.h)({width:32,height:32}))},this.renderFeedbackPrompt=e=>{switch(e){case"doc_notes":return n()("div",{style:this.getFeedbackPromptStyle()},"feedback-prompt",n()(f.FormattedMessage,{defaultMessage:"How satisfied are you with using Notion for notes & docs?",id:"csatPopup.feedbackPrompt.docNotesLabel"}));case"project_management":return n()("div",{style:this.getFeedbackPromptStyle()},"feedback-prompt",n()(f.FormattedMessage,{defaultMessage:"How satisfied are you with managing projects and tasks in Notion?",id:"csatPopup.feedbackPrompt.projManagementLabel"}));case"wiki":return n()("div",{style:this.getFeedbackPromptStyle()},"feedback-prompt",n()(f.FormattedMessage,{defaultMessage:"How satisfied are you with using Notion for team wikis?",id:"csatPopup.feedbackPrompt.wikiLabel"}));default:const t=this.shouldRenderAsNPS(e);return n()("div",{style:this.getFeedbackPromptStyle()},"feedback-prompt",n()(f.FormattedMessage,t?{defaultMessage:"How likely are you to recommend Notion to a friend?",id:"csatPopup.feedbackPrompt.enterpriseDefaultLabel"}:{defaultMessage:"How satisfied are you with using Notion? ",id:"csatPopup.feedbackPrompt.defaultlabel"}))}},this.renderInput=()=>{const{step:e,additionalFeedback:t}=this.stores.csatPopupStore.state;return n()(L.Z,{capture:!0,onBackspace:p.yR,onLeft:p.yR,onRight:p.yR,onSelectAll:p.yR,onRedo:p.yR,onUndo:p.yR,onCut:p.yR,onCopy:p.yR,onPaste:p.yR,onKeypress:p.yR,onDelete:p.yR,onTab:p.yR},void 0,n()(D.Z,{textarea:!0,style:this.getInputContainerStyle(),focus:e===P,value:t,placeholder:M.default.formatMessage(V.additionalFeedbackPlaceholder),onChange:e=>{this.stores.csatPopupStore.setState({...this.stores.csatPopupStore.state,additionalFeedback:e.target.value})}}))},this.renderSendButton=()=>n()(B.Z,{isLarge:!0,style:this.getButtonStyle(),onClick:this.handleSend},void 0,n()(f.FormattedMessage,{id:"csatPopup.sendButton.label",defaultMessage:"Send"})),this.renderStars=e=>{const{starRating:t,step:i}=this.stores.csatPopupStore.state,a=e=>{let{rating:a}=e;return n()("div",{style:this.getStarStyle(),onMouseEnter:()=>{i===I&&this.stores.csatPopupStore.setState({...this.stores.csatPopupStore.state,starRating:a})},onClick:()=>{this.stores.csatPopupStore.setState({starRating:a,step:P})}},void 0,(0,u.e)({width:18,fill:this.theme.mediumIconColor,position:"absolute",opacity:t&&t>=a?0:1}),(0,m.p)({width:18,fill:"#F6C050",position:"absolute",opacity:t&&t>=a?1:0}))},o=()=>{const i=this.shouldRenderAsNPS(e);switch(t){case 1:return n()(f.FormattedMessage,i?{defaultMessage:"Very unlikely",id:"csatPopup.stars.1StarLabelNps"}:{defaultMessage:"Very dissatisfied",id:"csatPopup.stars.1StarLabel"});case 2:return n()(f.FormattedMessage,i?{defaultMessage:"Somewhat unlikely",id:"csatPopup.stars.2StarLabelNps"}:{defaultMessage:"Somewhat dissatisfied",id:"csatPopup.stars.2StarLabel"});case 3:return n()(f.FormattedMessage,i?{defaultMessage:"Not likely nor unlikely",id:"csatPopup.stars.3StarLabelNps"}:{defaultMessage:"Not dissatisfied nor satisfied",id:"csatPopup.stars.3StarLabel"});case 4:return n()(f.FormattedMessage,i?{defaultMessage:"Somewhat likely",id:"csatPopup.stars.4StarLabelNps"}:{defaultMessage:"Somewhat satisfied",id:"csatPopup.stars.4StarLabel"});case 5:return n()(f.FormattedMessage,i?{defaultMessage:"Very likely",id:"csatPopup.stars.5StarLabelNps"}:{defaultMessage:"Very satisfied",id:"csatPopup.stars.5StarLabel"});default:return n()(f.FormattedMessage,{defaultMessage:"Select an option",id:"csatPopup.stars.notSpecifiedLabel"})}};return n()("div",{onMouseLeave:()=>{p.gw((()=>{this.stores.csatPopupStore.state.step===I&&this.stores.csatPopupStore.setState({...this.stores.csatPopupStore.state,starRating:void 0})}),500)},style:this.getStarsContainerStyle()},void 0,n()("div",{style:this.getStarsStyle()},void 0,n()(a,{rating:1}),n()(a,{rating:2}),n()(a,{rating:3}),n()(a,{rating:4}),n()(a,{rating:5})),n()("div",{style:this.getStarLabelStyle()},void 0,n()(o,{})))},this.handleCancel=async()=>{const{state:e}=A.Z;if(!e.open)return;const{open:t,...i}=e;if(t&&"trigger"===i.type){const{currentSpaceStore:e}=_.default.state;if(!e)return;await v.submitCsatFeedback(this.environment,{spaceId:e.id,rating:void 0,additionalFeedback:void 0,templateId:void 0,...i})}A.Z.setState({...A.Z.state,open:!1})},this.handleSend=async()=>{const{additionalFeedback:e,starRating:t}=this.stores.csatPopupStore.state,{currentSpaceStore:i}=_.default.state;if(!i||!t)return;const{state:a}=A.Z;if(!a.open)return;const{open:n,...o}=a,s="passive"===o.type?await v.submitCsatFeedback(this.environment,{spaceId:i.id,rating:t,additionalFeedback:e,type:o.type,milestone:void 0,templateId:void 0}):await v.submitCsatFeedback(this.environment,{spaceId:i.id,rating:t,additionalFeedback:e,templateId:void 0,...o});if("success"!==s.type)throw s.error;this.stores.csatPopupStore.setState({...this.stores.csatPopupStore.state,step:x}),p.gw((()=>{A.Z.setState({...A.Z.state,open:!1}),p.gw((()=>{this.stores.csatPopupStore.reset()}),1e3)}),2e3)},this.flexCenteredStyle={display:"flex",alignItems:"center",flexDirection:"column"}}willMount(){const{userSettingsStore:e,blockStore:t,spaceStore:i}=this.props;if(e&&t&&i){const a=this.environment;if("CsatMilestoneStore"in a){const n=r.Z.withListenerIgnored((()=>function(e,t){const{userSettingsStore:i,blockStore:a,spaceStore:n}=t,o=i.getSettings(),s=null==o?void 0:o.signup_time,{CsatMilestoneStore:r}=e,{data:l}=r.state,d=864e5,c=e=>Math.floor((Date.now()-e)/d);if(!n.isDefined()||!l)return;const{milestones:u}=l;if(!u)return;if(Math.max(...u.map((e=>e.created_time)))>Date.now()-24192e5)return;if(s){const e=c(s),t=p.UP(n.getInitialUseCases())||"legacy";if(e>=180){if(!b(u,y.Hf))return{milestone:y.Hf,useCase:t}}else if(e>=90){if(!b(u,y.Vx))return{milestone:y.Vx,useCase:t}}else if(e>=28){if(!b(u,y.Sh))return{milestone:y.Sh,useCase:t}}else if(e>=7&&!b(u,y.zK))return{milestone:y.zK,useCase:t}}const m=a.getCopiedFromPointer();return a.isDefined()&&m&&(0,S.J)(m)&&c(a.getCreatedTime())>=7&&!b(u,y.a0,{templateId:m.id})?{milestone:y.a0,useCase:"legacy",templateId:m.id}:void 0}(a,{userSettingsStore:e,blockStore:t,spaceStore:i})));if(n){const{milestone:e,useCase:t,templateId:i}=n;p.gw((()=>{A.Z.setState({open:!0,milestone:e,type:"trigger",useCase:t,templateId:i})}),2e3)}}}}renderComponent(){const{device:e}=this.environment;if(e.isMobile)return;const{currentSpaceStore:t}=_.default.state;return t&&!(0,w.Cx)(t)?n()(E.Z,{isVisible:A.Z.state.open,animationStyle:this.getAnimationStyle(A.Z.state.open),enterAnimationStyle:this.getEnterExitAnimationStyle(),exitAnimationStyle:this.getEnterExitAnimationStyle(),springConfig:this.getSpringConfig(),render:()=>n()("div",{style:this.getContainerStyle()},void 0,this.renderCancel(),n()("div",{style:this.getInnerContainerStyle()},void 0,this.renderStep()))}):void 0}shouldRenderAsNPS(e){const t=(0,C.zt)(),{state:i}=A.Z,a=i.open&&"trigger"===i.type;return"enterprise"===t&&!e&&a}getSpringConfig(){return{scale:{stiffness:58,damping:4.3}}}getAnimationStyle(e){return{opacity:e?1:0,scale:e?1:.96}}getEnterExitAnimationStyle(){return{opacity:0,scale:.96}}getThanksHeaderStyle(){return{color:this.theme.regularTextColor,fontWeight:g.Z.fontWeight.semibold,fontSize:14}}getThanksDescriptionStyle(){return{color:this.theme.mediumTextColor,fontSize:12}}getButtonStyle(){return{width:"calc(100% - 30px)"}}getInputContainerStyle(){const{step:e}=this.stores.csatPopupStore.state;return{width:"calc(100% - 30px)",display:"block",background:this.theme.popoverBackground,height:80,marginTop:10,marginBottom:10,opacity:e===I?0:1}}getStarLabelStyle(){return{fontSize:12,color:this.theme.mediumTextColor,paddingTop:4}}getFeedbackPromptStyle(){return{paddingTop:12,paddingBottom:12,color:this.theme.regularTextColor,fontWeight:g.Z.fontWeight.semibold,fontSize:14,lineHeight:1.4,width:188}}getStarStyle(){return{display:"inline-flex",position:"relative",width:20,height:20,marginRight:3}}getSlideContainerStyle(){const{step:e}=this.stores.csatPopupStore.state;return{...this.flexCenteredStyle,position:"absolute",transition:"transform 200ms ease",width:240,transform:e===I?"translateY(120px)":"translateY(0px)"}}getStarsContainerStyle(){return{width:"100%",...this.flexCenteredStyle}}getStarsStyle(){return{display:"flex",cursor:"pointer"}}getContainerStyle(){return{background:this.theme.popoverBackground,borderRadius:5,boxShadow:this.theme.mediumBoxShadow,position:"absolute",bottom:65+k.Z.state,right:16+k.Z.state,zIndex:h.hT}}getInnerContainerStyle(){return{...this.flexCenteredStyle,width:240,height:195,overflow:"hidden",position:"relative",padding:12,cursor:"default",textAlign:"center",justifyContent:"center"}}getCancelStyle(){return{position:"absolute",top:"10px",right:"10px",background:this.theme.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}}}U.displayName="CsatPopup";const W=(0,f.injectIntl)(U)},15480:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ee});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(5366),l=i(79257),d=i(11599),c=i(80444),u=i(85680),m=i(88923),p=i(53437),g=i(10434),h=i.n(g),f=i(15145),v=i(6695),y=i(9999),S=i(90199);const b=(0,i(45238).I)("speechBubbleThick",{viewBox:"0 0 16 16",svg:n()("path",{d:"M4.32 15.424c.39 0 .677-.192 1.149-.609l2.344-2.064h4.116c2.057 0 3.213-1.19 3.213-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.22h.28v1.675c0 .608.322.998.875.998zm.342-1.531v-1.949c0-.403-.178-.56-.56-.56H3.26c-1.285 0-1.9-.65-1.9-1.894V4.26c0-1.243.615-1.893 1.9-1.893h8.627c1.278 0 1.893.65 1.893 1.894v5.23c0 1.243-.615 1.893-1.893 1.893h-4.15c-.417 0-.622.068-.909.369l-2.167 2.14zm-.567-8.668h6.884a.433.433 0 00.423-.438.425.425 0 00-.423-.417H4.095a.419.419 0 00-.417.417c0 .24.184.438.417.438zm0 2.167h6.884a.427.427 0 000-.855H4.095a.425.425 0 00-.417.424c0 .24.184.43.417.43zm0 2.173h4.484c.24 0 .424-.191.424-.423 0-.24-.185-.431-.424-.431H4.095a.422.422 0 00-.417.43.42.42 0 00.417.424z"})});var M=i(92607),w=i(37888),C=i(72126),_=i(82990),k=i(50906),T=i(96802),I=i(39699),P=i(84210),x=i(87279),Z=i(18514),F=i(92547),A=i(57559),E=i(81870),B=i(26909),R=i(44514),D=i(79131),L=i(84076),N=i(78140),O=i(28992),V=i(40721),U=i(89728),W=i(31278),z=i(76798),K=i(72495),H=i(49085),G=i(61766),q=i(43700),j=i(69872);class Y extends s.Z{constructor(){super(...arguments),this.storeTypes={hovered:H.default.createClass(!1),buttonPopupStore:H.default.createClass(new G.Z)}}renderComponent(){const{schema:e,property:t,format:i,showAsSectionMenu:a,handlePageSectionClick:o}=this.props,s=e[t];if(!s)return;const r=this.getPropertyVisibility(s);return n()(j.Z,{onMouseEnter:()=>this.stores.hovered.setState(!0),onMouseLeave:()=>this.stores.hovered.setState(!1),focused:this.stores.hovered.state,showDragHandle:!this.environment.device.isMobile,showExtensionArrow:!1,propertySchema:s,format:j.Z.DisplayFormat.Name,dontShrinkRight:!0,ignoreLocalHoverState:!0,locked:this.props.locked,onClick:()=>{if(!this.props.locked){const e=this.stores.buttonPopupStore.state;e.setState({open:!e.state.open})}},right:n()(q.Z,a&&o?{buttonPopupStore:this.stores.buttonPopupStore.state,visibility:r,visibilityLevels:["show","hide","hide_if_empty","inline","minimal"],locked:this.props.locked,onSelect:e=>o(e,t,i),onClose:()=>this.stores.hovered.setState(!1),type:"relation_property",propertySchema:s,showAsMenu:!0}:{buttonPopupStore:this.stores.buttonPopupStore.state,visibility:r,locked:this.props.locked,onSelect:e=>this.handleVisibilitySelectClick(e),onClose:()=>this.stores.hovered.setState(!1),type:"property",propertySchema:s})},t)}getPropertyVisibility(e){const{visibility:t}=this.props;switch(t){case"hide_if_empty":return d.kq({propertySchema:e})?"hide_if_empty":"show";default:return t}}handleVisibilitySelectClick(e){const{property:t,format:i,store:a}=this.props;I.createAndCommit({userAction:"CustomizePageMenu.handleShowAsClick",environment:this.environment,perform:n=>{l.M0({property:t,visibility:e,format:i,store:a,transaction:n})}})}}Y.displayName="CustomizePageMenuPropertyMenuItem";const $=Y;class Q extends s.Z{constructor(){super(...arguments),this.storeTypes={lockStore:F.Z},this.handleDraggableDrop=e=>{const t=this.getCollectionPageProperties(),i=this.props.store;if(t){const a=e.map((e=>t.find((t=>t.property===e))));l.D2({environment:this.environment,properties:a,store:i})}},this.handleDraggableDropSections=e=>{const t=this.getCollectionPageSections(),i=this.props.store;if(t){const a=e.map((e=>t.find((t=>t.section===e))));t&&I.createAndCommit({userAction:"CustomizePageMenu.handleDraggableDropSections",environment:this.environment,perform:e=>{l.Do({environment:this.environment,pageSectionFormats:a,store:i,transaction:e})}})}},this.handleShowAsClick=(e,t,i,a)=>{const n=d.$0();if(!n)return!1;let o=a.collection_page_sections?C.Xh(a.collection_page_sections):[];if(!i[t])return;const s=o.findIndex((e=>e.section===t));-1!==s?o[s]={section:t,visibility:e}:o=[...o,{section:t,visibility:e}];const r="inline"===e||"minimal"===e?"section":"show";o&&(I.createAndCommit({userAction:"CustomizePageMenu.handleShowAsClick",environment:this.environment,perform:e=>{l.Do({environment:this.environment,pageSectionFormats:o,store:n,transaction:e}),l.M0({property:t,visibility:r,store:n,format:a,transaction:e})}}),k.K1b(this.environment,{from:"page_properties",mode:"inline"===e?"page_section":"minimal"===e?"minimal_page_section":"property"}))},this.handleShowAsSectionMenuClick=(e,t,i)=>{const a=d.$0();if(!a)return;let n=i.collection_page_sections?C.Xh(i.collection_page_sections):[];if("inline"===e||"minimal"===e){const o=n.findIndex((e=>e.section===t));-1!==o?n[o]={section:t,visibility:e}:n=[...n,{section:t,visibility:e}];const s="inline"===e||"minimal"===e?"section":"show";n&&(I.createAndCommit({userAction:"CustomizePageMenu.handleShowAsPageSectionClick",environment:this.environment,perform:e=>{l.Do({environment:this.environment,pageSectionFormats:n,store:a,transaction:e}),l.M0({property:t,visibility:s,store:a,format:i,transaction:e})}}),k.K1b(this.environment,{from:"page_properties",mode:"minimal"===e?"minimal_page_section":"page_section"}))}else{const n=v.AX.find((t=>t===e));if(!n)return;I.createAndCommit({userAction:"CustomizePageMenu.handleShowAsPropertyClick",environment:this.environment,perform:e=>{l.M0({property:t,visibility:n,store:a,format:i,transaction:e})}}),k.K1b(this.environment,{from:"page_properties",mode:"property"})}},this.handleToggleLockClick=()=>{const e=d.$0();if(!e)return!1;const t=e.getParentBlockStore();t&&(I.createAndCommit({userAction:"CustomizePageMenu.handleToggleLockClick",environment:this.environment,perform:e=>{T.Wq({environment:this.environment,store:t,isLocked:!d.p1(),transaction:e})}}),this.stores.lockStore.setState({justUnlocked:!this.stores.lockStore.state.justUnlocked}))}}renderComponent(){const{device:e}=this.environment,t=this.createComputedStore((()=>"page"===this.props.type?this.props.store.isExternalObjectInstancePageBlockStore():this.props.store.isSyncedCollection()));let i;i=e.isMobile?{menuType:x.og.Modal,right:n()(V.DoneMenuText,{}),onClickRight:l.xv,title:this.props.intl.formatMessage({id:"customizePageMenu.mobileHeader.label",defaultMessage:"Customize page"})}:{menuType:x.og.Popup,minWidth:400};const a=this.getNormalizedFormat();return o.createElement(N.Z,h()({},i,{header:this.renderHeader()}),(this.props.locked||this.stores.lockStore.state.justUnlocked)&&this.renderLockControls(),this.renderPageSectionsSectionMenuItem(a,t.state),this.renderPropertiesSectionMenuItem(a))}renderLockControls(){return n()("div",{style:{fontSize:12,display:"flex",justifyContent:"center",alignItems:"center",borderTop:`1px solid ${this.theme.regularDividerColor}`,borderBottom:`1px solid ${this.theme.regularDividerColor}`,background:this.theme.sidebarBackground,color:this.theme.mediumTextColor,paddingTop:6,paddingBottom:6}},void 0,n()("span",{style:{display:"inline-block",verticalAlign:"middle",paddingRight:6}},void 0,this.stores.lockStore.state.justUnlocked?(0,w.U)({height:12,width:12,fill:this.theme.mediumIconColor}):(0,S.b)({height:12,width:12,fill:this.theme.mediumIconColor})),this.stores.lockStore.state.justUnlocked?n()(r.FormattedMessage,{id:"customizePageMenu.unlocked.header",defaultMessage:"Settings unlocked on parent database."}):n()(r.FormattedMessage,{id:"customizePageMenu.locked.header",defaultMessage:"Settings locked on parent database."}),n()(U.Z,{style:{fontSize:12,color:this.theme.mediumTextColor,fontWeight:_.Z.fontWeight.semibold,marginLeft:2,paddingLeft:4,paddingRight:4,height:20},onClick:this.handleToggleLockClick},void 0,this.stores.lockStore.state.justUnlocked?n()(r.FormattedMessage,{id:"customizePageMenu.lock.label",defaultMessage:"Re-lock"}):n()(r.FormattedMessage,{id:"customizePageMenu.unlock.label",defaultMessage:"Unlock"})))}renderPropertiesSectionMenuItem(e){if(!this.getSchema()||"page"===this.props.type)return;const t=this.getPageCustomization(e);if(!t)return;const{propertyVisibility:i}=t;if(!i)return;const a=i.reduce(((e,t)=>(e[t.property]=t.visibility,e)),{}),o=this.getCollectionPageSections().filter((e=>"inline"===e.visibility||"minimal"===e.visibility)).map((e=>e.section)),s=C.e5(this.getCollectionPageProperties().map((e=>e.property)),o);return n()(K.Z,{style:{opacity:this.props.locked?.5:1},title:n()(r.FormattedMessage,{id:"customizePageMenu.propertiesSection.header",defaultMessage:"Properties"})},void 0,this.renderDraggablePageProperties(s,a,e,this.handleDraggableDrop))}renderPageSectionsSectionMenuItem(e,t){const i=this.props.store,a=this.getSchema();if(!a||!i)return;const s=this.getPageCustomization(e);if(!s)return;const{pageSectionVisibility:c}=s;if(!c)return;const u=this.getCollectionPageSections().map((e=>e.section)),m={topLevelDiscussions:!t,backLinks:!0,pageComments:!t};return o.createElement(o.Fragment,null,n()(K.Z,{style:{opacity:this.props.locked?.5:1},title:n()(r.FormattedMessage,{id:"customizePageMenu.sectionsSection.header",defaultMessage:"Sections"}),topBorder:!this.props.locked&&!this.stores.lockStore.state.justUnlocked},void 0,n()("div",{style:{marginLeft:8}},void 0,u.length>0&&n()(K.Z,{style:{opacity:this.props.locked?.5:1,width:"100%",paddingBottom:0,paddingTop:0}},void 0,n()(D.ZP,{direction:"vertical",keys:u,renderKey:t=>{if("collection"===this.props.type&&"inline"===(0,d.ab)(void 0,t))return this.renderRelationSectionMenuItem(a,t,e)},onDrop:this.handleDraggableDropSections}),n()(D.ZP,{direction:"vertical",keys:u,renderKey:t=>{if("collection"===this.props.type&&"minimal"===(0,d.ab)(void 0,t))return this.renderRelationSectionMenuItem(a,t,e)},onDrop:this.handleDraggableDropSections})),m.topLevelDiscussions&&n()(O.Z,{title:n()(r.FormattedMessage,{id:"customizePageMenu.pageSections.topLevelPageDiscussionsTitle",defaultMessage:"Top-level page discussions"}),icon:b({height:16,width:16}),right:n()(q.Z,{visibility:c.comments,visibilityLevels:["section_show","section_hide"],locked:this.props.locked,onSelect:t=>{l.W4({environment:this.environment,pageSection:"comments",visibility:t,store:i,format:e})},type:"page"})}),m.backLinks&&n()(O.Z,{title:n()(r.FormattedMessage,{id:"customizePageMenu.pageSections.backlinksTitle",defaultMessage:"Backlinks"}),icon:(0,y.J)({height:16,width:16,transform:"rotate(180deg)"}),right:n()(q.Z,{visibility:c.backlinks,locked:this.props.locked,visibilityLevels:["section_show","section_hide","section_collapsed"],onSelect:t=>{l.W4({environment:this.environment,pageSection:"backlinks",visibility:t,store:i,format:e})},type:"page"})}),m.pageComments&&n()(O.Z,{title:n()(r.FormattedMessage,{id:"customizePageMenu.pageSections.pageCommentsTitle",defaultMessage:"Page comments"}),icon:b({height:16,width:16}),right:n()(q.Z,{visibility:(0,d.ab)(c,"margin_comments"),visibilityLevels:["inline","minimal"],locked:this.props.locked,onSelect:t=>{l.W4({environment:this.environment,pageSection:"margin_comments",visibility:t,store:i,format:e})},type:"page"})}))))}renderRelationSectionMenuItem(e,t,i){var a;return n()("div",{style:{display:"inline-flex",width:"100%"}},void 0,n()(O.Z,{title:null===(a=e[t])||void 0===a?void 0:a.name,icon:(0,M.v)({height:14,width:14,color:this.theme.mediumIconColor,fill:this.theme.mediumIconColor,fontWeight:_.Z.fontWeight.medium}),disabled:this.props.locked,showDragHandle:!this.environment.device.isMobile,right:n()(q.Z,{visibility:(0,d.ab)(void 0,t),visibilityLevels:["section_hide","inline","minimal"],locked:this.props.locked,onSelect:a=>{this.handleShowAsClick(a,t,e,i)},type:"page",showAsMenu:!0})}))}renderHeader(){if(this.environment.device.isMobile)return;const{store:e}=this.props;if(e){const t=e.getIcon(),i="collection"===this.props.type?this.props.store.getParentBlockStore():void 0,a=t&&n()(W.Z,{icon:t,isEmptyPage:!1,size:14,disabled:!0,style:{display:"inline-flex",marginRight:2}}),s=n()(z.Z,{store:e,style:{display:"inline"}}),d=i?n()(R.Q,{prefix:n()(r.FormattedMessage,{id:"customizePageMenu.header.allPages.label",defaultMessage:"Customize all pages in"}),viewName:i?o.createElement(o.Fragment,null,n()(L.Z,{onClick:l.xv,href:(0,P.ZP)({store:i,fullyQualified:!1,pageVisitSource:f.tY.Breadcrumb}),inline:!0},void 0,a,s)):o.createElement(o.Fragment,null,a,s)}):n()(r.FormattedMessage,{id:"customizePageMenu.header.singlePage.label",defaultMessage:"Customize this page view"});return n()(O.Z,{style:{...B.ZP.headingStyle},title:d,right:n()(E.Z,{helpButtonContext:"customize_page_menu",href:(0,Z.UY)("guides.customizePageView")})})}}renderDraggablePageProperties(e,t,i,a){const o=this.getSchema(),s=this.props.store;return s instanceof A.NW?n()(D.ZP,{direction:"vertical",keys:e,renderKey:e=>{var a;const r=null===(a=o[e])||void 0===a?void 0:a.type;if("collection"===this.props.type)return n()($,"relation"===r?{schema:o,visibility:t[e],property:e,format:i,store:s,locked:this.props.locked,showAsSectionMenu:!0,handlePageSectionClick:this.handleShowAsSectionMenuClick}:{schema:o,visibility:t[e],property:e,format:i,store:s,locked:this.props.locked})},onDrop:a}):null}getSchema(){return this.props.type,this.props.store.getSchema()}getNormalizedFormat(){const{store:e}=this.props,t=e.getFormat(),i=this.getSchema();if(!i)return{};return v.iB(t,i,void 0,v.j5.Collection)}getCollectionPageProperties(){if("collection"!==this.props.type)return[];return this.getNormalizedFormat().collection_page_properties||[]}getCollectionPageSections(){if("collection"!==this.props.type)return[];return this.getNormalizedFormat().collection_page_sections||[]}getPageCustomization(e){return{propertyVisibility:e.property_visibility,pageSectionVisibility:e.page_section_visibility}}isWikiPage(){const e=this.props.store.getParentStore();return!!(e&&e instanceof A.G)&&e.isAssociatedCollectionAPageTree()}}Q.displayName="CustomizePageMenu";const J=Q;class X extends s.Z{constructor(){super(...arguments),this.renderModal=()=>{if(!u.Z.state.isOpen)return;const e=d.$0(),{mainEditorCurrentBlockStore:t}=c.default.state,i=m.default.state.open&&m.default.state.target||t;return e?n()(J,{store:e,type:"collection",intl:this.props.intl,locked:d.p1()}):i?n()(J,{store:i,type:"page",intl:this.props.intl,locked:!1}):void 0}}renderComponent(){const{device:e}=this.environment,t=u.Z.state;return n()(p.ZP,{popupType:e.isMobile?p.ZP.PopupType.SlideUp:p.ZP.PopupType.Popup,alignmentToOrigin:p.ZP.Alignment.Center,open:t.isOpen,render:this.renderModal,originRect:t.isOpen?t.rect:void 0,onDismiss:()=>l.xv()})}}X.displayName="CustomizePageMenuRenderer";const ee=(0,r.injectIntl)(X)},43700:(e,t,i)=>{i.d(t,{Z:()=>y});var a=i(23174),n=i.n(a),o=i(10434),s=i.n(o),r=i(67294),l=i(83355),d=i(42853),c=i(5366),u=i(61766),m=i(31194),p=i(31945),g=i(89728),h=i(6318);const f=(0,c.defineMessages)({hideSimpleLabel:{id:"customizePageMenuVisibilitySelect.hideSimple.label",defaultMessage:"Hide"},hideLabel:{id:"customizePageMenuVisibilitySelect.hide.label",defaultMessage:"Always hide"},hidePageLabel:{id:"customizePageMenuVisibilitySelect.off.label",defaultMessage:"Off"},showLabel:{id:"customizePageMenuVisibilitySelect.show.label",defaultMessage:"Always show"},showPageLabel:{id:"customizePageMenuVisibilitySelect.expanded.label",defaultMessage:"Expanded"},hideIfEmptyLabel:{id:"customizePageMenuVisibilitySelect.hideIfEmpty.label",defaultMessage:"Hide when empty"},collapsedLabel:{id:"customizePageMenuVisibilitySelect.collapsed.label",defaultMessage:"Show in popover"},defaultLabel:{id:"customizePageMenuVisibilitySelect.default.label",defaultMessage:"Default"},minimalLabel:{id:"customizePageMenuVisibilitySelect.minimal.label",defaultMessage:"Minimal"},sectionLabel:{id:"customizePageMenuVisibilitySelect.section.label",defaultMessage:"As page section"},propertyLabel:{id:"customizePageMenuVisibilitySelect.property.label",defaultMessage:"As property"}});class v extends l.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:u.Z}}renderComponent(){const{device:e}=this.environment;return n()(p.ZP,{popupType:e.isMobile?p.Z4.SlideUp:p.Z4.Popup,buttonPopupStore:this.stores.buttonPopupStore,renderOrigin:e=>r.createElement(g.Z,s()({style:{color:this.theme.mediumTextColor,paddingRight:0,height:this.environment.device.isMobile?32:22},disabled:this.props.locked},e),v.getVisibilityLabel(this.props.visibility,this.props.showAsMenu),(0,d.i)({width:10,marginLeft:4,marginRight:4,fill:this.theme.lightIconColor})),placementToOrigin:m.Iw.Bottom,onClose:this.props.onClose,render:e=>r.createElement(h.Z,s()({},this.props,{onClose:e.close}))})}static getVisibilityLabel(e,t){switch(e){case"hide":return r.createElement(c.FormattedMessage,f.hideLabel);case"show":return r.createElement(c.FormattedMessage,f.showLabel);case"hide_if_empty":return r.createElement(c.FormattedMessage,f.hideIfEmptyLabel);case"section_hide":return t?r.createElement(c.FormattedMessage,f.propertyLabel):r.createElement(c.FormattedMessage,f.hidePageLabel);case"section_show":return r.createElement(c.FormattedMessage,f.showPageLabel);case"section_collapsed":return r.createElement(c.FormattedMessage,f.collapsedLabel);case"inline":return t?r.createElement(c.FormattedMessage,f.sectionLabel):r.createElement(c.FormattedMessage,f.defaultLabel);case"minimal":return r.createElement(c.FormattedMessage,f.minimalLabel)}}}v.displayName="CustomizePageMenuVisibilitySelect";const y=v},6318:(e,t,i)=>{i.d(t,{Z:()=>b});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(83355),d=i(6695),c=i(36591),u=i(5366),m=i(11599),p=i(87279),g=i(52275),h=i(78140),f=i(32163),v=i(72495),y=i(43700);class S extends l.Z{constructor(){super(...arguments),this.renderMenuItem=e=>{const{device:t}=this.environment;return{key:e,render:i=>r.createElement(g.Z,n()({},i,{textWrapperStyle:{marginRight:0},title:s()("div",{style:{display:"flex",alignItems:"center",width:150}},void 0,s()("div",{},void 0,y.Z.getVisibilityLabel(e,this.props.showAsMenu))),right:this.props.visibility===e?s()("div",{style:{width:t.isMobile?16:14}},void 0,(0,c.e)()):void 0})),action:()=>{if("page"===this.props.type){const t=e;this.props.onSelect(t)}if("relation_property"===this.props.type){const t=e;this.props.onSelect(t)}else if("property"===this.props.type){const t=e;this.props.onSelect(t)}this.props.onClose&&this.props.onClose()}}}}renderComponent(){const{device:e}=this.environment,t=[{key:"visibilityLevels",render:e=>r.createElement(v.Z,n()({},e,{topBorder:0!==e.index})),items:"page"===this.props.type||"relation_property"===this.props.type?this.getPageOrPropertyVisibilityLevels().map((e=>this.renderMenuItem(e))):this.getPropertyVisibilityLevels().filter((e=>"property"!==this.props.type||"hide_if_empty"!==e||m.kq({propertySchema:this.props.propertySchema}))).map((e=>this.renderMenuItem(e)))}];let i;return i=e.isMobile?{menuType:p.og.Modal,title:s()(u.FormattedMessage,{id:"customizePageMenuVisibilitySelect.mobile.title",defaultMessage:"Select visibility"}),right:s()(u.FormattedMessage,{id:"customizePageMenuVisibilitySelect.mobile.doneButton.label",defaultMessage:"Done"}),onClickRight:()=>this.props.onClose&&this.props.onClose()}:{menuType:p.og.Popup,width:"auto",maxWidth:360},r.createElement(h.Z,i,s()(f.Z,{type:f.i.Vertical,initialFocus:void 0,sections:t}))}getPageOrPropertyVisibilityLevels(){return"page"!==this.props.type&&"relation_property"!==this.props.type?[]:this.props.visibilityLevels?this.props.visibilityLevels:d.Sn}getPropertyVisibilityLevels(){return d.AX}}S.displayName="CustomizePageMenuVisibilitySelectMenuItem";const b=S},81070:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ee});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(30120),l=i(67294),d=i(83355),c=i(13991),u=i(49085),m=i(8848),p=i(41797),g=i(5366),h=i(40506);const f=(0,g.defineMessages)({none:{defaultMessage:"None",id:"dateFormatHelpers.reminderMenuItems.none"},onTheDay:{defaultMessage:"On day of event {formattedTimeText}",id:"dateFormatHelpers.reminderMenuItems.onTheDayOfEvent"},hoursBefore:{defaultMessage:"{numberOfHours, plural, one {{numberOfHours} hour before} other {{numberOfHours} hours before}}",id:"dateFormatHelpers.reminderMenuItems.hoursBefore"},minutesBefore:{defaultMessage:"{numberOfMinutes, plural, one {{numberOfMinutes} minute before} other {{numberOfMinutes} minutes before}}",id:"dateFormatHelpers.reminderMenuItems.minutesBefore"},yearsBefore:{defaultMessage:"{numberOfYears, plural, one {{numberOfYears} year before {formattedTimeText}} other {{numberOfYears} years before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.yearsBefore"},daysBefore:{defaultMessage:"{numberOfDays, plural, one {{numberOfDays} day before {formattedTimeText}} other {{numberOfDays} days before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.daysBefore"},monthsBefore:{defaultMessage:"{numberOfMonths, plural, one {{numberOfMonths} month before {formattedTimeText}} other {{numberOfMonths} months before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.monthsBefore"},weeksBefore:{defaultMessage:"{numberOfWeeks, plural, one {{numberOfWeeks} week before {formattedTimeText}} other {{numberOfWeeks} weeks before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.weeksBefore"},atTimeOf:{defaultMessage:"At time of event",id:"dateFormatHelpers.reminderMenuItems.atTimeOfEvent"}});function v(e){const{reminder:t,shouldShowTime:i,intl:a,formatTime:n}=e;if(!t)return a.formatMessage(f.none);if(h.vJ(t)){const{unit:e,value:o,time:s}=t,r=n({start_time:s,time_format:"LT",humanReadable:!0,intl:a}),l=i?`(${r})`:"";return 0===o?a.formatMessage(f.onTheDay,{formattedTimeText:l}):"day"===e?a.formatMessage(f.daysBefore,{formattedTimeText:l,numberOfDays:o}):"year"===e?a.formatMessage(f.yearsBefore,{formattedTimeText:l,numberOfYears:o}):"month"===e?a.formatMessage(f.monthsBefore,{formattedTimeText:l,numberOfMonths:o}):a.formatMessage(f.weeksBefore,{formattedTimeText:l,numberOfWeeks:o})}{const{unit:e,value:i}=t;return 0===i?a.formatMessage(f.atTimeOf):"hour"===e?a.formatMessage(f.hoursBefore,{numberOfHours:i}):a.formatMessage(f.minutesBefore,{numberOfMinutes:i})}}var y=i(7057),S=i(53877),b=i(84795),M=i(42875),w=i(11843),C=i(36700),_=i(16001),k=i(72126),T=i(70203),I=i(97880),P=i(63143),x=i(50906),Z=i(87279),F=i(18514),A=i(77907),E=i(76150),B=i(77080),R=i(69582),D=i(52275),L=i(31945),N=i(37601),O=i(88359),V=i(1743),U=i(74194),W=i(78140),z=i(32163),K=i(72495),H=i(45959),G=i(24006),q=i(26388),j=i(64369),Y=i(83182),$=i(46247),Q=i(62069);class J extends d.Z{constructor(){super(...arguments),this.storeTypes={store:E.ZP,timezoneQuery:u.default.createClass("")},this.handleWindowKeyDown=e=>{"Escape"===e.key&&this.maybePreEmptivelyBlurInput()},this.handleWindowMouseDown=e=>{e.target instanceof HTMLInputElement&&e.target===document.activeElement||this.maybePreEmptivelyBlurInput()},this.handleDateFormatChange=e=>{var t,i;null===(t=(i=this.props).onChangeDateFormat)||void 0===t||t.call(i,e)},this.handleTimeFormatChange=e=>{var t,i;const a=this.getTimeFormatOptions()[e];null===(t=(i=this.props).onChangeTimeFormat)||void 0===t||t.call(i,a)},this.handleChangeReminder=e=>{const t=this.getDateValue();var i,a;if(e){if(h.vJ(e)){var n,o;null===(n=(o=this.props).onChangeValue)||void 0===n||n.call(o,{...t,reminder:{...e,defaultTimeZone:(0,M.r)()}})}else if("datetime"===t.type||"datetimerange"===t.type){var s,r;null===(s=(r=this.props).onChangeValue)||void 0===s||s.call(r,{...t,reminder:e})}}else null===(i=(a=this.props).onChangeValue)||void 0===i||i.call(a,{...t,reminder:e});x.IMD(this.environment,{date:t,reminder:e})},this.handleInputChange=e=>{const{device:t}=this.environment,{store:i}=this.stores;i.setState({...i.state,inputTemporaryValue:{...i.state.inputTemporaryValue,[i.state.focus]:e.target.value||""}}),t.isAndroid&&this.handleInputBlur()},this.handleStartDateInputChange=()=>{const{inputTemporaryValue:e}=this.stores.store.state,t=e.startDate;if(!t)return;const i=this.parseInputDateValue(t);if(!i)return E.pd.InvalidDate;const a={...this.getDateValue(),start_date:i},n=S.XI(a);if(!n)return E.pd.InvalidRange;this.applyValidDateState({newDate:a,currentMonth:n.start,resetField:E.Hv.StartDate})},this.handleStartTimeInputChange=()=>{const{inputTemporaryValue:e}=this.stores.store.state,t=e.startTime;if(!t)return;const i=this.parseInputTimeValue(t);if(!i)return E.pd.InvalidTime;const a=this.getDateValue();if(h.qg(a)){const{newDate:e,currentMonth:t}=S.vz({previous:a,updatedStartTime:i});this.applyValidDateState({newDate:e,currentMonth:t,resetField:E.Hv.StartTime}),this.resetInputState(E.Hv.EndDate),this.resetInputState(E.Hv.EndTime)}else{const e={...a,start_time:i},t=S.XI(e);this.applyValidDateState({newDate:e,currentMonth:t.start,resetField:E.Hv.StartTime})}},this.handleEndDateInputChange=()=>{const{inputTemporaryValue:e}=this.stores.store.state,t=e.endDate;if(!t)return;const i=this.parseInputDateValue(t);if(!i)return E.pd.InvalidDate;const a={...this.getDateValue(),end_date:i},n=S.XI(a);if(!n)return E.pd.InvalidRange;this.applyValidDateState({newDate:a,currentMonth:n.end,resetField:E.Hv.EndDate})},this.handleEndTimeInputChange=()=>{const{inputTemporaryValue:e}=this.stores.store.state,t=e.endTime;if(!t)return;const i=this.parseInputTimeValue(t);if(!i)return E.pd.InvalidTime;const a={...this.getDateValue(),end_time:i},n=S.XI(a);if(!n)return E.pd.InvalidRange;this.applyValidDateState({newDate:a,currentMonth:n.end,resetField:E.Hv.EndTime})},this.handleInputBlur=e=>{const{focus:t}=this.stores.store.state;let i;t===E.Hv.StartDate?i=this.handleStartDateInputChange():t===E.Hv.StartTime?i=this.handleStartTimeInputChange():t===E.Hv.EndDate?i=this.handleEndDateInputChange():t===E.Hv.EndTime&&(i=this.handleEndTimeInputChange()),i?this.stores.store.setState({...this.stores.store.state,error:{...this.stores.store.state.error,[t]:i}}):this.stores.store.setState({...this.stores.store.state,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},inputIsFocused:!1,error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}})},this.handleInputSubmit=()=>{const{focus:e}=this.stores.store.state;let t;e===E.Hv.StartDate?t=this.handleStartDateInputChange():e===E.Hv.StartTime?t=this.handleStartTimeInputChange():e===E.Hv.EndDate?t=this.handleEndDateInputChange():e===E.Hv.EndTime&&(t=this.handleEndTimeInputChange()),t?this.stores.store.setState({...this.stores.store.state,error:{...this.stores.store.state.error,[e]:t}}):this.stores.store.setState({...this.stores.store.state,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}})},this.handleDayPickerDayClick=(e,t,i)=>{if(this.props.disabled)return;let a=k.Xh(this.getDateValue());const{focus:n}=this.stores.store.state,o=r.ou.fromJSDate(e).setLocale(h.ah).toFormat(S.Iq);if(!i.shiftKey||"date"!==a.type&&"datetime"!==a.type)if("daterange"===a.type||"datetimerange"===a.type){var s,l;n===E.Hv.StartDate||n===E.Hv.StartTime?a={...a,start_date:o}:n!==E.Hv.EndDate&&n!==E.Hv.EndTime||(a={...a,end_date:o});const e=S.NK(a,(0,M.r)());if(e.end&&e.end<e.start){if("datetimerange"===a.type){const{start_date:e,start_time:t,end_date:i,end_time:n}=a;a={...a,start_date:i,start_time:n,end_date:e,end_time:t}}else{const{start_date:e,end_date:t}=a;a={...a,start_date:t,end_date:e}}this.stores.store.setState({...this.stores.store.state,focus:n===E.Hv.StartDate||n===E.Hv.StartTime?E.Hv.EndDate:E.Hv.StartDate})}null===(s=(l=this.props).onChangeValue)||void 0===s||s.call(l,a),this.resetInputState(n);const t=n===E.Hv.StartDate||n===E.Hv.StartTime?E.Hv.EndDate:E.Hv.StartDate;this.stores.store.setState({...this.stores.store.state,focus:t})}else{var d,c;const e={...a,start_date:o};null===(d=(c=this.props).onChangeValue)||void 0===d||d.call(c,e),this.resetInputState(n)}else this.enableEndDate({dateValue:a,endDate:o})},this.handleDayPickerMonthChange=e=>{this.stores.store.setState({...this.stores.store.state,currentMonth:r.ou.fromJSDate(e)})},this.handleEndDateControlChange=()=>{const e=this.getDateValue();if("datetimerange"===e.type){var t,i;const a={type:"datetime",start_date:e.start_date,start_time:e.start_time,time_zone:e.time_zone,reminder:e.reminder};null===(t=(i=this.props).onChangeValue)||void 0===t||t.call(i,a)}else if("daterange"===e.type){var a,n;const t={type:"date",start_date:e.start_date,reminder:e.reminder};null===(a=(n=this.props).onChangeValue)||void 0===a||a.call(n,t)}else this.enableEndDate({dateValue:e})},this.handleAllDayChange=()=>{const e=this.getDateValue();if("date"===e.type){var t,i;const a={type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M.r)(),reminder:e.reminder&&h.AE(e.reminder)};null===(t=(i=this.props).onChangeValue)||void 0===t||t.call(i,a)}else if("daterange"===e.type){var a,n;const t={type:"datetimerange",start_date:e.start_date,start_time:"00:00",end_date:e.end_date,end_time:"00:00",time_zone:(0,M.r)(),reminder:e.reminder&&h.AE(e.reminder)};null===(a=(n=this.props).onChangeValue)||void 0===a||a.call(n,t)}else if("datetime"===e.type){var o,s;const t={type:"date",start_date:e.start_date,reminder:e.reminder&&h.wg(e.reminder,(0,M.r)())};null===(o=(s=this.props).onChangeValue)||void 0===o||o.call(s,t)}else{var r,l;const t={type:"daterange",start_date:e.start_date,end_date:e.end_date,reminder:e.reminder&&h.wg(e.reminder,(0,M.r)())};null===(r=(l=this.props).onChangeValue)||void 0===r||r.call(l,t)}},this.handleTimeZoneChange=e=>{const t=this.getDateValue();if("datetime"===t.type||"datetimerange"===t.type){var i,a;const n={...t,time_zone:e};null===(i=(a=this.props).onChangeValue)||void 0===i||i.call(a,n)}},this.handleStartInputDateFocus=()=>{const e=this.getDateValue(),t=S.NK(e,(0,M.r)());this.stores.store.setState({...this.stores.store.state,focus:E.Hv.StartDate,inputIsFocused:!0,currentMonth:t.start})},this.handleStartInputTimeFocus=()=>{const e=this.getDateValue(),t=S.NK(e,(0,M.r)());this.stores.store.setState({...this.stores.store.state,focus:E.Hv.StartTime,inputIsFocused:!0,currentMonth:t.start})},this.handleEndInputDateFocus=()=>{const e=this.getDateValue(),t=S.NK(e,(0,M.r)());t.end&&this.stores.store.setState({...this.stores.store.state,focus:E.Hv.EndDate,inputIsFocused:!0,currentMonth:t.end})},this.handleEndInputTimeFocus=()=>{const e=this.getDateValue(),t=S.NK(e,(0,M.r)());t.end&&this.stores.store.setState({...this.stores.store.state,focus:E.Hv.EndTime,inputIsFocused:!0,currentMonth:t.end})},this.handleClearClick=()=>{var e,t;null===(e=(t=this.props).onChangeValue)||void 0===e||e.call(t,void 0)},this.getTimeFormatOptions=()=>(0,w.E)(c.SP).time,this.getSelectedTimeFormatType=()=>{const e=this.getTimeDisplayFormat(),t=this.getTimeFormatOptions();for(const i in t)if(t[i]===e)return i;return"12h"},this.tooltipOriginGap=12}willMount(e){super.willMount(e),this.openTimeFormat=S.Lg((0,M.r)()),window.addEventListener("mousedown",this.handleWindowMouseDown),window.addEventListener("keydown",this.handleWindowKeyDown,!0)}willUnmount(){super.willUnmount(),window.removeEventListener("mousedown",this.handleWindowMouseDown),window.removeEventListener("keydown",this.handleWindowKeyDown,!0)}maybePreEmptivelyBlurInput(){const{inputIsFocused:e}=this.stores.store.state;e&&this.handleInputBlur()}renderComponent(){const{device:e,WindowSizeStore:t}=this.environment,{disabled:i,canConfigureCollection:a,shouldShowReminder:n,header:o,isTemplatePage:r}=this.props,{inputIsFocused:d}=this.stores.store.state,c=this.getDateValue(),u="datetime"===c.type||"datetimerange"===c.type,m="daterange"===c.type||"datetimerange"===c.type,p=r&&B.default.checkGate("template-variable-properties"),h=s()("div",{style:{paddingTop:e.isMobile?16:8,paddingBottom:e.isMobile?16:8,paddingLeft:e.isMobile?t.getSafePaddingLeftCSS(16):14,paddingRight:e.isMobile?t.getSafePaddingRightCSS(16):14,display:u?"block":"flex",...e.isMobile&&{boxShadow:`\n\t\t\t\t\t\t\t0 1px 0 ${this.theme.regularDividerColor}\n\t\t\t\t\t\t`,position:"relative",zIndex:2},background:e.isMobile?this.theme.popoverBackground:void 0}},void 0,this.renderStartInput(),m&&s()("div",{style:{width:12,height:8}}),this.renderEndInput(),this.renderTimeZone());let f;return f=e.isMobile?{menuType:Z.og.Modal,title:s()(g.FormattedMessage,{defaultMessage:"Date",id:"LuxonDatePropertyMenu.mobileDate.title"}),right:s()(g.FormattedMessage,{defaultMessage:"Done",id:"LuxonDatePropertyMenu.mobileDoneButton.label"}),left:n?this.renderRemindersHelp():void 0,onClickRight:this.props.onDismiss,header:h}:{menuType:Z.og.Popup,maxHeight:"none",width:270,header:o},s()(V.Z,{capture:d,allowEsc:!0},void 0,s()(V.Z,{capture:!0,allowUndo:!0,allowEsc:!0},void 0,l.createElement(W.Z,f,s()(N.Z,{show:d}),p&&s()(X,{onChangeValue:this.props.onChangeValue}),s()(K.Z,{topBorder:!0},void 0,!e.isMobile&&h,s()("div",{style:{padding:e.isMobile?"16px 14px 16px":"4px 0 4px",textAlign:"center",...e.isMobile&&{borderBottom:`1px solid ${this.theme.regularDividerColor}`,background:this.theme.popoverBackground}}},void 0,this.renderCalendar())),!i&&this.renderControls(),!i&&a&&s()(K.Z,{topBorder:!0},void 0,this.renderFormatPopup()),!i&&s()(K.Z,{topBorder:!0},void 0,this.renderClearButton()),!i&&!e.isMobile&&n&&s()(K.Z,{topBorder:!0},void 0,this.renderRemindersHelp()))))}getLocale(){return this.props.locale||this.props.intl.locale}renderStartInput(){const{device:e}=this.environment,{disabled:t}=this.props,{focus:i,inputTemporaryValue:a,error:n}=this.stores.store.state,o=this.getDateValue(),r=S.NK(o,(0,M.r)(),this.getLocale()),l=Boolean(n.startDate||n.startTime),d="datetime"===o.type||"datetimerange"===o.type,c="daterange"===o.type||"datetimerange"===o.type,u=i===E.Hv.StartDate||i===E.Hv.StartTime,m=(0,P.z4)(a.startDate)?r.start.toFormat(this.getDateDisplayFormat()):a.startDate,p=(0,P.z4)(a.startTime)?r.start.toFormat(this.getTimeDisplayFormat()):a.startTime,g=(0,P.z4)(a.startDate)?r.start.toFormat(S.Iq):a.startDate,f=(0,P.z4)(a.startTime)?r.start.toFormat(h.jK):a.startTime;return s()("div",{style:{...l?this.getInputWrapErrorStyle():u&&c?this.getInputWrapActiveStyle():this.getInputWrapInactiveStyle(),fontSize:e.isMobile?16:14}},void 0,s()(q.Z,{renderTooltip:()=>this.getInputErrorMessage(n.startDate),originGap:this.tooltipOriginGap,forceVisibleState:Boolean(n.startDate),placement:q.Z.Placement.Left,render:()=>e.isMobile?s()(U.Z,{type:"date",format:U.B.Transparent,value:g,onChange:this.handleInputChange,onFocus:this.handleStartInputDateFocus,onBlur:this.handleInputBlur,onSubmit:this.handleInputSubmit,disabled:t,size:1}):s()(U.Z,{selectAll:!0,format:U.B.Transparent,value:m,focusInitial:i===E.Hv.StartDate,onChange:this.handleInputChange,onFocus:this.handleStartInputDateFocus,onBlur:this.handleInputBlur,onSubmit:this.handleInputSubmit,disabled:t,size:1})}),d&&this.getInputSeparator(),d&&s()(q.Z,{renderTooltip:()=>this.getInputErrorMessage(n.startTime),originGap:this.tooltipOriginGap,forceVisibleState:Boolean(n.startTime),placement:q.Z.Placement.Right,render:()=>e.isMobile?s()(U.Z,{type:"time",format:U.B.Transparent,value:f,onChange:this.handleInputChange,onFocus:this.handleStartInputTimeFocus,onBlur:this.handleInputBlur,onSubmit:this.handleInputSubmit,size:1,disabled:t}):s()(U.Z,{format:U.B.Transparent,value:p,focusInitial:i===E.Hv.StartTime,onChange:this.handleInputChange,onFocus:this.handleStartInputTimeFocus,onBlur:this.handleInputBlur,onSubmit:this.handleInputSubmit,size:1,disabled:t})}))}renderEndInput(){const{device:e}=this.environment,{disabled:t}=this.props,i=this.getDateValue(),a=S.NK(i,(0,M.r)(),this.getLocale()),n="datetime"===i.type||"datetimerange"===i.type;if(a.end){const{focus:i,error:o,inputTemporaryValue:r}=this.stores.store.state,l=Boolean(o.endDate||o.endTime),d=i===E.Hv.EndDate||i===E.Hv.EndTime,c=(0,P.z4)(r.endDate)?a.end.toFormat(this.getDateDisplayFormat()):r.endDate,u=(0,P.z4)(r.endTime)?a.end.toFormat(this.getTimeDisplayFormat()):r.endTime,m=(0,P.z4)(r.endDate)?a.end.toFormat(S.Iq):r.endDate,p=(0,P.z4)(r.endTime)?a.end.toFormat(h.jK):r.endTime,g=this.getDateRangeBounds(),f=g&&g.earliestValidEnd;return s()("div",{style:{...l?this.getInputWrapErrorStyle():d?this.getInputWrapActiveStyle():this.getInputWrapInactiveStyle(),fontSize:e.isMobile?16:14}},void 0,s()(q.Z,{renderTooltip:()=>this.getInputErrorMessage(o.endDate),originGap:this.tooltipOriginGap,forceVisibleState:Boolean(o.endDate),placement:q.Z.Placement.Left,render:()=>e.isMobile?s()(U.Z,{type:"date",format:U.B.Transparent,value:m,onChange:this.handleInputChange,onFocus:this.handleEndInputDateFocus,onBlur:this.handleInputBlur,onSubmit:this.handleInputSubmit,size:1,disabled:t,inputElementAttributes:{min:f}}):s()(U.Z,{format:U.B.Transparent,value:c,focusInitial:i===E.Hv.EndDate,onChange:this.handleInputChange,onFocus:this.handleEndInputDateFocus,onBlur:this.handleInputBlur,onSubmit:this.handleInputSubmit,size:1,disabled:t})}),n&&this.getInputSeparator(),n&&s()(q.Z,{renderTooltip:()=>this.getInputErrorMessage(o.endTime),originGap:this.tooltipOriginGap,forceVisibleState:Boolean(o.endTime),placement:q.Z.Placement.Right,render:()=>e.isMobile?s()(U.Z,{type:"time",format:U.B.Transparent,value:p,onChange:this.handleInputChange,onFocus:this.handleEndInputTimeFocus,onBlur:this.handleInputBlur,onSubmit:this.handleInputSubmit,size:1,disabled:t}):s()(U.Z,{format:U.B.Transparent,value:u,focusInitial:i===E.Hv.EndTime,onChange:this.handleInputChange,onFocus:this.handleEndInputTimeFocus,onBlur:this.handleInputBlur,onSubmit:this.handleInputSubmit,size:1,disabled:t})}))}}renderTimeZone(){const{device:e}=this.environment,{intl:t}=this.props,i=this.getDateValue();if(("datetime"===i.type||"datetimerange"===i.type)&&i.time_zone!==(0,M.r)())return s()(j.Z,{isSmall:!0,isMobile:e.isMobile,style:{marginTop:8}},void 0,(0,p.E)(t)[i.time_zone])}renderCalendar(){const{firstDayOfWeek:e}=this.props,t=this.getDateValueForceCurrentTimeZone(),i=S.NK(t,(0,M.r)()),a=this.stores.store.state.currentMonth||i.start,{focus:n}=this.stores.store.state;if(i.end){const t=i.start.toJSDate(),o=i.end.toJSDate(),r=n===E.Hv.StartDate||n===E.Hv.StartTime;return s()(A.LazyDayPicker,{className:"notion-date-property-menu notranslate",weekStartsOn:e,numberOfMonths:1,defaultMonth:a.toJSDate(),month:a.toJSDate(),locale:c.SP,modifiers:{range:{from:t,to:o},...r?{end:o,start:t}:{start:t,end:o}},modifiersStyles:{range:J.dayPickerRangeDayStyle,start:r?this.getDayPickerActiveDayStyle():this.getDayPickerInactiveDayStyle(),end:r?this.getDayPickerInactiveDayStyle():this.getDayPickerActiveDayStyle()},showOutsideDays:!0,fixedWeeks:!0,onDayClick:this.handleDayPickerDayClick,onMonthSelected:this.handleDayPickerMonthChange})}{const t=i.start.toJSDate();return s()(A.LazyDayPicker,{className:"notion-date-property-menu notranslate",numberOfMonths:1,weekStartsOn:e,defaultMonth:a.toJSDate(),month:a.toJSDate(),locale:c.SP,selected:[t],modifiers:{start:t},modifiersStyles:{start:this.getDayPickerActiveDayStyle()},showOutsideDays:!0,fixedWeeks:!0,onDayClick:this.handleDayPickerDayClick,onMonthSelected:this.handleDayPickerMonthChange})}}renderControls(){const{device:e}=this.environment,{shouldShowReminder:t}=this.props;return e.isMobile?s()(K.Z,{topBorder:!0},void 0,t&&this.renderReminderControl(),this.renderEndDateControl(),this.renderAllDayControl()):s()(l.Fragment,{},void 0,t&&s()(K.Z,{topBorder:!0},void 0,this.renderReminderControl()),s()(K.Z,{topBorder:!0},void 0,this.renderEndDateControl(),this.renderAllDayControl()))}renderEndDateControl(){const e=this.getDateValue();return s()(D.Z,{focused:!1,onClick:this.handleEndDateControlChange,title:s()(g.FormattedMessage,{defaultMessage:"End date",id:"LuxonDatePropertyMenu.menuItem.endDate.label"}),right:s()(G.Z,{on:"daterange"===e.type||"datetimerange"===e.type,onClick:this.handleEndDateControlChange})})}renderAllDayControl(){const e=this.getDateValue();return s()(D.Z,{focused:!1,onClick:this.handleAllDayChange,title:s()(g.FormattedMessage,{defaultMessage:"Include time",id:"LuxonDatePropertyMenu.menuItem.includeTime.label"}),right:s()(G.Z,{on:"date"!==e.type&&"daterange"!==e.type,onClick:this.handleAllDayChange})})}renderReminderControl(){const{device:e}=this.environment,{intl:t}=this.props,i=this.getDateValue();return s()(L.ZP,{popupType:e.isMobile?L.Z4.SlideUp:L.Z4.Popup,placementToOrigin:L.pO.Right,renderOrigin:a=>l.createElement(O.Z,n()({},a,{icon:(0,C.m)({width:14}),title:s()(g.FormattedMessage,{defaultMessage:"Remind",id:"LuxonDatePropertyMenu.menuItem.remind.label"}),focused:!1,showExtensionArrow:e.isMobile,right:v({reminder:i.reminder,intl:t,formatTime:y.mr})})),render:a=>{let o;o=e.isMobile?{menuType:Z.og.Modal,title:s()(g.FormattedMessage,{defaultMessage:"Remind",id:"LuxonDatePropertyMenu.mobileRemindModal.title"}),right:s()(g.FormattedMessage,{defaultMessage:"Done",id:"LuxonDatePropertyMenu.mobileDoneReminderButton.label"}),onClickRight:a.close}:{menuType:Z.og.Popup,width:250};const r=("date"===i.type||"daterange"===i.type?h.PI:h.dG).map((e=>{const i=v({reminder:e,shouldShowTime:!0,intl:t,formatTime:y.mr});return{key:i,action:t=>{this.handleChangeReminder(e),a.close()},render:(e,t)=>l.createElement(D.Z,n()({},e,{title:i}))}}));return l.createElement(W.Z,o,s()(z.Z,{type:z.i.Vertical,sections:[{key:"reminder section",render:e=>l.createElement(K.Z,e),items:r}],initialFocus:void 0}))}})}renderFormatPopup(){const{device:e}=this.environment;return s()(L.ZP,{popupType:e.isMobile?L.Z4.SlideUp:L.Z4.Popup,placementToOrigin:L.pO.Right,renderOrigin:t=>l.createElement(D.Z,n()({},t,{icon:(0,_.r)({width:14}),title:s()(g.FormattedMessage,{defaultMessage:"Date format & timezone",id:"LuxonDatePropertyMenu.menuItem.formatAndTimezone.label"}),focused:!1,showExtensionArrow:e.isMobile})),render:t=>{let i;return i=e.isMobile?{menuType:Z.og.Modal,title:s()(g.FormattedMessage,{defaultMessage:"Date format",id:"LuxonDatePropertyMenu.mobileDateFormatModal.title"}),right:s()(g.FormattedMessage,{defaultMessage:"Done",id:"LuxonDatePropertyMenu.mobileDoneButton.label"}),onClickRight:t.close}:{menuType:Z.og.Popup,width:250},l.createElement(W.Z,i,s()(K.Z,{},void 0,this.renderDateFormatControl(),this.showTimeFormatControl()&&this.renderTimeFormatControl(),this.renderTimeZoneControl()))}})}renderDateFormatControl(){const e=this.props.dateFormat||h.sF,{intl:t}=this.props,i={menuTitle:t.formatMessage({defaultMessage:"Date format",id:"LuxonDatePropertyMenu.dateFormatDropdownButton.label"}),items:h.Zy,getKey:e=>e,selectedItem:e,onSelect:this.handleDateFormatChange,renderItem:e=>l.createElement(D.Z,n()({},e,{title:t.formatMessage(h.fy[e.value])})),renderOrigin:i=>l.createElement(O.Z,n()({focused:!1,title:s()(g.FormattedMessage,{defaultMessage:"Date format",id:"LuxonDatePropertyMenu.menuItem.format.label"}),right:e?t.formatMessage(h.fy[e]):s()(g.FormattedMessage,{defaultMessage:"Empty",id:"LuxonDatePropertyMenu.formatMenu.emptyButton.label"})},i))};return l.createElement(H.Z,i)}renderTimeFormatControl(){const e=this.getDateValue(),t="date"===e.type||"daterange"===e.type,i=this.getTimeDisplayFormat(),{intl:a}=this.props,o=this.getSelectedTimeFormatType(),r={menuTitle:a.formatMessage({defaultMessage:"Time format",id:"LuxonDatePropertyMenu.timeFormatMenu.title"}),items:h.L7,getKey:e=>e,selectedItem:o,onSelect:this.handleTimeFormatChange,renderItem:e=>l.createElement(D.Z,n()({},e,{title:a.formatMessage(h.Fi[e.value])})),disabled:t,renderOrigin:e=>l.createElement(O.Z,n()({focused:!1,title:s()(g.FormattedMessage,{defaultMessage:"Time format",id:"LuxonDatePropertyMenu.menuItem.timeFormat.label"}),disabled:t,right:!t&&(i?a.formatMessage(h.Fi[o]):s()(g.FormattedMessage,{defaultMessage:"Empty",id:"LuxonDatePropertyMenu.timeFormatMenu.emptyButton.label"}))},e))};return l.createElement(H.Z,r)}renderTimeZoneControl(){const e=this.getDateValue(),t="date"===e.type||"daterange"===e.type,i=this.getTimeZone();return s()(Q.Z,{renderOrigin:e=>l.createElement(O.Z,n()({},e,{focused:!1,title:s()(g.FormattedMessage,{defaultMessage:"Timezone",id:"datePropertyMenu.menuItem.time.label"}),disabled:t,right:!t&&S.er(i)})),onSelect:e=>this.handleTimeZoneChange(e)})}renderClearButton(){return s()(D.Z,{focused:!1,onClick:this.handleClearClick,title:s()(g.FormattedMessage,{defaultMessage:"Clear",id:"LuxonDatePropertyMenu.clearButton.label"})})}renderRemindersHelp(){const{device:e}=this.environment;return e.isMobile?s()($.Z,{href:(0,F.UY)("guides.reminders"),analyticsFrom:"date_selector"}):s()(Y.Z,{title:s()(g.FormattedMessage,{defaultMessage:"Learn about reminders",id:"LuxonDatePropertyMenu.learnMore.helpButton.label"}),href:(0,F.UY)("guides.reminders"),analyticsFrom:"date_selector"})}enableEndDate(e){const{dateValue:t,endDate:i,endTime:a}=e;if("datetime"===t.type){var n,o;const e={type:"datetimerange",start_date:t.start_date,start_time:t.start_time,end_date:i||t.start_date,end_time:a||t.start_time,time_zone:t.time_zone,reminder:t.reminder};null===(n=(o=this.props).onChangeValue)||void 0===n||n.call(o,e),this.stores.store.setState({...this.stores.store.state,focus:E.Hv.EndDate})}else if("date"===t.type){var s,r;const e={type:"daterange",start_date:t.start_date,end_date:i||t.start_date,reminder:t.reminder};null===(s=(r=this.props).onChangeValue)||void 0===s||s.call(r,e),this.stores.store.setState({...this.stores.store.state,focus:E.Hv.EndDate})}else(0,I.t1)(t)}getDateValue(){const{value:e}=this.props;return e&&!k.i2(e)?e:this.openTimeFormat}getDateRangeBounds(){const e=this.getDateValue();if(h.h(e)||h.qg(e)){const t=S.NK(e,(0,M.r)());return{earliestValidEnd:t.start.toFormat(S.Iq),latestValidStart:t.end.toFormat(S.Iq)}}}getDateValueForceCurrentTimeZone(){const{value:e}=this.props;return e&&!k.i2(e)?"datetime"===e.type||"datetimerange"===e.type?{...e,time_zone:(0,M.r)()}:e:this.openTimeFormat}getDateDisplayFormat(){const{dateFormat:e}=this.props;return void 0===e||"relative"===e||"ll"===e?h.oq(this.getLocale()):h.jG(e)}getTimeDisplayFormat(){const{timeFormat:e}=this.props;return e?h._F(e):h.Sc}showTimeFormatControl(){return!w.S.includes(c.SP)}getTimeZone(){const e=this.getDateValue();return"datetime"===e.type||"datetimerange"===e.type?e.time_zone:(0,M.r)()}parseInputDateValue(e){const{intl:t}=this.props;return this.environment.device.isMobile?(0,b.parseDateValueWithInputFormat)(e,S.Iq,t):(0,b.parseDateValueWithInputFormat)(e,this.getDateDisplayFormat(),t)}parseInputTimeValue(e){return(0,b.parseTimeValueWithInputFormat)(e,this.getTimeDisplayFormat(),this.props.intl)}applyValidDateState(e){var t,i;const{newDate:a,currentMonth:n,resetField:o}=e;null===(t=(i=this.props).onChangeValue)||void 0===t||t.call(i,a),this.stores.store.setState({...this.stores.store.state,currentMonth:n}),this.resetInputState(o)}resetInputState(e){const{state:t}=this.stores.store;this.stores.store.setState({...t,error:{...t.error,[t.focus]:void 0},inputTemporaryValue:{...t.inputTemporaryValue,[t.focus]:void 0}})}getInputErrorMessage(e){const{intl:t}=this.props;switch(e){case E.pd.InvalidDate:return t.formatMessage({id:"LuxonDatePropertyMenu.invalidDateError.tooltip",defaultMessage:"Invalid date"});case E.pd.InvalidRange:return t.formatMessage({id:"LuxonDatePropertyMenu.invalidDateOrTimeRangeError.tooltip",defaultMessage:"Invalid range"});case E.pd.InvalidTime:return t.formatMessage({id:"LuxonDatePropertyMenu.invalidTimeError.tooltip",defaultMessage:"Invalid time"});default:return}}getInputSeparator(){return s()("div",{style:{height:14,width:1,background:this.theme.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}})}getInputWrapStyle(){return{display:"flex",alignItems:"center",borderRadius:3,height:28,lineHeight:1.2,background:this.theme.inputBackground,paddingLeft:8,paddingRight:8,flexBasis:"50%"}}getInputWrapInactiveStyle(){return{...this.getInputWrapStyle(),boxShadow:this.theme.inputBoxShadow,flexGrow:1}}getInputWrapErrorStyle(){return{...this.getInputWrapStyle(),boxShadow:`inset 0 0 0 2px ${m.ZP.red}`,background:m.ZP.redWithAlpha(.15),flexGrow:1}}getInputWrapActiveStyle(){return{...this.getInputWrapStyle(),boxShadow:`inset 0 0 0 2px ${m.ZP.blue}`,background:m.ZP.blueWithAlpha(.15),flexGrow:1}}getDayPickerActiveDayStyle(){return{backgroundColor:m.ZP.blue,color:m.ZP.white}}getDayPickerInactiveDayStyle(){return{backgroundColor:m.ZP.blueWithAlpha(.43)}}}function X(e){window.__c={n:"RelativeDateShortcutsSection"};const{onChangeValue:t}=e,i=(0,g.useIntl)();return s()(K.Z,{title:s()(g.FormattedMessage,{defaultMessage:"Shortcuts",id:"DatePropertyMenu.menuItem.shortcuts.label"})},void 0,["now","today"].map((e=>s()(D.Z,{title:s()(R.w,{templateVariableType:e}),caption:T.Z08(e,i),inline:!0,onClick:()=>{null==t||t(e)},focused:!1},`relative-date-shortcut-${e}`))))}J.displayName="DatePropertyMenu",J.dayPickerRangeDayStyle={backgroundColor:m.ZP.blueWithAlpha(.15)};const ee=(0,g.injectIntl)(J)},92660:(e,t,i)=>{i.d(t,{Z:()=>l});var a=i(23174),n=i.n(a),o=(i(67294),i(83355)),s=i(50506),r=i(53437);class l extends o.Z{renderComponent(){const{render:e}=this.props,{device:t}=this.environment,i=this.props.modalStore.state;return t.isMobile?n()(r.ZP,{ariaLabel:this.props.ariaLabel,open:i.open,popupType:r.ZP.PopupType.SlideUp,origin:this.props.origin,onDismiss:this.props.onDismiss,render:e,style:this.props.style}):n()(s.Z,{ariaLabel:this.props.ariaLabel,open:i.open,preventHideChildrenWhileOpening:!0,render:e,onDismiss:this.props.onDismiss,style:this.props.style,innerStyle:this.props.innerStyle})}}l.displayName="DefaultPopupOrModal"},36507:(e,t,i)=>{i.d(t,{Z:()=>g});var a=i(23174),n=i.n(a),o=i(10434),s=i.n(o),r=i(67294),l=i(83355),d=i(82990),c=i(87279),u=i(75024),m=i(28992);class p extends l.Z{constructor(){super(...arguments),this.styles={menuItem:{minHeight:void 0,...this.environment.device.isMobile&&{background:void 0,boxShadow:void 0},paddingTop:32,paddingBottom:32},text:{textAlign:"center"},title:{margin:0,fontWeight:d.Z.fontWeight.medium,fontSize:u.yv(this.environment,"UIRegular"),lineHeight:u.Dp(this.environment,"UIRegular")},caption:{fontSize:u.yv(this.environment,"UIRegular")}}}renderComponent(){const{style:e,captionStyle:t,...i}=this.props,a={...this.styles.menuItem,...e},n={...this.styles.caption,...t};return r.createElement(m.Z,s()({},i,{title:this.renderTitle(),caption:this.renderCaption(n),textWrapperStyle:this.styles.text,style:a,captionStyle:n}))}renderTitle(){const{title:e}=this.props;if(!e)return;const t=this.styles,i=this.getThemeColors(),a={...t.title,...i.title};return n()("h4",{role:"alert",style:a},void 0,e)}renderCaption(e){const{caption:t}=this.props;if(!t)return;const i={...e,...this.getThemeColors().caption};return n()("div",{style:i},void 0,t)}getThemeColors(){return{title:{color:this.theme.mediumTextColor},caption:{color:this.theme.lightTextColor}}}}p.displayName="ErrorMenuItem",p.contextTypes={...c.mw,...l.w};const g=p},1176:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(83355),d=i(41892),c=i(43593),u=i(72126),m=i(32056),p=i(23867),g=i(15047),h=i(5366),f=i(61652),v=i(1865),y=i(77080);var S=i(33929),b=i(87279),M=i(98742),w=i(61766),C=i(88632),_=i(71071),k=i(42922),T=i(52275),I=i(1743),P=i(74194),x=i(78140),Z=i(32163),F=i(89728),A=i(72495),E=i(7931),B=i(24006),R=i(87968),D=i(33411),L=i(26388),N=i(64369),O=i(92660),V=i(6202),U=i(60442),W=i(42115);const z=["pdf","html","markdown"],K=["currentView","all"],H=e=>e>.1&&e<2,G=["everything","no_files"],q=(0,h.defineMessages)({dialogLabel:{id:"exportModal.dialogLabel",defaultMessage:"Export"}});class j extends l.Z{constructor(){super(...arguments),this.storeTypes={includeContentsPopupStore:w.Z,exportTypePopupStore:w.Z,pdfFormatPopupStore:w.Z,collectionViewExportTypePopupStore:w.Z},this.renderMenu=()=>{const{device:e}=this.environment;if(!C.Z.state.online)return this.renderOffline();const t=_.ZP.state;return t.open&&e.isMobile?this.renderMobileModal(t):t.open?this.renderDesktopModal(t):void 0},this.handleSelectExportType=(e,t)=>{const i=_.ZP.state;if(!i.open)return;const{exportOptions:a}=i;if(e===a.exportType)return;let n;n="pdf"===e?{...a,exportType:"pdf",pdfFormat:f.GI(t)}:{...a,exportType:e},f.BO(this.environment,{...i,exportOptions:n})},this.handleSelectPaperFormat=e=>{const t=_.ZP.state;t.open&&_.Sw(t)&&f.BO(this.environment,{...t,exportOptions:{...t.exportOptions,pdfFormat:e}})},this.handleSelectIncludeContents=e=>{const t=_.ZP.state;t.open&&f.BO(this.environment,{...t,exportOptions:{...t.exportOptions,includeContents:e}})},this.handleSelectCollectionExportType=e=>{const t=_.ZP.state;t.open&&f.BO(this.environment,{...t,exportOptions:{...t.exportOptions,collectionViewExportType:e}})},this.handleToggleFlattenExportFiletree=()=>{const e=_.ZP.state;e.open&&f.BO(this.environment,{...e,exportOptions:{...e.exportOptions,flattenExportFiletree:!e.exportOptions.flattenExportFiletree}})},this.handleToggleRecursive=()=>{const e=_.ZP.state;if(e.open){if(_.Sw(e)&&!f.y1(this.environment))return v.y(this.environment,{from:"export_modal",for:"enterprise"}),void this.handleUpgrade();f.BO(this.environment,{...e,recursive:!e.recursive})}},this.handleSetScalePercent=e=>{const t=_.ZP.state;t.open&&_.Sw(t)&&f.BO(this.environment,{...t,exportOptions:{...t.exportOptions,scale:e}})},this.handleCancel=()=>{f.Qr()},this.handleSubmit=()=>{if(!this.canSubmit())return;const e=_.ZP.state;e.open&&(f.Qr(),e.root.table===g.bx?f.AW(this.environment,{spaceId:e.root.id,exportOptions:e.exportOptions}):f.ZO(this.environment,{block:{id:e.root.id,spaceId:(0,p.C)(e.root.spaceId)},recursive:e.recursive,exportOptions:e.exportOptions}))},this.handleUpgrade=()=>{f.Qr()}}renderComponent(){return s()(O.Z,{ariaLabel:S.default.formatMessage(q.dialogLabel),onDismiss:this.handleCancel,render:this.renderMenu,requireOnline:!0,modalStore:_.ZP})}renderOffline(){return s()("div",{style:this.getOfflineStyle()},void 0,s()(h.FormattedMessage,{defaultMessage:"Please go online to export.",id:"exportModal.offlineMessage.description"}))}renderMobileModal(e){const t={menuType:b.og.Modal,title:s()(h.FormattedMessage,{id:"exportModal.title",defaultMessage:"Export"}),right:s()(h.FormattedMessage,{id:"exportModal.closeButton.label",defaultMessage:"Close"}),onClickRight:this.handleCancel};return r.createElement(x.Z,t,s()(Z.Z,{type:Z.i.Vertical,initialFocus:void 0,sections:[{key:"exportOptions",render:e=>r.createElement(A.Z,e),items:this.getMobileExportOptionsMenuItems(e)},{key:"actions",render:e=>{let{children:t,...i}=e;return r.createElement(A.Z,n()({isSubmitButton:!0},i),t)},items:[{key:"submit",render:e=>{const{onClick:t,...i}=e;return r.createElement(V.Z,n()({},i,{onClick:t||this.handleSubmit,disabled:!this.canSubmit(),title:s()(h.FormattedMessage,{id:"exportModal.exportButton.label",defaultMessage:"Export"})}))},action:this.handleSubmit}]}]}))}renderDesktopModal(e){const{device:t,currentUser:i}=this.environment,a=_.Sw(e)&&!f.y1(this.environment)&&"business",o=this.environment.device.isWindows;return s()("div",{style:this.getModalWrapStyle()},void 0,s()(E.Z,{isMenuItem:t.isMobile,buttonPopupStore:this.stores.exportTypePopupStore,label:s()(h.FormattedMessage,{id:"exportModal.exportFormat.description",defaultMessage:"Export format"}),selectedTitle:this.getBlockExportTypeTitle(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>r.createElement(A.Z,e),items:z.map((t=>this.getBlockExportTypeMenuListItem(t,e,i.id)))}]}),e.exportOptions.collectionViewExportType&&s()(E.Z,{isMenuItem:t.isMobile,buttonPopupStore:this.stores.collectionViewExportTypePopupStore,label:s()(h.FormattedMessage,{id:"exportModal.includeDatabases.description",defaultMessage:"Include databases"}),selectedTitle:this.getCollectionViewExportTypeTitle(e.exportOptions.collectionViewExportType||"currentView"),renderMenuSections:e=>[{key:"exportCollection",render:e=>r.createElement(A.Z,e),items:K.map((t=>this.getCollectionViewExportTypeMenuListItem(t,e)))}]}),s()(E.Z,{isMenuItem:t.isMobile,buttonPopupStore:this.stores.includeContentsPopupStore,label:s()(h.FormattedMessage,{id:"exportModal.includeContents.description",defaultMessage:"Include content"}),selectedTitle:this.getBlockIncludeContentsTitle(e.exportOptions.includeContents||"everything"),renderMenuSections:e=>[{key:"includeContents",render:e=>r.createElement(A.Z,e),items:G.map((t=>this.getIncludeContentsMenuListItem(t,e)))}]}),_.Sw(e)&&r.createElement(r.Fragment,null,s()(E.Z,{isMenuItem:t.isMobile,buttonPopupStore:this.stores.pdfFormatPopupStore,label:s()(h.FormattedMessage,{id:"exportModal.pageFormat.description",defaultMessage:"Page format"}),selectedTitle:this.getPDFFormatTitle(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>r.createElement(A.Z,e),items:c.lJ.map((t=>this.getPaperFormatMenuListItem(t,e)))},{key:"otherPaperFormats",render:e=>r.createElement(A.Z,n()({topBorder:!0},e)),items:c.bY.map((t=>this.getPaperFormatMenuListItem(t,e)))}]}),this.renderScalePercent()),"space"!==e.root.table&&s()(W.Z,{requireUpgradeToTier:a,analyticsName:"export_modal",onClick:this.handleToggleRecursive,render:(t,i)=>r.createElement("div",n()({},t,{style:{display:"flex",alignItems:"center",height:32}}),s()("div",{style:{display:"flex",alignItems:"center",marginRight:"auto",color:this.theme.lightTextColor,fontSize:14}},void 0,s()(h.FormattedMessage,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",i&&s()("div",{style:{marginLeft:8}},void 0,i)),s()(B.Z,{on:e.recursive,disabled:Boolean(a)})),renderUpgradeTooltip:()=>s()(U.Z,{imageURL:d.Z.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:s()(h.FormattedMessage,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:s()(h.FormattedMessage,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:L.Z.Placement.Left,upgradeButtonDesktopStyle:{marginTop:2},onUpgradeClick:this.handleUpgrade}),s()(R.Z,{title:s()(h.FormattedMessage,{id:"exportModal.flattenExportFiletree.description",defaultMessage:"Create folders for subpages"}),subtitle:"",style:{color:this.theme.lightTextColor,fontSize:14,display:"flex",alignItems:"center",marginRight:"auto",height:32},on:void 0===e.exportOptions.flattenExportFiletree?!o:!e.exportOptions.flattenExportFiletree,disabled:!e.recursive,onChange:()=>this.handleToggleFlattenExportFiletree()}),s()("div",{style:{display:"flex",alignItems:"center",marginTop:16}},void 0,s()(F.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:this.handleCancel},void 0,s()(h.FormattedMessage,{defaultMessage:"Cancel",id:"exportModal.cancelButton.label"})),s()(k.Z,{onClick:this.handleSubmit,disabled:!this.canSubmit()},void 0,s()(h.FormattedMessage,{defaultMessage:"Export",id:"exportModal.exportButton.label"}))))}renderScalePercent(){const e=this.getScalePercent();return r.createElement(r.Fragment,null,s()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:32}},void 0,s()(N.Z,{style:{color:this.theme.lightTextColor}},void 0,s()(h.FormattedMessage,{id:"exportModal.pageScale.description",defaultMessage:"Scale percent"})),s()(Y,{value:e,onChange:this.handleSetScalePercent})),!H(e)&&s()(D.Z,{show:!0,showDelay:500,showHold:100,render:e=>e&&s()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:32,padding:"4px 0"}},void 0,s()(N.Z,{isSmall:!0,isMultiline:!0,style:{color:this.theme.errorText}},void 0,s()(h.FormattedMessage,{id:"exportModal.pageScale.invalidScaleError",defaultMessage:"Scale percent must be a number between 10 and 200"})))}))}getMobileExportOptionsMenuItems(e){const{currentUser:t,device:i}=this.environment;return u.oA([{key:"export type",render:a=>r.createElement(E.Z,n()({},a,{isMenuItem:i.isMobile,buttonPopupStore:this.stores.exportTypePopupStore,label:s()(h.FormattedMessage,{defaultMessage:"Export format",id:"exportModal.exportFormat.description"}),selectedTitle:this.getBlockExportTypeTitle(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>r.createElement(A.Z,e),items:z.map((i=>this.getBlockExportTypeMenuListItem(i,e,t.id)))}]})),action:()=>{this.stores.exportTypePopupStore.setState({open:!0})}},_.Sw(e)&&{key:"pdf format",render:t=>r.createElement(E.Z,n()({},t,{isMenuItem:i.isMobile,buttonPopupStore:this.stores.pdfFormatPopupStore,label:s()(h.FormattedMessage,{defaultMessage:"Page format",id:"exportModal.pageFormat.description"}),selectedTitle:this.getPDFFormatTitle(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>r.createElement(A.Z,e),items:c.lJ.map((t=>this.getPaperFormatMenuListItem(t,e)))},{key:"otherPaperFormats",render:e=>r.createElement(A.Z,n()({topBorder:!0},e)),items:c.bY.map((t=>this.getPaperFormatMenuListItem(t,e)))}]})),action:()=>{this.stores.pdfFormatPopupStore.setState({open:!0})}},"space"!==e.root.table&&{key:"recursive",render:t=>{let{onClick:i,key:a,...o}=t;const l=_.Sw(e)&&!f.y1(this.environment)&&"business";return s()(W.Z,{requireUpgradeToTier:l,analyticsName:"export_modal",onClick:i,render:(t,i)=>{const a=(0,M.Z)(o,t);return r.createElement(T.Z,n()({},a,{title:s()("div",{style:{display:"flex",alignItems:"center"}},void 0,s()(h.FormattedMessage,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",i&&s()("div",{style:{marginLeft:8}},void 0,i)),right:r.createElement(B.Z,n()({},a,{on:e.recursive,disabled:Boolean(l)}))}))},renderUpgradeTooltip:()=>s()(U.Z,{imageURL:d.Z.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:s()(h.FormattedMessage,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:s()(h.FormattedMessage,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:L.Z.Placement.Left,upgradeButtonDesktopStyle:{marginTop:2},onUpgradeClick:this.handleUpgrade},a)},action:this.handleToggleRecursive}])}getBlockExportTypeTitle(e){switch(e){case"pdf":return s()(h.FormattedMessage,{id:"exportModal.exportFormatButton.pdf.label",defaultMessage:"PDF"});case"markdown":return s()(h.FormattedMessage,{id:"exportModal.exportFormatButton.markdownAndCSV.label",defaultMessage:"Markdown & CSV"});case"html":return s()(h.FormattedMessage,{id:"exportModal.exportFormatButton.html.label",defaultMessage:"HTML"})}}getBlockIncludeContentsTitle(e){switch(e){case"everything":return s()(h.FormattedMessage,{id:"exportModal.includeContentTypes.everything.label",defaultMessage:"Everything"});case"no_files":return s()(h.FormattedMessage,{id:"exportModal.includeContentTypes.no_files.label",defaultMessage:"No files or images"})}}getCollectionViewExportTypeTitle(e){switch(e){case"all":return y.default.checkGate("export_collections_v1")?s()(h.FormattedMessage,{id:"exportModal.includeDatabases.all.label.defaultView",defaultMessage:"Default View"}):s()(h.FormattedMessage,{id:"exportModal.includeDatabases.all.label.everything",defaultMessage:"Everything"});case"currentView":return s()(h.FormattedMessage,{id:"exportModal.includeDatabases.currentView.label",defaultMessage:"Current view"})}}getPDFFormatTitle(e){switch(e){case"Letter":return s()(h.FormattedMessage,{id:"exportModal.pageFormatButton.letter.label",defaultMessage:"Letter"});case"A3":return s()(h.FormattedMessage,{id:"exportModal.pageFormatButton.a3.label",defaultMessage:"A3"});case"A4":return s()(h.FormattedMessage,{id:"exportModal.pageFormatButton.a4.label",defaultMessage:"A4"});case"Legal":return s()(h.FormattedMessage,{id:"exportModal.pageFormatButton.legal.label",defaultMessage:"Legal"});case"Tabloid":return s()(h.FormattedMessage,{id:"exportModal.pageFormatButton.tabloid.label",defaultMessage:"Tabloid"})}}getBlockExportTypeMenuListItem(e,t,i){const a=_.ZP.state,o=a.open&&"pdf"===e&&"space"===a.root.table&&!f.y1(this.environment)&&"business";return{key:e,action:()=>{if(t.close(),o)return v.y(this.environment,{from:"export_modal",for:o}),void this.handleUpgrade();this.handleSelectExportType(e,i)},render:i=>{let{onClick:a,key:l,...c}=i;return s()(W.Z,{requireUpgradeToTier:o,analyticsName:"export_modal",onClick:a,onUpgradeClick:()=>{t.close(),this.handleUpgrade()},render:(t,i)=>r.createElement(T.Z,n()({},(0,M.Z)(c,t),{title:this.getBlockExportTypeTitle(e),right:i})),renderUpgradeTooltip:()=>s()(U.Z,{imageURL:d.Z.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:s()(h.FormattedMessage,{defaultMessage:"Upgrade to export the workspace as PDFs",id:"exportModal.workspacePdfUpgradeTooltip.title"}),caption:s()(h.FormattedMessage,{defaultMessage:"Creates a zip file containing all pages in the workspace as PDF files.",id:"exportModal.workspacePdfUpgradeTooltip.caption"})}),tooltipPlacement:L.Z.Placement.Left,upgradeButtonDesktopStyle:{marginTop:2}},l)}}}getIncludeContentsMenuListItem(e,t){return{key:e,action:()=>{t.close(),this.handleSelectIncludeContents(e)},render:t=>r.createElement(T.Z,n()({},t,{title:this.getBlockIncludeContentsTitle(e)}))}}getCollectionViewExportTypeMenuListItem(e,t){return{key:e,action:()=>{t.close(),this.handleSelectCollectionExportType(e)},render:t=>r.createElement(T.Z,n()({},t,{title:this.getCollectionViewExportTypeTitle(e)}))}}getPaperFormatMenuListItem(e,t){return{key:e,action:()=>{t.close(),this.handleSelectPaperFormat(e)},render:t=>r.createElement(T.Z,n()({},t,{title:this.getPDFFormatTitle(e)}))}}getScalePercent(){const e=_.ZP.state;return e.open&&_.Sw(e)?void 0===e.exportOptions.scale?1:e.exportOptions.scale:1}canSubmit(){return H(this.getScalePercent())}getModalWrapStyle(){return{width:320,padding:24,fontSize:14}}getOfflineStyle(){return{...this.getModalWrapStyle(),color:this.theme.mediumTextColor}}}function Y(e){let{value:t,onChange:i}=e;window.__c={n:"PercentInput"};const a=(0,h.useIntl)(),n=r.useCallback((e=>{const t=e.target.value,a=(0,m._g)(t)||(0,m.p3)(t);let n;"object"==typeof a?n="percent"===a.format?a.value:a.value/100:"number"==typeof a&&(n=a/100),void 0!==n&&i(n)}),[i]),[o,l]=r.useState(!1),d=r.useMemo((()=>(0,m.uf)(Math.round(100*t),"number",a)),[t,a]);return s()(I.Z,{capture:o},void 0,s()(P.Z,{value:d,onChange:n,onFocus:()=>l(!0),onBlur:()=>l(!1),style:{width:60},inputStyle:{textAlign:"right"}}))}j.displayName="ExportModal";const $=j},16972:(e,t,i)=>{i.d(t,{Z:()=>Y});var a=i(23174),n=i.n(a),o=i(67294),s=i(73935),r=i(83355),l=i(72126),d=i(5366),c=i(47307),u=i(27153),m=i(53471),p=i(33929),g=i(87279),h=i(83279),f=i(13401),v=i(79131),y=i(1743),S=i(78140),b=i(40721),M=i(72495),w=i(10434),C=i.n(w),_=(i(57658),i(95538)),k=i(43593),T=i(50066),I=i(50906),P=i(54604),x=i(75018),Z=i(95477),F=i(49085);class A extends F.default{getInitialState(){return{open:!1}}}const E=A;var B=i(24736),R=i(52275),D=i(31945),L=i(74194),N=i(32163),O=i(53437),V=i(81865);class U extends r.Z{constructor(){super(...arguments),this.storeTypes={filePropertyMenuItemStore:E},this.imageNode=void 0,this.renderRenameMenu=()=>{const{device:e}=this.environment,t=this.stores.filePropertyMenuItemStore.state;if(!t.open)return;let i;return i=e.isMobile?{menuType:g.og.ActionSheet}:{menuType:g.og.Popup,width:380},o.createElement(S.Z,i,n()("div",{style:this.getInputWrapStyle()},void 0,n()(L.Z,{style:this.getInputStyle(),value:t.inputValue,placeholder:k.w2(this.props.url),onChange:this.handleRenameInputChange,onSubmit:this.handleCloseRename,focusInitial:!0,selectAll:!0})))},this.handleFullScreen=()=>{P.ui({environment:this.environment,renderFullScreenNode:()=>n()(V.Z,{url:this.props.url,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:300,render:(e,t)=>n()("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:this.imageNode.getBoundingClientRect(),block:this.props.store,imageUrl:this.props.url})},this.handleRename=()=>{this.stores.filePropertyMenuItemStore.setState({open:!0,inputValue:this.props.name})},this.handleCloseRename=()=>{this.stores.filePropertyMenuItemStore.setState({open:!1})},this.handleRenameInputChange=e=>{const t=this.stores.filePropertyMenuItemStore.state;if(!t.open)return;const i=e.target.value;this.stores.filePropertyMenuItemStore.setState({...t,inputValue:i});const a=k.rF({title:i,source:this.props.url});this.props.onChange({url:this.props.url,name:a})},this.handleViewOriginal=()=>{const{url:e,name:t}=this.props;x.openFileUrl(this.environment,{url:e,type:"file",from:"view_original",downloadName:t,permissionRecord:this.props.store.pointer})},this.handleDownload=()=>{const{url:e,name:t}=this.props;I.Uk(this.environment,{url:e,fileName:t,from:"FilePropertyMenuItem"}),x.downloadFileUrl(this.environment,{url:e,download:!0,downloadName:t,permissionRecord:this.props.store.pointer})},this.handleDelete=()=>{this.props.onDelete(this.props.url)}}renderComponent(){const{url:e}=this.props;return _.SR({url:e})?this.renderImage(e):this.renderFile()}renderImage(e){const{device:t}=this.environment,{disabled:i}=this.props;return n()(R.Z,{focused:!1,showDragHandle:!i&&!t.isMobile,style:{paddingTop:t.isMobile?12:8,paddingBottom:t.isMobile?12:8,alignItems:"flex-start"},title:n()(V.Z,{url:e,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:300,render:(e,t)=>n()("div",{style:U.innerStyle},void 0,o.createElement("img",{src:t,style:U.imageStyle,onClick:this.handleFullScreen,ref:e=>this.imageNode=e}))}),right:this.renderActionMenu(!0),dontShrinkRight:!0})}renderFile(){const{device:e}=this.environment,{disabled:t}=this.props,{name:i}=this.props;return n()(O.GI,{open:this.stores.filePropertyMenuItemStore.state.open,popupType:e.isMobile?D.Z4.SlideUp:D.Z4.Popup,origin:n()(R.Z,{focused:!1,showDragHandle:!t&&!e.isMobile,onClick:this.handleViewOriginal,title:i,icon:n()("div",{style:{width:e.isMobile?16:14}},void 0,(0,T.R)()),right:this.renderActionMenu(!1),dontShrinkRight:!0}),render:this.renderRenameMenu,onDismiss:this.handleCloseRename})}getActionMenuItems(e){const{device:t}=this.environment,{url:i,disabled:a}=this.props,s=[];return e&&s.push({key:"fullscreen",render:e=>o.createElement(R.Z,C()({},e,{title:n()(d.FormattedMessage,{defaultMessage:"Full screen",id:"database.actionMenu.fileProperty.fullscreen.title"})})),action:this.handleFullScreen}),(k.E$(i,[Z.default.secureFileS3.url,Z.default.secureFileS3V2.url])||t.isNative)&&s.push({key:"download",render:e=>o.createElement(R.Z,C()({},e,{title:n()(d.FormattedMessage,{defaultMessage:"Download",id:"database.actionMenu.fileProperty.download.title"})})),action:this.handleDownload}),s.push({key:"original",render:e=>o.createElement(R.Z,C()({},e,{title:n()(d.FormattedMessage,{defaultMessage:"View original",id:"database.actionMenu.fileProperty.viewOriginal.title"})})),action:this.handleViewOriginal}),a||e||s.push({key:"rename",render:e=>o.createElement(R.Z,C()({},e,{title:n()(d.FormattedMessage,{defaultMessage:"Rename",id:"database.actionMenu.fileProperty.rename.title"})})),action:this.handleRename}),a||s.push({key:"delete",render:e=>o.createElement(R.Z,C()({},e,{title:n()(d.FormattedMessage,{defaultMessage:"Delete",id:"database.actionMenu.fileProperty.delete.title"})})),action:this.handleDelete}),s}renderActionMenu(e){const{device:t}=this.environment;return n()(D.ZP,{popupType:t.isMobile?D.Z4.SlideUp:D.Z4.Popup,renderOrigin:e=>o.createElement(B.Z,C()({isMobile:t.isMobile},e)),render:i=>{let a;return a=t.isMobile?{menuType:g.og.ActionSheet}:{menuType:g.og.Popup,width:200},o.createElement(S.Z,a,n()(N.Z,{type:N.i.Vertical,initialFocus:0,onAccept:i.close,sections:[{key:"section",render:e=>o.createElement(M.Z,e),items:this.getActionMenuItems(e)}]}))}})}getInputWrapStyle(){return{display:"flex",alignItems:"center",color:this.theme.regularTextColor,fontSize:"13px",padding:"4px 8px"}}getInputStyle(){return{display:"flex",alignItems:"center",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:3,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,cursor:"text",position:"relative"}}}U.displayName="FilePropertyMenuItem",U.imageStyle={display:"block",maxWidth:"100%",maxHeight:180,cursor:"zoom-in"},U.innerStyle={flex:"auto",overflow:"hidden"};const W=U;var z=i(68785),K=i(28992),H=i(32854);class G extends r.Z{renderComponent(){return n()(K.Z,{title:n()("div",{style:{display:"flex"}},void 0,n()(z.Z,{style:{marginTop:1,marginRight:6}}),n()(H.Z,{percentage:this.props.progressPercent}))})}}G.displayName="ProgressMenuItem";const q=G;class j extends r.Z{constructor(){super(...arguments),this.uploadingFiles=void 0,this.storeTypes={fileUploadStore:h.Z},this.renderFile=e=>{const{device:t}=this.environment,{value:i,disabled:a}=this.props,o=i.find((t=>t.url===e));if(o){const e=o.url,i=o.name;return t.isMobile?n()(M.Z,{},e,n()(W,{store:this.props.store,name:i,url:e,onDelete:this.handleFileDelete,onChange:this.handleFileChange,disabled:a})):n()(W,{store:this.props.store,name:i,url:e,onDelete:this.handleFileDelete,onChange:this.handleFileChange,disabled:a},e)}},this.handleAddFileMount=e=>{e&&(this.addFileButton=e)},this.handleAddFileClick=e=>{this.showMediaPicker()},this.handleDraggableDrop=e=>{const{onChange:t,value:i}=this.props;t({value:l.MR(i,(t=>{const i=t.url;return i?e.indexOf(i):1/0}))})},this.handleMediaPickerUploadStart=e=>{u.Z(),this.stores.fileUploadStore.setState({isLoading:!0,progressPercent:0}),this.uploadingFiles=[e]},this.handleMediaPickerUploadComplete=e=>{const{value:t,onChange:i}=this.props;if(!this.uploadingFiles)return;const a=this.uploadingFiles[0];if(!a)return;i({value:[...t,{name:a.name||e,url:e}]}),this.stores.fileUploadStore.reset(),u.Z()},this.handleMediaPickerEmbedComplete=e=>{const{value:t,onChange:i}=this.props;i({value:[...t,{name:e,url:e}]}),this.stores.fileUploadStore.reset(),u.Z()},this.handleUploadFilesStart=e=>{this.stores.fileUploadStore.setState({isLoading:!0,progressPercent:0}),this.uploadingFiles=e},this.handleUploadFilesComplete=e=>{const{value:t,onChange:i}=this.props;if(!this.uploadingFiles)return;i({value:[...this.uploadingFiles.map(((t,i)=>{const a=e[i];return{name:t.name||a,url:a}})),...t]}),this.stores.fileUploadStore.reset()},this.handleUploadProgress=e=>{const{progressPercent:t}=e;this.stores.fileUploadStore.setState({...this.stores.fileUploadStore.state,progressPercent:t})},this.handleUploadError=()=>{this.stores.fileUploadStore.reset(),c.showErrorMessage(n()(d.FormattedMessage,{id:"filePropertyMenu.uploadFileFailedError.message",defaultMessage:"Upload failed."}))},this.handleFileChange=e=>{const{value:t,onChange:i}=this.props;i({value:t.map((t=>t.url===e.url?{name:e.name,url:e.url}:t))})},this.handleFileDelete=e=>{const{value:t,onChange:i}=this.props;i({value:t.filter((t=>t.url!==e))})}}didMount(){const{device:e}=this.environment,{uploadFiles:t,store:i}=this.props;t?m.IL({environment:this.environment,files:t,bucket:"secure",record:i.pointer,onBatchStart:this.handleUploadFilesStart,onBatchProgress:this.handleUploadProgress,onBatchComplete:this.handleUploadFilesComplete,onBatchError:this.handleUploadError}):this.isEmpty()&&!e.isMobile&&this.showMediaPicker()}willUnmount(){u.Z()}renderComponent(){const{device:e}=this.environment,{disabled:t}=this.props,i=this.isEmpty(),{isLoading:a,progressPercent:s}=this.stores.fileUploadStore.state;let r;return r=e.isMobile?{menuType:g.og.Modal,title:n()(d.FormattedMessage,{defaultMessage:"File property",id:"database.fileProperty.mobileMenu.title"}),right:n()(b.DoneMenuText,{}),onClickRight:this.props.onDismiss}:{menuType:g.og.Popup},n()(y.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!0},void 0,o.createElement(S.Z,r,this.renderFiles(),n()(M.Z,{topBorder:!i&&!t,desktopStyle:{...i&&{paddingTop:3,paddingBottom:3}}},void 0,a&&n()(q,{progressPercent:s}),!a&&!t&&o.createElement(f.Z,{focused:!1,onClick:this.handleAddFileClick,title:n()(d.FormattedMessage,{id:"database.fileProperty.focusedLabel",defaultMessage:"Add a file or image"}),ref:this.handleAddFileMount}))))}renderFiles(){const{device:e}=this.environment,{value:t,disabled:i}=this.props,a=l.oA(t.map((e=>e.url)));return 0===a.length?void 0:e.isMobile||i?n()(o.Fragment,{},void 0,a.map(this.renderFile)):n()(M.Z,{},void 0,n()(v.ZP,{direction:"vertical",keys:a,renderKey:this.renderFile,onDrop:this.handleDraggableDrop}))}isEmpty(){const{value:e}=this.props;return 0===e.length}showMediaPicker(){const{store:e}=this.props,t=s.findDOMNode(this.addFileButton);if(!t)return;if(!(t instanceof Element))return;const i=p.default.getIntl();u.$(this.environment,{originRect:t.getBoundingClientRect(),originGap:3,isSmallWidth:!0,showArrow:!0,title:i.formatMessage({id:"filePropertyMenu.header",defaultMessage:"File"}),currentTab:"file",tabs:[{type:"file",fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:t=>{m.cT({environment:this.environment,file:t,bucket:"secure",record:e.pointer,onStart:this.handleMediaPickerUploadStart,onProgress:this.handleUploadProgress,onComplete:this.handleMediaPickerUploadComplete,onError:this.handleUploadError})}},{type:"embed",onChange:this.handleMediaPickerEmbedComplete}]})}}j.displayName="FilePropertyMenu";const Y=j},79027:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(24405),d=i(41892),c=i(82990),u=i(5366),m=i(91376),p=i(17311),g=i(7844),h=i(42922),f=i(50506),v=i(62385);function y(){window.__c={n:"GoogleAuthPromptModal"};const e=(0,s.Fy)(),t=(0,r.VK)((()=>g.Z.state.open),[]),i=()=>{g.Z.state.open&&g.Z.state.onDecline&&g.Z.state.onDecline(),g.Z.setState({open:!1})},a=()=>{g.Z.state.open&&g.Z.state.onConfirm(),g.Z.setState({open:!1})},y=()=>{i(),m.r$({currentTab:"connected_apps"})},S=(0,l.yK)((e=>({wrap:{padding:"24px 36px 24px",minWidth:300,maxWidth:400},modalHeaderWrap:{textAlign:"center",marginTop:8,marginBottom:18,justifyContent:"space-between"},modalMessage:{fontSize:16,lineHeight:1.5,fontWeight:c.Z.fontWeight.medium,marginTop:15,marginBottom:20,color:e.mediumTextColor}})),[]);return n()(f.Z,{open:t,innerStyle:S.wrap,preventHideChildrenWhileOpening:!0,render:()=>n()(o.Fragment,{},void 0,n()("div",{style:S.modalHeaderWrap},void 0,n()("img",{src:d.Z.images.googleDriveLogoPng,style:{width:50,display:"inline-block"}}),n()("div",{style:S.modalMessage},void 0,n()(u.FormattedMessage,{defaultMessage:"Notion cannot access the Google Drive file you are trying to embed.",id:"googleAuthPromptModal.noAccessFile.errorMessage"})),e.isMobileNative?n()("div",{style:S.modalMessage},void 0,n()(u.FormattedMessage,{defaultMessage:"Please use Notion on desktop to connect a new account.",id:"googleAuthPromptModal.mobileUseDesktopPrompt.errorMessage"})):n()(h.Z,{isLarge:!0,onClick:a},void 0,n()(u.FormattedMessage,{defaultMessage:"Connect to Google",id:"googleAuthPromptModal.connectToGoogleButton.label"})),!e.isMobile&&n()("div",{style:{display:"block",marginTop:p.Z.vertical.tiny}},void 0,n()(v.Z,{underlined:!0,onClick:y},void 0,n()(u.FormattedMessage,{defaultMessage:"See my connected accounts",id:"googleAuthPromptModal.seeConnectedAccountsButton.label"}))))),onDismiss:i})}},82935:(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(86628),c=i(24405),u=i(64275);const m=(0,i(45238).I)("graduationCapInvert",{viewBox:"0 0 24 24",svg:s()("path",{d:"M18.0791 3.76953L11.4141 0.720703C10.6826 0.392578 10.0811 0.235352 9.5 0.249023C8.91895 0.235352 8.31738 0.392578 7.58594 0.720703L0.920898 3.76953C0.415039 3.99512 0.148438 4.41211 0.148438 4.85645C0.148438 5.30078 0.415039 5.71777 0.920898 5.94336L3.45703 7.07812L7.96191 4.98633C7.93457 4.93848 7.92773 4.89746 7.92773 4.85645C7.92773 4.31641 8.70703 3.94043 9.52051 3.94043C10.3271 3.94043 11.1064 4.31641 11.1064 4.85645C11.1064 5.40332 10.3271 5.78613 9.52051 5.78613C9.26758 5.78613 9.01465 5.75195 8.78906 5.68359L4.5918 7.625L7.58594 8.99219C8.31738 9.33398 8.91895 9.47754 9.5 9.4707C10.0811 9.47754 10.6826 9.32715 11.4141 8.99219L18.0791 5.94336C18.585 5.71094 18.8516 5.30078 18.8516 4.85645C18.8516 4.41211 18.585 3.99512 18.0791 3.76953ZM4.57129 8.7666V12.6768C5.78809 13.4014 7.49707 13.832 9.5 13.832C13.5059 13.832 16.3496 12.0957 16.3496 9.91504V7.87793L11.8447 9.94238C11.0039 10.332 10.2246 10.5234 9.5 10.5166C8.77539 10.5234 8.00293 10.332 7.15527 9.94238L4.57129 8.7666ZM2.65039 7.88477V9.91504C2.65039 10.5098 2.94434 11.1934 3.48438 11.7812V8.26758L2.65039 7.88477ZM2.8418 14.29V16.0469C2.8418 16.6621 3.24512 17.0586 3.85352 17.0586H4.19531C4.80371 17.0586 5.20703 16.6621 5.20703 16.0469V14.29C5.20703 13.8184 4.96777 13.4697 4.57129 13.3398V12.6768C4.13379 12.417 3.76465 12.1162 3.48438 11.7812V13.3398C3.08789 13.4697 2.8418 13.8115 2.8418 14.29Z"})});var p=i(82990),g=i(51454),h=i(5366),f=i(80444),v=i(93278);var y=i(37190),S=i(92639),b=i(77080),M=i(42922),w=i(64921),C=i(28451);const _=(0,h.defineMessages)({title:{id:"guidedTutorialPopup.title",defaultMessage:"Learn Notion in 3 steps"},subtitle:{id:"guidedTutorialPopup.subtitle",defaultMessage:"We'll show you how to quickly customize {workspacename}."},cta:{id:"guidedTutorialPopup.cta",defaultMessage:"Get started"}}),k={display:"flex",alignItems:"center",flexDirection:"column"};function T(){window.__c={n:"GuidedTutorialPopup"};const e=(0,c.Fg)(),t=(0,l.O7)(),i=(0,d.VK)((()=>f.default.state.currentUserSettingsStore),[]),a=(0,d.VK)((()=>f.default.state.guidedTutorialStore),[]),o=(0,d.VK)((()=>{var e;return null===(e=f.default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),T=(0,c.yK)((e=>({container:{background:e.popoverBackground,borderRadius:5,boxShadow:e.mediumBoxShadow,position:"absolute",bottom:65,right:16,zIndex:g.hT},cancel:{position:"absolute",top:"10px",right:"10px",background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},content:{...k,width:299,height:204,overflow:"hidden",position:"relative",padding:12,cursor:"default",justifyContent:"center"},contentTextFlex:{display:"flex",flexDirection:"column",gap:8,padding:8},subtitle:{fontSize:14,color:e.mediumTextColor,paddingBottom:8,textAlign:"center"}})),[]),I=(0,d.VK)((()=>v.default.state.open&&f.default.state.inAppCalloutStore.canShow("guided_tutorial_popup")&&(0,S.TL)(t)),[t]),P=(0,r.useCallback)((e=>{if(!i)return;const n={x:window.innerWidth/2,y:window.innerHeight/2};switch(b.default.getEligibleGroup({experimentId:"tooltip_vs_shadow_cursor",defaultGroup:"control"})){case"shadow_cursor":y.startShadowCursorTutorial(t,{position:n,userSettingsStore:i,guidedTutorialStore:a});break;case"tooltip":!function(){v.default.setState({open:!1});const{guidedTutorialStore:e}=f.default.state;e.setState({...f.default.state.guidedTutorialStore.state,currentCursorElement:"new-page-sidebar",type:"tooltip"})}()}}),[t,i,a]),x=(0,r.useCallback)((e=>{y.updateShadowCursorSubpagePhase({environment:t,userSettingsStore:i,phase:"dismissed_modal"})}),[t,i]);return I?s()(C.P,{calloutId:"guided_tutorial_popup"},void 0,s()("div",{style:T.container},void 0,s()(w.Z,{onClick:x,style:T.cancel},void 0,(0,u.D)({width:14,fill:e.mediumTextColor})),s()("div",{style:T.content},void 0,s()("div",{style:T.contentTextFlex},void 0,m({width:24,height:24,fill:e.blueColor,alignSelf:"center"}),s()("div",{style:{fontWeight:p.Z.fontWeight.medium,fontSize:16,alignSelf:"center"}},void 0,r.createElement(h.FormattedMessage,_.title)),s()("div",{style:T.subtitle},void 0,r.createElement(h.FormattedMessage,n()({},_.subtitle,{values:{workspacename:o}}))),s()(M.Z,{isLarge:!0,style:{width:"calc(100% -30px)"},onClick:P},void 0,r.createElement(h.FormattedMessage,_.cta)))))):null}},7523:(e,t,i)=>{i.r(t),i.d(t,{default:()=>M});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(15145),l=i(84169),d=i(82990),c=i(5366),u=i(50906),m=i(75018),p=i(18514),g=i(80444),h=i(47593),f=i(16354),v=i(50506),y=i(89728),S=i(69507);class b extends s.Z{constructor(){super(...arguments),this.handleModalDismiss=()=>{h.Z.setState({open:!1})},this.handleImportComplete=e=>{h.Z.setState({open:!1}),m.navigateToBlock({environment:this.environment,store:e,pageVisitSource:r.tY.Import})}}renderComponent(){const e=h.Z.state;return n()(v.Z,{open:e.open,innerStyle:b.wrapStyle,preventHideChildrenWhileOpening:!0,render:()=>n()(o.Fragment,{},void 0,n()("div",{style:b.modalTopbarWrapStyle},void 0,n()("div",{style:b.modalTopbarHeaderStyle},void 0,n()(c.FormattedMessage,{id:"importModal.importButton.label",defaultMessage:"Import"})),this.renderHelpButton()),n()("div",{},void 0,this.renderImportOptions(e))),onDismiss:this.handleModalDismiss})}renderHelpButton(){return n()(f.Z,{href:(0,p.UY)("guides.import"),onClick:()=>u.Fsx(this.environment,{from:"import"}),external:!0},void 0,n()(y.Z,{isSmall:!0,icon:l.m,isGray:!0},void 0,n()(c.FormattedMessage,{id:"importModal.helpButton.label",defaultMessage:"Learn about importing"})))}renderImportOptions(e){const{mainEditorCurrentBlockStore:t,currentSpaceStore:i,currentSpaceViewStore:a,currentUserSettingsStore:o}=g.default.state;if(t&&i&&a&&o)return n()(S.Z,{pageStore:e.open&&e.pageStore?e.pageStore:t,spaceStore:i,spaceViewStore:a,userSettingsStore:o,analyticsFrom:"modal",onComplete:this.handleImportComplete,readOnlyCreditButton:!1})}}b.displayName="ImportModal",b.wrapStyle={padding:"24px 36px 24px",minWidth:300},b.modalTopbarWrapStyle={display:"flex",alignItems:"center",marginTop:8,marginBottom:18},b.modalTopbarHeaderStyle={fontSize:24,lineHeight:1.2,marginBottom:6,fontWeight:d.Z.fontWeight.bold,marginRight:"auto"};const M=b},69507:(e,t,i)=>{i.d(t,{Z:()=>mt});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(83355),d=i(41892),c=i(56666),u=i(84169),m=i(82356),p=i(45238);const g=(0,p.I)("importCSV",{viewBox:"0 0 32 32",svg:s()("polygon",{points:"21.0286 9.14285 10.7429 9.14285 10.7429 10.8571 16.3143 16 10.7429 21.1429 10.7429 22.8571 21.0286 22.8571 21.0286 20.2857 15.0286 20.2857 19.3143 16 15.0286 11.7143 21.0286 11.7143"})}),h=(0,p.I)("importHTML",{viewBox:"0 0 32 32",svg:s()("path",{d:"M13.088,21.472 L7.93605,16.32 L13.088,11.168 L11.52,9.59999 L4.80005,16.32 L11.52,23.04 L13.088,21.472 Z M18.912,21.472 L24.0641,16.32 L18.912,11.168 L20.48,9.59999 L27.2,16.32 L20.48,23.04 L18.912,21.472 Z"})}),f=(0,p.I)("importText",{viewBox:"0 0 32 32",svg:s()("path",{d:"M6.3999,22.4 L19.1999,22.4 L19.1999,20.2667 L6.3999,20.2667 L6.3999,22.4 Z M6.3999,9.59999 L6.3999,11.7333 L25.5999,11.7333 L25.5999,9.59999 L6.3999,9.59999 Z M6.3999,17.0667 L25.5999,17.0667 L25.5999,14.9333 L6.3999,14.9333 L6.3999,17.0667 Z"})});var v=i(4615),y=i(5366),S=i(50906),b=i(47307),M=i(49085);class w extends M.default{getInitialState(){return{}}}const C=new w;var _=i(54642),k=i(92625);async function T(e){const{environment:t,spaceId:i,requestStore:a}=e;if(!t.currentUser.id)return b.showMessage({message:"Invalid details"}),void k.x();C.setState({...C.state,[i]:{...C.state[i],showLoader:!0}});const n=await _.getConfluenceSpaces(t,{spaceId:i});if(await(null==a?void 0:a.refresh()),C.setState({...C.state,[i]:{...C.state[i],showLoader:!1}}),"failed"!==n.type)return C.setState({...C.state,[i]:{...C.state[i],spacesResult:n.data}}),n.data;console.error(n.error),b.showError(n),k.x()}var I=i(43181),P=i(68821),x=i(72340),Z=i(8989),F=i(22756);async function A(e){const t=await _.getTrelloAccount(e,{});return"success"===t.type?t.data:(console.error(t.error),{})}async function E(e){F.Z.setState({...F.Z.state,isFetchingAsanaAccount:!0});const t=await _.getAsanaAccount(e,{});if("success"===t.type){const{account:e}=t.data;return F.Z.setState({...F.Z.state,account:e,isFetchingAsanaAccount:!1}),e?t.data:{}}return console.error(t.error),F.Z.setState({...F.Z.state,isFetchingAsanaAccount:!1}),{}}async function B(e){try{const t=await _.getEvernoteAccount(e,{});if("success"===t.type){const{userInfo:e}=t.data;return{userInfo:e}}return console.error(t.error),{userInfo:void 0}}catch(t){return console.error(t),{userInfo:void 0}}}var R=i(87279),D=i(77080);var L=i(18514),N=i(88632),O=i(67940),V=i(72087),U=i(480),W=i(86628),z=i(8848),K=i(41311),H=i(80444);const G=new(i(61766).Z);var q,j=i(93405),Y=i(31945),$=i(73063),Q=i(16354),J=i(68785),X=i(78140),ee=i(32163),te=i(53437),ie=i(72495),ae=i(26388),ne=i(64369),oe=i(82990),se=i(64921);class re extends l.Z{renderComponent(){const{title:e,actionButton:t,onClick:i,tooltipEvents:a}=this.props;return r.createElement(se.Z,n()({},a,{onClick:i,style:this.getButtonStyle()}),this.renderIcon(),s()("div",{style:{minWidth:0,width:"100%"}},void 0,s()("div",{style:{display:"flex"}},void 0,s()("div",{style:re.titleStyle},void 0,e),s()("div",{style:{marginLeft:"auto"}},void 0,t)),this.renderCaption()))}renderIcon(){const{icon:e,logo:t}=this.props;return t?s()("img",{style:re.imageIconStyle,src:t}):e?s()("div",{style:this.getIconWrapStyle()},void 0,e(this.getIconStyle())):void 0}renderCaption(){const{caption:e}=this.props;if(e)return s()("div",{style:this.getCaptionStyle()},void 0,e)}getButtonStyle(){return{display:"flex",alignItems:"center",padding:10,paddingRight:8,borderRadius:3,marginBottom:12,cursor:"pointer",boxShadow:this.theme.lightBoxShadow,transition:"background 200ms ease-out",background:this.theme.importOptionsButtonBackground}}getIconWrapStyle(){return{display:"flex",alignItems:"center",justifyContent:"center",width:re.iconSize,height:re.iconSize,borderRadius:3,marginRight:8,color:this.theme.mediumTextColor,background:this.theme.importOptionsIconWrapBackground}}getIconStyle(){return{flexShrink:0,width:re.iconSize,height:re.iconSize}}getCaptionStyle(){return{fontSize:12,color:this.theme.mediumTextColor,wordBreak:"keep-all",...!this.props.shouldWrapCaption&&{...oe.Z.textOverflowStyle}}}}q=re,re.displayName="ImportOptionsItem",re.iconSize=28,re.imageIconStyle={flexShrink:0,width:q.iconSize,height:q.iconSize,borderRadius:3,marginRight:10,background:z.ZP.white},re.titleStyle={fontSize:16,fontWeight:oe.Z.fontWeight.medium};const le=re,de={whiteSpace:"pre-wrap"};function ce(e,t){return s()(ae.Z,{renderTooltip:()=>s()(ne.Z,{style:{color:z.ZP.white},isSmall:!0},void 0,s()(y.FormattedMessage,{id:"AsanaImportOption.helpButton.tooltip",defaultMessage:"Learn about how to import"})),render:i=>r.createElement(Q.Z,n()({},i,{external:!0,href:e,style:{marginLeft:"auto"}}),s()($.Z,{icon:u.m,ariaLabel:t.formatMessage({id:"AsanaImportOption.helpButton.ariaLabel",defaultMessage:"Learn about how to asana import help icon"})}))})}const ue=function(){window.__c={n:"AsanaV2ImportOption"};const e=(0,W.VK)((()=>F.Z.state),[]),t=(0,W.VK)((()=>O.Z.state),[]),{account:i,isLoadingAsanaWorkspaces:a,isAccountDelinkingInProgress:o,isAccountLinkingInProgress:l}=e,u=(0,U.O7)(),m=(0,y.useIntl)(),{device:p}=u,g=t.flowId||(0,v.ZP)();t.flowId||O.Z.setState({flowId:g});const h={title:m.formatMessage({id:"asanaImportOption.asanaButton.title",defaultMessage:"Asana"}),logo:d.Z.images.import.asanaPng,caption:l?m.formatMessage({id:"asanaImportOption.asanaButton.accountLinkingInProgress",defaultMessage:"Authenticating..."}):o?m.formatMessage({id:"asanaImportOption.asanaButton.accountDelinkingInProgress",defaultMessage:"Removing account..."}):i,actionButton:i?(f=[{name:m.formatMessage({id:"asanaImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),captionText:m.formatMessage({id:"asanaImportOption.connectAnotherAccount.captionText",defaultMessage:"Ensure you are logged into the new Asana account in your browser"}),action:()=>K.w1({environment:u,flowId:g}).catch((()=>{}))},{name:m.formatMessage({id:"asanaImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>K.XP({environment:u})}],s()(Y.ZP,{popupType:te.kQ.Popup,renderOrigin:e=>a?s()(J.Z,{}):r.createElement($.Z,n()({ariaLabel:m.formatMessage({id:"asanaImportOption.asanaButton.ariaLabel",defaultMessage:"Import from Asana button"}),icon:c.o},e)),render:e=>{const t={key:"section",render:e=>r.createElement(ie.Z,e),items:f.map((t=>{let{name:i,captionText:a,action:o}=t;return{key:i,render:e=>r.createElement(j.Z,n()({},e,{title:i,caption:a,captionStyle:a?de:void 0})),action:()=>{o(),e.close()}}}))};return s()(X.Z,{menuType:R.og.Popup,width:200},void 0,s()(ee.Z,{type:ee.i.Vertical,initialFocus:void 0,sections:[t]}))}})):ce((0,L.UY)("guides.importAsana"),m),onClick:()=>{}};var f;return s()(Y.ZP,{onClick:async()=>{var e;F.Z.resetImport(),a||l||o||(i?(S.ays(u,{import_source:"asana",from:"settings_modal",userId:u.currentUser.id,spaceId:null===(e=H.default.state.currentSpaceStore)||void 0===e?void 0:e.id,flowId:g}),await K.bA({environment:u}),K.h7()):K.w1({environment:u,flowId:g}).catch((()=>{})))},popupType:p.isMobile?Y.Z4.SlideUp:Y.Z4.Popup,buttonPopupStore:G,renderOrigin:e=>{let{onClick:t}=e;return r.createElement(le,n()({},h,{onClick:t}))},render:()=>null})};var me=i(24405),pe=i(36591),ge=i(42853),he=i(44495),fe=i(22711),ve=i(78900),ye=i(42922),Se=i(52275),be=i(61519),Me=i(1743),we=i(74194),Ce=i(50506),_e=i(63296),ke=i(89728),Te=i(74523),Ie=i(58573);class Pe extends M.default{getInitialState(){return{searchQuery:"",selection:new Set}}}const xe=Pe;var Ze=i(68894),Fe=i(43765),Ae=i(29551);class Ee extends l.Z{constructor(){super(...arguments),this.storeTypes={store:xe},this.handleToggleItem=e=>{this.props.onComplete(e)}}willMount(e){const t=this.stores.store.state.selection,[i]=e.sections;if(i){const[e]=i.items;e&&t.add(e.key)}this.stores.store.emit()}renderComponent(){return s()(X.Z,{menuType:R.og.Popup,header:this.renderMenuHeader(),width:280,maxHeight:350},void 0,this.renderMenuList())}renderMenuHeader(){const{searchInputPlaceholder:e}=this.props,{searchQuery:t}=this.stores.store.state;return s()(ie.Z,{isInput:!0,desktopStyle:{paddingBottom:2}},void 0,s()(Ze.ZP,{focus:!0,focusAfterAnimation:!0,value:t,onChange:e=>{const{store:t}=this.stores;t.setState({...t.state,searchQuery:e.target.value})},placeholder:e}))}renderMenuList(){const{sections:e,noSearchResultsPlaceholder:t}=this.props,{store:i}=this.stores,{searchQuery:a}=i.state,o=e.map((e=>{const t=(0,Ie.ZP)(a,e.items,(t=>`${t.key} ${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===o.length)return s()(ie.Z,{},void 0,s()(Fe.Z,{title:t}));const l=o.map((t=>{const i=t.items.map((e=>e.name)),a={};return i.forEach((e=>{a[e]=a[e]?a[e]+1:1})),{key:t.name,render:i=>r.createElement(ie.Z,n()({},i,{title:e.length>1?t.name:void 0})),items:t.items.map((e=>({key:e.key,render:t=>r.createElement(Se.Z,n()({},t,{title:s()(Ae.gq,{gap:2,alignItems:"center"},void 0,e.name,a[e.name]>1&&s()(ae.Z,{placement:ae.Z.Placement.Right,renderTooltip:()=>e.key,render:t=>r.createElement($.Z,n()({ariaLabel:`Associated space key is ${e.key}`,disableBackground:!0,icon:he.D},t))})),right:void 0!==e.count&&s()(ne.Z,{isSmall:!0},void 0,e.count)})),action:()=>{this.props.handleClickImportConfluenceWorkspace(e.key,e.name),this.handleToggleItem(e)}})))}}));return s()(ee.Z,{type:ee.i.Vertical,initialFocus:void 0,sections:l})}}Ee.displayName="IntegrationConfluenceImportPopup";const Be=Ee,Re={whiteSpace:"pre-wrap"};function De(e){var t;window.__c={n:"Dropdown"};const{onSelectOption:i,options:a,currentOption:o}=e,l=null===(t=a.find((e=>{let{key:t}=e;return t===o})))||void 0===t?void 0:t.label,d=(0,me.yK)((e=>({icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return s()(Y.ZP,{popupType:Y.Z4.Popup,placementToOrigin:Y.pO.Left,renderOrigin:e=>r.createElement(ke.Z,n()({},e,{isLarge:!0,style:{opacity:1},disabled:!1}),l,(0,ge.i)(d.icon)),render:e=>{const t={menuType:R.og.Popup,width:250,left:50},o=[{key:"settings-item-section",render:e=>r.createElement(ie.Z,e),items:a.map((t=>{let{key:a,label:o}=t;return{key:a,action:()=>{i(a),e.close()},render:e=>r.createElement(Se.Z,n()({},e,{title:o,shouldWrapCaption:!0,right:l===o?s()("div",{style:{width:14}},void 0,(0,pe.e)()):void 0}))}}))}];return r.createElement(X.Z,t,s()(ee.Z,{type:ee.i.Vertical,sections:o,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}}))}})}async function Le(e){await async function(e){const{environment:t,requestStore:i,userEmail:a,site:n,access_token:o,instance:s,spaceId:r,username:l,password:d,flowId:c}=e;if(!t.currentUser.id)return b.showMessage({message:"Invalid details"}),void k.x();const u=await _.authenticateConfluenceUser(t,{userEmail:a,site:n,access_token:o,instance:s,userId:t.currentUser.id,spaceId:r,username:l,password:d});await i.refresh(),"failed"===u.type?(S.a1y(t,{import_source:"confluence",data:{import_type:"api",status:"failure",error:u.error},flowId:c}),console.error(u.error),b.showError(u)):(S.a1y(t,{import_source:"confluence",data:{import_type:"api",status:"success"},flowId:c}),b.showMessage({message:"Successfully connected confluence instance."}),await T({environment:t,requestStore:i,spaceId:r})),k.x()}(e)}function Ne(e){let{environment:t,title:i,email:a,accountType:n,site:o,APIToken:l,personalAccessToken:d,confluenceVersion:c,username:u,password:m,hidePopup:p,spaceId:g,flowId:h,requestStore:f}=e;window.__c={n:"ModalContent"};const[v,S]=(0,r.useState)(""),[b,M]=(0,r.useState)("Cloud"),[w,C]=(0,r.useState)(""),[_,k]=(0,r.useState)(""),[T,I]=(0,r.useState)("OAuth2.0"),[P,x]=(0,r.useState)(""),[Z,F]=(0,r.useState)(""),A=(0,me.yK)((e=>({title:{fontWeight:oe.Z.fontWeight.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor}})),[]);return s()(Me.Z,{capture:!0},void 0,s()("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"}},void 0,s()("div",{style:{overflowY:"scroll"}},void 0,s()("div",{style:{marginBottom:24}},void 0,s()("div",{style:A.title},void 0,i),s()(Te.Z,{title:s()(y.FormattedMessage,{id:"confluenceAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Confluence"}),href:"https://www.notion.so/help/import-from-confluence",analyticsFrom:"import",style:{marginTop:8}})),s()("div",{},void 0,s()("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row"}},void 0,s()("label",{htmlFor:"accountType",style:{...A.inputLabels}},void 0,n),s()(De,{onSelectOption:M,options:[{key:"Cloud",label:s()(y.FormattedMessage,{id:"confluenceAuthentication.accountTypeDropdownCloudOption.label",defaultMessage:"Cloud"})},{key:"Server",label:s()(y.FormattedMessage,{id:"confluenceAuthentication.accountTypeDropdownServerOption.label",defaultMessage:"Server/On-Premise"})}],currentOption:b})),s()(be.Z,{size:12,isHidden:!0}),s()("div",{},void 0,"Server"===b?s()("div",{},void 0,s()("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center"}},void 0,s()("label",{htmlFor:"confluenceVersion",style:{...A.inputLabels}},void 0,c),s()(De,{onSelectOption:I,options:[{key:"OAuth2.0",label:s()(y.FormattedMessage,{id:"confluenceAuthentication.confluenceVersionDropdownNewVersionOption.label",defaultMessage:"7.9 or later"})},{key:"Basic",label:s()(y.FormattedMessage,{id:"confluenceAuthentication.confluenceVersionDropdownOlderVersionOption.label",defaultMessage:"Prior to 7.9"})}],currentOption:T})),s()(be.Z,{size:12,isHidden:!0})):void 0),s()("label",{htmlFor:"email",style:{...A.inputLabels}},void 0,a),s()(we.Z,{id:"email",value:v,autoComplete:"off",autoCapitalize:"off",onChange:e=>{S(e.target.value)},showClearButton:!0,placeholder:"sample@gmail.com",inputElementAttributes:{minLength:4}}),s()(be.Z,{size:12,isHidden:!0}),s()("div",{},void 0,s()("label",{htmlFor:"site",style:{...A.inputLabels}},void 0,o),s()(we.Z,{id:"site",value:w,onChange:e=>C(e.target.value),showClearButton:!0,placeholder:"Cloud"===b?"https://confluence.atlassian.net":"https://domain.com",inputElementAttributes:{minLength:4}}),s()(be.Z,{size:12,isHidden:!0}),"Cloud"===b?s()("div",{},void 0,s()("label",{htmlFor:"APIToken",style:{...A.inputLabels}},void 0,l),s()(we.Z,{id:"AccessToken",type:"password",value:_,onChange:e=>{k(e.target.value)},showClearButton:!0,placeholder:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABC7h",inputElementAttributes:{minLength:4}})):s()("div",{},void 0,s()("div",{},void 0,"Basic"===T?s()("div",{},void 0,s()("label",{htmlFor:"username",style:{...A.inputLabels}},void 0,u),s()(we.Z,{id:"username",value:P,onChange:e=>{x(e.target.value)},showClearButton:!0,placeholder:"confluenceUser",inputElementAttributes:{minLength:1}}),s()(be.Z,{size:12,isHidden:!0}),s()("label",{htmlFor:"password",style:{...A.inputLabels}},void 0,m),s()(we.Z,{type:"password",id:"password",value:Z,onChange:e=>{F(e.target.value)},showClearButton:!0,placeholder:"P@S$w0rd",inputElementAttributes:{minLength:1}})):s()("div",{},void 0,s()("label",{htmlFor:"AccessToken",style:{fontSize:"14px",fontWeight:"400"}},void 0,d),s()(we.Z,{id:"AccessToken",type:"password",value:_,onChange:e=>{k(e.target.value)},showClearButton:!0,placeholder:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABCi7h",inputElementAttributes:{minLength:4}}))))))),s()("div",{style:{flexGrow:0,flexShrink:0}},void 0,s()(be.Z,{size:24}),s()(ye.Z,{isLarge:!0,onClick:async()=>{await Le({environment:t,userEmail:v,site:w,access_token:"Server"===b&&"Basic"===T?void 0:_,instance:b,username:"Basic"===T?P:void 0,password:"Basic"===T?Z:void 0,spaceId:g,flowId:h,requestStore:f}),p()}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})),s()(_e.Z,{isLarge:!0,style:{marginLeft:12},onClick:()=>{p()}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.cancelButton.label",defaultMessage:"Cancel"})))))}const Oe=(0,y.injectIntl)((function(e){var t;window.__c={n:"ConfluenceImportOption"};const[i,a]=(0,r.useState)(!1),o=(0,W.VK)((()=>C.getState()),[]),{spaceStore:l,flowId:c}=e,u=[{name:e.intl.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi",defaultMessage:"Import via API"}),captionText:e.intl.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi.message",defaultMessage:"Recommended for the best import experience"}),action:()=>{e.handleApiImportClick("confluence",c),a(!0)}},{name:e.intl.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),captionText:e.intl.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile.message",defaultMessage:"Best for importing partial workspace content"}),action:()=>e.handleFileUploadClick("confluence",c)}],m=(0,U.O7)(),{device:p}=m,{confluenceResult:g,onComplete:h,intl:f,requestStore:b,spaceViewStore:M}=e,{account:w}=g,_={spacesResult:void 0,showLoader:!1},{showLoader:k}=o[l.id]||_;function P(e,t){S.qyQ(m,{import_source:"confluence",data:{spaceKey:e,spaceName:t},flowId:c})}function x(e){return s()("div",{},void 0,s()("label",{style:{fontSize:"12px",color:"rgba(55, 53, 47, 0.65)",paddingLeft:"12px"}},void 0,s()(y.FormattedMessage,{id:"confluenceImportOption.search.title",defaultMessage:"Select a space to import"})),s()(Be,{searchInputPlaceholder:f.formatMessage({id:"confluenceImportOption.search.placeholder",defaultMessage:"Search for a Space"}),noSearchResultsPlaceholder:f.formatMessage({id:"confluenceImportOption.search.noResultsPlaceholder",defaultMessage:"No Spaces"}),sections:[e],onComplete:async e=>{await async function(e){const{environment:t,onComplete:i,selectedSpace:a,spaceStore:n,spaceViewStore:o,flowId:s}=e,r=await I.A1({environment:t,spaceStore:n,spaceViewStore:o,space:a,flowId:s||(0,v.ZP)()});i(r)}({environment:m,onComplete:h,selectedSpace:e,spaceStore:l,spaceViewStore:M,flowId:c})},handleClickImportConfluenceWorkspace:P}))}const Z={title:"Confluence",logo:d.Z.images.import.confluencePng,caption:w,actionButton:w&&k?s()(J.Z,{}):w&&e.renderItemActionsButton([{name:f.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),action:()=>e.handleFileUploadClick("confluence",c)},{name:f.formatMessage({id:"confluenceImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{e.handleApiImportClick("confluence",c),a(!0)}},{name:f.formatMessage({id:"confluenceImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e){const{environment:t,spaceId:i,requestStore:a}=e;C.setState({...C.state,[i]:{...C.state[i],showLoader:!1}}),await fe.DP(t,a,i)}({environment:m,spaceId:l.id,requestStore:b})}]),onClick:()=>{}},F=(null===(t=o[l.id])||void 0===t||null===(t=t.spacesResult)||void 0===t?void 0:t.spaces)||[],A={key:"default",name:f.formatMessage({id:"confluenceImportOption.spacesProperty.defaultName",defaultMessage:"Spaces"}),items:F.map((e=>({id:e.id,key:e.key,name:e.name})))},E={key:"section",render:e=>r.createElement(ie.Z,e),items:u.map((e=>{let{name:t,captionText:i,action:a}=e;return{key:t,render:e=>r.createElement(j.Z,n()({},e,{title:t,caption:i,captionStyle:i?Re:void 0})),action:a}}))};return r.createElement(r.Fragment,null,s()(Y.ZP,{popupType:p.isMobile?Y.Z4.SlideUp:Y.Z4.Popup,onClick:()=>{w&&T({environment:m,requestStore:b,spaceId:l.id}).catch((()=>{}))},buttonPopupStore:ve.Z,render:e=>w?function(e){return k?r.createElement(r.Fragment,null):x(e)}(A):s()(X.Z,{menuType:R.og.Popup,width:200},void 0,s()(ee.Z,{onAccept:e.close,type:ee.i.Vertical,initialFocus:void 0,sections:[E]})),renderOrigin:e=>{let{onClick:t}=e;return r.createElement(le,n()({},Z,{onClick:t}))}}),s()(Ce.Z,{open:i,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{a(!1)},render:()=>s()(Ne,{hidePopup:()=>{a(!1)},environment:m,title:s()(y.FormattedMessage,{id:"confluenceAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.emailMessage",defaultMessage:"Email"}),s()(ae.Z,{placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"confluenceAuthentication.emailHelpText",defaultMessage:"Email address of the Confluence user importing the data"}),render:e=>r.createElement($.Z,n()({ariaLabel:"Email help text button",disableBackground:!0,icon:he.D},e))})),accountType:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.instanceMessage",defaultMessage:"Confluence instance"}),s()(ae.Z,{style:{width:300,whiteSpace:"normal"},placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"confluenceAuthentication.instanceHelperText",defaultMessage:"On Confluence, click 'Help', the (?) next to your profile, then click on 'About Confluence' this will tell you if it is a Server, Cloud or Data Center"}),render:e=>r.createElement($.Z,n()({ariaLabel:"Confluence instance type help text button",disableBackground:!0,icon:he.D},e))})),site:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.siteMessage",defaultMessage:"Site"}),s()(ae.Z,{style:{width:300,whiteSpace:"normal"},placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"confluenceAuthentication.siteHelperText",defaultMessage:"The base URL that is used to access Confluence. If you are running on a non-standard port, please provide the input in host:port format"}),render:e=>r.createElement($.Z,n()({ariaLabel:"Confluence site help text button",disableBackground:!0,icon:he.D},e))})),APIToken:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.apiTokenMessage",defaultMessage:"API token"}),s()(ae.Z,{placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"confluenceAuthentication.stepsToGetConfluenceAccessToken.captions",defaultMessage:"Click to learn how to get access token from Confluence cloud"}),render:e=>r.createElement($.Z,n()({ariaLabel:"Confluence access token help text button",onClick:()=>{window.open("https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account","_blank")},icon:he.D},e))})),personalAccessToken:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"}),s()(ae.Z,{placement:ae.Z.Placement.Right,style:{width:300,whiteSpace:"normal"},renderTooltip:()=>s()(y.FormattedMessage,{id:"confluenceAuthentication.stepsToGetConfluencePAT.caption",defaultMessage:"Click to learn how to get personal authentication token from Confluence server"}),render:e=>r.createElement($.Z,n()({ariaLabel:"Confluence personal access token help text button",onClick:()=>{window.open("https://confluence.atlassian.com/enterprise/using-personal-access-tokens-1026032365.html","_blank")},icon:he.D},e))})),confluenceVersion:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.confluenceVersion",defaultMessage:"Confluence version"}),s()(ae.Z,{style:{width:300,whiteSpace:"normal"},placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"confluenceAuthentication.stepsToGetConfluenceVersion.captions",defaultMessage:"Click to learn how to know the version of Confluence you are running"}),render:e=>r.createElement($.Z,n()({ariaLabel:"Confluence version help text button",onClick:()=>{window.open("https://confluence.atlassian.com/confkb/how-do-i-know-what-version-of-confluence-is-running-179441565.html","_blank")},icon:he.D},e))})),username:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.username",defaultMessage:"Username"}),s()(ae.Z,{placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"confluenceAuthentication.usernameHelpText",defaultMessage:"Username of the Confluence user importing the data"}),render:e=>r.createElement($.Z,n()({ariaLabel:"Confluence user's username help text button",disableBackground:!0,icon:he.D},e))})),password:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"confluenceAuthentication.password",defaultMessage:"Password"}),s()(ae.Z,{placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"confluenceAuthentication.passwordHelpText",defaultMessage:"Password of the Confluence user importing the data"}),render:e=>r.createElement($.Z,n()({ariaLabel:"Confluence user's password help text button",disableBackground:!0,icon:he.D},e))})),spaceId:l.id,flowId:c,requestStore:b})}))}));var Ve=i(77137),Ue=i(72126),We=i(23867),ze=i(83805),Ke=i(75018),He=i(53833),Ge=i(90365),qe=(i(57658),i(60458)),je=i(28992),Ye=i(62385);class $e extends l.Z{renderComponent(){return s()("div",{style:this.getStyle()},void 0,"·")}getStyle(){return{display:"inline-block",textAlign:"center",color:this.props.disabled?this.theme.lightTextColor:this.theme.mediumTextColor,userSelect:"none",WebkitUserSelect:"none",width:8}}}$e.displayName="DotSeparator";const Qe=$e;class Je extends l.Z{constructor(){super(...arguments),this.storeTypes={store:xe},this.handleSelectAllClick=()=>{const{sections:e,analyticsName:t}=this.props,{store:i}=this.stores,{selection:a}=i.state;for(const n of e)for(const e of n.items)a.add(e.key);i.emit(),S.VfZ(this.environment,{integration_name:t})},this.handleDeselectAllClick=()=>{const{analyticsName:e}=this.props,{store:t}=this.stores,{selection:i}=t.state;i.clear(),t.emit(),S.FIS(this.environment,{integration_name:e})},this.handleToggleItem=e=>{const{analyticsName:t}=this.props,{store:i}=this.stores,{selection:a}=i.state;a.has(e.key)?(a.delete(e.key),S.Z36(this.environment,{integration_name:t})):(a.add(e.key),S.Glf(this.environment,{integration_name:t})),i.emit()},this.handleImport=()=>{const{sections:e}=this.props,{selection:t}=this.stores.store.state,i=Ue.xH(e.map((e=>e.items))),a=[];t.forEach((e=>{const t=i.find((t=>t.key===e));t&&a.push(t)})),this.props.onComplete(a)}}willMount(e){const t=this.stores.store.state.selection,[i]=e.sections;if(i){const[e]=i.items;e&&t.add(e.key)}this.stores.store.emit()}renderComponent(){return s()(X.Z,{menuType:R.og.Popup,header:this.renderMenuHeader(),footer:this.renderMenuFooter(),width:280,maxHeight:350},void 0,this.renderMenuList())}renderMenuHeader(){const{searchInputPlaceholder:e}=this.props,{searchQuery:t}=this.stores.store.state,i=Boolean(t);return s()(ie.Z,{isInput:!0,desktopStyle:{paddingBottom:2}},void 0,s()(Ze.ZP,{focus:!0,focusAfterAnimation:!0,value:t,onChange:e=>{const{store:t}=this.stores;t.setState({...t.state,searchQuery:e.target.value})},placeholder:e}),s()(je.Z,{isTokenTitle:!0,style:{marginTop:2},title:s()("div",{style:{marginLeft:-3}},void 0,s()(Ye.Z,{onClick:this.handleSelectAllClick,disabled:i,disabledFeedback:!0},void 0,s()(y.FormattedMessage,{id:"importPopup.selectAll",defaultMessage:"Select all"})),s()(Qe,{disabled:i}),s()(Ye.Z,{onClick:this.handleDeselectAllClick,disabled:i,disabledFeedback:!0},void 0,s()(y.FormattedMessage,{id:"importPopup.deselectAll",defaultMessage:"Deselect all"})))}))}renderMenuFooter(){const e=0===this.stores.store.state.selection.size;return s()(ie.Z,{topBorder:!0,desktopStyle:{paddingTop:8,paddingBottom:8}},void 0,s()(je.Z,{title:s()(ye.Z,{disabled:e,onClick:this.handleImport},void 0,s()(y.FormattedMessage,{id:"integrationImportPopup.importButton.label",defaultMessage:"Import"}))}))}renderMenuList(){const{sections:e,noSearchResultsPlaceholder:t}=this.props,{store:i}=this.stores,{searchQuery:a,selection:o}=i.state,l=e.map((e=>{const t=(0,Ie.ZP)(a,e.items,(t=>`${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===l.length)return s()(ie.Z,{},void 0,s()(Fe.Z,{title:t}));const d=l.map((t=>({key:t.name,render:i=>r.createElement(ie.Z,n()({},i,{title:e.length>1?t.name:void 0})),items:t.items.map((e=>{const t=()=>this.handleToggleItem(e);return{key:e.key,render:i=>r.createElement(Se.Z,n()({},i,{title:e.name,icon:s()(qe.Z,{checked:o.has(e.key),size:16,onClick:t}),right:void 0!==e.count&&s()(ne.Z,{isSmall:!0},void 0,e.count)})),action:t}}))})));return s()(ee.Z,{type:ee.i.Vertical,initialFocus:void 0,sections:d})}}Je.displayName="IntegrationImportPopup";const Xe=Je;class et extends l.Z{constructor(){super(...arguments),this.evernoteStoreState=this.createComputedStore((()=>He.Z.getState())),this.handleClickImportEvernote=async()=>{var e;const{isFetchingNotebooks:t}=this.evernoteStoreState.state;t&&await ze.B({environment:this.environment,requestStore:this.props.requestStore});const i=O.Z.getOrCreateFlowId();S.ays(this.environment,{import_source:"evernote",from:this.props.analyticsFrom,flowId:i,userId:this.environment.currentUser.id,spaceId:null===(e=H.default.state.currentSpaceStore)||void 0===e?void 0:e.id})},this.handleRemoveEvernote=async()=>{await _.disconnectEvernote(this.environment,{}),He.Z.setState({notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1}),await this.props.requestStore.refresh(),S.qJZ(this.environment,{integration_name:"evernote"})},this.handleEvernoteAuth=async()=>{await ze.e({environment:this.environment,requestStore:this.props.requestStore})},this.handleImportEvernoteComplete=async(e,t)=>{const{notebooks:i}=e,a=i.filter((e=>Boolean(t.find((t=>t.key===e.guid)))));S.G7t(this.environment,{integration_name:"evernote",count:t.length});const n=await I.am({environment:this.environment,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,userSettingsStore:this.props.userSettingsStore,notebooks:a});S.qyQ(this.environment,{import_source:"evernote",data:{notebooks:a.map((e=>e.guid)),userId:this.environment.currentUser.id,spaceId:(0,We.C)(this.props.spaceStore.id)},flowId:O.Z.getOrCreateFlowId()}),this.props.onComplete(n)},this.handleEvernoteHelpClick=()=>{Ke.navigateToExternalURL({environment:this.environment,url:(0,L.UY)("guides.importEvernote")})}}renderComponent(){const{device:e}=this.environment,{evernoteResult:t,intl:i}=this.props,{userInfo:a}=t,{notebooksResponse:o,showLoader:l}=this.evernoteStoreState.state,c=(null==o?void 0:o.notebooks)||[],u=Ue.vM(c,(e=>e.stack||"")),m=Object.keys(u).map((e=>{const t=e||"Top-Level";return{key:t,name:t,items:(u[e]||[]).map((e=>({key:e.guid,name:e.title,count:e.noteCount})))}})),p={title:"Evernote",logo:d.Z.images.import.evernotePng,shouldWrapCaption:!a,caption:a?a.name||a.username||a.email:void 0,actionButton:a&&l?s()(J.Z,{}):a?this.props.renderItemActionsButton([{name:i.formatMessage({id:"evernoteImportOption.actionsMenu.learnMore",defaultMessage:"Learn more"}),action:this.handleEvernoteHelpClick},{name:i.formatMessage({id:"evernoteImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>Ge.Z.setState({open:!0})},{name:i.formatMessage({id:"evernoteImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:this.handleEvernoteAuth},{name:i.formatMessage({id:"evernoteImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:this.handleRemoveEvernote}]):this.props.defaultActionButton,onClick:()=>{}};return s()(Y.ZP,{popupType:e.isMobile?Y.Z4.SlideUp:Y.Z4.Popup,buttonPopupStore:Ge.Z,onClick:this.handleClickImportEvernote,render:()=>l?r.createElement(r.Fragment,null):s()(Xe,{searchInputPlaceholder:i.formatMessage({id:"evernoteImportOption.search.placeholder",defaultMessage:"Search for a notebook…"}),noSearchResultsPlaceholder:i.formatMessage({id:"evernoteImportOption.search.noResultsPlaceholder",defaultMessage:"No notebooks"}),analyticsName:"evernote",sections:m,onComplete:e=>this.handleImportEvernoteComplete(o,e)}),renderOrigin:e=>{let{onClick:t}=e;return r.createElement(le,n()({},p,{onClick:a?t:this.handleEvernoteAuth}))}})}}et.displayName="EvernoteImportOption";const tt=(0,y.injectIntl)(et);var it=i(33929);const at=(0,y.defineMessages)({successfullyConnected:{id:"mondayActions.successfullyConnected.message",defaultMessage:"Successfully connected monday.com instance."}});function nt(e){let{environment:t,title:i,email:a,APIToken:n,hidePopup:o,flowId:l,requestStore:d,spaceStore:c}=e;window.__c={n:"ModalContent"};const[u,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),h=(0,me.yK)((e=>({title:{fontWeight:oe.Z.fontWeight.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor}})),[]);return s()(Me.Z,{capture:!0},void 0,s()("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"}},void 0,s()("div",{style:{overflowY:"scroll"}},void 0,s()("div",{style:{marginBottom:24}},void 0,s()("div",{style:h.title},void 0,i),s()(Te.Z,{title:s()(y.FormattedMessage,{id:"mondayAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Monday.com"}),href:"",analyticsFrom:"import",style:{marginTop:8}})),s()("div",{},void 0,s()("label",{htmlFor:"email",style:{...h.inputLabels}},void 0,a),s()(we.Z,{id:"email",value:u,autoComplete:"off",autoCapitalize:"off",onChange:e=>{m(e.target.value)},showClearButton:!0,placeholder:"sample@gmail.com",inputElementAttributes:{minLength:4}}),s()(be.Z,{size:12,isHidden:!0}),s()("div",{},void 0,s()("label",{htmlFor:"APIToken",style:{...h.inputLabels}},void 0,n),s()(we.Z,{id:"AccessToken",type:"password",value:p,onChange:e=>{g(e.target.value)},showClearButton:!0,placeholder:"ABC0NDU4NTE0MzUzOooUABCoUOct72zybAxEsiABC7h",inputElementAttributes:{minLength:4}})))),s()("div",{style:{flexGrow:0,flexShrink:0}},void 0,s()(be.Z,{size:24}),s()(ye.Z,{isLarge:!0,onClick:async()=>{await async function(e){const{environment:t,requestStore:i,userEmail:a,APIToken:n,flowId:o,spaceId:s}=e;if(!t.currentUser.id)return b.showMessage({message:"Invalid details"}),void k.x();const r=await _.authenticateMondayUser(t,{userId:t.currentUser.id,spaceId:s,userEmail:a,APIToken:n});await i.refresh(),"failed"===r.type?(S.a1y(t,{import_source:"monday.com",data:{import_type:"api",status:"failure",error:r.error},flowId:o}),console.error(r.error),b.showError(r)):(S.a1y(t,{import_source:"monday.com",data:{import_type:"api",status:"success"},flowId:o}),b.showMessage({message:it.default.formatMessage(at.successfullyConnected)})),k.x()}({environment:t,requestStore:d,userEmail:u,APIToken:p,flowId:l,spaceId:c.id}),o()}},void 0,s()(y.FormattedMessage,{id:"mondayAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})),s()(_e.Z,{isLarge:!0,style:{marginLeft:12},onClick:()=>{o()}},void 0,s()(y.FormattedMessage,{id:"mondayAuthentication.cancelButton.label",defaultMessage:"Cancel"})))))}const ot=(0,y.injectIntl)((function(e){window.__c={n:"MondayImportOption"};const[t,i]=(0,r.useState)(!1),{mondayResult:a,flowId:o,intl:l,requestStore:d,spaceStore:c}=e,{user:u}=a,m=(0,U.O7)(),p={title:"Monday",logo:"",caption:null==u?void 0:u.email,actionButton:u&&e.renderItemActionsButton([{name:l.formatMessage({id:"mondayImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{i(!0)}},{name:l.formatMessage({id:"mondayImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:async()=>{await fe.dt(m,d,c.id)}}]),onClick:()=>{}};return r.createElement(r.Fragment,null,s()(Y.ZP,{popupType:m.device.isMobile?Y.Z4.SlideUp:Y.Z4.Popup,onClick:()=>{i(!0)},renderOrigin:e=>{let{onClick:t}=e;return r.createElement(le,n()({},p,{onClick:u?async()=>{await async function(e){const{environment:t,spaceStore:i}=e,a=_.parallelMondayImport(t,{importParams:[],loggerPageId:"",spaceId:i.id});for await(const n of a)return n}({environment:m,spaceStore:c})}:t}))},render:()=>null}),s()(Ce.Z,{open:t,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{i(!1)},render:()=>s()(nt,{hidePopup:()=>{i(!1)},environment:m,title:s()(y.FormattedMessage,{id:"mondayAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"mondayAuthentication.emailMessage",defaultMessage:"Email"}),s()(ae.Z,{placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"mondayAuthentication.emailHelpText",defaultMessage:"Email address of the Monday.com user importing the data"}),render:e=>r.createElement($.Z,n()({},e,{ariaLabel:"Email help text button",disableBackground:!0,icon:he.D}))})),APIToken:s()(Ae.gq,{style:{alignItems:"center",gap:2}},void 0,s()(y.FormattedMessage,{id:"mondayAuthentication.apiTokenMessage",defaultMessage:"API token"}),s()(ae.Z,{placement:ae.Z.Placement.Right,renderTooltip:()=>s()(y.FormattedMessage,{id:"mondayAuthentication.stepsToGetMondayAPIToken.captions",defaultMessage:"Click to learn how to get API token from Monday.com"}),render:e=>r.createElement($.Z,n()({},e,{ariaLabel:"Monday.com API token help text button",onClick:()=>{window.open("https://developer.monday.com/api-reference/docs/authentication#accessing-api-tokens","_blank")},icon:he.D}))})),flowId:o,requestStore:d,spaceStore:c})}))}));var st=i(52192),rt=i(82066),lt=i(81676);class dt extends l.Z{constructor(){super(...arguments),this.trelloStoreState=this.createComputedStore((()=>lt.Z.getState())),this.handleClickImportTrello=async()=>{this.trelloStoreState.state.isFetchingBoards&&await st.u(this.environment,this.props.requestStore),S.ays(this.environment,{import_source:"trello",from:this.props.analyticsFrom})},this.handleTrelloAuth=async()=>{await st.M({environment:this.environment,requestStore:this.props.requestStore})},this.handleRemoveTrello=async()=>{await _.disconnectTrello(this.environment,{}),lt.Z.setState({boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}),await this.props.requestStore.refresh(),S.qJZ(this.environment,{integration_name:"trello"})},this.handleImportTrelloComplete=async(e,t)=>{const{boards:i}=e,a=i.filter((e=>Boolean(t.find((t=>t.key===e.id)))));S.G7t(this.environment,{integration_name:"trello",count:t.length});const n=await I.su({environment:this.environment,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,boards:a});this.props.onComplete(n)}}renderComponent(){const{device:e}=this.environment,{trelloResult:t,intl:i}=this.props,{account:a}=t,{boardsResponse:o,showLoader:l}=this.trelloStoreState.state,c=o.boards,u={key:"default",name:i.formatMessage({id:"trelloImportOption.boardProperty.defaultName",defaultMessage:"Boards"}),items:c.map((e=>({key:e.id,name:e.name})))},m={title:"Trello",logo:d.Z.images.import.trelloPng,actionButton:a&&l?s()(J.Z,{}):a&&this.props.renderItemActionsButton([{name:i.formatMessage({id:"trelloImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>rt.Z.setState({open:!0})},{name:i.formatMessage({id:"trelloImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:this.handleTrelloAuth},{name:i.formatMessage({id:"trelloImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:this.handleRemoveTrello}]),onClick:()=>{}};return s()(Y.ZP,{popupType:e.isMobile?Y.Z4.SlideUp:Y.Z4.Popup,buttonPopupStore:rt.Z,onClick:this.handleClickImportTrello,render:()=>l?r.createElement(r.Fragment,null):s()(Xe,{searchInputPlaceholder:i.formatMessage({id:"trelloImportOption.search.placeholder",defaultMessage:"Search for a board…"}),noSearchResultsPlaceholder:i.formatMessage({id:"trelloImportOption.search.noResultsPlaceholder",defaultMessage:"No boards found."}),analyticsName:"trello",sections:[u],onComplete:e=>this.handleImportTrelloComplete(o,e)}),renderOrigin:e=>{let{onClick:t}=e;return r.createElement(le,n()({},m,{onClick:a?t:this.handleTrelloAuth}))}})}}dt.displayName="TrelloImportOption";const ct=(0,y.injectIntl)(dt);class ut extends l.Z{constructor(){super(...arguments),this.storeTypes={trelloRequestStore:V.Z,asanaRequestStore:V.Z,evernoteRequestStore:V.Z,confluenceRequestStore:V.Z,mondayRequestStore:V.Z},this.handleFileUploadClick=async(e,t)=>{S.ays(this.environment,{import_source:e,from:this.props.analyticsFrom,import_type:"file",flowId:t});const i=await I.ro({environment:this.environment,pageStore:this.props.pageStore,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,uploadType:e,flowId:t});i&&(S.W2j(this.environment,{from:"import",type:"page",new_page_id:i.id}),this.props.onComplete(i))},this.handleApiImportClick=(e,t)=>{T({environment:this.environment,requestStore:this.props.confluenceRequestStore,spaceId:this.props.spaceStore.id}).catch((()=>{})),S.ays(this.environment,{import_source:e,from:this.props.analyticsFrom,import_type:"api",flowId:t})},this.getAnalyticsFlowId=()=>O.Z.state.flowId||(0,v.ZP)()}renderComponent(){if(!N.Z.state.online)return s()("div",{style:{...ut.wrapStyle,fontSize:14,color:this.theme.mediumTextColor}},void 0,s()(y.FormattedMessage,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."}));const{analyticsFrom:e,isLoadingNewConnections:t}=this.props;return this.renderRequests((i=>!i||t?s()("div",{style:"onboarding"===e?{}:ut.wrapStyle},void 0,s()(J.Z,{})):s()("div",{style:ut.wrapStyle},void 0,this.renderOptions(i))))}renderOptions(e){const t=this.getAnalyticsFlowId();return s()("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridAutoRows:"1fr",gap:"4px 16px",width:"100%"}},void 0,this.renderAsanaImportOption(e.asanaResult),(0,x.Tc)(this.environment)?this.renderConfluenceImportViaAPIOption(e.confluenceResult,t):this.renderConfluenceImportViaFileOption(t),s()(le,{title:"Google Docs",logo:d.Z.images.import.googleDocsPng,actionButton:this.renderHelpButtonToURL((0,L.UY)("guides.importGoogleDocs")),onClick:()=>this.handleFileUploadClick("gdocs")}),this.renderCsvImportWithTooltip(),s()(le,{title:s()(y.FormattedMessage,{id:"importOptions.textMarkdown.title",defaultMessage:"Text & Markdown"}),icon:f,onClick:()=>this.handleFileUploadClick("markdown")}),s()(le,{title:"HTML",icon:h,onClick:()=>this.handleFileUploadClick("html")}),s()(le,{title:"Word",logo:d.Z.images.import.wordPng,onClick:()=>this.handleFileUploadClick("docx")}),s()(le,{title:"Dropbox Paper",logo:d.Z.images.import.dropboxPaperPng,actionButton:this.renderHelpButtonToURL((0,L.UY)("guides.importDropboxPaper")),onClick:()=>this.handleFileUploadClick("dropbox")}),this.renderTrelloImportOption(e.trelloResult),this.renderEvernoteImportOption(e.evernoteResult),"on"===D.default.getEligibleGroup({experimentId:"monday_importer",defaultGroup:"control"})&&this.renderMondayImportOption(e.mondayResult),s()(le,{title:"Quip",logo:d.Z.images.import.quipPng,actionButton:this.renderHelpButtonToURL((0,L.UY)("guides.importQuip")),onClick:()=>this.handleFileUploadClick("quip")}),s()(le,{title:"Workflowy",logo:d.Z.images.import.workflowyPng,actionButton:this.renderHelpButtonToURL((0,L.UY)("guides.importWorkflowy")),onClick:()=>this.handleFileUploadClick("workflowy")}),(0,Z.t)()&&s()(le,{title:s()(y.FormattedMessage,{id:"importOptions.genericImporter.title",defaultMessage:"Universal import"}),icon:m.l,onClick:()=>this.handleFileUploadClick("genericImporter",t),actionButton:this.renderHelpButtonToURL((0,L.UY)("guides.import"),s()(y.FormattedMessage,{id:"importOptions.universalImport.tooltip",defaultMessage:"Import any ZIP file that contains text, Markdown, CSV, HTML, and other files"}),240)}))}renderRequests(e){return s()(Ve.Z,{request:this.environment,performRequest:A,requestStore:this.stores.trelloRequestStore,render:(t,i)=>s()(Ve.Z,{request:this.environment,performRequest:E,requestStore:this.stores.asanaRequestStore,render:(t,a)=>s()(Ve.Z,{request:this.environment,performRequest:B,requestStore:this.stores.evernoteRequestStore,render:(t,n)=>s()(Ve.Z,{request:this.environment,performRequest:()=>async function(e,t){const i=await _.getConfluenceAccount(e,{spaceId:t});return"success"===i.type?i.data:(console.error(i.error),{})}(this.environment,this.props.spaceStore.id),requestStore:this.stores.confluenceRequestStore,render:(t,o)=>s()(Ve.Z,{request:this.environment,performRequest:()=>async function(e,t){const i=await _.getMondayUser(e,{spaceId:t});if("success"===i.type)return i.data;console.error(i.error)}(this.environment,this.props.spaceStore.id),requestStore:this.stores.mondayRequestStore,render:(t,s)=>e(i&&a&&n&&o&&s?{trelloResult:i,asanaResult:a,evernoteResult:n,confluenceResult:o,mondayResult:s}:void 0)})})})})})}renderTrelloImportOption(e){return s()(ct,{trelloResult:e,analyticsFrom:this.props.analyticsFrom,renderItemActionsButton:this.renderItemActionsButton,onComplete:this.props.onComplete,requestStore:this.stores.trelloRequestStore,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,userSettingsStore:this.props.userSettingsStore})}renderAsanaImportOption(e){return(0,P.c)()?s()(ue,{}):r.createElement(r.Fragment,null)}renderMondayImportOption(e){return s()(ot,{mondayResult:e,analyticsFrom:"onboarding",flowId:"",renderItemActionsButton:this.renderItemActionsButton,onComplete:this.props.onComplete,requestStore:this.stores.mondayRequestStore,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,userSettingsStore:this.props.userSettingsStore})}renderConfluenceImportViaAPIOption(e,t){const{analyticsFrom:i,onComplete:a,spaceStore:n,spaceViewStore:o,userSettingsStore:r}=this.props;return s()(Oe,{confluenceResult:e,analyticsFrom:i,flowId:t,renderItemActionsButton:this.renderItemActionsButton,onComplete:a,spaceStore:n,requestStore:this.stores.confluenceRequestStore,spaceViewStore:o,userSettingsStore:r,handleFileUploadClick:this.handleFileUploadClick,handleApiImportClick:this.handleApiImportClick})}renderConfluenceImportViaFileOption(e){return s()(le,{title:"Confluence",logo:d.Z.images.import.confluencePng,onClick:()=>this.handleFileUploadClick("confluence",e),actionButton:this.renderHelpButtonToURL((0,L.UY)("guides.importConfluence"))})}renderEvernoteImportOption(e){return s()(tt,{evernoteResult:e,analyticsFrom:"onboarding",renderItemActionsButton:this.renderItemActionsButton,defaultActionButton:this.renderHelpButtonToURL((0,L.UY)("guides.importEvernote")),onComplete:this.props.onComplete,requestStore:this.stores.evernoteRequestStore,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,userSettingsStore:this.props.userSettingsStore})}renderCsvImportWithTooltip(){return s()(ae.Z,{placement:ae.Z.Placement.Bottom,render:e=>s()(le,{tooltipEvents:e,title:"CSV",icon:g,onClick:()=>this.handleFileUploadClick("csv")}),renderTooltip:()=>s()(y.FormattedMessage,{id:"importOptions.csvImport.tooltip",defaultMessage:"Ensure first row in the CSV is the header"})})}renderHelpButtonToURL(e,t,i){return s()(ae.Z,{renderTooltip:()=>t??s()(y.FormattedMessage,{id:"importOptions.helpButton.tooltip",defaultMessage:"Learn about how to import"}),style:{width:i??170},textWrap:!0,render:t=>r.createElement(Q.Z,n()({external:!0,href:e,style:{marginLeft:"auto"}},t),s()($.Z,{icon:u.m}))})}renderItemActionsButton(e){return s()(Y.ZP,{popupType:te.kQ.Popup,renderOrigin:e=>r.createElement($.Z,n()({icon:c.o},e)),render:t=>{const i={key:"section",render:e=>r.createElement(ie.Z,e),items:e.map((e=>{let{name:i,action:a}=e;return{key:i,render:e=>r.createElement(Se.Z,n()({},e,{title:i})),action:()=>{a(),t.close()}}}))};return s()(X.Z,{menuType:R.og.Popup,width:200},void 0,s()(ee.Z,{type:ee.i.Vertical,initialFocus:void 0,sections:[i]}))}})}}ut.displayName="ImportOptions",ut.wrapStyle={display:"flex",alignItems:"center",justifyContent:"center",width:752,minHeight:240},ut.optionsColumnStyle={width:240};const mt=ut},15474:(e,t,i)=>{i.r(t),i.d(t,{IntegrationGalleryModal:()=>E});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=(i(57658),i(67294)),l=i(480),d=i(86628),c=i(24405),u=i(58573),m=i(2585),p=i(5257),g=i(35840),h=i(74181),f=i(72126),v=i(5366),y=i(42631),S=i(61202),b=i(80444),M=i(30874),w=i(49900),C=i(35878),_=i(42922),k=i(52275),T=i(73063),I=i(74194),P=i(3386),x=i(32163),Z=i(50506),F=i(74136),A=i(72495);function E(){window.__c={n:"IntegrationGalleryModal"};const e=(0,d.VK)((()=>w.d.state.open),[]),t=(0,l.Fy)(),i=(0,c.yK)((e=>({modal:{width:t.isMobile?"auto":"90vw",height:t.isMobile?"auto":"90vh",borderRadius:8}})),[t.isMobile]);return s()(Z.Z,{open:e,innerStyle:i.modal,onDismiss:()=>{w.d.setState({open:!1})},render:()=>s()("div",{style:{height:"100%",display:"flex",flexDirection:"row",borderRadius:8,overflow:"hidden"}},void 0,s()(D,{}),s()(B,{}))})}function B(){window.__c={n:"GalleryModalDetail"};const e=(0,l.O7)(),t=(0,c.yK)((e=>({container:{width:"100%",height:"100%",overflow:"auto",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",background:e.contentBackground,color:e.regularTextColor,padding:20},text:{color:e.darkTextColor}})),[]),i=(0,d.VK)((()=>{const{currentSpaceStore:e}=b.default.state;return null==e?void 0:e.id}),[]),a=(0,d.VK)((()=>{if(w.d.state.open)return w.d.state.selectedIntegration}),[]),n=(0,d.VK)((()=>a?M.Z.externalAuthentications.state.filter((e=>e.integration_id===a.id)):[]),[a]);if(!a||!i)return null;const o=a.info.icon,u=a.name,m=a.info.developer_name,p=a.info.description,g=[];(0,h.mo)(a)&&g.push("linkPreview"),(0,h.zc)(a)&&g.push("databaseSync");const f=a.info.screenshots,k=f?s()(R,{imageUrls:f},a.id):null;return r.createElement(r.Fragment,null,s()("div",{style:t.container},void 0,k,s()("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:20}},void 0,s()("div",{style:{display:"flex"}},void 0,s()("img",{src:o,style:{width:50,marginRight:10}}),s()("div",{style:{display:"flex",flexDirection:"column"}},void 0,s()("span",{},void 0,s()("b",{style:{fontSize:18}},void 0,u)),s()("span",{style:t.text},void 0,s()(v.FormattedMessage,{id:"integrationGalleryModalDetail.madeBy.name",defaultMessage:"By {name}",values:{name:m}})))),s()(_.Z,{style:{width:120},onClick:()=>(async t=>{await y.hM({environment:e,integration:t,spaceId:i,from:"integration_gallery"}),S.pJ({environment:e})})(a)},void 0,n.length>0?s()(v.FormattedMessage,{id:"integrationGalleryModalDetail.button.installAnother",defaultMessage:"Install another"}):s()(v.FormattedMessage,{id:"integrationGalleryModalDetail.button.install",defaultMessage:"Install"}))),s()("span",{style:{...t.text,fontSize:14}},void 0,p),s()("div",{style:{display:"flex",marginTop:10}},void 0,g.map((e=>e&&s()(F.Z,{desktopStyle:{marginLeft:4},innerStyle:{fontSize:12}},void 0,C.a_[e]))))))}function R(e){window.__c={n:"ImageCarousel"};const{imageUrls:t}=e,[i,a]=(0,r.useState)(0),n=(0,c.yK)((e=>({heroImg:{width:"100%",objectFit:"contain",objectPosition:"top",paddingBottom:30},arrows:{fill:"#000"}})),[]),o=e=>{let n="right"===e?i+1:i-1;n<0&&(n=t.length-1),n>t.length-1&&(n=0),a(n)},l=t.length>0;return s()("div",{style:{width:"100%",position:"relative"}},void 0,l&&s()(T.Z,{style:{position:"absolute",top:"50%",left:10},iconStyle:n.arrows,icon:m.f,onClick:()=>o("left")}),s()("img",{style:n.heroImg,src:t[i]}),l&&s()(T.Z,{style:{position:"absolute",top:"50%",right:10},iconStyle:n.arrows,icon:p.o,onClick:()=>o("right")}))}function D(){window.__c={n:"GalleryModalSidebar"};const e=(0,v.useIntl)(),t=(0,c.yK)((e=>({sidebar:{height:"100%",width:275,background:e.sidebarBackground,alignContent:"center",display:"flex",flexDirection:"column",alignItems:"stretch",boxShadow:e.sidebarBoxShadow},header:{padding:"12px 12px 0 12px"},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor},searchBar:{height:32,borderRadius:5,fontSize:14,marginTop:0,marginBottom:8,padding:"16px 10px"},selectedItem:{background:"dark"===e.mode?e.popoverHoveredBackground:e.sidebarItemSelectedBackground,fontWeight:500}})),[]),[i,a]=(0,r.useState)(""),o=(0,d.VK)((()=>M.Z.integrations.state),[]),l=(0,d.VK)((()=>f.vM(M.Z.externalAuthentications.state,(e=>e.integration_id))),[]),m=(0,d.VK)((()=>{if(w.d.state.open)return w.d.state.selectedIntegration}),[]),p=(0,u.ZP)(i,o,(e=>e.name)),h=p.filter((e=>{var t;return null===(t=l[e.id])||void 0===t?void 0:t.length})),y=p.filter((e=>{var t;return!(null!==(t=l[e.id])&&void 0!==t&&t.length)})),S=[{key:"installed",render:e=>r.createElement(A.Z,n()({},e,{title:"Installed"})),items:h.map((e=>({key:e.id,action:()=>{w.d.state.open&&w.d.setState({...w.d.state,selectedIntegration:e})},render:i=>r.createElement(k.Z,n()({},i,{title:e.name,icon:s()("img",{src:e.info.icon,style:{width:12}}),buttonStyle:{...e.id===(null==m?void 0:m.id)?t.selectedItem:void 0}}))})))},{key:"not_installed",render:e=>r.createElement(A.Z,n()({},e,{title:"Not Installed"})),items:y.map((e=>({key:e.id,action:()=>{w.d.state.open&&w.d.setState({...w.d.state,selectedIntegration:e})},render:i=>r.createElement(k.Z,n()({},i,{title:e.name,icon:s()("img",{src:e.info.icon,style:{width:12}}),buttonStyle:{...e.id===(null==m?void 0:m.id)?t.selectedItem:void 0}}))})))}];return s()("div",{style:t.sidebar},void 0,s()("div",{style:t.header},void 0,s()(P.Z,{capture:!0,onBackspace:f.yR,onLeft:f.yR,onRight:f.yR,onSelectAll:f.yR,onRedo:f.yR,onUndo:f.yR,onCut:f.yR,onCopy:f.yR,onPaste:f.yR,onKeypress:f.yR,onDelete:f.yR,onTab:f.yR},void 0,s()(I.Z,{placeholder:e.formatMessage({id:"integrationGallery.sidebar.searchbar.placeholder",defaultMessage:"Search integrations"}),left:(0,g.R)(t.searchIcon),showClearButton:!0,format:I.Z.Format.Small,value:i,style:t.searchBar,onChange:e=>{a(e.target.value)}}))),s()(x.Z,{type:x.i.Vertical,initialFocus:0,sections:S}))}},74661:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(24405),d=i(66673),c=i(88145),u=i(64275),m=i(515),p=i(89101),g=i(82990),h=i(5366),f=i(50906),v=i(54642),y=i(75018),S=i(21969),b=i(4023),M=i(45946),w=i(42922),C=i(60458),_=i(73063),k=i(16354),T=i(53437),I=i(62385),P=i(64369);function x(){window.__c={n:"OpenInDesktopAppPopup"};const e=(0,s.O7)(),t=(0,h.useIntl)(),[i,a]=(0,o.useState)(!0),{isDesktopBrowser:x,os:Z}=(0,s.Fy)(),F=(0,r.VK)((()=>e.RouterStore.state.route.name in m.c$),[e]),A=e.currentUser.isLoggedIn(),E=(0,r.VK)((()=>M.Z.state),[]),[B,R]=(0,o.useState)(!1),D=!B&&A&&void 0===E&&x&&("mac"===Z||"windows"===Z)&&F&&M.Z.canPersistToLocalStorage(),[L,N]=(0,o.useState)(!1),O=D&&L,V=(0,o.useRef)(!1);(0,o.useEffect)((()=>{D&&!V.current&&(async function(e,t){const i=await v.getDesktopAppRegistration(e,{os:t});return"data"in i&&i.data.isRegistered}(e,Z).then((e=>{N(e)})),V.current=!0)}),[D,N,e,Z]);const U=(0,d.D9)(O);(0,o.useEffect)((()=>{O&&!U&&f.wWx(e)}),[O,U,e]);const W=(0,l.yK)((()=>({origin:{position:"fixed",left:"50%",top:"100%"},container:{bottom:20,padding:"8px 12px 12px",width:300},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},headerText:{fontSize:14,fontWeight:g.Z.fontWeight.medium},appDownloadButton:{fontSize:14,marginLeft:-5},appDownloadIcon:{width:14,height:14,marginRight:6},actions:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:8},alwaysOpenLinks:{display:"flex",alignItems:"center"},alwaysOpenLinksLabel:{marginLeft:6},alwaysOpenLinksButton:{paddingLeft:12,paddingRight:12,height:34}})),[]);return n()(T.ZP,{popupType:T.kQ.Popup,placementToOrigin:b.u.Bottom,origin:n()("div",{style:W.origin}),disableMouseCapture:!0,open:O,style:W.container,render:()=>o.createElement(o.Fragment,null,n()("div",{style:W.header},void 0,n()(P.Z,{style:W.headerText},void 0,n()(h.FormattedMessage,{id:"openInDesktopAppPopup.header",defaultMessage:"Open in Notion's desktop app?"})),n()(_.Z,{ariaLabel:t.formatMessage({id:"openInDesktopAppPopup.closeButton",defaultMessage:"Dismiss"}),icon:u.D,onClick:()=>{M.Z.setState("never"),R(!0),f.ZyU(e)}})),n()(k.Z,{href:p.AR.desktop,external:!0,onClick:()=>{f.iDe(e)}},void 0,n()(I.Z,{style:W.appDownloadButton},void 0,(0,c.E)(W.appDownloadIcon),n()("span",{},void 0,n()(h.FormattedMessage,{id:"openInDesktopAppPopup.appDownloadButton",defaultMessage:"Don't have the app? Download"})))),n()("div",{style:W.actions},void 0,n()("div",{style:W.alwaysOpenLinks},void 0,n()(C.Z,{checked:i,size:16,onClick:()=>{a(!i)}}),n()(P.Z,{isInline:!0,style:W.alwaysOpenLinksLabel},void 0,n()(h.FormattedMessage,{id:"openInDesktopAppPopup.alwaysOpenLinksLabel",defaultMessage:"Always open in app",values:{strongtext:e=>n()("strong",{},void 0,e)}}))),n()(w.Z,{style:W.alwaysOpenLinksButton,onClick:()=>{M.Z.setState(i?"always":"never"),R(!0),y.openInNativeApp({url:(0,S.W)(window.location.href),environment:e}),f.LC7(e,{always_open_in_app:i})}},void 0,n()(h.FormattedMessage,{id:"openInDesktopAppPopup.openInAppButton",defaultMessage:"Open in app",values:{strongtext:e=>n()("strong",{},void 0,e)}}))))})}},18326:(e,t,i)=>{i.r(t),i.d(t,{default:()=>M});var a=i(23174),n=i.n(a),o=(i(67294),i(83355)),s=i(82990),r=i(5366),l=i(54564),d=i(47307),c=i(70442),u=i(39699),m=i(80444),p=i(56638),g=i(88923),h=i(50795),f=i(68785),v=i(40721),y=i(53437),S=i(31184);class b extends o.Z{constructor(){super(...arguments),this.storeTypes={templateRecordCacheStore:h.$},this.renderMobilePopup=()=>{const e=p.Z.state;if(e.open)return n()(v.default,{title:n()(r.FormattedMessage,{defaultMessage:"Try this template",id:"pageTemplateModal.mobileModal.title"}),left:n()(v.CancelMenuText,{}),onClickLeft:this.handleDismiss,right:e.isLoading?n()(f.Z,{}):n()(r.FormattedMessage,{defaultMessage:"Use",id:"pageTemplateModal.mobileModal.useButton.label"}),onClickRight:this.handleUseTemplateClick,forceFullScreenSlideUp:!0},void 0,this.renderPreview(e))},this.handleDismiss=async()=>{const{inMemoryRecordCache:e}=this.stores.templateRecordCacheStore.state;if(e.appliedTransaction){await this.showEditConfirmDialog()?this.accept(!0):this.close()}else this.close()},this.handleUseTemplateClick=async()=>{const{inMemoryRecordCache:e}=this.stores.templateRecordCacheStore.state;if(e.appliedTransaction){await this.showEditConfirmDialog()?this.accept(!0):this.accept(!1)}else this.accept(!1)}}willMountOrUpdate(){const e=p.Z.state,{currentSpaceViewStore:t}=m.default.state;e.open&&t&&u.createAndCommit({userAction:"PageTemplateModal.willMountOrUpdate",environment:this.environment,perform:i=>{c.GF({item:e.item,spaceViewStore:t,transaction:i})}})}renderComponent(){const{device:e}=this.environment,t=p.Z.state;if(e.isMobile)return n()(y.GI,{open:t.open,render:this.renderMobilePopup,forceFullScreenSlideUp:!0,onDismiss:this.handleDismiss,popupType:y.GI.PopupType.SlideUp})}renderPreview(e){return n()(S.Z,{previewRootId:e.item.previewRootId,isFrontPage:!1,style:b.previewMobileStyle,templateRecordCacheStore:this.stores.templateRecordCacheStore,disabled:!0},e.item.previewRootId)}accept(e){const{inMemoryRecordCache:t}=this.stores.templateRecordCacheStore.state,i=p.Z.state,{currentSpaceViewStore:a,currentSpaceStore:n,mainEditorCurrentBlockStore:o}=m.default.state;if(i.open&&a&&n){const s=o&&o.isEmptyPage()?o:void 0,r=g.default.state.open&&g.default.state.target&&g.default.state.target.isEmptyPage()?g.default.state.target:void 0;c.RL({environment:this.environment,item:i.item,spaceStore:n,spaceViewStore:a,useRecordCache:e?t:void 0,initializeStore:i.createNewPage?void 0:s||r,isPrivate:i.isPrivate,from:i.createNewPage?"sidebar":"newPage"})}}close(){c.xv(this.environment),l.LZ()}setCurrentItem(e){p.Z.state.open&&c.zO({templateItem:e,currentUserId:this.environment.currentUser.id})}showEditConfirmDialog(){return new Promise(((e,t)=>{d.showDialog({message:n()(r.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.prompt",defaultMessage:"It looks like you've modified the template. Would you like to save your edits?"}),showCancel:!1,keepFocus:!0,items:[{label:n()(r.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.saveButton.label",defaultMessage:"Save edits"}),onAccept:()=>{e(!0)}},{label:n()(r.FormattedMessage,{id:"pageTemplateModal.modifiedTemplateDialog.discardEditsButton.label",defaultMessage:"Discard"}),color:"red",onAccept:()=>{e(!1)}}]})}))}getIconWrapStyle(){return{color:this.theme.regularTextColor,position:"relative"}}hoveredButtonStyle(){return{color:this.theme.regularTextColor,fontWeight:s.Z.fontWeight.medium}}fixedLinkStyle(){return{padding:12,color:this.theme.mediumTextColor,background:"dark"===this.theme.mode?this.theme.popoverBackground:this.theme.sidebarBackground,fontSize:13,fontWeight:s.Z.fontWeight.medium,display:"flex",alignItems:"center",position:"absolute",bottom:0,right:0,height:45,width:b.sidebarWidth,borderTop:`1px solid ${this.theme.regularDividerColor}`}}fixedLinkIconStyle(){return{width:12,height:12,marginLeft:8,marginRight:10,marginBottom:0,fill:this.theme.regularIconColor,fontWeight:s.Z.fontWeight.medium}}}b.displayName="PageTemplateModal",b.sidebarWidth=240,b.previewMobileStyle={width:"100%",flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",overflow:"hidden"},b.scrollerStyle={flexGrow:1,flexShrink:1,paddingBottom:44};const M=(0,r.injectIntl)(b)},76844:(e,t,i)=>{i.d(t,{Z:()=>s});var a=i(23174),n=i.n(a),o=(i(67294),i(72126));const s=function(e){return e=o.f0({percent:.1},e),n()("div",{style:o.f0({position:"relative",minWidth:30,height:5,borderRadius:1,overflow:"hidden"},e.style)},void 0,n()("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",background:"currentColor",opacity:.1}}),n()("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:100*e.percent+"%",minWidth:2,background:"currentColor",opacity:.6}}))}},57806:(e,t,i)=>{i.r(t),i.d(t,{PermissionsInviteBase:()=>D,default:()=>L});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(83355),d=i(8848),c=i(72126),u=i(94044),m=i(5366),p=i(50906),g=i(95209),h=i(21325),f=i(43250),v=i(87279),y=i(45101),S=i(65598),b=i(18514),M=i(8323),w=i(95697),C=i(18245),_=i(85834),k=i(1903),T=i(29677),I=i(57559),P=i(78140),x=i(40721),Z=i(72495),F=i(83182),A=i(7567),E=i(44385),B=i(24145),R=i(43579);class D extends l.Z{constructor(){super(...arguments),this.renderInShareMenu=this.createComputedStore((()=>Boolean(this.props.renderInShareMenu&&!this.environment.device.isMobile))),this.inviteOrigin=this.createComputedStore((()=>this.props.store instanceof I.G?this.renderInShareMenu.state?"page_share_modal":"page_permission_modal":"space_share_modal")),this.defaultRoleForSpaceBot=this.createComputedStore((()=>"editor")),this.defaultRoleForNonBot=this.createComputedStore((()=>{const{store:e,isSubscribed:t}=this.props;return y.xT({environment:this.environment,store:e,isSubscribed:t})})),this.inputDebounce=void 0,this.storeTypes={permissionsInviteStore:k.Z,contextualInviteStore:_.ZP},this.handleUpgradeClick=()=>{g.Vu({environment:this.environment,upgradeButtonName:this.props.upgradeButtonName,onUpgradeButtonClick:this.props.onUpgradeButtonClick})},this.handleModalDismiss=async()=>{await g.kL({environment:this.environment,permissionsInviteStore:this.stores.permissionsInviteStore,from:"share_menu"})},this.handleInputChange=async e=>{var t;null===(t=this.inputDebounce)||void 0===t||t.cancel(),this.inputDebounce=c.Ds((()=>{p.UWw(this.environment,{invite_flow_id:this.stores.permissionsInviteStore.state.flowId,subscription_tier:(0,M.zt)(),invite_origin:this.inviteOrigin.state})}),1e3),this.inputDebounce(),await g.jC({environment:this.environment,event:e,permissionsInviteStore:this.stores.permissionsInviteStore})},this.handleClickRemoveToken=e=>{g.PV({targetToRemove:e,permissionsInviteStore:this.stores.permissionsInviteStore,defaultRoleForNonBot:this.defaultRoleForNonBot.state})}}async willMount(){await h.bi(this.environment)}willUnmount(){var e;null===(e=this.inputDebounce)||void 0===e||e.flush()}renderComponent(){if(this.renderInShareMenu.state)return this.renderComponentInShareMenu();const e=this.renderHeader(),t=this.renderSearchRequest();return this.renderComponentOriginal(e,t)}renderHeader(){const{permissionsInviteStore:e}=this.stores,{device:t}=this.environment;return s()(B.Z,{permissionsInviteStore:e,store:this.props.store,handleClickRemoveToken:e=>{this.handleClickRemoveToken(e)},handleInputChange:async e=>{await this.handleInputChange(e)},handleInputSubmit:async()=>{await this.handleInviteInputSubmit()},origin:Boolean(this.renderInShareMenu.state)?"share_menu":"share_modal",defaultRoleForNonBot:this.defaultRoleForNonBot.state,isTeamsEnabled:(0,w.bq)(),right:!t.isMobile&&this.renderDesktopInputRightInner(),focus:"invitee"===e.state.inputFocus||"invitee-popup-closed"===e.state.inputFocus,handleFocus:()=>{t.isMobile||e.setState({...e.state,inputFocus:"invitee"})}})}renderSearchRequest(){const{permissionsInviteStore:e}=this.stores,t=(0,S.NZ)(this.props.store),i=(0,S.NZ)(this.props.store);return s()(R.Z,{permissionsInviteStore:e,store:this.props.store,defaultRoleForSpaceBot:this.defaultRoleForSpaceBot.state,shouldShowBots:t,shouldShowGroups:i,sectionRenderLimit:this.renderInShareMenu.state?5:10,membersOnly:this.props.membersOnly})}renderComponentOriginal(e,t){const{device:i}=this.environment;let a;return a=i.isMobile?{menuType:v.og.Modal,title:(0,S.Mm)(this.props.store)?s()(m.FormattedMessage,{id:"inviteUserModal.addMemberMenu.title",defaultMessage:"Add members"}):s()(m.FormattedMessage,{id:"inviteUserModal.invitePersonMenu.title",defaultMessage:"Invite a person"}),right:s()("div",{style:{color:d.ZP.blue}},void 0,s()(m.FormattedMessage,{id:"inviteUserModal.mobile.inviteButton.label",defaultMessage:"Invite"})),left:s()(x.CancelMenuText,{}),onClickLeft:this.handleModalDismiss,onClickRight:async()=>{await this.handleInviteClick()},header:e}:{menuType:v.og.Popup,width:480,height:"60vh",header:e,tokenInputHeader:!0,footer:this.renderHelpButton(),disableScroller:!1},r.createElement(P.Z,n()({},a,{className:f.FJA}),i.isMobile&&s()(Z.Z,{title:s()(m.FormattedMessage,{id:"inviteUserModal.permissionLevel.title",defaultMessage:"Permission level"})},void 0,this.renderDesktopInputRightInnerSelect()),s()("div",{},void 0,t),i.isMobile&&this.renderHelpButton())}renderHelpButton(){return this.renderInShareMenu.state?null:s()(Z.Z,{topBorder:!0,disableDesktopPadding:!0},void 0,s()(F.Z,{title:s()(m.FormattedMessage,{id:"inviteUserModal.helpButton.caption",defaultMessage:"Learn how to invite people and set permissions"}),href:(0,b.UY)("guides.invitePerson"),analyticsFrom:"invite_person"}))}renderDesktopInputRightInner(){return s()("div",{style:{marginLeft:u.p_,display:"flex",alignItems:"center"}},void 0,this.renderDesktopInputRightInnerSelect(),!this.renderInShareMenu.state&&this.renderDesktopInputRightInnerButton({isLarge:!0}))}renderDesktopInputRightInnerButton(e){const{isLarge:t}=e;return s()(E.Z,{store:this.props.store,permissionsInviteStore:this.stores.permissionsInviteStore,handleUpgradeClick:()=>this.handleUpgradeClick(),handleInviteClick:()=>this.handleInviteClick(),disabled:this.props.disabled,isLarge:t})}renderDesktopInputRightInnerSelect(){const{device:e}=this.environment,{store:t}=this.props,{permissionsInviteStore:i}=this.stores;if(i.state.isInviteTargetsEmpty||!(0,T.ow)(i.state))return s()(A.ZP,{disabled:(0,S.Mm)(t)&&!t.canAdmin(),role:i.state.inviteRole,table:i.state.table,type:"user_permission",blockType:(0,S.NZ)(t)?t.getType():void 0,isInvite:!0,onUpgradeButtonClick:this.props.onUpgradeButtonClick,upgradeButtonName:this.props.upgradeButtonName,buttonStyle:{display:"flex",whiteSpace:"nowrap",height:26,color:d.ZP.uiGray,...this.renderInShareMenu.state&&{marginTop:e.isMobile?4:i.state.isInviteTargetsEmpty?1:6,marginBottom:e.isMobile?4:i.state.isInviteTargetsEmpty?1:6,marginRight:0}},isMenuItem:e.isMobile,onChange:e=>{g.XC({environment:this.environment,newRole:e,permissionsInviteStore:this.stores.permissionsInviteStore})}})}renderComponentInShareMenu(){const e={menuType:v.og.Popup,header:s()("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"top",marginLeft:12,marginRight:12,gap:10}},void 0,this.renderHeader(),this.renderDesktopInputRightInnerButton({isLarge:!0})),footer:this.renderHelpButton(),disableScroller:!1};return s()("div",{style:{paddingTop:14,paddingBottom:14,paddingLeft:2,paddingRight:2}},void 0,r.createElement(P.Z,e,this.renderSearchRequest()))}async handleInviteInputSubmit(){await this.handleInviteClick()}async handleInviteClick(){const e=C.default.mark("share_menu.invite_user_lag");await g.qg({environment:this.environment,store:this.props.store,sudoModeStore:this.props.sudoModeStore,permissionsInviteStore:this.stores.permissionsInviteStore,contextualInviteStore:this.stores.contextualInviteStore,onInviteClick:this.props.onInviteClick,onInviteComplete:this.props.onInviteComplete,inviteOrigin:this.inviteOrigin.state,intl:this.props.intl}),C.default.measure(e,{environment:this.environment})}}D.displayName="PermissionsInviteBase";const L=(0,m.injectIntl)(D)},44385:(e,t,i)=>{i.d(t,{Z:()=>M,e:()=>b});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(86628),c=i(5366),u=i(94044),m=i(47425),p=i(67669),g=i(45101),h=i(8323),f=i(26781),v=i(4023),y=i(42922),S=i(26388);function b(){window.__c={n:"GuestLimitTooltip"};const e=(0,d.VK)((()=>(0,m.tP)((0,h.zt)())),[]);return r.createElement(r.Fragment,null,s()("div",{},void 0,s()(c.FormattedMessage,{id:"inviteUserButton.modalTooltip.guestLimitLine1",defaultMessage:"Your plan allows up to {guestLimit} unique guests.",values:{guestLimit:e}})),s()("div",{},void 0,s()(c.FormattedMessage,{id:"inviteUserButton.modalTooltip.guestLimitLine2",defaultMessage:"Upgrade to go unlimited."})))}const M=function(e){window.__c={n:"PermissionsInviteButton"};const{store:t,permissionsInviteStore:i,handleUpgradeClick:a,handleInviteClick:o,isLarge:m}=e,h=(0,l.O7)(),[M]=(0,d.AF)(i),w=(0,d.VK)((()=>M.inviteTargets.some((e=>g.OA(e)))),[M]),C=(0,f.i)(t),_=(0,d.VK)((()=>{const e=M.inviteTargets,t=e.filter((e=>{let{type:t}=e;return"newUser"===t})).map((e=>{let{value:t}=e;return t.email})),i=e.filter((e=>{let{type:t}=e;return"existingUser"===t})).map((e=>{let{value:t}=e;return t.id}));return p.dA(h,[...t,...i])}),[h,M]),k=w?C:void 0;return s()(S.Z,{alignment:v.v.Center,disableTooltip:!(_||k),renderTooltip:()=>_?s()(b,{}):k,render:e=>r.createElement(y.Z,n()({isLarge:m,style:{minWidth:u.UF},disabled:Boolean(k),onClick:_?a:o},e),s()(c.FormattedMessage,_?{id:"inviteUserModal.inviteButton.upgradeLabel",defaultMessage:"Upgrade"}:{id:"inviteUserModal.inviteButton.label",defaultMessage:"Invite"}))})}},7378:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var a=i(23174),n=i.n(a),o=i(10434),s=i.n(o),r=i(67294),l=i(83355),d=i(41892),c=i(5366),u=i(21325),m=i(1865),p=i(45101),g=i(65598),h=i(8323),f=i(1903),v=i(78291),y=i(42922),S=i(9019),b=i(26388),M=i(57806),w=i(60442);class C extends l.Z{constructor(){super(...arguments),this.storeTypes={permissionsInviteStore:f.Z},this.renderOverlay=()=>r.createElement(M.default,s()({},this.props,{permissionsInviteStore:this.stores.permissionsInviteStore})),this.handleUpgradeClick=()=>{m.y(this.environment,{from:this.props.upgradeButtonName,for:"plus"}),this.props.onUpgradeButtonClick&&this.props.onUpgradeButtonClick()},this.handleButtonClick=()=>{(0,p.z5)({environment:this.environment,permissionsInviteStore:this.stores.permissionsInviteStore,store:this.props.store,renderInShareModal:!1,isSubscribed:this.props.isSubscribed})},this.handleModalDismiss=async()=>{const{permissionsInviteStore:e}=this.stores;await(0,p.Aw)({environment:this.environment,permissionsInviteStoreState:e.state,from:(0,g.Mm)(this.props.store)?"space_share_modal":"page_share_modal"})||e.reset()}}async willMount(){await u.bi(this.environment)}renderComponent(){const{store:e}=this.props,{modalOpen:t}=this.stores.permissionsInviteStore.state;let i,a,o=!1;return e.canEditMembership()?e.canEditMembership()&&(0,g.Mm)(e)&&v.default.state.data&&!h.Mk()?(i=!1,o=!0,a=n()(w.Z,{imageURL:d.Z.images.tooltips.upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,caption:n()(c.FormattedMessage,{defaultMessage:"Members are teammates you invite to your workspace. They can access and add pages for all members to see, or be added to pages with permissions for private collaboration.",id:"permissionsInvite.spaceAddMemberUpgradeTooltip.caption"}),title:n()(c.FormattedMessage,{defaultMessage:"Upgrade to add members",id:"permissionsInvite.spaceAddMemberUpgradeTooltip.title"})})):i=!0:(i=!1,a=(0,g.Mm)(e)?n()(c.FormattedMessage,{id:"inviteUserButton.tooltip.adminsOnlyMessage",defaultMessage:"Only admins can add members."}):n()(c.FormattedMessage,{id:"inviteUserButton.tooltip.fullAccessOnlyMessage",defaultMessage:"Only those with full access can add people."})),n()("div",{},void 0,(0,g.Mm)(e)?n()(S.Z,{open:t,onDismiss:this.handleModalDismiss,renderContent:this.renderOverlay,origin:n()(b.Z,{renderTooltip:()=>a,disableTooltip:i,render:e=>r.createElement(y.Z,s()({isLarge:!0,onClick:o?this.handleUpgradeClick:this.handleButtonClick,disabled:!i&&!o,style:{flex:this.props.shouldGrow?1:0,...this.props.buttonStyle}},e),n()(c.FormattedMessage,{id:"inviteUserButton.addMemberLabel",defaultMessage:"Add members"}))})}):n()(S.Z,{open:t,onDismiss:this.handleModalDismiss,renderContent:this.renderOverlay,origin:null}))}}C.displayName="PermissionsInviteWithModal";const _=(0,c.injectIntl)(C)},3044:(e,t,i)=>{i.d(t,{Z:()=>E});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=(i(57658),i(67294)),l=i(83355),d=i(49085),c=i(66897),u=i(72126),m=i(19889),p=i(70203),g=i(97880),h=i(5366),f=i(31299),v=i(87279),y=i(77080),S=i(49068),b=i(69582),M=i(52275),w=i(78140),C=i(32163),_=i(43765),k=i(40721),T=i(77137),I=i(72495),P=i(92864),x=i(47082),Z=i(97680);const F=(0,h.defineMessages)({searchForPerson:{defaultMessage:"Search for a person…",id:"database.personPropertyValue.searchPlaceholder"}});class A extends l.Z{constructor(){super(...arguments),this.inputValue=d.default.createValue(""),this.handlePersonPropertyMenuChange=e=>{const{schema:t,property:i}=this.props,a=t[i];if(!a||"person"!==a.type)return;let n;n=1===a.limit?e.length>0?[e[e.length-1]]:[]:e,this.props.onChange({value:n}),this.inputValue.setState("")}}willMount(e){super.willMount(e),e.insertChar&&this.inputValue.setState(e.insertChar)}renderComponent(){const{device:e}=this.environment,{disabled:t,intl:i,schema:a,property:o,isTemplatePage:l}=this.props,d=l&&y.default.checkGate("template-variable-properties"),A=a[o];if(!A||"person"!==A.type)return;const E=[],B=this.props.value.map((i=>{if((0,p.D4X)(i))return E.push(i),s()(b.w,{templateVariableType:i,showRemoveButton:!t,onRemove:()=>{const e=this.props.value.filter((e=>(0,c.Wk)(e)));this.props.onChange({value:e})},style:{margin:"0px 6px 6px 0px"}},i);if((0,c.Wk)(i)){const a=(0,c.Hl)({pointer:i,getRecordValue:this.props.parentStore.getRecordValue});return s()(P.ZP,{actor:a,format:e.isMobile?P.ZP.Format.Large:P.ZP.Format.Medium,showRemoveButton:!t,onClickRemove:()=>{const e=this.props.value.filter((e=>(0,p.D4X)(e)||(0,c.Wk)(e)&&e.id!==i.id));this.props.onChange({value:e})},shouldShrink:!0,isSingle:!1},i.id)}(0,g.t1)(i)})),R=p.s8k.filter((e=>!E.includes(e))),D={request:{query:this.inputValue.state,actors:u.hX(this.props.value,c.Wk)},performRequest:async e=>{let{query:t,actors:i}=e;const{users:a}=await f.CO({environment:this.environment,query:t,membersOnly:!1});return{users:a.filter((e=>!i.some((t=>t.id===e.id)))).slice(0,20)}},render:(e,t,i)=>{if(e)return s()(I.Z,{title:(0,S.$)(A.limit),loading:!i},void 0,s()(_.Z,{title:s()(h.FormattedMessage,{defaultMessage:"Something went wrong.",id:"database.personPropertyMenu.searchErrorMessage"})}));if(t&&0===t.users.length)return s()(I.Z,{title:(0,S.$)(A.limit),loading:!i},void 0,s()(_.Z,{title:s()(h.FormattedMessage,{defaultMessage:"No results",id:"database.personPropertyMenu.noSearchResults.message"})}));const a=u.oA((t&&t.users||[]).map((e=>({key:e.id,render:t=>r.createElement(Z.Z,n()({},t,{actor:(0,c.dp)(e)})),action:()=>{this.handlePersonPropertyMenuChange([...this.props.value,{table:m.KJ,id:e.id}])}})))),o=u.oA([a.length>0?{key:"person section",render:e=>r.createElement(I.Z,n()({},e,{title:(0,S.$)(A.limit),loading:!i})),items:a}:void 0]);return s()(C.Z,{type:C.i.Vertical,initialFocus:this.inputValue.state.length>0?0:void 0,sections:o})}},L=s()(x.Z,{focus:!e.isMobile||void 0,focusAfterAnimation:!0,format:x.Z.Format.Person,tokens:B,placeholder:i.formatMessage(F.searchForPerson),hideInput:t,onRemoveLastToken:()=>{this.props.onChange({value:this.props.value.slice(0,this.props.value.length-1)})},value:this.inputValue.state,onChange:e=>this.inputValue.setState(e.target.value),dontShowBorderBottom:e.isAndroid});let N;return N=e.isMobile?{menuType:v.og.Modal,title:A.name,right:s()(k.DoneMenuText,{}),onClickRight:this.props.onDismiss,header:L}:{menuType:v.og.Popup,header:L,tokenInputHeader:!0,maxHeight:333},t?r.createElement(w.Z,N):r.createElement(w.Z,N,d&&s()(I.Z,{title:s()(h.FormattedMessage,{defaultMessage:"Shortcuts",id:"PersonPropertyMenu.menuItem.shortcuts.label"})},void 0,R.length>0?s()(r.Fragment,{},void 0,R.map((e=>s()(M.Z,{focused:!1,title:s()(b.w,{templateVariableType:e}),caption:(0,p.Z08)(e,i),inline:!0,onClick:()=>{this.handlePersonPropertyMenuChange([...this.props.value,e])}},`relative-person-shortcut-${e}`)))):s()(_.Z,{title:s()(h.FormattedMessage,{id:"database.personPropertyMenu.noShorcuts.message",defaultMessage:"No shortcuts"})})),r.createElement(T.Z,D))}}A.displayName="PersonPropertyMenu";const E=(0,h.injectIntl)(A)},1244:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(480),l=i(86628),d=i(24405),c=i(41892),u=i(8848),m=i(64275),p=i(72126),g=i(89101),h=i(60949),f=i(82990),v=i(5366),y=i(50906),S=i(29974),b=i(97627),M=i(39699),w=i(37181),C=i(36867),_=i(80444),k=i(4926),T=i(77080),I=i(5188),P=i(49085);class x extends P.default{getInitialState(){return{open:!1,step:"prompt"}}}const Z=new x;var F=i(12768),A=i(23063),E=i(42922),B=i(64921),R=i(28451),D=i(3386),L=i(89728),N=i(53437),O=i(42402),V=i(29551),U=i(38294);class W extends s.Z{constructor(){super(...arguments),this.hasSeenInitial=!1,this.renderMenu=()=>n()(R.P,{calloutId:"persona_collection"},void 0,n()("div",{style:this.getContainerStyle()},void 0,this.renderCancel(),n()(V.gq,{style:this.getInnerContainerStyle(),alignItems:"center",alignContent:"center"},void 0,this.renderStep()))),this.renderInitial=()=>{const e=this.environment.currentUser.id;if(!Z.state.open||!e)return;this.hasSeenInitial||(y.q5U(this.environment,{user_id:e,event:"initial"}),this.hasSeenInitial=!0);const{invalidField:t}=Z.state;return n()("div",{style:{...this.getSlideUpStyle(),padding:8}},void 0,n()("img",{style:{width:40,height:32},src:c.Z.images.chatButtonSmallPng}),n()("div",{style:{fontSize:14,fontWeight:f.Z.fontWeight.semibold,paddingTop:0,paddingBottom:8}},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.header",defaultMessage:"Tell us more about yourself"})),n()("div",{style:{fontSize:12,color:this.theme.mediumTextColor,width:270,margin:"0 auto"}},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.caption",defaultMessage:"We would love to learn more about you so we can make our product better serve you"})),n()("div",{style:{...this.getLabelStyle(),marginTop:10}},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.roleLabel",defaultMessage:"What is your role?"})),n()(U.Z,{questionType:"role",title:n()(v.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.question.roleLabel",defaultMessage:"Role"}),question:Z.state.role,invalid:"role"===t,onSelect:e=>{Z.state.open&&Z.setState({...Z.state,role:e,step:"initial"})}}),n()("div",{style:this.getLabelStyle()},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.workLabel",defaultMessage:"What kind of work do you do?"})),n()(U.Z,{questionType:"work",title:n()(v.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.question.workLabel",defaultMessage:"Work"}),question:Z.state.work,invalid:"work"===t,onSelect:e=>{Z.state.open&&Z.setState({...Z.state,work:e,step:"initial"})}}),n()("div",{style:this.getLabelStyle()},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.questionLabel",defaultMessage:"What are you planning to use Notion for?"})),n()(U.Z,{questionType:"use",title:n()(v.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.question.useLabel",defaultMessage:"Use"}),question:Z.state.use,invalid:"use"===t,onSelect:e=>{Z.state.open&&Z.setState({...Z.state,use:e,step:"initial"})}}),n()("div",{style:this.getLabelStyle()},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.companySizeLabel",defaultMessage:"Company size"})),n()(V.gq,{},void 0,this.getCompanySizeButtonData().map((e=>{let{type:t,message:i,style:a}=e;return n()(L.Z,{isLightGray:!0,isLarge:!0,style:{...this.getBaseButtonStyle(),...Z.state.open&&Z.state.companySize===t&&this.getSelectedButtonStyle(),...a},onClick:()=>{Z.state.open&&Z.setState({...Z.state,companySize:t,step:"initial"})}},void 0,i)}))))},this.renderCancel=()=>n()(B.Z,{onClick:this.handleCancel,style:this.getCancelStyle(),hoveredStyle:{background:this.theme.buttonPressedBackground}},void 0,(0,m.D)({width:14,fill:this.theme.mediumTextColor})),this.renderThanks=()=>{const e=this.environment.currentUser.id;if(e)return n()(H,{userId:e})},this.renderPrompt=()=>{const e=this.environment.currentUser.id;if(e)return n()(K,{userId:e})},this.handleCancel=()=>{const{currentUserSettingsStore:e}=_.default.state,t=this.environment.currentUser.id;e&&t&&(y.jPN(this.environment,{user_id:t,event:"cancel"}),M.createAndCommit({userAction:"PersonaCollectionModal.handleCancel",environment:this.environment,perform:t=>{w.d2({userSettingsStore:e,data:{seen_persona_collection:!0},transaction:t})}}),Z.reset())}}willMountOrUpdate(){var e;if(Z.state.open)return;const t=this.environment,i=t.currentUser.id,a=(0,C.g)(i),{currentUserSettingsStore:n,inAppCalloutStore:o}=_.default.state;if(!n||t.device.isMobile)return;if(a<3)return;const s=n.getSettings();if(!s)return;if(Boolean(s.seen_persona_collection||(null===(e=s.persona_version)||void 0===e?void 0:e.version)))return;const r="on"===T.default.getEligibleGroup({experimentId:"persona_collection",defaultGroup:"unassigned"});!F.default.state.isOnboarding&&"closed"!==Z.state.step&&!1===I.Z.state.open&&o.canShow("persona_collection")&&r&&Z.setState({...Z.state,open:!0})}renderComponent(){return n()(N.GI,{keepFocus:!1,open:Z.state.open,render:this.renderMenu,onDismiss:this.handleCancel,popupType:N.kQ.Popup,disableDarkOverlayBackground:!0,disableMouseCapture:!0})}renderStep(){if(!1===Z.state.open)return;const{step:e}=Z.state;return o.createElement(o.Fragment,null,n()(A.Z,{isVisible:"initial"===e,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},render:()=>n()(D.Z,{capture:!0,onBackspace:p.yR,onLeft:p.yR,onRight:p.yR,onSelectAll:p.yR,onRedo:p.yR,onUndo:p.yR,onCut:p.yR,onCopy:p.yR,onPaste:p.yR,onKeypress:p.yR,onDelete:p.yR,onTab:p.yR},void 0,this.renderInitial())}),n()(A.Z,{isVisible:"prompt"===e,animationStyle:this.getAnimationStyle("prompt"===e),enterAnimationStyle:this.getEnterExitAnimationStyle(),exitAnimationStyle:this.getEnterExitAnimationStyle(),render:this.renderPrompt}),n()(A.Z,{isVisible:"thanks"===e,animationStyle:this.getAnimationStyle("thanks"===e),enterAnimationStyle:this.getEnterExitAnimationStyle(),exitAnimationStyle:this.getEnterExitAnimationStyle(),render:this.renderThanks}),n()(A.Z,{isVisible:"initial"===e,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},render:()=>n()(E.Z,{isLarge:!0,style:{marginTop:17,width:270,position:"absolute",bottom:20},onClick:()=>this.handleSubmitClick()},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.sendLabel",defaultMessage:"Submit"}))}))}getInvalidField(){if(!Z.state.open)return"closed";const{use:e,role:t,work:i,companySize:a}=Z.state;return a?e?t?i?void 0:"work":"role":"use":"company_size"}getCompanySizeButtonData(){return[{type:"1_100",message:n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.1_100Label",defaultMessage:"1-100"})},{type:"101_1000",message:n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.101_1000Label",defaultMessage:"101-1,000"}),style:{marginLeft:8,marginRight:8}},{type:"1001+",message:n()(v.FormattedMessage,{id:"PersonaCollectionModal.initial.1000PlusLabel",defaultMessage:"1,001+"})}]}handleSubmitClick(){const e=this.environment.currentUser.id;if(!Z.state.open||!e)return;const t=this.getInvalidField();if(t)return void Z.setState({...Z.state,step:"initial",invalidField:t});y.jPN(this.environment,{user_id:e,event:"submit"});const{currentUserSettingsStore:i}=_.default.state;if(i&&Z.state.open){const e=Z.state;if(M.createAndCommit({userAction:"PersonaCollectionModal.handleSubmitClick",environment:this.environment,perform:t=>{w.d2({userSettingsStore:i,data:{seen_persona_collection:!0,persona:e.work,team_role:e.role,use_case:e.use,source:"persona_collection",persona_version:{version:"V3",timestamp:(new Date).getTime()}},transaction:t})}}),T.default.checkGate("survey_data_writes")){const t=(new Date).getTime(),i=h.Dh({maybeFunction:e.work,guessedFunctionVersion:4,maybeRole:e.role,guessedRoleVersion:2,collectedFrom:"inapp_modal",collectedAt:t});void 0!==i&&b.Q1(this.environment,i);const a=h.K0({maybeCompanySize:e.companySize,guessedCompanySizeVersion:1,maybeUseCases:[e.use],guessedUseCasesVersion:3,collectedFrom:"inapp_modal",collectedAt:t});void 0!==a&&S.wg(this.environment,a)}}Z.setState({...Z.state,invalidField:void 0,step:"thanks"}),p.gw((()=>{Z.reset()}),6e3)}getContainerStyle(){return{background:this.theme.popoverBackground,borderRadius:5,boxShadow:this.theme.mediumBoxShadow,position:"fixed",bottom:65+k.Z.state,right:16+k.Z.state}}getBackgroundStyle(){return{backgroundColor:"transparent",pointerEvents:"none"}}getCancelStyle(){return{position:"absolute",top:"10px",right:"10px",background:this.theme.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}}getInnerContainerStyle(){return{width:320,height:"prompt"===Z.state.step||"thanks"===Z.state.step?200:450,overflow:"hidden",position:"relative",right:"auto",padding:30,paddingTop:0,cursor:"default",textAlign:"center",justifyContent:"center"}}getLabelStyle(){return{marginTop:10,fontSize:12,color:this.theme.mediumTextColor,fontWeight:f.Z.fontWeight.medium,lineHeight:"135%",marginBottom:4,textAlign:"left"}}getAnimationStyle(e){return{opacity:e?1:0,scale:e?1:.96}}getEnterExitAnimationStyle(){return{opacity:0,scale:.96}}getBaseButtonStyle(){return{border:"1px solid #E7E6E5",flexGrow:1,justifyContent:"center"}}getSelectedButtonStyle(){return{color:u.ZP.blue,border:`1px solid ${u.ZP.blue}`}}getSlideUpStyle(){if(!Z.state.open)return{};const{step:e}=Z.state;return{position:"absolute",transition:"transform 200ms ease",transform:"initial"===e?"translateY(0px)":"translateY(-180px)"}}}W.displayName="PersonaCollectionModal";const z=W;function K(e){window.__c={n:"PersonaCollectionPrompt"};const[t,i]=(0,l.AF)(Z),a=(0,d.yK)((e=>({promptHeaderStyle:{color:e.regularTextColor,fontWeight:f.Z.fontWeight.semibold,fontSize:14},promptTextStyle:{fontSize:12,color:e.mediumTextColor,width:270,margin:"0 auto"}})),[]),s=(0,r.O7)();return(0,o.useEffect)((()=>{y.q5U(s,{user_id:e.userId,event:"prompt"})}),[s,e.userId]),n()("div",{style:{paddingTop:24}},void 0,n()("img",{style:{width:40,height:56,paddingTop:24},src:c.Z.images.chatButtonSmallPng}),n()("div",{style:a.promptHeaderStyle},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.prompt.header",defaultMessage:"Tell us more about yourself"})),n()("div",{style:a.promptTextStyle},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.prompt.caption",defaultMessage:"We would love to learn more about you so we can make our product better serve you"})),n()(E.Z,{isLarge:!0,style:{marginTop:6,width:260,bottom:20},onClick:()=>{!0===t.open&&i({...t,step:"initial"});const{currentUserSettingsStore:e}=_.default.state;e&&M.createAndCommit({userAction:"PersonaCollectionModal.PersonaCollectionPrompt",environment:s,perform:t=>{w.d2({userSettingsStore:e,data:{seen_persona_collection:!0},transaction:t})}})}},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.prompt.survey",defaultMessage:"Take the 20 second survey"})),n()(L.Z,{isLightGray:!0,isLarge:!0,onClick:()=>{const{currentUserSettingsStore:t}=_.default.state;t&&e.userId&&(M.createAndCommit({userAction:"PersonaCollectionModal.PersonaCollectionPrompt",environment:s,perform:e=>{w.d2({userSettingsStore:t,data:{seen_persona_collection:!0},transaction:e})}}),y.jPN(s,{user_id:e.userId,event:"skip"}),Z.setState({open:!1,step:"closed"}))}},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.prompt.skipLabel",defaultMessage:"Skip"})))}function H(e){window.__c={n:"PersonaCollectionThanks"};const t=(0,d.yK)((e=>({thanksHeaderStyle:{color:e.regularTextColor,fontWeight:f.Z.fontWeight.semibold,fontSize:14}})),[]),i=(0,r.O7)();return(0,o.useEffect)((()=>{y.q5U(i,{user_id:e.userId,event:"thanks"})}),[i,e.userId]),n()("div",{},void 0,n()("img",{style:{width:208,height:89,paddingTop:30},src:c.Z.images.heroIllustrationPng}),n()("div",{style:t.thanksHeaderStyle},void 0,n()(v.FormattedMessage,{id:"PersonaCollectionModal.thanks.caption",defaultMessage:"Thank you! Discover new ways to use Notion in the <textlink>Template Gallery</textlink>",values:{textlink:t=>n()(O.Z,{disableUnderline:!0,disableHover:!0,href:g._j.templates,external:!0,style:{color:u.ZP.blue,fontSize:f.Z.fontSize.UIRegular.desktop,fontWeight:500},onClick:()=>{e.userId&&y.jPN(i,{user_id:e.userId,event:"template_gallery"})}},void 0,t)}})))}},38294:(e,t,i)=>{i.d(t,{J:()=>S,Z:()=>_});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(83355),d=i(8848),c=i(37240),u=i(29091),m=i(5366),p=i(52275),g=i(63296),h=i(45959),f=i(64369);const v="other",y={exec:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.exec",defaultMessage:"Executive (C-level / VP)"}),dept_lead:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.dept_lead",defaultMessage:"Department lead"}),team_manager:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.team_manager",defaultMessage:"Team manager"}),member:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.member",defaultMessage:"Team member"}),solo:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.solo",defaultMessage:"Solo-preneur / Freelancer"}),personal:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.roleQuestion.personal",defaultMessage:"Using Notion just for myself"})},S={creative:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.creative",defaultMessage:"Creative"}),founderCeo:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.founderCeo",defaultMessage:"Founder / CEO"}),internalCommunication:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.internalCommunication",defaultMessage:"Internal Communication"}),eng:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.eng",defaultMessage:"Engineering"}),productDesign:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.productDesign",defaultMessage:"Product Design"}),projectProgramMgmt:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.projectProgramMgmt",defaultMessage:"Project / Program Management"}),product:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.question.product",defaultMessage:"Product Management"}),marketing:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.marketing",defaultMessage:"Marketing"}),sales:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.sales",defaultMessage:"Sales"}),support:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.support",defaultMessage:"Customer Service"}),finance:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.finance",defaultMessage:"Finance"}),hr:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.hr",defaultMessage:"Human Resources"}),itAdmin:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.itAdmin",defaultMessage:"IT Admin"}),knowledgeManagement:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.knowledgeManagement",defaultMessage:"Knowledge Management"}),operations:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.operations",defaultMessage:"Operations"}),educator:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.educator",defaultMessage:"Educator"}),other:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.other",defaultMessage:"Other"}),student:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.workQuestion.student",defaultMessage:"Student"})},b={student:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.schoolQuestion.student",defaultMessage:"Student"}),educator:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.schoolQuestion.educator",defaultMessage:"Educator"}),other:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.schoolQuestion.other",defaultMessage:"Other"})},M={docs:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.docs",defaultMessage:"Collaborate with others in docs"}),wikis:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.wikis",defaultMessage:"Create a knowledge base / wiki"}),notes:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.notes",defaultMessage:"Write notes"}),project:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.project",defaultMessage:"Manage projects"}),goals:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.goals",defaultMessage:"Track company goals and OKRs"}),ai:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.question.ai",defaultMessage:"Write with AI"}),other:s()(m.FormattedMessage,{id:"PersonaCollectionModalQuestionSelect.useQuestion.other",defaultMessage:"Other"})},w={"1_49":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.1_49",defaultMessage:"1-49"}),"50_99":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.50_99",defaultMessage:"50-99"}),"100_299":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.100_299",defaultMessage:"100-299"}),"300_999":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.300_999",defaultMessage:"300-999"}),"1000_5000":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.1000_5000",defaultMessage:"1000-5000"}),"5000+":s()(m.FormattedMessage,{id:"OnboardingSurvey.companySize.question.5000+",defaultMessage:"5000+"})};class C extends l.Z{renderComponent(){const{question:e,questionType:t,title:i,randomizeSelectionOrder:a,className:o,width:l,placeholder:u}=this.props,{device:v}=this.environment;let C={};"role"===t&&(C=y),"school"===t&&(C=b),"work"===t&&(C=S),"use"===t&&(C=M),"companySize"===t&&(C=w);const _={menuTitle:i,items:this.getPersonaSelectionMessages(C,a,this.environment.currentUser.id),width:l||280,disabled:this.props.disabled||!1,getKey:e=>e,selectedItem:t,originGap:4,onSelect:e=>{this.props.onSelect(e)},renderItem:e=>r.createElement(p.Z,n()({title:C[e.key]},e,{className:`${o}-${e.key}`})),renderOrigin:t=>r.createElement(g.Z,n()({},t,{isLarge:!0,style:{...this.getInputStyle(),...this.props.invalid&&{border:`1px solid ${d.ZP.red}`},...this.props.styles},className:o,focused:this.props.focus}),s()("div",{style:{display:"flex",alignItems:"center"}},void 0,s()(f.Z,{isMobile:v.isMobile,isSecondaryColor:!Boolean(e)},void 0,e?C[e]:u||s()(m.FormattedMessage,{defaultMessage:"Select response",id:"PersonaCollectionModal.selectQuestion.label"}))),(0,c.s)({width:10,fill:this.theme.lightIconColor}))};return r.createElement(h.Z,n()({key:"persona"},_))}getInputStyle(){const{device:e}=this.environment;return{backgroundColor:this.theme.whiteButtonBackground,height:e.isMobile?44:32,padding:"2px 10px",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:3,border:0,transition:"box-shadow 0.3s ease",boxShadow:`0 0 0 1px ${this.theme.outlineButtonBorder}`,background:this.theme.buttonBackground}}getPersonaSelectionMessages(e,t,i){const a=Object.keys(e);if(!t)return a;const n=(0,u.yH)(i);return a.filter((e=>e!==v)).sort((()=>n()-.5)).concat(a.filter((e=>e===v)))}}C.displayName="PersonaCollectionModalQuestionSelect";const _=(0,m.injectIntl)(C)},73099:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ue});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(10434),d=i.n(l),c=i(15145),u=i(86658),m=i(15769),p=i(88437),g=i(43876),h=i(27714);const f=(0,i(45238).I)("loginArrow",{viewBox:"0 0 16 12",svg:n()("path",{d:"M8.65 11.116a.615.615 0 00.444-.184l4.546-4.54a.66.66 0 00.205-.39v4.526c0 .349.253.588.608.588.356 0 .615-.239.615-.588V1.361a.59.59 0 00-.615-.608.585.585 0 00-.608.608v4.512a.698.698 0 00-.205-.396L9.094.944a.623.623 0 00-.445-.191.58.58 0 00-.594.588c0 .164.054.328.164.437L9.75 3.33l2.242 2.05-1.456-.054h-9.01c-.355 0-.601.253-.601.609 0 .355.246.615.601.615h9.01L12 6.495 9.75 8.54l-1.531 1.559a.616.616 0 00-.164.43c0 .342.26.588.594.588z"})});var v=i(60651),y=i(25651),S=i(18442),b=i(45137),M=i(89101),w=i(64002),C=i(5366),_=i(14871),k=i(47307),T=i(3297),I=i(40277),P=i(75018),x=i(29974),Z=i(10182),F=i(93405),A=i(72495),E=i(19037),B=i(28020),R=i(84210),D=i(33929),L=i(80444),N=i(83212),O=i(82763),V=i(62967),U=i(68714),W=i(62466);const z=(0,C.defineMessages)({whatIsNotionName:{id:"action.whatIsNotion.name",defaultMessage:"What is Notion?"},createNotionPageName:{id:"action.createNotionPage.name",defaultMessage:"Create your own Notion page"},signUpOrLogInName:{id:"action.signUpOrlogIn.name",defaultMessage:"Sign up or log in"},loginName:{id:"action.logIn.name",defaultMessage:"Log in"},shareLinkName:{id:"action.shareLink.name",defaultMessage:"Share link"},editPageName:{id:"action.editPage.name",defaultMessage:"Edit"},commentPageName:{id:"action.commentPage.name",defaultMessage:"Comment"},duplicatePageName:{id:"action.duplicatePage.name",defaultMessage:"Duplicate page"},backtoNotionName:{id:"action.backtoNotion.name",defaultMessage:"Back to Notion"}}),K=(0,w.SK)(M._j.signup,{try_notion_cta:"mobile"}),H=(0,V.cN)({key:"Create Notion Page",displayName:z.createNotionPageName,analyticsName:z.createNotionPageName.defaultMessage,svg:v.h,validators:[E.ff(E.jl),E.ff(E.tY)],closeParentMenu:!0,action:e=>{let{environment:t}=e;P.navigateOnBaseUrl({environment:t,url:K})}}),G=(0,V.cN)({key:"log in",displayName:z.signUpOrLogInName,analyticsName:z.signUpOrLogInName.defaultMessage,svg:f,validators:[E.ff(E.jl)],closeParentMenu:!0,action:async e=>{let{environment:t}=e;await P.publicPageTopBarAction(t,{utmContent:"sign_up_or_log_in",nextRoute:M._j.login})}}),q=(0,V.cN)({key:"log in",displayName:z.loginName,analyticsName:z.loginName.defaultMessage,svg:f,validators:[E.ff(E.jl)],closeParentMenu:!0,action:async e=>{let{environment:t}=e;P.navigateOnBaseUrl({environment:t,url:M._j.login,extraSearchParams:await P.generatePartnerStackPathParam(t)})}}),j=(0,V.cN)({key:"ios share link",displayName:z.shareLinkName,analyticsName:z.shareLinkName.defaultMessage,svg:g.s,validators:[E.U7,E.Fx,E.gn],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i}=e;const a=t[0],n=a.getNavigableBlockStore();if(n){const e=(0,R.ZP)({store:n,scrollToBlockId:n.id===a.id?void 0:a.id,fullyQualified:!0,pageVisitSource:c.tY.NativeShareLink});i.mobileNative&&i.mobileNative.share(e)}}}),Y=(0,V.cN)({key:"android share link",displayName:z.shareLinkName,analyticsName:z.shareLinkName.defaultMessage,svg:m.Q,validators:[E.U7,E.Fx,E.Dt],closeParentMenu:j.closeParentMenu,action:j.action}),$=(0,V.cs)({key:"copy link",displayName:V.RE.copyLinkName,analyticsName:V.RE.copyLinkName.defaultMessage,svg:h.N,shortcuts:["copyLinkToBlock"],validators:[E.jl,E.U7,E.ff(E.Fx),E.ff(E.DF)],closeParentMenu:!0,action:(e,t)=>{_.Hs({...e,event:t})}}),Q=(0,V.cN)({key:"edit page",displayName:z.editPageName,analyticsName:z.editPageName.defaultMessage,svg:y.R,validators:[E.U7,E.DF,E.Zk,E.ff(E.eM)],closeParentMenu:!0,action:e=>{let{environment:t,blocks:i}=e;const{RouterStore:a}=t,o=a.state.route,s=B.np();if("page"===o.name&&o.requestedOnPublicDomain&&s){const e=(0,R.ZP)({store:s,preferPublicLink:!1,pageVisitSource:c.tY.EditPublicPage});P.navigateOnBaseUrl({environment:t,url:e})}else t.currentUser.isLoggedIn()?k.showDialog({showCancel:!0,keepFocus:!1,message:n()(C.FormattedMessage,{defaultMessage:"When you start editing, your name, email and photo will be visible to the page owners.",id:"action.startPublicEditDialog.message"}),items:[{label:n()(C.FormattedMessage,{defaultMessage:"Continue",id:"action.startPublicEditDialog.continueLabel"}),color:"blue",onAccept(){N.Z.setState({editing:!0,commenting:!0})}}]}):(I.Hr({currentUserId:t.currentUser.id,blockId:i[0].id}),P.navigateOnBaseUrl({environment:t,url:M._j.login}))}}),J=(0,V.cN)({key:"comment page",displayName:z.commentPageName,analyticsName:z.commentPageName.defaultMessage,svg:b.o,validators:[E.U7,E.DF,E.RF,E.ff(E.jl)],closeParentMenu:!0,action:e=>{let{environment:t,blocks:i}=e;I.Hr({currentUserId:t.currentUser.id,blockId:i[0].id}),P.navigateOnBaseUrl({environment:t,url:M._j.login})}}),X=(0,V.cN)({key:"duplicate page",displayName:z.duplicatePageName,analyticsName:z.duplicatePageName.defaultMessage,svg:p.a,validators:[E.U7,E.tq,E.DF,E.S4],closeParentMenu:!0,action:e=>{let{blocks:t,originRect:i,environment:a}=e;T.S({environment:a,store:t[0],originRect:i})}}),ee=(0,V.cN)({key:"back to my content",displayName:z.backtoNotionName,analyticsName:z.backtoNotionName.defaultMessage,svg:v.h,validators:[E.jl,E.tq],closeParentMenu:!0,action:(e,t)=>{let{environment:i}=e;const{currentUserRootStore:a,currentUserSettingsStore:n}=L.default.state;a&&n&&x.L5({environment:i,userRootStore:a,userSettingsStore:n,pageVisitSource:c.tY.SwitchSpace})}}),te=(0,V.cN)({key:"cookie settings",displayName:u.ze.cookieSettingsLabel,analyticsName:u.ze.cookieSettingsLabel.defaultMessage,validators:[E.ff(E.tY)],closeParentMenu:!1,render:e=>n()(Z.Z,{hasDismissButton:!1,renderOrigin:t=>{const{onClick:i,...a}=e;return o.createElement(F.Z,d()({},a,t,{title:D.default.formatMessage(u.ze.cookieSettingsLabel),svg:S.H}))}}),action:()=>{}}),ie=(0,V.cN)({key:"What is Notion?",displayName:z.whatIsNotionName,analyticsName:z.whatIsNotionName.defaultMessage,svg:v.h,validators:[E.ff(E.jl),E.ff(E.tY)],closeParentMenu:!0,action:async e=>{let{environment:t}=e;await P.publicPageTopBarAction(t,{utmContent:"what_is_notion",nextRoute:M._j.product})}}),ae=[(0,V.$J)({key:"page",render:e=>o.createElement(A.Z,e),actions:[H,W.y,q,Q,J,X,$,O.K,j,Y,ee,U.l,te]})],ne=[(0,V.$J)({key:"page",render:e=>o.createElement(A.Z,e),actions:[ie,Q,J,X,$,O.K,j,Y]}),(0,V.$J)({key:"user",render:e=>o.createElement(A.Z,e),actions:[ee,G]}),(0,V.$J)({key:"report page actions",render:e=>o.createElement(A.Z,e),actions:[U.l,te]})];var oe=i(50906),se=i(12955),re=i(87279),le=i(35328),de=i(48019),ce=i(78140);const ue=function(e){let{block:t,onDismiss:i}=e;window.__c={n:"PublicTopbarMoreMenu"};const a=(0,s.O7)(),{currentUser:l,device:d}=a,c=Boolean(l.isLoggedIn()||(0,se.getPublicDomainUserId)(a)),u=(0,r.VK)((()=>N.Z.getMode(a,t)),[a,t]),m={environment:a,blocks:[t],publicEditMode:u};let p;p=d.isMobile?{menuType:re.og.ActionSheet}:{menuType:re.og.Popup,width:210,maxHeight:"80vh"};const g=(0,o.useCallback)((e=>{const{mainEditorCurrentBlockStore:t}=L.default.state;if(t){const i=t.getType();i&&oe.dhV(a,{analyticsName:e.analyticsName,from:"public_topbar_more_menu",block_id:t.id,block_type:i,is_toggleable:(0,le._A)(i,t.getFormat())})}e.closeParentMenu&&i()}),[a,i]),h=!c&&d.isMobile?ae:ne;return o.createElement(ce.Z,p,n()(de.Z,{sections:h,onAccept:g,context:m}))}},55880:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(83355),d=i(8848);const c=(0,i(45238).I)("thanksShield",{viewBox:"0 0 27 32",svg:s()("path",{d:"M13.5 31.672c.281 0 .672-.125 1.031-.328 8.75-5.063 11.64-6.969 11.64-12.344V7.125c0-1.672-.624-2.219-2.062-2.797-2.218-.89-7.14-2.719-9.375-3.484-.406-.14-.828-.235-1.234-.235-.422 0-.844.11-1.25.235-2.219.719-7.156 2.61-9.375 3.484C1.437 4.891.812 5.453.812 7.125V19c0 5.375 2.922 7.234 11.641 12.344.36.203.75.328 1.047.328zm0-2.14c-.266 0-.547-.126-.922-.36-7.25-4.5-9.844-5.797-9.844-10.547V7.485c0-.782.141-1.063.735-1.298 2.078-.828 7.187-2.656 9.281-3.468.281-.125.547-.188.75-.188.188 0 .438.078.75.188 2.078.812 7.156 2.703 9.266 3.469.593.218.734.515.734 1.296v11.141c0 4.75-2.625 6.016-9.844 10.547-.375.234-.656.36-.906.36zm-1.688-6.75c.391 0 .72-.188.954-.548l7.593-11.859c.141-.234.282-.5.282-.75 0-.531-.485-.906-.985-.906-.312 0-.61.203-.843.547L11.75 20.437 8.156 16c-.281-.375-.562-.484-.89-.484a.944.944 0 00-.938.953c0 .265.11.531.281.765l4.188 5c.297.391.61.547 1.015.547z",fill:"#636363"})});var u=i(5366);const m=(0,u.defineMessages)({phishing_or_spam:{id:"reportPage.reportReasons.phishing_or_spam",defaultMessage:"Phishing or spam"},inappropriate_content:{id:"reportPage.reportReasons.inappropriate_content",defaultMessage:"Inappropriate content"},other_content_policy_violation:{id:"reportPage.reportReasons.other_content_policy_violation",defaultMessage:"Other"}});var p=i(7250),g=i(82990),h=i(54642),f=i(47307),v=i(360),y=i(28020),S=i(33929),b=i(87279),M=i(18514),w=i(88632),C=i(25399),_=i(36488),k=i(74194),T=i(78140),I=i(28992),P=i(32163),x=i(17293),Z=i(63296),F=i(72495),A=i(92660),E=i(74523),B=i(6202);const R=(0,u.defineMessages)({additionalInformationPlaceholder:{id:"reportPage.additionalInformation.placeholder",defaultMessage:"Add additional information (optional)"},dialogLabel:{id:"reportPage.dialogLabel",defaultMessage:"Report page"}});class D extends l.Z{constructor(e){super(e),this.handleCancel=()=>{v.q()},this.renderContent=()=>{const{device:e}=this.environment;if(!w.Z.state.online)return this.renderOffline();const t=C.Z.state;return t.open?e.isMobile?this.renderMobileModal(t):this.renderDesktopModal(t):void 0},this.onSubmit=async()=>{const e=this.environment,t=C.Z.getState();if(!t.open)return;const{additionalInformation:i,reason:a}=t,n=(0,y.Fv)();if(!a||null==n||!n.id)return void f.showErrorMessage(s()(u.FormattedMessage,{defaultMessage:"Something went wrong.",id:"reportPageModal.somethingWentWrong.label"}));const o=await(l=(0,p.OP)(),h.reportPage(e,{reason:a,page:n,intercomVisitorId:l,additionalInformation:i}));var l;"failed"===o.type?f.showError(o):(C.Z.setState({open:!1}),f.showMessage({message:r.createElement(r.Fragment,null,s()("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},void 0,c({width:40}),s()("div",{style:{paddingTop:12,paddingBottom:8,fontSize:"large",textAlign:"center"}},void 0,s()(u.FormattedMessage,{id:"reportPageModal.thanksForReporting",defaultMessage:"Thanks for reporting this page, our team will take a look."}))))}))},this.modalTitleStyle={fontSize:16,marginBottom:12,fontWeight:g.Z.fontWeight.medium}}renderComponent(){return s()(A.Z,{ariaLabel:S.default.formatMessage(R.dialogLabel),onDismiss:this.handleCancel,render:this.renderContent,requireOnline:!0,modalStore:C.Z})}renderOptionButtons(e){const{reason:t}=e;return r.createElement(r.Fragment,null,s()(x.Z,{title:s()(u.FormattedMessage,{id:"reportPageModal.reportReasons.phishing_or_spam",defaultMessage:"Phishing or spam"}),isSelected:"phishing_or_spam"===t,onClick:()=>C.Z.setState({...e,reason:"phishing_or_spam"}),name:"report-page-modal"},"phishing_or_spam"),s()(x.Z,{title:S.default.formatMessage(m.inappropriate_content),isSelected:"inappropriate_content"===t,onClick:()=>C.Z.setState({...e,reason:"inappropriate_content"}),name:"report-page-modal"},"inappropriate_content"),s()(x.Z,{title:s()(u.FormattedMessage,{id:"reportPageModal.reportReasons.other_content_policy_violation",defaultMessage:"Other"}),isSelected:"other_content_policy_violation"===t,onClick:()=>C.Z.setState({...e,reason:"other_content_policy_violation"}),name:"report-page-modal"},"other_content_policy_violation"))}renderMobileModal(e){if(!e.open)return;const{reason:t}=e,i={menuType:b.og.Modal,title:s()(u.FormattedMessage,{id:"reportPageModal.mobile.title",defaultMessage:"Report page"}),right:s()(u.FormattedMessage,{id:"reportPageModal.closeButton.label",defaultMessage:"Close"}),onClickRight:this.handleCancel};return r.createElement(T.Z,i,s()(P.Z,{type:P.i.Vertical,initialFocus:void 0,sections:[{key:"help",render:e=>{let{children:t,...i}=e;return r.createElement(F.Z,i,t)},items:[{key:"help",render:()=>s()(I.Z,{title:s()(E.Z,{title:s()(u.FormattedMessage,{id:"reportPage.helpButton.caption",defaultMessage:"Notion's content policy"}),href:(0,M.UY)("contentPolicy"),analyticsFrom:"report_page"}),right:r.createElement(r.Fragment,null),onClick:()=>{}}),action:()=>{}}]},{key:"reportOptions",render:e=>{let{children:t,...i}=e;return r.createElement(F.Z,i,t)},items:[{key:"options",render:()=>this.renderOptionButtons(e),action:()=>{}},{key:"additionalInfo",render:()=>t&&s()(k.Z,{textarea:!0,style:this.getTextAreaStyle(),focus:Boolean(e.reason),value:e.additionalInformation,placeholder:S.default.formatMessage(R.additionalInformationPlaceholder),onChange:t=>{C.Z.setState({...e,additionalInformation:t.target.value})}}),action:()=>{}}]},{key:"actions",render:e=>{let{children:t,...i}=e;return r.createElement(F.Z,n()({isSubmitButton:!0},i),t)},items:[{key:"submit",render:e=>{const{onClick:t,...i}=e;return r.createElement(B.Z,n()({},i,{disabled:!this.canSubmit(),title:s()("div",{style:{color:d.ZP.red}},void 0,s()(u.FormattedMessage,{id:"reportPageModal.reportButton.label",defaultMessage:"Report"})),onClick:t||this.onSubmit}))},action:this.onSubmit}]}]},"main list"))}canSubmit(){const{state:e}=C.Z;if(e.open){const{reason:t}=e;return void 0!==t}return!1}renderDesktopModal(e){if(!e.open)return;const{reason:t}=e;return s()(_.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!1,render:()=>s()("div",{style:this.getModalWrapStyle()},void 0,s()("div",{style:this.modalTitleStyle},void 0,s()(u.FormattedMessage,{id:"reportPageModal.title",defaultMessage:"Why are you reporting this page?"})),s()("div",{style:{paddingBottom:12}},void 0,s()(E.Z,{title:s()(u.FormattedMessage,{id:"reportPage.helpButton.caption",defaultMessage:"Notion's content policy"}),href:(0,M.UY)("contentPolicy"),analyticsFrom:"report_page"})),s()("div",{},void 0,this.renderOptionButtons(e)),t&&s()(k.Z,{textarea:!0,style:this.getTextAreaStyle(),focus:Boolean(e.reason),value:e.additionalInformation,placeholder:S.default.formatMessage(R.additionalInformationPlaceholder),onChange:t=>{C.Z.setState({...e,additionalInformation:t.target.value})}}),s()("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:18}},void 0,s()(Z.Z,{isLarge:!0,onClick:this.handleCancel,style:{marginRight:12}},void 0,s()(u.FormattedMessage,{id:"reportPageModal.cancelButton.label",defaultMessage:"Cancel"})),s()(Z.Z,{isRed:!0,isLarge:!0,onClick:this.onSubmit,disabled:!this.canSubmit(),disabledFeedback:!0},void 0,s()(u.FormattedMessage,{id:"reportPageModal.reportButton.label",defaultMessage:"Report"}))))})}renderOffline(){return s()("div",{style:this.getOfflineStyle()},void 0,s()(u.FormattedMessage,{defaultMessage:"Please go online to make a report.",id:"reportPageModal.offlineMessage.description"}))}getModalWrapStyle(){return{width:360,padding:24,fontSize:14}}getOfflineStyle(){return{...this.getModalWrapStyle(),color:this.theme.mediumTextColor}}getTextAreaStyle(){const{device:e}=this.environment;return{width:"100%",background:this.theme.popoverBackground,display:"block",padding:e.isMobile?16:"10px 12px",height:e.isMobile?150:130,marginTop:17,marginBottom:17,fontSize:e.isMobile?16:14}}}D.displayName="ReportPageModal";const L=D},18878:(e,t,i)=>{i.d(t,{mX:()=>y,mo:()=>f,nH:()=>v});var a=i(23174),n=i.n(a),o=i(67294),s=i(86628),r=i(24405),l=i(27006),d=i(97880),c=i(82990),u=i(5366),m=i(34859),p=i(80444),g=i(53336),h=i(63381);function f(e){window.__c={n:"RestorePermissionEdits"};const{openState:t}=e,{mainEditorCurrentBlockStore:i,currentSpaceStore:a}=(0,s.VK)((()=>p.default.state),[]),o=(0,r.yK)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290},editContainer:{marginTop:2,marginBottom:2,color:e.regularTextColor}})),[]);if(!i||!a)return null;const l=Date.now();return n()(g.Z,{type:m.Z.Y,style:o.scroller},void 0,t.permissionChanges.map(((e,t)=>{let[s,r]=e;const d={timestamp:l,space_id:a.id,type:"permission-changed",permission_data:{before:s,after:r}};return n()("div",{style:o.editContainer},`${s.type}-${t}`,n()(h.Z,{rootStore:i,edit:d}))})))}function v(e){return["remove","restrict"].includes(e.type)?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):"restoreTeamPermissions"===e.type?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function y(e){switch(e.type){case"remove":return n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:S(e)}});case"restrict":return n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return e.permissionChanges.length>0?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return o.createElement(o.Fragment,null,n()("div",{style:{fontWeight:c.Z.fontWeight.semibold,marginBottom:4}},void 0,n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})),n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."}));default:throw d.t1(e)}}function S(e){return(0,l.jg)(e.permissionItem)?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,l.hV)(e.permissionItem)?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,l.ix)(e.permissionItem)?n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):n()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},21121:(e,t,i)=>{i.d(t,{Z:()=>q});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=(i(57658),i(43261)),l=i.n(r),d=i(67294),c=i(83355),u=i(99036),m=i(80951),p=i(84619),g=i(72126),h=i(4615),f=i(71644),v=i(6287),y=i(5366),S=i(50906),b=i(66890),M=i(75079),w=i(78316),C=i(87279),_=i(77080),k=i(29798),T=i(49085);class I extends T.default{getInitialState(){return{inputValue:"",openPropertyActionMenu:void 0}}}const P=I;var x=i(52275),Z=i(79131),F=i(78140),A=i(32163),E=i(43765),B=i(40721),R=i(72495),D=i(12534),L=i(4023),N=i(33846),O=i(24736),V=i(3386),U=i(73456),W=i(22084);class z extends c.Z{constructor(){super(...arguments),this.storeTypes={renameInputStore:N.Z},this.renderActionMenuButton=()=>{const{property:e,collectionId:t,analyticsFrom:i,onChange:a,onCloseActionMenu:n,actionMenuOpen:o,focused:r,option:l,propertySchema:d}=this.props,{device:c}=this.environment;return s()(U.Z,{open:o,origin:s()(O.Z,{onClick:this.handleActionButtonClick,isMobile:c.isMobile,style:{opacity:r||c.isMobile?1:0}}),option:l,propertySchema:d,property:e,collectionId:t,analyticsFrom:i,onChange:a,onClose:n})},this.handleActionButtonClick=e=>{(0,D.ZP)({event:e,context:D.Af.MenuListClick,callback:()=>this.props.onOpenActionMenu(this.props.option.value)})}}willMountOrUpdate(e){e.actionMenuOpen&&!this.props.actionMenuOpen&&this.stores.renameInputStore.setState({...this.stores.renameInputStore.state,inputValue:this.props.option.value})}renderComponent(){const{locked:e,option:t}=this.props;return s()(V.Z,{capture:this.props.actionMenuOpen,onEnter:g.yR},void 0,d.createElement(x.Z,n()({},this.props,{title:s()(W.a,{format:this.environment.device.isMobile?p.l.Large:p.l.Medium,value:t.value,color:t.color,descriptionTooltip:t.description,tooltipPlacement:L.u.Left,showRemoveButton:!1,isSingle:!0,showEllipsis:!0}),desktopTitleStyle:{marginRight:6},isTokenTitle:!0,right:!e&&this.renderActionMenuButton()})))}}z.displayName="SelectPropertyMenuItem",z.contextTypes={...C.mw,...c.w};const K=z;var H=i(47082);class G extends c.Z{constructor(){super(...arguments),this.storeTypes={store:P,menuListStore:k.Z},this.handleSelectPropertyMenuItemChange=e=>{const{property:t,schema:i}=this.props,a=i[t];if(!a)return;if(!u.cu(a))return;const n=a.options||[],o=[...n],s={},r=this.props.value.filter((e=>{const t=n.find((t=>t.value===e));return!t||o.some((e=>e.id===t.id))}));s.operations=e,g.Xy(r,this.props.value)||(s.value=r),this.props.onChange(s)},this.handleCloseActionMenu=()=>{this.stores.store.setState({...this.stores.store.state,openPropertyActionMenu:void 0})},this.handleOpenActionMenu=e=>{this.stores.store.setState({...this.stores.store.state,openPropertyActionMenu:e})},this.handleTokenInputChange=e=>{this.stores.store.setState({...this.stores.store.state,inputValue:""});const{collectionId:t,allowMultiple:i,property:a,schema:n,onChange:o,analyticsFrom:s}=this.props,r=n[a];if(!r)return;if(!u.cu(r))return;const l=r.options||[];let d;d=i?e:e.length>0?[e[e.length-1]]:[];const c=g.jj(g.oA(d.map((e=>{const t=l.find((t=>t.value===e));if(t)return t.value})))),m=d.find((e=>!l.find((t=>t.value===e)))),p={value:c.concat(g.oA([m]))};if(m){const e={id:(0,h.ZP)(),value:m,color:this.createSelectColor};let i;i="alphabetical"!==r.auto_sort_options&&"reverse_alphabetical"!==r.auto_sort_options||!_.default.checkGate("collection_properties_select_auto_sort_options")?[{pointer:{table:v.v,id:t},command:"keyedObjectListAfter",path:["schema",a,"options"],args:{value:e}}]:[(0,w.Ch)({collectionId:t,property:a,propertySchema:r,newOption:e,isAscending:"alphabetical"===r.auto_sort_options})],p.operations=i,this.setRandomCreateSelectColor(),S.$qu(this.environment,{...(0,M.Pn)(this.context.collectionContextStore),property_type:r.type,action:"select_add_option",from:s})}o(p)},this.handleDraggableListDrop=e=>{const{collectionId:t,property:i,schema:a,onChange:n}=this.props,o=(0,w.YL)({newOptions:e,collectionId:t,property:i,schema:a});if(o){const e=a[i];if(e&&u.cu(e)){"manual"!==(e.auto_sort_options||"manual")&&o.push({pointer:{table:v.v,id:t},command:"update",path:["schema",i],args:{auto_sort_options:"manual"}})}n({operations:o})}this.stores.menuListStore.reset()}}willMount(e){if(this.setRandomCreateSelectColor(),e.insertChar){const t=e.insertChar;this.stores.store.setState({...this.stores.store.state,inputValue:t})}}renderNoOptionsFound(){return s()(y.FormattedMessage,{id:"database.selectPropertyEditMenu.noResults",defaultMessage:"No options found"})}renderSelectOnlyPrompt(){return s()(y.FormattedMessage,{id:"database.selectPropertyEditMenu.selectOnlyPrompt",defaultMessage:"Select an option"})}renderSelectOrCreatePrompt(){return s()(y.FormattedMessage,{id:"database.selectPropertyEditMenu.selectOrCreatePrompt",defaultMessage:"Select an option or create one"})}renderComponent(){const{device:e}=this.environment,{disabled:t,canConfigureCollection:i}=this.props,a=this.props.schema[this.props.property];if(!a)return;if(!u.cu(a))return;const n=a.options||[],o=this.renderCurrentTokens(n),r=this.getTokenResults(this.stores.store.state.inputValue,n),l=0===r.length,c=s()(H.Z,{focus:e.isMobile?void 0:!this.stores.store.state.openPropertyActionMenu,focusAfterAnimation:!0,format:H.Z.Format.Select,tokens:o,placeholder:this.props.intl.formatMessage({id:"database.selectPropertyEditMenu.searchPlaceholder",defaultMessage:"Search for an option..."}),onRemoveLastToken:()=>{this.handleTokenInputChange(this.props.value.slice(0,this.props.value.length-1))},value:this.stores.store.state.inputValue,disabled:t,hideInput:t,onChange:e=>this.stores.store.setState({...this.stores.store.state,inputValue:e.target.value}),dontShowBorderBottom:e.isAndroid});let m;return m=e.isMobile?{menuType:C.og.Modal,title:a.name,right:s()(B.DoneMenuText,{}),onClickRight:this.props.onDismiss,header:c}:{menuType:C.og.Popup,header:c,tokenInputHeader:!0},t?d.createElement(F.Z,m):d.createElement(F.Z,m,l?s()(R.Z,{title:i?this.renderSelectOrCreatePrompt():this.renderNoOptionsFound()},void 0,e.isMobileNative&&s()(E.Z,{title:this.renderNoOptionsFound()})):s()(A.Z,{type:A.i.Vertical,initialFocus:this.stores.store.state.inputValue.length>0?0:void 0,sections:[{key:0,render:e=>this.renderMenuListSection(e,r),items:this.getSelectMenuListItems(r,n)}],onAccept:(e,t,i)=>{this.props.onAccept(i)},store:this.stores.menuListStore}))}renderMenuListSection(e,t){const{canConfigureCollection:i}=this.props;return i?d.createElement(R.Z,n()({},e,{title:this.renderSelectOrCreatePrompt(),children:s()(Z.ZP,{direction:"vertical",keys:t,renderKey:i=>e.children[t.indexOf(i)],onDrop:this.handleDraggableListDrop})})):d.createElement(R.Z,n()({},e,{title:this.renderSelectOnlyPrompt(),children:e.children}))}renderFoundSelectPropertyMenuItem(e,t){const{schema:i,property:a}=this.props,o=i[a];if(o&&u.cu(o))return d.createElement(K,n()({},e,{option:t,showDragHandle:this.props.canConfigureCollection,locked:!this.props.canConfigureCollection,property:this.props.property,analyticsFrom:this.props.analyticsFrom,collectionId:this.props.collectionId,onChange:this.handleSelectPropertyMenuItemChange,actionMenuOpen:this.stores.store.state.openPropertyActionMenu===t.value,propertySchema:o,onCloseActionMenu:this.handleCloseActionMenu,onOpenActionMenu:this.handleOpenActionMenu}))}renderCreateSelectPropertyMenuItem(e,t,i){const{device:a}=this.environment;return d.createElement(x.Z,n()({},e,{title:s()("div",{style:{display:"flex",minWidth:0}},void 0,s()("div",{style:{marginRight:6,lineHeight:1.3}},void 0,s()(y.FormattedMessage,{id:"database.selectPropertyEditMenu.createLabel",defaultMessage:"Create"})),s()(W.a,{value:t.value,color:t.color,showRemoveButton:!1,isSingle:!0,format:a.isMobile?p.l.Large:p.l.Medium,showEllipsis:!0})),isTokenTitle:!0}))}getSelectMenuListItems(e,t){return e.map((e=>{const i=t.find((t=>t.value===e));return{key:e,render:t=>{if(i)return this.renderFoundSelectPropertyMenuItem(t,i);{const i={id:(0,f.ZP)(),value:e,color:this.createSelectColor};return this.renderCreateSelectPropertyMenuItem(t,i,e)}},action:()=>{this.handleTokenInputChange([...this.props.value,e])}}}))}renderCurrentTokens(e){const{disabled:t}=this.props,{device:i}=this.environment;return g.oA(this.props.value.map((a=>{const n=(0,m.i7)(e,a);if(n)return s()(W.a,{value:n.value,color:n.color,showRemoveButton:!t,isSingle:!1,format:i.isMobile?p.l.Large:p.l.Medium,shouldShrink:!0,onClickRemove:()=>{this.handleTokenInputChange(this.props.value.filter((e=>e!==a)))},showEllipsis:!0},n.id)})))}getTokenResults(e,t){const i=t.map((e=>e.value));let a;if(e){a=l().filter(e,i).map((e=>e.original));!t.find((t=>t.value===e))&&e.trim().length>0&&this.props.canConfigureCollection&&a.push(e.trim().replace(/,/g,""))}else a=i;return a}setRandomCreateSelectColor(){const{schema:e,property:t}=this.props,i=e[t];if(!i)return;if(!u.cu(i))return;const a=i.options||[],n=(0,u.TL)(a);this.createSelectColor=n}}G.displayName="SelectPropertyMenu",G.contextTypes={...c.w,...b.xm};const q=(0,y.injectIntl)(G)},77376:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(86628),c=i(5366),u=i(49386),m=i(50906),p=i(75079),g=i(78316),h=i(87279),f=i(18514),v=i(35328),y=i(27724),S=i(13713),b=i(80209),M=i(48019),w=i(68894),C=i(78140),_=i(72495),k=i(83182);const T=(0,c.defineMessages)({filterActions:{defaultMessage:"Search actions…",id:"selectableHoverMenu.filterActions.placeholder"}});function I(e){window.__c={n:"SelectableHoverMenuPopup"};const{hasEditorPermissions:t,isWorkspaceAdmin:i,store:a,onDismiss:n,containerRef:o,query:c,setQuery:f}=e,w=(0,l.O7)(),_=(0,l.MO)(),k=(0,d.VK)((()=>{var e;return{environment:w,blocks:y.default.state.stores.length?y.default.state.stores:[a],originRect:null===(e=o.current)||void 0===e?void 0:e.getBoundingClientRect(),publicEditMode:void 0}}),[w,a,o]),T=(0,d.VK)((()=>a.isNavigableAncestorLocked()),[a]),[I,Z]=(0,r.useState)(void 0),F=(0,r.useCallback)((e=>{const t=y.default.state.stores[0],i=t.getType();if(i){const a=(0,g.fm)(t),n=(0,p.Pn)(a)||{};m.dhV(w,{analyticsName:e.analyticsName,from:"selection_menu",block_id:t.id,block_type:i,is_toggleable:(0,v._A)(i,t.getFormat()),...n})}e.closeParentMenu&&n()}),[w,n]),A=(0,d.VK)((()=>a.isCollectionView()),[a]),E=!_&&t&&!T&&s()(P,{filter:c,setQuery:f,comboboxAriaProps:I});let B;return B=_?{menuType:h.og.ActionSheet,header:E}:{menuType:h.og.Popup,width:265,header:E},r.createElement(C.Z,B,s()(M.Z,{filter:c,initialFocus:c?0:void 0,sections:u.Qi,context:k,onAccept:F,setComboboxAriaProps:Z}),!c&&(t||i)&&s()(S.Z,{store:a,isPageMoreButton:!1,hideTopBorder:!1}),!c&&s()(b.Z,{store:a}),!c&&A&&s()(x,{}))}function P(e){window.__c={n:"SelectableHoverMenuHeader"};const{filter:t,setQuery:i,comboboxAriaProps:a}=e,o=(0,l.Fy)(),d=(0,c.useIntl)();return s()(_.Z,{isInput:!0},void 0,r.createElement(w.ZP,n()({value:t,onChange:e=>i(e.target.value),focus:!o.isMobile||void 0,focusAfterAnimation:!0,placeholder:d.formatMessage(T.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0},a)))}function x(){return s()(_.Z,{topBorder:!0},void 0,s()(k.Z,{title:s()(c.FormattedMessage,{defaultMessage:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,f.UY)("guides.database"),analyticsFrom:"selectable_hover_menu"}))}},30761:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var a=i(23174),n=i.n(a),o=(i(67294),i(480)),s=i(24405),r=i(50506),l=i(38493);function d(e){window.__c={n:"SidebarConnectionsModal"};const t=(0,o.Fy)(),i=(0,s.yK)((e=>({modal:{width:t.isMobile?"auto":890,height:t.isMobile?"auto":606,borderRadius:8}})),[t.isMobile]);return n()(r.Z,{open:e.modalOpened,innerStyle:i.modal,onDismiss:e.onModalClose,render:()=>n()("div",{style:{height:"100%",display:"flex",flexDirection:"row",borderRadius:8,overflow:"hidden"}},void 0,n()(l.Z,{location:"sidebar-modal"}))})}},82905:(e,t,i)=>{i.r(t),i.d(t,{MembersTabTitle:()=>pi,PeopleRow:()=>ui,SettingToggle:()=>gi,SidebarTeamModal:()=>mi});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(24405),d=i(72126),c=i(97880),u=i(82990),m=i(5366),p=i(50906),g=i(1865),h=i(43250),f=i(95697),v=i(46874),y=i(43914),S=i(80444),b=i(57559),M=i(48690),w=i(3386),C=i(50506),_=i(76798),k=i(53336),T=i(24006),I=i(26388),P=i(64369),x=i(29302),Z=i(13490),F=i(66957),A=i(69814),E=i(58260),B=i(10434),R=i.n(B),D=(i(57658),i(8848));const L=(0,i(45238).I)("leaveArrow",{viewBox:"0 0 16 12",svg:n()("path",{d:"M8.65 11.116a.615.615 0 00.444-.184l4.546-4.54a.66.66 0 00.205-.39v4.526c0 .349.253.588.608.588.356 0 .615-.239.615-.588V1.361a.59.59 0 00-.615-.608.585.585 0 00-.608.608v4.512a.698.698 0 00-.205-.396L9.094.944a.623.623 0 00-.445-.191.58.58 0 00-.594.588c0 .164.054.328.164.437L9.75 3.33l2.242 2.05-1.456-.054h-9.01c-.355 0-.601.253-.601.609 0 .355.246.615.601.615h9.01L12 6.495 9.75 8.54l-1.531 1.559a.616.616 0 00-.164.43c0 .342.26.588.594.588z"})});var N=i(64964),O=i(39699),V=i(33929),U=i(78122),W=i(63409);function z(e){return!(0,v.q)(e)}var K=i(35901),H=i(71064),G=i(4023),q=i(35817),j=i(42922),Y=i(36488),$=i(74194),Q=i(22235),J=i(51923),X=i(93686),ee=i(37708),te=i(38755),ie=i(65426);const ae=(0,m.defineMessages)({editor:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsFull",defaultMessage:"Teamspace members have full access"},read_and_write:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsEdit",defaultMessage:"Teamspace members can edit"},comment_only:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsComment",defaultMessage:"Teamspace members can comment"},reader:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsView",defaultMessage:"Teamspace members can view"}}),ne=(0,m.defineMessages)({editor:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsFull",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} has full access"},read_and_write:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsEdit",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can edit"},comment_only:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsComment",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can comment"},reader:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsView",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can view"},none:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsNone",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} does not have access"}});function oe(e){let{teamStore:t}=e;window.__c={n:"TeamSettingsPermissionCard"};const i=(0,l.yK)((()=>({listItem:{padding:0,margin:0},spacer:{height:20,width:"100%"},accessLevelButton:{border:"none"}})),[]),[a,s]=(0,r.AF)(M.Z),d=M.a.Members,c=(0,r.VK)((()=>t.getTeamAccessLevel()),[t]);return o.createElement(o.Fragment,null,n()("div",{style:i.spacer}),n()(ee.Ph,{title:n()(m.FormattedMessage,{id:"TeamSettingsGeneral.generalSettings.permissions",defaultMessage:"Permissions"}),rows:[n()(ie._,{currentAccessLevel:c,teamStore:t,disabledWithRightChevron:!0,style:i.accessLevelButton},"visibility"),n()(se,{teamStore:t},"permissions")],onClick:()=>{a.open&&s({...a,tab:d})},itemStyle:i.listItem}))}function se(e){let{teamStore:t}=e;window.__c={n:"PermissionsRow"};const i=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),a=(0,s.O7)(),d=(0,l.yK)((e=>({label:{color:e.regularTextColor,whiteSpace:"normal"},row:{display:"inline-flex",alignItems:"center",marginTop:12,marginBottom:12,paddingRight:15,paddingLeft:15},icon:{marginRight:15}})),[]),c=(0,r.VK)((()=>t.getTeamPermission()||{type:"team_permission",role:"none"}),[t]),u=(0,r.VK)((()=>t.getSpacePermission()||{type:"space_permission",role:"none"}),[t]),{spaceIcon:m,spaceName:p}=(0,r.VK)((()=>{if(!i)return{spaceIcon:void 0,spaceName:void 0};const e=(0,te.rn)(a,i);return{spaceIcon:n()(X.p,{disabled:!0,store:i,size:20,style:d.icon}),spaceName:e}}),[i,a,d.icon]),g=(0,r.VK)((()=>n()(X.p,{disabled:!0,store:t,size:20,style:d.icon})),[t,d.icon]),h=!(c.role===u.role),f=h?g:m,v=V.default.formatMessage(ne[u.role],{showTeam:h,spaceName:p}),y=V.default.formatMessage(ae[c.role]);return n()("div",{style:d.row},void 0,f,n()(P.Z,{isSmall:!0,style:d.label},void 0,h&&o.createElement(o.Fragment,null,y,n()("span",{style:{marginLeft:5,marginRight:5}},void 0,"•")),v))}var re=i(52867),le=i(45660),de=i(89728),ce=i(91718),ue=i(42853),me=i(27006),pe=(i(59730),i(26825));const ge=["none","reader","comment_only","read_and_write","editor"],he=["reader","comment_only","read_and_write"],fe=["reader","comment_only","read_and_write","editor"],ve=["editor"];function ye(e){const t=function(e){var t,i;let{teamId:a,permissions:n}=e;const o=(null===(t=n.find((e=>(0,me.ix)(e))))||void 0===t?void 0:t.role)??"none",s=(null===(i=n.find((e=>(0,me.zU)(e)&&e.team_id===a)))||void 0===i?void 0:i.role)??o,r=n.find((e=>(0,me.bm)(e)));return{spacePermission:{type:"space_permission",role:o},teamMemberPermission:{type:"explicit_team_permission",team_id:a,role:s},teamOwnerPermission:{type:"explicit_team_owner_permission",team_id:a,role:"editor"},...r&&{teamGuestPermission:{type:"explicit_team_guest_permission",team_id:a,role:r.role}}}}({teamId:e.id,permissions:e.permissions??[]}),{spacePermission:i,teamMemberPermission:a}=t,n={visibility:["team_members","space_members"],space_member_join_access:["invite_only","self_join"],invite_access:["team_members","team_owners"]},o={spacePermission:be({roles:ge,currentRole:a.role}),teamGuestPermission:he,teamMemberPermission:Se({roles:fe,currentRole:i.role}),teamOwnerPermission:ve},{visibility:s,space_member_join_access:r}=e.settings;return"team_members"===s&&(n.space_member_join_access=["invite_only"],o.spacePermission=["none"]),"self_join"===r&&(n.visibility=["space_members"],n.invite_access=["team_members"],o.spacePermission=o.spacePermission.filter((e=>"none"!==e))),e.is_default&&(o.teamMemberPermission=[a.role],o.spacePermission=[a.role]),{settingsOptions:n,permissionItemRoleOptions:o,currentTeamPermissionItems:t}}function Se(e){let{roles:t,currentRole:i}=e;return t.filter((e=>(0,pe.IF)(e,i)))}function be(e){let{roles:t,currentRole:i}=e;return t.filter((e=>(0,pe.SL)(e,i)))}var Me=i(4708),we=i(87279),Ce=i(98742),_e=i(52275),ke=i(31945),Te=i(78140),Ie=i(32163),Pe=i(72495);function xe(e){let{teamStore:t}=e;window.__c={n:"TeamSecuritySection"};const{teamSettings:i,isInviteToggleVisible:a}=(0,r.VK)((()=>({teamSettings:t.getSettingsStore().getValue(),isInviteToggleVisible:(0,Me.s$)()})),[t]),o=(0,r.VK)((()=>{const e=t.getSettingsStore().getValue();if(e)return ye({id:t.id,permissions:t.getPermissionItems(),settings:e,is_default:t.isDefault()})}),[t]);if(!i||!o)return null;const s=[n()(Fe,{teamStore:t,hasMultiInviteAccessOptions:1===o.settingsOptions.invite_access.length,inviteAccess:i.invite_access},"invite"),n()(Ze,{teamStore:t,disablePageEdits:i.disable_team_page_edits},"editSidebar")];return a&&s.push(n()(Ae,{teamStore:t},"toggleInviteLink")),n()(ee.Ph,{title:n()(m.FormattedMessage,{id:"TeamSettingsSecurity.teamspaceSettingsTitle",defaultMessage:"Teamspace Security"}),rows:s,hideDividers:!0})}function Ze(e){window.__c={n:"EditSidebarPermissionRow"};const{teamStore:t,disablePageEdits:i}=e,a=(0,s.O7)(),l=z(t),d=(0,r.VK)((()=>{var e;return(null===(e=t.getTeamPermission())||void 0===e?void 0:e.role)??"none"}),[t]),c=(0,o.useCallback)((e=>{O.createAndCommit({userAction:"teamsHelpers.changeTeamSetting",environment:a,perform:i=>{q.$x({environment:a,store:t,update:{disable_team_page_edits:e},transaction:i})}})}),[a,t]),u=(0,me.J5)(d),p=[{option:!0,label:n()(m.FormattedMessage,{id:"TeamSettingsPermissions.whoCanEditTeamPages.teamOwners.title",defaultMessage:"Only teamspace owners"}),action:()=>c(!0)}];return u&&p.push({option:!1,label:n()(m.FormattedMessage,{id:"TeamSettingsPermissions.whoCanEditTeamPages.teamMembersAndOwners.title",defaultMessage:"Any teamspace member"}),action:()=>c(!1)}),n()(Ee,{title:n()(m.FormattedMessage,{id:"TeamSettingsPermissions.whoCanEditTeamPages.title",defaultMessage:"Who can edit teamspace sidebar"}),caption:n()(m.FormattedMessage,{id:"TeamSettingsPermissions.whoCanEditTeamPages.caption",defaultMessage:"Adding, removing, or re-ordering sidebar pages"}),disabled:l||!u,currentOption:!u||Boolean(i),allOptions:p,optionTooltip:u?void 0:n()(m.FormattedMessage,{id:"TeamSettingsPermissions.settingSelect.whoCanEditTeamPages.teamMemberPermissionTooltip",defaultMessage:"Change member permissions to Can edit or Full access to allow teamspace members to edit the sidebar"})})}function Fe(e){window.__c={n:"InvitePermissionRow"};const{teamStore:t,hasMultiInviteAccessOptions:i,inviteAccess:a}=e,r=(0,v.q)(t),l=(0,s.O7)(),d=(0,o.useCallback)((e=>{O.createAndCommit({userAction:"team.setInviteAccess",environment:l,perform:i=>{q.$x({environment:l,store:t,update:{invite_access:e},transaction:i})}})}),[l,t]),c=!r||i;return n()(Ee,{title:n()(m.FormattedMessage,{id:"TeamSettingsPermissions.whoCanInviteTeamMembers.title",defaultMessage:"Who can invite teamspace members"}),disabled:c,optionTooltip:c&&r&&n()(m.FormattedMessage,{id:"TeamSettingsPermissions.whoCanInviteTeamMembersDisabled.caption",defaultMessage:"Change access level to Closed or Private to restrict who can invite teamspace members"}),currentOption:a,allOptions:[{option:"team_members",label:n()(m.FormattedMessage,{id:"TeamSettingsPermissions.whoCanInviteTeamspaceMembers.teamMembersAndOwners.title",defaultMessage:"Any teamspace member"}),action:()=>d("team_members")},{option:"team_owners",label:n()(m.FormattedMessage,{id:"TeamSettingsPermissions.whoCanInviteTeamMembers.teamOwners.title",defaultMessage:"Only teamspace owners"}),action:()=>d("team_owners")}]})}function Ae(e){window.__c={n:"ToggleInviteLinkRow"};const{teamStore:t}=e,i=(0,s.O7)(),a=(0,r.VK)((()=>f.U2(t)),[t]),o=z(t),d=(0,l.yK)((()=>({container:{display:"flex",justifyContent:"space-between"},subtitle:{marginBottom:5},switcher:{marginTop:5}})),[]);return n()("div",{style:d.container},void 0,n()("div",{},void 0,n()(P.Z,{},void 0,n()(m.FormattedMessage,{id:"TeamsecuritySection.inviteLink.label",defaultMessage:"Invite Link"})),n()(P.Z,{isSmall:!0,style:d.subtitle},void 0,n()(m.FormattedMessage,{id:"TeamsecuritySection.inviteLink.description",defaultMessage:"Only users who can invite members can see the invite link"}))),n()("div",{style:d.switcher},void 0,n()(T.Z,{disabled:o,on:!a,onClick:()=>{O.createAndCommit({userAction:"team.setInviteAccess",environment:i,perform:e=>{q.$x({environment:i,store:t,update:{disable_invite_link:!a},transaction:e})}})}})))}function Ee(e){window.__c={n:"SettingSelect"};const{title:t,caption:i,currentOption:a,allOptions:r,disabled:d,optionTooltip:c}=e,u=(0,s.Fy)(),m=(0,l.yK)((e=>({root:{display:"flex",alignItems:"center",width:"100%"},title:{fontSize:14,marginRight:8,flexGrow:1},divider:{marginTop:14,marginBottom:14},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},buttonStyle:{fontSize:12.5,color:e.mediumTextColor},tooltipWidth:{width:300}})),[]),p=r.find((e=>e.option===a));return p?n()("div",{style:m.root},void 0,n()("div",{style:m.title},void 0,t,i&&n()(P.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:1,width:"95%",marginBottom:5}},void 0,i)),n()(I.Z,{style:m.tooltipWidth,placement:G.u.Top,alignment:I.Z.Alignment.Start,textWrap:!0,disableTooltip:!c,renderTooltip:()=>c,render:e=>o.createElement(ke.ZP,R()({},e,{disablePopup:d,popupType:u.isMobile?ke.Z4.SlideUp:ke.Z4.Popup,alignmentToOrigin:ke.vR.End,renderOrigin:t=>o.createElement(de.Z,R()({style:m.buttonStyle,disabled:d},(0,Ce.Z)(e,t)),p.label,!d&&(0,ue.i)(m.chevron)),render:e=>{let t;t=u.isMobile?{menuType:we.og.ActionSheet}:{menuType:we.og.Popup,minWidth:150};const i=[{key:"options",render:e=>o.createElement(Pe.Z,e),items:r.map((t=>({key:t.option.toString(),render:e=>o.createElement(_e.Z,R()({},e,{title:t.label,caption:t.caption,checkState:a===t.option})),action:()=>{t.action(),e.close()}})))}];return o.createElement(Te.Z,t,n()(Ie.Z,{type:Ie.i.Vertical,initialFocus:void 0,sections:i}))}}))})):null}function Be(e){let{teamStore:t}=e;window.__c={n:"TeamSettingsSecurity"};const{currentSpaceStore:i}=(0,r.Kw)(S.default),a=(0,s.O7)(),l=(0,le.D)(),d="business",c=a.currentUser.id,u=(0,r.VK)((()=>({disable_public_access:{spaceIsDisabled:(null==i?void 0:i.getDisablePublicAccess())??!1,teamIsDisabled:t.getDisablePublicAccess()},disable_export:{spaceIsDisabled:(null==i?void 0:i.getDisableExport())??!1,teamIsDisabled:t.getDisableExport()},disable_guests:{spaceIsDisabled:(null==i?void 0:i.getDisableGuests())??!1,teamIsDisabled:t.getDisableGuests()},disable_team_page_edits:{spaceIsDisabled:void 0,teamIsDisabled:t.getDisableTeamPageEdits()}})),[i,t]),p=(0,v.q)(t),g=(0,r.VK)((()=>(null==i?void 0:i.canAdmin())??!1),[i]);if(!i)return null;if(!c)return null;const h=e=>l&&!u[e].teamIsDisabled,f=e=>{if(h(e))return!1;if(!p)return!1;return!(e=>u[e].spaceIsDisabled&&u[e].teamIsDisabled)(e)||g},y=e=>h(e)&&g,b=e=>{const{teamIsDisabled:i,spaceIsDisabled:n}=u[e],o=!i;q.d({environment:a,store:t,settingName:e,newTeamSettingValue:Ne(o),spaceSettingValue:void 0===n?void 0:Ne(n)})},M=e=>{if((e=>u[e].spaceIsDisabled)(e))return(e=>u[e].teamIsDisabled)(e)?n()(m.FormattedMessage,{id:"teamSettingsSecurity.basedOnWorkspaceSettings",defaultMessage:"Based on <underline>workspace settings</underline>",values:{underline:e=>n()("span",{style:{textDecoration:"underline"}},void 0,e)}}):n()(m.FormattedMessage,{id:"teamSettingsSecurity.overridesWorkspaceSettings",defaultMessage:"Overriding <underline>workspace setting</underline>",values:{underline:e=>n()("span",{style:{textDecoration:"underline"}},void 0,e)}})},w=n()(ce.Z,{subscriptionTier:d,analyticsName:"team_security_settings",desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}}),C=n()(m.FormattedMessage,{id:"teamSettingsSecurity.setting.businessGateToggleTooltip",defaultMessage:"Upgrade to Business Plan to change security settings"}),_=[n()(gi,{on:u.disable_public_access.teamIsDisabled,disabled:!f("disable_public_access"),onChange:()=>b("disable_public_access"),shouldTriggerUpsell:y("disable_public_access"),secondCaption:M("disable_public_access"),title:o.createElement(o.Fragment,null,n()(m.FormattedMessage,{id:"teamSettingsSecurity.setting.shareTitle",defaultMessage:"Disable public page sharing"}),h("disable_public_access")&&w),tooltip:h("disable_public_access")&&C}),n()(gi,{on:u.disable_guests.teamIsDisabled,disabled:!f("disable_guests"),onChange:()=>b("disable_guests"),shouldTriggerUpsell:y("disable_guests"),secondCaption:M("disable_guests"),title:o.createElement(o.Fragment,null,n()(m.FormattedMessage,{id:"teamSettingsSecurity.setting.guestTitle",defaultMessage:"Disable guests"}),h("disable_guests")&&w),tooltip:h("disable_guests")&&C}),n()(gi,{on:u.disable_export.teamIsDisabled,disabled:!f("disable_export"),onChange:()=>b("disable_export"),shouldTriggerUpsell:y("disable_export"),secondCaption:M("disable_export"),title:o.createElement(o.Fragment,null,n()(m.FormattedMessage,{id:"teamSettingsSecurity.setting.exportTitle",defaultMessage:"Disable export"}),h("disable_export")&&w),tooltip:h("disable_export")&&C})];return n()(Re,{teamStore:t,toggles:_})}function Re(e){let{teamStore:t,toggles:i}=e;window.__c={n:"TeamsSettingsSecurity"};const a=(0,l.yK)((e=>({learnMoreLinkContainer:{marginTop:15,marginBottom:15},spacer:{height:20,width:"100%"}})),[]),s=n()(m.FormattedMessage,{id:"TeamSettingsSecurity.pageSettingsTitle",defaultMessage:"Page Security"});return o.createElement(o.Fragment,null,n()(xe,{teamStore:t}),n()("div",{style:a.spacer}),n()(ee.Ph,{title:s,rows:i,hideDividers:!0}),n()(J.Z,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_team_settings_security",containerStyle:a.learnMoreLinkContainer,message:n()(m.FormattedMessage,{id:"teamSettingsSecurity.learnMore",defaultMessage:"Learn about teamspace security"})}))}function De(e){window.__c={n:"RestoreTeamButton"};const t=(0,s.O7)();return o.createElement(o.Fragment,null,n()(de.Z,{style:e.style,icon:e=>(0,re.H)({...e,margin:"2px 17px 2px 2px",width:16,height:16}),onClick:()=>(e=>{let{teamStore:i,teamName:a}=e;return q.YH({environment:t,teamStore:i,teamName:a,from:"sidebar_team_modal"})})({teamName:e.teamName,teamStore:e.teamStoreInstance})},void 0,n()("div",{},void 0,n()(P.Z,{},void 0,n()(m.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.restoreTeamButton",defaultMessage:"Restore teamspace"})),n()(P.Z,{isSmall:!0,style:{whiteSpace:"normal"}},void 0,n()(m.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.restoreTeamCaption",defaultMessage:"Restoring this teamspace will add it to the sidebar for all teamspace members that were previously added."})))))}function Le(e){window.__c={n:"ArchiveTeamButton"};const t=(0,s.O7)(),i=(0,l.yK)((()=>({archiveLabel:{color:D.ZP.red}})),[]);return o.createElement(de.Z,R()({style:e.style,isRed:!0,icon:e=>(0,re.H)({...e,margin:"2px 17px 2px 2px",width:16,height:16}),disabled:e.disabled,disabledFeedback:e.disabled,onClick:()=>e.disabled?void 0:async function(e){let{teamStore:t,environment:i}=e;await q.aQ({environment:i,teamStore:t,from:"sidebar_team_modal"})}({environment:t,teamStore:e.teamStoreInstance})},e.tooltipEvents),n()("div",{},void 0,n()(P.Z,{style:i.archiveLabel},void 0,n()(m.FormattedMessage,{id:"teamSettingsSecurity.dangerZone.archiveTeamButton",defaultMessage:"Archive teamspace"})),n()(P.Z,{isSmall:!0,style:{whiteSpace:"normal"}},void 0,n()(m.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.archiveTeamDescription",defaultMessage:"Removes teamspace from the sidebar for all members"}))))}function Ne(e){return e?"disable":"allow"}const Oe=(0,m.defineMessages)({noDescription:{id:"TeamSettingsGeneral.generalSettings.noDescription",defaultMessage:"No description"}});function Ve(e){let{teamStore:t}=e;window.__c={n:"TeamSettingsGeneral"};const i=(0,s.O7)(),a=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),d=z(t),[c,u]=(0,o.useState)(void 0),[p,g]=(0,o.useState)(void 0),h=(0,l.yK)((()=>({container:{maxWidth:"none",marginLeft:4},nameAndIconWrap:{display:"flex",alignItems:"center",marginBottom:0,marginTop:4},icon:{marginRight:7},name:{height:20,background:"none",boxShadow:"none",padding:"0 8px"},description:{minHeight:20,background:"none",boxShadow:"none",padding:"0 8px",margin:"0 -8px"},updateButton:{marginTop:14},learnMoreLinkContainer:{marginTop:15,marginBottom:15}})),[20]),[f,v]=(0,r.VK)((()=>[t.getName(),t.getDescription()]),[t]);if(void 0===f)return null;const y=f||"",b=v??"",M=b.length>0,w=null==c?void 0:c.trim(),C=null==p?void 0:p.trim(),_=""===w||(void 0===p||C===b.trim())&&(void 0===c||w===y.trim()),k=n()(m.FormattedMessage,{id:"TeamSettingsGeneral.generalSettings.iconAndName.title",defaultMessage:"Icon and name"}),T=n()("div",{style:h.nameAndIconWrap},void 0,n()(X.p,{disabled:d,store:t,style:h.icon,size:20,onChange:e=>{O.createAndCommit({userAction:"TeamSettingsGeneral.updateIcon",environment:i,perform:i=>{q.fs({store:t,update:{icon:e},transaction:i})}})}}),d?n()(P.Z,{},void 0,y):n()(Ue,{value:c??y,style:h.name,onBlur:e=>{u(e)},onChange:e=>{u(e)},disabled:d,placeholder:"Acme Labs"})),I=n()(m.FormattedMessage,{id:"TeamSettingsGeneral.generalSettings.description.title",defaultMessage:"Description"}),x=V.default.formatMessage(Oe.noDescription),Z=d?n()(P.Z,{isMultiline:!0,isSecondaryColor:!M},void 0,M?b:x):n()(Ue,{value:void 0===p?b:p,onBlur:e=>{g(e)},onChange:e=>{g(e)},disabled:d,textarea:!0,autosize:!0,placeholder:x,style:h.description}),F=[o.createElement(o.Fragment,null,n()(P.Z,{isSmall:!0},void 0,k),T),o.createElement(o.Fragment,null,n()(P.Z,{isSmall:!0},void 0,I),Z)];return n()("div",{style:h.container},void 0,n()(ee.Ph,{title:n()(m.FormattedMessage,{id:"TeamSettingsGeneral.generalSettings.details",defaultMessage:"Details"}),rows:F}),!d&&n()(j.Z,{style:h.updateButton,disabled:_,isLarge:!0,onClick:async()=>{if(_)return;if(w&&w!==y.trim()){if(!(await(0,U.Xg)({environment:i,spaceStore:a,teamName:w})))return}const{performResult:e,serverCommitResult:o}=O.createAndCommit({userAction:"TeamSettingsGeneral.updateNameAndDescription",environment:i,perform:e=>{q.fs({store:t,update:{name:w??y,description:C??b},transaction:e})}});try{await Promise.all([e,o])}catch(s){return}N.oV({label:n()(m.FormattedMessage,{id:"TeamSettingsGeneral.settingsChanged",defaultMessage:"Updated teamspace details"})})}},void 0,n()(m.FormattedMessage,{id:"teamsWorkspaceSettings.updateButton.label",defaultMessage:"Update"})),n()("br",{}),n()(oe,{teamStore:t}),n()(We,{teamStore:t}),n()(J.Z,{helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_team_settings_general",containerStyle:h.learnMoreLinkContainer}))}function Ue(e){window.__c={n:"EditableInput"};const{value:t,style:i,onBlur:a,onChange:s,placeholder:r,disabled:l}=e,[d,c]=(0,o.useState)(!1),u=(0,o.useRef)(null);return n()(Y.Z,{capture:d,render:n=>o.createElement($.Z,R()({textarea:e.textarea,autosize:e.autosize,ref:u,onFocus:e=>{c(!0)},onBlur:e=>{c(!1),a(e.target.value)},onChange:e=>{c(!1),s&&s(e.target.value)},onSubmit:e=>{e.target.blur()},placeholder:r,disabled:l,value:t,style:i},n))})}function We(e){let{teamStore:t}=e;window.__c={n:"MaybeDangerZone"};const i=(0,l.yK)((()=>({buttonStyle:{alignItems:"center",height:"auto",width:"100%",paddingTop:ee.MQ,paddingBottom:ee.MQ,paddingLeft:ee.oM,paddingRight:ee.oM}})),[]),[a,s]=(0,r.VK)((()=>[t.getName(),t.isArchived()]),[t]),d=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),c=(0,v.q)(t),u=(0,H.e)(t),p=(0,K.y)(t.id),g=(0,W.n)(d),h=p&&!g;if(void 0===a||!u)return null;const f=[],y=n()(Q.Z,{buttonInternals:n()(ze,{isTeamOwner:c}),teamStore:t,placement:G.u.Bottom,alignment:G.v.Start,from:"sidebar_team_modal",style:i.buttonStyle,icon:e=>L({...e,margin:"2px 17px 2px 2px",width:16,height:16}),isRed:!c});if(f.push(y),c)if(s)f.push(n()(De,{teamStoreInstance:t,teamName:a,style:i.buttonStyle}));else{const e=n()(I.Z,{disableTooltip:!h,placement:G.u.Bottom,alignment:G.v.Start,renderTooltip:()=>n()(m.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.cannotArchive",defaultMessage:"Cannot archive this teamspace because it is the only default teamspace in this workspace."}),render:e=>n()(Le,{disabled:h,teamStoreInstance:t,tooltipEvents:e,style:i.buttonStyle})});f.push(e)}return o.createElement(o.Fragment,null,n()("div",{style:{height:20,width:"100%"}}),n()(ee.Ph,{title:n()(m.FormattedMessage,{id:"sidebarTeamModalSettingsScreen.dangerZone.title",defaultMessage:"Danger zone"}),rows:f,itemStyle:{padding:0,margin:0}}))}function ze(e){let{isTeamOwner:t}=e;window.__c={n:"LeaveTeamButton"};const i=(0,l.yK)((()=>({label:{color:t?"inherit":D.ZP.red}})),[t]);return n()("div",{},void 0,n()(P.Z,{style:i.label},void 0,n()(m.FormattedMessage,{id:"teamBrowser.teamCard.button.leaveTeam",defaultMessage:"Leave teamspace"})),n()(P.Z,{isSmall:!0,style:{whiteSpace:"normal"}},void 0,n()(m.FormattedMessage,{id:"teamBrowser.teamCard.button.leaveTeamDescription",defaultMessage:"Removes teamspace from your sidebar"})))}var Ke=i(35840),He=i(62837),Ge=i(77907),qe=i(33052),je=i(30688);function Ye(e){let{teamStore:t}=e;window.__c={n:"TeamFilterAndAddMemberRow"};const i=(0,l.yK)((e=>({container:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:e.modalBackground,zIndex:10,paddingBottom:8},input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12,width:"45%",maxWidth:260,marginRight:2},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),a=(0,m.useIntl)(),[s,d]=(0,r.AF)(M.Z),[c,u,p]=(0,r.AF)(void 0,qe.Z),g=(0,He.e)(t),h=(0,r.VK)((()=>(0,Me.s$)()&&!f.U2(t)),[t]);return n()("div",{style:i.container},void 0,n()("div",{},void 0,n()(Ge.LazyTeamPermissionsInviteWithModal,{store:t,permissionsInviteStore:p,origin:n()(I.Z,{placement:I.Z.Placement.Left,alignment:I.Z.Alignment.Start,textWrap:!0,renderTooltip:()=>g?n()("div",{style:{width:"max-content",maxWidth:150}},void 0,n()(m.FormattedMessage,{id:"teamPermissionsInviteWithModal.addMembers.tooltip",defaultMessage:"Add members and groups"})):n()("div",{style:{width:220}},void 0,n()(m.FormattedMessage,{id:"teamPermissionsInviteWithModal.addMembersNoPermissions.tooltip",defaultMessage:"You do not have permissions to add members to this teamspace"})),render:e=>o.createElement(j.Z,R()({disabled:!g,isLarge:!0,onClick:()=>{u({...c,modalOpen:!0})}},e),n()(m.FormattedMessage,{id:"teamPermissionsInviteWithModal.openModal",defaultMessage:"Add members"}))})}),h&&n()(je.u,{store:t,isSmall:!0})),n()($.Z,{placeholder:a.formatMessage({id:"teamPermissionsInviteWithModal.filterGroupsAndMembersInput.placeholder",defaultMessage:"Search for members or groups…"}),style:i.input,value:s.memberFilterQuery,onChange:e=>{d({...s,memberFilterQuery:e.target.value,limitMembers:!0})},left:(0,Ke.R)(i.searchIcon),showClearButton:!0,format:$.Z.Format.Small}))}var $e=i(58573),Qe=i(59054),Je=i(31299),Xe=i(62385),et=i(15047),tt=i(64684),it=i(7928),at=i(67669),nt=i(86125),ot=i(12793),st=i(31278),rt=i(45653),lt=i(25735),dt=(i(21703),i(36591)),ct=i(47307),ut=i(61766),mt=i(31194),pt=i(61519),gt=i(29369),ht=i(7567);function ft(e){window.__c={n:"TeamMemberPermissionRoleSelect"};const{teamStore:t,memberInfo:i,permissionItem:a,memberName:d,style:c,onMenuItemClicked:u,isPermissionOverridden:p}=e,g=(0,s.O7)(),h=(0,m.useIntl)(),f=(0,l.Fg)(),v=(0,o.useMemo)((()=>new ut.Z),[]),y=(0,l.yK)((e=>({header:{display:"flex",flexDirection:"column",backgroundColor:e.sidebarSecondaryBackground,fontSize:12,color:e.mediumTextColor,alignItems:"flex-start",paddingTop:10,paddingLeft:12,paddingRight:12,paddingBottom:10},overrideTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",height:28},overrideLabel:{paddingLeft:8,color:e.mediumTextColor}})),[]),b=(0,r.VK)((()=>t.getTeamPermission()),[t]),M=(0,r.VK)((()=>{if(null==t||!t.isDefined())return;const e=h.formatMessage({id:"teamMemberPermissionRoleSelect.member.permissionitem.description",defaultMessage:"You can't give less access than the teamspace default. Lower teamspace members‘ access to enable this option."}),i=n()(m.FormattedMessage,{id:"teamMemberPermissionRoleSelect.permissionItem.defaultTag",defaultMessage:"default"});function a(i){return(0,tt.bk)({teamValue:{id:t.id,permissions:t.getPermissionItems()},permissionRole:i})?{isDisabled:!0,disabledMessage:e}:void 0}return["editor","read_and_write","comment_only","reader"].map((e=>({role:e,disabledInfo:a(e),tag:(null==b?void 0:b.role)===e?i:void 0})))}),[b,h,t]);const w=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),C=(0,r.VK)((()=>!("enterprise"===(null==w?void 0:w.getSubscriptionTier()))&&!p),[w,p]),_=n()("div",{style:y.overrideTitle},void 0,n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.permissionsOverride",defaultMessage:"Custom permissions"}),C?n()(ce.Z,{subscriptionTier:"enterprise",analyticsName:"team_member_permission_override",desktopStyle:{marginLeft:8,marginRight:12}}):n()(ht.ZP,{role:"owner"===i.type?"none":a.role,table:gt.e0,type:"user"===i.entity_type?"user_permission":"group_permission",upgradeButtonName:"user"===i.entity_type?"user_permission_item":"group_permission_item",buttonStyle:{marginRight:0,fontSize:12,color:f.mediumTextColor,visibility:p?void 0:"hidden"},availableRoleItems:M,header:n()(P.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:600,marginLeft:16,marginTop:8}},void 0,n()(m.FormattedMessage,{id:"teamMemberPermissionRoleSelect.permissionOverride.menuHeader",defaultMessage:"Select custom role"})),onChange:e=>{"none"!==e&&(!function(e){ct.showDialog({message:n()(m.FormattedMessage,{id:"teamMemberPermissionSettings.permissionSwitcher.confirmation.message",defaultMessage:"Are you sure you want to change {name}'s role to {role}?",values:{name:d,role:(0,at.r_)(e).toLowerCase()}}),description:n()(m.FormattedMessage,{id:"teamMemberPermissionSettings.permissionSwitcher.confirmation.description",defaultMessage:"This change won't apply to any restricted pages in the teamspace."}),showCancel:!0,keepFocus:!1,handleCancel:ct.dismissDialog,items:[{label:n()(m.FormattedMessage,{id:"teamMemberPermissionSettings.permissionSwitcher.accept",defaultMessage:"Change access"}),color:"red",onAccept:async()=>{const{serverCommitResult:a}=O.createAndCommit({userAction:"TeamMemberPermissionRoleSelect.handleRoleSelect",environment:g,perform:a=>{q.jg({memberInfo:i,teamStore:t,transaction:a,environment:g,permissionRole:e})}});await a,t.isDefault()&&(t.getMembershipDefinedOnTeam().some((e=>(0,tt.ah)(e,i)))||await q.Uj({environment:g,teamStore:t,teamMemberInfos:[i],isSettingDefaultTeam:!0,createNewTeamFlowId:void 0}))}}]})}(e),u&&u())},buttonPopupStore:v,placementToOrigin:mt.Iw.Right,alignmentToOrigin:mt.lU.End}));return n()(I.Z,{placement:I.Z.Placement.Left,textWrap:!0,renderTooltip:()=>n()(m.FormattedMessage,{id:"teamMemberPermissionRoleSelect.permissionOverride.buttonTooltip",defaultMessage:"Set a custom permission level for all pages in this teamspace"}),render:e=>o.createElement(_e.Z,R()({},e,{focused:!1,style:c,textWrapperStyle:{marginRight:0},disabled:C,onClick:()=>v.setState({open:!0}),title:_,icon:p?n()("div",{style:{marginTop:8}},void 0,(0,dt.e)({width:14})):void 0}))})}function vt(e){let{teamStore:t,memberInfo:i,permissionItem:a,memberName:l,isPermissionOverridden:d,disabled:u}=e;window.__c={n:"TeamMemberOwnerSelect"};const p=(0,r.qz)(void 0,ut.Z),[g,h]=(0,r.AF)(p),v=(0,s.O7)(),y=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),b=(0,r.VK)((()=>S.default.state.currentUserStore),[]),M=(0,r.VK)((()=>{const e=null==b?void 0:b.userId;return"user"===i.entity_type&&i.user_id===e}),[null==b?void 0:b.userId,i]),w=()=>h({...g,open:!1}),C=async e=>{w();const a=n()(m.FormattedMessage,"owner"===e?{defaultMessage:"owner",id:"teamMemberPermissionSettings.upgradeGuestConfirmation.roleLabelOwner"}:{defaultMessage:"member",id:"teamMemberPermissionSettings.upgradeGuestConfirmation.roleLabelMember"});if("team_level_guest"!==i.type||"owner"!==e&&"member"!==e)if("owner"===e){if("user"===i.entity_type){const{serverCommitResult:e}=O.createAndCommit({userAction:"TeamMemberOwnerSelect.handleOwnerMenuItemClicked",environment:v,perform:e=>{q.W8({environment:v,userId:i.user_id,teamStore:t,transaction:e})}});await e}}else M?ct.showDialog({message:n()(m.FormattedMessage,{id:"teamMemberPermissionSettings.removeSelfTeamOwner.confirmation.message",defaultMessage:"Are you sure you want to remove yourself as a teamspace owner? You'll no longer be able to edit teamspace settings and permissions."}),showCancel:!0,keepFocus:!1,handleCancel:ct.dismissDialog,items:[{label:n()(m.FormattedMessage,{id:"teamMemberPermissionSettings.permissionSwitcher.accept",defaultMessage:"Change access"}),color:"red",onAccept:_}]}):await _();else{const s=(0,f.Mf)(i.user_id).length;ct.showDialog({message:o.createElement(o.Fragment,null,n()(m.FormattedMessage,s>1?{id:"teamMemberPermissionSettings.upgradeGuestConfirmationWithOtherTeamspaces.message",defaultMessage:"Are you sure you want to upgrade this user to a teamspace {memberOrOwner}? They will also be added to the workspace as a member, and they will become a member in {numberOfOtherTeams, plural, one {{numberOfOtherTeams} other teamspace} other {{numberOfOtherTeams} other teamspaces}}.",values:{memberOrOwner:a,numberOfOtherTeams:s-1}}:{id:"teamMemberPermissionSettings.upgradeGuestConfirmation.message",defaultMessage:"Are you sure you want to upgrade this user to a teamspace {memberOrOwner}? They will also be added to the workspace as a member.",values:{memberOrOwner:a}})),showCancel:!0,keepFocus:!1,handleCancel:ct.dismissDialog,items:[{label:n()(m.FormattedMessage,{id:"teamMemberPermissionSettings.upgradeGuestConfirmation.accept",defaultMessage:"Add to workspace"}),color:"blue",onAccept:async()=>{if(y){const{serverCommitResult:a}=O.createAndCommit({userAction:"TeamMemberOwnerSelect.handleOwnerMenuItemClicked",environment:v,perform:a=>{q.Ce({environment:v,userId:i.user_id,teamStore:t,transaction:a,spaceStore:y,newTeamRole:e})}});await a}}}]})}},_=async()=>{if("owner"===i.type&&"user"===i.entity_type){const{serverCommitResult:e}=O.createAndCommit({userAction:"TeamMemberOwnerSelect.handleSetMemberAccept",environment:v,perform:e=>{q.mX({userId:i.user_id,teamStore:t,transaction:e,environment:v})}});await e}else if("member"===i.type){const{serverCommitResult:e}=O.createAndCommit({userAction:"TeamMemberOwnerSelect.handleSetMemberAccept",environment:v,perform:e=>{q.X0({environment:v,memberInfo:i,teamStore:t,transaction:e})}});await e}},k=async()=>{const{entity_type:e}=i;switch(w(),e){case"group":const a=(0,te.TC)({spaceStore:y,groupId:i.group_id});if(!a)throw new Error("Permission group not found in space.");q.mN({environment:v,teamStore:t,group:a});break;case"user":await q.WO({environment:v,teamStore:t,currentSpaceStore:y,userId:i.user_id,from:"team_settings_member_table"});break;default:(0,c.t1)(e)}};return n()(ke.ZP,{buttonPopupStore:p,placementToOrigin:mt.Iw.Bottom,renderOrigin:e=>n()(St,{buttonPopupEvents:e,isPermissionOverridden:d,permissionItem:a,memberInfo:i,disabled:u}),render:()=>n()(yt,{teamStore:t,isPermissionOverridden:d,memberInfo:i,permissionItem:a,memberName:l,onMenuItemClicked:C,onRemoveClicked:k,onSubMenuItemClicked:w}),popupType:ke.Z4.Popup})}function yt(e){let{teamStore:t,isPermissionOverridden:i,memberInfo:a,permissionItem:s,memberName:c,onRemoveClicked:p,onMenuItemClicked:g,onSubMenuItemClicked:v}=e;window.__c={n:"OwnerMemberMenuList"};const y=(0,r.VK)((()=>{const{currentSpaceStore:e}=S.default.state;return!Boolean(null==e?void 0:e.getSettingsStore().getKeyStore("disable_team_guests").getValue())&&(0,Me.F$)()}),[]),b=(0,r.VK)((()=>t.isDefault()),[t]),M=(0,r.VK)((()=>(0,f.Hu)({membership:t.getKeyStore("membership").getValue()})),[t]),w=(0,r.VK)((()=>1===t.getMembers().filter((e=>"owner"===e.type)).length),[t]),C=(0,l.yK)((e=>{const t={paddingTop:5,paddingBottom:5},i={...t,width:280,alignItems:"flex-start"};return{actionMenu:{marginTop:-4},removeButton:{...t,color:e.errorText},menuItem:i,indentedMenuItem:{...i,paddingLeft:20},overrideLabel:{paddingLeft:10,color:e.mediumTextColor,fontSize:12,fontWeight:u.Z.fontWeight.regular}}}),[]),_=(e,t)=>{const a=("owner"===e||"team_level_guest"===e)&&"group"===t.entity_type,r="member"===e&&"owner"===t.type&&w,l="team_level_guest"===e&&("owner"===t.type||"member"===t.type),d=a||r||l;return{key:e,action:()=>g(e),render:c=>{const u=!i&&t.type===e;return n()(I.Z,{disableTooltip:!d,placement:I.Z.Placement.Right,textWrap:!0,renderTooltip:()=>a?n()(m.FormattedMessage,"owner"===e?{id:"TeamMemberOwnerSelect.memberItem.disableOwnerForGroupsTooltip",defaultMessage:"Groups can't be teamspace owners"}:{id:"TeamMemberOwnerSelect.memberItem.disableTeamGuestForGroupsTooltip",defaultMessage:"Groups can't be teamspace guests"}):r?n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.memberItem.disableWithOnlyOneOwnerTooltip",defaultMessage:"Add another teamspace owner to downgrade yourself to member"}):l?n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.memberItem.disableDowngradeToGuestTooltip",defaultMessage:"To change this user to a teamspace guest, first remove them from the workspace."}):void 0,render:t=>o.createElement("span",t,o.createElement(_e.Z,R()({},c,{style:u?C.menuItem:C.indentedMenuItem,disabled:d,disabledFeedback:d,title:n()(bt,{isPermissionOverridden:i,type:e,permissionItem:s}),caption:wt(e),shouldWrapCaption:!0,icon:u?(0,dt.e)({width:14}):void 0})))})}}},k=b&&"user"===a.entity_type,T="group"!==a.entity_type,P="group"!==a.entity_type&&y,x=[{key:"teamRoles",items:d.oA([T?_("owner",a):void 0,_("member",a),P?_("team_level_guest",a):void 0,Ct({onRemoveClicked:p,styles:C,isMemberInDefaultTeam:k}),..."owner"===a.type||M?[]:[{key:"divider",action:()=>{},render:()=>n()(pt.Z,{size:10})},{key:"permissions_override",action:()=>{},render:e=>o.createElement("span",e,n()(ft,{teamStore:t,memberInfo:a,permissionItem:s,memberName:c,onMenuItemClicked:v,isPermissionOverridden:i,style:i?C.menuItem:C.indentedMenuItem}))}]]),render:e=>o.createElement(Pe.Z,R()({},e,{topBorder:0!==e.index}))}];return n()(Te.Z,{className:h.a6i,menuType:we.og.Popup},void 0,n()(Ie.Z,{type:Ie.i.Vertical,initialFocus:void 0,sections:x}))}function St(e){let{buttonPopupEvents:t,disabled:i,isPermissionOverridden:a,permissionItem:s,memberInfo:r}=e;window.__c={n:"SelectButton"};const d=(0,l.yK)((e=>({label:{color:e.regularTextColor,fontSize:12.5,fontWeight:u.Z.fontWeight.regular},overrideLabel:{color:e.mediumTextColor,fontSize:12,fontWeight:u.Z.fontWeight.regular},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),p=function(e,t,i){if(t&&i)return function(e){switch(e){case"none":return n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.none",defaultMessage:"No access"});case"reader":return n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.reader",defaultMessage:"Can view"});case"comment_only":return n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.comment_only",defaultMessage:"Can comment"});case"content_only_editor":return n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.content_only_editor",defaultMessage:"Can edit content"});case"membership_admin":case"read_and_write":return n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.read_and_write",defaultMessage:"Can edit"});case"editor":return n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.editor",defaultMessage:"Full access"});default:(0,c.t1)(e)}}(i);return Mt(e)}(r.type,a,s.role);return o.createElement(de.Z,R()({disabled:i},t),a&&n()("span",{style:d.overrideLabel},void 0,n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.roleName.custom",defaultMessage:"Custom"}),n()("span",{style:{marginLeft:5,marginRight:5}},void 0,"•")),n()("span",{style:d.label},void 0,p),!i&&(0,ue.i)(d.chevron))}function bt(e){let{isPermissionOverridden:t,permissionItem:i,type:a}=e;const o=Mt(a);return n()("div",{},void 0,n()("span",{},void 0,o))}function Mt(e){switch(e){case"owner":case"member":case"team_level_guest":return o.createElement(m.FormattedMessage,f.q9[e].label);case"none":return;default:(0,c.t1)(e)}}function wt(e){switch(e){case"owner":case"member":case"team_level_guest":return o.createElement(m.FormattedMessage,f.q9[e].caption);case"none":return;default:(0,c.t1)(e)}}function Ct(e){let{styles:t,onRemoveClicked:i,isMemberInDefaultTeam:a}=e;const s=a?n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.remove.disabledTooltip.cannotRemoveFromDefault",defaultMessage:"Members cannot be removed from a default teamspace."}):void 0;return{key:"remove",action:i,render:e=>n()(I.Z,{disableTooltip:!s,placement:I.Z.Placement.Right,textWrap:!1,renderTooltip:()=>s,render:i=>o.createElement("span",i,o.createElement(_e.Z,R()({},e,{style:{...t.removeButton,...t.indentedMenuItem},disabled:Boolean(s),disabledFeedback:!0,title:n()(m.FormattedMessage,{id:"TeamMemberOwnerSelect.remove",defaultMessage:"Remove"})})))})}}var _t=i(85387);function kt(e){window.__c={n:"TeamPermissionRowAvatar"};const{icon:t,label:i,name:a,tag:o,style:s}=e,r=(0,l.yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",gap:10,...s},labelContainer:{display:"flex",flexDirection:"column",...u.Z.textOverflowStyle,marginLeft:5},name:{minWidth:30},nameContainer:{display:"flex",flexDirection:"row",alignItems:"center"}})),[s]);return n()("div",{style:r.container},void 0,t,n()("div",{style:r.labelContainer},void 0,n()("div",{style:r.nameContainer},void 0,n()(_t.s,{style:r.name},void 0,a),o),i&&n()(P.Z,{isSmall:!0,isSecondaryColor:!1,isMultiline:!0},void 0,n()(_t.s,{},void 0,i))))}function Tt(e){window.__c={n:"TeamPermissionRowItem"};const{iconComponent:t,label:i,name:a,permissionRoleSelectComponent:s,tag:r,tooltip:d,style:c}=e,u=(0,l.yK)((e=>({permissionRow:{display:"flex",flexDirection:"row",lineHeight:1.2,fontSize:14,width:"100%",minHeight:36,justifyContent:"space-between",alignItems:"center",...c}})),[c]);return n()("div",{style:u.permissionRow},void 0,n()(kt,{icon:t,name:a,tag:r,label:i,style:{minWidth:200,marginRight:6}}),n()(I.Z,{textWrap:!0,style:{width:210},disableTooltip:!d,placement:I.Z.Placement.Left,renderTooltip:()=>d,render:e=>o.createElement("span",e,s)}))}function It(e){window.__c={n:"SpecificTeamMemberPermissionRow"};const{type:t,store:i,permissionItem:a,memberInfo:o}=e,d=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),u=(0,m.useIntl)(),p=(0,r.VK)((()=>{switch(t){case"group":return"none";case"user":return null!=d&&d.isDefined()?(0,at.su)(null==d?void 0:d.getPermissionItems(),e.memberInfo.user_id):"none";default:(0,c.t1)(t)}}),[d,t,e]),g=(0,v.q)(i),h=(0,r.VK)((()=>{const{currentSpaceStore:e}=S.default.state;return null==e?void 0:e.canEditMembership()}),[]),f=(0,s.O7)(),y=(0,r.VK)((()=>{const e=f.currentUser.id,t=i.getSettingsStore().getValue();return!!(null!=d&&d.isDefined()&&i.isDefined()&&t&&e)&&(0,tt.W9)({membership:i.getMembers(),settings:t,is_default:i.isDefault()},e,{permissions:d.getPermissionItems(),subscription_tier:d.getSubscriptionTier(),permission_groups:d.getPermissionGroups()})}),[f.currentUser.id,d,i]),b=(0,r.VK)((()=>{const e=i.getPermissionItems()||[];switch(o.entity_type){case"group":return!!e.find((e=>(0,me.hV)(e)&&e.group_id===o.group_id));case"user":return!!e.find((e=>(0,me.jg)(e)&&e.user_id===o.user_id));default:return!1}}),[o,i]),{name:M,label:w,icon:C}=(0,r.VK)((()=>{switch(t){case"group":return xt({permissionGroup:e.permissionGroup,spaceId:null==d?void 0:d.id});case"user":return function(e){let{intl:t,userStore:i}=e;return{name:(0,it.Nz)(t,null==i?void 0:i.getModel()),label:null==i?void 0:i.getEmail(),icon:n()(rt.Z,{avatarShouldShowShadow:!0,userStore:i,size:32})}}({intl:u,userStore:e.userStore});default:(0,c.t1)(t)}}),[t,e,u,null==d?void 0:d.id]),_=n()("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},void 0,n()(vt,{teamStore:i,memberInfo:o,memberName:M,permissionItem:a,isPermissionOverridden:b,disabled:!g&&!y||"team_level_guest"===o.type&&!h})),k=(0,l.yK)((e=>({row:{minHeight:52},pill:{marginLeft:6,height:17}})),[]);return n()(Tt,{style:k.row,tag:(0,me.Bc)(p)?n()(nt.Z,{desktopStyle:k.pill,mobileStyle:k.pill,role:Pt(p)}):"group"===t?n()("div",{style:k.pill},void 0,C):void 0,permissionRoleSelectComponent:_,iconComponent:"group"===t?n()(ot.Z,{size:32}):C,name:M,label:w})}function Pt(e){switch(e){case"editor":return"admin";case"membership_admin":return"membership_admin";default:(0,c.t1)(e)}}function xt(e){let{spaceId:t,permissionGroup:i}=e;const{name:a,user_ids:s,icon:r}=i,l=(null==s?void 0:s.length)??0;return{name:a??n()(m.FormattedMessage,{id:"teamPermissionSettings.unknownGroup",defaultMessage:"Unknown Group"}),label:n()(I.Z,{placement:I.Z.Placement.Bottom,alignment:I.Z.Alignment.Start,disableTooltip:0===l,renderTooltip:()=>n()(lt.Y,{group:i,limit:10,noMembersMessage:void 0}),render:e=>o.createElement("div",e,n()(m.FormattedMessage,{id:"teamPermissionSettings.group",defaultMessage:"Group"})," • ",n()(m.FormattedMessage,{id:"teamPermissionSettings.numberOfMembers",defaultMessage:"{groupSize, plural, one {{groupSize} member} other {{groupSize} members}}",values:{groupSize:l}}))}),icon:r&&n()(st.Z,{bucket:"public",disabled:!0,onChange:()=>{},isEmptyPage:!1,title:a,size:18,icon:r&&t?{icon:r,pointer:{table:et.bx,id:t}}:void 0})}}var Zt=i(47453),Ft=i(21325);function At(e){let{teamStore:t,...i}=e;window.__c={n:"SpecificTeamMemberToAddRow"};const a=(0,s.O7)(),d=(0,r.VK)((()=>{var e;return null===(e=S.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),c=(0,m.useIntl)(),u=(0,l.yK)((()=>({container:{display:"flex",flexDirection:"row",lineHeight:1.2,fontSize:14,width:"100%",minHeight:52,justifyContent:"space-between",alignItems:"center"},pill:{marginLeft:6,height:17}})),[]),p=(0,o.useCallback)((e=>{N.oV({label:n()(m.FormattedMessage,{id:"SpecificTeamMemberToAddRow.team_invite_failure",defaultMessage:"Failed to add {userOrGroupName}",values:{userOrGroupName:e}})})}),[]),g=(0,o.useCallback)((async(e,i)=>{await q.Uj({environment:a,teamMemberInfos:[e],teamStore:t,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})?await Ft.bi(a):p(i)}),[a,p,t]),h=(0,o.useCallback)(((e,t)=>g({type:"member",entity_type:"user",user_id:e.id},t)),[g]),f=(0,o.useCallback)(((e,t)=>g({type:"member",entity_type:"group",group_id:e.id},t)),[g]);if("memberToAdd"in i){const{memberToAdd:e}=i,t=(0,it.Nz)(c,e);return n()("div",{style:u.container},void 0,n()(kt,{icon:n()(rt.Z,{userValue:e,size:32}),name:t,label:e.email}),Et((()=>{h(e,t)})))}{if(!d)return o.createElement(o.Fragment,null);const{groupToAdd:e}=i,t=xt({spaceId:d,permissionGroup:e});return n()("div",{style:u.container},void 0,n()(kt,{icon:n()(ot.Z,{size:32}),name:t.name,label:t.label,tag:n()("div",{style:u.pill},void 0,t.icon)}),Et((()=>{f(e,t.name)})))}}const Et=e=>n()(de.Z,{isBlue:!0,onClick:e,icon:Zt.R},void 0,n()(m.FormattedMessage,{id:"SpecificTeamMemberToAddRow.addMemberButton.text",defaultMessage:"Add"}));var Bt=i(40745),Rt=i(8597);function Dt(e){let{sortType:t,onChangeSortType:i}=e;window.__c={n:"TeamPermissionsListHeader"};const a=(0,l.yK)((e=>({container:{width:"100%",display:"flex",justifyContent:"space-between",borderBottom:`1px solid ${e.regularDividerColor}`}})),[]),s=e=>e===t.column?t.sortedAscending?"ascending":"descending":"none",r=e=>{const a=e===t.column&&!t.sortedAscending;i({column:e,sortedAscending:a})};return o.createElement(o.Fragment,null,n()("div",{style:a.container},void 0,n()(Lt,{title:n()(m.FormattedMessage,{id:"TeamPermissionsListHeader.nameColumn",defaultMessage:"Name"}),sortedType:s("name"),onClick:()=>r("name")}),n()(Lt,{title:n()(m.FormattedMessage,{id:"TeamPermissionsListHeader.roleColumn",defaultMessage:"Role"}),sortedType:s("role"),onClick:()=>r("role")})))}function Lt(e){let{sortedType:t,title:i,onClick:a}=e;window.__c={n:"HeaderLabel"};const o=(0,l.yK)((e=>({button:{color:e.mediumTextColor,fontSize:12,padding:0},buttonHover:{background:"unset"},sortIcon:{width:14,height:14,marginRight:5,fill:e.mediumIconColor}})),[]);return n()(de.Z,{style:o.button,hoveredStyle:o.buttonHover,onClick:a},void 0,"ascending"===t&&(0,Rt.Z)(o.sortIcon),"descending"===t&&(0,Bt.M)(o.sortIcon),i)}function Nt(e){var t;let{store:i}=e;window.__c={n:"TeamPermissionsList"};const a=(0,s.O7)(),d=(0,l.yK)((e=>({container:{display:"block",overflow:"hidden"},membersHeader:{marginBottom:8},noResult:{fontSize:u.Z.fontSize.UIRegular.desktop,color:e.mediumTextColor,marginTop:8},showMore:{marginBottom:24,width:"max-content"}})),[]),p=(0,m.useIntl)(),[g,h]=(0,o.useState)({column:"role",sortedAscending:!1}),[v]=(0,r.AF)(M.Z),y=(0,He.e)(i),b=(0,r.VK)((()=>i.getMembers()),[i]),w=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),C=(0,r.VK)((()=>S.default.state.currentUserStore),[]),{permissionRowInfos:_,numNotShown:k}=(0,r.VK)((()=>{const e=function(e){let{permissionRowInfos:t,memberFilterQuery:i,intl:a}=e;if(""===i)return t;return(0,$e.ZP)(i,t,(e=>{const{type:t}=e;switch(t){case"group":return e.permissionGroup.name??"";case"user":const{userStore:i}=e;return i.getSearchName(a);default:(0,c.t1)(t)}}))}({permissionRowInfos:(0,f.tu)({currentUserStore:C,currentSpaceStore:w,teamStore:i,members:b}),memberFilterQuery:v.memberFilterQuery,intl:p}),t=function(e){let{permissionRowInfos:t,sortType:i,intl:a}=e;const{column:n,sortedAscending:o}=i,s={permissionRowInfos:t,sortedAscending:o};if("role"===n)return function(e){let{permissionRowInfos:t,sortedAscending:i}=e;const a=["owner","member","team_level_guest"],n=["group","user"];return[...t].sort(((e,t)=>{const i=e.memberInfo.entity_type,a=t.memberInfo.entity_type;return n.indexOf(i)-n.indexOf(a)})).sort(((e,t)=>{const n=e.memberInfo.type,o=t.memberInfo.type,s=a.indexOf(n)-a.indexOf(o);return i?-s:s}))}(s);if("name"===n)return function(e){let{permissionRowInfos:t,sortedAscending:i,intl:a}=e;return[...t].sort(((e,t)=>{const n=Ot(e,a)??"",o=Ot(t,a)??"";if(n===o)return 0;const s=n<o?-1:1;return i?-s:s}))}({...s,intl:a});(0,c.t1)(n)}({permissionRowInfos:e,sortType:g,intl:p}),a=v.limitMembers?t.slice(0,50):t;return{permissionRowInfos:a,numNotShown:e.length-a.length}}),[w,C,b,i,g,v.memberFilterQuery,v.limitMembers,p]),[T]=(0,Qe.r5)((async()=>{var e;if(!y||null===(e=v.memberFilterQuery)||void 0===e||!e.trim().length)return[];const t=(await Je.Yu({environment:a,query:v.memberFilterQuery,membersOnly:!0})).map((e=>({type:"user",value:e}))),i=Je.$w({query:v.memberFilterQuery,intl:p}).map((e=>({type:"group",value:e}))),n=new Set(_.map(Ut));return[...t,...i].filter((e=>!n.has(e.value.id))).slice(0,5)}),[y,v.memberFilterQuery,a,p,_]),I=Boolean(null===(t=v.memberFilterQuery)||void 0===t?void 0:t.trim().length),P=_.length>0,x="resolved"===T.status?T.value:[];return n()("div",{style:d.container},void 0,n()(Vt,{title:I?n()(m.FormattedMessage,{id:"TeamPermissionsList.search.inThisTeam",defaultMessage:"In this team"}):n()(Dt,{sortType:g,onChangeSortType:h}),rows:_,renderRow:e=>o.createElement(It,R()({store:i},e))}),k>0&&n()(Xe.Z,{style:d.showMore,onClick:()=>{M.Z.setState({...v,limitMembers:!1})}},void 0,n()(m.FormattedMessage,{defaultMessage:"Show {numNotShown} more",id:"teamPermissionSettings.member.showMore",values:{numNotShown:k}})),x.length>0&&n()(Vt,{title:n()(m.FormattedMessage,{id:"TeamPermissionsList.search.notInTeam",defaultMessage:"Not in team"}),rows:x,renderRow:e=>"user"===e.type?n()(At,{teamStore:i,memberToAdd:e.value}):n()(At,{teamStore:i,groupToAdd:e.value})}),!P&&0===x.length&&n()("div",{style:d.noResult},void 0,n()(m.FormattedMessage,{id:"TeamPermissionsList.search.zeroState",defaultMessage:"No members or groups found"})))}function Ot(e,t){const{type:i}=e;if("user"===i){const{userStore:i}=e;return i.getDisplayName(t)}if("group"===i){const{permissionGroup:t}=e;return t.name}(0,c.t1)(i)}function Vt(e){let{rows:t,renderRow:i,title:a}=e;window.__c={n:"TeamPermissionListInner"};const s=(0,l.yK)((e=>({membersList:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",width:"100%",marginBottom:12},memberDivider:{borderBottom:`1px solid ${e.regularDividerColor}`}})),[]);return t.length?o.createElement(o.Fragment,null,a&&n()(P.Z,{isSmall:!0},void 0,a),n()("div",{style:s.membersList},void 0,t.map(((e,t)=>o.createElement(o.Fragment,null,t>0&&n()("div",{style:s.memberDivider}),i(e)))))):null}function Ut(e){switch(e.type){case"user":return e.memberInfo.user_id;case"group":return e.memberInfo.group_id;default:(0,c.t1)(e)}}function Wt(e){let{teamStore:t}=e;window.__c={n:"TeamMembersListSection"};const i=(0,l.yK)((()=>({content:{display:"grid",gridAutoFlow:"row",rowGap:6}})),[]);return n()("div",{style:i.content},void 0,n()(Ye,{teamStore:t}),n()(Nt,{store:t}))}var zt=i(79362);function Kt(e){window.__c={n:"TeamGuestsPermissionRow"};const{teamStore:t}=e,i=(0,s.O7)(),a=(0,m.useIntl)(),{teamGuestPermissionItem:o,teamPermissions:d}=(0,r.VK)((()=>({teamGuestPermissionItem:t.getTeamGuestsPermission(),teamPermissions:t.getPermissionItems()||[]})),[t]),c=z(t),u=(0,r.VK)((()=>[{role:"editor",disabledInfo:{isDisabled:!0,disabledMessage:a.formatMessage({id:"teamPermissionsSettings.teamspace.guest.disabledPermissionitem.description",defaultMessage:"Teamspace guests can't have full access."})}},{role:"read_and_write",disabledInfo:void 0},{role:"comment_only",disabledInfo:void 0},{role:"reader",disabledInfo:void 0}]),[a]),p=(0,l.yK)((e=>({button:{fontSize:12.5,marginRight:0,color:e.mediumTextColor}})),[]),g=o&&n()(ht.ZP,{role:o.role,table:gt.e0,type:"explicit_team_guest_permission",upgradeButtonName:"team_permission_item",disabled:c,buttonStyle:p.button,availableRoleItems:u,onChange:async e=>{if(d.filter((t=>((0,me.jg)(t)||(0,me.hV)(t))&&(0,pe.xO)(e,t.role))).length>0){if(!(await(0,U.Bt)()))return}O.createAndCommit({userAction:"TeamGuestsPermissionRow.permissionComponent",environment:i,perform:a=>{q.$J({environment:i,teamStore:t,newRole:e,transaction:a,permissionsToClear:[]})}})}}),h=(0,r.VK)((()=>t.getName()),[t]),f=(0,r.VK)((()=>t.getIcon()),[t]),v=f&&zt.V2(f.icon)?zt.mk(f.icon):"gray",y=f?{...f,icon:`/icons/user-circle_${v}.svg`}:void 0,S=n()(X.p,{disabled:!0,store:t,size:ee.Kt,icon:y});return g?n()(Tt,{permissionRoleSelectComponent:g,iconComponent:S,name:Ht(h)}):null}function Ht(e){return n()(m.FormattedMessage,e?{defaultMessage:"Teamspace guests",id:"TeamMembersTopSection.permissionItem.guest.defaultAccessTeamSpaceName",values:{teamName:e}}:{defaultMessage:"Teamspace guests",id:"TeamMembersTopSection.permissionItem.guest.defaultAccessWithoutTeamspaceName"})}function Gt(e){window.__c={n:"TeamMembersPermissionRow"};const{teamStore:t}=e,i=(0,s.O7)(),a=(0,l.Fg)(),o=(0,m.useIntl)(),{teamPermissionItem:d,teamPermissions:c}=(0,r.VK)((()=>({teamPermissionItem:t.getTeamPermission(),teamPermissions:t.getPermissionItems()||[]})),[t]),u=z(t),p=(0,r.VK)((()=>{var e;const i=null===(e=t.getPermissionItems())||void 0===e?void 0:e.find((e=>"space_permission"===e.type)),a=o.formatMessage({id:"teamPermissionsSettings.teamspace.disabledPermissionitem.description",defaultMessage:"Teamspace members can't have lower permissions than workspace members"});function n(e){return i&&e!==i.role&&(0,pe.nl)(e,i.role)===i.role&&!t.isDefault()?{isDisabled:!0,disabledMessage:a}:void 0}return[{role:"editor",disabledInfo:n("editor")},{role:"read_and_write",disabledInfo:n("read_and_write")},{role:"comment_only",disabledInfo:n("comment_only")},{role:"reader",disabledInfo:n("reader")}]}),[o,t]),g=d&&n()(ht.ZP,{role:d.role,table:gt.e0,type:(0,me.zU)(d)?"explicit_team_permission":"team_permission",upgradeButtonName:"team_permission_item",disabled:u,buttonStyle:{fontSize:12.5,marginRight:0,color:a.mediumTextColor},availableRoleItems:p,onChange:async e=>{const a=c.filter((t=>((0,me.jg)(t)||(0,me.hV)(t))&&(0,pe.xO)(e,t.role)));if(a.length>0){if(!(await(0,U.Bt)()))return}O.createAndCommit({userAction:"TeamMembersPermissionRow.permissionComponent",environment:i,perform:n=>{q.xI({environment:i,teamStore:t,newRole:e,transaction:n,permissionsToClear:a})}})}}),{teamName:h}=(0,r.VK)((()=>({teamName:t.getName()})),[t]),f=n()(X.p,{disabled:!0,store:t,size:ee.Kt});return n()(Tt,{permissionRoleSelectComponent:g,iconComponent:f,name:qt(h)})}function qt(e){return n()(m.FormattedMessage,e?{defaultMessage:"Teamspace members",id:"TeamMembersTopSection.permissionItem.defaultAccessTeamSpaceName",values:{teamName:e}}:{defaultMessage:"Teamspace members",id:"TeamMembersTopSection.permissionItem.defaultAccessWithoutTeamspaceName"})}var jt=i(19889),Yt=i(62512);function $t(e){window.__c={n:"TeamOwnersPermissionRow"};const{teamStore:t,teamOwnerIds:i}=e,a=(0,l.Fg)(),o=(0,r.VK)((()=>t.getName()),[t]),s=(0,r.VK)((()=>t.getTeamOwnerPermission()),[t]),d=(0,r.VK)((()=>S.default.state.currentUserStore),[]),c=(0,r.VK)((()=>d?i.map((e=>b.U6.createChildStore(d,{table:jt.KJ,id:e}))):[]),[d,i]);return n()(Tt,{tooltip:n()(m.FormattedMessage,{id:"TeamOwnersPermissionRow.teamspaceOwnersRowTooltip",defaultMessage:"Teamspace owners have full access to teamspace pages by default"}),permissionRoleSelectComponent:n()(ht.ZP,{role:"editor",table:gt.e0,type:s&&(0,me.LW)(s)?"explicit_team_owner_permission":"team_owner_permission",upgradeButtonName:"team_owner_permission_item",disabled:!0,buttonStyle:{fontSize:12.5,color:a.mediumTextColor,marginRight:0},availableRoleItems:[]}),iconComponent:n()(Yt.n,{teamStore:t,ownerStores:c,isSmall:!0}),name:Qt(o)})}function Qt(e){return n()(m.FormattedMessage,e?{defaultMessage:"Teamspace owners",id:"TeamOwnersPermissionRow.permissionItem.teamspaceOwnersAccessToggleName",values:{teamName:e}}:{defaultMessage:"Teamspace owners",id:"TeamOwnersPermissionRow.permissionItem.teamspaceOwnersAccessToggleNameWithoutTeamName"})}var Jt=i(16184),Xt=i(76464);function ei(e){window.__c={n:"TeamSpacePermissionRow"};const{teamStore:t}=e,i=(0,s.O7)(),a=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),{iconComponent:o,spaceName:l}=(0,r.VK)((()=>{if(!a)return{iconComponent:void 0,spaceName:void 0};const e=(0,te.rn)(i,a);return{iconComponent:n()(X.p,{disabled:!0,store:a,size:ee.Kt}),spaceName:e}}),[a,i]);return n()(Tt,{permissionRoleSelectComponent:n()("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},void 0,n()(ii,{teamStore:t})),iconComponent:o,name:ti(l)})}function ti(e){return n()(m.FormattedMessage,e?{defaultMessage:"Everyone else in {spaceName}",id:"TeamMembersTopSection.permissionItem.defaultAccessSpaceName",values:{spaceName:e}}:{defaultMessage:"Everyone else in the workspace",id:"TeamMembersTopSection.permissionItem.defaultAccessWithoutSpaceName"})}function ii(e){window.__c={n:"TeamPermissionRoleSelect"};const{teamStore:t}=e,i=(0,s.O7)(),a=(0,l.Fg)(),c=(0,r.VK)((()=>t.getSpacePermission()||{type:"space_permission",role:"none"}),[t]),u=z(t),p=(0,r.VK)((()=>{const e=t.getSettingsStore().getValue();if(e)return ye({id:t.id,permissions:t.getPermissionItems(),settings:e,is_default:t.isDefault()})}),[t],{useDeepEqual:!0});if(!p)return null;const g=p.permissionItemRoleOptions.spacePermission;if(1===g.length&&"none"===g[0])return n()(I.Z,{renderTooltip:()=>n()(m.FormattedMessage,{id:"teamPermissionsSettings.privateTeam.noAccessTooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>o.createElement("div",R()({style:{display:"flex",alignItems:"center",maxWidth:170}},e),(0,Jt.Q)({width:14,height:14,fill:a.timelineRed,marginRight:4}),n()("div",{style:{fontSize:12.5,color:a.timelineRed,marginRight:8}},void 0,n()(m.FormattedMessage,{id:"teamPermissionsSettings.privateTeam.noAccessLabel",defaultMessage:"No access • Invite only"})))});{const e=d.MR(g,(e=>-me.xm[e])).map((e=>({role:e})));return n()(ht.ZP,{role:c.role,table:gt.e0,type:"space_permission",upgradeButtonName:"space_permission_item",disabled:u||1===g.length,buttonStyle:{fontSize:12.5,marginRight:0,color:a.mediumTextColor},availableRoleItems:e,onChange:e=>{const a={...c,role:e};O.createAndCommit({userAction:"TeamSpacePermissionRow.permissionComponent",environment:i,perform:e=>{Xt.ep({environment:i,store:t,permissionItems:[a],transaction:e})}})}})}}function ai(e){let{teamStore:t}=e;window.__c={n:"TeamPermissionRowsSection"};const i=(0,r.VK)((()=>t.isDefault()),[t]),a=(0,r.VK)((()=>(0,tt.XO)({membership:t.getMembers()})),[t]),o=(0,r.VK)((()=>{const e=S.default.state.currentSpaceStore;if(!e)return!1;return!(null==e?void 0:e.getDisableTeamGuests())&&(!i&&(0,Me.F$)())}),[i]),s=(0,l.yK)((()=>({container:{marginLeft:15,marginRight:7,paddingBottom:4,paddingTop:4}})),[]);return n()("div",{style:s.container},void 0,n()($t,{teamStore:t,teamOwnerIds:a},"0"),n()(Gt,{teamStore:t},"1"),o&&n()(Kt,{teamStore:t},"2"),!i&&n()(ei,{teamStore:t},"3"))}var ni=i(49469);function oi(e){let{teamStore:t}=e;window.__c={n:"TeamSettingsMembers"};const i=(0,l.yK)((()=>({spacer:{width:"100%",height:20},heading:{marginBottom:10}})),[]);return o.createElement(o.Fragment,null,n()(si,{teamStore:t}),n()("div",{style:i.spacer}),n()(ni.z,{title:n()(m.FormattedMessage,{id:"TeamSettingsMembers.memberSettings.membersTitle",defaultMessage:"Members"}),style:i.heading}),n()(Wt,{teamStore:t}))}function si(e){let{teamStore:t}=e;window.__c={n:"PermissionsCard"};const i=(0,s.O7)(),a=(0,r.VK)((()=>t.getName()),[t]),d=(0,l.yK)((()=>({learnMoreLinkContainer:{marginTop:15,marginBottom:15},teamSettingsListItems:{padding:0,margin:0},accessButton:{border:"none"}})),[]),c=(0,o.useCallback)(((e,n)=>{q.Ju({environment:i,accessLevel:e,isDefault:n,store:t,teamName:a,from:"sidebar_team_modal"})}),[i,t,a]),u=(0,r.VK)((()=>t.getTeamAccessLevel()),[t]),p=[n()(ie._,{teamStore:t,currentAccessLevel:u,onChange:c,style:d.accessButton},"visibility"),n()(ai,{teamStore:t},"permissions")];return o.createElement(o.Fragment,null,n()(ee.Ph,{title:n()(m.FormattedMessage,{id:"TeamSettingsMembers.memberSettings.permissionsTitle",defaultMessage:"Permissions"}),rows:p,itemStyle:d.teamSettingsListItems}),n()(J.Z,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_team_settings_permissions",message:n()(m.FormattedMessage,{id:"teamSettingsPermissions.learnMore",defaultMessage:"Learn about teamspace permissions"}),containerStyle:d.learnMoreLinkContainer}))}var ri=i(74136);function li(e){return o.createElement(ri.Z,e,n()(m.FormattedMessage,{id:"sidebarTeamModalTab.unownedBadge",defaultMessage:"Unowned"}))}function di(e){window.__c={n:"ModalContent"};const{teamStore:t}=e,i=(0,r.VK)((()=>M.Z.state.tab),[]);if(void 0===i)return null;switch(i){case M.a.General:return n()(Ve,{teamStore:t});case M.a.Members:return n()(oi,{teamStore:t});case M.a.Security:return n()(Be,{teamStore:t});default:(0,c.t1)(i)}}function ci(e){window.__c={n:"UserWithAvatar"};const{userId:t,currentSpaceStore:i}=e,{userStore:a,isDefined:o}=(0,r.VK)((()=>{const e=b.U6.createChildStore(i,{table:"notion_user",id:t,spaceId:i.id});return{userStore:e,isDefined:e.isDefined()}}),[i,t]);return o?n()(x.Z,{avatarShouldShowShadow:!0,userStore:a,style:{paddingRight:6,minHeight:34,lineHeight:1.2,fontSize:14,width:"100%"},avatarSize:24}):null}function ui(e){window.__c={n:"PeopleRow"};const{userIds:t,label:i,hasMarginTop:a}=e,s=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]);return s?o.createElement(o.Fragment,null,n()(Z.Z,{hasMarginTop:a},void 0,i),t.map((e=>n()(ci,{userId:e,currentSpaceStore:s},e)))):null}function mi(){window.__c={n:"SidebarTeamModal"};const e=(0,s.O7)(),t=(0,r.VK)((()=>S.default.state.currentSpaceStore),[]),i=(0,r.VK)((()=>S.default.state.currentSpaceViewStore),[]),a=(0,s.Fy)(),o=(0,l.yK)((e=>({modal:{width:a.isMobile?"auto":630,height:a.isMobile?"auto":640,maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 100px)",borderRadius:5,overflow:"auto"},modalWrap:{userSelect:"none",WebkitUserSelect:"none",height:"100%"},innerWrap:{width:"100%",height:"100%",display:"flex",flexDirection:"column",paddingTop:20},header:{display:"flex",alignItems:"center",flexGrow:0,flexShrink:0,margin:"0px 36px"},tabBar:{display:"flex",width:void 0,flexGrow:0,flexShrink:0,margin:"0px 36px 20px"},scroller:{flexGrow:1},contentWrap:{margin:"0px 36px"},lockIcon:{width:16,marginLeft:6,marginBottom:1,fill:e.mediumIconColor},icon:{marginRight:8,fontWeight:u.Z.fontWeight.medium},unownedPill:{marginLeft:6,height:17},unownedPillInner:{display:"flex",height:"100%",alignItems:"center",color:e.regularTextColor,fontWeight:u.Z.fontWeight.regular,textTransform:"unset",fontSize:11}})),[a.isMobile]),{open:g,tab:y,teamStore:b}=(0,r.VK)((()=>{const{open:e,tab:t}=M.Z.state;return{open:e,tab:t,teamStore:M.Z.getTeamStore()}}),[]),T=(0,r.VK)((()=>null==b?void 0:b.getSettings()),[b]),I=(0,v.q)(b);if(!t||!i||!b)return null;const P=[M.a.General,M.a.Members,M.a.Security];return n()(C.Z,{open:g,innerStyle:o.modal,onDismiss:()=>{M.Z.reset()},render:()=>g?n()("div",{className:h.rIj,style:{height:"100%"}},void 0,n()("div",{style:o.modalWrap},void 0,n()(w.Z,{capture:!0,onBackspace:d.yR,onLeft:d.yR,onRight:d.yR,onSelectAll:d.yR,onRedo:d.yR,onUndo:d.yR,onCut:d.yR,onCopy:d.yR,onPaste:d.yR,onKeypress:d.yR,onDelete:d.yR,onTab:d.yR},void 0,n()("div",{style:o.innerWrap},void 0,n()("div",{style:o.header},void 0,n()(X.p,{disabled:!0,store:b,size:24,style:o.icon}),n()(_.Z,{store:b,style:{fontSize:16,fontWeight:u.Z.fontWeight.semibold}}),(0,f.C2)(T)&&n()(E.Z,{iconStyle:o.lockIcon}),(0,f.Hu)({membership:b.getRawMembership()})&&n()("div",{style:{gap:5,display:"flex"}},void 0,n()(li,{desktopStyle:o.unownedPill,mobileStyle:o.unownedPill,innerStyle:o.unownedPillInner})),n()("div",{style:{flexGrow:1}}),n()(A.M,{teamStore:b,onLeavingTeam:()=>M.Z.reset(),from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!1})),n()(F.Z,{tabs:P.map((e=>function(e,t){switch(e){case M.a.General:return n()(m.FormattedMessage,{id:"sidebarTeamModalTab.option.general",defaultMessage:"General"});case M.a.Members:return n()(pi,{teamStore:t});case M.a.Security:return n()(m.FormattedMessage,{id:"sidebarTeamModalTab.option.security",defaultMessage:"Security"});default:(0,c.t1)(e)}}(e,b))),selectedIndex:(0,c.$K)(y)?P.indexOf(y):1,onChange:t=>{g&&(p.rFP(e,{store:b,tab_old_value:y??M.a.General,tab_new_value:P[t]}),M.Z.update((e=>e.open?{...e,tab:P[t]}:e)))},tabStyle:{marginLeft:-8},style:o.tabBar,tabTitleStyle:{marginLeft:8,marginRight:8}}),n()(k.Z,{type:k.Z.OverflowType.Y,style:o.scroller},void 0,n()("div",{style:o.contentWrap},void 0,n()(di,{currentSpaceStore:t,teamStore:b,userIsTeamOwner:I}))))))):null})}function pi(e){let{teamStore:t}=e;window.__c={n:"MembersTabTitle"};const i=(0,y.K)(t),a=(0,l.Fg)();return o.createElement(o.Fragment,null,n()(m.FormattedMessage,{id:"sidebarTeamModalTab.option.members",defaultMessage:"Members"}),n()("span",{},void 0," "),n()("div",{style:{color:a.lightTextColor}},void 0,i))}function gi(e){let{title:t,caption:i,secondCaption:a,on:r,disabled:d,tooltip:c,style:u,onChange:m,shouldTriggerUpsell:p}=e;window.__c={n:"SettingToggle"};const h=(0,s.O7)(),f=(0,l.yK)((()=>({root:{display:"flex",alignItems:"center",width:"100%",marginTop:0,marginBottom:0,cursor:p?"pointer":void 0,...u},title:{fontSize:14,marginRight:8,flexGrow:1},switcherWrap:{marginTop:5,marginRight:18}})),[u,p]);return o.createElement(o.Fragment,null,n()("div",{style:f.root,onClick:()=>{if(p)return g.y(h,{from:"team_security_settings",for:"business",dontOpenPlansOnCancel:!0})}},void 0,n()("div",{style:f.title},void 0,t,i&&n()(P.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"95%"}},void 0,i),a&&n()(P.Z,{isSmall:!0},void 0,a)),n()("div",{style:f.switcherWrap},void 0,n()(I.Z,{disableTooltip:!c,renderTooltip:()=>c,render:e=>o.createElement("div",e,n()(T.Z,{on:r,disabled:d,onClick:m}))}))))}},33985:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Uy});var a=i(23174),n=i.n(a),o=i(10434),s=i.n(o),r=(i(21703),i(67294)),l=i(83355),d=i(16184),c=i(45238);const u=(0,c.I)("magnifyingGlass",{viewBox:"0 0 16 16",svg:n()("path",{d:"M1.321 6.28c0 .751.142 1.458.424 2.118a5.52 5.52 0 001.176 1.737 5.51 5.51 0 001.736 1.175 5.326 5.326 0 002.12.424c.592 0 1.157-.09 1.695-.273a5.639 5.639 0 001.476-.752l3.364 3.37a.8.8 0 00.266.171c.1.041.205.062.315.062a.766.766 0 00.683-.397.83.83 0 00.041-.718.715.715 0 00-.164-.253L11.11 9.581c.351-.456.625-.964.82-1.524.201-.56.301-1.153.301-1.778 0-.752-.14-1.456-.423-2.112a5.497 5.497 0 00-2.92-2.919A5.284 5.284 0 006.777.824c-.752 0-1.458.141-2.119.424a5.52 5.52 0 00-2.912 2.919 5.284 5.284 0 00-.424 2.112zm1.17 0A4.204 4.204 0 013.74 3.25a4.286 4.286 0 011.367-.923 4.179 4.179 0 011.668-.335 4.13 4.13 0 011.662.335 4.19 4.19 0 011.367.923c.392.392.7.848.922 1.367a4.13 4.13 0 01.335 1.661c0 .593-.111 1.149-.335 1.668a4.357 4.357 0 01-2.29 2.283 4.13 4.13 0 01-1.66.335 4.179 4.179 0 01-1.669-.335 4.357 4.357 0 01-2.29-2.283A4.254 4.254 0 012.49 6.28zM6.79 9.15c.114 0 .187-.066.219-.198.068-.369.137-.683.205-.943.068-.26.153-.474.253-.643.1-.173.23-.314.39-.424a2.01 2.01 0 01.628-.26 8.31 8.31 0 01.964-.184c.137-.018.205-.091.205-.219 0-.127-.068-.205-.205-.232a8.214 8.214 0 01-.97-.178 2.217 2.217 0 01-.643-.266 1.355 1.355 0 01-.403-.417 2.49 2.49 0 01-.246-.643 10.063 10.063 0 01-.178-.93c-.023-.136-.096-.205-.219-.205s-.2.066-.232.198c-.073.374-.144.69-.212.95A2.49 2.49 0 016.1 5.2c-.1.169-.233.308-.397.417a2.14 2.14 0 01-.622.26c-.255.064-.574.12-.957.17-.141.028-.212.106-.212.233 0 .123.07.196.212.22.479.05.864.12 1.155.211.292.087.518.216.677.39.164.173.287.41.37.71.086.297.163.675.232 1.135.009.06.034.11.075.15a.228.228 0 00.157.055z"})});var m=i(72126),p=i(4615),g=i(3791),h=i(47425),f=i(82990),v=i(5366),y=i(48298),S=i(7512),b=i(50906),M=i(47307),w=i(91376),C=i(75018),_=i(29974),k=i(71119),T=i(77080),I=i(54642);async function P(e,t){if(T.default.checkGate("enable_managed_users_disabled_profile_edits")){const i=await I.getEmailDomainSettings(e,{});"success"===i.type&&t.setState({...t.state,emailDomainSettings:i.data})}try{const i=await(0,k.pu)(e);t.setState({...t.state,accountSettings:{...i,error:void 0}})}catch(i){t.setState({...t.state,accountSettings:{...t.state.accountSettings,error:i}})}}var x=i(97627),Z=i(21325),F=i(5220),A=i(97880),E=i(95697),B=i(80444),R=i(74716),D=i(49085);class L extends D.default{getInitialState(){return{loadingState:"uninitialized"}}}const N=new L;async function O(e){let{environment:t,messageStoreEmitValue:i}=e;if(!function(e){const t=N.state;if("loading"===t.loadingState)return!1;if(("uninitialized"===t.loadingState?void 0:t.messageStoreEmitValue)===e)return!1;return!0}(i))return!1;const{currentSpaceStore:a,currentUserStore:n}=B.default.state;if(!a||!n)return!1;"uninitialized"===N.state.loadingState&&N.setState({loadingState:"loading"});const o=await async function(e){let{environment:t,currentSpaceStore:i,currentUserStore:a}=e;const n=i.getModel();if(!n)return;if((0,F.H)({userId:a.id,spaceModel:n})){return await(0,E.sj)({environment:t,spaceStore:i,includeArchived:!0,currentUserId:a.id,minRoleOnTeamStores:"reader"})}return await(0,E.qX)({environment:t,spaceStore:i,includeArchived:!0,currentUserId:a.id})}({environment:t,currentSpaceStore:a,currentUserStore:n});if(!(0,A.$K)(o))return N.setState({loadingState:"uninitialized"}),!1;const{archivedTeams:s,unarchivedTeams:r}=(0,E.tV)(o);return N.setState({loadingState:"loaded",archivedTeamIds:s.map((e=>e.id)),unarchivedTeamIds:r.map((e=>e.id)),messageStoreEmitValue:i}),!0}var V=i(39699),U=i(37181),W=i(28020),z=i(68821),K=i(43250),H=i(4708),G=i(8989),q=i(33929),j=i(17652),Y=i(18514),$=i(41168),Q=i(53877);const J=["page_viewed","page_created","page_deleted","page_restored","page_exported","page_moved","page_permission_updated","page_shared_to_web","file_uploaded","file_downloaded","private_content_transferred","automation_created","automation_edited","member_invited","member_joined","member_role_updated","member_removed","guest_removed","invite_link_toggled","workspace_name_changed","invite_link_reset","page_access_requests_toggled","public_page_sharing_toggled","workspace_sidebar_editing_toggled","disable_team_guests_toggled","disable_guests_toggled","pages_to_other_workspaces_toggled","export_toggled","workspace_exported","workspace_icon_changed","workspace_domain_changed","workspace_integration_restriction_changed","allowed_email_domain_added","allowed_email_domain_removed","public_page_cleared","public_page_set","scim_token_generated","scim_token_revoked","idp_metadata_url_updated","idp_metadata_xml_updated","idp_metadata_xml_removed","saml_toggled","saml_enforce_toggled","automatic_account_creation_toggled","workspace_creation_set_for_email_domain","member_added_to_group","member_removed_from_group","space_transfer_status_changed","space_claim_and_upgrade_status_changed","space_claim_deletion_status_changed","membership_requests_toggled","external_membership_requests_toggled","membership_request_resolved","guest_membership_requests_toggled","audit_log_exported","user_analytics_exported","content_analytics_exported","admin_content_search_queried","workspace_analytics_toggled","login","logout","mfa_sms_toggled","mfa_totp_toggled","mfa_backup_code_toggled","password_set","password_cleared","password_changed","email_changed","preferred_name_changed","picture_changed","user_deleted","allowed_support_access","revoked_support_access","team_created","team_archived","team_restored","team_privacy_type_changed","team_default_toggled","team_public_page_sharing_toggled","team_export_toggled","team_sidebar_editing_toggled","team_name_changed","team_description_changed","team_icon_changed","team_creation_admins_setting_toggled","team_guests_toggled","member_added_to_team","group_added_to_team","member_removed_from_team","group_removed_from_team","member_left_team","member_joined_team","member_team_role_updated","team_user_permission_updated","team_group_permission_updated","team_member_default_permission_updated","team_guest_default_permission_updated","team_workspace_default_permission_updated","team_invite_access_changed","teams_enabled_for_space","ai_admin_legal_acceptance_toggled","space_consolidation_started","space_consolidation_completed","space_consolidation_failed"],X=["page_edited","page.discussion.comment.created","page.discussion.comment.updated","page.discussion.comment.deleted","page.permanently_deleted","page.properties_edited","integration.created","integration.deleted","workspace.settings.custom_session_duration_updated","workspace.settings.external_workspace_access_updated","workspace.settings.prevent_profile_edits_updated","workspace.settings.prevent_granting_support_access_updated","admin_content_search_exported","admin_managed_users_log_out_all","admin_managed_users_log_out_one","admin_managed_users_password_cleared","admin_managed_users_password_cleared_one","user_suspended","user_unsuspended",...J],ee={page_edited:"page","page.properties_edited":"page",page_viewed:"page",page_created:"page",page_deleted:"page","page.permanently_deleted":"page",page_restored:"page",page_exported:"page",page_moved:"page",page_permission_updated:"page",page_shared_to_web:"page",file_uploaded:"page",file_downloaded:"page",private_content_transferred:"page",automation_created:"page",automation_edited:"page","page.discussion.comment.created":"page","page.discussion.comment.updated":"page","page.discussion.comment.deleted":"page",member_invited:"space",member_joined:"space",member_role_updated:"space",member_removed:"space",guest_removed:"space",workspace_name_changed:"space",workspace_icon_changed:"space",workspace_domain_changed:"space",invite_link_toggled:"space",invite_link_reset:"space",page_access_requests_toggled:"space",public_page_sharing_toggled:"space",workspace_sidebar_editing_toggled:"space",disable_team_guests_toggled:"space",disable_guests_toggled:"space",pages_to_other_workspaces_toggled:"space",export_toggled:"space",workspace_exported:"space",workspace_integration_restriction_changed:"space",allowed_email_domain_added:"space",allowed_email_domain_removed:"space",public_page_cleared:"space",public_page_set:"space",scim_token_generated:"space",scim_token_revoked:"space",idp_metadata_url_updated:"space",idp_metadata_xml_updated:"space",idp_metadata_xml_removed:"space",saml_toggled:"space",saml_enforce_toggled:"space",automatic_account_creation_toggled:"space",workspace_creation_set_for_email_domain:"space","workspace.settings.custom_session_duration_updated":"space","workspace.settings.external_workspace_access_updated":"space","workspace.settings.prevent_profile_edits_updated":"space","workspace.settings.prevent_granting_support_access_updated":"space",member_added_to_group:"space",member_removed_from_group:"space","integration.created":"space","integration.deleted":"space",space_transfer_status_changed:"space",space_claim_and_upgrade_status_changed:"space",space_claim_deletion_status_changed:"space",membership_requests_toggled:"space",external_membership_requests_toggled:"space",membership_request_resolved:"space",guest_membership_requests_toggled:"space",audit_log_exported:"space",user_analytics_exported:"space",content_analytics_exported:"space",workspace_analytics_toggled:"space",ai_admin_legal_acceptance_toggled:"space",space_consolidation_started:"space",space_consolidation_completed:"space",space_consolidation_failed:"space",admin_content_search_queried:"space",admin_content_search_exported:"space",admin_managed_users_log_out_all:"space",admin_managed_users_log_out_one:"space",admin_managed_users_password_cleared:"space",admin_managed_users_password_cleared_one:"space",login:"account",logout:"account",password_set:"account",password_cleared:"account",password_changed:"account",mfa_sms_toggled:"account",mfa_totp_toggled:"account",mfa_backup_code_toggled:"account",email_changed:"account",preferred_name_changed:"account",picture_changed:"account",user_deleted:"account",allowed_support_access:"account",revoked_support_access:"account",user_suspended:"account",user_unsuspended:"account",member_added_to_team:"team",member_removed_from_team:"team",group_added_to_team:"team",group_removed_from_team:"team",member_joined_team:"team",member_left_team:"team",team_created:"team",team_archived:"team",team_restored:"team",team_name_changed:"team",team_description_changed:"team",team_icon_changed:"team",team_privacy_type_changed:"team",team_default_toggled:"team",team_creation_admins_setting_toggled:"team",team_member_default_permission_updated:"team",team_workspace_default_permission_updated:"team",team_guest_default_permission_updated:"team",member_team_role_updated:"team",team_user_permission_updated:"team",team_group_permission_updated:"team",team_invite_access_changed:"team",team_guests_toggled:"team",team_export_toggled:"team",team_public_page_sharing_toggled:"team",team_sidebar_editing_toggled:"team",teams_enabled_for_space:"team"},te=m.vM((0,A.Yd)(ee),(e=>ee[e]));function ie(e){switch(e.actionName){case"page.properties_edited":case"page_edited":case"page_viewed":case"page_created":case"page_deleted":case"page.permanently_deleted":case"page_restored":case"page_exported":case"page_moved":case"page_permission_updated":case"page_shared_to_web":case"file_uploaded":case"file_downloaded":case"private_content_transferred":case"automation_created":case"automation_edited":case"page.discussion.comment.created":case"page.discussion.comment.deleted":case"page.discussion.comment.updated":return e.target.page;case"member_invited":case"member_joined":case"member_role_updated":case"member_removed":case"guest_removed":case"workspace_name_changed":case"workspace_icon_changed":case"workspace_domain_changed":case"allowed_email_domain_added":case"allowed_email_domain_removed":case"workspace_exported":case"audit_log_exported":case"user_analytics_exported":case"content_analytics_exported":case"workspace_integration_restriction_changed":case"public_page_cleared":case"public_page_set":case"scim_token_generated":case"scim_token_revoked":case"saml_toggled":case"saml_enforce_toggled":case"automatic_account_creation_toggled":case"workspace_creation_set_for_email_domain":case"workspace.settings.external_workspace_access_updated":case"workspace.settings.custom_session_duration_updated":case"workspace.settings.prevent_profile_edits_updated":case"workspace.settings.prevent_granting_support_access_updated":case"login":case"logout":case"mfa_sms_toggled":case"mfa_totp_toggled":case"mfa_backup_code_toggled":case"password_set":case"password_cleared":case"password_changed":case"email_changed":case"preferred_name_changed":case"picture_changed":case"user_deleted":case"allowed_support_access":case"revoked_support_access":case"user_suspended":case"user_unsuspended":case"invite_link_toggled":case"invite_link_reset":case"page_access_requests_toggled":case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_team_guests_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"workspace_analytics_toggled":case"export_toggled":case"idp_metadata_url_updated":case"idp_metadata_xml_updated":case"idp_metadata_xml_removed":case"member_added_to_group":case"member_removed_from_group":case"space_transfer_status_changed":case"space_claim_and_upgrade_status_changed":case"space_claim_deletion_status_changed":case"membership_requests_toggled":case"external_membership_requests_toggled":case"membership_request_resolved":case"guest_membership_requests_toggled":case"team_created":case"team_archived":case"team_restored":case"team_default_toggled":case"team_public_page_sharing_toggled":case"team_export_toggled":case"team_sidebar_editing_toggled":case"team_name_changed":case"team_description_changed":case"team_icon_changed":case"team_creation_admins_setting_toggled":case"team_guests_toggled":case"member_added_to_team":case"group_added_to_team":case"member_removed_from_team":case"group_removed_from_team":case"member_joined_team":case"member_left_team":case"member_team_role_updated":case"team_user_permission_updated":case"team_group_permission_updated":case"team_member_default_permission_updated":case"team_guest_default_permission_updated":case"team_workspace_default_permission_updated":case"team_privacy_type_changed":case"team_invite_access_changed":case"teams_enabled_for_space":case"admin_content_search_queried":case"admin_content_search_exported":case"admin_managed_users_log_out_all":case"admin_managed_users_log_out_one":case"admin_managed_users_password_cleared":case"admin_managed_users_password_cleared_one":case"ai_admin_legal_acceptance_toggled":case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":case"integration.created":case"integration.deleted":return;default:(0,A.t1)(e)}}let ae=function(e){return e.CreatedNewest="CreatedNewest",e.CreatedOldest="CreatedOldest",e}({});var ne=i(30546);class oe extends D.default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:ae.CreatedNewest}}}const se=new oe,re=e=>{const{timeRange:t,actors:i,actions:a,sortOrder:n}=e,o=new URLSearchParams;return t.starting&&o.append("starting",`${Q.OQ.toUnixMs(t.starting)}`),t.ending&&o.append("ending",`${Q.OQ.toUnixMs(t.ending)}`),(null==i?void 0:i.length)>0&&o.append("actors",i.map(ne.eW).join(",")),(null==a?void 0:a.length)>0&&o.append("actions",a.join(",")),o.append("sort",`${n||ae.CreatedNewest}`),o.toString()};class le extends D.default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,i){if(i<=1||this.state.spaceId!==e)return;const a=re(t);if(this.state.filterStr!==a)return;const n=this.state.cachedResponses[i-1];return"success"===n.status?null==n?void 0:n.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,i){this.updateResultHelper(e,t,{...i,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,i){const a=re(t);1!==t.pageNum&&this.state.spaceId===e&&this.state.filterStr===a?this.setState({spaceId:e,filterStr:a,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...i}}}):this.setState({spaceId:e,filterStr:a,cachedResponses:{[t.pageNum||1]:{...i}}})}}const de=new le;var ce=i(67940);class ue extends D.default{getInitialState(){return{status:"unconfigured",emailDomains:[],domainVerifications:[],spaces:[],createAccount:!1,useMetadataUrl:!0}}}const me=ue;var pe=i(53680);class ge extends D.default{getInitialState(){return{displaySummary:!0,openDropdown:!1,query:""}}}const he=new ge;let fe=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class ve extends D.default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==fe.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const ye=new ve;class Se extends D.default{getInitialState(){return{name:"",domain:"",domainState:"current-space",emailDomains:[],publicHomePage:void 0}}getValueForSpace(e){const t=e.getPublicContentDomain(),i=e.getPublicHomePage();if(e.isDefined())return{name:e.getName()||"",domain:t||"",emailDomains:e.getEmailDomains(),domainState:"current-space",publicHomePage:i}}}const be=Se;class Me extends D.default{getInitialState(){return{emailDomains:[],spaceCreation:"admins_only",settings:{}}}async updateValueForSpace(e){const{environment:t,spaceId:i,store:a}=e,n=await I.getEmailDomainsForSpace(t,{spaceId:i});if("failed"===n.type)return void M.showError(n);const{data:o}=n,s=Object.keys(o);return 0!==s.length?a.setState({emailDomains:s,spaceCreation:o[s[0]].spaceCreationEnum,settings:o[s[0]].settings}):a.setState(this.getInitialState()),a.state}}const we=Me;class Ce extends D.default{getInitialState(){return{uploadingProfilePhoto:!1,givenName:"",familyName:"",name:"",startDayOfWeek:(0,Q.aN)(),accountSettings:{hasPassword:!1,canConfigurePassword:!1,isSamlEnforced:!1,mfaStatus:"loading",numMfaSettings:0,regenerateBackupCodes:!1,error:void 0}}}getValueForUser(e,t,i){if(e.isDefined()){const a=e.getFullName(i),n=e.getProfilePhoto(),o=t.getSettings();return{...this.state,uploadingProfilePhoto:!1,profilePhoto:n,name:a||"",startDayOfWeek:void 0===(null==o?void 0:o.start_day_of_week)?(0,Q.aN)():null==o?void 0:o.start_day_of_week}}}}const _e=Ce;var ke=i(92083),Te=i(78291),Ie=i(98905),Pe=i(85703),xe=i(480),Ze=i(86628),Fe=i(24405),Ae=i(88632),Ee=i(64369),Be=i(27386),Re=i(23189),De=i(61652),Le=i(63296);function Ne(e){let{spaceId:t,filters:i,disabled:a}=e;window.__c={n:"AdminContentSearchExportButton"};const[o,s]=(0,r.useState)(!1),l=(0,xe.O7)(),d=a||o,c=(0,Fe.yK)((e=>({button:{opacity:d?.5:1}})),[d]);return n()(Le.Z,{style:c.button,disabled:d,onClick:async function(){s(!0),b.j_p(l,{filters:i}),await De.gJ(l,{spaceId:t,filters:i}),s(!1)}},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.export",defaultMessage:"Export results"}))}var Oe=i(98165),Ve=i(40394),Ue=i(68785),We=i(71291),ze=i(44678),Ke=i(44495),He=i(42922),Ge=i(89728);function qe(e){window.__c={n:"AdminContentSearchAcknowledgement"};const t=(0,xe.O7)(),i=(0,Fe.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:36,height:36,color:e.lightTextColor,fill:"currentColor"},disclaimerTitle:{margin:"12px auto",fontWeight:f.Z.fontWeight.medium,fontSize:16},disclaimer:{fontWeight:f.Z.fontWeight.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:432,margin:"0 auto 16px"},acknowledgeButton:{width:195,margin:"8px auto 0"},learnMoreButton:{width:195,margin:"8px auto 0",justifyContent:"center",color:e.lightTextColor},learnMoreButtonIcon:{width:12,height:12,marginRight:4}})),[]),a=(0,r.useCallback)((()=>{b.vN5(t),x.NY(t)}),[t]);return n()("div",{style:i.container},void 0,(0,d.Q)(i.headerIcon),n()("h1",{style:i.disclaimerTitle},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})),n()("p",{style:i.disclaimer},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don't have access to, including the private pages of other workspace members. Consult with your organization's legal department on how to use this feature. Actions taken here will be recorded in the audit log."})),n()(He.Z,{style:i.acknowledgeButton,onClick:a},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})),n()(Ge.Z,{style:i.learnMoreButton,onClick:()=>{const e=(0,Y.UY)("adminContentSearch");C.navigateToExternalURL({environment:t,url:e})}},void 0,(0,Ke.D)(i.learnMoreButtonIcon),n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})))}var je=i(80750),Ye=i(95477);function $e(e){let{runNewSearch:t,error:i}=e;window.__c={n:"AdminContentSearchError"};const a=(0,Fe.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:f.Z.fontWeight.medium,fontSize:16},description:{fontWeight:f.Z.fontWeight.regular,fontSize:14,lineHeight:1.3,color:e.lightTextColor,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:f.Z.baseFontFamily.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return n()("div",{style:a.container},void 0,(0,je.l)(a.headerIcon),n()("h1",{style:a.title},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})),n()("p",{style:a.description},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})),null,n()(Le.Z,{style:a.errorButton,onClick:()=>t(!0)},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})))}var Qe=i(80721),Je=i(26774),Xe=i(87279),et=i(29798),tt=i(33338),it=i(52275),at=i(60458),nt=i(78140),ot=i(32163),st=i(53437),rt=i(72495),lt=i(91642);function dt(e){let{selectedAudience:t,setSelectedAudience:i,onMenuClose:a,setPillTitleToActiveSelection:o}=e;window.__c={n:"AudienceFilter"};const l=(0,Ze.qz)(void 0,et.Z),d=(0,Fe.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8}})),[]),[c,u]=(0,r.useState)(!1),m=["private","shared_internally","shared_externally","shared_to_web"];function p(){u(!1),a&&a()}function g(){i&&i([])}function h(e){const a=t.includes(e)?[...t.filter((t=>t!==e))]:[...t,e];i&&i(a)}const f=n()(tt.Z,{on:t.length>0,icon:(0,Je.O)(d.icon),title:o&&t[0]?ct(t[0]):n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"}),onClick:()=>u(!0),disabled:!i,hideChevron:!i});return i?n()(lt.Z,{},void 0,n()(st.ZP,{popupType:st.ZP.PopupType.Popup,placementToOrigin:st.ZP.Placement.Bottom,alignmentToOrigin:st.ZP.Alignment.Start,open:c,render:function(){const e={key:"teamOptions",items:m.map((e=>({key:e,action:()=>h(e),render:i=>r.createElement(it.Z,s()({},i,{icon:n()(at.Z,{checked:t.includes(e),onClick:()=>h(e),size:16}),focused:!1,title:ct(e),caption:ut(e),shouldWrapCaption:!0}))}))),render:e=>r.createElement(rt.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{style:d.container},void 0,n()(nt.Z,{menuType:Xe.og.Popup,header:null,maxHeight:250,width:300},void 0,n()(ot.Z,{type:ot.i.Vertical,store:l,initialFocus:0,sections:[e]})),n()(rt.Z,{topBorder:!0,style:d.footer},void 0,n()(Ge.Z,{onClick:g},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.clearButton",defaultMessage:"Clear"})),n()(He.Z,{onClick:p},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.doneButton",defaultMessage:"Done"}))))},onDismiss:p,keepFocus:!0,origin:f,preventScaleTransition:!0})):f}function ct(e){switch(e){case"private":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,A.t1)(e)}}function ut(e){switch(e){case"private":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,A.t1)(e)}}function mt(e){let{filters:t,setFilters:i}=e;window.__c={n:"AdminContentSearchSuggestions"};const a=(0,Fe.yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:f.Z.fontWeight.medium,fontSize:16},description:{fontWeight:f.Z.fontWeight.regular,fontSize:14,color:e.lightTextColor,textAlign:"center",width:386,margin:"0 auto 16px"},suggestion:{position:"relative",height:38,width:440,margin:"12px auto 0",justifyContent:"center",color:e.darkTextColor,boxShadow:e.borderBoxShadow},filterContainer:{margin:"0 8px",display:"flex",alignItems:"center",justifyContent:"center"},arrowIconContainer:{position:"absolute",right:12,transform:"rotate(180deg)"},arrowIcon:{width:18,height:18,opacity:.5,color:e.lightTextColor,fill:"currentColor"}})),[]);return n()("div",{style:a.container},void 0,n()("h1",{style:a.title},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})),n()("p",{style:a.description},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})),n()(Ge.Z,{style:a.suggestion,onClick:function(){i({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})}},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>n()("div",{style:a.filterContainer},void 0,n()(dt,{setPillTitleToActiveSelection:!0,selectedAudience:["shared_externally"]}))}}),n()("div",{style:a.arrowIconContainer},void 0,(0,Qe.W)(a.arrowIcon))),n()(Ge.Z,{style:a.suggestion,onClick:function(){i({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})}},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>n()("div",{style:a.filterContainer},void 0,n()(dt,{setPillTitleToActiveSelection:!0,selectedAudience:["shared_to_web"]}))}}),n()("div",{style:a.arrowIconContainer},void 0,(0,Qe.W)(a.arrowIcon))))}var pt=i(26825),gt=i(27006),ht=i(29369),ft=i(57559),vt=i(69219);function yt(e){let{blockStore:t}=e;window.__c={n:"AudienceCell"};const[i,a]=(0,r.useState)();(0,r.useEffect)((()=>{!async function(){const{currentSpaceStore:e}=B.default.state,i=Oe.fJ(t),n=pt.Wo(i),o=null==e?void 0:e.getPermissionItems().filter(gt.jg),s=await pt.uq({permissionItems:n,hasTeamLevelGuests:function(t){return!!e&&ft.zX.createChildStore(e,{table:ht.e0,id:t}).getMembers().some((e=>"team_level_guest"===e.type))},spaceUserPermissions:o});a(s)}()}),[t]);const o=(0,r.useMemo)((()=>{if(i)return St(i)}),[i]);return n()(vt.i,{useThinTitle:!0,title:o})}function St(e){switch(e){case"private":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"});case"shared_internally":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"});case"shared_externally":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"});case"shared_to_web":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"});default:(0,A.t1)(e)}}var bt=i(36409),Mt=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(Mt||{});function wt(e){let{blockStore:t,teamStore:i}=e;window.__c={n:"LocationCell"};const a=(0,Fe.yK)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),o=(0,Ze.VK)((()=>{const e=(0,Oe.fJ)(t),i=(0,pt.Wo)(e),a=i.filter((e=>!(0,gt.Le)(e)));return 1===a.length&&(0,gt.jg)(a[0])?Mt.Private:i.length>0?Mt.Shared:Mt.Hidden}),[t]);return i?n()(bt.r,{useThinTitle:!0,teamStore:i}):function(){switch(o){case Mt.Shared:return n()(vt.i,{useThinTitle:!0,icon:(0,Je.O)(a.icon),title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case Mt.Hidden:case Mt.Private:return n()(vt.i,{useThinTitle:!0,icon:(0,d.Q)(a.icon),title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}var Ct=i(15145),_t=i(56666),kt=i(27714),Tt=i(62397),It=i(14871),Pt=i(84210),xt=i(77907),Zt=i(61766),Ft=i(55899),At=i(97238),Et=i(8675),Bt=i(31945),Rt=i(73063);function Dt(e){let{blockStore:t}=e;window.__c={n:"PageCellActions"};const i=(0,xe.O7)(),a=(0,Ze.qz)(void 0,Zt.Z),o=(0,Ze.qz)(void 0,Et.Z),l=(0,Ze.qz)(void 0,Ft.ZP),d=(0,Fe.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"}})),[]),[c,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{o.setState({...o.state,privatePageStore:t,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[t,o]);const m={key:"actions",render:e=>r.createElement(rt.Z,e),items:[{key:"change-permissions",render:e=>r.createElement(it.Z,s()({},e,{icon:(0,Tt.I)(d.changePermissionsIcon),title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.changePermissions",defaultMessage:"Change permissions"})})),action:function(){u(!0)}},{key:"copy-link",render:e=>r.createElement(it.Z,s()({},e,{icon:(0,kt.N)(d.copyLinkIcon),title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})})),action:async function(){const e=(0,Pt.ZP)({store:t,pageVisitSource:Ct.tY.CopyLink});await It.RD({environment:i,stringValue:e,copiedMessage:It.tq.copiedLinkToClipboard}),a.setState({open:!1})}}]};return n()(Bt.ZP,{popupType:st.kQ.Popup,alignmentToOrigin:st.ZP.Alignment.Center,placementToOrigin:st.ZP.Placement.Right,style:{width:c?450:248},render:()=>c?n()(xt.LazyShareMenuContainer,{store:t,sudoModeStore:o,inviteTargetsStore:l,location:"admin_content_search"}):n()(nt.Z,{menuType:Xe.og.Popup,width:248},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:[m]})),onClose:()=>{u(!1),At.ZP.reset()},buttonPopupStore:a,renderOrigin:e=>r.createElement(Rt.Z,s()({icon:_t.o},e))})}i(57658);var Lt=i(53695),Nt=i(26388),Ot=i(77420),Vt=i(36596),Ut=i(28992),Wt=i(70301);function zt(e){let{botId:t}=e;window.__c={n:"BotMenuItem"};const i=(0,v.useIntl)(),a=(0,xe.O7)(),o=(0,Ze.VK)((()=>ft.t1.createUniqueRootStore(a,{table:Ot.cZ,id:t})),[t,a]),s=(0,Ze.VK)((()=>o.getDisplayName(i)),[o,i]),r=(0,Ze.VK)((()=>o.getParentStore()),[o]),l=(0,Ze.VK)((()=>{if(r){if(r instanceof ft.U6)return r.getDisplayName(i);if(r instanceof ft.H2)return r.getName()}}),[r,i]),d=(0,Fe.yK)((()=>({desktopIconStyle:{alignSelf:"center",width:24,fontSize:18}})),[]);return s?n()(Ut.Z,{desktopIconStyle:d.desktopIconStyle,icon:n()(Wt.Z,{botStore:o,size:24}),title:s,caption:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.botMenuItem.createdBy",defaultMessage:"Created by {creatorName}",values:{creatorName:l}})}):n()(Kt,{})}function Kt(){window.__c={n:"ShimmerLoader"};const e=(0,Fe.yK)((e=>({container:{userSelect:"none",minHeight:45,fontSize:14,padding:"4px 8px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},textContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:6},icon:{flexGrow:0,flexShrink:0,width:24,height:24,borderRadius:"0.25em",marginRight:4,marginTop:1},title:{flexGrow:0,flexShrink:0,width:80,height:14,borderRadius:"0.25em",marginLeft:4},byline:{flexGrow:0,flexShrink:0,width:150,height:10,borderRadius:"0.25em",marginLeft:4}})),[]);return n()("div",{style:e.container},void 0,n()(Vt.Z,{style:e.icon}),n()("div",{style:e.textContainer},void 0,n()(Vt.Z,{emphasized:!1,style:e.title}),n()(Vt.Z,{emphasized:!1,style:e.byline})))}var Ht=i(31278);const Gt=(0,v.defineMessages)({editor:{id:"adminContentSearchTab.sharedWith.permissions.editor",defaultMessage:"Full access"},readAndWrite:{id:"adminContentSearchTab.sharedWith.permissions.readAndWrite",defaultMessage:"Can edit"},commentOnly:{id:"adminContentSearchTab.sharedWith.permissions.commentOnly",defaultMessage:"Can comment"},reader:{id:"adminContentSearchTab.sharedWith.permissions.reader",defaultMessage:"Can view"},none:{id:"adminContentSearchTab.sharedWith.permissions.none",defaultMessage:"None"}});function qt(e,t){switch(t){case"editor":return e.formatMessage(Gt.editor);case"read_and_write":return e.formatMessage(Gt.readAndWrite);case"comment_only":return e.formatMessage(Gt.commentOnly);case"reader":return e.formatMessage(Gt.reader);case"none":return e.formatMessage(Gt.none)}}function jt(e){let{name:t,icon:i,role:a}=e;window.__c={n:"GroupMenuItem"};const o=(0,v.useIntl)(),s=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),r=qt(o,a),l=(0,Fe.yK)((e=>({defaultIcon:{height:18,width:18,color:e.lightTextColor,fill:"currentColor"},defaultGroupIcon:{height:20,width:20,color:e.lightTextColor,fill:"currentColor"}})),[]);return n()(Ut.Z,{desktopIconStyle:{alignSelf:"center",width:24,fontSize:18},icon:n()(Ht.Z,{disabled:!0,icon:i&&s?{pointer:s.pointer,icon:i}:void 0,size:20,isEmptyPage:!1,title:t,defaultIcon:(0,Je.O)(l.defaultGroupIcon)}),title:t||n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.untitledPage",defaultMessage:"Untitled{maybeRoleString}",values:{maybeRoleString:r?` · ${r}`:""}}),caption:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.group",defaultMessage:"Group{maybeRoleString}",values:{maybeRoleString:r?` · ${r}`:""}})})}var Yt=i(93686);function $t(e){let{permissionItem:t}=e;window.__c={n:"SpaceMenuItem"};const i=(0,v.useIntl)(),a=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),o=(0,Ze.VK)((()=>{var e;return null===(e=B.default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]),s=null==t?void 0:t.role,r=(0,gt.iC)(s)?qt(i,s):void 0;return n()(Ut.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:a?n()(Yt.p,{disabled:!0,store:a,size:24}):void 0,title:o,caption:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.spaceMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:r?` · ${r}`:""}})})}var Qt=i(91192);function Jt(e){let{teamId:t,role:i,onlyOwners:a}=e;window.__c={n:"TeamMenuItem"};const o=(0,xe.O7)(),s=(0,v.useIntl)(),r=(0,Ze.VK)((()=>new ft.zX(o,{table:ht.e0,id:t})),[o,t]),l=qt(s,i),d=(0,Ze.VK)((()=>r.getName()),[r]),c=d||n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.unknownTeamName",defaultMessage:"Private teamspace"});return n()(Ut.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:d?n()(Yt.p,{disabled:!0,store:r,size:24}):(0,Qt.x)(),title:c,caption:n()(v.FormattedMessage,a?{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamOwners",defaultMessage:"Owners{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}}:{id:"adminContentSearchTab.pagesTable.sharedWithCell.teamMembers",defaultMessage:"Members{maybeRoleString}",values:{maybeRoleString:l?` · ${l}`:""}})})}var Xt=i(64684),ei=i(67669);var ti=i(19889),ii=i(7928),ai=i(45653);function ni(e){let{userId:t,role:i,isGuest:a}=e;window.__c={n:"UserMenuItem"};const o=(0,v.useIntl)(),s=(0,xe.O7)(),{userStore:r,userName:l}=(0,Ze.VK)((()=>{const e=new ft.U6(s,{table:ti.KJ,id:t}),i=(0,ii.Nz)(o,e.getModel());return{userStore:e,userName:i}}),[s,t,o]),d=qt(o,i);return n()(Ut.Z,{desktopIconStyle:{alignSelf:"center",width:24},icon:n()(ai.Z,{userStore:r,size:24}),title:l,caption:n()(v.FormattedMessage,a?{id:"adminContentSearchTab.pagesTable.sharedWithCell.guest",defaultMessage:"Guest{maybeRoleString}",values:{maybeRoleString:d?` · ${d}`:""}}:{id:"adminContentSearchTab.pagesTable.sharedWithCell.member",defaultMessage:"Member{maybeRoleString}",values:{maybeRoleString:d?` · ${d}`:""}})})}const oi=(0,v.defineMessages)({sharedWithWorkspaceMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWorkspaceMembers",defaultMessage:"Workspace members"},sharedWithTeamOwners:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamOwners",defaultMessage:"Teamspace owners"},sharedWithTeamMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithTeamMembers",defaultMessage:"Teamspace members"},sharedWithMembers:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithMembers",defaultMessage:"{numMembers, plural, one {# member} other {# members}}"},sharedWithGroups:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGroups",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},sharedWithGuests:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithGuests",defaultMessage:"{numGuests, plural, one {# guest} other {# guests}}"},sharedWithBots:{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithBots",defaultMessage:"{numBots, plural, one {# connection} other {# connections}}"},separator:{defaultMessage:", ",id:"adminContentSearchTab.pagesTable.sharedWithCell.separator"}});function si(e){let{blockStore:t}=e;window.__c={n:"SharedWithCellImpl"};const i=function(e){return(0,Ze.VK)((()=>{const{data:t}=Te.default.state,i=t?(0,$.CM)(t):[],a=B.default.state.currentSpaceStore,n=(0,ei.YO)(e),o=(null==a?void 0:a.getPermissionGroups())||[],s=(0,Oe.VP)(e),r=n.find((e=>{let{permissionItem:t}=e;return gt.$D(t)})),l=n.find((e=>{let{permissionItem:t}=e;return gt.ix(t)})),d=s?n.find((e=>{let{permissionItem:t}=e;return(0,Xt.J2)(t,s.id)})):void 0,c=n.map((e=>{let{permissionItem:t}=e;return t})).filter(gt.zU),u=n.map((e=>{let{permissionItem:t}=e;return t})).filter(gt.LW),m=n.map((e=>{let{permissionItem:t}=e;return t})).filter(gt.hV).reduce(((e,t)=>{const i=t.group_id,a=t.role,n=o.find((e=>e.id===i));if(n){const t={...n,role:a};e.push(t)}return e}),[]),[p,g]=n.map((e=>{let{permissionItem:t}=e;return t})).filter(gt.jg).reduce(((e,t)=>{const a=i.find((e=>e.userId===t.user_id));return Boolean(a&&!gt.zz(a.role)&&!gt.J5(a.role))?[e[0].concat(t),e[1]]:[e[0],e[1].concat(t)]}),[[],[]]);return{groupPermissions:m,mostPermissivePublicItem:r,spacePermission:l,teamPermission:d,teamSharePermissions:c,teamOwnerSharePermissions:u,guestUserPermissions:p,memberUserPermissions:g,botPermissions:n.map((e=>{let{permissionItem:t}=e;return t})).filter((e=>(0,gt.FB)(e)))}}),[e])}(t),a=(0,v.useIntl)(),o=function(e,t){const{mostPermissivePublicItem:i,spacePermission:a,groupPermissions:o,guestUserPermissions:s,memberUserPermissions:l,teamSharePermissions:d,teamOwnerSharePermissions:c,botPermissions:u}=e,m=a&&"none"!==a.permissionItem.role;if(i&&"none"!==i.permissionItem.role)return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.sharedWithWeb",defaultMessage:"Shared to web"});if(!m&&0===o.length&&0===s.length&&0===l.length&&0===d.length&&0===c.length&&0===u.length)return n()("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage",defaultMessage:"Nobody"}),n()(Nt.Z,{render:e=>r.createElement("div",e,(0,Ke.D)({marginLeft:4,height:14,width:14,opacity:.5})),renderTooltip:()=>n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWithCell.orphanedPage.tooltip",defaultMessage:"No person, group, or teamspace has any access to this page."})}));const p=[];m?p.push(t.formatMessage(oi.sharedWithWorkspaceMembers)):(c.length>0&&0===d.length?p.push(t.formatMessage(oi.sharedWithTeamOwners)):d.length>0&&p.push(t.formatMessage(oi.sharedWithTeamMembers)),l.length>0&&p.push(t.formatMessage(oi.sharedWithMembers,{numMembers:l.length})),o.length>0&&p.push(t.formatMessage(oi.sharedWithGroups,{numGroups:o.length})));s.length>0&&p.push(t.formatMessage(oi.sharedWithGuests,{numGuests:s.length}));u.length>0&&p.push(t.formatMessage(oi.sharedWithBots,{numBots:u.length}));return p.join(t.formatMessage(oi.separator))}(i,a),l=[...i.spacePermission?[{key:"space-permission",render:e=>{var t;return r.createElement($t,s()({},e,{permissionItem:null===(t=i.spacePermission)||void 0===t?void 0:t.permissionItem}))},action:()=>{}}]:[],...i.teamOwnerSharePermissions.map((e=>({key:`${e.team_id}-owners`,render:t=>r.createElement(Jt,s()({},t,{onlyOwners:!0,teamId:e.team_id,role:e.role})),action:()=>{}}))),...i.teamSharePermissions.map((e=>({key:`${e.team_id}-members`,render:t=>r.createElement(Jt,s()({},t,{teamId:e.team_id,role:e.role})),action:()=>{}}))),...i.groupPermissions.map((e=>({key:e.id,render:t=>r.createElement(jt,s()({},t,{name:e.name,icon:e.icon,role:e.role})),action:()=>{}}))),...i.memberUserPermissions.map((e=>({key:e.user_id,render:t=>r.createElement(ni,s()({},t,{userId:e.user_id,role:e.role})),action:()=>{}}))),...i.guestUserPermissions.map((e=>({key:e.user_id,render:t=>r.createElement(ni,s()({},t,{isGuest:!0,userId:e.user_id,role:e.role})),action:()=>{}}))),...i.botPermissions.map((e=>({key:e.bot_id,render:t=>r.createElement(zt,s()({},t,{botId:e.bot_id})),action:()=>{}})))];return n()(Lt.N,{title:o,items:l,disabled:0===l.length})}const ri=r.memo(si);var li=i(17290);function di(e){let{blockStore:t,userIds:i,isClickable:a}=e;window.__c={n:"UsersFromIdsCell"};const o=(0,Ze.VK)((()=>i.map((e=>ft.U6.createChildStore(t,{table:ti.KJ,id:e})))),[t,i]);return n()(li.G,{userStores:o,isClickable:a})}const ci={id:"page",headerTitle:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>n()(ze.o,{blockStore:e.pageStore,rightIcon:n()(Dt,{blockStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},ui={id:"location",headerTitle:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>n()(wt,{blockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},mi={id:"createdTime",headerTitle:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>n()(We.T,{dateTs:e.createdTime}),widthData:{width:140},sortable:!1},pi={id:"lastEditedTime",headerTitle:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>n()(We.T,{dateTs:e.lastEditedTime}),widthData:{width:140},sortable:!1},gi={id:"createdBy",headerTitle:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdById?n()(di,{blockStore:e.pageStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},hi={id:"lastEditedBy",headerTitle:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedById?n()(di,{blockStore:e.pageStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},fi=[ci,ui,{id:"audience",headerTitle:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>n()(yt,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},{id:"sharedWith",headerTitle:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>n()(ri,{blockStore:e.pageStore}),widthData:{width:140},sortable:!1},hi,pi,gi,mi];function vi(e){let{loading:t,error:i,loadNextPage:a,filters:o,setFilters:s,pageStores:l,showSuggestions:d,runNewSearch:c}=e;window.__c={n:"AdminContentSearchTable"};const u=(0,Ze.VK)((()=>{const e=B.default.state.currentSpaceViewStore,t=null==e?void 0:e.getSettings();return null==t?void 0:t.admin_content_search_acknowledgement}),[]),m=u&&!t&&!d,p=u&&!d,g=(0,Ze.VK)((()=>l.map((e=>({id:e.id,isClickable:!1,pageStore:e,teamStore:(0,Oe.VP)(e),createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById()})))),[l]),h=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:fi,theme:e,containerMarginTop:0})),[]);return i?n()($e,{runNewSearch:c,error:i}):u?d&&0===g.length?n()(mt,{filters:o,setFilters:s}):r.createElement(r.Fragment,null,n()(Ve.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:400,columnRenderInfo:fi,rows:g,onScrollBottom:p?a:void 0,renderNoRowsComponent:()=>n()(Ee.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"}},void 0,m&&n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."})),styles:h}),t?n()(Ue.Z,{style:{margin:"24px auto 24px"}}):null):n()(qe,{})}var yi=i(2438);function Si(e){let{spaceStore:t}=e;return(0,Ze.VK)((()=>{const{data:e}=Te.default.state;if(!e)return{loading:!0};const i=$.CM(e);if(!i.every((e=>ft.U6.createChildStore(t,{table:ti.KJ,id:e.userId}).isReady())))return{loading:!0};const a=i.filter(yi.CF),n=i.filter(yi.du);return{loading:!1,members:a.map((e=>{let{userId:i}=e;return ft.U6.createChildStore(t,{table:ti.KJ,id:i})})),guests:n.map((e=>{let{userId:i}=e;return ft.U6.createChildStore(t,{table:ti.KJ,id:i})}))}}),[t])}var bi=i(84619),Mi=i(40462),wi=i(22686),Ci=i(16639),_i=i(43145),ki=i(46978),Ti=i(85567),Ii=i(719);const Pi=(0,v.defineMessages)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}});function xi(e){let{userStores:t,title:i,selectedItems:a,setSelectedItems:o,onMenuClose:l,isMultiSelect:d,includePermissionGroups:c,guestUserIdSet:u}=e;window.__c={n:"UsersFilter"};const m=(0,v.useIntl)(),p=(0,Ze.qz)(void 0,et.Z),g=(0,Fe.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.mediumTextColor,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},noResultsMessage:{width:"100%",margin:"8px 12px"},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[h,f]=(0,r.useState)(10),[y,S]=(0,r.useState)(!1),[b,M]=(0,r.useState)(""),w=t.length,C=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),_=(0,r.useMemo)((()=>a.map((e=>{let{id:t}=e;return t}))),[a]),k=(0,Ze.VK)((()=>{const e=B.default.state.currentSpaceStore;return c&&e?e.getPermissionGroups():[]}),[c]),T=(0,Ze.VK)((()=>_.map((e=>t.find((t=>t.id===e)))).filter(A.$K)),[_,t]),I=(0,Ze.VK)((()=>_.map((e=>k.find((t=>t.id===e)))).filter(A.$K)),[_,k]);function P(){f(10),S(!1),M(""),l()}function x(){M(""),o([])}function Z(e){e<5&&h<w&&f(h+10)}function F(e){if(d){return _.includes(e.id)?[...a.filter((t=>{let{id:i}=t;return i!==e.id}))]:[...a,e]}return _.includes(e.id)?[]:[e]}function E(e){const t=F({id:e,type:"user"});o(t),M("")}function R(e){const t=F({id:e,type:"permission_group"});o(t),M("")}const D=(0,r.useCallback)((e=>{M(e.target.value)}),[]),L=(0,Ze.VK)((()=>T.map((e=>{const t=(0,ii.Nz)(m,e.getModel()),i=!!u&&u.has(e.id);return n()(Ti.Z,{isSingle:!0,format:bi.l.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=_.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));o(t)},style:i?g.guestPillContainer:g.pillContainer,value:n()("div",{style:g.pillContents},void 0,i?(0,Mi.o)(g.guestIcon):n()(ai.Z,{userStore:e,size:16}),n()(Ee.Z,{style:g.pillText},void 0,t))},e.id)}))),[_,T,o,u,g,m]),N=(0,Ze.VK)((()=>I.map((e=>{const t=Ci.kF({intl:m,group:e});return n()(Ti.Z,{isSingle:!0,format:bi.l.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=_.filter((t=>t!==e.id)).map((e=>({id:e,type:"permission_group"})));o(t)},style:g.pillContainer,value:n()("div",{style:g.pillContents},void 0,n()(Ht.Z,{disabled:!0,icon:e.icon&&C?{pointer:C.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,Je.O)(g.defaultGroupIconPill),style:g.groupIconSpacing}),n()(Ee.Z,{style:g.pillText},void 0,t))},e.id)}))),[_,I,o,g,C,m]);const O=n()(tt.Z,{on:_.length>0,icon:(0,wi.f)(g.icon),title:i,onClick:()=>S(!0)});return n()(lt.Z,{},void 0,n()(st.ZP,{popupType:st.ZP.PopupType.Popup,placementToOrigin:st.ZP.Placement.Bottom,alignmentToOrigin:st.ZP.Alignment.Start,open:y,render:function(){const e=[];for(const a of t){var i;const t=(0,ii.Nz)(m,a.getModel()),o=!!u&&u.has(a.id);(t.toLocaleLowerCase().includes(b)||null!==(i=a.getEmail())&&void 0!==i&&i.toLocaleLowerCase().includes(b))&&e.push({key:a.id,action:()=>E(a.id),render:e=>r.createElement(it.Z,s()({},e,{icon:d?n()(at.Z,{checked:_.includes(a.id),onClick:()=>E(a.id),size:16}):n()(ki.Z,{isSelected:_.includes(a.id)}),focused:!1,title:n()("div",{style:g.optionContainer},void 0,n()(ai.Z,{userStore:a,size:24,style:g.optionAvatar}),n()("div",{style:{paddingTop:4,paddingBottom:4}},void 0,n()(Ee.Z,{style:g.optionTitle},void 0,t),n()(Ee.Z,{style:g.optionCaption},void 0,n()(v.FormattedMessage,o?{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}:{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"}))))}))})}const l=[];for(const t of k){const e=Ci.kF({intl:m,group:t});e.toLocaleLowerCase().includes(b)&&l.push({key:t.id,action:()=>R(t.id),render:i=>r.createElement(it.Z,s()({},i,{icon:d?n()(at.Z,{checked:_.includes(t.id),onClick:()=>R(t.id),size:16}):n()(ki.Z,{isSelected:_.includes(t.id)}),focused:!1,title:n()("div",{style:g.optionContainer},void 0,n()(Ht.Z,{disabled:!0,icon:t.icon&&C?{pointer:C.pointer,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:e,defaultIcon:(0,Je.O)(g.defaultGroupIcon),style:g.groupIconSpacing}),n()("div",{style:{paddingTop:4,paddingBottom:4}},void 0,n()(Ee.Z,{style:g.optionTitle},void 0,e),n()(Ee.Z,{style:g.optionCaption},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"}))))}))})}const f={key:"no-results",action:()=>{},render:e=>r.createElement(Ee.Z,s()({isSecondaryColor:!0,style:g.noResultsMessage},e),n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found."}))},y=[...e,...l],S={key:"userOptions",items:y.length>0?y.slice(0,h):[f],render:e=>r.createElement(rt.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{style:g.container},void 0,n()(Ii.Z,{focus:!0,value:b,style:g.input,placeholder:q.default.formatMessage(c?Pi.usersAndGroupsPlaceholder:Pi.usersPlaceholder),onChange:D,onRemoveLastToken:()=>{const e=a.slice(0,-1);o(e)},tokens:[...L,...N]}),n()(nt.Z,{menuType:Xe.og.Popup,header:null,maxHeight:250,width:300},void 0,n()(ot.Z,{type:ot.i.Vertical,store:p,initialFocus:0,sections:[S]}),n()(_i.Z,{onChange:Z})),n()(rt.Z,{topBorder:!0,style:g.footer},void 0,n()(Ge.Z,{onClick:x},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})),n()(He.Z,{onClick:P},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"}))))},onDismiss:P,keepFocus:!0,origin:O,preventScaleTransition:!0}))}function Zi(e){let{spaceStore:t,createdByFilterIds:i,setCreatedByFilter:a,runNewSearch:o,includeGuests:s}=e;window.__c={n:"CreatedByFilter"};const l=Si({spaceStore:t}),d=(0,r.useMemo)((()=>l.loading?[]:s?[...l.members,...l.guests]:l.members),[l,s]),c=(0,r.useMemo)((()=>l.loading?new Set:new Set(l.guests.map((e=>e.id)))),[l]);const u=(0,r.useMemo)((()=>i.map((e=>({id:e,type:"user"})))),[i]);return n()(xi,{userStores:d,title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:u,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));a(t)},onMenuClose:o,guestUserIdSet:c})}var Fi=i(40506),Ai=i(69651),Ei=i(42853),Bi=i(65496),Ri=i(64921),Di=i(45959),Li=i(76150),Ni=i(13854),Oi=i(41558),Vi=i(3386),Ui=i(42875),Wi=i(67950),zi=i(40721),Ki=i(86825),Hi=i(46945),Gi=i(84795);const qi="Invalid date",ji="Invalid range";class Yi extends D.default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const $i=Yi;var Qi=i(74194);class Ji extends l.Z{constructor(){super(...arguments),this.storeTypes={store:$i},this.renderInput=()=>{const{device:e}=this.environment,{store:t,hideClearButton:i,focus:a,showTime:o,placeholder:l,...d}=this.props,c=e.isMobile?"date":"text",u=e.isMobile?"time":"text",m=Qi.Z.Format.Transparent,p=e.isMobile?void 0:a;return n()("div",{style:{display:"flex",alignItems:"center",borderRadius:3,lineHeight:2,background:this.theme.inputBackground,paddingLeft:8,paddingRight:8,flexBasis:"50%",...this.getInputStyles().inputOuterStyle}},void 0,r.createElement(Qi.Z,s()({},d,{type:c,format:m,placeholder:l,focus:"date"===p,onFocus:this.handleDateFocus,onChange:this.handleDateChange,onSubmit:e=>this.handleSubmit(e,"date"),onBlur:this.handleBlur,value:this.getDateInputValue(),size:1,style:{fontSize:e.isMobile?16:14},showClearButton:!o&&this.showClearButton(),onClearButtonClick:this.handleClear})),o&&r.createElement(r.Fragment,null,n()("div",{style:{height:14,width:1,background:this.theme.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),r.createElement(Qi.Z,s()({},d,{placeholder:q.default.formatMessage(ea.timePlaceholder),type:u,format:m,focus:"time"===p,onFocus:this.handleTimeFocus,onChange:this.handleTimeChange,onSubmit:e=>this.handleSubmit(e,"time"),onBlur:this.handleBlur,value:this.getTimeInputValue(),size:1,style:{fontSize:e.isMobile?16:14},showClearButton:this.showClearButton(),onClearButtonClick:this.handleClear}))))},this.handleDateFocus=e=>{const{onDateFocus:t}=this.props,{store:i}=this.stores;i.setState({...i.state,dateEdited:!1}),t&&t(e)},this.handleTimeFocus=e=>{const{onTimeFocus:t}=this.props,{store:i}=this.stores;i.setState({...i.state,timeEdited:!1}),t&&t(e)},this.handleClear=()=>{const{onClear:e,onUpdate:t}=this.props,{store:i}=this.stores;i.setState({...i.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const a=this.validateCurrent();a&&t(a),i.setState({...i.state,dateEdited:!1,timeEdited:!1}),e&&e()},this.handleDateChange=e=>{const{device:t}=this.environment,{store:i}=this.stores;i.setState({...i.state,dateEdited:!0,temporaryValue:{...i.state.temporaryValue,date:e.target.value||""}}),t.isAndroid&&this.handleBlur()},this.handleTimeChange=e=>{const{device:t}=this.environment,{store:i}=this.stores;i.setState({...i.state,timeEdited:!0,temporaryValue:{...i.state.temporaryValue,time:e.target.value||""}}),t.isAndroid&&this.handleBlur()},this.handleSubmit=(e,t)=>{var i,a;const{onUpdate:n,onSubmit:o,showTime:s}=this.props,{store:r}=this.stores;let l;(!s||"date"===t&&null!==(i=this.props.value)&&void 0!==i&&i.start_time||"time"===t&&null!==(a=this.props.value)&&void 0!==a&&a.start_date)&&(l=this.validateCurrent(),l&&(n(l),l.error?r.setState({...r.state,dateEdited:!1,error:l.error}):r.reset())),o&&o(e,l)},this.handleBlur=e=>{const{onUpdate:t,onBlur:i}=this.props,{store:a}=this.stores,n=this.validateCurrent();n?(t(n),n.error?a.setState({...a.state,dateEdited:!1,timeEdited:!1,error:n.error}):a.reset()):a.setState({...a.state,dateEdited:!1,timeEdited:!1}),e&&i&&i(e)},this.styles={menuItem:{marginBottom:this.environment.device.isMobile?1:12},inputWrapper:{borderRadius:3,height:28,paddingRight:this.showClearButton()?6:0,position:"relative"},inputEditRegion:{width:this.showClearButton()?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"},tooltipOriginGap:-8}}didUpdate(e){const{store:t}=this.stores;m.Xy(e.value,this.props.value)||t.reset()}renderComponent(){const e=this.styles,t=this.getError();return t?n()(Nt.Z,{renderTooltip:()=>t,forceVisibleState:!0,placement:Nt.Z.Placement.Left,render:this.renderInput,originGap:e.tooltipOriginGap}):this.renderInput()}getDateInputValue(){const{device:e}=this.environment,{value:t,intl:i}=this.props,{store:a}=this.stores;return e.isMobile?t?ne.dd(t,i):"":a.state.temporaryValue.date?a.state.temporaryValue.date:a.state.dateEdited?a.state.temporaryValue.date||"":t?ne.dd(t,i):""}getTimeInputValue(){const{device:e}=this.environment,{value:t,intl:i}=this.props,{store:a}=this.stores;return e.isMobile?t?ne.KN(t,i):"":a.state.temporaryValue.time?a.state.temporaryValue.time:a.state.timeEdited?a.state.temporaryValue.time||"":t?ne.KN(t,i):""}getError(){const{store:e}=this.stores,{intl:t}=this.props;if(e.state.error)switch(e.state.error){case qi:return t.formatMessage({id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"});case ji:return t.formatMessage({id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"});default:(0,A.t1)(e.state.error)}}validateCurrent(){const{validate:e}=this.props,t=this.parseCurrentDateTimeValue();if(t)return e?e(t):t}parseCurrentDateTimeValue(){const{store:e}=this.stores,{value:t,showTime:i,isEndingDate:a}=this.props;if(!e.state.dateEdited&&!e.state.timeEdited)return;if(!e.state.temporaryValue.date&&!e.state.temporaryValue.time)return{value:void 0};const n=(0,Gi.parseDateValue)(e.state.temporaryValue.date||"",this.props.intl);if(n){let e="";return e=i?(null==t?void 0:t.start_time)||"00:00":a?"23:59":"00:00",{value:{type:"datetime",start_date:n,time_zone:(null==t?void 0:t.time_zone)||(0,Ui.r)(),start_time:e}}}const o=(0,Gi.parseTimeValue)(e.state.temporaryValue.time||"",this.props.intl);return(null!=t&&t.start_date||n)&&o?{value:{type:"datetime",start_date:(null==t?void 0:t.start_date)||n,start_time:o,time_zone:(null==t?void 0:t.time_zone)||(0,Ui.r)()}}:{error:qi}}showClearButton(){const{device:e}=this.environment,{hideClearButton:t}=this.props;return!!e.isMobile||!t}getInputStyles(){const{device:e}=this.environment,{inputStyle:t,inputOuterStyle:i,style:a}=this.props,n=this.styles;return{style:{...n.menuItem,...a},inputOuterStyle:{...n.inputWrapper,...i,...this.getInputBorders()},inputStyle:{...n.inputEditRegion,...e.isMobile&&n.inputEditRegionMobile,...t}}}getInputBorders(){const{disabled:e,focus:t}=this.props,i=this.getThemeColors(),a=this.getError();if(!e)return a?i.inputError:t?i.inputFocused:i.inputDefault}getThemeColors(){return{inputDefault:{background:this.theme.inputBackground,boxShadow:this.theme.inputBoxShadow},inputFocused:{boxShadow:this.theme.outlineBlueInputBoxShadow},inputError:{boxShadow:this.theme.outlineRedInputBoxShadow},placeholder:{color:this.theme.lightTextColor}}}}Ji.displayName="DateTimeInputMenuItem";const Xi=(0,v.injectIntl)(Ji),ea=(0,v.defineMessages)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});class ta extends l.Z{constructor(){super(...arguments),this.storeTypes={store:Ni.ZP,dayRangeStore:Oi.Z},this.renderInputs=()=>{const{device:e,WindowSizeStore:t}=this.environment,{value:i,disabled:a}=this.props,{store:o}=this.stores,s=o.getFocus();let r="date";s!==Li.Hv.StartTime&&s!==Li.Hv.EndTime||(r="time");const l=this.getRangeBounds();return n()("div",{style:{paddingTop:e.isMobile?16:12,paddingBottom:e.isMobile?16:8,paddingLeft:e.isMobile?t.getSafePaddingLeftCSS(16):14,paddingRight:e.isMobile?t.getSafePaddingRightCSS(16):14,display:o.state.showTime?"block":"flex",...e.isMobile&&{boxShadow:`\n\t\t\t\t\t\t\t0 1px 0 ${this.theme.regularDividerColor}\n\t\t\t\t\t\t`,position:"relative",zIndex:2},background:e.isMobile?this.theme.popoverBackground:void 0}},void 0,n()(Xi,{disabled:a,placeholder:q.default.formatMessage(ea.startingDateMessage),focus:s===Li.Hv.StartDate||s===Li.Hv.StartTime?r:void 0,value:i.starting,validate:this.validateStart,onUpdate:this.handleUpdateStart,onDateFocus:()=>this.handleDateFocus(Li.Hv.StartDate),onTimeFocus:()=>this.handleTimeFocus(Li.Hv.StartTime),onSubmit:(e,t)=>this.handleStartSubmit(e,t,s),inputElementAttributes:{max:l.latestValidStarting},showTime:o.state.showTime}),n()("div",{style:{width:12,height:8}}),n()(Xi,{disabled:a,placeholder:q.default.formatMessage(ea.endingDateMessage),focus:s===Li.Hv.EndDate||s===Li.Hv.EndTime?r:void 0,value:i.ending,validate:this.validateEnd,onUpdate:this.handleUpdateEnd,onDateFocus:()=>this.handleDateFocus(Li.Hv.EndDate),onTimeFocus:()=>this.handleTimeFocus(Li.Hv.EndTime),onSubmit:(e,t)=>this.handleEndSubmit(e,t,s),inputElementAttributes:{min:l.earliestValidEnding},showTime:o.state.showTime}))},this.renderCalendar=()=>{const{device:e}=this.environment,{value:t,onUpdate:i}=this.props,{store:a,dayRangeStore:o}=this.stores,s=this.styles,r=this.getThemeColors(),l={...s.pickerSection,...e.isMobile&&s.pickerSectionMobile,...e.isMobile&&r.pickerSectionMobile};return n()(rt.Z,{},void 0,n()("div",{style:l},void 0,n()(Hi.Z,{value:ne.Zy(t),dateTimeStore:a,store:o,onUpdate:e=>{if(e.error)return;const a=ne.PM(t,e.value);return i({error:e.error,value:a})},validate:this.validateDateRangeField})))},this.handleDateFocus=e=>{const{store:t,dayRangeStore:i}=this.stores;t.setState({...t.state,focus:e});const a=Ni.QJ[e];i.setState({...i.state,focus:a})},this.handleTimeFocus=e=>{const{store:t}=this.stores;t.setState({...t.state,focus:e})},this.handleUpdateStart=e=>{const{onUpdate:t}=this.props;e.error||t({value:{...this.props.value,starting:e.value}})},this.handleUpdateEnd=e=>{const{onUpdate:t}=this.props;e.error||t({value:{...this.props.value,ending:e.value}})},this.handleStartSubmit=(e,t,i)=>{const{store:a,dayRangeStore:n}=this.stores;t&&t.error||(i===Li.Hv.StartDate&&a.state.showTime?a.setState({...a.state,focus:Li.Hv.StartTime}):(a.setState({...a.state,focus:Li.Hv.EndDate}),n.setState({...n.state,focus:"ending"})))},this.handleEndSubmit=(e,t,i)=>{const{store:a}=this.stores;t&&t.error||i===Li.Hv.EndDate&&a.state.showTime&&a.setState({...a.state,focus:Li.Hv.EndTime})},this.validateStart=e=>{const t=this.validateField("starting",e);return t.error?t:{value:t.value.starting}},this.validateEnd=e=>{const t=this.validateField("ending",e);return t.error?t:{value:t.value.ending}},this.validateField=(e,t)=>{const{value:i}=this.props;return t.error?t:this.validateRange({...i,[e]:t.value})},this.validateRange=e=>{if(e.starting&&e.ending){const t=Q.OQ.notionDateTimeToLuxon(e.starting);return Q.OQ.notionDateTimeToLuxon(e.ending)>=t?{value:e}:{error:Wi.B.INVALID_RANGE}}return{value:e}},this.getMenuProps=()=>{const{device:e}=this.environment,{onDismiss:t,title:i}=this.props;if(e.isMobile){return{menuType:Xe.og.Modal,title:i,right:n()(zi.DoneMenuText,{}),onClickRight:t,header:this.renderInputs()}}return{menuType:Xe.og.Popup,onClickOutside:t,footer:this.props.footer}},this.validateDateRangeField=(e,t)=>{const{value:i}=this.props;if(t.error)return t;const a=ne.Zy(i);return this.validateDateRange({...a,[e]:t.value})},this.validateDateRange=e=>{if(e.starting&&e.ending){const t=Q.OQ.notionDateToLuxon(e.starting);return Q.OQ.notionDateToLuxon(e.ending)>=t?{value:e}:{error:Wi.B.INVALID_RANGE}}return{value:e}},this.styles={pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:this.theme.sidebarSecondaryBackground,borderLeft:`1px solid ${this.theme.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4,color:this.theme.mediumTextColor}}}didMount(){const{store:e}=this.stores;void 0!==this.props.showTime&&e.setState({...e.state,showTime:this.props.showTime})}renderComponent(){const{device:e}=this.environment;return r.createElement(nt.Z,this.getMenuProps(),n()("div",{style:{display:"flex",flexDirection:"row"}},void 0,n()("div",{},void 0,this.props.header,!e.isMobile&&this.renderInputs(),this.renderCalendar()),this.renderSidebar()))}renderSidebar(){const{store:e}=this.stores,{onUpdate:t,value:i,hideTime:a}=this.props;return n()("aside",{style:this.styles.sidebar},void 0,a?null:n()(Ki.Z,{title:n()(v.FormattedMessage,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:e.state.showTime,onClick:()=>{if(e.toggleShowTime(),e.state.showTime){const e=i;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),n()(it.Z,{focused:!1,title:n()(v.FormattedMessage,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=Q.CQ(e,(0,Ui.r)());this.setStoresTemporaryValue({starting:{...t,start_time:"00:00"},ending:t})},style:this.styles.menuItem}),n()(it.Z,{focused:!1,title:n()(v.FormattedMessage,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=Q.Cv((0,Ui.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,Ui.r)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,Ui.r)()}})},style:this.styles.menuItem}),n()(it.Z,{focused:!1,title:n()(v.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=Q.Oo((0,Ui.r)()),t=Q.CQ(Date.now(),(0,Ui.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,Ui.r)()},ending:t})},style:this.styles.menuItem}),n()(it.Z,{focused:!1,title:n()(v.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=Q.dj((0,Ui.r)()),t=Q.CQ(Date.now(),(0,Ui.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,Ui.r)()},ending:t})},style:this.styles.menuItem}))}setStoresTemporaryValue(e){const{store:t,dayRangeStore:i}=this.stores;e.ending&&this.handleDateFocus(Li.Hv.EndDate),t.setState({...t.state,temporaryDateRange:e}),i.setState({...i.state,displayMonth:e.starting||e.ending?Q.Sy(e.starting||e.ending):void 0,temporaryDateRange:{starting:ne.Qb(e.starting),ending:ne.Qb(e.ending)}})}getRangeBounds(){const{value:e,intl:t}=this.props;return{earliestValidEnding:e.starting&&ne.o0(e.starting,t),latestValidStarting:e.ending&&ne.o0(e.ending,t)}}getThemeColors(){return{pickerSectionMobile:{background:this.theme.popoverBackground,boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,marginBottom:1}}}}ta.displayName="DateTimeRangeMenu";const ia=(0,v.injectIntl)(ta);var aa=i(255),na=i(8319),oa=i(75689);class sa extends l.Z{constructor(){super(...arguments),this.storeTypes={store:Ni.ZP,dayRangeStore:Oi.Z},this.renderActiveButtonOrigin=()=>{const{value:e,disabled:t,focused:i,intl:a}=this.props,o=this.styles,s=this.getThemeColors(),r={...o.menuItem,...s.activeMenuItem},l=Bi._Q(e,a),d=n()(aa.Z,{onClick:this.handleClear,disabled:t});return n()(it.Z,{focused:i,disabled:t,icon:(0,Ai.C)(o.iconActiveDesktop),title:l,right:d,isTokenTitle:!0,alignIconTop:!0,onClick:this.handleOriginActivate,desktopTitleStyle:o.menuItemTitleDesktop,desktopIconStyle:o.iconActiveDesktopWrapper,style:r})},this.renderInactiveButtonOrigin=()=>{const{title:e,icon:t,disabled:i,focused:a,mode:o}=this.props,s=this.styles,r=this.getThemeColors(),l={...s.menuItem,...r.buttonMenuItem,...o===na.Z.Mode.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return n()(it.Z,{focused:a,disabled:i,icon:t(s.icon),title:e,onClick:this.handleOriginActivate,style:l})},this.renderPillButtonOrigin=()=>{const{value:e,pillTitle:t}=this.props,i=n()(v.FormattedMessage,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return n()(tt.Z,{on:Boolean(e.starting||e.ending),icon:(0,Ai.C)({width:16,marginRight:6,fill:"currentColor"}),title:n()("span",{},void 0,t||i),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e,header:t,showButtons:i,sidebar:a,hideTime:o}=this.props,{store:s,dayRangeStore:l}=this.stores;return r.createElement(r.Fragment,null,n()(ia,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:s,dayRangeStore:l,onDismiss:this.handleMenuClose,footer:"footer"===i&&this.renderFooter(),sidebar:a,hideTime:o,header:t}),"side"===i&&n()("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"}},void 0,n()(Ge.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:this.handleMenuClose},void 0,n()(v.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})),n()(He.Z,{onClick:()=>this.props.onChange(this.stores.store.state.temporaryDateRange)},void 0,n()(v.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"}))))},this.renderFooter=()=>{const{store:e,dayRangeStore:t}=this.stores;return n()(rt.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"}},void 0,n()(Ge.Z,{onClick:()=>{e.clearTemporaryDateRange(),t.clearTemporaryDateRange(),this.props.onChange({starting:void 0,ending:void 0})}},void 0,n()(v.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})),n()(He.Z,{onClick:e=>{this.props.onChange(this.stores.store.state.temporaryDateRange),this.handleMenuClose(e)}},void 0,n()(v.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})))},this.handleOriginActivate=()=>{const{disabled:e}=this.props,{store:t,dayRangeStore:i}=this.stores;e||(t.setState({...t.state,isOpen:!0,focus:Li.Hv.StartDate}),i.setState({...i.state,isOpen:!0,focus:"starting"}))},this.handleMenuClose=e=>{const{onChange:t,onMenuDismiss:i,showButtons:a}=this.props,{store:n,dayRangeStore:o}=this.stores,{temporaryDateRange:s}=n.state;Bi.zD(e)||(a||t(s),n.setState({...n.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),o.setState({...o.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),i&&i())},this.handleClear=()=>{const{onChange:e}=this.props;e({starting:void 0,ending:void 0})},this.handleMenuListKey=e=>{e.preventDefault&&e.preventDefault()},this.updateTemporary=e=>{const{store:t,dayRangeStore:i}=this.stores;if(e.error)return;const a={starting:(0,ne.Qb)(e.value.starting),ending:(0,ne.Qb)(e.value.ending)};return i.setState({...i.state,temporaryDateRange:{...i.state.temporaryDateRange,...a}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,sidebar:i}=this.props,{store:a}=this.stores,o=this.styles,s=e===na.z.Section,r=s?t:void 0,l=(()=>e===na.Z.Mode.Section?this.renderActiveButtonOrigin():e===na.Z.Mode.Button?this.renderInactiveButtonOrigin():e===na.Z.Mode.Pill?this.renderPillButtonOrigin():void(0,A.t1)(e))();return n()(lt.Z,{title:r,marginAfter:s},void 0,n()(Vi.Z,{capture:a.state.isOpen,onUp:this.handleMenuListKey,onDown:this.handleMenuListKey,onEnter:this.handleMenuListKey},void 0,n()(st.ZP,{popupType:this.getPopupType(),open:a.state.isOpen,origin:l,render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:st.ZP.Placement.Bottom,alignmentToOrigin:st.ZP.Alignment.Start,style:i?o.popupWithSidebar:o.popup})))}renderMobile(e){const{store:t}=this.stores,i=e===na.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return n()(st.ZP,{popupType:st.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:i,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:i}=this.props,a=this.styles;return n()(it.Z,{disabled:i,focused:!1,icon:e(a.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,disabled:i,intl:a}=this.props,o=this.styles,s=n()("div",{style:o.summary},void 0,(0,Ai.C)(o.iconActiveMobile),Bi._Q(t,a));return n()(oa.Z,{disabled:i,onClick:this.handleOriginActivate,onClickClear:this.handleClear,label:e,title:s})}getCurrentValue(){const{value:e}=this.props,{store:t}=this.stores,{temporaryDateRange:i}=t.state;return{...e,...i}}getPopupType(){const{device:e}=this.environment;return e.isMobile?st.ZP.PopupType.SlideUp:st.ZP.PopupType.Popup}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},activeMenuItem:{color:this.theme.regularTextColor}}}}sa.displayName="DateTimeFilter";const ra=(0,v.injectIntl)(sa);function la(e){let{lastEditedTime:t,createdTime:i,setLastEditedTime:a,setCreatedOnTime:o}=e;window.__c={n:"DateFilter"};const s=(0,v.useIntl)(),[l,d]=(0,r.useState)("createdTime"),c=(0,r.useMemo)((()=>{switch(l){case"createdTime":return i;case"lastEditedTime":return t;default:(0,A.t1)(l)}}),[t,i,l]),u=(0,r.useMemo)((()=>{switch(l){case"createdTime":return o;case"lastEditedTime":return a;default:(0,A.t1)(l)}}),[a,o,l]);const m=(0,Ze.VK)((()=>{if((0,ne.mK)(c))switch(l){case"createdTime":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,A.t1)(l)}const e=(0,ne.Hq)(c),t=Bi._Q(e,s,Fi.sF);switch(l){case"createdTime":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"Created on: {dateRangeString}",values:{dateRangeString:t}});case"lastEditedTime":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"Last edited on: {dateRangeString}",values:{dateRangeString:t}});default:(0,A.t1)(l)}}),[c,l,s]);return n()(ra,{header:n()(da,{selectedItem:l,setSelectedItem:function(e){d(e)}}),mode:na.z.Pill,focused:!1,hideTime:!0,pillTitle:m,title:m,icon:Ai.C,value:c,showButtons:"footer",onChange:e=>{u(e)}})}function da(e){let{selectedItem:t,setSelectedItem:i}=e;window.__c={n:"DateTimeFilterSelector"};const a=(0,Fe.yK)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:3},text:{display:"flex",alignItems:"center",color:e.mediumTextColor,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:10,width:10,marginLeft:4}})),[]),o={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>i(e),renderItem:e=>r.createElement(it.Z,s()({title:ca(e.value)},e)),renderOrigin:e=>r.createElement(Ri.Z,s()({},e,{style:a.button}),n()("div",{style:a.text},void 0,ca(t),(0,Ei.i)(a.icon)))};return r.createElement(Di.Z,s()({},o,{mobileActionSheet:!0}))}function ca(e){return{lastEditedTime:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}var ua=i(49019);let ma=function(e){return e.OnChange="on-change",e.Button="button",e}({});const pa=(0,v.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"}});function ga(e){let{mode:t,query:i,setQueryFilter:a,placeholderText:o}=e;window.__c={n:"QuerySearchInput"};const[s,l]=(0,r.useState)(i??""),d=(0,Fe.yK)((e=>({searchIcon:{color:e.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground}})),[]),c=(0,r.useMemo)((()=>(0,m.Ds)(a,500)),[a]),u=(0,r.useCallback)((e=>{l(e.target.value),t===ma.OnChange&&c(e.target.value)}),[c,t]);return n()(Qi.Z,{value:s,style:d.input,left:(0,ua.e)(d.searchIcon),placeholder:o||q.default.formatMessage(pa.placeholder),onChange:u,onSubmit:()=>a(s),right:t===ma.Button?n()(He.Z,{onClick:()=>a(s)},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})):null})}function ha(e){let{spaceStore:t,sharedWithFilterItems:i,setSharedWithFilter:a,runNewSearch:o,includeGroups:s,includeGuests:l}=e;window.__c={n:"SharedWithFilter"};const d=Si({spaceStore:t}),c=(0,r.useMemo)((()=>d.loading?[]:l?[...d.members,...d.guests]:d.members),[d,l]),u=(0,r.useMemo)((()=>d.loading?new Set:new Set(d.guests.map((e=>e.id)))),[d]);return n()(xi,{isMultiSelect:!0,includePermissionGroups:s,userStores:c,title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.sharedWith.title",defaultMessage:"Shared with"}),selectedItems:i??[],setSelectedItems:function(e){const t=e.map((e=>{let{id:t,type:i}=e;return{type:i,id:t}}));a(t.length>0?t:void 0)},onMenuClose:o,guestUserIdSet:u})}const fa=(0,v.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function va(e){let{selectedTeamIds:t,setSelectedTeamIds:i,onMenuClose:a,teamStores:o}=e;window.__c={n:"TeamsFilter"};const l=(0,Ze.qz)(void 0,et.Z),d=(0,Fe.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[c,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),g=(0,Ze.VK)((()=>[...o].sort(E.KP)),[o]),h=(0,Ze.VK)((()=>t.map((e=>o.find((t=>t.id===e)))).filter(A.$K)),[o,t]);function f(){u(!1),p(""),a()}function y(){p(""),i([])}function S(e){const a=t.includes(e)?[]:[e];i(a),p("")}const b=(0,r.useCallback)((e=>{p(e.target.value)}),[]),M=(0,Ze.VK)((()=>h.map((e=>{const a=e.getName();return n()(Ti.Z,{isSingle:!0,format:bi.l.Inline,showRemoveButton:!0,onClickRemove:()=>{const a=t.filter((t=>t!==e.id));i(a)},style:d.pillContainer,value:n()("div",{style:d.pillContents},void 0,n()(Yt.p,{disabled:!0,store:e,size:16}),n()(Ee.Z,{style:d.pillText},void 0,a))},e.id)}))),[h,t,i,d]);const w=n()(tt.Z,{on:t.length>0,icon:(0,Je.O)(d.icon),title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>u(!0)});return n()(lt.Z,{},void 0,n()(st.ZP,{popupType:st.ZP.PopupType.Popup,placementToOrigin:st.ZP.Placement.Bottom,alignmentToOrigin:st.ZP.Alignment.Start,open:c,render:function(){const e=[];for(const o of g){const i=o.getName(),a=o.getTeamAccessLevel(),l=o.isDefault();i&&i.toLocaleLowerCase().includes(m)&&e.push({key:o.id,action:()=>S(o.id),render:e=>r.createElement(it.Z,s()({},e,{icon:n()(ki.Z,{isSelected:t.includes(o.id)}),focused:!1,title:n()("div",{style:d.optionContainer},void 0,n()(Yt.p,{disabled:!0,store:o,size:24,style:d.teamIcon}),n()("div",{style:{paddingTop:4,paddingBottom:4}},void 0,n()(Ee.Z,{style:d.optionTitle},void 0,i),n()(Ee.Z,{style:d.optionCaption},void 0,ya(a,l))))}))})}const i={key:"no-results",action:()=>{},render:e=>r.createElement(Ee.Z,s()({isSecondaryColor:!0,style:d.noResultsMessage},e),n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found."}))},a={key:"teamOptions",items:e.length>0?e:[i],render:e=>r.createElement(rt.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{style:d.container},void 0,n()(Ii.Z,{focus:!0,value:m,style:d.input,placeholder:q.default.formatMessage(fa.placeholder),onChange:b,onRemoveLastToken:y,tokens:M}),n()(nt.Z,{menuType:Xe.og.Popup,header:null,maxHeight:250,width:300},void 0,n()(ot.Z,{type:ot.i.Vertical,store:l,initialFocus:0,sections:[a]})),n()(rt.Z,{topBorder:!0,style:d.footer},void 0,n()(Ge.Z,{onClick:y},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})),n()(He.Z,{onClick:f},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"}))))},onDismiss:f,keepFocus:!0,origin:w,preventScaleTransition:!0}))}function ya(e,t){if(t)return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,A.t1)(e)}}function Sa(e){let{spaceStore:t,filters:i,runNewSearch:a,setFilters:o}=e;window.__c={n:"FiltersSection"};const s=function(){const[e,t]=(0,r.useState)([]),i=(0,xe.O7)(),a=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),n=(0,Ze.VK)((()=>{var e;return null===(e=B.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,r.useEffect)((()=>{!async function(){const e=await(0,E.sj)({spaceStore:a,currentUserId:n,includeArchived:!1,minRoleOnTeamStores:"editor",environment:i});t(e)}()}),[a,n,i]),e}(),l=(0,Fe.yK)((e=>({container:{margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItemsCenter:"center"}})),[]);return n()("div",{style:l.container},void 0,n()(ga,{mode:ma.Button,query:i.query,setQueryFilter:function(e){o({query:e},{runSearchAfter:!0})}}),n()("div",{style:l.filterPillsContainer},void 0,n()(la,{lastEditedTime:i.lastEditedTime,createdTime:i.createdTime,setLastEditedTime:function(e){o({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){o({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}}),n()(va,{selectedTeamIds:i.teamIds,setSelectedTeamIds:function(e){o({teamIds:e})},onMenuClose:a,teamStores:s}),n()(ha,{spaceStore:t,sharedWithFilterItems:i.sharedWith,setSharedWithFilter:function(e){o({sharedWith:e})},runNewSearch:a,includeGroups:!0,includeGuests:!0}),n()(dt,{selectedAudience:i.audience,setSelectedAudience:function(e){o({audience:e})},onMenuClose:a}),n()(Zi,{spaceStore:t,createdByFilterIds:i.createdBy,setCreatedByFilter:function(e){o({createdBy:e})},runNewSearch:a,includeGuests:!0})))}var ba=i(26263),Ma=i(7406),wa=i(59753),Ca=i(45953),_a=i(21202),ka=i(66504);const Ta={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},Ia={...Ta,audience:["shared_externally","shared_internally","shared_to_web"]},Pa={filters:Ta,pageStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},xa={...Pa,filters:Ia};function Za(e){let{spaceStore:t,userStore:i}=e;const a=(0,Ze.VK)((()=>T.default.checkGate("enabled_bev_default_audience_filter")),[])?xa:Pa,n=(0,xe.O7)(),[o,s]=(0,r.useState)(a),l=(0,r.useRef)(a.filters),d=(0,r.useCallback)((async e=>{let{restartSearch:a,ignoreFilterComparison:r}=e;if(!r&&m.Xy(o.filters,l.current))return;l.current=o.filters;let d=o.loading,c=o.error,u=o.hasNextPage,p=o.numPagesLoaded,g=o.paginationToken;if(a&&(s((e=>({...Pa,showSuggestions:e.showSuggestions,filters:e.filters}))),d=Pa.loading,c=Pa.error,u=Pa.hasNextPage,p=Pa.numPagesLoaded,g=Pa.paginationToken),u&&!d&&!c){s((e=>({...e,showSuggestions:!1,loading:!0})));try{const e=await I.adminContentSearch(n,{spaceId:t.id,sort:{field:"relevance",direction:"desc"},limit:20,paginationToken:g,query:o.filters.query,audience:o.filters.audience,lastEditedTime:(0,ne.Hq)(o.filters.lastEditedTime),createdTime:(0,ne.Hq)(o.filters.createdTime),createdBy:o.filters.createdBy,sharedWith:o.filters.sharedWith,teamspaceIds:o.filters.teamIds});if("failed"===e.type)throw e.error;b.jdc(n,{filters:o.filters,pageNumber:p});const a=e.data.paginationToken,r=e.data.recordIds,l=function(e){const{recordMapWithRoleJson:t}=e,i=Ca.PF.create(t),a=Ca.PF.create();for(const{pointer:n,model:o}of i)if(o){const e=wa.kk.fromValue(n.table,m.Xh(o.__IM_SORRY__getValue()));a.setModelAndRole(n,e,"editor")}return a}({recordMapWithRoleJson:e.data.recordMap}),d=new ba.Z({name:"adminContentSearchSettings.useContentSearch",data:new ka.o({[i.id]:l})});d.addCacheFallback(n.defaultRecordCache.inMemoryRecordCache),s((e=>{const t=[],i=new Set(e.pageStores.map((e=>e.id)));for(const a of r)if(!i.has(a)){const e=new ft.G(n,{table:_a.iU,id:a},{inMemoryRecordCache:d});t.push(e)}const o=[...e.pageStores,...t];return{...e,pageStores:o,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:a,hasNextPage:Boolean(a)}}))}catch(h){const e=(0,Ma.tg)(h);s((t=>({...t,loading:!1,error:e})))}}}),[n,t,i,o.filters,o.loading,o.error,o.hasNextPage,o.numPagesLoaded,o.paginationToken]);(0,r.useEffect)((()=>{o.shouldReRunSearch&&(s((e=>({...e,shouldReRunSearch:!1}))),d({restartSearch:!0,ignoreFilterComparison:!1}))}),[o.shouldReRunSearch,d]);const c=(0,r.useCallback)((async()=>{o.shouldReRunSearch||await d({restartSearch:!1,ignoreFilterComparison:!0})}),[o.shouldReRunSearch,d]),u=(0,r.useCallback)((async e=>{await d({restartSearch:!0,ignoreFilterComparison:e||!1})}),[d]),p=(0,r.useCallback)(((e,t)=>{b.gL0(n,{newFilters:e}),s((i=>({...i,filters:{...i.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[n]);return{showSuggestions:o.showSuggestions,filters:o.filters,pageStores:o.pageStores,loading:o.loading,error:o.error,hasNextPage:o.hasNextPage,loadNextPage:c,runNewSearch:u,setFilters:p}}const Fa=function(e){let{spaceStore:t,userStore:i}=e;window.__c={n:"AdminContentSearchTab"};const a=(0,xe.O7)(),o=(0,Ze.VK)((()=>Ae.Z.state.online),[]),s=(0,Fe.yK)((e=>({})),[]),{showSuggestions:r,loadNextPage:l,pageStores:d,loading:c,error:u,runNewSearch:m,filters:p,setFilters:g}=Za({spaceStore:t,userStore:i});return o?n()(Be.Z,{},void 0,n()(Re.Z,{large:!a.device.isMobile||void 0,divider:a.device.isMobile?void 0:"full"},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.title",defaultMessage:"Content Search"})),n()("div",{style:s.description},void 0,n()(Ee.Z,{isMultiline:!0,style:{marginBottom:20}},void 0,n()(v.FormattedMessage,{id:"adminContentSearchTab.description",defaultMessage:"Search and filter for any page in the workspace, including private pages. Only workspace owners can use content search."})),n()(Ne,{spaceId:t.id,disabled:0===d.length,filters:p})),n()(Sa,{spaceStore:t,runNewSearch:m,setFilters:g,filters:p}),n()(vi,{loading:c,error:u,pageStores:d,loadNextPage:l,filters:p,setFilters:g,showSuggestions:r,runNewSearch:m})):n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{defaultMessage:"Please go online to access content search.",id:"adminContentSearchTab.offline.message"})))};var Aa=i(59730),Ea=i(31299),Ba=i(33954);class Ra extends D.default{getInitialState(){return{spaceId:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const Da=new Ra,La=(0,v.defineMessages)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}}),Na=async e=>{const{environment:t,spaceId:i}=e,a=await I.getHistoricalAuditLogUsers(t,{spaceId:i});return"success"!==a.type?[]:a.data.results},Oa=async e=>{const{environment:t,spaceId:i}=e;if(Da.getState().spaceId!==i&&Da.reset(),!i)return;const[a,n]=await Promise.all([Ea.Te({environment:t,membersOnly:!1}),Na({environment:t,spaceId:i})]),o={spaceId:i,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};a.userIds.forEach((e=>{o.allUserIds.add(e)})),a.botIds.forEach((e=>{o.allBotIds.add(e)})),n.forEach((e=>{var t;(t=e.actorId)!==Ot._H.id&&t!==ti.s$.id&&t!==ti.el.id||o.allUserIds.has(e.actorId)?e.actorType!==ti.KJ||o.allUserIds.has(e.actorId)?e.actorType!==Ot.cZ||o.allBotIds.has(e.actorId)||(o.allBotIds.add(e.actorId),o.removedBotIds.add(e.actorId)):(o.allUserIds.add(e.actorId),o.removedUserIds.add(e.actorId)):o.allUserIds.add(e.actorId)})),Da.setState(o)};class Va extends D.default{getInitialState(){return{open:!1}}}const Ua=new Va,Wa=(0,v.defineMessages)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});class za extends l.Z{constructor(){super(...arguments),this.renderCSVMenu=()=>{const e=[this.getCSVMenuItem(30),this.getCSVMenuItem(60),this.getCSVMenuItem(90),this.getCSVMenuItemWithConfirmation(365)];return n()(nt.Z,{menuType:Xe.og.Popup},void 0,n()(ot.Z,{type:ot.i.Vertical,sections:[{key:"results",render:e=>r.createElement(rt.Z,e),items:e}],initialFocus:0}))},this.getCSVMenuItem=e=>({key:e,render:()=>n()(it.Z,{focused:!1,title:q.default.formatMessage(Wa[e]),onClick:()=>{this.handleDismiss(),Ka(this.environment,e)}}),action:()=>{}}),this.getCSVMenuItemWithConfirmation=e=>({key:e,render:()=>n()(it.Z,{focused:!1,title:q.default.formatMessage(Wa[e]),onClick:()=>{M.showDialog({message:n()(v.FormattedMessage,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:n()(v.FormattedMessage,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{this.handleDismiss(),Ka(this.environment,e)}}]})}}),action:()=>{}}),this.handleDismiss=()=>{Ua.setState({open:!1})},this.popOpenOptions=e=>{Ua.setState({open:e})}}renderComponent(){const e=Ua.state;return n()(st.ZP,{popupType:st.ZP.PopupType.Popup,open:e.open,placementToOrigin:st.ZP.Placement.Bottom,alignmentToOrigin:st.ZP.Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:this.renderCSVMenu,onDismiss:this.handleDismiss,enableOutsideClickDismiss:!0,origin:n()(Nt.Z,{renderTooltip:()=>n()(v.FormattedMessage,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:t=>r.createElement(He.Z,s()({isLarge:!0,onClick:()=>this.popOpenOptions(!e.open)},t),q.default.formatMessage(Wa.Export))})})}}za.displayName="AuditLogCSV";const Ka=(e,t)=>{const{currentSpaceStore:i}=B.default.state;i&&De.PN(e,{spaceId:i.id,exportOptions:{duration:t}})},Ha=(0,v.injectIntl)(za);var Ga=i(66897),qa=i(74136),ja=i(97680);class Ya extends D.default{getInitialState(){return{tempSelections:new Set([])}}setTempSelections(e){this.setState({tempSelections:new Set(e)})}}class $a extends l.Z{constructor(){super(...arguments),this.storeTypes={localStore:Ya},this.renderResultMenuItem=(e,t)=>{var i;const{intl:a,auditLogHistoricalUserStore:o}=this.props,{localStore:l}=this.stores,d=this.getActor(e);return r.createElement(ja.Z,s()({},t,{key:e,actor:d,useEmailAsTooltip:!0,checkState:l.state.tempSelections.has(e),userTitle:n()("div",{style:{display:"flex",gap:4}},void 0,(0,Ga.$4)(a,d),o.isUserOrBotRemoved(null===(i=d.asActor)||void 0===i?void 0:i.id)&&n()(qa.Z,{},void 0,n()(v.FormattedMessage,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})))}))},this.performRequest=async e=>{let{query:t,current:i}=e;const{allUserIds:a,allBotIds:n}=this.props.auditLogHistoricalUserStore.getState(),o=await Ea.ri({environment:this.environment,query:t,userIds:[...a],botIds:[...n]}),s=[...o.users.map((e=>`notion_user:${e.id}`)),...o.bots.map((e=>`bot:${e.id}`))];if(t.length>0)return s.slice(0,100);const r=this.props.selectedActors.map(ne.eW),l=new Set(r),d=s.filter((e=>!l.has(e)));return[...r,...d].slice(0,Math.max(r.length,100))},this.createUserValue=e=>ft.U6.createChildStore(this.props.parentStore,{table:ti.KJ,id:e}).getValue(),this.createBotValue=e=>(0,ft.Kv)(this.props.parentStore,{table:Ot.cZ,id:e}).getValue()}didMount(){this.updateTempSelectionFromProps()}renderComponent(){const{selectedActors:e,intl:t}=this.props,{localStore:i}=this.stores,a=n()(v.FormattedMessage,{id:"auditlogActorFilter.title",defaultMessage:"User"});return n()(na.Z,{mode:na.z.Pill,title:a,icon:wi.f,iconStyles:{marginRight:2},items:Array.from(i.state.tempSelections),hasItemsSelected:(null==e?void 0:e.length)>0,onChange:e=>{i.setTempSelections(e)},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:e=>{"applyButton"!==e?this.updateTempSelectionFromProps():this.updateOnChangeToParent()},labelText:{title:a,tokenInputPlaceholder:t.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:t.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}updateOnChangeToParent(){const{onChange:e}=this.props,{localStore:t}=this.stores;e(Array.from(t.state.tempSelections).map(ne.Ij).filter((e=>Boolean(e))))}updateTempSelectionFromProps(){const{selectedActors:e}=this.props,{localStore:t}=this.stores,i=e.map(ne.eW);t.setTempSelections(i)}getActor(e){const t=(0,ne.Ij)(e);return t?"notion_user"===t.actorType?(0,Ga.m3)(this.createUserValue(t.actorId)):(0,Ga.ON)(this.createBotValue(t.actorId)):(0,Ga.m3)(void 0)}}$a.displayName="AuditLogActorFilter";const Qa=(0,v.injectIntl)($a),Ja={audit_log_aes_event_read:[],audit_log_permanently_deleted_filter_enable:["page.permanently_deleted"],enable_suspend_managed_users:["user_suspended","user_unsuspended"],enable_prevent_granting_support_access:["workspace.settings.prevent_granting_support_access_updated"],enable_set_managed_users_profile_data:["workspace.settings.prevent_profile_edits_updated"],enable_custom_session_duration:["workspace.settings.custom_session_duration_updated"],enabled_reject_join_external_workspaces:["workspace.settings.external_workspace_access_updated"],enable_logout_managed_users:["admin_managed_users_log_out_all","admin_managed_users_log_out_one"],enable_password_reset_managed_users:["admin_managed_users_password_cleared","admin_managed_users_password_cleared_one"]};const Xa={admin_content_search_exported:"workspace.content_search_exported",admin_content_search_queried:"workspace.content_search_queried",ai_admin_legal_acceptance_toggled:"workspace.settings.ai_legal_terms_setting_updated",allowed_email_domain_added:"workspace.settings.email_domain_added",allowed_email_domain_removed:"workspace.settings.email_domain_removed",allowed_support_access:"user.settings.support_access_granted",audit_log_exported:"workspace.audit_log_exported",automatic_account_creation_toggled:"workspace.settings.automatic_account_creation_setting_updated",automation_created:"page.automation_created",automation_edited:"page.automation_updated",content_analytics_exported:"workspace.content_analytics_exported",disable_guests_toggled:"workspace.settings.allow_guests_setting_updated",email_changed:"user.settings.email_updated",export_toggled:"workspace.settings.allow_content_export_setting_updated",external_membership_requests_toggled:"workspace.settings.external_membership_request_setting_updated",file_downloaded:"page.file_downloaded",file_uploaded:"page.file_uploaded",group_added_to_team:"teamspace.permissions.group_added",group_removed_from_team:"teamspace.permissions.group_removed",guest_membership_requests_toggled:"workspace.settings.guest_membership_request_setting_updated",guest_removed:"workspace.permissions.guest_removed",idp_metadata_url_updated:"workspace.saml_sso_idp_metadata_url_updated",idp_metadata_xml_removed:"workspace.saml_sso_idp_metadata_xml_removed",invite_link_toggled:"workspace.settings.invite_link_setting_updated",invite_link_reset:"workspace.settings.invite_link_reset",login:"user.login",logout:"user.logout",mfa_backup_code_toggled:"user.settings.login_method.mfa_backup_code_updated",mfa_sms_toggled:"user.settings.login_method.mfa_sms_updated",mfa_totp_toggled:"user.settings.login_method.mfa_totp_updated",member_added_to_group:"workspace.group.permissions.member_added",member_added_to_team:"teamspace.permissions.member_added",member_invited:"workspace.permissions.member_invited",member_joined:"workspace.permissions.member_added",member_joined_team:"teamspace.permissions.member_added",member_left_team:"teamspace.permissions.member_removed",member_removed:"workspace.permissions.member_removed",member_removed_from_group:"workspace.group.permissions.member_removed",member_removed_from_team:"teamspace.permissions.member_removed",member_role_updated:"workspace.permissions.member_role_updated",member_team_role_updated:"teamspace.permissions.member_role_updated",membership_request_resolved:"workspace.membership_request_resolved",membership_requests_toggled:"workspace.settings.membership_request_setting_updated",page_access_requests_toggled:"workspace.settings.page_access_request_setting_updated",page_created:"page.created",page_deleted:"page.deleted","page.discussion.comment.created":"page.discussion.comment.created","page.discussion.comment.deleted":"page.discussion.comment.deleted","page.discussion.comment.updated":"page.discussion.comment.updated",page_edited:"page.content_edited",page_exported:"page.exported",page_moved:"page.moved","page.properties_edited":"page.properties_edited","page.permanently_deleted":"page.permanently_deleted",page_restored:"page.restored_from_trash",page_viewed:"page.viewed",pages_to_other_workspaces_toggled:"workspace.settings.duplicate_pages_to_workspaces_setting_updated",password_cleared:"user.settings.login_method.password_removed",password_changed:"user.settings.login_method.password_updated",password_set:"user.settings.login_method.password_added",picture_changed:"user.settings.profile_photo_updated",preferred_name_changed:"user.settings.preferred_name_updated",private_content_transferred:"workspace.private_content_transferred",public_page_cleared:"workspace.settings.public_homepage_removed",public_page_sharing_toggled:"teamspace.settings.allow_public_page_sharing_setting_updated",revoked_support_access:"user.settings.support_access_revoked",saml_enforce_toggled:"workspace.settings.enforce_saml_sso_config_updated",saml_toggled:"workspace.settings.enable_saml_sso_config_updated",scim_token_generated:"workspace.scim_token_generated",scim_token_revoked:"workspace.scim_token_revoked",space_claim_and_upgrade_status_changed:"workspace.domain_management.claim_request_status_updated",space_claim_deletion_status_changed:"workspace.domain_management.deletion_request_status_updated",space_transfer_status_changed:"workspace.domain_management.transfer_request_status_updated",team_archived:"teamspace.archived",team_created:"teamspace.created",team_creation_admins_setting_toggled:"workspace.settings.allow_teamspace_creation_setting_updated",team_default_toggled:"teamspace.settings.default_setting_updated",team_description_changed:"teamspace.settings.description_updated",team_export_toggled:"teamspace.settings.allow_content_export_setting_updated",team_guests_toggled:"teamspace.settings.allow_guests_setting_updated",team_icon_changed:"teamspace.settings.icon_updated",team_invite_access_changed:"teamspace.settings.member_invitation_setting_updated",team_member_default_permission_updated:"teamspace.permissions.default_member_role_updated",team_name_changed:"teamspace.settings.name_updated",team_privacy_type_changed:"teamspace.settings.privacy_type_updated",team_public_page_sharing_toggled:"teamspace.settings.allow_public_page_sharing_setting_updated",team_restored:"teamspace.restored",team_sidebar_editing_toggled:"teamspace.settings.allow_sidebar_editing_setting_updated",teams_enabled_for_space:"workspace.settings.teamspaces_enabled_updated",user_analytics_exported:"workspace.user_analytics_exported",user_deleted:"user.account_deleted",workspace_analytics_toggled:"workspace.settings.analytics_tracking_setting_updated",workspace_creation_set_for_email_domain:"workspace.settings.allow_workspace_creation_setting_updated",workspace_domain_changed:"workspace.settings.public_pages_domain_updated",workspace_exported:"workspace.content_exported",workspace_icon_changed:"workspace.settings.icon_updated",workspace_integration_restriction_changed:"workspace.settings.integration_restriction_settings_updated",workspace_name_changed:"workspace.settings.name_updated",workspace_sidebar_editing_toggled:"workspace.settings.sidebar_editing_setting_updated","integration.created":"integration.created","integration.deleted":"integration.deleted"},en=["admin_managed_users_log_out_all","admin_managed_users_log_out_one","admin_managed_users_password_cleared","admin_managed_users_password_cleared_one","disable_team_guests_toggled","space_consolidation_completed","space_consolidation_failed","space_consolidation_started","team_guest_default_permission_updated","user_suspended","user_unsuspended","workspace.settings.custom_session_duration_updated","workspace.settings.external_workspace_access_updated","workspace.settings.prevent_granting_support_access_updated","workspace.settings.prevent_profile_edits_updated"];(0,A.AO)((e=>{for(const t of X)if(t===e)return{true:e};return{false:e}})),(0,A.AO)((e=>{for(const t of J)if(t===e)return{true:e};return{false:e}}));var tn=i(8848),an=i(7057);const nn=(0,v.defineMessages)({adminLabel:{id:"auditLogSpaceRoleMessages.admin",defaultMessage:"admin"},workspaceOwnerLabel:{id:"auditLogSpaceRoleMessages.workspaceOwner",defaultMessage:"workspace owner"},membershipAdminLabel:{id:"auditLogSpaceRoleMessages.membershipAdmin",defaultMessage:"membership admin"},memberLabel:{id:"auditLogSpaceRoleMessages.member",defaultMessage:"member"},guestLabel:{id:"auditLogSpaceRoleMessages.guest",defaultMessage:"guest"},noAccessLabel:{id:"auditLogSpaceRoleMessages.noAccess",defaultMessage:"no access"},pageGuestLabel:{id:"auditLogSpaceRoleMessages.pageGuest",defaultMessage:"page guest"},teamGuestLabel:{id:"auditLogSpaceRoleMessages.teamGuest",defaultMessage:"teamspace guest"}}),on=(0,v.defineMessages)({missing:{defaultMessage:"MISSING",id:"csvExport.copiedText.missingField"},notApplicable:{defaultMessage:"N/A",id:"csvExport.copiedText.notApplicable"}});function sn(e){return`"${e.replace(/"/g,'""')}"`}const rn={defaultMessage:"N/A",id:"auditLogPaginatedTable.copiedText.notAvailable",description:"Shown in the copied text when the value is not available. Means not applicable"},ln=((0,A.AO)((e=>30===e||60===e||90===e||365===e?{true:e}:{false:e})),(0,v.defineMessages)({"page.properties_edited":{id:"auditlogEventFilter.actionName.page.properties_edited",defaultMessage:"Page properties edited"},"page.discussion.comment.created":{id:"auditlogEventFilter.actionName.page.discussion.comment.created",defaultMessage:"Comment added"},"page.discussion.comment.updated":{id:"auditlogEventFilter.actionName.page.discussion.comment.updated",defaultMessage:"Comment updated"},"page.discussion.comment.deleted":{id:"auditlogEventFilter.actionName.page.discussion.comment.deleted",defaultMessage:"Comment deleted"},page_edited:{id:"auditlogEventFilter.actionName.page_edited",defaultMessage:"Page edited"},page_viewed:{id:"auditlogEventFilter.actionName.page_viewed",defaultMessage:"Page viewed"},page_created:{id:"auditlogEventFilter.actionName.page_created",defaultMessage:"Page created"},page_deleted:{id:"auditlogEventFilter.actionName.page_deleted",defaultMessage:"Page deleted"},"page.permanently_deleted":{id:"auditlogEventFilter.actionName.page.permanently_deleted",defaultMessage:"Page permanently deleted"},page_restored:{id:"auditlogEventFilter.actionName.page_restored",defaultMessage:"Page restored"},page_exported:{id:"auditlogEventFilter.actionName.page_exported",defaultMessage:"Page exported"},page_moved:{id:"auditlogEventFilter.actionName.page_moved",defaultMessage:"Page moved"},page_permission_updated:{id:"auditlogEventFilter.actionName.page_permission_updated",defaultMessage:"Page permission updated"},page_shared_to_web:{id:"auditlogEventFilter.actionName.page_shared_to_web",defaultMessage:"Page shared to web"},password_set:{id:"auditlogEventFilter.actionName.password_set",defaultMessage:"Password set"},password_cleared:{id:"auditlogEventFilter.actionName.password_cleared",defaultMessage:"Password cleared"},password_changed:{id:"auditlogEventFilter.actionName.password_changed",defaultMessage:"Password changed"},login:{id:"auditlogEventFilter.actionName.login",defaultMessage:"Login"},logout:{id:"auditlogEventFilter.actionName.logout",defaultMessage:"Logout"},mfa_sms_toggled:{id:"auditlogEventFilter.actionName.mfa_sms_toggled",defaultMessage:"MFA SMS toggled"},mfa_totp_toggled:{id:"auditlogEventFilter.actionName.mfa_totp_toggled",defaultMessage:"MFA TOTP toggled"},mfa_backup_code_toggled:{id:"auditlogEventFilter.actionName.mfa_backup_code_toggled",defaultMessage:"MFA backup code toggled"},member_invited:{id:"auditlogEventFilter.actionName.member_invited",defaultMessage:"Member invited"},member_joined:{id:"auditlogEventFilter.actionName.member_joined",defaultMessage:"Member joined"},member_role_updated:{id:"auditlogEventFilter.actionName.member_role_updated",defaultMessage:"Member role updated"},member_removed:{id:"auditlogEventFilter.actionName.member_removed",defaultMessage:"Member removed"},guest_removed:{id:"auditlogEventFilter.actionName.guest_removed",defaultMessage:"Guest removed"},user_deleted:{id:"auditlogEventFilter.actionName.user_deleted",defaultMessage:"User deleted"},email_changed:{id:"auditlogEventFilter.actionName.email_changed",defaultMessage:"Email changed"},preferred_name_changed:{id:"auditlogEventFilter.actionName.preferred_name_changed",defaultMessage:"Name changed"},picture_changed:{id:"auditlogEventFilter.actionName.picture_changed",defaultMessage:"Picture changed"},file_uploaded:{id:"auditlogEventFilter.actionName.file_uploaded",defaultMessage:"File uploaded"},file_downloaded:{id:"auditlogEventFilter.actionName.file_downloaded",defaultMessage:"File downloaded"},invite_link_toggled:{id:"auditlogEventFilter.actionName.invite_link_toggled",defaultMessage:"Invite link toggled"},workspace_name_changed:{id:"auditlogEventFilter.actionNames.workspace_name_changed",defaultMessage:"Workspace name changed"},workspace_integration_restriction_changed:{id:"auditlogEventFilter.actionNames.workspace_integration_restriction_changed",defaultMessage:"Integration installation toggled"},invite_link_reset:{id:"auditlogEventFilter.actionNames.invite_link_reset",defaultMessage:"Invite link reset"},public_page_sharing_toggled:{id:"auditlogEventFilter.actionNames.public_page_sharing_toggled",defaultMessage:"Public page sharing toggled"},workspace_sidebar_editing_toggled:{id:"auditlogEventFilter.actionNames.workspace_sidebar_editing_toggled",defaultMessage:"Workspace sidebar editing toggled"},disable_team_guests_toggled:{id:"auditlogEventFilter.actionNames.disable_team_guests_toggled",defaultMessage:"Disable teamspace guests toggled"},disable_guests_toggled:{id:"auditlogEventFilter.actionNames.disable_guests_toggled",defaultMessage:"Disable guests toggled"},pages_to_other_workspaces_toggled:{id:"auditlogEventFilter.actionNames.pages_to_other_workspaces_toggled",defaultMessage:"Pages to other workspaces toggled"},export_toggled:{id:"auditlogEventFilter.actionNames.export_toggled",defaultMessage:"Export toggled"},page_access_requests_toggled:{id:"auditlogEventFilter.actionNames.page_access_requests_toggled",defaultMessage:"Page access requests toggled"},workspace_exported:{id:"auditlogEventFilter.actionNames.workspace_exported",defaultMessage:"Workspace content exported"},audit_log_exported:{id:"auditlogEventFilter.actionNames.audit_log_exported",defaultMessage:"Audit Log exported"},user_analytics_exported:{id:"auditlogEventFilter.actionNames.user_analytics_exported",defaultMessage:"User Analytics exported"},content_analytics_exported:{id:"auditlogEventFilter.actionNames.content_analytics_exported",defaultMessage:"Content Analytics exported"},workspace_icon_changed:{id:"auditlogEventFilter.actionNames.workspace_icon_changed",defaultMessage:"Workspace icon changed"},allowed_email_domain_added:{id:"auditlogEventFilter.actionNames.allowed_email_domain_added",defaultMessage:"Added allowed email domain"},allowed_email_domain_removed:{id:"auditlogEventFilter.actionNames.allowed_email_domain_removed",defaultMessage:"Removed allowed email domain"},workspace_domain_changed:{id:"auditlogEventFilter.actionNames.workspace_domain_changed",defaultMessage:"Workspace domain changed"},public_page_cleared:{id:"auditlogEventFilter.actionNames.public_page_cleared",defaultMessage:"Public home page link cleared"},public_page_set:{id:"auditlogEventFilter.actionNames.public_page_set",defaultMessage:"Public home page set"},scim_token_generated:{id:"auditlogEventFilter.actionNames.scim_token_generated",defaultMessage:"SCIM token generated"},scim_token_revoked:{id:"auditlogEventFilter.actionNames.scim_token_revoked",defaultMessage:"SCIM token revoked"},idp_metadata_url_updated:{id:"auditlogEventFilter.actionNames.idp_metadata_url_updated",defaultMessage:"IDP metadata URL updated"},idp_metadata_xml_updated:{id:"auditlogEventFilter.actionNames.idp_metadata_xml_updated",defaultMessage:"IDP metadata XML updated"},idp_metadata_xml_removed:{id:"auditlogEventFilter.actionNames.idp_metadata_xml_removed",defaultMessage:"IDP metadata XML removed"},saml_toggled:{id:"auditlogEventFilter.actionNames.saml_toggled",defaultMessage:"SAML enable setting toggled"},saml_enforce_toggled:{id:"auditlogEventFilter.actionNames.saml_enforce_toggled",defaultMessage:"SAML enforce setting toggled"},automatic_account_creation_toggled:{id:"auditlogEventFilter.actionNames.automatic_account_creation_toggled",defaultMessage:"Auto-create accounts on sign-in toggled"},workspace_creation_set_for_email_domain:{id:"auditlogEventFilter.actionNames.workspace_creation_set_for_email_domain",defaultMessage:"Workspace creation setting updated"},"integration.created":{id:"auditlogEventFilter.actionNames.integration.created",defaultMessage:"Integration added to workspace"},"integration.deleted":{id:"auditlogEventFilter.actionNames.integration.deleted",defaultMessage:"Integration removed from workspace"},"workspace.settings.custom_session_duration_updated":{id:"auditlogEventFilter.actionNames.workspace_domain_settings_session_duration_updated",defaultMessage:"Session duration for managed users updated"},"workspace.settings.external_workspace_access_updated":{id:"auditlogEventFilter.actionNames.workspace_domain_settings_external_workspace_access_updated",defaultMessage:"Ability for managed users to join external workspaces updated"},"workspace.settings.prevent_profile_edits_updated":{id:"auditlogEventFilter.actionNames.workspace_domain_prevent_profile_edits_updated",defaultMessage:"Ability for managed users to edit their profile information updated"},"workspace.settings.prevent_granting_support_access_updated":{id:"auditlogEventFilter.actionNames.workspace_domain_prevent_granting_support_access_updated",defaultMessage:"Ability for managed users to grant support access updated"},member_added_to_group:{id:"auditlogEventFilter.actionNames.member_added_to_group",defaultMessage:"Member added to group"},member_removed_from_group:{id:"auditlogEventFilter.actionNames.member_removed_from_group",defaultMessage:"Member removed from group"},space_transfer_status_changed:{id:"auditlogEventFilter.actionNames.space_transfer_status_changed",defaultMessage:"Claimable workspace transfer status change"},space_claim_and_upgrade_status_changed:{id:"auditlogEventFilter.actionNames.space_claim_and_upgrade_status_changed",defaultMessage:"Claimable workspace upgrade status change"},space_claim_deletion_status_changed:{id:"auditlogEventFilter.actionNames.space_claim_deletion_status_changed",defaultMessage:"Claimable workspace deletion status change"},allowed_support_access:{id:"auditlogEventFilter.actionNames.allowed_support_access",defaultMessage:"Granted support access"},revoked_support_access:{id:"auditlogEventFilter.actionNames.revoked_support_access",defaultMessage:"Revoked support access"},membership_requests_toggled:{id:"auditlogEventFilter.actionNames.membership_requests_toggled",defaultMessage:"Membership requests toggled"},external_membership_requests_toggled:{id:"auditlogEventFilter.actionNames.external_membership_requests_toggled",defaultMessage:"External membership requests toggled"},membership_request_resolved:{id:"auditlogEventFilter.actionNames.membership_request_resolved",defaultMessage:"Membership request resolved"},guest_membership_requests_toggled:{id:"auditlogEventFilter.actionNames.guest_membership_requests_toggled",defaultMessage:"Guest membership requests toggled"},team_created:{id:"auditlogEventFilter.actionNames.team_created",defaultMessage:"Teamspace created"},team_archived:{id:"auditlogEventFilter.actionNames.team_archived",defaultMessage:"Teamspace archived"},team_restored:{id:"auditlogEventFilter.actionNames.team_restored",defaultMessage:"Teamspace restored"},team_default_toggled:{id:"auditlogEventFilter.actionNames.team_default_toggled",defaultMessage:"Teamspace default toggled"},team_privacy_type_changed:{id:"auditlogEventFilter.actionNames.team_privacy_type_changed",defaultMessage:"Teamspace privacy type changed"},team_invite_access_changed:{id:"auditlogEventFilter.actionNames.team_invite_access_changed",defaultMessage:"Teamspace invite access changed"},team_public_page_sharing_toggled:{id:"auditlogEventFilter.actionNames.team_public_page_sharing_toggled",defaultMessage:"Teamspace public page sharing toggled"},team_export_toggled:{id:"auditlogEventFilter.actionNames.team_export_toggled",defaultMessage:"Teamspace export toggled"},team_sidebar_editing_toggled:{id:"auditlogEventFilter.actionNames.team_sidebar_editing_toggled",defaultMessage:"Teamspace sidebar editing toggled"},team_guests_toggled:{id:"auditlogEventFilter.actionNames.team_guests_toggled",defaultMessage:"Teamspace disable guests toggled"},team_name_changed:{id:"auditlogEventFilter.actionNames.team_name_changed",defaultMessage:"Teamspace name changed"},team_description_changed:{id:"auditlogEventFilter.actionNames.team_description_changed",defaultMessage:"Teamspace description changed"},team_icon_changed:{id:"auditlogEventFilter.actionNames.team_icon_changed",defaultMessage:"Teamspace icon changed"},team_creation_admins_setting_toggled:{id:"auditlogEventFilter.actionNames.team_creation_admins_setting_toggled",defaultMessage:"Teamspace creation setting toggled"},member_added_to_team:{id:"auditlogEventFilter.actionNames.member_added_to_team",defaultMessage:"Member added to teamspace"},member_removed_from_team:{id:"auditlogEventFilter.actionNames.member_removed_from_team",defaultMessage:"Member removed from teamspace"},group_added_to_team:{id:"auditlogEventFilter.actionNames.group_added_to_team",defaultMessage:"Group added to teamspace"},group_removed_from_team:{id:"auditlogEventFilter.actionNames.group_removed_from_team",defaultMessage:"Group removed from teamspace"},member_left_team:{id:"auditlogEventFilter.actionNames.member_left_team",defaultMessage:"Member left teamspace"},member_joined_team:{id:"auditlogEventFilter.actionNames.member_joined_team",defaultMessage:"Member joined teamspace"},member_team_role_updated:{id:"auditlogEventFilter.actionNames.member_team_role_updated",defaultMessage:"Member teamspace role updated"},team_user_permission_updated:{id:"auditlogEventFilter.actionNames.team_user_permission_updated",defaultMessage:"Custom permissions updated for a member in the teamspace"},team_group_permission_updated:{id:"auditlogEventFilter.actionNames.team_group_permission_updated",defaultMessage:"Custom permissions updated for a group in the teamspace"},team_member_default_permission_updated:{id:"auditlogEventFilter.actionNames.team_member_default_permission_updated",defaultMessage:"Teamspace Members default permission updated"},team_guest_default_permission_updated:{id:"auditlogEventFilter.actionNames.team_guest_default_permission_updated",defaultMessage:"Teamspace Guests default permission updated"},team_workspace_default_permission_updated:{id:"auditlogEventFilter.actionNames.team_workspace_default_permission_updated",defaultMessage:"Everyone in workspace default page permission updated"},teams_enabled_for_space:{id:"auditlogEventFilter.actionNames.teams_enabled_for_space",defaultMessage:"Enabled teamspaces"},private_content_transferred:{id:"auditLogEventFilter.actionNames.private_content_transferred",defaultMessage:"Private content transferred"},admin_content_search_queried:{id:"auditLogEventFilter.actionNames.admin_content_search_queried",defaultMessage:"Content search queried"},admin_content_search_exported:{id:"auditLogEventFilter.actionNames.admin_content_search_exported",defaultMessage:"Content search results exported"},admin_managed_users_log_out_all:{id:"auditLogEventFilter.actionNames.admin_managed_users_log_out_all",defaultMessage:"All managed users logged out"},admin_managed_users_log_out_one:{id:"auditLogEventFilter.actionNames.admin_managed_users_log_out_one",defaultMessage:"A managed user was logged out by an admin"},admin_managed_users_password_cleared:{id:"auditLogEventFilter.actionNames.password_cleared",defaultMessage:"All managed users' passwords cleared"},admin_managed_users_password_cleared_one:{id:"auditLogEventFilter.actionNames.admin_managed_users_password_cleared_one",defaultMessage:"A managed user's password was cleared by an admin"},automation_created:{id:"auditLogEventFilter.actionNames.automation_created",defaultMessage:"Automation created"},automation_edited:{id:"auditLogEventFilter.actionNames.automation_edited",defaultMessage:"Automation edited"},ai_admin_legal_acceptance_toggled:{id:"auditLogEventFilter.actionNames.ai_admin_legal_acceptance_toggled",defaultMessage:"Notion AI toggled for workspace."},workspace_analytics_toggled:{id:"auditLogEventFilter.actionNames.workspace_analytics_toggled",defaultMessage:"Workspace analytics tracking toggled"},space_consolidation_started:{id:"auditLogEventFilter.actionNames.space_consolidation_started",defaultMessage:"Workspace consolidation started"},space_consolidation_completed:{id:"auditLogEventFilter.actionNames.space_consolidation_completed",defaultMessage:"Workspace consolidation completed"},space_consolidation_failed:{id:"auditLogEventFilter.actionNames.space_consolidation_failed",defaultMessage:"Workspace consolidation failed"},user_suspended:{id:"auditLogEventFilter.actionNames.user_suspended",defaultMessage:"User suspended"},user_unsuspended:{id:"auditLogEventFilter.actionNames.user_unsuspended",defaultMessage:"User reactivated"}})),dn=(0,v.defineMessages)({private:{id:"auditLogColumnEvent.tooltip.pageAudience.private",defaultMessage:"private"},shared_internally:{id:"auditLogColumnEvent.tooltip.pageAudience.sharedInternally",defaultMessage:"shared internally"},shared_externally:{id:"auditLogColumnEvent.tooltip.pageAudience.sharedExternally",defaultMessage:"shared externally"},shared_to_web:{id:"auditLogColumnEvent.tooltip.pageAudience.sharedToWeb",defaultMessage:"shared to web"}}),cn=["name","email","status","activityType","activity","audience","dateAndTime","platform","ipAddress","city","state","country","pageId"],un=[...cn,"eventName"];(0,v.defineMessages)({name:{id:"exportAuditLog.header.name",defaultMessage:"Name"},email:{id:"exportAuditLog.header.email",defaultMessage:"Email"},status:{id:"exportAuditLog.header.status",defaultMessage:"Status"},activityType:{id:"exportAuditLog.header.activityType",defaultMessage:"Activity Type"},activity:{id:"exportAuditLog.header.activity",defaultMessage:"Activity"},dateAndTime:{id:"exportAuditLog.header.dateAndTime",defaultMessage:"Date and Time (UTC)"},platform:{id:"exportAuditLog.header.platform",defaultMessage:"Platform"},ipAddress:{id:"exportAuditLog.header.ipAddress",defaultMessage:"IP Address"},city:{id:"exportAuditLog.header.city",defaultMessage:"City"},state:{id:"exportAuditLog.header.state",defaultMessage:"State"},country:{id:"exportAuditLog.header.country",defaultMessage:"Country"},audience:{id:"exportAuditLog.header.audience",defaultMessage:"Audience"},pageId:{id:"exportAuditLog.header.pageId",defaultMessage:"Page Id"},eventName:{id:"exportAuditLog.header.eventName",defaultMessage:"Event Name"}});function mn(e,t,i){var a;return e.actor.actorId===ti.s$.id||e.actor.actorId===ti.el.id?t.formatMessage({defaultMessage:"notion_admin",id:"auditLogPaginatedTable.copiedText.notionAdmin"}):"notion_user"===e.actor.actorType?t.formatMessage(function(e,t){if(!e)return nn.noAccessLabel;if(t){if("guest"===e)return nn.pageGuestLabel;if("team_level_guest"===e)return nn.teamGuestLabel}switch(e){case"admin":return nn.workspaceOwnerLabel;case"membership_admin":return nn.membershipAdminLabel;case"member":return nn.memberLabel;case"guest":case"team_level_guest":return nn.guestLabel;case"no_access":return nn.noAccessLabel;default:(0,A.t1)(e)}}(null===(a=e.actor.meta)||void 0===a?void 0:a.spaceRole,i)):t.formatMessage({defaultMessage:"N/A",id:"auditLogPaginatedTable.copiedText.noRole"})}function pn(e,t){var i,a,n,o,s,r,l,d,c,u;return null!==(i=e.actor.meta)&&void 0!==i&&i.countryCode?null!==(a=e.actor)&&void 0!==a&&null!==(a=a.meta)&&void 0!==a&&a.city?"US"===(null===(n=e.actor.meta)||void 0===n?void 0:n.countryCode)&&null!==(o=e.actor)&&void 0!==o&&null!==(o=o.meta)&&void 0!==o&&o.state?t.formatMessage({defaultMessage:"{city}, {state}, {countryCode}",id:"auditLogSettings.metadata.cityStateAndCountry"},{city:null===(d=e.actor)||void 0===d||null===(d=d.meta)||void 0===d?void 0:d.city,state:null===(c=e.actor)||void 0===c||null===(c=c.meta)||void 0===c?void 0:c.state,countryCode:null===(u=e.actor)||void 0===u||null===(u=u.meta)||void 0===u?void 0:u.countryCode}):t.formatMessage({defaultMessage:"{city}, {countryCode}",id:"auditLogSettings.metadata.cityAndCountry"},{city:null===(s=e.actor)||void 0===s||null===(s=s.meta)||void 0===s?void 0:s.city,countryCode:null===(r=e.actor)||void 0===r||null===(r=r.meta)||void 0===r?void 0:r.countryCode}):null===(l=e.actor)||void 0===l||null===(l=l.meta)||void 0===l?void 0:l.countryCode:""}function gn(e){const{auditLogEntry:t,intl:i,getAuditLogEventText:a,isTeamGuestsEnabled:n,csvColumnNames:o}=e,s=[],r=i.formatMessage(on.missing);return o.forEach((e=>{var o,l,d,c,u;switch(e){case"name":s.push(t.actor.name||r);break;case"email":s.push(function(e,t){return"notion_user"===e.actor.actorType?e.actor.email:t.formatMessage({defaultMessage:"N/A",id:"auditLogPaginatedTable.copiedText.noEmail"})}(t,i)||r);break;case"status":s.push(mn(t,i,n)||r);break;case"activityType":s.push(ln[t.actionName]?i.formatMessage(ln[t.actionName]):r);break;case"activity":s.push(a(t)||r);break;case"dateAndTime":s.push((0,an.$I)(t.serverTimestamp));break;case"platform":s.push((null===(o=t.actor.meta)||void 0===o?void 0:o.platform)||r);break;case"ipAddress":s.push((null===(l=t.actor.meta)||void 0===l?void 0:l.ipAddress)||r);break;case"city":s.push((null===(d=t.actor.meta)||void 0===d?void 0:d.city)||r);break;case"state":s.push((null===(c=t.actor.meta)||void 0===c?void 0:c.state)||r);break;case"country":s.push((null===(u=t.actor.meta)||void 0===u?void 0:u.countryCode)||r);break;case"audience":const m=function(e){return hn(e)??e.intl.formatMessage(on.notApplicable)}({auditLogEntry:t,intl:i});s.push(m||r);break;case"pageId":const p=ie(t);p?s.push(p.id):s.push(i.formatMessage(on.notApplicable));break;case"eventName":s.push(function(e){let{auditLogEntry:t,intl:i}=e;const a=t.actionName;return Xa[a]?Xa[a]:((0,A.DE)(en,a),i.formatMessage(rn))}({auditLogEntry:t,intl:i}));break;default:(0,A.t1)(e)}})),s.map(sn).join(",")}function hn(e){var t;const{auditLogEntry:i,intl:a}=e,n=ie(i);return null!=n&&null!==(t=n.meta)&&void 0!==t&&t.pageAudience?a.formatMessage(dn[n.meta.pageAudience]):null}var fn=i(58573),vn=i(67220);let yn=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class Sn extends D.default{getInitialState(){return{categorySelections:{page:yn.All,space:yn.All,team:yn.All,account:yn.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0},searchQuery:void 0,actionSelections:{"page.properties_edited":!0,page_edited:!0,page_viewed:!0,page_created:!0,page_deleted:!0,"page.permanently_deleted":!0,page_restored:!0,page_exported:!0,page_moved:!0,page_permission_updated:!0,page_shared_to_web:!0,private_content_transferred:!0,automation_created:!0,automation_edited:!0,password_set:!0,password_cleared:!0,password_changed:!0,login:!0,logout:!0,member_invited:!0,member_role_updated:!0,member_removed:!0,guest_removed:!0,email_changed:!0,user_deleted:!0,member_joined:!0,preferred_name_changed:!0,picture_changed:!0,workspace_name_changed:!0,workspace_icon_changed:!0,allowed_email_domain_added:!0,allowed_email_domain_removed:!0,workspace_domain_changed:!0,workspace_exported:!0,audit_log_exported:!0,user_analytics_exported:!0,content_analytics_exported:!0,public_page_cleared:!0,public_page_set:!0,scim_token_generated:!0,scim_token_revoked:!0,saml_toggled:!0,saml_enforce_toggled:!0,mfa_sms_toggled:!0,mfa_totp_toggled:!0,mfa_backup_code_toggled:!0,automatic_account_creation_toggled:!0,workspace_creation_set_for_email_domain:!0,member_added_to_group:!0,member_removed_from_group:!0,space_transfer_status_changed:!0,space_claim_and_upgrade_status_changed:!0,space_claim_deletion_status_changed:!0,file_uploaded:!0,file_downloaded:!0,invite_link_toggled:!0,invite_link_reset:!0,page_access_requests_toggled:!0,public_page_sharing_toggled:!0,workspace_sidebar_editing_toggled:!0,disable_team_guests_toggled:!0,disable_guests_toggled:!0,pages_to_other_workspaces_toggled:!0,export_toggled:!0,workspace_integration_restriction_changed:!0,idp_metadata_url_updated:!0,idp_metadata_xml_updated:!0,idp_metadata_xml_removed:!0,allowed_support_access:!0,revoked_support_access:!0,membership_requests_toggled:!0,external_membership_requests_toggled:!0,guest_membership_requests_toggled:!0,membership_request_resolved:!0,team_created:!0,team_archived:!0,team_restored:!0,team_default_toggled:!0,team_public_page_sharing_toggled:!0,team_guests_toggled:!0,team_export_toggled:!0,team_sidebar_editing_toggled:!0,team_name_changed:!0,team_description_changed:!0,team_icon_changed:!0,team_creation_admins_setting_toggled:!0,member_added_to_team:!0,group_added_to_team:!0,member_removed_from_team:!0,group_removed_from_team:!0,member_left_team:!0,member_joined_team:!0,member_team_role_updated:!0,team_user_permission_updated:!0,team_group_permission_updated:!0,team_guest_default_permission_updated:!0,team_member_default_permission_updated:!0,team_workspace_default_permission_updated:!0,team_privacy_type_changed:!0,team_invite_access_changed:!0,teams_enabled_for_space:!0,admin_content_search_queried:!0,admin_content_search_exported:!0,admin_managed_users_log_out_all:!0,admin_managed_users_log_out_one:!0,admin_managed_users_password_cleared:!0,admin_managed_users_password_cleared_one:!0,ai_admin_legal_acceptance_toggled:!0,workspace_analytics_toggled:!0,space_consolidation_started:!0,space_consolidation_completed:!0,space_consolidation_failed:!0,user_suspended:!0,user_unsuspended:!0,"workspace.settings.custom_session_duration_updated":!0,"workspace.settings.external_workspace_access_updated":!0,"workspace.settings.prevent_profile_edits_updated":!0,"workspace.settings.prevent_granting_support_access_updated":!0,"page.discussion.comment.created":!0,"page.discussion.comment.deleted":!0,"page.discussion.comment.updated":!0,"integration.created":!0,"integration.deleted":!0},isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:te.page},{category:"space",orderedActions:te.space},{category:"account",orderedActions:te.account},{category:"team",orderedActions:te.team}]}}getAllActionNames(){return(0,A.Yd)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,i=this.state.categorySelections[t],a=i===yn.None||i===yn.Partial?yn.All:yn.None,n=a===yn.All,o={...this.state.actionSelections},s=this.state.renderOrder.find((e=>e.category===t));s&&(s.orderedActions.forEach((e=>{o[e]=n})),this.setState({...this.state,actionSelections:o,categorySelections:{...this.state.categorySelections,[s.category]:a}}))}selectActionName(e,t){const i=this.state.actionSelections[e],a={...this.state.actionSelections,[e]:!i},n=t.orderedActions.filter((e=>a[e])).length,o=0===n?yn.None:n===t.orderedActions.length?yn.All:yn.Partial;this.setState({...this.state,actionSelections:a,categorySelections:{...this.state.categorySelections,[t.category]:o}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,A.Yd)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,A.Yd)(this.state.categorySelections),yn.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const i={...this.state.categorySelections};return e.forEach((e=>{i[e]=t})),i}getBulkUpdateNextActionSelectionState(e,t){const i={...this.state.actionSelections};return e.forEach((e=>{i[e]=t})),i}}var bn=i(5210);const Mn={page:n()(v.FormattedMessage,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:n()(v.FormattedMessage,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:n()(v.FormattedMessage,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:n()(v.FormattedMessage,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"})};function wn(e){let{totalNumEventsForCategory:t,numSelectedForCategory:i,category:a,categoryOpen:o,shouldShowCount:l,onCategoryClick:d,onCategoryToggleClick:c,...u}=e;window.__c={n:"AuditLogCategoryMenuItem"};const m=(0,Fe.yK)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let p,g;return p=l?n()(v.FormattedMessage,t===i?{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}:{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:i,totalNum:t}}):null,g=t===i||0!==i&&"partial",r.createElement(it.Z,s()({},u,{className:"notranslate",textWrapperStyle:m.textWrapperStyle,focused:!1,title:n()("div",{style:m.title},void 0,n()(bn.Z,{style:m.toggleButton,open:o,onClick:c,isSidebar:!1,fill:!1,icon:"chevron"}),n()(at.Z,{checked:g,size:14,checkSize:8,onClick:d}),n()(Ee.Z,{style:m.categoryText},void 0,Mn[a]),n()(Ee.Z,{isSecondaryColor:!0,style:m.categorySubHeader},void 0,p))}))}class Cn extends l.Z{constructor(){super(...arguments),this.storeTypes={componentStore:Sn,lastSelectionStore:Sn,menuListStore:et.Z},this.renderMenu=()=>{const{componentStore:e,menuListStore:t}=this.stores,i=this.styles,a=[];let o=0,l=0;const d=e.state.searchQuery;for(const n of e.state.renderOrder){const t=n.category;if("team"===t&&!(0,E.bq)())return;const i=[];let s=0;for(const a of n.orderedActions)this.eventsToFilterOut.includes(a)||(i.push(this.renderActionNameMenu(a,n)),e.state.actionSelections[a]&&s++);if(o+=s,l+=i.length,a.push(this.renderCategoryMenu({renderGroup:n,shouldShowCount:!Boolean(d),totalNumEventsForCategory:i.length,numSelectedForCategory:s})),e.state.categoryToggleOpen[t])if(d){const e=(0,fn.ZP)(d,i,kn);a.push(...e)}else a.push(...i)}const c={key:"results",items:a,render:e=>r.createElement(rt.Z,s()({},e,{title:null,loading:!1}))};return n()("div",{style:i.container},void 0,n()(Qi.Z,{style:i.searchInput,placeholder:this.props.intl.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:this.handleUpdateSearchQuery,value:e.state.searchQuery,showClearButton:!0}),d&&n()(Tn,{totalNumSelected:o,totalNumEvents:l}),n()(nt.Z,{menuType:Xe.og.Popup,header:null,maxHeight:356},void 0,n()(ot.Z,{type:ot.i.Vertical,store:t,initialFocus:0,sections:[c]})),n()(rt.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"}},void 0,n()(Ge.Z,{onClick:()=>{this.handleClear()}},void 0,n()(v.FormattedMessage,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})),n()(He.Z,{onClick:()=>{this.handleApply()}},void 0,n()(v.FormattedMessage,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"}))))},this.renderPillButtonOrigin=e=>{const{componentStore:t}=this.stores,i=t.hasActionNameSelected();return n()(tt.Z,{on:i,icon:(0,vn.S)({width:16,marginRight:6,fill:"currentColor"}),title:n()("span",{},void 0,e),onClick:()=>{this.setMenuOpen(!0)}})},this.featureGatedEventsToFilterOut=(0,A.qP)(Ja).reduce(((e,t)=>{let[i,a]=t;return T.default.checkGate(i)?e:[...e,...a]}),[]),this.teamspaceGuestEventsToFilterOut=(0,H.F$)()?[]:["team_guest_default_permission_updated"],this.guestMembershipEventsToFilterOut=(0,H.Ye)()?[]:["guest_membership_requests_toggled"],this.eventsToFilterOut=[...this.featureGatedEventsToFilterOut,...this.teamspaceGuestEventsToFilterOut,...this.guestMembershipEventsToFilterOut],this.setMenuOpen=e=>{const{componentStore:t}=this.stores;t.setState({...t.state,isMenuOpen:e})},this.handleUpdateSearchQuery=e=>{this.stores.componentStore.updateSearchQuery(e.target.value)},this.styles={container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:this.theme.lightDividerColor},popup:{paddingBottom:8}}}renderComponent(){const{componentStore:e}=this.stores,t=this.styles,i=n()(v.FormattedMessage,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),a=this.renderPillButtonOrigin(i);return n()(lt.Z,{marginAfter:!1},void 0,n()(st.ZP,{popupType:st.ZP.PopupType.Popup,placementToOrigin:st.ZP.Placement.Bottom,alignmentToOrigin:st.ZP.Alignment.Start,open:e.state.isMenuOpen,render:this.renderMenu,onDismiss:()=>{this.handleMenuCloseFromOutside()},keepFocus:!0,origin:a,preventScaleTransition:!0,style:t.popup}))}renderCategoryMenu(e){const{renderGroup:t,shouldShowCount:i,totalNumEventsForCategory:a,numSelectedForCategory:n}=e,{componentStore:o}=this.stores,l=t.category,d=()=>{o.toggleCategorySelection(t)},c=()=>{o.selectCategorySelection(t)};return{key:l,action:d,render:e=>r.createElement(wn,s()({totalNumEventsForCategory:a,numSelectedForCategory:n,category:l,categoryOpen:o.state.categoryToggleOpen[l],shouldShowCount:i,onCategoryToggleClick:d,onCategoryClick:c},e)),localizedActionName:null,actionName:null}}renderActionNameMenu(e,t){const{intl:i}=this.props,{componentStore:a}=this.stores,o=()=>{a.selectActionName(e,t)},l=i.formatMessage(ln[e]);return{key:e,action:o,render:t=>r.createElement(it.Z,s()({},t,{icon:n()(at.Z,{checked:a.state.actionSelections[e],size:14,checkSize:8,onClick:o}),focused:!1,title:l,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}})),actionName:e,localizedActionName:l}}handleMenuCloseFromOutside(){const{componentStore:e,lastSelectionStore:t}=this.stores;e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),this.setMenuOpen(!1)}handleClear(){const{componentStore:e}=this.stores;e.clearAllSelections()}handleApply(){const{onChange:e}=this.props,{componentStore:t,lastSelectionStore:i}=this.stores,a=t.getAllActionNames(),n=t.getSelectedActionNames();e(a.length===n.length?[]:n),0===n.length&&t.reset(),i.setState({...i.state,actionSelections:{...t.state.actionSelections}}),this.setMenuOpen(!1)}}Cn.displayName="AuditLogEventFilter";const _n=(0,v.injectIntl)(Cn);function kn(e){var t;return m.oA([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function Tn(e){let{totalNumSelected:t,totalNumEvents:i}=e;window.__c={n:"SelectedEventsPill"};const a=(0,Fe.yK)((e=>({container:{background:tn.ZP.diffBackground,color:tn.ZP.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"},textWrapperStyle:{marginLeft:8}})),[]);return n()(Ee.Z,{style:a.container},void 0,n()(v.FormattedMessage,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:i}}))}const In=(0,v.injectIntl)((function(e){window.__c={n:"AuditLogFilterContainer"};const{spaceStore:t}=e,[i,a]=(0,Ze.AF)(se),[o,s,r]=(0,Ze.AF)(Da);return n()("div",{style:{display:"flex",flexDirection:"row",gap:4}},void 0,n()(ra,{mode:na.z.Pill,focused:!1,title:n()(v.FormattedMessage,{id:"auditlogDateFilter.title",defaultMessage:"Date"}),icon:Ai.C,value:i.timeRange,showButtons:"footer",onChange:e=>{a({...i,timeRange:e,pageNum:1})}}),n()(Qa,{parentStore:t,auditLogHistoricalUserStore:r,selectedActors:i.actors,onChange:e=>{a({...i,actors:e,pageNum:1})}}),n()(_n,{parentStore:t,selectedEvents:i.actions,onChange:e=>{a({...i,actions:e,pageNum:1})}}))}));function Pn(){return n()(Re.Z,{large:!0,style:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:f.Z.fontWeight.medium,display:"flex",justifyContent:"space-between"}},void 0,n()("div",{style:{gap:8,display:"flex"}},void 0,n()(v.FormattedMessage,{id:"auditlog.title",defaultMessage:"Audit log"})),n()(xn,{}))}function xn(){window.__c={n:"AuditLogFeedbackButton"};const e=(0,xe.O7)();return Ye.default.isLocalhost?n()(Le.Z,{style:{marginLeft:10},isSmall:!0,onClick:()=>{C.navigateToExternalURL({environment:e,url:"https://dev.notion.so/notion/Audit-Log-Dev-feedback-e9048c4e7d544369b0b8413ec20f02cf",targetSelf:!0})}},void 0,"🎁 Feedback is a gift!"):null}var Zn=i(43568);const Fn=function(){return n()("div",{style:{}},void 0,n()(Zn.Z,{paragraphs:[{lineHeight:45,lineMargin:20,sectionWidths:[100],repeat:1,sectionMargin:15},{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]}))};var An=i(75553),En=i(21752);function Bn(e){window.__c={n:"AuditLogColumnActor"};const{auditLogEntry:t,spaceStore:i,id:a}=e,o=(0,v.useIntl)(),l=(0,Ze.VK)((()=>{if(t.actor.actorType===ti.KJ){const e=ft.U6.createChildStore(i,{id:t.actor.actorId,table:ti.KJ});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===Ot.cZ){const e=ft.Qx.createChildStore(i,{id:t.actor.actorId,table:Ot.cZ});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[i,t]),d=(0,Ze.VK)((()=>{var e,t;if(l)return(null===(e=l.actorStore)||void 0===e?void 0:e.getDisplayName(o))??(null===(t=l.avatar)||void 0===t?void 0:t.name)}),[l,o]),c=(0,Ze.VK)((()=>{var e,t;if(l)return(null===(e=l.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=l.avatar)||void 0===t?void 0:t.email)}),[l]),u=(0,r.useMemo)((()=>{var e;if(t.actor.actorType===ti.KJ)return(0,En.K)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),m=(0,Fe.yK)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),p=(0,r.createRef)();return n()(Nt.Z,{disableTooltip:Rn(p.current),renderTooltip:()=>r.createElement(r.Fragment,null,n()("div",{},void 0,d),n()("div",{},void 0,c)),placement:Nt.Z.Placement.Bottom,render:e=>r.createElement("div",s()({},e,{style:m.container}),r.createElement(En.Z,s()({id:a},l,{spaceRole:u})))})}function Rn(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var Dn=i(13991),Ln=i(4023);function Nn(e){window.__c={n:"AuditLogColumnDateTime"};const{auditLogEntry:t,id:i}=e,a=(0,Fe.yK)((()=>({container:{display:"block",width:"100%"}})),[]);return n()(Nt.Z,{renderTooltip:()=>n()("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"}},void 0,n()("div",{},void 0,n()(v.FormattedMessage,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,an.$I)(t.serverTimestamp)}}))),render:e=>n()("div",{id:i,style:a.container},void 0,r.createElement(Ee.Z,s()({isSecondaryColor:!0},e),(0,an.Yx)(t.serverTimestamp,"medium_with_time",Dn.SP))),placement:Ln.u.Bottom})}var On=i(44317),Vn=i(92785),Un=i(19639),Wn=i(15047),zn=i(73123);function Kn(e){return"workspace"!==e}const Hn=(0,v.defineMessages)({password_cleared:{id:"auditlog.actionNames.eventColumn.password_cleared",defaultMessage:"Cleared login password"},password_set:{id:"auditlog.actionNames.eventColumn.password_set",defaultMessage:"Created a login password"},password_changed:{id:"auditlog.actionNames.eventColumn.password_changed",defaultMessage:"Changed login password"},logout:{id:"auditlog.actionNames.eventColumn.logout",defaultMessage:"Logged out"},user_deleted:{id:"auditlog.actionNames.eventColumn.user_deleted",defaultMessage:"User was deleted"},member_joined:{id:"auditlog.actionNames.eventColumn.member_joined",defaultMessage:"Joined the workspace"},file_uploaded:{id:"auditlog.actionNames.eventColumn.file_uploaded",defaultMessage:"Uploaded a file"},invite_link_reset:{id:"auditlog.actionNames.eventColumn.invite_link_reset",defaultMessage:"Reset invite link"},workspace_exported:{id:"auditlog.actionNames.eventColumn.workspace_exported",defaultMessage:"Exported all workspace content"},audit_log_exported:{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days"},user_analytics_exported:{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}"},content_analytics_exported:{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}"},workspace_icon_changed:{id:"auditlog.actionNames.eventColumn.workspace_icon_changed",defaultMessage:"Changed workspace icon"},public_page_cleared:{id:"auditlogEventFilter.actionNames.public_page_cleared",defaultMessage:"Public home page link cleared"},scim_token_generated:{id:"auditlog.actionNames.scim_token_generated",defaultMessage:"Generated API SCIM token"},scim_token_revoked:{id:"auditlog.actionNames.scim_token_revoked",defaultMessage:"Revoked API SCIM token"},page_access_requests_toggled:{id:"auditlog.actionNames.eventColumn.page_access_requests_toggled",defaultMessage:"page access requests from non-members"},public_page_sharing_toggled:{id:"auditlog.actionNames.eventColumn.public_page_sharing_toggled",defaultMessage:"members sharing pages publicly"},workspace_sidebar_editing_toggled:{id:"auditlog.actionNames.eventColumn.workspace_sidebar_editing_toggled",defaultMessage:"members changing the Workspace section"},disable_team_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_team_guests_toggled",defaultMessage:"teamspace guests"},disable_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_guests_toggled",defaultMessage:"guests"},pages_to_other_workspaces_toggled:{id:"auditlog.actionNames.eventColumn.pages_to_other_workspaces_toggled",defaultMessage:"moving or duplicating pages to other workspaces"},export_toggled:{id:"auditlog.actionNames.eventColumn.export_toggled",defaultMessage:"export"},idp_metadata_xml_updated:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_updated",defaultMessage:"Updated IDP metadata XML"},idp_metadata_xml_removed:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_removed",defaultMessage:"Removed IDP metadata XML"},saml_enabled:{id:"auditlog.actionNames.saml_enabled",defaultMessage:"Enabled SAML"},saml_disabled:{id:"auditlog.actionNames.saml_disabled",defaultMessage:"Disabled SAML"},saml_enforced:{id:"auditlog.actionNames.saml_enforced",defaultMessage:"Enabled enforcing SAML"},saml_unenforced:{id:"auditlog.actionNames.saml_unenforced",defaultMessage:"Disabled enforcing SAML"},automatic_account_creation_enabled:{id:"auditlog.actionNames.automatic_account_creation_enabled",defaultMessage:"Enabled automatically creating accounts on sign-in"},automatic_account_creation_disabled:{id:"auditlog.actionNames.automatic_account_creation_disabled",defaultMessage:"Disabled automatically creating accounts on sign-in"},workspace_analytics_enabled:{id:"auditlog.actionNames.workspace_analytics_enabled",defaultMessage:"Enabled page view tracking for workspace analytics"},workspace_analytics_disabled:{id:"auditlog.actionNames.workspace_analytics_disabled",defaultMessage:"Disabled page view tracking for workspace analytics"},a_private_page:{defaultMessage:"a private page",id:"auditlog.actionNames.eventColumn.private_page"},an_untitled_page:{defaultMessage:"an untitled page",id:"auditlog.actionNames.eventColumn.untitled_page"},thisWorkspace:{defaultMessage:"this workspace",id:"auditlog.actionNames.eventColumn.thisWorkspace"},otherWorkspace:{defaultMessage:"another workspace",id:"auditlog.actionNames.eventColumn.otherWorkspace"},workspaceLevel:{defaultMessage:"the workspace level",id:"auditlog.actionNames.eventColumn.workspaceLevel"},private:{defaultMessage:"private",id:"auditlog.actionNames.eventColumn.private"},a_file:{defaultMessage:"a file",id:"auditlog.actionNames.eventColumn.a_file"},a_file_with_extension:{defaultMessage:"a {extension} file",id:"auditlog.actionNames.eventColumn.a_file_with_extension"},team:{defaultMessage:"teamspace",id:"auditlog.actionNames.eventColumn.team"},for_a_private_team:{defaultMessage:"for a private teamspace",id:"auditlog.actionNames.eventColumn.for_private_team"},a_private_team:{defaultMessage:"a private teamspace",id:"auditlog.actionNames.eventColumn.private_team"},a_team_and_page:{defaultMessage:"a teamspace and page",id:"auditlog.actionNames.eventColumn.team_and_page"},team_member:{defaultMessage:"teamspace member",id:"auditlog.actionNames.eventColumn.team_member"},team_owner:{defaultMessage:"teamspace owner",id:"auditlog.actionNames.eventColumn.team_owner"},team_level_guest:{defaultMessage:"teamspace guest",id:"auditlog.actionNames.eventColumn.team_level_guest"},group:{defaultMessage:"group",id:"auditlog.actionNames.eventColumn.group"},user:{defaultMessage:"user",id:"auditLogEntry.user.noName"},bot:{defaultMessage:"integration",id:"auditLogEntry.bot.noName"},adminContentSearchQuery:{defaultMessage:"query=“{query}“",id:"auditLogEntry.adminContentSearch.query"},adminContentSearchAudience:{defaultMessage:"audience=“{audience}“",id:"auditLogEntry.adminContentSearch.audience"},adminContentSearchCreatedBy:{defaultMessage:"created by=“{createdBy}“",id:"auditLogEntry.adminContentSearch.createdBy"},adminContentSearchSharedWith:{defaultMessage:"shared with=“{sharedWith}“",id:"auditLogEntry.adminContentSearch.sharedWith"},adminContentSearchTeamspaces:{defaultMessage:"{teamspaceCount, plural, one {teamspace=“{teamspaces}“} other {teamspaces=“{teamspaces}“}}",id:"auditLogEntry.adminContentSearch.teamspace"},adminContentSearchCreatedTime:{defaultMessage:"created time=“{createdTime}“",id:"auditLogEntry.adminContentSearch.createdTime"},adminContentSearchLastEditedTime:{defaultMessage:"last edited time=“{lastEditedTime}“",id:"auditLogEntry.adminContentSearch.lastEditedTime"},adminContentSearchPredicateSplit:{defaultMessage:", ",id:"auditLogEntry.adminContentSearch.predicateSplit"},from:{defaultMessage:"from",id:"auditLogEntry.spaceContentDuplication.from"},into:{defaultMessage:"into",id:"auditLogEntry.spaceContentDuplication.into"}});function Gn(e,t){if(t.target)return"user"in t.target&&t.target.user?qn(e,t.target.user):"bot"in t.target&&t.target.bot?jn(e,t.target.bot):"group"in t.target&&t.target.group?t.target.group.name?`“${t.target.group.name}“`:"group":void 0}function qn(e,t){return t?t.name&&t.email?`“${t.name}“ (${t.email})`:t.name?`“${t.name}“`:t.email?`“${t.email}“`:e.formatMessage(Hn.user):e.formatMessage(Hn.user)}function jn(e,t){return t.name?`“${t.name}“`:e.formatMessage(Hn.bot)}const Yn=(0,v.defineMessages)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),$n=(0,v.defineMessages)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function Qn(e,t){if(void 0!==e&&void 0!==t)return e===t?r.createElement(v.FormattedMessage,$n.equallyRestrictive):!e&&t?r.createElement(v.FormattedMessage,$n.moreRestrictive):e&&!t?r.createElement(v.FormattedMessage,$n.lessRestrictive):void 0}function Jn(e){return e.name?`“${e.name}“ group`:r.createElement(v.FormattedMessage,Hn.group)}function Xn(e){return e.changes.name.oldValue&&e.changes.name.newValue?n()(v.FormattedMessage,{defaultMessage:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?n()(v.FormattedMessage,{defaultMessage:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):n()(v.FormattedMessage,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:eo(e)}})}function eo(e){return"team"in e.target?to(e.target.team):r.createElement(v.FormattedMessage,Hn.team)}function to(e){return e.name?`“${e.name}“ teamspace`:r.createElement(v.FormattedMessage,Hn.team)}function io(e){if(e)switch(e){case"owner":return r.createElement(v.FormattedMessage,Hn.team_owner);case"member":return r.createElement(v.FormattedMessage,Hn.team_member);case"team_level_guest":return r.createElement(v.FormattedMessage,Hn.team_level_guest)}return r.createElement(v.FormattedMessage,Hn.team_member)}function ao(e){return r.createElement(v.FormattedMessage,function(e){if(!e)return pt.mq.noAccessLabel;switch(e){case"editor":return pt.mq.fullAccessLabel;case"membership_admin":case"read_and_write":return pt.mq.canEditLabel;case"content_only_editor":return pt.mq.canEditContentLabel;case"reader":return pt.mq.canReadLabel;case"comment_only":return pt.mq.canCommentLabel;case"none":return pt.mq.noAccessLabel;default:(0,A.t1)(e)}}(e))}function no(e){var t,i;return{oldRole:r.createElement(v.FormattedMessage,oo(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)),newRole:r.createElement(v.FormattedMessage,oo(null===(i=e.changes)||void 0===i||null===(i=i.permission)||void 0===i?void 0:i.newValue))}}const oo=e=>{if(!e)return pt.mq.noAccessLabel;switch(e){case"editor":return pt.mq.workspaceOwnerLabel;case"membership_admin":return pt.mq.membershipAdminLabel;case"read_and_write":return pt.mq.memberLabel;default:return pt.mq.noAccessLabel}};function so(e){return e.target.page.title?`“${e.target.page.title}“`:r.createElement(v.FormattedMessage,Hn.an_untitled_page)}function ro(e){var t,i;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(i=e.target)||void 0===i||null===(i=i.page)||void 0===i||null===(i=i.meta)||void 0===i?void 0:i.parent)?`“${e.target.page.meta.parent.title}“`:r.createElement(v.FormattedMessage,Hn.an_untitled_page)}function lo(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?n()(v.FormattedMessage,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function co(e){switch(e){case"google":return n()(v.FormattedMessage,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return n()(v.FormattedMessage,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return n()(v.FormattedMessage,{defaultMessage:"admin mode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return n()(v.FormattedMessage,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return n()(v.FormattedMessage,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return n()(v.FormattedMessage,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});default:(0,A.t1)(e)}}function uo(e){return e.changes.name.oldValue?n()(v.FormattedMessage,{defaultMessage:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function mo(e,t){return"block"===e.table?n()(v.FormattedMessage,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:to(t),parentPage:po(e)}}):"team"===e.table?to(t):void 0}function po(e){return"title"in e?`“${e.title}“`:r.createElement(v.FormattedMessage,Hn.an_untitled_page)}function go(e,t){if(!t)return r.createElement(v.FormattedMessage,Hn.an_untitled_page);const i=t.table;return"space"===i?t.id!==e?r.createElement(v.FormattedMessage,Hn.otherWorkspace):Kn(t.permissionLevel)?r.createElement(v.FormattedMessage,Hn.private):r.createElement(v.FormattedMessage,Hn.thisWorkspace):"team"===i?to(t):"block"===i?t.title?`“${t.title}“`:r.createElement(v.FormattedMessage,Hn.an_untitled_page):void 0}const ho=(0,v.defineMessages)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function fo(e){return e?r.createElement(v.FormattedMessage,ho[e]):r.createElement(v.FormattedMessage,ho.unknown)}function vo(e){return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):n()(v.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function yo(e){return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):n()(v.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function So(e){return"approved"===e.changes.requestStatus.newValue?n()(v.FormattedMessage,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):n()(v.FormattedMessage,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function bo(e){return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):n()(v.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function Mo(e){return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):n()(v.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}const wo=(0,v.defineMessages)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function Co(e){return n()(v.FormattedMessage,"recurrence"===e?{id:"auditlog.actionNames.eventColumn.automation_type.recurrence",defaultMessage:"a repeating automation"}:{id:"auditlog.actionNames.eventColumn.automation_type.automation",defaultMessage:"an automation"})}function _o(e){return!!e.meta&&("inSudoMode"in e.meta&&e.meta.inSudoMode)}function ko(e,t,i){var a,o,s,l,d,c,u,p,g,h,f,y,S,b,M,w,C,_,k,T,I,P,x,Z,F;switch(e.actionName){case"page.properties_edited":{const t=e.meta.propertiesUpdated,i=e.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===t.length?n()(v.FormattedMessage,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:i,pageName:so(e)}}):n()(v.FormattedMessage,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:i,pageName:so(e)}})}case"page.discussion.comment.created":return n()(v.FormattedMessage,{defaultMessage:"Commented on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.created",values:{pageName:so(e)}});case"page.discussion.comment.deleted":return n()(v.FormattedMessage,{defaultMessage:"Deleted comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.deleted",values:{pageName:so(e)}});case"page.discussion.comment.updated":return n()(v.FormattedMessage,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:so(e)}});case"page_edited":return n()(v.FormattedMessage,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:so(e)}});case"page_viewed":return n()(v.FormattedMessage,{defaultMessage:"Viewed {pageName}",id:"auditlog.actionNames.eventColumn.page_viewed_under",values:{pageName:so(e)}});case"page_deleted":return e.target.page.meta.permanentDeletion?n()(v.FormattedMessage,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:so(e)}}):n()(v.FormattedMessage,{defaultMessage:"Deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:so(e)}});case"page.permanently_deleted":return n()(v.FormattedMessage,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.permanently_deleted",values:{pageName:so(e)}});case"page_restored":return n()(v.FormattedMessage,{defaultMessage:"Restored {pageName}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:so(e)}});case"page_exported":return n()(v.FormattedMessage,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:so(e)}});case"page_moved":{var E,B,R;const t=null===(E=e.changes)||void 0===E?void 0:E.team,a=e.changes.parent.oldValue,o=e.changes.parent.newValue;let s=go(e.spaceId,e.changes.parent.oldValue),l=go(e.spaceId,e.changes.parent.newValue);null!=t&&t.oldValue&&null!=t&&t.newValue&&a&&o&&("block"===a.table||"block"===o.table)?(s=mo(a,null==t?void 0:t.oldValue),l=mo(o,null==t?void 0:t.newValue)):"space"===(null===(B=e.changes.parent.oldValue)||void 0===B?void 0:B.table)&&"space"===(null===(R=e.changes.parent.newValue)||void 0===R?void 0:R.table)&&e.changes.parent.oldValue.id===e.changes.parent.newValue.id&&(Kn(e.changes.parent.oldValue.permissionLevel)||Kn(e.changes.parent.newValue.permissionLevel))&&(s=Kn(e.changes.parent.oldValue.permissionLevel)?r.createElement(v.FormattedMessage,Hn.private):r.createElement(v.FormattedMessage,Hn.workspaceLevel),l=Kn(e.changes.parent.newValue.permissionLevel)?r.createElement(v.FormattedMessage,Hn.private):r.createElement(v.FormattedMessage,Hn.workspaceLevel));const d=s?i.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:s}):"",c=l?i.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:l}):"";return n()(v.FormattedMessage,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:so(e),oldParentMessage:d,newParentMessage:c,inSudoMode:_o(e)}})}case"page_permission_updated":return function(e,t){var i,a,o;const s="bot"in t.target,r="space"in t.target,l="team"in t.target,d="group"in t.target,c="user"in t.target&&"guest"===(null===(i=t.target.user.meta)||void 0===i?void 0:i.spaceRole);var u,m;if(s)return n()(v.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:Gn(e,t),oldRole:ao(null===(u=t.changes)||void 0===u||null===(u=u.permission)||void 0===u?void 0:u.oldValue),newRole:ao(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.newValue),pageName:so(t),inSudoMode:_o(t)}});var p,g,h,f,y,S;if(r)return n()(v.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:ao(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.oldValue),newRole:ao(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.newValue),pageName:so(t),inSudoMode:_o(t)}});if(l)return n()(v.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:ao(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.oldValue),newRole:ao(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.newValue),pageName:so(t),teamName:eo(t),inSudoMode:_o(t)}});if(c)return n()(v.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:Gn(e,t),oldRole:ao(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.oldValue),newRole:ao(null===(S=t.changes)||void 0===S||null===(S=S.permission)||void 0===S?void 0:S.newValue),pageName:so(t),inSudoMode:_o(t)}});if(d){var b,M;return n()(v.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:Gn(e,t),oldRole:ao(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.oldValue),newRole:ao(null===(M=t.changes)||void 0===M||null===(M=M.permission)||void 0===M?void 0:M.newValue),pageName:so(t),inSudoMode:_o(t)}})}return n()(v.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:Gn(e,t),oldRole:ao(null===(a=t.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.oldValue),newRole:ao(null===(o=t.changes)||void 0===o||null===(o=o.permission)||void 0===o?void 0:o.newValue),pageName:so(t),inSudoMode:_o(t)}})}(i,e);case"page_created":const V=ie(e);if(null!=V&&null!==(a=V.meta)&&void 0!==a&&a.parent){var D,L,N,O;if(V.meta.parent.table===Wn.bx)return"private"===(null===(N=V.meta)||void 0===N?void 0:N.permissionLevel)||"private"===(null===(O=V.meta)||void 0===O?void 0:O.pageAudience)?n()(v.FormattedMessage,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):n()(v.FormattedMessage,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(D=V.meta)||void 0===D?void 0:D.parent.table)===ht.e0)return n()(v.FormattedMessage,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:to(V.meta.parent)}});if((null===(L=V.meta)||void 0===L?void 0:L.parent.table)===_a.iU)return n()(v.FormattedMessage,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:ro(e)}})}return n()(v.FormattedMessage,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return n()(v.FormattedMessage,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:so(e),inSudoMode:_o(e)}});return n()(v.FormattedMessage,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:so(e),inSudoMode:_o(e),newRole:ao(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(e);case"login":return function(e,t){var i,a,o;const s=null===(i=e.meta)||void 0===i?void 0:i.authType;return null!==(a=e.actor.meta)&&void 0!==a&&a.countryCode&&s?n()(v.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:lo(e),geolocation:pn(e,t),loginMethod:co(s)}}):null!==(o=e.actor.meta)&&void 0!==o&&o.countryCode&&!s?n()(v.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:lo(e),geolocation:pn(e,t)}}):n()(v.FormattedMessage,s?{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:lo(e),loginMethod:co(s)}}:{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:lo(e)}})}(e,i);case"allowed_support_access":return n()(v.FormattedMessage,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:i.formatDate(e.changes.expiresAt),name:e.target.user.name}});case"revoked_support_access":return n()(v.FormattedMessage,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:e.target.user.name}});case"preferred_name_changed":return function(e,t){var i;const a=!!e.target&&e.actor.actorId!==(null===(i=e.target)||void 0===i?void 0:i.user.id),o=e.changes.name.oldValue,s=e.changes.name.newValue;if(a){if(o&&s)return n()(v.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:Gn(t,e),oldValue:o,newValue:s}});if(!o&&s)return n()(v.FormattedMessage,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:Gn(t,e),newValue:s}});if(o&&!s)return n()(v.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:Gn(t,e),oldValue:o}})}if(o&&s)return n()(v.FormattedMessage,{defaultMessage:"Changed name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:o,newValue:s}});if(!o&&s)return n()(v.FormattedMessage,{defaultMessage:"Set name to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:s}});if(o&&!s)return n()(v.FormattedMessage,{defaultMessage:"Removed name “{oldValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:o}});return n()(v.FormattedMessage,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(e,i);case"email_changed":return function(e,t){var i;return e.target&&e.actor.actorId!==(null===(i=e.target)||void 0===i?void 0:i.user.id)?n()(v.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:Gn(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):n()(v.FormattedMessage,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(e,i);case"picture_changed":return function(e,t){var i;return e.target&&e.actor.actorId!==(null===(i=e.target)||void 0===i?void 0:i.user.id)?n()(v.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:Gn(t,e)}}):n()(v.FormattedMessage,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(e,i);case"member_invited":{const t=no(e);return n()(v.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:Gn(i,e),newRole:t.newRole}})}case"member_role_updated":{const t=no(e);return n()(v.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:Gn(i,e),oldRole:t.oldRole,newRole:t.newRole}})}case"member_removed":return e.actor.actorId===e.target.user.id?n()(v.FormattedMessage,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):n()(v.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:Gn(i,e)}});case"guest_removed":return n()(v.FormattedMessage,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:Gn(i,e)}});case"file_uploaded":return n()(v.FormattedMessage,{defaultMessage:"Uploaded a file to {pageName}",id:"auditlog.actionNames.eventColumn.file_uploaded_public",values:{pageName:so(e)}});case"file_downloaded":return function(e){return n()(v.FormattedMessage,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:To(e),pageName:so(e)}})}(e);case"invite_link_toggled":return e.changes.enabled.newValue?n()(v.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):n()(v.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_team_guests_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return e.changes.enabled.newValue?n()(v.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.disabled",defaultMessage:"Disabled {workspaceSetting}",values:{workspaceSetting:i.formatMessage(Hn[e.actionName])}}):n()(v.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.enabled",defaultMessage:"Enabled {workspaceSetting}",values:{workspaceSetting:i.formatMessage(Hn[e.actionName])}});case"workspace_name_changed":return n()(v.FormattedMessage,{defaultMessage:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:e.changes.name.oldValue,newValue:e.changes.name.newValue}});case"workspace_domain_changed":return n()(v.FormattedMessage,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:uo(e),newValue:e.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:i,newValue:a}=e.changes.integration_restrictions;if(a===t)return n()(v.FormattedMessage,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(i===t&&"approved_only"===a)return n()(v.FormattedMessage,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===i&&"approved_only"===a)return n()(v.FormattedMessage,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===i&&"approved_or_built_by_notion"===a)return n()(v.FormattedMessage,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return n()(v.FormattedMessage,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(e);case"allowed_email_domain_added":return n()(v.FormattedMessage,{defaultMessage:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:e.changes.domain}});case"allowed_email_domain_removed":return n()(v.FormattedMessage,{defaultMessage:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:e.changes.domain}});case"public_page_set":return e.changes.name.oldValue?n()(v.FormattedMessage,{defaultMessage:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:e.changes.name.oldValue,newPage:e.changes.name.newValue}}):n()(v.FormattedMessage,{defaultMessage:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:e.changes.name.newValue}});case"idp_metadata_url_updated":return e.changes.url.oldValue?n()(v.FormattedMessage,{defaultMessage:"Changed IDP metadata URL from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:e.changes.url.oldValue,newValue:e.changes.url.newValue}}):n()(v.FormattedMessage,{defaultMessage:"Set IDP metadata URL to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:e.changes.url.newValue}});case"saml_toggled":return e.changes.enabled.newValue?r.createElement(v.FormattedMessage,Hn.saml_enabled):r.createElement(v.FormattedMessage,Hn.saml_disabled);case"saml_enforce_toggled":return e.changes.enabled.newValue?r.createElement(v.FormattedMessage,Hn.saml_enforced):r.createElement(v.FormattedMessage,Hn.saml_unenforced);case"automatic_account_creation_toggled":return e.changes.enabled.newValue?r.createElement(v.FormattedMessage,Hn.automatic_account_creation_enabled):r.createElement(v.FormattedMessage,Hn.automatic_account_creation_disabled);case"workspace_analytics_toggled":return e.changes.enabled.newValue?r.createElement(v.FormattedMessage,Hn.workspace_analytics_enabled):r.createElement(v.FormattedMessage,Hn.workspace_analytics_disabled);case"workspace_creation_set_for_email_domain":return function(e,t){const{oldValue:i,newValue:a}=e.changes.workspace_creation;if(!i&&!a)return n()(v.FormattedMessage,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const o=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,Un.nJ)(e.changes.workspace_creation.oldValue,t)}):"",s=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,Un.nJ)(e.changes.workspace_creation.newValue,t)}):"";return n()(v.FormattedMessage,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:o,after:s}})}(e,i);case"member_added_to_group":return n()(v.FormattedMessage,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:Gn(i,e),groupName:Jn(e.target.group)}});case"member_removed_from_group":return n()(v.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:Gn(i,e),groupName:Jn(e.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:i,newValue:a}=e.changes.spaceTransferStatus,o=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!i&&!a)return n()(v.FormattedMessage,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:o}});if(!a)return n()(v.FormattedMessage,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:o,oldStatus:i}});return n()(v.FormattedMessage,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:o,newStatus:a}})}(e,i);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:i}=e.changes.claimAndUpgradeStatus,a=n()(v.FormattedMessage,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!i)return a;if(!i&&"completed"!==t)return n()(v.FormattedMessage,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===i)return n()(v.FormattedMessage,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===i)return n()(v.FormattedMessage,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return a}(e);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:i}=e.changes.claimDeletionStatus,a=n()(v.FormattedMessage,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!i)return a;if(!i||"canceled"===i)return n()(v.FormattedMessage,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return n()(v.FormattedMessage,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(e);case"membership_requests_toggled":return n()(v.FormattedMessage,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:vo(e)}});case"external_membership_requests_toggled":return n()(v.FormattedMessage,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:yo(e)}});case"membership_request_resolved":return n()(v.FormattedMessage,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:So(e),email:Gn(i,e)}});case"guest_membership_requests_toggled":return n()(v.FormattedMessage,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:bo(e)}});case"team_created":return n()(v.FormattedMessage,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:eo(e)}});case"team_archived":return n()(v.FormattedMessage,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:eo(e)}});case"team_restored":return n()(v.FormattedMessage,{defaultMessage:"Restored {teamName}",id:"auditlog.actionNames.eventColumn.team_restored",values:{teamName:eo(e)}});case"team_default_toggled":return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:eo(e)}}):n()(v.FormattedMessage,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:eo(e)}});case"team_public_page_sharing_toggled":return e.changes.enabled.newValue?r.createElement(r.Fragment,null,n()(v.FormattedMessage,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:eo(e)}}),Qn((null===(o=e.meta)||void 0===o?void 0:o.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)):r.createElement(r.Fragment,null,n()(v.FormattedMessage,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:eo(e)}}),Qn((null===(s=e.meta)||void 0===s?void 0:s.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue));case"team_export_toggled":return e.changes.enabled.newValue?r.createElement(r.Fragment,null,n()(v.FormattedMessage,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:eo(e)}}),Qn((null===(l=e.meta)||void 0===l?void 0:l.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)):r.createElement(r.Fragment,null,n()(v.FormattedMessage,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:eo(e)}}),Qn((null===(d=e.meta)||void 0===d?void 0:d.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue));case"team_sidebar_editing_toggled":return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:eo(e)}}):n()(v.FormattedMessage,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:eo(e)}});case"team_creation_admins_setting_toggled":return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:eo(e)}}):n()(v.FormattedMessage,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:eo(e)}});case"team_guests_toggled":return e.changes.enabled.newValue?r.createElement(r.Fragment,null,n()(v.FormattedMessage,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:eo(e)}}),Qn((null===(c=e.meta)||void 0===c?void 0:c.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)):r.createElement(r.Fragment,null,n()(v.FormattedMessage,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:eo(e)}}),Qn((null===(u=e.meta)||void 0===u?void 0:u.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue));case"team_name_changed":return n()(v.FormattedMessage,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:Xn(e)}});case"team_description_changed":return n()(v.FormattedMessage,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:eo(e)}});case"team_icon_changed":return n()(v.FormattedMessage,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:eo(e)}});case"member_added_to_team":return n()(v.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:Gn(i,e),teamName:eo(e),teamRole:io(e.changes.teamRole.newValue)}});case"group_added_to_team":return n()(v.FormattedMessage,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:Jn(e.target.group),teamName:eo(e)}});case"member_removed_from_team":return n()(v.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:Gn(i,e),teamName:eo(e)}});case"group_removed_from_team":return n()(v.FormattedMessage,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:Jn(e.target.group),teamName:eo(e)}});case"member_joined_team":const U=eo(e),W=io(e.changes.teamRole.newValue);return _o(e)?n()(v.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:U,teamRole:W}}):n()(v.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:U,teamRole:W}});case"member_left_team":return n()(v.FormattedMessage,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:eo(e)}});case"member_team_role_updated":const z=Gn(i,e),K=io(e.changes.teamRole.oldValue),H=io(e.changes.teamRole.newValue),G=eo(e);return _o(e)?n()(v.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:z,oldTeamRole:K,newTeamRole:H,teamName:G}}):n()(v.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:z,oldTeamRole:K,newTeamRole:H,teamName:G}});case"team_user_permission_updated":return n()(v.FormattedMessage,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:Gn(i,e),oldPermission:ao(e.changes.permission.oldValue),newPermission:ao(e.changes.permission.newValue),teamName:eo(e)}});case"team_group_permission_updated":return n()(v.FormattedMessage,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:Jn(e.target.group),oldPermission:ao(e.changes.permission.oldValue),newPermission:ao(e.changes.permission.newValue),teamName:eo(e)}});case"team_member_default_permission_updated":return n()(v.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:eo(e),oldRole:ao(null===(p=e.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.oldValue),newRole:ao(null===(g=e.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.newValue)}});case"team_guest_default_permission_updated":return n()(v.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:eo(e),oldRole:ao(null===(h=e.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.oldValue),newRole:ao(null===(f=e.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.newValue)}});case"team_workspace_default_permission_updated":return n()(v.FormattedMessage,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:eo(e),oldRole:ao(null===(y=e.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.oldValue),newRole:ao(null===(S=e.changes)||void 0===S||null===(S=S.permission)||void 0===S?void 0:S.newValue)}});case"team_privacy_type_changed":return n()(v.FormattedMessage,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:eo(e),oldType:fo(null===(b=e.changes)||void 0===b?void 0:b.teamAccessLevel.oldValue),newType:fo(null===(M=e.changes)||void 0===M?void 0:M.teamAccessLevel.newValue)}});case"team_invite_access_changed":return n()(v.FormattedMessage,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:eo(e),newType:(F=null===(w=e.changes)||void 0===w||null===(w=w.teamInviteAccess)||void 0===w?void 0:w.newValue,F?r.createElement(v.FormattedMessage,wo[F]):r.createElement(v.FormattedMessage,wo.unknown))}});case"teams_enabled_for_space":return n()(v.FormattedMessage,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:e.target.space.name}});case"private_content_transferred":return n()(v.FormattedMessage,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:qn(i,e.changes.userPermission.oldValue),toUserName:qn(i,e.changes.userPermission.newValue)}});case"audit_log_exported":return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days",values:{duration:e.meta.duration}});case"user_analytics_exported":return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:i.formatMessage(zn.Rh[(null===(C=e.meta)||void 0===C?void 0:C.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:i.formatMessage(zn.Rh[(null===(_=e.meta)||void 0===_?void 0:_.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function q(e){return e.join(i.formatMessage(Hn.adminContentSearchPredicateSplit))}function j(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const Y=e.searchParameters.query&&i.formatMessage(Hn.adminContentSearchQuery,{query:e.searchParameters.query}),$=e.searchParameters.teamspaces&&e.searchParameters.teamspaces.length>0&&i.formatMessage(Hn.adminContentSearchTeamspaces,{teamspaceCount:e.searchParameters.teamspaces.length,teamspaces:q(e.searchParameters.teamspaces)}),Q=e.searchParameters.createdBy&&e.searchParameters.createdBy.length>0&&i.formatMessage(Hn.adminContentSearchCreatedBy,{createdBy:q(e.searchParameters.createdBy)}),J=e.searchParameters.sharedWith&&e.searchParameters.sharedWith.length>0&&i.formatMessage(Hn.adminContentSearchSharedWith,{sharedWith:q(e.searchParameters.sharedWith)}),X=e.searchParameters.audience&&e.searchParameters.audience.length>0&&i.formatMessage(Hn.adminContentSearchAudience,{audience:q(e.searchParameters.audience)}),ee=e.searchParameters.createdTime&&i.formatMessage(Hn.adminContentSearchCreatedTime,{createdTime:j(e.searchParameters.createdTime)}),te=e.searchParameters.lastEditedTime&&i.formatMessage(Hn.adminContentSearchLastEditedTime,{lastEditedTime:j(e.searchParameters.lastEditedTime)}),ae=m.oA([Y,$,Q,J,X,ee,te]);if("admin_content_search_queried"===e.actionName){if(0===ae.length)return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const e=q(ae);return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:e}})}}if(0===ae.length)return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const e=q(ae);return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:e}})}case"admin_managed_users_log_out_all":{const t=i.formatList(e.meta.emailDomains,{type:"conjunction"});return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:t}})}case"admin_managed_users_log_out_one":return n()(v.FormattedMessage,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:Gn(i,e)}});case"admin_managed_users_password_cleared_one":return n()(v.FormattedMessage,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:Gn(i,e)}});case"admin_managed_users_password_cleared":{const t=i.formatList(e.meta.emailDomains,{type:"conjunction"});return n()(v.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:t}})}case"automation_created":return n()(v.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_created",defaultMessage:"Created {automationType} on {pageTitle}",values:{automationType:Co(e.meta.automationType),pageTitle:so(e)}});case"automation_edited":return n()(v.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:Co(e.meta.automationType),pageTitle:so(e)}});case"ai_admin_legal_acceptance_toggled":return n()(v.FormattedMessage,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:Mo(e)}});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const ne=e.spaceId===e.meta.spaceConsolidationMetadata.source_space_id,oe=e.meta.spaceConsolidationMetadata.source_space_name??e.meta.spaceConsolidationMetadata.source_space_id,se=e.meta.spaceConsolidationMetadata.target_space_name??e.meta.spaceConsolidationMetadata.target_space_id,re=e.changes.spaceContentDuplicationStatus.newValue;return n()(v.FormattedMessage,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:re?r.createElement(v.FormattedMessage,Yn[re]):"",spaceName:ne?se:oe,direction:r.createElement(v.FormattedMessage,ne?Hn.into:Hn.from)}});case"mfa_sms_toggled":return n()(v.FormattedMessage,{defaultMessage:"{enabled} SMS MFA on “{value}“",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(k=e.changes)&&void 0!==k&&k.maskedPhoneNumber.oldValue?null===(T=e.changes)||void 0===T?void 0:T.maskedPhoneNumber.oldValue:null===(I=e.changes)||void 0===I?void 0:I.maskedPhoneNumber.newValue,enabled:null!==(P=e.changes)&&void 0!==P&&P.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return n()(v.FormattedMessage,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(x=e.changes)&&void 0!==x&&x.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return n()(v.FormattedMessage,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(Z=e.changes)&&void 0!==Z&&Z.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return n()(v.FormattedMessage,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:Gn(i,e)}});case"user_unsuspended":return n()(v.FormattedMessage,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:Gn(i,e)}});case"user_deleted":return e.target?n()(v.FormattedMessage,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:qn(i,e.target.user)}}):r.createElement(v.FormattedMessage,Hn.user_deleted);case"workspace.settings.prevent_granting_support_access_updated":return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):n()(v.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):n()(v.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":return e.changes.enabled.newValue?n()(v.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):n()(v.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.custom_session_duration_updated":return void 0!==e.changes.valueMs.oldValue&&void 0!==e.changes.valueMs.newValue?n()(v.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,On.Ct)(e.changes.valueMs.oldValue,i),newDuration:(0,On.Ct)(e.changes.valueMs.newValue,i)}}):n()(v.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"integration.created":return n()(v.FormattedMessage,{defaultMessage:"Added {botName} to workspace",id:"auditLogEntry.integration.created",values:{botName:jn(i,e.meta.bot)}});case"integration.deleted":return n()(v.FormattedMessage,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:jn(i,e.meta.bot)}});case"workspace_exported":case"workspace_icon_changed":case"public_page_cleared":case"logout":case"password_changed":case"password_cleared":case"password_set":case"revoked_support_access":case"user_suspended":case"user_unsuspended":case"member_joined":case"invite_link_toggled":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":return r.createElement(v.FormattedMessage,Hn[e.actionName]);default:if("local"!==t)return Vn.log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:e}}}),r.createElement(r.Fragment,null);(0,A.t1)(e)}}function To(e){const{name:t,extension:i}=e.target.file;return t?`“${t}“`:i?r.createElement(v.FormattedMessage,s()({},Hn.a_file_with_extension,{values:{extension:i}})):r.createElement(v.FormattedMessage,Hn.a_file)}function Io(e){window.__c={n:"AuditLogColumnEvent"};const{auditLogEntry:t,id:i}=e,[a,o]=(0,r.useState)(""),l=(0,v.useIntl)();return(0,r.useEffect)((()=>{const e=document.getElementById(i);o((null==e?void 0:e.textContent)||"")}),[i]),n()(Nt.Z,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>n()(xo,{text:a,auditLogEntry:t}),placement:Nt.Z.Placement.Bottom,render:e=>r.createElement("div",s()({},e,{style:{fontSize:14,...f.Z.textOverflowStyle},id:i}),n()(Po,{auditLogEntry:t,env:"production",intl:l}))})}function Po(e){const{auditLogEntry:t,env:i,intl:a}=e;return ko(t,i,a)}function xo(e){var t,i;window.__c={n:"AuditLogEventTooltip"};const{auditLogEntry:a,text:o}=e,s=(0,v.useIntl)(),r=hn({auditLogEntry:a,intl:s});return n()("div",{},void 0,o,(null===(t=a.actor.meta)||void 0===t?void 0:t.ipAddress)&&n()("div",{},void 0,n()(v.FormattedMessage,{defaultMessage:"IP address: {ip}",values:{ip:null===(i=a.actor.meta)||void 0===i?void 0:i.ipAddress},id:"auditLogSettings.metadata.ipAddress"})),n()("div",{},void 0,pn(a,s)),r&&n()(v.FormattedMessage,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}}))}function Zo(e){const{children:t,disabled:i,onClick:a}=e;return n()(Ge.Z,{onClick:a,disabled:i,style:{justifyContent:"center",marginLeft:6},isBlue:!i,isLightGray:i},void 0,t)}const Fo={id:"actor",headerTitle:n()(v.FormattedMessage,{id:"auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return n()(Bn,{spaceStore:e.spaceStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},Ao={id:"event",headerTitle:n()(v.FormattedMessage,{id:"auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return n()(Io,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},Eo={id:"dateTimeAndMenu",headerTitle:n()(v.FormattedMessage,{id:"auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,i=`event-${e.auditLogEntry.actionName}-${e.id}`,a=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return r.createElement(r.Fragment,null,n()(Nn,{auditLogEntry:e.auditLogEntry,id:a}),n()(Do,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:i,dateTimeColumnId:a}}))},widthData:{width:25},sortable:!0},Bo=[Fo,Ao,Eo];function Ro(){return n()("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"}},void 0,n()("div",{},void 0,n()(Ee.Z,{isSecondaryColor:!0,style:{fontWeight:500}},void 0,n()(v.FormattedMessage,{id:"auditlog.logTable.noResults",defaultMessage:"No results"}))),n()(Ee.Z,{isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})))}function Do(e){window.__c={n:"AuditLogColumnMenu"};const{auditLogEntry:t,ids:i}=e,a=(0,Ze.VK)((()=>(0,H.F$)()),[]),o=(0,Ze.VK)((()=>T.default.checkGate("audit_log_event_name_column")?un:cn),[]),l=(0,v.useIntl)(),d=(0,xe.O7)(),c=(0,Fe.Fg)(),u=(0,Fe.yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:3}})),[]);return n()(Nt.Z,{delayThreshold:80,placement:Nt.Z.Placement.Bottom,render:e=>r.createElement("div",s()({style:u.container},e),n()(Ri.Z,{style:u.button,onClick:()=>{var e;It.RD({environment:d,stringValue:gn({auditLogEntry:t,intl:l,getAuditLogEventText:(e=i.eventColumnId,t=>{var i;return null===(i=document.getElementById(e))||void 0===i?void 0:i.textContent}),isTeamGuestsEnabled:a,csvColumnNames:o}),copiedMessage:It.tq.copiedToClipboard})}},void 0,(0,An.U)({width:16,height:16,fill:c.mediumIconColor}))),renderTooltip:()=>n()(v.FormattedMessage,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const Lo=(0,v.injectIntl)((function(e){window.__c={n:"AuditLogPaginatedTable"};const{searchResponse:t,spaceStore:i}=e,[a,o]=(0,Ze.AF)(se),s=t.results||[],l=t.hasMoreResults,d=Boolean(s.length),c=e=>{const t={...a,pageNum:e};o(t)},u=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:Bo,theme:e,containerMarginTop:0})),[]),m=s.map(((e,t)=>({id:t.toString(),auditLogEntry:e,spaceStore:i,isClickable:!1}))),p=(0,r.useCallback)((()=>{const e=a.sortOrder===ae.CreatedOldest?ae.CreatedNewest:ae.CreatedOldest;o({...a,sortOrder:e,pageNum:1})}),[a,o]),g=(0,r.useMemo)((()=>({column:Eo,sortAscending:a.sortOrder===ae.CreatedOldest})),[a]);return r.createElement(r.Fragment,null,n()(Ve.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Bo,rows:m,sortState:g,onSortStateChanged:p,renderNoRowsComponent:Ro,styles:u}),d?n()("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10}},void 0,n()(Zo,{onClick:()=>{c(a.pageNum-1)},disabled:1===a.pageNum},void 0,n()(v.FormattedMessage,{id:"auditlog.logTable.previousPage",defaultMessage:"Previous"})),n()(Zo,{disabled:!l,onClick:()=>{c(a.pageNum+1)}},void 0,n()(v.FormattedMessage,{id:"auditlog.logTable.nextPage",defaultMessage:"Next"}))):null)}));const No=(0,v.injectIntl)((function(e){window.__c={n:"AuditLogSettingsImpl"};const{spaceStore:t}=e,i=(0,xe.O7)(),a=null==t?void 0:t.id,[o]=(0,Ze.AF)(de),[s]=(0,Ze.AF)(se),l=re(s)!==o.filterStr?void 0:o.cachedResponses[s.pageNum];return(0,r.useEffect)((()=>{a&&(async e=>{var t,i;const{environment:a,spaceId:n}=e,o=se.getState();de.startLoading(n,o);const{sortOrder:s,pageSize:r,pageNum:l}=o,d={spaceId:n,limit:r,cursor:de.getCursor(n,o,l),filters:{timeRange:{starting:o.timeRange.starting?Q.OQ.toUnixMs(o.timeRange.starting):void 0,ending:o.timeRange.ending?Q.OQ.toUnixMs(o.timeRange.ending):void 0},...(null===(t=o.actors)||void 0===t?void 0:t.length)>0?{actors:o.actors}:void 0,...(null===(i=o.actions)||void 0===i?void 0:i.length)>0?{actions:o.actions}:void 0},sort:s||ae.CreatedNewest},c=await I.searchAuditLog(a,d);if("success"!==c.type)if(de.updateError(n,o),(0,Aa.Jx)(c.body)){const e=(0,Ba.wf)(q.default.getIntl(),c);M.showErrorMessage(e)}else M.showErrorMessage(q.default.formatMessage(La.loadCurrentAuditLogError));else de.updateLoadedResult(n,o,c.data)})({environment:i,spaceId:a})}),[i,a,s]),(0,r.useEffect)((()=>{Oa({environment:i,spaceId:a})}),[i,a]),r.createElement(r.Fragment,null,n()(Pn,{}),n()("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:12,paddingBottom:12}},void 0,n()(In,{spaceStore:t}),n()(Ha,{})),"loading"===(null==l?void 0:l.status)&&n()(Fn,{}),"success"===(null==l?void 0:l.status)&&n()(Lo,{searchResponse:l,spaceStore:t}))}));var Oo=i(98692),Vo=i(76463),Uo=i(61202),Wo=i(38755),zo=i(72087),Ko=i(80920),Ho=i(74181),Go=i(90965),qo=i(94826),jo=i(9953),Yo=i(8323),$o=i(72371),Qo=i(74021),Jo=i(17549),Xo=i(30874),es=i(20454),ts=i(47453),is=i(77657),as=i(9844),ns=i(77137),os=i(78948);function ss(e){window.__c={n:"AdminIntegrationSettingsSearchResults"};const{query:t}=e,i=(0,xe.O7)(),a=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),o=(0,Ze.VK)((()=>null==a?void 0:a.getBotSettingsStore().getValue()),[a]),l="approved_or_built_by_notion"===(null==o?void 0:o.integration_restrictions),d=(0,Ze.VK)((()=>null!=o&&o.integration_approval_statuses?Object.keys(o.integration_approval_statuses):[]),[o]),c=(0,Ze.VK)((()=>Object.keys(is.u2).map((e=>{const t=null==a?void 0:a.getRecordModel({id:e,table:as.K2});if("published"===(null==t?void 0:t.status))return e})).filter(A.$K)),[a]),u=(0,r.useMemo)((()=>c.some((e=>e===is.f3))),[c]),m=(0,Ze.VK)((()=>c.filter((e=>!d.includes(e))).slice(0,5)),[d,c]);return n()(nt.Z,{menuType:Xe.og.Popup,width:255,header:ds(t,m,l)},void 0,n()(ns.Z,{request:t,performRequest:e=>async function(e){const{query:t,integrationType:i,environment:a,spaceId:n,approvedIntegrationIds:o,popularIntegrationIds:s,autoApproveBuiltByNotion:r}=e;if(!Ae.Z.state.online||!n)return[];if((0,p.e)(t)||(0,p.qn)(t))return[t];if(""===t&&!r)return s;const l=await I.searchIntegrations(a,{query:t,type:i,spaceId:n});if("success"===l.type){const e=l.data.integrationIds.filter((e=>!o.includes(e))),t="production";if(!r){return e.sort(((e,i)=>(0,is.BP)({integrationId:e,env:t})===(0,is.BP)({integrationId:i,env:t})?0:(0,is.BP)({integrationId:e,env:t})?-1:1)).slice(0,5)}return e.filter((e=>!(0,is.BP)({integrationId:e,env:t}))).slice(0,5)}if("failed"===l.type)throw l.error;return(0,A.t1)(l)}({query:e,environment:i,spaceId:null==a?void 0:a.id,approvedIntegrationIds:d,popularIntegrationIds:m,autoApproveBuiltByNotion:l}),debounce:Ea.vp,render:(l,c,m)=>{if(!c||!m)return n()(rt.Z,{},void 0,n()(os.Z,{}));const p=Ho.ns.filter((e=>t&&e.name.toLowerCase().includes(t.toLowerCase())&&!d.includes(e.id)&&(e.id!==Ho._o||!u))),g=[];if(0===c.length&&0===p.length)g.push({key:"no_results",render:()=>n()(Ee.Z,{isSmall:!0,style:{marginLeft:8}},void 0,n()(v.FormattedMessage,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})),action:()=>{}});else{const t=c.map((t=>{var l;const d={table:as.K2,id:t};if(!a)return;const c=ft.y2.createChildStore(a,d),u=null===(l=c.getInfo())||void 0===l?void 0:l.icon;return{key:`${t}`,render:e=>{var t;return r.createElement(it.Z,s()({},e,{title:n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,c.getName()),icon:u&&n()(Ht.Z,{disabled:!0,icon:{pointer:d,icon:u},isEmptyPage:!1,size:20}),style:u?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:n()(cs,{tagline:null===(t=c.getInfo())||void 0===t?void 0:t.tagline,isNotionIntegration:(0,is.BP)({integrationId:c.id,env:"production"})}),className:"notranslate"}))},action:()=>{e.closeDropdown(),ls({environment:i,currentSpaceStore:a,botSettings:o,integrationId:t})}}})).filter(A.$K),l=p.map((t=>({key:`${t.id}`,render:e=>r.createElement(it.Z,s()({},e,{title:n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,t.name),icon:n()("img",{src:t.info.icon,style:{height:20}}),caption:t.info.tagline,style:{paddingBottom:12},shouldWrapCaption:!0,className:"notranslate"})),action:()=>{e.closeDropdown(),ls({environment:i,currentSpaceStore:a,botSettings:o,integrationId:t.id})}}))).filter(A.$K);g.push(...t,...l)}return n()(ot.Z,{type:ot.i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>r.createElement(rt.Z,e),items:g}]})}}))}function rs(e){window.__c={n:"AdminComplianceIntegrationSettingsSearchResults"};const{query:t}=e,i=(0,xe.O7)(),a=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]);return a?n()(nt.Z,{menuType:Xe.og.Popup,width:255,header:ds(t,[],!1)},void 0,n()(ns.Z,{request:t,performRequest:e=>async function(e){const{query:t,environment:i,spaceId:a}=e;if(!Ae.Z.state.online||!a)return[];if((0,p.e)(t)||(0,p.qn)(t))return[t];const n=await I.searchIntegrations(i,{query:t,type:"compliance",spaceId:a});if("success"===n.type)return n.data.integrationIds;if("failed"===n.type)throw n.error;return(0,A.t1)(n)}({query:e,environment:i,spaceId:null==a?void 0:a.id}),debounce:Ea.vp,render:(t,i,o)=>{if(!i||!o)return n()(rt.Z,{},void 0,n()(os.Z,{}));const l=[];if(0===i.length)l.push({key:"no_results",render:()=>n()(Ee.Z,{isSmall:!0,style:{marginLeft:8}},void 0,n()(v.FormattedMessage,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})),action:()=>{}});else{const t=$o.Z.state.loaded&&Xo.Z.state.loaded?$o.Z.state.webhookSubscriptions.map((e=>{var t;return null===(t=Xo.Z.getBotsAsRecordMap().getValue({table:Ot.cZ,id:e.bot_id}))||void 0===t?void 0:t.integration_id})):[],o=i.map((i=>{const o=ft.y2.createChildStore(a,{id:i,table:as.K2});if(t.includes(i))return;const l={table:as.K2,id:i},d=ft.y2.createChildStore(a,l),c=(0,qo.I$)(d.id);return{key:`${i}`,render:e=>r.createElement(it.Z,s()({},e,{title:n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,d.getName()),icon:(null==c?void 0:c.icon)&&n()(Ht.Z,{disabled:!0,icon:{pointer:l,icon:c.icon},isEmptyPage:!1,size:20}),style:null!=c&&c.icon?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:n()(cs,{tagline:null!=c&&c.tagline?q.default.formatMessage(null==c?void 0:c.tagline):"A SIEM or DLP partner",isNotionIntegration:!1})})),action:()=>{var t;e.closeDropdown();o.getModel()&&(null!=c&&null!==(t=c.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==c?void 0:c.type))?Jo.Z.setState({open:!0,integrationId:d.id}):Qo.Z.setState({open:!0,integrationId:d.id})}}})).filter(A.$K);l.push(...o)}return n()(ot.Z,{type:ot.i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>r.createElement(rt.Z,e),items:l}]})}})):null}function ls(e){const{environment:t,currentSpaceStore:i,botSettings:a,integrationId:n}=e;if(i&&!(0,qo.z6)(n)){const e={...null==a?void 0:a.integration_approval_statuses,[n]:{type:"integration",status:"approved"}};V.createAndCommit({userAction:"AdminIntegrationSettingsSearchResults.handleIntegrationSelection",environment:t,perform:t=>{jo.sW({store:i,data:{bot_settings:{...a,integration_approval_statuses:e}},transaction:t})}})}}const ds=(e,t,i)=>!e&&!i&&t.length>0&&n()(Ut.Z,{title:n()(Ee.Z,{isSmall:!0,style:{marginTop:4,fontWeight:f.Z.fontWeight.medium}},void 0,n()(v.FormattedMessage,{defaultMessage:"Popular integrations",id:"adminIntegrationSettings.search.title.popularIntegrations"}))}),cs=e=>{window.__c={n:"IntegrationCaption"};const{tagline:t,isNotionIntegration:i}=e,a=(0,Fe.Fg)(),o=i?{}:{maxHeight:48,overflow:"auto"};return t?n()("div",{style:o},void 0,t,i&&n()("div",{style:{display:"flex",alignItems:"center",marginTop:8}},void 0,n()(v.FormattedMessage,{defaultMessage:"Developed by Notion",id:"adminIntegrationSettings.search.subtitle.notionBuilt"}),(0,Ko.X)({marginLeft:3,width:12,height:12,fill:a.invoiceGreen}))):null},us=(0,v.defineMessages)({searchInputPlaceholder:{id:"adminConnectionsSettings.search.input.placeholder",defaultMessage:"Add by name or integration ID"}});function ms(){window.__c={n:"AdminConnectionsSettingsAddMenu"};const e=(0,xe.O7)(),t=(0,Fe.Fg)(),[i,a]=(0,r.useState)(!0),[o,s]=(0,r.useState)(!1),[l,d]=(0,r.useState)(""),c=r.createRef();return i?n()(Ri.Z,{style:{display:"flex",alignItems:"center",height:28,fontWeight:f.Z.fontWeight.medium,fontSize:f.Z.fontSize.UIRegular.desktop,color:tn.ZP.blue,padding:"0px 6px"},onClick:()=>{a(!1)}},void 0,n()(v.FormattedMessage,{id:"adminConnectionsSettings.search.button.label",defaultMessage:"{plusIcon} Add approved connection",values:{plusIcon:(0,ts.R)({fill:tn.ZP.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})):n()(st.ZP,{alignmentToOrigin:st.ZP.Alignment.Start,keepFocus:e.device.isPhone,onDismiss:()=>{var e;null===(e=c.current)||void 0===e||e.handleBlur(),a(!0),s(!1)},origin:r.createElement(Qi.Z,{type:"text",style:{width:255},left:(0,ts.R)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),ref:c,value:l,onFocus:()=>{s(!0)},placeholder:q.default.formatMessage(us.searchInputPlaceholder),onChange:e=>d(e.target.value)}),open:o,popupType:st.ZP.PopupType.Popup,style:{width:255},render:()=>n()(ss,{query:l,closeDropdown:()=>s(!1)})})}function ps(){window.__c={n:"AdminConnectionsSettingsAddComplianceMenu"};const e=(0,xe.O7)(),t=(0,Fe.Fg)(),[i,a]=(0,r.useState)(!0),[o,s]=(0,r.useState)(!1),[l,d]=(0,r.useState)(""),c=r.createRef();return i?n()(Ge.Z,{isBlue:!0,style:{display:"flex",alignItems:"center",height:28,fontWeight:f.Z.fontWeight.medium,fontSize:f.Z.fontSize.UIRegular.desktop,color:tn.ZP.blue,padding:"0px 6px"},onClick:()=>{var e;a(!1),null===(e=c.current)||void 0===e||e.focusInput()}},void 0,n()(v.FormattedMessage,{id:"adminConnectionsSettingsAddComplianceMenu.search.button.label",defaultMessage:"{plusIcon} Add connection",values:{plusIcon:(0,ts.R)({fill:tn.ZP.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})):n()(st.ZP,{alignmentToOrigin:st.ZP.Alignment.Start,keepFocus:e.device.isPhone,onDismiss:()=>{var e;null===(e=c.current)||void 0===e||e.handleBlur(),a(!0),s(!1)},origin:r.createElement(Qi.Z,{type:"text",style:{width:255},left:(0,ts.R)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),focus:!0,ref:c,value:l,onFocus:()=>{s(!0)},placeholder:q.default.formatMessage(us.searchInputPlaceholder),onChange:e=>d(e.target.value)}),open:o,popupType:st.ZP.PopupType.Popup,style:{width:255},render:()=>n()(rs,{query:l,closeDropdown:()=>{a(!0),s(!1)}})})}var gs=i(35878),hs=i(94512),fs=i(70578),vs=i(61519),ys=i(42402),Ss=i(55422),bs=i(66957);const Ms=["member_connections","workspace_connections"];function ws(e){window.__c={n:"AdminConnectionsSettings"};const t=(0,xe.O7)(),{isMobile:i}=t.device,{guestBotIds:a}=e,o=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),s=(0,Ze.VK)((()=>$o.Z.webhookSubscriptions.state.reduce(((e,t)=>{const i=t.getBotId();return i&&(e[i]=t.id),e}),{})),[]),l=(0,Ze.VK)((()=>(0,Yo.wP)()&&T.default.checkGate("webhooks_beta")),[]),d=(0,Ze.VK)((()=>T.default.checkGate("webhook_discovery_tile")),[]),c=(0,Ze.VK)((()=>o?(0,m.jj)([...a,...Xo.Z.bots.state.map((e=>e.id))]).map((e=>{const t=ft.Qx.createChildStore(o,{table:Ot.cZ,id:e,spaceId:o.id});return t.getAlive()?t:void 0})).filter(A.$K):[]),[o,a]),u=(0,Ze.VK)((()=>function(e){return e.reduce(((e,t)=>{const i=t.getIntegrationId();if(!i)return e;return(0,qo.EY)(i)?(i in e.compliance||(e.compliance[i]=[]),e.compliance[i].push(t.id)):(i in e.nonCompliance||(e.nonCompliance[i]=[]),e.nonCompliance[i].push(t.id)),e}),{compliance:{},nonCompliance:{}})}(c)),[c]),p=(0,Ze.VK)((()=>function(e){return e.filter((e=>!e.getIntegrationId())).map((e=>e.id))}(c)),[c]),g=(0,Ze.VK)((()=>function(e,t){if(!t)return{};return e.reduce(((e,i)=>{const a=es.U.createChildStore(t,{table:ti.KJ,id:i.getCreatedById()}),n=i.getIntegrationId();return n?e[n]=n in e?[...e[n],a]:[a]:e[i.id]=[a],e}),{})}(c,o)),[c,o]),h=(0,Ze.VK)((()=>null==o?void 0:o.getBotSettingsStore().getValue()),[o]),y=(0,Ze.VK)((()=>Object.keys(u.nonCompliance).length+p.length),[u.nonCompliance,p]),S=(0,Ze.VK)((()=>Object.values(u.compliance).flat().length),[u.compliance]),b=(0,Ze.VK)((()=>null!=h&&h.integration_approval_statuses?Object.keys(h.integration_approval_statuses).length+p.length:p.length),[h,p]),M={member_connections:n()(v.FormattedMessage,{id:"admin.connections.tabs.member_connections",defaultMessage:"Member{numberOfIntegrations}",values:{numberOfIntegrations:0!==y&&n()(Ee.Z,{isSecondaryColor:!0,style:{marginLeft:6}},void 0,y+Ho.T2.length)}}),workspace_connections:n()(v.FormattedMessage,{id:"admin.connections.tabs.workspace_connections",defaultMessage:"Workspace{numberOfIntegrations}",values:{numberOfIntegrations:0!==S&&n()(Ee.Z,{isSecondaryColor:!0,style:{marginLeft:6}},void 0,S)}})},w=Ms.map((e=>M[e])),C=(0,Ze.VK)((()=>"integrations"===ke.Z.state.currentTab?ke.Z.state.defaultSubtab:void 0),[]),_=(0,Ze.VK)((()=>$o.Z.integrations.state),[]),[k,I]=(0,r.useState)(C||"member_connections"),P={member_connections:()=>r.createElement(r.Fragment,null,n()(Cs,{}),(null==h?void 0:h.integration_restrictions)&&n()("div",{style:{marginTop:"19px"}},void 0,n()(_s,{})),n()(vs.Z,{size:i?32:18,isHidden:!i}),Boolean(null==h?void 0:h.integration_restrictions)?n()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:19}},void 0,n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.medium,display:"flex",alignItems:"center",height:28}},void 0,n()(v.FormattedMessage,{id:"adminConnectionsSettings.table.allowIntegrations.title",defaultMessage:"Approved connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==b&&n()(Ee.Z,{isSecondaryColor:!0,style:{marginLeft:6}},void 0,b)}})),n()(ms,{})):n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.medium,display:"flex",height:28,alignItems:"center",marginBottom:"19px"}},void 0,n()(v.FormattedMessage,{id:"adminConnectionsSettings.table.default.title",defaultMessage:"All connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==y&&n()(Ee.Z,{isSecondaryColor:!0,style:{marginLeft:6}},void 0,y+Ho.T2.length)}})),n()(gs.ZP,{integrationIdToBotIds:u.nonCompliance,internalIntegrationIds:p,integrationIdToUsers:g}),n()("div",{style:{marginTop:16,marginBottom:32,display:"grid",gridTemplateColumns:"1fr",gap:4}},void 0,n()(fs.Z,{}))),workspace_connections:()=>{const e=Object.keys(u.compliance),t=!d||e.length>0,i=function(e){const{allIntegrations:t,connectedIntegrationIds:i}=e,a=[];for(const n of t)if(!i.includes(n.id)){const e=(0,qo.I$)(n.id);if(!e)continue;a.push({id:n.id,appName:n.name,account:void 0,caption:n.getInfo().tagline,logo:n.getInfo().icon,shouldHideInDiscover:!1,shouldHideConnectAccount:!0,capabilities:r.createElement(r.Fragment,null),canSelectPageAccess:!1,onConnect:()=>{var t;null!=e&&null!==(t=e.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==e?void 0:e.type)?Jo.Z.setState({open:!0,integrationId:n.id}):Qo.Z.setState({open:!0,integrationId:n.id})},onDisconnect:()=>{}})}return a}({allIntegrations:_,connectedIntegrationIds:e});return r.createElement(r.Fragment,null,l?r.createElement(r.Fragment,null,t&&r.createElement(r.Fragment,null,n()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:19,marginTop:20}},void 0,n()("span",{style:{fontSize:14,marginRight:8}},void 0,n()(v.FormattedMessage,{id:"admin.connections.tab.workspace_connections.header",defaultMessage:"These integrations connect your workspace to external apps, or improve security and compliance. Only workspace owners can install them."})),n()(ps,{})),n()(gs.cP,{botIdToWebhookSubscriptionId:s,complianceIntegrationsIdToBotIds:u.compliance})),d&&n()("div",{style:{marginTop:t?32:void 0}},void 0,n()(hs.Z,{apps:i,numberOfConnectedApps:e.length}))):null)}},x=e=>P[e];return l?r.createElement(r.Fragment,null,n()(bs.Z,{tabs:w,selectedIndex:Ms.findIndex((e=>e===k)),onChange:e=>(e=>{I(Ms[e])})(e),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),x(k)()):x("member_connections")()}const Cs=()=>{window.__c={n:"RequireApprovalDropdown"};const e=(0,xe.O7)(),t=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),{isMobile:i}=e.device,a=(0,Ze.VK)((()=>(0,Yo.wP)()),[]),o=(0,Ze.VK)((()=>null==t?void 0:t.getBotSettingsStore().getValue()),[t]);return n()(Ss.Z,{isMobile:i,title:n()(v.FormattedMessage,{id:"adminConnectionsSettings.requireApprovalSetting.title",defaultMessage:"Restrict members from adding connections"}),caption:(0,Go.CJ)(o)?n()(v.FormattedMessage,{id:"adminConnectionsSettings.requireApprovalSetting.allowList.workspaceOwner.caption",defaultMessage:"Workspace members can only install connections pre-approved by workspace owners."}):n()(v.FormattedMessage,{id:"adminConnectionsSettings.requireApprovalSetting.off.caption",defaultMessage:"Workspace members can install any new connection."}),upsellOptions:{shouldUpsell:!a,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"dropdown",currentOption:(0,Go.CJ)(o)?"allow_list":"any_integrations",options:[{key:"any_integrations",label:n()(v.FormattedMessage,{id:"adminIntegrationSettings.integrationRestrictions.off.title",defaultMessage:"No restrictions"}),caption:n()(v.FormattedMessage,{id:"adminConnectionsSettings.connectionRestrictions.off.caption",defaultMessage:"Workspace members can install any connection."})},{key:"allow_list",label:n()(v.FormattedMessage,{id:"adminIntegrationSettings.integrationRestrictions.allowList.title",defaultMessage:"Only from approved list"}),caption:n()(v.FormattedMessage,{id:"adminConnectionsSettings.connectionRestrictions.allowList.caption",defaultMessage:"Workspace members can only install connections pre-approved by a workspace owner."})}],onSelectOption:i=>{!function(e){const{environment:t,currentSpaceStore:i,botSettings:a,setting:n}=e;if(i){if("allow_list"===n&&(0,Go.CJ)(a))return;const e="allow_list"===n?"approved_only":void 0;V.createAndCommit({userAction:"AdminIntegrationSettings.handleIntegrationRestrictionSelect",environment:t,perform:t=>{jo.sW({store:i,data:{bot_settings:{...a,integration_restrictions:e}},transaction:t})}})}}({environment:e,currentSpaceStore:t,botSettings:o,setting:i})},info:[{key:"learn_more",label:n()(v.FormattedMessage,{id:"adminConnectionsSettings.connectionRestrictions.info.title",defaultMessage:"Workspace owners can always install and approve new connections."})}]})};const _s=()=>{window.__c={n:"AutoApproveBuiltByNotionToggle"};const e=(0,xe.O7)(),t=(0,Fe.Fg)(),i=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),{isMobile:a}=e.device,o=(0,Ze.VK)((()=>(0,Yo.wP)()),[]),s=(0,Ze.VK)((()=>null==i?void 0:i.getBotSettingsStore().getValue()),[i]);return n()(Ss.Z,{isMobile:a,title:n()(v.FormattedMessage,{id:"adminConnectionsSettings.autoApproveBuiltByNotion.title",defaultMessage:"Auto-approve <builtbynotion>Built by Notion</builtbynotion> connections",values:{builtbynotion:e=>n()("span",{style:{color:t.invoiceGreen,marginRight:4,marginLeft:4}},void 0,(0,Ko.X)({width:14,display:"inline",verticalAlign:"bottom",marginRight:2}),e)}}),caption:n()(v.FormattedMessage,{defaultMessage:"Toggle this on to approve all workspace members to install connections <helpcenterlink>built by Notion</helpcenterlink>.",id:"adminConnectionsSettings.autoApproveBuiltByNotion.caption",values:{helpcenterlink:e=>n()(ys.Z,{href:(0,Y.UY)("guides.enterpriseIntegrationSettings")},void 0,e)}}),upsellOptions:{shouldUpsell:!o,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:"approved_or_built_by_notion"===(null==s?void 0:s.integration_restrictions),onToggle:()=>function(e){const{environment:t,currentSpaceStore:i,botSettings:a}=e;if(i){const e="approved_or_built_by_notion"===(null==a?void 0:a.integration_restrictions)?"approved_only":"approved_or_built_by_notion";V.createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,perform:t=>{jo.sW({store:i,data:{bot_settings:{...a,integration_restrictions:e}},transaction:t})}})}}({environment:e,currentSpaceStore:i,botSettings:s})})};var ks=i(25777);class Ts extends l.Z{constructor(){super(...arguments),this.storeTypes={requestStore:zo.Z},this.renderResult=(e,t,i)=>{const{currentSpaceStore:a}=B.default.state;if(a)return n()(ks.Z,{loaded:i,spinnerSize:16,showSpinnerTimeout:600},void 0,e&&n()("div",{},void 0,n()(v.FormattedMessage,{id:"spaceIntegrationSettings.error",defaultMessage:"Something went wrong…"})),t&&r.createElement(ws,t))},this.fetchBotsInSpace=async e=>{let{spaceId:t}=e;return{guestBotIds:(await Promise.all([Vo.Yw({environment:this.environment,table:Wn.bx,id:t,type:"guest"}),Vo.Yw({environment:this.environment,table:Wn.bx,id:t,type:"external"}),Uo.pJ({environment:this.environment})]))[0].botIds}}}renderComponent(){const{device:e}=this.environment;if((0,Wo.Fn)(this.environment))return n()(Be.Z,{},void 0,n()(Re.Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full",style:{paddingBottom:12}},void 0,n()(v.FormattedMessage,{id:"spaceConnectionsSettings.title",defaultMessage:"Connections"})),this.renderRequest());w.r$({currentTab:"members"})}renderRequest(){const{spaceStore:e,userStore:t}=this.props;return n()(ns.Z,{requestStore:this.stores.requestStore,request:{spaceId:e.id,userId:t.id},performRequest:this.fetchBotsInSpace,render:this.renderResult})}}Ts.displayName="IntegrationSettings";const Is=(0,v.injectIntl)(Ts);var Ps=i(36488),xs=i(56940),Zs=i(50506),Fs=i(79603),As=i(53770);const Es=[50,100,200,500,1e3];function Bs(e){let{spaceStore:t,samlConfigStore:i,memberCountFilter:a,isPrimarySpace:n}=e;const o=(0,xe.O7)(),s=(0,Ze.VK)((()=>i.state.emailDomains),[i]),[l,d]=(0,r.useState)({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),c=(0,Ze.VK)((()=>(0,Yo.wP)()),[]),u=(0,r.useCallback)((async e=>{if(c&&0!==s.length&&n&&l.nextEarliestCreatedAt&&!l.loading&&!(e&&l.numPagesLoaded>0||l.error)){d((e=>({...e,loading:!0})));try{const{spaces:e,earliestCreatedAt:i,hasMoreSpaces:n}=await(0,As.XD)({fn:async()=>await async function(e,t,i,a,n){const o=await I.getSpacesCreatedByUserWithDomains(e,{spaceId:t,emailDomains:i,spacesLimit:10,memberCountFilter:n,spaceCreatedTimeUpperBound:a});if("failed"===o.type)throw o.error;return{spaces:o.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:o.data.hasMoreSpaces?o.data.earliestCreatedAt:void 0,hasMoreSpaces:o.data.hasMoreSpaces}}(o,t.id,s,l.nextEarliestCreatedAt?l.nextEarliestCreatedAt-1:Date.now(),a),handleError:(e,t)=>t?{status:"throw",error:e}:{status:"retry"},retryAttemptsMS:Es,retryAttemptRandomOffsetMS:50,initialInput:void 0});d((t=>{const a=[...t.spaces],o=new Set(t.spaces.map((e=>e.id)));for(const i of e)o.has(i.id)||a.push(i);return{spaces:a,nextEarliestCreatedAt:i,numPagesLoaded:t.numPagesLoaded+1,hasNextPage:n,loading:!1,error:void 0}}))}catch(i){const e=(0,Ma.tg)(i);d((t=>({...t,loading:!1,error:e})))}}}),[o,c,a,n,t,s,l.nextEarliestCreatedAt,l.numPagesLoaded,l.loading,l.error]);const m=(0,r.useCallback)((async()=>{await u(!1)}),[u]),p=(0,r.useCallback)((async()=>{await u(!0)}),[u]),g=(0,r.useCallback)((async()=>{d({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),await u(!0)}),[u]);return{claimableSpaces:l.spaces,loading:l.loading,error:l.error,hasNextPage:l.hasNextPage,loadFirstPage:p,loadNextPage:m,resetFirstPage:g,setSpaceRequest:function(e,t){d((i=>{const a=i.spaces.map((i=>i.id===e?{...i,spaceRequest:t}:i));return{...i,spaces:a}}))},removeClaimableSpace:function(e){d((t=>{const i=t.spaces.filter((t=>t.id!==e));return{...t,spaces:i}}))}}}var Rs=i(59054);async function Ds(e){const{environment:t,spaceId:i,store:a}=e;if(!(0,Yo.Rs)())return a.reset(),{};const n=await I.getSamlConfigForSpace(t,{spaceId:i});if("failed"===n.type)M.showError(n);else if(n.data&&n.data.samlConfig){const e={...n.data.samlConfig,useMetadataUrl:!Boolean(n.data.samlConfig.idpMetadata)};return a.setState(e),n.data}return a.reset(),{}}const Ls="settings-page",Ns="workspaces-page",Os="managed-users-page";let Vs=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}({});const Us=(0,r.createContext)(null),Ws=e=>{let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a,children:o}=e;window.__c={n:"PageProvider"};const s=(0,xe.O7)(),[l,d]=(0,r.useState)(Ls),[c,u]=(0,r.useState)(Vs.Single),m=(0,Ze.VK)((()=>i.state.emailDomains),[i]),p=(0,Ze.VK)((()=>Boolean(i.state.id)&&i.state.id===t.id),[i,t]),{loading:g,error:h,loaded:f}=function(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a}=e;const n=(0,xe.O7)(),[{status:o,error:s}]=(0,Rs.r5)((async()=>{var e;const o=await Ds({environment:n,spaceId:t.id,store:i});if((0,Aa.Zw)(o))return o;const s=null===(e=o.samlConfig)||void 0===e?void 0:e.id;return s?{samlResponse:o,domainResponse:await a.updateValueForSpace({environment:n,spaceId:s,store:a})}:{samlResponse:o,domainResponse:void 0}}),[n,i,t,a]);return{loading:"pending"===o,loaded:"resolved"===o,error:s}}({spaceStore:t,samlConfigStore:i,domainSettingsStore:a}),{loading:v,error:y,claimableSpaces:S,setSpaceRequest:M,removeClaimableSpace:w,hasNextPage:C,loadNextPage:_,loadFirstPage:k,resetFirstPage:T}=Bs({spaceStore:t,samlConfigStore:i,isPrimarySpace:p,memberCountFilter:"single"}),{loading:P,error:x,claimableSpaces:Z,setSpaceRequest:F,removeClaimableSpace:A,hasNextPage:E,loadNextPage:B,loadFirstPage:R,resetFirstPage:D}=Bs({spaceStore:t,samlConfigStore:i,isPrimarySpace:p,memberCountFilter:"multi"}),L=S.length+Z.length>0,[N,O,V,U,W,z,K,H]=c===Vs.Single?[v,y,S,M,w,C,_,k,T]:[P,x,Z,F,A,E,B,R,D],{loading:G,error:q,domainVerifications:j}=function(e){let{spaceStore:t}=e;const i=(0,xe.O7)(),[a,n]=(0,r.useState)([]),[{status:o,error:s}]=(0,Rs.r5)((async()=>{const e=await I.getDomainVerificationCodesForSpace(i,{spaceId:t.id,verifiedOnly:!0});"success"===e.type?n(e.data.domainVerifications):n([])}),[i,t]);return{loading:"pending"===o,domainVerifications:"resolved"===o?a:[],error:s}}({spaceStore:t,emailDomains:m});(0,r.useEffect)((()=>{k(),R()}),[V,k,R]);const Y={page:l,navigateTo:function(e){d(e),0===S.length&&Z.length>0&&u(Vs.Multi),"workspaces-page"===e&&b.Cez(s,{verifiedDomains:m,tab:c===Vs.Single?"single":"multi"})},loadingSaml:g,loadingSpaces:N,loadingVerifications:G,errorSaml:h,errorClaimableSpaces:O,errorVerifications:q,loadedSaml:f,domainVerifications:j,hasBrowsableSpaces:L,claimableSpaces:V,setSpaceRequest:U,removeClaimableSpace:W,resetInitialClaimableSpaces:H,hasMoreClaimableSpaces:z,loadMoreClaimableSpaces:K,tab:c,setSelectedTab:function(e){u(e),"workspaces-page"===l&&b.Cez(s,{verifiedDomains:m,tab:e===Vs.Single?"single":"multi"})},verifiedDomains:m};return n()(Us.Provider,{value:Y},void 0,o)};var zs=i(84169),Ks=i(19981),Hs=i(66466),Gs=i(25651),qs=i(29851),js=i(2356),Ys=i(37612);let $s=function(e){return e.User="user",e.Domains="domains",e}({});var Qs=i(64964);const Js={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0};function Xs(e){let{spaceStore:t,samlConfigStore:i,userStatus:a}=e;const n=(0,xe.O7)(),[o,s]=(0,r.useState)(Js),l=(0,r.useRef)(o.filters),d=(0,Ze.VK)((()=>Boolean(i.state.id)&&i.state.id===t.id),[i,t]),c=(0,Ze.VK)((()=>i.state.emailDomains),[i]),u=(0,Ze.VK)((()=>T.default.checkGate("enable_managed_users_dashboard")),[]),p=(0,r.useCallback)((async e=>{if(!u)return;if(0===c.length)return;if(!d)return;let i=o.loading,r=o.error,m=o.hasNextPage,p=o.paginationToken;if(e.restartSearch&&(s((e=>({...Js,filters:e.filters}))),i=Js.loading,r=Js.error,m=Js.hasNextPage,p=Js.paginationToken),m&&!i&&!r){s((e=>({...e,loading:!0}))),l.current=o.filters;try{var g;const e=await I.getManagedUsers(n,{spaceId:t.id,emailDomains:c,query:o.filters.query,multiFactorStatus:o.filters.multiFactorStatus,workspaceId:o.filters.workspaceId,paginationToken:p,userStatus:a});if(b.HH5(n,{filters:{multiFactorStatus:o.filters.multiFactorStatus,workspaceId:o.filters.workspaceId},query_length:(null===(g=o.filters.query)||void 0===g?void 0:g.length)??0,current_page:p,user_status:a}),"failed"===e.type)throw e.error;const i=e.data.nextPaginationToken,r=e.data.results;s((e=>{const t=[...e.managedUsers],a=new Set(e.managedUsers.map((e=>e.userId)));for(const i of r)a.has(i.userId)||t.push(i);return{...e,managedUsers:t,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:i,hasNextPage:Boolean(i)}}))}catch(h){const e=(0,Ma.tg)(h);s((t=>({...t,loading:!1,error:e})))}}}),[n,t,u,c,d,o.loading,o.error,o.hasNextPage,o.paginationToken,o.filters,a]);(0,r.useEffect)((()=>{m.Xy(l.current,o.filters)||p({restartSearch:!0})}),[o.filters,p]);const g=(0,r.useCallback)((()=>p({restartSearch:!1})),[p]),h=(0,r.useCallback)((e=>{s((t=>({...t,filters:{...t.filters,...e}})))}),[]),f=(0,r.useCallback)(((e,t)=>{s((i=>({...i,managedUsers:i.managedUsers.map((i=>i.userId===e?{...i,workspaces:i.workspaces.filter((e=>e.id!==t))}:i))})))}),[]),v=(0,r.useCallback)((e=>{s((t=>({...t,managedUsers:[...t.managedUsers,e]})))}),[]),y=(0,r.useCallback)((e=>{s((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]);return{managedUsers:o.managedUsers,filters:o.filters,loading:o.loading,error:o.error,removeWorkspaceFromUser:f,addUserToManagedUsers:v,removeUserFromManagedUsers:y,setFilters:h,hasNextPage:o.hasNextPage,loadNextPage:g}}let er=function(e){return e[e.NotSuspended=0]="NotSuspended",e[e.Suspended=1]="Suspended",e}({});function tr(e){switch(e){case er.Suspended:return"suspended";case er.NotSuspended:return"notSuspended";default:(0,A.t1)(e)}}function ir(e){let{lastActiveAt:t}=e;window.__c={n:"LastActiveDate"};const i=(0,Fe.yK)((e=>({container:{opacity:.5}})),[]);return n()("div",{style:i.container},void 0,t?n()(We.T,{dateTs:t}):n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.lastActive.unknown",defaultMessage:"No activity"})))}const ar={defaultMessage:"External workspace",id:"managedUsers.externalWorkspaceName",description:"A generic name to replace the real name of an external workspace."};function nr(e){return e.formatMessage(ar)}function or(e){if(!e)return;const t=Object.entries(Un.nb).find((t=>{let[i,a]=t;return a===e}));if(t){return t[0]}}function sr(e){let{workspace:t}=e;window.__c={n:"WorkspaceSummaryName"};const i=(0,v.useIntl)(),a=(0,Fe.yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return n()("div",{style:a.container},void 0,t.name??nr(i),t.isExternal?n()(rr,{}):null)}function rr(){window.__c={n:"ExternalWorkspaceInfoIcon"};const e=(0,Fe.yK)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return n()(Nt.Z,{render:t=>r.createElement("div",t,(0,Ke.D)(e.icon)),renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",defaultMessage:"This is an external workspace that does not belong to this user."})})}function lr(e){let{workspaceSummaries:t}=e;window.__c={n:"UserAccess"};const i=(0,v.useIntl)(),a=(0,Fe.yK)((e=>({title:{marginRight:8},noWorkspaces:{paddingInline:8,opacity:.5},workspaceName:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return n()(Ee.Z,{style:a.noWorkspaces},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",defaultMessage:"No workspaces"}));const o=t.find((e=>e.name)),s=o?o.name:nr(i),r=t.length-1;return n()("div",{style:a.titleContainer},void 0,n()(Ee.Z,{isInline:!0,style:a.workspaceName},void 0,s),!o||o.isExternal?n()(rr,{}):null,r>0?n()(Ee.Z,{isInline:!0,style:a.plusMore},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",defaultMessage:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:r}}),""):null)}var dr=i(93405),cr=i(83182);const ur=(0,v.defineMessages)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function mr(e){let{managedUser:t,managedUserActionSections:i}=e;window.__c={n:"UserActionsMenu"};const a=(0,Ze.qz)(void 0,Zt.Z),o=(0,v.useIntl)(),l=(0,Fe.yK)((()=>({container:{minWidth:265}})),[]);return n()(Bt.ZP,{popupType:st.kQ.Popup,style:l.container,buttonPopupStore:a,renderOrigin:e=>r.createElement(Rt.Z,s()({ariaLabel:o.formatMessage(ur.menuAriaLabel),icon:_t.o},e)),render:()=>n()(pr,{managedUser:t,popupStore:a,managedUserActionSections:i})})}function pr(e){let{managedUser:t,popupStore:i,managedUserActionSections:a}=e;window.__c={n:"ActionsMenu"};const o=[],l=(0,Fe.yK)((()=>({destructiveIcon:{fill:tn.ZP.red,color:tn.ZP.red}})),[]);for(const[n,d]of a.entries()){const e=d.map(((e,i)=>({key:i,render:i=>{var a,n;return r.createElement(dr.Z,s()({},i,{shouldWrapCaption:!0,svg:t=>e.icon(e.isDestructive?{...t,...l.destructiveIcon}:t),title:e.title,style:{paddingTop:8,paddingBottom:8,...e.isDestructive?l.destructiveIcon:{}},disabled:null===(a=e.getDisabledState)||void 0===a?void 0:a.call(e,t),disabledFeedback:null===(n=e.getDisabledState)||void 0===n?void 0:n.call(e,t)}))},action:()=>e.onClick(t)}))),i={key:`section-${n}`,render:e=>r.createElement(rt.Z,s()({topBorder:n>0},e)),items:e};o.push(i)}return n()(nt.Z,{menuType:Xe.og.Popup},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:o,onAccept:()=>{i.setState({open:!1})}}),n()(rt.Z,{topBorder:!0},void 0,n()(cr.Z,{title:n()(v.FormattedMessage,{defaultMessage:"Learn about user suspension",id:"managedUsersDashboard.userActionsMenu.helpButton"}),href:(0,Y.UY)("guides.managedUsers"),analyticsFrom:"managed_users_dashboard_user_actions_menu"})))}function gr(e){let{userId:t}=e;window.__c={n:"UserSummary"};const i=(0,v.useIntl)(),a=(0,Ze.VK)((()=>{const e=B.default.state.currentSpaceStore;if(!e)return;const a=ft.U6.createChildStore(e,{table:ti.KJ,id:t});return{userStore:a,userName:a.getDisplayName(i),userEmail:a.getEmail()}}),[t,i]),o=(0,Fe.yK)((e=>({iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500}})),[]);return a?n()(vt.i,{useThinTitle:!0,title:a.userName,byline:a.userEmail,icon:n()(ai.Z,{size:28,userStore:a.userStore,iconStyle:o.iconStyle})}):null}var hr=function(e){return e.ManagedUser="managed-user",e.Loading="loading",e}(hr||{});const fr={borderRadius:"100%",height:28,width:28,marginLeft:-4},vr={marginLeft:4,height:14,width:14,opacity:.5},yr=[{id:"user",headerTitle:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===hr.ManagedUser?n()(gr,{userId:e.managedUser.userId}):n()(vt.H,{includeByline:!0,includeIcon:!0,iconStyles:fr}),widthData:{width:70},sortable:!1},{id:"access",headerTitle:n()("span",{style:{paddingInline:8}},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.access",defaultMessage:"Workspaces"})),renderCell:e=>e.type===hr.ManagedUser?n()(lr,{workspaceSummaries:e.managedUser.workspaces}):n()(Lt.z,{}),widthData:{width:60},sortable:!1},{id:"lastActive",headerTitle:n()("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.lastActive",defaultMessage:"Last active"}),n()(Nt.Z,{render:e=>r.createElement("div",e,(0,Ke.D)(vr)),renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})),renderCell:e=>e.type===hr.ManagedUser?n()(ir,{lastActiveAt:e.managedUser.lastActiveAt}):n()(We.I,{}),widthData:{width:60},sortable:!1},{id:"menu",headerTitle:null,renderCell:e=>e.type===hr.ManagedUser?n()(mr,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,widthData:{width:15},sortable:!1,hasClickableContents:!0}],Sr=[{id:"1",isClickable:!1,type:hr.Loading},{id:"2",isClickable:!1,type:hr.Loading},{id:"3",isClickable:!1,type:hr.Loading}];function br(e){let{managedUsers:t,loadMoreManagedUsers:i,onEditDetails:a,loading:o,managedUserActionSections:s}=e;window.__c={n:"ManagedUsersTable"};const l=t.map((e=>({id:e.userId,type:hr.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:s}))),d=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:yr,theme:e,containerMarginTop:0})),[]);const c=o?[...l,...Sr]:l;return r.createElement(r.Fragment,null,n()(Ve.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:yr,rows:c,onRowClick:function(e){e.type===hr.ManagedUser&&a(e.managedUser)},renderNoRowsComponent:()=>n()(Mr,{loading:o}),styles:d,onScrollBottom:i}))}function Mr(e){window.__c={n:"EmptyState"};const t=(0,Fe.yK)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return n()(Ee.Z,{isSmall:!0,style:t.text},void 0,!e.loading&&n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.empty",defaultMessage:"No users found."}))}var wr=i(33679),Cr=i(93667);function _r(e){let{selectedMfaMethod:t,setSelectedMfaMethod:i}=e;return n()(Cr.u,{pillTitle:n()(v.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.title",defaultMessage:"2-step verification method"}),pillIcon:wr.j,selectedItem:t,setSelectedItem:i,items:kr})}const kr=[{key:"totp",value:"totp",title:n()(v.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.totp",defaultMessage:"Authenticator"}),caption:n()(v.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.totp.caption",defaultMessage:"Users who have enabled 2-step verification through an authenticator app"}),wrapCaption:!0},{key:"sms",value:"sms",title:n()(v.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.sms",defaultMessage:"Phone number"}),caption:n()(v.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.sms.caption",defaultMessage:"Users who have enabled 2-step verification through their phone number"}),wrapCaption:!0},{key:"backup_code",value:"backup_code",title:n()(v.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.backupCode",defaultMessage:"Backup code"}),caption:n()(v.FormattedMessage,{id:"managedUsersTab.table.filters.mfaMethod.backup_code.caption",defaultMessage:"Users who have enabled 2-step verification with active backup codes."}),wrapCaption:!0}];var Tr=i(24211),Ir=i(16402),Pr=i(23063),xr=i(65252),Zr=i(13490),Fr=i(24006);function Ar(e){let{title:t,byline:i,settingItem:a}=e;window.__c={n:"GenericSetting"};const o=(0,Fe.yK)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},settingLeft:{width:"60%"},settingTitle:{fontWeight:f.Z.fontWeight.regular},settingByline:{marginBottom:4}})),[]);return n()("div",{style:o.settingContainer},void 0,n()("div",{style:o.settingLeft},void 0,n()(Re.Z,{smallMarginBottom:!0,style:o.settingTitle},void 0,t),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:o.settingByline},void 0,i)),a)}function Er(e){let{title:t,byline:i,isOn:a,onToggle:o,disabled:s,tooltipForDisabled:l}=e;function d(){s||o()}return n()(Nt.Z,{placement:Nt.Z.Placement.Top,alignment:Nt.Z.Alignment.End,disableTooltip:!l||!s,renderTooltip:()=>l,render:e=>r.createElement("div",e,n()(Ar,{title:t,byline:i,settingItem:n()(Fr.Z,{on:a,disabled:s,onClick:d})}))})}var Br=i(53471);const Rr=(0,v.defineMessages)({uploadFailed:{defaultMessage:"Upload failed.",id:"identityAndProvisioning.managedUsers.modal.failedUpload"}});var Dr=i(50501);const Lr=(0,v.defineMessages)({getSupportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.getSupportAccessFailed"},setSupportAccessFailed:{defaultMessage:"Failed to update user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.setSupportAccessFailed"},toastDisabled:{id:"managedUsers.toastMessage.supportAccessDisabled",defaultMessage:"Successfully disabled user's support access status"},toastEnabled:{id:"managedUsers.toastMessage.supportAccessEnabled",defaultMessage:"Successfully disabled user's support access status"}});function Nr(e){const{spaceId:t,userId:i}=e,a=(0,v.useIntl)(),n=(0,xe.O7)(),[o,s]=(0,r.useState)({loading:!1,error:void 0}),[l,d]=(0,r.useState)(void 0),c=(0,Ze.VK)((()=>T.default.checkGate("enable_prevent_granting_support_access")),[]);(0,r.useEffect)((()=>{c&&async function(){const e=await async function(){s({loading:!0,error:void 0});const e=await I.getDataAccessConsentForManagedUser(n,{spaceId:t,userId:i});return"failed"===e.type?(s({loading:!1,error:e.error}),void M.showErrorMessage(a.formatMessage(Lr.getSupportAccessFailed))):(s({loading:!1,error:void 0}),e.data.expiryTime)}();d(e)}()}),[n,a,t,i,c]);const u=(0,r.useMemo)((()=>Boolean(l&&Number(l)>Date.now())),[l]),m=(0,r.useCallback)((async()=>{s({loading:!0,error:void 0});const e=u?void 0:Date.now()+Dr.g,o=await I.setDataAccessConsentForManagedUser(n,{spaceId:t,userId:i,expiryTime:e});if(b.EfR(n,{new_value:Boolean(e)}),"failed"===o.type)return s({loading:!1,error:o.error}),void M.showErrorMessage(a.formatMessage(Lr.setSupportAccessFailed));d(e),e?Qs.oV({label:a.formatMessage(Lr.toastEnabled)}):Qs.oV({label:a.formatMessage(Lr.toastDisabled)}),s({loading:!1,error:void 0})}),[n,a,t,i,u]);return{isAccessGranted:u,toggleDataAccessConsent:m,loading:o.loading,error:o.error}}function Or(e){window.__c={n:"WorkspacesOverview"};const{userId:t,workspaces:i,spaceStore:a,removeWorkspaceFromUser:o}=e,s=(0,Fe.yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return n()("div",{style:s.container},void 0,i.map(((e,s)=>n()(r.Fragment,{},e.id,n()(Vr,{userId:t,spaceStore:a,workspace:e,removeWorkspaceFromUser:o}),s<i.length-1?n()(vs.Z,{size:8}):null))))}function Vr(e){window.__c={n:"WorkspaceOverview"};const{userId:t,spaceStore:i,workspace:a,removeWorkspaceFromUser:o}=e,s=(0,v.useIntl)(),r=(0,xe.O7)(),l=(0,Fe.yK)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:12,overflow:"hidden"},workspaceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:12,overflow:"hidden"},iconContainer:{alignSelf:"center"},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]),d=(0,Ze.VK)((()=>T.default.checkGate("enable_remove_managed_user_from_space")),[]);const c=a.icon?{pointer:{table:Wn.bx,id:a.id,spaceId:a.id},icon:a.icon}:void 0;return n()("div",{style:l.container},void 0,n()("div",{style:l.workspaceContainer},void 0,n()("div",{style:l.iconContainer},void 0,n()(Ht.Z,{disabled:!0,icon:c,isEmptyPage:!1,size:28,title:a.name,isLarge:!0,emojiSize:24,isRaw:!1})),n()("div",{style:l.textContainer},void 0,n()(Ee.Z,{style:l.name,isMultiline:!0},void 0,n()(sr,{workspace:a})),n()(Ee.Z,{style:l.byline},void 0,Array.isArray(a.membersCount)?1===a.membersCount.length?n()(v.FormattedMessage,{defaultMessage:"{plan} · {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",values:{plan:(0,$.t1)(a.plan,s),lowerEnd:a.membersCount[0]}}):n()(v.FormattedMessage,{defaultMessage:"{plan} · {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",values:{plan:(0,$.t1)(a.plan,s),lowerEnd:a.membersCount[0],higherEnd:a.membersCount[1]}}):n()(v.FormattedMessage,{defaultMessage:"{plan} · {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",values:{plan:(0,$.t1)(a.plan,s),numMembers:a.membersCount}}))),n()("div",{},void 0,d?n()(Ge.Z,{isRed:!0,onClick:async function(){b.wVl(r,{external_space_id:a.id});const e="number"==typeof a.membersCount?a.membersCount:a.membersCount[0],{accept:s}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",defaultMessage:"Remove user from workspace?"})),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,e>1?{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",defaultMessage:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."}:{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.descriptionWithDeletion",defaultMessage:"This user will no longer have access to the workspace you are removing them from. <b>The workspace will be deleted</b> since this user is the only member. This action is not reversible.",values:{b:e=>n()("b",{},void 0,e)}})),acceptLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",defaultMessage:"Remove"}),cancelLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!s)return;const l=await I.removeManagedUserFromSpace(r,{userId:t,targetSpaceId:a.id,requestingSpaceId:i.id});b.dwr(r,{external_space_id:a.id}),"success"===l.type?(o(t,a.id),Qs.oV({label:n()(v.FormattedMessage,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:a.name}})})):Qs.oV({label:n()(v.FormattedMessage,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:a.name}})})}},void 0,n()(v.FormattedMessage,{defaultMessage:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})):null)))}const Ur=(0,v.defineMessages)({namePlaceholder:{defaultMessage:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{defaultMessage:"Email",id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"},supportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.supportAccessFailed"}});function Wr(e){let{spaceStore:t,managedUser:i,onClose:a,removeWorkspaceFromUser:o}=e;const s=Boolean(i);return n()(Zs.Z,{open:s,onDismiss:a,preventHideChildrenWhileOpening:!0,render:()=>i?n()(zr,{spaceStore:t,managedUser:i,removeWorkspaceFromUser:o}):null})}function zr(e){let{spaceStore:t,managedUser:i,removeWorkspaceFromUser:a}=e;window.__c={n:"ManagedUserDetailsScene"};const o=(0,v.useIntl)(),s=(0,xe.O7)(),l=(0,Ze.VK)((()=>new ft.U6(s,{id:i.userId,table:ti.KJ})),[i,s]),d=(0,Ze.VK)((()=>t.id),[t]),c=(0,Ze.VK)((()=>T.default.checkGate("enable_prevent_granting_support_access")),[]),{hasStagedChanges:u,resetState:m,saveChanges:p,loading:g,profilePhoto:h,name:f,email:y}=function(e){const{userStore:t}=e,i=(0,v.useIntl)(),a=(0,xe.O7)(),{userProfilePhoto:o,userName:s,userEmail:l,isSuspended:d}=(0,Ze.VK)((()=>({userProfilePhoto:t.getProfilePhoto(),userName:t.getFullName(i),userEmail:t.getEmail(),isSuspended:t.getIsSuspended()})),[t,i]),[c,u]=(0,r.useState)({loading:!1,error:void 0}),[m,p]=(0,r.useState)({value:o,loading:!1}),[g,h]=(0,r.useState)(s),[f,y]=(0,r.useState)(l);return{hasStagedChanges:m.value!==o||g!==s||f!==l,saveChanges:async function(){var e;const i=null===(e=B.default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(!i)return;const r=[];m.value!==o&&r.push("profile_photo"),g!==s&&r.push("name"),f!==l&&r.push("email"),b.amv(a,{user_status:d?"suspended":"notSuspended",edited_fields:r});const{accept:c}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.message",defaultMessage:"Confirm changes"})),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.description",defaultMessage:"Changes made to this user's account will be reflected across all workspaces they have access to."}),n()("br",{}),n()("br",{}),n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.descriptionForScim",defaultMessage:"If this user is being provisioned through SCIM, your changes be later overwritten by the next SCIM sync."})),acceptLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.acceptLabel",defaultMessage:"Save changes"}),cancelLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.saveProfileChanges.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!c)return;u({loading:!0,error:void 0});const p=await I.updateUserProfile(a,{userId:t.id,spaceId:i,name:g,email:f,profilePhoto:m.value});if(b.$B1(a,{user_status:d?"suspended":"notSuspended",edited_fields:r}),"failed"===p.type)return M.showErrorMessage(p.error.message),void u({loading:!1,error:p.error});Qs.oV({label:n()(v.FormattedMessage,{id:"managedUsers.toastMessage.updateProfileData.success",defaultMessage:"Successfully updated user's profile"})}),setTimeout((()=>{u({loading:!1,error:void 0})}),500)},resetState:function(){p({value:o,loading:!1}),h(s),y(l)},loading:c.loading,error:c.error,profilePhoto:{value:m.value,loading:m.loading,set:function(){Br.cR({environment:a,onStart:()=>{p((e=>({...e,loading:!0})))},bucket:"public",onError:()=>{p((e=>({...e,loading:!1}))),M.showErrorMessage(i.formatMessage(Rr.uploadFailed))},onComplete:e=>{const t=e[0];p({value:t,loading:!1})},accept:"image/*"})},remove:function(){p({value:"",loading:!1})}},name:{value:g,set:h},email:{value:f,set:y}}}({userStore:l}),{isAccessGranted:S,toggleDataAccessConsent:w,loading:C}=Nr({userId:i.userId,spaceId:d}),_=(0,Ze.VK)((()=>l.getIsSuspended()?{type:"suspended"}:(0,xr.os)({profilePhoto:h.value,name:f.value,email:y.value})),[l,h.value,f.value,y.value]),P=function(e){const{loadingSupportAccess:t}=e;return(0,Fe.yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",background:e.popoverBackground,width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto",padding:"36px 24px",gap:16},label:{color:e.mediumTextColor},horizontalLabel:{color:e.mediumTextColor,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:4},value:{color:e.regularTextColor},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},icon:{color:e.lightIconColor,fill:"currentColor",width:14,height:14},supportAccessRow:{position:"relative",width:"100%",opacity:t?.5:1},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},infoRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},footer:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingInline:4,boxShadow:e.borderBoxShadow,background:e.popoverBackground,left:0,right:0,bottom:0,height:48},button:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:C}),x=(0,Tr.E2)(o),Z=(0,Ze.VK)((()=>!Ae.Z.state.online),[]),F=i.mfaMethods.filter((e=>"backup_code"!==e)),A=o.formatList(F.map((e=>(0,k.cR)(e))),{type:"conjunction"});return n()("div",{style:P.container},void 0,n()("div",{style:P.innerContainer},void 0,n()("div",{style:P.avatarContainer},void 0,n()(xr.ZP,{size:56,avatarType:_,isOffline:Z,loading:h.loading,onUploadProfilePhoto:h.set,onRemoveProfilePhoto:h.remove})),n()("div",{style:P.inputContainer},void 0,n()("div",{style:P.inputRow},void 0,n()(Zr.Z,{},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",defaultMessage:"Name"})),n()(Qi.Z,{style:P.input,disabled:g,value:f.value,placeholder:o.formatMessage(Ur.namePlaceholder),onChange:e=>{f.set(e.target.value)}})),n()("div",{style:P.inputRow},void 0,n()(Zr.Z,{},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",defaultMessage:"Email"})),n()(Qi.Z,{style:P.input,disabled:g,value:y.value,placeholder:o.formatMessage(Ur.emailPlaceholder),onChange:e=>{y.set(e.target.value)}}))),n()("div",{style:P.infoContainer},void 0,n()("div",{style:P.infoRow},void 0,n()(Ee.Z,{style:P.label,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",defaultMessage:"Account created"})),i.accountCreatedAt?n()(Ee.Z,{isSmall:!0,style:P.value},void 0,(0,an.Yx)(i.accountCreatedAt,"medium",x)):n()(Ee.Z,{isSecondaryColor:!0,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"}))),n()(vs.Z,{size:16}),n()("div",{style:P.infoRow},void 0,n()(Ee.Z,{style:P.label,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",defaultMessage:"Last active"})),i.lastActiveAt?n()(Ee.Z,{isSmall:!0,style:P.value},void 0,(0,Ir.gs)(i.lastActiveAt)):n()(Ee.Z,{isSecondaryColor:!0,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"}))),n()(vs.Z,{size:16}),n()("div",{style:P.infoRow},void 0,n()(Ee.Z,{style:P.label,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",defaultMessage:"2-step verification method"})),F.length>0?n()(Ee.Z,{isSmall:!0,style:P.value},void 0,A):n()(Ee.Z,{isSecondaryColor:!0,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",defaultMessage:"Not configured"}))),c?r.createElement(r.Fragment,null,n()(vs.Z,{size:16}),n()("div",{style:P.supportAccessRow},void 0,n()(Er,{title:n()(Ee.Z,{style:P.horizontalLabel,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",defaultMessage:"Support access"}),n()(Nt.Z,{placement:Nt.Z.Placement.Bottom,render:e=>r.createElement("div",e,(0,zs.m)(P.icon)),renderTooltip:()=>n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",defaultMessage:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})),byline:null,isOn:S,onToggle:w,disabled:C}))):null),n()("div",{},void 0,i.workspaces.length>0?r.createElement(r.Fragment,null,n()(Zr.Z,{},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",defaultMessage:"Workspaces"})),n()(Or,{userId:i.userId,workspaces:i.workspaces,spaceStore:t,removeWorkspaceFromUser:a})):null)),n()(Pr.Z,{isVisible:u||g,enterAnimationStyle:{translateY:48,opacity:0},animationStyle:{opacity:1,translateY:0},exitAnimationStyle:{translateY:48,opacity:0},render:()=>n()("div",{style:P.footer},void 0,n()(Le.Z,{isRed:!0,disabled:g,style:P.button,onClick:m},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",defaultMessage:"Cancel"})),n()(He.Z,{disabled:g,style:P.button,onClick:p},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.details.saveButton",defaultMessage:"Save changes"})))}))}var Kr=i(73039);function Hr(e){let{selectedSpaceId:t,setSelectedSpaceId:i,spaceData:a}=e;window.__c={n:"WorkspacesFilter"};const o=(0,v.useIntl)(),s=(0,Fe.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:8},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"},container:{padding:"6px 0 6px"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:6,fill:"currentColor"}})),[]),r=(0,Ze.VK)((()=>a.map((e=>{const t=e.name,i=e.icon?{pointer:{table:Wn.bx,id:e.id,spaceId:e.id},icon:e.icon}:void 0;return{key:e.id,value:e.id,title:n()("div",{style:s.optionContainer},void 0,n()(Ht.Z,{disabled:!0,icon:i,isEmptyPage:!1,size:24,title:t,isLarge:!0,emojiSize:24,isRaw:!1}),n()("div",{style:{paddingTop:4,paddingBottom:4}},void 0,n()(Ee.Z,{style:s.optionTitle},void 0,t),n()(Ee.Z,{style:s.optionCaption},void 0,(0,$.t1)(e.subscriptionTier,o))))}}))),[a,o,s]);return n()(Cr.u,{pillTitle:n()(v.FormattedMessage,{id:"managedUsersTab.table.filters.workspaces.title",defaultMessage:"Workspace"}),pillIcon:Kr.K,selectedItem:t,setSelectedItem:i,items:r})}const Gr=(0,v.defineMessages)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function qr(e){let{spaceStore:t,samlConfigStore:i}=e;window.__c={n:"ManagedUsersPage"};const{navigateTo:a}=(0,r.useContext)(Us),o=(0,xe.O7)(),s=(0,v.useIntl)(),l=(0,Fe.yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:f.Z.fontWeight.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:f.Z.fontWeight.regular,color:e.mediumTextColor,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},filters:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),d=(0,Ze.VK)((()=>T.default.checkGate("enable_suspend_managed_users")),[]),c=(0,Ze.VK)((()=>i.state.spaces),[i]),{managedUsers:u,filters:m,loadNextPage:p,setFilters:g,removeWorkspaceFromUser:h,loading:y,selectedTab:S,setSelectedTab:w,onOpenDetailsModal:_,onCloseDetailsModal:k,selectedUser:P,managedUserActionSections:x}=function(e){let{spaceStore:t,samlConfigStore:i}=e;const a=(0,xe.O7)(),o=(0,v.useIntl)(),s=(0,Ze.VK)((()=>T.default.checkGate("enable_suspend_managed_users")),[]),l=(0,Ze.VK)((()=>T.default.checkGate("enable_logout_managed_users")),[]),d=(0,Ze.VK)((()=>T.default.checkGate("enable_password_reset_managed_users")),[]),c=(0,Ze.VK)((()=>T.default.checkGate("enable_delete_managed_users")),[]),[u,m]=(0,r.useState)(),[p,g]=(0,r.useState)(er.NotSuspended),h=(0,Ze.VK)((()=>a.currentUser.id),[a]),f=(0,r.useCallback)(((e,t)=>{b.JX1(a,{user_status:tr(p),from:t}),m(e.userId)}),[a,p]),y=Xs({userStatus:"notSuspended",spaceStore:t,samlConfigStore:i}),S=Xs({userStatus:"suspended",spaceStore:t,samlConfigStore:i});let w;w=p===er.NotSuspended?y:S;const C=(0,r.useCallback)((async e=>{b.rZG(a);const{accept:i}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{defaultMessage:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})),acceptLabel:n()(v.FormattedMessage,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{defaultMessage:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"}))});if(!i)return;const o=await I.updateUserSuspension(a,{userId:e.userId,spaceId:t.id,suspend:!0});b.rvR(a),"failed"===o.type&&M.showErrorMessage(o.error.message),S.addUserToManagedUsers(e),y.removeUserFromManagedUsers(e.userId)}),[a,t.id,S,y]),_=(0,r.useCallback)((async e=>{b.NFM(a);const{accept:i}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{defaultMessage:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})),acceptLabel:n()(v.FormattedMessage,{defaultMessage:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."}))});if(!i)return;const o=await I.logoutManagedUsers(a,{spaceId:t.id,target:{type:$s.User,userId:e.userId}});if(b._mq(a),"failed"===o.type)return M.showErrorMessage(o.error.message),void Qs.oV({label:n()(v.FormattedMessage,{id:"managedUsers.toastMessage.logout.failed",defaultMessage:"Failed to logged out user"})});Qs.oV({label:n()(v.FormattedMessage,{id:"managedUsers.toastMessage.logout.success",defaultMessage:"Successfully logged out user"})})}),[a,t.id]),k=(0,r.useCallback)((async e=>{b.Zm$(a);const{accept:i}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{defaultMessage:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})),acceptLabel:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",defaultMessage:"Reset passwords for user"}),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",defaultMessage:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:n()("br",{})}}))});if(!i)return;const s=await I.resetPasswordsForManagedUsers(a,{spaceId:t.id,target:{type:$s.User,userId:e.userId}});if(b.vCG(a),"failed"===s.type)return M.showErrorMessage((0,Ba.wf)(o,s)),void Qs.oV({label:n()(v.FormattedMessage,{id:"managedUsers.toastMessage.forcePasswordReset.fail",defaultMessage:"Failed to reset password for user"})});Qs.oV({label:n()(v.FormattedMessage,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})})}),[a,o,t.id]),P=(0,r.useCallback)((async e=>{const i=await I.updateUserSuspension(a,{userId:e.userId,spaceId:t.id,suspend:!1});b.Cis(a),"failed"===i.type&&M.showErrorMessage(i.error.message),S.removeUserFromManagedUsers(e.userId),y.addUserToManagedUsers(e)}),[a,t.id,S,y]),x=(0,r.useCallback)((async e=>{b.P1A(a,{user_status:tr(p)});const{accept:i}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{defaultMessage:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})),acceptLabel:n()(v.FormattedMessage,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{defaultMessage:"This will delete the user's data. They can still be restored within 30 days by contacting Notion support.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"}))});if(!i)return;const o=await I.deleteManagedUser(a,{userId:e.userId,spaceId:t.id});b.j72(a,{user_status:tr(p)}),"failed"===o.type&&M.showErrorMessage(o.error.message),S.removeUserFromManagedUsers(e.userId),y.removeUserFromManagedUsers(e.userId)}),[a,p,t.id,S,y]),Z=(0,r.useMemo)((()=>w.managedUsers.find((e=>{let{userId:t}=e;return t===u}))),[u,w.managedUsers]),F=(0,r.useMemo)((()=>{let e;const t={onClick:e=>f(e,"dropdown_menu"),icon:Gs.R,title:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",defaultMessage:"Edit details"})},i={onClick:e=>x(e),icon:Ys.y,title:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",defaultMessage:"Delete user"}),isDestructive:!0};switch(p){case er.NotSuspended:e=[[t,...l?[{onClick:_,icon:Hs.S,title:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",defaultMessage:"Log out"})}]:[],...d?[{onClick:k,icon:qs.z,title:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",defaultMessage:"Reset password"})}]:[]],[...s?[{onClick:C,icon:Ks.V,title:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",defaultMessage:"Suspend user"}),getDisabledState:e=>e.userId===h}]:[],...c?[i]:[]]];break;case er.Suspended:e=s?[[t],[{onClick:e=>P(e),icon:js.u,title:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",defaultMessage:"Reactivate user"})},...c?[i]:[]]]:[];break;default:(0,A.t1)(p)}return e.filter((e=>e.length>0))}),[f,h,d,l,s,c,p,x,C,P,_,k]);return{...w,selectedTab:p,setSelectedTab:g,selectedUser:Z,managedUserActionSections:F,onOpenDetailsModal:f,onCloseDetailsModal:function(){m(void 0)}}}({spaceStore:t,samlConfigStore:i}),Z=(0,r.useCallback)((e=>_(e,"row_click")),[_]);return n()(Be.Z,{},void 0,n()(ys.Z,{style:l.link,onClick:()=>a(Ls)},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.breadcrumb",defaultMessage:"← Identity & Provisioning"})),n()(Re.Z,{large:!0,style:l.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.title",defaultMessage:"User management"}),n()(Rt.Z,{icon:zs.m,ariaLabel:s.formatMessage({defaultMessage:"Managed users settings help button",id:"identityProvisioningSettings.managedUsers.helpButton.label"}),onClick:()=>C.navigateToExternalURL({environment:o,url:(0,Y.UY)("guides.managedUsers")})})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:l.byline},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.byline",defaultMessage:"Manage and view users that are using your verified domains"})),d?n()(bs.Z,{tabs:[n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.table.notSuspendedTab.title",defaultMessage:"Active"},"notSuspended.title"),n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.table.suspendedTab.title",defaultMessage:"Suspended"},"suspended")],selectedIndex:S,onChange:e=>w(e),style:l.tabBarMenu}):null,n()(ga,{mode:ma.Button,query:m.query,setQueryFilter:e=>{g({query:e})},placeholderText:q.default.formatMessage(Gr.placeholder)}),n()("div",{style:l.filters},void 0,n()(Hr,{selectedSpaceId:m.workspaceId,setSelectedSpaceId:e=>{g({workspaceId:e})},spaceData:c}),n()(_r,{selectedMfaMethod:m.multiFactorStatus,setSelectedMfaMethod:e=>{g({multiFactorStatus:e})}})),n()(br,{managedUsers:u,loading:y,loadMoreManagedUsers:p,onEditDetails:Z,managedUserActionSections:x},S),n()(Wr,{spaceStore:t,managedUser:P,onClose:k,removeWorkspaceFromUser:h}))}function jr(e){let{environment:t,samlConfigStore:i}=e;const a=i.state.emailDomains.length>0,n=(0,Yo.zt)();return a||("business"===n||"enterprise"===n)}var Yr=i(81236);async function $r(e){let{onRequest:t,onSuccess:i}=e;const a=await t();switch(a.type){case"success":i&&await i(a);break;case"failed":M.showErrorMessage(a.error.message);break;default:(0,A.t1)(a)}}function Qr(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a}=e;const n=(0,xe.O7)(),o=(0,Ze.VK)((()=>i.state.emailDomains),[i]),s=(0,Ze.VK)((()=>"disabled"!==i.state.status&&"unconfigured"!==i.state.status),[i]),l=(0,Ze.VK)((()=>jr({environment:n,samlConfigStore:i})),[i,n]),d=(0,Ze.VK)((()=>l&&(!i.state.id||i.state.id===t.id)),[l,i,t]),c=(0,Ze.VK)((()=>a.state.emailDomains.length>0&&(0,Yo.wP)()),[a]),u=(0,Ze.VK)((()=>o.length>0),[o]),m=(0,r.useCallback)((async()=>{if(i.state.emailDomains.length>0)return $r({onRequest:()=>I.updateWorkspaceCreationForEmailDomains(n,{emailDomains:i.state.emailDomains,workspaceCreationEnum:a.state.spaceCreation,spaceId:t.id}),onSuccess:()=>{a.setState({...a.state,emailDomains:i.state.emailDomains})}})}),[n,t,a,i]),p=(0,r.useCallback)((async()=>{if(i.state.emailDomains.length>0)return $r({onRequest:()=>I.updateEmailDomainSettings(n,{emailDomains:i.state.emailDomains,spaceId:t.id,preventProfileEdits:a.state.settings.prevent_profile_edits,preventMembersJoiningExternalWorkspace:a.state.settings.prevent_members_joining_external_workspace,customSessionDuration:or(a.state.settings.custom_session_duration),preventGrantingSupportAccess:a.state.settings.prevent_granting_support_access}),onSuccess:()=>{a.setState({...a.state,emailDomains:i.state.emailDomains})}})}),[n,t,a,i]),g=(0,Ze.VK)((()=>l&&(0,Yo.wP)()),[l]);return{verifiedDomains:o,isSamlStatusEnabled:s,isSamlAvailable:l,isSamlEditable:d,isDomainSettingsAvailable:c,isClaimSpacesAvailable:g,canSaveWorkspaceCreationSetting:u,saveWorkspaceCreationSetting:m,saveEmailDomainSettings:p}}var Jr=i(1865),Xr=i(91718);function el(e){let{title:t,byline:i,targetTier:a}=e;window.__c={n:"Upsell"};const o=(0,xe.O7)(),s=(0,r.useCallback)((()=>Jr.y(o,{from:"space_saml",for:a})),[o,a]);return r.createElement(r.Fragment,null,n()(Re.Z,{smallMarginBottom:!0,style:{fontWeight:f.Z.fontWeight.regular,display:"flex",alignItems:"center"}},void 0,n()("span",{style:{marginRight:8}},void 0,t),n()(Xr.Z,{subscriptionTier:a,analyticsName:"space_saml",onClick:s})),n()(Ee.Z,{isSmall:!0,isMultiline:!0},void 0,i))}const tl={browseWorkspaces:n()(v.FormattedMessage,{defaultMessage:"Browse workspaces",id:"identityAndProvisioning.claimWorkspaces.button"}),noWorkspaces:n()(v.FormattedMessage,{defaultMessage:"No workspaces",id:"identityAndProvisioning.claimWorkspaces.buttonEmpty"}),loadingError:n()(v.FormattedMessage,{defaultMessage:"Error loading workspaces.",id:"identityAndProvisioning.claimWorkspaces.errorByline"})};function il(e){let{promptUpgrade:t}=e;window.__c={n:"ClaimSpaces"};const{navigateTo:i,loadingSpaces:a,hasBrowsableSpaces:o,errorClaimableSpaces:l}=(0,r.useContext)(Us),d=Boolean(l),c=!o||a,u=!o&&!a,m=n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.title",defaultMessage:"Claim workspaces"}),p=n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.message",defaultMessage:"Claim workspaces created by users with a verified domain or require owners to use an external domain."}),g=(0,Fe.yK)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:c?.5:1,minWidth:160},settingErrorByline:{color:e.errorText,marginTop:8,fontSize:13}})),[c]);if(t)return n()(el,{title:m,byline:p,targetTier:"enterprise"});let h;return h=a?n()(Ue.Z,{}):o?tl.browseWorkspaces:tl.noWorkspaces,n()("div",{style:g.settingContainer},void 0,n()(Ar,{title:m,byline:p,settingItem:n()("div",{style:g.buttonAndErrorContainer},void 0,n()(Nt.Z,{placement:Nt.Z.Placement.Top,alignment:Nt.Z.Alignment.End,render:e=>r.createElement(Le.Z,s()({disabled:c,isLarge:!0,style:g.button,onClick:()=>i(Ns)},e),h),disableTooltip:!u,renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.tooltip",defaultMessage:"There are no available workspaces to claim"})}),d?n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:g.settingErrorByline},void 0,tl.loadingError):null)}))}var al=i(52507),nl=i(86249);function ol(e){let{spaceStore:t,samlConfigStore:i,promptUpgrade:a,disabled:o,saveWorkspaceCreationSetting:s}=e;window.__c={n:"EmailDomains"};const l=(0,xe.O7)(),d=(0,Ze.qz)(void 0,al.ZP),c=(0,Fe.yK)((()=>({flex:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:"18px 0px"},button:{position:"relative",marginLeft:"auto",marginRight:0,opacity:o?.5:1},plusIcon:{width:14,height:14,fill:"inherit",marginRight:"6px"}})),[o]),u=n()(v.FormattedMessage,{id:"identityAndProvisioning.emailDomainsSection.title",defaultMessage:"Verified domains"}),m=n()(v.FormattedMessage,{id:"identityAndProvisioning.emailDomainsSection.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single-sign on."}),p=[...(0,Ze.VK)((()=>i.state.emailDomains.map(nl.f4)),[i]),...(0,Ze.VK)((()=>i.state.domainVerifications.filter((e=>!i.state.emailDomains.includes(e.domain))).sort(((e,t)=>e.createdAt-t.createdAt)).map(nl.UV)),[i])],g=(0,r.useCallback)((async()=>{await Ds({environment:l,spaceId:t.id,store:i})}),[l,t,i]),{resetInitialClaimableSpaces:h}=(0,r.useContext)(Us),y=(0,r.useCallback)((async e=>{switch(e.type){case"verified":return $r({onRequest:()=>I.setSamlConfig(l,{spaceId:t.id,removedEmailDomains:[e.domain]}),onSuccess:async()=>{await g(),h()}});case"unverified":case"invalid":return $r({onRequest:()=>I.deleteDomainVerificationCode(l,{id:e.id}),onSuccess:()=>g()})}}),[l,t,g,h]),S=(0,r.useCallback)((()=>$r({onRequest:()=>I.setSamlConfig(l,{spaceId:t.id}),onSuccess:()=>g()})),[l,g,t]),b=(0,r.useCallback)((async()=>{await g(),await s()}),[s,g]);return a?n()(el,{title:u,byline:m,targetTier:"business"}):n()(nl.ZP,{disabled:o,domains:p,onRemoveDomain:y,domainVerificationStore:d,verificationType:"saml_config",verificationTargetId:t.id,refreshDomains:b,onClickAddDomain:S,renderOverrideAddDomainButton:e=>n()("div",{style:c.flex},void 0,n()("div",{},void 0,n()(Re.Z,{smallMarginBottom:!0,style:{fontWeight:f.Z.fontWeight.medium}},void 0,u),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginBottom:4}},void 0,m)),n()("div",{},void 0,n()(Ge.Z,{isBlue:!0,style:c.button,icon:e=>(0,ts.R)({...e,...c.plusIcon}),disabled:o,onClick:e},void 0,n()(v.FormattedMessage,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"}))))})}function sl(e){let{domainSettingsStore:t,samlConfigStore:i,disabled:a,promptUpgrade:o,verifiedDomains:l,tooltip:d,saveWorkspaceCreationSetting:c}=e;window.__c={n:"WorkspaceCreation"};const u=(0,xe.O7)(),m=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),p=(0,Ze.VK)((()=>{const e=i.state.id;if(!e)return;return new ft.H2(u,{table:Wn.bx,id:e}).getName()}),[u,i]),g=(0,r.useCallback)((async e=>{t.setState({...t.state,spaceCreation:e}),await c(),b.tir(u,{workspace_creation:e})}),[t,c,u]),h=(0,Ze.VK)((()=>l.length>0?t.state.spaceCreation:"admins_only"),[t,l]),f=n()(v.FormattedMessage,{id:"domainSettings.workspaceCreation.title",defaultMessage:"Workspace creation"}),y=n()(v.FormattedMessage,{id:"domainSettings.workspaceCreation.byline",defaultMessage:"Customize who can create new workspaces."}),S=n()(v.FormattedMessage,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.titleWithSpaceName",defaultMessage:"{primaryWorkspaceName} workspace owners",values:{primaryWorkspaceName:p}}),M=n()(v.FormattedMessage,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.title",defaultMessage:"Only workspace owners"});return o?n()("div",{style:m.settingContainer},void 0,n()(el,{title:f,byline:y,targetTier:"enterprise"})):n()(Nt.Z,{placement:Nt.Z.Placement.Top,alignment:Nt.Z.Alignment.End,render:e=>r.createElement("div",s()({},e,{style:m.settingContainer}),n()(Ss.Z,{isMobile:u.device.isMobile,disabled:a,title:f,caption:y,type:"dropdown",currentOption:h,options:[{key:"unrestricted",label:n()(v.FormattedMessage,{id:"domainSettings.workspaceCreation.unrestricted.title",defaultMessage:"Anyone"}),caption:n()(v.FormattedMessage,{id:"domainSettings.workspaceCreation.unrestricted.caption",defaultMessage:"Any user can create new workspaces."})},{key:"admins_only",label:p?S:M,caption:n()(v.FormattedMessage,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.captionWithSpaceName",defaultMessage:"Only workspace owners of this workspace can create new workspaces."})}],onSelectOption:g})),disableTooltip:!d,renderTooltip:()=>d})}function rl(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a,isCurrentSpaceEnterprise:o}=e;window.__c={n:"DomainSection"};const{verifiedDomains:s,isSamlAvailable:l,saveWorkspaceCreationSetting:d,isSamlEditable:c,isDomainSettingsAvailable:u,canSaveWorkspaceCreationSetting:m,isClaimSpacesAvailable:p}=Qr({spaceStore:t,samlConfigStore:i,domainSettingsStore:a}),g=u&&c;return r.createElement(r.Fragment,null,n()(ol,{disabled:!c,promptUpgrade:!l,spaceStore:t,samlConfigStore:i,saveWorkspaceCreationSetting:d}),n()(sl,{disabled:!g||!m,promptUpgrade:!o,verifiedDomains:s,samlConfigStore:i,domainSettingsStore:a,tooltip:0===s.length?n()(v.FormattedMessage,{id:"domainSettings.workspaceCreation.disabledTooltip",defaultMessage:"There must be at least one verified domain to configure the workspace creation setting."}):void 0,saveWorkspaceCreationSetting:d}),n()(il,{promptUpgrade:!p}))}var ll=i(74523);function dl(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:a,disabled:o}=e;window.__c={n:"CustomSessionDurationSetting"};const s=(0,xe.O7)(),l=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),d=(0,r.useMemo)((()=>Object.entries(Un.nb).map((e=>{let[t,i]=e;return{key:t,label:n()(Ee.Z,{},void 0,(0,Ir.hH)(0,i))}}))),[]),c=(0,Ze.VK)((()=>or(t.state.settings.custom_session_duration)??Un.gl),[t]),u=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.customSessionDuration.title",defaultMessage:"Session duration"}),m=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.customSessionDuration.message",defaultMessage:"Control how long your managed users can be logged in for before they must re-authenticate."});return n()("div",{style:l.settingContainer},void 0,a?n()(el,{title:u,byline:m,targetTier:"enterprise"}):n()(Ss.Z,{isMobile:s.device.isMobile,disabled:o,title:u,caption:m,type:"dropdown",currentOption:c,options:d,onSelectOption:async function(e){const a=t.state.settings.custom_session_duration??Un.nb[Un.gl],o=Un.nb[e];if(void 0===o)return;b.LOF(s,{custom_session_duration_ms:a});const{accept:r}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,Ir.hH)(0,a),newDuration:(0,Ir.hH)(0,o),b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n()("b",{},void 0,t)}}}),n()("br",{}),n()("br",{}),n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})),acceptLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});r&&(t.setState({...t.state,settings:{...t.state.settings,custom_session_duration:o}}),b.l0P(s,{new_session_duration_ms:o}),await i())}}))}function cl(e){let{spaceId:t,domainSettingsStore:i,promptUpgrade:a,verifiedDomains:o,disabled:l}=e;window.__c={n:"ForcePasswordResetSetting"};const d=o.length>0,c=(0,xe.O7)(),u=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!l&&d?1:.5}})),[l,d]),m=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.title",defaultMessage:"Reset passwords for all users"}),p=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.message",defaultMessage:"Force reset the passwords for all managed users and require them to a new one the next time they log in."});async function g(){b.JoV(c,{email_domains:o});const{accept:e}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.message",defaultMessage:"Reset passwords for your managed users?"})),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.description",defaultMessage:"You are about to reset the passwords for of your managed users, including you. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}The affected users will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:n()("br",{})}})),acceptLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.acceptLabel",defaultMessage:"Reset passwords for all managed users"}),cancelLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const a=i.state.emailDomains;await I.resetPasswordsForManagedUsers(c,{spaceId:t,target:{type:$s.Domains,emailDomains:a}}),Qs.oV({label:n()(v.FormattedMessage,{id:"managedUsers.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed users"})}),b.aT6(c,{email_domains:a})}return n()("div",{style:u.settingContainer},void 0,a?n()(el,{title:m,byline:p,targetTier:"enterprise"}):n()(Ar,{title:m,byline:p,settingItem:n()("div",{style:u.buttonAndErrorContainer},void 0,n()(Nt.Z,{placement:Nt.Z.Placement.Top,alignment:Nt.Z.Alignment.End,render:e=>r.createElement(Ge.Z,s()({isRed:!0,disabled:l||!d,style:u.button,onClick:g},e),n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.logoutButton",defaultMessage:"Reset passwords for all users"})),disableTooltip:d,renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})}))}))}function ul(e){let{spaceId:t,domainSettingsStore:i,promptUpgrade:a,verifiedDomains:o,disabled:l}=e;window.__c={n:"LogoutUsersSetting"};const d=o.length>0,c=(0,xe.O7)(),u=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!l&&d?1:.5}})),[l,d]),m=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.title",defaultMessage:"Log out all users"}),p=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.message",defaultMessage:"Force log out all managed users and require them to re-authenticate."});async function g(){b.KFD(c,{email_domains:o});const{accept:e}=await M.confirmUserActionV2({message:n()(Ee.Z,{style:M.dialogStyles.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.message",defaultMessage:"Log out all of your managed users?"})),description:n()(Ee.Z,{isMultiline:!0,isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.description",defaultMessage:"You are about to log all of your managed users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})),acceptLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.acceptLabel",defaultMessage:"Log out all managed users"}),cancelLabel:n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const a=i.state.emailDomains;await I.logoutManagedUsers(c,{spaceId:t,target:{type:$s.Domains,emailDomains:a}}),Qs.oV({label:n()(v.FormattedMessage,{id:"managedUsers.toastMessage.logout.all.success",defaultMessage:"Successfully logged out all managed users"})}),b._6M(c,{email_domains:a})}return n()("div",{style:u.settingContainer},void 0,a?n()(el,{title:m,byline:p,targetTier:"enterprise"}):n()(Ar,{title:m,byline:p,settingItem:n()("div",{style:u.buttonAndErrorContainer},void 0,n()(Nt.Z,{placement:Nt.Z.Placement.Top,alignment:Nt.Z.Alignment.End,render:e=>r.createElement(Ge.Z,s()({isRed:!0,disabled:l||!d,style:u.button,onClick:g},e),n()(v.FormattedMessage,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"})),disableTooltip:d,renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})}))}))}function ml(e){let{promptUpgrade:t,hasVerifiedDomains:i,disabled:a}=e;window.__c={n:"ManageUsersButton"};const{navigateTo:o}=(0,r.useContext)(Us),l=(0,xe.O7)(),d=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.title",defaultMessage:"Managed users dashboard"}),c=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.message",defaultMessage:"Manage and view users that are using your verified domains"}),u=(0,Fe.yK)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!a&&i?1:.5}})),[i,a]);return n()("div",{style:u.settingContainer},void 0,t?n()(el,{title:d,byline:c,targetTier:"enterprise"}):n()(Ar,{title:d,byline:c,settingItem:n()("div",{style:u.buttonAndErrorContainer},void 0,n()(Nt.Z,{placement:Nt.Z.Placement.Top,alignment:Nt.Z.Alignment.End,render:e=>r.createElement(Le.Z,s()({disabled:a||!i,isLarge:!0,style:u.button,onClick:()=>{b.pCf(l),o(Os)}},e),n()(v.FormattedMessage,{defaultMessage:"View dashboard",id:"identityAndProvisioning.managedUsers.button"})),disableTooltip:i,renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})}))}))}function pl(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:a,verifiedDomains:o,disabled:s}=e;window.__c={n:"PreventGrantingSupportAccessSetting"};const r=(0,xe.O7)(),l=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),d=o.length>0,c=(0,Ze.VK)((()=>T.default.checkGate("enable_prevent_granting_support_access")),[]),u=(0,Ze.VK)((()=>Boolean(t.state.settings.prevent_granting_support_access)),[t]),m=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.title",defaultMessage:"Prevent managed users from granting support access"}),p=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.message",defaultMessage:"Control if managed users can enable support access on their accounts."});return n()("div",{style:l.settingContainer},void 0,a?n()(el,{title:m,byline:p,targetTier:"enterprise"}):c?n()(Er,{title:n()("div",{style:l.settingsTitle},void 0,m),byline:p,isOn:u,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_granting_support_access);t.setState({...t.state,settings:{...t.state.settings,prevent_granting_support_access:e}}),b.DnI(r,{new_value:e}),await i()},disabled:s||!d}):null)}function gl(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:a,disabled:o}=e;window.__c={n:"PreventMembersJoiningExternalSpaces"};const s=(0,xe.O7)(),r=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),l=(0,Ze.VK)((()=>Boolean(t.state.settings.prevent_members_joining_external_workspace)),[t]),d=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.title",defaultMessage:"External workspace access"}),c=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.message",defaultMessage:"Control if managed users are able to join workspaces that not owned by your organization."});if(a)return n()("div",{style:r.settingContainer},void 0,n()(el,{title:d,byline:c,targetTier:"enterprise"}));const u=l?"on":"off";return n()("div",{style:r.settingContainer},void 0,n()(Ss.Z,{isMobile:s.device.isMobile,disabled:o,title:d,caption:c,type:"dropdown",currentOption:u,options:[{key:"on",label:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.titleGeneric",defaultMessage:"Only workspace owners"}),caption:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.caption",defaultMessage:"Only workspace owners of your connected workspaces can join external workspaces."})},{key:"off",label:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.titleWithSpaceName",defaultMessage:"Anyone"}),caption:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.caption",defaultMessage:"All users can join any workspace."})}],onSelectOption:async function(){const e=Boolean(!t.state.settings.prevent_members_joining_external_workspace);t.setState({...t.state,settings:{...t.state.settings,prevent_members_joining_external_workspace:e}}),b.T4J(s,{new_value:e}),await i()}}))}function hl(e){let{domainSettingsStore:t,saveEmailDomainSettings:i,promptUpgrade:a,hasVerifiedDomains:o,disabled:s}=e;window.__c={n:"PreventProfileEditsSetting"};const r=(0,xe.O7)(),l=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),d=(0,Ze.VK)((()=>T.default.checkGate("enable_set_email_domain_settings")),[]),c=(0,Ze.VK)((()=>Boolean(t.state.settings.prevent_profile_edits)),[t]),u=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.title",defaultMessage:"Allow managed users to change profile information"}),m=n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.message",defaultMessage:"Control if managed users can change their preferred name, email address, and profile photo."});return n()("div",{style:l.settingContainer},void 0,a?n()(el,{title:u,byline:m,targetTier:"enterprise"}):d?n()(Er,{title:n()("div",{style:l.settingsTitle},void 0,u),byline:m,isOn:!c,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_profile_edits);t.setState({...t.state,settings:{...t.state.settings,prevent_profile_edits:e}}),b.DnI(r,{new_value:e}),await i()},disabled:s||!o}):null)}function fl(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a}=e;window.__c={n:"ManagedUsersSection"};const{verifiedDomains:o,isDomainSettingsAvailable:s,isSamlEditable:l,saveEmailDomainSettings:d}=Qr({spaceStore:t,samlConfigStore:i,domainSettingsStore:a}),c=(0,Fe.yK)((e=>({byline:{fontSize:14,fontWeight:f.Z.fontWeight.regular,color:e.mediumTextColor},helpButton:{marginTop:18,marginBottom:16}})),[]),u=s&&l,m=(0,Ze.VK)((()=>t.id),[t]),p=(0,Ze.VK)((()=>(0,Yo.wP)()),[]),g=(0,Ze.VK)((()=>T.default.checkGate("enable_managed_users_dashboard")),[]),h=(0,Ze.VK)((()=>T.default.checkGate("enable_set_email_domain_settings")),[]),y=(0,Ze.VK)((()=>T.default.checkGate("enable_custom_session_duration")),[]),S=(0,Ze.VK)((()=>T.default.checkGate("enable_logout_managed_users")),[]),b=(0,Ze.VK)((()=>T.default.checkGate("enable_password_reset_managed_users")),[]),M=(0,Ze.VK)((()=>T.default.checkGate("enable_prevent_granting_support_access")),[]);return r.createElement(r.Fragment,null,n()("div",{},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:c.byline},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.byline",defaultMessage:"These settings apply to all users with a verified domain, even if they are not a member of this workspace."}))),n()(ll.Z,{title:n()(v.FormattedMessage,{id:"identityAndProvisioning.managedUsers.helpButton",defaultMessage:"Learn about managed users"}),href:(0,Y.UY)("guides.managedUsers"),style:c.helpButton,analyticsFrom:"managed_users_section"}),g?n()(ml,{promptUpgrade:!p,hasVerifiedDomains:o.length>0,disabled:!u}):null,h?r.createElement(r.Fragment,null,n()(hl,{promptUpgrade:!p,hasVerifiedDomains:o.length>0,domainSettingsStore:a,saveEmailDomainSettings:d,disabled:!u}),n()(gl,{promptUpgrade:!p,domainSettingsStore:a,saveEmailDomainSettings:d,disabled:!u})):null,M?n()(pl,{promptUpgrade:!p,verifiedDomains:o,domainSettingsStore:a,saveEmailDomainSettings:d,disabled:!u}):null,y?n()(dl,{promptUpgrade:!p,domainSettingsStore:a,saveEmailDomainSettings:d,disabled:!u}):null,S?n()(ul,{spaceId:m,promptUpgrade:!p,domainSettingsStore:a,verifiedDomains:o,disabled:!u}):null,b?n()(cl,{spaceId:m,promptUpgrade:!p,domainSettingsStore:a,verifiedDomains:o,disabled:!u}):null)}function vl(e){let{spaceStore:t,samlConfigStore:i}=e;const a=(0,xe.O7)();return{updateSamlIdpUrl:(0,r.useCallback)((async e=>{let n=!1;return await $r({onRequest:()=>I.setSamlConfig(a,{spaceId:t.id,idpMetadataUrl:e}),onSuccess:()=>{n=!0,i.setState({...i.state,useMetadataUrl:!0,idpMetadataUrl:e,idpMetadata:void 0})}}),n}),[i,t,a]),updateSamlIdpXml:(0,r.useCallback)((async e=>{let n=!1;return await $r({onRequest:()=>I.setSamlConfig(a,{spaceId:t.id,idpMetadata:e}),onSuccess:()=>{n=!0,i.setState({...i.state,useMetadataUrl:!1,idpMetadataUrl:void 0,idpMetadata:e})}}),n}),[i,t,a]),updateStatus:(0,r.useCallback)((e=>$r({onRequest:()=>I.setSamlConfig(a,{spaceId:t.id,status:e}),onSuccess:()=>{i.setState({...i.state,status:e})}})),[i,t,a]),updateCreateAccount:(0,r.useCallback)((e=>$r({onRequest:()=>I.setSamlConfig(a,{spaceId:t.id,createAccount:e}),onSuccess:()=>{i.setState({...i.state,createAccount:e})}})),[i,t,a])}}function yl(e){let{spaceStore:t,samlConfigStore:i,disabled:a}=e;window.__c={n:"CreateAccountSetting"};const{updateCreateAccount:o}=vl({samlConfigStore:i,spaceStore:t}),s=(0,xe.O7)(),r=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),l=(0,Ze.VK)((()=>i.state.createAccount),[i]);return n()("div",{style:r.settingContainer},void 0,n()(Er,{title:n()("div",{style:r.settingsTitle},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.createAccount.title",defaultMessage:"Automatic account creation"}),n()(Rt.Z,{icon:zs.m,onClick:()=>C.navigateToExternalURL({environment:s,url:(0,Y.UY)("guides.samlJIT")})})),byline:n()(v.FormattedMessage,{id:"identityAndProvisioning.createAccount.byline",defaultMessage:"Automatically create Notion accounts for new users who log in via SAML SSO."}),isOn:l,onToggle:async function(){await o(!i.state.createAccount)},disabled:a}))}function Sl(e){let{spaceStore:t,samlConfigStore:i,promptUpgrade:a,disabled:o}=e;window.__c={n:"SamlEnforceSetting"};const s=(0,xe.O7)(),{updateStatus:r}=vl({samlConfigStore:i,spaceStore:t}),l=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),d=n()(v.FormattedMessage,{id:"identityAndProvisioning.accountAuth.title",defaultMessage:"Login method"}),c=n()(v.FormattedMessage,{id:"identityAndProvisioning.accountAuth.byline",defaultMessage:"Customize how users access SAML SSO-enabled workspaces."}),u=(0,Ze.VK)((()=>"enforced"===i.state.status?"enforced":"not_enforced"),[i]);return n()("div",{style:l.settingContainer},void 0,a?n()(el,{title:d,byline:c,targetTier:"business"}):n()(Ss.Z,{isMobile:s.device.isMobile,disabled:o,title:d,caption:c,type:"dropdown",currentOption:u,options:[{key:"enforced",label:n()(v.FormattedMessage,{id:"identityAndProvisioning.accountAuth.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:n()(v.FormattedMessage,{id:"identityAndProvisioning.accountAuth.option.notEnforced",defaultMessage:"Any method"})}],onSelectOption:async function(){"enforced"===i.state.status?await r("configured"):await r("enforced")}}))}var bl=i(54497),Ml=i(5228);function wl(e){let{isOpen:t,...i}=e;window.__c={n:"SamlConfigModal"};const a=(0,Ze.VK)((()=>({active:i.samlConfigStore.state.useMetadataUrl?"url":"xml",url:i.samlConfigStore.state.idpMetadataUrl||"",xml:i.samlConfigStore.state.idpMetadata||""})),[i.samlConfigStore]);return n()(Zs.Z,{open:t,onDismiss:i.onClose,render:()=>r.createElement(Cl,s()({},i,{initialConfiguration:a}))})}function Cl(e){let{onSaveChanges:t,initialConfiguration:i,samlConfigStore:a,spaceStore:o,onClose:s}=e;window.__c={n:"SamlConfigSettings"};const[l,d]=(0,r.useState)(i),c=(0,xe.O7)(),u=(0,Fe.yK)((e=>({container:{background:e.popoverBackground,width:450,padding:24,borderRadius:3,transition:"all 500ms ease"},title:{fontFamily:f.Z.getCompositeFontFamily(Dn.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:f.Z.getCompositeFontFamily(Dn.SP).sans,fontSize:14,fontWeight:500,lineHeight:"19px",margin:"20px 0 0"},copyButton:{borderRadius:3,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:f.Z.getCompositeFontFamily(Dn.SP).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},url:{width:"100%",color:e.mediumTextColor,fontFamily:f.Z.getCompositeFontFamily(Dn.SP).sans,fontSize:14,fontWeight:400,lineHeight:"18px"},readonlyInput:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:3},divider:{margin:"20px auto 20px"},radioContainer:{display:"flex",justifyContent:"space-evenly",flexDirection:"column",height:60},radioOption:{display:"flex",alignItems:"center"},caption:{margin:"4px 0 8px"},centeredCaption:{margin:"4px 24px 8px",textAlign:"center"},buttonContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginTop:24},buttonSpacing:{marginRight:8},feedback:{color:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400],display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px",height:20}})),[]),m=(0,r.useMemo)((()=>kl(l)),[l]),p=(0,Ze.VK)((()=>"unconfigured"===a.state.status),[a]),g=(0,Ze.VK)((()=>(0,Ml.v9)(o.id,Ye.default.domainBaseUrl)),[o]),h=(0,r.useCallback)((()=>{It.RD({environment:c,stringValue:g,copiedMessage:It.tq.copiedLinkToClipboard})}),[c,g]),y=(0,r.useCallback)((()=>{d((e=>({...e,active:"url"})))}),[]),S=(0,r.useCallback)((()=>{d((e=>({...e,active:"xml"})))}),[]),b=(0,Fe.yK)((e=>({input:{transition:"all 200ms ease-in-out",boxShadow:"none",margin:"12px 0",width:"100%",background:e.popoverBackground,border:`1px solid ${e.outlineButtonBorder}`}})),[]),M=(0,r.useMemo)((()=>"url"===l.active?{placeholder:"https://...",value:l.url,onChange:e=>{const t=e.target.value;d((e=>({...e,url:t})))},style:{height:32,...b.input}}:{placeholder:'<md:EntityDescriptor entityID="...',value:l.xml,onChange:e=>{const t=e.target.value;d((e=>({...e,xml:t})))},textarea:!0,style:{height:118,...b.input},inputStyle:{width:"100%",height:"100%"}}),[l,b]),w=(0,r.useCallback)((()=>{t(l)}),[t,l]);return n()("div",{style:u.container},void 0,n()(Ee.Z,{style:u.title},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.title",defaultMessage:"SAML SSO Configuration"})),n()(Ee.Z,{isSmall:!0,style:u.centeredCaption,isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.byline",defaultMessage:"Configure SAML SSO for your Notion workspace with your Identity Provider (IDP). <guidelink>Learn more</guidelink>.",values:{guidelink:e=>n()(ys.Z,{href:(0,Y.UY)("guides.samlSettings"),external:!0},void 0,e)}})),n()(Ee.Z,{style:u.subtitle},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.acsTitle",defaultMessage:"Assertion Consumer Service (ACS) URL"})),n()(Ee.Z,{isSmall:!0,style:u.caption,isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.acsByline",defaultMessage:"Enter this in your IDP's SAML configuration."})),n()("div",{style:u.readonlyInput},void 0,n()(Ee.Z,{style:u.url},void 0,g),n()(Ri.Z,{onClick:h,style:u.copyButton},void 0,(0,An.U)(u.copyIcon),n()(v.FormattedMessage,{id:"verifyDomainModal.editSamlConfig.copy",defaultMessage:"Copy"}))),n()(Ee.Z,{style:u.subtitle},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.idpTitle",defaultMessage:"Identity Provider Details"})),n()(Ee.Z,{isSmall:!0,style:u.caption},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.idpUrlByline",defaultMessage:"Enter the value provided by your IDP."})),n()("div",{style:u.radioContainer},void 0,n()(Ge.Z,{style:u.radioOption,onClick:y},void 0,n()(ki.Z,{isSelected:"url"===l.active}),n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.idpUrl",defaultMessage:"Identity Provider URL"}))),n()(Ge.Z,{style:u.radioOption,onClick:S},void 0,n()(ki.Z,{isSelected:"xml"===l.active}),n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.idpXml",defaultMessage:"Identity Provider Metadata XML"})))),r.createElement(Qi.Z,M),n()("div",{style:u.feedback},void 0,n()(_l,{validation:m})),n()("div",{style:u.buttonContainer},void 0,n()(Le.Z,{isLarge:!0,style:u.buttonSpacing,onClick:s},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.cancel",defaultMessage:"Cancel"})),n()(He.Z,{isLarge:!0,disabled:"invalid"===m.type,onClick:w},void 0,n()(v.FormattedMessage,p?{id:"identityAndProvisioning.editSamlConfig.enableSaml",defaultMessage:"Enable SAML"}:{id:"identityAndProvisioning.editSamlConfig.saveChanges",defaultMessage:"Save changes"}))))}function _l(e){let t,{validation:i}=e;if("valid"===i.type)return null;switch(i.reason){case"empty":t=n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.feedback.empty",defaultMessage:"You cannot leave this field blank"});break;case"signed_request":t=n()(v.FormattedMessage,{id:"identityAndProvisioning.editSamlConfig.feedback.signed_request",defaultMessage:"Requests cannot be signed"})}return r.createElement(r.Fragment,null,(0,bl.t)({height:16,width:16,margin:"0 4px 0 8px"}),n()("span",{},void 0,t))}function kl(e){return"url"===e.active?(0,Ml.jY)(e.url):"xml"===e.active?(0,Ml.a7)(e.xml):void(0,A.t1)(e.active)}function Tl(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a,isSamlStatusEnabled:o,promptUpgrade:s,disabled:l}=e;window.__c={n:"SamlToggle"};const[d,c]=(0,r.useState)({isOpened:!1,enableSamlOnSave:!1}),{updateStatus:u,updateSamlIdpUrl:m,updateSamlIdpXml:p}=vl({samlConfigStore:i,spaceStore:t}),{verifiedDomains:g}=Qr({spaceStore:t,samlConfigStore:i,domainSettingsStore:a}),h=(0,Fe.yK)((()=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:l?"default":"pointer"},settingTitle:{fontWeight:f.Z.fontWeight.medium},settingByline:{marginBottom:4},configButton:{marginTop:14}})),[l]),y=n()(v.FormattedMessage,{id:"identityAndProvisioning.samlToggle.title",defaultMessage:"Enable SAML SSO"}),S=n()(v.FormattedMessage,{id:"identityAndProvisioning.samlToggle.byline",defaultMessage:"Anyone using email addresses with a verified domain can log in via SAML SSO."});return s?n()(el,{title:y,byline:S,targetTier:"business"}):r.createElement(r.Fragment,null,n()(Er,{title:y,byline:S,isOn:o,disabled:l,tooltipForDisabled:0===g.length?n()(v.FormattedMessage,{id:"identityAndProvisioning.samlToggle.disabledTooltipNoVerifiedDomains",defaultMessage:"Verify a domain to enable SAML."}):void 0,onToggle:function(){if(l)return;const{useMetadataUrl:e,idpMetadata:t,idpMetadataUrl:a}=i.state,n=e&&a||!e&&t;switch(i.state.status){case"disabled":n?u("configured"):c({isOpened:!0,enableSamlOnSave:!0});break;case"unconfigured":c({isOpened:!0,enableSamlOnSave:!0});break;case"configured":case"enforced":u("disabled")}}}),n()(Le.Z,{disabled:l,disabledFeedback:l,isLarge:!0,style:h.configButton,onClick:function(){l||c({isOpened:!0,enableSamlOnSave:!1})}},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.samlToggle.configure",defaultMessage:"Edit SAML SSO configuration"})),n()(wl,{isOpen:d.isOpened,onClose:()=>c({isOpened:!1,enableSamlOnSave:!1}),onSaveChanges:async function(e){if("invalid"===kl(e).type)return;let t=!1;switch(e.active){case"url":t=await m(e.url);break;case"xml":t=await p(e.xml)}t&&(d.enableSamlOnSave&&await u("configured"),c({isOpened:!1,enableSamlOnSave:!1}))},spaceStore:t,samlConfigStore:i}))}var Il=i(39634);const Pl={id:"name",headerTitle:n()(v.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.name",defaultMessage:"Name"}),renderCell:e=>n()(Bl,{space:e.space,isCurrentSpace:e.isCurrentSpace}),widthData:{width:50},sortable:!0},xl={id:"memberCount",headerTitle:n()(v.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.memberCount",defaultMessage:"Members"}),renderCell:e=>n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.members",defaultMessage:"{count} members",values:{count:e.space.memberCount}})),widthData:{width:20},sortable:!0},Zl={id:"createdAt",headerTitle:n()(v.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.plan",defaultMessage:"Created at"}),renderCell:e=>{const t=e.space.createdTime;return n()(Ee.Z,{},void 0,t&&(0,an.Yx)(t,"medium",Dn.SP))},widthData:{width:20},sortable:!0},Fl=[Pl,xl,Zl];function Al(e){let{spaceStore:t,spaces:i}=e;window.__c={n:"WorkspacesTable"};const[a,o]=(0,r.useState)({column:Pl,sortAscending:!1}),s=(0,Ze.VK)((()=>i.map((e=>({id:e.id,isClickable:!1,isCurrentSpace:t.id===e.id,space:e})))),[i,t]),l=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:Fl,theme:e,containerMarginTop:12})),[]);return n()(Ve.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Fl,rows:El(s,a),sortState:a,onSortStateChanged:o,renderNoRowsComponent:()=>n()(Ee.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"}},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.empty",defaultMessage:"No linked workspaces."})),styles:l})}function El(e,t){let{column:i,sortAscending:a}=t,n=[];switch(i.id){case"name":n=m.MR(e,(e=>e.space.name));break;case"createdAt":n=m.MR(e,(e=>e.space.createdTime));break;case"memberCount":n=m.MR(e,(e=>e.space.memberCount))}return a?n:n.reverse()}function Bl(e){window.__c={n:"WorkspaceNameCell"};const t=(0,Fe.yK)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"center",gap:4}})),[]);return n()(Ee.Z,{style:t.container},void 0,e.space.name,e.isCurrentSpace?n()(qa.Z,{},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.table.name.currentBadge",defaultMessage:"Current"})):null)}function Rl(e){let{spaceStore:t,spaces:i}=e;window.__c={n:"SecondaryWorkspaces"};const a=(0,xe.O7)(),o=(0,Fe.yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),s=(0,r.useCallback)((()=>{Il.j({environment:a,from:"saml_settings",prepopulatedContent:`Request to add or remove a workspace for SAML Single Sign-on on workspace ${t.id}.`})}),[t,a]);return n()("div",{style:o.settingContainer},void 0,n()(Ar,{title:n()(v.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.title",defaultMessage:"Linked workspaces"}),byline:n()(v.FormattedMessage,{id:"identityAndProvisioning.secondaryWorkspaces.message",defaultMessage:"This SAML SSO configuration applies to the following other workspaces. <contactlink>Contact support</contactlink> to add or remove a workspace.",values:{contactlink:e=>n()(ys.Z,{onClick:s},void 0,e)}}),settingItem:null}),n()(Al,{spaceStore:t,spaces:i}))}function Dl(e){let{spaceStore:t,samlConfigStore:i,domainSettingsStore:a}=e;window.__c={n:"SamlSection"};const{verifiedDomains:o,isSamlAvailable:s,isSamlEditable:l,isSamlStatusEnabled:d}=Qr({spaceStore:t,samlConfigStore:i,domainSettingsStore:a}),c=!l||!s||!d,u=(0,Ze.VK)((()=>i.state.spaces),[i]);return r.createElement(r.Fragment,null,n()(ll.Z,{title:n()(v.FormattedMessage,{id:"identityAndProvisioning.samlToggle.learnMore",defaultMessage:"Learn about SAML SSO"}),href:(0,Y.UY)("guides.samlSettings"),style:{marginTop:18,marginBottom:16},analyticsFrom:"saml_settings"}),n()(Tl,{disabled:!l||0===o.length,promptUpgrade:!s,isSamlStatusEnabled:d,spaceStore:t,samlConfigStore:i,domainSettingsStore:a}),n()(Sl,{disabled:c,promptUpgrade:!s,spaceStore:t,samlConfigStore:i}),n()(yl,{disabled:c,spaceStore:t,samlConfigStore:i}),n()(Rl,{spaceStore:t,spaces:u}))}const Ll=(0,v.defineMessages)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",defaultMessage:"Failed to create a new SCIM token, please try again later."}});function Nl(e){window.__c={n:"NewScimTokenButton"};const[t,i]=(0,r.useState)(!1),a=(0,xe.O7)();const o=!t&&"Able"===e.tokenCreationAbility,l=t||"Able"!==e.tokenCreationAbility,d=n()(Ge.Z,{isBlue:o,isLightGray:l,disabled:l,style:{position:"relative",marginLeft:"auto",marginRight:0},icon:e=>(0,ts.R)({...e,width:14,height:14,fill:"inherit",marginRight:"6px"}),onClick:async function(){i(!0);try{const t=await async function(e){let{environment:t,spaceStore:i,userStore:a}=e;const{botStore:n,transactionPromise:o}=Vo.lz({environment:t,spaceStore:i,name:"SCIM",userId:a.id,spaceRole:"editor",type:"scim"});return await o,n.id}({...e,environment:a});e.onNewScimToken(t)}catch(t){M.showErrorMessage(q.default.formatMessage(Ll.failedCreatingNewScimToken))}i(!1)}},void 0,n()(v.FormattedMessage,{id:"scimTokenSettings.NewSCIMTokenButton.title",defaultMessage:"Add token"}));let c;switch(e.tokenCreationAbility){case"Able":return d;case"Undefined":c=n()(v.FormattedMessage,{defaultMessage:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":c=n()(v.FormattedMessage,{defaultMessage:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":c=n()(v.FormattedMessage,{defaultMessage:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,A.t1)(e.tokenCreationAbility)}return n()(Nt.Z,{textWrap:!1,renderTooltip:()=>c,placement:Nt.Z.Placement.Right,render:e=>r.createElement("div",s()({},e,{style:{paddingLeft:"4px"}}),d)})}var Ol=i(15070);function Vl(e){let{userId:t,currentSpaceStore:i}=e;return ft.U6.createChildStore(i,{table:ti.KJ,id:t})}var Ul=i(62385);const Wl={container:{display:"flex",alignItems:"center",fontSize:f.Z.fontSize.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},userName:{flexShrink:1,...f.Z.textOverflowStyle}};function zl(e,t){const i=wa.kk.fromValue(Ot.cZ,e);return i.getCreatedByTable()===ti.KJ&&i.getCreatedById()===t}const Kl={buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:3,height:20,width:20,marginRight:1},menuItemButton:{minWidth:200}};function Hl(e){let{onRevokeToken:t}=e;window.__c={n:"RevokeTokenButton"};const i=(0,Fe.Fg)();return r.createElement(r.Fragment,null,n()(Nt.Z,{textWrap:!1,renderTooltip:()=>r.createElement(r.Fragment,null,n()(v.FormattedMessage,{defaultMessage:"Revoke this token.",id:"revokeTokenButton.tooltip"})),placement:Nt.Z.Placement.Right,render:e=>n()(Bt.ZP,{popupType:Bt.Z4.Popup,placementToOrigin:Bt.pO.Right,renderOrigin:t=>r.createElement(Ri.Z,s()({className:K.TAd,style:Kl.buttonStyle,mobileFeedback:!1},e,t),(0,Ys.y)({fill:i.mediumIconColor,width:12,height:12})),onClick:()=>{M.confirmUserAction({message:n()(v.FormattedMessage,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.message",defaultMessage:"Are you sure you want to revoke this token?"}),description:n()(v.FormattedMessage,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.description",defaultMessage:"Existing SCIM configurations that use this token will no longer work once the token is revoked, and you'll have to provide them with a new token."}),acceptLabel:n()(v.FormattedMessage,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.acceptButton.label",defaultMessage:"Revoke token"}),cancelLabel:n()(v.FormattedMessage,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.cancelButton.label",defaultMessage:"Cancel"})}).then((e=>e&&t()))},render:e=>(e.close(),r.createElement(r.Fragment,null))})}))}const Gl=()=>{window.__c={n:"OutdatedWarningIcon"};const e=(0,Fe.Fg)();return n()(Nt.Z,{textWrap:!1,renderTooltip:()=>r.createElement(r.Fragment,null,n()(v.FormattedMessage,{defaultMessage:"Outdated token. Revoke this token and generate a new one to view its contents.",id:"manageScimTokenTable.OutdatedWarningIcon.tooltip"})),placement:Nt.Z.Placement.Right,render:t=>r.createElement("div",s()({},t,{style:{paddingLeft:"4px"}}),(0,bl.t)({fill:(0,tn.fi)("orange",e).fill,width:12,height:12}))})};function ql(e){let{clipboardTextFn:t}=e;window.__c={n:"RenderCopyToClipboardButton"};const i=(0,xe.O7)();const a=(0,Fe.Fg)(),o={height:25,background:a.whiteButtonBackground,color:a.regularTextColor,fontWeight:f.Z.fontWeight.regular,padding:"4px 6px",fontSize:11.5};return n()(Ul.Z,{onClick:async function(){const e=await t();void 0!==e&&It.RD({environment:i,stringValue:e,copiedMessage:It.tq.copiedTokenToClipboard,showCopyModal:!!i.device.isSafari||void 0})},style:o},void 0,(0,An.U)({height:16,width:16,paddingRight:4}),n()(v.FormattedMessage,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"}))}const jl="•••••••••••";function Yl(){return n()(Nt.Z,{textWrap:!1,renderTooltip:()=>n()(v.FormattedMessage,{defaultMessage:"This token can only be viewed by its creator.",id:"manageScimTokenTable.renderTokenThatCannotBeViewed.tooltip"}),placement:Nt.Z.Placement.Right,render:e=>r.createElement("div",e,jl)})}function $l(e){let{row:t}=e;window.__c={n:"BotTokenCell"};const i=(0,xe.O7)();return t.legacy?r.createElement(r.Fragment,null,jl,n()(Gl,{})):t.ownedByCurrentUser?r.createElement(r.Fragment,null,jl,n()(ql,{clipboardTextFn:()=>Vo.VG({environment:i,botId:t.id})})):n()(Yl,{})}const Ql={id:"token",headerTitle:n()(v.FormattedMessage,{id:"manageScimTokenTable.columnTitle.token",defaultMessage:"Token"}),renderCell:e=>n()($l,{row:e}),widthData:{width:40},sortable:!1,hasClickableContents:!0},Jl=()=>{const e=Wl;return n()(Nt.Z,{textWrap:!1,renderTooltip:()=>n()(v.FormattedMessage,{defaultMessage:"This token was created by a user who is no longer an admin in the workspace.",id:"scimTableLegacyUserCell.tooltip"}),placement:Nt.Z.Placement.Right,render:t=>r.createElement("div",t,n()("div",{style:e.container},void 0,n()(ai.Z,{style:e.userAvatar,avatarShouldShowShadow:!0,size:20}),n()("div",{style:e.userName},void 0,n()("i",{},void 0,"Deactivated user"))))})},Xl={id:"addedBy",headerTitle:n()(v.FormattedMessage,{id:"manageScimTokenTable.columnTitle.addedBy",defaultMessage:"Added by"}),renderCell:e=>{if(e.legacy)return n()(Jl,{});{const t=e.ownedByCurrentUser?n()(Ee.Z,{isSecondaryColor:!0,style:{marginLeft:4,textAlign:"center"}},void 0,n()(v.FormattedMessage,{id:"manageSCIMTokenTable.colums.addedBy.selfIndicator",defaultMessage:"(you)"})):r.createElement(r.Fragment,null);return r.createElement(r.Fragment,null,n()(li.G,{isClickable:!1,userStores:[e.ownerUserStore]}),t)}},widthData:{width:40},sortable:!1,hasClickableContents:!1},ed={id:"created",headerTitle:n()(v.FormattedMessage,{id:"manageScimTokenTable.columnTitle.created",defaultMessage:"Created"}),renderCell:e=>n()(We.T,{includeTime:!0,dateTs:e.createdAt}),widthData:{width:40},sortable:!0,hasClickableContents:!1},td=[Ql,Xl,ed,{id:"revokeToken",headerTitle:void 0,renderCell:e=>n()(Hl,{onRevokeToken:()=>{e.onRevokeToken()}}),widthData:{width:10},sortable:!1,hasClickableContents:!0}];function id(e,t){let{column:i,sortAscending:a}=t;const n=null==i?void 0:i.id;let o=e=>e.id;switch(n){case"name":o=e=>e.name;break;case"created":o=e=>e.createdAt;break;case"token":case"addedBy":case"revokeToken":case void 0:break;default:(0,A.t1)(n)}const s=m.MR(e,o);return a||s.reverse(),s}function ad(e){let{botStores:t,onRevokeToken:i}=e;window.__c={n:"ManageScimTokenTable"};const a=(0,Ze.VK)((()=>B.default.state.currentUserStore),[]),o=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),s=(0,v.useIntl)(),l=(0,Ze.VK)((()=>{if(!o)return[];const e=null==a?void 0:a.id;return m.oA(t.map((t=>{const a=t.getModel();if(!a||!(0,Ol.xe)(a))return;const n={id:a.id,isClickable:!1,createdAt:a.getCreatedAt(),userLocale:s.locale,name:a.getName(),onRevokeToken:()=>{i(a.id)}},r=function(e){const t=wa.kk.fromValue(Ot.cZ,e);return"notion_user"===t.getCreatedByTable()&&t.getCreatedById()===ti.s$.id}(a);return r?{...n,legacy:r}:{...n,legacy:r,ownedByCurrentUser:zl(a,e),ownerUserStore:"notion_user"===a.getCreatedByTable()?Vl({userId:a.getCreatedById(),currentSpaceStore:o}):void 0}})))}),[t,o,a,s.locale,i]),[d,c]=(0,r.useState)({column:ed,sortAscending:!1}),u=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:td,theme:e,containerMarginTop:0})),[]);return n()(Ve.D,{columnRenderInfo:td,rows:id(l,d),sortState:d,onSortStateChanged:c,onRowClick:()=>r.createElement(r.Fragment,null),renderNoRowsComponent:()=>n()(Ee.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"}},void 0,n()(v.FormattedMessage,{id:"manageSCIMTokenTable.noTokensFound.message",defaultMessage:"No active SCIM tokens."})),styles:u})}async function nd(e){let{environment:t,spaceId:i}=e;return(await Vo.Yw({environment:t,table:Wn.bx,id:i,type:"scim"})).botIds}const od=function(e){let{botIds:t,setBotIds:i,spaceStore:a}=e;window.__c={n:"ScimTokenSettings"};const o=(0,xe.O7)(),s=a.id;if((0,r.useEffect)((()=>{void 0===t&&nd({environment:o,spaceId:s}).then(i)}),[t,o,i,s]),t){const e=t.map((e=>ft.t1.createChildStore(a,{table:Ot.cZ,id:e,spaceId:s})));return n()(ad,{botStores:e,onRevokeToken:e=>{Vo.P0({environment:o,botId:e,onSuccess:()=>{nd({environment:o,spaceId:s}).then(i)}})}})}return n()(Ue.Z,{})};function sd(e){let{userStore:t,spaceStore:i,promptUpgrade:a}=e;window.__c={n:"ScimTokens"};const[o,s]=(0,r.useState)(void 0),l=(0,xe.O7)(),d=(0,Ze.VK)((()=>function(e){let{botIds:t,spaceStore:i,environment:a}=e;if(void 0===t)return"Undefined";const n=t.map((e=>ft.t1.createChildStore(i,{table:Ot.cZ,id:e,spaceId:i.id}))).filter((e=>e.isDefined()));if(n.some((e=>e.getCreatedByTable()===ti.KJ&&e.getCreatedById()===ti.s$.id)))return"SpaceHasExistingToken";if(n.some((e=>e.getCreatedByTable()===ti.KJ&&e.getCreatedById()===a.currentUser.id)))return"UserHasExistingToken";return"Able"}({botIds:o,spaceStore:i,environment:l})),[o,l,i]),c=n()(v.FormattedMessage,{id:"identityAndProvisioning.scim.title",defaultMessage:"SCIM tokens"}),u=n()(v.FormattedMessage,{id:"identityAndProvisioning.scim.byline",defaultMessage:"Generate a token to configure SCIM."});return a?n()(el,{title:c,byline:u,targetTier:"enterprise"}):r.createElement(r.Fragment,null,n()(Ar,{title:c,byline:u,settingItem:n()(Nl,{onNewScimToken:e=>s((t=>[...t??[],e])),spaceStore:i,userStore:t,tokenCreationAbility:d})}),n()(ll.Z,{title:n()(v.FormattedMessage,{id:"securitySAMLSettings.SCIMSection.helpButton.label",defaultMessage:"Learn about SCIM"}),style:{marginTop:18,marginBottom:24},href:(0,Y.UY)("guides.scim"),analyticsFrom:"scim_settings"}),n()(od,{spaceStore:i,userStore:t,botIds:o,setBotIds:s}))}function rd(e){let{userStore:t,spaceStore:i}=e;window.__c={n:"ScimSection"};const a=(0,Ze.VK)((()=>(0,Yo.wP)()),[]);return n()(sd,{promptUpgrade:!a,userStore:t,spaceStore:i})}function ld(e){let{primarySpaceName:t}=e;window.__c={n:"SecondaryWorkspaceNotice"};const i=(0,Fe.yK)((e=>({container:{background:e.accentColors.blue[100],padding:"18px 24px",borderRadius:4,margin:"0 0 24px"}})),[]);return n()("div",{style:i.container},void 0,n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableTitle",defaultMessage:"The primary workspace is <bold>{primaryWorkspaceName}</bold>.",values:{primaryWorkspaceName:t,bold:e=>n()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,e)}})),n()("br",{}),n()(Ee.Z,{isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableMessage",defaultMessage:"The domain management settings and SAML SSO configuration are being managed by the workspace <bold>{primaryWorkspaceName}</bold>. Please navigate there or contact an admin of that workspace to edit the verified domains or SSO configuration.",values:{primaryWorkspaceName:t,bold:e=>n()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,e)}})))}var dd=i(89101),cd=i(23124);function ud(e){let{spaceStore:t,isEnterprise:i}=e;window.__c={n:"SetupInformation"};const a=(0,v.useIntl)(),o=(0,Ze.VK)((()=>t.id),[t]);return n()(cd.rj,{gap:8},void 0,n()(cd.r8,{row:1,col:1},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"}))),n()(cd.r8,{row:1,col:2},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0},void 0,n()(md,{text:o,tooltip:a.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})}))),i?r.createElement(r.Fragment,null,n()(cd.r8,{row:2,col:1},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",defaultMessage:"SAML SSO/SAML Entity ID"}))),n()(cd.r8,{row:2,col:2},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0},void 0,n()(md,{text:(0,Ml.AE)(Ye.default.domainBaseUrl),tooltip:a.formatMessage({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",defaultMessage:"Click to copy link"})}))),n()(cd.r8,{row:3,col:1},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",defaultMessage:"SCIM base URL"}))),n()(cd.r8,{row:3,col:2},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0},void 0,n()(md,{text:Ye.default.domainBaseUrl+dd._j.scimApiBasePath,tooltip:a.formatMessage({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",defaultMessage:"Click to copy link"})})))):null)}function md(e){let{tooltip:t,text:i}=e;window.__c={n:"CopyableText"};const a=(0,xe.O7)();return n()(Nt.Z,{delayThreshold:0,renderTooltip:()=>t,render:e=>r.createElement(ys.Z,s()({onClick:()=>{It.RD({environment:a,stringValue:i,copiedMessage:It.tq.copiedPropertyToClipboard})}},e),i)})}function pd(e){let{userStore:t,spaceStore:i,samlConfigStore:a,domainSettingsStore:o}=e;window.__c={n:"SettingsPage"};const s=(0,xe.O7)(),l=(0,Ze.VK)((()=>Ae.Z.state.online),[]),{loadingSaml:d,loadedSaml:c,errorSaml:u}=(0,r.useContext)(Us),m=(0,Ze.VK)((()=>function(e){let{environment:t,samlConfigStore:i,spaceStore:a}=e;const n=jr({environment:t,samlConfigStore:i}),o=!i.state.id||i.state.id===a.id;return n&&o}({environment:s,samlConfigStore:a,spaceStore:i})),[s,a,i]),p=(0,Ze.VK)((()=>a.state.id?Yr.Z.getPublicSpaceData(s,a.state.id):void 0),[s,a]),g=(0,Fe.yK)((()=>({header:{marginTop:48}})),[]),h=(0,Ze.VK)((()=>T.default.checkGate("enable_managed_users_dashboard")||T.default.checkGate("enable_set_email_domain_settings")),[]),f=(0,Ze.VK)((()=>(0,Yo.wP)()),[]);return l?d?n()(Be.Z,{},void 0,n()(Ue.Z,{style:{margin:"0 auto"}})):u?(M.showErrorMessage(u.message),null):c?n()(Be.Z,{},void 0,!m&&p?n()(ld,{primarySpaceName:p.name}):null,n()(Re.Z,{large:!0,divider:"full"},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.domain.title",defaultMessage:"Domain management"})),n()(rl,{spaceStore:i,samlConfigStore:a,domainSettingsStore:o,isCurrentSpaceEnterprise:f}),h?r.createElement(r.Fragment,null,n()(Re.Z,{large:!0,divider:"full",style:g.header},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.userManagement.title",defaultMessage:"User management"})),n()(fl,{spaceStore:i,samlConfigStore:a,domainSettingsStore:o})):null,n()(Re.Z,{large:!0,divider:"full",style:g.header},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML Single sign-on (SSO)"})),n()(Dl,{spaceStore:i,samlConfigStore:a,domainSettingsStore:o}),n()(Re.Z,{large:!0,divider:"full",style:g.header},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.scim.title",defaultMessage:"SCIM provisioning"})),n()(rd,{userStore:t,spaceStore:i}),n()(Re.Z,{large:!0,divider:"full",style:g.header},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})),n()(ud,{spaceStore:i,isEnterprise:f})):null:n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{defaultMessage:"Please go online to manage identity and provisioning settings.",id:"identityProvisioningSettings.offline.message"})))}function gd(e,t){return(void 0===e||!(0,Go.XR)(e))&&(!(void 0===e||!(0,Go.TZ)(e)||0!==t)||1===t)}var hd=i(92595),fd=i(92165);const vd=(0,c.I)("arrowUpCircled",{viewBox:"0 0 16 16",svg:n()("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})});var yd=i(63143),Sd=i(27242),bd=i(73420);function Md(){return n()(Nt.Z,{renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceClaim.Explanation",defaultMessage:"Workspace claim request is being processed."}),render:e=>r.createElement(Ee.Z,e,n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingClaim",defaultMessage:"Pending"}))})}function wd(e){let{admin:t}=e;window.__c={n:"PendingSpaceTransferMessage"};const i=(0,v.useIntl)();return n()(Nt.Z,{renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceTransferExplanation",defaultMessage:"Waiting for {name} to transfer the workspace to an external account.",values:{name:(0,ii.Nz)(i,t)}}),render:e=>r.createElement(Ee.Z,e,n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingTransfer",defaultMessage:"Pending"}))})}let Cd=function(e){return e.Single="single",e.Multi="multi",e}({});function _d(e){window.__c={n:"SpaceActionsMenu"};const{space:t,mode:i}=e,a=(0,Ze.qz)(void 0,Zt.Z),o=(0,Fe.yK)((()=>({container:{minWidth:325}})),[]);return i===Cd.Single?n()(Td,{action:e.action,space:t}):n()(Bt.ZP,{popupType:st.kQ.Popup,style:o.container,buttonPopupStore:a,renderOrigin:e=>r.createElement(Rt.Z,s()({icon:_t.o},e)),render:()=>n()(kd,{space:t,actions:e.actions,popupStore:a})})}function kd(e){let{space:t,actions:i,popupStore:a}=e;const o={key:"workspace-actions",render:e=>r.createElement(rt.Z,e),items:i.map((e=>{const i=!!e.getDisabledState&&e.getDisabledState(t),a=e.getTooltip?e.getTooltip(t):null;return{key:e.id,render:t=>n()(Nt.Z,{render:a=>r.createElement(dr.Z,s()({},t,a,{shouldWrapCaption:!0,svg:t=>e.getIcon(t),title:e.name,caption:e.caption,style:{paddingTop:8,paddingBottom:8,opacity:i?.5:1},disabled:i})),renderTooltip:()=>a,disableTooltip:!Boolean(a),placement:Nt.Z.Placement.Left}),action:()=>e.onAction(t)}}))};return n()(nt.Z,{menuType:Xe.og.Popup},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:[o],onAccept:()=>{a.setState({open:!1})}}))}function Td(e){window.__c={n:"SingleSpaceActionButton"};const{action:t,space:i}=e,a=(0,Fe.yK)((e=>({button:{paddingLeft:5,paddingRight:5}})),[]),o=r.useCallback((()=>{t.onAction(i)}),[t,i]);return n()(Ge.Z,{isSmall:!0,style:a.button,onClick:o},void 0,t.name)}var Id=i(58877);function Pd(e){let{id:t,name:i,icon:a,subscriptionTier:o,memberCount:s,highlightIconContainer:r}=e;window.__c={n:"SpaceSummary"};const l=(0,v.useIntl)(),d=a?{pointer:{table:Wn.bx,id:t,spaceId:t},icon:a}:void 0,c=(0,Fe.yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%"},summaryContainer:{width:"calc(100% - 38px)"},iconContainer:{height:38,width:38,flexGrow:0,flexShrink:0,flexBasis:38,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center",background:r?e.selectLightGray[50]:void 0,borderRadius:6},name:{fontSize:14,fontWeight:500},byline:{fontSize:12,opacity:.5}})),[r]);return n()("div",{style:c.container},void 0,n()("div",{style:c.iconContainer},void 0,n()(Ht.Z,{disabled:!0,icon:d,isEmptyPage:!1,size:32,title:i,isLarge:!0,emojiSize:28,isRaw:!1})),n()("div",{style:c.summaryContainer},void 0,n()(Ee.Z,{style:c.name,showTooltipWhenTruncated:!0},void 0,i),n()(Ee.Z,{style:c.byline},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.summaryByline",defaultMessage:"{subscriptionTier} · {memberCount, plural, one {{memberCount} member} other {{memberCount} members}}",values:{subscriptionTier:xd(o,l),memberCount:s}}))))}function xd(e,t){switch(e){case"personal_free":case"team_free":case"free":return t.formatMessage(Id.a.free);case"personal":return t.formatMessage(Id.a.personal);case"plus":return t.formatMessage(Id.a.plusPlan);case"business":return t.formatMessage(Id.a.business);default:(0,A.t1)(e)}}var Zd=i(3556);function Fd(e){let{users:t,deletedUserEmailDomain:i}=e;window.__c={n:"SpaceUsers"};const a=(0,Ze.qz)(void 0,Zt.Z),o=(0,Fe.yK)((()=>({container:{minWidth:275}})),[]);return n()(Bt.ZP,{popupType:st.kQ.Popup,style:o.container,buttonPopupStore:a,renderOrigin:e=>r.createElement(Bd,s()({users:t,deletedUserEmailDomain:i},e)),render:()=>n()(Ad,{users:t,popupStore:a})})}function Ad(e){let{users:t,popupStore:i}=e;window.__c={n:"WorkspaceUsersMenu"};const a=(0,xe.O7)(),o={key:"workspace-users-menu",render:e=>r.createElement(rt.Z,e),items:t.map((e=>({key:e.id,render:t=>r.createElement(Ed,s()({user:e},t)),action:()=>C.navigateToExternalURL({environment:a,url:`mailto:${e.email}`})})))};return n()(nt.Z,{menuType:Xe.og.Popup},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:0,sections:[o],onAccept:()=>{i.setState({open:!1})}}))}function Ed(e){let{user:t,...i}=e;window.__c={n:"EmailableUserSummary"};const a=(0,v.useIntl)(),o=(0,Fe.yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8,margin:"0 6px"},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:300},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:300}})),[]);return r.createElement(Ge.Z,s()({style:o.container},i),n()("div",{style:o.avatarContainer},void 0,n()(ai.Z,{userValue:t,size:24})),n()("div",{style:o.nameContainer},void 0,n()(Ee.Z,{style:o.name},void 0,(0,ii.Nz)(a,t)),n()(Ee.Z,{style:o.email},void 0,t.email)),n()("div",{style:o.copyContainer},void 0,(0,Zd.Z)({height:18,width:18})))}function Bd(e){let{users:t,deletedUserEmailDomain:i,...a}=e;window.__c={n:"MultiUsersDisplay"};const o=(0,v.useIntl)(),l=(0,Fe.yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:"-8px",maxWidth:"100%"},empty:{fontSize:14,maxWidth:150,opacity:.5},name:{fontSize:14,maxWidth:150},plusMore:{opacity:.5,display:"inline"}})),[]);return 0===t.length?n()(Nt.Z,{render:e=>r.createElement(Ge.Z,s()({style:l.container,disabled:!0},a,e),n()(Ee.Z,{style:l.empty},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.users.empty",defaultMessage:"Deleted user"}))),disableTooltip:!i,renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.users.emptyTooltip",defaultMessage:"Deleted user from {domain}",values:{domain:`@${i}`}})}):r.createElement(Ge.Z,s()({style:l.container},a),n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.users.name",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} <gray>+{remainingCount}</gray>} other {{firstUser} <gray>+{remainingCount}</gray>}}",values:{firstUser:(0,ii.Nz)(o,t[0]),remainingCount:t.length-1,gray:e=>n()(Ee.Z,{style:l.plusMore},void 0,e)}})))}const Rd=[{id:"spaces",headerTitle:n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.name",defaultMessage:"Workspaces"}),renderCell:e=>n()(Pd,{id:e.space.id,name:e.space.name,icon:e.space.icon,subscriptionTier:e.space.subscriptionTier,memberCount:e.space.memberCount}),widthData:{width:60},sortable:!1},{id:"admins",headerTitle:n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.admins",defaultMessage:"Workspace owners"}),renderCell:e=>n()(Fd,{users:e.space.admins}),widthData:{width:40},sortable:!1},{id:"createdBy",headerTitle:n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.createdBy",defaultMessage:"Created by"}),renderCell:e=>e.space.creator?n()(Fd,{users:[e.space.creator]}):n()(Fd,{users:[],deletedUserEmailDomain:e.space.creatorEmailDomain}),widthData:{width:40},sortable:!1},{id:"createdAt",headerTitle:n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.createdAt",defaultMessage:"Created date"}),renderCell:e=>n()(Ee.Z,{style:{opacity:.5}},void 0,(0,Ir.gs)(e.space.createdAt)),widthData:{width:30},sortable:!1},{id:"action",headerTitle:null,renderCell:e=>{if((0,Go.DI)(e.space.spaceRequest))return n()(wd,{admin:e.space.admins[0]});if((0,Go.XR)(e.space.spaceRequest))return n()(Md,{});if((0,Go.TZ)(e.space.spaceRequest)){const t=e.actions.find((e=>"recover-space"===e.id));return t&&n()(_d,{space:e.space,action:t,mode:Cd.Single})}return e.actions.length>0?n()(_d,{space:e.space,actions:e.actions.filter((e=>"recover-space"!==e.id)),mode:Cd.Multi}):null},widthData:{width:15},sortable:!1}];function Dd(e){let{claimableSpaces:t,spaceActions:i,loadMoreClaimableSpaces:a,loading:o}=e;window.__c={n:"ClaimableSpacesTable"};const s=t.map((e=>({id:e.id,isClickable:!1,space:e,actions:i}))),l=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:Rd,theme:e,containerMarginTop:0})),[]);return r.createElement(r.Fragment,null,n()(Ve.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Rd,rows:s,renderNoRowsComponent:()=>n()(Ee.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"}},void 0,!o&&n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.empty",defaultMessage:"No claimable workspaces."})),styles:l,getStyleForRow:function(e){if((0,Go.DI)(e.space.spaceRequest)||(0,Go.XR)(e.space.spaceRequest)||(0,Go.TZ)(e.space.spaceRequest))return{opacity:.5}},onScrollBottom:a}),o&&n()(Ue.Z,{style:{margin:"24px auto 24px"}}))}var Ld=i(33728),Nd=i(64275),Od=i(36329),Vd=i(98519),Ud=i(16354);const Wd=(0,v.defineMessages)({emailPlaceholder:{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.placeholder",defaultMessage:"it@example.com"}}),zd=e=>{let{onDismiss:t,spaceQueuedForTransfer:i,currentSpaceId:a}=e;window.__c={n:"PersonalTransferSpaceConfirmationModal"};const[o,s]=(0,r.useState)(),[l,d]=(0,r.useState)(!1),{setSpaceRequest:c}=(0,r.useContext)(Us),u=(0,xe.O7)(),m=(0,Fe.yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:f.Z.fontWeight.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},dividerContainer:{marginTop:20},dividerInner:{borderBottomColor:e.regularDividerColor},contactEmailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},contactEmailTitle:{fontWeight:f.Z.fontWeight.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},primaryButton:{width:"100%",marginTop:32},buttonCaption:{color:e.mediumTextColor,marginTop:8,textAlign:"center",fontSize:12},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:f.Z.fontWeight.medium,color:e.lightTextColor},buttonCaptionError:{color:e.errorText,marginTop:8,fontSize:13}})),[]),p=Boolean(i);return n()(Zs.Z,{open:p,innerStyle:m.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>r.createElement(r.Fragment,null,n()("div",{style:m.closeIconContainer},void 0,n()(Ge.Z,{isSmall:!0,onClick:t,ignoreLocalHoverState:!0},void 0,(0,Nd.D)(m.closeIcon))),n()("div",{},void 0,(0,Od._)(m.modalIcon)),n()(Ee.Z,{style:m.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.selfServe.title",defaultMessage:"Require account change"}),n()(Ud.Z,{href:(0,Y.UY)("guides.domainManagement")},void 0,n()(Rt.Z,{icon:zs.m}))),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:m.description},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.byline",defaultMessage:"You’re about to require the Workspace Owner of 1 workspace to use an external Notion accounts. They will be unable to use the workspace until the change is made."})),n()("div",{style:m.workspaceContainer},void 0,i?n()(Pd,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):null,n()("div",{style:m.checkContainer},void 0,(0,Vd.k)(m.check))),n()(vs.Z,{size:"100%",innerStyle:m.dividerInner,style:m.dividerContainer}),n()("div",{style:m.contactEmailContainer},void 0,n()(Ee.Z,{style:m.contactEmailTitle},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.title",defaultMessage:"Send request from"}),n()(Nt.Z,{renderTooltip:()=>n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.table.pendingExplanation",defaultMessage:"The Workspace Owner can contact this email for inquiries"}),render:e=>r.createElement("span",e,(0,zs.m)(m.helpIcon))})),n()(Qi.Z,{value:o,placeholder:q.default.formatMessage(Wd.emailPlaceholder),onChange:e=>{d(!1),s(e.target.value)}}),l&&n()(Ee.Z,{isSmall:!0,style:m.buttonCaptionError},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.error",defaultMessage:"Invalid email address"}))),n()(He.Z,{isLarge:!0,style:m.primaryButton,onClick:async()=>{const e=(0,Ld.H3)(o);var s;if((0,Ld.oH)(e)){if(i&&e){const o=await I.initiateWorkspaceTransfer(u,{requestingSpaceId:a,targetSpaceId:i.id,contactEmail:e});if("failed"===o.type)M.showErrorMessage(o.error.message);else{const a=o.data.workspaceTransfer;c(i.id,a),b.azK(u,{contactEmail:e,currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain,subscriptionTier:i.subscriptionTier}),t(),s=i.name,Qs.oV({label:n()(v.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.toast",defaultMessage:"Account change successfully requested for “{spaceName}“",values:{spaceName:s}})})}}}else d(!0)}},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.confirm",defaultMessage:"Confirm change"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:m.buttonCaption},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.buttonCaption",defaultMessage:"This cannot be undone"})),n()(Ge.Z,{style:m.secondaryButton,onClick:t},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.cancel",defaultMessage:"Cancel"})))})};const Kd=e=>{let{onDismiss:t,spaceQueuedForClaiming:i,requestingSpaceId:a}=e;window.__c={n:"SalesAssistedClaimSpaceConfirmationModal"};const o=(0,xe.O7)(),{setSpaceRequest:s}=(0,r.useContext)(Us),l=(0,Fe.yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,marginBottom:8,display:"inline-flex",alignItems:"center",justifyContent:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},description:{fontWeight:f.Z.fontWeight.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:f.Z.fontWeight.medium,color:e.lightTextColor},buttonCaption:{color:e.mediumTextColor,marginTop:8,textAlign:"center",fontSize:12}})),[]),d=Boolean(i),c=async()=>{if(!i)return;const e=await I.requestClaimAndUpgrade(o,{requestingSpaceId:a,targetSpaceId:i.id});var r;"failed"===e.type?M.showError(e):(b.eO1(o,{currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain,memberCount:i.memberCount}),s(i.id,e.data.spaceRequest),r=i.name,Qs.oV({label:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.toast",defaultMessage:"Workspace claim successfully requested for “{spaceName}“",values:{spaceName:r}})})),t()};return n()(Zs.Z,{open:d,innerStyle:l.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>r.createElement(r.Fragment,null,n()("div",{style:l.closeIconContainer},void 0,n()(Ge.Z,{isSmall:!0,onClick:t},void 0,(0,Nd.D)(l.closeIcon))),n()(Ee.Z,{style:l.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.title",defaultMessage:"Request workspace claim"}),n()(Ud.Z,{href:(0,Y.UY)("guides.domainManagement")},void 0,n()(Rt.Z,{icon:zs.m}))),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:l.description},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.byline",defaultMessage:"You’re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. You’ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:i?i.name:"the workspace below"}})),n()("div",{style:l.workspaceContainer},void 0,i?n()(Pd,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):null,n()("div",{style:l.checkContainer},void 0,(0,Vd.k)(l.check))),n()(He.Z,{isLarge:!0,style:l.primaryButton,onClick:c},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.sendRequest",defaultMessage:"Send request"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:l.buttonCaption},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.buttonCaption",defaultMessage:"This request may take a few days to process. For more information, contact your <accountmanageremail>Account Management team</accountmanageremail>.",values:{accountmanageremail:e=>n()(ys.Z,{href:"mailto:am@makenotion.com"},void 0,e)}})),n()(Ge.Z,{style:l.secondaryButton,onClick:t},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.cancel",defaultMessage:"Cancel"})))})};const Hd=e=>{let{onDismiss:t,spaceQueuedForClaiming:i}=e;window.__c={n:"SelfServeClaimSpaceConfirmationModal"};const a=(0,Fe.yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},description:{fontWeight:f.Z.fontWeight.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:f.Z.fontWeight.medium,color:e.lightTextColor}})),[]),o=Boolean(i);return n()(Zs.Z,{open:o,innerStyle:a.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>r.createElement(r.Fragment,null,n()("div",{style:a.closeIconContainer},void 0,n()(Ge.Z,{isSmall:!0,onClick:t,ignoreLocalHoverState:!0},void 0,(0,Nd.D)(a.closeIcon))),n()("div",{},void 0,vd(a.modalIcon)),n()(Ee.Z,{style:a.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.title",defaultMessage:"Claim workspace"}),n()(Ud.Z,{href:(0,Y.UY)("guides.domainManagement")},void 0,n()(Rt.Z,{icon:zs.m}))),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:a.description},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.byline",defaultMessage:"You’re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. You’ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:i?i.name:"the workspace below"}})),n()("div",{style:a.workspaceContainer},void 0,i?n()(Pd,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):null,n()("div",{style:a.checkContainer},void 0,(0,Vd.k)(a.check))),n()(He.Z,{isLarge:!0,style:a.primaryButton,onClick:()=>{i&&Z.Xb(i)}},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.reviewAndPay",defaultMessage:"Review and pay"})),n()(Ge.Z,{style:a.secondaryButton,onClick:t},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.cancel",defaultMessage:"Cancel"})))})};var Gd=i(84939);const qd=(0,v.defineMessages)({emailPlaceholder:{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.placeholder",defaultMessage:"it@example.com"}}),jd=e=>{let{onDismiss:t,spaceQueuedForDeletion:i,currentSpaceId:a}=e;window.__c={n:"SpaceDeletionConfirmationModal"};const[o,s]=(0,r.useState)({email:void 0,didError:!1}),[l,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),{setSpaceRequest:m}=(0,r.useContext)(Us),p=(0,Fe.yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],height:24,width:24},title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:f.Z.fontWeight.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},checkboxContainer:{display:"inline-flex",marginTop:8,alignItems:"center"},checkbox:{color:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[200],marginRight:8},primaryButton:{width:"100%",marginTop:32,background:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],justifyContent:"center",fontWeight:f.Z.fontWeight.medium,color:tn.ZP.white},primaryButtonHovered:{background:"dark"===e.mode?(0,Gd._j)(e.accentColors.red[700],.3):(0,Gd._j)(e.accentColors.red[500],.3)},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:f.Z.fontWeight.medium,color:e.lightTextColor},checkboxCaption:{color:e.mediumTextColor,textAlign:"center",fontSize:12},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),g=(0,xe.O7)(),h=(0,r.useCallback)((()=>{s({email:void 0,didError:!1}),d(!1),u(!1),t()}),[t]),y=(0,r.useCallback)((e=>{s({didError:!1,email:e.target.value})}),[]),S=(0,r.useCallback)((()=>d((e=>!e))),[]),w=(0,r.useCallback)((async()=>{const e=(0,Ld.H3)(o.email);if(!(0,Ld.oH)(e))return void s({...o,didError:!0});if(!i)return;u(!0);const t=await I.deleteSpaceForDomain(g,{requestingSpaceId:a,targetSpaceId:i.id,contactEmail:e});if("failed"===t.type)u(!1),M.showErrorMessage(t.error.message);else{const a=t.data.spaceDeletion;m(i.id,a),b.QFO(g,{contactEmail:e,currentOwners:i.admins.map((e=>e.id)),targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain,targetSubscriptionTier:i.subscriptionTier}),h(),r=i.name,Qs.oV({label:n()(v.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.toast",defaultMessage:"Successfully deleted “{spaceName}“",values:{spaceName:r}})})}var r}),[h,o,a,g,m,i]),C=Boolean(i);return n()(Zs.Z,{open:C,innerStyle:p.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:h,render:()=>r.createElement(r.Fragment,null,n()("div",{style:p.closeIconContainer},void 0,n()(Ge.Z,{isSmall:!0,onClick:h,ignoreLocalHoverState:!0},void 0,(0,Nd.D)(p.closeIcon))),n()("div",{},void 0,(0,Ys.y)(p.modalIcon)),n()(Ee.Z,{style:p.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.title",defaultMessage:"Delete workspace"}),n()(Ud.Z,{href:(0,Y.UY)("guides.domainManagement")},void 0,n()(Rt.Z,{icon:zs.m}))),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:p.description},void 0,i?n()(v.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.byline",defaultMessage:"You’re about to permanently delete {currentWorkspaceName} and all of its contents. The workspace owner will be notified.",values:{currentWorkspaceName:i.name}}):void 0),n()("div",{style:p.workspaceContainer},void 0,i?n()(Pd,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):void 0,n()("div",{style:p.checkContainer},void 0,(0,Vd.k)(p.check))),n()(vs.Z,{size:0,style:p.dividerContainer,innerStyle:p.divider}),n()(Yd,{value:o.email,placeholder:q.default.formatMessage(qd.emailPlaceholder),onChange:y,labelMessage:n()(v.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.title",defaultMessage:"Contact email"}),helpMessage:n()(v.FormattedMessage,{id:"identityAndProvisioning.deleteWorkspaces.deletionModal.tooltipExplanation",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:o.didError?n()(v.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.error",defaultMessage:"Invalid email address"}):void 0}),n()(Ge.Z,{disabled:!l||!o.email||c,disabledFeedback:!0,isLarge:!0,style:p.primaryButton,hoveredStyle:p.primaryButtonHovered,onClick:w},void 0,c?n()(Ue.Z,{}):n()(v.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.deleteButton",defaultMessage:"Delete workspace"})),n()("div",{style:p.checkboxContainer},void 0,n()(at.Z,{style:p.checkbox,size:14,checked:l,onClick:S}),n()(Ee.Z,{isSmall:!0,style:p.checkboxCaption},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.checkboxLabel",defaultMessage:"I'm sure I want to delete this workspace"}))),n()(Ge.Z,{style:p.secondaryButton,onClick:h},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.cancel",defaultMessage:"Cancel"})))})};function Yd(e){window.__c={n:"EmailInput"};const t=(0,Fe.yK)((e=>({emailInputTitle:{fontWeight:f.Z.fontWeight.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},emailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},inputCaptionError:{color:e.errorText,marginTop:8,fontSize:13},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16}})),[]);return n()("div",{style:t.emailContainer},void 0,n()(Ee.Z,{style:t.emailInputTitle},void 0,e.labelMessage,e.helpMessage&&n()(Nt.Z,{renderTooltip:()=>e.helpMessage,render:e=>r.createElement("span",e,(0,zs.m)(t.helpIcon))})),n()(Qi.Z,{value:e.value,placeholder:e.placeholder,onChange:e.onChange}),e.errorMessage&&n()(Ee.Z,{isSmall:!0,style:t.inputCaptionError},void 0,e.errorMessage))}const $d=e=>{let{onDismiss:t,onAccept:i,spaceQueued:a,descriptionMessage:o,divider:s,modalIcon:l,title:d,acceptMessage:c,isLoading:u}=e;window.__c={n:"ClaimableSpaceConfirmationModal"};const m=(0,Fe.yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{height:24,width:24,fill:e.mediumIconColor},title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:f.Z.fontWeight.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32,justifyContent:"center",fontWeight:f.Z.fontWeight.medium},secondaryButton:{margin:"8px auto 0",width:"100%",justifyContent:"center",fontWeight:f.Z.fontWeight.medium,color:e.lightTextColor},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),p=Boolean(a);return n()(Zs.Z,{open:p,innerStyle:m.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>r.createElement(r.Fragment,null,n()("div",{style:m.closeIconContainer},void 0,n()(Ge.Z,{isSmall:!0,onClick:t,ignoreLocalHoverState:!0},void 0,(0,Nd.D)(m.closeIcon))),l&&n()("div",{},void 0,l(m.modalIcon)),n()(Ee.Z,{style:m.title},void 0,d,n()(Ud.Z,{href:(0,Y.UY)("guides.domainManagement")},void 0,n()(Rt.Z,{icon:zs.m}))),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:m.description},void 0,o),n()("div",{style:m.workspaceContainer},void 0,a?n()(Pd,{id:a.id,name:a.name,icon:a.icon,subscriptionTier:a.subscriptionTier,memberCount:a.memberCount}):void 0,n()("div",{style:m.checkContainer},void 0,(0,Vd.k)(m.check))),s&&n()(vs.Z,{size:0,style:m.dividerContainer,innerStyle:m.divider}),n()(He.Z,{isLarge:!0,style:m.primaryButton,onClick:i,disabled:u},void 0,u?n()(Ue.Z,{}):c),n()(Ge.Z,{style:m.secondaryButton,onClick:t},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.claimableSpaceConfirmationModal.cancel",defaultMessage:"Cancel"})))})};const Qd=e=>{let{onDismiss:t,spaceQueuedForRecovery:i,currentSpaceId:a}=e;window.__c={n:"SpaceRecoveryConfirmationModal"};const{setSpaceRequest:o}=(0,r.useContext)(Us),s=(0,xe.O7)(),[l,d]=(0,r.useState)(!1),c=(0,r.useCallback)((()=>{d(!1),t()}),[t]),u=(0,r.useCallback)((async()=>{if(!a||!i)return;d(!0);const e=await I.cancelSpaceDeletionForDomain(s,{requestingSpaceId:a,targetSpaceId:i.id});if("failed"===e.type)return d(!1),void M.showErrorMessage(e.error.message);var t;o(i.id,void 0),b.JvT(s,{targetSpaceId:i.id,verifiedDomain:i.creatorEmailDomain}),c(),t=i.name,Qs.oV({label:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.table.recoverSpace.toast",defaultMessage:"Successfully recovered “{spaceName}“",values:{spaceName:t}})})}),[o,a,s,i,c]);return n()($d,{onDismiss:c,onAccept:u,spaceQueued:i,modalIcon:js.u,title:n()(v.FormattedMessage,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.title",defaultMessage:"Recover workspace"}),descriptionMessage:i?n()(v.FormattedMessage,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.byline",defaultMessage:"Restore workspace content and the workspace owner's access.",values:{currentWorkspaceName:i.name}}):void 0,acceptMessage:n()(v.FormattedMessage,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.deleteButton",defaultMessage:"Recover"}),isLoading:l,divider:!1})};let Jd=!1;function Xd(e){let{spaceStore:t}=e;window.__c={n:"WorkspacesPage"};const{claimableSpaces:i,domainVerifications:a,loadingSpaces:o,errorClaimableSpaces:s,errorVerifications:l,navigateTo:d,removeClaimableSpace:c,loadMoreClaimableSpaces:u,tab:m,setSelectedTab:p,verifiedDomains:g}=(0,r.useContext)(Us),y=(0,xe.O7)(),S=(0,Ze.VK)((()=>!Sd.Z.state.open&&Boolean(Sd.Z.state.succeeded)),[]),[b,w]=(0,r.useState)(),[C,_]=(0,r.useState)(),[k,T]=(0,r.useState)(),[I,P]=(0,r.useState)(),x=(0,Ze.VK)((()=>$.Q6(Te.default.state.data)),[]);function Z(){w(void 0),_(void 0),T(void 0),P(void 0)}(0,r.useEffect)((()=>{S&&b&&(c(b.id),w(void 0),Sd.Z.reset())}),[S,b,c,w]);const F=(0,Fe.yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:f.Z.fontWeight.semibold,fontSize:17},byline:{fontSize:14,fontWeight:f.Z.fontWeight.regular,color:e.mediumTextColor,marginRight:"auto",paddingRight:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"}})),[]);if(s)return M.showErrorMessage(s.message),null;if(l)return M.showErrorMessage(l.message),null;const A=i.filter((e=>gd(e.spaceRequest,e.memberCount))),E=i.filter((e=>!gd(e.spaceRequest,e.memberCount))),B=[{id:"external-transfer",getIcon:e=>(0,fd.Z)({...e,height:14,width:14}),name:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransfer",defaultMessage:"Require account change"}),caption:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransferCaption",defaultMessage:"Owner will be prompted to change workspace ownership to a personal account."}),onAction:e=>_(e)},{id:"space-deletion",getIcon:e=>(0,Ys.y)({...e,height:14,width:14}),name:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace",defaultMessage:"Delete workspace"}),caption:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpaceCaption",defaultMessage:"Owner will lose access to the workspace immediately."}),onAction:e=>T(e),getDisabledState:e=>{const{isEligible:t}=ec(a,e.creatorEmailDomain);return!t||e.isDelinquent||e.isPendingBilling||!(0,h.QM)(e.subscriptionTier)},getTooltip:e=>{const t=ec(a,e.creatorEmailDomain);return t.isEligible?!(0,h.QM)(e.subscriptionTier)||e.isDelinquent||e.isPendingBilling?n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for deletion."}):void 0:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:n()("br",{})}})}},{id:"recover-space",getIcon:()=>{},name:n()(v.FormattedMessage,{id:"identityAndProvisioning.claimWorkspaces.actions.recoverSpace",defaultMessage:"Recover"}),caption:void 0,onAction:e=>P(e)}],R=[{id:"claim-and-upgrade",getIcon:e=>vd({...e,height:14,width:14}),name:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgrade",defaultMessage:"Claim and upgrade"}),caption:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgradeCaption",defaultMessage:"Take ownership of the workspace and upgrade it to an Enterprise plan"}),onAction:e=>w(e),getDisabledState:e=>{const{isEligible:t}=ec(a,e.creatorEmailDomain);return!t||e.isDelinquent||e.isPendingBilling},getTooltip:e=>{const t=ec(a,e.creatorEmailDomain);return e.isDelinquent||e.isPendingBilling?n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for claiming."}):t.isEligible?void 0:n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.actions.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:n()("br",{})}})}}];return n()(Be.Z,{},void 0,n()(ys.Z,{style:F.link,onClick:()=>d(Ls)},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.breadcrumb",defaultMessage:"← Identity & Provisioning"})),n()(Re.Z,{large:!0,style:F.title},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.title",defaultMessage:"Manage workspaces"})),n()(bd.X2,{},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:F.byline},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.byline",defaultMessage:"Claim verified-domain workspaces to your Enterprise plan or require Owners to use an external domain."})),n()(Le.Z,{isLarge:!0,onClick:()=>{De.g({environment:y,data:{spaceId:t.id,emailDomains:g}})}},void 0,n()(v.FormattedMessage,{id:"identityProvisioningSettings.exportClaimableWorkspaces.button",defaultMessage:"Export to CSV"}))),n()(bs.Z,{tabs:[n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.singleSpaces",defaultMessage:"Single-member"},"single"),n()(v.FormattedMessage,{id:"identityProvisioningSettings.claimWorkspaces.multiSpaces",defaultMessage:"Multi-member"},"multi")],selectedIndex:m,onChange:e=>p(e),style:F.tabBarMenu}),n()(zd,{onDismiss:Z,spaceQueuedForTransfer:C,currentSpaceId:t.id}),m===Vs.Single?n()(Dd,{claimableSpaces:A,spaceActions:B,loadMoreClaimableSpaces:u,loading:o},"single"):n()(Dd,{claimableSpaces:E,spaceActions:R,loadMoreClaimableSpaces:u,loading:o},"multi"),x?n()(Kd,{onDismiss:Z,spaceQueuedForClaiming:b,requestingSpaceId:t.id}):n()(Hd,{onDismiss:Z,spaceQueuedForClaiming:b}),n()(jd,{onDismiss:Z,spaceQueuedForDeletion:k,currentSpaceId:t.id}),n()(Qd,{onDismiss:Z,spaceQueuedForRecovery:I,currentSpaceId:t.id}))}function ec(e,t){if(Jd)return{isEligible:!0};const i=e.find((e=>{let{domain:i}=e;return t===i}));if(!i||!i.verified_at)return{isEligible:!0};const a=(Date.now()-i.verified_at)/yd.A0;return a>=14?{isEligible:!0}:{isEligible:!1,daysUntilEligible:Math.ceil(14-a)}}function tc(e){let{userStore:t,spaceStore:i,samlConfigStore:a,domainSettingsStore:o}=e;window.__c={n:"PageRouter"};const{page:s}=(0,r.useContext)(Us),l=(0,Ze.VK)((()=>T.default.checkGate("enable_managed_users_dashboard")),[]);switch(s){case Ls:return n()(pd,{userStore:t,spaceStore:i,samlConfigStore:a,domainSettingsStore:o});case Ns:return n()(Xd,{spaceStore:i});case Os:return l?n()(qr,{spaceStore:i,samlConfigStore:a}):n()(pd,{userStore:t,spaceStore:i,samlConfigStore:a,domainSettingsStore:o})}}["local","development","staging"].includes("production")&&(0,hd.exposeDebugValue)("bypassDomainVerificationWaitingPeriod",(function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Jd=e}));const ic=function(e){let{userStore:t,spaceStore:i,samlConfigStore:a,domainSettingsStore:o}=e;return n()(Ws,{spaceStore:i,samlConfigStore:a,domainSettingsStore:o},void 0,n()(tc,{userStore:t,spaceStore:i,samlConfigStore:a,domainSettingsStore:o}))};var ac=i(22756),nc=i(1800),oc=(i(40902),i(99036),i(41432),i(42613),i(45433),i(20302),i(89789),i(74446));i(6287),i(18844),i(70279),i(91644);i(58129),i(70921),i(30842),i(39050),i(54368),i(88179),i(80926),i(98963),i(7470),i(60014),i(13493),i(75908),i(6359),i(7678),i(73409),i(60897),i(33709),i(44312),i(4986),i(52719),i(58912),i(73387),i(36077),i(97715),i(32161),i(82447),i(9713),i(57398),i(49953),i(14710),i(9508),i(62643),i(57883),i(66726),i(30754),i(6946),i(25753),i(84683),i(38429),i(89488),i(65311),i(16427),i(70017),i(89470),i(49126),i(4137),i(80396),i(24836),i(86135),i(78929),i(84323),i(83200),i(67627),i(65963),i(14130),i(34406),i(42314),i(16663),i(19221),i(93646),i(63787),i(38952),i(40837),i(96740),i(63921),i(75990),i(57829),i(63188),i(56877),i(76413),i(47238),i(77858),i(37202),i(26195),i(60113),i(14718),i(14327),i(53412),i(65836),i(5505),i(66295),i(10354),i(19716),i(98897),i(46769),i(66079),i(58161),i(28182),i(35794),i(11045);i(38297),i(606);const sc=Ca.Ak.create();Ca.PF.create();Date.now();oc.mF.fromRecordMap(sc),oc.zF.fromRecordMap(sc);const rc=wa.om.fromRecordMap(sc);wa.s8.fromRecordMap(sc);var lc=i(41311),dc=i(30397),cc=i(33907),uc=i(91315),mc=i(91),pc=i(29551),gc=i(40235);const hc=function(){window.__c={n:"AsanaImportStepConfirmTab"};const e=(0,Ze.VK)((()=>ac.Z.state),[]);return e.result?r.createElement(r.Fragment,null,n()(Ee.Z,{isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})),n()("div",{style:{marginTop:32}},void 0,e.result.map((e=>n()(fc,{importStatus:e},e.asanaTeamId))))):r.createElement(r.Fragment,null)};function fc(e){let{importStatus:t}=e;window.__c={n:"CollapsibleAsanaProjectsTable"};const i=(0,Fe.Fg)(),[a,o]=(0,r.useState)(!1),s=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),l=(0,Ze.VK)((()=>ac.Z.state.teamsAndProjects),[]),c=(0,Ze.VK)((()=>B.default.state.currentSpaceViewStore),[]),u=(0,Ze.VK)((()=>{if(!c)return;const e=c.getTeamsStores().map((e=>({id:e.id,name:e.getName(),icon:n()(Yt.p,{disabled:!0,store:e})})));return s?(e||[]).concat({id:c.id,name:"Private",icon:n()("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:tn.FN.light.gray[75]}},void 0,(0,d.Q)({color:i.mediumIconColor,width:12.5,height:12.5}))}):e}),[c,s,i]),{notionTeamspaceName:m,notionTeamspaceIcon:p}=(0,r.useMemo)((()=>{const e=null==u?void 0:u.find((e=>e.id===t.notionTeamSpaceId));return e?{notionTeamspaceName:e.name,notionTeamspaceIcon:e.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[u,t]),g=(0,r.useMemo)((()=>{const e=l.find((e=>e.gid===t.asanaTeamId));return null==e?void 0:e.name}),[l,t]);return n()(pc.gq,{style:{marginTop:16}},void 0,n()(Rt.Z,{ariaLabel:"collapse toggle",icon:mc.L,onClick:()=>o((e=>!e)),style:{transform:a?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:4},iconStyle:{width:8,height:8}}),n()(gc.Z,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:n()(pc.gq,{alignItems:"center",gap:2},void 0,n()(Ee.Z,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"}},void 0,g)),style:{width:300}},{key:"importedInto",header:n()(pc.gq,{gap:4},void 0,n()(pc.gq,{style:{alignItems:"center",gap:4}},void 0,n()(Ee.Z,{isSmall:!0},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})),(0,cc.n)({width:12})),n()(pc.gq,{style:{alignItems:"center",gap:4}},void 0,p,m)),style:{width:300}}],rows:function(e){let{collapsed:i}=e;return i?[]:t.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[n()(pc.gq,{gap:8,alignItems:"center"},e.projectId,(0,uc.r)({width:12,color:tn.FN.dark.green[600]}),n()(Ee.Z,{isMultiline:!0,style:{wordWrap:"break-word",width:300}},void 0,e.name)),n()(Ee.Z,{isSmall:!0},`${e.projectId}-tasks-count`,e.numberOfTasks,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"}))]})))}({collapsed:a})}))}var vc=i(41892),yc=i(53465),Sc=i(64878);const bc=function(){var e;window.__c={n:"AsanaImportStepImportingDataFailedTab"};const t=(0,Ze.VK)((()=>ac.Z.state),[]),i=(0,Fe.yK)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor},closeIconStyle:{width:16,height:16,fill:e.redBadgeBackground},lightText:{color:e.lightTextColor}})),[]);return n()("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"}},void 0,n()(pc.gq,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"}},void 0,n()("img",{style:{width:32,height:32,marginRight:8},src:vc.Z.images.import.asanaPng}),(0,Sc.h)(i.iconStyle),(0,Sc.h)(i.iconStyle),(0,Sc.h)(i.iconStyle),(0,yc.X)(i.closeIconStyle),(0,Sc.h)(i.iconStyle),(0,Sc.h)(i.iconStyle),(0,Sc.h)(i.iconStyle),n()("img",{style:{width:32,height:32,marginLeft:8},src:vc.Z.images.notionLogoPng})),n()(Ee.Z,{style:i.lightText},void 0,n()(v.FormattedMessage,{id:"asanaImport.importingData.failed.problemsOccured",defaultMessage:"Some problems occurred while importing data from your Asana workspace."})),n()(Ee.Z,{style:i.lightText},void 0,n()(v.FormattedMessage,{id:"asanaImport.importingData.failed.viewLoggerPage",defaultMessage:"Please try again or read the {link} to troubleshoot.",values:{link:n()("a",{style:{color:tn.ZP.black,cursor:"pointer"},href:`/${null===(e=t.loggerPageId)||void 0===e?void 0:e.replaceAll("-","")}`},void 0,n()(v.FormattedMessage,{id:"asanaImport.importingData.failed.linkText",defaultMessage:"import logs"}))}})))};const Mc=function(e){window.__c={n:"LoaderWithDots"};const{dotCount:t=6,speed:i=800}=e,[a,o]=(0,r.useState)(1),s=(0,Fe.yK)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor,opacity:.5},iconStyleBold:{width:6,height:6,fill:e.lightIconColor}})),[]);return(0,r.useEffect)((()=>{const e=setInterval((()=>o((e=>e<t?e+1:1))),i);return()=>clearInterval(e)}),[t,i]),n()(pc.gq,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"}},void 0,Array.from({length:t},((e,t)=>t+1)).map((e=>n()("div",{},e,(0,Sc.h)(a===e?s.iconStyleBold:s.iconStyle)))))};const wc=function(){window.__c={n:"AsanaImportStepImportingDataTab"};const e=(0,Fe.yK)((e=>({iconStyle:{width:6,height:6,fill:e.lightIconColor},iconStyleBold:{width:8,height:8,fill:e.mediumIconColor},lightText:{color:e.lightTextColor}})),[]);return n()("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"}},void 0,n()(pc.gq,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"}},void 0,n()("img",{style:{width:32,height:32,marginRight:8},src:vc.Z.images.import.asanaPng}),n()(Mc,{}),n()("img",{style:{width:32,height:32,marginLeft:8},src:vc.Z.images.notionLogoPng})),n()(pc.gq,{},void 0,n()(Ee.Z,{style:e.lightText},void 0,n()(v.FormattedMessage,{id:"asanaImport.importingData.feelFreeToLeave",defaultMessage:"Data is being imported. Feel free to leave this window."}))),n()(pc.gq,{},void 0,n()(Ee.Z,{style:e.lightText},void 0,n()(v.FormattedMessage,{id:"asanaImport.importingData.sendEmail",defaultMessage:"We will send you an email when the import is complete or if any problems occur."}))))};var Cc=i(36591),_c=i(75071),kc=i(35817),Tc=i(11066),Ic=i(93963);const Pc=function(){window.__c={n:"AsanaImportStepSelectDataTab"};const e=(0,xe.O7)(),t=(0,v.useIntl)(),i=(0,Ze.VK)((()=>ac.Z.getState()),[]),{workspaces:a,selectedWorkspace:o,teamsAndProjects:s}=i;return(0,r.useEffect)((()=>{o&&lc.y2({selectedWorkspace:o,environment:e}).catch((()=>{}))}),[o,e]),r.createElement(r.Fragment,null,n()(Ee.Z,{isSmall:!0,style:{paddingTop:4,paddingBottom:4}},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})),n()(Zc,{onSelectOption:e=>{ac.Z.setState({...i,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:a.map((e=>({key:e.gid,label:e.name}))),currentOption:i.selectedWorkspace,placeHolder:t.formatMessage({id:"asanaImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"})}),i.selectedWorkspace?n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.semibold,marginTop:18}},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})):r.createElement(r.Fragment,null),i.isLoadingProjects?n()(pc.gq,{style:{gap:8,marginTop:32,alignItems:"center"}},void 0,n()(Ue.Z,{style:{fontSize:12}}),n()(Ee.Z,{isSmall:!0,style:{color:tn.FN.light.gray[400]}},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."}))):s.filter((e=>0!==e.projects.length)).map((e=>n()(xc,{team:e,selectedWorkspace:o},`${e.gid}-table`))))};function xc(e){var t;let{team:i,selectedWorkspace:a}=e;window.__c={n:"CollapsibleAsanaProjectsTable"};const o=(0,xe.O7)(),s=(0,v.useIntl)(),l=(0,Fe.Fg)(),[c,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(),y=(0,Ze.VK)((()=>ac.Z.getState()),[]),S=(0,Ze.VK)((()=>B.default.state.currentSpaceViewStore),[]),b=(0,Ze.VK)((()=>{const e=null==S?void 0:S.getTeamsStores();return null==e?void 0:e.map((e=>({id:e.id,name:e.getName(),icon:n()(Yt.p,{disabled:!0,store:e})})))}),[S]);(0,r.useEffect)((()=>{if(!b||!S)return;if(!y.selectedProjectsAndTeamspaces[i.gid]){h("private"),lc.B3({teamId:i.gid,spaceId:null==S?void 0:S.id});for(const a of b){var e,t;if((null===(e=a.name)||void 0===e?void 0:e.toLowerCase())===(null===(t=i.name)||void 0===t?void 0:t.toLowerCase())){h(a.id),lc.B3({teamId:i.gid,spaceId:a.id});break}}}}),[b,i,S,y.selectedProjectsAndTeamspaces]);const M=(0,r.useCallback)((e=>{lc.B3({teamId:i.gid,spaceId:e}),h(e)}),[i.gid]),w=(0,r.useCallback)((e=>{if("create"===e)return void kc.lo("asana_importer",{onClose:M});let t;if("private"===e){if(null==S||!S.id)return;t=S.id}else t=e;lc.B3({teamId:i.gid,spaceId:t}),h(e)}),[null==S?void 0:S.id,i.gid,M]),{importCompletedTasks:C}=y,_=[{key:"private",searchTerm:"private",label:n()(pc.gq,{alignItems:"center",style:{gap:8}},void 0,n()("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:tn.FN.light.gray[75]}},void 0,(0,d.Q)({color:l.mediumIconColor,width:12.5,height:12.5})),n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.regular}},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"})))}];return b&&_.push(...b.map((e=>({key:e.id,searchTerm:e.name,label:n()(pc.gq,{alignItems:"center",style:{gap:8}},void 0,e.icon,e.name)})))),_.push({key:"create",searchTerm:"New teamspace",label:n()(pc.gq,{alignItems:"center",style:{gap:4}},void 0,(0,_c.f)({color:l.mediumIconColor,width:16,height:16}),n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"})))}),n()(pc.gq,{style:{marginLeft:-18}},void 0,n()(Rt.Z,{ariaLabel:"collapse toggle",icon:mc.L,onClick:()=>u((e=>!e)),style:{transform:c?"rotate(90deg)":"rotate(180deg)",marginRight:8,marginTop:24,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:10,height:10}}),n()(gc.Z,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:n()(pc.gq,{alignItems:"center",gap:2},void 0,n()(Fc,{onSelectOption:e=>{var t;ac.Z.setState({...y,selectedProjectsAndTeamspaces:{...y.selectedProjectsAndTeamspaces,[i.gid]:{notionTeamspaceId:null===(t=y.selectedProjectsAndTeamspaces[i.gid])||void 0===t?void 0:t.notionTeamspaceId,projects:e}}})},options:[{key:"in_complete",label:"Exclude completed projects"},{key:"all",label:"Select all projects"}],currentOption:(e=>{const t=null===(e=y.selectedProjectsAndTeamspaces[i.gid])||void 0===e?void 0:e.projects;return"string"==typeof t?t:null!=t&&t.length?"specific":void 0})()}),n()(Ee.Z,{style:{width:280,textOverflow:"ellipsis"}},void 0,i.name)),style:{width:300}},{key:"importInto",header:n()(pc.gq,{style:{alignItems:"center"}},void 0,n()("div",{},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.importInto",defaultMessage:"Import into"})),n()("div",{style:{marginRight:16,marginLeft:8}},void 0,(0,cc.n)({width:12})),n()(pc.gq,{style:{alignItems:"center",gap:8}},void 0,n()("img",{src:vc.Z.emails.notionLogoBlackSmallPng,height:18}),n()(Zc,{options:_,onSelectOption:w,currentOption:null===(t=_.find((e=>e.key===g)))||void 0===t?void 0:t.key,narrow:!0,allowSearch:!0,placeHolder:s.formatMessage({id:"asanaImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"})}))),style:{width:"50%"}}],rows:function(e){let{collapsed:t}=e;if(t)return[];const s=i.projects.map((e=>({key:e.gid,columns:[n()(pc.gq,{alignItems:"center",gap:6,style:{marginLeft:20}},`${e.gid}-container`,n()(at.Z,{style:{marginRight:2},onClick:()=>{const t={...y.selectedProjectsAndTeamspaces[i.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:a,projects:n}=t;let o;o="all"===n||"in_complete"===n?[]:n.includes(e.gid)?n.filter((t=>t!==e.gid)):n.concat(e.gid),ac.Z.setState({...y,selectedProjectsAndTeamspaces:{...y.selectedProjectsAndTeamspaces,[i.gid]:{notionTeamspaceId:a,projects:o}}})},checked:(()=>{const t={...y.selectedProjectsAndTeamspaces[i.gid]||{projects:[],notionTeamspaceId:void 0}};return"all"===t.projects||"in_complete"===t.projects&&!1===e.completed||t.projects.includes(e.gid)})(),size:14,checkSize:8}),n()(Ic.z,{color:e.color,size:6}),n()("div",{style:{width:240,wordWrap:"break-word"}},void 0,e.completed?n()(Ee.Z,{isMultiline:!0,style:{color:l.lightTextColor}},void 0,e.name,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.completedHelperText",defaultMessage:" (Completed)"})):n()(Ee.Z,{isMultiline:!0},void 0,e.name))),n()(Ee.Z,{isSmall:!0},`${i.gid}-tasks-count`,C?e.task_counts.num_tasks:e.task_counts.num_incomplete_tasks,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"}))]})));return i.nextPage&&s.push({key:"loadMore",columns:[n()(Tc.Z,{disabled:m,style:{marginLeft:20,color:tn.FN.light.gray[400]},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},onClick:async()=>{if(!a)return;p(!0);const e=await I.getTeamsAndProjectsInAsanaWorkspace(o,{workspaceId:a,teamId:i.gid,size:5,nextPage:i.nextPage}),{teamsAndProjects:t}={...y},n=t.find((e=>e.gid===i.gid));if(n){if("success"===e.type){const a=e.data.find((e=>e.gid===i.gid));if(!a)return;n.projects.push(...a.projects),n.nextPage=a.nextPage,ac.Z.setState({...y,teamsAndProjects:t,loadMoreClicks:y.loadMoreClicks+1})}p(!1)}}},`${i.gid}-loadmore`,m?n()(pc.gq,{alignItems:"center",gap:8},void 0,n()(Ue.Z,{style:{fontSize:12}}),n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.loadingMoreProjects",defaultMessage:"Loading more projects..."})):n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.loadMoreProjects",defaultMessage:"Load more projects..."}))]}),s}({collapsed:c})}))}function Zc(e){var t;window.__c={n:"Dropdown"};const{onSelectOption:i,options:a,currentOption:o,placeHolder:l,narrow:d,allowSearch:c}=e,u=(0,v.useIntl)(),[m,p]=(0,r.useState)(""),g=null===(t=a.find((e=>{let{key:t}=e;return t===o})))||void 0===t?void 0:t.label,h=(0,Fe.yK)((e=>({icon:{width:12,height:12,marginLeft:4,fill:e.lightIconColor}})),[]);return n()(Bt.ZP,{popupType:Bt.Z4.Popup,placementToOrigin:Bt.pO.Bottom,renderOrigin:e=>r.createElement(Ge.Z,s()({},e,{style:{paddingTop:d?2:8,paddingBottom:d?2:8,paddingLeft:8,paddingRight:8,opacity:1,width:250,border:`1px solid ${tn.FN.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:o?void 0:tn.FN.light.gray[50],color:o?void 0:tn.FN.light.gray[300]},disabled:!1}),n()(Ee.Z,{style:{textOverflow:"ellipsis"}},void 0,g||l),(0,Ei.i)(h.icon)),render:e=>{const t={menuType:Xe.og.Popup,width:250,left:50},o=[{key:"asanaImport.dropdown.menuList",render:e=>r.createElement(rt.Z,e),items:(m.trim()?a.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase())})):a).map((t=>{let{key:a,label:o}=t;return{key:a,action:()=>{i(a),e.close()},render:e=>r.createElement(it.Z,s()({},e,{title:o,shouldWrapCaption:!0,right:g===o?n()("div",{style:{width:14}},void 0,(0,Cc.e)()):void 0}))}}))}];return r.createElement(r.Fragment,null,c?n()("input",{style:{width:"100%",borderRadius:0,backgroundColor:tn.FN.light.gray[200],paddingTop:2,paddingBottom:2,paddingLeft:8,paddingRight:8,opacity:1,border:`1px solid ${tn.FN.light.gray[100]}`,justifyContent:"space-between",background:tn.FN.light.gray[50],fontSize:f.Z.fontSize.UIRegular.desktop,textOverflow:"ellipses"},placeholder:u.formatMessage({id:"asanaImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"}),onChange:e=>p(e.target.value),value:m}):r.createElement(r.Fragment,null),r.createElement(nt.Z,t,n()(ot.Z,{type:ot.i.Vertical,sections:o,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})))}})}function Fc(e){var t;window.__c={n:"CheckboxDropdown"};const{onSelectOption:i,options:a,currentOption:o}=e,l=null===(t=a.find((e=>{let{key:t}=e;return t===o})))||void 0===t?void 0:t.label,d=(0,r.useMemo)((()=>void 0!==o&&"specific"!==o&&("all"===o||"partial")),[o]);return n()(Bt.ZP,{popupType:Bt.Z4.Popup,placementToOrigin:Bt.pO.Bottom,alignmentToOrigin:Bt.vR.Start,renderOrigin:e=>r.createElement(Ge.Z,s()({},e,{style:{padding:0,margin:0,marginRight:4,height:14},hoveredStyle:{}}),n()(at.Z,{checked:d,disabled:!0,size:14,checkSize:8})),render:e=>{const t={menuType:Xe.og.Popup,width:250,left:50},o=[{key:"asanaImport.checkboxDropdown.menuList",render:e=>r.createElement(rt.Z,e),items:a.map((t=>{let{key:a,label:o}=t;return{key:a,action:()=>{i(a),e.close()},render:e=>r.createElement(it.Z,s()({},e,{title:o,shouldWrapCaption:!0,right:l===o?n()("div",{style:{width:14}},void 0,(0,Cc.e)()):void 0}))}}))}];return r.createElement(nt.Z,t,n()(ot.Z,{type:ot.i.Vertical,sections:o,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}}))}})}const Ac=function(e){let{tab:t,fetchActiveImportTasks:i}=e;window.__c={n:"AsanaImportStepTab"};const a=(0,xe.O7)(),o=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),s=(0,Ze.VK)((()=>B.default.state.currentSpaceViewStore),[]),l=(0,Ze.VK)((()=>dc.Z.state.teams),[]),d=(0,Ze.VK)((()=>ac.Z.state),[]),c=(0,Ze.VK)((()=>ce.Z.state),[]).flowId||(0,p.ZP)(),{workspaces:u}=d,m=(0,r.useCallback)((()=>Object.values(d.selectedProjectsAndTeamspaces).some((e=>0!==e.projects.length))),[d.selectedProjectsAndTeamspaces]),g=(0,Fe.yK)((e=>({closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor}})),[]);return n()(Be.Z,{controlRow:(e=>"selectData"===e?n()("div",{style:{display:"flex",justifyContent:"space-between"}},void 0,n()(Le.Z,{style:{border:0},disabled:!u.length,onClick:()=>{i(),ac.Z.resetImport()}},void 0,n()(v.FormattedMessage,{id:"asanaImport.selectData.backButtonText",defaultMessage:"Back"})),n()(pc.gq,{alignItems:"center",gap:8},void 0,d.selectedWorkspace?r.createElement(r.Fragment,null,n()(Fr.Z,{on:d.importCompletedTasks,onClick:()=>ac.Z.setState({...d,importCompletedTasks:!d.importCompletedTasks})}),n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"importsTab.selectData.importCompletedTasks",defaultMessage:"Import completed tasks"}))):r.createElement(r.Fragment,null),n()(He.Z,{style:{marginLeft:16},disabled:!m()||d.templateCreationInProgress,onClick:()=>{o&&s&&lc.T_({environment:a,currentSpaceViewStore:s,spaceStore:o,teamsStores:l,flowId:c}).catch((()=>{}))}},void 0,d.templateCreationInProgress?n()(pc.gq,{alignItems:"center",gap:2},void 0,n()(Ue.Z,{isWhite:!0}),n()(v.FormattedMessage,{id:"importsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"})):n()(v.FormattedMessage,{id:"importsTab.selectData.nextButtonText",defaultMessage:"Next"})))):"importingData"===e?n()("div",{style:{display:"flex",justifyContent:"right"}},void 0,n()(Le.Z,{disabled:!u.length,onClick:()=>{i(),ac.Z.resetImport()}},void 0,n()(v.FormattedMessage,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"}))):"confirm"===e?n()("div",{style:{display:"flex",justifyContent:"right"}},void 0,n()(He.Z,{onClick:()=>{d.loggerPageId&&C.navigate({url:(0,nc.Z)({pageId:d.loggerPageId,pageModel:rc({table:_a.iU,id:d.loggerPageId}),baseUrl:Ye.default.domainBaseUrl,pageVisitSource:Ct.tY.Import}),environment:a}),ac.Z.resetImport(),ke.Z.reset()}},void 0,n()(v.FormattedMessage,{id:"importsTab.confirm.doneText",defaultMessage:"Done"}))):"failure"===e?n()("div",{style:{display:"flex",justifyContent:"right"}},void 0,n()(Le.Z,{disabled:!u.length,onClick:()=>{i(),ac.Z.resetImport()}},void 0,n()(v.FormattedMessage,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"}))):void 0)(t),controlRowPaddingTopBottom:20},void 0,n()("div",{style:{position:"absolute",top:12,right:12}},void 0,n()(Tc.Z,{onClick:()=>{i(),ac.Z.resetImport()},style:g.closeButton,hoveredStyle:g.closeButtonHover},void 0,(0,Nd.D)(g.closeButtonIcon))),n()(Ee.Z,{style:{paddingBottom:8,fontSize:18,fontWeight:f.Z.fontWeight.medium,width:"100%"}},void 0,function(e){switch(e){case"selectData":return n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,n()(v.FormattedMessage,{id:"asanaImport.importsTab.selectData.tabTitle",defaultMessage:"Select Asana workspace"}));default:return r.createElement(r.Fragment,null)}}(t)),(e=>"selectData"===e?n()(Pc,{}):"importingData"===e?n()(wc,{}):"confirm"===e?n()(hc,{}):"failure"===e?n()(bc,{}):void 0)(t))};const Ec=function(e){let{fetchActiveImportTasks:t}=e;window.__c={n:"AsanaImportModal"};const i=(0,Ze.VK)((()=>ac.Z.state),[]);return n()(Zs.Z,{open:i.isModalOpen,innerStyle:{width:800,height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:5,maxHeight:675},render:()=>n()(Ps.Z,{capture:!0,allowEsc:!0,render:()=>n()(xs.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!1,render:()=>(()=>{const{currentTab:e}=i;return n()(Ac,{fetchActiveImportTasks:t,tab:e})})()})}),onDismiss:()=>{ac.Z.resetImport()}})};var Bc=i(69507);const Rc=function(e){window.__c={n:"ImportsTab"};const t=(0,Ze.VK)((()=>B.default.state),[]),i=(0,Ze.VK)((()=>ac.Z.state),[]),{currentSpaceStore:a,mainEditorCurrentBlockStore:o,currentSpaceViewStore:s,currentUserSettingsStore:l}=t,d=(0,xe.O7)(),{device:c}=(0,xe.O7)(),[u,p]=(0,r.useState)([]),g=(0,r.useCallback)((async()=>{if(null==a||!a.id)return;const e=await I.getActiveImportTasks(d,{spaceId:a.id});"success"===e.type&&p(e.data)}),[a,d]);return(0,r.useEffect)((()=>{g().catch((()=>{}));const e=setInterval(g,6e4);return()=>clearInterval(e)}),[a,d,g]),(0,r.useEffect)((()=>{let e;const t=async i=>{const n=await I.getAsanaWorkspacesNames(d,{});if(i+=1,"success"===n.type)if(null!=n&&n.data.account)ac.Z.setState({...ac.Z.state,account:n.data.account,workspaces:n.data.workspaces,isLoadingAsanaWorkspaces:!1,isAccountLinkingInProgress:!1,currentTab:"selectData",isModalOpen:!0});else{if(i>a)return;e=setTimeout((()=>t(i)),2e3)}},a=180;if(i.isAccountLinkingInProgress){t(0).catch((()=>{}))}return()=>{clearTimeout(e)}}),[i.isAccountLinkingInProgress,d]),a&&s&&s&&l?r.createElement(r.Fragment,null,n()(Re.Z,{large:!c.isMobile||void 0,divider:c.isMobile?void 0:"full"},void 0,n()(v.FormattedMessage,{id:"importsTab.title",defaultMessage:"Import data"})),n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"importsTab.subtitle",defaultMessage:"Import data from other apps and files into Notion"})),n()(Ee.Z,{isSmall:!0},void 0,e.genericImporterEnabled?n()(v.FormattedMessage,{id:"importsTab.unsupportedImportsHelperTextForUniversalImport",defaultMessage:"If the app you’re using isn’t listed below, try the <boldtext>Universal import</boldtext> ",values:{boldtext:e=>n()("span",{style:{fontWeight:600}},void 0,e)}}):n()(v.FormattedMessage,{id:"importsTab.unsupportedImportsHelperText",defaultMessage:"If your data is located somewhere we don't support yet, you can try importing it via CSV file."})),n()("div",{style:{marginTop:16,display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gridAutoRows:"1fr",gap:"4px 16px",width:"100%"}},void 0,n()(Bc.Z,{pageStore:o,spaceStore:a,spaceViewStore:s,userSettingsStore:l,analyticsFrom:"modal",onComplete:e=>{C.navigateToBlock({environment:d,store:e,pageVisitSource:Ct.tY.Import}),ke.Z.reset()},readOnlyCreditButton:!1,isLoadingNewConnections:i.isFetchingAsanaAccount}),n()(Ec,{fetchActiveImportTasks:g})),n()("div",{style:{marginTop:32}},void 0,n()(Ee.Z,{isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"importsTab.activeImports.title",defaultMessage:"Active Imports"})),n()(gc.Z,{tableStyle:{borderTop:0},columns:[{key:"importTime",header:n()(v.FormattedMessage,{id:"importsTab.activeImports.importTime",defaultMessage:"Import time"})},{key:"importFrom",header:n()(v.FormattedMessage,{id:"importsTab.activeImports.importFrom",defaultMessage:"Import from"})},{key:"importStatus",header:n()(v.FormattedMessage,{id:"importsTab.activeImports.importStatus",defaultMessage:"Status"})}],rows:u.map((e=>({key:`table-${e.taskId}`,columns:[e.startedAt?`${(0,an.Yx)(e.startedAt,"long",q.default.getIntl().locale)} ${(0,an.Yx)(e.startedAt,"time",q.default.getIntl().locale)}`:"",(0,m.fl)(e.source),n()(Ti.Z,{isRound:!0,showRemoveButton:!1,value:n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"activeImports.status.inProgress",defaultMessage:"In progress"})),backgroundColor:tn.FN.light.blue[200],showColoredDot:"blue",format:bi.l.Small,isSingle:!0},`progress-${e.taskId}`)]})))}),u.length?r.createElement(r.Fragment,null):n()(Ee.Z,{isSmall:!0,style:{marginTop:16}},void 0,n()(v.FormattedMessage,{id:"importsTab.activeImportsTable.noActiveImports",defaultMessage:"There are no ongoing imports associated with your account."})))):r.createElement(r.Fragment,null)};var Dc=i(79092),Lc=i(54153),Nc=i(84908),Oc=i(11646),Vc=i(57222),Uc=i(65680),Wc=i(31194);class zc extends l.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:Zt.Z},this.handleSelectChange=e=>{const{label:t}=this.getItemLabelAndCaption(e);if(this.props.confirm){const i=()=>{this.props.onChange(e)};M.showDialog({showCancel:!0,keepFocus:!1,message:n()(v.FormattedMessage,{id:"languagePicker.changeLanguage.confirmationMessage",defaultMessage:"Are you sure you want to update the language to {language}?",values:{language:t}}),items:[{label:n()(v.FormattedMessage,{id:"languagePicker.changeLanguage.updateButton.label",defaultMessage:"Update"}),color:"red",onAccept:i}]})}else this.props.onChange(e)}}renderComponent(){const{device:e}=this.environment;if(e.isMobile)return;const t="ja-JP"===this.props.currentLocale&&T.default.checkGate("japan_full_launch");return n()(Bt.ZP,{popupType:Bt.Z4.Popup,buttonPopupStore:this.stores.buttonPopupStore,renderOrigin:e=>r.createElement(r.Fragment,null,r.createElement(Ge.Z,s()({style:{marginLeft:-8,paddingLeft:8,paddingRight:8}},e),this.props.pickerLabel?this.props.pickerLabel:this.getItemLabelAndCaption(this.props.currentLocale).label,(0,Uc.ay)(this.props.currentLocale)&&!t&&n()(qa.Z,{desktopStyle:{marginLeft:4}},void 0,n()(v.FormattedMessage,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})),(0,Ei.i)({width:10,marginLeft:4,fill:this.theme.lightIconColor}))),placementToOrigin:Wc.Iw.Bottom,alignmentToOrigin:Wc.lU.Start,render:e=>{let t;t=T.default.checkGate("polyglot")?[...Uc.tp,...Uc.is]:[...Uc.tp];const i=[{key:"languages",render:e=>r.createElement(rt.Z,s()({},e,{topBorder:0!==e.index})),items:t.map((t=>({key:t,render:e=>this.getItem(t,e.focused,e),action:()=>{this.handleSelect(t),e.close()}})))}],a={menuType:Xe.og.Popup,width:240};return r.createElement(nt.Z,s()({className:K.hKO},a),n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:i}))}})}renderItem(e){const t="ja-JP"===e.locale&&T.default.checkGate("japan_full_launch");return r.createElement(it.Z,s()({},e.props,{title:n()("div",{style:{display:"flex",alignItems:"center"}},void 0,n()("div",{style:{...e.style,marginRight:0}},void 0,e.label)),caption:e.caption&&n()("span",{style:{color:this.theme.mediumTextColor}},void 0,e.caption),shouldWrapCaption:!0,right:(0,Uc.ay)(e.locale)&&!t&&n()(qa.Z,{},void 0,n()(v.FormattedMessage,{id:"languagePicker.betaBadge",defaultMessage:"Beta"}))}))}handleSelect(e){this.props.currentLocale!==e&&this.handleSelectChange(e)}getItemLabelAndCaption(e){return(0,Vc.t)(this.props.intl)[e]}getItem(e,t,i){return this.renderItem({...this.getItemLabelAndCaption(e),focused:t,props:i,locale:e})}}zc.displayName="LanguagePicker";const Kc=(0,v.injectIntl)(zc);class Hc extends l.Z{renderComponent(){return n()("div",{style:this.getSettingsOptionStyle()},void 0,n()("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"}},void 0,n()("div",{style:{flex:1}},void 0,n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"languageRegionSettings.language.label",defaultMessage:"Language"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,n()(v.FormattedMessage,{id:"languageSettings.languageSwitcher.subtitle",defaultMessage:"Change the language used in the user interface."}))),n()(Kc,{confirm:!0,onChange:async e=>{b.A01(this.environment,{locale:e});const t=await I.setLocale(this.environment,{locale:e});"success"===t.type?(Lc.Z.set("preferredLocale",e),await Oc.transactionQueue.drain(),this.environment.device.isElectron?Nc.refreshAll({includeFocusedWindow:!0}):window.location.reload()):M.showError(t)},currentLocale:this.props.locale})))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}Hc.displayName="LanguageSettings";const Gc=Hc;var qc=i(32056);function jc(e){var t;return(null==e||null===(t=e.getSettingsStore())||void 0===t||null===(t=t.getKeyStore("regional_format_settings"))||void 0===t?void 0:t.getKeyStore("region").getValue())||"US"}function Yc(e,t){var i;const a=null==e||null===(i=e.getKeyStore("settings"))||void 0===i||null===(i=i.getKeyStore("regional_format_settings"))||void 0===i?void 0:i.getValue();return"full_date"===t?null!=a&&a.use_default_region_settings?$c(jc(e)):(null==a?void 0:a.full_date)||$c(jc(e)):"short_date"===t?null!=a&&a.use_default_region_settings?{type:"short"}:(null==a?void 0:a.short_date)||{type:"short"}:"number"===t?null!=a&&a.use_default_region_settings?"number":(null==a?void 0:a.number)||"number":"week_start_on"===t?null!=a&&a.use_default_region_settings?"sunday":(null==a?void 0:a.week_start_on)||"sunday":(0,A.t1)(t)}function $c(e){return"JP"===e?{type:"short"}:{type:"long"}}const Qc={full_date:(0,v.defineMessages)({full:{defaultMessage:"Full date",id:"regionalFormatSettings.customSettingOption.fullDate.full"},long:{defaultMessage:"Long",id:"regionalFormatSettings.customSettingOption.fullDate.long"},medium:{defaultMessage:"Medium",id:"regionalFormatSettings.customSettingOption.fullDate.medium"},short:{defaultMessage:"Short",id:"regionalFormatSettings.customSettingOption.fullDate.short"},iso:{defaultMessage:"ISO",id:"regionalFormatSettings.customSettingOption.fullDate.iso"},custom:{defaultMessage:"Custom",id:"regionalFormatSettings.customSettingOption.fullDate.custom"}}),short_date:(0,v.defineMessages)({short:{defaultMessage:"Short",id:"regionalFormatSettings.customSettingOption.shortDate.short"},iso:{defaultMessage:"ISO",id:"regionalFormatSettings.customSettingOption.shortDate.iso"},custom:{defaultMessage:"Custom",id:"regionalFormatSettings.customSettingOption.shortDate.custom"}}),number:(0,v.defineMessages)({number:{defaultMessage:"Number",id:"regionalFormatSettings.customSettingOption.number.number"},number_with_commas:{defaultMessage:"Number with commas",id:"regionalFormatSettings.customSettingOption.number.withCommas"},percent:{defaultMessage:"Percent",id:"regionalFormatSettings.customSettingOption.number.percent"}}),week_start_on:(0,v.defineMessages)({sunday:{defaultMessage:"Sunday",id:"regionalFormatSettings.customSettingOption.weekStartOn.sunday"},monday:{defaultMessage:"Monday",id:"regionalFormatSettings.customSettingOption.weekStartOn.monday"}})},Jc=(0,v.defineMessages)({full_date:{defaultMessage:"Full date",id:"regionalFormatSettings.defaultSetting.fullDate"},short_date:{defaultMessage:"Short date",id:"regionalFormatSettings.defaultSetting.shortDate"},number:{defaultMessage:"Numbers",id:"regionalFormatSettings.defaultSetting.numbers"},week_start_on:{defaultMessage:"Week starts",id:"regionalFormatSettings.defaultSetting.weekStart"}});function Xc(e,t){if("full_date"===t){return Qc[t][Yc(e,t).type]}if("short_date"===t){return Qc[t][Yc(e,t).type]}if("number"===t){return Qc[t][Yc(e,t)]}if("week_start_on"===t){return Qc[t][Yc(e,t)]}return(0,A.t1)(t)}function eu(e,t){return(0,qc.uf)(1234567,e,t)}const tu=(0,v.defineMessages)({sunday:{id:"regionalFormatSettings.defaultRegionalSettings.startDayOfWeek.sunday",defaultMessage:"Sunday"},monday:{id:"regionalFormatSettings.defaultRegionalSettings.startDayOfWeek.monday",defaultMessage:"Monday"}});function iu(e,t){const i=e.type;return"short"===i||"long"===i||"medium"===i?(0,an.Yx)(Date.now(),i,(0,Tr.E2)(t)):"iso"===i?(0,an.$6)(Date.now()):(0,an.Yx)(Date.now(),"long",(0,Tr.E2)(t))}function au(e,t){const i=e.type;return"iso"===i?(0,an.$6)(Date.now()):"short"===i?(0,an.Yx)(Date.now(),i,(0,Tr.E2)(t)):(0,an.Yx)(Date.now(),"short",(0,Tr.E2)(t))}var nu=i(68894),ou=i(42782);const su={full_date:(0,v.defineMessages)({full:{defaultMessage:"Full date",id:"regionalFormatSettings.customSettingOption.fullDate.full"},long:{defaultMessage:"Long",id:"regionalFormatSettings.customSettingOption.fullDate.long"},medium:{defaultMessage:"Medium",id:"regionalFormatSettings.customSettingOption.fullDate.medium"},short:{defaultMessage:"Short",id:"regionalFormatSettings.customSettingOption.fullDate.short"},iso:{defaultMessage:"ISO",id:"regionalFormatSettings.customSettingOption.fullDate.iso"},custom:{defaultMessage:"Custom",id:"regionalFormatSettings.customSettingOption.fullDate.custom"}}),short_date:(0,v.defineMessages)({short:{defaultMessage:"Short",id:"regionalFormatSettings.customSettingOption.shortDate.short"},iso:{defaultMessage:"ISO",id:"regionalFormatSettings.customSettingOption.shortDate.iso"},custom:{defaultMessage:"Custom",id:"regionalFormatSettings.customSettingOption.shortDate.custom"}}),number:(0,v.defineMessages)({number:{defaultMessage:"Number",id:"regionalFormatSettings.customSettingOption.number.number"},number_with_commas:{defaultMessage:"Number with commas",id:"regionalFormatSettings.customSettingOption.number.withCommas"},percent:{defaultMessage:"Percent",id:"regionalFormatSettings.customSettingOption.number.percent"}}),week_start_on:(0,v.defineMessages)({sunday:{defaultMessage:"Sunday",id:"regionalFormatSettings.customSettingOption.weekStartOn.sunday"},monday:{defaultMessage:"Monday",id:"regionalFormatSettings.customSettingOption.weekStartOn.monday"}})};function ru(e){window.__c={n:"CustomRegionalFormatSettingPicker"};const[,,t]=(0,Ze.AF)(void 0,Zt.Z),i=(0,Fe.Fg)(),[a,o]=(0,Ze.VK)((()=>[e.userSettingsStore.isDefined(),Xc(e.userSettingsStore,e.option)]),[e.option,e.userSettingsStore]);return a?n()(Bt.ZP,{popupType:Bt.Z4.Popup,buttonPopupStore:t,renderOrigin:e=>r.createElement(Ge.Z,e,q.default.formatMessage(o),(0,Ei.i)({width:10,marginLeft:4,fill:i.lightIconColor})),placementToOrigin:Wc.Iw.Bottom,alignmentToOrigin:Wc.lU.Start,render:t=>"week_start_on"===e.option||"number"===e.option?n()(lu,{userSettingsStore:e.userSettingsStore,option:e.option,onAccept:()=>{t.close()}}):"full_date"===e.option||"short_date"===e.option?n()(du,{userSettingsStore:e.userSettingsStore,option:e.option,onAccept:()=>{t.close()}}):(0,A.t1)(e.option)}):n()(Ue.Z,{})}function lu(e){window.__c={n:"SimpleFormatPicker"};const t=(0,xe.O7)(),i=(0,v.useIntl)();return n()(nt.Z,{menuType:Xe.og.Popup,width:216},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:[{key:"options",render:e=>r.createElement(rt.Z,s()({},e,{topBorder:0!==e.index})),items:(0,A.Yd)(su[e.option]).map((a=>({key:a,render:t=>{const n="number"===e.option?eu(a,i):void 0;return r.createElement(it.Z,s()({},t,{title:q.default.formatMessage(su[e.option][a]),caption:n}))},action:()=>{V.createAndCommit({userAction:"CustomRegionalFormatSettings.SimpleFormatPicker",environment:t,perform:t=>{U.d2({userSettingsStore:e.userSettingsStore,data:{regional_format_settings:{...e.userSettingsStore.getRegionalFormatSettings(),use_default_region_settings:!1,region:jc(e.userSettingsStore),[e.option]:a}},transaction:t})}}),e.onAccept()}})))}]}))}function du(e){window.__c={n:"CustomizableFormatPicker"};const t=(0,xe.O7)(),[i,a]=(0,r.useState)((()=>{})),o=(0,v.useIntl)(),l=(0,A.Yd)(su[e.option]),d=a=>{const n="custom"===a?{type:a,format:i}:{type:a};V.createAndCommit({userAction:"CustomRegionalFormatSettings.onAction",environment:t,perform:t=>{U.d2({userSettingsStore:e.userSettingsStore,data:{regional_format_settings:{...e.userSettingsStore.getRegionalFormatSettings(),use_default_region_settings:!1,region:jc(e.userSettingsStore),[e.option]:n}},transaction:t})}}),e.onAccept()};return n()(nt.Z,{menuType:Xe.og.Popup,width:216},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:[{key:"options",render:e=>r.createElement(rt.Z,s()({},e,{topBorder:0!==e.index})),items:l.map((t=>({key:t,render:l=>{if("custom"===t)return r.createElement(ou.Z,s()({},l,{renderOrigin:i=>r.createElement(it.Z,s()({},i,{title:q.default.formatMessage(su[e.option][t])})),onFocus:()=>{},renderExtension:()=>n()(cu,{customFormat:i,onChange:e=>{a(e)},onAccept:()=>{d(t)}}),title:q.default.formatMessage(su[e.option][t])}));{const i="full_date"===e.option?iu({type:t},o):au({type:t},o);return r.createElement(it.Z,s()({},l,{title:q.default.formatMessage(su[e.option][t]),caption:i}))}},action:()=>{d(t)}})))}]}))}function cu(e){window.__c={n:"CustomDateFormatExtension"};const t=(0,Fe.yK)((e=>({container:{},label:{color:e.mediumTextColor,fontWeight:f.Z.fontWeight.semibold,paddingTop:6,paddingBottom:6,paddingLeft:14,paddingRight:14},actionButton:{marginTop:6}})),[]);return n()("div",{style:t.container},void 0,n()("div",{},void 0,n()(Ee.Z,{isSmall:!0,style:t.label},void 0,n()(v.FormattedMessage,{id:"regionalFormatSettings.customDateFormat.title",defaultMessage:"Custom format"}))),n()(nu.ZP,{focus:!0,value:e.customFormat||"",onChange:t=>{e.onChange(t.target.value)}}),n()(it.Z,{style:t.actionButton,focused:!1,onClick:e.onAccept,title:n()(v.FormattedMessage,{id:"regionalFormatSettings.customDateFormat.applyChanges",defaultMessage:"Apply changes"})}))}function uu(e){window.__c={n:"RegionalFormatSettings"};const t=(0,Fe.yK)((()=>({container:{flex:1,display:"flex",flexDirection:"column"},controlRow:{flex:1,display:"flex"},label:{flex:1},subtitle:{width:"80%"}})),[]),i=(0,Ze.VK)((()=>e.userSettingsStore.isReady()),[e.userSettingsStore]),a=(0,Ze.VK)((()=>e.userSettingsStore.shouldUseDefaultRegionalFormatting()),[e.userSettingsStore]),o=(0,xe.O7)();return i?n()("div",{style:t.container},void 0,n()("div",{style:t.controlRow},void 0,n()("div",{style:t.label},void 0,n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"regionalFormatSettings.label.title",defaultMessage:"Use regional defaults"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:t.subtitle},void 0,n()(v.FormattedMessage,{id:"regionalFormatSettings.label.subtitle",defaultMessage:"Automatically apply standard formats of your region"}))),n()(Fr.Z,{on:a,onClick:()=>{V.createAndCommit({userAction:"RegionalFormatSettings.RegionalFormatSettings",environment:o,perform:t=>{const i=a?{use_default_region_settings:!1,full_date:void 0,short_date:void 0,time:void 0,number:void 0,week_start_on:void 0}:{use_default_region_settings:!0};U.d2({userSettingsStore:e.userSettingsStore,data:{regional_format_settings:{region:jc(e.userSettingsStore),...i}},transaction:t})}})}})),n()("div",{},void 0,n()(a?mu:fu,{userSettingsStore:e.userSettingsStore}))):n()(Ue.Z,{})}function mu(e){window.__c={n:"DefaultRegionalFormatSettings"};const t=(0,Fe.yK)((()=>({container:{marginTop:12}})),[]);return n()("div",{style:t.container},void 0,hu.map((t=>n()(pu,{userSettingsStore:e.userSettingsStore,option:t}))))}function pu(e){window.__c={n:"DefaultRegionalFormatSetting"};const t=(0,Fe.yK)((e=>({container:{display:"flex"},option:{color:e.lightTextColor,fontSize:f.Z.fontSize.UIRegular.desktop,width:100},example:{color:e.mediumTextColor,fontSize:f.Z.fontSize.UIRegular.desktop}})),[]),i=(0,v.useIntl)(),[a,o]=(0,Ze.VK)((()=>[e.userSettingsStore.isDefined(),gu(e.userSettingsStore,i,e.option)]),[i,e.option,e.userSettingsStore]);return a?n()("div",{style:t.container},void 0,n()("div",{style:t.option},void 0,q.default.formatMessage(Jc[e.option])),n()("div",{style:t.example},void 0,o)):n()(Ue.Z,{})}function gu(e,t,i){if("full_date"===i){return iu(Yc(e,i),t)}if("short_date"===i){return au(Yc(e,i),t)}if("number"===i){return eu(Yc(e,i),t)}if("week_start_on"===i){return function(e){return"sunday"===e?q.default.formatMessage(tu.sunday):"monday"===e?q.default.formatMessage(tu.monday):(0,A.t1)(e)}(Yc(e,i))}return(0,A.t1)(i)}const hu=["full_date","short_date","number","week_start_on"];function fu(e){return n()("div",{},void 0,hu.map((t=>n()(vu,{userSettingsStore:e.userSettingsStore,option:t}))))}function vu(e){window.__c={n:"CustomRegionalFormatSetting"};const t=(0,v.useIntl)(),[i,a,o]=(0,Ze.VK)((()=>[e.userSettingsStore.isDefined(),jc(e.userSettingsStore),gu(e.userSettingsStore,t,e.option)]),[t,e.option,e.userSettingsStore]),s=(0,Fe.yK)(yu,[]);return i?r.createElement(r.Fragment,null,n()(vs.Z,{size:24}),n()("div",{style:s.container},void 0,n()("div",{style:s.controlRow},void 0,n()("div",{style:s.label},void 0,n()(Ee.Z,{},void 0,q.default.formatMessage(Jc[e.option])),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:s.subtitle},void 0,o)),n()(ru,{userSettingsStore:e.userSettingsStore,region:a,option:e.option})))):n()(Ue.Z,{})}function yu(){return{container:{flex:1,display:"flex",flexDirection:"column"},controlRow:{flex:1,display:"flex"},label:{flex:1},subtitle:{width:"80%"}}}var Su=i(80994);function bu(e){window.__c={n:"RegionSettings"};const t=(0,Fe.yK)((()=>({container:{flex:1,display:"flex"},label:{flex:1},subtitle:{width:"80%"}})),[]);return n()("div",{style:t.container},void 0,n()("div",{style:t.label},void 0,n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"regionSettings.region.label",defaultMessage:"Region"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:t.subtitle},void 0,n()(v.FormattedMessage,{id:"regionSettings.region.subtitle",defaultMessage:"Affects the default formats for dates, numbers, and currencies"}))),n()(Mu,{userSettingsStore:e.userSettingsStore,onChange:e.onChange,pickerLabel:e.pickerLabel}))}function Mu(e){window.__c={n:"RegionPicker"};const t=(0,Fe.Fg)(),[,,i]=(0,Ze.AF)(void 0,Zt.Z),a=(0,Ze.VK)((()=>jc(e.userSettingsStore)),[e.userSettingsStore]),[o,l]=r.useState("");return n()(Bt.ZP,{popupType:Bt.Z4.Popup,buttonPopupStore:i,renderOrigin:i=>r.createElement(Ge.Z,i,e.userSettingsStore?a:e.pickerLabel,(0,Ei.i)({width:10,marginLeft:4,fill:t.lightIconColor})),placementToOrigin:Wc.Iw.Bottom,alignmentToOrigin:Wc.lU.Start,render:t=>n()(nt.Z,{menuType:Xe.og.Popup,width:216,header:n()(Cu,{value:o,onChange:e=>l(e)})},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:[{key:"regions",render:e=>r.createElement(rt.Z,s()({},e,{topBorder:0!==e.index})),items:(0,fn.ZP)(o,Su.hW,(e=>e.name)).map((i=>({key:i.countryCode,render:e=>r.createElement(it.Z,s()({},e,{title:i.name})),action:()=>{e.onChange(i.countryCode),t.close(),l("")}})))}]}))})}const wu=(0,v.defineMessages)({regionSearchPlaceholder:{defaultMessage:"Search for a region...",id:"settings.regionSettings.regionSearch"}});function Cu(e){return n()(rt.Z,{isInput:!0},void 0,n()(nu.ZP,{value:e.value,onChange:t=>{e.onChange(t.target.value)},focus:!0,placeholder:q.default.formatMessage(wu.regionSearchPlaceholder),focusAfterAnimation:!0}))}var _u=i(758),ku=i(77058),Tu=i(91155);const Iu=function(e){window.__c={n:"SpellcheckerLanguagesPicker"};const[t,i]=r.useState([]),[a,o]=r.useState([]),l=(0,xe.O7)(),d=(0,Ze.qz)(void 0,Zt.Z),c=(0,Fe.yK)((e=>({span:{color:e.mediumTextColor},plainButton:{paddingLeft:8,paddingRight:8,marginLeft:-8},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);function u(e){return a.some((t=>t.code===e.code))}(0,r.useEffect)((()=>{const e=l.SpellCheckStore;e&&!(0,_u.x)(e)&&(e.getAvailableLanguages().then(i).catch((e=>{Vn.log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getAvailableLanguages",error:(0,Tu.Ui)(e)})})),e.getLanguages().then(o).catch((e=>{Vn.log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getLanguages",error:(0,Tu.Ui)(e)})})))}),[l]),(0,r.useEffect)((()=>{const e=l.SpellCheckStore;if(!e||(0,_u.x)(e))return;const t=a.map((e=>{let{code:t}=e;return t}));e.setLanguages(t)}),[a,l.SpellCheckStore]);const m=a.length>0?a.slice(0,3).map((e=>{let{name:t}=e;return t})).join(", ")+(a.length>3?"…":""):n()(v.FormattedMessage,{id:"languageRegionSettings.spellchecker.picker.label",defaultMessage:"Select languages"});return n()(Bt.ZP,{popupType:Bt.Z4.Popup,buttonPopupStore:d,renderOrigin:e=>r.createElement(r.Fragment,null,r.createElement(Ge.Z,s()({style:c.plainButton},e),m,(0,Ei.i)(c.icon))),placementToOrigin:Wc.Iw.Bottom,alignmentToOrigin:Wc.lU.Start,render:e=>{const i=[{key:"spellcheckerlanguages",render:e=>r.createElement(rt.Z,s()({},e,{topBorder:0!==e.index})),items:t.map((e=>({key:e.code,render:t=>function(e){const t=e.language.name||e.language.code;return r.createElement(it.Z,s()({},e.props,{title:n()("div",{style:{display:"flex",alignItems:"center"}},void 0,n()("div",{style:{marginRight:0}},void 0,t)),shouldWrapCaption:!0,right:u(e.language)?(0,ku.$)({width:12,height:12}):void 0}))}({language:e,props:t}),action:()=>{u(e)?o(a.filter((t=>t.code!==e.code))):o([...a,e])}})))}],l={menuType:Xe.og.Popup,width:240};return r.createElement(nt.Z,s()({className:K.hKO},l),n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:i}))}})};const Pu=function(e){window.__c={n:"SpellcheckerSettings"};const t=(0,xe.O7)();return t.device.isElectron&&t.device.isWindows&&!_u.x(t.SpellCheckStore)?r.createElement(r.Fragment,null,n()(vs.Z,{size:24,isHidden:!0}),n()("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto"}},void 0,n()("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"}},void 0,n()("div",{style:{flex:1}},void 0,n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"languageRegionSettings.spellchecker.label",defaultMessage:"Spellchecker languages"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,n()(v.FormattedMessage,{id:"languageSettings.spellcheckerSwitcher.subtitle",defaultMessage:"Change the languages used by the spellchecker."}))),n()(Iu,{})))):null};class xu extends l.Z{renderComponent(){return Ae.Z.state.online?this.renderSettings():this.renderOfflineMessage()}renderOfflineMessage(){return n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{defaultMessage:"Please go online to manage your language and region.",id:"languageSettings.offline.message"})))}renderSettings(){var e;const{currentUserSettingsStore:t}=B.default.state;if(!t)return;const i=(null===(e=t.getSettings())||void 0===e?void 0:e.preferred_locale)||Tr.al,a="on"===T.default.getGroup("aloha");return n()(Be.Z,{},void 0,n()(Re.Z,{large:!0,divider:"full"},void 0,n()(v.FormattedMessage,{id:"languageSettings.languageSection.title",defaultMessage:"Language & region"})),n()(Gc,{locale:i,userSettingsStore:t}),n()(Pu,{}),n()(vs.Z,{size:24}),a?n()("div",{style:{marginTop:12}},void 0,n()(bu,{locale:i,userSettingsStore:t,onChange:e=>{}}),n()(vs.Z,{size:24}),n()(Re.Z,{large:!0,divider:"full"},void 0,n()(v.FormattedMessage,{id:"languageSettings.formatsSection.title",defaultMessage:"Formats"})),n()(uu,{locale:i,userSettingsStore:t}),n()(vs.Z,{size:24})):n()(Dc.Z,{}))}}xu.displayName="LanguageRegionSettings";const Zu=xu;var Fu=i(15311),Au=i(28187),Eu=i(21291),Bu=i(51124),Ru=i(97876);function Du(){window.__c={n:"NotificationSettings"};const{isElectron:e,isMobile:t}=(0,xe.Fy)(),i=(0,xe.O7)(),a=(0,Ze.VK)((()=>Ae.Z.state.online),[]),o=(0,Ze.VK)((()=>{const i=(0,Au.kC)();return function(e){const{isMobile:t,isElectron:i,showSlackNotificationSetting:a}=e;return[{key:"notify_mobile",renderSettingsItem:()=>n()(Eu.A,{target:"notify_mobile"})},!t&&i?{key:"notify_desktop",renderSettingsItem:()=>n()(Eu.A,{target:"notify_desktop"})}:void 0,a?{key:"notify_slack",renderSettingsItem:()=>n()(Ru.O,{target:"notify_slack"})}:void 0].filter(A.$K)}({isMobile:t,isElectron:e,showSlackNotificationSetting:i})}),[t,e]),s=(0,Ze.VK)((()=>{var e;return function(e){const{showNotifyEmailAlwaysSetting:t}=e;return[{key:"notify_email",renderSettingsItem:()=>n()(Eu.A,{target:"notify_email"})},t?{key:"notify_email_always",renderSettingsItem:()=>n()(Eu.A,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>n()(Eu.A,{target:"notify_email_digest"})},{key:"marketing_emails",renderSettingsItem:()=>n()(Eu.A,{target:"marketing_emails"})}].filter(A.$K)}({showNotifyEmailAlwaysSetting:(null===(e=B.default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1})}),[]),r=(0,Ze.VK)((()=>i.WindowSizeStore.state.paddingBottomCSS),[i.WindowSizeStore]);return a?n()(Be.Z,{disableScroller:t},void 0,n()(Re.Z,{large:!t,divider:"full"},void 0,n()(v.FormattedMessage,{id:"notificationSettings.notificationsSection.title",defaultMessage:"My notifications"})),n()(Bu.O,{items:o}),n()(vs.Z,{size:48,isHidden:!0}),n()(Re.Z,{large:!t,divider:"full"},void 0,n()(v.FormattedMessage,{id:"notificationSettings.emailNotificationsSection.title",defaultMessage:"Email notifications"})),n()(Bu.O,{items:s}),n()(vs.Z,{size:48,isHidden:!0}),n()("div",{style:{marginTop:4,marginBottom:t?r:void 0}},void 0,n()(ll.Z,{title:n()(v.FormattedMessage,{id:"myNotificationSettings.helpButton.caption",defaultMessage:"Learn about notifications"}),href:(0,Y.UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"}))):n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{defaultMessage:"Please go online to manage your notification settings.",id:"myNotificationsSettings.goOnline.prompt"})))}var Lu=i(5851),Nu=i(98481),Ou=i(64404),Vu=function(e){return e[e.Keep=0]="Keep",e[e.Remove=1]="Remove",e}(Vu||{});function Uu(e){return n()(Zs.Z,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>r.createElement(Wu,e)})}function Wu(e){window.__c={n:"DisableGuestsConfig"};const{onDismiss:t,onSave:i}=e,[a,o]=(0,r.useState)(Vu.Keep),s=(0,Fe.yK)((e=>({container:{width:350,padding:30,borderRadius:5,height:400,alignItems:"center"},title:{fontFamily:f.Z.getCompositeFontFamily(Dn.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:f.Z.getCompositeFontFamily(Dn.SP).sans,fontSize:14,fontWeight:300,lineHeight:"19px",margin:10,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column"},button:{justifyContent:"space-between",marginTop:10,height:70,borderRadius:5},buttonText:{display:"flex",flexDirection:"column"},optionSubtitle:{whiteSpace:"break-spaces"},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{justifyContent:"center"}})),[]),l=(0,r.useCallback)((()=>{const e=a===Vu.Keep;i(e)}),[i,a]);return n()("div",{style:s.container},void 0,n()(Ee.Z,{style:s.title},void 0,n()(v.FormattedMessage,{id:"disableGuestsConfig.title",defaultMessage:"Disable guests?"})),n()(Ee.Z,{isSmall:!0,style:s.subtitle,isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"disableGuestsConfig.description",defaultMessage:"You are turning off guests in this workspace. You can choose to:"})),n()("div",{style:s.radioContainer},void 0,n()(Le.Z,{isLarge:!0,onClick:()=>o(Vu.Keep),style:s.button},void 0,n()(ki.Z,{isSelected:a===Vu.Keep}),n()("div",{style:s.buttonText},void 0,n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"disableGuestsConfig.keepExistingGuests.title",defaultMessage:"Keep existing guests"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:s.optionSubtitle},void 0,n()(v.FormattedMessage,{id:"disableGuestsConfig.keepExistingGuests.description",defaultMessage:"Guests will still be able to access the pages they've been invited to"})))),n()(Le.Z,{isLarge:!0,onClick:()=>o(Vu.Remove),style:s.button},void 0,n()(ki.Z,{isSelected:a===Vu.Remove}),n()("div",{style:s.buttonText},void 0,n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"disableGuestsConfig.removeExistingGuests.title",defaultMessage:"Remove existing guests"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:s.optionSubtitle},void 0,n()(v.FormattedMessage,{id:"disableGuestsConfig.removeExistingGuests.description",defaultMessage:"All guests will be removed from your workspace"}))))),n()("div",{style:s.actionButtonsContainer},void 0,n()(He.Z,{isLarge:!0,onClick:l},void 0,n()(v.FormattedMessage,{id:"disableGuestsModal.saveChanges",defaultMessage:"Disable guests"})),n()(Ge.Z,{onClick:t,style:s.cancelButton},void 0,n()(v.FormattedMessage,{id:"disableGuestsModal.cancel",defaultMessage:"Cancel"}))))}var zu=i(69435);const Ku=.5;class Hu extends l.Z{constructor(){super(...arguments),this.storeTypes={tokenOptionsButtonPopupStore:Zt.Z,domainVerificationStore:al.ZP},this.handleDisablePublicAccessSwitcherClick=async()=>{const{securitySettingsStore:e}=this.props,t=e.state.disablePublicAccess;if(!t){if(!(await M.confirmUserAction({message:n()(v.FormattedMessage,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.message",defaultMessage:"Are you sure? This will remove access for anyone who is not a member or guest of the workspace from all pages in this workspace."}),acceptLabel:n()(v.FormattedMessage,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.confirmButton.label",defaultMessage:"Yes"})})))return}this.handleSave({disablePublicAccess:!t})},this.handleAllowDisableGuestsSwitcherClick=async()=>{const{securitySettingsStore:e}=this.props,t=e.state.disableGuests;if(t)this.handleSave({disableGuests:!t,enableGuestInviteRequests:!1});else{if(T.default.checkGate("show_keep_existing_guests_modal"))return void e.setState({...e.state,disableGuestsModalOpen:!0});if(!(await M.confirmUserAction({message:n()(v.FormattedMessage,{id:"securitySAMLSettings.disableGuests.confirmationModal.message",defaultMessage:"Are you sure? All guests in this workspace will be removed."}),acceptLabel:n()(v.FormattedMessage,{id:"securitySAMLSettings.disableGuests.confirmationModal.confirmButton.label",defaultMessage:"Yes"})})))return;this.handleSave({disableGuests:!t})}},this.handleToggleClick=(e,t)=>{if(!t)return this.handleUpgradeClick();const{securitySettingsStore:i}=this.props;this.handleSave({[e]:!i.state[e]})},this.handleUpgradeClick=()=>{Jr.y(this.environment,{from:"space_saml",for:"enterprise"})}}renderComponent(){return Ae.Z.state.online?n()(Be.Z,{},void 0,this.renderSecuritySettings()):this.renderOfflineMessage()}renderUpsell(){if(!(0,Nu.J)({environment:this.environment}))return n()("div",{style:{border:`1px solid ${this.theme.regularDividerColor}`,borderRadius:3,padding:16,marginTop:void 0,marginBottom:24}},void 0,!(0,Yo.Rs)()&&n()(zu.Z,{for:"business",from:"space_saml",upgradeMessage:n()(v.FormattedMessage,{id:"securitySAMLSettings.upsell.button.business",defaultMessage:"Upgrade to Business"}),title:n()(v.FormattedMessage,{id:"securitySAMLSettings.upsell.title.business",defaultMessage:"Upgrade for SAML SSO & more admin tools"}),caption:n()(v.FormattedMessage,{id:"securitySAMLSettings.upsell.caption.business",defaultMessage:"The Business Plan includes single sign-on to manage employee access at scale, private teamspaces to collaborate on sensitive docs, and more."}),learnMoreRoute:"guides.securitySettings",style:{marginBottom:"20px"}}),n()(zu.Z,{for:"enterprise",from:"space_saml",upgradeMessage:n()(v.FormattedMessage,{id:"securitySAMLSettings.upsell.button.enterprise",defaultMessage:"Upgrade to Enterprise"}),title:n()(v.FormattedMessage,{id:"securitySAMLSettings.upsell.title.enterprise",defaultMessage:"Upgrade for SCIM, advanced security & more"}),caption:n()(v.FormattedMessage,{id:"securitySAMLSettings.upsell.caption.enterprise",defaultMessage:"The Enterprise Plan allows you to automatically provision users and groups, and gain more visibility and controls across the workspace."}),learnMoreRoute:"guides.securitySettings"}))}renderSecuritySettings(){const{securitySettingsStore:e}=this.props,t=T.default.checkGate("guest_invite_requests"),i=this.renderUpsellButton(),a=t=>n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:t?this.handleDisablePublicAccessSwitcherClick:this.handleUpgradeClick},void 0,n()("div",{style:this.getTitleStyle()},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.preventPublicSharing.label",defaultMessage:"Disable public page sharing"}),!t&&i,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.preventPublicSharing.caption",defaultMessage:"Disable the Share to web option in the Share menu on every page in this workspace."}))),n()("div",{style:{marginTop:5,opacity:t?void 0:Ku}},void 0,n()(Fr.Z,{on:e.state.disablePublicAccess,disabled:!t}))),n()(vs.Z,{size:24,style:{opacity:0}})),o=t=>{if(!(0,E.bq)())return n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>this.handleToggleClick("disableSpacePageEdits",t)},void 0,n()("div",{style:this.getTitleStyle()},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.label",defaultMessage:"Prevent members from editing the Workspace section"}),!t&&i,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"}},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.caption",defaultMessage:"Disable the ability for members to create, move, reorder, and delete top-level Workspace pages."}))),n()("div",{style:{marginTop:5,opacity:t?void 0:Ku}},void 0,n()(Fr.Z,{on:e.state.disableSpacePageEdits,disabled:!t}))),n()(vs.Z,{size:24,style:{opacity:0}}))},s=t=>n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:t?this.handleAllowDisableGuestsSwitcherClick:this.handleUpgradeClick},void 0,n()("div",{style:this.getTitleStyle()},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableGuests.label",defaultMessage:"Disable guests"}),!t&&i,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableGuests.caption",defaultMessage:"Prevent anyone from inviting people outside the workspace to pages."}))),n()("div",{style:{marginTop:5,opacity:t?void 0:Ku}},void 0,n()(Fr.Z,{on:e.state.disableGuests,disabled:!t}))),n()(vs.Z,{size:24,style:{opacity:0}}),n()(Uu,{isOpen:Boolean(e.state.disableGuestsModalOpen),onDismiss:()=>{e.setState({...e.state,disableGuestsModalOpen:!1})},onSave:t=>{this.handleSave({disableGuests:!0,keepExistingGuests:t}),e.setState({...e.state,disableGuestsModalOpen:!1})}})),l=t=>n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>this.handleToggleClick("disableMoveToSpace",t)},void 0,n()("div",{style:this.getTitleStyle()},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableMovingPages.label",defaultMessage:"Disable duplicating pages to other workspaces"}),!t&&i,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableMovingPages.caption",defaultMessage:"Prevent anyone from duplicating pages to other workspaces via the Move To or Duplicate To actions."}))),n()("div",{style:{marginTop:5,opacity:t?void 0:Ku}},void 0,n()(Fr.Z,{on:e.state.disableMoveToSpace,disabled:!t}))),n()(vs.Z,{size:24,style:{opacity:0}})),{state:d}=e,c=t=>n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>this.handleToggleClick("disableExport",t)},void 0,n()("div",{style:this.getTitleStyle()},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableExport.label",defaultMessage:"Disable export"}),!t&&i,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.securitySection.disableExport.caption",defaultMessage:"Prevent anyone from exporting as Markdown, CSV, or PDF."}))),n()("div",{style:{marginTop:5,opacity:t?void 0:Ku}},void 0,n()(Fr.Z,{on:e.state.disableExport,disabled:!t}))),n()(vs.Z,{size:24,style:{opacity:0}}));return(0,Nu.J)({environment:this.environment})?n()(r.Fragment,{},void 0,n()(Re.Z,{large:!0,divider:"full"},void 0,n()(v.FormattedMessage,t?{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"}:{id:"securitySAMLSettings.securitySection.title",defaultMessage:"Security"})),void 0,a(!0),o(!0),!t&&s(!0),l(!0),c(!0),t&&this.renderGuestsSettings(!0),n()("div",{style:{height:36}})):n()(r.Fragment,{},void 0,this.renderUpsell(),n()("div",{style:this.getHeaderStyle()},void 0,n()("span",{style:{marginRight:8}},void 0,n()(v.FormattedMessage,t?{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"}:{id:"securitySAMLSettings.securitySection.title",defaultMessage:"Security"}))),void 0,a(d.disablePublicAccess),o(d.disableSpacePageEdits),!t&&s(!0),l(d.disableMoveToSpace),c(d.disableExport),t&&this.renderGuestsSettings(!0),n()("div",{style:{height:32}}))}renderOfflineMessage(){return n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{defaultMessage:"Please go online to manage security settings.",id:"securitySAMLSettings.offline.message"})))}renderUpsellButton(){return n()(Xr.Z,{subscriptionTier:"enterprise",analyticsName:"space_saml",onClick:this.handleUpgradeClick,desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})}renderGuestsSettings(e){const{data:t}=Te.default.state;if(!t)return this.renderLoadingSpinner();const i=$.CM(t).filter(yi.du).filter((e=>!e.isTeamGuest&&e.isPageGuest)).length;return r.createElement(r.Fragment,null,n()(Re.Z,{large:!0,divider:"full"},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.guestsSection.title",defaultMessage:"Guests"})),this.renderDisableGuestsV2(e,i),this.renderEnableGuestInviteRequests(e))}renderDisableGuestsV2(e,t){return n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},void 0,n()("div",{style:this.getTitleStyle()},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.guestsSection.disableGuests.label",defaultMessage:"Disable members inviting guests to pages"}),!e&&this.renderUpsellButton(),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.guestsSection.disableGuests.caption",defaultMessage:"Your workspace currently has <gueststablink> {guestCount, plural, one {1 guest} other {{guestCount} guests}}</gueststablink>.",values:{gueststablink:e=>n()(ys.Z,{onClick:()=>{ke.Z.setState({...ke.Z.state,currentTab:"members",defaultSubtab:Ou.Q.Guests})}},void 0,e),guestCount:t}}))),n()("div",{onClick:e?this.handleAllowDisableGuestsSwitcherClick:this.handleUpgradeClick,style:{marginTop:5,opacity:e?void 0:Ku}},void 0,n()(Fr.Z,{on:this.props.securitySettingsStore.state.disableGuests,disabled:!e}))),n()(vs.Z,{size:24,style:{opacity:0}}),n()(Uu,{isOpen:Boolean(this.props.securitySettingsStore.state.disableGuestsModalOpen),onDismiss:()=>{this.props.securitySettingsStore.setState({...this.props.securitySettingsStore.state,disableGuestsModalOpen:!1})},onSave:e=>{this.handleSave({disableGuests:!0,keepExistingGuests:e}),this.props.securitySettingsStore.setState({...this.props.securitySettingsStore.state,disableGuestsModalOpen:!1})}}))}renderEnableGuestInviteRequests(e){let t;e&&this.props.securitySettingsStore.state.disableGuests?t=()=>this.handleToggleClick("enableGuestInviteRequests",e):e||(t=this.handleUpgradeClick);const i=!e||!this.props.securitySettingsStore.state.disableGuests;return n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},void 0,n()("div",{style:this.getTitleStyle()},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.label",defaultMessage:"Members can request adding guests"}),!e&&this.renderUpsellButton(),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,n()(v.FormattedMessage,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.caption",defaultMessage:"Requests must be approved by a workspace owner. You can view all requests <requeststablink>here</requeststablink>.",values:{requeststablink:e=>n()(ys.Z,{onClick:()=>{ke.Z.setState({...ke.Z.state,currentTab:"members",defaultSubtab:Ou.Q.Requests})}},void 0,e)}}))),n()("div",{onClick:t,style:{marginTop:5,opacity:e&&this.props.securitySettingsStore.state.disableGuests?void 0:Ku}},void 0,n()(Fr.Z,{on:this.props.securitySettingsStore.state.enableGuestInviteRequests,disabled:i}))),n()(vs.Z,{size:24,style:{opacity:0}}))}renderLoadingSpinner(){return n()(Ue.Z,{})}handleSave(e){const{securitySettingsStore:t,spaceStore:i}=this.props;Lu.y(this.environment,{spaceStore:i,securitySettingsStore:t,fields:e})}getHeaderStyle(){return{fontWeight:f.Z.fontWeight.medium,fontSize:18,borderBottom:`1px solid ${this.theme.regularDividerColor}`,paddingBottom:6,marginBottom:12,display:"flex",alignItems:"center"}}getTitleStyle(){return{fontSize:14,marginRight:8,flexGrow:1}}}Hu.displayName="SecuritySettings";const Gu=(0,v.injectIntl)(Hu);var qu=i(58047);function ju(e){window.__c={n:"SettingsPrompt"};const t=(0,xe.O7)(),{onView:i}=e;return(0,r.useEffect)((()=>{i(t)}),[t,i]),n()("div",{},void 0,n()(vs.Z,{size:0}),n()(qu.N,{icon:e.icon,title:e.title,description:e.descriptionMessage,onDismiss:e.onDismiss,primaryAction:{text:e.buttonText,onClick:t=>(e.onDismiss(),e.onClick(t))},secondaryAction:{icon:e=>(0,zs.m)(e),text:n()(v.FormattedMessage,{id:"settingsPrompt.learnMore.button",defaultMessage:"Learn more"}),onClick:e.onClickLearnMore}}))}class Yu extends l.Z{renderComponent(){return n()("div",{style:this.getStyle(),onMouseDown:this.props.onMouseDown,onClick:this.props.onClick,onDoubleClick:this.props.onDoubleClick,onContextMenu:this.props.onContextMenu},void 0,n()("div",{style:this.getSidebarStyle()},void 0,this.props.sidebar),n()("div",{style:this.getChildrenStyle()},void 0,this.props.children))}getStyle(){return{display:"flex",height:"100%",flexDirection:this.props.isReversed?"row-reverse":"row"}}getSidebarStyle(){return{height:"100%",background:this.theme.cardSidebarBackground,flexGrow:0,flexShrink:0,width:240,overflowY:"auto"}}getChildrenStyle(){return{flexGrow:1,position:"relative",zIndex:1,height:"100%"}}}Yu.displayName="SidebarBox";const $u=Yu,Qu="last_90_days",Ju={field:"last_active",direction:"desc"};async function Xu(e){var t,i;const{environment:a,filter:n,spaceId:o,spaceAnalyticsStore:s}=e,r=null===(t=s.usersTabData)||void 0===t?void 0:t.dailyUsersData;if(!r||n!==(null===(i=s.usersTabData)||void 0===i?void 0:i.graphFilter)||s.currentSpaceId!==o){const e=await I.getDailyUsersAnalytics(a,{spaceId:o,activeWindow:"all_time"===n?"last_90_days":n});return"failed"===e.type?e.body:e.data}return r}async function em(e){var t,i,a;const{environment:n,filter:o,sort:s,spaceStore:r,spaceAnalyticsStore:l}=e,d=null===(t=l.usersTabData)||void 0===t?void 0:t.tableFilter,c=null===(i=l.usersTabData)||void 0===i?void 0:i.userTableSort;if(null===(a=l.usersTabData)||void 0===a||!a.usersAndStats||d!==o||!c||c.direction!==s.direction||c.field!==s.field||l.currentSpaceId!==r.id){const e=await I.loadWorkspaceAnalyticsUsers(n,{spaceId:r.id,filters:{timeRange:o},sort:s});return"failed"===e.type?e.body:e.data.users.map((e=>({stats:e,userStore:ft.U6.createChildStore(r,{table:ti.KJ,id:e.userId})}))).filter((e=>{let{userStore:t}=e;return t.isDefined()}))}return l.usersTabData.usersAndStats}function tm(e,t){if((0,Aa.qC)(e)){const i=(0,Ba.nX)(t,e);if(i)return i}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}const im={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};const am={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function nm(e){return n()(Bt.ZP,{popupType:st.kQ.Popup,alignmentToOrigin:Ln.v.End,render:t=>{let{close:i}=t;return n()(om,{closePopup:i,analyticsType:e.analyticsType})},renderOrigin:t=>{let{onClick:i}=t;return n()(Le.Z,{style:e.style,onClick:i},void 0,n()(v.FormattedMessage,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"}))}})}function om(e){window.__c={n:"ExportAnalyticsMenu"};const{analyticsType:t,closePopup:i}=e,a=(0,xe.O7)(),o=(0,Ze.VK)((()=>{var e;return null===(e=B.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),s=(0,r.useCallback)((async e=>{if(o){switch(t){case fe.Users:b.LbR(a,{daysFilter:e}),await De.Tp(a,{spaceId:o,daysFilter:e});break;case fe.Content:b.ZaS(a,{daysFilter:e}),await De.hN(a,{spaceId:o,daysFilter:e});break;default:(0,A.t1)(t)}i()}}),[a,o,t,i]),l=zn.Hz.map((e=>n()(it.Z,{focused:!1,onClick:()=>s(e),title:q.default.formatMessage(zn.Rh[e])},e)));return n()(nt.Z,{menuType:Xe.og.Popup},void 0,n()(rt.Z,{},void 0,l))}var sm=i(83176);const rm=(0,v.defineMessages)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics yet"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"A workspace owner has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"A workspace owner has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function lm(e){window.__c={n:"SpaceAnalyticsEmptyState"};const t=(0,Fe.yK)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.mediumTextColor,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),i=(0,xe.O7)(),{type:a,spaceName:o}=e,l=function(e,t){switch(e){case"empty":return{heading:q.default.formatMessage(rm.emptyAnalyticsHeading),description:q.default.formatMessage(rm.emptyAnalyticsDescription)};case"disabled":const e=t?r.createElement(v.FormattedMessage,s()({},rm.disabledAnalyticsDescription,{values:{name:t,br:n()("br",{})}})):r.createElement(v.FormattedMessage,s()({},rm.disabledAnalyticsDescriptionNoSpaceName,{values:{br:n()("br",{})}}));return{heading:q.default.formatMessage(rm.disabledAnalyticsHeading),description:e}}}(a,o);return n()("div",{style:t.outerDiv},void 0,n()("div",{style:t.innerDiv},void 0,(0,sm.z)(t.analyticsIcon),n()(Ee.Z,{isSecondaryColor:!0,style:t.header},void 0,l.heading),n()(Ee.Z,{isSecondaryColor:!0},void 0,l.description),n()(Ge.Z,{onClick:()=>C.navigateToExternalURL({environment:i,url:(0,Y.UY)("guides.workspaceAnalytics")}),style:t.learnMore},void 0,(0,zs.m)(t.learnMoreIcon),n()(Ee.Z,{isSmall:!0},void 0,n()(v.FormattedMessage,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})))))}var dm=i(55964),cm=i(90028),um=i(35314);function mm(e){let{num:t,abbreviateNumber:i}=e;window.__c={n:"NumberDisplay"};const a=(0,v.useIntl)(),o=(0,Tr.E2)(a),s=t.toLocaleString(o),l=Intl.NumberFormat(o,{notation:"compact",maximumFractionDigits:1}).format(t);return i?n()(Nt.Z,{placement:Nt.Z.Placement.Bottom,render:e=>r.createElement("span",e,l),renderTooltip:()=>s}):n()("span",{},void 0,s)}function pm(e){let{icon:t,iconStyles:i,textStyles:a,style:o,title:s,byline:r,loading:l,error:d}=e;window.__c={n:"AnalyticsCardOverview"};const c=function(e,t,i){return(0,Fe.yK)((a=>({title:{fontWeight:f.Z.fontWeight.medium,fontSize:16},byline:{fontSize:f.Z.fontSize.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:a.lightTextColor,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${a.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...i},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:tn.ZP.red}})),[e,t,i])}(i,a,o);return l?n()("div",{style:c.container},void 0,n()("div",{style:c.textContainer},void 0,n()("div",{style:c.loadingTitle},void 0,n()(Zn.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})),r?n()("div",{style:c.loadingByline},void 0,n()(Zn.Z,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})):null)):d?n()("div",{style:c.container},void 0,n()("div",{style:c.titleContainer},void 0,n()(Ee.Z,{style:c.errorTitle},void 0,(0,Aa.Jx)(d)?d.message:n()(v.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:n()("br",{})}})))):n()("div",{style:c.container},void 0,t?t(c.icon):null,n()("div",{style:c.textContainer},void 0,n()(Ee.Z,{style:c.title},void 0,s),r?n()(Ee.Z,{style:c.byline},void 0,r):null))}var gm=i(67579);const hm=640;function fm(e){let{data:t,loading:i,error:a,daysFilter:o,setDaysFilter:l}=e;window.__c={n:"ContentAnalyticsSummaries"};const[d,c]=(0,um.e)(),u=(0,Fe.yK)((e=>({title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center"},infoIcon:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:m,uniquePageViews:p,pagesCreated:g,pageEdits:h}=t,y=(0,xe.O7)(),S=(0,r.useCallback)((e=>{b.kyK(y,{daysFilter:e}),l(e)}),[y,l]);return r.createElement("div",{style:u.container,ref:d},n()("div",{style:u.titleContainer},void 0,n()(Ee.Z,{style:u.title},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"}),n()(Nt.Z,{placement:Ln.u.Bottom,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:u.infoIcon})),renderTooltip:()=>n()(v.FormattedMessage,"all_time"!==o?{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:q.default.formatMessage(zn.xX[o])}}:{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})),n()(gm.f,{currentFilter:o,onChangeFilter:S})),n()(cd.rj,{gap:16},void 0,n()(cd.r8,{row:1,col:1},void 0,n()(pm,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:i,error:a,icon:dm.N,iconStyles:{height:48,width:48},title:n()(v.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:n()(mm,{abbreviateNumber:c<hm,num:m})}}),byline:n()(Ee.Z,{isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:n()(mm,{abbreviateNumber:c<hm,num:p})}}))})),n()(cd.r8,{row:1,col:2},void 0,n()(pm,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:i,error:a,icon:cm.j,iconStyles:{height:36,width:36},title:n()(v.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:n()(mm,{abbreviateNumber:c<hm,num:g})}}),byline:n()(Ee.Z,{isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:n()(mm,{abbreviateNumber:c<hm,num:h})}}))}))))}function vm(e){const{tooltipMessageDescriptor:t,columnHeader:i}=e;return n()(Nt.Z,{placement:Nt.Z.Placement.Top,renderTooltip:e=>r.createElement("div",e,r.createElement(v.FormattedMessage,t)),render:e=>r.createElement("div",e,q.default.formatMessage(i))})}function ym(e){let{blockStore:t}=e;window.__c={n:"PageCellActions"};const i=(0,xe.O7)(),a=(0,Ze.qz)(void 0,Zt.Z),o=(0,Fe.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const l={key:"actions",render:e=>r.createElement(rt.Z,e),items:[{key:"copy-link",render:e=>r.createElement(it.Z,s()({},e,{icon:(0,kt.N)(o.copyLinkIcon),title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})})),action:async function(){const e=(0,Pt.ZP)({store:t,pageVisitSource:Ct.tY.CopyLink});await It.RD({environment:i,stringValue:e,copiedMessage:It.tq.copiedLinkToClipboard}),a.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>r.createElement(it.Z,s()({},e,{icon:(0,cc.n)(o.openLinkIcon),title:n()(v.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})})),action:function(){const e=(0,Pt.ZP)({store:t,pageVisitSource:Ct.tY.LinkInPage});C.navigateToExternalURL({environment:i,url:e}),a.setState({open:!1})}}]};return n()(Bt.ZP,{popupType:st.kQ.Popup,alignmentToOrigin:st.ZP.Alignment.Center,placementToOrigin:st.ZP.Placement.Right,style:{width:248},render:()=>n()(nt.Z,{menuType:Xe.og.Popup,width:248},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:void 0,sections:[l]})),buttonPopupStore:a,renderOrigin:e=>r.createElement(Rt.Z,s()({icon:_t.o},e))})}const Sm=(0,v.defineMessages)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),bm={id:"page",headerTitle:n()(xm,{message:zn.y3.page}),renderCell:e=>n()(ze.o,{blockStore:e.navigableBlockStore,rightIcon:n()(ym,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},Mm={id:"location",headerTitle:n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>n()(wt,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},wm={id:"audience",headerTitle:n()(xm,{message:zn.y3.audience}),renderCell:e=>n()(Ee.Z,{},void 0,St(e.audience)),widthData:{width:140},sortable:!1},Cm={id:"views",headerTitle:n()(vm,{tooltipMessageDescriptor:Sm.views,columnHeader:zn.y3.allViews}),renderCell:e=>n()(Ee.Z,{},void 0,e.views.toLocaleString()),widthData:{width:100},sortable:!0},_m={id:"uniqueViews",headerTitle:n()(vm,{tooltipMessageDescriptor:Sm.uniqueViews,columnHeader:zn.y3.uniqueViews}),renderCell:e=>n()(Ee.Z,{},void 0,e.uniqueViews.toLocaleString()),widthData:{width:100},sortable:!0},km={id:"createdBy",headerTitle:n()(xm,{message:zn.y3.createdBy}),renderCell:e=>e.createdById?n()(di,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},Tm={id:"createdTime",headerTitle:n()(xm,{message:zn.y3.createdAt}),renderCell:e=>n()(We.T,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},Im=[bm,Cm,_m,Mm,wm,{id:"lastEditedBy",headerTitle:n()(xm,{message:zn.y3.lastEditedBy}),renderCell:e=>e.lastEditedById?n()(di,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:n()(xm,{message:zn.y3.lastEditedAt}),renderCell:e=>n()(We.T,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},km,Tm];function Pm(e){let{navigableBlockStores:t,analyticsByPageId:i,runNewSearch:a,sort:o,setSort:s,loadNextPage:l,loading:d,error:c}=e;window.__c={n:"ContentAnalyticsTable"};const u=(0,Ze.VK)((()=>t.map((e=>{var t,a,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,Oe.VP)(e),views:(null===(t=i.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(a=i.get(e.id))||void 0===a?void 0:a.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=i.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,i]),m=(0,r.useMemo)((()=>function(e){const t=Im.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id));return t?{column:t,sortAscending:"asc"===e.direction}:void 0}(o)),[o]),p=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:Im,theme:e,containerMarginTop:0})),[]),g=(0,Fe.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return c?n()($e,{error:c,runNewSearch:a}):r.createElement(r.Fragment,null,n()(Ve.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:Im,rows:u,sortState:m,onSortStateChanged:e=>{s(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",i=e.sortAscending?"asc":"desc";return{field:t,direction:i}}(e))},onScrollBottom:l,renderNoRowsComponent:()=>n()(Ee.Z,{isSmall:!0,style:g.emptyQuery},void 0,!d&&0===t.length&&n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})),styles:p}),d?n()(Ue.Z,{style:g.loadingSpinner}):null)}function xm(e){let{message:t}=e;window.__c={n:"FormatDefinedMessage"};const i=(0,v.useIntl)();return r.createElement(r.Fragment,null,i.formatMessage(t))}const Zm={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},Fm={field:"pageViews",direction:"desc"},Am=Qu,Em={filters:Zm,sort:Fm,timeRange:Am,navigableBlockStores:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};const Bm=(0,v.defineMessages)({placeholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function Rm(e){let{spaceStore:t,timeRange:i,filters:a,runNewSearch:o,setFilters:s,setTimeRange:r}=e;window.__c={n:"SearchInputsSection"};const l=(0,Ze.VK)((()=>dc.Z.state.teams),[]),d=(0,Fe.yK)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return n()("div",{style:d.container},void 0,n()(ga,{mode:ma.OnChange,query:a.query,setQueryFilter:function(e){s({query:e},{runSearchAfter:!0})},placeholderText:q.default.formatMessage(Bm.placeholder)}),n()("div",{style:d.filterPillsContainer},void 0,n()("div",{style:d.timeRangeContainer},void 0,n()(Ee.Z,{isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})),n()(gm.f,{currentFilter:i,onChangeFilter:r})),n()(va,{selectedTeamIds:a.teamIds,setSelectedTeamIds:function(e){s({teamIds:e})},onMenuClose:o,teamStores:l}),n()(Zi,{spaceStore:t,createdByFilterIds:a.createdBy,setCreatedByFilter:function(e){s({createdBy:e})},runNewSearch:o,includeGuests:!1}),n()(la,{lastEditedTime:a.lastEditedTime,createdTime:a.createdTime,setLastEditedTime:function(e){s({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){s({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})))}function Dm(e){var t;let{spaceStore:i,contentEngagement:a}=e;window.__c={n:"SpaceAnalyticsContentTab"};const o=(0,r.useRef)(!1),{loadNextPage:s,navigableBlockStores:l,analyticsByPageId:d,runNewSearch:c,setFilters:u,setTimeRange:p,timeRange:g,filters:h,sort:f,setSort:v,loading:y,error:S}=function(e){let{spaceStore:t}=e;const i=(0,xe.O7)(),[a,n]=(0,r.useState)(Em),o=(0,r.useRef)(Zm),s=(0,r.useRef)(Fm),l=(0,r.useRef)(Am),d=(0,r.useCallback)((async e=>{let{fetchFromFirstPage:r,ignoreSearchInputComparison:d}=e;const c=!m.Xy(a.filters,o.current)||!m.Xy(a.sort,s.current)||!m.Xy(a.timeRange,l.current);if(!d&&!c)return;o.current=a.filters,s.current=a.sort,l.current=a.timeRange;let u=a.loading,p=a.error,g=a.hasNextPage,h=a.paginationToken;if(r&&(n((e=>({...Em,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),u=Em.loading,p=Em.error,g=Em.hasNextPage,h=Em.paginationToken),!g||u)return;if(p)return;n((e=>({...e,loading:!0})));const f=await I.loadContentAnalytics(i,{spaceId:t.id,sort:a.sort,titleQuery:a.filters.query,filters:{inTeams:a.filters.teamIds,lastEditedTime:(0,ne.Hq)(a.filters.lastEditedTime),createdTime:(0,ne.Hq)(a.filters.createdTime),createdBy:a.filters.createdBy},timeRange:a.timeRange,startCursor:h});if("failed"===f.type)return void n((e=>({...e,loading:!1,error:f.error})));const v=f.data.results;n((e=>{const t=[],a=new Map(e.analyticsByPageId),n=new Set(e.navigableBlockStores.map((e=>e.id)));for(const s of v){const e=s.id,o=s.analytics;if(!n.has(e)){const n=new ft.G(i,{table:_a.iU,id:e});t.push(n),a.set(e,o)}}const o=[...e.navigableBlockStores,...t];return{...e,navigableBlockStores:o,analyticsByPageId:a,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:f.data.nextCursor,hasNextPage:Boolean(f.data.nextCursor)}}))}),[i,t,a.filters,a.sort,a.timeRange,a.loading,a.error,a.hasNextPage,a.paginationToken]);(0,r.useEffect)((()=>{a.shouldReRunSearch&&(n((e=>({...e,shouldReRunSearch:!1}))),d({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[a.shouldReRunSearch,d]);const c=(0,r.useCallback)((async()=>{a.shouldReRunSearch||await d({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[a.shouldReRunSearch,d]),u=(0,r.useCallback)((async e=>{await d({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[d]),p=(0,r.useCallback)(((e,t)=>{n((i=>({...i,filters:{...i.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const a of(0,A.Yd)(e))m.Xy(e[a],Zm[a])||b.uSc(i,{filter:a,value:"createdBy"===a||"teamIds"===a?e[a]:void 0})}),[i]),g=(0,r.useCallback)((e=>{n((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),b.e2(i,{daysFilter:e})}),[i]),h=(0,r.useCallback)((e=>{n((t=>({...t,sort:e,shouldReRunSearch:!0}))),b.jMN(i,{column:e.field,isAscending:"asc"===e.direction})}),[i]);return{...a,loadNextPage:c,runNewSearch:u,setFilters:p,setTimeRange:g,setSort:h}}({spaceStore:i}),M=(0,Fe.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),w=(0,Ze.VK)((()=>Boolean(i.canAdmin())),[i]);(0,r.useEffect)((()=>{o.current||(c(!0),o.current=!0)}),[c]);const C=(0,Ze.VK)((()=>i.getName()),[i]);return"NotFoundError"===(null==a||null===(t=a.error)||void 0===t?void 0:t.name)?n()(lm,{type:"empty",spaceName:C}):n()("div",{style:M.container},void 0,n()(fm,{data:a.data,loading:a.loading,error:a.error,daysFilter:a.daysFilter,setDaysFilter:a.setDaysFilter}),n()(Lm,{canAdmin:w,daysFilter:g}),n()(Rm,{spaceStore:i,runNewSearch:c,setFilters:u,filters:h,timeRange:g,setTimeRange:p}),n()(Pm,{navigableBlockStores:l,analyticsByPageId:d,runNewSearch:c,sort:f,setSort:v,loadNextPage:s,loading:y,error:S}))}function Lm(e){window.__c={n:"ContentTableHeader"};const t=(0,Fe.yK)((()=>({sectionTitle:{fontWeight:f.Z.fontWeight.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canAdmin:i,daysFilter:a}=e,o=n()("div",{style:t.sectionTitleSection},void 0,n()(Ee.Z,{style:t.sectionTitle},void 0,n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})),n()(Nt.Z,{placement:Nt.Z.Placement.Bottom,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo})),renderTooltip:()=>n()(v.FormattedMessage,"all_time"!==a?{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:q.default.formatMessage(zn.xX[a])}}:{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})}));return n()("div",{style:t.wrapper},void 0,o,i&&n()(nm,{style:t.exportButton,analyticsType:fe.Content}))}var Nm=i(50780);const Om=(0,c.I)("personCircle",{viewBox:"0 0 18 17",svg:n()("path",{d:"M8.99219 16.6797C10.0964 16.6797 11.1354 16.4688 12.1094 16.0469C13.0833 15.6302 13.9427 15.0495 14.6875 14.3047C15.4323 13.5599 16.0156 12.7005 16.4375 11.7266C16.8594 10.7526 17.0703 9.71354 17.0703 8.60938C17.0703 7.50521 16.8594 6.46615 16.4375 5.49219C16.0156 4.51823 15.4323 3.66146 14.6875 2.92188C13.9427 2.17708 13.0833 1.59375 12.1094 1.17188C11.1354 0.75 10.0938 0.539062 8.98438 0.539062C7.88021 0.539062 6.84115 0.75 5.86719 1.17188C4.89844 1.59375 4.04167 2.17708 3.29688 2.92188C2.55729 3.66146 1.97656 4.51823 1.55469 5.49219C1.13281 6.46615 0.921875 7.50521 0.921875 8.60938C0.921875 9.71354 1.13281 10.7526 1.55469 11.7266C1.97656 12.7005 2.55729 13.5599 3.29688 14.3047C4.04167 15.0495 4.90104 15.6302 5.875 16.0469C6.84896 16.4688 7.88802 16.6797 8.99219 16.6797ZM8.99219 15.0859C8.09635 15.0859 7.25521 14.9193 6.46875 14.5859C5.6875 14.2526 5 13.7891 4.40625 13.1953C3.81771 12.6016 3.35677 11.9141 3.02344 11.1328C2.6901 10.3516 2.52344 9.51042 2.52344 8.60938C2.52344 7.71354 2.6901 6.875 3.02344 6.09375C3.35677 5.30729 3.81771 4.61719 4.40625 4.02344C4.99479 3.42969 5.67969 2.96615 6.46094 2.63281C7.2474 2.29948 8.08854 2.13281 8.98438 2.13281C9.88542 2.13281 10.7266 2.29948 11.5078 2.63281C12.2943 2.96615 12.9844 3.42969 13.5781 4.02344C14.1719 4.61719 14.6354 5.30729 14.9688 6.09375C15.3021 6.875 15.4688 7.71354 15.4688 8.60938C15.4688 9.51042 15.3021 10.3516 14.9688 11.1328C14.6354 11.9141 14.1719 12.6016 13.5781 13.1953C12.9844 13.7891 12.2969 14.2526 11.5156 14.5859C10.7344 14.9193 9.89323 15.0859 8.99219 15.0859ZM14.2031 13.7656L14.1719 13.6328C14.0052 13.2474 13.6849 12.8776 13.2109 12.5234C12.7422 12.1641 12.1484 11.8724 11.4297 11.6484C10.7161 11.4193 9.90365 11.3047 8.99219 11.3047C8.09115 11.3047 7.28125 11.4193 6.5625 11.6484C5.84375 11.8724 5.2474 12.1641 4.77344 12.5234C4.30469 12.8776 3.98698 13.2448 3.82031 13.625L3.78906 13.7656C4.27865 14.2188 4.83333 14.599 5.45312 14.9062C6.07292 15.2188 6.69271 15.4557 7.3125 15.6172C7.9375 15.7786 8.4974 15.8594 8.99219 15.8594C9.49219 15.8594 10.0521 15.7786 10.6719 15.6172C11.2917 15.4557 11.9115 15.2188 12.5312 14.9062C13.151 14.599 13.7083 14.2188 14.2031 13.7656ZM8.99219 10.0156C9.4974 10.0208 9.95312 9.89583 10.3594 9.64062C10.7656 9.38021 11.0885 9.02604 11.3281 8.57812C11.5677 8.125 11.6875 7.61979 11.6875 7.0625C11.6875 6.54167 11.5651 6.0625 11.3203 5.625C11.0807 5.18229 10.7578 4.82812 10.3516 4.5625C9.95052 4.29688 9.4974 4.16406 8.99219 4.16406C8.49219 4.16406 8.03646 4.29688 7.625 4.5625C7.21875 4.82812 6.89583 5.18229 6.65625 5.625C6.41667 6.0625 6.29948 6.54167 6.30469 7.0625C6.3099 7.61979 6.42969 8.1224 6.66406 8.57031C6.90365 9.01302 7.22656 9.36458 7.63281 9.625C8.03906 9.88021 8.49219 10.0104 8.99219 10.0156Z"})});var Vm=i(76798);function Um(e){let{title:t,items:i,loading:a,error:o}=e;window.__c={n:"AnalyticsCardList"};const s=(0,Fe.yK)((e=>({title:{fontWeight:f.Z.fontWeight.semibold,marginBottom:8},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,padding:12}})),[]);return n()("div",{style:s.container},void 0,n()(Ee.Z,{style:s.title},void 0,t),a?r.createElement(r.Fragment,null,n()(zm,{}),n()(zm,{}),n()(zm,{}),n()(zm,{}),n()(zm,{})):o?r.createElement(r.Fragment,null,n()(Km,{})):i.map(((e,t)=>n()(Wm,{item:e},t))))}function Wm(e){let{item:t}=e;window.__c={n:"CardListItem"};const{store:i,caption:a}=t,o=(0,v.useIntl)(),s=Hm(),r=(0,Ze.VK)((()=>{switch(i.table){case"block":return n()("div",{style:s.nameAndIconContainer},void 0,n()(Ht.Z,{icon:i.getIcon(),size:18,isEmptyPage:!1,disabled:!0}),n()(Vm.Z,{store:i}));case"notion_user":return n()("div",{style:s.nameAndIconContainer},void 0,n()(ai.Z,{userStore:i,size:18}),n()(Ee.Z,{},void 0,i.getDisplayName(o)));case"team":const e=i.getName();return n()("div",{style:s.nameAndIconContainer},void 0,n()(Yt.p,{disabled:!0,store:i,size:20}),n()(Ee.Z,{},void 0,e));default:(0,A.t1)(i)}}),[i,s.nameAndIconContainer,o]);return n()("div",{style:s.container},void 0,n()(Ee.Z,{style:s.label},void 0,r),n()("div",{style:s.caption},void 0,n()(Ee.Z,{isSecondaryColor:!0,isSmall:!0},void 0,a)))}function zm(){window.__c={n:"LoadingCardListItem"};const e=Hm();return n()("div",{style:e.container},void 0,n()(Ee.Z,{style:e.label},void 0,n()(Zn.Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})),n()("div",{style:e.loadingCaption},void 0,n()(Zn.Z,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})))}function Km(){window.__c={n:"ErrorCardListItem"};const e=Hm();return n()("div",{style:e.container},void 0,n()(Ee.Z,{style:e.errorLabel},void 0,n()(v.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:n()("br",{})}})))}function Hm(){return(0,Fe.yK)((e=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:tn.ZP.red}})),[])}function Gm(e){let{data:t,loading:i,error:a,daysFilter:o,setDaysFilter:l}=e;window.__c={n:"ContentEngagement"};const d=(0,xe.O7)(),c=(0,Fe.yK)((e=>({title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[u,m]=(0,um.e)(),{pageViews:p,uniquePageViews:g,pageEdits:h,topPages:y}=t,S=(0,Ze.VK)((()=>y.map((e=>{let{pageId:t,pageViews:i}=e;return{store:new ft.G(d,{id:t,table:_a.iU}),caption:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:n()(mm,{abbreviateNumber:!1,num:i})}})}}))),[d,y]),M=(0,r.useCallback)((e=>{l(e),b.m0A(d,{filter:"content_engagement",daysFilter:e})}),[d,l]);return r.createElement("div",{style:c.container,ref:u},n()("div",{style:c.titleContainer},void 0,n()(Ee.Z,{style:c.title},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"}),n()(Nt.Z,{placement:Ln.u.Bottom,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:c.helpInfo})),renderTooltip:()=>n()(v.FormattedMessage,"all_time"!==o?{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:q.default.formatMessage(zn.xX[o])}}:{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})),n()(gm.f,{currentFilter:o,onChangeFilter:M})),n()(cd.rj,{gap:16},void 0,n()(cd.r8,{row:1,col:1,colEnd:3},void 0,n()(pm,{loading:i,error:a,icon:dm.N,textStyles:c.overviewCard,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:n()(mm,{abbreviateNumber:m<640,num:p})}})})),n()(cd.r8,{row:2,col:1,colEnd:3},void 0,n()(pm,{loading:i,error:a,icon:Om,textStyles:c.overviewCard,iconStyles:{height:18,width:18},title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:n()(mm,{abbreviateNumber:m<640,num:g})}})})),n()(cd.r8,{row:3,col:1,colEnd:3},void 0,n()(pm,{loading:i,error:a,icon:Nm.E,textStyles:c.overviewCard,iconStyles:{height:18,width:18},title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:n()(mm,{abbreviateNumber:m<640,num:h})}})})),n()(cd.r8,{row:1,rowEnd:4,col:3,colEnd:5},void 0,n()(Um,{loading:i,error:a,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:S}))))}var qm=i(9999);function jm(e){let{data:t,loading:i,error:a,daysFilter:o,setDaysFilter:l}=e;window.__c={n:"UserEngagement"};const d=(0,xe.O7)(),{activeMembersCount:c,previousActiveMembersCount:u,activeGuestsCount:m,previousActiveGuestsCount:p,topTeamspaces:g,topViewers:h,topEditors:y}=t,S=(0,Fe.yK)((e=>({title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{height:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[M,w]=(0,um.e)(),C=(0,r.useCallback)((e=>{b.m0A(d,{filter:"user_engagement",daysFilter:e}),l(e)}),[d,l]),_=(0,Ze.VK)((()=>g.map((e=>{let{teamspaceId:t,pageViews:i}=e;return{store:new ft.zX(d,{id:t,table:ht.e0}),caption:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:n()(mm,{abbreviateNumber:!0,num:i})}})}})).filter((e=>e.store.canRead())).slice(0,5)),[d,g]),k=(0,Ze.VK)((()=>h.map((e=>{let{userId:t,pageViews:i}=e;return{store:new ft.U6(d,{id:t,table:ti.KJ}),caption:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:n()(mm,{abbreviateNumber:!0,num:i})}})}})).slice(0,5)),[d,h]),T=(0,Ze.VK)((()=>y.map((e=>{let{userId:t,pageEdits:i}=e;return{store:new ft.U6(d,{id:t,table:ti.KJ}),caption:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:n()(mm,{abbreviateNumber:!0,num:i})}})}})).slice(0,5)),[d,y]);return r.createElement("div",{style:S.container,ref:M},n()("div",{style:S.titleContainer},void 0,n()(Ee.Z,{style:S.title},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),n()(Nt.Z,{placement:Ln.u.Bottom,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:S.helpInfo})),renderTooltip:()=>n()(v.FormattedMessage,"all_time"!==o?{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:q.default.formatMessage(zn.xX[o])}}:{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})),n()(gm.f,{currentFilter:o,onChangeFilter:C})),n()(cd.rj,{gap:16},void 0,n()(cd.r8,{row:1,col:1},void 0,n()(pm,{style:S.summaryCard,loading:i,error:a,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:n()(mm,{abbreviateNumber:w<640,num:c})}}),byline:void 0!==u?n()(Ym,{userType:"members",daysFilter:o,count:c,previousCount:u}):null})),n()(cd.r8,{row:1,col:2},void 0,n()(pm,{style:S.summaryCard,loading:i,error:a,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:n()(mm,{abbreviateNumber:w<640,num:m})}}),byline:void 0!==p?n()(Ym,{userType:"guests",daysFilter:o,count:m,previousCount:p}):null}))),n()(cd.rj,{gap:16},void 0,n()(cd.r8,{row:1,col:1},void 0,n()(Um,{loading:i,error:a,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:_})),n()(cd.r8,{row:1,col:2},void 0,n()(Um,{loading:i,error:a,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:k})),n()(cd.r8,{row:1,col:3},void 0,n()(Um,{loading:i,error:a,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:T}))))}function Ym(e){let{userType:t,daysFilter:i,count:a,previousCount:o}=e;window.__c={n:"MetricsChangeMessage"};const s=0===a&&0===o?0:Math.round((a-o)/o*100);let r;r=s===1/0?function(e,t,i){if("all_time"===i)return n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return n()(v.FormattedMessage,"guests"===e?{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:zn.ez[i].toLocaleString()}}:{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:zn.ez[i].toLocaleString()}})}(t,a,i):function(e,t){switch(t){case"all_time":return n()(v.FormattedMessage,0===e?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}:e>0?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}:{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return n()(v.FormattedMessage,0===e?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}:e>0?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}:{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return n()(v.FormattedMessage,0===e?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}:e>0?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}:{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return n()(v.FormattedMessage,0===e?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}:e>0?{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}:{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,A.t1)(t)}}(s,i);const l=s>0?(0,qm.J)({height:12,width:12,fill:"currentColor"}):s<0?(0,qm.J)({height:12,width:12,transform:"rotate(90deg)",fill:"currentColor"}):void 0,d=(0,Fe.yK)((e=>({text:{color:s>0?e.accentColors.green[500]:s<0?e.accentColors.red[500]:e.lightTextColor,display:"flex",alignItems:"center",gap:4}})),[s]);return n()("span",{style:d.text},void 0,l,r)}function $m(e){var t,i;let{onUserTabFilterChange:a,spaceStore:o,contentEngagement:s,userEngagement:r}=e;window.__c={n:"SpaceAnalyticsOverviewTab"};const l=(0,Fe.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),d=(0,Ze.VK)((()=>o.getName()),[o]);if("NotFoundError"===(null===(t=s.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(i=r.error)||void 0===i?void 0:i.name))return n()(lm,{type:"empty",spaceName:d});return n()("div",{style:l.container},void 0,n()(jm,{data:r.data,loading:r.loading,error:r.error,daysFilter:r.daysFilter,setDaysFilter:function(e){a({graphFilter:"all_time"===e?"last_90_days":e}),r.setDaysFilter(e)}}),n()(Gm,{data:s.data,loading:s.loading,error:s.error,daysFilter:s.daysFilter,setDaysFilter:s.setDaysFilter}))}const Qm={field:"num_searches",direction:"desc"},Jm=Qu,Xm={sort:Qm,timeRange:Jm,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};const ep=(0,v.defineMessages)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),tp=(0,v.defineMessages)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}}),ip={queryText:{id:"queryText",headerTitle:q.default.formatMessage(tp.queryText),renderCell:e=>n()(Ee.Z,{},void 0,e.queryText),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:n()(vm,{tooltipMessageDescriptor:ep.numSearches,columnHeader:tp.numSearches}),renderCell:e=>n()(op,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:n()(vm,{tooltipMessageDescriptor:ep.numUniqueUsers,columnHeader:tp.numUniqueUsers}),renderCell:e=>n()(op,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:n()(vm,{tooltipMessageDescriptor:ep.ctr,columnHeader:tp.ctr}),renderCell:e=>n()(op,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}},ap=(0,A.Yd)(ip).map((e=>ip[e]));function np(e){let{searchAnalyticsDataList:t,runNewSearch:i,sort:a,setSort:o,loadNextPage:s,loading:l,error:d}=e;window.__c={n:"SpaceAnalyticsTable"};const c=(0,Ze.VK)((()=>t.map((e=>({id:e.queryText,isClickable:!1,...e})))),[t]),u=(0,r.useMemo)((()=>function(e){const t=zn.Fi[e.field];if(!t)return;return{column:ip[t],sortAscending:"asc"===e.direction}}(a)),[a]),m=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:ap,theme:e,containerMarginTop:0})),[]),p=(0,Fe.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return d?n()($e,{error:d,runNewSearch:i}):n()("div",{},void 0,n()(Ve.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:ap,rows:c,sortState:u,onSortStateChanged:e=>{o(function(e){const t=zn.hx[e.column.id],i=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:i};return{field:t,direction:i}}(e))},onScrollBottom:s,renderNoRowsComponent:()=>n()(Ee.Z,{isSmall:!0,style:p.emptyQuery},void 0,!l&&0===t.length&&n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})),styles:m}),l?n()(Ue.Z,{style:p.loadingSpinner}):null)}function op(e){let{value:t,isPercentage:i}=e;window.__c={n:"CenteredNumericCell"};const a=(0,Fe.yK)((e=>({centered:{width:"100%",textAlign:"center"}})),[]),o=i?`${t}%`:t;return n()(Ee.Z,{style:a.centered},void 0,o)}function sp(e){window.__c={n:"SpaceAnalyticsSearchTab"};const{spaceStore:t}=e,i=(0,Fe.yK)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:f.Z.fontWeight.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4}})),[]),a=(0,r.useRef)(!1),{searchAnalyticsDataList:o,timeRange:l,sort:d,loading:c,error:u,loadNextPage:p,runNewSearch:g,setTimeRange:h,setSort:y}=function(e){let{spaceStore:t}=e;const i=(0,xe.O7)(),[a,n]=(0,r.useState)(Xm),o=(0,r.useRef)(Qm),s=(0,r.useRef)(Jm),l=(0,v.useIntl)(),d=(0,r.useCallback)((async e=>{let{fetchFromFirstPage:r,ignoreSearchInputComparison:l}=e;const d=!m.Xy(a.sort,o.current)||!m.Xy(a.timeRange,s.current);if(!l&&!d)return;o.current=a.sort,s.current=a.timeRange;let c=a.loading,u=a.error,p=a.hasNextPage,g=a.paginationToken;if(r&&(n((e=>({...Xm,timeRange:e.timeRange,sort:e.sort}))),c=Xm.loading,u=Xm.error,p=Xm.hasNextPage,g=Xm.paginationToken),!p||c)return;if(u)return;n((e=>({...e,loading:!0})));const h=await I.loadSearchAnalytics(i,{spaceId:t.id,sort:a.sort,timeRange:a.timeRange,startCursor:g});if("failed"===h.type)return void n((e=>({...e,loading:!1,error:h})));const f=h.data.results;n((e=>{const t=[],i=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of f){const e=n.queryText;i.has(e)||(t.push(n),i.add(e))}const a=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:a,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:h.data.nextCursor,hasNextPage:Boolean(h.data.nextCursor)}}))}),[i,t,a.sort,a.timeRange,a.loading,a.error,a.hasNextPage,a.paginationToken]);(0,r.useEffect)((()=>{a.shouldReRunSearch&&(n((e=>({...e,shouldReRunSearch:!1}))),d({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[a.shouldReRunSearch,d]);const c=(0,r.useCallback)((async()=>{a.shouldReRunSearch||await d({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[a.shouldReRunSearch,d]),u=(0,r.useCallback)((async e=>{await d({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[d]),p=(0,r.useCallback)((e=>{"all_time"!==e&&(n((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),b.yef(i,{daysFilter:e}))}),[i]),g=(0,r.useCallback)((e=>{n((t=>({...t,sort:e,shouldReRunSearch:!0}))),b.$fF(i,{column:e.field,isAscending:"asc"===e.direction})}),[i]),h=(0,r.useMemo)((()=>{if(a.error)return new Error((0,Ba.wf)(l,a.error))}),[a.error,l]);return{...a,error:h,loadNextPage:c,runNewSearch:u,setTimeRange:p,setSort:g}}({spaceStore:t});(0,r.useEffect)((()=>{a.current||(g(!0),a.current=!0)}),[g]);const S=(0,Ze.VK)((()=>t.getName()),[t]);return"NotFoundError"===(null==u?void 0:u.name)?n()(lm,{type:"empty",spaceName:S}):r.createElement(r.Fragment,null,n()("div",{style:i.header},void 0,n()(Ee.Z,{style:i.sectionTitle},void 0,n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),n()(Nt.Z,{placement:Nt.Z.Placement.Bottom,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:i.helpInfo})),renderTooltip:()=>n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:q.default.formatMessage(zn.xX[l])}})})),n()(gm.f,{currentFilter:l,onChangeFilter:h,hideAllTime:!0})),n()(np,{searchAnalyticsDataList:o,runNewSearch:g,sort:d,setSort:y,loadNextPage:p,loading:c,error:u}))}var rp=i(30251);function lp(e){let{data:t,loading:i,error:a,daysFilter:o,setDaysFilter:l}=e;window.__c={n:"UsersAnalyticsSummaries"};const[d,c]=(0,um.e)(),u=(0,Fe.yK)((e=>({title:{fontWeight:f.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:m,previousActiveMembersCount:p,activeGuestsCount:g,previousActiveGuestsCount:h}=t;return r.createElement("div",{style:u.container,ref:d},n()("div",{style:u.titleContainer},void 0,n()(Ee.Z,{style:u.title},void 0,n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),n()(Nt.Z,{placement:Ln.u.Bottom,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:u.helpInfo})),renderTooltip:()=>n()(v.FormattedMessage,"all_time"!==o?{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:q.default.formatMessage(zn.xX[o])}}:{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})),n()(gm.f,{currentFilter:o,onChangeFilter:l})),n()(cd.rj,{gap:16},void 0,n()(cd.r8,{row:1,col:1},void 0,n()(pm,{style:u.summaryCard,loading:i,error:a,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:n()(mm,{abbreviateNumber:c<640,num:m})}}),byline:void 0!==p?n()(Ym,{userType:"members",daysFilter:o,count:m,previousCount:p}):null})),n()(cd.r8,{row:1,col:2},void 0,n()(pm,{style:u.summaryCard,loading:i,error:a,title:n()(v.FormattedMessage,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:n()(mm,{abbreviateNumber:c<640,num:g})}}),byline:void 0!==h?n()(Ym,{userType:"guests",daysFilter:o,count:g,previousCount:h}):null}))))}var dp=i(44643),cp=i(88775);const up=(0,v.defineMessages)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),mp=(0,v.defineMessages)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),pp={user:{id:"user",renderCell:function(e){window.__c={n:"UserCell"};const t=(0,Fe.yK)((e=>({container:{height:52}})),[]);return n()(En.Z,{containerStyle:t.container,actorStore:e.userStore,spaceRole:e.role&&(0,En.K)(e.role)})},headerTitle:q.default.formatMessage(mp.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){window.__c={n:"PageViewsCell"};const{page_views:t}=e,i=(0,Fe.yK)((e=>({eyeHideIcon:{width:20,height:20,color:e.lightIconColor},cell:{marginLeft:10}})),[]);if(void 0===t)return n()(Nt.Z,{placement:Nt.Z.Placement.Bottom,render:e=>r.createElement("div",e,(0,dp.L)(i.eyeHideIcon)),renderTooltip:e=>n()(v.FormattedMessage,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return n()(Ee.Z,{},void 0,t)},headerTitle:n()(vm,{tooltipMessageDescriptor:up.page_views,columnHeader:mp.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return n()(Ee.Z,{},void 0,t)},headerTitle:n()(vm,{tooltipMessageDescriptor:up.page_edits,columnHeader:mp.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let i;i=t?n()(We.T,{dateTs:t}):n()(Ee.Z,{isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"}));return n()("div",{},void 0,i)},headerTitle:q.default.formatMessage(mp.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{userStore:t,role:i}=e;if(!i)return n()(Ee.Z,{},void 0,n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"}));return n()(cp.Z,{member:{userId:t.id,role:i}})},headerTitle:q.default.formatMessage(mp.teams),widthData:{width:50},sortable:!1}};const gp=(0,A.Yd)(pp).map((e=>pp[e]));function hp(e){window.__c={n:"UsersTable"};const t=(0,xe.O7)(),[i,a]=(0,r.useState)(25),{usersAndStats:o,filter:s,onUserTabFilterChange:l,usersAndStatsError:d}=e,c=(0,Ze.VK)((()=>{const{currentSpaceStore:e}=B.default.state,t=(null==e?void 0:e.getPermissionItems().filter(gt.jg))||[],i={};for(const a of t)i[a.user_id]=a.role;return i}),[]),[u,m]=(0,r.useState)({column:pp.last_active,sortAscending:!1}),p=(0,r.useCallback)((e=>{b.gEE(t,{column:e.column.id,isAscending:e.sortAscending}),m(e)}),[m,t]),g=o.map((e=>{let{userStore:t,stats:i}=e;return{id:i.userId,userStore:t,isClickable:!1,last_active:i.lastActive,page_views:i.numPageViews,page_edits:i.numPageEdits,role:c[i.userId]}})).sort(function(e){switch(e.column.id){case"last_active":return(t,i)=>(0,zn.Zj)(t.last_active,i.last_active,e.sortAscending);case"page_views":return(t,i)=>(0,zn.yM)(t.page_views,i.page_views,e.sortAscending);case"page_edits":return(t,i)=>e.sortAscending?t.page_edits-i.page_edits:i.page_edits-t.page_edits;default:return(e,t)=>0}}(u)),h=(0,r.useMemo)((()=>g.slice(0,i)),[g,i]),f=(0,Fe.yK)((e=>({error:{color:tn.ZP.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginRight:5}})),[]);const y=(0,r.useCallback)((e=>{b.IwD(t,{daysFilter:e}),l({tableFilter:e})}),[t,l]),S=(0,Fe.yK)((e=>(0,Ve.b)({columnRenderInfo:gp,theme:e,containerMarginTop:0})),[]);return r.createElement(r.Fragment,null,d&&n()(Ee.Z,{isMultiline:!1,style:f.error},void 0,d),n()("div",{style:f.dateFilterPill},void 0,n()(Ee.Z,{isSecondaryColor:!0,style:f.timeFilterDescription},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})),n()(gm.f,{currentFilter:s,onChangeFilter:y})),n()(Ve.D,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:u,onSortStateChanged:p,columnRenderInfo:gp,rows:h,renderNoRowsComponent:()=>n()("div",{},void 0,"N/A"),styles:S,onScrollBottom:function(){i<o.length&&a(i+25)}}))}function fp(e){var t,i;let{spaceStore:a,usersTabData:o,onUserTabFilterChange:l,userEngagement:d}=e;window.__c={n:"SpaceAnalyticsUsersTab"};const[c,u]=(0,um.e)(),m=(0,Fe.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},sectionTitle:{fontWeight:f.Z.fontWeight.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-around"},numUsersCaption:{display:"flex"},overviewText:{textAlign:"center"},error:{color:tn.ZP.red},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"},tooltip:{marginLeft:3},infoIcon:{height:14,width:14,color:e.mediumTextColor}})),[]),p=(0,xe.O7)(),g=(0,v.useIntl)(),h=(0,r.useCallback)((e=>{b.KCu(p,{daysFilter:e});l({graphFilter:"all_time"===e?"last_90_days":e}),d.setDaysFilter(e)}),[l,d,p]),y=(0,Ze.VK)((()=>a.getName()),[a]);if("NotFoundError"===(null==o||null===(t=o.usersAndStatsError)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(i=d.error)||void 0===i?void 0:i.name))return n()(lm,{type:"empty",spaceName:y});const S=Math.floor(u-8);return n()("div",{style:m.container},void 0,n()(lp,{data:d.data,loading:d.loading,error:d.error,daysFilter:d.daysFilter,setDaysFilter:h}),n()(vp,{},void 0,r.createElement("div",{ref:c},o?n()(yp,{width:S,dailyUsersData:o.dailyUsersData,userEngagementDaysFilter:d.daysFilter,daysFilter:o.graphFilter,dailyUsersError:o.dailyUsersError&&tm(o.dailyUsersError,g)}):n()(Sp,{}))),n()("div",{style:m.tableHeader},void 0,n()("div",{style:m.sectionTitleLeft},void 0,n()(Ee.Z,{style:m.sectionTitle},void 0,n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})),n()(Nt.Z,{placement:Ln.u.Bottom,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo})),renderTooltip:()=>o&&"all_time"!==o.tableFilter?n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:q.default.formatMessage(zn.xX[o.tableFilter])}}):n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})),n()(nm,{analyticsType:fe.Users})),o?n()(hp,{filter:o.tableFilter,usersAndStats:o.usersAndStats,onUserTabFilterChange:l,usersAndStatsError:o.usersAndStatsError&&tm(o.usersAndStatsError,g)}):null)}function vp(e){window.__c={n:"DisplayBox"};const t=(0,Fe.yK)((e=>({border:{borderRadius:3,overflow:"hidden",border:`1px solid ${e.regularDividerColor}`,backgroundColor:e.contentBackground,color:e.regularTextColor,padding:20}})),[]);return n()("div",{style:t.border},void 0,e.children)}function yp(e){window.__c={n:"UsersOverTimeGraph"};const{width:t,dailyUsersData:i,userEngagementDaysFilter:a,daysFilter:o,dailyUsersError:l}=e,d=(0,Fe.yK)((e=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:f.Z.fontSize.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24},graphCaption:{fontSize:f.Z.fontSize.UISmall.desktop},graphTooltip:{marginLeft:5,width:14,height:14},helpInfo:{marginLeft:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:tn.ZP.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[]),{blueLayer:c}=(0,rp.useTimeSeriesPalette)(),u=(0,Ze.VK)((()=>{if(0===i.length)return;return{startDate:i[0].ds,endDate:i[i.length-1].ds}}),[i]),m=(0,Ze.VK)((()=>i.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[i]);let p;return p=!u||i.length<3?n()("div",{style:d.emptyGraphBody},void 0,n()(Ee.Z,{isSecondaryColor:!0},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"}))):n()(xt.LazyTimeSeries,{startDate:u.startDate,endDate:u.endDate,width:t,data:m,height:300,layers:[{key:"active_members",...c,renderLabel:e=>n()(v.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>n()("div",{style:d.graphSubLabel},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:q.default.formatMessage(zn.xX[o])}}))}),r.createElement(r.Fragment,null,n()("div",{style:d.graphHeader},void 0,n()(Ee.Z,{style:d.graphTitle},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===a&&n()(Nt.Z,{placement:Ln.u.Bottom,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:d.helpInfo})),renderTooltip:()=>n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})}))),l&&n()(Ee.Z,{isMultiline:!1,style:d.error},void 0,l),p)}function Sp(){return n()("div",{},void 0,n()(Zn.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),n()(Zn.Z,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]}))}const bp={[fe.Overview]:n()(v.FormattedMessage,{id:"workspaceAnalyticsTabs.overview.title",defaultMessage:"Overview"}),[fe.Users]:n()(v.FormattedMessage,{id:"workspaceAnalyticsTabs.members.title",defaultMessage:"Members"}),[fe.Content]:n()(v.FormattedMessage,{id:"workspaceAnalyticsTabs.content.title",defaultMessage:"Content"}),[fe.Search]:n()(v.FormattedMessage,{id:"workspaceAnalyticsTabs.search.title",defaultMessage:"Search"})};const Mp=function(e){let{spaceStore:t}=e;window.__c={n:"SpaceAnalytics"};const i=(0,Fe.yK)((e=>({headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:f.Z.fontWeight.medium,display:"flex",justifyContent:"space-between"},title:{display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[]),a=(0,xe.O7)(),o=(0,Ze.VK)((()=>{var e;return null===(e=B.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),l=function(e){let{spaceId:t}=e;const i=(0,xe.O7)(),[a,n]=(0,r.useState)("last_90_days"),[{status:o,value:s,error:l}]=(0,Rs.r5)((async()=>{const e=await I.getContentEngagementAnalytics(i,{spaceId:t,daysFilter:a});switch(e.type){case"success":return{pageViews:e.data.pageViews,uniquePageViews:e.data.uniquePageViews,pagesCreated:e.data.pagesCreated,pageEdits:e.data.pageEdits,topPages:e.data.topPages};case"failed":throw e.body;default:(0,A.t1)(e)}}),[i,t,a]);return{data:(0,r.useMemo)((()=>s||im),[s]),loading:"pending"===o||"idle"===o,error:l,daysFilter:a,setDaysFilter:n}}({spaceId:t.id}),d=function(e){let{spaceStore:t,userId:i}=e;const a=(0,xe.O7)(),[n,o]=(0,r.useState)("last_90_days"),[{status:s,value:l,error:d}]=(0,Rs.r5)((async()=>{if(!i||!(0,Go.wv)({permissions:t.getPermissionItems()},i))return am;const e=await I.getUserEngagementAnalytics(a,{spaceId:t.id,daysFilter:n});switch(e.type){case"success":return{activeMembersCount:e.data.activeMembersCount,previousActiveMembersCount:e.data.previousActiveMembersCount,activeGuestsCount:e.data.activeGuestsCount,previousActiveGuestsCount:e.data.previousActiveGuestsCount,topTeamspaces:e.data.topTeamspaces,topViewers:e.data.topViewers,topEditors:e.data.topEditors};case"failed":throw e.body;default:(0,A.t1)(e)}}),[a,t,i,n]);return{data:(0,r.useMemo)((()=>l||am),[l]),loading:"pending"===s||"idle"===s,error:d,daysFilter:n,setDaysFilter:o}}({spaceStore:t,userId:o}),[c,u]=(0,Ze.AF)(ye),m=(0,Ze.VK)((()=>Boolean(null==t?void 0:t.getSettings().disable_page_analytics)),[t]),p=(0,Ze.VK)((()=>null==t?void 0:t.getName()),[t]),g=(0,r.useCallback)((async e=>{await async function(e){var t,i,a;const{environment:n,spaceStore:o,spaceAnalyticsStore:s,setState:r,graphFilter:l,tableFilter:d}=e,c=l||(null===(t=s.usersTabData)||void 0===t?void 0:t.graphFilter)||Qu,u=d||(null===(i=s.usersTabData)||void 0===i?void 0:i.tableFilter)||Qu,m=(null===(a=s.usersTabData)||void 0===a?void 0:a.userTableSort)||Ju,[p,g]=await Promise.all([Xu({environment:n,filter:c,spaceId:o.id,spaceAnalyticsStore:s}),em({environment:n,filter:u,sort:m,spaceStore:o,spaceAnalyticsStore:s})]),h=(0,Aa.Rp)(p)||!p?[]:p,f=(0,Aa.Rp)(g)||!g?[]:g;r({currentSpaceId:o.id,currentTab:s.currentTab,usersTabData:{graphFilter:c,tableFilter:u,userTableSort:m,dailyUsersError:(0,Aa.Rp)(p)?p:void 0,dailyUsersData:h,usersAndStatsError:(0,Aa.Rp)(g)?g:void 0,usersAndStats:f}})}({environment:a,spaceStore:t,spaceAnalyticsStore:c,setState:u,graphFilter:e.graphFilter,tableFilter:e.tableFilter})}),[a,t,c,u]),h=(0,r.useCallback)((e=>{b.nKJ(a,{tab:e}),u({...c,currentTab:e})}),[u,c,a]),y=(0,Ze.VK)((()=>{const e=[];return function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(fe.Overview),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(fe.Users),e.push(fe.Content),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(fe.Search),e}),[t]),S=(0,Ze.VK)((()=>y.length>1),[y]),M=c.currentTab||y[0];(0,r.useEffect)((()=>{!async function(){const e=t.id;e&&ye.shouldRefreshState(e)&&(M===fe.Users?await g({graphFilter:"last_90_days",tableFilter:"last_90_days"}):M===fe.Content||M===fe.Overview||M===fe.Search||(0,A.t1)(M))}()}));const w=(0,r.useCallback)((()=>{C.navigateToExternalURL({environment:a,url:(0,Y.UY)("guides.workspaceAnalytics")})}),[a]),_=(0,Ze.VK)((()=>t.getCreatedTime()<16593264e5),[t]),k=y.map((e=>bp[e])),T=m?n()(lm,{type:"disabled",spaceName:p}):r.createElement(r.Fragment,null,S&&n()(bs.Z,{tabs:k,selectedIndex:y.indexOf(M),onChange:e=>{h(y[e])},style:i.tabsStyle}),function(e){const{currentTab:t,spaceAnalyticsStore:i,onUserTabFilterChange:a,spaceStore:o}=e;switch(t){case fe.Content:return n()(Dm,{spaceStore:o,contentEngagement:e.contentEngagementData});case fe.Users:return n()(fp,{spaceStore:o,usersTabData:i.usersTabData,onUserTabFilterChange:a,userEngagement:e.userEngagementData});case fe.Overview:return n()($m,{contentEngagement:e.contentEngagementData,userEngagement:e.userEngagementData,spaceStore:o,onUserTabFilterChange:a});case fe.Search:return n()(sp,{spaceStore:o});default:(0,A.t1)(t)}}({currentTab:M,spaceAnalyticsStore:c,onUserTabFilterChange:g,spaceStore:t,contentEngagementData:l,userEngagementData:d}));return n()(Be.Z,{},void 0,n()(Re.Z,{large:!0,style:i.headingStyle},void 0,n()("div",{style:i.title},void 0,n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.title",defaultMessage:"Workspace analytics"}),_&&n()(Nt.Z,{placement:Ln.u.Right,render:e=>r.createElement(ll.Z,s()({},e,{href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:i.helpInfo})),renderTooltip:()=>n()(v.FormattedMessage,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",defaultMessage:"Data available from August 1, 2022 onwards"})})),n()(Le.Z,{isSmall:!0,onClick:w,icon:zs.m},void 0,n()(v.FormattedMessage,{id:"workspaceAnalytics.title.helpButton",defaultMessage:"Learn more"}))),Be.Z.renderDivider(),T)};var wp=i(11751),Cp=i(86080);var _p=i(91309);class kp extends D.default{getInitialState(){return{churnSurveyModalOpen:!1,page:"default"}}}const Tp=kp;var Ip=i(13630);const Pp=function(e){let{handleExportClick:t}=e;window.__c={n:"ExportSpaceTab"};const i=(0,Ze.VK)((()=>B.default.state),[]),{currentSpaceStore:a}=i,o=(0,Ze.VK)((()=>Ip.Z.state),[]),s=(0,xe.O7)();return(0,r.useEffect)((()=>{De.zh({environment:s,spaceId:null==a?void 0:a.id})}),[null==a?void 0:a.id,s]),n()(r.Fragment,{},void 0,n()(Re.Z,{},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.exportContentSection.title",defaultMessage:"Export content"})),n()("div",{style:{display:"flex",alignItems:"center",gap:8}},void 0,n()(Le.Z,{disabled:!!o.count,isLarge:!0,onClick:t},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.exportContentSection.exportButton.label",defaultMessage:"Export all workspace content"})),o.count?n()(pc.gq,{gap:4},void 0,n()(Ue.Z,{}),n()(Ee.Z,{isSmall:!0},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.exportContentSection.exportInProgress",defaultMessage:"Export in progress"}))):r.createElement(r.Fragment,null)),n()("div",{style:{height:12}}),n()(ll.Z,{title:n()(v.FormattedMessage,{id:"spaceBasicSettings.exportContentSection.helpButton.caption",defaultMessage:"Learn about exporting workspaces."}),href:(0,Y.UY)("guides.exportWorkspace"),analyticsFrom:"space_settings"}),Be.Z.renderDivider())};var xp=i(44071),Zp=i(33411);const Fp=(0,v.defineMessages)({workspaceDomainInputPlaceholder:{id:"spaceBasicSettingsDomain.domainSection.workspaceDomainInput.placeholder",defaultMessage:"Your domain"},copyDomainTooltip:{id:"spaceBasicSettingsDomain.workspaceDomain.tooltip",defaultMessage:"Click to copy link"}}),Ap=()=>{window.__c={n:"AvailableField"};const e=(0,Fe.Fg)();return n()("div",{style:{color:e.invoiceGreen,display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px"}},void 0,(0,uc.r)({height:16,width:16,margin:"0 4px 0 8px",color:e.invoiceGreen}),n()("span",{},void 0,n()(v.FormattedMessage,{defaultMessage:"Available",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.available"})))},Ep=()=>n()("div",{style:{color:tn.ZP.red,display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px"}},void 0,(0,bl.t)({height:16,width:16,margin:"0 4px 0 8px"}),n()("span",{},void 0,n()(v.FormattedMessage,{defaultMessage:"Used",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.used"}))),Bp=()=>n()("div",{style:{color:tn.ZP.red,display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px"}},void 0,(0,bl.t)({height:16,width:16,margin:"0 4px 0 8px"}),n()("span",{},void 0,n()(v.FormattedMessage,{defaultMessage:"Not allowed",id:"spaceBasicSettings.domainSection.workspaceDomainInput.validationMessage.notAllowed"}))),Rp=()=>n()(Zp.Z,{show:!0,showDelay:500,showHold:300,render:()=>n()(Ue.Z,{style:{textAlign:"center",visibility:"visible",display:"inline",marginLeft:8}})}),Dp=e=>{window.__c={n:"SpaceBasicSettingsDomain"};const[t,i]=(0,Ze.AF)(e.spaceBasicSettingsStore),{domain:a,domainState:o}=t,l=(0,xe.O7)(),d=(0,Fe.Fg)(),[c,u]=(0,r.useState)(!0),m=r.createRef();return r.createElement(r.Fragment,null,n()(Re.Z,{},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.domainSection.title",defaultMessage:"Domain"})),n()("div",{style:{display:"flex",alignItems:"center"}},void 0,n()("div",{style:{background:d.inputBackground,borderRadius:3,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",display:"flex"}},void 0,r.createElement(Qi.Z,{type:"text",style:{background:"none",boxShadow:"none",padding:"4px 6px",width:255},ref:m,value:a,placeholder:q.default.formatMessage(Fp.workspaceDomainInputPlaceholder),readOnly:!e.canAdminSpaceStore,onChange:e.handleSpaceUrlChange,onFocus:e=>{u(!1),e.target.select()}})),c&&e.domainIsAutogenerated&&n()("div",{style:{color:tn.ZP.blue,fontSize:f.Z.fontSize.UIRegular.desktop,fontWeight:500,textAlign:"right",padding:"4px 6px",whiteSpace:"nowrap"},onClick:()=>{var e;null===(e=m.current)||void 0===e||e.focusInput(),u(!1),i({...t,domain:""})}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.changeDomain.cta.text",defaultMessage:"Set your own"})),a&&"available"===o&&n()(Ap,{}),"inuse"===o&&n()(Ep,{}),"disallowed"===o&&n()(Bp,{}),"loading"===o&&Rp()),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4}},void 0,((e,t)=>{const i=t=>n()(Nt.Z,{delayThreshold:0,renderTooltip:()=>q.default.formatMessage(Fp.copyDomainTooltip),render:i=>r.createElement(ys.Z,s()({onClick:()=>{It.RD({environment:e,stringValue:t,copiedMessage:It.tq.copiedLinkToClipboard})}},i),t)});return n()("div",{style:{paddingTop:8}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.domainSection.workspaceDomainInput.viewPublicPage.caption",defaultMessage:"Pages shared to web will be under {linkText}.",values:{linkText:i(`${t}.${Ye.default.publicDomainName}`)}}),n()("div",{style:{paddingTop:6}}),n()(v.FormattedMessage,{id:"spaceBasicSettings.domainSection.workspaceDomainInput.joinWorkspace.caption",defaultMessage:"Anyone with an allowed email domain can join this workspace via {linkText}.",values:{linkText:i(`${window.location.host}/${t}`)}}))})(l,a)))};var Lp=i(35840);const Np=e=>{window.__c={n:"SpaceBasicSettingsPublicHomePageInputMenu"};const t=(0,v.useIntl)(),i=(0,Fe.Fg)(),a=(0,xe.O7)(),o=(0,Ze.VK)((()=>(0,$.M9)(a)),[a]),s=!Boolean(o),[l,d]=(0,Ze.AF)(he);return n()("div",{onClick:()=>{o&&Jr.y(a,{from:"public_domain_home_page",for:o})}},void 0,r.createElement(Qi.Z,{type:"text",ref:e.textInputRef,style:{background:i.inputBackground,borderRadius:3,boxShadow:"rgb(15 15 15 / 10%) 0px 0px 0px 1px inset",display:"flex",padding:"4px 6px"},value:l.query,onChange:e=>{d({...l,query:e.target.value})},onFocus:()=>{s&&d({...l,openDropdown:!0})},disabled:!s,left:(0,Lp.R)({fill:i.mediumIconColor,width:16,height:16,marginRight:8,marginLeft:8,flexGrow:0,flexShrink:0}),placeholder:t.formatMessage({defaultMessage:"Select a page shared to web",id:"spaceBasicSettings.PublicHomePageSection.input.placeholder"})}))};var Op=i(29026),Vp=i(11470);const Up=()=>n()(Zp.Z,{show:!0,showDelay:500,showHold:300,render:()=>n()(Ue.Z,{style:{textAlign:"center",visibility:"visible",display:"inline",marginLeft:8}})}),Wp=async(e,t)=>{if(!Ae.Z.state.online)return[];const i=await Ea.UJ({environment:t,query:e,source:"public_home_page_menu",limit:Op.Xv});return""===e?i.splice(0,5):i},zp=e=>{window.__c={n:"SpaceBasicSettingsPublicHomePageSearchResults"};const t=(0,xe.O7)(),[i,a]=(0,Ze.AF)(e.spaceBasicSettingsStore,be),[o,l]=(0,Ze.AF)(he),{query:d}=o,[{value:c,status:u}]=(0,Rs.r5)((()=>Wp(d,t)),[d,t]),m=(0,Ze.VK)((()=>(0,W.RM)()),[]);if(!(d||c&&0!==c.length))return null;return n()("div",{style:{marginTop:2,marginBottom:2}},void 0,n()(ot.Z,{type:ot.i.Vertical,sections:[{key:"recent public pages section",render:e=>r.createElement(rt.Z,e),items:"idle"===u||"pending"===u?[{key:"loading spinner",render:Up,action:()=>{}}]:m&&c&&0!==c.length?[...c.map((e=>{const t=ft.G.createChildStore(m,{table:_a.iU,id:e.id});return{key:`${e.id} page`,render:e=>r.createElement(Vp.Z,s()({store:t},e)),action:()=>{a({...i,publicHomePage:e.id}),l({...o,openDropdown:!1,displaySummary:!0})}}}))]:[{key:"no results",render:()=>n()(Ee.Z,{isSmall:!0,style:{marginLeft:8}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.dropdownLabel.noResults",defaultMessage:"No results"})),action:()=>{}}]}],initialFocus:void 0}))},Kp=e=>{window.__c={n:"SpaceBasicSettingsPublicHomePageSummary"};const[t,i]=(0,Ze.AF)(e.spaceBasicSettingsStore,be),[a,o]=(0,Ze.AF)(he),[s,r]=(0,Ze.VK)((()=>{const e=(0,W.RM)();if(!e||!t.publicHomePage)return[];const i=ft.G.createChildStore(e,{table:_a.iU,id:t.publicHomePage});return[i,i.getIcon()]}),[t]);return s?n()("div",{style:{display:"flex",alignItems:"center"}},void 0,n()("div",{style:{display:"flex",paddingRight:8,alignItems:"center"}},void 0,r&&n()(Ht.Z,{icon:r,isEmptyPage:!1,size:18,disabled:!0,style:{display:"inline-flex",marginRight:2,verticalAlign:"text-top"}}),n()(Vm.Z,{store:s,style:{display:"inline",whiteSpace:"normal",marginRight:Boolean(r)?3:0,wordBreak:"break-word"}})),n()(Le.Z,{onClick:()=>{o({...a,displaySummary:!1}),i({...t,publicHomePage:void 0})}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.dropdownLabel",defaultMessage:"Clear"}))):null},Hp=e=>{window.__c={n:"SpaceBasicSettingsPublicHomePage"};const t=(0,xe.O7)(),i=r.createRef(),[a,o]=(0,Ze.AF)(he),[l]=(0,Ze.AF)(e.spaceBasicSettingsStore),{openDropdown:d,displaySummary:c}=a,{publicHomePage:u,domain:m}=l,p=`${m}.${Ye.default.publicDomainName}`,g=(0,Ze.VK)((()=>(0,$.M9)(t)),[t]),h=!Boolean(g);return r.createElement(r.Fragment,null,n()(Re.Z,{style:{display:"flex",alignItems:"center"}},void 0,n()("span",{style:{marginRight:8}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.title",defaultMessage:"Public home page"})),g&&n()(Xr.Z,{subscriptionTier:g,analyticsName:"public_domain_home_page",desktopStyle:{marginTop:-1}})),h&&u&&c?n()(Kp,{spaceBasicSettingsStore:e.spaceBasicSettingsStore}):n()(st.ZP,{alignmentToOrigin:st.ZP.Alignment.Start,keepFocus:t.device.isPhone,onDismiss:()=>{var e;null===(e=i.current)||void 0===e||e.handleBlur(),o({...a,openDropdown:!1,displaySummary:!0})},origin:n()(Np,{textInputRef:i}),open:d,popupType:st.ZP.PopupType.Popup,style:{width:250},render:()=>n()(nt.Z,{menuType:Xe.og.Popup,width:250},void 0,n()(zp,{spaceBasicSettingsStore:e.spaceBasicSettingsStore}))}),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:8}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.caption",defaultMessage:"Access your public home page via {linkText}.",values:{linkText:n()(Nt.Z,{delayThreshold:0,renderTooltip:()=>n()(v.FormattedMessage,{id:"spaceBasicSettings.PublicHomePageSection.caption.tooltip",defaultMessage:"Click to copy link"}),render:e=>r.createElement(ys.Z,s()({onClick:()=>{It.RD({environment:t,stringValue:p,copiedMessage:It.tq.copiedLinkToClipboard})}},e),p)})}})))};var Gp=i(82328),qp=i(85610);function jp(){return n()(v.FormattedMessage,{id:"spaceBasicSettings.workspaceNameSection.nameInput.caption",defaultMessage:"You can use your organization or company name. Keep it simple."})}const Yp=(0,v.defineMessages)({nameInputPlaceholder:{id:"spaceBasicSettings.nameInput.placeholder",defaultMessage:"e.g. company name"},workspaceDomainInputPlaceholder:{id:"spaceBasicSettings.domainSection.workspaceDomainInput.placeholder",defaultMessage:"URL"},allowedEmailDomainsInputPlaceholder:{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.placeholder",defaultMessage:"Type an email domain…"},copyDomainTooltip:{id:"spaceBasicSettings.workspaceDomain.tooltip",defaultMessage:"Click to copy link"}});class $p extends l.Z{constructor(){super(...arguments),this.storeTypes={spaceBasicSettingsStore:be,securitySettingsStore:pe.Z,store:Tp,tokenQuery:D.default.createClass("")},this.handleEnableAiFeatureClick=()=>{const{securitySettingsStore:e}=this.props;e&&e.setState({...e.state,enableAiFeature:!e.state.enableAiFeature})},this.handleSpaceNameChange=e=>{this.stores.spaceBasicSettingsStore.setState({...this.stores.spaceBasicSettingsStore.state,name:e.target.value})},this.handleCheckDomainAvailability=e=>{const{spaceBasicSettingsStore:t}=this.stores,{spaceStore:i}=this.props;_._u({environment:this.environment,spaceStore:i,domain:e}).then((e=>{if("success"!==e.type)this.stores.spaceBasicSettingsStore.setState({...this.stores.spaceBasicSettingsStore.state,domainState:"loading"});else{const i=e.data.domain===t.state.domain;this.stores.spaceBasicSettingsStore.setState({...this.stores.spaceBasicSettingsStore.state,domainState:i?e.data.domainState:t.state.domainState})}}))},this.checkSpaceDomainAvailabilityDebounced=m.Ds(this.handleCheckDomainAvailability,250),this.handleSpaceUrlChange=e=>{const t=_.$U(e.target.value);this.checkSpaceDomainAvailabilityDebounced(t),this.stores.spaceBasicSettingsStore.setState({...this.stores.spaceBasicSettingsStore.state,domain:t}),this.forceUpdate()},this.handleConfirm=async()=>{const{spaceStore:e}=this.props,{spaceBasicSettingsStore:t,securitySettingsStore:i}=this.stores;await _.Y5({environment:this.environment,spaceId:e.id,spaceBasicSettingsStore:t})&&(await _.OF({environment:this.environment,spaceStore:e,spaceBasicSettingsStore:t,securitySettingsStore:i}),he.setState(he.getInitialState()),ke.Z.setState({...ke.Z.state,open:!1}))},this.handleCancelClick=()=>{ke.Z.setState({...ke.Z.state,open:!1}),he.setState(he.getInitialState())},this.handleExportClick=()=>{const{currentSpaceStore:e}=B.default.state;e&&De.q$({environment:this.environment,root:{table:"space",id:e.id,spaceId:e.id},isCollectionViewExportTypeSupported:!0})},this.handleExportMembersClick=()=>{const{currentSpaceStore:e}=B.default.state,{data:t}=Te.default.state;e&&t&&"subscribed_admin"===t.type&&De.$G(this.environment,{spaceStore:e,subscriptionData:t,intl:this.props.intl})},this.handleLeaveClick=()=>{const{spaceStore:e}=this.props,{currentUserSettingsStore:t}=B.default.state;t&&M.showDialog({message:n()(v.FormattedMessage,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.prompt",defaultMessage:"Are you sure you want to leave this workspace?"}),showCancel:!0,keepFocus:!0,items:[{label:n()(v.FormattedMessage,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.leaveButton.label",defaultMessage:"Leave"}),color:"red",onAccept:async()=>{await _.bf({environment:this.environment,spaceId:e.id,userSettingsStore:t})&&(b.z01(this.environment),ke.Z.setState({...ke.Z.state,open:!1}))}}]})},this.renderChurnSurveyModal=()=>{const{data:e}=Te.default.state,t=this.stores.store.state,i=$.XX(e);if(i&&t.churnSurveyModalOpen)return n()(qp.Z,{churnType:t.churnType,currentPlan:t.churnType,isWorkspaceDeletion:!0,periodEnd:i.periodEnd,hasAI:g.de(i.addOns),hasPendingChanges:Boolean(i.schedule||i.willCancelAt),customerId:i.customerId,onAccept:()=>{const{store:e}=this.stores;e.state.churnSurveyModalOpen&&e.state.onAccept()},onClose:()=>{const{store:e}=this.stores;e.state.churnSurveyModalOpen&&e.state.onClose(),e.reset()}})},this.handleDeleteClick=async()=>{const e=(0,Yo.zt)();if(!e)return;const{data:t}=Te.default.state,i=$.XX(t);if(b.YO0(this.environment),i){if(!(await new Promise((t=>{const{store:i}=this.stores;i.setState({...i.state,churnType:e,churnSurveyModalOpen:!0,onAccept:async()=>{t(!0),await this.showWorkspaceDeletionConfirmation()},onClose:()=>t(!1)})}))))return}await this.showWorkspaceDeletionConfirmation()},this.showWorkspaceDeletionConfirmation=async()=>{const{currentUserSettingsStore:e}=B.default.state;if(!e)return;const{spaceStore:t,intl:i}=this.props,a=(0,Wo.rn)(this.environment,t)||i.formatMessage({defaultMessage:"Untitled workspace",id:"spaceBasicSettings.deleteWorkspace.untitledWorkspace.placeholder"}),o=(0,Uc.Bd)(Dn.SP)?n()(v.FormattedMessage,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.prompt",defaultMessage:"This action cannot be undone. This will permanently delete the workspace, including all pages and files. Please type the name of the workspace to confirm."}):r.createElement(r.Fragment,null,n()(xp.Z,{style:{marginTop:16},translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente el espacio de trabajo, incluidas todas las páginas y archivos. Por favor escriba el nombre del espacio de trabajo para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит рабочее пространство, включая все страницы и файлы. Пожалуйста, введите название рабочей области для подтверждения.",zh:"此操作无法撤消。 这将永久删除工作区，包括所有页面和文件。 请输入要确认的工作空间的名称。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird der Arbeitsbereich einschließlich aller Seiten und Dateien dauerhaft gelöscht. Bitte geben Sie den Namen des Arbeitsbereichs zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'espace de travail, y compris toutes les pages et tous les fichiers. Veuillez saisir le nom de l'espace de travail pour confirmer.",ja:"この操作を元に戻すことはできません。 これにより、すべてのページとファイルを含むワークスペースが完全に削除されます。 確認するワークスペースの名前を入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'area di lavoro, incluse tutte le pagine e i file. Digita il nome dell'area di lavoro per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente o espaço de trabalho, incluindo todas as páginas e arquivos. Por favor, digite o nome do espaço de trabalho para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt de werkruimte permanent verwijderd, inclusief alle pagina's en bestanden. Typ de naam van de werkruimte om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie obszaru roboczego, w tym wszystkich stron i plików. Wpisz nazwę obszaru roboczego, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort arbetsytan permanent, inklusive alla sidor och filer. Vänligen skriv in arbetsplatsens namn för att bekräfta.",uk:"Цю дію не можна скасувати. Це дозволить остаточно видалити робочу область, включаючи всі сторінки та файли. Введіть назву робочої області для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette arbeidsområdet, inkludert alle sider og filer. Vennligst skriv navnet på arbeidsområdet for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu, tüm sayfaları ve dosyaları içeren çalışma alanını kalıcı olarak siler. Lütfen onaylamak için çalışma alanının adını yazın.",cs:"Tuto akci nelze vrátit zpět. Tím se trvale odstraní pracovní prostor včetně všech stránek a souborů. Zadejte prosím název pracovního prostoru, který chcete potvrdit.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn không gian làm việc, bao gồm tất cả các trang và tệp. Vui lòng nhập tên của không gian làm việc để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette arbejdsområdet, inklusive alle sider og filer. Indtast navnet på arbejdsområdet for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a munkaterületet, beleértve az összes oldalt és fájlt. Kérjük, írja be a munkaterület nevét a megerősítéshez.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي ذلك إلى حذف مساحة العمل كليا ، بما يشمل جميع الصفحات والملفات. يرجى كتابة اسم مساحة العمل للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบพื้นที่ทำงานอย่างถาวรรวมถึงหน้าและไฟล์ทั้งหมด โปรดพิมพ์ชื่อของพื้นที่ทำงานเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את סביבת העבודה, כולל כל הדפים והקבצים. הקלד את שם מרחב העבודה כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa työtilan pysyvästi, mukaan lukien kaikki sivut ja tiedostot. Vahvista kirjoittamalla työtilan nimi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus ruang kerja, termasuk semua halaman dan file. Silakan ketik nama ruang kerja untuk mengonfirmasi."}}));await Cp.b({message:n()("div",{},void 0,n()("div",{},void 0,o)),acceptLabel:n()(v.FormattedMessage,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.deleteWorkspaceButton.label",defaultMessage:"Permanently delete workspace"}),requiredInputValue:a})&&(_.Ns({environment:this.environment,spaceId:t.id,userSettingsStore:e}),b.BPl(this.environment),ke.Z.setState({...ke.Z.state,open:!1}))},this.handleRecordIconChange=e=>{const{spaceStore:t}=this.props;V.createAndCommit({userAction:"SpaceBasicSettings.handleRecordIconChange",environment:this.environment,perform:i=>{jo.sO({store:t.getIconStore(),value:e,transaction:i})}})}}willMount(e){super.willMount(e);const{spaceStore:t}=this.props,{spaceBasicSettingsStore:i}=this.stores,a=i.getValueForSpace(t);a&&i.setState(a)}renderComponent(){return Ae.Z.state.online?this.renderSettings():this.renderOfflineMessage()}renderOfflineMessage(){return n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.offlineMessage",defaultMessage:"Please go online to manage settings."})))}validateDomain(){const{spaceBasicSettingsStore:e}=this.stores,{domain:t,domainState:i}=e.state;return!!t&&("available"===i||"current-space"===i)}renderSettings(){const{spaceStore:e}=this.props,{spaceBasicSettingsStore:t}=this.stores,{name:i}=t.state,{data:a}=Te.default.state,{device:o}=this.environment;if(!a)return;const s=e.canAdmin(),l=(0,Wo.Cx)(e),d=(0,Wo.jv)(e),c=$.qF(this.environment),u=s&&!e.getDisableExport(),m=s,p=(0,Yo.zt)(),g="subscribed_admin"===a.type&&("enterprise"===p||"business"===p),h=e.getSettings().disable_page_analytics,f=Yr.Z.getPublicSpaceData(this.environment,e.id);return n()(Be.Z,{controlRow:s&&this.renderControlRow()},void 0,this.renderSpaceBasicHeader(),l&&n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.guestLimitedAccessMessage",defaultMessage:"You are currently a guest in this workspace. Ask an admin to add you as a member in order to see other pages and workspace settings."})),l&&Be.Z.renderDivider(),s&&n()(r.Fragment,{},void 0,n()(Re.Z,{},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.workspaceNameSection.title",defaultMessage:"Name"})),n()(Qi.Z,{value:i,placeholder:q.default.formatMessage(Yp.nameInputPlaceholder),readOnly:!s,onChange:this.handleSpaceNameChange}),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4}},void 0,n()(jp,{})),Be.Z.renderDivider()),s&&n()(r.Fragment,{},void 0,n()(Re.Z,{},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.workspaceIconSection.title",defaultMessage:"Icon"})),n()("div",{style:{width:72,height:72,border:`1px solid ${this.theme.regularDividerColor}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"}},void 0,n()(Ht.Z,s?{bucket:"public",disabled:!1,icon:(0,Wo.Wd)(this.environment,e),isEmptyPage:!1,title:i,size:64,iconLoggingData:{recordTable:e.table,source:"workspace_settings"},onChange:this.handleRecordIconChange}:{disabled:!0,icon:(0,Wo.Wd)(this.environment,e),isEmptyPage:!1,title:i,size:64})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:8}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.workspaceIconSection.caption",defaultMessage:"Upload an image or pick an emoji. It will show up in your sidebar and notifications."})),Be.Z.renderDivider()),(y=this.environment,!(null===(S=B.default.state.currentSpaceStore)||void 0===S||!S.canAdmin())&&(0,$.qb)(y,"enterprise")&&r.createElement(r.Fragment,null,this.renderSpaceBasicFeatureSubheader(),this.renderAiFeature(),Be.Z.renderDivider())),this.renderSpaceBasicPublicSubHeader(),s&&r.createElement(r.Fragment,null,n()(Dp,{canAdminSpaceStore:s,domainIsAutogenerated:null==f?void 0:f.domainIsAutogenerated,spaceStore:e,spaceBasicSettingsStore:t,handleSpaceUrlChange:this.handleSpaceUrlChange}),Be.Z.renderDivider()),s&&c&&n()(r.Fragment,{},void 0,n()(Re.Z,{},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.allowedEmailDomainsSection.title",defaultMessage:"Allowed email domains"})),this.renderAllowedEmailDomains(),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.caption",defaultMessage:"Anyone with email addresses at these domains can automatically join your workspace."})),Be.Z.renderDivider()),s&&n()(r.Fragment,{},void 0,n()(Hp,{spaceBasicSettingsStore:t}),Be.Z.renderDivider()),u&&n()(Pp,{handleExportClick:this.handleExportClick}),m&&n()(r.Fragment,{},void 0,n()(Re.Z,{style:{display:"flex",alignItems:"center"}},void 0,n()("span",{style:{marginRight:8}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.exportMembersSection.title",defaultMessage:"Export members"})),!g&&n()(Xr.Z,{subscriptionTier:"business",analyticsName:"space_export_members",desktopStyle:{marginTop:-1}})),n()("div",{style:{display:"flex"}},void 0,n()(Le.Z,{isLarge:!0,disabled:!g,onClick:this.handleExportMembersClick,disabledFeedback:!0},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.exportMembersSection.exportAsCSVButton.label",defaultMessage:"Export members as CSV"}))),n()("div",{style:{height:12}}),n()(ll.Z,{title:n()(v.FormattedMessage,{id:"spaceBasicSettings.exportMembersSection.helpButton.caption",defaultMessage:"Learn about exporting members."}),href:(0,Y.UY)("guides.exportMembers"),analyticsFrom:"space_settings"}),Be.Z.renderDivider()),s&&n()(r.Fragment,{},void 0,n()(Re.Z,{},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.analytics.title",defaultMessage:"Analytics"})),n()("div",{style:{display:"flex",gap:12,flexDirection:"column"}},void 0,n()(Ss.Z,{isMobile:o.isMobile,title:n()(v.FormattedMessage,{id:"spaceBasicSettings.analytics.settings.title",defaultMessage:"Save and display page view analytics"}),caption:n()(v.FormattedMessage,{id:"spaceBasicSettings.analytics.settings.description",defaultMessage:"People with edit or full access will be able to see how many views a page has. If this is turned off, page views will not be stored for all pages in {workspaceName}.",values:{workspaceName:i}}),type:"toggle",isOn:!h,onToggle:()=>{const t=!h;V.createAndCommit({userAction:"SpaceBasicSettings.analyticsSettings.onSelectOption",environment:this.environment,perform:i=>{jo.sW({store:e,data:{settings:{...e.getSettings(),disable_page_analytics:t}},transaction:i})}}),_p.j(this.environment,t?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in")}}),n()(ll.Z,{title:n()(v.FormattedMessage,{defaultMessage:"Learn about workspace analytics.",id:"spaceBasicSettings.workspaceAnalytics.helpButton.caption"}),href:(0,Y.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"})),Be.Z.renderDivider()),n()(Re.Z,{},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.dangerousSettingsSection.title",defaultMessage:"Danger zone"})),n()("div",{style:{display:"flex"}},void 0,(d.length>1||l)&&n()(Le.Z,{isLarge:!0,onClick:this.handleLeaveClick,style:{marginRight:s?12:void 0}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.dangerousSettingsSection.leaveWorkspaceButton.label",defaultMessage:"Leave workspace"})),s&&r.createElement(r.Fragment,null,this.renderModal(),n()(Le.Z,{isLarge:!0,isRed:!0,onClick:this.handleDeleteClick},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceButton.label",defaultMessage:"Delete entire workspace"})))),s&&n()(r.Fragment,{},void 0,n()("div",{style:{height:12}}),n()(ll.Z,{title:n()(v.FormattedMessage,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceHelpButton.caption",defaultMessage:"Learn about deleting workspaces."}),href:(0,Y.UY)("guides.deleteWorkspace"),analyticsFrom:"space_settings"})));var y,S}renderAiFeature(){var e;return n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:this.handleEnableAiFeatureClick},void 0,n()("div",{style:this.getTitleStyle()},void 0,n()("div",{style:{display:"flex",alignItems:"center"}},void 0,(0,wp.t)({width:16,height:16,marginRight:6}),n()(v.FormattedMessage,{id:"spaceBasicSettings.aiFeature.label",defaultMessage:"Notion AI"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.aiFeature.ga.caption",defaultMessage:"Enable to provide AI-powered functionality for all members of your workspace.{br}By enabling Notion AI, you are agreeing to the <inlinelink>Notion AI Supplementary Terms</inlinelink>",values:{br:n()("br",{}),inlinelink:e=>n()(ys.Z,{href:"https://notion.notion.site/fa9034c8b5a04818a6baf3eac2adddbb",external:!0,onClick:e=>e.stopPropagation()},void 0,e)}}))),n()("div",{style:{marginTop:5}},void 0,n()(Fr.Z,{on:Boolean(null===(e=this.props.securitySettingsStore)||void 0===e?void 0:e.state.enableAiFeature)}))))}renderSpaceBasicPublicSubHeader(){return n()(Re.Z,{large:!0,divider:"full",style:{paddingTop:12}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.public.subtitle",defaultMessage:"Public settings"}))}renderSpaceBasicFeatureSubheader(){return n()(Re.Z,{large:!0,divider:"full",style:{paddingTop:12}},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.feature.subtitle",defaultMessage:"Feature settings"}))}renderSpaceBasicHeader(){return n()(Re.Z,{large:!0,divider:"full"},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.title",defaultMessage:"Workspace settings"}))}renderControlRow(){return n()("div",{style:{display:"flex"}},void 0,n()(He.Z,{isLarge:!0,onClick:this.handleConfirm,disabled:!this.validateDomain()},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.updateButton.label",defaultMessage:"Update"})),n()(Le.Z,{isLarge:!0,style:{marginLeft:12},onClick:this.handleCancelClick},void 0,n()(v.FormattedMessage,{id:"spaceBasicSettings.cancelButton.label",defaultMessage:"Cancel"})))}renderAllowedEmailDomains(){const{device:e}=this.environment,{spaceStore:t}=this.props,{spaceBasicSettingsStore:i}=this.stores,{emailDomains:a}=i.state,o=t.canAdmin();return n()(st.ZP,{popupType:e.isMobile?st.ZP.PopupType.SlideUp:st.ZP.PopupType.Popup,sameWidthAsOrigin:!0,open:this.stores.tokenQuery.state.length>0,origin:n()(Ii.Z,{placeholder:q.default.formatMessage(Yp.allowedEmailDomainsInputPlaceholder),value:this.stores.tokenQuery.state,onChange:e=>this.stores.tokenQuery.setState(e.target.value),readOnly:!o,onRemoveLastToken:()=>{const e=a.slice(0,a.length-1);i.setState({...i.state,emailDomains:e})},tokens:a.map((e=>n()(Ti.Z,{showRemoveButton:!0,isSingle:!1,format:bi.l.Medium,onClickRemove:()=>{const t=a.filter((t=>t!==e));i.setState({...i.state,emailDomains:t})},value:e},e)))}),render:()=>{const t=this.stores.tokenQuery.state.trim(),{data:o}=Te.default.state,{spaceStore:l}=this.props,d=n()(v.FormattedMessage,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Type an email domain…"}),c=n()(v.FormattedMessage,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),u=o?$.hn(o).map((e=>{if(("unsubscribed_admin"===o.type||"unsubscribed_member"===o.type||"subscribed_admin"===o.type)&&o.joinedMemberIds.includes(e.userId)){const t=ft.U6.createChildStore(l,{table:ti.KJ,id:e.userId}).getEmail();return t&&(0,Ld.Gd)(t)}})).filter(((e,t,i)=>Boolean(e&&t===i.indexOf(e)&&!a.includes(e)))):[],m=(0,fn.ZP)(t,u,(e=>e)).map(((e,t)=>({key:t,render:t=>r.createElement(it.Z,s()({},t,{title:e})),action:()=>{const t=[...a,e];i.setState({...i.state,emailDomains:t}),this.stores.tokenQuery.setState("")}})));let p;return p=e.isMobile?{menuType:Xe.og.ActionSheet}:{menuType:Xe.og.Popup,width:"100%"},r.createElement(nt.Z,p,n()(ot.Z,{type:ot.i.Vertical,initialFocus:m.length>0?0:void 0,sections:[{key:0,render:e=>r.createElement(rt.Z,s()({},e,{disableDesktopPadding:!0,title:m.length>0?d:c})),items:m}]}))},onDismiss:()=>{this.stores.tokenQuery.setState("")}})}renderModal(){const{churnSurveyModalOpen:e}=this.stores.store.state;return n()(Gp.q,{isOpen:e,dismissUsing:"onlyEscape",onDismiss:()=>{const{store:e}=this.stores;e.state.churnSurveyModalOpen&&e.state.onClose(),e.reset()}},void 0,this.renderChurnSurveyModal())}getTitleStyle(){return{fontSize:14,marginRight:8,flexGrow:1}}}$p.displayName="SpaceBasicSettings";const Qp=(0,v.injectIntl)($p);var Jp=i(58705),Xp=i(51207),eg=i(90403),tg=i(78873);let ig=function(e){return e.Password="Password",e.CurrentEmail="TemporaryPasscode",e}({});class ag extends D.default{getInitialState(){return{open:!1,authorized:!1,authorizationType:void 0}}}const ng=ag;var og=i(83785);const sg=(0,v.defineMessages)({dialogLabel:{id:"profileSettings.accountSecuritySection.emailSetting.dialogLabel",defaultMessage:"Change email"}});class rg extends l.Z{constructor(){super(...arguments),this.storeTypes={store:ng},this.renderModalContent=()=>{const{store:e}=this.stores,{state:t}=e;return n()("div",{style:{...this.styles.modal,...this.getColors().modal}},void 0,n()(og.Z,{fetch:this.getAuthorizationType,loading:e=>e&&n()("div",{style:this.styles.loadingSpinner},void 0,n()(Ue.Z,{})),render:()=>n()(r.Fragment,{},void 0,t.authorizationType===ig.Password?this.renderVerifyPassword(t):t.authorizationType===ig.CurrentEmail?this.renderVerifyCurrentEmail(t):void 0,t.authorized&&this.renderSetNewEmail(t))}))},this.renderSetNewEmail=e=>{const{store:t}=this.stores,{userValue:i}=this.props;if(t.state.authorized)return n()(r.Fragment,{},void 0,n()("p",{style:this.styles.paragraph},void 0,n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.newEmailInstructions",defaultMessage:"Please enter a new email and we will send you a verification code."})),n()("div",{},void 0,this.renderNewEmailInput()),t.state.newEmailContainsVerifiedDomain&&(0,Ld.Gd)(t.state.newEmail)!==(0,Ld.Gd)((null==i?void 0:i.email)||"")&&this.renderClaimedEmailDomainWarning(e),t.state.newEmailPasscodeSent?this.renderNewEmailPasscodeInput(e):this.renderSendNewEmailPasscodeButton(e),this.renderEducationPlanDowngradeWarning())},this.handleSendCurrentEmailVerification=async()=>{const{userValue:e}=this.props,{store:t}=this.stores;if(!e)return;t.setState({...t.state,loading:!0});const i=await I.sendEmailVerification(this.environment,{email:e.email});"success"===i.type?t.setState({...t.state,currentEmailPasscodeSent:!0,currentEmailPasscode:"",error:void 0,loading:!1}):t.setState({...t.state,currentEmailPasscodeSent:!0,loading:!1,error:(0,Ba.wf)(this.props.intl,i)})},this.handleChangeCurrentEmailPasscode=e=>{const{store:t}=this.stores;t.setState({...t.state,currentEmailPasscode:e.currentTarget.value,error:void 0})},this.handleChangePassword=e=>{const{store:t}=this.stores;t.setState({open:!0,authorized:!1,authorizationType:ig.Password,password:e.currentTarget.value,error:void 0})},this.handleClearPassword=()=>{const{store:e}=this.stores;e.setState({open:!0,authorized:!1,authorizationType:ig.Password,password:""})},this.handleSubmitAuthorization=async()=>{const{store:e}=this.stores;if(!e.state.authorized)if(e.state.authorizationType===ig.Password){if(!this.getUserCurrentEmail())return;e.setState({...e.state,loading:!0});const t=await I.authVerifyPassword(this.environment,{password:e.state.password});if("failed"===t.type)return void e.setState({...e.state,loading:!1,error:(0,Ba.wf)(this.props.intl,t)});e.setState({...e.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}else e.state.authorizationType===ig.CurrentEmail&&e.setState({...e.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})},this.handleChangeNewEmail=e=>{const{store:t}=this.stores;t.setState({...t.state,newEmail:e.currentTarget.value,error:void 0})},this.handleClearNewEmail=()=>{const{store:e}=this.stores;e.setState({...e.state,newEmail:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0})},this.handleSendNewEmailVerification=async()=>{const{store:e}=this.stores;if(!e.state.authorized)return;const t=(0,Ld.Gd)(e.state.newEmail);e.setState({...e.state,loading:!0});const[i,a]=await Promise.all([await I.sendEmailVerification(this.environment,{email:e.state.newEmail}),t?await I.getVerifiedEmailDomain(this.environment,{emailDomain:t}):void 0]);if("success"===i.type){const t=(0,A.$K)(a)&&"failed"===a.type?(0,Ba.wf)(this.props.intl,a):void 0;e.setState({...e.state,newEmailPasscodeSent:!0,newEmailPasscode:"",error:t,loading:!1,newEmailContainsVerifiedDomain:(0,A.$K)(a)&&"success"===a.type&&void 0!==a.data.id})}else e.setState({...e.state,loading:!1,error:(0,Ba.wf)(this.props.intl,i)})},this.handleChangeNewEmailPasscode=e=>{const{store:t}=this.stores;t.setState({...t.state,newEmailPasscode:e.currentTarget.value,error:void 0})},this.handleSubmit=async()=>{const{store:e}=this.stores;if(!e.state.authorized)return;const t=e.state.authorizationType===ig.Password?{type:"Password",password:e.state.password,newEmail:e.state.newEmail,newEmailPasscode:e.state.newEmailPasscode}:{type:"CurrentEmail",currentEmailPasscode:e.state.currentEmailPasscode,newEmail:e.state.newEmail,newEmailPasscode:e.state.newEmailPasscode};e.setState({...e.state,loading:!0});const i=await I.changeEmail(this.environment,t);if("success"===i.type)b.txh(this.environment,{new_email:e.state.newEmail,error:void 0}),e.setState({...e.state,loading:!1}),await this.closeModal();else{var a;const t=(0,Ba.wf)(this.props.intl,i);if(b.txh(this.environment,{new_email:e.state.newEmail,error:t}),"IntercomError"===(null===(a=i.body)||void 0===a?void 0:a.name))return e.setState({...e.state,loading:!1}),void(await this.closeModal());e.setState({...e.state,loading:!1,error:t})}},this.handleSendUsMessageClick=()=>{Il.j({environment:this.environment,from:"change_email_student"})},this.openModal=()=>{const{store:e}=this.stores;e.setState({open:!0,authorized:!1,authorizationType:void 0})},this.closeModal=async()=>{const{store:e}=this.stores,{hasEducationPlan:t}=this.props;e.reset(),t&&await Z.bi(this.environment)},this.getAuthorizationType=async()=>{const{store:e}=this.stores,{intl:t}=this.props,i=this.getUserCurrentEmail();if(!i)return;const a=await tg.c({environment:this.environment,userEmail:i});a.error?e.setState({open:e.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorFetchingAccountData",defaultMessage:"Could not fetch account information for {currentEmail}."},{currentEmail:i})}):a.value.isSamlEnforced||!a.value.hasPassword?e.setState({open:!0,authorized:!1,authorizationType:ig.CurrentEmail,currentEmailPasscodeSent:!1,currentEmailPasscode:""}):e.setState({open:!0,authorized:!1,authorizationType:ig.Password,password:""})},this.styles={modal:{width:460,padding:32,borderRadius:3,fontSize:14},loadingSpinner:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},paragraph:{marginTop:12,marginBottom:14},error:{color:tn.ZP.red,fontSize:12,marginTop:4,marginLeft:8},bold:{fontWeight:f.Z.fontWeight.bold},input:{padding:"4px 8px"},button:{marginTop:14,width:"100%"},educationPlanWarning:{display:"flex",marginTop:14,paddingTop:14},claimedEmailDomainWarning:{marginTop:14,marginBottom:14}}}renderComponent(){const{userValue:e}=this.props,{store:t}=this.stores;return r.createElement(r.Fragment,null,n()(Ss.Z,{type:"custom",isMobile:!1,title:n()(v.FormattedMessage,{id:"profileSettings.accountSecuritySection.emailSetting.label",defaultMessage:"Email"}),caption:e&&e.email,customButton:this.renderChangeEmailButton()}),n()(Zs.Z,{ariaLabel:q.default.formatMessage(sg.dialogLabel),open:t.state.open,onDismiss:this.closeModal,render:this.renderModalContent}))}renderChangeEmailButton(){const{userValue:e,areProfileEditsDisabled:t}=this.props,i=n()(Le.Z,{isLarge:!0,onClick:t?()=>{}:this.openModal,disabled:t,disabledFeedback:t},void 0,n()(v.FormattedMessage,{id:"profileSettings.accountSecuritySection.emailSetting.changeEmailButton.label",defaultMessage:"Change email"}));return t?n()(Nt.Z,{renderTooltip:()=>n()(v.FormattedMessage,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:e?(0,Ld.Gd)(e.email):""}}),placement:Nt.Z.Placement.Bottom,alignment:Nt.Z.Alignment.Center,render:e=>r.createElement("div",e,i)}):i}renderVerifyPassword(e){const{userValue:t}=this.props;if(t)return n()(r.Fragment,{},void 0,n()("p",{style:{margin:0}},void 0,this.renderCurrentEmail()),n()("p",{style:this.styles.paragraph},void 0,n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.enterPasswordInstructions",defaultMessage:"Please enter your password."})),n()(Qi.Z,{style:{display:"none"},type:"text",value:t.email,autoComplete:"username",disabled:!0}),n()(Qi.Z,{type:"password",disabled:e.authorized,value:e.password,onChange:this.handleChangePassword,showClearButton:!0,onClearButtonClick:this.handleClearPassword,onSubmit:this.handleSubmitAuthorization,placeholder:this.props.intl.formatMessage({id:"profileSettings.changeEmailModal.passwordInput.label",defaultMessage:"Password"}),style:this.styles.input,focusInitial:!0,autoComplete:"current-password"}),!e.authorized&&e.error&&n()("div",{style:this.styles.error},void 0,e.error),!e.authorized&&n()(He.Z,{isLarge:!0,style:this.styles.button,onClick:this.handleSubmitAuthorization,disabled:e.loading},void 0,e.loading?n()(Ue.Z,{}):n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})))}renderVerifyCurrentEmail(e){return n()(r.Fragment,{},void 0,n()("p",{style:{...this.styles.paragraph,marginTop:0}},void 0,this.renderCurrentEmail()," ",e.currentEmailPasscodeSent?n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.sentVerificationCodeToCurrentEmail",defaultMessage:"We've sent a temporary verification code to this email."}):n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.sendVerificationCodeToCurrentEmail",defaultMessage:"We'll send a temporary verification code to this email."})),e.currentEmailPasscodeSent?this.renderCurrentEmailPasscodeInput(e):this.renderSendCurrentEmailPasscodeButton())}renderSendCurrentEmailPasscodeButton(){return n()(He.Z,{isLarge:!0,onClick:this.handleSendCurrentEmailVerification,disabled:this.stores.store.state.loading},void 0,this.stores.store.state.loading?n()(Ue.Z,{}):n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.sendCurrentEmailVerificationCode.label",defaultMessage:"Send verification code"}))}renderCurrentEmailPasscodeInput(e){return n()(r.Fragment,{},void 0,n()(Qi.Z,{value:e.currentEmailPasscode,onChange:this.handleChangeCurrentEmailPasscode,onSubmit:this.handleSubmitAuthorization,placeholder:this.props.intl.formatMessage({id:"profileSettings.changeEmailModal.enterCurrentEmailVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:this.styles.input}),!e.authorized&&n()(He.Z,{isLarge:!0,style:this.styles.button,onClick:this.handleSubmitAuthorization,disabled:e.loading},void 0,e.loading?n()(Ue.Z,{}):n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})))}renderNewEmailInput(){const{store:e}=this.stores;if(e.state.authorized)return n()(Qi.Z,{value:e.state.newEmail,onChange:this.handleChangeNewEmail,onSubmit:this.handleSendNewEmailVerification,showClearButton:!0,onClearButtonClick:this.handleClearNewEmail,placeholder:this.props.intl.formatMessage({id:"profileSettings.changeEmailModal.newEmailInput.placeholder",defaultMessage:"Enter new email"}),style:this.styles.input,focusInitial:!0})}renderSendNewEmailPasscodeButton(e){return n()(r.Fragment,{},void 0,e.error&&n()("div",{style:this.styles.error},void 0,e.error),n()(He.Z,{isLarge:!0,style:this.styles.button,onClick:this.handleSendNewEmailVerification,disabled:e.loading},void 0,e.loading?n()(Ue.Z,{}):n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.sendVerificationCodeButton.label",defaultMessage:"Send verification code"})))}renderNewEmailPasscodeInput(e){const t=this.getSubmitHandler();return n()(r.Fragment,{},void 0,n()("p",{style:this.styles.paragraph},void 0,n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.verificationCodeSentMessage",defaultMessage:"We just sent you a temporary verification code to {newEmail}.",values:{newEmail:n()("span",{style:this.styles.bold},void 0,e.newEmail)}})),n()(Qi.Z,{value:e.newEmailPasscode,onChange:this.handleChangeNewEmailPasscode,onSubmit:t,placeholder:this.props.intl.formatMessage({id:"profileSettings.changeEmailModal.enterVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:this.styles.input}),e.error&&n()("div",{style:this.styles.error},void 0,e.error),n()(He.Z,{isLarge:!0,style:this.styles.button,onClick:t,disabled:e.loading},void 0,e.loading?n()(Ue.Z,{}):n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.changeEmailButton.label",defaultMessage:"Change email"})))}renderEducationPlanDowngradeWarning(){const{hasEducationPlan:e}=this.props;if(e)return n()("div",{style:{...this.styles.educationPlanWarning,...this.getColors().educationPlanWarning}},void 0,(0,zs.m)({width:14,marginTop:4,marginRight:6,fill:this.theme.lightIconColor})," ",n()("div",{},void 0,n()(v.FormattedMessage,{defaultMessage:"Changing your email may downgrade your workspace on a Free Education Plan to the basic Free Plan. You won't lose any data, but you'll need to upgrade to re-access paid features. Have questions about this? <sendmessagelink>Message support</sendmessagelink>.",id:"emailChangeSettings.downgradeEducationPlan.warning.message",values:{sendmessagelink:e=>n()(ys.Z,{onClick:this.handleSendUsMessageClick},void 0,e)}})))}renderCurrentEmail(){const{userValue:e}=this.props;if(e)return n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.currentEmail",defaultMessage:"Your current email is {currentEmail}.",values:{currentEmail:n()("span",{style:this.styles.bold},void 0,e&&e.email)}})}renderClaimedEmailDomainWarning(e){return n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:this.styles.claimedEmailDomainWarning},void 0,n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.claimedEmailDomainWarning",defaultMessage:"The email domain {newEmailDomain} has been claimed by an organization. If you continue with changing this email address, any workspaces created by this account can be managed by the organization. See <domainclaimlink>this page</domainclaimlink> for more info.",values:{newEmailDomain:(0,Ld.Gd)(e.newEmail)??e.newEmail,domainclaimlink:e=>n()(ys.Z,{href:(0,Y.UY)("guides.domainManagement"),external:!0},void 0,e)}}))}showConfirmationModal(e){return M.confirmUserAction({message:n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.confirmationModal.title",defaultMessage:"Are you sure you want to change your email?"}),description:n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.confirmationModal.description",defaultMessage:"If you continue changing this email address to this domain, any workspaces created by this account can be managed by the organization.",values:{verifiedDomain:(0,Ld.Gd)(e)}}),acceptLabel:n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.confirmationModal.acceptButton.label",defaultMessage:"Change email"}),cancelLabel:n()(v.FormattedMessage,{id:"profileSettings.changeEmailModal.confirmationModal.cancelButton.label",defaultMessage:"Go back"})})}getUserCurrentEmail(){const{store:e}=this.stores,{userValue:t,intl:i}=this.props;if(t)return t.email;e.setState({open:e.state.open,authorized:!1,authorizationType:void 0,error:i.formatMessage({id:"profileSettings.changeEmailModal.errorNoUserValue",defaultMessage:"User value is undefined."})})}getSubmitHandler(){const{store:e}=this.stores,{userValue:t}=this.props;if(!e.state.authorized)return()=>{};if(e.state.newEmailContainsVerifiedDomain&&(0,Ld.Gd)(e.state.newEmail)!==(0,Ld.Gd)((null==t?void 0:t.email)||"")){const t=e.state.newEmail;return async()=>{await this.showConfirmationModal(t)&&await this.handleSubmit()}}return this.handleSubmit}getColors(){return{modal:{background:this.theme.contentBackground},educationPlanWarning:{color:this.theme.lightTextColor,borderTop:`1px solid ${this.theme.regularDividerColor}`}}}}rg.displayName="EmailChangeSettings";const lg=(0,v.injectIntl)(rg);var dg=i(10020);class cg extends D.default{getInitialState(){return{open:!1}}}const ug=new cg;class mg extends l.Z{constructor(){super(...arguments),this.handleLogOutFromActiveSessions=async()=>{b.AQD(this.environment),await I.logoutActiveSessions(this.environment,{}),this.openConfirmationModal()}}renderComponent(){const e=n()(v.FormattedMessage,{id:"manageActiveSessions.title",defaultMessage:"Log out of all devices"}),t=n()(v.FormattedMessage,{id:"manageActiveSessions.logOutActiveSessions.label",defaultMessage:"Log out of all other active sessions on other devices besides this one."});return r.createElement(r.Fragment,null,n()(Ss.Z,{type:"custom",isMobile:!1,title:e,caption:t,customButton:n()(Ri.Z,{style:{borderRadius:"0.25em"},onClick:this.handleLogOutFromActiveSessions},void 0,(0,dg.C)(this.getIconStyle()))}),this.renderManageActiveSessionsModal())}renderManageActiveSessionsModal(){const{open:e}=ug.state,t=this.getUserEmailAddress();return n()(Zs.Z,{open:e,onDismiss:this.closeConfirmationModal,innerStyle:{width:350,padding:24,display:"flex",flexDirection:"column"},render:()=>r.createElement(r.Fragment,null,n()("div",{style:{marginBottom:24}},void 0,n()(v.FormattedMessage,t?{id:"manageActiveSessions.confirmationModal.withEmail",defaultMessage:"You have been logged out from other active sessions for {email}.",values:{email:t}}:{id:"manageActiveSessions.confirmationModal.withoutEmail",defaultMessage:"You have been logged out from other active sessions for your account."})),n()(He.Z,{onClick:this.closeConfirmationModal},void 0,n()(v.FormattedMessage,{id:"manageActiveSessions.confirmationModal.close",defaultMessage:"Close"})))})}openConfirmationModal(){ug.setState({...ug.state,open:!0})}closeConfirmationModal(){ug.setState({...ug.state,open:!1})}getUserEmailAddress(){let e;const{currentUserStore:t}=B.default.state;return t&&(e=t.getEmail()),e}getSettingTextStyle(){return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto"}}getSettingStyle(){return{display:"flex",flexDirection:"row",alignItems:"center"}}getIconStyle(){return{width:20,height:20,fill:this.theme.lightIconColor}}}mg.displayName="ManageActiveSessions";const pg=mg;var gg=i(1799),hg=i(16010);class fg extends D.default{getInitialState(){return{step:"backupCodesUninitialized"}}}class vg extends hg.o{constructor(e,t){super(e,"backupCodes"),this.service=void 0,this.service=t}backupCodesInitialSetup(e){if(!this.checkStep("backupCodesUninitialized"))return;const{onLoadingComplete:t,onComplete:i}=e;this.store.setState({step:"backupCodesLoading"}),this.doCreateBackupCodes({forceRecreate:!1,onComplete:i,onLoadingComplete:t}).catch(this.handleUnexpectedError)}backupCodesShowCreate(){this.checkStep("backupCodesUninitialized")&&this.store.setState({step:"backupCodesRegenerateCodes"})}backupCodesRegenerateCodes(){this.checkStep("backupCodesRegenerateCodes")&&(this.store.setState({step:"backupCodesRegenerateCodes",isLoading:!0}),this.doCreateBackupCodes({forceRecreate:!0,onComplete:()=>{},onLoadingComplete:()=>{}}).catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"backupCodesUninitialized"})}async doCreateBackupCodes(e){const{forceRecreate:t,onComplete:i,onLoadingComplete:a}=e,n=await this.withStep(["backupCodesLoading","backupCodesRegenerateCodes"],(()=>this.service.createBackupCodes(t)));if(!n)return;const{result:o}=n;if("already-exists"===o.status)i();else{const e=function(e){const t=q.default.getIntl(),i=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.title",defaultMessage:"Notion Backup Codes"}),a=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.createdAt",defaultMessage:"Created at {createdAt}"},{createdAt:`${new Date}`}),n=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.warningMessage",defaultMessage:"Please store these in a secure location and mark off codes as they are used."}),o=`${i}\n${a}\n\n${e.map(gg.K).join("\n")}\n\n${n}\n`;return encodeURIComponent(o)}(o.backupCodes);this.store.setState({step:"backupCodesShowCodes",backupCodes:o.backupCodes,mfaSettingId:o.mfaSettingId,backupCodesFile:e}),a()}}}var yg=i(75752),Sg=i(88175);function bg(e){let{errorMessage:t,isLoading:i,onDisplayBackupCodes:a,onCancel:o,onDismiss:s}=e;const r=n()(v.FormattedMessage,{id:"mfa.regenerateBackupCodes.title",defaultMessage:"Regenerate backup codes"}),l=n()(v.FormattedMessage,{id:"mfa.regenerateBackupCodes.message",defaultMessage:"Backup codes are used to log in if you lose access to your password and second factors. <boldtext>Your existing codes won't work after regenerating new ones.</boldtext>",values:{boldtext:e=>n()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,e)}}),d={text:i?n()(Ue.Z,{}):n()(v.FormattedMessage,{id:"mfa.regenerateBackupCodes.regenerateBackupCodes.button.message",defaultMessage:"Generate new backup codes"}),onClick:a,view:"outline",disabled:i,isRed:!0},c=[{text:n()(v.FormattedMessage,{id:"mfa.regenerateBackupCodes.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,view:"outline",type:"button"}];return n()(Sg.Z,{title:r,header:l,errorMessage:t,primaryAction:d,secondaryActions:c,onDismiss:s})}var Mg=i(457);function wg(e){let{backupCodes:t,backupCodeDownload:i,backupCodeFileName:a,errorMessage:o,onNoted:s,onDownload:l}=e;const d=n()(v.FormattedMessage,{id:"mfa.showBackupCodes.title",defaultMessage:"Save your backup codes"}),c=r.createElement(r.Fragment,null,n()(v.FormattedMessage,{id:"mfa.showBackupCodes.message",defaultMessage:"<boldtext>You can only see this once</boldtext>, so be sure to keep them to avoid getting locked out of your account.",values:{boldtext:e=>n()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,e)}})),u={text:n()(v.FormattedMessage,{id:"mfa.showBackupCodes.codesNotedDown.button.message",defaultMessage:"I've saved them"}),onClick:s},m=[{text:n()(v.FormattedMessage,{id:"mfa.showBackupCodes.downloadAsTextFile.button.message",defaultMessage:"Download as text file"}),href:`data:text/plain;charset=UTF-8,${i}`,saveAs:a,view:"outline",type:"link",onClick:l}];return n()(Sg.Z,{title:d,header:c,errorMessage:o,primaryAction:u,secondaryActions:m},void 0,n()(Mg.Z,{type:"unencryptedCodes",backupCodes:t}))}function Cg(e){const{backupCodesStateMachine:t,onGoToSettings:i,onDismiss:a}=e,o=t.useCurrentStep(),s=()=>t.backupCodesRegenerateCodes();switch(o.step){case"backupCodesUninitialized":case"backupCodesLoading":return null;case"backupCodesRegenerateCodes":return n()(bg,{isLoading:o.isLoading,errorMessage:o.error,onDisplayBackupCodes:s,onDismiss:a,onCancel:i});case"backupCodesShowCodes":return n()(wg,{errorMessage:o.error,backupCodes:o.backupCodes,backupCodeDownload:o.backupCodesFile,backupCodeFileName:"Notion Backup Codes.txt",onNoted:i});default:return(0,A.t1)(o)}}var _g=i(64898),kg=i(3338);function Tg(e){let{type:t,errorMessage:i,onDismiss:a,onAddMethod:o}=e;window.__c={n:"MFAPromptSetupComplete"};const s=(0,Fe.yK)(Ig,[]),r=n()(v.FormattedMessage,{id:"mfa.setupComplete.confirmation.header",defaultMessage:"Every time you enter your password, Notion will ask you for a verification code to confirm your identity."}),l=[{text:n()(v.FormattedMessage,{id:"mfa.setupComplete.confirmation.viewTwoStepMethods.button.message",defaultMessage:"View 2-step methods"}),onClick:o,type:"button",view:"outline"}];return n()(Sg.Z,{title:"totp"===t?n()(v.FormattedMessage,{id:"mfa.totp.setupComplete.confirmation.title",defaultMessage:"2-step verification with authenticator is turned on"}):"sms"===t?n()(v.FormattedMessage,{id:"mfa.sms.setupComplete.confirmation.title",defaultMessage:"2-step verification with phone number is turned on"}):(0,A.t1)(t),header:r,errorMessage:i,icon:(0,kg.p)(s.confirmationIcon),secondaryActions:l,onDismiss:a})}function Ig(e){return(0,Fe.EM)({confirmationIcon:{width:30,fill:"green"}})}i(30541);var Pg=i(4387),xg=i(49682);const Zg={name:"United States",countryCode:"1",regionCode:"US"},Fg=[{name:"China",countryCode:"86",regionCode:"CN"}];function Ag(e){let{isLoading:t,phoneNumber:i,country:a,errorMessage:o,onDismiss:l,onBack:d,onContinue:c}=e;window.__c={n:"MFAPromptSMSAddPhone"};const u=(0,Fe.yK)(Eg,[]),p=(0,v.useIntl)(),[g,h]=(0,r.useState)(i??""),[f,y]=(0,r.useState)([]),[S,b]=(0,r.useState)(""),[M,w]=(0,r.useState)(a??Zg),C=(0,Ze.qz)(void 0,Zt.Z),[_,T]=(0,r.useState)(void 0),I=(0,r.useMemo)((()=>(0,Pg.PG)(M.regionCode)),[M.regionCode]),P=(0,r.useCallback)((e=>{const t=e.target.value.replace(/\D/g,"");h(I.reset(t))}),[I]);(0,r.useEffect)((()=>{h(a!==M?I.reset(g??""):I.reset(i??""));const e=new Intl.DisplayNames(["en"],{type:"region"}),t=(0,Pg.wJ)();let n=-1;const o=t.map(((t,i)=>{const a=(0,Pg.t7)(t).toString(),o=e.of(t);return t===M.regionCode&&(n=i),{name:o??t,countryCode:a,regionCode:t}}));-1!==n&&o.unshift(o.splice(n,1)[0]),y(o),Fg.some((e=>m.Xy(e,M)))?T(xg.Qj.smsUnsupportedPhoneNumber(M.name)):T(void 0)}),[M]);const x=n()(v.FormattedMessage,{id:"profileSettings.mfa.sms.addPhoneTitle",defaultMessage:"Add a phone number"}),Z=n()(v.FormattedMessage,{id:"profileSettings.mfa.sms.addPhoneHeader",defaultMessage:"Enter your phone number to receive a 2-step verification code."}),F={text:t?n()(Ue.Z,{}):n()(v.FormattedMessage,{id:"profileSettings.mfa.sms.continueButton",defaultMessage:"Continue"}),onClick:()=>c(M,g.trim()),disabled:t||""===g||void 0!==_},A=[{text:n()(v.FormattedMessage,{id:"profileSettings.mfa.sms.addPhoneNeedHelp",defaultMessage:"Need help?"}),href:(0,Y.UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],E=p.formatMessage({id:"profileSettings.mfa.sms.phoneNumberInput.placeholder",defaultMessage:"Enter phone number"}),B=p.formatMessage({defaultMessage:"Search country code",id:"profileSettings.mfa.sms.countryCodeSelect.placeholder"}),R=e=>n()("div",{style:u.countryCodeSelectTitle},void 0,e.name,n()(Ee.Z,{isSmall:!0},void 0,`+${e.countryCode}`)),D=n()(Bt.ZP,{popupType:Bt.Z4.Popup,placementToOrigin:Wc.Iw.Bottom,alignmentToOrigin:Wc.lU.Start,buttonPopupStore:C,renderOrigin:e=>r.createElement(Le.Z,e,`+${M.countryCode}`),render:e=>n()(nt.Z,{menuType:Xe.og.Popup,minWidth:280,maxHeight:"30vh",header:n()(rt.Z,{isInput:!0},void 0,n()(nu.ZP,{value:S,onChange:e=>b(e.target.value),focus:!0,focusAfterAnimation:!0,placeholder:B}))},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:0,sections:[{key:"countries",render:e=>r.createElement(rt.Z,e),items:(0,fn.ZP)(S,f,(e=>/\d/.test(S)?`${e.countryCode}`:e.name)).map((t=>({key:t.regionCode,render:e=>r.createElement(it.Z,s()({},e,{title:R(t),right:t.name===M.name?(0,Vd.k)(u.selectedCountryCodeIcon):void 0})),action:()=>{b(""),w(t),e.close()}})))}]}))});return n()(Sg.Z,{onDismiss:l,onBack:d,title:x,header:Z,errorMessage:_||o,primaryAction:F,secondaryActions:A},void 0,n()("div",{style:u.container},void 0,n()("div",{style:u.countryCodeDropdownMenu},void 0,D),n()(Qi.Z,{autoFocus:!0,value:g,placeholder:E,spellCheck:!1,style:u.phoneNumberInput,onChange:P,disabled:t||void 0!==_,customElementAttributes:k.pf})))}function Eg(e){return(0,Fe.EM)({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:16,marginBottom:4},countryCodeDropdownMenu:{marginRight:5},selectedCountryCodeIcon:{width:15,height:15},countryCodeSelectTitle:{paddingTop:8,paddingBottom:8},phoneNumberInput:{background:"light"===e.mode?tn.ZP.transparent:e.inputBackground}})}var Bg=i(56839);function Rg(e){const{smsStateMachine:t,onGoToSettings:i,onDismiss:a,onStartBackupCodes:o}=e,s=t.useCurrentStep();switch(s.step){case"smsUninitialized":return null;case"smsSendingSMS":case"smsSetPhoneNumber":return n()(Ag,{phoneNumber:s.phoneNumber,country:s.country,isLoading:"smsSendingSMS"===s.step,errorMessage:s.error,onDismiss:a,onBack:i,onContinue:(e,i)=>t.smsCreateSMS(e,i)});case"smsVerifyCode":case"smsResendSMS":case"smsBackupCodesLoading":case"smsVerifying":return n()(Bg.ZP,{isLoading:"smsVerifying"===s.step||"smsBackupCodesLoading"===s.step,errorMessage:s.error,phoneNumber:`+${s.country.countryCode} ${s.phoneNumber}`,onDismiss:a,onBack:()=>t.smsRestart(),onVerifyCode:e=>t.smsVerifyCode({code:e,onVerified:o}),resentStatus:"smsResendSMS"===s.step?"resending":"resentAt"in s&&void 0!==s.resentAt?"resent":"not-resent",resentAt:"resentAt"in s&&s.resentAt?s.resentAt:0,onResendLink:()=>t.smsResendSMS()});case"smsVerified":return null;case"smsComplete":return n()(Tg,{type:"sms",errorMessage:s.error,onAddMethod:i,onDismiss:a});default:return(0,A.t1)(s)}}function Dg(e){window.__c={n:"MFAAuthenticatorNameInput"};const{placeholder:t,value:i,maxlength:a,style:o,onChange:s}=e,r=(0,Fe.yK)((e=>(0,Fe.EM)({input:{background:tn.ZP.transparent,color:e.darkTextColor,...o}})),[o]);return n()(Qi.Z,{value:i,placeholder:t,maxlength:a,style:r.input,inputStyle:f.Z.textOverflowStyle,autoFocus:!0,spellCheck:!1,onChange:s,autoComplete:"off",customElementAttributes:k.pf})}function Lg(e){let{isLoading:t,qrCode:i,friendlyName:a,errorMessage:o,onDismiss:s,onBack:l,onCantScanCode:d,onContinue:c}=e;window.__c={n:"MFAPromptTOTPScanQRCode"};const u=(0,Fe.yK)(Ng,[]),m=(0,v.useIntl)(),[p,g]=(0,r.useState)(a??""),h=(0,r.useCallback)((e=>{g(e.target.value)}),[g]),f=n()(v.FormattedMessage,{id:"profileSettings.mfa.totp.scanQRCodeTitle",defaultMessage:"Scan code in authenticator app"}),y=n()(v.FormattedMessage,{id:"profileSettings.mfa.totp.scanQRCodeHeader",defaultMessage:"Generate a verification code with an authenticator app, then enter a name to remember it by."}),S={text:n()(v.FormattedMessage,{id:"profileSettings.mfa.totp.continueButton",defaultMessage:"Continue"}),onClick:()=>c(p),disabled:!i||t||0===p.length},b=[{text:n()(v.FormattedMessage,{id:"profileSettings.mfa.totp.cantScanCodeButton",defaultMessage:"Can't scan code?"}),onClick:d,type:"button",view:"plain",disabled:t}],M=m.formatMessage({id:"profileSettings.mfa.totp.authenticatorNameInput.placeholder",defaultMessage:"Enter authenticator name"});return n()(Sg.Z,{onDismiss:s,onBack:l,title:f,header:y,errorMessage:o,primaryAction:S,secondaryActions:b},void 0,n()("div",{style:u.body},void 0,n()("div",{style:u.qrCodeContainer},void 0,i?n()("img",{style:u.qrCode,src:i}):n()(Ue.Z,{})),n()(Dg,{placeholder:M,value:p,maxlength:30,onChange:h})))}function Ng(e){return(0,Fe.EM)({body:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},qrCodeContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:116,height:116,marginBottom:15},qrCode:{width:"100%"}})}function Og(e){let{textCode:t,friendlyName:i,errorMessage:a,isLoading:o,onDismiss:s,onBack:l,onUseQrCode:d,onContinue:c}=e;window.__c={n:"MFAPromptTOTPTypeTextCode"};const u=(0,Fe.yK)(Vg,[]),[m,p]=(0,r.useState)(i??""),g=(0,v.useIntl)(),h=(0,r.useCallback)((e=>{p(e.target.value)}),[p]),f=n()(v.FormattedMessage,{id:"profileSettings.mfa.totp.typeTextCodeTitle",defaultMessage:"Type code from authenticator app"}),y=n()(v.FormattedMessage,{id:"profileSettings.mfa.totp.typeText.message",defaultMessage:"Input this setup key in your authenticator app, then enter a name to remember it by.",values:{authenticatorlink:e=>n()(ys.Z,{external:!0,href:(0,Y.UY)("guides.mfa")},void 0,e)}}),S={text:n()(v.FormattedMessage,{id:"profileSettings.mfa.totp.continueButton",defaultMessage:"Continue"}),onClick:()=>c(m),disabled:o||0===m.length},b=[{text:n()(v.FormattedMessage,{id:"profileSettings.mfa.totp.scanQRCodeButton",defaultMessage:"Scan QR code"}),onClick:d,type:"button",view:"plain",disabled:o}],M=g.formatMessage({id:"profileSettings.mfa.totp.authenticatorNameInput",defaultMessage:"Enter authenticator name"});return n()(Sg.Z,{onDismiss:s,onBack:l,title:f,header:y,errorMessage:a,primaryAction:S,secondaryActions:b},void 0,n()("div",{style:u.body},void 0,n()("div",{style:u.content},void 0,n()("div",{style:u.textCode},void 0,t)),n()(Dg,{placeholder:M,value:m,maxlength:30,onChange:h})))}function Vg(e){return(0,Fe.EM)({body:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},textCode:{fontWeight:f.Z.fontWeight.medium,fontSize:f.Z.fontSize.UIRegular.desktop,color:e.darkTextColor,textAlign:"center",verticalAlign:"middle"},content:{display:"flex",flexDirection:"column",justifyContent:"center",height:50,marginBottom:15}})}var Ug=i(18469);function Wg(e){const{totpStateMachine:t,onGoToSettings:i,onStartBackupCodes:a,onDismiss:o}=e,l=t.useCurrentStep();switch(l.step){case"totpUninitialized":return null;case"totpLoadingQRCode":case"totpDisplayQRCode":const e="totpLoadingQRCode"===l.step?{isLoading:!0,qrCode:void 0}:{isLoading:l.isLoading,qrCode:l.qrCode};return r.createElement(Lg,s()({},e,{friendlyName:"totpDisplayQRCode"===l.step?l.friendlyName:void 0,errorMessage:l.error,onDismiss:o,onBack:i,onCantScanCode:()=>t.totpDisplayTextCode(),onContinue:e=>t.totpDisplayVerification(e)}));case"totpDisplayTextCode":return n()(Og,{textCode:l.rawString,friendlyName:l.friendlyName,errorMessage:l.error,isLoading:l.isLoading,onDismiss:o,onBack:i,onUseQrCode:()=>t.totpDisplayQRCode(),onContinue:e=>t.totpDisplayVerification(e)});case"totpVerifyCode":case"totpBackupCodesLoading":case"totpVerifying":return n()(Ug.ZP,{isLoading:"totpVerifying"===l.step||"totpBackupCodesLoading"===l.step,errorMessage:l.error,onDismiss:o,onBack:()=>t.totpDisplayQRCode(),onVerifyCode:e=>t.totpVerifyCode({code:e,onVerified:a})});case"totpVerified":return null;case"totpComplete":return n()(Tg,{type:"totp",errorMessage:l.error,onDismiss:o,onAddMethod:i});default:return(0,A.t1)(l)}}function zg(e){window.__c={n:"RootRouter"};const{rootStateMachine:t,settingsStateMachine:i,totpStateMachine:a,smsStateMachine:o,backupCodesStateMachine:l,onReloadSettings:d}=e,c=t.useCurrentStep(),[{showSettings:u,onRootExit:m}]=(0,r.useState)((()=>({onRootExit:()=>t.exit((()=>{i.exit(),a.exit(),o.exit(),l.exit(),d&&d()})),showSettings:()=>t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{i.settingsConfirmIdentityForSettings()}})}))),p=()=>t.rootCloseSettings((()=>{i.exit(),d&&d()})),g=()=>t.rootStartTOTP((()=>a.totpStart())),h=()=>t.rootStartSMS((()=>o.smsStart())),f=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{a.exit(),i.settingsShow({refresh:!0})}})},v=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{o.exit(),i.settingsShow({refresh:!0})}})},y=()=>{l.exit(),t.rootEndBackupCodes({completeTotp:()=>{a.totpComplete()},completeSMS:()=>{o.smsComplete()},showSettings:u})},S=()=>{l.backupCodesInitialSetup({onLoadingComplete:()=>{a.totpBackupCodesComplete(),t.rootShowBackupCodesFromTOTP()},onComplete:()=>{a.totpBackupCodesComplete(),a.totpComplete(),y()}})},b=()=>{l.backupCodesInitialSetup({onLoadingComplete:()=>{o.smsBackupCodesComplete(),t.rootShowBackupCodesFromSMS()},onComplete:()=>{o.smsBackupCodesComplete(),o.smsComplete(),y()}})},M=()=>{t.rootStartBackupCodesFromSettings((()=>l.backupCodesShowCreate()))},w=i.useCurrentStep(),C=a.useCurrentStep(),_=o.useCurrentStep(),k=l.useCurrentStep();let T;switch(c.step){case"rootUninitialized":break;case"rootSettings":T={open:"settingsUninitialized"!==w.step,onDismiss:m,render:()=>n()(_g.Z,{settingsStateMachine:i,onDismiss:p,onStartTOTP:g,onStartSMS:h,onStartBackupCodes:M})};break;case"rootTOTP":T={open:"totpUninitialized"!==C.step,onDismiss:m,render:()=>n()(Wg,{totpStateMachine:a,onGoToSettings:f,onStartBackupCodes:S,onDismiss:m})};break;case"rootSMS":T={open:"smsUninitialized"!==_.step,onDismiss:m,render:()=>n()(Rg,{smsStateMachine:o,onGoToSettings:v,onStartBackupCodes:b,onDismiss:m})};break;case"rootBackupCodes":T={open:"backupCodesUninitialized"!==k.step,onDismiss:"backupCodesRegenerateCodes"===k.step?m:void 0,render:()=>n()(Cg,{backupCodesStateMachine:l,onGoToSettings:y,onDismiss:m})};break;default:throw(0,A.t1)(c)}return T?r.createElement(Zs.Z,s()({},T,{preventHideChildrenWhileOpening:!0})):null}class Kg extends D.default{getInitialState(){return{step:"rootUninitialized"}}}class Hg extends hg.o{constructor(e){super(e,"root")}rootShowSettings(e){const{refresh:t,startConfirmIdentity:i}=e;if(this.checkStep("rootSettings")){if(!t)return}else this.store.setState({step:"rootSettings"});i()}rootStartBackupCodesFromSettings(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootBackupCodes",source:"settings"}),e())}rootStartTOTP(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootTOTP"}),e())}rootShowBackupCodesFromTOTP(){this.checkStep("rootTOTP")&&this.store.setState({step:"rootBackupCodes",source:"totp"})}rootStartSMS(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootSMS"}),e())}rootShowBackupCodesFromSMS(){this.checkStep("rootSMS")&&this.store.setState({step:"rootBackupCodes",source:"sms"})}rootEndBackupCodes(e){const t=this.checkStep("rootBackupCodes");if(t)switch(t.source){case"settings":return this.store.setState({step:"rootSettings"}),e.showSettings();case"sms":return this.store.setState({step:"rootSMS"}),e.completeSMS();case"totp":return this.store.setState({step:"rootTOTP"}),e.completeTotp();default:(0,A.t1)(t.source)}}rootCloseSettings(e){e(),this.store.setState({step:"rootUninitialized"})}exit(e){this.store.setState({step:"rootUninitialized"}),e()}}var Gg=i(24173);class qg extends D.default{getInitialState(){return{step:"smsUninitialized"}}}class jg extends hg.o{constructor(e,t){super(e,"sms"),this.service=void 0,this.service=t}smsStart(){this.checkStep("smsUninitialized")&&this.store.setState({step:"smsSetPhoneNumber"})}smsRestart(){const e=this.checkStep(["smsResendSMS","smsVerifyCode","smsVerifying"]);e&&this.store.setState({step:"smsSetPhoneNumber",country:e.country,phoneNumber:e.phoneNumber,error:void 0})}smsCreateSMS(e,t){this.checkStep("smsSetPhoneNumber")&&(this.store.setState({country:e,phoneNumber:t,step:"smsSendingSMS"}),this.doCreateSMS().catch(this.handleUnexpectedError))}smsResendSMS(){const e=this.checkStep(["smsVerifyCode","smsVerifying"]);e&&(this.store.setState({...e,step:"smsResendSMS",error:void 0}),this.doResendSMS().catch(this.handleUnexpectedError))}smsVerifyCode(e){const{code:t,onVerified:i}=e,a=this.checkStep("smsVerifyCode");a&&(this.store.setState({...a,step:"smsVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:i}).catch(this.handleUnexpectedError))}smsBackupCodesComplete(){this.checkStep("smsBackupCodesLoading")&&this.store.setState({step:"smsVerified"})}smsComplete(){this.checkStep("smsVerified")&&this.store.setState({step:"smsComplete"})}exit(){this.store.setState({step:"smsUninitialized"})}async doCreateSMS(){const e=await this.withStep("smsSendingSMS",(e=>this.service.createSMS(e.country.countryCode,e.phoneNumber)));if(!e)return;const{result:t,state:i}=e;switch(t.status){case"created":this.store.setState({...i,step:"smsVerifyCode",mfaSettingId:t.mfaSettingId,error:void 0});break;case"already_verified_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:xg.Qj.smsAlreadyVerifiedPhoneNumber});break;case"invalid_country_code":this.store.setState({step:"smsSetPhoneNumber",error:xg.Qj.smsInvalidCountryCode});break;case"invalid_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:xg.Qj.smsInvalidPhoneCode});break;default:return(0,A.t1)(t)}}async doVerifyCode(e){const{code:t,onVerified:i}=e,a=await this.withStep("smsVerifying",(e=>this.service.verifySMS({mfaSettingId:e.mfaSettingId,code:t})));if(!a)return;const{result:n,state:o}=a;switch(n.status){case"match":this.store.setState({step:"smsBackupCodesLoading",country:o.country,phoneNumber:o.phoneNumber}),i();break;case"error":this.store.setState({...o,step:"smsVerifyCode",error:xg.Qj.unexpectedError});break;case"incorrect":this.store.setState({...o,step:"smsVerifyCode",error:xg.Qj.smsIncorrectCode});break;default:return(0,A.t1)(n.status)}}async doResendSMS(){const e=await this.withStep("smsResendSMS",(e=>this.service.sendSMS({mfaSettingId:e.mfaSettingId})));if(!e)return;const{result:t,state:i}=e;switch(t.status){case"ok":this.store.setState({...i,step:"smsVerifyCode",mfaSettingId:i.mfaSettingId,error:void 0,resentAt:Date.now()});break;case"error":this.store.setState({...i,step:"smsVerifyCode",mfaSettingId:i.mfaSettingId,error:xg.Qj.unexpectedError});break;default:return(0,A.t1)(t.status)}}}class Yg extends D.default{getInitialState(){return{step:"totpUninitialized"}}}class $g extends hg.o{constructor(e,t){super(e,"totp"),this.service=void 0,this.service=t}totpStart(){this.checkStep("totpUninitialized")&&(this.store.setState({step:"totpLoadingQRCode"}),this.doCreateTOTP().catch(this.handleUnexpectedError))}totpDisplayTextCode(){const e=this.getCurrentStep();switch(e.step){case"totpDisplayQRCode":case"totpVerifyCode":this.store.setState({...e,step:"totpDisplayTextCode",error:void 0,isLoading:!1})}}totpDisplayQRCode(){const e=this.getCurrentStep();switch(e.step){case"totpDisplayTextCode":case"totpVerifyCode":this.store.setState({...e,step:"totpDisplayQRCode",error:void 0,isLoading:!1})}}totpDisplayVerification(e){this.checkStep(["totpDisplayQRCode","totpDisplayTextCode"])&&this.doRenameTOTP(e).catch(this.handleUnexpectedError)}totpVerifyCode(e){const{code:t,onVerified:i}=e,a=this.checkStep("totpVerifyCode");a&&(this.store.setState({...a,step:"totpVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:i}).catch(this.handleUnexpectedError))}totpBackupCodesComplete(){this.checkStep("totpBackupCodesLoading")&&this.store.setState({step:"totpVerified"})}totpComplete(){this.checkStep("totpVerified")&&this.store.setState({step:"totpComplete"})}exit(){this.store.setState({step:"totpUninitialized"})}async doCreateTOTP(){const e=await this.withStep("totpLoadingQRCode",(()=>this.service.createTOTP()));if(!e)return;const{result:t}=e;this.store.setState({step:"totpDisplayQRCode",qrCode:t.qrCode,rawString:t.secret,mfaSettingId:t.mfaSettingId,isLoading:!1})}async doRenameTOTP(e){const t=await this.withStep(["totpDisplayQRCode","totpDisplayTextCode"],(t=>this.service.renameSettings({mfaSettingId:t.mfaSettingId,friendlyName:e})));if(!t)return;const{result:i,state:a}=t;switch(i.status){case"saved":this.store.setState({...a,step:"totpVerifyCode",friendlyName:e,error:void 0});break;case"duplicate":this.store.setState({...a,isLoading:!1,error:xg.Qj.totpDuplicateFriendlyName});break;case"empty":this.store.setState({...a,isLoading:!1,error:xg.Qj.totpEmptyFriendlyName});break;case"bad_friendly_name":this.store.setState({...a,isLoading:!1,error:xg.Qj.totpBadFriendlyName});break;default:return(0,A.t1)(i)}}async doVerifyCode(e){const{code:t,onVerified:i}=e,a=await this.withStep("totpVerifying",(e=>this.service.verifyTOTP({mfaSettingId:e.mfaSettingId,code:t})));if(!a)return;const{result:n,state:o}=a;switch(n.status){case"match":this.store.setState({step:"totpBackupCodesLoading"}),i();break;case"error":this.store.setState({...o,step:"totpVerifyCode",error:xg.Qj.unexpectedError});break;case"incorrect":this.store.setState({...o,step:"totpVerifyCode",error:xg.Qj.totpIncorrectCode});break;default:return(0,A.t1)(n.status)}}}function Qg(e){let{status:t,numMfaSettings:i,onReloadSettings:a,regenerateBackupCodes:o}=e;window.__c={n:"MFASettings"};const s=(0,xe.O7)(),[{rootStateMachine:l,settingsStateMachine:d,totpStateMachine:c,smsStateMachine:u,backupCodesStateMachine:m}]=(0,r.useState)((()=>{const e=new yg.r(s),t={totpStore:new Yg,settingsStore:new Gg.c,smsStore:new qg,backupCodesStore:new fg,rootStore:new Kg};return{mfaService:e,rootStateMachine:new Hg(t.rootStore),settingsStateMachine:new Gg.W(t.settingsStore,e),totpStateMachine:new $g(t.totpStore,e),smsStateMachine:new jg(t.smsStore,e),backupCodesStateMachine:new vg(t.backupCodesStore,e)}})),p=s.device.isMobile,g=(0,Fe.yK)((e=>({configureButton:{marginTop:p?12:0,marginBottom:p?4:0},regenerateBackupCodesBadge:{fontWeight:f.Z.fontWeight.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?tn.ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content"}})),[p]),h=(0,Ze.VK)((()=>ke.Z.state.highlightedSetting===ke.R.TwoStepVerification),[]);return r.createElement(r.Fragment,null,n()(Ss.Z,{type:"toggleToButton",isMobile:!1,title:n()(v.FormattedMessage,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.label",defaultMessage:"2-step verification"}),caption:n()(v.FormattedMessage,"on"===t?{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.settingConfigured.message",defaultMessage:"You have {numMfaSettings} verification methods turned on.",values:{numMfaSettings:i}}:{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.message",defaultMessage:"Add an additional layer of security to your account during login."}),isOn:"on"===t,buttonStyle:g.configureButton,buttonLabel:n()(v.FormattedMessage,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.label",defaultMessage:"Change verification methods"}),onClick:()=>{!function(e){let{rootStateMachine:t,settingsStateMachine:i}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>i.settingsConfirmIdentityForSettings()})}({rootStateMachine:l,settingsStateMachine:d})},tooltipLabel:n()(v.FormattedMessage,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.tooltip",defaultMessage:"A password is required to enable 2-step verification"}),disableTooltip:"disabled"!==t,disabled:"disabled"===t,badge:o&&n()(eg.Z,{style:g.regenerateBackupCodesBadge,content:n()(v.FormattedMessage,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.regenerateBackupCodes.badge",defaultMessage:"Regenerate backup codes"})}),shouldHighlight:h}),n()(zg,{onReloadSettings:a,rootStateMachine:l,settingsStateMachine:d,totpStateMachine:c,smsStateMachine:u,backupCodesStateMachine:m}))}var Jg=i(1548),Xg=i(30045);class eh extends l.Z{constructor(){super(...arguments),this.storeTypes={isEducationStore:D.default.createClass(!1)},this.handleUploadProfilePhoto=()=>{b.Her(this.environment),Br.cR({environment:this.environment,onStart:this.handleUploadStart,bucket:"public",onError:this.handleUploadError,onComplete:this.handleUploadComplete,accept:"image/*"})},this.handleRemoveProfilePhoto=()=>{this.props.spaceProfileSettingsStore.setState({...this.props.spaceProfileSettingsStore.state,profilePhoto:void 0}),V.createAndCommit({userAction:"SpaceProfileSettings.handleRemoveProfilePhoto",environment:this.environment,perform:e=>{const{currentUserStore:t}=B.default.state;t&&S.A({userStore:t,data:{profilePhoto:null},transaction:e})}})},this.handleNameChange=e=>{const t=e.target.value;b.O$H(this.environment,{from:this.props.spaceProfileSettingsStore.state.name,to:t}),this.props.spaceProfileSettingsStore.setState({...this.props.spaceProfileSettingsStore.state,name:t}),V.createAndCommit({userAction:"SpaceProfileSettings.handleNameChange",environment:this.environment,perform:e=>{const{currentUserStore:i}=B.default.state;i&&S.A({userStore:i,data:{name:t},transaction:e})}})},this.handleUploadStart=()=>{this.props.spaceProfileSettingsStore.setState({...this.props.spaceProfileSettingsStore.state,uploadingProfilePhoto:!0})},this.handleUploadError=()=>{this.props.spaceProfileSettingsStore.setState({...this.props.spaceProfileSettingsStore.state,uploadingProfilePhoto:!1}),M.showErrorMessage(n()(v.FormattedMessage,{id:"profileSettings.profilePhotoSection.uploadProfilePhotoError.message",defaultMessage:"Upload failed."}))},this.handleUploadComplete=e=>{const t=e[0];this.props.spaceProfileSettingsStore.setState({...this.props.spaceProfileSettingsStore.state,profilePhoto:t,uploadingProfilePhoto:!1}),V.createAndCommit({userAction:"SpaceProfileSettings.handleUploadComplete",environment:this.environment,perform:e=>{const{currentUserStore:i}=B.default.state;i&&S.A({userStore:i,data:{profilePhoto:t},transaction:e})}})}}async willMount(e){super.willMount(e);const{isEducationStore:t}=this.stores,{spaceProfileSettingsStore:i}=this.props,{currentUserStore:a,currentUserSettingsStore:n,currentUserRootStore:o}=B.default.state;if(a&&n){const t=i.getValueForUser(a,n,e.intl);t&&i.setState({...i.state,...t})}if(o){const e=((0,$.xR)({environment:this.environment,userRootStore:o})||[]).some((e=>e===Ye.default.pricing.student.productId));t.setState(e)}await P(this.environment,i)}willUnmount(){ke.Z.state.highlightedSetting&&ke.Z.setState({...ke.Z.state,highlightedSetting:void 0}),super.willUnmount()}renderComponent(){return Ae.Z.state.online?this.renderSettings():this.renderOfflineMessage()}renderOfflineMessage(){return n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{defaultMessage:"Please go online to manage your profile.",id:"profileSettings.offline.message"})))}renderSettings(){const{currentUserStore:e}=B.default.state;if(!e)return;const t=e.getValue();if(!t)return;const{name:i}=this.props.spaceProfileSettingsStore.state;return n()(Be.Z,{},void 0,this.renderPersonalSettings({currentUserStore:e,currentUserValue:t,userName:i}))}renderPersonalSettings(e){var t;const{userName:i,currentUserStore:a,currentUserValue:o}=e,s=q.default.getIntl(),l=(0,xr.N5)(a,s),d=(0,Ld.Gd)(o.email),c=Boolean(null===(t=this.props.spaceProfileSettingsStore.state.emailDomainSettings)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.prevent_profile_edits);return r.createElement(r.Fragment,null,this.renderMyProfileHeader({emailDomainForUser:d}),n()("div",{style:{display:"flex",flexDirection:"column"}},void 0,n()("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},void 0,n()(xr.ZP,{size:60,avatarType:l,isOffline:!Ae.Z.state.online,onUploadProfilePhoto:this.handleUploadProfilePhoto,onRemoveProfilePhoto:this.handleRemoveProfilePhoto,disabled:c,disabledTooltipMessage:n()(v.FormattedMessage,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:d}})}),n()("div",{style:{marginLeft:20,width:250}},void 0,n()(Zr.Z,{},void 0,n()(v.FormattedMessage,{id:"profileSettings.personalInfoSection.nameInput.label",defaultMessage:"Preferred name"})),this.renderUserNameDisplay({userName:i,emailDomainForUser:d,areProfileEditsDisabled:c}))),"photo"!==l.type&&!c&&n()("div",{style:{color:this.theme.mediumIconColor,fontSize:14,marginTop:8}},void 0,n()(v.FormattedMessage,{id:"editableUserAvatar.profilePhoto.addPhoto",defaultMessage:"Add photo"}))),n()(vs.Z,{size:48,isHidden:!0}),this.renderAccountSecuritySection({currentUserValue:o}),n()(vs.Z,{size:48,isHidden:!0}),this.renderAccountSupportSection())}renderUserNameDisplay(e){const{userName:t,emailDomainForUser:i,areProfileEditsDisabled:a}=e;return a?n()(Nt.Z,{renderTooltip:()=>n()(v.FormattedMessage,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:i}}),placement:Nt.Z.Placement.Bottom,alignment:Nt.Z.Alignment.Center,render:e=>r.createElement("div",s()({},e,{style:{opacity:.4}}),n()(Qi.Z,{disabled:!0,value:t}))}):n()(Qi.Z,{value:t,onChange:this.handleNameChange})}renderMyProfileHeader(e){var t;const{emailDomainForUser:i}=e,a=Boolean(null===(t=this.props.spaceProfileSettingsStore.state.emailDomainSettings)||void 0===t?void 0:t.isDomainVerified),o=T.default.checkGate("enable_managed_users_dashboard");return n()(Re.Z,{large:!0,divider:"full"},void 0,o&&a?n()("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",margin:"0 0 8px"}},void 0,n()(eg.Z,{style:{fontWeight:f.Z.fontWeight.medium,letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",margin:0},content:n()(v.FormattedMessage,{id:"profileSettings.myProfile.managedByline",defaultMessage:"Your account is managed by {domain}",values:{domain:i}})}),n()(Nt.Z,{render:e=>r.createElement("div",e,(0,Ke.D)({marginLeft:4,height:14,width:14,opacity:.5})),renderTooltip:()=>n()(v.FormattedMessage,{id:"profileSettings.myProfile.managedByTooltip",defaultMessage:"Contact your organization's administrator to change your profile information."})})):null,n()(v.FormattedMessage,{id:"profileSettings.myProfile.title",defaultMessage:"My profile"}))}renderAccountSecuritySection(e){var t;const{currentUserValue:i}=e,a=this.props.spaceProfileSettingsStore.state.accountSettings,o=Boolean(null===(t=this.props.spaceProfileSettingsStore.state.emailDomainSettings)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.prevent_profile_edits),s=()=>{P(this.environment,this.props.spaceProfileSettingsStore)};return r.createElement(r.Fragment,null,n()(Re.Z,{large:!0,divider:"full"},void 0,n()(v.FormattedMessage,{id:"profileSettings.accountSecurity.title",defaultMessage:"Account security"})),n()(lg,{userValue:i,hasEducationPlan:this.stores.isEducationStore.state,areProfileEditsDisabled:o}),n()(vs.Z,{size:18,isHidden:!0}),n()(Jg.Z,{hasPassword:a.hasPassword,hasPasswordActions:a.canConfigurePassword,isEducationPlan:this.props.isEducationPlan,samlEnforced:a.isSamlEnforced,email:i.email,isError:Boolean(a.error),onReloadSettings:s,mfaStatus:a.mfaStatus}),n()(vs.Z,{size:18,isHidden:!0}),n()(Qg,{status:a.mfaStatus,numMfaSettings:a.numMfaSettings,onReloadSettings:s,regenerateBackupCodes:a.regenerateBackupCodes}))}renderAccountSupportSection(){var e;const t=(null===(e=this.props.spaceProfileSettingsStore.state.emailDomainSettings)||void 0===e?void 0:e.settings)??{};return r.createElement(r.Fragment,null,n()(Re.Z,{large:!0,divider:"full"},void 0,n()(v.FormattedMessage,{id:"profileSettings.support.title",defaultMessage:"Support"})),n()(Xg.Z,{emailDomainSettings:t}),n()(vs.Z,{size:18,isHidden:!0}),n()(pg,{}),n()(vs.Z,{size:18,isHidden:!0}),n()(Xp.Z,{userEmailDomainSettings:this.props.spaceProfileSettingsStore.state.emailDomainSettings}))}}eh.displayName="SpaceProfileSettings";const th=(0,v.injectIntl)(eh);var ih=i(7189);function ah(e){let{users:t,store:i,extraColumns:a,initialSort:o}=e;window.__c={n:"UserTableBox"};const[s,l]=(0,r.useState)(o),d=(0,v.useIntl)();function c(e,t){return n()(Ri.Z,{disabled:!t.sortable,ignoreLocalHoverState:!0,onClick:()=>{!function(e){l({column:e,asc:(null==s?void 0:s.column)===e&&!(null!=s&&s.asc)})}(e)},style:{display:"flex",alignItems:"center"}},void 0,t.title,t.sortable&&s&&s.column===e&&function(e){const{up:t}=e,i={width:10,height:10,marginLeft:4};return t?(0,ih.K)({...i,transform:"rotate(180deg)"}):(0,ih.K)(i)}({up:s.asc}))}const u=(0,r.useMemo)((()=>({title:n()(v.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"60%"},sortable:!0,renderer:e=>n()(En.Z,{actorStore:e}),getValue:e=>e.getDisplayName(d)})),[d]),p=(0,r.useMemo)((()=>({name:u,...a})),[a,u]),g=m.XP(p).map((e=>({key:e,header:c(e,p[e]),style:p[e].style}))),h=(0,Ze.VK)((()=>{const e=t.map((e=>ft.U6.createChildStore(i,{table:ti.KJ,id:e.userId}))).filter((e=>e.isDefined()));return s?e.sort(((e,t)=>{const i=p[s.column].getValue(e),a=p[s.column].getValue(t);var n=i<a?-1:i>a?1:0;return s.asc?n:-1*n})):e}),[t,i,p,s]);return n()(gc.Z,{columns:g,rows:h.map((e=>{const t=Object.values(p).map((t=>t.renderer?t.renderer(e):r.createElement(r.Fragment,null,t.getValue(e))));return{key:e.id,columns:t}}))})}var nh=function(e){return e[e.UserUserSimilarity=0]="UserUserSimilarity",e}(nh||{});const oh={[nh.UserUserSimilarity]:n()(v.FormattedMessage,{id:"spaceSettingsDebugZone.userUserSimilarity.title",defaultMessage:"User Similarity"})};function sh(){const e=(0,Fs.mS)();return["on"===T.default.getGroup("user_similarity_debugging")||e?nh.UserUserSimilarity:void 0].filter(A.$K)}function rh(e){let{store:t}=e;window.__c={n:"DebugZoneUserUserSimilarityTab"};const{isOnline:i,subscriptionDataStoreData:a,userSimilarityData:o,visibleUsersLoaded:s,visibleUsers:l}=(0,Ze.VK)((()=>{var e,i;const a=null===(e=Te.default.state)||void 0===e?void 0:e.data,n=a?$.CM(a):[],o=m.yW(n.map((e=>ft.U6.createChildStore(t,{table:ti.KJ,id:e.userId}).isReady())));return{isOnline:Ae.Z.state.online,subscriptionDataStoreData:a,userSimilarityData:(null===(i=Te.default.state.data)||void 0===i?void 0:i.userSimilarity)||{},visibleUsersLoaded:o,visibleUsers:n}}),[t]);if(!i)return n()(Ee.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."}));if(!a)return n()(Ue.Z,{style:{margin:"calc(50% - 1em) auto"}});if(!s)return n()(Ue.Z,{style:{margin:"calc(50% - 1em) auto"}});const d={style:{},title:r.createElement(r.Fragment,null,"Similarity Score"),sortable:!0,renderer:e=>{var t;return r.createElement(r.Fragment,null,(null===(t=o[e.id])||void 0===t?void 0:t.toFixed(3))||0)},getValue:e=>o[e.id]||0};return n()(ah,{users:l,store:t,extraColumns:{similarityColumn:d},initialSort:{column:"similarityColumn",asc:!1}})}function lh(e){let{store:t}=e;window.__c={n:"SpaceSettingsDebugZone"};const{tabs:i}=(0,Ze.VK)((()=>({tabs:sh()})),[]),[a,o]=(0,r.useState)(i[0]);return n()(Be.Z,{},void 0,n()(bs.Z,{tabs:i.map((e=>oh[e])),selectedIndex:i.indexOf(a),onChange:e=>o(i[e]),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),a===nh.UserUserSimilarity&&n()(rh,{store:t}))}var dh=i(93108),ch=i(82356),uh=i(47409),mh=i(18442);const ph=(0,c.I)("settingsBilling",{viewBox:"0 0 20 20",svg:n()("path",{d:"M3.24219 17.5625H16.7578C18.3984 17.5625 19.2109 16.75 19.2109 15.1406V5.60156C19.2109 3.99219 18.3984 3.17969 16.7578 3.17969H3.24219C1.60938 3.17969 0.789062 3.98438 0.789062 5.60156V15.1406C0.789062 16.7578 1.60938 17.5625 3.24219 17.5625ZM2.04688 5.66406C2.04688 4.85156 2.47656 4.4375 3.25781 4.4375H16.7422C17.5156 4.4375 17.9531 4.85156 17.9531 5.66406V6.84375H2.04688V5.66406ZM3.25781 16.3047C2.47656 16.3047 2.04688 15.8906 2.04688 15.0781V8.61719H17.9531V15.0781C17.9531 15.8906 17.5156 16.3047 16.7422 16.3047H3.25781ZM4.5 14.625H6.41406C6.86719 14.625 7.17969 14.3125 7.17969 13.875V12.4297C7.17969 11.9844 6.86719 11.6797 6.41406 11.6797H4.5C4.03906 11.6797 3.72656 11.9844 3.72656 12.4297V13.875C3.72656 14.3125 4.03906 14.625 4.5 14.625Z"})});var gh=i(1436),hh=i(36312),fh=i(87393);const vh=(0,c.I)("settingsLanguage",{viewBox:"0 0 20 20",svg:n()("path",{d:"M10 18.3281C14.3594 18.3281 17.9688 14.7109 17.9688 10.3594C17.9688 6 14.3516 2.39062 9.99219 2.39062C5.64062 2.39062 2.03125 6 2.03125 10.3594C2.03125 14.7109 5.64844 18.3281 10 18.3281ZM5.32812 5.29688C6.10938 4.57031 7.0625 4.02344 8.10938 3.71875C7.57031 4.26562 7.10938 5.03906 6.76562 5.99219C6.21094 5.8125 5.72656 5.57812 5.32812 5.29688ZM11.8984 3.72656C12.9375 4.03125 13.8828 4.57812 14.6719 5.30469C14.2734 5.58594 13.7891 5.8125 13.2344 5.99219C12.8906 5.04688 12.4297 4.27344 11.8984 3.72656ZM7.77344 6.25C8.21094 5.05469 8.82031 4.19531 9.49219 3.89844V6.42969C8.875 6.40625 8.30469 6.34375 7.77344 6.25ZM10.5156 3.89844C11.1797 4.19531 11.7891 5.05469 12.2266 6.25C11.6953 6.34375 11.125 6.40625 10.5156 6.42969V3.89844ZM3.10938 9.84375C3.21875 8.42188 3.77344 7.10156 4.63281 6.03906C5.11719 6.40625 5.74219 6.71094 6.46875 6.94531C6.24219 7.82031 6.10156 8.79688 6.0625 9.84375H3.10938ZM13.9375 9.84375C13.8984 8.79688 13.7578 7.82031 13.5312 6.94531C14.2578 6.71094 14.8828 6.40625 15.3594 6.04688C16.2266 7.10156 16.7812 8.42188 16.8906 9.84375H13.9375ZM10.5156 9.84375V7.45312C11.2188 7.42969 11.8906 7.34375 12.5234 7.21094C12.7266 8.01562 12.8516 8.90625 12.8906 9.84375H10.5156ZM7.10938 9.84375C7.14844 8.90625 7.28125 8.01562 7.47656 7.21094C8.10938 7.34375 8.78125 7.42969 9.49219 7.45312V9.84375H7.10938ZM3.10938 10.8672H6.0625C6.10156 11.9375 6.24219 12.9219 6.46875 13.8047C5.75 14.0391 5.13281 14.3438 4.65625 14.7031C3.78125 13.6328 3.21875 12.3047 3.10938 10.8672ZM7.10938 10.8672H9.49219V13.3047C8.78906 13.3281 8.11719 13.4141 7.49219 13.5391C7.28125 12.7266 7.14062 11.8203 7.10938 10.8672ZM10.5156 13.3047V10.8672H12.8906C12.8594 11.8203 12.7188 12.7266 12.5078 13.5391C11.8906 13.4141 11.2109 13.3281 10.5156 13.3047ZM13.5312 13.8047C13.7578 12.9219 13.8984 11.9375 13.9375 10.8672H16.8906C16.7812 12.3047 16.2188 13.6328 15.3438 14.7031C14.8672 14.3438 14.25 14.0391 13.5312 13.8047ZM10.5156 14.3281C11.1172 14.3516 11.6875 14.4062 12.2109 14.5078C11.7734 15.6719 11.1719 16.5312 10.5156 16.8281V14.3281ZM7.78906 14.5078C8.3125 14.4062 8.88281 14.3516 9.49219 14.3281V16.8281C8.82812 16.5312 8.22656 15.6719 7.78906 14.5078ZM13.2266 14.7578C13.7734 14.9375 14.25 15.1641 14.6484 15.4375C13.8672 16.1484 12.9375 16.6875 11.9062 16.9922C12.4297 16.4531 12.8828 15.6875 13.2266 14.7578ZM5.35156 15.4375C5.75 15.1641 6.22656 14.9375 6.77344 14.7578C7.11719 15.6875 7.57031 16.4531 8.10156 16.9922C7.07031 16.6875 6.13281 16.1484 5.35156 15.4375Z"})});var yh=i(5108);const Sh=(0,c.I)("settingsNotifications",{viewBox:"3 1 17 17",svg:n()("path",{d:"M5.36914 13.7627C5.36914 13.0381 6.03906 12.416 6.6543 11.8145C7.13965 11.3428 7.24902 10.3994 7.33789 9.46289C7.42676 6.87207 8.17871 5.14258 9.96289 4.49316C10.2227 3.59082 10.9814 2.90039 12 2.90039C13.0186 2.90039 13.7773 3.59082 14.0371 4.49316C15.8213 5.14258 16.5732 6.87207 16.6621 9.46289C16.751 10.3994 16.8672 11.3428 17.3457 11.8145C17.9678 12.416 18.6309 13.0381 18.6309 13.7627C18.6309 14.3369 18.2002 14.7266 17.4893 14.7266H14.6797C14.6182 16.0391 13.5518 17.2285 12 17.2285C10.4482 17.2285 9.38184 16.0322 9.32031 14.7266H6.51074C5.80664 14.7266 5.36914 14.3369 5.36914 13.7627ZM7.00293 13.4756H16.9834V13.3936C16.8125 13.1953 16.4297 12.833 16.0879 12.4434C15.623 11.9033 15.3975 10.9258 15.3291 9.62695C15.2539 6.85156 14.3994 5.92871 13.2988 5.62793C13.1279 5.58691 13.0322 5.50488 13.0186 5.32031C12.9912 4.62305 12.6016 4.1582 12 4.1582C11.3984 4.1582 11.0156 4.62305 10.9814 5.32031C10.9678 5.50488 10.8721 5.58691 10.708 5.62793C9.60059 5.92871 8.75293 6.85156 8.6709 9.62695C8.60254 10.9258 8.38379 11.9033 7.91211 12.4434C7.57715 12.833 7.18066 13.1953 7.00293 13.3936V13.4756ZM10.6123 14.7266C10.667 15.5811 11.2275 16.1348 12 16.1348C12.7793 16.1348 13.3398 15.5811 13.3877 14.7266H10.6123Z"})});var bh=i(64530);const Mh=(0,c.I)("settingsPlans",{viewBox:"0 0 20 20",svg:n()("path",{d:"M2.75781 17.7656C2.95312 17.7656 3.15625 17.6953 3.40625 17.5547L7.38281 15.4141L11.7031 17.8359C11.9844 17.9922 12.2891 18.0703 12.5781 18.0703C12.8516 18.0703 13.125 18 13.3594 17.8672L17.4453 15.5469C17.9141 15.2891 18.125 14.9141 18.125 14.3906V3.86719C18.125 3.28906 17.8047 2.96875 17.2422 2.96875C17.0469 2.96875 16.8438 3.03125 16.5859 3.17188L12.4453 5.47656L8.20312 2.875C7.96094 2.73438 7.6875 2.65625 7.41406 2.65625C7.13281 2.65625 6.85156 2.73438 6.60938 2.875L2.54688 5.1875C2.08594 5.45312 1.875 5.82812 1.875 6.35156V16.8594C1.875 17.4375 2.19531 17.7656 2.75781 17.7656ZM6.875 14.1719L3.35156 16.1094C3.3125 16.125 3.27344 16.1484 3.23438 16.1484C3.17188 16.1484 3.13281 16.1016 3.13281 16.0234V6.65625C3.13281 6.46875 3.20312 6.33594 3.39062 6.22656L6.59375 4.35156C6.69531 4.29688 6.78125 4.25 6.875 4.19531V14.1719ZM8.13281 14.2969V4.35938C8.21094 4.40625 8.30469 4.45312 8.38281 4.5L11.8672 6.625V16.3906C11.7578 16.3281 11.6406 16.2734 11.5234 16.2109L8.13281 14.2969ZM13.125 16.5312V6.54688L16.6484 4.625C16.6875 4.60156 16.7266 4.58594 16.7578 4.58594C16.8281 4.58594 16.8672 4.63281 16.8672 4.71094V14.0781C16.8672 14.2734 16.7891 14.4062 16.6094 14.5156L13.4766 16.3359C13.3594 16.4062 13.2422 16.4766 13.125 16.5312Z"})}),wh=(0,c.I)("settingsSubscription",{viewBox:"0 0 20 20",svg:n()("path",{d:"M9 18.6191C13.9043 18.6191 17.9648 14.5498 17.9648 9.6543C17.9648 4.75 13.8955 0.689453 8.99121 0.689453C4.0957 0.689453 0.0351562 4.75 0.0351562 9.6543C0.0351562 14.5498 4.10449 18.6191 9 18.6191ZM9 17.125C4.85156 17.125 1.53809 13.8027 1.53809 9.6543C1.53809 5.50586 4.84277 2.18359 8.99121 2.18359C13.1396 2.18359 16.4619 5.50586 16.4707 9.6543C16.4795 13.8027 13.1484 17.125 9 17.125ZM5.07129 10.0586C5.07129 12.2559 6.82031 14.0225 8.99121 14.0225C11.1621 14.0225 12.9111 12.2559 12.9111 10.085C12.9111 9.75977 12.6299 9.49609 12.3047 9.49609C11.9795 9.49609 11.6982 9.75977 11.6982 10.085C11.6982 11.5967 10.4941 12.8096 8.99121 12.8096C7.48828 12.8096 6.28418 11.5967 6.28418 10.085C6.28418 8.58203 7.48828 7.38672 8.99121 7.38672C9.10547 7.38672 9.22852 7.38672 9.31641 7.4043L8.45508 8.24805C8.34961 8.35352 8.28809 8.49414 8.28809 8.65234C8.28809 8.95996 8.53418 9.20605 8.8418 9.20605C8.99121 9.20605 9.13184 9.13574 9.22852 9.03906L10.9336 7.33398C11.1533 7.13184 11.1357 6.73633 10.9336 6.52539L9.24609 4.80273C9.14941 4.69727 9 4.62695 8.8418 4.62695C8.52539 4.62695 8.28809 4.88184 8.28809 5.18945C8.28809 5.34766 8.34961 5.48828 8.44629 5.59375L9.07031 6.22656C9 6.21777 8.90332 6.20898 8.82422 6.20898C6.84668 6.20898 5.07129 7.90527 5.07129 10.0586Z"})});var Ch=i(72263),_h=i(46783),kh=i(69196);const Th=(0,v.defineMessages)({accountTab:{id:"spaceSettingsSidebar.accountTab.title",defaultMessage:"My account"},settingsTab:{id:"spaceSettingsSidebar.settingsTab.title",defaultMessage:"Settings"},teamsTab:{id:"spaceSettingsSidebar.teamsTab.title",defaultMessage:"Teamspaces"},peopleTab:{id:"spaceSettingsSidebar.peopleTab.title",defaultMessage:"People"},membersTab:{id:"spaceSettingsSidebar.membersTab.title",defaultMessage:"Members"},plansTab:{id:"spaceSettingsSidebar.plansTab.title",defaultMessage:"Plans"},upgradeTab:{id:"spaceSettingsSidebar.upgradeTab.title",defaultMessage:"Upgrade"},billingTab:{id:"spaceSettingsSidebar.billingTab.title",defaultMessage:"Billing"},subscriptionTab:{id:"spaceSettingsSidebar.subscriptionTab.title",defaultMessage:"Subscription"},connectedAppsTab:{id:"spaceSettingsSidebar.connectedAppsTab.title",defaultMessage:"My connected apps"},userConnectionsTab:{id:"spaceSettingsSidebar.userConnectionsTab.title",defaultMessage:"My connections"},securitySAMLTab:{id:"spaceSettingsSidebar.securityAndSAMLTab.title",defaultMessage:"Security & identity"},securityTab:{id:"spaceSettingsSidebar.securityTab.title",defaultMessage:"Security"},identityProvisioningTab:{id:"spaceSettingsSidebar.identity&ProvisioningTab.title",defaultMessage:"Identity & provisioning"},adminContentSearchTab:{id:"spaceSettingsSidebar.adminContentSearch.title",defaultMessage:"Content search"},languageAndRegionTab:{id:"spaceSettingsSidebar.languageAndRegionTab.title",defaultMessage:"Language & region"},integrationsTab:{id:"spaceSettingsSidebar.integrationsTab.title",defaultMessage:"Integrations"},spaceConnectionsTab:{id:"spaceSettingsSidebar.spaceConnectionsTab.title",defaultMessage:"Connections"},experimentsTab:{id:"spaceSettingsSidebar.experimentsTab.title",defaultMessage:"Experiments"},auditLogTab:{id:"spaceSettingsSidebar.auditLogTab.title",defaultMessage:"Audit log"},notificationsAndSettings:{id:"spaceSettingsSidebar.notificationsAndSettings.title",defaultMessage:"My notifications & settings"},mySettings:{id:"spaceSettingsSidebar.mySettings.title",defaultMessage:"My settings"},myNotifications:{id:"spaceSettingsSidebar.myNotifications.title",defaultMessage:"My notifications"},debugZoneTab:{id:"spaceSettingsSidebar.debugZoneTab.title",defaultMessage:"Debug Zone"},analyticsTab:{id:"spaceSettingsSidebar.analyticsTab.title",defaultMessage:"Analytics"},importTab:{id:"spaceSettingsSidebar.importsTab.title",defaultMessage:"Import"}}),Ih={width:20,height:20},Ph={profile:e=>(0,kh.H)(Ih),notifications_and_settings:()=>(0,bh.y)(Ih),user_settings:()=>(0,bh.y)(Ih),notifications:()=>Sh(Ih),connected_apps:()=>(0,gh.g)(Ih),language_and_region:()=>vh(Ih),settings:()=>(0,mh.H)(Ih),teams:()=>(0,Kr.K)(Ih),members:()=>(0,yh.n)(Ih),plans:()=>{const{data:e}=Te.default.state;return e&&$.YK(e)?Mh(Ih):(0,Ch._)(Ih)},billing:()=>ph(Ih),subscription:()=>wh(Ih),security:()=>(0,Tt.I)(Ih),identity_provisioning:()=>(0,hh.o)(Ih),admin_content_search:()=>(0,dh.p)(Ih),integrations:()=>(0,fh.L)(Ih),experiments:()=>(0,wp.t)(Ih),audit_log:()=>(0,uh.N)(Ih),debug_zone:()=>(0,_h.w)(Ih),analytics:()=>u(Ih),imports:()=>(0,ch.l)(Ih)},xh={profile:()=>`${q.default.formatMessage(Th.accountTab)}`,notifications_and_settings:()=>q.default.formatMessage(Th.notificationsAndSettings),user_settings:()=>q.default.formatMessage(Th.mySettings),notifications:()=>q.default.formatMessage(Th.myNotifications),connected_apps:()=>q.default.formatMessage(Th.userConnectionsTab),language_and_region:()=>q.default.formatMessage(Th.languageAndRegionTab),settings:()=>q.default.formatMessage(Th.settingsTab),teams:()=>q.default.formatMessage(Th.teamsTab),members:()=>(0,H.F$)()?q.default.formatMessage(Th.peopleTab):q.default.formatMessage(Th.membersTab),plans:()=>{const{data:e}=Te.default.state;return e&&$.YK(e)?q.default.formatMessage(Th.plansTab):q.default.formatMessage(Th.upgradeTab)},billing:()=>q.default.formatMessage(Th.billingTab),subscription:()=>q.default.formatMessage(Th.subscriptionTab),security:()=>q.default.formatMessage(Th.securityTab),identity_provisioning:()=>q.default.formatMessage(Th.identityProvisioningTab),admin_content_search:()=>q.default.formatMessage(Th.adminContentSearchTab),integrations:()=>q.default.formatMessage(Th.spaceConnectionsTab),experiments:()=>q.default.formatMessage(Th.experimentsTab),audit_log:()=>q.default.formatMessage(Th.auditLogTab),debug_zone:()=>q.default.formatMessage(Th.debugZoneTab),analytics:()=>q.default.formatMessage(Th.analyticsTab),imports:()=>q.default.formatMessage(Th.importTab)},Zh={profile:()=>null,notifications_and_settings:()=>null,user_settings:()=>null,notifications:()=>null,connected_apps:()=>null,language_and_region:()=>null,settings:()=>null,teams:()=>null,members:()=>null,plans:()=>null,billing:()=>null,subscription:()=>null,security:()=>null,identity_provisioning:()=>null,admin_content_search:()=>null,integrations:()=>null,experiments:()=>null,audit_log:()=>null,debug_zone:()=>null,analytics:()=>null,imports:()=>null},Fh={workspaceBalance:n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.workspaceSubscriptionBalance.title",defaultMessage:"Workspace balance"}),applyCoupon:n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.applyCoupon.title",defaultMessage:"Apply coupon"}),discount:n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.discount.title",defaultMessage:"Discount"})};var Ah=i(34859);class Eh extends D.default{getInitialState(){return{paymentMethodModalOpen:!1,billingIntervalModalOpen:!1,billingEmailModalOpen:!1,vatIdModalOpen:!1,addressModalOpen:!1,billingEventsLimit:20,billingEvents:[],applyCouponModalOpen:!1,addressErrorMessage:void 0}}setAddressField(e){const t=this.state.temporaryAddress?this.state.temporaryAddress:{name:"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""};this.setState({...this.state,temporaryAddress:{...t,...e},addressErrorMessage:void 0})}}const Bh=Eh;var Rh=i(53336);const Dh=(0,v.defineMessages)({apply_credit:{id:"spaceSubscriptionBilling.applyCreditButton.label",defaultMessage:"Apply credit"},update:{id:"spaceSubscriptionBilling.updateButton.label",defaultMessage:"Update"},add:{id:"spaceSubscriptionBilling.addButton.label",defaultMessage:"Add"},apply:{id:"spaceSubscriptionBilling.apply.label",defaultMessage:"Apply"}});class Lh extends l.Z{renderComponent(){const{title:e,caption:t,buttonArgs:i}=this.props,a=r.createElement(v.FormattedMessage,Dh[i.buttonPurpose]);return n()("div",{style:{display:"flex",alignItems:"center",fontSize:14}},void 0,n()("div",{style:{marginRight:"auto"}},void 0,e),n()("div",{style:{color:this.theme.mediumTextColor}},void 0,t),n()("div",{style:{minWidth:110,display:"flex",justifyContent:"flex-end"}},void 0,i.showButton&&n()(Ge.Z,{isBlue:!0,onClick:i.onClick,style:Lh.buttonStyle},void 0,a)))}}Lh.displayName="SubscriptionBillingSettingOption",Lh.buttonStyle={marginLeft:18,marginRight:-4,fontWeight:f.Z.fontWeight.medium};const Nh=(0,v.injectIntl)(Lh);function Oh(e){window.__c={n:"BillingRow"};const{mainLabel:t,valueLabel:i,metadataLabel:a,button:o}=e,s=(0,Fe.yK)((e=>({row:{display:"flex",alignItems:"center",gap:40,padding:"11px 0",borderBottom:`1px solid ${e.regularDividerColor}`},labelArea:{flex:1,display:"flex",flexDirection:"column",gap:6},mainLabel:{fontWeight:400,fontSize:14,lineHeight:"17px",letterSpacing:"-0.154px"},valueLabel:{fontWeight:400,fontSize:12,lineHeight:"14px",color:e.mediumTextColor},metadataLabel:{fontSize:12,lineHeight:"14px",textAlign:"right",color:e.mediumTextColor},buttonArea:{},button:{minWidth:144}})),[]);return n()("div",{style:s.row},void 0,n()("div",{style:s.labelArea},void 0,n()("div",{style:s.mainLabel},void 0,t),n()("div",{style:s.valueLabel},void 0,i)),a?n()("div",{style:s.metadataLabel},void 0,a):null,o?n()("div",{style:s.buttonArea},void 0,n()(Le.Z,{isLarge:!0,onClick:o.onClick,style:s.button},void 0,o.label)):null)}var Vh=i(42045);function Uh(e){window.__c={n:"BillingHistory"};const{spaceStore:t,events:i,upcomingInvoiceData:a}=e,o=(0,Fe.yK)((e=>({emptyList:{color:e.mediumTextColor,fontSize:14},header:{marginBottom:4}})),[]),s=t.id,r=a?`/invoice/upcoming?spaceId=${s}`:void 0,l=0===i.length&&!r;return n()("div",{style:{marginTop:40}},void 0,n()(Re.Z,{large:!0,divider:"full",style:o.header},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.invoices",defaultMessage:"Invoices"})),l?n()("div",{style:o.emptyList},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.noInvoicesMessage",defaultMessage:"This workspace has no payments yet."})):null,r?n()(Oh,{mainLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.upcomingInvoice",defaultMessage:"Upcoming invoice"}),button:{label:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.viewInvoice",defaultMessage:"View invoice"}),onClick:()=>{window.open(r,"_blank")}}}):null,i.map((e=>{const t=(0,an.Yx)(e.timestamp,"long",Dn.SP);let i;i="paid"===e.status?e.total<0?n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.credited",defaultMessage:"Credited"}):n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.paid",defaultMessage:"Paid"}):e.attempted?n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.failed",defaultMessage:"Failed"}):n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.invoicesSection.invoiceStatus.due",defaultMessage:"Due"});const a=n()(Vh.W,{cost:{amount:e.total,currencyCode:e.currencyCode},trailingZeroDisplay:"stripIfInteger"});return n()(Oh,{mainLabel:t,valueLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.invoiceSummary",defaultMessage:"{invoiceStatus} · {formattedAmount}",values:{invoiceStatus:i,formattedAmount:a}}),button:{label:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.viewInvoice",defaultMessage:"View invoice"}),onClick:()=>{const t=`/invoice/${e.id}`;window.open(t,"_blank")}}},e.id)})))}var Wh=i(19234),zh=i(6906);var Kh=i(99498),Hh=i(89859),Gh=i(17153),qh=i(94191),jh=i(90850);class Yh extends D.default{getInitialState(){return{temporaryCouponCode:void 0,couponCodeInput:void 0,error:void 0}}}const $h=Yh,Qh=(0,v.defineMessages)({couponCodePlaceholder:{id:"couponEntryInput.placeholder",defaultMessage:"Coupon code"},couponCodeNotFoundError:{id:"couponEntryInput.error.noPromo",defaultMessage:"Invalid coupon code"}});class Jh extends l.Z{constructor(){super(...arguments),this.storeTypes={couponCode:$h}}didMount(){const e=(0,jh.Zk)(this.environment.currentUser.id);e&&this.stores.couponCode.setState({...this.stores.couponCode.state,temporaryCouponCode:e})}renderComponent(){return n()("div",{style:this.getContainerStyle()},void 0,n()("div",{style:{display:"flex",flexDirection:"row"}},void 0,n()(Qi.Z,{textarea:!1,value:this.stores.couponCode.state.couponCodeInput,placeholder:q.default.formatMessage(Qh.couponCodePlaceholder),onSubmit:()=>this.checkCouponCode(),onChange:e=>{this.stores.couponCode.setState({...this.stores.couponCode.state,couponCodeInput:e.target.value})},style:{height:32,paddingLeft:10,marginRight:this.props.hideApply?0:10}}),n()(ns.Z,{request:this.stores.couponCode.state.temporaryCouponCode||null,performRequest:async e=>{if(e)return this.applyCouponCode(e)},render:(e,t,i)=>{if(!this.props.hideApply)return n()(Le.Z,{isLarge:!1,onClick:()=>this.checkCouponCode()},void 0,n()(ks.Z,{loaded:i,spinnerSize:16,showSpinnerTimeout:500},void 0,n()(v.FormattedMessage,{id:"couponEntryInput.button.apply",defaultMessage:"Apply"})))}})),this.stores.couponCode.state.error&&n()(Ee.Z,{isMultiline:!1,style:{paddingTop:8,color:tn.ZP.red}},void 0,this.stores.couponCode.state.error))}checkCouponCode(){const e=this.stores.couponCode.state.couponCodeInput;e&&(this.stores.couponCode.setState({...this.stores.couponCode.state,temporaryCouponCode:e}),this.stores.couponCode.setState({...this.stores.couponCode.state,couponCodeInput:""}))}async applyCouponCode(e){const t=await I.getPromoCode(this.environment,{code:e});if("success"===t.type){var i;if(t.data.promo)return null!==(i=t.data.promo.applies_to)&&void 0!==i&&i.length&&!t.data.promo.applies_to.includes(this.props.plan)?void this.showError(e):(this.stores.couponCode.setState({...this.stores.couponCode.state,error:void 0}),this.props.handlePromo(t.data.promo),b.p8V(this.environment,{code:e,valid:!0,id:t.data.promo.id}),t.data.promo);this.showError(e)}else if("failed"===t.type){const e=t.error.name;this.stores.couponCode.setState({...this.stores.couponCode.state,error:e})}else(0,A.t1)(t)}showError(e){this.stores.couponCode.setState({...this.stores.couponCode.state,error:q.default.formatMessage(Qh.couponCodeNotFoundError)}),b.p8V(this.environment,{code:e,valid:!1,id:void 0})}getContainerStyle(){return{display:"flex",flexDirection:"column",...this.props.style?this.props.style:void 0}}}Jh.displayName="CouponEntryInput";const Xh=Jh;var ef=i(86664),tf=i(16100),af=i(38479),nf=i(40675);function of(e){window.__c={n:"AddressModal"};const{addressErrorMessage:t,customerData:i,getUpdatedAddress:a,handleAddressAccept:o,handleModalClose:s,temporaryAddress:r,updateAddress:l}=e,d=(0,af.y)(),{updatedAddress:c,shouldShowBusinessName:u}=(0,Ze.VK)((()=>({updatedAddress:a(),shouldShowBusinessName:(0,Yo.mq)()})),[a]),m=(0,Fe.yK)((e=>({modal:{display:"flex",flexDirection:"column",maxHeight:"75vh"},modalBody:{width:500,background:e.popoverBackground,padding:24,borderRadius:3},footer:{display:"flex",justifyContent:"flex-end",padding:"16px 24px",background:e.cardContentBackground},modalTitle:{fontSize:18,marginBottom:16,fontWeight:f.Z.fontWeight.medium}})),[]),p=(0,tf.useElementsOptions)({type:"address"});return n()(ef.Elements,{stripe:(0,tf.getStripe)(),options:p},void 0,n()("div",{style:m.modal},void 0,n()("div",{style:m.modalBody},void 0,n()("div",{style:m.modalTitle},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeYourAddressModal.title",defaultMessage:"Change your address"})),n()(nf.J,{address:r||{name:i.customerName||"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""},availableCountries:d,updateAddress:l,shouldShowBusinessName:u}),n()("div",{style:{color:tn.ZP.red,marginTop:10}},void 0,t)),n()("div",{style:m.footer},void 0,n()(Le.Z,{isLarge:!0,onClick:s},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeBillingAddressModal.cancelButton.label",defaultMessage:"Cancel"})),n()(He.Z,{style:{marginLeft:12},isLarge:!0,disabled:void 0===c,onClick:o},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeBillingAddressModal.updateButton.label",defaultMessage:"Update"})))))}function sf(e){window.__c={n:"LegacyBillingModal"};const t=(0,Fe.yK)((e=>({wrapper:{width:500,background:e.popoverBackground,padding:24,borderRadius:3},modalTitle:{fontSize:18,marginBottom:16,fontWeight:f.Z.fontWeight.medium}})),[]),i=r.createElement(v.FormattedMessage,Dh[e.acceptAction]);return n()("div",{style:t.wrapper},void 0,n()("div",{style:t.modalTitle},void 0,e.title),e.children,n()("div",{style:{marginBottom:20}},void 0,e.helpButton),n()("div",{style:{display:"flex",justifyContent:"flex-end"}},void 0,n()(Le.Z,{isLarge:!0,onClick:e.onClose,style:{marginRight:12}},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.cancelButton.label",defaultMessage:"Cancel"})),n()(He.Z,{isLarge:!0,onClick:e.onAccept},void 0,i)))}var rf=i(36700);function lf(){return(0,Fe.yK)((e=>({button:{width:"100%",height:40,marginTop:24},cancellationButton:{marginRight:12,border:void 0},section:{display:"flex",alignItems:"center",fontSize:14,paddingTop:16,paddingBottom:16,background:"var(--core-gray-50, #F7F7F5)",borderRadius:4,margin:"12px 0",borderWidth:.5,borderStyle:"solid",borderColor:"#E3E2E0"},textSection:{marginRight:"auto",paddingRight:32},allChanges:{color:e.mediumTextColor,fontSize:12,paddingLeft:8,paddingRight:8}})),[])}function df(){return n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.scheduledChanges.cancel.label",defaultMessage:"<bold>Cancel changes</bold>",values:{bold:e=>n()("b",{},void 0,e)}})}function cf(e){window.__c={n:"AllChangesText"};const t=lf(),i=(0,v.useIntl)().formatList(e.scheduledChanges.filter(Boolean),{type:"conjunction",style:"narrow"});return n()("div",{style:t.allChanges},void 0,i)}function uf(e){window.__c={n:"PendingChangesText"};const{periodEndDate:t,scheduledChanges:i}=e,a=(0,an.Yx)(t,"medium",Dn.SP),o=(0,Fe.yK)((e=>({leftSection:{display:"flex",paddingLeft:12},title:{fontWeight:f.Z.fontWeight.medium,paddingLeft:8,paddingRight:8},icon:{width:14,height:14,marginTop:4}})),[]);return n()("div",{style:o.leftSection},void 0,(0,rf.m)(o.icon),n()("div",{},void 0,n()("div",{style:o.title},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.scheduledChanges.pendingChanges.title",defaultMessage:"Pending changes scheduled for {date}",values:{date:a}})),n()(cf,{scheduledChanges:i})))}function mf(e){window.__c={n:"CancelPendingCancellationChanges"};const{customerData:t}=e,i=lf(),a=(0,xe.O7)();return n()(Le.Z,{isLarge:!0,onClick:()=>Gh.LZ({environment:a,customerData:t}),style:i.cancellationButton},void 0,n()(df,{}))}function pf(e){window.__c={n:"CancelPendingChanges"};const{customerData:t}=e,i=lf(),a=(0,xe.O7)();return n()(Le.Z,{isLarge:!0,onClick:()=>Gh.y5({environment:a,customerData:t}),style:i.cancellationButton},void 0,n()(df,{}))}function gf(e){window.__c={n:"ScheduledChangesBillingSection"};const{stripeCustomerData:t}=e,i=lf(),{scheduledChanges:a,periodEndDate:o}=(0,Ze.VK)((()=>(0,qh.Tg)(t)),[t]),{cancelledChanges:s}=(0,Ze.VK)((()=>(0,qh.n8)(t)),[t]);if(t.isSubscribed&&t.willCancelAt)return n()("div",{style:i.section},void 0,n()("div",{style:i.textSection},void 0,n()(uf,{scheduledChanges:s,periodEndDate:t.willCancelAt})),n()(mf,{customerData:e.stripeCustomerData}));const r=(0,qh.dY)(t);return(0,qh.dA)(t)||r&&(0,qh.bM)(t)?n()("div",{style:i.section},void 0,n()("div",{style:i.textSection},void 0,n()(uf,{scheduledChanges:a,periodEndDate:o})),n()(pf,{customerData:e.stripeCustomerData})):null}var hf=i(62216),ff=i(30751),vf=i(16608);function yf(e){window.__c={n:"PaymentModal"};const{onClose:t,onAccept:i,customerData:a,spaceStore:o}=e,s=(0,xe.O7)(),r=(0,v.useIntl)(),l=(0,Fe.Fg)(),d=(0,Ze.VK)((()=>ff.Z.selectedCurrencyCode),[]),c=(0,tf.useElementsOptions)({type:"setup",currency:d});if(!(0,Ze.VK)((()=>hf.rR()),[]))return n()(xt.LazySpaceSubscriptionUpdatePaymentMethodModal,{customerData:a,spaceStore:o,onComplete:t});const u=[];return n()(ef.Elements,{stripe:(0,tf.getStripe)(),options:c},void 0,n()(ef.ElementsConsumer,{},void 0,(e=>{let{elements:a,stripe:d}=e;return n()(sf,{theme:l,title:"Payment method",onAccept:async()=>{if(!a||!d)return;const{error:e}=await a.submit();if(e)return;const t=await d.createPaymentMethod({elements:a});!t.error&&t.paymentMethod?(await Z.Mg({environment:s,spaceStore:o,paymentData:{type:"paymentMethodId",value:t.paymentMethod.id},from:"space_settings-billing_tab-update_payment_method"}),i()):t.error&&M.showErrorMessage(tf.translateStripeError(s,r,t.error))},onClose:t,acceptAction:"update"},void 0,n()(vf.k,{paymentMethods:u,temporaryPaymentMethod:"credit_card",payButtonState:"enabled"}))})))}const Sf={offline:n()(v.FormattedMessage,{defaultMessage:"Please go online to manage billing.",id:"spaceSubscriptionBillingV2.offline.message"})};class bf extends l.Z{constructor(){super(...arguments),this.couponEntryInput=null,this.storeTypes={store:Bh,billingHistoryRequestStore:zo.Z},this.renderPlanTypeName=e=>{switch(e){case"personal":return n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.planType.personal",defaultMessage:"Personal"});case"plus":return n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.planType.plus",defaultMessage:"Plus"});case"business":return n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.planType.business",defaultMessage:"Business"});case"enterprise":return n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.planType.enterprise",defaultMessage:"Enterprise"});default:return null}},this.renderPaymentMethodModal=()=>{const{customerData:e,spaceStore:t}=this.props;return n()(yf,{customerData:e,spaceStore:t,onClose:this.handleModalClose,onAccept:this.handleModalClose})},this.renderSingleTextFieldModal=(e,t,i,a,o)=>n()(sf,{theme:this.theme,title:t,acceptAction:o,onAccept:a,onClose:this.handleModalClose},void 0,n()(Qi.Z,{focus:!0,selectAll:!0,value:e,onChange:i,onSubmit:a,style:bf.modalInputStyle})),this.renderBillingEmailModal=()=>{const{customerData:e}=this.props,{temporaryBillingEmail:t}=this.stores.store.state,i=void 0!==t?t:e.billingEmail||"",a=e.billingEmail?"update":"add";return this.renderSingleTextFieldModal(i,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeBillingEmailModal.title",defaultMessage:"Change billing email"}),this.handleBillingEmailChange,this.handleBillingEmailAccept,a)},this.renderVatIdModal=()=>{const{customerData:e}=this.props,{temporaryVatId:t}=this.stores.store.state,i=void 0!==t?t:e.vatId||"",a=e.vatId?"update":"add";return n()(sf,{theme:this.theme,title:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeVATIDModal.title",defaultMessage:"Change VAT/GST number"}),acceptAction:a,onAccept:this.handleVatIdAccept,onClose:this.handleModalClose},void 0,n()(Qi.Z,{focus:!0,selectAll:!0,value:i,onChange:this.handleVatIdChange,onSubmit:this.handleVatIdAccept,style:bf.modalInputStyle}),n()("div",{style:{color:this.theme.mediumTextColor,fontSize:f.Z.fontSize.UISmall.desktop,marginTop:-10}},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.changeVATIDModal.subtitle",defaultMessage:"Please include your country code"})))},this.renderApplyCouponModal=()=>this.props.customerData.isSubscribed?n()(sf,{theme:this.theme,title:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.applyCouponModal.title",defaultMessage:"Apply coupon"}),acceptAction:"apply",onAccept:()=>{this.couponEntryInput&&this.couponEntryInput.checkCouponCode()},onClose:this.handleModalClose},void 0,r.createElement(Xh,{ref:e=>this.couponEntryInput=e,hideApply:!0,plan:this.props.customerData.plan,handlePromo:async e=>{this.handleModalClose();await Z.Mg({environment:this.environment,spaceStore:this.props.spaceStore,coupon:e&&"coupon"===e.source?e.code:void 0,promoCodeId:e&&"promo_code"===e.source?e.code:void 0,from:"space_settings-billing_tab"})&&M.showMessage({message:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.applyCouponModal.successMessage",defaultMessage:"Coupon applied!"})})}})):null,this.handleChangePlanClick=()=>{ke.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0})},this.handlePaymentMethodChangeClick=()=>{this.stores.store.setState({...this.stores.store.state,paymentMethodModalOpen:!0})},this.handleBillingIntervalChangeClick=()=>{const{customerData:e}=this.props,t="interval"in e?e.interval:"year",i="year"===t?"month":"year";Gh.af({environment:this.environment,from:"billing_page",view:"billing_interval",temporaryBillingInterval:i,billingInterval:t,onSuccess:()=>{Z.zb(this.environment,this.stores.store)}})},this.handleAddressChangeClick=()=>{this.stores.store.setState({...this.stores.store.state,addressModalOpen:!0})},this.handleVatIdChangeClick=()=>{var e;const{customerData:t}=this.props,i=null===(e=t.address)||void 0===e?void 0:e.country;if(!i)return void M.showErrorMessage(n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.vatId.missingCountry",defaultMessage:"To update your VAT/GST number, please update your billing address."}));!{AE:"ae_trn",AT:"eu_vat",AU:"au_abn",BE:"eu_vat",BG:"eu_vat",CA:"ca_bn",CH:"ch_vat",CY:"eu_vat",CZ:"eu_vat",DE:"eu_vat",DK:"eu_vat",EE:"eu_vat",ES:"eu_vat",FI:"eu_vat",FR:"eu_vat",GB:"gb_vat",GR:"eu_vat",HR:"eu_vat",HU:"eu_vat",IE:"eu_vat",IN:"in_gst",IT:"eu_vat",KR:"kr_brn",LT:"eu_vat",LU:"eu_vat",LV:"eu_vat",MT:"eu_vat",NL:"eu_vat",NZ:"nz_gst",PL:"eu_vat",PT:"eu_vat",RO:"eu_vat",RU:"ru_inn",SE:"eu_vat",SG:"sg_gst",SI:"eu_vat",SK:"eu_vat"}[i]?M.showErrorMessage(n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.vatId.vatNotRequired",defaultMessage:"A VAT/GST number is not required for your tax jurisdiction."})):this.stores.store.setState({...this.stores.store.state,vatIdModalOpen:!0})},this.handleModalClose=()=>{this.stores.store.reset()},this.handleBillingEmailChange=e=>{this.stores.store.setState({...this.stores.store.state,temporaryBillingEmail:e.target.value})},this.handleBillingEmailAccept=async()=>{const{spaceStore:e,customerData:t}=this.props,{temporaryBillingEmail:i}=this.stores.store.state;i!==t.billingEmail&&await Z.Mg({environment:this.environment,spaceStore:e,billingEmail:i,from:"space_settings-billing_tab"}),this.handleModalClose()},this.handleVatIdChange=e=>{this.stores.store.setState({...this.stores.store.state,temporaryVatId:e.target.value})},this.handleVatIdAccept=async()=>{const{spaceStore:e,customerData:t}=this.props,{temporaryVatId:i}=this.stores.store.state;i!==t.vatId&&await Z.Mg({environment:this.environment,spaceStore:e,vatId:i,from:"space_settings-billing_tab"}),this.handleModalClose()},this.handleAddressAccept=async()=>{const{spaceStore:e}=this.props,t=this.getUpdatedAddress();if(t&&(0,Wh.A)(t))try{await Z.y3({environment:this.environment,spaceStore:e,address:t}),this.handleModalClose()}catch(i){}else this.stores.store.setState({...this.stores.store.state,addressErrorMessage:this.props.intl.formatMessage({id:"spaceSubscriptionBillingV2.address.invalidError",defaultMessage:"Your address is invalid. Please update your address so we can process your payment."})})},this.getUpdatedAddress=()=>{const{customerData:e}=this.props,{temporaryAddress:t}=this.stores.store.state;if(t&&t!==e.address)return t},this.handleBillingEmailChangeClick=()=>{this.stores.store.setState({...this.stores.store.state,billingEmailModalOpen:!0})}}willMount(){Z.bi(this.environment),Z.px(this.environment),Z.zb(this.environment,this.stores.store)}renderComponent(){return Ae.Z.state.online?this.renderBilling():bf.renderOfflineMessage()}static renderOfflineMessage(){return n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,Sf.offline))}renderPlanRow(){const{subscriptionData:e,customerData:t}=this.props;let i,a;const o=$.XX(e);o&&(i=n()(Vh.W,{cost:{amount:o.planAmount*o.quantity,currencyCode:o.currencyCode},trailingZeroDisplay:"stripIfInteger"}),a=(0,an.Yx)(o.periodEnd,"medium",Dn.SP));const s=t.willCancelAt,r=n()(v.FormattedMessage,s?{id:"spaceSubscriptionBillingV2.cancels",defaultMessage:"Cancels"}:{id:"spaceSubscriptionBillingV2.renews",defaultMessage:"Renews"});let l;if(o)switch(o.interval){case"month":l=n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.month",defaultMessage:"{planCharge} per month · {renewalOrCancellationMessage} {renewalDate}",values:{planCharge:i,renewalDate:a,renewalOrCancellationMessage:r}});break;case"year":l=n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.year",defaultMessage:"{planCharge} per year · {renewalOrCancellationMessage} {renewalDate}",values:{planCharge:i,renewalDate:a,renewalOrCancellationMessage:r}});break;default:(0,A.t1)(o.interval)}return n()(Oh,{mainLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.plan",defaultMessage:"Plan"}),metadataLabel:l,valueLabel:o?this.renderPlanTypeName($.NW(o.productId)):"Free",button:{label:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.changePlan",defaultMessage:"Change plan"}),onClick:this.handleChangePlanClick}})}renderAdditionalFeaturesRowMetadataLabel(e,t){const{customerData:i}=this.props,a=i.isSubscribed?i.interval:"month",o=n()(Vh.W,{cost:{amount:e.cost,currencyCode:i.currencyCode??"USD"},trailingZeroDisplay:"stripIfInteger"}),s=i.periodEnd;return n()(v.FormattedMessage,t?{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.cancels",defaultMessage:"{planCharge} per {interval} · Cancels {date}",values:{planCharge:o,interval:a,date:(0,an.Yx)(t,"medium",Dn.SP)}}:s?{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.renews",defaultMessage:"{planCharge} per {interval} · Renews {date}",values:{planCharge:o,interval:a,date:(0,an.Yx)(s,"medium",Dn.SP)}}:{id:"spaceSubscriptionBillingV2.priceAndRenewalDate.priceOnly",defaultMessage:"{planCharge} per {interval}",values:{planCharge:o,interval:a}})}renderAdditionalFeaturesRow(e){const{customerData:t}=this.props,i=qh.A0(t);let a;var o;i&&(a=(0,g.ls)(null===(o=Te.default.state.data)||void 0===o?void 0:o.addOns)??t.periodEnd);const s={label:n()(v.FormattedMessage,i?{id:"spaceSubscriptionBillingV2.resubscribe",defaultMessage:"Resubscribe"}:{id:"spaceSubscriptionBillingV2.removeFromPlan",defaultMessage:"Remove from plan"}),onClick:async()=>{if(a){if(t.willCancelAt){const e=t.customerId?await Hh.y(this.environment,{offerType:"add_on_upgrade_flow",customerId:t.customerId}):void 0;return Kh.k2(),void Kh.Cl(e)}await Gh.y5({environment:this.environment,customerData:t})}else Kh.Kj()}};return n()(Oh,{mainLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.additionalFeatures",defaultMessage:"Additional features"}),metadataLabel:this.renderAdditionalFeaturesRowMetadataLabel(e,a),valueLabel:"Notion AI",button:s})}renderAdditionalFeaturesRows(){const{customerData:e}=this.props;return e.addOns.map((e=>n()(r.Fragment,{},e.feature,this.renderAdditionalFeaturesRow(e))))}renderBillingPeriodRow(){return(0,Yo.iJ)()||!this.props.customerData.isSubscribed&&(0,g.E3)(this.props.customerData.addOns)?null:n()(Oh,{mainLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.billingPeriod",defaultMessage:"Billing period"}),valueLabel:this.renderBillingInterval(),button:{label:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.editPeriod",defaultMessage:"Edit period"}),onClick:this.handleBillingIntervalChangeClick}})}renderBillingEmailRow(){const{customerData:e}=this.props;return n()(Oh,{mainLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.billingEmail",defaultMessage:"Billing email"}),valueLabel:e.billingEmail??"",button:{label:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.editEmail",defaultMessage:"Edit email"}),onClick:this.handleBillingEmailChangeClick}})}renderPaymentMethodRow(){return n()(Oh,{mainLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethod",defaultMessage:"Payment method"}),valueLabel:this.renderPaymentMethodType(),metadataLabel:this.renderPaymentMethodSummary(),button:{label:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.editMethod",defaultMessage:"Edit method"}),onClick:this.handlePaymentMethodChangeClick}})}renderAddressRow(){const{customerData:e}=this.props;return n()(Oh,{mainLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.billedTo",defaultMessage:"Billed to"}),valueLabel:this.renderAddressString(e.address),button:{label:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.editInformation",defaultMessage:"Edit information"}),onClick:this.handleAddressChangeClick}})}renderVATRow(){const{customerData:e}=this.props;return n()(Oh,{mainLabel:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.vatGst",defaultMessage:"VAT/GST number"}),valueLabel:n()("div",{},void 0,e.vatId||"-"),button:{label:n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.editNumber",defaultMessage:"Edit number"}),onClick:this.handleVatIdChangeClick}})}renderBilling(){const{paymentMethodModalOpen:e,billingEmailModalOpen:t,addressModalOpen:i,vatIdModalOpen:a,applyCouponModalOpen:o,billingEvents:s}=this.stores.store.state;return n()("div",{style:bf.wrapStyle},void 0,n()(Rh.Z,{style:bf.scrollerStyle,type:Ah.Z.Y},void 0,n()(Re.Z,{large:!0,divider:"full",style:bf.settingHeaderStyle},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.billing",defaultMessage:"Billing"})),n()(gf,{stripeCustomerData:this.props.customerData}),this.renderPlanRow(),this.renderAdditionalFeaturesRows(),this.renderBillingPeriodRow(),n()("div",{style:{height:40}}),n()(Re.Z,{large:!0,divider:"full",style:bf.settingHeaderStyle},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentDetails",defaultMessage:"Payment details"})),this.renderPaymentMethodRow(),this.renderAddressRow(),this.renderBillingEmailRow(),this.renderVATRow(),n()(Uh,{spaceStore:this.props.spaceStore,events:s,upcomingInvoiceData:this.props.upcomingInvoiceData}),n()(Zs.Z,{open:e,render:this.renderPaymentMethodModal,onDismiss:this.handleModalClose}),n()(Zs.Z,{open:t,render:this.renderBillingEmailModal,onDismiss:this.handleModalClose}),n()(Zs.Z,{open:i,render:()=>n()(of,{addressErrorMessage:this.stores.store.state.addressErrorMessage,customerData:this.props.customerData,getUpdatedAddress:this.getUpdatedAddress,handleAddressAccept:this.handleAddressAccept,handleModalClose:this.handleModalClose,temporaryAddress:this.stores.store.state.temporaryAddress,updateAddress:e=>{this.stores.store.setAddressField(e)}}),onDismiss:this.handleModalClose}),n()(Zs.Z,{open:a,render:this.renderVatIdModal,onDismiss:this.handleModalClose}),n()(Zs.Z,{open:o,render:this.renderApplyCouponModal,onDismiss:this.handleModalClose})))}renderPaymentMethodType(){const{customerData:e}=this.props,t=e.isSubscribed?e.billing:"charge_automatically";if("send_invoice"===t)return n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.paymentMethod.value.achOrWireTransfer",defaultMessage:"ACH or Wire Transfer"});if("charge_automatically"!==t)return n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.paymentMethod.value.none",defaultMessage:"None"});switch(e.paymentMethodType){case"card":return n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethodType.creditCard",defaultMessage:"Credit card"});case"link":return n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethodType.link",defaultMessage:"Stripe Link"});default:return n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethodType.other",defaultMessage:"Other"})}}renderPaymentMethodSummary(){const{customerData:e}=this.props,t=e.isSubscribed?e.billing:"charge_automatically";if("send_invoice"===t)return n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.paymentMethod.value.achOrWireTransfer",defaultMessage:"ACH or Wire Transfer"});if("charge_automatically"!==t)return n()(v.FormattedMessage,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.paymentMethod.value.none",defaultMessage:"None"});switch(e.paymentMethodType){case"card":return n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.paymentMethod.creditCard",defaultMessage:"{creditCardBrand} ending in {lastFourDigits}",values:{creditCardBrand:(0,zh.Z)(e.brand),lastFourDigits:e.last4}});default:return}}renderBillingInterval(){const{customerData:e}=this.props;return e.isSubscribed?"month"===e.interval?n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.subscriptionSettingsSection.billingInterval.value.monthly",defaultMessage:"Monthly"}):n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.subscriptionSettingsSection.billingInterval.value.yearly",defaultMessage:"Yearly"}):n()(v.FormattedMessage,{id:"spaceSubscriptionBillingV2.subscriptionSettingsSection.billingInterval.value.monthly",defaultMessage:"Monthly"})}renderAddressString(e){return e?this.props.intl.formatList([e.name,e.businessName,e.addressLine1,e.country].filter(Boolean),{type:"conjunction",style:"narrow"}):""}}bf.displayName="SpaceSubscriptionBillingV2",bf.wrapStyle={display:"flex",flexDirection:"column",height:"100%"},bf.scrollerStyle={height:"100%",padding:"36px 60px"},bf.modalInputStyle={marginTop:12,marginBottom:20},bf.settingHeaderStyle={marginBottom:4};const Mf=(0,v.injectIntl)(bf);class wf extends l.Z{constructor(){super(...arguments),this.storeTypes={store:Bh}}willMount(){Z.bi(this.environment),Z.zb(this.environment,this.stores.store)}renderComponent(){const{data:e}=this.props;return Ae.Z.state.online?n()("div",{style:wf.wrapStyle},void 0,n()(Rh.Z,{style:wf.scrollerStyle,type:Ah.Z.Y},void 0,n()(Re.Z,{large:!0,divider:"full"},void 0,r.createElement(v.FormattedMessage,Th.billingTab)),this.renderCredit(e),this.renderSeparator(),n()(Uh,{spaceStore:this.props.spaceStore,events:this.stores.store.state.billingEvents,upcomingInvoiceData:void 0}))):wf.renderOfflineMessage()}static renderOfflineMessage(){return n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,Sf.offline))}renderCredit(e){var t;const i=null===(t=e.customerData)||void 0===t?void 0:t.stripe.currencyCode;if(!i)return null;const a=-Math.min(0,e.accountBalance);return n()(Nh,{title:Fh.workspaceBalance,caption:n()("div",{},void 0,n()(Vh.W,{cost:{amount:a,currencyCode:i},trailingZeroDisplay:"stripIfInteger"})),buttonArgs:{showButton:!1,buttonPurpose:"apply_credit",onClick:m.ZT}})}renderSeparator(){return n()("div",{style:{flex:"none",marginTop:30}})}}wf.displayName="SpaceSubscriptionBillingUnsubscribed",wf.wrapStyle={display:"flex",flexDirection:"column",height:"100%"},wf.scrollerStyle={height:"100%",padding:"36px 60px"};const Cf=wf;var _f=i(30120),kf=i(2585),Tf=i(12139),If=i(71993),Pf=i(7036);class xf extends D.default{getInitialState(){return{termType:"yearly"}}}const Zf=new xf;var Ff=i(91754),Af=i(32617),Ef=i(10644),Bf=i(25889),Rf=i(65965);const Df=function(e){return!!e.device.isMobile||e.WindowSizeStore.state.width<960};var Lf=i(73796);class Nf extends l.Z{renderComponent(){const e="yearly"===Zf.state.termType?"monthly":"yearly";return n()("div",{style:Nf.getTermToggleStyle(this.theme),onClick:()=>{b.iw$(this.environment,{from:"pricing_grid_top",toggle_to:e}),Zf.setState({...Zf.state,termType:e})}},void 0,n()("div",{style:{marginRight:8}},void 0,n()(v.FormattedMessage,{id:"pricingGrid.pricingTermToggle.payAnnually.label",defaultMessage:"Pay annually"})),n()(Fr.Z,{on:"monthly"===Zf.state.termType}),n()("div",{style:{marginLeft:8}},void 0,n()(v.FormattedMessage,{id:"pricingGrid.pricingTermToggle.payMonthly.label",defaultMessage:"Monthly"})))}static getTermToggleStyle(e){return{cursor:"pointer",fontSize:14,color:e.mediumTextColor,display:"flex",alignItems:"center",marginBottom:8}}}Nf.displayName="PricingTermToggle";const Of=Nf;var Vf=i(78641);const Uf=["free","plus","business","enterprise"];class Wf extends l.Z{willMount(e){const t=$.XX(e.data);t&&e.data&&Zf.setState({termType:"year"===t.interval?"yearly":"monthly"})}renderComponent(){const e=(0,Rf.Sl)();return n()("div",{},void 0,n()("table",{style:Wf.getTableStyle()},void 0,this.renderHeader(),n()("tbody",{},void 0,e.map(((e,t)=>this.renderSection(e,t))))))}renderCheck(){return(0,Vd.k)({display:"inline",height:12,width:12,color:this.theme.regularTextColor})}upgradeLink(e,t){const{planState:i}=this.props;if(i)return n()(ys.Z,{onClick:i.plans[e].onClick,style:{fontSize:12,fontWeight:500,textDecoration:"none",color:this.theme.mediumTextColor,lineHeight:1.2}},void 0,t||n()(v.FormattedMessage,{id:"pricingGrid.planAttribute.button.upgrade",defaultMessage:"Upgrade"}))}renderPlanContent(e){const{label:t,upgradeCta:i,upgradeCTALabel:a}=e;return t&&i?n()(r.Fragment,{},void 0,t,n()("br",{}),this.upgradeLink(i,a)):t||(i?n()(r.Fragment,{},void 0,n()(v.FormattedMessage,{id:"pricingGrid.planAttribute.notInTrial",defaultMessage:"Not in trial"}),n()("br",{}),this.upgradeLink(i,a)):this.renderCheck())}renderPlan(e,t,i){return n()("td",{style:{...Wf.getRowStyle(this.theme),...Wf.getValueStyle(),...Wf.getActiveStyle(this.theme,this.isPlanActive(e)),...this.getBorderStyle(e)}},void 0,i.hasFeature&&n()(Nt.Z,{delayThreshold:0,placement:Nt.Z.Placement.Right,renderTooltip:()=>(0,Rf.O_)(t),textWrap:!0,render:e=>r.createElement("div",s()({style:{cursor:"help",lineHeight:1.3,padding:"6px 0"}},e),this.renderPlanContent(i))}))}renderItem(e,t){const i="auto",a=this.props.planState&&this.props.planState.isTeamTrial;return n()("tr",{},`table-row-${t}`,n()("td",{style:{...Wf.getRowStyle(this.theme),...Wf.getRowLabelStyle(this.theme),width:i,maxWidth:i,minWidth:i}},void 0,n()(Nt.Z,{delayThreshold:0,placement:Nt.Z.Placement.Right,renderTooltip:()=>(0,Rf.O_)(e.tooltip),textWrap:!0,render:t=>r.createElement("span",s()({},t,{style:Wf.getTooltipInnerStyle()}),e.label,e.isComingSoon&&this.renderBadge("comingSoon"),e.isBeta&&this.renderBadge("beta"))})),Uf.map((t=>{const i="plus"===t&&a?"teamTrial":t;return this.renderPlan(t,e.tooltip,e.plans[i])})))}renderEmptyTableCell(e,t){return n()("td",{style:{...Wf.getSectionStyle(this.theme,t),...Wf.getValueStyle(),...Wf.getActiveStyle(this.theme,this.isPlanActive(e)),...this.getBorderStyle(e),color:tn.ZP.lightTextColor,fontWeight:400}})}renderEmptyTableCells(e){return n()(r.Fragment,{},void 0,Uf.map((t=>this.renderEmptyTableCell(t,e))))}renderSection(e,t){const i="auto";return n()(r.Fragment,{},`table-section-${t}`,n()("tr",{},void 0,n()("td",{style:{...Wf.getSectionStyle(this.theme,t),width:i,maxWidth:i,minWidth:i}},void 0,e.label),this.renderEmptyTableCells(t)),e.items.map(((e,t)=>this.renderItem(e,t))))}renderButton(e,t){const i=this.getProductCost(e),a=t.plans[e],o=`notion-pricing-grid-upgrade-${e}`;let s;switch(a.buttonType){case"current":s=n()(v.FormattedMessage,{id:"pricingGrid.currentPlanButton.label",defaultMessage:"Current"});break;case"upgrade":s=n()(v.FormattedMessage,{id:"pricingGrid.upgradePlanButton.label",defaultMessage:"Upgrade"});break;case"downgrade":s=n()(v.FormattedMessage,{id:"pricingGrid.downgradePlanButton.label",defaultMessage:"Downgrade"});break;case"will-downgrade":s=n()(v.FormattedMessage,{id:"pricingGrid.willDowngradePlanButton.label",defaultMessage:"Future plan"});break;case"resubscribe":s=n()(v.FormattedMessage,{id:"pricingGrid.resubscribePlanButton.label",defaultMessage:"Resubscribe"});break;default:A.t1(a.buttonType)}if("current"===a.buttonType)return this.renderDisabledButtonWithTooltip({tooltip:n()(v.FormattedMessage,{id:"pricingGrid.currentPlan.tooltip",defaultMessage:"This is your current active plan"}),label:n()(v.FormattedMessage,{id:"pricingGrid.currentPlan.largeScreenLabel",defaultMessage:"Current plan"}),buttonClassName:o,wrapTooltip:!1});if(!t.canSwitchPlans){let e;return e=t.isInAppPurchase?n()(v.FormattedMessage,{id:"pricingGrid.switchPlanFromInAppPurchase.tooltip",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."}):n()(v.FormattedMessage,{id:"pricingGrid.switchPlanAsMember.tooltip",defaultMessage:"You need to be an administrator of this workspace to switch plans."}),this.renderDisabledButtonWithTooltip({tooltip:e,label:s,buttonClassName:o,wrapTooltip:!0})}return"will-downgrade"===a.buttonType?this.renderDisabledButtonWithTooltip({tooltip:n()(v.FormattedMessage,{id:"pricingGrid.willDowngradePlan.tooltip",defaultMessage:"This is the plan after your current plan expires"}),label:n()(v.FormattedMessage,{id:"pricingGrid.willDowngradePlan.largeScreenLabel",defaultMessage:"Future plan"}),buttonClassName:o,wrapTooltip:!1}):"downgrade"===a.buttonType?n()(Le.Z,{isLarge:!0,style:{width:"100%"},onClick:()=>{b.rOZ(this.environment,{plan:e,currency_code:ff.Z.selectedCurrencyCode,from:"pricing_grid_top",button_text:a.buttonType}),a.onClick()},className:o},void 0,s):n()(He.Z,{isLarge:!0,style:{width:"100%"},disabled:!i,onClick:()=>{b.rOZ(this.environment,{plan:e,currency_code:ff.Z.selectedCurrencyCode,from:"pricing_grid_top",button_text:a.buttonType}),a.onClick()},className:o},void 0,s)}renderDisabledButtonWithTooltip(e){const{tooltip:t,label:i,buttonClassName:a,wrapTooltip:o}=e;return n()(Nt.Z,{style:{width:o?320:"auto"},textWrap:o,renderTooltip:()=>t,render:e=>r.createElement(Le.Z,s()({style:{width:"100%",opacity:.5},isLarge:!0,disabled:!0},e,{className:a}),i)})}renderSalesContactLink(e){const t=`setup_${e}_trial`;return n()(ys.Z,{onClick:()=>{const{currentUserStore:e}=B.default.state,i=null!=e&&e.isDefined()?e.getModel():void 0;b.EUb(this.environment),Lf.Z.setState({open:!0,email:i&&i.getEmail(),name:null==i?void 0:i.getDisplayName(this.props.intl),question:t})}},void 0,n()("div",{style:Wf.getUpgradeButtonBelowLinkStyle()},void 0,n()(v.FormattedMessage,{id:"pricingGrid.requestATrial",defaultMessage:"or Request a Trial"})))}getPlanName(e){const{intl:t}=this.props;switch(e){case"free":return t.formatMessage(Id.a.free);case"plus":return t.formatMessage(Id.a.plus);case"business":return t.formatMessage(Id.a.business);case"enterprise":return t.formatMessage(Id.a.enterprise);default:A.t1(e)}}getTerms(e){switch(e){case"free":return;case"plus":case"business":case"enterprise":return"per_member_per_month";default:A.t1(e)}}getProductCost(e){var t;if("free"===e)return{amount:0,currencyCode:ff.Z.selectedCurrencyCode};const i="monthly"===Zf.state.termType?"month":"year",a=ff.Z.getPrice(this.environment,(t=>t.billingInterval===i&&t.product===e));return a.isLoaded?null===(t=a.result)||void 0===t?void 0:t.getMonthlyUnitCost().toMoneyValue():void 0}renderHeaderTitle(e){const t=this.getPlanName(e),i=this.getProductCost(e),a=this.getTerms(e);return n()("td",{style:{...Wf.getHeaderStyle(),...Wf.getActiveStyle(this.theme,this.isPlanActive(e)),...this.getBorderStyle(e)}},void 0,n()("div",{style:this.getHeaderTitleStyle()},void 0,t),i?n()("div",{style:{display:Df(this.environment)?"block":"flex"}},void 0,n()("div",{style:Wf.getHeaderPriceStyle()},void 0,n()(Vh.W,{cost:i,trailingZeroDisplay:"stripIfInteger"})),a?n()("div",{style:this.getHeaderTermsStyle(this.theme)},void 0,(0,Rf.X6)(this.props.intl,a)):null):n()(Vf.u,{}))}renderHeaderTitles(){return n()("tr",{},void 0,n()("td",{}),Uf.map((e=>n()(r.Fragment,{},e,this.renderHeaderTitle(e)))))}renderHeaderAction(e){const{planState:t}=this.props;if(t)return n()("td",{style:{...Wf.getHeaderStyle(),...Wf.getActiveStyle(this.theme,this.isPlanActive(e)),...this.getBorderStyle(e)}},void 0,this.renderButton(e,t),this.renderHeaderSubAction(e))}renderHeaderSubAction(e){if((0,h.Rs)(e))return n()("div",{style:{marginTop:7}},void 0,this.renderSalesContactLink(e))}renderHeaderActions(){if(this.props.planState)return n()("tr",{},void 0,n()("td",{style:{width:"28%",verticalAlign:"top",paddingTop:16}},void 0,n()(Of,{})),Uf.map((e=>this.renderHeaderAction(e))))}renderHeader(){return n()("thead",{},void 0,this.renderHeaderTitles(),this.renderHeaderActions())}renderBadge(e){return n()("div",{style:{background:this.theme.buttonHoveredBackground,fontSize:10,fontWeight:500,letterSpacing:"0.015em",color:this.theme.mediumTextColor,display:"inline",textTransform:"uppercase",padding:"2px 4px",marginLeft:6,borderRadius:3,whiteSpace:"nowrap",position:"relative",top:-1}},void 0,"comingSoon"===e&&n()(v.FormattedMessage,{id:"pricingGrid.comingSoonBadge",defaultMessage:"Coming soon"}),"beta"===e&&n()(v.FormattedMessage,{id:"pricingGrid.betaBadge",defaultMessage:"Beta"}))}isPlanActive(e){return Boolean(this.props.planState&&this.props.planState.plans[e].isActive)}static getTableStyle(){return{fontSize:14,width:"100%",tableLayout:"fixed",borderCollapse:"initial"}}static getSectionStyle(e,t){const i={borderBottom:`1px solid ${e.regularDividerColor}`,paddingBottom:7,paddingRight:15,fontWeight:500,verticalAlign:"bottom"};return 0===t?{...i,paddingTop:0}:{...i,paddingTop:20}}static getUpgradeButtonBelowLinkStyle(){return{fontSize:12}}static getRowStyle(e){return{borderBottom:`1px solid ${e.regularDividerColor}`}}static getRowLabelStyle(e){return{color:e.mediumTextColor,paddingRight:10,paddingTop:5,paddingBottom:6,verticalAlign:"top"}}static getValueStyle(){return{paddingLeft:10,paddingRight:10,textAlign:"left",overflow:"hidden",verticalAlign:"top"}}static getActiveStyle(e,t){const i=e.cardSidebarBackground;return{background:t?i:tn.ZP.transparent}}getBorderStyle(e){return{borderLeft:`1px solid ${this.theme.lightDividerColor}`,borderRight:["enterprise"].includes(e)?`1px solid ${this.theme.lightDividerColor}`:void 0}}static getHeaderStyle(){return{paddingLeft:10,paddingRight:10,verticalAlign:"top",width:"18%",paddingTop:10}}getHeaderTitleStyle(){return{fontSize:16,fontWeight:Df(this.environment)?500:700,lineHeight:1.3,marginBottom:2,paddingTop:40}}static getHeaderPriceStyle(){return{fontSize:20,marginRight:7}}static getTooltipInnerStyle(){return{cursor:"help",width:"100%",display:"inline-block"}}getHeaderTermsStyle(e){return{fontSize:10,lineHeight:1,color:e.mediumTextColor,width:70,paddingTop:Df(this.environment)?0:3}}}Wf.displayName="PricingGrid";const zf=(0,v.injectIntl)(Wf);function Kf(e){window.__c={n:"StudentUpgrade"};const{handleEducationPlanClick:t}=e,i=(0,Fe.yK)((e=>({subsection:{fontSize:14,marginTop:40},subsectionTitle:{fontSize:20,fontWeight:f.Z.fontWeight.bold,marginBottom:12},content:{color:e.mediumTextColor,marginBottom:15},paragraph:{marginBottom:4},link:{textDecoration:"underline"}})),[]);return n()("div",{style:i.subsection},void 0,n()("div",{style:i.subsectionTitle},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionPlans.studentsAndEducatorsSection.title",defaultMessage:"Students & educators"})),n()("div",{style:i.content},void 0,r.createElement(r.Fragment,null,n()(v.FormattedMessage,{id:"spaceSubscriptionPlans.studentsAndEducatorsSection.description",defaultMessage:"<p>Students and educators can get access to the Plus Plan features (with a 1-member limit) for free! Just sign up with your school email address, or change your existing email in the 'My account' tab.</p>",values:{p:e=>n()("div",{style:i.paragraph},void 0,e)}}),n()("div",{},void 0,n()(ys.Z,{onClick:t,style:i.link},void 0,n()(v.FormattedMessage,{defaultMessage:"Get the Education Plan",id:"sidebarStudentPlanPrompt.eligible.getFreePromptPlus"}))),n()("div",{},void 0,n()(ys.Z,{external:!0,href:(0,Y.UY)("guides.students")},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionPlans.studentSection.link",defaultMessage:"For more info, go to notion.com/students."}))))))}function Hf(e){window.__c={n:"TrialBanner"};const{subscriptionData:t}=e,i=(0,Fe.yK)((e=>({text:{color:e.accentColors[500]}})),[]),a=$.XX(t);return a&&a.trialEnd?a.trialEnd<_f.ou.now().toSeconds()?null:n()(Ff.Z,{styleKey:Ff.v.Beige,isMobile:!1},void 0,n()("div",{style:i.text},void 0,n()(v.FormattedMessage,{id:"SpaceSubscriptionPlans.trials.bannerText",defaultMessage:"Your workspace is on a free trial until {trialEndDate}",values:{trialEndDate:(0,an.Yx)(1e3*a.trialEnd,"long",Dn.SP)}}))):null}class Gf extends l.Z{constructor(){super(...arguments),this.storeTypes={store:Tp,downgradeModalStore:Pf.ZP,securitySettingsStore:pe.Z},this.renderChurnSurveyModal=()=>{const e=this.stores.store.state,{data:t}=this.props,i=$.XX(t),a=Yo.zt();if(e.churnSurveyModalOpen&&a&&i)return n()(qp.Z,{churnType:e.churnType,currentPlan:a,isWorkspaceDeletion:!1,periodEnd:i.periodEnd,hasAI:(0,g.de)(i.addOns),hasPendingChanges:Boolean(i.schedule||i.willCancelAt),customerId:i.customerId,onAccept:this.handleChurnSurveyModalAccept,onClose:this.handleChurnSurveyModalClose})},this.handlePlansBackButtonClick=()=>{const{store:e}=this.stores;e.setState({...e.state,page:"default"})},this.handleFreeClick=async()=>{const{data:e}=this.props;let t="no_confirmation_required";e&&"subscribed_admin"===e.type&&(t=await new Promise((e=>{const{store:t}=this.stores;t.setState({...t.state,churnType:"free",churnSurveyModalOpen:!0,onAccept:t=>e(t?"churn_immediately":"churn_by_end_of_billing_period"),onClose:()=>e("no_churn")})})),"no_churn"===t)||await Z.EO({environment:this.environment,spaceStore:this.props.spaceStore,planType:"personal",from:"space_settings-plans_tab",cancelImmediately:"churn_immediately"===t})},this.handleEducationPlanClick=()=>{const{spaceStore:e}=this.props;Z.r7({environment:this.environment,spaceStore:e})},this.handlePlanChangeClick=async e=>{const{spaceStore:t,data:i}=this.props,a=$.XX(i);if(!a||!$.MM(i))return void Z.I0(this.environment,{subscriptionTier:e,from:"pricing_grid"});const n=Yo.zt();if(n&&h.rC[e]<h.rC[n]){if(!(await new Promise((t=>{const{store:i}=this.stores;i.setState({...i.state,churnType:e,churnSurveyModalOpen:!0,onAccept:()=>t(!0),onClose:()=>t(!1)})}))))return;try{const i=await async function(e){const{billingInterval:t,environment:i,product:a}=e;await ff.Z.waitUntilReady();const n=ff.Z.getPrice(i,(e=>e.product===a&&e.billingInterval===t));if(!n.result)throw new Error("Could not find price model");return n.result}({environment:this.environment,billingInterval:a.interval,product:e});await Z.Mg({environment:this.environment,spaceStore:t,plan:i.externalId,from:"space_settings-plans_tab"})}catch(o){Tf.IE(o),M.showErrorMessage("Sorry, something went wrong. Please try again.")}}else{const t="yearly"===Zf.state.termType?"year":"month";Gh.af({environment:this.environment,from:"plans_page",view:"plans",temporarySubscriptionTier:e,billingInterval:t,pageSection:"all_plans_grid"})}},this.handleChurnSurveyModalAccept=e=>{const{store:t}=this.stores;t.state.churnSurveyModalOpen&&t.state.onAccept(e),t.reset()},this.handleChurnSurveyModalClose=()=>{const{store:e}=this.stores;if(e.state.churnSurveyModalOpen&&e.state.onClose(),"grid"===e.state.page)return e.reset(),void e.setState({...e.state,page:"grid"});e.reset()}}willMount(){Z.bi(this.environment),Z.px(this.environment)}renderComponent(){if(Ae.Z.state.online){const e=hf.$r(),{churnSurveyModalOpen:t,page:i}=this.stores.store.state,a="grid"===i,o=!e||a;return r.createElement(r.Fragment,null,this.renderBanner($.wY(this.props.data),this.props.intl),n()(Hf,{subscriptionData:this.props.data}),a?n()(qf,{handlePlansBackButtonClick:this.handlePlansBackButtonClick}):null,n()(Rh.Z,{style:{height:"100%",padding:a?"0px 30px 100px 60px":"100px 0px 100px 60px"},type:Ah.Z.Y},void 0,n()(Af.ZP,{data:this.props.data,spaceStore:this.props.spaceStore,spaceSubscriptionPlansStore:this.stores.store}),o?r.createElement(r.Fragment,null,n()(vs.Z,{size:0}),this.renderPricingGrid(),this.allowEducationUpgrade()?n()(Kf,{handleEducationPlanClick:this.handleEducationPlanClick}):null,this.renderFAQ(),n()(Zs.Z,{innerStyle:{width:300,height:"auto",overflow:"scroll"},open:t,render:this.renderChurnSurveyModal,onDismiss:this.handleChurnSurveyModalClose})):null))}return n()(Ef.Z,{})}renderPricingGrid(){const e=this.getPlanState();return n()(zf,{planState:e,data:this.props.data})}renderFAQ(){return n()("div",{style:Gf.subsectionStyle},void 0,n()("div",{style:Gf.subsectionTitleStyle},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionPlans.faqSection.title",defaultMessage:"FAQ"})),n()(ys.Z,{external:!0,href:(0,Y.UY)("guides.billingAndPaymentRevised")},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionPlans.faqSection.link",defaultMessage:"Plans, Billing & Payment"})))}renderBanner(e,t){const i=(0,Yo.zt)();if(!i)return null;if((0,Af.lu)(e,i)){const a=(0,Af.QH)(e,i);return n()(Ff.Z,{styleKey:Ff.v.Beige,isMobile:!1},void 0,n()("div",{style:{color:this.theme.accentColors[500]}},void 0,a&&t.formatMessage(a)))}return null}getMemberCount(){return $.su(this.props.data)}canSwitchPlans(){const e=$.wY(this.props.data);return this.props.spaceStore.canAdmin()&&!e}calculateButtonState(e){const{data:t}=this.props,i=$.DH(t);return(0,h.QM)(e)?{free:"current",plus:"upgrade",business:"upgrade",enterprise:"upgrade"}:(0,h.Aw)(e)?{free:i?"current":"downgrade",plus:"upgrade",business:"upgrade",enterprise:"upgrade"}:(0,h.eR)(e)?{free:"downgrade",plus:i?"resubscribe":"current",business:"upgrade",enterprise:"upgrade"}:"business"===e?{free:"downgrade",plus:"downgrade",business:i?"resubscribe":"current",enterprise:"upgrade"}:"enterprise"===e?{free:"downgrade",plus:"downgrade",business:"downgrade",enterprise:i?"resubscribe":"current"}:void(0,A.t1)(e)}isButtonStateActive(e){return["current","resubscribe"].includes(e)}getPlanState(){const e=Yo.zt();if(!e)return;const t=$.wY(this.props.data),i=this.calculateButtonState(e);return{plans:{free:{buttonType:i.free,isActive:this.isButtonStateActive(i.free),onClick:this.handleFreeClick},plus:{buttonType:i.plus,isActive:this.isButtonStateActive(i.plus),onClick:()=>this.handlePlanChangeClick("plus")},business:{buttonType:i.business,isActive:this.isButtonStateActive(i.business),onClick:()=>this.handlePlanChangeClick("business")},enterprise:{buttonType:i.enterprise,isActive:this.isButtonStateActive(i.enterprise),onClick:()=>this.handlePlanChangeClick("enterprise")}},isTeamTrial:!1,isInAppPurchase:t,canSwitchPlans:this.canSwitchPlans(),memberCount:this.getMemberCount()}}allowEducationUpgrade(){const{data:e}=this.props,t=this.getPlanState(),i=Yo.zt();return t&&t.canSwitchPlans&&!$.wl(e)&&1===t.memberCount&&("free"===i||"personal"===i)}}function qf(e){window.__c={n:"AllPlansButton"};const{handlePlansBackButtonClick:t}=e,i=(0,Fe.yK)((()=>({backButton:{display:"inline-flex",padding:10},icon:{height:16,marginTop:4,width:16},settingHeader:{alignItems:"center",display:"flex",flexGrow:1,fontSize:16,fontWeight:f.Z.fontWeight.medium,justifyContent:"space-between",marginBottom:0,padding:"10px 0 10px 5px"},wrapper:{display:"flex",padding:"30px 30px 0px 60px"}})),[]),{availableCurrencyCodes:a,selectedCurrencyCode:o}=(0,Ze.VK)((()=>({availableCurrencyCodes:ff.Z.availableCurrencyCodes,selectedCurrencyCode:ff.Z.selectedCurrencyCode})),[]);return n()("div",{style:i.wrapper},void 0,n()(Tc.Z,{style:i.backButton,onClick:t},void 0,(0,kf.f)(i.icon)),n()(Re.Z,{large:!0,style:i.settingHeader},void 0,n()(v.FormattedMessage,{id:"spaceSubscriptionPlans.allPlans.title",defaultMessage:"All plans"}),n()(Bf.V,{availableCurrencyCodes:a,from:"pricing_grid",onSelectCurrency:If.y,selectedCurrencyCode:o})))}Gf.displayName="SpaceSubscriptionPlans",Gf.subsectionStyle={fontSize:14,marginTop:40},Gf.subsectionTitleStyle={fontSize:20,fontWeight:f.Z.fontWeight.bold,marginBottom:12};const jf=(0,v.injectIntl)(Gf);var Yf=i(26234),$f=i(42982);const Qf="teamColumn",Jf="ownersColumn",Xf="membersColumn",ev="AccessLevelColumn",tv="lastUpdatedColumn",iv="contextMenuColumn",av=[Qf,Xf,ev,tv],nv="filterAccessAny",ov="filterAccessOnlyOpen",sv="filterAccessOnlyClosed",rv="filterAccessOnlyPrivate",lv="filterOwnerAny",dv="filterOwnerShowOrphaned",cv="filterOwnerById";class uv extends D.default{getInitialState(){return{searchQuery:"",sortColumn:tv,sortAscending:!1,showOnlyArchivedTeams:!1,filterByOwner:{type:lv},filterAccess:nv,showTeamsWithSecurityOverrides:!1}}}const mv=new uv;function pv(e){let{environment:t,teamIds:i}=e;const{currentSpaceStore:a,currentUserStore:n}=B.default.state;return a&&n?i.map((e=>{const i=ft.zX.createChildStore(a,{table:ht.e0,id:e,spaceId:a.id});if(i.canRead())return i;const n=a&&kc.Dv({environment:t,teamId:i.id,spaceStore:a,from:"manage_teams_table"});return null!=n&&n.canRead()?n:void 0})).filter(A.$K):[]}var gv=i(51923);class hv extends D.default{getInitialState(){return{tokenQuery:"",showAutoCompletePopup:!1,defaultTeams:{}}}addedAndCurrentTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"current-default"===t||"add-default"===t}))}addedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"add-default"===t}))}removedTeams(){return Object.values(this.state.defaultTeams).filter((e=>{let{state:t}=e;return"remove-default"===t}))}}const fv=new hv;function vv(e){var t;let{team:i}=e;return null===(t=fv.state.defaultTeams[i.id])||void 0===t?void 0:t.state}function yv(e){let{team:t,persistedDefaultTeams:i}=e;if(i.includes(t))Sv({store:t,state:"current-default"});else{const e={...fv.state.defaultTeams};delete e[t.id],fv.setState({...fv.state,defaultTeams:e})}}function Sv(e){const t=fv.state;fv.setState({...t,defaultTeams:{...t.defaultTeams,[e.store.id]:e}})}var bv=i(75024),Mv=i(30676),wv=i(47082);function Cv(e){let{}=e;window.__c={n:"DefaultTeamsInput"};const t=(0,xe.Fy)(),i=(0,v.useIntl)(),a=(0,xe.O7)(),{allTeams:o,loaded:l}=(0,Ze.VK)((()=>{const e=N.state;return"loaded"!==e.loadingState?{allTeams:[],loaded:!1}:{allTeams:pv({environment:a,teamIds:e.unarchivedTeamIds}),loaded:!0}}),[a]),[d,c]=(0,r.useState)(!1),u=(0,Ze.qz)(fv),p=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),{defaultTeams:g,tokenQuery:h}=(0,Ze.VK)((()=>{const{defaultTeams:e,tokenQuery:t}=u.state;return{defaultTeams:e,tokenQuery:t}}),[u]),f=!h,{addedTeams:y,removedTeams:S,addedAndCurrentTeams:b}=(0,Ze.VK)((()=>({addedAndCurrentTeams:u.addedAndCurrentTeams(),addedTeams:u.addedTeams(),removedTeams:u.removedTeams()})),[u]),M=(0,Ze.VK)((()=>o.reduce(((e,t)=>(e[t.id]=t.getName(),e)),{})),[o]),w=(0,Ze.VK)((()=>o.filter((e=>e.isDefault()))),[o]);(0,r.useEffect)((()=>function(e){let{persistedDefaultTeams:t}=e;const i=t.reduce(((e,t)=>(e[t.id]={state:"current-default",store:t},e)),{}),a=fv.state;fv.setState({...a,defaultTeams:i})}({persistedDefaultTeams:w})),[w]);const C=y.length>0||S.length>0,_=e=>function(e){let{team:t,persistedDefaultTeams:i}=e;"add-default"===vv({team:t})?yv({team:t,persistedDefaultTeams:i}):Sv({store:t,state:"remove-default"})}({team:e,persistedDefaultTeams:w}),k=e=>{!function(e){let{team:t,persistedDefaultTeams:i}=e;"remove-default"===vv({team:t})?yv({team:t,persistedDefaultTeams:i}):Sv({store:t,state:"add-default"})}({team:e,persistedDefaultTeams:w}),u.update((e=>({...e,showAutoCompletePopup:!1,tokenQuery:""})))},T=new Set(S.map((e=>e.store.id))),I=a.currentUser.id,P=(0,Ze.VK)((()=>I?o.filter((e=>{const t=e.getMembers(),i=e.getSettingsStore().getValue();return!!i&&((0,Xt.pd)({membership:t},I)&&"open"===(0,Xt.B5)(i))})):[]),[o,I]),x=function(e){let{query:t,addedAndCurrentTeams:i,eligibleDefaultTeams:a,teamIdsToNames:n}=e;const o=new Set;for(const s of i)o.add(s.store.id);return(0,fn.ZP)(t,a,(e=>n[e.id]??""))}({query:h,addedAndCurrentTeams:b,teamIdsToNames:M,eligibleDefaultTeams:P}),Z=[];x.length>0&&!f&&Z.push({key:"default-teams-list",render:e=>r.createElement(rt.Z,s()({},e,{title:n()(v.FormattedMessage,{id:"defaultTeamsInput.defaultTeamList.title",defaultMessage:"Teamspaces"}),loading:!1})),items:x.map((e=>({key:e.id,render:t=>r.createElement(Mv.F,s()({},t,{teamStore:e})),action:()=>k(e)})))});const F=(0,Ze.VK)((()=>u.state.showAutoCompletePopup&&Z.length>0),[u,Z.length]),A=(0,Fe.yK)((e=>({defaultTeamsHeader:{fontSize:14,marginBottom:2},inputAndButtonContainer:{paddingTop:12,display:"flex"},inputContainer:{flexGrow:1},tokenInputMenu:{borderRadius:F?Tv:kv,margin:0},menuList:{maxHeight:300,border:`1px solid ${e.regularDividerColor}`,borderTop:0,borderRadius:Iv},updateButton:{marginLeft:10,height:35}})),[F]);return r.createElement(r.Fragment,null,n()("div",{style:A.defaultTeamsHeader},void 0,n()(v.FormattedMessage,{id:"teamsWorkspaceSettings.defaultTeams.title",defaultMessage:"Default teamspaces"})),n()(Ee.Z,{isSmall:!0,isMultiline:!0},void 0,n()(v.FormattedMessage,{id:"teamsWorkspaceSettings.defaultTeams.caption",defaultMessage:"Choose teamspaces that all new and current workspace members will automatically join"})),n()("div",{style:A.inputAndButtonContainer},void 0,n()("div",{style:A.inputContainer},void 0,n()(st.ZP,{popupType:st.ZP.PopupType.Popup,placementToOrigin:st.ZP.Placement.Bottom,sameWidthAsOrigin:!0,open:F,borderRadius:Iv,onDismiss:()=>u.update((e=>({...e,showAutoCompletePopup:!1}))),origin:n()(wv.Z,{disabled:!l||d,style:A.tokenInputMenu,focusInitial:t.isMobile,focusAfterAnimation:!0,format:wv.Z.Format.Share,inputDivStyle:{alignItems:"center"},value:h,onChange:e=>u.update((t=>({...t,tokenQuery:e.target.value,showAutoCompletePopup:!0}))),type:"default-teams",tokens:Object.values(g).filter((e=>!T.has(e.store.id))).map((e=>n()(_v,{teamStore:e.store,onClickRemove:_},e.store.id))),placeholder:i.formatMessage({id:"teamsWorkspaceSettings.defaultTeams.inputPlaceholder",defaultMessage:"Select a default teamspace..."}),onRemoveLastToken:()=>{const e=b,t=m.Z$(e);t&&_(t.store)},onEmptySubmit:m.yR,showBorder:!0}),render:()=>n()(nt.Z,{menuType:Xe.og.Popup,tokenInputHeader:!0,disableHeaderBorder:!0},void 0,n()("div",{style:A.menuList},void 0,n()(ot.Z,{type:ot.i.Vertical,initialFocus:0,sections:Z})))})),n()(He.Z,{style:A.updateButton,disabled:!C||d,isLarge:!0,onClick:async()=>{if(p){c(!0);try{await async function(e){let{addedTeams:t,removedTeams:i,environment:a,spaceStore:n}=e;if(!n.isDefined())return!1;const o=n.getPermissionItems();return await kc.lH({addedStores:t.map((e=>{let{store:t}=e;return t})),removedStores:i.map((e=>{let{store:t}=e;return t})),environment:a,spaceValue:{permissions:o},createNewTeamFlowId:void 0,from:"workspace_settings"})}({environment:a,addedTeams:y,removedTeams:S,spaceStore:p})}finally{c(!1)}}}},void 0,n()(v.FormattedMessage,{id:"teamsWorkspaceSettings.updateButton.label",defaultMessage:"Update"}))))}function _v(e){window.__c={n:"DefaultTeamsToken"};const t=(0,xe.Fy)(),{teamStore:i,onClickRemove:a}=e,{name:o}=(0,Ze.VK)((()=>({name:i.getName()})),[i]);return n()(Ti.Z,{showRemoveButton:!0,isSingle:!1,format:t.isMobile?bi.l.Large:bi.l.Medium,style:{marginLeft:6},onClickRemove:()=>a(i),value:n()("div",{style:{display:"flex",alignItems:"center"}},void 0,n()(Yt.p,{disabled:!0,store:i,size:14,style:{marginRight:4}}),o)})}const kv=3,Tv=(0,bv.wK)({topLeft:kv,topRight:kv,bottomLeft:0,bottomRight:0}),Iv=(0,bv.wK)({topLeft:0,topRight:0,bottomLeft:kv,bottomRight:kv}),Pv=(0,c.I)("key",{viewBox:"0 0 30 30",svg:n()("path",{d:"M14.757 4A5.724 5.724 0 009 9.748c0 2.364 1.389 4.456 3.586 5.335V23.6c0 .255.079.483.272.676l1.53 1.477a.578.578 0 00.808-.009l2.769-2.768a.598.598 0 000-.87l-1.591-1.574 2.232-2.232a.602.602 0 00-.017-.861l-2.171-2.18c2.628-1.116 4.087-3.13 4.087-5.511A5.733 5.733 0 0014.757 4zm0 5.344a1.55 1.55 0 01-1.547-1.547c0-.861.685-1.547 1.547-1.547a1.55 1.55 0 011.547 1.547 1.55 1.55 0 01-1.547 1.547z"})});var xv=i(17224);function Zv(e){let{selectItems:t,currentSelectedItem:i,onChange:a,icon:o}=e;return n()(Di.Z,{items:t,getKey:e=>e.key,selectedItem:i,onSelect:a,renderItem:e=>r.createElement(it.Z,s()({title:e.value.name},e,{checkState:i.key===e.value.key})),renderOrigin:e=>r.createElement(tt.Z,s()({},e,{title:i.originName??i.name,on:!i.showFilterAsOffWhenSelected,icon:o}))})}const Fv={[nv]:{key:nv,name:n()(v.FormattedMessage,{id:"manageTeamsAccessFilter.accessFilter.filterAllTeams",defaultMessage:"Any"}),originName:n()(v.FormattedMessage,{id:"manageTeamsAccessFilter.accessSelectPlaceolder",defaultMessage:"Access"}),showFilterAsOffWhenSelected:!0},[ov]:{key:ov,name:n()(v.FormattedMessage,{id:"manageTeamsAccessFilter.accessFilter.filterOpenTeams",defaultMessage:"Open"})},[sv]:{key:sv,name:n()(v.FormattedMessage,{id:"manageTeamsAccessFilter.accessFilter.filterClosedTeams",defaultMessage:"Closed"})},[rv]:{key:rv,name:n()(v.FormattedMessage,{id:"manageTeamsAccessFilter.accessFilter.filterPrivateTeams",defaultMessage:"Private"})}},Av=m.oA([Fv.filterAccessAny,Fv.filterAccessOnlyOpen,Fv.filterAccessOnlyClosed,Fv.filterAccessOnlyPrivate]);function Ev(e){let{manageTeamsStore:t}=e;window.__c={n:"ManageTeamsAccessFilter"};const i=(0,xe.O7)(),a=(0,Ze.VK)((()=>t.state.filterAccess),[t]),o=(0,Fe.yK)((e=>({keyIcon:{width:18,height:18,...a!==nv?{fill:tn.ZP.blue}:{fill:e.mediumIconColor}}})),[a]),s=(0,r.useCallback)((e=>{t.update((t=>({...t,filterAccess:e.key}))),xv.GZ(i,{filter:"access",value:e.key})}),[t,i]),l=Fv[a];return n()(Zv,{selectItems:Av,currentSelectedItem:l,onChange:s,icon:Pv(o.keyIcon)})}const Bv=(0,c.I)("archiveFilled",{viewBox:"0 0 16 16",svg:n()("path",{d:"M2.16211 5.06934H13.5029C14.2754 5.06934 14.665 4.61133 14.665 3.8457V3.22363C14.665 2.45801 14.2754 2 13.5029 2H2.16211C1.43066 2 1 2.45801 1 3.22363V3.8457C1 4.61133 1.38965 5.06934 2.16211 5.06934ZM4.08301 14.585H11.582C12.9287 14.585 13.6465 13.8877 13.6465 12.5479V6.00586H2.01855V12.5479C2.01855 13.8945 2.73633 14.585 4.08301 14.585ZM5.58008 8.47363C5.29297 8.47363 5.09473 8.27539 5.09473 7.97461V7.7627C5.09473 7.46191 5.29297 7.27051 5.58008 7.27051H10.0918C10.3789 7.27051 10.584 7.46191 10.584 7.7627V7.97461C10.584 8.27539 10.3789 8.47363 10.0918 8.47363H5.58008Z"})}),Rv="showArchived",Dv="hideArchived",Lv={[Dv]:{key:Dv,name:n()(v.FormattedMessage,{id:"manageTeamsArchivedFilter.archivedFilter.hideArchivedTeams",defaultMessage:"Active"}),originName:n()(v.FormattedMessage,{id:"manageTeamsArchivedFilter.archivedSelectPlaceolder",defaultMessage:"Archived"}),showFilterAsOffWhenSelected:!0},[Rv]:{key:Rv,name:n()(v.FormattedMessage,{id:"manageTeamsArchivedFilter.archivedFilter.showArchivedTeams",defaultMessage:"Archived"})}};function Nv(e){let{manageTeamsStore:t}=e;window.__c={n:"ManageTeamsArchivedFilter"};const i=(0,xe.O7)(),a=(0,Ze.VK)((()=>t.state.showOnlyArchivedTeams),[t]),o=(0,Fe.yK)((e=>({archiveIcon:{width:16,height:16,marginRight:5,...a?{fill:tn.ZP.blue}:{fill:e.mediumIconColor}}})),[a]),s=[Lv.hideArchived,Lv.showArchived],l=(0,r.useCallback)((e=>{t.update((t=>({...t,showOnlyArchivedTeams:e.key===Rv}))),xv.GZ(i,{filter:"archived",value:e.key})}),[t,i]),d=Lv[a?Rv:Dv];return n()(Zv,{selectItems:s,currentSelectedItem:d,onChange:l,icon:Bv(o.archiveIcon)})}const Ov="ShowTeamsWithNoOwnersId";function Vv(e){let{teamStores:t,manageTeamsStore:i}=e;window.__c={n:"ManageTeamsOwnerFilter"};const a=(0,xe.O7)(),o=(0,Ze.VK)((()=>i.state.filterByOwner),[i]),l=function(e){switch(e.type){case lv:return;case cv:return e.id;case dv:return Ov;default:(0,A.t1)(e)}}(o),d=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),c=(0,v.useIntl)(),u=(0,Ze.VK)((()=>{const e=t.flatMap((e=>(0,Xt.XO)({membership:e.getMembers()})));return m.jj(e)}),[t]),p=(0,Fe.yK)((e=>({icon:{marginRight:2,fill:e.mediumIconColor},blueFill:{fill:tn.ZP.blue}})),[]),g=(0,r.useCallback)((e=>{if(d)return Vl({userId:e,currentSpaceStore:d}).getValue()}),[d]),h=(0,r.useCallback)((e=>{const t=e[e.length-1];let n;n=t===l||void 0===t?{type:lv}:t===Ov?{type:dv}:{type:cv,id:t},i.update((e=>({...e,filterByOwner:n}))),xv.GZ(a,{filter:"owner",value:n.type})}),[l,i,a]),f=(0,r.useCallback)((async e=>{let{query:t}=e;if(!d)return[];const i=(await Ea.pz({query:t,currentSpaceStore:d,userIds:u})).map((e=>e.id));return""===t?[Ov,...i]:i}),[d,u]),y=(0,r.useCallback)(((e,t)=>{if(!d)return null;if(e===Ov)return r.createElement(it.Z,s()({},t,{title:n()(v.FormattedMessage,{id:"manageTeamsOwnerFilter.noOwnersFilterOption",defaultMessage:"No owners"}),checkState:o.type===dv,className:"notranslate"}));const i=g(e);return i?r.createElement(ja.Z,s()({},t,{key:e,actor:(0,Ga.m3)(i),checkState:l===e})):null}),[d,g,l,o.type]),S=(0,Ze.VK)((()=>{if(o.type!==cv)return;const e=g(o.id);return e?(0,ii.Nz)(c,e):void 0}),[o,g,c]);let b;return b=o.type===dv?n()(v.FormattedMessage,{id:"manageTeamsOwnerFilter.filterTitle.onlyOrphanedTeams",defaultMessage:"Owner: None"}):n()(v.FormattedMessage,S?{id:"manageTeamsOwnerFilter.filterTitle.withSpecifiedOwner",defaultMessage:"Owner: {teamOwnerName}",values:{teamOwnerName:S}}:{id:"manageTeamsOwnerFilter.filterTitle.unset",defaultMessage:"Owner"}),n()(na.Z,{mode:na.z.Pill,title:b,disabled:0===t.length,icon:wi.f,iconStyles:{...p.icon,...o.type!==lv&&p.blueFill},items:m.oA([l]),hasItemsSelected:(0,A.$K)(l),onChange:h,labelText:{title:b,tokenInputPlaceholder:c.formatMessage({defaultMessage:"Search teamspace owner...",id:"manageTeamsOwnerFilter.searchOwner.placeholder"}),resultSectionTitle:c.formatMessage({defaultMessage:"Select users",id:"manageTeamsOwnerFilter.searchOwner.resultsTitle"}),componentDebugName:"ManageTeamsSearchOwnerFilter"},performRequest:f,renderResultMenuItem:y,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}const Uv="showAll",Wv="showTeamsWithSecurityOverrides",zv={[Uv]:{key:Uv,name:n()(v.FormattedMessage,{id:"ManageTeamsSecurityOverridesFilter.showAllOption",defaultMessage:"Show all"}),originName:n()(v.FormattedMessage,{id:"ManageTeamsSecurityOverridesFilter.showAllPlaceholder",defaultMessage:"Security"}),showFilterAsOffWhenSelected:!0},[Wv]:{key:Wv,name:n()(v.FormattedMessage,{id:"ManageTeamsSecurityOverridesFilter.showTeamsWithSecurityOverrides",defaultMessage:"Has overrides"})}};function Kv(e){let{manageTeamsStore:t}=e;window.__c={n:"ManageTeamsSecurityOverridesFilter"};const i=(0,xe.O7)(),a=(0,Ze.VK)((()=>t.state.showTeamsWithSecurityOverrides),[t]),o=(0,Fe.yK)((e=>({securityIcon:{width:14,height:14,marginRight:5,fill:e.mediumIconColor},blueFill:{fill:tn.ZP.blue}})),[]),s=[zv.showAll,zv[Wv]],l=(0,r.useCallback)((e=>{t.setState({...t.state,showTeamsWithSecurityOverrides:e.key===Wv}),xv.GZ(i,{filter:"securityOverrides",value:e.key})}),[t,i]),d=zv[a?Wv:Uv];return n()(Zv,{selectItems:s,currentSelectedItem:d,onChange:l,icon:(0,Ko.X)({...o.securityIcon,...a&&o.blueFill})})}function Hv(e){let{manageTeamsStore:t,teamStores:i}=e;window.__c={n:"ManageTeamsFilterRow"};const a=(0,Fe.yK)((()=>({container:{display:"flex",alignItems:"center",marginTop:20},searchContainer:{maxWidth:250,marginRight:"auto"},archivedTeamsSwitch:{display:"flex",alignItems:"center",marginLeft:15,marginRight:15},archivedTeamsLabel:{marginLeft:10},dropdownContainer:{display:"flex",alignContent:"stretch",marginLeft:5}})),[]),o=(0,Ze.VK)((()=>t.state.searchQuery),[t]),s=(0,r.useCallback)((e=>{t.update((t=>({...t,searchQuery:e})))}),[t]);return n()("div",{style:a.container},void 0,n()(Gv,{style:a.searchContainer,onChange:s,value:o}),n()("div",{style:a.dropdownContainer},void 0,n()(Nv,{manageTeamsStore:t}),n()(Vv,{teamStores:i,manageTeamsStore:t}),n()(Ev,{manageTeamsStore:t}),n()(Kv,{manageTeamsStore:t})))}function Gv(e){let{style:t,value:i,onChange:a}=e;window.__c={n:"Search"};const o=(0,v.useIntl)(),s=(0,Fe.yK)((e=>({input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),l=(0,r.useCallback)((e=>a(e.target.value)),[a]);return n()(Qi.Z,{placeholder:o.formatMessage({defaultMessage:"Search teamspaces...",id:"manageTeamsFilterRow.searchFilter.placeholder"}),style:{...s.input,...t},value:i,onChange:l,left:(0,Lp.R)(s.searchIcon),format:Qi.Z.Format.Small,showClearButton:!0})}var qv=i(12534),jv=i(48690),Yv=i(71064),$v=i(66580),Qv=i(98742),Jv=i(45660);var Xv=i(63060),ey=i(85387);function ty(e){let{teamStore:t,accessLevel:i,isTeamOwner:a,onChangeAccessLevel:o,width:l}=e;window.__c={n:"ManageTeamsAccessCell"};const d=(0,xe.O7)(),c=function(e){return(0,Ze.VK)((()=>e.isDefault()),[e])}(t),u=(0,Xv.U)({teamStore:t,onChange:o,isDefault:c}),m=c?"default":i,p=u.find((e=>e.key===m)),g=!a||Boolean(null==p?void 0:p.disableAllOptionsTooltip),h=(null==p?void 0:p.disableAllOptionsTooltip)||g&&!a&&n()(v.FormattedMessage,{id:"manageTeamsAccessCell.onlyTeamOwnersCanChangeAccessLevel",defaultMessage:"Only teamspace owners can change teamspace access levels"}),y=(0,Jv.e)(),S=(0,Fe.yK)((e=>{const t=e.lightTextColor;return{selectButton:{paddingLeft:8,marginLeft:-8,maxWidth:l},label:{...g&&{color:t},fontSize:f.Z.fontSize.UIRegular.desktop,fontWeight:f.Z.fontWeight.regular},chevron:{width:10,marginLeft:4,fill:e.mediumIconColor,...g&&{fill:t}},tooltip:{width:200}}}),[g,l]);if(!p)throw new Error(`Selected access level is not an option found in team access level option: ${m}`);return n()(Di.Z,{items:u,getKey:e=>e.key,selectedItem:p,onSelect:e=>"private"===e.key&&y?Jr.y(d,{from:"team_security_settings",for:"business"}):e.onSelect(),renderItem:e=>n()(Nt.Z,{textWrap:!0,style:S.tooltip,placement:Ln.u.Bottom,disableTooltip:!e.value.tooltip,renderTooltip:()=>e.value.tooltip,render:t=>r.createElement(it.Z,s()({title:e.value.title},(0,Qv.Z)(e,t)))}),disabled:g,renderOrigin:e=>n()(Nt.Z,{textWrap:!0,style:S.tooltip,disableTooltip:!h,renderTooltip:()=>h,alignment:Ln.v.Center,placement:Ln.u.Left,render:t=>r.createElement(Ge.Z,s()({style:S.selectButton,disabled:g},(0,Qv.Z)(e,t)),n()(ey.s,{style:S.label},void 0,p.level),(0,Ei.i)(S.chevron))})})}function iy(e){let{teamOwners:t,manageTeamsStore:i}=e;window.__c={n:"ManageTeamsOwnersCell"};const a=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),o=(0,v.useIntl)(),s=(0,Ze.VK)((()=>{if(!a)return;const{filterByOwner:e}=i.state;let n=t[0];if(e.type===cv){const i=e.id;t.includes(i)&&(n=i)}return n?Vl({userId:n,currentSpaceStore:a}):void 0}),[a,i,t]),r=(0,Ze.VK)((()=>{if(null!=s&&s.isDefined())return(0,ii.Nz)(o,s.getModel())}),[s,o]),l=(0,Fe.yK)((e=>({container:{display:"flex",alignItems:"center",fontSize:f.Z.fontSize.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},nMoreOwnersText:{paddingLeft:3,color:e.mediumTextColor},noOwners:{marginRight:8,color:e.lightTextColor},userName:{flexShrink:1}})),[]);return t.length<1?n()("div",{style:l.noOwners},void 0,n()(v.FormattedMessage,{id:"manageTeamsOwnersCell.noOwners",defaultMessage:"No owners"})):n()("div",{style:l.container},void 0,n()(ai.Z,{style:l.userAvatar,avatarShouldShowShadow:!0,userStore:s,size:20}),n()(ey.s,{style:l.userName},void 0,r),t.length>1&&n()("div",{style:l.nMoreOwnersText},void 0,n()(v.FormattedMessage,{id:"manageTeamsOwnersCell.nMoreOwnersLabel",defaultMessage:"+{numAdditionalOwners}",values:{numAdditionalOwners:t.length-1}})))}const ay=[Qf,Jf,ev,tv,iv],ny={[ev]:{headerTitle:n()(v.FormattedMessage,{id:"manageTeamsTable.columnTitle.access",defaultMessage:"Access"}),renderCell:e=>{let{data:t,environment:i}=e;return n()(ty,{teamStore:t.store,accessLevel:t.accessLevel,isTeamOwner:t.isCurrentUserOwnerOfTeam,onChangeAccessLevel:(e,a)=>kc.Ju({environment:i,store:t.store,accessLevel:e,isDefault:a,teamName:t.name,from:"manage_teams_table"}),width:90})},colWidth:{width:90},hasClickableContents:!0},[Qf]:{headerTitle:n()(v.FormattedMessage,{id:"manageTeamspacesTable.columnTitle.teamspace",defaultMessage:"Teamspace"}),renderCell:e=>{let{data:t}=e;return n()(oy,{teamStore:t.store,isArchivedTeam:t.isArchivedTeam,name:t.name})},colWidth:{minWidth:30,widthPercent:35}},[Jf]:{headerTitle:n()(v.FormattedMessage,{id:"manageTeamsTable.columnTitle.owners",defaultMessage:"Owners"}),renderCell:e=>{let{data:t,manageTeamsStore:i}=e;return n()(iy,{teamOwners:t.owners,manageTeamsStore:i})},colWidth:{minWidth:60,widthPercent:25}},[Xf]:{headerTitle:n()(v.FormattedMessage,{id:"manageTeamsTable.columnTitle.members",defaultMessage:"Members"}),renderCell:e=>{let{data:t}=e;return n()(ey.s,{},void 0,n()(v.FormattedMessage,{id:"manageTeamsTable.numMembersCell",defaultMessage:"{numTeamMembers, plural, one {# member} other {# members}}",values:{numTeamMembers:t.members.length}}))},colWidth:{minWidth:40,widthPercent:15}},[tv]:{headerTitle:n()(v.FormattedMessage,{id:"manageTeamsTable.columnTitle.updated",defaultMessage:"Updated"}),renderCell:e=>{let{data:t}=e;return t.lastUpdated&&n()(sy,{lastUpdatedMillis:t.lastUpdated})},colWidth:{minWidth:50,widthPercent:15}},[iv]:{headerTitle:void 0,renderCell:e=>{let{data:t}=e;return n()($v.OutlinerTeamOverflow,{teamStore:t.store,from:"manage_teams_table"})},colWidth:{width:30},hasClickableContents:!0}};function oy(e){let{teamStore:t,name:i,isArchivedTeam:a}=e;window.__c={n:"TeamCell"};const o=(0,xe.O7)(),s=(0,v.useIntl)(),l=(0,Yv.e)(t),d=(0,Fe.yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},teamIcon:{marginRight:12},nameAndMembersContainer:{display:"flex",flexDirection:"column",minWidth:0},nameAndArchivedPillContainer:{display:"flex"},nameText:{lineHeight:"18px",fontWeight:f.Z.fontWeight.regular},smallText:{fontSize:(0,bv.yv)(o,"UISmall"),color:e.mediumTextColor,fontWeight:f.Z.fontWeight.regular},archivedTag:{marginLeft:5}})),[o]),c=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),u=(0,Ze.VK)((()=>{if(!c)return;const e=(0,E.tO)({teamStore:t,spaceStore:c}).length;return(0,qc.uf)(e,"compact",s)}),[c,s,t]),p=n()(v.FormattedMessage,{id:"manageTeamsTableColumnData.numMembersLabel",defaultMessage:"{numMembers, plural, one {1 member} other {{numMembers} members}}",values:{numMembers:u}}),g=l?r.createElement(r.Fragment,null," • ",n()(v.FormattedMessage,{id:"manageTeamsTableColumnData.joinedLabel",defaultMessage:"Joined"})):void 0,h=m.oA([p,g]);return n()("div",{style:d.container},void 0,n()(Yt.p,{style:d.teamIcon,size:28,store:t,disabled:!0}),n()("div",{style:d.nameAndMembersContainer},void 0,n()("div",{style:d.nameAndArchivedPillContainer},void 0,n()(ey.s,{style:d.nameText},void 0,i),a&&n()(qa.Z,{desktopStyle:d.archivedTag,mobileStyle:d.archivedTag},void 0,n()(v.FormattedMessage,{id:"manageTeamsTable.archivedTag",defaultMessage:"Archived"}))),n()(ey.s,{style:d.smallText},void 0,h)))}function sy(e){let{lastUpdatedMillis:t}=e;return n()(ey.s,{},void 0,(0,an.Yx)(t,"very_short",Dn.SP))}function ry(e){let{teamStores:t,manageTeamsStore:i}=e;window.__c={n:"ManageTeamsTable"};const a=(0,xe.O7)(),o=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),s=(0,Ze.VK)((()=>B.default.state.currentUserStore),[]),{sortAscending:l,sortColumn:d}=(0,Ze.VK)((()=>{const{sortAscending:e,sortColumn:t}=i.state;return{sortAscending:e,sortColumn:t}}),[i]),c=(0,Ze.VK)((()=>{const e=null==s?void 0:s.id;return e?m.oA(t.map((t=>{if(!t.canRead()||!t.isReady())return;const i=t.getMembers(),a=(0,Xt.XO)({membership:i});return{store:t,name:t.getName()??"",owners:a,isCurrentUserOwnerOfTeam:a.includes(e),members:(0,E.tO)({teamStore:t,spaceStore:o}),hasSecurityOverrides:t.hasSecurityOverrides(),accessLevel:t.getTeamAccessLevel(),isArchivedTeam:(0,Xt.m4)({archived_by:t.getArchivedBy()}),lastUpdated:t.getLastEditedTime()}}))):[]}),[o,null==s?void 0:s.id,t]),u=(0,Ze.VK)((()=>{const{showOnlyArchivedTeams:e,filterByOwner:t,showTeamsWithSecurityOverrides:a,filterAccess:n}=i.state;return c.filter((t=>e?t.isArchivedTeam:!t.isArchivedTeam)).filter((e=>!a||e.hasSecurityOverrides)).filter((e=>{if(n===ov&&"open"!==e.accessLevel)return!1;if(n===sv&&"closed"!==e.accessLevel)return!1;if(n===rv&&"private"!==e.accessLevel)return!1;switch(t.type){case dv:return 0===e.owners.length;case cv:return e.owners.includes(t.id);case lv:return!0;default:(0,A.t1)(t)}}))}),[i,c]),p=(0,Ze.VK)((()=>{const{sortAscending:e,sortColumn:t}=i.state;return function(e){let{data:t,sortColumn:i,sortAscending:a}=e;const n=[a?"asc":"desc"],o=[a?"desc":"asc"];switch(i){case Qf:return m.Xo(t,(e=>e.name),o);case Xf:return m.Xo(t,(e=>e.members.length),n);case ev:return m.Xo(t,(e=>ht.bx.indexOf(e.accessLevel)),n);case tv:return m.Xo(t,(e=>e.lastUpdated),n);default:(0,A.t1)(i)}}({data:u,sortAscending:e,sortColumn:t})}),[i,u]),g=(0,Ze.VK)((()=>(0,fn.ZP)(i.state.searchQuery,p,(e=>e.name))),[i,p]),h=(0,r.useCallback)((e=>kc.RF({environment:a,teamId:e,tab:jv.a.Members,from:"manage_teams_table"})),[a]),f=(0,Fe.yK)((e=>({container:{marginTop:17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:ay.reduce(((e,t)=>e+hy(ny[t].colWidth)+py),0)},tableHeaderRow:{borderTop:`1px solid ${e.tableDividerColor}`,borderBottom:`1px solid ${e.tableDividerColor}`},noTeamsLabel:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]),v=(0,r.useCallback)((e=>{const{sortColumn:t,sortAscending:n}=i.state,o=e===t&&!n;i.setState({...i.state,sortAscending:o,sortColumn:e}),xv.dw(a,{sortBy:e,sortOrder:n?"ascending":"descending"})}),[i,a]),y=(0,r.useCallback)((()=>{i.reset()}),[i]);return r.createElement(r.Fragment,null,n()("table",{style:f.container},void 0,n()("tr",{style:f.tableHeaderRow},void 0,ay.map((e=>n()(dy,{column:e,onSortableColumnClick:v,sortAscending:l,sortColumn:d},`header_${e}`)))),n()("tr",{},void 0,ay.map((e=>n()("td",{},`padding_row_${e}`)))),g.map((e=>n()(ly,{onShowTeamSettings:h,teamData:e,manageTeamsStore:i},`${e.store.id}_row`)))),n()(uy,{style:f.noTeamsLabel,numItemsAfterFilter:g.length,numItemsBeforeFilter:t.length,onResetFilters:y}))}function ly(e){let{teamData:t,manageTeamsStore:i,onShowTeamSettings:a}=e;window.__c={n:"TeamRow"};const[o,s]=(0,r.useState)(!1),l=(0,r.useCallback)((()=>s(!0)),[]),d=(0,r.useCallback)((()=>s(!1)),[]),c=(0,r.useCallback)((e=>{my(e,(()=>a(t.store.id)))}),[a,t.store.id]),u=(0,Fe.yK)((e=>({teamRow:{cursor:"pointer",borderBottom:`1px solid ${e.tableDividerColor}`}})),[]);return n()("tr",{onMouseLeave:d,onMouseEnter:l,style:u.teamRow,onClick:c},void 0,ay.map((e=>n()(cy,{isRowHovered:o,teamData:t,columnData:ny[e],manageTeamsStore:i},`${t.store.id}_${e}`))))}function dy(e){let{column:t,onSortableColumnClick:i,sortColumn:a,sortAscending:o}=e;window.__c={n:"HeaderCell"};const s=ny[t],r=(0,Fe.yK)((e=>({th:fy(s),innerDiv:{display:"flex",alignItems:"center",minWidth:hy(s.colWidth),height:32},text:{fontSize:f.Z.fontSize.UISmall.desktop,fontWeight:f.Z.fontWeight.regular,color:e.mediumTextColor},sortButton:{padding:5,margin:-5,overflow:"hidden",maxWidth:"100%"},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[s]),l=n()(ey.s,{style:r.text},void 0,s.headerTitle),d=(c=t,av.includes(c)?n()(Ge.Z,{style:r.sortButton,onClick:()=>i(t)},void 0,l,(()=>{if(t===a)return(0,ih.K)({...r.sortIcon,...o&&{transform:"rotate(180deg)"}})})()):l);var c;return n()("th",{style:r.th},void 0,n()("div",{style:r.innerDiv},void 0,d))}function cy(e){let{teamData:t,columnData:i,isRowHovered:a,manageTeamsStore:o}=e;window.__c={n:"Cell"};const s=(0,xe.O7)(),r=(0,Fe.yK)((e=>({td:{...fy(i),...a&&{background:e.buttonHoveredBackground}},innerDiv:{minWidth:hy(i.colWidth),fontSize:f.Z.fontSize.UIRegular.desktop,color:e.regularTextColor,height:56,display:"flex",alignItems:"center"}})),[i,a]),l=my,d=Boolean(i.hasClickableContents);return n()("td",{style:r.td},void 0,n()("div",{style:r.innerDiv,onClick:d?l:void 0},void 0,i.renderCell({environment:s,data:t,manageTeamsStore:o})))}function uy(e){let{style:t,numItemsBeforeFilter:i,numItemsAfterFilter:a,onResetFilters:o}=e;const s=0!==i;if(0!==a)return null;let r;return r=n()(v.FormattedMessage,s?{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.teamsFilteredOut",defaultMessage:"Could not find any teamspaces. <linkbutton>Reset your filters</linkbutton>",values:{linkbutton:e=>n()(ys.Z,{onClick:o},void 0,e)}}:{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.noTeamsExist",defaultMessage:"Could not find any teamspaces."}),n()(Ee.Z,{isSmall:!0,style:t},void 0,r)}function my(e,t){(0,qv.ZP)({event:e,context:qv.Af.ManageTeamsRowClick,callback:t})}const py=10,gy={paddingLeft:py/2,paddingRight:py/2};function hy(e){return"minWidth"in e?e.minWidth:e.width}function fy(e){let t={};return t="width"in e.colWidth?{width:e.colWidth.width}:{width:`${e.colWidth.widthPercent}%`,minWidth:e.colWidth.minWidth},{...gy,...t}}function vy(e){let{}=e;window.__c={n:"ManageTeamsBrowser"};const{isMobile:t=!1}=(0,xe.Fy)(),i=(0,xe.O7)(),a=(0,Ze.qz)(mv),o=(0,Fe.yK)((()=>({container:{marginTop:8},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},subheader:{display:"flex",flexDirection:"column"}})),[]),{unarchivedTeamIds:s,archivedTeamIds:l,isLoading:d}=(0,Ze.VK)((()=>{const e=N.state;return"loaded"!==e.loadingState?{unarchivedTeamIds:[],archivedTeamIds:[],isLoading:!0}:{unarchivedTeamIds:e.unarchivedTeamIds,archivedTeamIds:e.archivedTeamIds,isLoading:!1}}),[]),c=(0,Ze.VK)((()=>d?[]:pv({environment:i,teamIds:[...s,...l]})),[l,i,d,s]),u=(0,r.useCallback)((()=>kc.lo("workspace_settings")),[]);return n()("div",{style:o.container},void 0,n()(Re.Z,{large:!t,style:o.header,small:!0},void 0,n()("div",{style:o.subheader},void 0,n()(v.FormattedMessage,{id:"manageTeamsBrowser.title",defaultMessage:"Manage teamspaces"}),n()(Ee.Z,{isSmall:!0,style:{marginTop:3}},void 0,n()(v.FormattedMessage,{id:"manageTeamsBrowser.subtitle",defaultMessage:"Manage all teamspaces you have access here"}))),n()(He.Z,{onClick:u,isLarge:!0,className:K.myM},void 0,n()(v.FormattedMessage,{id:"manageTeamsBrowser.newTeamButton.text",defaultMessage:"New teamspace"}))),d?n()(Ue.Z,{}):r.createElement(r.Fragment,null,n()(Hv,{teamStores:c,manageTeamsStore:a}),n()(ry,{teamStores:c,manageTeamsStore:a})))}var yy=i(44615),Sy=i(2688);function by(){window.__c={n:"ManageTeamsListener"};const e=(0,xe.O7)(),{currentSpaceStore:t,currentUserStore:i}=(0,Ze.VK)((()=>{const{currentSpaceStore:e,currentUserStore:t}=B.default.state;return{currentSpaceStore:e,currentUserStore:t}}),[]);return(0,r.useEffect)((()=>{if("loading"===N.state.loadingState||!t||!i)return;const a=Sy.Z.addListener((0,yy.pD)({userId:i.id,spaceId:t.id}),((t,i)=>{O({environment:e,messageStoreEmitValue:i})}),void 0,e);return function(){a&&Sy.Z.removeListener(a,e)}}),[t,i,e]),null}const My=r.memo(by);function wy(e){let{title:t,description:i,disabled:a=!1,selected:o,onChange:s=(()=>{})}=e;return n()("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>!a&&s(!o)},void 0,n()("div",{style:{fontSize:14,marginRight:8,flexGrow:1}},void 0,t,i&&n()(Ee.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,i)),n()("div",{style:{marginTop:5}},void 0,n()(Fr.Z,{on:o,disabled:a})))}function Cy(){window.__c={n:"Header"};const e=(0,xe.Fy)();return n()(Re.Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},void 0,n()(v.FormattedMessage,{id:"teamsWorkspaceSettings.title",defaultMessage:"Teamspace settings"}))}function _y(){window.__c={n:"TeamSecuritySettings"};const e=(0,xe.O7)(),t=(0,Ze.VK)((()=>B.default.state.currentSpaceStore),[]),i=(0,Ze.qz)(void 0,pe.Z),a=(0,Ze.VK)((()=>t&&i.getValueForSpace(t)),[t,i]),o=(0,Ze.VK)((()=>(0,H.F$)()),[]),s=(null==a?void 0:a.disableTeamCreation)??!1,l=(null==a?void 0:a.disableTeamGuests)??!1,d=void 0===a,c=(0,r.useCallback)((()=>{t&&a&&async function(e){let{newSettingValue:t,environment:i,workspaceSecuritySettings:a,spaceStore:o}=e;const s=n()(v.FormattedMessage,"allowTeamCreation"===t?{id:"manageTeamsHelpers.confirmChangeSecuritySetting.allowTeamCreation",defaultMessage:"Are you sure you want allow all members of this workspace to create teams?"}:{id:"manageTeamsHelpers.confirmChangeSecuritySetting.workspaceOwners.disableTeamCreation",defaultMessage:"Are you sure you want to limit teamspace creation to only workspace owners?"});!!(await M.confirmUserAction({message:s}))&&Lu.n(i,{securitySettingsState:{...a,disableTeamCreation:"disableTeamCreation"===t},spaceStore:o})}({newSettingValue:s?"allowTeamCreation":"disableTeamCreation",environment:e,spaceStore:t,workspaceSecuritySettings:a})}),[t,s,e,a]);return r.createElement(r.Fragment,null,n()(vs.Z,{size:34}),n()(wy,{disabled:d,onChange:c,title:n()(v.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),description:n()(v.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.caption",defaultMessage:"Only allow workspace owners to create teamspaces"}),selected:s}),n()(vs.Z,{size:34}),o&&r.createElement(r.Fragment,null,n()(wy,{disabled:d,onChange:async function(){if(t&&a){if(!Boolean(a.disableTeamGuests)){if(!(await M.confirmUserAction({message:n()(v.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.message",defaultMessage:"Are you sure you want to disable teamspace guests?"}),description:n()(v.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.description",defaultMessage:"This action will remove all teamspace guests from the workspace."}),acceptLabel:n()(v.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.acceptButton",defaultMessage:"Disable and remove teamspace guests"})})))return}Lu.n(e,{securitySettingsState:{...a,disableTeamGuests:!a.disableTeamGuests},spaceStore:t})}},title:n()(v.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.title",defaultMessage:"Allow teamspace owners to add teamspace guests"}),description:n()(v.FormattedMessage,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.caption",defaultMessage:"This will allow teamspace owners with membership admin permissions to add teamspace guests. Disabling will remove all teamspace guests."}),selected:!l}),n()(vs.Z,{size:34})))}function ky(e){let{}=e;window.__c={n:"TeamsWorkspaceSettings"};const t=(0,Fe.yK)((()=>({learnMoreLinkContainer:{paddingTop:6,paddingBottom:20}})),[]);return n()(Be.Z,{},void 0,n()(Cy,{}),n()(gv.Z,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_workspace_settings",containerStyle:t.learnMoreLinkContainer}),n()(Cv,{}),n()(_y,{}),n()(vy,{}),n()(My,{}))}var Ty=i(38493),Iy=i(3924),Py=i(39675),xy=i(67729),Zy=i(75493),Fy=i(2832),Ay=i(73966);function Ey(e){let{isMobile:t}=e;window.__c={n:"ManualUpdateTimezoneSetting"};const i=(0,xe.O7)(),a=q.default.getIntl(),o=(0,Ze.VK)((()=>B.default.state.currentUserSettingsStore),[]),{currentTimeZone:s,auto_update_disabled:r}=(0,Ze.VK)((()=>{const e=null==o?void 0:o.getSettings();return{currentTimeZone:null==e?void 0:e.time_zone,auto_update_disabled:null==e?void 0:e.disable_auto_set_timezone}}),[o]),l=(0,Ze.VK)((()=>Fy.S.map((e=>({key:e,label:(0,Zy.Z)(a,e)})))),[a]);return(o&&n()(Ss.Z,{isMobile:t,disabled:!r,title:n()(v.FormattedMessage,{id:"dateAndTimeSettings.timeZone.title",defaultMessage:"Time Zone"}),caption:n()(v.FormattedMessage,{id:"dateAndTimeSettings.timeZone.caption",defaultMessage:"Current time zone setting."}),type:"dropdown",currentOption:s??"error_fetch_timezone",options:l,onSelectOption:e=>{Ay.l6({environment:i,userSettingsStore:o,timeZone:e})}}))??null}function By(e){let{isMobile:t}=e;window.__c={n:"AutoUpdateTimezoneSetting"};const i=(0,xe.O7)(),a=(0,Ze.VK)((()=>B.default.state.currentUserSettingsStore),[]),o=(0,Ze.VK)((()=>{var e;return null==a||null===(e=a.getSettings())||void 0===e?void 0:e.disable_auto_set_timezone}),[a])??!1,s=(0,r.useCallback)((e=>{const t=!o;Ay.k2({environment:i,userSettingsStore:e,disableAutoSetTimezone:t}),t||Ay.wk({environment:i,userSettingsStore:e})}),[i,o]),l=n()(v.FormattedMessage,{id:"dateAndTimeSettings.autoTimeZone.title",defaultMessage:"Set timezone automatically using your location"}),d=n()(v.FormattedMessage,{id:"dateAndTimeSettings.autoTimeZone.caption",defaultMessage:"Reminders, notifications and emails are delivered based on your time zone."});return(a&&n()(Ss.Z,{isMobile:t,title:l,caption:d,type:"toggle",isOn:!o,onToggle:()=>s(a)}))??null}var Ry=i(16347);const Dy=(0,Iy.M)((function(e){let{passwordRequestStore:t,userEmailDomainSettings:i}=e;window.__c={n:"UserSettings"};const{isPhone:a,isIOS:o,isMobile:s}=(0,xe.Fy)(),l=(0,xe.O7)(),d=(0,Ze.VK)((()=>Ae.Z.state.online),[]),c=(0,Ze.VK)((()=>s&&t?(0,Py.E)({isPhone:a,isIOS:o,passwordRequestStore:t,userEmailDomainSettings:i}):(0,Py.Z)({environment:l})),[l,s,a,o,t,i]),u=(0,Ze.VK)((()=>T.default.checkGate("update_user_setting_timezone_enabled")),[]),m=[u?{key:"timezone-auto",renderSettingsItem:()=>n()(By,{isMobile:s})}:void 0,u?{key:"timezone-manual",renderSettingsItem:()=>n()(Ey,{isMobile:s})}:void 0].filter(A.$K),p=[(0,Ze.VK)((()=>(0,xy.h)(l)),[l])?{key:"cookies",renderSettingsItem:()=>n()(xy.Z,{isMobile:s})}:void 0,{key:"view-history",renderSettingsItem:()=>n()(Ry.H,{isMobile:s})}].filter(A.$K);return d?n()(Be.Z,{disableScroller:s},void 0,n()(Re.Z,{large:!s,divider:"full"},void 0,n()(v.FormattedMessage,{id:"mySettings.settingsSection.title",defaultMessage:"My settings"})),n()(Bu.O,{items:c}),u&&r.createElement(r.Fragment,null,n()(vs.Z,{size:48,isHidden:!0}),n()(Re.Z,{large:!s,divider:"full"},void 0,n()(v.FormattedMessage,{id:"notificationAndPersonalSettings.dateAndTimeSection.title",defaultMessage:"Date & time"})),n()(Bu.O,{items:m})),n()(vs.Z,{size:48,isHidden:!0}),n()(Re.Z,{large:!s,divider:"full"},void 0,n()(v.FormattedMessage,{id:"mySettings.privacySection.title",defaultMessage:"Privacy"})),n()(Bu.O,{items:p})):n()(Be.Z,{},void 0,n()(Ee.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(v.FormattedMessage,{defaultMessage:"Please go online to manage settings.",id:"mySettings.goOnline.prompt"})))})),Ly={user_settings:{},profile:{},notifications:{},notifications_and_settings:{},connected_apps:{},language_and_region:{},debug_zone:{},settings:{},teams:{adminOnly:!0,membersOnly:!0},members:{membersOnly:!0},analytics:{membersOnly:!0,enterpriseOnly:!0},plans:{membersOnly:!0},billing:{},subscription:{},security:{adminOnly:!0},identity_provisioning:{adminOnly:!0},admin_content_search:{adminOnly:!0,enterpriseOnly:!0},integrations:{adminOnly:!0},imports:{},audit_log:{adminOnly:!0,enterpriseOnly:!0},experiments:{}},Ny=(0,v.defineMessages)({dialogLabel:{id:"spaceSettings.dialogLabel",defaultMessage:"Settings & members"}});class Oy extends l.Z{constructor(){super(...arguments),this.lastSpaceSettingsStoreState=void 0,this.lastSpaceSettingsModalStoreOpen=!1,this.storeTypes={spaceBasicSettingsStore:be,spaceProfileSettingsStore:_e,securitySettingsStore:pe.Z,samlSettingsStore:me,spaceDomainSettingsStore:we},this.renderContent=()=>{const e=ke.Z.state.currentTab,t=this.getTabRenderer(e);return n()(Ps.Z,{capture:!0,allowEsc:!0,render:e=>n()(xs.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!1,render:()=>r.createElement($u,s()({sidebar:this.renderSidebar()},e),t())})})},this.renderTabDot=e=>{const{currentSpaceStore:t}=B.default.state;return"members"===e&&this.environment.device.isDesktop&&null!=t&&t.canEditMembership()&&(0,H.p1)()&&Ie.Z.state.count>0?n()(Ic.z,{color:this.theme.redBadgeBackground}):null},this.renderProfile=()=>n()(th,{isEducationPlan:$.wl(Te.default.state.data),spaceProfileSettingsStore:this.stores.spaceProfileSettingsStore}),this.renderNotificationsAndSettings=()=>n()(Fu.Z,{isMobile:!1}),this.renderLanguageAndRegion=()=>n()(Zu,{}),this.renderSettings=()=>n()(Qp,{spaceStore:this.props.spaceStore,spaceBasicSettingsStore:this.stores.spaceBasicSettingsStore,securitySettingsStore:this.stores.securitySettingsStore}),this.renderMySettings=()=>n()(Dy,{}),this.renderMyNotifications=()=>n()(Du,{}),this.renderTeamsSettings=()=>n()(ky,{}),this.renderMembers=()=>n()(Jp.Z,{store:this.props.spaceStore,unreadAccessRequests:Ie.Z.state.count}),this.renderAnalytics=()=>{const{spaceStore:e}=this.props;return n()(Mp,{spaceStore:e})},this.renderPlans=()=>{const{data:e}=Te.default.state,{data:t}=Pe.Z.state;if(e)return n()(jf,{spaceStore:this.props.spaceStore,upcomingInvoiceData:t,securitySettingsStore:this.stores.securitySettingsStore,data:e})},this.renderBilling=()=>{const{data:e}=Te.default.state,{data:t}=Pe.Z.state;if(!e)return null;const i="unsubscribed_admin"===e.type&&e.customerData&&(0,g.E3)(e.customerData.stripe.addOns);if("subscribed_admin"===e.type||i){var a;const i=null===(a=e.customerData)||void 0===a?void 0:a.stripe;return i?n()(Mf,{spaceStore:this.props.spaceStore,subscriptionData:e,upcomingInvoiceData:t,customerData:i}):null}return e&&"unsubscribed_admin"===e.type?n()(Cf,{spaceStore:this.props.spaceStore,data:e}):void 0},this.renderExperiments=()=>n()(Be.Z,{},void 0,n()(Fs.Ub,{})),this.shouldRenderAnalyticsPrompt=()=>{var e,t;const{currentSpaceViewStore:i,currentSpaceStore:a,currentUserStore:n}=B.default.state;if(!a||!Vy("analytics",a))return!1;if(null==n||!n.id)return!1;if(null==a||!a.isDefined())return!1;const o=null==i?void 0:i.getSettings();return"dismissed"!==(null==o||null===(e=o.space_analytics_settings_prompt)||void 0===e?void 0:e.status)&&"hidden"!==(null==o||null===(t=o.space_analytics_settings_prompt)||void 0===t?void 0:t.status)&&(x.lo(this.environment),!0)},this.shouldRenderMfaPrompt=()=>{var e,t;const{currentSpaceViewStore:i,currentSpaceStore:a,currentUserStore:n}=B.default.state;if(null==n||!n.id)return!1;if(null==a||!a.isDefined())return!1;const o=null==i?void 0:i.getSettings();return"dismissed"!==(null==o||null===(e=o.mfa_settings_prompt)||void 0===e?void 0:e.status)&&"hidden"!==(null==o||null===(t=o.mfa_settings_prompt)||void 0===t?void 0:t.status)&&("off"===this.stores.spaceProfileSettingsStore.state.accountSettings.mfaStatus&&(x.GZ(this.environment),!0))},this.renderAuditLog=()=>r.createElement(r.Fragment,null,n()(Be.Z,{},void 0,n()(No,{spaceStore:this.props.spaceStore}))),this.renderSubscription=()=>n()(Be.Z,{},void 0,n()($f.Z,{})),this.renderImports=()=>n()(Be.Z,{},void 0,n()(Rc,{genericImporterEnabled:(0,G.t)()})),this.renderConnectedApps=()=>n()(Ty.Z,{location:"settings-page"}),this.renderDebugZone=()=>n()(lh,{store:this.props.spaceStore}),this.renderSecurity=()=>n()(Gu,{spaceStore:this.props.spaceStore,securitySettingsStore:this.stores.securitySettingsStore,userStore:this.props.userStore}),this.renderIdentityProvisioning=()=>n()(ic,{spaceStore:this.props.spaceStore,samlConfigStore:this.stores.samlSettingsStore,domainSettingsStore:this.stores.spaceDomainSettingsStore,userStore:this.props.userStore}),this.renderAdminContentSearch=()=>n()(Fa,{spaceStore:this.props.spaceStore,userStore:this.props.userStore}),this.renderIntegrations=()=>n()(Is,{spaceStore:this.props.spaceStore,userStore:this.props.userStore}),this.renderNewFeaturePrompt=()=>{if(this.shouldRenderAnalyticsPrompt()){const{currentSpaceStore:e}=B.default.state,t=null!=e&&e.canAdmin()?n()(v.FormattedMessage,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.workspaceOwner",defaultMessage:"Explore how members & guests are engaging with this workspace, common searches that are made, and content engagement metrics with workspace analytics."}):n()(v.FormattedMessage,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.member",defaultMessage:"See how your content is performing by reviewing metrics like number of views or unique visitors using workspace analytics."});return n()(ju,{onDismiss:()=>x.TY(this.environment),onClick:()=>{this.attemptCloseCurrentTab((()=>{ke.Z.setState({...ke.Z.state,currentTab:"analytics",defaultSubtab:void 0}),this.stores.spaceDomainSettingsStore.reset(),b.XI1(this.environment,{tab:"analytics"}),x.pE(this.environment)}))},onView:t=>{"enterprise"===(null==e?void 0:e.getSubscriptionTier())&&x.pE(t)},onClickLearnMore:()=>{const e=(0,Y.UY)("guides.workspaceAnalytics");C.navigateToExternalURL({environment:this.environment,url:e})},descriptionMessage:t,title:n()(v.FormattedMessage,{id:"enterpriseSpaceAnalyticsSettingsPrompt.title",defaultMessage:"New workspace analytics"}),buttonText:n()(v.FormattedMessage,{id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),icon:u(this.getSettingsPromptIconStyle())})}if(this.shouldRenderMfaPrompt())return n()(ju,{onClick:()=>{this.attemptCloseCurrentTab((()=>{ke.Z.setState({...ke.Z.state,open:!0,currentTab:"profile",defaultSubtab:void 0,highlightedSetting:ke.R.TwoStepVerification}),b.XI1(this.environment,{tab:"profile"})}))},onView:x.E6,onDismiss:()=>x.ZJ(this.environment),onClickLearnMore:()=>{const e=(0,Y.UY)("guides.mfa");C.navigateToExternalURL({environment:this.environment,url:e})},descriptionMessage:n()(v.FormattedMessage,{id:"mfaSettingsPrompt.description",defaultMessage:"2-step verification, also known as 2FA or MFA, is now available. Add a secondary method of verification used during login."}),title:n()(v.FormattedMessage,{id:"mfaSettingsPrompt.title",defaultMessage:"Add an extra layer of security to your account."}),buttonText:n()(v.FormattedMessage,{id:"mfaSettingsPrompt.button.label",defaultMessage:"Enable 2-step verification"}),icon:(0,d.Q)(this.getSettingsPromptIconStyle())})},this.handleModalOpen=()=>{Z.bi(this.environment),this.resetAuditLogSetting(),y.kj({environment:this.environment,spaceId:this.props.spaceStore.id,canAdmin:this.props.spaceStore.canAdmin()})},this.handleModalDismiss=()=>this.attemptCloseCurrentTab((()=>{ke.Z.setState({...ke.Z.state,open:!1}),he.reset(),this.stores.spaceDomainSettingsStore.reset(),this.resetAuditLogSetting(),Ie.Z.reset()}))}async willMount(e){super.willMount(e);const{spaceStore:t}=this.props,{securitySettingsStore:i}=this.stores,a=i.getValueForSpace(t);a&&i.setState(a),await P(this.environment,this.stores.spaceProfileSettingsStore)}willMountOrUpdate(e){super.willMountOrUpdate(e);const{open:t}=ke.Z.state,i=ke.Z.state;this.lastSpaceSettingsModalStoreOpen===t&&m.Xy(this.lastSpaceSettingsStoreState,i)||t&&b.SUq(this.environment,{tab:i.currentTab,from:i.openedFrom}),this.lastSpaceSettingsModalStoreOpen=t,this.lastSpaceSettingsStoreState=m.d9(i)}renderComponent(){const{open:e}=ke.Z.state;return n()(Zs.Z,{ariaLabel:q.default.formatMessage(Ny.dialogLabel),open:e,innerStyle:{width:1150,maxWidth:"calc(100vw - 100px)",height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:5,maxHeight:715},onOpen:this.handleModalOpen,onDismiss:this.handleModalDismiss,render:this.renderContent,className:K.zYS})}getTabRenderer(e){const t={profile:this.renderProfile,notifications_and_settings:this.renderNotificationsAndSettings,user_settings:this.renderMySettings,notifications:this.renderMyNotifications,language_and_region:this.renderLanguageAndRegion,connected_apps:this.renderConnectedApps,debug_zone:this.renderDebugZone,settings:this.renderSettings,teams:this.renderTeamsSettings,members:this.renderMembers,analytics:this.renderAnalytics,plans:this.renderPlans,billing:this.renderBilling,subscription:this.renderSubscription,security:this.renderSecurity,identity_provisioning:this.renderIdentityProvisioning,admin_content_search:this.renderAdminContentSearch,integrations:this.renderIntegrations,experiments:this.renderExperiments,audit_log:this.renderAuditLog,imports:this.renderImports},{spaceStore:i}=this.props;if(Vy(e,i))return t[e];{const e=w.CT(i);return w.r$({currentTab:e}),t[e]}}renderSidebar(){const{spaceStore:e}=this.props,{data:t}=Te.default.state,i=$.wY(t),a=(0,Fs.mS)(),o=sh().length>0;return n()("div",{style:Oy.sidebarStyle},void 0,n()("div",{style:Oy.sidebarTabsStyle},void 0,n()("div",{},void 0,n()("div",{style:this.getSidebarHeader()},void 0,n()(v.FormattedMessage,{id:"spaceSettings.sidebar.personalSettingsSection.title",defaultMessage:"Account"})),this.renderUserDetails(),this.renderTabButton("profile",e),(0,j.r)()?r.createElement(r.Fragment,null,this.renderTabButton("user_settings",e),this.renderTabButton("notifications",e)):r.createElement(r.Fragment,null,this.renderTabButton("notifications_and_settings",e)),this.renderTabButton("connected_apps",e),this.renderTabButton("language_and_region",e),o&&this.renderTabButton("debug_zone",e),n()(vs.Z,{size:18,isHidden:!0}),n()("div",{style:this.getSidebarHeader()},void 0,n()(v.FormattedMessage,{id:"spaceSettings.sidebar.workspaceSettingsSection.title",defaultMessage:"Workspace"})),this.renderTabButton("settings",e),(0,E.bq)()&&this.renderTabButton("teams",e),this.renderTabButton("members",e),!this.environment.device.isMobile&&this.renderTabButton("analytics",e),this.renderTabButton("plans",e),this.shouldRenderBillingTab(i)&&this.renderTabButton("billing",e),i&&this.renderTabButton("subscription",e),this.renderTabButton("security",e),this.renderTabButton("identity_provisioning",e),!this.environment.device.isMobile&&this.renderTabButton("admin_content_search",e),this.renderTabButton("integrations",e),(0,z.c)()&&!this.environment.device.isMobile&&n()("span",{onClick:()=>{const e=(0,p.ZP)();ce.Z.setState({flowId:e}),b.Syn(this.environment,{from:"settings",flowId:e})}},void 0,this.renderTabButton("imports",e)),!this.environment.device.isMobile&&this.renderTabButton("audit_log",e),a&&this.renderTabButton("experiments",e),e.canRead()&&n()(Oo.Z,{source:"settings"}),e.canRead()&&!(0,g.E3)(null==t?void 0:t.addOns)&&n()(Yf.Z,{source:"settings"}))),this.renderNewFeaturePrompt())}renderUserDetails(){const e=(0,W.B7)(this.environment),t={size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:e};return n()("div",{style:{display:"flex",alignItems:"center",height:44,paddingLeft:12,paddingRight:12}},void 0,n()("div",{style:this.getIconWrapStyle()},void 0,r.createElement(ai.Z,t)),e?n()("div",{},void 0,this.renderUserName(e),e.getEmail()&&n()(Ee.Z,{isSmall:!0},void 0,e.getEmail())):n()(v.FormattedMessage,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"}))}renderUserName(e){const t=q.default.getIntl(),i=e.getFullName(t);return i&&n()(Ee.Z,{style:{fontWeight:f.Z.fontWeight.medium}},void 0,i)}renderTabButton(e,t){if(!Vy(e,t))return null;const i=ke.Z.state.currentTab===e,a=Ph[e](this.environment),o=xh[e](),s=Zh[e]();return n()(Ri.Z,{hovered:i,style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:12,paddingRight:12,borderRadius:3,marginTop:1,marginBottom:1,minHeight:27},onClick:t=>{i||this.attemptCloseCurrentTab((()=>{ke.Z.setState({...ke.Z.state,currentTab:e,defaultSubtab:void 0}),this.stores.spaceDomainSettingsStore.reset(),b.XI1(this.environment,{tab:e})}))}},void 0,n()("div",{style:{display:"flex",alignItems:"center",...i&&{fontWeight:f.Z.fontWeight.semibold}}},void 0,n()("div",{style:this.getIconWrapStyle()},void 0,a),n()(Ee.Z,{isMultiline:!0},void 0,o),s),this.renderTabDot(e))}shouldRenderBillingTab(e){var t;const{spaceStore:i}=this.props,{data:a}=Te.default.state;return!(!a||e||!i.canAdmin())&&("subscribed_admin"===a.type||(!("unsubscribed_admin"!==a.type||!(0,g.E3)(null===(t=a.customerData)||void 0===t?void 0:t.stripe.addOns))||!!(0,$.MM)(a)))}async attemptCloseCurrentTab(e){const{spaceStore:t}=this.props,{spaceProfileSettingsStore:i}=this.stores,{currentUserStore:a,currentUserSettingsStore:o}=B.default.state;if(!a||!o)throw new Error("No user or settings store.");const s=n()(v.FormattedMessage,{id:"spaceSettings.closeSettingsDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Save changes?"}),r=n()(v.FormattedMessage,{id:"spaceSettings.closeSettingsDialog.confirmationButton.label",defaultMessage:"Yes"}),l=n()(v.FormattedMessage,{id:"spaceSettings.closeSettingsDialog.cancelationButton.label",defaultMessage:"No"}),{currentTab:d}=ke.Z.state;if("profile"===d){if(!m.Xy(i.state,i.getValueForUser(a,o,q.default.getIntl()))){const{profilePhoto:t,name:a,startDayOfWeek:r}=i.state;return a?M.showDialog({message:s,showCancel:!0,keepFocus:!0,items:[{label:n()(v.FormattedMessage,{id:"spaceSettings.closeSettingsDialog.updateSettingsButton.label",defaultMessage:"Update"}),color:"blue",onAccept:()=>{V.createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:this.environment,perform:e=>{const{currentUserStore:i}=B.default.state;if(i&&S.A({userStore:i,data:{name:a,profilePhoto:t},transaction:e}),o){const t=o.getSettings();(null==t?void 0:t.start_day_of_week)!==r&&U.d2({userSettingsStore:o,data:{start_day_of_week:r},transaction:e})}}}),e()}}],handleCancel:()=>{e()}}):M.showErrorMessage(n()(v.FormattedMessage,{id:"profileSettings.personalInfoSection.nameMissing.message",defaultMessage:"Please fill in name."})),!0}e()}else if("settings"===d&&t.canEdit()){const{spaceBasicSettingsStore:i}=this.stores,{securitySettingsStore:a}=this.stores,n=!m.Xy(a.state,a.getValueForSpace(t)),o=!m.Xy(i.state,i.getValueForSpace(t));if(n||o){if(await M.confirmUserAction({message:s,acceptLabel:r,cancelLabel:l})){if(!(await _.Y5({environment:this.environment,spaceId:t.id,spaceBasicSettingsStore:i})))return!1;o&&_.OF({environment:this.environment,spaceStore:this.props.spaceStore,spaceBasicSettingsStore:i}),n&&this.updateSecuritySettingsStore(a),e()}else e();return!0}e()}else if("audit_log"===d)this.resetAuditLogSetting(),e();else if("analytics"===d)ye.reset(),e();else if("plans"===d&&t.canAdmin()){const{securitySettingsStore:i}=this.stores,a=i.getValueForSpace(t);!m.Xy(i.state,i.getValueForSpace(t))&&a&&(i.setState(a),this.updateSecuritySettingsStore(i)),e()}else"teams"===d?(R.Z.reset(),N.reset(),e()):e();return!1}resetAuditLogSetting(){se.reset(),de.reset()}updateSecuritySettingsStore(e){const{disablePublicAccess:t,disableGuests:i,disableMoveToSpace:a,disableExport:n,disableSpacePageEdits:o,disablePublicAccessRequests:s,disableTeamCreation:r,disableMembershipRequests:l,disableExternalMembershipRequests:d,disableGuestMembershipRequests:c,enableAiFeature:u,disableTeamGuests:m,enableGuestInviteRequests:p}=e.state;V.createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:this.environment,perform:e=>{_.Xr({environment:this.environment,disablePublicAccess:t,disableGuests:i,disableMoveToSpace:a,disableExport:n,disableSpacePageEdits:o,disablePublicAccessRequests:s,transaction:e,spaceStore:this.props.spaceStore,disableTeamCreation:r,disableMembershipRequests:l,disableExternalMembershipRequests:d,disableGuestMembershipRequests:c,enableAiFeature:Boolean(u),disableTeamGuests:m,enableGuestInviteRequests:p})}})}getSidebarHeader(){return{fontSize:12,lineHeight:1,marginBottom:1,color:this.theme.mediumTextColor,fontWeight:f.Z.fontWeight.semibold,alignItems:"center",display:"flex",height:24,paddingLeft:12,paddingRight:11,textOverflow:"ellipsis",overflow:"hidden"}}getIconWrapStyle(){return{width:20,height:20,marginRight:8,color:this.theme.regularIconColor,fill:this.theme.regularIconColor}}getSettingsPromptIconStyle(){return{width:14,height:14,color:this.theme.regularIconColor}}}function Vy(e,t){const i=Ly[e];return!(i.adminOnly&&!t.canAdmin())&&(!(i.membersOnly&&!t.canRead())&&!(i.enterpriseOnly&&!(0,h.wP)(t.getSubscriptionTier())))}Oy.displayName="SpaceSettings",Oy.theme=void 0,Oy.sidebarStyle={display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between",paddingTop:10,paddingLeft:4,paddingRight:4},Oy.sidebarTabsStyle={overflow:"auto",paddingBottom:12};const Uy=Oy},10644:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(23174),n=i.n(a),o=(i(67294),i(83355)),s=i(5366),r=i(64369),l=i(27386);class d extends o.Z{renderComponent(){return n()(l.Z,{},void 0,n()(r.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(s.FormattedMessage,{id:"spaceSubscriptionPlans.offlineMessage",defaultMessage:"Please go online to manage your plan."})))}}d.displayName="SpaceSubscriptionPlansOfflineMessage";const c=d},56633:(e,t,i)=>{i.d(t,{G:()=>y});var a=i(10434),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(45433),d=i(87916),c=i(42875),u=i(59054),m=i(5366),p=i(23014),g=i(54642),h=i(66890),f=i(56596);const v=(0,m.defineMessages)({cannotSetSprintToCurrentTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToCurrentTooltip",defaultMessage:"Current sprint already exists"},cannotSetSprintToNextTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToNextTooltip",defaultMessage:"Next sprint already exists"}});function y(e){window.__c={n:"SprintStatusPropertyMenu"};const{blockPropertyValueOverlayStore:t}=e,i=(0,s.O7)(),a=(0,h.Y$)(),y=(0,r.VK)((()=>a.normalizedSchemaStore.state),[a.normalizedSchemaStore]),S=function(e){let{sprintCollectionStore:t,environment:i,normalizedBlockSchema:a}=e;const[{value:n,status:o}]=(0,u.r5)((async()=>{var e;if(!t)return;const n=p.qB[d.p$].current.reducer.get(a),o=p.qB[d.p$].next.reducer.get(a);if(!n)return;if(!o)return;const s={type:"reducer",userId:i.currentUser.id,userTimeZone:(0,c.r)(),searchQuery:void 0,reducers:{[l.SF]:n,[l.YE]:o}},r=null===(e=t.getParentBlockStore())||void 0===e?void 0:e.getCollectionViewStores()[0],u=t.getSpaceId();if(!r)return;const m=await g.queryCollection(i,{source:{type:"collection",id:t.id,spaceId:u},collectionView:{id:r.id,spaceId:u},loader:s},void 0,{src:"sprint_status_overlay_check"});if("success"!==m.type)return;const h=m.data.result.reducerResults[l.SF],f=m.data.result.reducerResults[l.YE];return"results"===h.type&&"results"===f.type?{hasCurrentSprint:h.blockIds.length>0,hasNextSprint:f.blockIds.length>0}:void 0}),[i,a,t]);if("resolved"!==o||!n)return;return n}({sprintCollectionStore:(0,r.VK)((()=>{const e=t.state;if(e.isOpen)return e.store.getAssociatedCollectionStore()}),[t]),environment:i,normalizedBlockSchema:y}),b=(0,m.useIntl)(),M=(0,o.useCallback)((e=>void 0===S&&[l.YE,l.SF].includes(e)?{disabled:!0}:e===l.YE&&null!=S&&S.hasNextSprint?{disabled:!0,disableReasonMessage:b.formatMessage(v.cannotSetSprintToNextTooltip)}:e===l.SF&&null!=S&&S.hasCurrentSprint?{disabled:!0,disableReasonMessage:b.formatMessage(v.cannotSetSprintToCurrentTooltip)}:{disabled:!1}),[S,b]);return o.createElement(f.x,n()({},e,{shouldDisableOption:M}))}},56596:(e,t,i)=>{i.d(t,{x:()=>F});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(43261),l=i.n(r),d=i(67294),c=i(480),u=i(86628),m=i(80951),p=i(84619),g=i(4635),h=i(72126),f=i(5366),v=i(97880),y=i(5149),S=i(76427),b=i(87279),M=i(4023),w=i(50959),C=i(52275),_=i(78140),k=i(32163),T=i(40721),I=i(72495),P=i(26388),x=i(22084),Z=i(47082);function F(e){window.__c={n:"StatusPropertyMenu"};const{device:t}=(0,c.O7)(),[i,a]=d.useState(e.initialValue??""),[o,r]=d.useState(""),F=(0,f.useIntl)(),A=(0,u.VK)((()=>{const t=e.blockPropertyValueOverlayStore.state;if(t.isOpen)return t.collectionContextStore}),[e.blockPropertyValueOverlayStore]),E=(0,u.VK)((()=>(null==A?void 0:A.permissionScopes.state.canConfigureCollection)&&"collectionPage"!==(null==A?void 0:A.contextType)),[A]),B=e.propertySchema.options??[],R=(0,m.i7)(B,i),D=e.propertySchema.groups??[],L=R&&D.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(R.id)})),N=R&&s()(x.F,{value:R.value,color:R.color,descriptionTooltip:R.description,tooltipPlacement:M.u.Left,groupColor:null==L?void 0:L.color,isSingle:!1,format:t.isMobile?p.l.Large:p.l.Medium,onClickRemove:()=>{a(""),e.onChange("")},showRemoveButton:!0,shouldShrink:!0,showEllipsis:!0}),O=s()(Z.Z,{focus:!t.isMobile||void 0,focusAfterAnimation:!0,format:Z.Z.Format.Select,tokens:[N],placeholder:F.formatMessage({id:"database.selectPropertyEditMenu.searchStatusPlaceholder",defaultMessage:"Search for an option"}),onRemoveLastToken:()=>{},value:o,disabled:e.disabled,hideInput:e.disabled,onChange:e=>{r(e.target.value)},dontShowBorderBottom:t.isAndroid});let V;if(V=t.isMobile?{menuType:b.og.Modal,title:e.propertySchema.name,right:s()(T.DoneMenuText,{}),onClickRight:e.onDismiss,header:O}:{menuType:b.og.Popup,header:O,tokenInputHeader:!0},e.disabled)return d.createElement(_.Z,V);const{propertySchema:U}=e,W=U.options??[];let z=W;if(""!==o){const e=l().filter(o,W.map((e=>e.value))).map((e=>e.original));z=W.filter((t=>e.includes(t.value)))}const K=(U.groups??[]).map((e=>{const t=z.filter((t=>{var i;return null===(i=e.optionIds)||void 0===i?void 0:i.includes(t.id)}));if(0!==t.length)return{group:e,groupOptions:t}})).filter(v.$K),H=K.length>1,G=K.map(((i,a)=>{let{group:o,groupOptions:r}=i;return{items:r.map((i=>{const a=e.shouldDisableOption?e.shouldDisableOption(i.id):{disabled:!1};return{key:i.value,render:e=>d.createElement(C.Z,n()({},e,{disabled:a.disabled,disabledFeedback:!0,focused:e.focused,title:s()(P.Z,{disableTooltip:!a.disabled||!a.disableReasonMessage,renderTooltip:()=>a.disabled&&a.disableReasonMessage,render:e=>d.createElement(x.F,n()({},e,{value:i.value,color:i.color,descriptionTooltip:i.description,tooltipPlacement:M.u.Left,groupColor:o.color,showRemoveButton:!1,isSingle:!0,format:t.isMobile?p.l.Large:p.l.Medium}))}),isTokenTitle:!0})),action:()=>{e.onChange(i.value)}}})),key:`group-${a}`,render:e=>d.createElement(d.Fragment,null,d.createElement(I.Z,n()({},e,{topBorder:e.index>0,title:H&&s()(w.r_,{group:o,showColor:!1,style:{fontSize:12}})})))}})),q=A&&E?{items:[{key:"edit property",render:e=>d.createElement(C.Z,n()({},e,{title:s()(f.FormattedMessage,{defaultMessage:"Edit property",id:"database.tableHeaderCell.editProperty"}),icon:(0,g.W)({width:14})})),action:()=>{const t=A.settingsStore;A.collectionStore()&&(e.onDismiss(),S.n1({collectionContextStore:A}),y.r$({collectionContextStore:A,collectionSettingsStore:t}),y.H4({collectionSettingsStore:t,item:{type:"property",formatKey:A.getPropertyFormatKey(),property:e.property}}))}}],key:"edit-property",render:e=>d.createElement(I.Z,n()({},e,{topBorder:e.index>0}))}:void 0;return d.createElement(_.Z,V,s()(k.Z,{type:k.i.Vertical,initialFocus:o.length>0?0:void 0,sections:h.oA([...G,q]),onAccept:(t,i,a)=>{e.onAccept(a)}}))}},13787:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(49085),l=i(8848),d=i(84169),c=i(89101),u=i(82990),m=i(5366),p=i(54642),g=i(28020),h=i(33846),f=i(92083),v=i(9209),y=i(42922),S=i(74194),b=i(50506),M=i(42402);class w extends s.Z{constructor(){super(...arguments),this.storeTypes={promoCodeStore:h.Z,promoError:r.default.createClass(void 0)},this.handleModalDismiss=()=>{v.Z.setState({open:!1})},this.handleChangeEmail=()=>{this.handleModalDismiss(),f.Z.setState({open:!0,openedFrom:"upsell",currentTab:"profile",defaultSubtab:void 0,highlightedSetting:void 0})},this.handleInputChange=e=>{this.stores.promoCodeStore.setState({...this.stores.promoCodeStore.state,inputValue:e.target.value.toUpperCase()}),this.stores.promoError.setState(void 0)},this.handleSubmitPromoCode=async()=>{const e=this.stores.promoCodeStore.state.inputValue;if(e){const t=await p.getPromoCode(this.environment,{code:e});"failed"!==t.type&&t.data.promo?v.Z.state.open&&(await v.Z.state.handlePromoCode(this.stores.promoCodeStore.state.inputValue),this.handleModalDismiss()):this.stores.promoError.setState(this.props.intl.formatMessage({defaultMessage:"Promo code {code} does not exist",id:"studentNotEligibleModal.numberedList.item2.promocode.errorMessage"},{code:e}))}}}renderComponent(){const{open:e}=v.Z.state;return n()(b.Z,{open:e,innerStyle:w.wrapStyle,preventHideChildrenWhileOpening:!0,render:()=>this.renderModalContents(),onDismiss:this.handleModalDismiss})}renderModalContents(){return n()("div",{style:{fontSize:14}},void 0,n()("div",{},void 0,n()(m.FormattedMessage,{defaultMessage:"<p>Unfortunately you are not eligible for a free Education plan if you use this email address.</p><p>K-12 students, K-12 educators, and personal email addresses such as Gmail and Outlook are not eligible to receive the <pricinglink>Education Plan</pricinglink> for free, but anyone is welcome to use the <pricinglink>Free Plan</pricinglink> for free with unlimited storage.</p>",id:"studentNotEligibleModal.header",values:{br:n()("br",{}),p:e=>n()("p",{style:{marginTop:0,marginBottom:8}},void 0,1===e.length?e[0]:o.Children.toArray(e)),pricinglink:e=>n()(M.Z,{external:!0,href:c.AR.pricing},void 0,e)}})),this.renderSchoolEmailCodePrompt(),this.renderPromoCode(),this.renderContactUs())}renderSchoolEmailCodePrompt(){const e=(0,g.B7)(this.environment);return n()("div",{style:{display:"flex",marginTop:16}},void 0,n()("div",{style:{width:18,flexShrink:0,color:this.theme.mediumTextColor}},void 0,n()(m.FormattedMessage,{defaultMessage:"1.",id:"studentNotEligibleModal.numberedList.firstItem"})),n()("div",{style:{flexGrow:1}},void 0,n()("div",{style:{color:this.theme.mediumTextColor}},void 0,n()(m.FormattedMessage,{defaultMessage:"Your current email is:",id:"studentNotEligibleModal.numberedList.changeEmailItem.message"})),n()("div",{style:{fontWeight:u.Z.fontWeight.medium,marginTop:0}},void 0,e&&e.getEmail()),n()("div",{style:{color:this.theme.mediumTextColor,marginTop:4}},void 0,n()(m.FormattedMessage,{defaultMessage:"Thousands of university, college, and post-secondary school domains are already eligible, not just .edu emails!",id:"studentNotEligibleModal.numberedList.changeEmailItem.message2"})),n()(y.Z,{style:{marginTop:12},onClick:this.handleChangeEmail,isLarge:!0},void 0,n()(m.FormattedMessage,{defaultMessage:"Change email",id:"studentNotEligibleModal.numberedList.changeEmailItem.button.label"}))))}renderPromoCode(){const e=this.stores.promoError.state,t=this.props.intl.formatMessage({defaultMessage:"Enter code…",id:"studentNotEligibleModal.numberedList.item2.promocodePlaceholder"});return n()("div",{style:{display:"flex",marginTop:16}},void 0,n()("div",{style:{width:18,flexShrink:0,color:this.theme.mediumTextColor}},void 0,n()(m.FormattedMessage,{defaultMessage:"2.",id:"studentNotEligibleModal.numberedList.secondItem"})),n()("div",{style:{flexGrow:1}},void 0,n()("div",{style:{color:this.theme.mediumTextColor}},void 0,n()(m.FormattedMessage,{defaultMessage:"Have a student promo code?",id:"studentNotEligibleModal.numberedList.promoCodeItem.message"})),n()("div",{style:{display:"flex",marginTop:12}},void 0,n()(S.Z,{style:{marginRight:8,height:32},value:this.stores.promoCodeStore.state.inputValue,onChange:this.handleInputChange,onSubmit:this.handleSubmitPromoCode,placeholder:t}),n()(y.Z,{onClick:this.handleSubmitPromoCode,disabled:!this.stores.promoCodeStore.state.inputValue,isLarge:!0},void 0,n()(m.FormattedMessage,{defaultMessage:"Submit",id:"studentNotEligibleModal.numberedList.promoCodeItem.submitButton"}))),n()("div",{style:{color:l.ZP.red,fontSize:12,marginTop:4,marginLeft:8,height:20}},void 0,e)))}renderContactUs(){return n()("div",{style:{display:"flex",alignItems:"center",color:this.theme.lightTextColor,borderTop:`1px solid ${this.theme.regularDividerColor}`,paddingTop:14}},void 0,(0,d.m)({width:14,marginTop:1,marginRight:6,fill:this.theme.lightIconColor})," ",n()("div",{},void 0,n()(m.FormattedMessage,{defaultMessage:"Have questions about this? <inlinelink>More info & FAQs</inlinelink>.",id:"studentNotEligibleModal.contactUsSection.message",values:{inlinelink:e=>n()(M.Z,{href:"https://www.notion.so/Notion-for-students-teachers-adc631df15ee4ab9a7a33dd50f4c16fe",external:!0},void 0,e)}})))}}w.displayName="StudentNotEligibleModal",w.wrapStyle={padding:"24px 36px 24px",minWidth:300,maxWidth:400};const C=(0,m.injectIntl)(w)},6202:(e,t,i)=>{i.d(t,{Z:()=>m});var a=i(23174),n=i.n(a),o=(i(67294),i(83355)),s=i(8848),r=i(87279),l=i(42922),d=i(64921),c=i(28992);class u extends o.Z{renderComponent(){return n()(c.Z,{title:this.renderButton()})}renderButton(){const{isMobile:e}=this.environment.device;return e?n()(d.Z,{onClick:this.props.onClick,mobileFeedback:!0,disabled:this.props.disabled,style:u.buttonMobileStyle},void 0,this.props.title):n()(l.Z,{onClick:this.props.onClick,disabled:this.props.disabled,style:{width:"100%",maxWidth:300,display:"flex",margin:"auto"}},void 0,this.props.title)}}u.displayName="SubmitButtonMenuItem",u.contextTypes={...r.mw,...o.w},u.buttonMobileStyle={width:"100%",color:s.ZP.blue};const m=u},30676:(e,t,i)=>{i.d(t,{F:()=>u});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(86628),d=i(52275),c=i(93686);function u(e){window.__c={n:"TeamMenuItem"};const{teamStore:t}=e,{name:i}=(0,l.VK)((()=>({name:t.getName()})),[t]);return r.createElement(d.Z,n()({},e,{icon:s()(c.p,{size:14,store:t,disabled:!0}),title:i}))}},25405:(e,t,i)=>{i.r(t),i.d(t,{TopbarMoreMenu:()=>Wi});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(24405),d=i(5366),c=i(10434),u=i.n(c),m=i(13991),p=i(15145),g=i(41432),h=i(90792),f=i(77366),v=i(88437),y=i(50066),S=i(82356),b=i(27714),M=i(90199),w=i(60651),C=i(2356),_=i(11751),k=i(37888),T=i(76994),I=i(23867),P=i(82990),x=i(50906),Z=i(14871),F=i(79257),A=i(54532),E=i(61652),B=i(3297),R=i(96802),D=i(94419),L=i(72711),N=i(19785),O=i(75018),V=i(37834),U=i(21325),W=i(39699),z=i(93405),K=i(72495),H=i(8848),G=i(98742),q=i(64921),j=i(26388),Y=i(64369);function $(e,t){let{id:i,caption:a,focused:r,isActive:d,onClick:c,onMouseDown:m,onMouseEnter:p,onMouseLeave:g,role:h,style:f,tooltip:v,ignoreLocalHoverState:y,disallowTabbing:S}=e;window.__c={n:"FontMenuItem"};const b=(0,s.Fy)(),M=(0,l.yK)((()=>({optionItem:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:34,justifyContent:"flex-end"},button:{width:"100%",...b.isMobile?{padding:16,paddingTop:20,transition:"color 300ms, border 300ms",lineHeight:1}:{padding:6,paddingTop:10,borderRadius:3,transition:"color 300ms, border 300ms",lineHeight:1},justifyContent:"center",color:d?H.ZP.blue:"inherit"}})),[d,b]);return n()(j.Z,{renderTooltip:()=>v,placement:j.Z.Placement.Bottom,delayThreshold:80,render:e=>{const s=(0,G.Z)(e,{onMouseEnter:p,onMouseLeave:g}),{onMouseDown:l,...d}=s;return o.createElement(q.Z,u()({},d,{id:i,role:h,ref:t,mobileFeedback:b.isMobile,onClick:c,onMouseDown:s.onMouseDown||m,hovered:r,style:M.button,ignoreLocalHoverState:y,disallowTabbing:S,className:"notranslate"}),n()("div",{style:M.optionItem},void 0,n()("div",{style:{...f,height:25}},void 0,"Ag"),n()(Y.Z,{isSmall:!0,style:{marginTop:4}},void 0,a)))}})}const Q=o.forwardRef($);var J=i(83355),X=i(87279);class ee extends J.Z{constructor(){super(...arguments),this.desktopStyle={display:"flex",justifyContent:"space-between",marginLeft:14,marginRight:14}}renderComponent(){return o.createElement(K.Z,this.props,n()("div",{style:this.environment.device.isMobile?this.getMobileStyle():this.desktopStyle},void 0,this.props.children))}getMobileStyle(){return{display:"flex",justifyContent:"space-around",boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,background:this.theme.popoverBackground}}}ee.displayName="FontSectionMenuItem",ee.contextTypes={...X.mw,...J.w};const te=ee;i(57658);var ie=i(27006),ae=i(77420),ne=i(97880);const oe=(0,i(45238).I)("disconnect",{viewBox:"0 0 16 16",svg:n()("path",{d:"M6.45508 4.50977L7.28906 5.34375L8.7041 3.4707L7.67871 5.7334L9.45605 7.51074H11.083L10.3857 8.43359L11.2539 9.30859L12.7852 7.36035C12.9082 7.20996 12.9697 7.06641 12.9697 6.90234C12.9697 6.61523 12.751 6.41016 12.4502 6.41016H8.54688L10.5703 1.05078C10.8506 0.298828 10.0645 -0.0976562 9.58594 0.517578L6.45508 4.50977ZM12.874 13.6631C13.0859 13.875 13.4346 13.875 13.6396 13.6631C13.8516 13.458 13.8584 13.1025 13.6396 12.8906L3.10547 2.35645C2.90039 2.15137 2.53809 2.14453 2.33301 2.35645C2.12793 2.56152 2.12793 2.92383 2.33301 3.12891L12.874 13.6631ZM3.0166 9.12402C3.0166 9.4043 3.23535 9.61621 3.53613 9.61621H7.44629L5.41602 14.9688C5.13574 15.7207 5.92188 16.1172 6.40039 15.5088L9.52441 11.5166L8.69043 10.6895L7.28223 12.5488L8.30078 10.293L6.5166 8.51562H4.89648L5.60059 7.59277L4.72559 6.71777L3.20801 8.65918C3.08496 8.81641 3.0166 8.95996 3.0166 9.12402Z"})});var se=i(18442),re=i(39248),le=i(74181),de=i(21202),ce=i(15070),ue=i(80444),me=i(52275),pe=i(70301);class ge extends J.Z{renderComponent(){const{bot:e}=this.props,{currentUserRootStore:t}=ue.default.state;if(e&&t)return o.createElement(me.Z,u()({},this.props,{icon:n()(pe.Z,{botValue:e}),title:(0,ce.Mh)(e)}))}}ge.displayName="BotMenuItem",ge.contextTypes={...X.mw,...J.w};const he=ge;var fe=i(68894),ve=i(68785),ye=i(28992),Se=i(43765),be=i(31278),Me=i(76798),we=i(84015),Ce=i(41892),_e=i(24600),ke=i(84210),Te=i(28187),Ie=i(42402),Pe=i(60442);function xe(e){return(0,r.VK)((()=>{var t;return{isDefined:e.isDefined(),channel:null===(t=e.getKeyStore("channel").getValue())||void 0===t?void 0:t.replace(/^#/,"")}}),[e])}function Ze(){return n()(Pe.Z,{imageURL:Ce.Z.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:n()(d.FormattedMessage,{defaultMessage:"Connect a Slack channel to get updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.tooltip"})})}const Fe=()=>n()(Pe.Z,{imageURL:Ce.Z.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:n()(d.FormattedMessage,{defaultMessage:"Disconnect a Slack channel to stop getting updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.disconnectTooltip"})}),Ae=(0,o.forwardRef)((function(e,t){window.__c={n:"SlackInheritedMenuItem"};const{blockStore:i,...a}=e,{blockStore:s,slackIntegrationStore:l}=(0,Te.Jk)(i),{isDefined:c,channel:m}=xe(l),g=(0,r.VK)((()=>(0,ke.ZP)({store:s,pageVisitSource:p.tY.LinkInPage})),[s]);return c?n()(j.Z,{placement:j.Z.Placement.Left,render:e=>o.createElement(z.Z,u()({},(0,G.Z)(e,a),{svg:_e.P,title:m,caption:o.createElement(o.Fragment,null,n()(d.FormattedMessage,{defaultMessage:"Based on",id:"topbar.updatesButton.slackIntegrationButton.activeTitle"})," ",n()(Ie.Z,{href:g},void 0,n()(Me.Z,{store:s,style:{display:"inline"}}))),ref:t})),renderTooltip:Fe}):null})),Ee=(0,o.forwardRef)((function(e,t){window.__c={n:"SlackConnectedMenuItem"};const{blockStore:i,...a}=e,{slackIntegrationStore:s}=(0,r.VK)((()=>(0,Te.Jk)(i)),[i]),{isDefined:l,channel:c}=xe(s);return l?o.createElement(j.Z,{placement:j.Z.Placement.Left,render:e=>o.createElement(z.Z,u()({svg:_e.P,title:c,caption:n()(d.FormattedMessage,{defaultMessage:"Connected to Slack channel",id:"topbar.updatesButton.slackIntegrationButton.connectedCaption"})},(0,G.Z)(e,a))),renderTooltip:Fe,ref:t}):null}));var Be=i(26825),Re=i(48019),De=i(78140),Le=i(40721),Ne=i(42782);const Oe=(0,o.forwardRef)((function(e,t){const{context:i,parent:a,isSharedDirectly:l,botStore:d,botPermissionSourcePage:c,originConnectionLabel:m,...p}=e,g=(0,s.O7)(),h=(0,r.VK)((()=>ue.default.state.currentSpaceStore),[]),f=i.blocks[0],v=(0,r.VK)((()=>f.canAdmin()&&(null==h?void 0:h.canRead())),[f,h]),{botCapabilities:y,botName:S}=(0,r.VK)((()=>({botCapabilities:d.getCapabilities(),botName:d.getName()})),[d]);return o.createElement(Ne.Z,u()({},p,{key:d.id,renderOrigin:e=>o.createElement(me.Z,u()({},e,{title:m,icon:n()(pe.Z,{botStore:d,showActiveDot:!0,style:{position:"relative"}})})),renderExtension:(e,t)=>{let s;return s=g.device.isPhone?{menuType:X.og.Modal,right:n()(Le.DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:X.og.Popup,width:220,...e},o.createElement(De.Z,s,n()(Re.Z,{context:i,initialFocus:0,onAccept:a.onAccept,sections:[Ve({isSharedDirectly:l,botCapabilities:y,botPermissionSourcePage:c}),...v?[Ue({isSharedDirectly:l,botId:d.id,botName:S})]:[]]}))},onFocus:a.onFocus,focused:p.focused,openOnFocus:!1,ref:t}))}));function Ve(e){const{botCapabilities:t,isSharedDirectly:i,botPermissionSourcePage:a}=e,n=(0,Be.uH)(t);return{key:"active connection capabilities section",render:e=>o.createElement(K.Z,u()({},e,{topBorder:!1})),actions:[...i?[]:[kt(a)],Tt(n)]}}function Ue(e){const{isSharedDirectly:t,botId:i,botName:a}=e;return{key:"active connection disconnect section",render:e=>o.createElement(K.Z,e),actions:t?[It(i,a)]:[Pt(i)]}}var We=i(47453),ze=i(59753),Ke=i(9844),He=i(31299),Ge=i(41623),qe=i(38755),je=i(57559);const Ye=(0,o.forwardRef)((function(e,t){const{context:i,parent:a,alreadyConnectedIntegrationIds:l,alreadyConnectedBotIds:d,originButtonLabel:c,...m}=e,p=i.blocks[0],g=(0,s.O7)(),h=(0,r.VK)((()=>ue.default.state.currentSpaceStore),[]),f=(0,r.VK)((()=>null==h?void 0:h.getBotSettingsStore().getValue()),[h]),v=(0,r.VK)((()=>null!=f&&f.integration_restrictions&&null!=f&&f.integration_approval_statuses?Object.keys(f.integration_approval_statuses):[]),[f]),[y,S]=(0,o.useState)(""),[b,M]=(0,o.useState)({status:"loading"});(0,o.useEffect)((()=>{Promise.all([async function(e){return await He.RF({environment:g,query:e})}(y),async function(e){return await He.sC({query:e,environment:g,spaceId:null==h?void 0:h.id,botSettings:f})}(y)]).then((e=>{let[t,i]=e;const a=new Set,n=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:i,botValues:a,environment:n}=e,o=[];for(const s of a){const e=s.id,a=t.has(e)||s.integration_id&&i.has(s.integration_id),r=ze.kk.fromValue(ae.cZ,s),l=(0,Ge.Nq)(n,r)||(0,qe.Fn)(n)&&(0,Ge.f_)(r);!a&&l&&o.push(s)}return o}({alreadyConnectedBotIds:d,alreadyConnectedIntegrationIds:l,botValues:t,environment:g}).map((e=>(e.integration_id&&a.add(e.integration_id),{table:ae.cZ,value:e})));let o=i.map((e=>{if(h){const t=je.t1.createChildStore(h,{id:e,table:Ke.K2}),i=t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:i}=e;return i(t)}));if(i&&!(0,le.VM)(i)){return{table:Ke.K2,value:i}}}})).filter(ne.$K).filter((e=>!(a.has(e.value.id)||l.has(e.value.id))));if(le.Cb.name.toLowerCase().includes(y.toLowerCase())){const e={table:"legacy_integration",value:le.Cb};o=[...o,e]}const s=[...n,...o].sort(((e,t)=>{var i,a;const n=null===(i=e.value.name)||void 0===i?void 0:i.toLowerCase(),o=null===(a=t.value.name)||void 0===a?void 0:a.toLowerCase();return n&&o?n<o?-1:n>o?1:0:0}));M({results:s,status:"ready"})})).catch((e=>M({status:"error"})))}),[y,h,d,f,v,g,l,p]);return o.createElement(Ne.Z,u()({},m,{renderOrigin:(e,t)=>o.createElement(z.Z,u()({},e,{ref:t,title:c,svg:We.R})),renderExtension:(e,t)=>{const a=g.device.isMobile?{menuType:X.og.Modal,right:n()(Le.DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:X.og.Popup,width:220,...e},s=g.device.isMobile?{menuType:X.og.Modal,topbarStyle:{height:0}}:{menuType:X.og.Popup,width:220,maxHeight:"16vh",...e},r=Boolean(p.canAdmin()&&(null==h?void 0:h.canRead()));return o.createElement(De.Z,u()({},a,{onClick:e=>{e.stopPropagation()}}),n()(Re.Z,{initialFocus:0,context:i,onAccept:()=>{x.sSR(g)},sections:[...r?[$e(y,S),""===y?Qe({searchResults:b,resultsMenuProps:s}):Xe({searchResults:b,resultsMenuProps:s})]:[],et(r,le.Cb)]}))},onFocus:a.onFocus,focused:m.focused,openOnFocus:!0,ref:t}))}));function $e(e,t){return{key:"search connections section",render:e=>o.createElement(K.Z,u()({},e,{isInput:!0})),actions:[yt(e,t)]}}function Qe(e){const{searchResults:t,resultsMenuProps:i}=e,a=new Set;return{key:"search initial connections section",render:e=>o.createElement(Je,u()({},e,{resultsMenuProps:i})),actions:[..."ready"===t.status?t.results.map((e=>"bot"===e.table?(e.value.integration_id&&a.add(e.value.integration_id),bt(e.value)):Ft(e)?(0,Te.F6)()&&!(0,Te.SG)()?void 0:wt(e.value):Mt(e.value))).filter(ne.$K):"loading"===t.status?[vt()]:[St()]]}}function Je(e){window.__c={n:"IntegrationSearchResultsSection"};const{resultsMenuProps:t,...i}=e,a=(0,o.useRef)(null),n=(0,o.useCallback)((()=>{var e;const t=null===(e=a.current)||void 0===e||null===(e=e.querySelector('[role="menuitem"]'))||void 0===e?void 0:e.clientHeight,i=window.innerHeight<600?3:7;a.current&&t&&(a.current.style.maxHeight=i*t+.5*t+"px")}),[]);return(0,o.useEffect)((()=>(n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)})),[n]),o.createElement(De.Z,u()({},t,{innerRef:a}),o.createElement(K.Z,u()({},i,{isInput:!0,topBorder:!1,style:{margin:0,paddingTop:0,paddingBottom:0}})))}function Xe(e){const{searchResults:t,resultsMenuProps:i}=e;let a=[];return a="error"===t.status?[St()]:"loading"===t.status?[vt()]:"ready"===t.status&&t.results.length>0?t.results.map((e=>e.table===ae.cZ?bt(e.value):Ft(e)?(0,Te.F6)()&&!(0,Te.SG)()?void 0:wt(e.value):Mt(e.value))).filter(ne.$K):[{key:"connections search error",displayName:it.default.formatMessage(ht.connectionNoSearchResultsLabel),analyticsName:ht.connectionNoSearchResultsLabel.defaultMessage,searchName:ht.connectionNoSearchResultsLabel.defaultMessage,closeParentMenu:!1,validators:[tt.Gg,tt.J5,ft],render:e=>n()(Se.Z,{title:it.default.formatMessage(ht.connectionNoSearchResultsLabel)}),action:()=>{}}],{key:"connections search results",render:e=>o.createElement(Je,u()({},e,{resultsMenuProps:i})),actions:a}}function et(e,t){const i=e,a=!(0,Te.F6)()||(0,Te.SG)();return{key:"manage connections section",render:t=>o.createElement(K.Z,u()({},t,{style:{marginTop:e?6:0}})),actions:[...!i&&a?[wt(t)]:[],{key:"manage connections",displayName:it.default.formatMessage(ht.manageConnectionsLabel),analyticsName:ht.manageConnectionsLabel.defaultMessage,searchName:ht.manageConnectionsLabel.defaultMessage,closeParentMenu:!1,validators:[tt.Gg,tt.J5,tt.ff(tt.tq)],render:e=>o.createElement(z.Z,u()({},e,{title:it.default.formatMessage(ht.manageConnectionsLabel),svg:se.H})),action:()=>{ot.r$({currentTab:"connected_apps",openedFrom:"topbar"})}}]}}var tt=i(19037),it=i(33929),at=i(76463),nt=i(47307),ot=i(91376),st=i(76464),rt=i(515),lt=i(95477),dt=i(91924),ct=i(84908),ut=i(15356),mt=i(9953);const pt=(0,d.defineMessages)({somethingWentWrong:{defaultMessage:"Something went wrong.",id:"slackActions.dialogError.loginWithSlack.errorMessage"},titleMessage:{defaultMessage:"Slack login",id:"slackActions.loginPopupModal.title"},removeIntegrationMessage:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.prompt",defaultMessage:"Are you sure you want to remove Slack integration?"},removeIntegrationConfirmationLabel:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.removeButton.label",defaultMessage:"Remove"}});const gt=async e=>{let{environment:t,blockId:i,intl:a}=e;x.McA(t),await async function(e){const{environment:t,blockId:i,intl:a}=e,n=(0,dt.eC)(t);let o=(0,rt.GD)(lt.default.domainBaseUrl,{blockId:i,authType:n,userId:t.currentUser.id});if(o=n.redirectToAuth?o:await(0,dt.HU)(t,o),t.device.isElectron)return void ct.openExternalUrl(o);const s=await ut.M(t,{width:530,height:530,url:o,titleMessage:pt.titleMessage});if(!s)return void nt.showErrorMessage(a.formatMessage(pt.somethingWentWrong));const r=(0,rt.Wj)({url:s,isMobile:t.device.isMobile,baseUrl:lt.default.domainBaseUrl,publicDomainName:lt.default.publicDomainName,protocol:lt.default.protocol,currentUrl:window.location.href});"slackAuthCallback"===r.name&&O.handleSlackAuthCallback({route:r,environment:t})}({environment:t,blockId:i,intl:a})},ht=(0,d.defineMessages)({connectionLoadingLabel:{id:"topbar.connectionsSection.connectionLoading.label",defaultMessage:"Connections loading…"},connectionSearchPlaceholderLabel:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",defaultMessage:"Search for connections..."},connectionSearchErrorLabel:{id:"topbar.connectionsSection.connectionSearchError.label",defaultMessage:"Something went wrong"},connectionNoSearchResultsLabel:{id:"topbar.connectionsSection.noSearchResults.label",defaultMessage:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",defaultMessage:"{name}"},slackEmptyLabel:{id:"topbar.connectionSection.slackEmpty.label",defaultMessage:"Slack"},slackConnectedLabel:{id:"topbar.connectionSection.slackConnected.label",defaultMessage:"Connected to Slack channel"},manageConnectionsLabel:{id:"topbar.connectionsSection.manageConnections.label",defaultMessage:"Manage connections"},addConnectionsLabel:{id:"topbar.connectionsSection.addConnections.label",defaultMessage:"Add connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",defaultMessage:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",defaultMessage:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",defaultMessage:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",defaultMessage:"{botName} will be removed from this page and all child pages. Continue?"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",defaultMessage:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",defaultMessage:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",defaultMessage:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",defaultMessage:"{connectionName}"},connectionBotConfirmlabel:{id:"topbar.connectionSection.connectBotConfirmation.label",defaultMessage:"{botName} will have access to this and all child pages. Continue?"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",defaultMessage:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"}}),ft=tt.ff(tt.xD([tt.tq,tt.ff(tt.xD([tt.zz,tt.J5]))]));function vt(){return{key:"connections loading",displayName:it.default.formatMessage(ht.connectionLoadingLabel),analyticsName:ht.connectionLoadingLabel.defaultMessage,searchName:ht.connectionLoadingLabel.defaultMessage,closeParentMenu:!1,validators:[tt.Gg,tt.J5,ft],render:e=>o.createElement(ye.Z,u()({},e,{icon:n()(ve.Z,{}),title:it.default.formatMessage(ht.connectionLoadingLabel)})),action:()=>{}}}function yt(e,t){return{key:"search connections input",analyticsName:ht.connectionSearchPlaceholderLabel.defaultMessage,displayName:it.default.formatMessage(ht.connectionSearchPlaceholderLabel),searchName:ht.connectionSearchPlaceholderLabel.defaultMessage,closeParentMenu:!1,validators:[tt.Gg,tt.J5,ft],render:()=>n()(fe.ZP,{value:e,onChange:e=>t(e.target.value),placeholder:it.default.formatMessage(ht.connectionSearchPlaceholderLabel),focus:!0}),action:()=>{}}}function St(){return{key:"connections search error",displayName:it.default.formatMessage(ht.connectionSearchErrorLabel),analyticsName:ht.connectionSearchErrorLabel.defaultMessage,searchName:ht.connectionSearchErrorLabel.defaultMessage,closeParentMenu:!1,validators:[tt.Gg,tt.J5,ft],render:e=>n()(Se.Z,{title:it.default.formatMessage(ht.connectionSearchErrorLabel)}),action:()=>{}}}function bt(e){const{id:t,name:i}=e,a=it.default.formatMessage(ht.connectionSearchResultLabel,{name:i});return{key:`${t}`,displayName:a,analyticsName:a,searchName:i,closeParentMenu:!1,validators:[tt.Gg,tt.J5,ft],render:(t,i)=>o.createElement(he,u()({},t,{bot:e,focused:t.focused,onClick:async()=>{await xt(i.blocks[0],i.environment,e)},ref:t.ref})),action:async t=>{await xt(t.blocks[0],t.environment,e)}}}function Mt(e){const{id:t,name:i,info:a}=e,n=it.default.formatMessage(ht.connectionLabel,{connectionName:i});return{key:`${t}`,displayName:n,analyticsName:n,searchName:i,closeParentMenu:!1,validators:[tt.Gg,tt.J5,ft,tt.ff(tt.tq)],render:e=>o.createElement(me.Z,u()({},e,{title:n,icon:o.createElement("img",{src:a.icon,style:{width:18,height:"auto"},ref:e.ref})})),action:async t=>{let{environment:i}=t;e.id!==le.T0&&await async function(e,t){const{id:i,name:a}=e,n=await nt.confirmUserAction({message:it.default.formatMessage(ht.connectionIntegrationConfirmlabel,{integrationName:a})}),o=(0,re.E)(i,a);n&&O.navigateToExternalURL({environment:t,url:o,targetSelf:!1})}(e,i)}}}function wt(e){const t=it.default.formatMessage(ht.slackEmptyLabel);return{key:"slack empty",displayName:t,analyticsName:ht.slackEmptyLabel.defaultMessage,searchName:t,closeParentMenu:!0,validators:[tt.Gg,tt.J5,tt.YP,tt.tJ,tt.OF,tt.ff(tt.Fx)],render:i=>n()(j.Z,{placement:j.Z.Placement.Left,render:a=>o.createElement(me.Z,u()({},(0,G.Z)(a,i),{title:t,icon:n()("img",{src:e.info.icon,style:{height:18}})})),renderTooltip:Ze}),action:e=>{var t;gt({environment:e.environment,blockId:null===(t=e.blocks)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id,intl:it.default.getIntl()})}}}function Ct(){const e=it.default.formatMessage(ht.slackConnectedLabel);return{key:"slack connected inherited",displayName:e,analyticsName:ht.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[tt.Gg,tt.J5,tt.ur,tt.ff(tt.Fx)],render:(e,t,i)=>o.createElement(Ae,u()({blockStore:t.blocks[0]},e)),action:e=>{}}}function _t(){const e=it.default.formatMessage(ht.slackConnectedLabel);return{key:"slack connected on block",displayName:e,analyticsName:ht.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[tt.Gg,tt.J5,tt.Rd,tt.ff(tt.Fx)],render:(e,t,i)=>o.createElement(Ee,u()({blockStore:t.blocks[0]},e)),action:e=>{const{slackIntegrationStore:t}=(0,Te.Jk)(e.blocks[0]);((e,t,i)=>{nt.showDialog({message:i.formatMessage(pt.removeIntegrationMessage),showCancel:!0,keepFocus:!0,items:[{label:i.formatMessage(pt.removeIntegrationConfirmationLabel),color:"red",onAccept:()=>{x.Uut(e),W.createAndCommit({userAction:"slackActions.handleRemoveSlackIntegration",environment:e,perform:e=>{mt.sW({store:t,data:{enabled:!1},transaction:e})}})}}]})})(e.environment,t,it.default.getIntl())}}}function kt(e){const t=it.default.formatMessage(ht.fromParentPageLabel);return{key:"from parent page",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[tt.Gg,tt.J5],action:()=>{},render:(t,i)=>{let{blocks:a}=i;const o=a[0],s=je.G.createChildStore(o,{table:de.iU,id:e.blockId});return n()(Zt,{parentBlockStore:s})}}}function Tt(e){const t=it.default.formatMessage(ht.capabilitiesLabel);return{key:"capabilities",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[tt.Gg,tt.J5],action:()=>{},render:()=>n()(we._,{role:e})}}function It(e,t){const i=it.default.formatMessage(ht.disconnectLabel);return{key:"disconnect integration",displayName:i,analyticsName:i,searchName:ht.disconnectLabel.defaultMessage,closeParentMenu:!1,validators:[tt.Gg,tt.J5],action:async i=>{let{blocks:a,environment:n}=i;const o=a[0];await async function(e,t,i,a){await nt.confirmUserAction({message:it.default.formatMessage(ht.disconnectConfirmationLabel,{botName:a})})&&at.RN({botId:i,store:e,environment:t})}(o,n,e,t)},render:e=>o.createElement(z.Z,u()({},e,{svg:oe,title:i,focused:!0}))}}function Pt(e){const t=it.default.formatMessage(ht.disconnectLabel),i=it.default.formatMessage(ht.restrictionLabel);return{key:"restrict page from permission model",displayName:i,analyticsName:i,searchName:ht.restrictionLabel.defaultMessage,closeParentMenu:!1,validators:[tt.Gg,tt.J5],action:async t=>{let{blocks:i,environment:a}=t;const n=i[0];await async function(e,t,i){if(await nt.confirmUserAction({message:it.default.formatMessage(ht.restrictionConfirmationLabel),acceptLabel:it.default.formatMessage(ht.restrictionAcceptLabel)})){const a={type:"bot_permission",role:"none",bot_id:e};W.createAndCommit({userAction:"TopbarMoreConnections.restrictPagePermissions",environment:i,perform:e=>{st.Pk({environment:i,store:t,permissionItem:a,shouldInherit:!0,transaction:e})}})}}(e,n,a)},render:e=>o.createElement(z.Z,u()({},e,{svg:oe,title:t,focused:!0}))}}async function xt(e,t,i){await nt.confirmUserAction({message:it.default.formatMessage(ht.connectionBotConfirmlabel,{botName:i.name})})&&at.v2({botValue:i,store:e,environment:t})}function Zt(e){window.__c={n:"FromParentPageMenuItem"};const{parentBlockStore:t}=e,i=(0,r.VK)((()=>t.getIcon()),[t]),a=(0,r.VK)((()=>t.isEmptyPage()),[t]),c=(0,s.O7)(),m=(0,l.Fg)(),[g,h]=(0,o.useState)("transparent"),f=c.device.isMobile?{fontSize:14,paddingLeft:4}:{fontSize:12,paddingLeft:4};return o.createElement(Se.Z,u()({},e,{title:n()("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"}},void 0,n()(d.FormattedMessage,{id:"topbar.connectionSection.parentPage.label",defaultMessage:"From"}),n()("span",{style:{display:"flex",alignItems:"center",padding:2,borderRadius:2,marginLeft:2,cursor:"pointer",backgroundColor:g,color:m.regularTextColor,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onClick:()=>{O.navigateToBlock({environment:c,store:t,pageVisitSource:p.tY.LinkInPage})},onMouseEnter:()=>{h(m.selectLightGray[100])},onMouseLeave:()=>{h("transparent")},onMouseDown:()=>{h(m.selectLightGray[200])},onMouseUp:()=>{h(m.selectLightGray[100])}},void 0,n()(be.Z,{disabled:!0,icon:i,isEmptyPage:a,size:12,style:{margin:"0px 2px"}}),n()(Me.Z,{store:t}))),textWrapperStyle:f}))}function Ft(e){return"legacy_integration"===e.table&&e.value.id===le.Cb.id}var At=i(67669);function Et(e,t,i){const a=function(e){var t;const i=e.blocks[0],a=(0,At.YO)(i).filter((0,ne.AO)((e=>(0,ie.FB)(e.permissionItem)?{true:{...e,permissionItem:e.permissionItem}}:{false:e})));if(0===a.length)return{status:"no bots"};const n=new Map,o=null===(t=ue.default.state.currentSpaceStore)||void 0===t?void 0:t.id,s=a.map((e=>{let{from:t,permissionItem:a}=e;const s=je.t1.createChildStore(i,{table:ae.cZ,id:a.bot_id,spaceId:o});if("block"===t.table)return n.set(a.bot_id,t),s})).filter(ne.$K);if(s.every((e=>e.isReady()))){const t=s.filter((t=>t.isDefined()&&Boolean((0,Ge.Nq)(e.environment,t.getModel()))));if((0,qe.Fn)(e.environment)){const e=t.map((e=>e.getIntegrationId())),i=new Set(e),a=s.filter((e=>!(!e.isDefined()||i.has(e.getIntegrationId())||!Boolean((0,Ge.f_)(e.getModel()))||(i.add(e.getIntegrationId()),0))));t.push(...a)}return{status:"ready",botStores:t,botIdToSharedPageIds:n}}return{status:"loading"}}(e),{status:n}=a;if("no bots"===n||"loading"===n)return a;{const{botStores:e,botIdToSharedPageIds:n}=a;return{status:"ready",botActions:e.map((e=>{if(e.isDefined()){const a=e.getIntegrationId();a&&t.add(a);const s=n.get(e.id);if(s)return i.add(e.id),function(e){const{botStore:t,botPermissionSourcePage:i}=e,{id:a}=t,n=t.getName(),s=it.default.formatMessage(ht.connectionLabel,{connectionName:n});return{key:`${a}`,displayName:s,analyticsName:s,searchName:s,closeParentMenu:!1,validators:[tt.Gg,tt.J5],action:()=>{},render:(e,a,n)=>{const r=a.blocks[0].id===i.blockId;return o.createElement(Oe,u()({},e,{context:a,parent:n,isSharedDirectly:r,botStore:t,botPermissionSourcePage:i,originConnectionLabel:s}))}}}({botStore:e,botPermissionSourcePage:s})}})).filter(ne.$K)}}}function Bt(e){const t=new Set,i=new Set,a=Et(e,t,i),n=function(e,t){const i=it.default.formatMessage(ht.addConnectionsLabel);return{key:"add connections action",displayName:i,analyticsName:ht.addConnectionsLabel.defaultMessage,searchName:ht.addConnectionsLabel.defaultMessage,closeParentMenu:!1,validators:[tt.Gg,tt.J5,ft],action:()=>{},render:(a,n,s)=>o.createElement(Ye,u()({},a,{context:n,parent:s,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:i}))}}(t,i);if("no bots"===a.status)return{loadingAction:[],connectedActions:[],searchSubMenu:n};if("loading"===a.status)return{loadingAction:[vt()],connectedActions:[],searchSubMenu:n};{const{botActions:e}=a;return{loadingAction:[],connectedActions:e,searchSubMenu:n}}}function Rt(e){const{loadingAction:t,connectedActions:i,searchSubMenu:a}=Bt(e);return{key:"topbar connections",render:e=>o.createElement(K.Z,u()({},e,{topBorder:!0,title:n()(d.FormattedMessage,{id:"topbar.connectionSection.label",defaultMessage:"Connections"})})),actions:[...t,...[Ct(),_t()],...i,a]}}var Dt=i(64536),Lt=i(42115),Nt=i(28020),Ot=i(68821),Vt=i(4708),Ut=i(78316),Wt=i(12921),zt=i(21969),Kt=i(41984),Ht=i(24764),Gt=i(77080),qt=i(47593),jt=i(90848),Yt=i(30496),$t=i(11689),Qt=i(43339),Jt=i(92083),Xt=i(49386),ei=i(62967),ti=i(42784),ii=i(2295),ai=i(34658),ni=i(63923),oi=i(68714),si=i(5337),ri=i(17254);const li=(0,d.defineMessages)({customizePageLabel:{id:"action.customizePage.label",defaultMessage:"Customize page"},fontDefaultName:{id:"action.setPageFont.default.fuzzySearchKeywords",defaultMessage:"Font Default"},fontDefaultCaption:{id:"action.setPageFont.default.caption",defaultMessage:"Default"},fontDefaultTooltip:{id:"action.setPageFont.default.tooltip",defaultMessage:"The default sans-serif workhorse"},fontSerifName:{id:"action.setPageFont.serif.fuzzySearchKeywords",defaultMessage:"Font Serif"},fontSerifCaption:{id:"action.setPageFont.serif.caption",defaultMessage:"Serif"},fontSerifTooltip:{id:"action.setPageFont.serif.tooltip",defaultMessage:"Good for publishing"},fontMonoName:{id:"action.setPageFont.mono.fuzzySearchKeywords",defaultMessage:"Font Mono"},fontMonoCaption:{id:"action.setPageFont.mono.caption",defaultMessage:"Mono"},fontMonoTooltip:{id:"action.setPageFont.mono.tooltip",defaultMessage:"Good for drafting and notes"},fontSmallTextKeywords:{id:"action.fontSmallText.fuzzySearchKeywords",defaultMessage:"Font Small Text"},fontSmallTextLabel:{id:"action.fontSmallText.label",defaultMessage:"Small text"},fontStyleSection:{id:"action.section.fontStyle",defaultMessage:"Style"},fullWidthLabel:{id:"action.fullWidth.label",defaultMessage:"Full width"},lockPageName:{id:"action.lockPage.name",defaultMessage:"Lock page"},unlockPageName:{id:"action.unlockPageName.name",defaultMessage:"Unlock page"},openAIAssistant:{id:"action.openMobileAIAssistant.name",defaultMessage:"Open AI Assistant"},openinMacAppName:{id:"action.openinMacApp.name",defaultMessage:"Open in Mac app"},openinWindowsAppName:{id:"action.openinWindowsApp.name",defaultMessage:"Open in Windows app"},openiniOSAppName:{id:"action.openiniOSApp.name",defaultMessage:"Open in iOS app"},openinAndroidAppName:{id:"action.openinAndroidApp.name",defaultMessage:"Open in Android app"},pageUpdates:{id:"action.pageUpdates.title",defaultMessage:"Page updates"},pageHistoryName:{id:"action.pageHistory.name",defaultMessage:"Page history"},showDeletedPagesName:{id:"action.showDeletedPages.name",defaultMessage:"Show deleted pages"},importName:{id:"action.import.name",defaultMessage:"Import"},exportName:{id:"action.export.name",defaultMessage:"Export"},exportCaption:{id:"action.export.caption",defaultMessage:"PDF, HTML, Markdown"}});function di(e){return(0,ei.cN)({key:`font ${e.font||"default"}`,displayName:e.displayName,analyticsName:e.displayName.defaultMessage,validators:[tt.or([tt.ff(tt.YG),tt.f7]),tt.J5],render:(t,i,a)=>{const n=i.blocks[0].getFormat().page_font,s=e.font===n||!e.font&&!n;return o.createElement(Q,u()({},t,{isActive:s,font:e.font,tooltip:e.tooltip,style:e.style,caption:e.caption}))},closeParentMenu:!1,action:(t,i)=>{let{blocks:a,environment:n}=t;W.createAndCommit({userAction:"actionRegistry.createFontAction",environment:n,perform:t=>{R.FH({stores:a,update:{page_font:e.font},transaction:t}),x.G14(n,{type:e.font||"default"})}})}})}const ci=di({displayName:li.fontDefaultName,caption:o.createElement(d.FormattedMessage,li.fontDefaultCaption),font:void 0,tooltip:o.createElement(d.FormattedMessage,li.fontDefaultTooltip),style:{fontSize:24,fontFamily:P.Z.getCompositeFontFamily(m.SP).sans,position:"relative",top:-2}}),ui=di({displayName:li.fontSerifName,caption:o.createElement(d.FormattedMessage,li.fontSerifCaption),font:"serif",tooltip:o.createElement(d.FormattedMessage,li.fontSerifTooltip),style:{fontSize:25,fontFamily:P.Z.getCompositeFontFamily(m.SP).serif}}),mi=di({displayName:li.fontMonoName,caption:o.createElement(d.FormattedMessage,li.fontMonoCaption),font:"mono",tooltip:o.createElement(d.FormattedMessage,li.fontMonoTooltip),style:{fontSize:26,fontFamily:P.Z.getCompositeFontFamily(m.SP).mono,position:"relative",top:-3,letterSpacing:-1}}),pi=(0,ei.$J)({key:"font section",title:li.fontStyleSection,render:e=>o.createElement(te,e),actions:[ci,ui,mi]}),gi=(0,ei.wL)({key:"small text",displayName:li.fontSmallTextKeywords,label:it.default.formatMessage(li.fontSmallTextLabel),property:"page_small_text",validators:[tt.ff(tt.tq),tt.or([tt.ff(tt.YG),tt.f7]),tt.J5],afterAction:(e,t)=>x.DRv(t,{type:e?"small":"large"})}),hi=(0,ei.wL)({key:"full width",displayName:li.fullWidthLabel,label:it.default.formatMessage(li.fullWidthLabel),property:"page_full_width",validators:[tt.ff(tt.Mn),tt.ff(tt.YG),tt.J5],afterAction:(e,t)=>x.LDb(t,{type:e?"full_width":"default_width"})}),fi=(0,ei.$J)({key:"page style",render:e=>o.createElement(K.Z,e),actions:[gi,hi]}),vi=(0,ei.cN)({key:"customize page",displayName:li.customizePageLabel,analyticsName:li.customizePageLabel.defaultMessage,svg:f.F,validators:[tt.U_,tt.ff(tt.YG)],closeParentMenu:!0,render:e=>o.createElement(z.Z,u()({},e,{title:o.createElement(d.FormattedMessage,li.customizePageLabel),svg:f.F})),action:e=>{F.bA({originRect:e.originRect})}}),yi=(0,ei.cN)({key:"page lock",displayName:li.lockPageName,analyticsName:li.lockPageName.defaultMessage,svg:M.b,validators:[tt.ff(tt.YG),tt.J5,tt.ff(tt.p1)],closeParentMenu:!1,action:(e,t)=>{let{blocks:i,environment:a}=e;const n=i[0];L.bo({environment:a,store:n,lock:!0})}}),Si=(0,ei.cN)({key:"page unlock",displayName:li.unlockPageName,analyticsName:li.unlockPageName.defaultMessage,svg:k.U,validators:[tt.ff(tt.YG),tt.J5,tt.p1],closeParentMenu:!1,action:(e,t)=>{let{blocks:i,environment:a}=e;const n=i[0];L.bo({environment:a,store:n,lock:!1})}}),bi=(0,ei.cN)({key:"open ai assistant",displayName:li.openAIAssistant,analyticsName:li.openAIAssistant.defaultMessage,svg:_.t,validators:[tt.jl,tt.Fx,tt.Mn,e=>{let{environment:t}=e;return(0,Wt.jp)(t.device)},tt.QL("assistant-on-mobile")],closeParentMenu:!0,action:e=>{jt.Z.setState({...jt.Z.state,open:!0})}}),Mi=(0,ei.cs)({key:"copy link to block non-desktop",displayName:ei.RE.copyLinkNavigableTypeName,analyticsName:ei.RE.copyLinkNavigableTypeName.defaultMessage,svg:b.N,shortcuts:["copyCurrentPageLinkifiedBlockTitle"],validators:[tt.jl,tt.U7,tt.ff(tt.d)],closeParentMenu:!0,action:(e,t)=>{Z.Hs({...e,event:t})}}),wi=(0,ei.cs)({key:"duplicate",displayName:ei.RE.duplicateName,analyticsName:ei.RE.duplicateName.defaultMessage,svg:v.a,validators:[tt.DF,tt.J5,tt.KE,tt.xk,tt.ff(tt.P9(g.Ti.externalObjectInstancePage))],shortcuts:["duplicate"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const i=Nt.np();if(!i)return;const a=i.getParentCollectionStore();a&&U.M_(t)&&W.createAndCommit({userAction:"actionRegistry.duplicateToCollection",environment:t,perform:e=>{const[n,o]=A.Qi({environment:t,stores:[i],addCopyName:(0,Kt.Z)(i),transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!i.isInsideTemplate(),targetSpaceId:(0,I.C)(a.pointer.spaceId),baseUrl:lt.default.domainBaseUrl,publicDomainName:lt.default.publicDomainName,preferDuplicateLocation:"local",useCrdt:!1}),s=n[0];N.zw({childStore:s,parentStore:a,transaction:e}),i.isTemplate()&&D.R3({parent:a.getTemplatePagesStore(),append:s,transaction:e}),O.navigateToBlock({environment:t,store:s,pageVisitSource:p.tY.Duplicate})}})}}),Ci=(0,ei.cs)({key:"duplicate",displayName:ei.RE.duplicateName,analyticsName:ei.RE.duplicateName.defaultMessage,svg:v.a,validators:[tt.U7,tt.KE,tt.ff(tt.xk),...ei.kv],shortcuts:["duplicate"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i}=e;if(!U.M_(i))return;const a=t[0].getParentStore();"block"!==(null==a?void 0:a.table)&&"team"!==(null==a?void 0:a.table)&&"space"!==(null==a?void 0:a.table)||B.VE({environment:i,store:t[0],newParent:a})}}),_i=(0,ei.cN)({key:"open in mac app",displayName:li.openinMacAppName,analyticsName:li.openinMacAppName.defaultMessage,svg:w.h,validators:[tt.U7,tt.ff(tt.tY),tt.ff(tt.tq),tt.V5],closeParentMenu:!0,action:(e,t)=>{let{blocks:i,environment:a}=e;const n=(0,ke.ZP)({store:i[0],fullyQualified:!1,pageVisitSource:p.tY.AppRedirect});O.openInNativeApp({url:(0,zt.W)(n),environment:a})}}),ki=(0,ei.cN)({key:"open in windows app",displayName:li.openinWindowsAppName,analyticsName:li.openinWindowsAppName.defaultMessage,svg:w.h,validators:[tt.U7,tt.ff(tt.tY),tt.ff(tt.tq),tt.ED],closeParentMenu:!0,action:(e,t)=>{let{blocks:i,environment:a}=e;const n=(0,ke.ZP)({store:i[0],fullyQualified:!1,pageVisitSource:p.tY.AppRedirect});O.openInNativeApp({url:(0,zt.W)(n),environment:a})}}),Ti=(0,ei.cN)({key:"open in ios app",displayName:li.openiniOSAppName,analyticsName:li.openiniOSAppName.defaultMessage,svg:w.h,validators:[tt.U7,tt.ff(tt.tY),tt.gn],closeParentMenu:!0,action:(e,t)=>{let{blocks:i,environment:a}=e;const n=(0,ke.ZP)({store:i[0],fullyQualified:!1,pageVisitSource:p.tY.AppRedirect});O.openInNativeApp({url:n,environment:a})}}),Ii=(0,ei.cN)({key:"open in android app",displayName:li.openinAndroidAppName,analyticsName:li.openinAndroidAppName.defaultMessage,svg:w.h,validators:[tt.U7,tt.ff(tt.tY),tt.Dt],closeParentMenu:!0,action:(e,t)=>{let{blocks:i,environment:a}=e;const n=(0,ke.ZP)({store:i[0],fullyQualified:!1,pageVisitSource:p.tY.AppRedirect});O.openInNativeApp({url:n,environment:a})}}),Pi=(0,ei.cN)({key:"open page updates",analyticsName:"Open page updates",displayName:li.pageUpdates,svg:h.t,validators:[tt.RF,tt.tq],closeParentMenu:!0,action:()=>{Yt.Z.setState({open:!0})}}),xi=(0,ei.cN)({key:"action page history",displayName:li.pageHistoryName,analyticsName:li.pageHistoryName.defaultMessage,svg:T.w,validators:[tt.or([tt._T,tt.k5]),tt.Gg,tt.DF,tt.jl],closeParentMenu:!0,action:e=>{let{environment:t,blocks:i}=e;return V.jN({environment:t,blockStore:i[0],from:"topbar"})},render:(e,t)=>{let{onClick:i,key:a,...s}=e,{environment:r}=t;return n()(Lt.Z,{requireUpgradeToTier:!1,analyticsName:"history_modal",onClick:i,alwaysAllowClick:!0,render:(e,t)=>o.createElement(z.Z,u()({},(0,G.Z)(s,e),{title:it.default.formatMessage(li.pageHistoryName),svg:T.w,dontShrinkRight:!0,right:t})),renderUpgradeTooltip:()=>{}},a)}}),Zi=(0,ei.cN)({key:"open page trash",displayName:li.showDeletedPagesName,analyticsName:li.showDeletedPagesName.defaultMessage,svg:C.u,validators:[tt.DF,tt.J5,tt.oY,tt.jl,tt.ff(tt.nJ)],closeParentMenu:!0,action:()=>{$t.Z.setState({open:!0}),Qt.Z.setState({...Qt.Z.state,currentTab:"in_current_page"})}}),Fi=(0,ei.$J)({key:"pageHistory",render:e=>o.createElement(K.Z,e),actions:[Pi,ri.Yw,xi,Dt.pageAnalyticsMenu,Zi,ni.Op]}),Ai=(0,ei.cN)({key:"open import modal",displayName:li.importName,analyticsName:li.importName.defaultMessage,svg:S.l,validators:[tt.Gg,tt.YZ,tt.J5,tt.ff(tt.YG),tt.ff(tt.P9(g.Ti.externalObjectInstancePage))],closeParentMenu:!0,action:e=>{let{blocks:t}=e;(0,Ot.c)()?Jt.Z.setState({...Jt.Z.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}):qt.Z.setState({open:!0,pageStore:t[0]})}}),Ei=(0,ei.cN)({key:"export block",displayName:li.exportName,analyticsName:li.exportName.defaultMessage,validators:[tt.Gg,tt.jl,tt.Kb],closeParentMenu:!0,render:e=>o.createElement(z.Z,u()({},e,{svg:y.R,title:o.createElement(d.FormattedMessage,li.exportName),caption:o.createElement(d.FormattedMessage,li.exportCaption)})),action:e=>{let{blocks:t,environment:i}=e;const a=t[0];if(!a.isDefined())return;let n=!0;const o=(0,Ut.fm)(t[0]);if(o){const e=null==o?void 0:o.collectionStore();null!=e&&e.isPageTreeCollection()&&(n=!1)}E.q$({environment:i,root:{id:a.id,table:"block",spaceId:a.getSpaceId()},isCollectionViewExportTypeSupported:n})}});var Bi=i(18514),Ri=i(13713),Di=i(83182),Li=i(939),Ni=i.n(Li),Oi=i(49427);class Vi extends J.Z{constructor(){super(...arguments),this.wordCount=0}willMount(){this.wordCount=this.getWordCount()}renderComponent(){return n()(o.Fragment,{},void 0,this.wordCount)}getWordCount(){const e=Oi.Z.find((e=>e.props.store===this.props.store));if(e){const t=e.getContentWrapEl();if(t)return Ni()(t.innerText)}return 0}}Vi.displayName="PageWordCount";const Ui=Vi;function Wi(e){window.__c={n:"TopbarMoreMenu"};const{blockStore:t,onClickOriginRect:i,handleAccept:a,handleDismiss:c}=e,u=(0,s.O7)(),m=(0,s.Fy)(),p=(0,r.VK)((()=>({environment:u,blocks:[t],originRect:i,publicEditMode:void 0})),[u,t,i]),g=(0,r.VK)((()=>(0,Vt.gE)()),[]),f=(0,r.VK)((()=>function(e){const{environment:t,context:i,showGetNotified:a}=e,n=i.blocks[0],s=n.getFollowSettingsKey(),r=(0,Vt.m7)(),l=Gt.default.checkGate("property_updates_notifications"),c=(0,d.defineMessages)({getNotifiedFor:{defaultMessage:"Get notified",id:"topbar.moreButton.getNotified"}}),u=l?Ht.CA({followSettingsKey:s,environment:t,blockStore:n,from:"more_menu",useCopyChanges:r}):Ht.Zk({followSettingsKey:s,environment:t,blockStore:n,from:"more_menu"});return[pi,fi,ti.ww,(0,ei.$J)({key:"topbar move or turn into actions",render:e=>o.createElement(K.Z,e),actions:[si.bV,ii.A]}),(0,ei.$J)({key:"topbar database edit lock",render:e=>o.createElement(K.Z,e),actions:[Xt.cO,Xt.YZ,Xt.Bj,Xt.BC,Xt.fK,Xt.MR,si.R$]}),(0,ei.$J)({key:"topbar page edit lock",render:e=>o.createElement(K.Z,e),actions:[vi,yi,Si]}),(0,ei.$J)({key:"topbar primary actions",render:e=>o.createElement(K.Z,e),actions:[bi,...a?[(0,ei.MV)({key:"get notified for",displayName:c.getNotifiedFor,analyticsName:c.getNotifiedFor.defaultMessage,svg:h.t,width:300,initialFocus:u.findIndex((e=>e.isSelectedOption))??0,validators:[],subActions:()=>[(0,ei.$J)({key:"get notified for",render:e=>o.createElement(K.Z,e),actions:u.map((e=>{let{action:t}=e;return t}))})]})]:[],ri.aU,Mi,wi,Ci,ni.DN,ai.Jw,_i,ki,Ti,Ii,oi.l,Xt.GZ]}),Fi,(0,ei.$J)({key:"topbar import actions",render:e=>o.createElement(K.Z,e),actions:[Ai,Ei,Xt.mS]}),Rt(i)]}({environment:u,context:p,showGetNotified:"variant_1"===g})),[u,p,g]),v=(0,r.VK)((()=>!t.isCollectionView()&&t.canEdit()&&t.hasContent()),[t]),y=(0,r.VK)((()=>t.canEdit()),[t]),S=(0,r.VK)((()=>t.canEdit()&&t.isCollectionView()),[t]),b=(0,l.yK)((e=>({caption:{color:e.lightTextColor}})),[]),M=m.isMobile?{menuType:X.og.Modal,title:n()(d.FormattedMessage,{defaultMessage:"Actions",id:"topbarMoreButton.mobileActionsMenu.title"}),right:n()(Le.DoneMenuText,{}),onClickRight:c}:{menuType:X.og.Popup,maxHeight:"80vh"};return o.createElement(De.Z,M,n()(Re.Z,{sections:f,onAccept:a,context:p}),n()(K.Z,{topBorder:!0},void 0,v&&n()(ye.Z,{caption:n()("span",{style:b.caption},void 0,n()(d.FormattedMessage,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:n()(Ui,{store:t})}}))}),y&&n()(Ri.Z,{store:t,isPageMoreButton:!0})),S&&n()(zi,{}))}function zi(){return n()(K.Z,{topBorder:!0},void 0,n()(Di.Z,{title:n()(d.FormattedMessage,{defaultMessage:"Learn about databases",id:"topbar.moreButton.collectionHelpButton"}),href:(0,Bi.UY)("guides.database"),analyticsFrom:"topbar_more_button"}))}},457:(e,t,i)=>{i.d(t,{Z:()=>u});var a=i(23174),n=i.n(a),o=(i(67294),i(13991)),s=i(24405),r=i(8848),l=i(1799),d=i(97880),c=i(82990);function u(e){window.__c={n:"MFABackupCodes"};const{type:t}=e,i=(0,s.yK)((e=>({pane:{display:"flex",whiteSpace:"pre-line",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:4,backgroundColor:r.FN.light.yellow[50],paddingTop:8,paddingBottom:8,marginBottom:10},textCode:{fontFamily:c.Z.getHeaderFontFamily({pageFont:"mono",locale:o.SP}),fontWeight:c.Z.fontWeight.regular,fontSize:c.Z.fontSize.UIRegular.desktop,font:c.Z.baseFontFamily.emailMono,color:r.FN.light.brown[500],textAlign:"center"},redactedBackupCode:{textDecoration:"line-through",opacity:.2}})),[]);return n()("div",{style:i.pane},void 0,n()("div",{style:i.textCode},void 0,"status"===t?e.status.map(((e,t)=>n()("div",{style:e.hasBeenUsed?i.redactedBackupCode:{}},t,l.A))):"unencryptedCodes"===t?e.backupCodes.map(l.K).join("\n"):(0,d.t1)(t)))}},56839:(e,t,i)=>{i.d(t,{R$:()=>h,ZP:()=>f});var a=i(23174),n=i.n(a),o=i(67294),s=i(24405),r=i(72126),l=i(82990),d=i(5366),c=i(18514),u=i(68785),m=i(88175),p=i(73602),g=i(11898);const h=6;function f(e){let{isLoading:t,phoneNumber:i,errorMessage:a,resentStatus:l,resentAt:f,onDismiss:y,onBack:S,onVerifyCode:b,onResendLink:M}=e;window.__c={n:"MFAPromptSMSVerification"};const w=(0,s.yK)(v,[]),[C,_]=(0,o.useState)([]),k=n()(d.FormattedMessage,{id:"profileSettings.mfa.sms.verifyCodeTitle",defaultMessage:"Verify phone number"}),T=o.createElement(o.Fragment,null,n()(d.FormattedMessage,{id:"profileSettings.mfa.sms.verifyCodeHeader.default",defaultMessage:"Enter the code sent to {phoneNumber} to complete setup.",values:{phoneNumber:i}})," ",o.createElement(p.y,{resentAt:f,resentStatus:l,onResendLink:M})),I={text:t?n()(u.Z,{}):n()(d.FormattedMessage,{id:"profileSettings.mfa.sms.verifyCodeButton",defaultMessage:"Verify code"}),onClick:()=>b(C.join("")),disabled:t||"resending"===l||(0,r.oA)(C).length!==h},P=[{text:n()(d.FormattedMessage,{id:"profileSettings.mfa.sms.verifyCodeNeedHelp",defaultMessage:"Need help?"}),href:(0,c.UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}];return n()(m.Z,{title:k,header:T,errorMessage:a,primaryAction:I,secondaryActions:P,onDismiss:y,onBack:S,disableBackButton:t},void 0,n()("div",{style:w.body},void 0,n()(g.ZP,{numInputs:h,format:"settings",disabled:!1,value:C,onChange:_,autoFocus:!0,isValidKey:g.rN})))}function v(e){return(0,s.EM)({body:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",marginTop:16,marginBottom:4},textCode:{fontWeight:l.Z.fontWeight.medium,fontSize:l.Z.fontSize.UIRegular.desktop,lineHeight:1.2,color:e.darkTextColor,marginTop:32,marginBottom:32,textAlign:"center"}})}},18469:(e,t,i)=>{i.d(t,{R$:()=>g,ZP:()=>h});var a=i(23174),n=i.n(a),o=i(67294),s=i(24405),r=i(72126),l=i(82990),d=i(5366),c=i(18514),u=i(68785),m=i(88175),p=i(11898);const g=6;function h(e){let{isLoading:t,errorMessage:i,onDismiss:a,onBack:l,onVerifyCode:h}=e;window.__c={n:"MFAPromptTOTPVerification"};const v=(0,s.yK)(f,[]),[y,S]=(0,o.useState)([]),b=n()(d.FormattedMessage,{id:"profileSettings.mfa.totp.verifyCodeTitle",defaultMessage:"Verify code"}),M=n()(d.FormattedMessage,{id:"profileSettings.mfa.totp.verifyCodeHeader",defaultMessage:"Enter the one-time code from authenticator to complete setup."}),w={text:t?n()(u.Z,{}):n()(d.FormattedMessage,{id:"profileSettings.mfa.totp.verifyCodeButton",defaultMessage:"Verify code"}),onClick:()=>h(y.join("")),disabled:t||(0,r.oA)(y).length!==g},C=[{text:n()(d.FormattedMessage,{id:"profileSettings.mfa.totp.needHelp",defaultMessage:"Need help?"}),href:(0,c.UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}];return n()(m.Z,{title:b,header:M,errorMessage:i,primaryAction:w,secondaryActions:C,onDismiss:a,onBack:l,disableBackButton:t},void 0,n()("div",{style:v.body},void 0,n()(p.ZP,{numInputs:g,format:"settings",disabled:t,value:y,onChange:e=>{S(e)},autoFocus:!0,isValidKey:p.rN})))}function f(e){return(0,s.EM)({body:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",marginTop:16,marginBottom:4},textCode:{fontWeight:l.Z.fontWeight.medium,fontSize:l.Z.fontSize.UIRegular.desktop,lineHeight:1.2,color:e.darkTextColor,marginTop:32,marginBottom:32,textAlign:"center"}})}},32357:(e,t,i)=>{i.d(t,{Z:()=>F});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(49085),l=i(79362),d=i(89036),c=i(40462),u=i(54855),m=i(5366),p=i(97880),g=i(50906),h=i(43250),f=i(79817),v=i(45094),y=i(38755),S=i(8323),b=i(95697),M=i(85834),w=i(8053),C=i(42922),_=i(64921),k=i(60458),T=i(63296),I=i(31278),P=i(64369),x=i(22193);class Z extends s.Z{constructor(){super(...arguments),this.storeTypes={contextualInviteStore:M.ZP,isSpaceCardSelected:r.default.createClass(!1)},this.containerStyle={padding:12,display:"flex",flexDirection:"column",gap:16},this.iconStyle={width:20,height:20,fill:this.theme.lightIconColor}}didMount(){g.$24(this.environment,f.Oh(this.environment,this.stores.contextualInviteStore)),(0,b.$)(this.environment)&&this.stores.contextualInviteStore.setState({...this.stores.contextualInviteStore.state,selection:M.uq.page_guest})}renderComponent(){var e;const{contextualInviteStore:t}=this.stores,i=(null===(e=t.state)||void 0===e?void 0:e.shareModalGuestMemberConfirmationExpGroup)||"control",a=t.getGuestEmails();if(!a.length)return null;const s=(0,b.$)(this.environment);return o.createElement(o.Fragment,null,n()("div",{className:h.B8p,style:{...this.containerStyle,paddingTop:16,paddingBottom:16,paddingLeft:18,paddingRight:18}},void 0,n()("div",{},void 0,n()("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},void 0,n()("div",{},void 0,t.state.inviteStage===M.TG.share_workspace?this.renderShareWorkspace({useZeroTeamsExperience:s,shareModalGuestMemberConfirmationExpGroup:i,guestEmails:a}):o.createElement(o.Fragment,null,n()(P.Z,{style:{fontWeight:600,marginBottom:4}},void 0,n()(m.FormattedMessage,{id:"contextualInvite.requestToWorkspace.title",defaultMessage:"Request to add to workspace"})),n()(P.Z,{isMultiline:!0,isSmall:!0},void 0,n()(m.FormattedMessage,{id:"contextualInvite.requestToWorkspace.subtitle",defaultMessage:"Do you want to send a request to your workspace admin to add {emailCount, plural, one {this person} other {these people}} to the workspace?",values:{emailCount:a.length}}))),n()("div",{style:{display:"flex",flexWrap:"wrap",marginTop:16,marginBottom:16}},void 0,this.renderEmailTokensSubtitle(a,i)))),"control"===i?this.renderSpaceCard({showSpaceCardToggle:s}):this.renderGuestMemberCards({shareModalGuestMemberConfirmationExpGroup:i}),n()("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:18}},void 0,n()(T.Z,{isLarge:!0,style:{marginRight:10},onClick:async()=>{var e,a;"control"===i?this.selectPageGuestOption():(t.setState({...t.state,selection:M.uq.closed}),null===(e=(a=t.state).resetShareMenuFn)||void 0===e||e.call(a));await this.handleInviteClick()}},void 0,n()(m.FormattedMessage,"control"===i?{id:"contextualInvite.skip.button",defaultMessage:"Skip for now"}:{id:"contextualInvite.cancel.button",defaultMessage:"Cancel"})),n()(C.Z,{isLarge:!0,disabled:s&&!this.stores.isSpaceCardSelected.state||!s&&this.stores.contextualInviteStore.state.selection===M.uq.closed,onClick:async()=>{"control"===i&&(t.state.inviteStage===M.TG.share_workspace&&this.selectWorkspaceMemberOption(),t.state.inviteStage===M.TG.request_workspace&&this.selectRequestWorkspaceMemberOption()),await this.handleInviteClick()}},void 0,t.state.inviteStage===M.TG.share_workspace?n()(m.FormattedMessage,"control"===i?{id:"ContextualInvite.addToWorkspace.button",defaultMessage:"Add to workspace"}:{id:"ContextualInvite.addToWorkspace.button.variant",defaultMessage:"Invite"}):n()(m.FormattedMessage,{id:"ContextualInvite.sendRequest.button",defaultMessage:"Send request"}))))))}renderGuestMemberCards(e){let{shareModalGuestMemberConfirmationExpGroup:t}=e;return"v1"!==t&&"v2"!==t?null:n()("div",{style:{display:"flex",gap:8,flexDirection:"column"}},void 0,n()("div",{},void 0,this.renderGuestMemberSelectionCard({title:n()(m.FormattedMessage,"v1"===t?{id:"contextualInvite.addToWorkspace.guest.title.v1",defaultMessage:"Guest"}:{id:"contextualInvite.addToWorkspace.guest.title.v2",defaultMessage:"Invite to Page"}),subtitle:n()(m.FormattedMessage,{id:"contextualInvite.addToWorkspace.guest.subtitle",defaultMessage:"Can access only this page"}),icon:(0,u.a)({fill:l.Lr[this.theme.mode].yellow,width:22,height:24}),selected:this.stores.contextualInviteStore.state.selection===M.uq.page_guest,onClick:()=>{this.selectPageGuestOption()}})),n()("div",{},void 0,this.renderGuestMemberSelectionCard({title:n()(m.FormattedMessage,"v1"===t?{id:"contextualInvite.addToWorkspace.member.title.v1",defaultMessage:"Member"}:{id:"contextualInvite.addToWorkspace.member.title.v2",defaultMessage:"Invite to Workspace"}),subtitle:n()(m.FormattedMessage,{id:"contextualInvite.addToWorkspace.member.subtitle",defaultMessage:"Can access all pages in {spaceName}. This person will be billed as a member.",values:{spaceName:this.getSpaceName()}}),icon:(0,c.o)({fill:l.Lr[this.theme.mode].green,width:22,height:24}),selected:this.stores.contextualInviteStore.state.selection===M.uq.workspace_member,onClick:()=>{this.selectWorkspaceMemberOption()}})))}renderGuestMemberSelectionCard(e){let{title:t,subtitle:i,icon:a,selected:o,onClick:s}=e;return n()(_.Z,{style:{display:"flex",borderWidth:1,borderStyle:"solid",borderColor:this.theme.regularDividerColor,borderRadius:8,padding:12,justifyContent:"space-between",alignItems:"center"},onClick:s},void 0,n()("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},void 0,n()("div",{style:{paddingRight:12}},void 0,a),n()("div",{},void 0,n()(P.Z,{},void 0,t),n()(P.Z,{isSmall:!0,style:{width:350,whiteSpace:"pre-wrap"}},void 0,i))),n()(k.Z,{round:!0,checked:o,fill:this.theme.contentBackground,size:20,onClick:s}))}renderShareWorkspace(e){let{useZeroTeamsExperience:t,shareModalGuestMemberConfirmationExpGroup:i,guestEmails:a}=e;return o.createElement(o.Fragment,null,n()(P.Z,{style:{fontWeight:600,marginBottom:4}},void 0,"control"===i?n()(m.FormattedMessage,{id:"contextualInvite.addToWorkspace.title",defaultMessage:"Add to workspace"}):void 0,"v1"===i?n()(m.FormattedMessage,{id:"contextualInvite.addToWorkspace.title.v1",defaultMessage:"Invite as guest or member?"}):void 0,"v2"===i?n()(m.FormattedMessage,{id:"contextualInvite.addToWorkspace.title.v2",defaultMessage:"Invite to page or workspace?"}):void 0),"control"===i?o.createElement(o.Fragment,null,n()(P.Z,{isMultiline:!0,isSmall:!0,style:{marginBottom:6}},void 0,n()(m.FormattedMessage,{id:"contextualInvite.addToWorkspace.subtitle",defaultMessage:"Do you want to add {emailCount, plural,\n\t\t\t\t\t\t\t\t\tone {this person}\n\t\t\t\t\t\t\t\t\tother {these people}\n\t\t\t\t\t\t\t\t} to the workspace in addition to the page? {isPaid, select,\n\t\t\t\t\t\t\t\t\ttrue {This is a billable event.}\n\t\t\t\t\t\t\t\t\tother {}\n\t\t\t\t\t\t\t\t}",values:{emailCount:a.length,isPaid:!(0,S.QM)()}})),n()(P.Z,{isMultiline:!0,isSmall:!0},void 0,n()(m.FormattedMessage,t?{id:"contextualInvite.addToWorkspace.zeroTeams.subtitle.blockLimit",defaultMessage:"Adding them as a member will auto-create a teamspace{isFreeTier, select,\n\t\t\t\t\t\t\t\t\tfree { and apply the 1,000 block limit to your workspace.}\n\t\t\t\t\t\t\t\t\tother {}\n\t\t\t\t\t\t\t\t}",values:{isFreeTier:(0,S.QM)()?"free":"paid"}}:{id:"contextualInvite.addToWorkspace.zeroTeams.subtitle",defaultMessage:"{isFreeTier, select,\n\t\t\t\t\t\t\t\t\tfree {This action will apply the 1,000 block limit to your workspace.}\n\t\t\t\t\t\t\t\t\tother {}\n\t\t\t\t\t\t\t\t}",values:{emailCount:a.length,isFreeTier:(0,S.QM)()?"free":"paid"}}))):void 0)}renderEmailTokensSubtitle(e,t){const{spaceStore:i}=this.props;return e.map((e=>n()(x.Z,{store:i,tokenType:"control"!==t?"member":"guest",showRemoveButton:!1,target:{source:"email",type:"newUser",value:{email:e},spaceRole:"not_in_space"}},e)))}renderSpaceCard(e){let{showSpaceCardToggle:t}=e;const{spaceStore:i}=this.props,a=(0,y.Wd)(this.environment,i),o=this.getSpaceName(),s=i.getPublicSpaceData();let r;s&&"none"!==s.role&&(r=n()(m.FormattedMessage,{id:"contextualInvite.spaceCard.subtitle",defaultMessage:"{numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} member} other {{numberOfWorkspaceMembers} members}} · {planType}",values:{numberOfWorkspaceMembers:this.props.intl.formatNumber(s.memberCount),planType:this.props.intl.formatMessage((0,v.em)(s.subscriptionTier))}}));const l=a||o?n()(I.Z,{disabled:!0,icon:a,isEmptyPage:!1,title:o,size:30,style:{color:this.theme.regularTextColor,marginRight:12}}):(0,d.v)(this.iconStyle);return n()(_.Z,{style:{display:"flex",borderWidth:1,borderStyle:"solid",borderColor:this.theme.regularDividerColor,borderRadius:5,padding:12,justifyContent:"space-between",alignItems:"center"},disabled:!t,onClick:()=>this.stores.isSpaceCardSelected.setState(!this.stores.isSpaceCardSelected.state)},void 0,n()("div",{style:{display:"flex"}},void 0,l,n()("div",{},void 0,n()(P.Z,{},void 0,o),n()(P.Z,{isSmall:!0},void 0,r))),t&&n()(k.Z,{round:!0,checked:this.stores.isSpaceCardSelected.state,fill:this.theme.contentBackground,size:20,onClick:()=>this.stores.isSpaceCardSelected.setState(!this.stores.isSpaceCardSelected.state)}))}getSpaceName(){const{spaceStore:e}=this.props;return(0,y.rn)(this.environment,e)}selectWorkspaceMemberOption(){this.stores.contextualInviteStore.setState({...this.stores.contextualInviteStore.state,selection:M.uq.workspace_member})}selectRequestWorkspaceMemberOption(){this.stores.contextualInviteStore.setState({...this.stores.contextualInviteStore.state,selection:M.uq.request_workspace_member})}selectPageGuestOption(){this.stores.contextualInviteStore.setState({...this.stores.contextualInviteStore.state,selection:M.uq.page_guest})}async handleInviteClick(){const{contextualInviteStore:e}=this.stores,{spaceStore:t,blockStore:i,intl:a}=this.props,{shareModalGuestMemberConfirmationExpGroup:n,callbackAsyncFn:o}=e.state;if(e.state.inviteStage===M.TG.closed||e.state.inviteStage===M.TG.share_page)return;const{selection:s}=e.state;switch(s){case M.uq.request_workspace_member:g.cir(this.environment,{...f.Oh(this.environment,e),from:"share_menu"}),await f.fC({environment:this.environment,spaceStore:t,originId:i.id,originType:"share_menu",reasonMessage:void 0,contextualInviteStore:e,intl:a});break;case M.uq.workspace_member:if(g.E0y(this.environment,f.Oh(this.environment,e)),(0,b.$)(this.environment)){e.setState({...e.state,inviteStage:M.TG.closed});if(!(await w.HD({environment:this.environment,flowId:e.state.flowId??"",trackCreateTeamComplete:!1})))return}"control"!==n&&await(null==o?void 0:o()),await f.j_({environment:this.environment,spaceStore:t,contextualInviteStore:e,from:"page_contextual_invite",intl:a});break;case M.uq.page_guest:"control"!==n&&await(null==o?void 0:o()),e.reset();break;case M.uq.closed:e.reset();break;default:(0,p.t1)(s)}}}Z.displayName="ContextualInvite";const F=(0,m.injectIntl)(Z)},22193:(e,t,i)=>{i.d(t,{Z:()=>B});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(86628),c=i(24405),u=i(8848),m=i(84619),p=i(33728),g=i(3338),h=i(40462),f=i(84169),v=i(26774),y=i(97880),S=i(82990),b=i(7928),M=i(5366),w=i(45101),C=i(16639),_=i(41168),k=i(53353),T=i(26781),I=i(4023),P=i(80444),x=i(55899),Z=i(78291),F=i(26388),A=i(45653),E=i(85567);const B=function(e){window.__c={n:"InviteTargetToken"};const{store:t,target:i}=e,a=(0,l.Fy)(),o=(0,M.useIntl)(),B=(0,c.yK)((()=>({verifiedDomain:{margin:2,backgroundColor:"rgba(83, 168, 63, 0.1)"},disabled:{margin:2,backgroundColor:"rgba(211, 79, 67, 0.1)",border:"dashed #D9655B 1px",paddingLeft:5},normal:{margin:2},guest:{margin:2,backgroundColor:"rgba(218, 163, 64, 0.2)"},tokenContent:{display:"flex",alignItems:"center",maxWidth:"100%"},tokenSpan:{maxWidth:"100%",marginRight:4},tokenText:{marginLeft:4,...S.Z.textOverflowStyle}})),[]),R=(0,d.VK)((()=>{const{data:e}=Z.default.state,t=e?_.CM(e):[],i={};return t.forEach((e=>{i[e.userId]=e})),i}),[]),D=(0,d.VK)((()=>{const e=P.default.state.currentSpaceStore;return new Set(null==e?void 0:e.getEmailDomains())}),[]),L=(0,k.Z)(t),N=(0,T.i)(t),O=(0,d.VK)((()=>{if(e.tokenType)return e.tokenType;if("group"===i.type)return"group";if("existingUser"===i.type&&!Boolean(i.spaceRole)){const e=R[i.value.id];i.spaceRole=e?e.role:"not_in_space"}if(!(0,w.OA)(i))return"member";const t=(0,p.Gd)(i.value.email);return t&&D.has(t)?"verifiedDomain":L.isStoreInTeam&&!L.teamAllowsGuests?"teamGuestDisabled":!L.isStoreInTeam&&!L.spaceAllowsGuests||L.isStoreInTeam&&!L.teamAllowsGuests&&!L.spaceAllowsGuests?"spaceGuestDisabled":"guest"}),[e.tokenType,i,R,D,L]),V=(0,d.VK)((()=>{switch(O){case"member":case"group":return B.normal;case"guest":return B.guest;case"verifiedDomain":return B.verifiedDomain;case"spaceGuestDisabled":case"teamGuestDisabled":case"teamGroupOwner":return B.disabled;default:(0,y.t1)(O)}}),[O,B]);function U(){const e=(0,f.m)({height:16,width:16,color:"#D34F43"});switch(O){case"member":return(0,x.fZ)(i)?s()(A.Z,{userValue:i.value,size:16}):(0,x.KU)(i)?s()(A.Z,{size:16,avatar:i.value}):s()(A.Z,{size:16});case"guest":return(0,h.o)({height:16,width:16,color:"#DAA340"});case"verifiedDomain":return(0,g.p)({height:16,width:16,color:"#53A83F"});case"group":return s()("div",{style:{height:16,width:16,backgroundColor:u.ZP.whiteWithAlpha(.8),borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"}},void 0,(0,v.O)({height:12,width:12,color:u.ZP.mediumTextColor}));case"spaceGuestDisabled":case"teamGuestDisabled":case"teamGroupOwner":return e;default:(0,y.t1)(O)}}function W(t){const a=U();let n=function(){switch(i.type){case"newUser":return i.value.email.trim();case"existingUser":return(0,b.Nz)(o,i.value);case"group":return(0,C.kF)({intl:o,group:i.value});default:(0,y.t1)(i)}}(),r=B.tokenText;return e.onlyShowTokenType&&(["guest","teamGuestDisabled","spaceGuestDisabled"].includes(t)?(n="Guest",r={...r,color:"#DAA340"}):(n="Member",r={...r,color:"#53A83F"})),s()("div",{style:B.tokenContent},void 0,a,s()("div",{style:r},void 0,n))}function z(t){var i;t.stopPropagation(),null===(i=e.onClickRemove)||void 0===i||i.call(e)}const K="newUser"===i.type?i.value.email:i.value.id,H="group"!==i.type?i.value.email:void 0;return s()(F.Z,{placement:I.u.Top,renderTooltip:()=>function(e){const{tokenType:t,target:i,email:a}=e;return"guest"===t?s()(M.FormattedMessage,{defaultMessage:"{email} will be invited as a guest",id:"inviteTargetToken.guest.tooltip",values:{email:a}}):"spaceGuestDisabled"===t||"teamGuestDisabled"===t?N:"teamGroupOwner"===t&&"group"===i.type?s()(M.FormattedMessage,{defaultMessage:"Groups cannot be added as team owners.",id:"inviteTargetToken.groupTeamOwner.tooltip"}):"verifiedDomain"===t&&"group"!==i.type?r.createElement(r.Fragment,null,s()(M.FormattedMessage,{defaultMessage:"{email}{br}will automatically be added to the workspace{br}since @{domain} is a verified domain.",id:"inviteTargetToken.verifiedDomain.tooltip",values:{email:i.value.email,br:s()("br",{}),domain:(0,p.Gd)(i.value.email)}})):"group"===i.type?i.value.name:a}({tokenType:O,email:H,target:i}),render:t=>r.createElement("span",n()({style:B.tokenSpan},t),s()(E.Z,{isSingle:!1,format:a.isMobile?m.l.Large:m.l.Medium,showRemoveButton:e.showRemoveButton,onClickRemove:z,disabledFeedback:!0,value:W(O),style:V,shouldWrap:!1}))},K)}},76472:(e,t,i)=>{i.d(t,{Z:()=>V});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(83355),d=i(15145),c=i(8848),u=i(72126),m=i(27006),p=i(21202),g=i(29369),h=i(97880),f=i(82990),v=i(5366),y=i(47307),S=i(84210),b=i(41168),M=i(95697),w=i(31075),C=i(61766),_=i(57559),k=i(48690),T=i(78291),I=i(35817),P=i(64921),x=i(84076),Z=i(31278),F=i(76798),A=i(26388),E=i(64369),B=i(7567),R=i(86628),D=i(24405);function L(e){window.__c={n:"NameAndIconWrap"};const{store:t}=e,i=(0,R.VK)((()=>t.getIcon()),[t]),a=(0,D.yK)((()=>({container:{whiteSpace:"nowrap",fontWeight:f.Z.fontWeight.bold},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle"},recordTitle:{display:"inline"}})),[]);return s()("span",{style:a.container},void 0,i&&s()(Z.Z,{disabled:!0,icon:i,isEmptyPage:!1,size:12,style:a.recordIcon}),s()(F.Z,{store:t,style:a.recordTitle}))}const N=function(e){const{store:t}=e;return s()(v.FormattedMessage,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:s()(L,{store:t})}})};class O extends l.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:C.Z},this.permissionItemStore=void 0,this.handleRoleSelect=async e=>{if(this.isDisplayOnlyPermissionItem(this.props.permissionItem))return;const t=this.props.permissionItem,i=u.d9(t);i.role=e;const a=this.props.currentBlockStore.isTopLevel();if(a&&m.ix(i)){const{data:e}=T.default.state,n=e?b.su(e):1;if(!(0,M.bq)()&&m.YX(t.role)&&!m.YX(i.role)&&n>1){if(!(await y.confirmUserAction({message:s()("span",{},void 0,s()(v.FormattedMessage,{defaultMessage:"Are you sure you want to make this page private? <semibold>Only you will be able to access it.</semibold>",values:{semibold:e=>s()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,e)},id:"blockPermissionsSettings.confirmationDialog.private.message"})),acceptLabel:s()(v.FormattedMessage,{defaultMessage:"Move to Private",id:"blockPermissionsSettings.confirmationDialog.privateButton.label"})})))return}else if(!(0,M.bq)()&&a&&!m.YX(t.role)&&m.YX(i.role)){if(!(await y.confirmUserAction({message:s()("span",{},void 0,s()(v.FormattedMessage,{defaultMessage:"Are you sure you want to share this page with the workspace? <semibold>It will be accessible by all {memberCount} members.</semibold>",id:"blockPermissionsSettings.confirmationDialog.workspace.message",values:{semibold:e=>s()("span",{style:{fontWeight:f.Z.fontWeight.semibold}},void 0,e),memberCount:n}})),acceptLabel:s()(v.FormattedMessage,{defaultMessage:"Move to workspace",id:"blockPermissionsSettings.confirmationDialog.workspaceButton.label"})})))return}}await(0,w.i)({oldPermissionItem:t,newPermissionItem:i,wasInherited:this.isInherited(),environment:this.environment,store:this.props.currentBlockStore,sudoModeStore:this.props.sudoModeStore,location:this.props.location,fromPermissionWrapper:this.props.fromPermissionWrapper})},this.handleUserItemClick=()=>{this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!0})},this.getPermissionItemStore=()=>{const{from:e,currentBlockStore:t}=this.props,i=e.table;return i===p.iU?_.G.createChildStore(t,{table:p.iU,id:e.blockId}):i===g.e0?_.zX.createChildStore(t,{table:g.e0,id:e.teamId}):void(0,h.t1)(i)}}willMountOrUpdate(){this.permissionItemStore=this.getPermissionItemStore()}renderComponent(){const{device:e}=this.environment,t=this.props.onClick?this.props.onClick:this.handleUserItemClick,i=this.isDisabled(),a=this.renderTooltip();return s()(A.Z,{delayThreshold:0,renderTooltip:()=>a,textWrap:!0,disableTooltip:!Boolean(a),style:{maxWidth:240},render:a=>r.createElement(P.Z,n()({disabled:i,mobileFeedback:e.isMobile,ignoreLocalHoverState:this.props.ignoreLocalHoverState,style:{...i?{cursor:"not-allowed"}:{}},onClick:t},a),this.renderMenuItem()),placement:A.Z.Placement.Left})}renderMenuItem(){const{device:e}=this.environment,{showInherited:t,permissionItem:i}=this.props,a=this.isUserItem(),n=this.isInherited();return s()("div",{className:"notranslate",style:this.getMenuItemStyle()},void 0,s()("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,marginRight:e.isMobile?12:10,...this.props.iconStyle}},void 0,this.props.icon),s()("div",{style:{marginRight:"auto",minWidth:0}},void 0,s()("div",{style:{display:"flex",flexDirection:"row"}},void 0,s()(E.Z,{style:{...!a&&{fontWeight:400}}},void 0,this.props.title),this.props.tag&&s()("div",{style:{marginLeft:4}},void 0,this.props.tag)),this.props.subtitle&&s()(E.Z,{isSmall:!0},void 0,this.props.subtitle),t&&n&&this.renderInheritedRecordTitle()),s()("div",{style:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:8}},void 0,this.props.permissionRoleSelect?this.props.permissionRoleSelect:!this.isDisplayOnlyPermissionItem(i)&&s()(B.ZP,{role:this.role,table:p.iU,blockType:this.props.currentBlockStore.getType(),type:i.type,disabled:this.isDisabled(),isUserPermission:this.permissionItemIsUserItem(i),onChange:this.handleRoleSelect,onUpgradeButtonClick:this.props.onUpgradeButtonClick,upgradeButtonName:this.props.upgradeButtonName,buttonPopupStore:this.stores.buttonPopupStore,buttonStyle:{marginRight:-8,color:this.theme.mediumTextColor,fontSize:e.isMobile?14:12},showPermissionOverrideWarning:n,isRemovableOverride:this.props.isRemovableOverride})))}renderTooltip(){return this.isInherited()?!this.isTeamOuterItem()&&this.permissionItemStore?s()(N,{store:this.permissionItemStore}):null:this.props.nonInheritedTooltip}renderInheritedRecordTitle(){const e=this.permissionItemStore||this.getPermissionItemStore(),t=e.table===p.iU?(0,S.ZP)({store:e,fullyQualified:!1,pageVisitSource:d.tY.LinkInPage}):void 0,i=e.table===g.e0?()=>{e.table===g.e0&&I.RF({environment:this.environment,teamId:e.id,tab:k.a.Members,from:"permission_item"})}:void 0,{device:a}=this.environment,n=e.getIcon(),o="team"!==e.table&&e.isEmptyPage();return s()(E.Z,{isSmall:!0,style:{lineHeight:1.4}},void 0,a.isMobile?s()(v.FormattedMessage,{defaultMessage:"Based on {linkBoxWithPageTitle}",id:"pagePermissionItem.inheritedRecordPermissions.setting",values:{linkBoxWithPageTitle:s()(x.Z,{disabled:a.isMobile,underline:!a.isMobile,inline:!0,href:t,onClick:i},void 0,s()(F.Z,{store:e,style:{display:"inline"}}))}}):s()(v.FormattedMessage,{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting",values:{linkBoxWithPageTitle:s()(x.Z,{disabled:a.isMobile,underline:!1,inline:!0,href:t,onClick:i,innerStyle:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${c.ZP.mediumTextColor}`}},void 0,s()(Z.Z,{disabled:!0,style:{marginRight:4},icon:n,size:14,isEmptyPage:o}),s()(F.Z,{store:e,style:{display:"inline",fontWeight:f.Z.fontWeight.semibold}}))}}))}permissionItemIsUserItem(e){const t=this.environment.currentUser.id;return"user_permission"===e.type&&e.user_id===t}isUserItem(){return"user_permission"===this.props.permissionItem.type}isTeamOuterItem(){return"team_overview_permission"===this.props.permissionItem.type}get role(){const{permissionItem:e,currentBlockStore:t}=this.props;if(this.isDisplayOnlyPermissionItem(e))return"none";if("content_only_editor"===e.role&&this.isInherited()){var i,a;const n=t.getParentCollectionStore(),o=null==n?void 0:n.getParentBlockStore();return o&&o.table===(null===(i=this.permissionItemStore)||void 0===i?void 0:i.table)&&o.id===(null===(a=this.permissionItemStore)||void 0===a?void 0:a.id)?e.role:"read_and_write"}return e.role}isDisabled(){return"hidden_permission"===this.props.permissionItem.type||!this.isTeamOuterItem()&&!this.props.currentBlockStore.canAdmin()}isInherited(){var e;return(null===(e=this.permissionItemStore)||void 0===e?void 0:e.id)!==this.props.currentBlockStore.id}isDisplayOnlyPermissionItem(e){return"team_overview_permission"===e.type||"hidden_permission"===e.type}getMenuItemStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",alignItems:"center",minHeight:this.props.isCompact?44:52,paddingTop:8,paddingBottom:8,paddingLeft:e.getSafePaddingLeftCSS(14),paddingRight:e.getSafePaddingRightCSS(14)}}}O.displayName="PermissionItem",O.iconSize=32;const V=O},17856:(e,t,i)=>{i.r(t),i.d(t,{OfflineMessage:()=>xn,default:()=>Zn});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(86628),c=i(24405),u=i(5366),m=i(43250),p=i(87279),g=i(18514),h=i(72126),f=i(26825),v=i(27006),y=i(21202),S=i(15047),b=i(29369),M=i(98165),w=i(67669),C=i(80444),_=i(57559);function k(e){const{store:t}=e;if(t.getParentTable()===S.bx)return!1;const i=(0,M.Om)(t),a=i?(0,f.Wo)((0,M.fJ)(i)):[],n=t.getPermissionItems(),o={};for(const s of a)o[(0,f.OC)(s)]=s;for(const s of n){const e=s.role,t=o[(0,f.OC)(s)];if(t){if((0,v.iC)(e)&&(0,v.iC)(t.role)&&(0,f.xO)(e,t.role))return!0;if(v.KF(t)&&!v.KF(s))return!0}else if((0,v.ix)(s)||(0,v.ZQ)(s)||(0,v.RI)(s))return!0}return!1}function T(e){const{store:t}=e,i=(0,M.uJ)(t)[1];return{parentStore:i,canAccessParent:i&&i.canRead()}}function I(e){const{mostPermissivePermissions:t,store:i,ancestorTeamId:a,type:n}=e;if(!a)return;const o=t.find((e=>{let{permissionItem:t}=e;return t.type===n&&t.team_id===a}));if(o)return o;const s=t.find((e=>{let{permissionItem:t}=e;return v.Le(t)}));return"explicit_team_guest_permission"!==n||s?{permissionItem:{type:n,role:"none",team_id:a},from:(null==s?void 0:s.from)??{table:y.iU,blockId:i.id}}:void 0}function P(e){const{spaceStore:t,store:i}=e,a=(0,w.YO)(i);let n=[];t&&(n=t.getPermissionGroups());const o=M.VP(i),s=function(e){let{mostPermissivePermissions:t,store:i}=e;return t.find((e=>{let{permissionItem:t}=e;return v.$D(t)}))||{permissionItem:{type:"public_permission",role:"none"},from:{table:y.iU,blockId:i.id}}}({mostPermissivePermissions:a,store:i}),r=function(e){let{mostPermissivePermissions:t,store:i,teamStore:a}=e;const n=t.find((e=>{let{permissionItem:t}=e;return v.ix(t)}));if(n)return n;const o=t.find((e=>v.Le(e.permissionItem)));return{permissionItem:{type:"space_permission",role:"none"},from:null!=o&&o.from||!a||"none"!==a.getSpacePermissionRole()?(null==o?void 0:o.from)??{table:y.iU,blockId:i.id}:{table:b.e0,teamId:a.id}}}({mostPermissivePermissions:a,store:i,teamStore:o}),l=I({mostPermissivePermissions:a,store:i,ancestorTeamId:null==o?void 0:o.id,type:"explicit_team_guest_permission"}),d=I({mostPermissivePermissions:a,store:i,ancestorTeamId:null==o?void 0:o.id,type:"explicit_team_permission"}),c=I({mostPermissivePermissions:a,store:i,ancestorTeamId:null==o?void 0:o.id,type:"explicit_team_owner_permission"});let u=a.filter((e=>{let{permissionItem:t}=e;return v.hV(t)}));u=h.MR(u,(e=>{if(t){return t.getPermissionGroups().findIndex((t=>t.id===e.permissionItem.group_id))}return e.permissionItem.group_id}));let m=a.filter((e=>{let{permissionItem:t}=e;return(v.zU(t)||v.LW(t))&&t.team_id!==(null==o?void 0:o.id)}));const p=new Map;m.forEach(((e,t)=>{let{permissionItem:i}=e;p.has(i.team_id)||p.set(i.team_id,t)})),m=h.MR(m,[e=>{let{permissionItem:t}=e;return p.get(t.team_id)||0},e=>{let{permissionItem:t}=e;return"explicit_team_owner_permission"===t.type?0:1}]);const g=a.filter((e=>{let{permissionItem:t}=e;return v.jg(t)})),f=Boolean(null==o?void 0:o.isDefined()),S="none"!==r.permissionItem.role,C=S||f||g.length>1||g.length&&!v.zz(g[0].permissionItem.role)||u.length||v.YX(r.permissionItem.role);return{showRestrictedPermissionBanner:a.some((e=>v.Le(e.permissionItem)&&e.from.table===y.iU&&e.from.blockId===i.id)),showTeamPermission:f,showSpacePermission:S,mostPermissivePublicItem:s,mostPermissiveAncestorTeamOwnerItem:c,mostPermissiveAncestorTeamMemberItem:d,mostPermissiveAncestorTeamGuestItem:l,mostPermissiveSpaceItem:r,pagePermissionUIModel:{showUserPermissions:C,mostPermissiveGroupPermissions:u,mostPermissiveTeamPermissions:m,mostPermissiveUserPermissions:g,spacePermissionGroups:n},permissionItemsCount:(C?g.length:0)+m.length+u.length+(S?1:0)+(f?1:0)}}var x=i(88632),Z=i(85834),F=i(97238),A=i(52878),E=i(1743),B=i(56940),R=i(78140),D=i(40721),L=i(64369),N=i(46247),O=i(32357),V=i(97880),U=i(55899),W=i(41892),z=i(8848),K=i(80721),H=i(91315),G=i(64275),q=i(45238);const j=(0,q.I)("globe3",{viewBox:"0 0 15 15",svg:s()("path",{d:"M8.052 12.458c.196 0 .44-.114.731-.342a6.52 6.52 0 00.916-.882c.315-.364.609-.752.882-1.162a8.03 8.03 0 00.67-1.19c.173-.377.26-.694.26-.95 0-.19-.082-.405-.246-.642a3.52 3.52 0 00-.63-.69 3.984 3.984 0 00-.792-.547c-.27-.146-.513-.219-.732-.219a.93.93 0 00-.43.123c-.155.078-.308.157-.458.24a.842.842 0 01-.383.115c-.078 0-.182-.038-.315-.116a3.409 3.409 0 01-.758-.608c-.096-.11-.144-.194-.144-.253 0-.041.03-.084.089-.13a.296.296 0 01.178-.075c.059 0 .166.055.32.164.16.105.33.21.507.314.178.1.332.15.465.15.291 0 .526-.088.704-.266.177-.178.266-.42.266-.724 0-.187-.082-.4-.246-.636.192-.1.408-.219.65-.356.246-.14.492-.298.738-.471.246-.178.47-.372.67-.581.205-.21.36-.429.465-.657l-.663-.341c-.087.21-.235.412-.445.608a5 5 0 01-.717.54c-.265.169-.53.321-.793.458a61.02 61.02 0 00-.69.362.332.332 0 00-.172.199c-.027.082-.004.173.069.273.14.196.241.344.3.444a.47.47 0 01.096.246c0 .05-.016.092-.048.123a.182.182 0 01-.123.042c-.073 0-.191-.05-.355-.15a9.923 9.923 0 00-.527-.315c-.182-.11-.34-.164-.471-.164a.889.889 0 00-.472.143 1.38 1.38 0 00-.383.362.747.747 0 00-.15.438c0 .155.068.33.205.526.141.196.317.385.526.568.21.182.424.332.643.45.223.115.417.172.58.172.128 0 .279-.039.452-.116.173-.082.337-.164.492-.247.155-.082.265-.123.328-.123.11 0 .256.055.438.164.187.105.374.237.56.397.187.155.345.308.472.458.132.146.198.262.198.349 0 .155-.075.385-.225.69-.15.3-.342.627-.575.978-.232.35-.476.688-.731 1.011-.255.324-.492.59-.71.8-.22.205-.386.308-.5.308a.393.393 0 01-.226-.082c-.072-.06-.109-.117-.109-.171a.54.54 0 01.014-.116 5.696 5.696 0 00.192-.623c.04-.145.058-.303.054-.471-.005-.228-.103-.438-.294-.63a7.264 7.264 0 00-.882-.71 4.55 4.55 0 00-.219-.15l-.218-.164c-.196-.15-.294-.301-.294-.452 0-.082.03-.21.089-.382.068-.242.102-.415.102-.52a.703.703 0 00-.123-.41 1.948 1.948 0 00-.376-.397.747.747 0 01-.061-.054.188.188 0 00-.055-.048l-1.087-.97c-.442-.397-.743-.748-.902-1.054-.16-.31-.215-.603-.164-.881.054-.278.175-.57.362-.875l-.718-.144c-.205.324-.33.668-.376 1.032-.046.365.03.752.226 1.162.196.41.556.848 1.08 1.313l1.08.957c.123.105.214.184.273.24.064.054.098.104.103.15a1.235 1.235 0 01-.103.341c-.059.15-.089.33-.089.54 0 .401.196.748.588 1.04.392.296.709.533.95.71.247.174.37.297.37.37a1.26 1.26 0 01-.13.587c-.087.187-.13.4-.13.636 0 .16.055.312.164.458.11.146.248.267.417.363.169.095.337.143.506.143zm-.267 1.668c.966 0 1.875-.185 2.728-.554a7.22 7.22 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.137 7.137 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53A6.805 6.805 0 007.778.003a6.77 6.77 0 00-2.727.554 7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.094a5.692 5.692 0 01-2.304-.472 6.034 6.034 0 01-1.9-1.285 6.217 6.217 0 01-1.292-1.907 5.765 5.765 0 01-.465-2.304c0-.815.155-1.583.465-2.303a6.133 6.133 0 011.292-1.9 6.036 6.036 0 011.9-1.286 5.676 5.676 0 012.297-.471 5.7 5.7 0 012.304.471c.72.31 1.356.738 1.907 1.285.552.547.982 1.18 1.292 1.9.315.72.472 1.489.472 2.304 0 .816-.157 1.584-.472 2.304a6.06 6.06 0 01-3.192 3.192 5.693 5.693 0 01-2.304.472z"})});var Y=i(43876),$=i(82990),Q=i(91309);var J=i(51077),X=i(73063),ee=i(66957),te=i(22421);function ie(e){let{inviteTargetsStore:t,mostPermissivePublicItem:i}=e;window.__c={n:"ShareMenuHeader"};const{display:a,source:n}=(0,d.VK)((()=>{const{display:e}=F.ZP.state;if(e===F.wV.Invite){const{source:t}=F.ZP.state;return{display:e,source:t}}return{display:e,source:void 0}}),[]);switch(a){case F.wV.MainShareMenu:case F.wV.Publish:return s()(ne,{mostPermissivePublicItem:i});case F.wV.Invite:if("notion"===n)return s()(se,{inviteTargetsStore:t});if("slack"===n)return s()(re,{});throw(0,V.t1)(n);default:(0,V.t1)(a)}}const ae=[F.XF.Share,F.XF.Publish];function ne(e){let{mostPermissivePublicItem:t}=e;window.__c={n:"ShareMenuTabs"};const i=(0,l.O7)(),a=r.useRef(null),{isMobile:o}=i.device,m=(0,d.VK)((()=>F.ZP.state.tab),[]),p=(0,c.yK)((e=>({tabStyle:{color:e.lightTextColor,...o&&{width:"50%",textAlign:"center"}},selectedTabStyle:{fontWeight:$.Z.fontWeight.medium},tabTitleStyle:{color:"inherit"},style:o?{marginBottom:8,justifyContent:"space-between"}:{marginBottom:14}})),[o]),g=(0,c.yK)((()=>({publishTabContainer:{display:"flex",alignItems:"center"}})),[]),h=(0,r.useCallback)((e=>{const t=ae[e];t!==m&&(!function(e,t){Q.j(e,"share_menu_tab_click",t)}(i,{tab:t}),t===F.XF.Share&&F.ZP.setState({...F.ZP.state,display:F.wV.MainShareMenu,tab:F.XF.Share}),t===F.XF.Publish&&F.ZP.setState({...F.ZP.state,display:F.wV.Publish,tab:F.XF.Publish}))}),[m,i]),f="none"!==t.permissionItem.role,v=[r.createElement(r.Fragment,null,o?s()(u.FormattedMessage,{defaultMessage:"Permissions",id:"shareMenu.permissionsTab.title"},"permissions"):s()(u.FormattedMessage,{defaultMessage:"Share",id:"shareMenu.shareTab.title"},"share")),r.createElement("div",{key:"publishTab",ref:a,style:g.publishTabContainer},s()(u.FormattedMessage,{defaultMessage:"Publish",id:"shareMenu.publishTab.title"},"publish"),f&&oe.publishedCheckIcon({opacity:m===F.XF.Publish?1:.5}),s()(te.jG,{originRef:a}))];return r.createElement(ee.Z,n()({},p,{tabs:v,selectedIndex:ae.indexOf(m),onChange:h}))}const oe={[F.XF.Share]:(0,Y.s)({height:17,width:17,marginRight:4}),[F.XF.Publish]:j({height:15,width:15,marginRight:4}),publishedCheckIcon:e=>{let{opacity:t}=e;return(0,H.r)({color:z.ZP.blue,width:14,height:14,marginLeft:4.5,opacity:t})}};function se(e){let{inviteTargetsStore:t}=e;window.__c={n:"InviteFromNotionHeader"};const i=(0,c.yK)((()=>({container:{display:"flex",margin:"0 12px 6px",height:48}})),[]),a=(0,r.useCallback)((()=>{t.reset(),F.ZP.setState({...F.ZP.state,display:F.wV.MainShareMenu,tab:F.XF.Share})}),[t]);return s()("div",{style:i.container},void 0,s()(le,{onClick:a}))}function re(){window.__c={n:"InviteFromSlackHeader"};const e=(0,u.useIntl)(),t=(0,c.yK)((()=>({container:{display:"flex",justifyContent:"space-between",margin:"0 12px",height:48,alignItems:"center"},titleLabel:{display:"flex",fontSize:12,alignItems:"center",fontWeight:$.Z.fontWeight.semibold}})),[]),i=(0,r.useCallback)((()=>{F.ZP.setState({...F.ZP.state,tab:F.XF.Share,display:F.wV.Invite,source:F.T5.Notion,focus:F.Sw.Search,emailMessage:""})}),[]),a=r.createElement(r.Fragment,null,s()(J.Z,{type:"image_url",imageURL:W.Z.images.externalIntegrations.slackIconPng,size:18,imageStyle:{marginLeft:4,marginRight:4}}),s()(u.FormattedMessage,{defaultMessage:"Slack",id:"shareMenu.slackIntegrationName.label"}));return s()("div",{style:t.container},void 0,s()(L.Z,{style:t.titleLabel},void 0,s()(u.FormattedMessage,{id:"shareMenu.addFromSlack.label",defaultMessage:"Add people from {integrationNameWithLogo}",values:{integrationNameWithLogo:a}})),s()(X.Z,{ariaLabel:e.formatMessage({id:"shareMenuHeader.goBackToInviteFromNotionMenu.iconButton",defaultMessage:"Close slack integration and go back to the main invite flow."}),icon:G.D,style:{borderRadius:"100%"},onClick:i}))}function le(e){window.__c={n:"BackButton"};const{onClick:t}=e,i=(0,u.useIntl)(),a=(0,c.yK)((()=>({topContainer:{display:"flex",alignItems:"center",width:"max-content"},backButtonPressedStyle:{backgroundColor:"transparent"},iconButton:{marginRight:6,height:24,width:24},arrowIcon:{height:16,width:16,strokeWidth:$.Z.fontWeight.semibold},sendInviteLabel:{fontWeight:$.Z.fontWeight.medium}})),[]);return s()("div",{style:a.topContainer},void 0,s()(X.Z,{icon:K.W,iconStyle:a.arrowIcon,style:a.iconButton,onClick:t,ariaLabel:i.formatMessage({id:"shareMenu.backButton.iconButton",defaultMessage:"Go back to main share menu."})}),s()(L.Z,{style:a.sendInviteLabel},void 0,s()(u.FormattedMessage,{id:"shareMenu.sendInvite.label",defaultMessage:"Send invite"})))}function de(e){const{store:t}=e;return(0,d.VK)((()=>{const e=C.default.state.currentSpaceStore,i=(0,M.VP)(t);return i?{isPublicAccessDisabled:Boolean(i.getDisablePublicAccess()),disabledBy:"team"}:{isPublicAccessDisabled:Boolean(null==e?void 0:e.getDisablePublicAccess()),disabledBy:"space"}}),[t])}var ce=i(31075),ue=i(42922);function me(e){window.__c={n:"PublishToWeb"};const{store:t,mostPermissivePublicItem:i,permissionItemArgs:a}=e,{permissionItem:n,from:o}=i,{sudoModeStore:m,location:p}=a,g=(0,l.O7)(),h=(0,d.VK)((()=>t.canAdmin()),[t]),{isPublicAccessDisabled:f}=de({store:t}),v=!h||f,S=(0,c.yK)((e=>({container:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",flexDirection:"column",padding:32,textAlign:"center",cursor:v?"not-allowed":""},icon:{height:30,width:30,marginBottom:10,fill:e.mediumIconColor},title:{fontWeight:$.Z.fontWeight.semibold,fontSize:14,marginBottom:6},caption:{marginLeft:26,marginRight:26,marginBottom:20},button:{display:"flex",width:"100%",padding:16,cursor:v?"not-allowed":"pointer"}})),[v]),b=(0,d.VK)((()=>{var e;return null===(e=C.default.state.currentSpaceStore)||void 0===e?void 0:e.getDisableMoveToSpace()}),[]),M=o.table===y.iU?o.blockId:o.teamId,w=(0,r.useCallback)((()=>{const e=!b&&n.allow_duplicate;(0,ce.i)({oldPermissionItem:n,newPermissionItem:{...n,role:"reader",allow_duplicate:e},wasInherited:M!==t.id,environment:g,store:t,sudoModeStore:m,location:p})}),[g,M,p,b,n,t,m]);return s()("div",{style:S.container},void 0,j(S.icon),s()("div",{style:S.title},void 0,s()(u.FormattedMessage,{defaultMessage:"Publish to web",id:"publishTab.publishToWeb.title"})),s()(L.Z,{isMultiline:!0,isSecondaryColor:!0,style:S.caption},void 0,s()(pe,{store:t})),s()(ue.Z,{style:S.button,disabled:v,onClick:w},void 0,s()(u.FormattedMessage,{defaultMessage:"Publish to web",id:"publishTab.publishToWeb.button"})))}function pe(e){let{store:t}=e;window.__c={n:"PublishToWebMessage"};const{isPublicAccessDisabled:i,disabledBy:a}=de({store:t}),n=(0,d.VK)((()=>t.canAdmin()),[t]);return s()(u.FormattedMessage,i?"team"===a?{defaultMessage:"Publishing to web is disabled for this page via teamspace settings.",id:"publishTab.publishToWeb.disabledByTeamspace.caption"}:{defaultMessage:"Publishing to web is disabled for this page via workspace settings.",id:"publishTab.publishToWeb.disabledByWorkspace.caption"}:n?{defaultMessage:"Publish a static website of this page. You can allow others to view, duplicate, and remix.",id:"publishTab.publishToWeb.hasFullAccess.caption"}:{defaultMessage:"You must have full access to this page to publish to web.",id:"publishTab.publishToWeb.noFullAccess.caption"})}var ge=i(15145);const he=(0,q.I)("blueCircleDot",{viewBox:"0 0 16 16",svg:r.createElement(r.Fragment,null,s()("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2"},void 0,s()("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),s()("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})),s()("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"}))});var fe=i(75018),ve=i(84210),ye=i(81236),Se=i(63296),be=i(26388),Me=i(91376);function we(e){window.__c={n:"LearnAboutAutogeneratedDomainsCTA"};const t=(0,l.O7)(),{WindowSizeStore:i}=t,{safePaddingLeftCSS:a,safePaddingRightCSS:o}=(0,d.VK)((()=>({safePaddingLeftCSS:i.getSafePaddingLeftCSS(8),safePaddingRightCSS:i.getSafePaddingRightCSS(8)})),[i]),{isMobile:m}=(0,l.Fy)(),{spaceStore:p,canChangeSettings:g,publicSpaceData:h}=(0,d.VK)((()=>{const e=C.default.state.currentSpaceStore;return e?{spaceStore:e,canChangeSettings:e.canAdmin(),publicSpaceData:ye.Z.getPublicSpaceData(t,e.id)}:{}}),[t]),f=(0,c.yK)((t=>({container:{boxShadow:`0 -1px 0 ${t.regularDividerColor}`,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",padding:"8px 8px",paddingLeft:a,paddingRight:o,color:t.mediumTextColor,backgroundColor:t.inputBackground,...e.style}})),[e.style,a,o]);if(!p)return null;if(m)return null;if(!h)return null;return h.domainIsAutogenerated&&g?s()("span",{style:f.container},void 0,s()("div",{style:{display:"flex"}},void 0,r.createElement(L.Z,n()({isSmall:!0,isMobile:!1,isSecondaryColor:!0,style:{paddingRight:"4px"}},e.labelStyle),s()(u.FormattedMessage,{defaultMessage:"Set a domain for your public links in",id:"blockPermissionsSettings.learnAboutAutogeneratedDomains.setDomainForPublicLinks"})),s()("span",{style:{cursor:"pointer",userSelect:"none",WebkitUserSelect:"none",color:z.ZP.inherit},onClick:()=>{Me.r$({currentTab:"settings"})}},void 0,r.createElement(L.Z,n()({isSmall:!0,isMobile:!1,isSecondaryColor:!1,style:{textDecoration:"underline"}},e.labelStyle),s()(u.FormattedMessage,{defaultMessage:"Settings",id:"blockPermissionsSettings.learnAboutAutogeneratedDomains.openSettingsCTA"}))))):null}var Ce=i(42853),_e=i(23867),ke=i(50906),Te=i(14871),Ie=i(33929),Pe=i(41168),xe=i(5162),Ze=i(77080),Fe=i(64921),Ae=i(74194),Ee=i(89728),Be=i(24006),Re=i(60442),De=i(42115),Le=i(76472),Ne=i(13991),Oe=i(7057),Ve=i(63143),Ue=i(28020),We=i(61766),ze=i(31194),Ke=i(52275),He=i(31945),Ge=i(32163),qe=i(72495),je=i(93289),Ye=i(42782);function $e(e){window.__c={n:"PublicPermissionItemLinkExpirationMenu"};const t=(0,l.Fy)(),[,,i]=(0,d.AF)(void 0,We.Z),a=(0,c.Fg)(),o=(0,l.O7)(),g=(0,d.VK)((()=>(0,Pe.y$)(o)),[o]),{buttonMenuItemStyle:h}=(0,c.yK)((()=>({buttonMenuItemStyle:{opacity:e.disabled?.6:1,cursor:e.disabled?"not-allowed":""}})),[e.disabled]);return r.createElement(He.ZP,n()({},e.upsellEvents,{disablePopup:!g,disabled:e.disabled,popupType:t.isMobile?He.Z4.SlideUp:He.Z4.Popup,buttonPopupStore:i,renderOrigin:t=>r.createElement(Ke.Z,n()({},t,{focused:!1,disabled:e.disabled,style:h,title:s()(L.Z,{},void 0,s()(u.FormattedMessage,{id:"publicPermissionItem.expirationTime.label",defaultMessage:"Link expires"})," ",e.upgradeLabel),right:r.createElement(Ee.Z,n()({},t,{disabled:e.disabled,ignoreLocalHoverState:!0,style:{paddingLeft:0,paddingRight:0}}),s()(Qe,{permissionItem:e.permissionItem}),(0,Ce.i)({width:10,marginLeft:4,fill:a.lightIconColor}))})),alignmentToOrigin:ze.lU.End,placementToOrigin:ze.Iw.Bottom,render:i=>{const a=[{key:"options",render:e=>r.createElement(qe.Z,e),items:Xe().map((t=>({key:t.type,action:()=>{Je(e,o,t.time),i.close()},render:e=>r.createElement(Ke.Z,n()({},e,{focused:e.focused,disabled:!1,title:t.title,caption:t.caption}))})))},{key:"custom",render:e=>r.createElement(qe.Z,n()({},e,{topBorder:!0})),items:[{key:"custom",action:()=>{i.close()},render:(t,a)=>r.createElement(Ye.Z,n()({},t,{renderOrigin:e=>r.createElement(Ke.Z,n()({},e,{disabled:!1,title:s()(u.FormattedMessage,{id:"publicPermissionItem.expiration.chooseDate",defaultMessage:"Choose date"})})),onFocus:a.onFocus,disableDefaultClick:!0,renderExtension:(t,a)=>s()("div",{style:{padding:"18px 14px 14px"}},void 0,r.createElement(je.Z,n()({},t,{firstDayOfWeek:Ue.AK.state,value:e.permissionItem.expiration_timestamp||(new Date).getTime(),onChange:t=>{Je(e,o,t),a.close(),i.close()},disabledDays:{before:new Date}})))}))}]}];let l;return l=t.isMobile?{menuType:p.og.Modal,title:s()(u.FormattedMessage,{id:"publicPermissionsMenu.expiration.mobile.title",defaultMessage:"Expiration time"}),right:s()(u.FormattedMessage,{id:"publicPermissionsMenu.expiration.mobile.label",defaultMessage:"Done"}),onClickRight:i.close}:{menuType:p.og.Popup,width:264},r.createElement(R.Z,n()({className:m.IpQ},l),s()(Ge.Z,{type:Ge.i.Vertical,initialFocus:void 0,sections:a}))}}))}function Qe(e){const{permissionItem:t}=e;return!t.expiration_timestamp||(0,v.o7)(t)?s()(u.FormattedMessage,{id:"publicPermissionItem.expiration.never",defaultMessage:"Never"}):s()(L.Z,{},void 0,e.permissionItem.expiration_timestamp&&(0,Oe.tv)(e.permissionItem.expiration_timestamp,Ne.SP))}function Je(e,t,i){const{permissionItem:a,onChange:n}=e;if("public_permission"!==a.type)return;if(void 0!==i&&i<=(new Date).getTime())return;const o=a,s=h.d9(o),r=i;s.expiration_timestamp=r,n(s),ke.n4j(t,{expiration_time:r})}function Xe(){const e=(new Date).getTime()+Ve.U6,t=(new Date).getTime()+Ve.A0,i=(new Date).getTime()+7*Ve.A0;return[{type:"never",time:void 0,title:s()(u.FormattedMessage,{id:"publicPermissionItem.expiration.never",defaultMessage:"Never"})},{type:"hour",time:e,title:s()(u.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.hour",defaultMessage:"In an hour"}),caption:new Intl.DateTimeFormat(Ne.SP,{hour:"numeric",minute:"numeric"}).format(e)},{type:"day",time:t,title:s()(u.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.day",defaultMessage:"In a day"}),caption:new Intl.DateTimeFormat(Ne.SP,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(t)},{type:"week",time:i,title:s()(u.FormattedMessage,{id:"permissionItem.publicPermissionItem.expiration.week",defaultMessage:"In a week"}),caption:new Intl.DateTimeFormat(Ne.SP,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(i)}]}function et(e){window.__c={n:"PageLinkOptions"};const{permissionItem:t,onUpgradeButtonClick:i,onChange:a,currentBlockStore:o}=e,m=(0,l.O7)(),p=(0,d.VK)((()=>!o.canAdmin()),[o]),g=(0,d.VK)((()=>{var e;return Boolean(null===(e=C.default.state.currentSpaceStore)||void 0===e?void 0:e.getDisableMoveToSpace())}),[]),h=v.RF(t.role),f=!1!==t.allow_duplicate,y=v.J5(t.role),S=Boolean(t.allow_search_engine_indexing),b=(0,r.useCallback)((()=>{a({role:y?"comment_only":"read_and_write"})}),[y,a]),M=(0,r.useCallback)((()=>{a({role:h?"reader":"comment_only"})}),[h,a]),w=(0,r.useCallback)((()=>{const e=!S;a({allow_search_engine_indexing:e}),ke.g0v(m,{allow_search_engine_indexing:e})}),[m,a,S]),_=(0,r.useCallback)((()=>{const e=!f;a({allow_duplicate:e}),ke.l7z(m,{allow_duplicate:e})}),[f,m,a]),k=(0,d.VK)((()=>Ze.default.checkGate("expiring_public_links")),[]),T=(0,d.VK)((()=>!(0,Pe.y$)(m)&&(0,Pe.M9)(m)),[m]),I=(0,d.VK)((()=>!(0,Pe.f3)(m)&&(0,Pe.M9)(m)),[m]),P=(0,d.VK)((()=>lt(m)),[m]),x=(0,d.VK)((()=>p||g&&!f),[p,f,g]),Z=(0,c.yK)((()=>({optionLabel:{marginRight:"auto",opacity:p?.6:1},optionButton:p?{...P,cursor:"not-allowed"}:P})),[p,P]);return r.createElement(r.Fragment,null,r.createElement(r.Fragment,null,k&&s()(De.Z,{alwaysAllowClick:Boolean(t.expiration_timestamp),onClick:()=>{},analyticsName:"public_permission_item_expiration",requireUpgradeToTier:T,tooltipPlacement:be.Z.Placement.Left,renderTooltip:nt,renderUpgradeTooltip:ot,onUpgradeClick:i,render:(e,i)=>s()($e,{upsellEvents:e,upgradeLabel:i,permissionItem:t,onChange:a,disabled:p})}),s()(be.Z,{placement:be.Z.Placement.Left,renderTooltip:it,render:e=>r.createElement(Fe.Z,n()({onClick:b,style:Z.optionButton,disabled:p},e),s()(L.Z,{style:Z.optionLabel},void 0,s()(u.FormattedMessage,{defaultMessage:"Allow editing",id:"pagePermissionItem.allowEdits.setting"})),s()(Be.Z,{on:y,onClick:b,disabled:p}))}),s()(be.Z,{placement:be.Z.Placement.Left,renderTooltip:at,render:e=>r.createElement(Fe.Z,n()({onClick:M,style:Z.optionButton,disabled:p},e),s()(L.Z,{style:Z.optionLabel},void 0,s()(u.FormattedMessage,{defaultMessage:"Allow comments",id:"pagePermissionItem.allowComments.setting"})),s()(Be.Z,{on:h,onClick:M,disabled:p}))})),s()(be.Z,{placement:be.Z.Placement.Left,renderTooltip:g&&!f?rt:st,render:e=>r.createElement(Fe.Z,n()({onClick:_,disabled:x,style:Z.optionButton},e),s()(L.Z,{style:Z.optionLabel},void 0,s()(u.FormattedMessage,{defaultMessage:"Allow duplicate as template",id:"pagePermissionItem.allowDuplicateTemplate.setting"})),s()(Be.Z,{on:f,onClick:_,disabled:x}))}),s()(De.Z,{requireUpgradeToTier:I,alwaysAllowClick:t.allow_search_engine_indexing,analyticsName:"allow_search_engine_indexing",onClick:w,onUpgradeClick:i,tooltipPlacement:be.Z.Placement.Left,renderTooltip:nt,renderUpgradeTooltip:ot,render:(e,t)=>r.createElement(Fe.Z,n()({style:Z.optionButton,disabled:p},e),s()(L.Z,{style:Z.optionLabel},void 0,s()(u.FormattedMessage,{defaultMessage:"Search engine indexing",id:"pagePermissionItem.allowSearchEngines.setting"})," ",t),s()(Be.Z,{on:S,onClick:w,disabled:p||Boolean(t)}))}))}function tt(e){window.__c={n:"PageLinkButton"};const[t,i]=r.useState(!1),[a,n]=r.useState(void 0),{currentBlockStore:o}=e,m=(0,l.O7)(),p=(0,d.VK)((()=>lt(m)),[m]),g=(0,c.yK)((()=>({container:{...p,height:"auto"},flex:{flex:1},wrapper:{display:"flex",padding:"1px 0"},input:{flex:1,borderTopRightRadius:0,borderBottomRightRadius:0,paddingRight:0},button:{height:28,borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"none"}})),[p]),h=(0,d.VK)((()=>(0,ve.ZP)({store:o,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=ye.Z.getPublicSpaceData(m,(0,_e.C)(o.getSpaceId())))||void 0===e?void 0:e.domain},pageVisitSource:ge.tY.CopyLink})),[o,m]),f=(0,r.useCallback)((()=>{m.mobileNative&&(0,xe.Y)("supportsNativeCopy")?m.mobileNative.copyText(h,Ie.default.formatMessage(Te.tq.copiedLinkToClipboard)):Te.RD({environment:m,stringValue:h,copiedMessage:Te.tq.copiedLinkToClipboard}),clearTimeout(a),i(!0),n(window.setTimeout((()=>{i(!1)}),1e3)),ke.c7L(m)}),[m,h,a]);return s()("div",{style:g.container},void 0,s()("div",{style:g.flex},void 0,s()("div",{style:g.wrapper},void 0,s()(Ae.Z,{value:h,disabled:!0,style:g.input}),s()(Se.Z,{onClick:f,style:g.button},void 0,s()(u.FormattedMessage,t?{id:"pageShareMenu.copiedLinkButton.label",defaultMessage:"✓ Copied"}:{id:"pageShareMenu.copyMaybePublicLinkButton.label.web",defaultMessage:"Copy web link"})))))}function it(){return s()(Re.Z,{caption:s()(u.FormattedMessage,{defaultMessage:"Any logged in Notion user can edit this page. Share the secret link with people you trust.",id:"pagePermissionItem.allowEdits.tooltip"}),imageHeight:120,imageWidth:240,imageURL:W.Z.images.tooltips.share.allowEditingPng})}function at(){return s()(Re.Z,{caption:s()(u.FormattedMessage,{defaultMessage:"Any logged in Notion user can comment on this page.",id:"pagePermissionItem.allowComments.tooltip"}),imageHeight:120,imageWidth:240,imageURL:W.Z.images.tooltips.share.allowCommentsPng})}function nt(){return s()(Re.Z,{caption:s()(u.FormattedMessage,{defaultMessage:"If allowed, your public page may appear in search engines such as Google, but only if you or someone else links to it elsewhere on the web.",id:"pagePermissionItem.allowSearchEngine.tooltip"}),imageHeight:120,imageWidth:240,imageURL:W.Z.images.tooltips.share.allowSearchEnginesPng})}function ot(){return s()(Re.Z,{imageURL:W.Z.images.tooltips.upsells.searchEngineIndexingPng,imageWidth:240,imageHeight:100,title:s()(u.FormattedMessage,{defaultMessage:"Upgrade for search engine indexing",id:"pagePermissionItem.searchEngineUpgradeTooltip.title"}),caption:s()(u.FormattedMessage,{defaultMessage:"Have your page appear in search engine results.",id:"pagePermissionItem.searchEngineUpgradeTooltip.caption"})})}function st(){return s()(Re.Z,{caption:s()(u.FormattedMessage,{defaultMessage:"If allowed, this will allow other people to duplicate your public page to their workspace.",id:"pagePermissionItem.allowDuplicateTemplate.tooltip"}),imageHeight:120,imageWidth:240,imageURL:W.Z.images.tooltips.share.allowDuplicatePng})}function rt(){return s()(Re.Z,{caption:s()(u.FormattedMessage,{defaultMessage:"This workspace does not allow page duplication to other workspaces.",id:"pagePermissionItem.duplicateTemplateDisabled.tooltip"}),imageWidth:240})}function lt(e){const t=e.WindowSizeStore;return{display:"flex",alignItems:"center",width:"100%",height:e.device.isMobile?36:30,paddingTop:5,paddingBottom:5,paddingLeft:t.getSafePaddingLeftCSS(14),paddingRight:t.getSafePaddingRightCSS(14)}}function dt(e){window.__c={n:"PublishToWebSettings"};const{store:t,mostPermissivePublicItem:i,permissionItemArgs:a}=e,{permissionItem:o,from:m}=i,{sudoModeStore:p,location:g,onUpgradeButtonClick:h}=a,f=(0,l.O7)(),{isMobile:v}=f.device,S=(0,c.yK)((e=>({title:{color:e.blueColor,fontWeight:$.Z.fontWeight.medium,fontSize:14,display:"flex",alignItems:"center",margin:"0px 16px 10px",paddingTop:v?4:0},icon:{height:16,width:16,marginRight:6},linkSharingOptions:{margin:"10px 2px"},learnAboutDomainsCTA:{fontSize:14,margin:"8px 8px",padding:0,backgroundColor:void 0,boxShadow:void 0,textAlign:"left",alignItems:"flex-start"},buttonGroup:{margin:"10px 14px 16px",display:"flex",gap:10},button:{flexGrow:1,height:34},disabledButton:{opacity:.7,cursor:"not-allowed"}})),[v]),b=(0,d.VK)((()=>!t.canAdmin()),[t]),M=m.table===y.iU?m.blockId:m.teamId,w=(0,r.useCallback)((e=>{(0,ce.i)({oldPermissionItem:o,newPermissionItem:{...o,...e},wasInherited:M!==t.id,environment:f,store:t,sudoModeStore:p,location:g})}),[o,M,t,f,p,g]),C=(0,r.useCallback)((()=>{w({role:"none"})}),[w]),_=(0,d.VK)((()=>(0,ve.ZP)({store:t,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=ye.Z.getPublicSpaceData(f,t.getSpaceId()))||void 0===e?void 0:e.domain},pageVisitSource:ge.tY.LinkInPage})),[t,f]),k=(0,r.useCallback)((()=>{!function(e){Q.j(e,"view_public_site_click")}(f),fe.navigate({url:_,environment:f,openInNew:"tab"})}),[f,_]);return s()("div",{},void 0,s()("div",{style:S.title},void 0,he(S.icon),s()(u.FormattedMessage,{defaultMessage:"This page is live on the web",id:"publishTab.settings.liveOnWeb.title"})),s()(tt,{currentBlockStore:t}),s()(we,{style:S.learnAboutDomainsCTA,labelStyle:{isSmall:!1}}),s()("div",{style:S.linkSharingOptions},void 0,s()(et,{currentBlockStore:t,permissionItem:o,onChange:w,onUpgradeButtonClick:h})),s()("div",{style:S.buttonGroup},void 0,s()(be.Z,{disableTooltip:!b,renderTooltip:()=>s()(u.FormattedMessage,{defaultMessage:"You must have full access to this page to unpublish it",id:"publishTab.settings.liveOnWeb.unpublishTooltip"}),render:e=>r.createElement(Se.Z,n()({onClick:C,disabled:b,style:b?{...S.button,...S.disabledButton}:S.button},e),s()(u.FormattedMessage,{defaultMessage:"Unpublish",id:"publishTab.settings.liveOnWeb.unpublish"}))}),s()(ue.Z,{onClick:k,style:S.button},void 0,s()(u.FormattedMessage,{defaultMessage:"View site",id:"publishTab.settings.liveOnWeb.viewSite"}))))}function ct(e){const{store:t,mostPermissivePublicItem:i,permissionItemArgs:a}=e,{permissionItem:n}=i,o="none"!==n.role;return s()(o?dt:me,{store:t,mostPermissivePublicItem:i,permissionItemArgs:a})}var ut=i(77657),mt=i(94044),pt=i(54642),gt=i(95209),ht=i(48429),ft=i(4708),vt=i(79817),yt=i(53353),St=i(26781),bt=i(34859),Mt=i(30874),wt=i(29798),Ct=i(78291),_t=i(3386),kt=i(53336),Tt=i(7567),It=i(44385),Pt=i(5257),xt=i(29477),Zt=i(68626),Ft=i(42631),At=i(68785);function Et(e){window.__c={n:"ImportContactsButton"};const{onClickAuthenticated:t}=e,i=(0,l.O7)(),[a,n]=r.useState(!1),o=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),m=(0,d.VK)((()=>{const e=null==o?void 0:o.getBotSettingsStore().getValue();return"approved_only"!==(null==e?void 0:e.integration_restrictions)||Boolean((null==e?void 0:e.integration_approval_statuses)&&e.integration_approval_statuses[ut.nO])}),[o]),p=(0,d.VK)((()=>Mt.Z.integrations.state.find((e=>e.id===ut.nO))),[]),g=(0,d.VK)((()=>Mt.Z.completeSlackAuthentications.state),[]),h=(0,c.yK)((e=>({circleCheck:{height:14,width:14,marginLeft:6,color:z.ZP.blue},chevron:{height:12,width:12,marginLeft:6},title:{display:"flex",alignItems:"center",color:z.ZP.uiLightBlack,size:14},integrationName:{display:"flex"},integrationIcon:{marginLeft:4,marginRight:4},container:{height:36,bottom:0,width:"100%",backgroundColor:e.modalBackground,pointerEvents:"all",transitionProperty:"max-height",transitionDuration:"0.3s",boxShadow:"0px -4px 4px rgba(0, 0, 0, 0.03)",padding:3},button:{width:"100%",paddingTop:15,paddingBottom:15,paddingLeft:9},loadingSpinner:{width:14,height:14,marginLeft:6}})),[]);if(!o)return r.createElement(r.Fragment,null);if(!m)return r.createElement(r.Fragment,null);const f=s()("div",{style:h.integrationName},void 0,s()(J.Z,{type:"image_url",imageURL:W.Z.images.externalIntegrations.slackIconPng,size:18,imageStyle:h.integrationIcon}),s()(u.FormattedMessage,{defaultMessage:"Slack",id:"importContactsButton.integrationName"})),v=a?s()(At.Z,{style:h.loadingSpinner}):r.createElement(r.Fragment,null,g.length>0&&(0,H.r)(h.circleCheck),(0,Pt.o)(h.chevron));return s()("div",{style:h.container},void 0,s()(Ee.Z,{style:h.button,onClick:async()=>{0===g.length?await async function(){const e=i.currentUser.id;if(!p||!o||!e)return;try{var a;n(!0);const e=await Ft.hM({environment:i,integration:p,spaceId:o.id,from:"share_menu"});if(Zt.x.isFail(e))return;const s=null===(a=e.value.externalAuthentication)||void 0===a?void 0:a.parent_id;if(!s)return;const r=Ze.default.getEligibleGroup({experimentId:"import_slack_contacts",defaultGroup:2e3,parameter:"load_contacts_timeout"}),l=Number(r);await Promise.race([pt.loadContacts(i,{botId:s,spaceId:o.id,integrationId:p.id}),(0,xt.Vs)(Number.isNaN(l)?2e3:l)]),null==t||t()}finally{n(!1)}}():g.length>0&&(null==t||t())}},void 0,s()("div",{style:h.title},void 0,s()(u.FormattedMessage,{defaultMessage:"Add contacts from {integrationNameWithLogo}",id:"importContactsButton.integrationButton.label",values:{integrationNameWithLogo:f}}),v)))}var Bt=i(33728),Rt=i(26907),Dt=i(8323);const Lt=h.Ds((e=>{let{environment:t,flowId:i,subscriptionTier:a,origin:n}=e;ke.UWw(t,{invite_flow_id:i,subscription_tier:a,invite_origin:n})}),1e3);var Nt=i(47082),Ot=i(22193);const Vt=function(e){window.__c={n:"InviteTargetsInput"};const{flowId:t,store:i,disabled:a,placeholder:n,right:o,focus:r,onFocus:u,onSubmit:m,hideIconColorAndTooltips:p}=e,g=(0,l.O7)(),h=(0,l.Fy)(),f=(0,d.qz)(e.inviteTargetsStore,U.ZP),v=(0,d.VK)((()=>f.state.inviteTargets),[f]),y=(0,d.VK)((()=>f.state.tokenQuery),[f]),S=v.map((e=>{const t="newUser"===e.type?e.value.email:e.value.id;return s()(Ot.Z,{store:i,target:e,showRemoveButton:!0,tokenType:p?"member":void 0,onClickRemove:()=>function(e){const{targetToRemove:t,inviteTargetsStore:i}=e;if(0===i.state.inviteTargets.length)return;const a=i.state.inviteTargets.filter((e=>e!==t));0===a.length?i.setState({...i.state,inviteTargets:[]}):i.setState({...i.state,inviteTargets:a})}({inviteTargetsStore:f,targetToRemove:e})},t)})),b=(0,c.yK)((e=>({tokenSpan:{maxWidth:"100%"},tokenInputMenuItem:{paddingTop:0===v.length?0:6,paddingLeft:4,paddingRight:4,paddingBottom:4,borderRadius:3,minHeight:"unset",...r&&{background:"none"},...a&&{background:e.inputBackground,color:e.mediumTextColor,fill:z.ZP.white,opacity:.4}},inputAndTokenWrapRight:{gap:6},tokenInputMenuItemInput:{paddingTop:0===v.length?6:0}})),[v,r,a]);return s()(Nt.Z,{focus:r,focusAfterAnimation:!0,onClick:()=>{h.isMobile||null==u||u()},format:Nt.Z.Format.Share,value:y,onChange:e=>async function(e){const{environment:t,event:i,flowId:a,inviteTargetsStore:n,inviteOrigin:o}=e;n.setState({...n.state,tokenQuery:i.target.value}),Lt({environment:t,flowId:a,subscriptionTier:(0,Dt.zt)(),origin:o});const s=i.target.value,{extractedEmails:r,newInputValue:l}=(0,Bt.zI)(s),d=(await gt.M5(t,r)).filter((e=>!Rt.H({inviteTargetsStore:n,target:e}))),c=[...n.state.inviteTargets,...d];n.setState({...n.state,inviteTargets:c,tokenQuery:l})}({environment:g,event:e,inviteTargetsStore:f,inviteOrigin:"page_contextual_invite",flowId:t}),type:"email",tokens:S,disabled:a,autoComplete:"off",placeholder:n,onRemoveLastToken:()=>{f.setState({...f.state,inviteTargets:f.state.inviteTargets.slice(0,-1)})},right:o,showBorder:!0,inputStyle:b.tokenInputMenuItemInput,inputAndTokenWrapRightStyle:b.inputAndTokenWrapRight,style:b.tokenInputMenuItem,onSubmit:m,inputFullWidth:!0})};var Ut=i(45101),Wt=i(77907),zt=i(96455);const Kt=function(e){window.__c={n:"PermissionsInviteEntry"};const{store:t}=e,{isMobile:i}=(0,l.Fy)(),a=(0,d.VK)((()=>t.canEditMembership()),[t]),o=(0,c.yK)((()=>({buttonContainer:{display:"flex",alignItems:"center",gap:mt.p_},inputButton:{flex:1,justifyContent:"flex-start",height:30,overflow:"hidden"},blueButton:{minWidth:mt.UF}})),[]);return s()(be.Z,{renderTooltip:()=>s()(u.FormattedMessage,{id:"inviteUserButton.tooltip.fullAccessOnlyMessage",defaultMessage:"Only those with full access can add people."}),disableTooltip:a,render:t=>r.createElement("div",n()({style:o.buttonContainer},t),s()(zt.Z,{onClick:e.onClick,disabled:!a&&!0,style:o.inputButton},void 0,s()("div",{style:$.Z.textOverflowStyle},void 0,s()(u.FormattedMessage,{defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}))),!i&&s()(ue.Z,{isLarge:!0,onClick:e.onClick,disabled:!a&&!0,style:o.blueButton},void 0,s()(u.FormattedMessage,{id:"inviteUserButton.invitePersonLabel",defaultMessage:"Invite"})))})};function Ht(e){window.__c={n:"MobileInviteSection"};const{store:t,permissionItemArgs:i}=e,{onUpgradeButtonClick:a,sudoModeStore:n}=i,o=(0,d.qz)(void 0,A.Z),{permissionsInviteStore:r}=(0,d.VK)((()=>o.state),[o]),u=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),m=(0,d.VK)((()=>o.stage),[o]),p=(0,d.VK)((()=>r.state.modalOpen),[r]),g=(0,l.O7)(),h=(0,d.VK)((()=>t.canAdmin()),[t]),f=(0,d.VK)((()=>{const{data:e}=Ct.default.state;return Boolean(e&&Pe.YK(e))}),[]),v=(0,d.VK)((()=>function(e){const{store:t}=e,i=(0,M.VP)(t),a=C.default.state.currentSpaceStore;return Boolean((null==a?void 0:a.getDisableGuests())||(null==i?void 0:i.getDisableGuests()))}({store:t})),[t]),y=(0,c.yK)((e=>({button:{display:"flex",alignItems:"center",minHeight:52},buttonInner:{width:"100%"},modalButton:{height:36}})),[]);return u?m!==Z.TG.closed?s()(Wt.LazyUniversalMemberInvite,{universalInviteStore:o,mode:"milestone_2",spaceStore:u,sudoModeStore:n,store:t,disabled:!h,membersOnly:v,isSubscribed:f,onUpgradeButtonClick:a,upgradeButtonName:"invite_permission_block",shouldGrow:!0,buttonStyle:{height:36}}):s()(Fe.Z,{mobileFeedback:!0,disabled:!0,style:y.button},void 0,s()("div",{style:y.buttonInner},void 0,p&&s()(Wt.LazyPermissionsInviteWithModal,{store:t,disabled:!h,membersOnly:v,isSubscribed:f,onUpgradeButtonClick:a,upgradeButtonName:"invite_permission_block",shouldGrow:!0,buttonStyle:y.modalButton,permissionsInviteStore:r}),s()(Kt,{store:t,onClick:()=>(0,Ut.z5)({environment:g,permissionsInviteStore:r,store:t,isSubscribed:f,renderInShareModal:!1})}))):null}var Gt=i(19889),qt=i(7928),jt=i(91536),Yt=i(64684);function $t(){const{data:e}=Ct.default.state,t=e?Pe.CM(e):[],i=new Map;return t.forEach((e=>{i.set(e.userId,e)})),i}function Qt(e){const{spaceVisibleUserMap:t,blockStore:i,userId:a}=e,n=t.get(a);if(!n||"none"!==n.role)return;if(!n.isTeamGuest)return"guest";const o=M.VP(i);if(!o)return"guest";return(0,Yt.s8)({team:{membership:o.getRawMembership()},userId:a})?"team_level_guest":"guest"}var Jt=i(65598),Xt=i(16639),ei=i(12793),ti=i(31278),ii=i(25735);function ai(e){window.__c={n:"GroupPermissionTooltip"};const{group:t}=e,i=(0,u.useIntl)(),a=(0,Xt.kF)({intl:i,group:t});return s()(ii.Y,{group:t,limit:15,noMembersMessage:s()(Re.Z,{imageURL:W.Z.images.tooltips.share.sharedPng,imageWidth:240,imageHeight:120,caption:s()(u.FormattedMessage,{defaultMessage:"For all members of the {groupName} group, this page will show up in the <boldtext>Shared</boldtext> section in their sidebar.",values:{boldtext:e=>s()("span",{style:{fontWeight:$.Z.fontWeight.bold}},void 0,e),groupName:a},id:"blockPermissionsSettings.groupPermission.tooltip"})})})}const ni=function(e){window.__c={n:"BlockGroupPermissionItem"};const{store:t,groupPermission:i,spaceId:a,fromPermissionWrapper:o}=e,l=(0,u.useIntl)(),c=(0,d.VK)((()=>{const{currentSpaceStore:e}=C.default.state;if(!e)return!1;return e.getPermissionGroups().find((e=>e.id===i.permissionItem.group_id))}),[i.permissionItem.group_id]);if(!c)return null;const p=c.user_ids||[],g=(0,Xt.kF)({intl:l,group:c}),h=c.icon&&s()(ti.Z,{disabled:!0,title:g,icon:c.icon?{pointer:{table:"space",id:a},icon:c.icon}:void 0,isEmptyPage:!1,size:18});return s()("div",{style:{fontWeight:400},className:m.gGc},c.id,r.createElement(Le.Z,n()({currentBlockStore:t,permissionItem:i.permissionItem,from:i.from,icon:s()(ei.Z,{size:Le.Z.iconSize}),title:g,tag:h,ignoreLocalHoverState:e.ignoreLocalHoverState,showInherited:e.showInherited,nonInheritedTooltip:s()(ai,{group:c}),subtitle:s()("div",{},void 0,s()(u.FormattedMessage,{defaultMessage:"Group",id:"blockPermissionsSettings.groupPermission.label"})," · ",s()(u.FormattedMessage,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:p.length}})),upgradeButtonName:"group_permission_item",isRemovableOverride:e.isRemovableOverride,fromPermissionWrapper:o},e.permissionItemArgs)))};var oi=i(88198),si=i(45653);function ri(e){window.__c={n:"Icon"};const{userValue:t,shouldShowPendingInvitation:i}=e,a=(0,c.yK)((()=>({iconPlaceholder:{height:Le.Z.iconSize,width:Le.Z.iconSize,borderRadius:20}})),[]);return t?s()(si.Z,{userValue:t,size:Le.Z.iconSize,initialOverrideStyle:i?{borderStyle:"dashed"}:void 0}):s()(ci,{style:a.iconPlaceholder})}function li(e){window.__c={n:"Title"};const{userValue:t,guestLabel:i,shouldShowPendingInvitation:a}=e,n=(0,u.useIntl)(),o=(0,c.yK)((()=>({titlePlaceholder:{height:8,width:81,borderRadius:3},pendingInvitation:{color:z.ZP.PendingInvitationTextColor}})),[]);if(!t)return s()(ci,{style:o.titlePlaceholder});const l=(0,qt.Nz)(n,t);return r.createElement(r.Fragment,null,l?s()("div",{style:{display:"flex",gap:4}},void 0,s()(L.Z,{className:"notranslate",style:a?o.pendingInvitation:void 0},void 0,l),i&&s()(oi.b,{labelType:i})):s()(u.FormattedMessage,{defaultMessage:"Invitation sent",id:"blockPermissionsSettings.sentInvitation.message"}))}function di(e){window.__c={n:"Subtitle"};const{userValue:t,shouldShowPendingInvitation:i}=e,a=(0,c.yK)((()=>({uiLabel:{display:"flex"},subtitlePlaceholder:{height:8,width:139,borderRadius:3,marginTop:10},dotSeparator:{marginLeft:2,marginRight:2},pendingInvitation:{color:z.ZP.PendingInvitationTextColor}})),[]);return null!=t&&t.email?i?s()(L.Z,{isSmall:!0,style:a.pendingInvitation},void 0,s()(u.FormattedMessage,{id:"blockPermissionsSettings.invitationSent",defaultMessage:"Pending Invitation"})):s()(L.Z,{isSmall:!0},void 0,t.email):s()(ci,{style:a.subtitlePlaceholder})}function ci(e){window.__c={n:"Placeholder"};const t=(0,c.yK)((t=>({placeholder:{...e.style,background:t.lightDividerColor}})),[e.style]);return s()("div",{style:t.placeholder})}const ui=function(e){window.__c={n:"BlockUserPermissionItem"};const{store:t,userPermission:i,spaceVisibleUserMap:a,fromPermissionWrapper:o}=e,l=(0,d.VK)((()=>_.U6.createChildStore(t,{table:Gt.KJ,id:i.permissionItem.user_id}).getValue()),[t,i.permissionItem.user_id]),c=(0,d.VK)((()=>{if(null!=l&&l.id)return Qt({spaceVisibleUserMap:a,userId:l.id,blockStore:t})}),[t,a,l]),u=(0,d.VK)((()=>!0!==(null==l?void 0:l.onboarding_completed)&&(0,ft.fJ)()),[l]);return s()("div",{},i.permissionItem.user_id,r.createElement(Le.Z,n()({currentBlockStore:t,permissionItem:i.permissionItem,from:i.from,ignoreLocalHoverState:e.ignoreLocalHoverState,icon:s()(ri,{userValue:l,shouldShowPendingInvitation:u}),title:s()(li,{userValue:l,guestLabel:c,shouldShowPendingInvitation:u}),subtitle:s()(di,{userValue:l,shouldShowPendingInvitation:u}),showInherited:e.showInherited,upgradeButtonName:"user_permission_item",isRemovableOverride:e.isRemovableOverride,fromPermissionWrapper:o},e.permissionItemArgs)))};var mi=i(56666);function pi(e){let{permissions:t}=e;window.__c={n:"ExpandablePermissionsList"};const[i,a]=(0,r.useState)(!1),n=(0,c.yK)((e=>({button:{display:i?"none":"inline-flex",padding:10,width:"100%"},icon:{width:14,transform:"rotate(90deg)",marginLeft:14,marginRight:18,fill:e.lightIconColor},list:{display:i?"block":"none"}})),[i]);return r.createElement(r.Fragment,null,s()(Fe.Z,{onClick:()=>a(!0),style:n.button},void 0,s()("div",{},void 0,(0,mi.o)(n.icon)),s()(L.Z,{isSmall:!0,isSecondaryColor:!0},void 0,s()(u.FormattedMessage,{id:"blockPermissionsSettings.permissionsList.expandButton",defaultMessage:"{count} more people",values:{count:t.length}}))),s()("div",{style:n.list},void 0,t))}var gi=i(50571);const hi=function(e){window.__c={n:"MorePeoplePermissionItem"};const{store:t}=e,i=(0,c.yK)((e=>({icon:{width:17,height:17,fill:e.mediumIconColor},iconContainer:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[]),a={table:y.iU,blockId:t.id};return s()(Le.Z,{icon:(0,gi.S)(i.icon),iconStyle:i.iconContainer,title:s()(u.FormattedMessage,{defaultMessage:"More people may have access",id:"blockPermissionsSettings.permissionItem.hiddenAccess"}),nonInheritedTooltip:s()(u.FormattedMessage,{defaultMessage:"This page may be shared with additional people through a parent page or teamspace that you don't have access to",id:"blockPermissionsSettings.hiddenAccess.tooltip"}),permissionRoleSelect:r.createElement(r.Fragment,null),currentBlockStore:t,permissionItem:{type:"hidden_permission"},from:a,upgradeButtonName:"team_permission_item"})};var fi=i(76781),vi=i(38755),yi=i(84076),Si=i(93686),bi=i(61061),Mi=i(44495),wi=i(47307),Ci=i(76464),_i=i(39699),ki=i(18878);var Ti=i(4023),Ii=i(48690),Pi=i(35817),xi=i(76798),Zi=i(62385);function Fi(e){window.__c={n:"PermissionsRestoreBanner"};const{showRestoreButton:t,store:i,type:a,sudoModeStore:n}=e,{isMobile:o}=(0,l.Fy)(),r=(0,d.VK)((()=>M.uJ(i)[1]),[i]),u=(0,l.O7)(),m=(0,d.VK)((()=>({paddingLeft:u.WindowSizeStore.getSafePaddingLeftCSS(14),paddingRight:u.WindowSizeStore.getSafePaddingLeftCSS(14)})),[u]),p=(0,c.yK)((e=>({container:{display:"flex",minHeight:20,flexDirection:"row",alignItems:"center",paddingTop:8,paddingBottom:6,paddingLeft:m.paddingLeft,paddingRight:m.paddingRight},banner:{display:"flex",flexDirection:"row",width:"100%",fontSize:12},icon:{width:16,fill:e.mediumIconColor},iconContainer:{width:20,height:20,display:"flex",justifyContent:"center",alignItems:"center",marginRight:5},messageContainer:{display:"flex",flexDirection:"column"},label:{display:"inline",marginLeft:o?14:0,color:o?"#CF8807":e.mediumTextColor,fontWeight:o?$.Z.fontWeight.regular:$.Z.fontWeight.medium,marginRight:6,lineHeight:"20px"},buttonContainer:{marginLeft:-5},divider:{opacity:"75%"},mobileContainer:{borderRadius:4,height:34,marginLeft:14,marginRight:14,marginTop:5,marginBottom:5,paddingRight:9,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"rgba(246, 192, 80, 0.26)"}})),[o,m]);return o?s()("div",{style:p.mobileContainer},void 0,s()(L.Z,{isMultiline:!0,isSmall:!0,style:p.label},void 0,s()(Bi,{type:a,navigableParentStore:r,showRestoreButton:t})),t&&s()(Ai,{store:i,type:a})):s()("div",{style:p.container},void 0,s()("div",{style:p.banner},void 0,s()("div",{style:p.iconContainer},void 0,Ri[a](p.icon)),s()("div",{},void 0,s()(L.Z,{isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:p.label},void 0,s()(Bi,{type:a,navigableParentStore:r,showRestoreButton:t})),t&&s()("span",{style:p.buttonContainer},void 0,s()(Ai,{store:i,type:a,sudoModeStore:n})))))}function Ai(e){window.__c={n:"PermissionsRestoreButton"};const{type:t,store:i,sudoModeStore:a}=e,{isMobile:n}=(0,l.Fy)(),o=(0,d.VK)((()=>!!a&&a.shouldSaveTransactionWithSudoMode(i)),[i,a]),m=(0,c.yK)((e=>({button:{color:n?"#CF8807":e.regularTextColor,fontWeight:$.Z.fontWeight.medium},tooltip:{width:210,whiteSpace:"initial"}})),[n]),p=(0,l.O7)();if("restore-team"===t){const e=async()=>{await async function(e){const{environment:t,useSudoMode:i,store:a}=e,n={type:"restoreTeamPermissions",permissionChanges:[]};await wi.confirmUserAction({message:(0,ki.mX)(n),acceptLabel:(0,ki.nH)(n),cancelLabel:s()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.cancel",defaultMessage:"Close"})})&&_i.createAndCommit({userAction:"PermissionsRestoreBanner.restoreTeamPermissions",environment:t,useSudoMode:i,perform:e=>{Ci.Kh({environment:t,store:a,transaction:e})}})}({environment:p,useSudoMode:o,store:i})};return s()(be.Z,{style:m.tooltip,placement:Ti.u.Bottom,renderTooltip:()=>s()(u.FormattedMessage,{defaultMessage:"Reset page permissions to match default teamspace permissions",id:"permissionsRestoreBanner.tooltip.teamPermissions"}),render:t=>r.createElement("span",t,s()(Zi.Z,{style:m.button,onClick:e},void 0,s()(u.FormattedMessage,{id:"permissionsRestoreBanner.button.teamPermissions",defaultMessage:"Reset"})))})}if("unrestrict"===t){const e=async()=>{const e=i.getPermissionItems(),t=M.Om(i),a=t?(0,f.Wo)(M.fJ(t)):[],n=(0,f.Xr)(e,a);await async function(e){const{environment:t,useSudoMode:i,store:a,permissionChanges:n}=e,o={type:"restore",permissionChanges:n};await wi.confirmUserAction({message:(0,ki.mX)(o),acceptLabel:(0,ki.nH)(o),cancelLabel:s()(u.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.cancel",defaultMessage:"Close"}),description:s()(ki.mo,{openState:o})})&&(a.getPermissionItemsStore().canAdmin()?_i.createAndCommit({userAction:"PermissionsRestoreBanner.restoreRestrictedPermissions",environment:t,useSudoMode:i,perform:e=>{Ci.MX({environment:t,store:a,transaction:e})}}):Ci.hs({environment:t,store:a}))}({environment:p,useSudoMode:o,store:i,permissionChanges:n})};return s()(Zi.Z,{style:m.button,onClick:e},void 0,s()(u.FormattedMessage,{id:"permissionsRestoreBanner.button.restrictedPermissions",defaultMessage:"Restore"}))}(0,V.t1)(t)}function Ei(e){window.__c={n:"ClickableAttribution"};const{navigableParentStore:t,maxLength:i,showUnderline:a}=e,{isMobile:n}=(0,l.Fy)(),o=(0,l.O7)(),r=(0,c.yK)((e=>({linkBox:{color:e.mediumTextColor},title:{display:"inline"}})),[]),u=(0,d.VK)((()=>{if(t instanceof _.G)return(0,ve.ZP)({store:t,fullyQualified:!1,pageVisitSource:ge.tY.LinkInPage})}),[t]);if(!t)return null;const m=n&&t.table===b.e0;return s()(yi.Z,{disabled:m,style:m?void 0:r.linkBox,underline:a&&!m,inline:!0,onClick:t.table===b.e0?()=>{t.table===b.e0&&Pi.RF({environment:o,teamId:t.id,tab:Ii.a.Members,from:"permission_item"})}:void 0,href:u},void 0,s()(xi.Z,{shouldWrap:!0,maxLength:i,store:t,style:r.title}))}function Bi(e){window.__c={n:"PermissionsRestoreBannerLabel"};const{type:t,navigableParentStore:i,showRestoreButton:a}=e,{isMobile:n}=(0,l.Fy)(),o=s()(Ei,{navigableParentStore:i,maxLength:n||!a?void 0:30,showUnderline:!0});switch(t){case"restore-team":return s()(u.FormattedMessage,{id:"pageShareMenu.restoreTeamPermissionsBanner.label",defaultMessage:"Page access is different from {linkBoxWithPageTitle}.",values:{linkBoxWithPageTitle:o}});case"unrestrict":return s()(u.FormattedMessage,n?{id:"pageShareMenu.restrictedAccessBanner.mobileLabel",defaultMessage:"Page access is restricted to people below.",values:{linkBoxWithPageTitle:o}}:{id:"pageShareMenu.restrictedAccessBanner.label",defaultMessage:"Access restricted. May not be shared with everyone from {linkBoxWithPageTitle}.",values:{linkBoxWithPageTitle:o}});default:(0,V.t1)(t)}}const Ri={unrestrict:bi.B,"restore-team":Mi.D},Di=(0,u.defineMessages)({fullAccess:{id:"permissionsLevelBanner.fullAccess.label",defaultMessage:"You have full access to this page {hasAttribution, select, true {via {attribution}} other {}}"},editor:{id:"permissionsLevelBanner.editor.label",defaultMessage:"You have edit access to this page {hasAttribution, select, true {via {attribution}} other {}}"},contentEditor:{id:"permissionsLevelBanner.contentEditor.label",defaultMessage:"You have edit access to content on this page {hasAttribution, select, true {via {attribution}} other {}}"},commenter:{id:"permissionsLevelBanner.commenter.label",defaultMessage:"You have comment access to this page {hasAttribution, select, true {via {attribution}} other {}}"},reader:{id:"permissionsLevelBanner.reader.label",defaultMessage:"You have view access to this page {hasAttribution, select, true {via {attribution}} other {}}"}});function Li(e){let{store:t}=e;window.__c={n:"PermissionLevelBanner"};const i=(0,l.O7)(),a=(0,d.VK)((()=>(0,Ue.B7)(i)),[i]),o=(0,d.VK)((()=>t.canEditContentOnly()),[t]),m=(0,c.yK)((e=>({container:{backgroundColor:e.accentColors.gray[50],borderRadius:4,height:34,marginLeft:14,marginRight:14,marginTop:5,marginBottom:5,paddingRight:14,display:"flex",alignItems:"center"},banner:{fontSize:12,display:"inline-flex"},icon:{marginLeft:14,marginRight:8},attribution:{display:"inline-flex",alignItems:"center",fill:e.regularIconColor,marginLeft:5}})),[]),{role:p,attribution:g}=(0,d.VK)((()=>{if(!a)return{role:"none",attribution:null};const e=(0,w.Dt)({userId:a.id,store:t}),n=function(e){let{environment:t,calculatedPermission:i,store:a}=e;const n=(0,M.Pj)(a)||C.default.state.currentSpaceStore;if(!n)return null;if((0,v.hV)(i)){const e=(0,vi.TC)({spaceStore:n,groupId:i.group_id}),t=null==e?void 0:e.name;return t?r.createElement(r.Fragment,null,(0,fi.x)({width:18,marginRight:5}),t):null}if((0,v.fG)(i)){var o;const e=i.team_id||(null===(o=(0,M.VP)(a))||void 0===o?void 0:o.id);if(!e)return null;const t=_.zX.createChildStore(n,{table:b.e0,id:e,spaceId:n.id});return r.createElement(r.Fragment,null,s()(Si.p,{disabled:!0,store:t,size:18,style:{marginRight:5}}),s()(Ei,{navigableParentStore:t,showUnderline:!0}))}if((0,v.ix)(i))return(0,v.KF)(i)?s()(u.FormattedMessage,{defaultMessage:"the link",id:"permissionsLevelBanner.spacePermission.attribution"}):r.createElement(r.Fragment,null,s()(Si.p,{disabled:!0,store:n,size:18,style:{marginRight:5}}),(0,vi.rn)(t,n));if((0,v.$D)(i))return s()(yi.Z,{underline:!0,inline:!0,onClick:()=>{F.ZP.setState({...F.ZP.state,display:F.wV.Publish,tab:F.XF.Publish})}},void 0,s()(u.FormattedMessage,{defaultMessage:"the published site",id:"permissionsLevelBanner.publicPermission.attribution"}));return null}({environment:i,calculatedPermission:e,store:t});return{role:e.role,attribution:n}}),[a,t,i]);if((0,r.useEffect)((()=>{p&&ke.hYM(i,{share_menu_session_id:F.ZP.state.sessionId,role:p})}),[]),!(0,v.iC)(p))return null;const h=function(e){switch(e){case"editor":return Di.fullAccess;case"read_and_write":return Di.editor;case"content_only_editor":return Di.contentEditor;case"comment_only":return Di.commenter;case"reader":return Di.reader;case"none":case"membership_admin":return null;default:(0,V.t1)(e)}}(p);return h?s()(be.Z,{delayThreshold:0,renderTooltip:()=>s()(u.FormattedMessage,{defaultMessage:"Content editors can edit pages, but cannot change view and database settings.",id:"database.viewSettings.mainTab.contentOnlyEditorPill.subtitle"}),disableTooltip:!o,textWrap:!0,style:{maxWidth:180},render:e=>r.createElement("div",n()({style:m.container},e),s()(si.Z,{userStore:a,size:20,style:m.icon}),s()(L.Z,{style:m.banner},void 0,r.createElement(u.FormattedMessage,n()({},h,{values:{hasAttribution:Boolean(g),attribution:s()("span",{style:m.attribution},void 0,g)}})))),placement:be.Z.Placement.Left}):null}function Ni(){return s()(Oi,{},void 0,s()(u.FormattedMessage,{id:"blockPermissionsSettings.permissionsList.moreAttribution",defaultMessage:"More people with access"}))}function Oi(e){window.__c={n:"AttributionWrapper"};const{children:t}=e,{WindowSizeStore:i}=(0,l.O7)(),{paddingLeft:a,paddingRight:n}=(0,d.VK)((()=>({paddingLeft:i.getSafePaddingLeftCSS(14),paddingRight:i.getSafePaddingRightCSS(14)})),[i]),o=(0,c.yK)((e=>({label:{color:e.mediumTextColor,fontWeight:$.Z.fontWeight.medium,paddingLeft:a,paddingRight:n,paddingTop:8,paddingBottom:6}})),[a,n]);return s()(L.Z,{isSmall:!0,style:o.label},void 0,t)}const Vi=function(e){window.__c={n:"PermissionsAttributionHeader"};const{store:t}=e,{parentStore:i,canAccessParent:a}=(0,d.VK)((()=>T({store:t})),[t]);return s()(Oi,{},void 0,s()(u.FormattedMessage,a?{id:"blockPermissionsSettings.permissionsList.attribution",defaultMessage:"From {attribution}",values:{attribution:s()(Ei,{navigableParentStore:i})}}:{id:"blockPermissionsSettings.permissionsList.genericHeader",defaultMessage:"People with access"}))};var Ui=i(19037);function Wi(e){window.__c={n:"RestrictedBanner"};const{store:t}=e,i=(0,l.O7)(),a=(0,d.VK)((()=>function(e){const{store:t,environment:i}=e;return Ui.or([Ui.zz,Ui.xD([Ui.c2,Ui.ff(Ui.zz)])])({environment:i,blocks:[t],publicEditMode:void 0})}({store:t,environment:i})),[t,i]);return s()(Fi,{type:"unrestrict",showRestoreButton:a,store:t,sudoModeStore:e.sudoModeStore})}function zi(e){window.__c={n:"ElevatedBanner"};const{store:t}=e;return(0,d.VK)((()=>k({store:t})),[t])?s()(Fi,{type:"restore-team",showRestoreButton:!1,store:t,sudoModeStore:e.sudoModeStore}):null}const Ki=function(e){window.__c={n:"PermissionsWarningBanner"};const{store:t,showRestrictedPermissionBanner:i}=e,{canAccessParent:a}=(0,d.VK)((()=>T({store:t})),[t]);return a?s()(i?Wi:zi,{store:t,sudoModeStore:e.sudoModeStore}):null};var Hi=i(16880),Gi=i(27714),qi=i(16184);const ji=(0,q.I)("openPage",{viewBox:"0 0 17 16",svg:s()("path",{d:"M0.454102 14.1143V2.02832C0.454102 1.26953 0.891602 0.78418 1.58887 0.78418H9.7373C10.4346 0.78418 10.8721 1.26953 10.8721 2.02832V14.1143C10.8721 14.873 10.4346 15.3584 9.7373 15.3584H1.58887C0.891602 15.3584 0.454102 14.873 0.454102 14.1143ZM3.07227 4.45508C3.07227 4.63281 3.18164 4.74902 3.35254 4.74902H4.71973C4.89062 4.74902 5.01367 4.63281 5.01367 4.45508V3.12891C5.01367 2.95801 4.89062 2.83496 4.71973 2.83496H3.35254C3.18164 2.83496 3.07227 2.95801 3.07227 3.12891V4.45508ZM6.37402 4.45508C6.37402 4.63281 6.4834 4.74902 6.66113 4.74902H8.02148C8.19238 4.74902 8.31543 4.63281 8.31543 4.45508V3.12891C8.31543 2.95801 8.19238 2.83496 8.02148 2.83496H6.66113C6.4834 2.83496 6.37402 2.95801 6.37402 3.12891V4.45508ZM11.4736 15.3584C11.6992 14.9893 11.8086 14.5723 11.8086 14.1143V4.14746H15.418C16.1084 4.14746 16.5459 4.63281 16.5459 5.3916V14.1143C16.5459 14.873 16.1084 15.3584 15.418 15.3584H11.4736ZM3.07227 7.24414C3.07227 7.42188 3.18164 7.53809 3.35254 7.53809H4.71973C4.89062 7.53809 5.01367 7.42188 5.01367 7.24414V5.91797C5.01367 5.74707 4.89062 5.62402 4.71973 5.62402H3.35254C3.18164 5.62402 3.07227 5.74707 3.07227 5.91797V7.24414ZM6.37402 7.24414C6.37402 7.42188 6.4834 7.53809 6.66113 7.53809H8.02148C8.19238 7.53809 8.31543 7.42188 8.31543 7.24414V5.91797C8.31543 5.74707 8.19238 5.62402 8.02148 5.62402H6.66113C6.4834 5.62402 6.37402 5.74707 6.37402 5.91797V7.24414ZM13.3604 7.60645C13.3604 7.75 13.4492 7.85254 13.5996 7.85254H14.7344C14.8779 7.85254 14.9736 7.75 14.9736 7.60645V6.5127C14.9736 6.36914 14.8779 6.27344 14.7344 6.27344H13.5996C13.4492 6.27344 13.3604 6.36914 13.3604 6.5127V7.60645ZM3.07227 10.0332C3.07227 10.2041 3.18164 10.3271 3.35254 10.3271H4.71973C4.89062 10.3271 5.01367 10.2041 5.01367 10.0332V8.70703C5.01367 8.5293 4.89062 8.41309 4.71973 8.41309H3.35254C3.18164 8.41309 3.07227 8.5293 3.07227 8.70703V10.0332ZM6.37402 10.0332C6.37402 10.2041 6.4834 10.3271 6.66113 10.3271H8.02148C8.19238 10.3271 8.31543 10.2041 8.31543 10.0332V8.70703C8.31543 8.5293 8.19238 8.41309 8.02148 8.41309H6.66113C6.4834 8.41309 6.37402 8.5293 6.37402 8.70703V10.0332ZM13.3604 10.2998C13.3604 10.4434 13.4492 10.5391 13.5996 10.5391H14.7344C14.8779 10.5391 14.9736 10.4434 14.9736 10.2998V9.20605C14.9736 9.0625 14.8779 8.9668 14.7344 8.9668H13.5996C13.4492 8.9668 13.3604 9.0625 13.3604 9.20605V10.2998ZM3.29785 14.2578H8.08984V12.0361C8.08984 11.7217 7.88477 11.5166 7.57031 11.5166H3.81738C3.50293 11.5166 3.29785 11.7217 3.29785 12.0361V14.2578ZM13.3604 12.9932C13.3604 13.1367 13.4492 13.2324 13.5996 13.2324H14.7344C14.8779 13.2324 14.9736 13.1367 14.9736 12.9932V11.8994C14.9736 11.7559 14.8779 11.6533 14.7344 11.6533H13.5996C13.4492 11.6533 13.3604 11.7559 13.3604 11.8994V12.9932Z"})});var Yi=i(98519);function $i(){const e=(0,l.O7)(),{currentSpaceStore:t}=(0,d.Kw)(C.default);return(0,d.VK)((()=>t?(0,vi.rn)(e,t):""),[e,t])}var Qi=i(23063);const Ji=[{key:"private",title:()=>s()(u.FormattedMessage,{id:"linkSharingPill.visibilityTitle.inviteOnly",defaultMessage:"Invite only"}),caption:s()(u.FormattedMessage,{id:"linkSharingPill.visibilityCaption.inviteOnly",defaultMessage:"Only you and people invited can access"}),icon:qi.Q},{key:"unlisted",title:e=>s()(u.FormattedMessage,{id:"linkSharingPill.visibilityTitle.anyoneWithLink",defaultMessage:"Anyone with link at {spaceName}",values:{spaceName:e}}),caption:s()(u.FormattedMessage,{id:"linkSharingPill.visibilityCaption.anyoneWithLink",defaultMessage:"People invited and workspace members with link can access"}),icon:Gi.N},{key:"open",title:e=>s()(u.FormattedMessage,{id:"linkSharingPill.visibilityTitle.everyoneInWorkspace",defaultMessage:"Everyone at {spaceName}",values:{spaceName:e}}),caption:s()(u.FormattedMessage,{id:"linkSharingPill.visibilityCaption.everyoneInWorkspace",defaultMessage:"All workspace members can search and access"}),icon:ji}];function Xi(e){window.__c={n:"MobileLinkSharingPill"};const{store:t,spacePermission:i}=e,a=ta(i.permissionItem),o=(0,d.VK)((()=>t.canAdmin()),[t]),l=$i(),m=(0,d.VK)((()=>{const e=C.default.state.currentSpaceStore;return null!=e&&e.isDefined()?e:null}),[]),[p,g]=(0,r.useState)(!1),h=(0,c.yK)((e=>({chevron:{width:12,fill:e.mediumIconColor,marginLeft:"auto"},button:{height:42,color:e.mediumTextColor,marginBottom:8,padding:"0 6px",marginLeft:-6,marginRight:-6,width:"100%"},icon:{fill:e.regularIconColor,width:32,height:32,backgroundColor:e.lightDividerColor,padding:6,borderRadius:4,marginRight:12},animation:{maxHeight:220},enterAnimation:{maxHeight:0},exitAnimation:{maxHeight:0},container:{overflow:"hidden"}})),[]),f=Ji.find((e=>e.key===a));return f&&m?s()("div",{style:h.container},void 0,s()(Ee.Z,{style:h.button,icon:f.icon,iconStyle:h.icon,disabled:!o,disabledFeedback:!0,onClick:()=>g(!p)},void 0,s()("div",{},void 0,s()(L.Z,{isSmall:!0},void 0,s()(u.FormattedMessage,{id:"linkSharingPill.visibilityMobileTitle",defaultMessage:"Page visibility"})),s()(L.Z,{},void 0,f.title(l))),o&&(p?(0,Ce.i)(h.chevron):(0,Hi.R)(h.chevron))),s()(Qi.Z,{isVisible:p,animationStyle:h.animation,enterAnimationStyle:h.enterAnimation,exitAnimationStyle:h.exitAnimation,springConfig:{maxHeight:{stiffness:60,damping:12,precision:.1}},render:()=>r.createElement(ea,n()({},e,{parentCloseCallback:()=>g(!1)}))})):null}function ea(e){window.__c={n:"PrivacyMenu"};const{store:t,spacePermission:i,sudoModeStore:a,location:o,isRestricted:u,parentCloseCallback:m}=e,g=(0,l.O7)(),h=g.device.isMobile,b=ta(i.permissionItem),w=(0,d.VK)((()=>(0,ft.C$)()),[]),_=i.from,k=_.table===y.iU?_.blockId:_.teamId,T=!(_.table===t.table&&k===t.id),I=(0,d.VK)((()=>{const{currentSpaceStore:e}=C.default.state;return!!e&&t.isTopLevelWorkspacePage(e.id)}),[t]),P=$i(),x=(0,d.VK)((()=>{const e=function(e){const{store:t}=e;if(t.getParentTable()===S.bx)return;const i=(0,M.Om)(t);if(!i)return;const a=(0,f.Wo)((0,M.fJ)(i));for(const n of a)if((0,v.ix)(n))return n}({store:t});return e?ta(e):"private"}),[t]),Z=(0,r.useRef)(null),F=(0,c.yK)((e=>{const t={width:14,fill:h?e.regularIconColor:e.mediumTextColor};return{icon:{fill:h?e.regularIconColor:e.mediumTextColor,width:16},iconContainer:{alignSelf:"center",marginLeft:h?13:9},hiddencheckmark:{...t,visibility:"hidden"},selectedCheckmark:{...t,visibility:"visible"},checkmarkContainer:{marginLeft:12},selectedTitle:{fontWeight:$.Z.fontWeight.semibold},mobileScroller:{border:`1px solid ${e.regularDividerColor}`,borderRadius:8,marginBottom:24},mobileButton:{paddingTop:8,paddingBottom:8},mobileButtonDivider:{borderBottom:`1px solid ${e.regularDividerColor}`},caption:{whiteSpace:"normal"}}}),[h]);return s()(R.Z,{menuType:p.og.Popup,disableScroller:!0,scrollerStyle:h?F.mobileScroller:{}},void 0,s()(Ge.Z,{type:Ge.i.Vertical,initialFocus:void 0,sections:[{key:"visibilityOptions",render:e=>r.createElement(qe.Z,n()({},e,{disableDesktopPadding:h})),items:Ji.map(((e,l)=>{const d=e.key,c=b===d,p=c?F.selectedCheckmark:F.hiddencheckmark,f=l!==Ji.length-1,v={...h?F.mobileButton:{},...h&&f?F.mobileButtonDivider:{}};return{key:d,render:t=>s()("div",{},void 0,"unlisted"===d&&r.createElement("div",{ref:Z},s()(te.C8,{originRef:Z})),r.createElement(Ke.Z,n()({title:e.title(P),caption:s()(L.Z,{isSmall:!0,isMultiline:!0,style:F.caption},void 0,e.caption),icon:e.icon(F.icon),desktopIconStyle:F.iconContainer,titleStyle:c&&!h?F.selectedTitle:void 0,right:(0,Yi.k)(p),rightStyle:F.checkmarkContainer,style:v},t))),action:()=>{if(c)return;const e=i.permissionItem,n={type:"space_permission",role:ia(e,b,d,w)};"unlisted"===d&&(n.unlisted_timestamp=Date.now());const s=function(e,t){if(e===t)return!1;switch(t){case"open":return!1;case"unlisted":return"open"===e;case"private":return!0;default:(0,V.t1)(t)}}(x,d)&&!u&&!I;(0,ce.i)({oldPermissionItem:e,newPermissionItem:n,wasInherited:T,environment:g,store:t,sudoModeStore:a,location:o,restrictingVisibility:s}),m()}}}))}]}))}function ta(e){return"none"===e.role?"private":e.unlisted_timestamp?"unlisted":"open"}function ia(e,t,i,a){return"private"===i?"none":"private"===t?a?"editor":"reader":e.role}const aa=function(e){window.__c={n:"LinkSharingPill"};const{store:t,spacePermission:i}=e,a=ta(i.permissionItem),o=(0,d.VK)((()=>t.canAdmin()),[t]),l=$i(),m=(0,d.VK)((()=>{const e=C.default.state.currentSpaceStore;return null!=e&&e.isDefined()?e:null}),[]),p=(0,d.qz)(void 0,We.Z),g=(0,r.useRef)(null),h=(0,c.yK)((e=>({chevron:{width:12,marginLeft:4,fill:e.mediumIconColor},popup:{overflow:"visible",width:"100%",minWidth:430},button:{justifyContent:"center",borderRadius:32,height:32,color:e.mediumTextColor,paddingLeft:12,maxWidth:380},title:{...$.Z.textOverflowStyle},icon:{fill:e.mediumTextColor,width:16}})),[]);return m?s()(He.ZP,{buttonPopupStore:p,popupType:He.Z4.Popup,popupWrapStyle:h.popup,renderOrigin:e=>{const t=Ji.find((e=>e.key===a));return t?s()(be.Z,{placement:be.Z.Placement.Bottom,alignment:be.Z.Alignment.Start,disableTooltip:o,renderTooltip:()=>s()(u.FormattedMessage,{defaultMessage:"You must have full access to change the privacy setting",id:"linkSharingPill.disabledTooltip.message"}),render:i=>r.createElement(Se.Z,n()({},e,{ref:g,style:h.button,icon:t.icon,iconStyle:h.icon,disabled:!o,disabledFeedback:!0},i),s()("div",{style:h.title},void 0,t.title(l)),o&&(0,Ce.i)(h.chevron),s()(te.iq,{originRef:g,handlePrimaryButtonClick:()=>{p.setState({...p.state,open:!0})}}))}):null},placementToOrigin:ze.Iw.Bottom,alignmentToOrigin:ze.lU.Start,sameWidthAsOrigin:!0,render:t=>r.createElement(ea,n()({},e,{parentCloseCallback:()=>t.close()}))}):null};var na=i(32739),oa=i(95477);function sa(e){window.__c={n:"MobilePageLinkButtonInner"};const{store:t,buttonPopupStore:i,events:a}=e,o=(0,l.O7)(),{device:d,mobileNative:m}=o,p=(0,c.yK)((e=>({button:{flex:1,height:36,minHeight:36}})),[]);return r.createElement(ue.Z,n()({onClick:()=>{d.isMobileNative?function(e){const{store:t,mobileNative:i}=e,a=(0,na.u5)({schemeUrl:(0,ve.ZP)({store:t,pageVisitSource:ge.tY.CopyLink}),baseUrl:oa.default.domainBaseUrl});i&&i.share(a)}({store:t,mobileNative:m}):da({store:t,buttonPopupStore:i,environment:o}),ke.V5j(o)},style:p.button},a),d.isMobileNative?s()(u.FormattedMessage,{id:"pageShareMenu.shareLinkButton.label",defaultMessage:"Share link"}):s()(u.FormattedMessage,{id:"pageShareMenu.copyLinkButton.label",defaultMessage:"Copy link"}))}function ra(e){window.__c={n:"PageLinkButtonInner"};const{store:t,buttonPopupStore:i,events:a}=e,o=(0,l.O7)(),d=(0,c.yK)((e=>({button:{height:24,paddingLeft:8,paddingRight:8,color:e.regularTextColor,marginLeft:"auto"},icon:{width:14,height:14,fill:e.regularIconColor,marginLeft:0,marginRight:6},label:{color:e.regularTextColor}})),[]);return r.createElement(Ee.Z,n()({isSmall:!0,onClick:()=>{da({store:t,buttonPopupStore:i,environment:o}),ke.V5j(o)},style:d.button},a),(0,Gi.N)(d.icon),s()(L.Z,{isSmall:!0,style:d.label},void 0,s()(u.FormattedMessage,{id:"blockPermissionsSettings.copyLinkButton.label",defaultMessage:"Copy link"})))}function la(e){const{calculatedPermissions:t}=e,i=t.mostPermissivePublicItem.permissionItem;if((0,v.YX)(i.role))return s()(u.FormattedMessage,{defaultMessage:"This page has public link access, so anyone with the link will be able to view the page.",id:"blockPermissionsSettings.publicLinkInfo.tooltip"});const a=t.mostPermissiveSpaceItem.permissionItem;return(0,v.YX)(a.role)?s()(u.FormattedMessage,{defaultMessage:"This page has workspace access, so anyone in the workspace will be able to view the link.",id:"blockPermissionsSettings.workspacePermissions.tooltip"}):t.permissionItemsCount>1?s()(u.FormattedMessage,{defaultMessage:"Only you and other invited members and guests will be able to view the link.",id:"blockPermissionsSettings.userPermissions.tooltip"}):s()(u.FormattedMessage,{defaultMessage:"Only you can access this page, so the link will only work for you.",id:"blockPermissionsSettings.privatePermissions.tooltip"})}async function da(e){const{store:t,buttonPopupStore:i,environment:a}=e,n=(0,ve.ZP)({store:t,pageVisitSource:ge.tY.CopyLink});await Te.RD({environment:a,stringValue:n,copiedMessage:Te.tq.copiedLinkToClipboard}),i&&i.setState({open:!1})}const ca=function(e){window.__c={n:"PageLinkButton"};const{store:t,buttonPopupStore:i,calculatedPermissions:a}=e,{device:n}=(0,l.O7)(),o=(0,c.yK)((()=>({tooltip:{width:280}})),[]);return s()(be.Z,{delayThreshold:0,placement:be.Z.Placement.Bottom,renderTooltip:()=>s()(la,{calculatedPermissions:a}),textWrap:!0,style:o.tooltip,render:e=>n.isMobile?s()(sa,{store:t,buttonPopupStore:i,events:e}):s()(ra,{store:t,buttonPopupStore:i,events:e})})};const ua=function(e){window.__c={n:"ShareMenuFooter"};const{isMobile:t}=(0,l.Fy)(),i=(0,c.yK)((e=>({container:{display:"flex",alignItems:t?"normal":"center",boxShadow:`0 -1px 0 ${e.regularDividerColor}`,flexDirection:t?"column":"row",justifyContent:"space-between",padding:"8px 14px"}})),[t]),{mostPermissiveSpaceItem:a,showRestrictedPermissionBanner:n}=e.calculatedPermissions;return r.createElement(r.Fragment,null,s()("div",{style:i.container},void 0,s()(t?Xi:aa,{store:e.store,sudoModeStore:e.permissionItemArgs.sudoModeStore,location:e.permissionItemArgs.location,spacePermission:a,isRestricted:n}),s()(ca,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions})))};var ma=i(90965);function pa(e){window.__c={n:"UnlistedPermissionItem"};const{store:t,spacePermission:i,fromPermissionWrapper:a}=e,o=(0,c.yK)((e=>({icon:{width:17,height:17,fill:e.mediumIconColor},iconContainer:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[]);return r.createElement(Le.Z,n()({icon:(0,Gi.N)(o.icon),iconStyle:o.iconContainer,title:s()(u.FormattedMessage,{defaultMessage:"Members with the link",id:"blockPermissionsSettings.permissionItem.linkAccess"}),currentBlockStore:t,permissionItem:i.permissionItem,from:i.from,upgradeButtonName:"space_permission_item",fromPermissionWrapper:a},e.permissionItemArgs))}function ga(e){window.__c={n:"Title"};const{spaceStore:t}=e,i=(0,l.O7)(),a=(0,d.VK)((()=>(0,vi.rn)(i,t)),[i,t]);return s()(u.FormattedMessage,{defaultMessage:"Everyone at {workspaceName}",id:"blockPermissionsSettings.permissionItem.workspaceAccessNew",values:{workspaceName:a}})}function ha(e){window.__c={n:"Subtitle"};const{spaceStore:t}=e,i=(0,d.VK)((()=>(0,ma.t5)((0,vi.jv)(t))),[t]);return s()(u.FormattedMessage,{defaultMessage:"{numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} person} other {{numberOfWorkspaceMembers} people}}",id:"blockPermissionsSettings.spacePermission.none",values:{numberOfWorkspaceMembers:i}})}function fa(){return s()(u.FormattedMessage,{defaultMessage:"Applies to all members in your workspace.",id:"blockPermissionsSettings.spacePermission.tooltip"})}const va=function(e){window.__c={n:"SpacePermissionItem"};const{store:t,spacePermission:i,fromPermissionWrapper:a}=e,o=(0,d.VK)((()=>{const e=C.default.state.currentSpaceStore;return null!=e&&e.isDefined()?e:null}),[]),l=(0,c.yK)((()=>({container:{width:"100%"}})),[]);return o?i.permissionItem.unlisted_timestamp?r.createElement(pa,e):s()("div",{style:l.container,className:m.afv},void 0,r.createElement(Le.Z,n()({currentBlockStore:t,permissionItem:i.permissionItem,from:i.from,icon:s()(Si.p,{disabled:!0,store:o,size:Le.Z.iconSize}),title:s()(ga,{spaceStore:o}),nonInheritedTooltip:s()(fa,{}),subtitle:s()(ha,{spaceStore:o}),upgradeButtonName:"space_permission_item",fromPermissionWrapper:a},e.permissionItemArgs))):null};var ya=i(79362),Sa=i(91192),ba=i(95697);function Ma(e){const{teamName:t,isCompact:i}=e;return s()(u.FormattedMessage,i?{defaultMessage:"Teamspace guests",id:"blockPermissionsSettings.permissionItem.teamGuestAccess.compact"}:t?{defaultMessage:"Teamspace guests of {teamName}",id:"blockPermissionsSettings.permissionItem.teamGuestAccess",values:{teamName:t}}:{id:"blockPermissionsSettings.permissionItem.teamspaceGuestsTeamName.hidden",defaultMessage:"Teamspace guests of a private teamspace"})}function wa(e){const{membersCount:t,isCompact:i}=e;return i?null:s()(u.FormattedMessage,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamPermission.subtitle",values:{membersCount:t}})}function Ca(e){window.__c={n:"TeamGuestPermissionTooltip"};const{teamName:t}=e,i=(0,c.yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return t?s()("div",{style:i.tooltip},void 0,s()(u.FormattedMessage,{defaultMessage:"Applies to all teamspace guests of {teamName}.",values:{teamName:t},id:"blockPermissionsSettings.teamGuestPermission.tooltip"})):null}const _a=function(e){var t;window.__c={n:"TeamGuestPermissionItem"};const{store:i,blockTeamGuestPermission:a,isExternalTeam:o,fromPermissionWrapper:l}=e,{permissionItem:u}=a,p=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),g=v.bm(u)?u.team_id:null===(t=M.VP(i))||void 0===t?void 0:t.id,{teamStore:h,teamIsDefined:f,teamName:y,teamIcon:S,membersCount:w}=(0,d.VK)((()=>{if(!p||!g)return{};const e=_.zX.createChildStore(p,{table:b.e0,id:g,spaceId:p.id});return null!=e&&e.isDefined()?{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:e.getName(),teamIcon:e.getIcon(),membersCount:(0,ba.xf)({teamStore:e,spaceStore:p}).length}:{}}),[p,g]),k=!o,T=(0,c.yK)((()=>({container:{width:"100%"}})),[]);if(!h)return null;const I=S&&ya.V2(S.icon)?ya.mk(S.icon):"gray",P=S?{...S,icon:`/icons/user-circle_${I}.svg`}:void 0;return s()("div",{style:T.container,className:m.YHn},void 0,r.createElement(Le.Z,n()({isCompact:k,currentBlockStore:i,permissionItem:u,icon:f?s()(Si.p,{disabled:!0,store:h,size:Le.Z.iconSize,icon:P}):(0,Sa.x)(),title:s()(Ma,{teamName:y,isCompact:k}),nonInheritedTooltip:s()(Ca,{teamName:y}),from:a.from,subtitle:f&&s()(wa,{membersCount:w,isCompact:k}),upgradeButtonName:"team_permission_item",fromPermissionWrapper:l},e.permissionItemArgs)))};function ka(e){const{teamName:t,isCompact:i}=e;return s()(u.FormattedMessage,i&&t?{defaultMessage:"Teamspace members",id:"blockPermissionsSettings.permissionItem.teamAccessV2"}:t?{defaultMessage:"Members of {teamName}",id:"blockPermissionsSettings.permissionItem.teamAccess",values:{teamName:t}}:{id:"blockPermissionsSettings.permissionItem.membersTeamName.hidden",defaultMessage:"Members of a private teamspace"})}function Ta(e){const{membersCount:t,isCompact:i}=e;return i?null:s()(u.FormattedMessage,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamPermission.subtitle",values:{membersCount:t}})}function Ia(e){window.__c={n:"TeamMemberPermissionTooltip"};const{teamName:t}=e,i=(0,c.yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return t?s()("div",{style:i.tooltip},void 0,s()(u.FormattedMessage,{defaultMessage:"Applies to all owners and members of {teamName}.",values:{teamName:t},id:"blockPermissionsSettings.teamPermission.tooltip"})):null}const Pa=function(e){var t;window.__c={n:"TeamMemberPermissionItem"};const{store:i,blockTeamPermission:a,isExternalTeam:o,fromPermissionWrapper:l}=e,{permissionItem:u}=a,p=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),g=v.zU(u)?u.team_id:null===(t=M.VP(i))||void 0===t?void 0:t.id,{teamStore:h,teamIsDefined:f,teamName:y,membersCount:S}=(0,d.VK)((()=>{if(!p||!g)return{};const e=_.zX.createChildStore(p,{table:b.e0,id:g,spaceId:p.id});return{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:null==e?void 0:e.getName(),membersCount:(0,ba.xf)({teamStore:e,spaceStore:p}).length}}),[p,g]),w=!o,k=(0,c.yK)((()=>({container:{width:"100%"}})),[]);return h?s()("div",{style:k.container,className:m.YHn},void 0,r.createElement(Le.Z,n()({isCompact:w,currentBlockStore:i,permissionItem:a.permissionItem,from:a.from,icon:f?s()(Si.p,{disabled:!0,store:h,size:Le.Z.iconSize}):(0,Sa.x)(),title:s()(ka,{teamName:y,isCompact:w}),nonInheritedTooltip:s()(Ia,{teamName:y}),subtitle:f&&s()(Ta,{membersCount:S,isCompact:w}),upgradeButtonName:"team_permission_item",fromPermissionWrapper:l},e.permissionItemArgs))):null};var xa=i(62512);function Za(e){const{store:t,teamOwners:i,teamStore:a,teamName:n}=e;if(n){const e=i.map((e=>_.U6.createChildStore(t,{table:Gt.KJ,id:e})));return s()(xa.n,{teamStore:a,ownerStores:e})}return(0,Sa.x)()}function Fa(e){const{teamName:t,isCompact:i}=e;return s()(u.FormattedMessage,i&&t?{defaultMessage:"Teamspace owners",id:"blockPermissionsSettings.permissionItem.teamOwnerAccessV2",values:{teamName:t}}:t?{defaultMessage:"Owners of {teamName}",id:"blockPermissionsSettings.permissionItem.teamOwnerAccess",values:{teamName:t}}:{id:"blockPermissionsSettings.permissionItem.teamName.hidden",defaultMessage:"Owners of a private teamspace"})}function Aa(e){const{teamOwnersCount:t,isCompact:i}=e;return i||0===t?null:s()(u.FormattedMessage,{defaultMessage:"{teamOwnersCount, plural, one {{teamOwnersCount} person} other {{teamOwnersCount} people}}",id:"blockPermissionsSettings.teamOwnerPermission.subtitle",values:{teamOwnersCount:t}})}function Ea(e){window.__c={n:"TeamOwnerPermissionTooltip"};const{teamName:t}=e,i=(0,c.yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return t?s()("div",{style:i.tooltip},void 0,s()(u.FormattedMessage,{defaultMessage:"Applies to all owners of {teamName}",values:{teamName:t},id:"blockPermissionsSettings.teamOwnerPermission.tooltip"})):null}const Ba=function(e){var t;window.__c={n:"TeamOwnerPermissionItem"};const{store:i,blockTeamOwnerPermission:a,isExternalTeam:o,fromPermissionWrapper:l}=e,{permissionItem:u}=a,p=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),g=v.LW(u)?u.team_id:null===(t=M.VP(i))||void 0===t?void 0:t.id,{teamStore:h,teamName:f,teamOwners:y}=(0,d.VK)((()=>{if(!p||!g)return{undefined:void 0};const e=_.zX.createChildStore(p,{table:b.e0,id:g,spaceId:p.id});return{teamStore:e,teamName:e.getName(),teamOwners:(0,Yt.XO)({membership:e.getMembers()})}}),[p,g]),S=!o,w=(0,c.yK)((()=>({container:{width:"100%"}})),[]);return h?s()("div",{style:w.container,className:m.ZmO},void 0,r.createElement(Le.Z,n()({isCompact:S,currentBlockStore:i,permissionItem:a.permissionItem,from:a.from,icon:s()(Za,{store:i,teamName:f,teamStore:h,teamOwners:y}),title:s()(Fa,{teamName:f,isCompact:S}),nonInheritedTooltip:s()(Ea,{teamName:f}),subtitle:s()(Aa,{teamOwnersCount:y.length,isCompact:S}),upgradeButtonName:"team_owner_permission_item",fromPermissionWrapper:l},e.permissionItemArgs))):null},Ra=(0,q.I)("expandThin",{viewBox:"0 0 16 16",svg:s()("path",{d:"M7.992.61c.156 0 .3.033.43.1.13.069.27.16.422.274l5.265 4.25a.948.948 0 01.368.774 1 1 0 01-.149.547c-.099.156-.229.28-.39.375a1.013 1.013 0 01-.508.133 1.07 1.07 0 01-.399-.079 1.6 1.6 0 01-.375-.226L7.992 3.016 3.336 6.758a1.74 1.74 0 01-.383.226 1.056 1.056 0 01-.906-.055 1.145 1.145 0 01-.383-.374 1 1 0 01-.148-.547c0-.318.122-.576.367-.774L7.148.984C7.3.87 7.44.78 7.57.711a.9.9 0 01.422-.102zm0 14.85a.901.901 0 01-.422-.1 2.288 2.288 0 01-.422-.274l-5.265-4.25a.962.962 0 01-.367-.774 1.055 1.055 0 01.531-.914 1.01 1.01 0 01.906-.062c.125.052.253.128.383.226l4.656 3.743 4.664-3.742a1.6 1.6 0 01.375-.227c.13-.052.263-.078.399-.078a.97.97 0 01.508.14 1.036 1.036 0 01.539.915c0 .312-.123.57-.368.773l-5.265 4.258a2.512 2.512 0 01-.422.265.917.917 0 01-.43.102z"})});var Da=i(43914),La=i(33241);function Na(e){const{teamName:t}=e;return s()(u.FormattedMessage,t?{defaultMessage:"Everyone at {teamName}",id:"blockPermissionsSettings.permissionItem.teamspaceAccess",values:{teamName:t??""}}:{defaultMessage:"Everyone at a private teamspace",id:"blockPermissionsSettings.permissionItem.teamspace.hidden"})}function Oa(e){const{membersCount:t}=e;return s()(u.FormattedMessage,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamPermission.subtitle",values:{membersCount:t}})}const Va=function(e){var t;window.__c={n:"TeamPermissionItem"};const{store:i,blockTeamMemberPermission:a,blockTeamOwnerPermission:o,blockTeamGuestPermission:u}=e,m=(0,l.O7)(),p=(0,l.Fy)(),[g,h]=(0,r.useState)(!1),{permissionItem:f}=a,S=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),w=v.zU(f)?f.team_id:null===(t=M.VP(i))||void 0===t?void 0:t.id,k=o.permissionItem.role,T=f.role,I={type:"team_overview_permission",role:k===T?T:"none"===T||"none"===k?"limited":"access"},{teamStore:P,teamIsDefined:x,teamName:Z}=(0,d.VK)((()=>{if(!S||!w)return{undefined:void 0};const e=_.zX.createChildStore(S,{table:b.e0,id:w,spaceId:S.id});return{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:null==e?void 0:e.getName()}}),[S,w]),A=(0,Da.K)(P),E=(0,d.VK)((()=>{if(!S)return!1;return!S.getDisableTeamGuests()&&((null==P||!P.isDefault())&&(0,ft.F$)())}),[S,P]),B=(0,r.useCallback)((()=>{const e=!1===g;if(h(!g),e){if(!P)return;ke.dSV(m,{share_menu_session_id:F.ZP.state.sessionId,type:"team",team_id:P.id})}}),[m,g,h,P]),R=(0,c.yK)((e=>({icon:{width:10,marginLeft:4,fill:e.lightIconColor},teamPermissionsContainer:{paddingLeft:16,display:g?"block":"none"},roleButton:{marginRight:-8,color:e.mediumTextColor,fontSize:p.isMobile?14:12}})),[g,p.isMobile]),D=(0,Hi.R)(R.icon);return P?r.createElement(r.Fragment,null,r.createElement(Le.Z,n()({currentBlockStore:i,permissionItem:I,from:a.from,icon:x?s()(Si.p,{disabled:!0,store:P,size:Le.Z.iconSize}):(0,Sa.x)(),title:s()(Na,{teamName:Z}),subtitle:x&&s()(Oa,{membersCount:A}),upgradeButtonName:"team_permission_item",onClick:B,permissionRoleSelect:g?D:s()(La.d,{role:I.role,icon:Ra,disabled:!0,buttonStyle:R.roleButton,table:y.iU,isRemovable:!1,isCurrentUser:!1})},e.permissionItemArgs)),s()("div",{style:R.teamPermissionsContainer},void 0,o&&s()(Ba,{store:i,permissionItemArgs:e.permissionItemArgs,blockTeamOwnerPermission:o,fromPermissionWrapper:"expandable_permission"}),a&&s()(Pa,{store:i,permissionItemArgs:e.permissionItemArgs,blockTeamPermission:a,fromPermissionWrapper:"expandable_permission"}),E&&u&&s()(_a,{store:i,permissionItemArgs:e.permissionItemArgs,blockTeamGuestPermission:u,fromPermissionWrapper:"expandable_permission"}))):null};function Ua(e){const{store:t,permissionItemArgs:i}=e,{showTeamPermission:a,showSpacePermission:n,mostPermissiveAncestorTeamOwnerItem:o,mostPermissiveAncestorTeamMemberItem:l,mostPermissiveAncestorTeamGuestItem:d,mostPermissiveSpaceItem:c,pagePermissionUIModel:u}=e.calculatedPermissions,m=Number(a)+Number(n);return r.createElement(r.Fragment,null,a&&o&&l&&s()(Va,{store:t,blockTeamOwnerPermission:o,blockTeamMemberPermission:l,blockTeamGuestPermission:d,permissionItemArgs:i}),n&&s()(va,{store:t,spacePermission:c,permissionItemArgs:i,fromPermissionWrapper:"permission_list"}),s()(Wa,{store:t,pagePermissions:u,numberPermissionsAlreadyRendered:m,permissionItemArgs:i}))}function Wa(e){window.__c={n:"PagePermissionsList"};const t=(0,u.useIntl)(),i=(0,d.VK)((()=>{const e=C.default.state.currentSpaceStore;return null!=e&&e.isDefined()?e.id:""}),[]),{store:a,pagePermissions:n,numberPermissionsAlreadyRendered:o,permissionItemArgs:l,showHeader:c}=e,{showUserPermissions:m,mostPermissiveGroupPermissions:p,mostPermissiveTeamPermissions:g,mostPermissiveUserPermissions:f,spacePermissionGroups:y}=n,S=(0,d.VK)((()=>$t()),[]),b=(0,d.VK)((()=>{const e=m?function(e){const{mostPermissiveUserPermissions:t,spaceVisibleUserMap:i}=e,a={};return t.forEach((t=>{a[t.permissionItem.user_id]=s()(ui,{store:e.store,userPermission:t,showInherited:!1,permissionItemArgs:e.permissionItemArgs,spaceVisibleUserMap:i,fromPermissionWrapper:"permission_list"})})),a}({store:a,mostPermissiveUserPermissions:f,permissionItemArgs:l,spaceVisibleUserMap:S}):[];return h.oA(Object.keys(e).map((i=>{const n=_.U6.createChildStore(a,{table:Gt.KJ,id:i}),o=n.getModel();if(!n.isReady()||o)return{title:(0,qt.Nz)(t,o),permissionItem:e[i]}})))}),[m,f,l,a,t,S]),M=i?function(e){const{spaceId:t,spacePermissionGroups:i,mostPermissiveGroupPermissions:a}=e,n={};return a.forEach((a=>{const o=a.permissionItem.group_id;i.find((e=>e.id===o))&&(n[o]=s()(ni,{store:e.store,groupPermission:a,spaceId:t,showInherited:!1,permissionItemArgs:e.permissionItemArgs,fromPermissionWrapper:"permission_list"}))})),n}({store:a,spaceId:i,spacePermissionGroups:y,mostPermissiveGroupPermissions:p,permissionItemArgs:l}):[],w=function(e){const{store:t,mostPermissiveTeamPermissions:i,permissionItemArgs:a}=e;return i.map((e=>v.LW(e.permissionItem)?s()(Ba,{store:t,blockTeamOwnerPermission:e,isExternalTeam:!0,permissionItemArgs:a,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.owner`):v.bm(e.permissionItem)?s()(_a,{store:t,blockTeamGuestPermission:e,isExternalTeam:!0,permissionItemArgs:a,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.teamGuest`):s()(Pa,{store:t,blockTeamPermission:e,isExternalTeam:!0,permissionItemArgs:a,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.member`)))}({store:a,mostPermissiveTeamPermissions:g,permissionItemArgs:l}),k=[...b,...Object.keys(M).map((e=>{const i=y.find((t=>t.id===e));return{title:i?(0,Xt.kF)({intl:t,group:i}):"",permissionItem:M[e]}}))];k.sort(((e,t)=>e.title.localeCompare(t.title)));const T=w.concat(k.map((e=>e.permissionItem))),I=T.length;if(0===I)return null;if(I>5-o){const e=Math.max(2-o,0);return r.createElement(r.Fragment,null,c&&s()(Ni,{}),T.slice(0,e),s()(pi,{permissions:T.slice(e,-1)}),T[I-1])}return r.createElement(r.Fragment,null,c&&s()(Ni,{}),T)}function za(e,t){return e.from.table===y.iU&&e.from.blockId===t.id}const Ka=function(e){window.__c={n:"PermissionsList"};const t=(0,l.O7)(),{device:i}=t,{store:a,permissionItemArgs:n,calculatedPermissions:o}=e,{sudoModeStore:u}=n,{permissionItemsCount:m,pagePermissionUIModel:p,showRestrictedPermissionBanner:g}=o,f=(0,d.VK)((()=>{const e=C.default.state.currentSpaceStore;if(!e)return!0;if(a.isTopLevelPrivatePage({spaceStore:e,environment:t}))return!0;const i=(0,M.uJ)(a);for(const a of i)if((0,Jt.NZ)(a)&&a.isTopLevelPrivatePage({spaceStore:e,environment:t}))return!0;return!1}),[a,t]);let v=null;const y=(0,d.VK)((()=>function(e){const{store:t,showRestrictedPermissionBanner:i}=e,{canAccessParent:a}=T({store:t});return a&&(i||k({store:t}))}({store:a,showRestrictedPermissionBanner:g})),[a,g]),{canAccessParent:b}=(0,d.VK)((()=>T({store:a})),[a]),w={...o};if(!y&&b){const[e,t]=function(e,t){const{mostPermissiveGroupPermissions:i,mostPermissiveTeamPermissions:a,mostPermissiveUserPermissions:n}=t,[o,s]=h.uK(i,(t=>za(t,e))),[r,l]=h.uK(a,(t=>za(t,e))),[d,c]=h.uK(n,(t=>za(t,e))),u={...t,mostPermissiveGroupPermissions:s,mostPermissiveTeamPermissions:l,mostPermissiveUserPermissions:c},m={...t,mostPermissiveGroupPermissions:o,mostPermissiveTeamPermissions:r,mostPermissiveUserPermissions:d};return[u,m]}(a,p);w.pagePermissionUIModel=e,v=s()(Wa,{store:a,pagePermissions:t,numberPermissionsAlreadyRendered:0,permissionItemArgs:n,showHeader:!0})}const I=(0,d.VK)((()=>!function(e){const{store:t}=e,i=(0,M.uJ)(t),a=i.find((e=>e instanceof _.G&&e.isRestricted())),n=i[i.length-1];return a||n.getParentTable()===S.bx&&n.canRead()}({store:a})),[a]),P=i.isMobile?bt.Z.None:bt.Z.Y,x=(0,c.yK)((e=>({scroller:{paddingBottom:10,minHeight:i.isMobile||0===m?void 0:1===m?60:90}})),[i,m]);return(0,r.useEffect)((()=>{jt.oE({environment:t,calculatedPermissions:o})}),[]),r.createElement(r.Fragment,null,s()(kt.Z,{style:x.scroller,type:P},void 0,!f&&s()(Li,{store:a}),s()(Ki,{store:a,showRestrictedPermissionBanner:g,sudoModeStore:u}),!y&&m>0&&s()(Vi,{store:a}),s()(Ua,{store:a,calculatedPermissions:w,permissionItemArgs:n}),v,I&&s()(hi,{store:a})),!i.isMobile&&s()(ua,{store:a,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:w,permissionItemArgs:n}))};i(57658);var Ha=i(59054),Ga=i(85397);const qa=(0,q.I)("addPersonCircle",{viewBox:"0 0 50 43",svg:s()("path",{d:"M28.5 42c11.214 0 20.535-9.322 20.535-20.535C49.035 10.23 39.694.93 28.48.93 17.99.93 9.233 9.003 8.106 19.21c.987-.181 2.416-.262 3.483-.141 1.107-8.355 8.194-14.717 16.89-14.717 9.483 0 17.133 7.61 17.133 17.113 0 4.429-1.65 8.455-4.409 11.455-1.973-2.356-6.643-4.61-12.723-4.61a22.58 22.58 0 00-5.295.624 12.85 12.85 0 01-2.718 11.375 19.941 19.941 0 008.033 1.69zm-.02-17.113c3.865.04 6.905-3.261 6.905-7.59 0-4.067-3.06-7.429-6.905-7.429-3.866 0-6.946 3.362-6.905 7.43.02 4.308 3.04 7.549 6.905 7.589zM10.562 42.221c5.537 0 10.227-4.63 10.227-10.227 0-5.617-4.61-10.227-10.227-10.227-5.597 0-10.227 4.63-10.227 10.227 0 5.637 4.63 10.227 10.227 10.227zm0-3.825c-.745 0-1.228-.483-1.228-1.228v-3.946H5.388c-.725 0-1.228-.483-1.228-1.228s.503-1.228 1.228-1.228h3.946V26.82c0-.725.483-1.228 1.228-1.228s1.228.503 1.228 1.228v3.946h3.946c.725 0 1.228.483 1.228 1.228s-.503 1.228-1.228 1.228H11.79v3.946c0 .745-.483 1.228-1.228 1.228z"})});var ja=i(36591),Ya=i(36329),$a=i(98742),Qa=i(21752),Ja=i(43765),Xa=i(12276),en=i(70268);function tn(e){window.__c={n:"PublicPermissionLevelBanner"};const{publicPermission:t}=e,i=(0,c.yK)((e=>({banner:{backgroundColor:e.accentColors.gray[50],borderRadius:4,height:34,marginLeft:14,marginRight:14,marginTop:5,marginBottom:5,paddingRight:14,display:"flex",alignItems:"center"},label:{fontSize:12,display:"inline-flex",marginRight:10},icon:{height:20,width:20,marginLeft:14,marginRight:8,color:e.mediumIconColor},manageButton:{color:e.regularTextColor,fontWeight:$.Z.fontWeight.medium}})),[]),a=t.permissionItem.role;return v.YX(a)?s()("div",{style:i.banner},void 0,s()(L.Z,{style:i.label},void 0,j(i.icon),s()(an,{role:a})),s()(Zi.Z,{style:i.manageButton,onClick:()=>F.ZP.setState({...F.ZP.state,display:F.wV.Publish,tab:F.XF.Publish})},void 0,s()(u.FormattedMessage,{id:"shareMenu.managePublishSettingsButton.label",defaultMessage:"Manage"}))):null}function an(e){const{role:t}=e;switch(t){case"read_and_write":return s()(u.FormattedMessage,{id:"shareMenu.publicPermissionBanner.canEdit",defaultMessage:"This page allows edits from anyone on the web"});case"comment_only":return s()(u.FormattedMessage,{id:"shareMenu.publicPermissionBanner.canComment",defaultMessage:"This page allows comments from anyone on the web"});case"reader":return s()(u.FormattedMessage,{id:"shareMenu.publicPermissionBanner.canRead",defaultMessage:"This page can be viewed by anyone on the web"});case"editor":case"membership_admin":case"content_only_editor":case"none":return null;default:(0,V.t1)(t)}}function nn(e){window.__c={n:"ShareMenuSearchRequestImpl"};const{store:t,shouldShowSlackOnly:i,calculatedPermissions:a,permissionItemArgs:o,tokenQuery:m,showShimmer:p,error:g,ready:h,result:f}=e,S=a.pagePermissionUIModel,b=(0,l.O7)(),C=(0,d.qz)(e.inviteTargetsStore,U.ZP),_=(0,d.qz)(e.menuListStore,wt.Z),k=(0,d.VK)((()=>$t()),[]),T=(0,d.VK)((()=>ft.Rv()),[]),I=(0,d.VK)((()=>ft.KP()),[]),P=(0,d.VK)((()=>I),[I]),x=(0,c.yK)((e=>({sectionMenuItem:{paddingTop:0,display:"flex",flexDirection:"column",gap:2},zeroState:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",color:e.mediumTextColor,fontSize:14,position:"relative",pointerEvents:"auto",paddingTop:10,marginTop:110},zeroStateText:{width:"70%",alignSelf:"center"},zeroStateIcon:{height:54,width:54,marginBottom:12,fill:e.mediumIconColor}})),[]),{inPageTargets:Z,notInPageTargets:F,filteredImportedContacts:A}=(0,d.VK)((()=>{const{inviteUsers:e,inviteGroups:i,importedContacts:n=[]}=f??{inviteUsers:[],inviteGroups:[],importedContacts:[]},o=[...e,...i],s=[],r=[],l=new Set;o.forEach((e=>{"group"!==e.type&&l.add(e.value.email.toLowerCase());const i=Boolean(Ut.Zp({store:t,target:e})),n=function(e){const{inviteTarget:t,blockStore:i,spacePermission:a,teamMemberPermission:n,groupPermission:o}=e,s=t.type;if("newUser"===s)return{role:"none",type:"user_permission",user_id:t.value.email};if("existingUser"===s)return ft.KP()?w.uY({userId:t.value.id,store:i}):w.Dt({userId:t.value.id,store:i});if("group"===s){const e={role:"none",type:"group_permission",group_id:t.value.id},s=(0,M.VP)(i),r=null==s?void 0:s.getMembers().find((e=>(0,Yt.lF)({groupId:t.value.id,teamMember:e}))),l=s&&n&&r;if(!ft.KP()){return[a,...l?[n]:[],o??{permissionItem:e,from:{table:y.iU,blockId:i.id}}].sort(((e,t)=>v.xm[t.permissionItem.role]-v.xm[e.permissionItem.role]))[0].permissionItem}return[a,...l?[n]:[],o||{permissionItem:e,from:{table:y.iU,blockId:i.id}}].sort(((e,t)=>v.xm[t.permissionItem.role]-v.xm[e.permissionItem.role]))}(0,V.t1)(s)}({inviteTarget:e,blockStore:t,spacePermission:a.mostPermissiveSpaceItem,teamMemberPermission:a.mostPermissiveAncestorTeamMemberItem,groupPermission:"group"===e.type?S.mostPermissiveGroupPermissions.find((t=>t.permissionItem.group_id===e.value.id)):void 0}),o=Array.isArray(n)?n[0].permissionItem:n;if("existingUser"===e.type&&!Boolean(e.spaceRole)){const t=k.get(e.value.id);e.spaceRole=t?t.role:"not_in_space"}(i||v.YX(o.role??"none"))&&"newUser"!==e.type?s.push({inviteTarget:e,permissionItem:o,mostPermissivePermissions:Array.isArray(n)?n:void 0}):"newUser"!==e.type&&r.push(e)}));const d=n.filter((e=>!l.has(e.value.email.toLowerCase())));return{inPageTargets:s,notInPageTargets:r,filteredImportedContacts:d}}),[t,f,a.mostPermissiveSpaceItem,a.mostPermissiveAncestorTeamMemberItem,S.mostPermissiveGroupPermissions,k]),{isValidEmail:E,isEmailInTargets:B}=(0,d.VK)((()=>{const e=(0,Bt.H3)(m);return{isValidEmail:(0,Bt.oH)(e),isEmailInTargets:[...Z.map((e=>{let{inviteTarget:t}=e;return t})),...F].some((t=>"group"!==t.type&&t.value.email===e))}}),[m,Z,F]),R=E&&!B,D=(0,d.VK)((()=>R&&ft.bx()),[R]);if(g)return s()(Xa.l,{loading:!h},void 0,s()(Ja.Z,{title:s()(u.FormattedMessage,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})}));if(!h&&p)return s()(en.B,{areaHeight:window.innerHeight});const L={key:"user results",render:e=>r.createElement(qe.Z,n()({},e,{style:x.sectionMenuItem,loading:!h,title:s()(u.FormattedMessage,{id:"shareMenuSearchRequest.suggestedEmail.title",defaultMessage:"Keep typing an email to invite"})})),items:[{key:m,render:e=>r.createElement(Ke.Z,n()({icon:(0,Ga.a)({width:24,height:24}),title:r.createElement(r.Fragment,null,s()(u.FormattedMessage,{id:"shareMenuSearchRequest.inviteNewUser.buttonItem",defaultMessage:"Invite {tokenQuery}",values:{tokenQuery:m}})),right:D?s()(Ot.Z,{store:t,onlyShowTokenType:!0,showRemoveButton:!1,target:{source:"email",type:"newUser",value:{email:m},spaceRole:"not_in_space"}},m):null,rightStyle:{marginRight:4}},e)),action:async()=>{const e=(0,Bt.H3)(m);if(!(0,Bt.oH)(e))return;const t=await gt.M5(b,[e]);if(!t.length)return;const i=t[0];Rt.H({target:i,inviteTargetsStore:C})||(C.setState({inviteTargets:[...C.state.inviteTargets,i],tokenQuery:""}),_.unsetFocus())}}]},N=!i&&F.length>0&&0===m.length,O={key:"suggested",render:e=>r.createElement(qe.Z,n()({},e,{style:x.sectionMenuItem,title:s()(u.FormattedMessage,{id:"shareMenuSearchRequest.suggestedSection.title",defaultMessage:"Suggested"}),loading:!h})),items:F.map(((e,i)=>({key:"newUser"===e.type?e.value.email:e.value.id,render:i=>{const a=Rt.H({target:e,inviteTargetsStore:C});return r.createElement(gn,n()({},i,{invited:!1,inviteTarget:e,isInInviteTargets:a,blockStore:t,spaceVisibleUserMap:k}))},action:()=>on({inviteTarget:e,inviteTargetsStore:C,menuListStore:_})})))},W=!i&&m.length>0&&Z.length>0,z={key:"in page",render:e=>r.createElement(qe.Z,n()({},e,{style:x.sectionMenuItem,title:s()(u.FormattedMessage,{id:"shareMenuSearchRequest.inPageSection.title",defaultMessage:"In page"}),loading:!h})),items:Z.map((e=>{const{inviteTarget:i,permissionItem:a,mostPermissivePermissions:l}=e,{type:d}=i;if("existingUser"===d){const e=!!l&&l.length>1;if(I&&e)return{key:i.value.id,render:e=>r.createElement(ln,n()({},e,{blockStore:t,inviteTarget:i,permissionItem:a,mostPermissivePermissions:l,spaceVisibleUserMap:k,permissionItemArgs:o})),action:()=>{}};{const e=S.mostPermissiveUserPermissions.find((e=>e.permissionItem.user_id===i.value.id));return e?{key:i.value.id,render:i=>r.createElement(Ke.Z,n()({},i,{itemMarginLeft:0,itemMarginRight:0,title:s()(ui,{store:t,userPermission:e,showInherited:!0,ignoreLocalHoverState:!0,spaceVisibleUserMap:k,permissionItemArgs:o})})),action:()=>{}}:{key:i.value.id,render:e=>r.createElement(ln,n()({},e,{blockStore:t,inviteTarget:i,permissionItem:a,spaceVisibleUserMap:k,permissionItemArgs:o})),action:()=>on({inviteTarget:i,inviteTargetsStore:C,menuListStore:_})}}}if("group"===d){if(I)return{key:i.value.id,render:s=>r.createElement(ln,n()({},s,{blockStore:t,inviteTarget:i,permissionItem:a,mostPermissivePermissions:e.mostPermissivePermissions,spaceVisibleUserMap:k,permissionItemArgs:o})),action:()=>{}};{const e=S.mostPermissiveGroupPermissions.find((e=>e.permissionItem.group_id===i.value.id));return e?{key:i.value.id,render:i=>r.createElement(Ke.Z,n()({},i,{itemMarginLeft:0,itemMarginRight:0,title:s()(ni,{store:t,groupPermission:e,spaceId:t.getSpaceId(),showInherited:!0,permissionItemArgs:o})})),action:()=>{}}:{key:i.value.id,render:e=>r.createElement(ln,n()({},e,{blockStore:t,inviteTarget:i,permissionItem:a,spaceVisibleUserMap:k,permissionItemArgs:o})),action:()=>on({inviteTarget:i,inviteTargetsStore:C,menuListStore:_})}}}(0,V.t1)(d)}))},K=!i&&F.length>0&&m.length>0,H={key:"not in page",render:e=>r.createElement(qe.Z,n()({},e,{style:x.sectionMenuItem,title:m.length>0&&s()(u.FormattedMessage,{id:"shareMenuSearchRequest.notInPageSection.title",defaultMessage:"Not in page"}),loading:!h})),items:F.map((e=>({key:"newUser"===e.type?e.value.email:e.value.id,render:i=>r.createElement(gn,n()({},i,{invited:!1,inviteTarget:e,isInInviteTargets:Rt.H({target:e,inviteTargetsStore:C}),blockStore:t,spaceVisibleUserMap:k})),action:()=>on({inviteTarget:e,inviteTargetsStore:C,menuListStore:_})})))},G=T&&A.length>0,q={key:"imported contacts",render:e=>r.createElement(qe.Z,n()({},e,{style:x.sectionMenuItem,title:s()(u.FormattedMessage,{id:"shareMenuSearchRequest.importedContactsSection.title",defaultMessage:"From Slack"}),loading:!h})),items:A.map((e=>({key:e.value.email,render:i=>r.createElement(gn,n()({},i,{invited:!1,inviteTarget:e,isInInviteTargets:Rt.H({target:e,inviteTargetsStore:C}),blockStore:t,spaceVisibleUserMap:k})),action:()=>{Rt.H({target:e,inviteTargetsStore:C})?C.setState({...C.state,inviteTargets:C.state.inviteTargets.filter((t=>"newUser"!==t.type||e.value.email!==t.value.email))}):(C.setState({inviteTargets:[...C.state.inviteTargets,e],tokenQuery:""}),_.unsetFocus())}})))};let j=[];return R&&j.push(L),N&&j.push(O),W&&j.push(z),K&&j.push(H),G&&j.push(q),i&&(j=[q],0===q.items.length)?s()(hn,{styles:x}):0===j.length&&(j=[L],0===m.length)?s()(fn,{styles:x,shouldShowSlackMessage:T}):r.createElement(r.Fragment,null,P&&s()(tn,{publicPermission:a.mostPermissivePublicItem}),s()(Ge.Z,{type:Ge.i.Vertical,initialFocus:m.length>0?0:void 0,sections:j,store:_}))}function on(e){const{inviteTarget:t,inviteTargetsStore:i,menuListStore:a}=e;if(Rt.H({target:t,inviteTargetsStore:i})){const e=i.state.inviteTargets.filter((e=>"group"===t.type&&"group"===e.type||"existingUser"===t.type&&"existingUser"===e.type?t.value.id!==e.value.id:"newUser"!==t.type||"newUser"!==e.type||t.value.email!==e.value.email));return i.setState({...i.state,inviteTargets:e}),void a.unsetFocus()}i.setState({inviteTargets:[...i.state.inviteTargets,t],tokenQuery:""}),a.unsetFocus()}const sn=r.forwardRef(((e,t)=>{window.__c={n:"InPageGroupResultItem"};const{blockStore:i,inviteTarget:a,permissionItem:o,mostPermissivePermissions:m,permissionItemArgs:p}=e,g=(0,l.O7)(),h=(0,u.useIntl)(),[f,v]=(0,r.useState)(!1),S=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),b=(0,d.VK)((()=>i.getSpaceId()),[i]),M=(0,d.VK)((()=>ft.KP()&&m&&m.length>0),[m]),w=(0,d.VK)((()=>{if("group"===a.type)return(0,Xt.kF)({group:a.value,intl:h})}),[a,h]),_=(0,d.VK)((()=>{if(S&&"group"===a.type&&a.value.icon)return{pointer:{table:S.table,id:S.id},icon:a.value.icon}}),[S,a]),k=(0,d.VK)((()=>S?"group"!==a.type?0:(0,Xt.rm)({group:a.value,spaceStore:S,limit:void 0}).totalNumberMembers:0),[S,a]),T=(0,r.useCallback)((()=>{if(M){const e=!1===f;v(!f),e&&ke.dSV(g,{share_menu_session_id:F.ZP.state.sessionId,type:"group",group_id:a.value.id})}}),[g,M,f,v,a]),I=(0,c.yK)((e=>({titleContainer:{display:"flex",alignItems:"center",paddingTop:8,paddingBottom:8,marginLeft:2,minHeight:36},groupInfoContainer:{display:"flex",flexDirection:"column"},nameAndIconContainer:{display:"flex",alignItems:"center"},groupNameLabel:{marginLeft:10,marginRight:4},groupMembersLabel:{marginLeft:10},permissionRoleButton:{marginRight:-6,color:e.mediumTextColor,fontSize:12},container:{whiteSpace:"nowrap",fontWeight:$.Z.fontWeight.bold},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle"},recordTitle:{display:"inline"},tooltip:{maxWidth:180},expandablePermissionList:{paddingLeft:16},roundedPermissionItem:{borderRadius:3,overflow:"hidden",marginRight:4}})),[]);return s()(be.Z,{delayThreshold:0,placement:be.Z.Placement.Left,textWrap:!0,style:I.tooltip,renderTooltip:()=>s()(dn,{blockStore:i,blockPermissionItem:o}),render:a=>r.createElement(r.Fragment,null,r.createElement("div",a,r.createElement(Ke.Z,n()({},e,(0,$a.Z)(e,{onClick:T}),{ref:t,title:s()("div",{style:I.titleContainer},void 0,s()(ei.Z,{size:32}),s()("div",{style:I.groupInfoContainer},void 0,s()("div",{style:I.nameAndIconContainer},void 0,s()(L.Z,{style:I.groupNameLabel},void 0,w),Boolean(null==_?void 0:_.icon)&&s()(ti.Z,{disabled:!0,bucket:"public",title:w,icon:_,size:18,isEmptyPage:!1})),s()(L.Z,{isSmall:!0,style:I.groupMembersLabel},void 0,M&&f?s()(cn,{}):r.createElement(r.Fragment,null,s()(u.FormattedMessage,{defaultMessage:"Group",id:"blockPermissionsSettings.groupPermission.label"})," · ",s()(u.FormattedMessage,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:k}}))))),right:s()(La.d,{table:y.iU,disabled:!0,icon:M?f?Hi.R:Ra:void 0,role:o.role??"none",isRemovable:!1,isCurrentUser:!1,buttonStyle:I.permissionRoleButton})}))),M&&f&&s()("div",{style:I.expandablePermissionList},void 0,null==m?void 0:m.map(((e,t)=>{const a=e.permissionItem.type;let n=null;switch(a){case"space_permission":n=s()(va,{store:i,spacePermission:e,permissionItemArgs:p,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_permission":n=s()(Pa,{store:i,blockTeamPermission:e,isExternalTeam:!0,permissionItemArgs:p,fromPermissionWrapper:"expandable_permission"});break;case"group_permission":n=s()(ni,{spaceId:b,store:i,groupPermission:e,permissionItemArgs:p,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"user_permission":break;case"explicit_team_owner_permission":case"explicit_team_guest_permission":break;case"public_permission":case"bot_permission":case"deleted_permission":case"restricted_permission":case"exclusive_user_permission":break;case"team_owner_permission":case"team_permission":break;default:(0,V.t1)(a)}return s()("div",{style:I.roundedPermissionItem},t,n)}))))})})),rn=r.forwardRef(((e,t)=>{window.__c={n:"InPageUserResultItem"};const{blockStore:i,inviteTarget:a,permissionItem:o,mostPermissivePermissions:u,spaceVisibleUserMap:m,permissionItemArgs:p}=e,g=(0,l.O7)(),[h,f]=(0,r.useState)(!1),v="existingUser"===a.type?_.U6.createChildStore(i,{table:Gt.KJ,id:a.value.id}):void 0,S=(0,d.VK)((()=>"none"===a.spaceRole?Qt({spaceVisibleUserMap:m,userId:a.value.id,blockStore:i}):(0,Qa.K)(a.spaceRole)),[a,m,i]),b=(0,d.VK)((()=>i.getSpaceId()),[i]),M=(0,d.VK)((()=>ft.KP()&&u&&u.length>0),[u]),w=(0,r.useCallback)((()=>{if(M){const e=!1===h;f(!h),e&&ke.dSV(g,{share_menu_session_id:F.ZP.state.sessionId,type:"user",userId:a.value.id})}}),[g,M,h,f,a]),C=(0,c.yK)((e=>({permissionRoleButton:{marginRight:-6,color:e.mediumTextColor,fontSize:12},container:{whiteSpace:"nowrap",fontWeight:$.Z.fontWeight.bold},cellMemberAvatarContainer:{paddingTop:8,paddingBottom:8},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle"},recordTitle:{display:"inline"},tooltip:{maxWidth:180},expandablePermissionList:{paddingLeft:24},roundedPermissionItem:{borderRadius:3,overflow:"hidden",marginRight:4}})),[]);return s()(be.Z,{delayThreshold:0,placement:be.Z.Placement.Left,textWrap:!0,style:C.tooltip,renderTooltip:()=>s()(dn,{blockStore:i,blockPermissionItem:o}),render:a=>r.createElement(r.Fragment,null,r.createElement("div",a,r.createElement(Ke.Z,n()({},e,(0,$a.Z)(e,{onClick:w}),{ref:t,title:s()(Qa.Z,{isLarge:!0,actorStore:v,containerStyle:C.cellMemberAvatarContainer,spaceRole:S,caption:M&&h?s()(cn,{}):void 0}),right:s()(La.d,{table:y.iU,disabled:!0,icon:M?h?Hi.R:Ra:void 0,role:o.role??"none",isRemovable:!1,isCurrentUser:!1,buttonStyle:C.permissionRoleButton})}))),M&&h&&s()("div",{style:C.expandablePermissionList},void 0,null==u?void 0:u.map(((e,t)=>{const a=e.permissionItem.type;let n=null;switch(a){case"space_permission":n=s()(va,{store:i,spacePermission:e,permissionItemArgs:p,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_owner_permission":n=s()(Ba,{store:i,blockTeamOwnerPermission:e,isExternalTeam:!0,permissionItemArgs:p,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_permission":n=s()(Pa,{store:i,blockTeamPermission:e,isExternalTeam:!0,permissionItemArgs:p,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_guest_permission":n=s()(_a,{store:i,blockTeamGuestPermission:e,isExternalTeam:!0,permissionItemArgs:p,fromPermissionWrapper:"expandable_permission"});break;case"group_permission":n=s()(ni,{store:i,spaceId:b,groupPermission:e,permissionItemArgs:p,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"user_permission":n=s()(ui,{store:i,userPermission:e,permissionItemArgs:p,spaceVisibleUserMap:m,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"public_permission":case"bot_permission":case"deleted_permission":case"restricted_permission":case"exclusive_user_permission":break;case"team_owner_permission":case"team_permission":break;default:(0,V.t1)(a)}return s()("div",{style:C.roundedPermissionItem},t,n)}))))})})),ln=r.forwardRef(((e,t)=>{const{inviteTarget:i}=e,a=i.type;switch(a){case"group":return r.createElement(sn,n()({},e,{ref:t,inviteTarget:i}));case"existingUser":return r.createElement(rn,n()({},e,{ref:t,inviteTarget:i}));default:(0,V.t1)(a)}}));function dn(e){window.__c={n:"InPageItemTooltip"};const{blockStore:t,blockPermissionItem:i}=e,a=(0,l.O7)(),n=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),o=(0,d.VK)((()=>{if(n)return(0,vi.Wd)(a,n)}),[a,n]),m=(0,d.VK)((()=>{const e=i.type;if("explicit_team_permission"===e||"explicit_team_owner_permission"===e||"explicit_team_guest_permission"===e){return _.zX.createChildStore(t,{table:b.e0,id:i.team_id})}}),[t,i]),p=(0,d.VK)((()=>null==m?void 0:m.getIcon()),[m]),g=(0,c.yK)((()=>({container:{fontWeight:$.Z.fontWeight.bold,...$.Z.textOverflowStyle},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle"},recordTitle:{display:"inline"}})),[]),h=i.type;return"space_permission"===h?s()(u.FormattedMessage,{id:"shareMenu.searchResult.spacePermission.tooltip",defaultMessage:"Everyone at {spaceIconAndName} has access.",values:{spaceIconAndName:s()("span",{style:g.container},void 0,o&&s()(ti.Z,{disabled:!0,icon:o,isEmptyPage:!1,size:12,style:g.recordIcon}),n&&s()(xi.Z,{store:n,style:g.recordTitle}))}}):"explicit_team_owner_permission"===h?s()(u.FormattedMessage,{id:"shareMenu.searchResult.teamPermission.tooltip",defaultMessage:"Teamspace owners of {teamIconAndName} have access.",values:{teamIconAndName:s()("span",{style:g.container},void 0,p&&s()(ti.Z,{disabled:!0,icon:p,isEmptyPage:!1,size:12,style:g.recordIcon}),m&&s()(xi.Z,{store:m,style:g.recordTitle}))}}):"explicit_team_permission"===h?s()(u.FormattedMessage,{id:"shareMenu.searchResult.teamMemberPermission.tooltip",defaultMessage:"Teamspace members of {teamIconAndName} have access.",values:{teamIconAndName:s()("span",{style:g.container},void 0,p&&s()(ti.Z,{disabled:!0,icon:p,isEmptyPage:!1,size:12,style:g.recordIcon}),m&&s()(xi.Z,{store:m,style:g.recordTitle}))}}):"explicit_team_guest_permission"===h?s()(u.FormattedMessage,{id:"shareMenu.searchResult.teamGuestPermission.tooltip",defaultMessage:"Teamspace guests of {teamIconAndName} have access.",values:{teamIconAndName:s()("span",{style:g.container},void 0,p&&s()(ti.Z,{disabled:!0,icon:p,isEmptyPage:!1,size:12,style:g.recordIcon}),m&&s()(xi.Z,{store:m,style:g.recordTitle}))}}):"group_permission"===h?s()(u.FormattedMessage,{id:"shareMenu.searchResult.groupPermission.tooltip",defaultMessage:"This group has access."}):"user_permission"===h||"exclusive_user_permission"===h||"public_permission"===h||"restricted_permission"===h||"deleted_permission"===h||"team_permission"===h||"team_owner_permission"===h||"bot_permission"===h?r.createElement(r.Fragment,null,v.YX(i.role??"none")&&s()(u.FormattedMessage,{id:"shareMenu.searchResult.userPermission.tooltip",defaultMessage:"This user has access"})):void(0,V.t1)(h)}function cn(){return s()(u.FormattedMessage,{id:"shareMenu.inPageSearchResult.caption",defaultMessage:"Permission from"})}function un(e){window.__c={n:"CircleCheckmark"};const{checked:t}=e,i=(0,c.yK)((e=>({circleCheckmark:{display:"flex",justifyContent:"center",alignItems:"center",width:22,height:22,borderRadius:"50%",borderStyle:"solid",borderWidth:1.75,borderColor:t?z.ZP.blue:e.buttonPressedBackground,backgroundColor:t?z.ZP.blue:"transparent",marginRight:6},checkIcon:{height:12,width:12,color:"white"}})),[t]);return s()("div",{style:i.circleCheckmark},void 0,t&&(0,ja.e)(i.checkIcon))}const mn=r.forwardRef(((e,t)=>{window.__c={n:"NotInPageGroupResultItem"};const{inviteTarget:i,isInInviteTargets:a,disabled:o}=e,l=(0,u.useIntl)(),m=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),p=(0,d.VK)((()=>(0,Xt.kF)({group:i.value,intl:l})),[i,l]),g=(0,d.VK)((()=>{if(m&&i.value.icon)return{pointer:{table:m.table,id:m.id},icon:i.value.icon}}),[m,i]),h=(0,d.VK)((()=>{if(!m)return 0;return(0,Xt.rm)({group:i.value,spaceStore:m,limit:void 0}).totalNumberMembers}),[m,i]),f=(0,c.yK)((()=>({titleContainer:{display:"flex",alignItems:"center",paddingTop:8,paddingBottom:8,marginLeft:2,minHeight:36},groupInfoContainer:{display:"flex",flexDirection:"column"},nameAndIconContainer:{display:"flex",alignItems:"center"},groupNameLabel:{marginLeft:10,marginRight:4},groupMembersLabel:{marginLeft:10}})),[]),v=s()("div",{style:f.titleContainer},void 0,s()(ei.Z,{size:32}),s()("div",{style:f.groupInfoContainer},void 0,s()("div",{style:f.nameAndIconContainer},void 0,s()(L.Z,{style:f.groupNameLabel},void 0,p),Boolean(null==g?void 0:g.icon)&&s()(ti.Z,{disabled:!0,bucket:"public",title:p,icon:g,size:18,isEmptyPage:!1})),s()(L.Z,{isSmall:!0,style:f.groupMembersLabel},void 0,s()(u.FormattedMessage,{defaultMessage:"Group",id:"blockPermissionsSettings.groupPermission.label"})," · ",s()(u.FormattedMessage,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:h}}))));return r.createElement(Ke.Z,n()({},e,{ref:t,title:v,right:s()(un,{checked:a}),disabled:o}))})),pn=r.forwardRef(((e,t)=>{window.__c={n:"NotInPageUserResultItem"};const{inviteTarget:i,blockStore:a,isInInviteTargets:o,disabled:l,spaceVisibleUserMap:u,...m}=e,p=(0,c.yK)((()=>({cellMemberAvatarContainer:{paddingTop:8,paddingBottom:8},iconBox:{position:"absolute",bottom:-3,right:-3},iconBoxImage:{background:"white",padding:2,borderRadius:"100%"}})),[]),g=(0,d.VK)((()=>"existingUser"===i.type?Qt({spaceVisibleUserMap:u,userId:i.value.id,blockStore:a}):void 0),[i,u,a]),h=(0,r.useMemo)((()=>"existingUser"===i.type?{actorStore:_.U6.createChildStore(a,{table:Gt.KJ,id:i.value.id}),avatar:void 0}:"newUser"===i.type?{actorStore:void 0,avatar:{email:i.value.email,name:"slack"===i.source?i.value.name:void 0,avatarUrl:"slack"===i.source?i.value.avatar_url:void 0}}:void(0,V.t1)(i)),[i,a]);return r.createElement(Ke.Z,n()({},m,{ref:t,title:r.createElement(Qa.Z,n()({isLarge:!0},h,{containerStyle:p.cellMemberAvatarContainer,avatarBadge:"newUser"===i.type&&"slack"===i.source?s()(J.Z,{type:"image_url",imageURL:W.Z.images.externalIntegrations.slackIconPng,size:18,style:p.iconBox,imageStyle:p.iconBoxImage}):void 0,spaceRole:g})),disabled:l,right:!l&&s()(un,{checked:o})}))})),gn=r.forwardRef(((e,t)=>{const{inviteTarget:i,blockStore:a,spaceVisibleUserMap:o}=e,s=i.type;switch(s){case"group":return r.createElement(mn,n()({},e,{ref:t,inviteTarget:i}));case"newUser":case"existingUser":return r.createElement(pn,n()({},e,{ref:t,inviteTarget:i,blockStore:a,spaceVisibleUserMap:o}));default:(0,V.t1)(s)}}));function hn(e){const{styles:t}=e;return s()("div",{style:t.zeroState},void 0,(0,Ya._)(t.zeroStateIcon),s()("div",{style:t.zeroStateText},void 0,s()("div",{style:{fontWeight:$.Z.fontWeight.semibold,marginBottom:4}},void 0,s()(u.FormattedMessage,{id:"shareMenuSearchRequest.noImportedContacts.title",defaultMessage:"No contacts found"})),s()("div",{},void 0,s()(u.FormattedMessage,{id:"shareMenuSearchRequest.noImportedContacts.text",defaultMessage:"Try connecting a different Slack workspace or typing an email address"}))))}function fn(e){const{styles:t,shouldShowSlackMessage:i}=e;return s()("div",{style:t.zeroState},void 0,qa(t.zeroStateIcon),s()("div",{style:t.zeroStateText},void 0,s()("div",{style:{fontWeight:$.Z.fontWeight.semibold,marginBottom:4}},void 0,s()(u.FormattedMessage,{id:"shareMenuSearchRequest.noSuggestions.title",defaultMessage:"Search or add people"})),s()("div",{},void 0,s()(u.FormattedMessage,i?{id:"shareMenuSearchRequest.noSuggestions.text",defaultMessage:"Try connecting a Slack workspace or typing an email address"}:{id:"shareMenuSearchRequest.noSuggestions.defaultText",defaultMessage:"Try typing an email address"}))))}const vn=function(e){window.__c={n:"ShareMenuSearchRequest"};const t=(0,l.O7)(),i=(0,u.useIntl)(),[a,o]=(0,r.useState)(!0),s=(0,d.VK)((()=>e.inviteTargetsStore.state.tokenQuery),[e.inviteTargetsStore]),c=(0,d.VK)((()=>{if(e.shouldShowSlackOnly)return{userLimit:0,botLimit:0,groupLimit:0,importContactLimit:e.sectionRenderLimit};const t=Mt.Z.completeSlackAuthentications.state.length>0&&ft.Rv();return{userLimit:e.sectionRenderLimit,botLimit:0,groupLimit:e.shouldShowGroups?e.sectionRenderLimit:0,importContactLimit:t?e.sectionRenderLimit:0}}),[e.sectionRenderLimit,e.shouldShowGroups,e.shouldShowSlackOnly]),[{value:m,status:p}]=(0,Ha.r5)((async()=>gt.jL({query:s,sectionLimit:c,membersOnly:e.membersOnly,environment:t,intl:i}).finally((()=>o(!1)))),[t,i,e.membersOnly,s,c],{debounce:40});return r.createElement(nn,n()({},e,{tokenQuery:s,showShimmer:a,ready:"pending"!==p,error:"rejected"===p,result:m}))};function yn(e){window.__c={n:"InviteContent"};const t=(0,l.O7)(),i=(0,d.qz)(e.inviteTargetsStore,U.ZP),a=(0,d.VK)((()=>i.state.inviteTargets),[i]),{display:n,source:o,focus:u,emailMessage:m}=(0,d.VK)((()=>{const{display:e}=F.ZP.state;return e===F.wV.Invite?F.ZP.state:{display:e,source:void 0,focus:void 0,emailMessage:""}}),[]),p=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),g=(0,d.VK)((()=>o===F.T5.Notion&&0===a.length&&(0,ft.Rv)()),[a.length,o]),h=(0,d.VK)((()=>Mt.Z.completeSlackAuthentications.state),[]),f=(0,r.useCallback)((()=>{i.reset()}),[i]),[v,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(p&&!v&&g){for(const e of h)pt.loadContacts(t,{botId:e.id,spaceId:p.id,integrationId:ut.nO}).catch((e=>{}));y(!0)}}),[g]);const S=n===F.wV.Invite&&a.length>0,b=(0,c.yK)((()=>({scroller:{flexGrow:1}})),[]);return n!==F.wV.Invite?null:r.createElement(r.Fragment,null,s()(kt.Z,{type:bt.Z.Y,style:b.scroller},void 0,s()(vn,{inviteTargetsStore:i,store:e.store,menuListStore:e.menuListStore,shouldShowGroups:!0,shouldShowSlackOnly:o===F.T5.Slack,membersOnly:!1,sectionRenderLimit:10,calculatedPermissions:e.calculatedPermissions,permissionItemArgs:e.permissionItemArgs})),g&&s()(Et,{onClickAuthenticated:()=>{F.ZP.setState({...F.ZP.state,tab:F.XF.Share,display:F.wV.Invite,focus:F.Sw.Search,source:F.T5.Slack,emailMessage:m}),i.setState({...i.state,tokenQuery:""})}}),s()(wn,{open:S&&!g,focus:u===F.Sw.Message,value:m,onFocus:()=>{o&&n===F.wV.Invite&&F.ZP.setState({...F.ZP.state,focus:F.Sw.Message,tab:F.XF.Share,display:n,source:o,emailMessage:m})},onChange:e=>{F.ZP.setState({...F.ZP.state,focus:u,tab:F.XF.Share,display:n,source:o,emailMessage:e.target.value})},onCancel:async()=>{await ht.zd({environment:t,inviteTargetsStore:i})&&(ht.a6(t),f())},maxLength:1e3}))}function Sn(e){window.__c={n:"InviteSection"};const{store:t,menuListStore:i,sudoModeStore:a,contextualInviteStore:o}=e,m=(0,l.O7)(),p=(0,u.useIntl)(),g=(0,d.qz)(e.inviteTargetsStore,U.ZP),{display:h,source:f,focus:v,emailMessage:y}=(0,d.VK)((()=>{const{display:e}=F.ZP.state;return e===F.wV.Invite?F.ZP.state:{display:e,source:void 0,focus:void 0,emailMessage:""}}),[]),S=()=>{g.reset(),F.ZP.setState({...F.ZP.state,tab:F.XF.Share,display:F.wV.MainShareMenu})},[b,M]=(0,r.useState)("editor"),_=(0,d.VK)((()=>t.getType()),[t]),k=(0,d.VK)((()=>o.state.flowId),[o]),T=(0,d.VK)((()=>g.state.inviteTargets),[g]),I=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),P=(0,d.VK)((()=>new Set(null==I?void 0:I.getEmailDomains())),[I]),x=(0,d.VK)((()=>{const{data:e}=Ct.default.state,t=e?Pe.CM(e):[],i={};return t.forEach((e=>{i[e.userId]=e})),i}),[]),A=e=>!vt.$s({contextualInviteUser:e,allowedDomains:P}),E=(0,d.VK)((()=>t.canEditMembership()),[t]),B=(0,d.VK)((()=>{const e=T.filter((e=>{let{type:t}=e;return"newUser"===t})).map((e=>{let{value:t}=e;return t.email})),t=T.filter((e=>{let{type:t}=e;return"existingUser"===t})).map((e=>{let{value:t}=e;return t.id}));return w.dA(m,[...e,...t])}),[m,T]),R=(0,yt.Z)(t),D=(0,d.VK)((()=>{const e=R.isStoreInTeam&&!R.teamAllowsGuests,t=!R.isStoreInTeam&&!R.spaceAllowsGuests||R.isStoreInTeam&&!R.teamAllowsGuests&&!R.spaceAllowsGuests,i=T.some((e=>"newUser"===e.type||("existingUser"===e.type?"none"===e.spaceRole||"not_in_space"===e.spaceRole:void 0)));return(e||t)&&i}),[T,R]),L=(0,d.VK)((()=>{const{currentSpaceStore:e}=C.default.state;return(0,ft.gp)({currentSpaceStore:e})}),[]),N=(0,r.useCallback)((e=>{const t=e.type;if("existingUser"===t){const t=x[e.value.id];if(!t)return!0;return"none"===t.role&&!t.isTeamGuest&&t.isPageGuest}return"newUser"===t||"group"!==t&&void 0}),[x]),O=(0,d.VK)((()=>{if(!I)return"control";if(!(0,vt.ch)({environment:m,spaceStore:I,contextualInviteStore:o}))return"control";return T.filter(N).length>0?(0,ft.kG)(m):"control"}),[T,m,N,I,o]),W=(0,St.i)(t),K=y.length>1e3,H=T.length>0,G=(0,c.yK)((()=>({permissionsRoleSelectButton:{display:"flex",whiteSpace:"nowrap",height:20,margin:0,borderRadius:3,color:z.ZP.uiGray}})),[]);async function q(){const e=T.filter(N),i=T.filter((e=>!N(e)));"control"===O?await ht.qg({environment:m,intl:p,inviteOrigin:"page_share_modal",role:b,emailMessage:y,inviteTargetsStore:g,blockStore:t,sudoModeStore:a,flowId:o.state.flowId,onInviteClick:()=>{S(),(e=>{o.setState({...o.state,invitedUsers:e.filter(N).map(vt.Si).filter(V.$K).filter(A)}),I&&vt.fr({environment:m,spaceStore:I,contextualInviteStore:o})})(T)},onInviteComplete:e=>ht.Cv({success:e,inviteTargets:T})}):(i.length>0&&(g.setState({...g.state,inviteTargets:i}),await ht.qg({environment:m,intl:p,inviteOrigin:"page_share_modal",role:b,emailMessage:y,inviteTargetsStore:g,blockStore:t,sudoModeStore:a,flowId:o.state.flowId,onInviteClick:()=>{g.reset()},onInviteComplete:e=>ht.Cv({success:e,inviteTargets:i})})),((e,t,i,a)=>{o.setState({...o.state,invitedUsers:e.filter(N).map(vt.Si).filter(V.$K).filter(A),inviteTargets:e,shareModalGuestMemberConfirmationExpGroup:t,callbackAsyncFn:i,resetShareMenuFn:a}),I&&(vt.fr({environment:m,spaceStore:I,contextualInviteStore:o}),o.setState({...o.state,selection:Z.uq.closed}))})(T,O,(async()=>(g.setState({...g.state,inviteTargets:e}),await ht.qg({environment:m,intl:p,inviteOrigin:"page_share_modal",role:b,emailMessage:y,inviteTargetsStore:g,blockStore:t,sudoModeStore:a,flowId:o.state.flowId,onInviteClick:()=>{S()},onInviteComplete:t=>ht.Cv({success:t,inviteTargets:e})}))),(()=>{S()})))}async function j(){void 0===i.state.focus.indexGlobal&&void 0===i.state.focus.indexLocal&&void 0===i.state.focus.section&&await q()}let Y;return Y=D?W:K?s()(u.FormattedMessage,{id:"shareMenu.inviteButton.emailOverMaxLength.tooltip",defaultMessage:"Message exceeds the limit of 1000 characters."}):void 0,s()(be.Z,{disableTooltip:E,renderTooltip:()=>{if(!E)return s()(u.FormattedMessage,{id:"shareMenu.inviteButton.fullAccessOnlyMessage.tooltip",defaultMessage:"Only those with full access can add people."})},render:e=>r.createElement("div",n()({style:{display:"flex"}},e),s()(Vt,{store:t,inviteTargetsStore:g,flowId:k,disabled:!E,origin:"share_menu_v2",focus:v===F.Sw.Search,hideIconColorAndTooltips:"control"!==O,onFocus:()=>{F.ZP.setState({...F.ZP.state,tab:F.XF.Share,display:F.wV.Invite,focus:F.Sw.Search,source:f||F.T5.Notion,emailMessage:y||""}),ke.yEH(m,{source:f||F.T5.Notion})},onSubmit:j,placeholder:L?p.formatMessage({id:"shareMenu.inviteTargetsInput.placeholder.exp",defaultMessage:"Email or group, separated by commas"}):p.formatMessage({id:"shareMenu.inviteTargetsInput.placeholder",defaultMessage:"Add people, groups, or emails..."}),right:H&&s()(Tt.ZP,{disabled:!E,role:b,table:"block",type:"user_permission",blockType:_,isInvite:!0,upgradeButtonName:"invite_permission_block",buttonStyle:G.permissionsRoleSelectButton,isMenuItem:!1,onChange:e=>M(e)})}),B?s()(bn,{onClick:()=>gt.Vu({environment:m,upgradeButtonName:"user_permission_item"})}):s()(Mn,{tooltip:Y,disabled:!E||D||K,onClick:async()=>{h!==F.wV.MainShareMenu?await q():F.ZP.setState({...F.ZP.state,tab:F.XF.Share,display:F.wV.Invite,focus:F.Sw.Search,source:F.T5.Notion,emailMessage:""})}}))})}function bn(e){const{onClick:t}=e;return s()(be.Z,{disableTooltip:!1,renderTooltip:()=>s()(It.e,{}),render:e=>r.createElement(ue.Z,n()({isLarge:!0,style:{marginLeft:8},onClick:t},e),s()(u.FormattedMessage,{id:"shareMenu.inviteButton.upgrade",defaultMessage:"Upgrade"}))})}function Mn(e){const{tooltip:t,disabled:i,onClick:a}=e;return s()(be.Z,{disableTooltip:!Boolean(t),renderTooltip:()=>t,render:e=>r.createElement(ue.Z,n()({isLarge:!0,style:{marginLeft:8},disabled:i,onClick:a},e),s()(u.FormattedMessage,{id:"shareMenu.inviteButton.invite",defaultMessage:"Invite"}))})}function wn(e){window.__c={n:"EmailMessageInput"};const{open:t,focus:i,value:a,maxLength:n,onFocus:o,onChange:r,onCancel:l}=e,d=(0,u.useIntl)(),m=a.length/n>=.8,p=(0,mt.TQ)(a),g=m||p,h=(0,c.yK)((e=>({container:{maxHeight:t?100:0,position:"absolute",bottom:0,width:"100%",backgroundColor:e.modalBackground,pointerEvents:t?"all":"none",transitionProperty:"max-height",transitionDuration:"0.3s",boxShadow:"0px -4px 4px rgba(0, 0, 0, 0.03)",overflow:"hidden",zIndex:1},input:{maxHeight:t?100:0,borderTop:1,borderTopStyle:"solid",borderTopColor:e.regularDividerColor,padding:18,fontSize:14,transitionProperty:"max-height",transitionDuration:"0.3s"}})),[t]),f=d.formatMessage({id:"shareMenu.emailMessageInput.placeholder",defaultMessage:"Add a message to your invite..."});return s()("div",{style:h.container},void 0,g&&s()(Cn,{value:a,maxLength:n,shouldShowLengthWarning:m,shouldShowLinkWarning:p}),s()(Ae.Z,{textarea:!0,focusInitial:!1,format:Ae.B.Transparent,placeholder:f,maxlength:n,focus:i,value:a,onFocus:o,onChange:r,inputStyle:h.input,onCancel:l}))}function Cn(e){window.__c={n:"EmailMessageWarning"};const{shouldShowLengthWarning:t,shouldShowLinkWarning:i,value:a,maxLength:n}=e,o=(0,c.yK)((e=>({container:{position:"absolute",top:0,display:"flex",justifyContent:"center",fontSize:12,color:e.lightTextColor,width:"100%"},warning:{display:"flex",justifyContent:"center",width:"calc(100% - 36px)",backgroundColor:e.modalBackground,marginTop:1}})),[]);return s()("div",{style:o.container},void 0,s()("div",{style:o.warning},void 0,t&&s()(u.FormattedMessage,{defaultMessage:"{characters} / {maxCharacters} characters",id:"ContextualInvite.permissions_invites.messageLengthWarning",values:{characters:a.length,maxCharacters:n}}),t&&i&&" · ",i&&s()(u.FormattedMessage,{defaultMessage:"Links will be omitted from your message",id:"ContextualInvite.permissions_invites.removeLinkWarning"})))}const _n=function(e){window.__c={n:"ShareMenuInviteTab"};const{store:t,permissionItemArgs:i,inviteTargetsStore:a}=e,n=(0,l.Fy)(),o=(0,d.qz)(void 0,wt.Z),{display:r}=(0,d.VK)((()=>F.ZP.state),[]),u=(0,c.yK)((()=>({container:{position:"relative",height:r!==F.wV.MainShareMenu?540:"unset",transition:"all",transitionDuration:"0.3s",display:"flex",flexDirection:"column",maxHeight:540},searchBar:{paddingLeft:14,paddingRight:14,paddingBottom:8}})),[r]);return s()(_t.Z,{capture:!0,onTab:function(e){e.preventDefault(),n.isMobile||r!==F.wV.MainShareMenu||F.ZP.setState({...F.ZP.state,tab:F.XF.Share,display:F.wV.Invite,focus:F.Sw.Search,source:F.T5.Notion,emailMessage:""})}},void 0,s()("div",{style:u.container},void 0,s()("div",{style:u.searchBar},void 0,n.isMobile?s()(Ht,{store:t,permissionItemArgs:i}):s()(Sn,{store:t,inviteTargetsStore:a,menuListStore:o,sudoModeStore:i.sudoModeStore,contextualInviteStore:e.contextualInviteStore})),r===F.wV.MainShareMenu&&s()(Ka,{store:t,calculatedPermissions:e.calculatedPermissions,buttonPopupStore:e.buttonPopupStore,permissionItemArgs:i}),r===F.wV.Invite&&!n.isMobile&&s()(yn,{store:t,inviteTargetsStore:a,menuListStore:o,calculatedPermissions:e.calculatedPermissions,permissionItemArgs:e.permissionItemArgs})))};var kn=i(62397);const Tn=function(e){window.__c={n:"WorkspaceOwnerPermissionOverride"};const{store:t,sudoModeStore:i}=e,a=(0,d.VK)((()=>i.state.changePermissionsEnabled),[i]),n=(0,d.VK)((()=>i&&i.shouldUserHaveAccessToPrivatePageBlock()&&!i.doesUserAlreadyHaveEditorAccessOnBlock(t.id)&&i.state.privatePageStore),[i,t]),o=(0,c.yK)((e=>({container:{background:e.cardBackground,padding:"12px 18px",boxShadow:e.borderBoxShadow,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"baseline"},button:{fontWeight:$.Z.fontWeight.medium,justifyContent:"center",marginTop:8,opacity:a?.5:1},icon:{width:16,height:16,marginRight:6,transition:"all 200ms ease",transform:a?"rotate(-90deg)":void 0}})),[a]);return n?s()("div",{style:o.container},void 0,s()(L.Z,{isMultiline:!0},void 0,s()(u.FormattedMessage,{id:"blockPermissionsSettings.workspaceOwner.canChangePermissionsMessage",defaultMessage:"As a <b>workspace owner</b>, you can change the permissions of this page to add yourself or others. Any changes will appear in the audit log.",values:{b:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s()("b",{},void 0,t)}}})),s()(Se.Z,{disabled:a,style:o.button,onClick:()=>{i.setState({...i.state,changePermissionsEnabled:!0})}},void 0,(0,kn.I)(o.icon),s()(u.FormattedMessage,a?{id:"blockPermissionsSettings.workspaceOwner.isChangingPermissionsMessageButton",defaultMessage:"Changing permissions"}:{id:"blockPermissionsSettings.workspaceOwner.canChangePermissionsMessageButton",defaultMessage:"Change permissions"}))):null};function In(e){window.__c={n:"ShareMenuContent"};const t=(0,d.VK)((()=>F.ZP.state.tab),[]);switch(t){case F.XF.Share:return r.createElement(_n,e);case F.XF.Publish:return s()(ct,{store:e.store,permissionItemArgs:e.permissionItemArgs,mostPermissivePublicItem:e.calculatedPermissions.mostPermissivePublicItem});default:(0,V.t1)(t)}}const Pn=function(e){window.__c={n:"ShareMenu"};const{store:t,permissionItemArgs:i}=e,a=(0,l.Fy)(),o=(0,d.qz)(e.inviteTargetsStore,U.ZP),u=(0,c.yK)((()=>({container:{display:"flex",flexDirection:"column",height:"100%"}})),[]);return s()("div",{style:u.container},void 0,i.sudoModeStore&&s()(Tn,{store:t,sudoModeStore:i.sudoModeStore}),!a.isMobile&&s()(ie,{inviteTargetsStore:o,mostPermissivePublicItem:e.calculatedPermissions.mostPermissivePublicItem}),r.createElement(In,n()({inviteTargetsStore:o},e)))};function xn(){window.__c={n:"OfflineMessage"};const e=(0,l.Fy)(),t=(0,c.yK)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"center",height:160}})),[]);return s()("div",{style:t.container},void 0,s()(L.Z,{isMobile:e.isMobile,isSecondaryColor:!0,isMultiline:!0},void 0,s()(u.FormattedMessage,{defaultMessage:"Please go online to publish & share.",id:"blockPermissionsSettings.offline.prompt"})))}const Zn=function(e){window.__c={n:"ShareMenuContainer"};const{store:t,sudoModeStore:i,onUpgradeButtonClick:a,location:o}=e,h=(0,l.Fy)(),f=(0,d.qz)(void 0,A.Z),{contextualInviteStore:v}=(0,d.VK)((()=>f.state),[f]),y=(0,d.VK)((()=>C.default.state.currentSpaceStore),[]),S=(0,d.VK)((()=>P({spaceStore:y,store:t})),[y,t]),b=(0,d.VK)((()=>v.state.inviteStage),[v]),M=(0,d.VK)((()=>F.ZP.state.tab),[]),w=(0,c.yK)((()=>({title:{fontSize:18},topbarStyle:{paddingTop:15,paddingBottom:15,height:"auto"}})),[]),_=(0,r.useMemo)((()=>({onUpgradeButtonClick:a,sudoModeStore:i,location:o})),[a,i,o]);if(!y)return null;if(!h.isMobile&&(b===Z.TG.share_workspace||b===Z.TG.request_workspace))return s()(O.Z,{blockStore:t,spaceStore:y,contextualInviteStore:v});const k=h.isMobile?{menuType:p.og.Modal,disableHeaderShadow:!0,title:s()(L.Z,{isMobile:h.isMobile,style:w.title},void 0,s()(u.FormattedMessage,{defaultMessage:"Share",id:"blockPermissionsSettings.mobileShareMenu.title"})),additionalTopbarContent:s()(ne,{mostPermissivePublicItem:S.mostPermissivePublicItem}),left:s()(N.Z,{href:(0,g.UY)("guides.sharing"),analyticsFrom:"sharing"}),footer:M===F.XF.Share&&s()(ua,{store:t,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:S,permissionItemArgs:_}),topbarStyle:w.topbarStyle,right:s()(D.DoneMenuText,{}),onClickRight:e.onClose,whiteBackground:!0}:{menuType:p.og.Popup,maxHeight:"90vh"};return r.createElement(r.Fragment,null,r.createElement(R.Z,n()({},k,{className:m.B8p}),s()(E.Z,{capture:!0,allowEsc:!0},void 0,s()(B.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!1,focusOffscreenInput:!1,render:()=>x.Z.state.online?s()(Pn,{store:t,permissionItemArgs:_,calculatedPermissions:S,buttonPopupStore:e.buttonPopupStore,inviteTargetsStore:e.inviteTargetsStore,contextualInviteStore:v}):s()(xn,{})}))))}},20239:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(42875),l=i(72126),d=i(94044),c=i(5366),u=i(4708),m=i(79817),p=i(87279),g=i(45101),h=i(65598),f=i(38755),v=i(95697),y=i(4023),S=i(80444),b=i(85834),M=i(52878),w=i(74194),C=i(78140),_=i(89728),k=i(53437),T=i(57806),I=i(32357),P=i(480),x=i(86628),Z=i(24405),F=i(84169),A=i(50906),E=i(18514),B=i(16354),R=i(64369);function D(e){window.__c={n:"LearnAboutSharingLink"};const t=(0,P.O7)(),{device:i,WindowSizeStore:a}=t,o=(0,x.VK)((()=>({left:a.getSafePaddingLeftCSS(8),right:a.getSafePaddingRightCSS(12)})),[a]),s=(0,x.VK)((()=>(0,v.bq)()),[]),r=(0,Z.yK)((e=>({button:{display:"flex",alignItems:"center",width:i.isMobile?"100%":void 0,height:i.isMobile?44:24,paddingTop:i.isMobile?12:4,paddingBottom:i.isMobile?12:4,paddingLeft:o.left,paddingRight:o.right},helpIcon:{width:i.isMobile?16:14,height:i.isMobile?16:14,fill:i.isMobile?e.mediumIconColor:e.lightIconColor}})),[i.isMobile,o]);return n()(B.Z,{href:(0,E.UY)("guides.sharing"),onClick:()=>A.Fsx(t,{from:"sharing"}),style:{width:i.isMobile?"100%":void 0},external:!0},void 0,n()(_.Z,{mobileFeedback:i.isMobile,isSmall:!0,style:{...r.button,...e.style},disabled:Boolean(e.disableHover)},void 0,n()("div",{style:{marginLeft:i.isMobile?2:0,marginRight:i.isMobile?8:6}},void 0,(0,F.m)(r.helpIcon)),n()(R.Z,{isSmall:!0,isMobile:i.isMobile,isSecondaryColor:!i.isMobile},void 0,n()(c.FormattedMessage,s?{defaultMessage:"Learn more",id:"blockPermissionsSettings.learnMore.prompt"}:{defaultMessage:"Learn about sharing",id:"blockPermissionsSettings.learnAboutSharing.prompt"}))))}D.displayName="LearnAboutSharingLink";const L=D;class N extends s.Z{constructor(){super(...arguments),this.storeTypes={universalInviteStore:M.Z},this.renderEmailInput=this.createComputedStore((()=>"milestone_2"===this.props.mode))}renderComponent(){const{universalInviteStore:e}=this.stores,{permissionsInviteStore:t,contextualInviteStore:i}=e.state,a=e.stage,{spaceStore:s}=this.props;if(this.environment.device.isMobile||a===b.TG.closed)return null;if(!(0,h.Mm)(this.props.store)&&(a===b.TG.share_workspace||a===b.TG.request_workspace))return n()(I.Z,{blockStore:this.props.store,spaceStore:s,contextualInviteStore:i});if(a===b.TG.share_page){const a={...this.props,renderInShareMenu:!0,spaceStore:s,permissionsInviteStore:t,contextualInviteStore:i,onInviteClick:()=>{(0,v.$)(this.environment)?i.setState({...i.state,inviteStage:b.TG.closed}):m.fr({environment:this.environment,spaceStore:s,contextualInviteStore:i})},onInviteComplete:e=>{m.x5({success:e,intl:this.props.intl,contextualInviteStore:i})},onCancel:async()=>{await(0,g.Aw)({environment:this.environment,permissionsInviteStoreState:t.state,from:"share_menu"})||e.reset()}};return this.renderEmailInput.state?o.createElement(O,a):o.createElement(T.default,a)}}}N.displayName="UniversalMemberInvite";class O extends T.PermissionsInviteBase{constructor(){super(...arguments),this.inviteTargetLength=this.createComputedStore((()=>this.stores.permissionsInviteStore.state.inviteTargets.length)),this.blockTitle=this.createComputedStore((()=>{if((0,h.Mm)(this.props.store))return"";const e=this.props.store;if(!e.isDefined())return"";const t=e.getModel().getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,r.r)(),intl:this.props.intl});return t||e.getModel().getEmptyTitlePlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,r.r)(),intl:this.props.intl})})),this.handleInviteInputSubmit=async()=>{const{permissionsInviteStore:e}=this.stores;"invitee"===e.state.inputFocus?e.setState({...e.state,inputFocus:"email-content"}):await super.handleInviteInputSubmit()},this.resetFocusOnClickEmpty=e=>{const{permissionsInviteStore:t}=this.stores;e.currentTarget===e.target&&t.setState({...t.state,inputFocus:"none"})}}renderComponent(){return this.renderInShareMenu.state?this.renderUniversalInviteInner():super.renderComponent()}renderUniversalInviteInner(){const{permissionsInviteStore:e}=this.stores;return n()("div",{style:this.getContainerStyle(),onClick:this.resetFocusOnClickEmpty},void 0,n()(k.ZP,{popupType:k.kQ.Popup,alignmentToOrigin:y.v.Start,placementToOrigin:y.u.Bottom,open:"invitee"===e.state.inputFocus,originGap:10,disableMouseCapture:!0,forceRemeasureStore:this.inviteTargetLength,origin:super.renderHeader(),onDismiss:()=>{e.setState({...e.state,inputFocus:"email-content"})},render:()=>{const e=super.renderSearchRequest(),t={menuType:p.og.Popup,disableScroller:!1};return n()("div",{},void 0,o.createElement(C.Z,t,e))},style:{width:360}}),this.renderEmailMessageInput(),this.renderSinglePlayerOptions(),this.renderActions())}renderEmailMessageInput(){const{permissionsInviteStore:e}=this.stores,t=this.getEmailMessage(),{inputFocus:i,emailMessage:a}=e.state,o=a.length/d.vr>=.8,s=(0,d.TQ)(a),r=o||s,l=(0,u._6)(this.environment),c="email-content"===i;return n()(w.Z,{textarea:!0,value:a,focus:c,focusInitial:!1,maxlength:d.vr,onFocus:()=>{e.setState({...e.state,inputFocus:"email-content"})},style:{background:c?"none":this.theme.inputBackground,alignItems:"flex-start",paddingLeft:12,paddingRight:12,paddingTop:8,paddingBottom:r?34:12},inputStyle:{minHeight:l?80:100},placeholder:t,onChange:t=>{e.setState({...e.state,emailMessage:t.target.value})},right:r&&this.renderMessageWarning({shouldShowLengthWarning:o,shouldShowLinkWarning:s}),isRightLastElementOfInput:!0,onSubmit:async()=>{await super.handleInviteClick()}})}renderSinglePlayerOptions(){if((0,h.Mm)(this.props.store))return null;const{contextualInviteStore:e,permissionsInviteStore:t}=this.stores,{currentSpaceStore:i}=S.default.state;if(!i)return null;if(!(0,v.$)(this.environment))return null;const{inviteTargets:a}=t.state;return!t.state.isInviteTargetsEmpty&&a.some((e=>g.OA(e)))?n()(I.Z,{blockStore:this.props.store,spaceStore:i,contextualInviteStore:e}):null}renderActions(){return n()("div",{style:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",alignItems:"center",width:"100%"},onClick:this.resetFocusOnClickEmpty},void 0,n()("div",{style:{display:"flex",flexDirection:"row-reverse",justifyContent:"flex-end",gap:8}},void 0,this.renderDesktopInputRightInnerButton({isLarge:!1}),n()(_.Z,{style:{minWidth:d.UF,justifyContent:"center"},isLarge:!1,isLightGray:!0,onClick:()=>{var e,t;null===(e=(t=this.props).onCancel)||void 0===e||e.call(t)}},void 0,n()(c.FormattedMessage,{defaultMessage:"Cancel",id:"ContextualInvite.permissions_invites.button.cancel"}))),n()(L,{style:{paddingLeft:0,paddingRight:0},disableHover:!0}))}renderMessageWarning(e){const{permissionsInviteStore:t}=this.stores,{shouldShowLengthWarning:i,shouldShowLinkWarning:a}=e;return n()("span",{style:{fontSize:12,color:this.theme.lightTextColor,position:"absolute",bottom:8,left:12}},void 0,i&&n()(c.FormattedMessage,{defaultMessage:"{characters} / {maxCharacters} characters",id:"ContextualInvite.permissions_invites.messageLengthWarning",values:{characters:t.state.emailMessage.length,maxCharacters:d.vr}}),i&&a&&" · ",a&&n()(c.FormattedMessage,{defaultMessage:"Links will be omitted from your message",id:"ContextualInvite.permissions_invites.removeLinkWarning"}))}getEmailMessage(){const{currentUserStore:e,currentSpaceStore:t}=S.default.state,{permissionsInviteStore:i}=this.stores,{intl:a}=this.props,{inviteTargets:n}=i.state,o=!i.state.isInviteTargetsEmpty&&l.yW(n,g.OA);if(!t)return a.formatMessage(d.VX.default);const s=null==e?void 0:e.getDisplayName(a),r=(0,f.rn)(this.environment,t);if(!s||!r)return a.formatMessage(d.VX.default);return(0,d.jm)({includeOptional:!1,isGuest:o,emailProps:{userName:s,pageName:this.blockTitle.state,spaceName:r},intl:this.props.intl})}getContainerStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",alignItems:"center",minHeight:52,paddingTop:10,paddingBottom:10,paddingLeft:e.getSafePaddingLeftCSS(14),paddingRight:e.getSafePaddingRightCSS(14),flexDirection:"column",gap:10}}}const V=(0,c.injectIntl)(N)},14254:(e,t,i)=>{i.d(t,{o:()=>u});var a=i(23174),n=i.n(a),o=(i(67294),i(480)),s=i(86628),r=i(24405),l=i(82990),d=i(95697),c=i(58260);function u(e){let{teamStore:t,withSelectedStyle:i}=e;window.__c={n:"TeamHeaderLabel"};const a=(0,o.Fy)(),u=(0,s.VK)((()=>{var e;return{teamName:t.getName()??"",shouldShowLock:(0,d.C2)(null==t||null===(e=t.getSettingsStore())||void 0===e?void 0:e.getValue())}}),[t]),m=(0,r.yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},lockIcon:{width:15,marginLeft:6,marginBottom:1,fill:e.mediumIconColor},labelText:{...l.Z.textOverflowStyle,...i?{color:e.regularTextColor,fontWeight:l.Z.fontWeight.semibold}:{color:e.darkTextColor,fontWeight:l.Z.fontWeight.medium},fontSize:a.isMobile?l.Z.fontSize.UIRegular.mobile:l.Z.fontSize.UIRegular.desktop}})),[a.isMobile,i]);return u?n()("div",{style:m.container},void 0,n()("div",{style:m.labelText},void 0,u.teamName),u.shouldShowLock&&n()(c.Z,{iconStyle:m.lockIcon})):null}},26234:(e,t,i)=>{i.d(t,{Z:()=>Z});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(24405),d=i(53877),c=i(64275),u=i(11751),m=i(5366),p=i(39699),g=i(1865),h=i(37181),f=i(38755),v=i(80554),y=i(41168),S=i(8323),b=i(70467),M=i(80444),w=i(64921),C=i(61519),_=i(76844);function k(e,t,i){if(i){if("warning"===t){if("settings"===e)return{disableWarningNotificationInSettings:!0,disableWarningNotificationInSidebar:i.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:i.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:i.disableLimitNotificationInSidebar,expirationDate:i.expirationDate};if("sidebar"===e)return{disableWarningNotificationInSettings:i.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:!0,disableLimitNotificationInSettings:i.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:i.disableLimitNotificationInSidebar,expirationDate:i.expirationDate}}if("limit_reached"===t){if("settings"===e)return{disableWarningNotificationInSettings:i.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:i.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:!0,disableLimitNotificationInSidebar:i.disableLimitNotificationInSidebar,expirationDate:i.expirationDate};if("sidebar"===e)return{disableWarningNotificationInSettings:i.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:i.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:i.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:!0,expirationDate:i.expirationDate}}}return{disableWarningNotificationInSettings:"warning"===t&&"settings"===e,disableWarningNotificationInSidebar:"warning"===t&&"sidebar"===e,disableLimitNotificationInSettings:"limit_reached"===t&&"settings"===e,disableLimitNotificationInSidebar:"limit_reached"===t&&"sidebar"===e,expirationDate:(0,d.Xz)({date:Date.now(),daysToAdd:7})}}const T={padding:"4px 14px 8px 14px",fontSize:12,lineHeight:1.4},I={fontWeight:500,lineHeight:2,display:"flex"},P={fontWeight:400},x={textDecoration:"underline"};const Z=function(e){window.__c={n:"AddOnLimitUsage"};const t=(0,v.MQ)(e.source),i=(0,b.l)(),a=(0,s.O7)(),Z=(0,l.yK)((e=>({empty:{},cancelButton:{background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},dismissButton:{display:"flex",flexDirection:"row-reverse",position:"relative",top:10,right:-6},hovered:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.mediumTextColor}})),[]),{membersCount:F,spaceName:A,settings:E,currentUserSettingsStore:B}=(0,r.VK)((()=>{var e;return{membersCount:(0,y.qX)(),spaceName:M.default.state.currentSpaceStore&&(0,f.rn)(a,M.default.state.currentSpaceStore),settings:null===(e=M.default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.addOnLimitNotifications,currentUserSettingsStore:M.default.state.currentUserSettingsStore}}),[a]),R=(0,r.VK)((()=>i?+i.spaceUsage/i.spaceLimit:0),[i]),{notificationType:D,usageLabelStyles:L}=(0,r.VK)((()=>({notificationType:R>=v.Tq?"limit_reached":"warning",usageLabelStyles:Z.empty})),[R,Z.empty]);if(!B)return null;if(!t)return null;let N;"settings"===e.source&&F>=3&&(null!=E&&E.expirationDate?Date.now()<E.expirationDate&&(N=!0):(!function(e,t){p.createAndCommit({userAction:"addOnLimitNotifications.ai.initializeSettings",environment:e,perform:e=>{h.d2({transaction:e,userSettingsStore:t,data:{addOnLimitNotifications:{disableWarningNotificationInSettings:!1,disableWarningNotificationInSidebar:!1,disableLimitNotificationInSettings:!1,disableLimitNotificationInSidebar:!1,expirationDate:(0,d.Xz)({date:Date.now(),daysToAdd:7})}}})}})}(a,B),N=!0));const O=n()(m.FormattedMessage,"limit_reached"===D?{id:"addOnLimitUsage.description.usedAllFreeResponses.admins",defaultMessage:"{spaceName} has used all their free AI responses.",values:{spaceName:A}}:{id:"addOnLimitUsage.description.approachingLimit.admins",defaultMessage:"{spaceName} has used {spaceUsage} of the {usageLimit} free responses provided to this workspace.",values:{spaceName:A,spaceUsage:(null==i?void 0:i.spaceUsage)??0,usageLimit:(null==i?void 0:i.spaceLimit)??0}});return n()(o.Fragment,{},void 0,function(e){if(e)return n()(C.Z,{size:27,style:{paddingLeft:14,paddingRight:14}});return n()(C.Z,{size:0})}("settings"===e.source),n()(w.Z,{style:T,onClick:()=>function(e,t){g.y(e,{from:"sidebar"===t?"ai_limit_sidebar":"ai_limit_settings",for:(0,S.zt)(),addOnFeature:"ai"})}(a,e.source)},void 0,!N&&n()("div",{style:Z.dismissButton},void 0,n()(w.Z,{onClick:()=>function(e,t,i){var a;const{currentUserSettingsStore:n}=M.default.state;if(!n)return;const o={addOnLimitNotifications:k(t,i,null===(a=n.getSettings())||void 0===a?void 0:a.addOnLimitNotifications)};p.createAndCommit({userAction:"addOnLimitNotifications.ai.markNotificationAsDismissed",environment:e,perform:e=>{h.d2({transaction:e,userSettingsStore:n,data:o})}})}(a,e.source,D),style:Z.cancelButton,hoveredStyle:Z.hovered},void 0,(0,c.D)(Z.closeIcon))),n()("div",{style:I},void 0,(0,u.t)({height:14,width:14,marginTop:4}),n()(m.FormattedMessage,{id:"spaceSettings.sidebar.addOnUpgradeLink",defaultMessage:"Notion AI"})),n()("div",{style:P},void 0,n()("div",{style:L},void 0,O),n()(_.Z,{style:{marginTop:12,marginBottom:12},percent:R}),n()("div",{style:x},void 0,n()(m.FormattedMessage,{id:"spaceSettings.sidebar.addOnPurchase.buttonLabel",defaultMessage:"Purchase"})))))}},16116:(e,t,i)=>{i.d(t,{F:()=>r});var a=i(23174),n=i.n(a),o=i(86664),s=i(67294);function r(e){window.__c={n:"AddressElementWrapper"};const{address:t,updateAddress:i}=e,a=(0,s.useCallback)((e=>{const{name:t,address:a}=e.value;i({name:t,addressLine1:a.line1,addressLine2:a.line2??void 0,city:a.city,state:a.state,zipCode:a.postal_code,country:a.country})}),[i]);return n()(o.AddressElement,{options:{mode:"billing",defaultValues:{name:null==t?void 0:t.name,address:{line1:null==t?void 0:t.addressLine1,line2:null==t?void 0:t.addressLine2,city:null==t?void 0:t.city,state:null==t?void 0:t.state,postal_code:null==t?void 0:t.zipCode,country:null==t?void 0:t.country}}},onChange:a})}},16608:(e,t,i)=>{i.d(t,{k:()=>_});var a=i(23174),n=i.n(a),o=i(86664),s=i(67294),r=i(86628),l=i(97880),d=i(62216),c=i(80444),u=i(27242),m=i(16116),p=i(24405),g=i(8848),h=i(77458),f=i(67677),v=i(28067),y=i(95485),S=i(82990),b=i(5366);function M(e){window.__c={n:"CardElementWrapper"};const{paymentMethods:t,temporaryPaymentMethod:i,payButtonState:a}=e,s=(0,p.yK)((e=>({container:{backgroundColor:e.cardContentBackground,borderWidth:1,borderStyle:"solid",borderColor:e.groupedFormBorder,borderRadius:3,padding:"5px 5px 5px 10px"},header:{display:"flex",alignItems:"center",marginBottom:6,fontSize:12,fontWeight:S.Z.fontWeight.semibold,color:e.mediumTextColor,justifyContent:"space-between",paddingTop:20},iconWrapper:{display:"flex",gap:5},icon:{width:23},stripeBase:{iconColor:e.blueColor,color:e.regularTextColor,fontFamily:S.Z.baseFontFamily.sans,fontSmoothing:"antialiased",fontSize:"14px","::placeholder":{color:e.lightTextColor},lineHeight:"2em"},stripeComplete:{iconColor:e.blueColor},stripeInvalid:{color:g.ZP.red,iconColor:g.ZP.red}})),[]);if("credit_card"!==i)return null;const r=1===t.length&&"credit_card"===t[0];return n()("div",{},void 0,n()("label",{style:s.header},void 0,n()(b.FormattedMessage,{id:"spaceSubscriptionPaymentForm.paymentInformation.header",defaultMessage:"Payment details"}),r?n()("div",{style:s.iconWrapper},void 0,n()("div",{},void 0,(0,y.w)(s.icon)),n()("div",{},void 0,(0,v.N)(s.icon)),n()("div",{},void 0,(0,h.b)(s.icon)),n()("div",{},void 0,(0,f.d)(s.icon))):null),n()("div",{style:s.container},void 0,n()(o.CardElement,{options:{disabled:"disabled"===a,hidePostalCode:!0,style:{base:s.stripeBase,complete:s.stripeComplete,invalid:s.stripeInvalid}}})))}var w=i(502);function C(){u.Z.update((e=>{if(!e.open)return e;const{paymentData:t,...i}=e;return i}))}function _(e){window.__c={n:"CheckoutPaymentField"};const{paymentMethods:t,payButtonState:i,temporaryPaymentMethod:a,address:u,updateAddress:p}=e,[g,h]=(0,r.VK)((()=>{var e;return[d.o0(),null===(e=c.default.state.currentUserStore)||void 0===e?void 0:e.getEmail()]}),[]);if("control"===g)return n()(M,{paymentMethods:t,payButtonState:i,temporaryPaymentMethod:a});if("payment_and_address"===g){const e={};return h&&(e.defaultValues={email:h}),n()("div",{style:{display:"flex",flexDirection:"column",gap:24}},void 0,n()(w.w,{title:"Billed to"},void 0,u&&p?s.createElement(s.Fragment,null,n()(m.F,{address:u,updateAddress:p}),n()("div",{style:{paddingTop:8,width:"100%"}})):null,n()(o.LinkAuthenticationElement,{options:e})),n()(w.w,{title:"Payment details"},void 0,n()(o.PaymentElement,{onChange:()=>C()})))}if("payment"===g){const e={};return h&&(e.defaultValues={email:h}),n()("div",{style:{display:"flex",flexDirection:"column",gap:24}},void 0,n()(w.w,{title:"Billed to"},void 0,n()(o.LinkAuthenticationElement,{options:e})),n()(w.w,{title:"Payment details"},void 0,n()(o.PaymentElement,{onChange:()=>C()})))}(0,l.t1)(g)}},48209:(e,t,i)=>{i.d(t,{n:()=>g});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(24405),d=i(82990),c=i(5366),u=i(80366),m=i(74194),p=i(26388);function g(e){window.__c={n:"CheckoutVATCodeInput"};const{temporaryVatCode:t,vatApplicable:i,disabled:a,tooltip:o,onChange:g}=e,h=(0,l.yK)((e=>({container:{backgroundColor:e.cardContentBackground,borderWidth:1,borderStyle:"solid",borderColor:e.groupedFormBorder,borderRadius:3,borderBottom:"none"},header:{display:"flex",alignItems:"center",marginBottom:6,fontSize:12,fontWeight:d.Z.fontWeight.semibold,color:e.mediumTextColor,justifyContent:"space-between",paddingTop:20},input:{background:"none",boxShadow:"none",padding:8},subtitle:{color:e.mediumTextColor,fontSize:d.Z.fontSize.UISmall.desktop,marginTop:5,marginBottom:10},whiteSpace:{marginBottom:20}})),[]),f=(0,c.useIntl)(),v=(0,r.useCallback)((e=>{g(e.target.value)}),[g]);return i?s()("div",{},void 0,s()("label",{style:h.header},void 0,s()(c.FormattedMessage,{id:"spaceSubscriptionPaymentForm.vatCountryCode.header",defaultMessage:"VAT (optional)"})),s()(p.Z,{placement:p.Z.Placement.Top,alignment:p.Z.Alignment.End,render:e=>r.createElement("div",n()({},e,{style:h.container}),s()(u.c,{},void 0,s()(m.Z,{value:t,style:h.input,disabled:a,placeholder:f.formatMessage({id:"spaceSubscriptionPaymentForm.vatCountryCode.placeholder",defaultMessage:"VAT/GST number"}),onChange:v}))),disableTooltip:!o,renderTooltip:()=>o}),s()("div",{style:h.subtitle},void 0,s()(c.FormattedMessage,{id:"spaceSubscriptionBilling.vatCountryCode.subtitle",defaultMessage:"Please include your country code"}))):s()("div",{style:h.whiteSpace})}},40675:(e,t,i)=>{i.d(t,{J:()=>x});var a=i(23174),n=i.n(a),o=i(67294),s=i(86628),r=i(97880),l=i(62216),d=i(16116),c=i(480),u=i(24405),m=i(5366),p=i(50906),g=i(80366),h=i(74194),f=i(10434),v=i.n(f),y=i(58573),S=i(87279),b=i(52275),M=i(78140),w=i(32163),C=i(53437),_=i(72495);function k(e){window.__c={n:"CheckoutCountryDropdown"};const{availableCountries:t,address:i,updateAddress:a}=e,s=(0,u.yK)((()=>({input:{background:"none",boxShadow:"none",padding:8,fontSize:14}})),[]),r=(0,c.O7)(),l=(0,m.useIntl)(),[d,f]=(0,o.useState)(!1),[k,T]=o.useState(""),I=(0,y.ZP)(k,t,(e=>e.name)).map(((e,t)=>({key:t,render:t=>o.createElement(b.Z,v()({},t,{title:e.name})),action:()=>{e.countryCode!==i.country&&a({addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:e.countryCode}),T(e.name),f(!1),p.rYO(r,{addressType:"country",addressUpdate:e.name})}})));return n()(g.c,{},void 0,n()(C.ZP,{popupType:C.ZP.PopupType.Popup,alignmentToOrigin:C.ZP.Alignment.End,placementToOrigin:C.ZP.Placement.Right,originGap:0,open:d,origin:n()(h.Z,{value:k,focus:d,placeholder:l.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.country",defaultMessage:"Country or region"}),style:s.input,onChange:e=>{T(e.target.value),a({country:void 0})},onFocus:()=>{f(!0)}}),onDismiss:()=>{f(!1)},render:()=>n()(M.Z,{menuType:S.og.Popup,width:"100%"},void 0,n()(w.Z,{type:w.i.Vertical,initialFocus:k.length>0?0:void 0,sections:[{key:0,showNoResultMessage:!0,render:e=>o.createElement(_.Z,v()({},e,{title:n()(m.FormattedMessage,{id:"spaceSubscriptionBillingInfoForm.countryDropdown.title",defaultMessage:"Select a country or region"})})),items:I}]}))}))}function T(){return(0,u.yK)((e=>({container:(0,g.s)(e),cityZipRow:{display:"flex"},verticalDivider:{display:"flex",borderLeft:"1px solid",borderLeftColor:e.groupedFormBorder},zipRow:{display:"flex",flex:2},stateRow:{display:"flex",flex:3},input:{background:"none",boxShadow:"none",padding:8,fontSize:14}})),[])}function I(e){window.__c={n:"CheckoutNotionAddressForm"};const{address:t,availableCountries:i,shouldShowBusinessName:a,updateAddress:s}=e,r=T(),l=(0,m.useIntl)();return n()("div",{style:r.container},void 0,n()(P,{placeholder:l.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.fullName",defaultMessage:"Full name"}),address:t,updateAddress:s,addressKey:"name"}),a&&n()(P,{placeholder:l.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.businessName",defaultMessage:"Business name (optional)"}),address:t,updateAddress:s,addressKey:"businessName"}),i?n()(k,{availableCountries:i,updateAddress:s,address:t}):null,t?o.createElement(o.Fragment,null,n()(P,{placeholder:l.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.address",defaultMessage:"Address"}),address:t,addressKey:"addressLine1",updateAddress:s}),n()(P,{placeholder:l.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.city",defaultMessage:"City"}),addressKey:"city",address:t,updateAddress:s}),n()("div",{style:r.cityZipRow},void 0,n()("div",{style:r.stateRow},void 0,n()(P,{placeholder:l.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.state",defaultMessage:"State / Province"}),address:t,addressKey:"state",updateAddress:s})),n()("div",{style:r.verticalDivider}),n()("div",{style:r.zipRow},void 0,n()(P,{placeholder:l.formatMessage({id:"spaceSubscriptionPaymentForm.billingInformation.zipCode",defaultMessage:"Zip code"}),address:t,addressKey:"zipCode",updateAddress:e.updateAddress})))):null)}function P(e){window.__c={n:"AddressInputField"};const{address:t,updateAddress:i,addressKey:a,placeholder:s}=e,r=(0,c.O7)(),l=T(),d=(0,o.useCallback)((e=>{p.rYO(r,{addressType:a,addressUpdate:e.target.value}),i({[a]:e.target.value})}),[a,i,r]);return n()(g.c,{},void 0,n()(h.Z,{value:t[a],style:l.input,placeholder:s,onBlur:d,onChange:e=>i({[a]:e.target.value})}))}function x(e){window.__c={n:"SpaceSubscriptionAddressForm"};const{address:t,availableCountries:i,updateAddress:a,shouldShowBusinessName:o}=e,c=(0,s.VK)((()=>l.o0()),[]);return"payment"===c||"payment_and_address"===c?n()(d.F,{address:t,updateAddress:a}):"control"===c?n()("div",{style:{marginTop:20}},void 0,n()(I,{address:t,availableCountries:i,shouldShowBusinessName:o,updateAddress:a})):void(0,r.t1)(c)}},502:(e,t,i)=>{i.d(t,{C:()=>y,w:()=>S});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(24405),d=i(72126),c=i(65544),u=i(62216),m=i(8323),p=i(38479),g=i(27242),h=i(16608),f=i(48209),v=i(40675);function y(e){window.__c={n:"SpaceSubscriptionBillingInfoForm"};const{paymentMethods:t}=e,i=(0,s.O7)(),a=(0,p.y)(),l=(0,o.useMemo)((()=>(0,d.Ds)((async()=>{await c.W_(i)}),3e3)),[i]),[y,S,b,M,w,C,_]=(0,r.VK)((()=>{let e,t,i,a,n=!1;const{state:o}=g.Z;return o.open&&(e=o.temporaryAddress,t=o.temporaryPaymentMethod,i=o.payButtonState,a=o.temporaryVatCode,n=o.vatApplicable),[(0,m.mq)(),e,t,a,i,n,u.o0()]}),[]),k=(0,o.useCallback)((async e=>{if(g.Z.state.open&&(g.Z.setAddressField(e),await l(),a)){const t=a.find((t=>t.countryCode===(null==e?void 0:e.country)));t&&g.Z.update((e=>({...e,vatApplicable:Boolean(t.vatApplicable)})))}}),[a,l]),T=(0,o.useCallback)((async e=>{g.Z.update((t=>({...t,temporaryVatCode:e}))),await l()}),[l]);return S&&b&&w?n()("div",{},void 0,n()(h.k,{paymentMethods:t,temporaryPaymentMethod:b,payButtonState:w,address:S,updateAddress:k}),"control"===_?n()(v.J,{address:S,availableCountries:a,shouldShowBusinessName:y,updateAddress:k}):null,n()(f.n,{onChange:T,temporaryVatCode:M,vatApplicable:C})):null}function S(e){window.__c={n:"BillingSection"};const t=(0,l.yK)((()=>({text:{color:"var(--text-secondary-dark, #7F7F7F)",fontSize:12,fontWeight:500,marginBottom:12}})),[]);return n()("div",{},void 0,n()("div",{style:t.text},void 0,e.title),e.children)}},40732:(e,t,i)=>{i.r(t),i.d(t,{default:()=>le,isCancellationStage:()=>se,isConfirmPurchaseStage:()=>oe,isLimitReachedStage:()=>ne});var a=i(23174),n=i.n(a),o=i(67294),s=i(13991),r=i(480),l=i(86628),d=i(24405),c=i(41892),u=i(8848),m=i(7057),p=i(64275),g=i(44495),h=i(5366),f=i(3791),v=i(896),y=i(47425),S=i(97880),b=i(82990),M=i(47307),w=i(64964),C=i(21325),_=i(99498),k=i(65544),T=i(1865),I=i(52533),P=i(18514),x=i(38755),Z=i(80554),F=i(94191),A=i(31925),E=i(41168),B=i(8323),R=i(80444),D=i(78291),L=i(8711),N=i(30751),O=i(42922),V=i(11066),U=i(68785),W=i(92660),z=i(42402),K=i(42045);function H(e){window.__c={n:"LimitReachedStage"};const{addOnFeature:t,canPurchaseAddOn:i,isSubscribed:a}=e,s=ae(),l=(0,r.O7)();return i&&a?n()(G,{addOnFeature:t,canPurchaseAddOn:i}):o.createElement(o.Fragment,null,(0,g.D)(s.icon),n()(q,{addOnFeature:t,canPurchaseAddOn:i}),n()(j,{addOnFeature:t,canPurchaseAddOn:i}),n()(O.Z,{isLarge:!0,style:s.button,onClick:async()=>i?a?_.Cl(void 0):async function(e,t){await T.y(e,{from:"plans_page",for:t,addOnFeature:"ai"}),_.v5()}(l,"free"):_.v5()},void 0,n()(h.FormattedMessage,i?{id:"addOnUpgradeModal.purchase.button.label",defaultMessage:"Purchase"}:{id:"addOnUpgradeModal.gotIt.button.label",defaultMessage:"Got it"})))}function G(e){var t,i;window.__c={n:"ConfirmPurchase"};const{addOnFeature:a,canPurchaseAddOn:s}=e,d=(0,r.O7)(),u=ae(),m=(0,l.VK)((()=>(0,B.zt)()),[]),p=(0,l.VK)((()=>D.default.state.data),[]),g=(0,l.VK)((()=>L.Z.state.open?L.Z.state.coupon:null),[]),f=(0,l.VK)((()=>R.default.state.currentSpaceStore),[]);if(!f)return null;const v=(0,I.S$)({environment:d})&&(0,y.QR)(m);if(d.device.isMobileNative&&!v)return null;let b;if(!p||"unsubscribed_admin"!==p.type&&"subscribed_admin"!==p.type||(b=p),b&&"revenueCat"===(null===(t=b.customerData)||void 0===t?void 0:t.activeSubscriptionPlatform)){const e=n()(h.FormattedMessage,{id:"addOnUpgradeModal.errorMessage.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return M.showErrorMessage(e),null}const w=n()(h.FormattedMessage,{id:"addOnUpgradeModal.errorMessage.notAdmin",defaultMessage:"You don't have permissions to upgrade this workspace to an add-on. If you think this is a mistake please contact your administrator."});if(!(0,E.GJ)(p))return M.showErrorMessage(w),null;const C=null===(i=b)||void 0===i||null===(i=i.customerData)||void 0===i?void 0:i.stripe;if(!C)return null;const _=C.isSubscribed?C.interval:"month",k=g?function(e){switch(e){case"ai_fifty_percent":return n()(h.FormattedMessage,{id:"addOnUpgradeModal.coupon.fiftyPercent.label",defaultMessage:"50% off discount"});default:(0,S.t1)(e)}}(g):"year"===_?n()(h.FormattedMessage,{id:"addOnUpgradeModal.coupon.twentyPercent.label",defaultMessage:"20% off discount"}):null;return o.createElement(o.Fragment,null,n()("img",{src:c.Z.images.pricing.aiLogoPng,style:u.aiLogo}),n()(q,{addOnFeature:a,canPurchaseAddOn:s}),n()(Y,{addOnFeature:a}),k?function(e){window.__c={n:"DiscountBadge"};const t=ae();return n()(V.Z,{style:{...t.sharedStyleForDiscountBadge},disabled:!0},void 0,n()("div",{style:{...t.innerStyleForDiscountBadge}},void 0,e))}(k):null,n()($,{addOnFeature:a,interval:_,stripeData:C,spaceStore:f}))}function q(e){window.__c={n:"Title"};const{addOnFeature:t,canPurchaseAddOn:i}=e,a=ae();let o;switch(t){case"ai":o=n()(h.FormattedMessage,i?{id:"addOnUpgrade.title.admin",defaultMessage:"Get more Notion AI"}:{id:"addOnUpgrade.title.nonAdmin",defaultMessage:"Your workspace has run out of its Notion AI promotion"});break;default:(0,S.t1)(t)}return n()("h3",{style:a.title},void 0,o)}function j(e){window.__c={n:"Description"};const{addOnFeature:t,canPurchaseAddOn:i}=e;let a;const o=ae();switch(t){case"ai":a=n()(h.FormattedMessage,i?{id:"addOnUpgrade.description.admins",defaultMessage:"Your one-time promotion has ran out. To continue using AI features, purchase more AI uses for your workspace"}:{id:"addOnUpgrade.description.nonAdmins",defaultMessage:"Your workspace’s one-time Notion AI promotion is over. Contact a workspace admin to purchase unlimited AI for your team to use."});break;default:(0,S.t1)(t)}return n()("p",{style:o.paragraph},void 0,n()("div",{style:o.text},void 0,a))}function Y(e){window.__c={n:"ConfirmationDescription"};const{addOnFeature:t}=e;let i;const a=(0,r.O7)(),o=ae(),s=(0,l.VK)((()=>R.default.state.currentSpaceStore),[]);if(!s)return null;const d=(0,l.VK)((()=>(0,x.rn)(a,s)),[a,s]);switch(t){case"ai":i=n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.description.admins",defaultMessage:"Go unlimited with Notion AI for all members in {spaceName}.",values:{spaceName:d}});break;default:(0,S.t1)(t)}return n()("p",{style:o.paragraph},void 0,n()("div",{style:o.text},void 0,i))}function $(e){window.__c={n:"ConfirmationBillingSummary"};const{addOnFeature:t,interval:i,stripeData:a,spaceStore:s}=e,d=ae(),c=(0,r.O7)(),u=(0,l.VK)((()=>(0,E.qX)()),[]),m=a.currencyCode??"USD",{tax:p,coupon:g}=(0,l.VK)((()=>({tax:L.Z.state.open?L.Z.state.tax:0,coupon:L.Z.state.open?L.Z.state.coupon:void 0})),[]),v=(0,l.VK)((()=>N.Z.getPrice(c,(e=>e.product===t&&e.billingInterval===i&&e.currencyCode===m))),[t,c,i,m]),y=(0,l.VK)((()=>N.Z.getPrice(c,(e=>e.product===t&&"month"===e.billingInterval&&e.currencyCode===m))),[t,m,c]);if((0,o.useEffect)((()=>{!async function(){if(v.result&&a&&a.address){const e=v.result.getCostPerBillingInterval({quantity:u,coupon:g}).amount;await k.nf({environment:c,priceForTaxCalculation:e,address:a.address,customerId:a.customerId,vatId:a.vatId})}}()}),[c,a,v,u,g]),!v.isLoaded||!y.isLoaded)return n()(U.Z,{});if(!v.result||!y.result)return null;const S=v.result,b=S.getCostPerBillingInterval({quantity:u,coupon:g}).withAddedAmount(p),M=y.result,T=M.getMonthlyUnitCost();let I=M.getMonthlyCost({quantity:u});"year"===i&&(I=I.withMultipliedAmount(12));const{addOnCostItem:x,addOnCostItemWithMembers:A}=(0,Z.OL)(t,u,i,n()(K.W,{cost:T.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}));return o.createElement(o.Fragment,null,n()("p",{style:d.monthlyCostText},void 0,n()("h3",{style:d.title},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.monthlyCost.title",defaultMessage:"Add on"})),n()("div",{style:d.costSectionTitle},void 0,n()("div",{},void 0,x),n()("div",{style:d.rightAlign},void 0,n()(K.W,{cost:I.toMoneyValue(),trailingZeroDisplay:"auto"}))),n()("div",{style:d.costSection},void 0,A),n()(Q,{cost:S.getCostPerBillingInterval({quantity:u}),fullCost:I}),n()(J,{price:S,coupon:g,quantity:u}),n()("div",{style:d.costSection},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.taxes",defaultMessage:"Taxes:"}),n()("div",{style:d.rightAlign},void 0,n()(K.W,{cost:{amount:p,currencyCode:m},trailingZeroDisplay:"auto"}))),n()("div",{style:d.totalCostSection},void 0,n()("h3",{style:d.title},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.total",defaultMessage:"Total"})),n()("div",{style:d.rightAlign},void 0,n()("h3",{style:d.title},void 0,n()(K.W,{cost:b.toMoneyValue(),trailingZeroDisplay:"auto"})))),n()("div",{style:d.perMonth},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.interval.label",defaultMessage:"{interval, select, month {per month} other {per year}}",values:{interval:i}}))),n()(O.Z,{isLarge:!0,style:d.button,onClick:async()=>{const e=(0,f.aG)({addOnFeature:t,addOnTier:"base",addOnBillingInterval:i,addOnPricingModel:"standard",addOnPricingVariant:"retail",currencyCode:S.currencyCode,isCancellation:!1});await C.Mg({environment:c,spaceStore:s,from:"add_on_upgrade_modal",addOns:e,inAppOffer:g}),_.v5();const a=F.mV({type:"purchaseAddOn",addOnFeature:t});a&&w.oV(a)}},void 0,n()(h.FormattedMessage,{id:"addOnUpgradeModal.confirmPurchase.button.label",defaultMessage:"Confirm purchase"})),n()("p",{style:d.termsOfService},void 0,n()("div",{style:d.text},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.prorated.description",defaultMessage:"Performance subject to <fairUsePolicies>fair use policies</fairUsePolicies>.{br}By clicking Confirm Purchase you agree to the <terms>Notion AI Supplementary Terms</terms>.",values:{br:n()("br",{}),fairUsePolicies:e=>n()(z.Z,{href:(0,P.UY)("ai.fairUsePolicies")},void 0,e),terms:e=>n()(z.Z,{href:(0,P.UY)("ai.terms")},void 0,e)}}))))}function Q(e){window.__c={n:"AnnualDiscount"};const t=ae(),{cost:i,fullCost:a}=e;if(i.amount===a.amount)return null;const s=a.minus(i),r=Math.floor(s.amount/a.amount*100);return o.createElement(o.Fragment,null,n()("div",{style:t.costSectionTitle},void 0,n()("div",{},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.annual.dynamicDiscountMessage",defaultMessage:"<bold>Annual discount ({discountPercent}%)</bold>",values:{bold:e=>n()("b",{},void 0,e),discountPercent:r}})),n()("div",{style:t.greenRightAlign},void 0,n()(K.W,{cost:s.withMultipliedAmount(-1).toMoneyValue(),trailingZeroDisplay:"auto",currencySign:"standard"}))),n()("div",{style:t.costSection},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.specialDiscount.annualPlanMessage",defaultMessage:"for being on the annual plan"})))}function J(e){window.__c={n:"CouponDiscount"};const t=ae(),{price:i,coupon:a,quantity:s}=e;if(!(0,v.pp)(a))return null;const r=i.getDiscountPerBillingInterval({quantity:s,coupon:a}).withMultipliedAmount(-1);return o.createElement(o.Fragment,null,n()("div",{style:t.costSectionTitle},void 0,n()("div",{},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.specialDiscount",defaultMessage:"<bold>Special discount ({percentage})</bold>",values:{bold:e=>n()("b",{},void 0,e),percentage:(0,A.o)(a)}})),n()("div",{style:t.greenRightAlign},void 0,n()(K.W,{cost:r,trailingZeroDisplay:"auto",currencySign:"standard"}))),n()("div",{style:t.costSection},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.specialDiscount.threeMonthsMessage",defaultMessage:"for the next 3 months"})))}function X(e){window.__c={n:"CancellationStageCTA"};const{data:t,addOnFeature:i}=e,a=ae(),s=(0,r.O7)(),l=function(e,t){var i;return null===(i=e.addOns.find((e=>e.feature===t)))||void 0===i?void 0:i.billingInterval}(t,i);return l?o.createElement(o.Fragment,null,n()("div",{style:a.buttonWithTopPadding},void 0,n()(V.Z,{style:a.redButton,hoveredStyle:{background:u.ZP.redWithAlpha(.8)},onClick:async()=>{const e=R.default.state.currentSpaceStore,{data:t}=D.default.state;let a;var o;"unsubscribed_admin"!==(null==t?void 0:t.type)&&"subscribed_admin"!==(null==t?void 0:t.type)||(a=null===(o=t.customerData)||void 0===o?void 0:o.stripe.currencyCode);if(!e||!a)return M.showErrorMessage(n()(h.FormattedMessage,{id:"addOnUpgradeModal.cancellationStage.errorMessage",defaultMessage:"Unable to cancel add-on subscription. Please try again later."}));const r=(0,f.aG)({addOnFeature:i,addOnTier:"base",addOnBillingInterval:l,addOnPricingModel:"standard",addOnPricingVariant:"retail",currencyCode:a,isCancellation:!0});await C.Mg({environment:s,spaceStore:e,from:"add_on_upgrade_modal",addOns:r}),_.v5()}},void 0,n()(h.FormattedMessage,{id:"addOnUpgradeModal.midterm.yesButton.label",defaultMessage:"Schedule removal"}))),n()("div",{style:a.buttonWithTopPadding},void 0,n()(V.Z,{style:a.noButton,onClick:()=>_.v5()},void 0,n()(h.FormattedMessage,{id:"addOnUpgradeModal.noButton.label",defaultMessage:"Cancel"})))):null}function ee(e){window.__c={n:"CancellationStageDescription"};const{data:t}=e,i=ae();let a,o=!1;if("subscribed_admin"===t.type||"unsubscribed_admin"===t.type){var r;const e=null===(r=t.customerData)||void 0===r?void 0:r.stripe;a=null==e?void 0:e.periodEnd,o=Boolean((null==e?void 0:e.schedule)||(null==e?void 0:e.willCancelAt))}return a?n()("p",{style:i.paragraph},void 0,n()("div",{style:i.text},void 0,n()(h.FormattedMessage,o?{id:"addOnUpgradeModal.midterm.cancellationWithPendingChanges.description",defaultMessage:"You can continue to enjoy Notion AI until the end of your billing period on <bold>{periodEnd}</bold>. This change will cancel your previous pending changes. You can resubscribe anytime.",values:{periodEnd:(0,m.Yx)(a,"long",s.SP),bold:e=>n()("b",{},void 0,e)}}:{id:"addOnUpgradeModal.midterm.cancellation.description",defaultMessage:"Thank you for your input! You can continue to enjoy Notion AI until the end of your billing period on <bold>{periodEnd}</bold>. You can resubscribe anytime.",values:{periodEnd:(0,m.Yx)(a,"long",s.SP),bold:e=>n()("b",{},void 0,e)}}))):null}function te(e){window.__c={n:"CancellationStage"};const{addOnFeature:t,canPurchaseAddOn:i,data:a}=e,s=ae();if(!i)return null;let r;switch(t){case"ai":r=n()(h.FormattedMessage,{id:"addOnUpgradeModal.midterm.cancellation.title",defaultMessage:"Remove AI at the end of your billing period?"});break;default:(0,S.t1)(t)}return o.createElement(o.Fragment,null,n()("h3",{style:s.cancellationTitle},void 0,r),n()(ee,{data:a}),n()(X,{data:a,addOnFeature:t}))}function ie(){window.__c={n:"MobileMessage"};const e=ae(),t=(0,r.O7)();let i=n()(h.FormattedMessage,{id:"addOnUpgradeModal.mobileMessage.button.label",defaultMessage:"Use the web or desktop app to add Notion AI to your plan and go unlimited."});return(t.device.isIOS||t.device.isIpad)&&(i=n()(h.FormattedMessage,{id:"addOnUpgradeModal.mobileMessage.ios.button.label",defaultMessage:"You are out of free AI."})),o.createElement(o.Fragment,null,(0,g.D)(e.icon),n()("h3",{style:e.title},void 0,n()(h.FormattedMessage,{id:"addOnUpgrade.title.nonAdmin",defaultMessage:"Your workspace has run out of its Notion AI promotion"})),n()("p",{style:e.paragraph},void 0,n()("div",{style:e.text},void 0,i)),n()(O.Z,{isLarge:!0,style:e.button,onClick:()=>_.v5()},void 0,n()(h.FormattedMessage,{id:"addOnUpgradeModal.gotIt.button.label",defaultMessage:"Got it"})))}function ae(){return(0,d.yK)((e=>({modal:{maxWidth:350,padding:24,fontSize:14,textAlign:"center"},largeModal:{maxWidth:420,padding:24,fontSize:14,textAlign:"center"},mobileModal:{padding:24,fontSize:14,textAlign:"center"},cancellationModal:{maxWidth:350,padding:"24px 16px 12px",fontSize:14,textAlign:"center"},innerModalPadding:{padding:"0px 8px"},cancellationInnerModalPadding:{padding:0},innerStyle:{borderRadius:10},title:{margin:0,marginBottom:0},cancellationTitle:{margin:0,marginBottom:0,marginTop:14},monthlyCostText:{textAlign:"left",paddingBottom:16},costSection:{margin:0,marginBottom:8,display:"flex",color:e.mediumTextColor},costSectionTitle:{display:"flex",color:e.mediumTextColor},totalCostSection:{display:"flex"},paymentMethodSection:{marginBottom:8,marginTop:8,display:"flex"},rightAlign:{position:"absolute",right:24},greenRightAlign:{position:"absolute",right:24,color:e.invoiceGreen},paragraph:{lineHeight:1.4,marginTop:4,marginBottom:12},termsOfService:{fontSize:"small",marginTop:8},text:{margin:0,color:e.mediumTextColor,marginBottom:8},icon:{display:"inline",height:24,fill:e.lightIconColor,marginTop:8,marginBottom:8},aiLogo:{height:60},button:{width:"100%"},buttonWithTopPadding:{paddingTop:12},noButton:{width:"100%",height:24,display:"inline-flex",alignItems:"center",justifyContent:"center"},cancelButton:{position:"absolute",top:"10px",right:"10px",background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},redButton:{width:"100%",color:u.ZP.white,background:e.redBadgeBackground,display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,borderRadius:3,lineHeight:1.2,paddingLeft:12,paddingRight:12,fontWeight:b.Z.fontWeight.medium},closeIcon:{width:14,fill:e.mediumTextColor},hovered:{background:e.buttonPressedBackground},perMonth:{position:"absolute",right:24,display:"flex",color:e.mediumTextColor,marginTop:-4},sharedStyleForDiscountBadge:{display:"inline-flex",alignItems:"center",borderRadius:3},innerStyleForDiscountBadge:{padding:"2px 6px",borderRadius:3,color:e.regularTextColor,background:e.accentColors.gray[50],fontWeight:400,fontSize:14,lineHeight:"16px",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[])}function ne(){return re("limit_reached")}function oe(){return re("confirm_purchase")}function se(){return re("cancel_plan")}function re(e){const t=L.Z.state;if(t.open)return t.stage===e}const le=function(e){window.__c={n:"AddOnUpgradeModal"};const{data:t}=e,i="ai",a=(0,E.GJ)(t),o=ae(),s=E.YK(t),l=(0,r.O7)().device.isMobile;return n()(W.Z,l?{innerStyle:o.innerStyle,requireOnline:!0,modalStore:L.Z,onDismiss:()=>_.v5(),render:()=>n()("div",{style:o.mobileModal},void 0,n()("div",{style:o.innerModalPadding},void 0,n()(ie,{})))}:{innerStyle:o.innerStyle,requireOnline:!0,modalStore:L.Z,onDismiss:()=>_.v5(),render:()=>n()("div",{style:oe()||ne()&&s&&a?o.largeModal:se()?o.cancellationModal:o.modal},void 0,n()("div",{style:se()?o.cancellationInnerModalPadding:o.innerModalPadding},void 0,n()(V.Z,{onClick:()=>{_.v5()},style:o.cancelButton,hoveredStyle:o.hovered},void 0,(0,p.D)(o.closeIcon)),ne()&&n()(H,{addOnFeature:i,canPurchaseAddOn:a,isSubscribed:s}),oe()&&n()(G,{addOnFeature:i,canPurchaseAddOn:a}),se()&&n()(te,{addOnFeature:i,canPurchaseAddOn:a,data:t})))})}},62889:(e,t,i)=>{i.r(t),i.d(t,{CreateTeamFromPageConfirmModal:()=>v});var a=i(23174),n=i.n(a),o=(i(67294),i(480)),s=i(24405),r=i(62208),l=i(5366),d=i(82990),c=i(72684),u=i(8053),m=i(42922),p=i(63296),g=i(92660),h=i(29551),f=i(51923);function v(){window.__c={n:"CreateTeamFromPageConfirmModal"};const e=(0,o.O7)(),t=(0,l.useIntl)(),i=(0,s.yK)((e=>({modal:{maxWidth:350,padding:24},loopIcon:{height:28,width:28,fill:e.darkTextColor},infoIcon:{height:16,width:16,fill:e.lightIconColor,marginRight:4},title:{marginTop:16,marginBottom:12,color:e.regularTextColor,fontWeight:d.Z.fontWeight.semibold,fontSize:18},description:{color:e.darkTextColor,textAlign:"center",fontSize:14,marginBottom:18},confirmButton:{width:"100%",marginBottom:8},cancelButton:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:14}})),[]);return n()(g.Z,{onDismiss:()=>{c.Z.setState({open:!1})},render:()=>n()("div",{style:i.modal},void 0,n()(h.gq,{flexDirection:"column",justifyContent:"center",alignItems:"center"},void 0,(0,r.z)(i.loopIcon),n()("div",{style:i.title},void 0,n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.title",defaultMessage:"Turn into teamspace?"})),n()("div",{style:i.description},void 0,n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.description",defaultMessage:"This will move this page into a newly created teamspace along with people who already have access to this page."})),n()(m.Z,{isLarge:!0,style:i.confirmButton,onClick:()=>{if(c.Z.state.open){const{pageStore:i,flowId:a}=c.Z.state;u.Sq({environment:e,intl:t,page:i,flowId:a}),c.Z.setState({open:!1})}}},void 0,n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.confirmButton",defaultMessage:"Create teamspace"})),n()(p.Z,{isLarge:!0,style:i.cancelButton,onClick:()=>c.Z.setState({open:!1})},void 0,n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.cancelButton",defaultMessage:"Cancel"})),n()(f.Z,{message:n()(l.FormattedMessage,{id:"createTeamFromPage.confirmModal.learnMore",defaultMessage:"Learn more about teamspaces"}),analyticsFrom:"teams_learn_more_turn_page_into_team",helpCenterLocation:"bestPractices"}))),requireOnline:!0,modalStore:c.Z})}},51760:(e,t,i)=>{i.r(t),i.d(t,{SidebarCreateTeamModal:()=>Ze});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(53150),l=i(86628),d=i(24405),c=i(41892),u=i(64275),m=i(49364),p=i(72126),g=i(47425),h=i(97880),f=i(82990),v=i(5366),y=i(50906),S=i(33929),b=i(38755),M=i(8323),w=i(95697),C=i(92994),_=i(80444),k=i(57559),T=i(19522),I=i(33052),P=i(35817),x=i(64921),Z=i(74194),F=i(3386),A=i(68785),E=i(50506),B=i(26388),R=i(64369),D=i(45653),L=i(13490),N=i(78122),O=i(8053),V=i(42922),U=i(51923);function W(){window.__c={n:"SidebarCreateTeamModalFooter"};const e=(0,s.O7)(),{currentSpaceStore:t,spaceViewStore:i}=(0,l.VK)((()=>({currentSpaceStore:_.default.state.currentSpaceStore,spaceViewStore:_.default.state.currentSpaceViewStore})),[]),a=(0,l.VK)((()=>T.Z.state),[]),r=(0,w.OX)(),c=function(){const e=(0,l.VK)((()=>M.Mk()&&!T.Z.state.isDefault),[]),t=T.F.Team,i=T.F.Members;return e?[t,i]:[t]}(),{screen:u,pageNumber:m,teamId:g}=a,f=""===a.name,y=(0,d.yK)((e=>({box:{justifyContent:"space-between",alignItems:"center",display:"flex",width:"100%",paddingTop:22},button:{marginLeft:8},previous:{fontSize:14,color:e.mediumTextColor,cursor:"pointer"},learnMoreLink:{overflow:"hidden"}})),[]),S=(0,o.useCallback)(((i,a)=>{t&&function(e){let{pageOrder:t,pageNumber:i,teamId:a,currentSpaceStore:n,environment:o,from:s}=e;const r=i+1;if(r<=t.length)T.Z.update((e=>({...e,loading:!1,screen:t[r-1],pageNumber:r})));else if(a){const e=k.zX.createChildStore(n,{table:"team",id:a,spaceId:n.id});P.hI({environment:o,teamStore:e,shouldScroll:!0}),P.ED({environment:o,from:s,teamStore:e})}}({pageOrder:c,pageNumber:m,teamId:a||g,currentSpaceStore:t,environment:e,from:i})}),[t,e,m,c,g]),b=p.Ds((async()=>{if(!t||!i)return;let n=g;switch(u){case T.F.Team:n=await async function(e){var t;let{spaceStore:i,environment:a,shouldShowZeroTeamsExperience:n,sidebarCreateTeamModalStoreState:o}=e;const{name:s,description:r,icon:l,flowId:d,accessLevel:c,isDefault:u,persona:m}=o;if(!(await(0,N.Xg)({environment:a,spaceStore:i,teamName:s})))return;let p;T.Z.update((e=>({...e,loading:!0}))),p=n?await O.HD({environment:a,name:s,description:r,icon:l,flowId:d,trackCreateTeamComplete:!0,persona:m}):await O.Cm({environment:a,name:s,description:r,icon:l,accessLevel:c,isDefault:u,flowId:d,createTeamHome:!0,createTemplates:!0,persona:m});if(!p)return;const g=null===(t=p)||void 0===t?void 0:t.id;return T.Z.update((e=>({...e,teamId:g}))),g}({spaceStore:t,environment:e,shouldShowZeroTeamsExperience:r,sidebarCreateTeamModalStoreState:a});break;case T.F.Members:break;default:(0,h.t1)(u)}n?S("success",n):T.Z.update((e=>({...e,loading:!1})))}),1e3,{leading:!0,trailing:!1}),C=(0,o.useCallback)(b,[b]);return n()("div",{style:y.box},void 0,n()(U.Z,{containerStyle:y.learnMoreLink,helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_sidebar_create_team_modal"}),n()("div",{style:{display:"inline-flex"}},void 0,n()(V.Z,{isLarge:!0,onClick:C,disabled:f,style:y.button},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.footer.createTeam",defaultMessage:"Create teamspace"}))))}var z=i(10434),K=i.n(z),H=i(42853),G=i(45238);const q=(0,G.I)("engineering",{viewBox:"0 0 18 14",svg:n()("path",{d:"M3.08691 13.3604H14.9131C16.3486 13.3604 17.0596 12.6562 17.0596 11.248V2.89453C17.0596 1.48633 16.3486 0.775391 14.9131 0.775391H3.08691C1.6582 0.775391 0.94043 1.48633 0.94043 2.89453V11.248C0.94043 12.6562 1.6582 13.3604 3.08691 13.3604ZM3.10059 12.2598C2.41699 12.2598 2.04102 11.8975 2.04102 11.1865V2.95605C2.04102 2.24512 2.41699 1.87598 3.10059 1.87598H14.8994C15.5762 1.87598 15.959 2.24512 15.959 2.95605V11.1865C15.959 11.8975 15.5762 12.2598 14.8994 12.2598H3.10059ZM3.87988 6.05957C3.34668 6.38086 3.79785 7.19434 4.38574 6.8252L6.35449 5.59473C6.74414 5.34863 6.72363 4.76758 6.35449 4.53516L4.38574 3.30469C3.79785 2.93555 3.33984 3.74219 3.87988 4.07031L5.52734 5.06152L3.87988 6.05957ZM6.76465 6.81836C6.76465 7.05762 6.95605 7.25586 7.20215 7.25586H9.80664C10.0527 7.25586 10.2441 7.05762 10.2441 6.81836C10.2441 6.57227 10.0527 6.37402 9.80664 6.37402H7.20215C6.95605 6.37402 6.76465 6.57227 6.76465 6.81836Z"})}),j=(0,G.I)("marketing",{viewBox:"0 0 16 16",svg:n()("path",{d:"M0.384766 8.03027C0.384766 9.62988 1.17773 10.5732 2.68164 10.7578L4.17871 14.0732C4.73926 15.3242 5.70996 15.3994 6.37305 15.1943C7.04297 14.9824 7.45312 14.3604 7.27539 13.4512L6.79688 10.9629C8.66992 11.3115 10.5703 11.9746 12.2793 12.9658C12.4639 13.7041 13.0791 14.1689 13.9131 14.1689C14.9316 14.1689 15.6084 13.4922 15.6084 12.4805V2.52734C15.6084 1.51562 14.9316 0.838867 13.9131 0.838867C13.0586 0.838867 12.4365 1.33105 12.2656 2.10352C10.2559 3.29297 7.69238 4.04492 5.66211 4.26367H3.24902C1.37598 4.26367 0.384766 5.22754 0.384766 7.02539V8.03027ZM13.332 12.4805V2.52734C13.332 2.17188 13.5576 1.93945 13.9131 1.93945C14.2686 1.93945 14.5078 2.17188 14.5078 2.52734V12.4805C14.5078 12.8359 14.2686 13.0684 13.9131 13.0684C13.5576 13.0684 13.332 12.8359 13.332 12.4805ZM5.80566 9.71191V5.33691C8.12305 5.07031 10.3311 4.41406 12.2246 3.33398V11.7217C10.2832 10.6143 8.10254 9.97852 5.80566 9.71191ZM3.24902 9.69141C1.99805 9.69141 1.48535 9.20605 1.48535 8.03027V7.02539C1.48535 5.84277 1.99805 5.36426 3.24902 5.36426H4.69824V9.69141H3.24902ZM5.26562 13.875L3.82324 10.792H5.62109C5.65527 10.792 5.68945 10.7988 5.72363 10.7988L6.27734 13.6152C6.33203 13.9229 6.1748 14.1211 5.95605 14.1963C5.72363 14.2783 5.42285 14.2031 5.26562 13.875Z"})}),Y=(0,G.I)("noTemplate",{viewBox:"0 0 16 16",svg:n()("path",{d:"M12.1492 1.71777C12.8647 1.71777 13.4001 1.89551 13.7556 2.25098C14.1156 2.60189 14.2957 3.13053 14.2957 3.83691V12.1836C14.2957 12.2201 14.2934 12.2565 14.2888 12.293C14.2843 12.3294 14.2797 12.3636 14.2751 12.3955L13.1882 11.3086C13.1882 11.2812 13.1882 11.2562 13.1882 11.2334C13.1928 11.2061 13.1951 11.1787 13.1951 11.1514V3.8916C13.1951 3.53613 13.1016 3.26953 12.9148 3.0918C12.7325 2.90951 12.4727 2.81836 12.1355 2.81836H4.85522C4.82788 2.81836 4.80054 2.81836 4.77319 2.81836C4.74585 2.81836 4.72078 2.82064 4.698 2.8252L3.61108 1.73828C3.6521 1.72917 3.69084 1.72461 3.72729 1.72461C3.76831 1.72005 3.8116 1.71777 3.85718 1.71777H12.1492ZM3.85718 14.3027C3.14168 14.3027 2.60392 14.125 2.2439 13.7695C1.88843 13.4186 1.71069 12.89 1.71069 12.1836V3.83691C1.71069 3.79134 1.71069 3.7526 1.71069 3.7207C1.71525 3.68424 1.72209 3.64779 1.7312 3.61133L2.81812 4.69824C2.81356 4.72103 2.81128 4.74609 2.81128 4.77344C2.81128 4.80078 2.81128 4.82812 2.81128 4.85547V12.1289C2.81128 12.4844 2.90243 12.7533 3.08472 12.9355C3.26701 13.1133 3.52905 13.2021 3.87085 13.2021H11.1716C11.2309 13.2021 11.2833 13.1999 11.3289 13.1953L12.4158 14.2822C12.3748 14.2868 12.3315 14.2913 12.2859 14.2959C12.2449 14.3005 12.1993 14.3027 12.1492 14.3027H3.85718ZM14.0359 14.7744L1.21851 1.9707C1.11825 1.87044 1.06812 1.7474 1.06812 1.60156C1.06812 1.45117 1.11825 1.32585 1.21851 1.22559C1.32332 1.12077 1.44865 1.06836 1.59448 1.06836C1.74032 1.06836 1.86564 1.12077 1.97046 1.22559L14.781 14.0293C14.8858 14.1341 14.936 14.2572 14.9314 14.3984C14.9314 14.5443 14.8813 14.6696 14.781 14.7744C14.6807 14.8792 14.5577 14.9316 14.4119 14.9316C14.266 14.9316 14.1407 14.8792 14.0359 14.7744Z"})}),$=(0,G.I)("product",{viewBox:"0 0 18 14",svg:n()("path",{d:"M9.6084 13.8457C12.4863 13.8457 14.4072 12.8271 14.4072 11.3232C14.4072 9.97656 13.2588 9.67578 13.2588 8.88281C13.2588 7.78906 17.2305 7.57031 17.2305 4.76074C17.2305 1.98535 14.3662 0.15332 10.1143 0.15332C4.5293 0.15332 0.762695 2.94238 0.762695 7.11914C0.762695 11.1387 4.33789 13.8457 9.6084 13.8457ZM9.6084 12.6768C4.98047 12.6768 1.93164 10.4482 1.93164 7.11914C1.93164 3.63281 5.17188 1.32227 10.1143 1.32227C13.7031 1.32227 16.0615 2.7168 16.0615 4.76074C16.0615 7.14648 12.0625 6.8252 12.0625 8.88965C12.0625 10.0586 13.2383 10.4277 13.2383 11.2344C13.2383 12.1025 11.8096 12.6768 9.6084 12.6768ZM10.1758 4.76074C10.8184 4.76074 11.3242 4.24805 11.3242 3.60547C11.3242 2.96973 10.8184 2.45703 10.1758 2.45703C9.54688 2.45703 9.02051 2.96973 9.02051 3.60547C9.02051 4.24805 9.54688 4.76074 10.1758 4.76074ZM6.70996 5.86816C7.50293 5.86816 8.14551 5.23242 8.14551 4.42578C8.14551 3.63965 7.49609 3.01074 6.70996 3.01074C5.91016 3.01074 5.26758 3.63965 5.26758 4.42578C5.26758 5.23242 5.91016 5.86816 6.70996 5.86816ZM13.2998 5.19824C13.8125 5.19824 14.2227 4.78125 14.2227 4.26172C14.2227 3.74902 13.8125 3.33203 13.2998 3.33203C12.7803 3.33203 12.3564 3.74902 12.3564 4.26172C12.3564 4.78125 12.7803 5.19824 13.2998 5.19824ZM4.21484 8.05566C4.84375 8.05566 5.34961 7.53613 5.34961 6.90723C5.34961 6.27832 4.84375 5.77246 4.21484 5.77246C3.59277 5.77246 3.08008 6.27832 3.08008 6.90723C3.08008 7.53613 3.59277 8.05566 4.21484 8.05566ZM9.04785 11.0635C10.0869 11.0635 10.9414 10.209 10.9414 9.16309C10.9414 8.13086 10.0869 7.27637 9.04785 7.27637C8.00879 7.27637 7.1543 8.13086 7.1543 9.16309C7.1543 10.209 8.00879 11.0635 9.04785 11.0635ZM9.04785 10.2705C8.43945 10.2705 7.94727 9.77832 7.94727 9.16309C7.94727 8.48633 8.4668 8.08301 9.03418 8.07617C9.61523 8.06934 10.1484 8.46582 10.1484 9.16309C10.1484 9.77832 9.66309 10.2705 9.04785 10.2705Z"})}),Q=(0,G.I)("sales",{viewBox:"0 0 16 15",svg:n()("path",{d:"M2.49707 14.0186H13.4961C14.9111 14.0186 15.6084 13.3281 15.6084 11.9336V5.28223C15.6084 3.88086 14.9111 3.19727 13.4961 3.19727H11.4658V2.65723C11.4658 1.37207 10.7891 0.770508 9.55176 0.770508H6.44141C5.2793 0.770508 4.53418 1.37207 4.53418 2.65723V3.19727H2.49707C1.08887 3.19727 0.384766 3.88086 0.384766 5.28223V11.9336C0.384766 13.3281 1.08887 14.0186 2.49707 14.0186ZM5.59375 2.58203C5.59375 2.0625 5.89453 1.76855 6.42773 1.76855H9.56543C10.0986 1.76855 10.4062 2.0625 10.4062 2.58203V3.19727H5.59375V2.58203ZM1.48535 5.33691C1.48535 4.63281 1.84082 4.29102 2.51074 4.29102H13.4824C14.1523 4.29102 14.5078 4.63281 14.5078 5.33691V6.19824C12.5664 6.86816 10.3652 7.20312 8 7.20312C5.62793 7.20312 3.42676 6.86816 1.48535 6.19824V5.33691ZM2.51074 12.9248C1.84082 12.9248 1.48535 12.5762 1.48535 11.8789V7.33984C2.94141 7.79102 4.52051 8.07812 6.18164 8.19434V8.74805C6.18164 9.22656 6.45508 9.49316 6.93359 9.49316H9.05957C9.54492 9.49316 9.81836 9.22656 9.81836 8.74805V8.19434C11.4727 8.07812 13.0518 7.79102 14.5078 7.33984V11.8789C14.5078 12.5762 14.1523 12.9248 13.4824 12.9248H2.51074Z"})});var J=i(5108),X=i(87279),ee=i(17311),te=i(31194),ie=i(52275),ae=i(31945),ne=i(61519),oe=i(78140),se=i(32163),re=i(72495),le=i(38294);const de={marketing:{title:le.J.marketing,icon:j},sales:{title:le.J.sales,icon:Q},product:{title:le.J.product,icon:$},eng:{title:le.J.eng,icon:q},other:{title:n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.functions.generalTitle",defaultMessage:"General"}),icon:J.n},no_template:{title:n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.functions.noneTitle",defaultMessage:"Blank"}),icon:Y}},ce={marketing:{title:le.J.marketing,icon:j},sales:{title:le.J.sales,icon:Q},product:{title:le.J.product,icon:$},eng:{title:le.J.eng,icon:q},other:{title:n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.functions.generalTitle",defaultMessage:"General"}),icon:J.n},no_template_v2:{title:n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.functions.noneAltTitle",defaultMessage:"None"}),icon:Y}};const ue=function(){window.__c={n:"SidebarCreateTeamModalPersonaSelection"};const e="variant_2"===(0,C.a)("new_teamspace_templates")?ce:de,t=(0,s.O7)(),i=(0,l.VK)((()=>T.Z.state.persona),[]),{teamId:a,flowId:r}=(0,l.VK)((()=>T.Z.state),[]),c=(0,d.yK)((e=>({chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},button:{border:`1px solid ${e.regularDividerColor}`,borderRadius:ee.Z.borderRadius,margin:0,width:"100%"},icon:{width:16,height:16}})),[]);return n()(ae.ZP,{popupType:ae.Z4.Popup,renderOrigin:t=>{const a=e[i];return a?o.createElement(ie.Z,K()({},t,{buttonStyle:c.button,title:a.title,icon:a.icon?a.icon(c.icon):void 0,right:(0,H.i)(c.chevron),focused:!1})):null},placementToOrigin:te.Iw.Bottom,alignmentToOrigin:te.lU.Start,sameWidthAsOrigin:!0,render:i=>n()(oe.Z,{menuType:X.og.Popup},void 0,n()(se.Z,{type:se.i.Vertical,initialFocus:void 0,sections:[{key:"functions",render:e=>o.createElement(re.Z,e),items:Object.entries(e).map((e=>{let[s,l]=e;const d=s,u=l.icon?l.icon(c.icon):void 0;return{key:d,render:e=>o.createElement(o.Fragment,null,d.includes("no_template")?o.createElement(o.Fragment,null,n()(ne.Z,{size:12}),o.createElement(ie.Z,K()({title:l.title,icon:u},e))):o.createElement(ie.Z,K()({title:l.title,icon:u},e))),action:()=>{T.Z.update((e=>({...e,persona:d}))),a&&y.YYV(t,{teamId:a,flowId:r,persona:d}),i.close()}}})).filter(h.$K)}]}))})};var me=i(65426),pe=i(30688),ge=i(93686);const he={userSelect:"none",WebkitUserSelect:"none",position:"relative",padding:"22px 26px"},fe={createTeamContainer:{...he,width:480},addMembersContainer:{...he,width:500},full:{width:"100%"}},ve=(0,v.defineMessages)({teamNamePlaceholder:{id:"sidebarCreateTeamModal.teamScreen.namePlaceholder",defaultMessage:"Acme Labs"},teamDescriptionPlaceholder:{id:"sidebarCreateTeamModal.teamScreen.descriptionPlaceholder",defaultMessage:"Details about your teamspace"}});function ye(){window.__c={n:"TeamDescriptionRow"};const[e,t]=(0,l.AF)(T.Z);return o.createElement(o.Fragment,null,n()(L.Z,{hasMarginTop:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.teamDescriptionLabel",defaultMessage:"Description"})),n()(Z.Z,{value:e.description,placeholder:S.default.formatMessage(ve.teamDescriptionPlaceholder),textarea:!0,onChange:i=>{t({...e,description:i.target.value})}}))}function Se(e){return n()("div",{id:e.titleAriaId,style:{fontSize:18,fontWeight:f.Z.fontWeight.semibold}},void 0,(()=>{switch(e.screen){case T.F.Team:return n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamTitle.label",defaultMessage:"Create a new teamspace"});case T.F.Members:return n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.membersTitle.label",defaultMessage:"Add people"});default:(0,h.t1)(e.screen)}})())}function be(e){window.__c={n:"ModalContent"};const t=(0,s.O7)(),[i]=(0,l.AF)(T.Z),a=(0,o.useCallback)(((e,i)=>{P.ED({environment:t,from:i,teamStore:e})}),[t]),{screen:r}=i;switch(r){case T.F.Team:return n()(Ce,{titleAriaId:e.titleAriaId,descriptionAriaId:e.descriptionAriaId});case T.F.Members:const t=i.teamId;return t?n()(Ie,{teamId:t,onCompleted:e=>{a(e,"success")},onCanceled:e=>{a(e,"dismiss_button")}}):null;default:(0,h.t1)(r)}}function Me(){window.__c={n:"TeamIconAndNameRow"};const[e,t]=(0,l.AF)(T.Z),i=(0,l.VK)((()=>_.default.state.currentSpaceStore),[]),a=(0,d.yK)((e=>({container:{display:"inline-flex",width:"100%",verticalAlign:"middle"},icon:{marginRight:8,marginTop:1}})),[]);if(!i)return null;const s=e.icon?{icon:e.icon,pointer:{table:"space",id:i.id}}:void 0;return o.createElement(o.Fragment,null,n()(L.Z,{hasMarginTop:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.teamNameLabel",defaultMessage:"Icon & name"})),n()("div",{style:a.container},void 0,n()(ge.p,{icon:s,size:26,style:a.icon,onChange:i=>{t({...e,icon:i})},iconLoggingData:{recordTable:"team",source:"team_creation"}}),n()(Z.Z,{value:e.name,placeholder:S.default.formatMessage(ve.teamNamePlaceholder),onChange:i=>{t({...e,name:i.target.value})},preventSafariAutofill:!0})))}function we(e){window.__c={n:"Description"};const t=(0,d.yK)((()=>({})),[]);return n()(R.Z,{id:e.descriptionAriaId,isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:t.description},void 0,(()=>{switch(e.screen){case T.F.Team:return n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamDescription.label",defaultMessage:"Teamspaces are where your team organizes pages, permissions, and members"});case T.F.Members:return null;default:(0,h.t1)(e.screen)}})())}function Ce(e){window.__c={n:"TeamScreen"};const[t]=(0,l.AF)(T.Z),i=(0,s.O7)();return(0,o.useEffect)((()=>{if(t.open){const{from:e,flowId:a}=t;y.krX(i,{from:e,flowId:a})}}),[]),n()("div",{style:fe.createTeamContainer},void 0,n()(Se,{titleAriaId:e.titleAriaId,screen:T.F.Team}),n()(we,{descriptionAriaId:e.descriptionAriaId,screen:T.F.Team}),n()("div",{style:fe.full},void 0,n()(Me,{}),n()(ye,{}),n()(ke,{}),n()(Te,{})),n()(W,{}))}function _e(){window.__c={n:"ScreenLoadingSpinner"};const e=(0,l.VK)((()=>T.Z.state.loading),[]),t=(0,d.yK)((e=>({spinner:{width:"100%",height:"100%",backgroundColor:e.modalUnderlayBackground,position:"absolute",top:0,left:0}})),[]);return o.createElement(o.Fragment,null,e&&n()("div",{style:t.spinner},void 0,n()(A.Z,{style:{position:"absolute",top:"50%",left:"50%"}})))}function ke(){window.__c={n:"TemplateSection"};const e=(0,d.yK)((()=>({tooltip:{maxWidth:300,whiteSpace:"pre-wrap"}})),[]),t=(0,C.a)("new_teamspace_templates");(0,o.useEffect)((()=>{"variant_1"===t&&T.Z.update((e=>({...e,persona:"no_template"}))),"variant_2"===t&&T.Z.update((e=>({...e,persona:"no_template_v2"})))}),[t]);const i=(0,l.VK)((()=>{const e=(0,M.zt)();return(0,g.QM)(e)||(0,g.Aw)(e)}),[]);if("variant_1"===t)return null;if("variant_2"===t&&i)return null;const a=n()(v.FormattedMessage,"variant_2"===t?{id:"sidebarCreateTeamModal.optionalTemplateSelection.labelMarkedOptional",defaultMessage:"Templates (optional)"}:{id:"sidebarCreateTeamModal.optionalTemplateSelection.label",defaultMessage:"Templates"});return n()(B.Z,{render:e=>o.createElement("div",e,n()(L.Z,{hasMarginTop:!0},void 0,a),n()(ue,{})),renderTooltip:()=>n()("div",{style:e.tooltip},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.optionalFunctionSelectionDescription.label",defaultMessage:"This will determine the default templates in your teamspace. You can always change them later."})),placement:B.Z.Placement.Left})}function Te(){window.__c={n:"AccessLevelSection"};const e=(0,d.yK)((e=>({openAccessMessage:{fontSize:13,color:e.mediumTextColor,marginTop:20,lineHeight:1.4,display:"flex"},iconContainer:{marginRight:8},openTeamIcon:{width:24,fill:e.mediumIconColor},teamAccessPopupContainer:{marginTop:20}})),[]),[t,i]=(0,l.AF)(T.Z),a=(0,w.OX)(),r=(0,s.O7)(),c=(0,l.VK)((()=>{const e=_.default.state.currentSpaceStore;return e?(0,b.rn)(r,e):"this workspace"}),[r]);return a?n()("div",{style:e.openAccessMessage},void 0,n()("div",{style:e.iconContainer},void 0,(0,m.R)(e.openTeamIcon)),n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.openAccessLabel",defaultMessage:"Everyone at {spaceName} and new members will have access to this teamspace",values:{spaceName:c}})):o.createElement(o.Fragment,null,n()(L.Z,{hasMarginTop:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.permissionsLabel",defaultMessage:"Permissions"})),n()(me._,{currentAccessLevel:t.accessLevel,currentIsDefault:t.isDefault,onChange:(e,a)=>{i(a?{...t,accessLevel:"open",isDefault:a}:{...t,accessLevel:e,isDefault:a})}}))}function Ie(e){window.__c={n:"MemberScreen"};const t=(0,s.O7)(),[,,i]=(0,l.AF)(T.Z),[,,a]=(0,l.AF)(void 0,I.Z);(0,l.VK)((()=>{const{defaultInviteTargets:e,flowId:t}=i.state;a.setState({...a.state,flowId:t}),e&&a.setState({...a.state,isInviteTargetsEmpty:!1,inviteTargets:e})}),[i,a]);const o=(0,l.VK)((()=>_.default.state.currentSpaceStore),[]);if(!o)return null;const r=k.zX.createChildStore(o,{table:"team",id:e.teamId,spaceId:o.id});return n()("div",{style:fe.full},void 0,n()("div",{style:fe.addMembersContainer},void 0,n()(pe.Z,{store:r,permissionsInviteStore:a,isNewlyCreatedTeam:!0,onSubmitSuccessful:()=>{e.onCompleted(r),P.hI({environment:t,teamStore:r,shouldScroll:!0})},onDismiss:()=>{e.onCanceled(r)}})))}const Pe=[c.Z.images.avatars.avatar1Png,c.Z.images.avatars.avatar2Png,c.Z.images.avatars.avatar3Png];function xe(e){let{handleModalClose:t}=e;window.__c={n:"FirstTeamHeader"};const i=(0,d.yK)((e=>({container:{borderTopLeftRadius:5,borderTopRightRadius:5,background:e.inputBackground,boxShadow:e.inputBoxShadow},header:{display:"flex",padding:14,fontWeight:f.Z.fontWeight.medium},avatarGroup:{display:"flex",width:"100",marginLeft:4,alignSelf:"center"},avatar:{marginLeft:-4},message:{paddingLeft:14,paddingRight:14},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor}})),[]);return n()("div",{style:i.container},void 0,n()("div",{style:i.header},void 0,n()("div",{style:i.avatarGroup},void 0,Pe.map(((e,t)=>n()(D.Z,{avatarShouldShowShadow:!0,style:i.avatar,size:28,avatar:{avatarUrl:e}},t)))),n()(R.Z,{style:i.message,isMultiline:!0,isSmall:!0},void 0,n()(v.FormattedMessage,{id:"sidebarCreateTeamModal.teamScreen.firstTeamHeader",defaultMessage:"Create your first teamspace to start using Notion with your teammates"})),n()(x.Z,{onClick:t,style:i.closeButton,hoveredStyle:i.closeButtonHover},void 0,(0,u.D)(i.closeButtonIcon))))}function Ze(){window.__c={n:"SidebarCreateTeamModal"};const e=(0,s.O7)(),[t,,]=(0,l.AF)(T.Z),i=(0,r.C)(),a=(0,r.C)(),c=(0,d.yK)((e=>({modal:{maxWidth:500,borderRadius:5},closeButton:{position:"absolute",top:14,right:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:14,fill:e.mediumTextColor},wrapper:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"},container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"}})),[]),m=(0,o.useCallback)((t=>{P.ED({environment:e,from:t})}),[e]),{open:g,loading:h,screen:f}=t,v=(0,w.OX)(),y=(0,o.useRef)(v);return(0,o.useEffect)((()=>{h||(y.current=v&&f===T.F.Team)}),[h,f,v]),g?n()(E.Z,{ariaLabelledBy:i,ariaDescribedBy:a,open:g,innerStyle:c.modal,onDismiss:()=>{m("modal")},render:()=>{const{device:t}=e;return n()("div",{style:{height:"100%"}},void 0,!t.isMobile&&(y.current?n()(xe,{handleModalClose:()=>{m("close_button")}}):n()(x.Z,{onClick:()=>{m("close_button")},style:c.closeButton,hoveredStyle:c.closeButtonHover},void 0,(0,u.D)(c.closeButtonIcon))),n()("div",{style:c.wrapper},void 0,n()(F.Z,{capture:!0,onBackspace:p.yR,onLeft:p.yR,onRight:p.yR,onSelectAll:p.yR,onRedo:p.yR,onUndo:p.yR,onCut:p.yR,onCopy:p.yR,onPaste:p.yR,onKeypress:p.yR,onDelete:p.yR,onTab:p.yR},void 0,n()(be,{titleAriaId:i,descriptionAriaId:a}))),n()(_e,{}))}}):null}},65426:(e,t,i)=>{i.d(t,{_:()=>T});var a=i(23174),n=i.n(a),o=i(10434),s=i.n(o),r=i(67294),l=i(480),d=i(86628),c=i(24405),u=i(36591),m=i(42853),p=i(5257),g=i(87279),h=i(98742),f=i(46874),v=i(63060),y=i(4023),S=i(31194),b=i(52275),M=i(31945),w=i(78140),C=i(32163),_=i(72495),k=i(26388);function T(e){let{currentAccessLevel:t,currentIsDefault:i=!1,onChange:a,teamStore:o,disabledWithRightChevron:T=!1,style:I}=e;window.__c={n:"TeamAccessLevelButtonPopup"};const{device:P}=(0,l.O7)(),x=(0,f.q)(o),Z=(0,c.yK)((e=>({chevron:{width:12,marginLeft:3,marginRight:3,fill:e.lightIconColor},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${e.outlineButtonBorder}`,...I},selectedCheckmark:{width:P.isMobile?16:14},icon:{alignSelf:"center",marginTop:0}})),[P.isMobile,I]),F=(0,d.VK)((()=>(null==o?void 0:o.isDefault())??i),[o,i]),A=F?"default":t,E=(0,v.U)({teamStore:o,onChange:a,isDefault:F});return n()(M.ZP,{popupType:P.isMobile?M.Z4.SlideUp:M.Z4.Popup,renderOrigin:e=>{const t=E.find((e=>e.key===A));if(!t)return null;const i=t.disableAllOptionsTooltip,a=T||Boolean(i)||Boolean(o)&&!x;return n()(k.Z,{placement:y.u.Bottom,alignment:y.v.Start,disableTooltip:!i||!x,renderTooltip:()=>i,style:{width:350},textWrap:!0,render:i=>r.createElement(b.Z,s()({},(0,h.Z)(e,i),{title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:Z.icon,disabled:a,right:T?(0,p.o)(Z.chevron):a?void 0:(0,m.i)(Z.chevron),focused:!1,shouldWrapCaption:!0,buttonStyle:Z.selectedButton}))})},placementToOrigin:S.Iw.Bottom,alignmentToOrigin:S.lU.Start,sameWidthAsOrigin:!0,render:e=>{const t=[{key:"access levels",render:e=>r.createElement(_.Z,s()({},e,{topBorder:0!==e.index})),items:E.map((t=>{const i=t.key===A;return{key:t.key,render:e=>n()(k.Z,{placement:y.u.Top,disableTooltip:!t.tooltip,renderTooltip:()=>t.tooltip,render:a=>r.createElement(b.Z,s()({},(0,h.Z)(e,a),{title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:Z.icon,right:i?n()("div",{style:Z.selectedCheckmark},void 0,(0,u.e)()):void 0,disabled:t.disabled,shouldWrapCaption:!0}))}),action:()=>{t.onSelect(),e.close()}}}))}];return n()(w.Z,{menuType:g.og.Popup},void 0,n()(C.Z,{type:C.i.Vertical,initialFocus:void 0,sections:t}))}})}},58260:(e,t,i)=>{i.d(t,{Z:()=>d});var a=i(23174),n=i.n(a),o=i(67294),s=i(16184),r=i(5366),l=i(26388);function d(e){let{iconStyle:t}=e;return n()(l.Z,{textWrap:!0,style:{width:210},placement:l.Z.Placement.Bottom,renderTooltip:()=>n()(r.FormattedMessage,{id:"teamLockIcon.tooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>o.createElement("div",e,(0,s.Q)(t))})}},77176:(e,t,i)=>{i.r(t),i.d(t,{default:()=>O});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(24405),d=i(33728),c=i(59054),u=i(5366),m=i(21325),p=i(4708),g=i(87279),h=i(45101),f=i(95697),v=i(80444),y=i(33052),S=i(78140),b=i(43579),M=i(91487),w=i(47082),C=i(10434),_=i.n(C),k=i(42853),T=i(72126),I=i(46874),P=i(31194),x=i(52275),Z=i(31945),F=i(32163),A=i(89728),E=i(72495),B=i(26388);function R(e){window.__c={n:"TeamRoleSelect"};const{disabled:t,selectedRole:i,allRoles:a,onChange:d,store:c,labelStyle:m}=e,{device:p}=(0,s.O7)(),h=(0,l.Fg)(),y=(0,I.q)(c),b=(0,r.VK)((()=>{const{currentSpaceStore:e}=v.default.state;return null==e?void 0:e.canEditMembership()}),[]),M=(0,r.VK)((()=>c.isDefault()),[c]);return n()(Z.ZP,{popupType:p.isMobile?Z.Z4.SlideUp:Z.Z4.Popup,renderOrigin:e=>o.createElement(A.Z,_()({style:m,disabled:t,disabledFeedback:!0},e),o.createElement(u.FormattedMessage,f.q9[i].label),(0,k.i)({width:10,marginLeft:4,fill:h.lightIconColor})),placementToOrigin:P.Iw.Bottom,render:e=>{const t=[{key:"roles",render:e=>o.createElement(E.Z,_()({},e,{topBorder:0!==e.index})),items:a.map((t=>{const a=!y&&"owner"===t,s=M&&"team_level_guest"===t,r=!b&&"team_level_guest"===t,l=!y&&"team_level_guest"===t,c=a||s||r||l;return{key:t,render:e=>n()(B.Z,{disableTooltip:!c,placement:B.Z.Placement.Right,textWrap:!0,renderTooltip:()=>a?n()(u.FormattedMessage,{id:"TeamRoleSelect.memberType.disableAddingOwnerForMembers",defaultMessage:"Teamspace members can't add owners"}):s?n()(u.FormattedMessage,{id:"TeamRoleSelect.memberType.disableAddingGuestsInDefaultTeam",defaultMessage:"Default teams can't contain teamspace guests"}):r||l?n()(u.FormattedMessage,{id:"TeamRoleSelect.memberType.disableAddingGuestForNonSpaceAdminsOrNonTeamOwners",defaultMessage:"You must be a workspace owner and a teamspace owner to add teamspace guests"}):void 0,render:a=>o.createElement("span",a,o.createElement(x.Z,_()({},e,{focused:!1,checkState:T.Xy(t,i),disabled:c,disabledFeedback:c,title:n()("div",{style:{display:"flex",alignItems:"center"}},void 0,o.createElement(u.FormattedMessage,f.q9[t].label)),caption:n()("span",{style:{color:h.mediumTextColor}},void 0,o.createElement(u.FormattedMessage,f.q9[t].caption)),shouldWrapCaption:!0})))}),action:()=>{d(t),e.close()}}}))}];let s;return s=p.isMobile?{menuType:g.og.Modal,title:n()(u.FormattedMessage,{id:"teamPermissionsMenu.mobile.title",defaultMessage:"Select teamspace role"}),right:n()(u.FormattedMessage,{id:"teamPermissionsMenu.mobile.doneButton.label",defaultMessage:"Done"}),onClickRight:e.close}:{menuType:g.og.Popup,width:264},o.createElement(S.Z,s,n()(F.Z,{type:F.i.Vertical,initialFocus:void 0,sections:t}))}})}const D="member";function L(e){window.__c={n:"TeamPermissionsInviteInput"};const{store:t,permissionsInviteStore:i,onEmptySubmit:a}=e,o=(0,u.useIntl)(),s=(0,r.VK)((()=>Boolean(i.state.isFocused)),[i]),c=(0,r.VK)((()=>i.state.tokenQuery),[i]),m=(0,r.VK)((()=>i.state.inviteRole),[i]),p=(0,r.VK)((()=>i.state.inviteTargets),[i]),g=(0,l.yK)((e=>({inputTokenVerticalMargin:{marginTop:3,marginBottom:3},tokenMenuItem:{alignItems:"unset",borderRadius:3,paddingTop:5,paddingBottom:5,paddingLeft:8,paddingRight:5,boxShadow:s?e.outlineBlueInputBoxShadow:e.inputBoxShadow,maxHeight:"40vh"},inputDiv:{marginBottom:0}})),[s]);function f(e){if(i.state.isInviteTargetsEmpty)return;const t=i.state.inviteTargets.filter((t=>t!==e));0===p.length?i.setState({...i.state,inviteTargets:[],inviteRole:D,isInviteTargetsEmpty:!0}):i.setState({...i.state,inviteTargets:t})}function v(e){i.setState({...i.state,isFocused:e})}const y=p.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`;return n()(M.Z,{target:e,onClickRemove:f,role:m,shouldWrap:!0,style:g.inputTokenVerticalMargin,backgroundColor:(0,h.gQ)(e)},t)}));return n()(w.Z,{focus:s,onClick:()=>v(!0),format:w.Z.Format.Share,value:c,onChange:function(e){const t=e.target.value,{extractedEmails:a,newInputValue:n}=(0,d.zI)(t),o=a.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,h.Nd)({target:e,permissionsInviteStore:i}))),s=[...i.state.inviteTargets,...o];s.length>0?(i.setState({...i.state,inviteTargets:s,isInviteTargetsEmpty:!1,tokenQuery:n}),v(!(o.length>0))):i.setState({...i.state,inviteTargets:[],isInviteTargetsEmpty:!0,tokenQuery:n})},onEmptySubmit:a,type:"email",placeholder:o.formatMessage({id:"teamPermissionsInvite.searchInput.placeholder",defaultMessage:"Search people or groups"}),tokens:y,onRemoveLastToken:function(){const e={...i.state};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=D),i.setState(e)},focusAfterAnimation:!0,right:n()(N,{store:t,permissionsInviteStore:i}),style:g.tokenMenuItem,inputStyle:g.inputTokenVerticalMargin,inputDivStyle:g.inputDiv,inputFullWidth:!0})}function N(e){window.__c={n:"TeamPermissionsInviteRoleSelect"};const{store:t,permissionsInviteStore:i}=e,a=(0,r.VK)((()=>{const e=v.default.state.currentSpaceStore;return!(null!=e&&e.getDisableTeamGuests())&&(0,p.F$)()}),[]),o=(0,r.VK)((()=>i.state.inviteRole),[i]),s=(0,l.yK)((()=>({teamRoleLabel:{marginTop:3,marginBottom:3,marginLeft:5}})),[]);function d(e){i.setState({...i.state,inviteRole:e})}return n()(R,a?{store:t,selectedRole:o,allRoles:f.ZN,onChange:d,labelStyle:s.teamRoleLabel}:{store:t,selectedRole:o,allRoles:f.$r,onChange:d,labelStyle:s.teamRoleLabel})}const O=function(e){window.__c={n:"TeamPermissionsInvite"};const{store:t,onEmptySubmit:i}=e,a=(0,s.O7)();(0,c.r5)((async()=>{await m.bi(a)}),[]);const o=(0,r.qz)(e.permissionsInviteStore,y.Z),d=(0,r.VK)((()=>Boolean(o.state.isFocused)),[o]),u=(0,r.VK)((()=>o.state.tokenQuery),[o]),p=(0,r.VK)((()=>d&&u.length>0),[d,u]),h=(0,l.yK)((e=>({permissionsInviteSearchRequest:{position:"absolute",width:"100%",borderRadius:3,backgroundColor:e.contentBackground,boxShadow:e.largeBoxShadow,marginTop:4},scroller:{zIndex:1}})),[]);function f(e){o.setState({...o.state,isFocused:e})}return n()("div",{onFocus:()=>f(!0),onBlur:()=>f(!1)},void 0,n()(S.Z,{menuType:g.og.Popup,header:n()(L,{store:t,permissionsInviteStore:o,onEmptySubmit:i}),scrollerStyle:h.scroller,width:"100%",tokenInputHeader:!1,disableScroller:!0},void 0,p&&n()("div",{style:h.permissionsInviteSearchRequest},void 0,n()(b.Z,{permissionsInviteStore:o,store:t,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!0,sectionRenderLimit:10,membersOnly:!1,hideUserTypeToken:!0,disableInvitedUsers:!0}))))}},30688:(e,t,i)=>{i.d(t,{Z:()=>O,u:()=>N});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(86628),c=i(24405),u=i(33728),m=i(27714),p=i(82990),g=i(5366),h=i(50906),f=i(14871),v=i(95209),y=i(64964),S=i(43250),b=i(4708),M=i(45101),w=i(8323),C=i(95697),_=i(77907),k=i(80444),T=i(35817),I=i(42922),P=i(68785),x=i(63296),Z=i(89728),F=i(26388),A=i(64369),E=i(93686),B=i(85387);const R={button:{height:32},buttonContainer:{width:"100%",paddingTop:22,display:"flex",justifyContent:"end"},multiButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"space-between"},singleButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"right"},container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},containerLeftAligned:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},titleAndIcon:{paddingBottom:18,alignItems:"center",display:"flex"},addMembersTo:{minWidth:"25%"},icon:{paddingRight:3,paddingLeft:3},teamName:{paddingRight:10,fontWeight:p.Z.fontWeight.medium,...p.Z.textOverflowStyle,maxWidth:250},full:{width:"100%"},submitTooltip:{minWidth:250},subtitle:{paddingTop:16}};function D(e){var t;let{isLoading:i,isNewlyCreatedTeam:a,onDismiss:o,onSubmit:l,inviteTargets:c,includesGroups:u,inviteRole:m,canEditSpaceMembership:p,membershipRequestsDisabled:h,spaceAllowedDomains:f,hasTeamGuestsMatchAllowedDomain:v}=e;window.__c={n:"InviteSubmitButton"};const y=c.length>0,S=u&&"owner"===m,w=c.filter((e=>(0,M.OA)(e))).length>0&&h&&!p,C=(0,d.VK)((()=>(0,b.F$)()&&"team_level_guest"===m&&c.some((e=>"group"===e.type||"existingUser"===e.type&&"none"!==e.spaceRole&&"not_in_space"!==e.spaceRole))),[m,c]),_=S||C||w||v;if(i)return s()(I.Z,{style:{...R.button,minWidth:80},disabled:!0},void 0,s()(P.Z,{isWhite:!0}));if(a&&!y)return s()(x.Z,{style:R.button,onClick:o,disabled:i},void 0,s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlay.inviteModal.skipForNow",defaultMessage:"Skip for now"}));const k=S?s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.groupsAsOwnersTooltip",defaultMessage:"Cannot add groups as teamspace owners. Remove any groups to continue."}):C?s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.memberOrGroupInvitedAsTeamGuestTooltip",defaultMessage:"Cannot add space members or groups as teamspace guests. Remove them to continue."}):v?s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.hasTeamGuestsMatchAllowedDomain",defaultMessage:"Cannot add users with {emailDomains} as teamspace guests. Remove them to continue.",values:{emailDomains:null==f||null===(t=f.map((e=>`@${e}`)))||void 0===t?void 0:t.join(", ")}}):null;return s()(F.Z,{textWrap:!0,style:R.submitTooltip,disableTooltip:!k,renderTooltip:()=>k,render:e=>r.createElement(I.Z,n()({style:R.button,onClick:l,disabled:!y||i||_},e),s()(g.FormattedMessage,{id:"teamPermissionsInviteOverlayV2.inviteButton.label",defaultMessage:"Invite"}))})}function L(e){let{inviteTargets:t,workspaceName:i,canEditSpaceMembership:a,membershipRequestsDisabled:n,isFreeTier:o,inviteRole:r,hasTeamGuestsMatchAllowedDomain:l}=e;if(void 0===a)return null;if(!t||0===t.length)return null;const d=t.map((e=>{if("group"!==e.type&&(0,M.OA)(e))return e.value.email})).filter((e=>e));if(!d||0===d.length)return null;const c=e=>s()("b",{},void 0,e),u=i??"this workspace";return a?o?s()(A.Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0},void 0,1===d.length?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingularOwner.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a workspace owner.",values:{guestEmail:d[0],workspaceName:u,b:c}}):s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPluralOwners.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as workspace owners.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})):"team_level_guest"===r?l?null:s()(A.Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0},void 0,1===d.length?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.teamGuest.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed teamspace guest.",values:{guestEmail:d[0],workspaceName:u,b:c}}):s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.teamGuest.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed teamspace guests.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})):s()(A.Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0},void 0,1===d.length?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed workspace member.",values:{guestEmail:d[0],workspaceName:u,b:c}}):s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed workspace members.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}})):s()(A.Z,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0},void 0,n?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipDisabled.subtitle",defaultMessage:"You can't add workspace guests to a teamspace. Ask your admin to add them as workspace members first."}):1===d.length?s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipSingular.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{guestEmail}</b> as a member to {workspaceName}.",values:{guestEmail:d[0],workspaceName:u,b:c}}):s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipPlural.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> as members to {workspaceName}.",values:{firstGuest:d[0],secondGuest:d[1],numberOfOtherEmails:d.length-1,workspaceName:u,b:c}}))}function N(e){window.__c={n:"InviteLink"};const{store:t,isSmall:i}=e,a=(0,l.O7)(),n=(0,c.yK)((e=>({button:{marginRight:5,marginLeft:5,height:32,fontSize:i?12:14},icon:{width:i?12:14,height:i?12:14}})),[i]);return s()(Z.Z,{onClick:()=>{f.RD({environment:a,stringValue:C.W8(t.id),copiedMessage:f.tq.copiedLinkToClipboard}),h.XTk(a,{store:t})},icon:m.N,style:n.button,iconStyle:n.icon,isBlue:!0},void 0,s()(g.FormattedMessage,i?{id:"teamPermissionsInviteOverlay.copyLinkCondensedButton.label",defaultMessage:"Copy link"}:{id:"teamPermissionsInviteOverlay.copyLinkButton.label",defaultMessage:"Copy invite link"}))}const O=function(e){let{store:t,permissionsInviteStore:i,isNewlyCreatedTeam:a,onSubmitSuccessful:n,onDismiss:o}=e;window.__c={n:"TeamPermissionsInviteOverlay"};const c=(0,l.O7)(),{teamName:m,workspaceName:p,canEditSpaceMembership:h,membershipRequestsDisabled:f,teamAccessLevel:I,spaceAllowedDomains:P}=(0,d.VK)((()=>{const{currentSpaceStore:e}=k.default.state;return{teamName:t.getName(),workspaceName:null==e?void 0:e.getName(),canEditSpaceMembership:null==e?void 0:e.canEditMembership(),membershipRequestsDisabled:null==e?void 0:e.getDisableMembershipRequests(),teamAccessLevel:t.getTeamAccessLevel(),spaceAllowedDomains:null==e?void 0:e.getEmailDomains()}}),[t]);(0,r.useEffect)((()=>()=>{a&&T.hI({environment:c,teamStore:t,shouldScroll:!0})}),[a,t,c]);const[x,Z]=(0,r.useState)(!1),F=(0,d.VK)((()=>i.state.inviteTargets),[i]),A=(0,d.VK)((()=>i.state.inviteTargets.length),[i]),O=(0,d.VK)((()=>i.state.inviteRole),[i]),V=(0,d.VK)((()=>{if(i.state.isInviteTargetsEmpty)return!1;return Boolean(i.state.inviteTargets.find((e=>"group"===e.type)))}),[i]),U=(0,d.VK)((()=>w.QM()),[]),W=(0,d.VK)((()=>!(null==P||!P.length||"team_level_guest"!==O||!(0,b.F$)())&&F.some((e=>"group"!==e.type&&(0,u.dy)(P,e.value.email)))),[P,O,F]),z=(0,d.VK)((()=>(0,b.s$)()?!U&&!C.U2(t):"open"===I&&(0,b.u3)()),[t,I,U]),K=async()=>{if(Z(!0),A>0){const e=i.state.inviteTargets,a=await v.zK({environment:c,store:t,permissionsInviteStore:i,inviteOrigin:"team_invite_overlay"});if(void 0!==h)if(a){const i=(0,M.t0)({inviteTargets:e,recordStore:t,canEditSpaceMembership:h});if(!i)return;setTimeout((()=>{y.oV({label:i})}))}else setTimeout((()=>{y.oV({label:s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlay.inviteMembersFailure.message",defaultMessage:"Failed to send invites"})})}))}v.Mr({permissionsInviteStore:i}),Z(!1),null==n||n()};return s()("div",{className:S.D$4,style:{...R.full}},void 0,s()("div",{style:R.containerLeftAligned},void 0,s()("div",{style:R.titleAndIcon},void 0,s()("div",{style:R.addMembersTo},void 0,s()(g.FormattedMessage,{id:"TeamPermissionsInviteOverlayV2.membersTitle.label",defaultMessage:"Invite people to"})),s()("div",{style:R.icon},void 0,s()(E.p,{disabled:!0,store:t,size:20})),s()(B.s,{style:R.teamName},void 0,m)),s()("div",{style:R.full},void 0,s()(_.LazyTeamPermissionsInvite,{store:t,permissionsInviteStore:i,onEmptySubmit:K}),s()("div",{style:R.subtitle},void 0,s()(L,{inviteTargets:F,workspaceName:p,canEditSpaceMembership:h,membershipRequestsDisabled:f,isFreeTier:U,inviteRole:O,hasTeamGuestsMatchAllowedDomain:W}))),s()("div",{style:z?R.multiButtonContainer:R.singleButtonContainer},void 0,s()("div",{style:z?R.multiButtonContainer:{}},void 0,z&&s()(N,{store:t}),s()(D,{isLoading:x,onSubmit:K,onDismiss:()=>{v.Mr({permissionsInviteStore:i}),null==o||o()},isNewlyCreatedTeam:a,inviteTargets:F,includesGroups:V,inviteRole:O,canEditSpaceMembership:h,membershipRequestsDisabled:f,spaceAllowedDomains:P,hasTeamGuestsMatchAllowedDomain:W})))))}},86100:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var a=i(23174),n=i.n(a),o=(i(67294),i(86628)),s=i(9019),r=i(30688);const l=function(e){window.__c={n:"TeamPermissionsInviteWithModal"};const[t,,i]=(0,o.AF)(e.permissionsInviteStore),a=()=>{i.reset()};return n()(s.Z,{modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:500},open:t.modalOpen,onDismiss:a,renderContent:()=>n()("div",{style:{display:"flex",flexDirection:"column",alignItems:"end",padding:22}},void 0,n()(r.Z,{store:e.store,permissionsInviteStore:i,isNewlyCreatedTeam:!1,onSubmitSuccessful:a,onDismiss:a})),origin:e.origin})}},51923:(e,t,i)=>{i.d(t,{Z:()=>p});var a=i(23174),n=i.n(a),o=(i(67294),i(24405)),s=i(5366),r=i(97880),l=i(18514),d=i(74523),c=i(85387);function u(e){switch(e){case"bestPractices":return(0,l.UY)("guides.teamspacesLearnMore");case"workspaceOwnerGuide":return(0,l.UY)("guides.teamspacesWorkspaceOwner");case"settingsAndPermissions":return(0,l.UY)("guides.teamspacesSettingsAndPermissions");default:return(0,r.t1)(e)}}function m(e){return e||n()(c.s,{},void 0,n()(s.FormattedMessage,{defaultMessage:"Learn about teamspaces",id:"teamsLearnMoreLink"}))}function p(e){let{onClick:t,message:i,helpCenterLocation:a,analyticsFrom:s,containerStyle:r}=e;window.__c={n:"TeamsLearnMoreLink"};const l=(0,o.yK)((()=>({button:{maxWidth:"100%"}})),[]);return n()("div",{style:r},void 0,n()(d.Z,{buttonStyle:l.button,title:m(i),analyticsFrom:s,href:u(a),onClick:t}))}},62512:(e,t,i)=>{i.d(t,{n:()=>h});var a=i(23174),n=i.n(a),o=(i(67294),i(86628)),s=i(24405),r=i(7928),l=i(5366),d=i(31278),c=i(45653),u=i(76472),m=i(37708);const p=u.Z.iconSize,g=m.Kt;function h(e){let{ownerStores:t,teamStore:i,isSmall:a=!1}=e;window.__c={n:"TeamOwnerIcons"};const r=a?g:p,l=a?10:16,c=(0,s.yK)((e=>({container:{position:"relative",width:r,height:r},teamBadge:{position:"absolute",bottom:-5,right:-3,background:e.modalBackground,padding:.75,borderRadius:"0.25em"}})),[r]),{teamName:u,teamIcon:m}=(0,o.VK)((()=>({teamName:i.getName(),teamIcon:i.getIcon()})),[i]),h=e=>n()(d.Z,{disabled:!0,title:u,icon:m,isEmptyPage:!1,size:e});return 0===t.length?h(r):n()("div",{style:c.container},void 0,n()(f,{isSmall:a,store:t[0]}),n()("div",{style:c.teamBadge},void 0,h(l)))}function f(e){let{store:t,isSmall:i=!1,style:a={}}=e;window.__c={n:"OwnerIcon"};const u=(0,l.useIntl)(),m=i?g:p,h=(0,s.yK)((e=>({icon:{width:m,height:m,borderRadius:m,boxShadow:e.avatarBoxShadow,...a}})),[m,a]),f=(0,o.VK)((()=>null!=t&&t.isDefined()?(0,r.Nz)(u,null==t?void 0:t.getModel()):void 0),[u,t]),v=f?n()(c.Z,{avatarShouldShowShadow:!0,userStore:t,size:m}):n()(d.Z,{bucket:"public",disabled:!0,isEmptyPage:!1,title:f,size:m,icon:void 0});return n()("div",{style:h.icon},void 0,v)}},49469:(e,t,i)=>{i.d(t,{z:()=>r});var a=i(23174),n=i.n(a),o=(i(67294),i(24405)),s=i(82990);function r(e){let{title:t,subtitle:i,style:a}=e;window.__c={n:"TeamSettingsHeader"};const r=(0,o.yK)((e=>({base:{width:"100%"},title:{fontWeight:s.Z.fontWeight.medium,color:e.regularTextColor,fontSize:14},subtitle:{fontWeight:s.Z.fontWeight.regular,color:e.mediumTextColor,fontSize:12}})),[]);return n()("div",{style:{...r.base,...a}},void 0,n()("div",{style:r.title},void 0,t),i&&n()("div",{style:r.subtitle},void 0,i))}},37708:(e,t,i)=>{i.d(t,{Kt:()=>m,MQ:()=>u,Ph:()=>p,oM:()=>c});var a=i(23174),n=i.n(a),o=i(67294),s=i(24405),r=i(61519),l=i(89728),d=i(49469);const c=15,u=8,m=20;function p(e){window.__c={n:"TeamSettingsList"};const t=(0,s.yK)((()=>({button:{height:"auto",paddingLeft:0,paddingRight:0,display:"flex"},title:{marginBottom:10}})),[]);return Boolean(e.onClick)?o.createElement(o.Fragment,null,n()(d.z,{title:e.title,style:t.title}),n()(l.Z,{onClick:e.onClick,style:t.button},void 0,o.createElement(g,e))):o.createElement(o.Fragment,null,n()(d.z,{title:e.title,style:t.title}),o.createElement(g,e))}function g(e){let{title:t,rows:i,hideDividers:a=!1,itemStyle:l,onClick:d}=e;window.__c={n:"TeamSettingsListContainer"};const m=(0,s.yK)((e=>({container:{border:`1px solid ${e.regularDividerColor}`,borderRadius:4,width:"100%"},list:{listStyle:"none",padding:0,margin:0},listItem:{marginLeft:c,marginRight:c,paddingTop:u,paddingBottom:u,...l},divider:{marginLeft:c,marginRight:c,borderColor:`${e.regularDividerColor}`}})),[l]);return n()("div",{style:{...m.container}},void 0,n()("ul",{style:m.list},void 0,i.map(((e,t)=>o.createElement(o.Fragment,null,!a&&t>0&&n()(r.Z,{size:1,innerStyle:m.divider}),n()("li",{style:m.listItem},t,e))))))}},92050:(e,t,i)=>{i.r(t),i.d(t,{default:()=>je});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(24405),d=i(15145),c=i(45433),u=i(5366),m=i(11002),p=i(50906),g=i(54642),h=i(9284),f=i(81924),v=i(70442),y=i(75018),S=i(87788);var b=i(39699),M=i(28020),w=i(58449),C=i(93959),_=i(54258),k=i(4708),T=i(98165),I=i(45096),P=i(84465),x=i(94952),Z=i(73314),F=i(97880),A=i(77080),E=i(33929);function B(e){const{subscriptionTier:t,userPersona:i,selectedTopCategory:a,isNewInAppGalleryEnabled:n}=e;if(n){const e=function(e){var t;const i=e??(null===(t=S.Z.state.data)||void 0===t?void 0:t.defaultCategoryId);if(!i)return;const a=(0,I.oO)(i);if(!a)return;return{selectedTopCategory:i,allTemplates:D(a)}}(a);if(e)return e}return function(e){return{selectedTopCategory:void 0,allTemplates:R(e)}}({subscriptionTier:t,userPersona:i})}function R(e){let{userPersona:t,subscriptionTier:i}=e;const a=E.default.getIntl();return Object.fromEntries((0,I.Io)({userPersona:t,subscriptionTier:i}).map((e=>[e,[...P.gh[e].map((e=>(0,C.F0)((0,w.appPackageConfigs)(),e))),...P.J9[e].filter((e=>(0,x.G)(e,A.default))).map((e=>(0,Z.G)(e,a)))]])))}function D(e){return e.subcategories.reduce(((e,t)=>{let{id:i,templates:a}=t;return i&&null!=a&&a.length?{...e,[i]:a.map((e=>"preset"===e.type?(0,C.F0)((0,w.appPackageConfigs)(),e.uri):"pageTemplate"===e.type?e.template:void(0,F.t1)(e)))}:e}),{})}var L=i(94660),N=i(47967),O=i(80444),V=i(37394),U=i(50506),W=i(10434),z=i.n(W),K=i(41892),H=i(75071),G=i(21202),q=i(95477),j=i(55220);var Y=i(82136),$=i(57559),Q=i(42922),J=i(31945),X=i(62896),ee=i(73063),te=i(16354),ie=i(64369),ae=i(81156),ne=(i(57658),i(16184)),oe=i(87279),se=i(52275),re=i(78140),le=i(32163),de=i(72495),ce=i(45653),ue=i(14254),me=i(93686);function pe(e){window.__c={n:"TeamPickerButton"};const{renderOrigin:t,onTeamAccept:i,sectionTitle:a,showMemberCount:l,right:d,showPrivate:c,onPrivateAccept:m,captionItem:p}=e,g=(0,s.Fy)().isMobile,h=he(),f=(0,j.E)(),v=(0,r.VK)((()=>f.filter((e=>e.canAddOrRemoveTopLevelPages()))),[f]),y=(0,r.VK)((()=>O.default.state.currentUserStore),[]),S=[];if(p){const e={key:"caption",render:e=>o.createElement(de.Z,z()({},e,{topBorder:!0})),items:[p]};S.push(e)}const b=v.map((e=>({key:e.id,action:()=>{i(e)},render:t=>o.createElement(ge,z()({},t,{team:e,onAccept:i,showMemberCount:l,right:d}))}))),M={key:"teams",render:e=>o.createElement(de.Z,z()({},e,{title:a})),items:b};if(S.push(M),c){const e={key:"private",render:e=>o.createElement(de.Z,z()({},e,{topBorder:b.length>0})),items:[{key:"private",action:()=>{},render:e=>o.createElement(se.Z,z()({},e,{icon:n()("div",{style:{position:"relative"}},void 0,n()(ce.Z,{hasTooltip:!1,userStore:y}),(0,ne.Q)(h.privateItemLockIcon)),title:n()(u.FormattedMessage,{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}),onClick:()=>{null==m||m()}}))}]};S.push(e)}return o.createElement(J.ZP,z()({},e,{popupType:g?J.Z4.SlideUp:J.Z4.Popup,renderOrigin:t,render:e=>{let t;return t=g?{menuType:oe.og.ActionSheet}:{menuType:oe.og.Popup,width:"100%"},o.createElement(re.Z,t,n()(le.Z,{style:{width:g?void 0:256},type:le.i.Vertical,initialFocus:void 0,sections:S}))}}))}function ge(e){window.__c={n:"TeamItem"};const{team:t,onAccept:i,showMemberCount:a,right:s,...l}=e,d=he(),c=(0,r.VK)((()=>t.getUserIdsInTeam().length),[t]);return o.createElement(se.Z,z()({},l,{onClick:e=>i(t),icon:n()(me.p,{store:t,size:20,disabled:!0}),title:n()(ue.o,{teamStore:t}),right:l.focused?s:null,caption:a?n()("div",{style:d.caption},void 0,n()(u.FormattedMessage,{defaultMessage:"{numberOfMembers, plural, one {{numberOfMembers} member} other {{numberOfMembers} members}}",id:"teamPickerButton.teamItem.teamMemberCount",values:{numberOfMembers:c}})):null}))}function he(){return(0,l.yK)((e=>({privateItemLockIcon:{position:"absolute",bottom:-2,right:-2,zIndex:1,width:10,height:10,fill:e.accentColors.red[500]},caption:{color:e.lightTextColor}})),[])}function fe(e){window.__c={n:"TemplateDetail"};const t=(0,s.O7)(),i=function(e){const[t,i]=o.useState(!1);return o.useEffect((()=>{const t=window.matchMedia(e);function a(e){i(e.matches)}return t.addEventListener("change",a),()=>{t.removeEventListener("change",a)}}),[e]),t}("(max-width: 960px)"),a=(0,l.yK)((e=>({container:{width:"100%",height:"100%",overflow:"auto",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",background:e.contentBackground,color:e.regularTextColor},contentContainer:{margin:16,padding:"20px 24px",border:"1px solid rgba(0, 0, 0, 0.07)",borderRadius:8,background:e.sidebarBackground,display:"flex",flexDirection:"row",justifyContent:"space-between",columnGap:50,flexWrap:i?"wrap":"nowrap"},getTemplateColumn:{width:i?"100%":void 0,display:"flex",flexDirection:i?"column-reverse":"column"},madeByLabelV1:{marginTop:16,marginBottom:16},heroImg:{height:"100%",width:"100%"},getTemplateButton:{width:i?"100%":220,height:38,fontSize:16},addBadgeTeamTemplateButton:{textTransform:"none",color:e.blueColor},madeByV2Container:{marginBottom:16,display:"flex",flexDirection:"row",alignItems:"center",gap:6,width:"content-fit"},madeByV2Label:{fontSize:14,fontWeight:500},madeByV2AvatarContainer:{width:30,height:30,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:`1px solid ${e.outlineButtonBorder}`,overflow:"hidden",backgroundColor:"rgb(245, 245, 245)"},madeByV2Avatar:{width:30,height:30},madeByV2NotionAvatar:{width:16,height:16}})),[i]),{status:d,selectedTemplate:c,cloneTo:m,selectedTeam:g}=(0,r.VK)((()=>V.Z.state),[]),h=(0,r.VK)((()=>(0,k.s2)()),[]),f=(0,r.VK)((()=>{if("open"===d&&"preset"===(null==c?void 0:c.type)){const e=c.uri,t=(0,C.SP)((0,w.appPackageConfigs)(),e),i=null==t?void 0:t.presets.find((t=>t.uri===e));if(t&&i)return{currentApp:t,currentPreset:i}}}),[d,c]),v=(0,r.VK)((()=>{if(c){if("preset"===c.type){var e;if(!f)return;const{currentPreset:i}=f,o=null===(e=i.previews)||void 0===e?void 0:e.find((e=>"previewRootId"in e)),s=o&&new $.G(t,{table:G.iU,id:o.previewRootId,spaceId:o.spaceId}),r=s?n()("div",{style:{overflow:"hidden",paddingTop:64,paddingLeft:64,paddingRight:64}},void 0,n()(ae.Z,{store:s,loadingContainerStore:void 0,context:Y.S.InAppTemplatePreview,paddingLeft:0,paddingRight:0,paddingBottom:0,pageCoverHeight:0,titleStyle:{fontSize:32},disabled:!0},s.id)):n()("img",{style:a.heroImg,src:K.Z.images.appPackages.projectPreview1Png});return[i.name,i.description,n()("img",{src:i.icon,style:{width:30,height:30}},i.uri),r]}if("pageTemplate"===c.type){const{template:e}=c,i=new $.G(t,{table:G.iU,id:e.previewRootId,spaceId:e.spaceId}),a=i.isCollectionView()?64:0,o=n()("div",{style:{overflow:"hidden",paddingTop:a,paddingLeft:a,paddingRight:a}},void 0,n()(ae.Z,{store:i,loadingContainerStore:void 0,context:Y.S.InAppTemplatePreview,paddingLeft:0,paddingRight:0,paddingBottom:0,pageCoverHeight:ae.Z.defaultPageCoverHeight(t),disabled:!0,style:{...i.isFullWidth()?{width:"calc(100% - 64px)",margin:"0 32px"}:{}}}));return[e.name,e.description,n()("span",{style:{fontSize:20,height:30}},e.rootId,e.emoji?n()(X.Z,{},void 0,e.emoji):n()("img",{src:e.icon,style:{width:30,height:30}},e.icon)),o]}(0,F.t1)(c)}}),[f,t,c,a.heroImg]),y=(0,j.E)(),S=(0,r.VK)((()=>y.filter((e=>e.canAddOrRemoveTopLevelPages()))),[y]),{creatorName:b,creatorAvatar:M,creatorUrl:_}=(0,r.VK)((()=>{if(!h||!c||"preset"===c.type)return{creatorName:"Notion",creatorAvatar:K.Z.images.notionLogoPng,creatorUrl:`${q.default.domainBaseUrl}/@notion`,duplicates:void 0};const{template:e}=c,{creatorName:t,creatorAvatar:i,creatorHandle:a,duplicates:n}=e;return{creatorName:t,creatorAvatar:t?i:void 0,creatorUrl:t&&a?`${q.default.domainBaseUrl}/@${a}`:void 0,duplicates:t?n:void 0}}),[h,c]);if("open"!==d||void 0===c||!v)return null;const[T,I,P,x]=v,Z=S.length>0&&"destination_picker"===m&&!g,A=n()(u.FormattedMessage,{id:"templateDetail.getTemplateButton.label",defaultMessage:"Get template"}),E=n()(Q.Z,{style:a.getTemplateButton,onClick:()=>{e.onAcceptTemplate(c,g),p.ye(t,{template_name:T,from:V.Z.state.analyticsFrom,target_team:null==g?void 0:g.id})}},void 0,A),B=n()(pe,{showMemberCount:!0,showPrivate:!0,placementToOrigin:J.pO.Top,originGap:4,sectionTitle:n()(u.FormattedMessage,{id:"templateDetail.addToTeamspace",defaultMessage:"Add to a teamspace"}),renderOrigin:e=>o.createElement(Q.Z,z()({},e,{style:a.getTemplateButton}),A),onTeamAccept:i=>{e.onAcceptTemplate(c,i),p.ye(t,{template_name:T,from:V.Z.state.analyticsFrom,target_team:i.id})},onPrivateAccept:()=>{e.onAcceptTemplate(c),p.ye(t,{template_name:T,from:V.Z.state.analyticsFrom,target_team:"private"})},right:n()(ee.Z,{isBlue:!0,style:{borderRadius:"100px",pointerEvents:"none"},icon:H.f,hovered:!0,caption:n()(u.FormattedMessage,{defaultMessage:"Add",id:"TemplateDetail.TeamItem.addButton"}),captionStyle:a.addBadgeTeamTemplateButton})}),R=n()("div",{style:a.madeByLabelV1},void 0,n()(ie.Z,{isSmall:!0},void 0,n()(u.FormattedMessage,{id:"templateDetail.madeBy.label",defaultMessage:"Made by"})),n()("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:4}},void 0,n()("img",{src:K.Z.images.notionLogoPng,style:{width:15,height:16}}),n()("span",{style:{fontSize:14,fontWeight:500,marginLeft:5,marginRight:5}},void 0,"Notion"))),D=b?n()(te.Z,{style:{...a.madeByV2Container,...!_&&{cursor:"default"}},href:_,disabled:!_,external:!0},void 0,M&&n()("div",{style:a.madeByV2AvatarContainer},void 0,n()("img",{src:M,style:M===K.Z.images.notionLogoPng?a.madeByV2NotionAvatar:a.madeByV2Avatar})),n()(ie.Z,{style:a.madeByV2Label},void 0,n()(u.FormattedMessage,{id:"templateDetail.madeBy.label.v2",defaultMessage:"By {author}",values:{author:b}}))):null;return o.createElement(o.Fragment,null,n()("div",{style:a.container},void 0,n()("div",{style:{height:"100%",overflowX:"hidden",overflowY:"auto",maskImage:"linear-gradient(black 80%, transparent 100%)",WebkitMaskImage:"linear-gradient(black 80%, transparent 100%)"}},void 0,n()("div",{style:{position:"relative"}},void 0,n()("div",{style:{marginTop:-20,opacity:1,zIndex:999,pointerEvents:"none"}},void 0,x),n()("div",{style:{backgroundColor:"transparent",position:"absolute",left:0,top:0,right:0,bottom:0,zIndex:1e3}}))),n()("div",{style:a.contentContainer},void 0,n()("div",{style:{display:"flex",flexDirection:"column"}},void 0,n()("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",marginBottom:h?0:20}},void 0,!h&&P,n()("div",{style:{display:"flex",flexDirection:"column",marginLeft:h?0:10}},void 0,n()("span",{style:{fontSize:20,fontWeight:700,lineHeight:1.2,marginTop:3,marginBottom:12}},void 0,T))),n()("div",{},void 0,h&&D),n()("div",{style:{fontSize:14}},void 0,I)),n()("div",{style:a.getTemplateColumn},void 0,Z?B:E,!h&&R))))}var ve=i(58573),ye=i(22686),Se=i(35840),be=i(50226),Me=i(72126),we=i(18514),Ce=i(31194),_e=i(73657),ke=i(61519),Te=i(74194),Ie=i(3386),Pe=i(11219),xe=i(14694);function Ze(e){let{topCategoryId:t,categoryId:i}=e;window.__c={n:"TemplateGallerySidebarCategoryName"};const a=(0,u.useIntl)(),o=(0,l.yK)((e=>({sidebarTitle:{fontSize:12,color:e.lightTextColor,fontWeight:600,margin:"4px 4px 0 6px"}})),[]),s=(0,r.VK)((()=>{const e=function(){var e;if(!t)return;const a=I.oO(t);return a?null===(e=a.subcategories)||void 0===e?void 0:e.find((e=>e.id===i)):void 0}();if(e)return e.name;const n=P._5[i];return n?a.formatMessage(n):""}),[t,i,a]);return n()(xe.Z,{style:o.sidebarTitle},void 0,s)}var Fe=i(83065),Ae=i(92607);function Ee(){window.__c={n:"TemplateGallerySidebarMoreFromCommunity"};const e=(0,s.O7)(),t=(0,r.VK)((()=>(0,k.s2)()),[]),i=(0,l.yK)((e=>({button:{height:28,padding:"0 4px",borderRadius:5,transition:"background 0.2s ease",color:e.mediumTextColor,alignItems:"flex-start",fontWeight:500,marginLeft:6,marginRight:6,width:"calc(100% - 12px)"},icon:{width:14,height:14,marginLeft:6,transform:"rotate(45deg)"},linkContentV2Container:{display:"flex",flexDirection:"column",gap:4},linkContentV2Title:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:600,fontSize:14},linkContentV2Subtitle:{maxWidth:250,whiteSpace:"inherit",overflow:"inherit",fontWeight:400,fontSize:13}})),[]),a=(0,o.useMemo)((()=>o.createElement(o.Fragment,null,(0,Ae.v)(i.icon),n()(u.FormattedMessage,{defaultMessage:"More from the Community",id:"templateGallerySidebar.goToMarketingTemplateGalleryButton.label"}))),[i.icon]),d=(0,o.useMemo)((()=>n()("div",{style:i.linkContentV2Container},void 0,n()(ie.Z,{isInline:!1,style:i.linkContentV2Title},void 0,n()(u.FormattedMessage,{defaultMessage:"More templates",id:"templateGallerySidebar.goToCommunityTemplateGalleryButton.labe2"}),(0,Fe._)(i.icon)),n()(ie.Z,{isInline:!1,isSecondaryColor:!0,style:i.linkContentV2Subtitle},void 0,n()(u.FormattedMessage,{defaultMessage:"Discover thousands of templates made by Notion users like you",id:"templateGallerySidebar.goToCommunityTemplateGalleryButton.reason2"})))),[i.icon,i.linkContentV2Container,i.linkContentV2Subtitle,i.linkContentV2Title]);return n()(te.Z,{href:(0,we.UY)("templateGallery"),onClick:()=>p.T2x(e),style:{display:"flex",flexDirection:"row",alignItems:"center"},external:!0},void 0,t?d:a)}var Be=i(8848),Re=i(42853),De=i(98519),Le=i(82990),Ne=i(98742),Oe=i(51077),Ve=i(89728);function Ue(e){let{}=e;window.__c={n:"TemplateGalleryTopCategoryFilter"};const t=(0,l.yK)((e=>({newInAppGalleryTopCategoryFilterBarContainer:{border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,marginBottom:8},newInAppGalleryTopCategoryFilterButton:{display:"flex",alignItems:"center",justifyContent:"space-between",color:e.mediumTextColor,padding:"8px 12px",borderRadius:4,marginRight:0,fontSize:Le.Z.fontSize.UIRegular.desktop,background:e.inputBackground},newInAppGalleryTopCategoryFilterChevronIcon:{width:15,height:15,fill:e.mediumIconColor}})),[]),{selectedTopCategory:i}=(0,r.VK)((()=>V.Z.state),[]),a=(0,r.VK)((()=>S.Z.getTopTemplateCategories()),[]),s=(0,r.VK)((()=>i?I.oO(i):void 0),[i]),d=(0,r.VK)((()=>(0,k.s2)()&&(null==a?void 0:a.length)>0),[a]);return d?n()("div",{style:t.newInAppGalleryTopCategoryFilterBarContainer},void 0,n()(J.ZP,{popupType:J.Z4.Popup,alignmentToOrigin:J.vR.End,placementToOrigin:J.pO.Bottom,sameWidthAsOrigin:!0,render:e=>n()(re.Z,{menuType:oe.og.Popup},void 0,n()(le.Z,{type:le.i.Vertical,initialFocus:void 0,sections:[{key:"top-category",items:a.map((e=>({key:e.id,action:()=>{if(!d)return;const t=D(e);V.Z.setState({...V.Z.state,selectedTopCategory:e.id,allTemplates:t,limitResults:I.JL(t)})},render:t=>o.createElement(se.Z,z()({},t,{title:n()(We,{category:e,showSelected:e.id===i})}))}))),render:e=>o.createElement(de.Z,e)}],onAccept:()=>e.close()})),renderOrigin:e=>o.createElement(Ve.Z,z()({},(0,Ne.Z)(e,{onClick:()=>{}}),{style:t.newInAppGalleryTopCategoryFilterButton}),n()(We,{category:s}),(0,Re.i)(t.newInAppGalleryTopCategoryFilterChevronIcon))})):null}function We(e){let{category:t,showSelected:i=!1}=e;window.__c={n:"TemplateGalleryTopCategoryWithIcon"};const a=(0,l.yK)((e=>({selectedIconStyle:{width:14,height:14,fill:Be.ZP.defaultText},categorySelection:{display:"flex",flexDirection:"row",alignItems:"center",gap:8,lineHeight:"20px"},categoryButtonContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}})),[]);return t?n()("span",{style:a.categoryButtonContainer},void 0,n()("span",{style:a.categorySelection},void 0,n()(Oe.Z,{type:"notion_icon",size:20,icon:t.icon.name,isLoading:!1,progressPercent:void 0,largeIcon:!0}),n()("span",{},void 0,t.name)),i&&n()("span",{},void 0,(0,De.k)(a.selectedIconStyle))):null}const ze=(0,u.defineMessages)({allPersona:{id:"templateGallery.sidebar.persona.allTemplates",defaultMessage:"All templates"},noResults:{id:"templateGallery.sidebar.results",defaultMessage:"No results"}});function Ke(){window.__c={n:"TemplateGallerySidebar"};const[e,t]=(0,o.useState)(""),i=(0,u.useIntl)(),a=(0,l.Fg)(),d=(0,s.O7)(),c=(0,r.VK)((()=>(0,k.s2)()),[]),{selectedCategory:m,status:g}=(0,r.VK)((()=>V.Z.state),[]),[h,f]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(!h){const t=V.Z.state.selectedTemplate;var e;if(t)null===(e=document)||void 0===e||null===(e=e.getElementById(`tg-${"uri"in t?w.presetUriToHumanReadableName[t.uri]:t.template.name}`))||void 0===e||e.scrollIntoView({block:"center"}),f(!0)}}),[h]),(0,o.useEffect)((()=>{"closed"===g&&f(!1)}),[f,g]);const v=(0,l.yK)((e=>({sidebar:{height:"100%",width:275,background:e.sidebarBackground,alignContent:"center",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch",boxShadow:e.sidebarBoxShadow},sidebarMoreFromCommunityContainer:{padding:12,borderTop:`1px solid ${e.accentColors.translucentGray[200]}`},header:{padding:"12px 12px 0 12px"},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor},searchBar:{height:32,borderRadius:5,fontSize:14,marginTop:0,marginBottom:8,padding:"16px 10px"},filterBar:{display:"flex",flexDirection:"row",width:273,flexWrap:"wrap",gap:6},newInAppGalleryBrandContainer:{display:"flex",alignItems:"center",width:"100%",gap:6,marginBottom:10},newInAppGalleryBrandName:{fontSize:15,fontWeight:600,color:e.regularTextColor},newInAppGalleryBrandIcon:{width:18,height:15,fill:e.regularTextColor},newInAppGallerySearchBarContainer:{padding:"0px 12px"}})),[]),y=(0,o.useMemo)((()=>n()(Ie.Z,{capture:!0,onBackspace:Me.yR,onLeft:Me.yR,onRight:Me.yR,onSelectAll:Me.yR,onRedo:Me.yR,onUndo:Me.yR,onCut:Me.yR,onCopy:Me.yR,onPaste:Me.yR,onKeypress:Me.yR,onDelete:Me.yR,onTab:Me.yR},void 0,n()(Te.Z,{placeholder:i.formatMessage({id:"templateGallery.sidebar.searchbar.placeholder",defaultMessage:"Search templates"}),left:(0,Se.R)(v.searchIcon),showClearButton:!0,format:Te.Z.Format.Small,value:e,style:v.searchBar,onChange:e=>t(e.target.value)}))),[e,i,v.searchBar,v.searchIcon]),S=(0,o.useCallback)((e=>{var t,i;const a=[{key:"personas",render:e=>o.createElement(de.Z,z()({},e,{topBorder:0!==e.index})),items:[void 0,...(0,I.Io)({userPersona:null===(t=O.default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.persona,subscriptionTier:null===(i=O.default.state.currentSpaceStore)||void 0===i?void 0:i.getSubscriptionTier()}).filter((e=>"suggested"!==e))].map((t=>({key:t??"all",render:e=>o.createElement(se.Z,z()({},e,{focused:!1,checkState:Me.Xy(t,m),title:n()("div",{style:{display:"flex",alignItems:"center"}},void 0,o.createElement(u.FormattedMessage,t?P._5[t]:ze.allPersona)),shouldWrapCaption:!0})),action:()=>{V.Z.setState({...V.Z.state,selectedCategory:t}),e.close(),p.NgT(d,{persona:t??"all"})}})))}],s={menuType:oe.og.Popup,width:260};return o.createElement(re.Z,s,n()(le.Z,{type:le.i.Vertical,initialFocus:void 0,sections:a}))}),[d,m]),b=(0,o.useMemo)((()=>n()("div",{style:v.filterBar},void 0,n()(J.ZP,{popupType:J.Z4.Popup,renderOrigin:e=>o.createElement(Pe.Z,z()({on:!0,icon:(0,ye.f)({width:14,marginRight:6,fill:a.blueColor}),title:n()("span",{},void 0,o.createElement(u.FormattedMessage,m?P._5[m]:ze.allPersona))},e)),placementToOrigin:Ce.Iw.Bottom,render:e=>S(e)}))),[S,m,v.filterBar,a.blueColor]);return n()("div",{style:v.sidebar},void 0,!c&&n()("div",{style:v.header},void 0,y,b),c&&o.createElement(o.Fragment,null,n()("div",{style:v.header},void 0,n()(te.Z,{href:(0,we.UY)("templateGallery"),onClick:()=>p.Ib5(d),style:v.newInAppGalleryBrandContainer,external:!0},void 0,(0,be.I)(v.newInAppGalleryBrandIcon),n()("span",{style:v.newInAppGalleryBrandName},void 0,n()(u.FormattedMessage,{id:"templateGallery.brand.title",defaultMessage:"Templates"}))),n()(Ue,{})),n()("div",{style:v.newInAppGallerySearchBarContainer},void 0,y)),n()(He,{currentQuery:e,selectedCategory:m}),c&&n()("div",{},void 0,n()(ke.Z,{size:"0"}),n()("div",{style:v.sidebarMoreFromCommunityContainer},void 0,n()(Ee,{}))))}function He(e){window.__c={n:"TemplateGallerySidebarItemList"};const{currentQuery:t,selectedCategory:i}=e,a=""!==t||void 0!==i,{allTemplates:s,selectedTopCategory:d,status:c,limitResults:m}=(0,r.VK)((()=>V.Z.state),[]),p=(0,r.VK)((()=>(0,k.s2)()),[]),g=(0,l.yK)((e=>({button:{height:44,padding:"8px 0",borderRadius:4,marginBottom:4,transition:"all 0.2s ease",color:e.mediumTextColor,alignItems:"flex-start"},categoryDiv:{marginBottom:a?0:14},unSelectedItem:{color:e.mediumTextColor},selectedItem:{background:"dark"===e.mode?e.popoverHoveredBackground:e.buttonHoveredBackground,fontWeight:500,color:e.regularTextColor},hoveredItem:{borderRadius:4,background:e.buttonHoveredBackground},presetTitle:{fontSize:14,color:e.regularTextColor},presetDescription:{fontSize:12},sidebarTitle:{fontSize:12,color:e.lightTextColor,fontWeight:600,margin:"4px 4px 0 6px"},sidebarShowMore:{fontSize:12,color:e.lightTextColor,fontWeight:600,margin:"2px 2px 0 6px"}})),[a]),h=(0,r.VK)((()=>{if("open"!==c||void 0===s)return[];const e=new Set;return Object.fromEntries(Object.entries(s).filter((e=>{let[t]=e;return void 0===i||t===i})).map((i=>{let[a,n]=i;return[a,(0,ve.ZP)(t.replaceAll("-",""),n,(e=>`${e.name}`.replaceAll("-",""))).filter((t=>{const i=e.has(t.name);return e.add(t.name),!i}))]})))}),[c,s,i,t]),f=(0,o.useCallback)((e=>{"open"===c&&void 0!==m&&V.Z.setState({...V.Z.state,limitResults:{...m,[e]:!1}})}),[m,c]);return"open"!==c?null:n()("div",{style:{flexGrow:1,width:"100%",overflowX:"hidden",overflowY:"auto"}},void 0,n()(de.Z,{desktopTitleStyle:{paddingLeft:8}},void 0,Object.entries(h).map((e=>{let[t,i]=e;if(0===i.length)return;const o=(null==m?void 0:m[t])&&!a&&i.length>L.IJ+1,s=o?i.length-L.IJ:0,r=o?i.slice(0,L.IJ):i;return n()("div",{style:g.categoryDiv},t,!a&&n()(Ze,{topCategoryId:d,categoryId:t}),r.map((e=>"uri"in e?n()(Ge,{icon:e.icon,name:e.name,template:{type:"preset",uri:e.uri}},e.uri):n()(Ge,{icon:e.icon,emoji:e.emoji,name:e.name,template:{type:"pageTemplate",template:e}},e.id))),o&&s>0?n()(se.Z,{style:g.sidebarShowMore,focused:!1,onClick:()=>f(t),title:n()(u.FormattedMessage,{defaultMessage:"{numNotShown} more...",id:"templateGallerySidebar.category.showMore",values:{numNotShown:s}})}):void 0)})),0===Object.values(h).flatMap((e=>e)).length&&n()(_e.Z,{caption:E.default.formatMessage(ze.noResults),style:{lineHeight:"14px",padding:6,margin:0}}),!p&&n()(se.Z,{desktopIconStyle:{alignSelf:"unset"},focused:!1,buttonStyle:{...g.button},title:n()(Ee,{})})))}function Ge(e){var t;window.__c={n:"TemplateGallerySidebarItem"};const i=(0,s.O7)(),a=(0,l.yK)((e=>({button:{height:28,padding:"0 4px",borderRadius:5,transition:"background 0.2s ease",color:e.mediumTextColor,alignItems:"flex-start",fontWeight:500,marginLeft:6,marginRight:6,width:"calc(100% - 12px)"},itemText:{marginLeft:5},unSelectedItemText:{color:e.mediumTextColor},selectedItemText:{color:e.regularTextColor},selectedItem:{background:"dark"===e.mode?e.popoverHoveredBackground:e.sidebarItemSelectedBackground,fontWeight:500},hoveredItem:{background:e.buttonHoveredBackground},presetIcon:{width:16,height:16,fontSize:16,color:e.regularEmojiColor},presetTitle:{fontSize:14},presetDescription:{fontSize:12}})),[]),{status:d,selectedTemplate:c,analyticsFrom:u}=(0,r.VK)((()=>V.Z.state),[]),m=(0,r.VK)((()=>"open"===d&&Me.Xy(c,e.template)),[d,e.template,c]),g=(0,o.useCallback)((()=>{const t="uri"in e.template?w.presetUriToHumanReadableName[e.template.uri]:e.template.template.previewRootId,a=(0,L.W4)({templateGalleryItem:t});y.navigate({environment:i,url:a}),p.n1D(i,{template_name:"preset"===e.template.type?e.template.uri:e.template.template.name,page_prepopulated_template_id:t,from:u})}),[u,i,e.template]);if("open"!==d)return null;const h=null!==(t=e.icon)&&void 0!==t&&t.startsWith("/")?n()("img",{src:e.icon,style:a.presetIcon}):n()("div",{style:a.presetIcon},void 0,n()(X.Z,{},void 0,e.emoji??e.icon??"")),f=`tg-${"uri"in e.template?w.presetUriToHumanReadableName[e.template.uri]:e.template.template.name}`;return n()(se.Z,{id:f,desktopIconStyle:{alignSelf:"unset"},buttonStyle:{...a.button,...m?a.selectedItem:void 0},textWrapperStyle:{...m?a.selectedItemText:a.unSelectedItemText,...a.itemText},focused:!1,icon:h,title:n()("span",{style:a.presetTitle},void 0,e.name),shouldWrapCaption:!0,hoveredStyle:a.hoveredItem,onClick:g})}const qe=["companyHome","defaultWiki","engineeringWiki","salesWiki","teamWiki"];function je(){window.__c={n:"TemplateGalleryModal"};const e=(0,s.Fy)(),t=(0,s.O7)(),i=(0,u.useIntl)(),a=(0,o.useRef)(void 0),m=(0,l.yK)((t=>({modal:{width:e.isMobile?"auto":"90vw",height:e.isMobile?"auto":"90vh",borderRadius:8}})),[e.isMobile]),P=(0,r.VK)((()=>O.default.state.currentSpaceStore),[]),{templateGalleryItem:x}=(0,r.VK)((()=>t.RouterStore.state.route),[t.RouterStore]),Z=(0,r.VK)((()=>(0,k.s2)()),[]),{status:F,allTemplates:A,selectedTemplate:E,cloneTo:R,limitResults:D}=(0,r.VK)((()=>V.Z.state),[]);(0,o.useEffect)((()=>{if(x)return a.current=window.setTimeout((()=>{V.Z.setState({...V.Z.state,status:"closed"})}),1e4),()=>{void 0!==a.current&&window.clearTimeout(a.current)}}),[]);const W=(0,o.useRef)(void 0);(0,o.useEffect)((()=>{W.current&&(W.current=void 0)}),[null==P?void 0:P.id]),(0,o.useEffect)((()=>{var e;W.current||"closed"!==F&&(W.current=Z?async function(e){const{environment:t,spaceId:i}=e,a=await g.getInAppCategoriesAndTemplates(t,{spaceId:i});return"success"===a.type&&(S.Z.setState({data:a.data}),"current"===a.data.version)}({environment:t,spaceId:null==P?void 0:P.id}):Promise.resolve(),null===(e=W.current)||void 0===e||e.then((()=>{var e,t;const i=x&&I.vY(x),{selectedTopCategory:a,allTemplates:n}=B({isNewInAppGalleryEnabled:Z,userPersona:null===(e=O.default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.persona,subscriptionTier:null===(t=O.default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier(),selectedTopCategory:i});V.Z.setState({...V.Z.state,selectedTopCategory:a,allTemplates:n,limitResults:I.JL(n)})})).finally((()=>{void 0!==a.current&&window.clearTimeout(a.current)})))}),[t,Z,null==P?void 0:P.id,W,F,x]),(0,o.useEffect)((()=>{if(void 0!==A&&"opening"===F){const e=void 0!==E&&(void 0===x||"gallery"===x)?E:Ye({templateGalleryItem:x,allTemplates:A});return V.Z.setState({...V.Z.state,status:"open",allTemplates:A,selectedTemplate:e,limitResults:D??I.JL(A),cloneTo:V.Z.state.cloneTo,analyticsFrom:V.Z.state.analyticsFrom}),void p.jWY(t,{template_name:"preset"===e.type?e.uri:e.template.name,from:V.Z.state.analyticsFrom})}}),[x,t,A,F,E,R,D]),(0,o.useEffect)((()=>{"open"===F&&void 0!==A&&void 0!==x&&"gallery"!==x&&V.Z.setState({...V.Z.state,selectedTemplate:Ye({templateGalleryItem:x,allTemplates:A})})}),[A,F,x]);const z=(0,r.VK)((()=>{const e=(0,M.np)();if("open"===F&&"current_page"===R&&e&&e.isEmptyPage())return e}),[R,F]),K=(0,o.useCallback)((async(e,i)=>{var a,n,o;V.Z.setState({...V.Z.state,status:"closed",selectedTemplate:void 0});const{currentSpaceStore:s,currentSpaceViewStore:r}=O.default.state,l=null==z||!z.getParentStore()||"block"!==(null===(a=z.getParentStore())||void 0===a?void 0:a.table)&&"space"!==(null===(n=z.getParentStore())||void 0===n?void 0:n.table)&&"team"!==(null===(o=z.getParentStore())||void 0===o?void 0:o.table)?i||s:z.getParentStore(),u=Date.now();let m;if("preset"===e.type&&e.uri!==c.rK){var S;const a=e.uri,n=null===(S=(0,C.SP)((0,w.appPackageConfigs)(),a))||void 0===S?void 0:S.uri;if(!(n&&s&&r&&l))return;const o=i||T.VP(l);if(o){if(!(await async function(e){let{environment:t,spaceId:i,presetUri:a,teamStore:n}=e;return await(0,N.l)({environment:t,spaceId:i,presetUri:a,parentStore:n,teamId:n.id,from:"template_gallery"})}({environment:t,spaceId:s.id,presetUri:a,teamStore:o})))return}const d=z||(i?i.getTeamPagesStores().find((e=>e.getFormat().app_config_uri&&e.getFormat().app_config_uri===n)):void 0);b.createAndCommit({environment:t,userAction:"templateGallery.getTemplate",perform:e=>{const i=(0,w.appPackageConfigs)().find((e=>e.uri===n)),o=null==i?void 0:i.presets.find((e=>e.uri===a));if(r&&o){const i=h.initializeApp({environment:t,spaceViewStore:r,appUri:n,presetUri:o.uri,appParentStore:l,temporaryContainerBlockStore:d,transaction:e,from:"template_gallery"});f.createSprintPage({environment:t,spaceViewStore:r,appParentStore:l,transaction:e,blockStores:i,creationEntryPoint:{type:"preset",presetUri:o.uri}})}}}),g.finalizeAppTemplate(t,{})}else{const a="preset"===e.type?(0,_.CQ)(e.uri):e.template;if(!a)return;if(!s||!r)return;const n={environment:t,item:a,spaceStore:s,spaceViewStore:r,useMinimalTemplates:!1,from:"template_gallery"},o=z?await v.rC({...n,isPrivate:!1,initializeStore:z,type:"inExistingStore"}):i?await v.rC({...n,isPrivate:!1,teamStore:i,type:"inTeam",appendOrPrepend:"append"}):await v.rC({...n,isPrivate:!0,type:"inSpace"});m=o,o&&y.navigateToBlock({environment:t,store:o,pageVisitSource:d.tY.Create})}const M="preset"===e.type?e.uri:e.template.name,k=Date.now()-u,I=z?!T.VP(z):!Boolean(i),P=I||null==i?void 0:i.id;p.enX(t,{template_name:M,destination:I?"private":"team",template_block_id:"pageTemplate"===e.type?e.template.rootId:void 0,template_duplication_duration_ms:k,team_id:P,created_page_id:m?m.id:null==z?void 0:z.id}),p.W2j(t,{type:"page",from:"template_gallery",new_page_id:m?m.id:null==z?void 0:z.id}),"preset"===e.type&&m&&p.bRT(t,{preset_uri:e.uri,created_block_stores:[m],from:"template_gallery",destination_team_id:P}),"pageTemplate"===e.type&&Qe(e.template.id)&&m&&p.Jw_(t,{from:"template_gallery",wiki_block_id:m.id,destination_team_id:P,wiki_template_id:e.template.id})}),[t,z]),H=(0,o.useCallback)((()=>{const{mainEditorCurrentBlockStore:e}=O.default.state,{RouterStore:i}=t,a=i.state.route;if(e&&"page"===a.name){const e=(0,L.p8)();y.navigate({environment:t,url:e})}}),[t]);return n()(U.Z,{ariaLabel:i.formatMessage({id:"templateGallery.dialogLabel",defaultMessage:"Templates"}),open:"open"===F,innerStyle:m.modal,onDismiss:H,render:()=>"open"!==F?null:n()("div",{style:{height:"100%",display:"flex",flexDirection:"row",borderRadius:8,overflow:"hidden"}},void 0,n()(Ke,{}),n()(fe,{onAcceptTemplate:K}))})}function Ye(e){let{templateGalleryItem:t,allTemplates:i}=e;if(!t||"gallery"===t){var a;return"team"===(null===(a=O.default.state.currentSpaceStore)||void 0===a?void 0:a.getPlanType())?{type:"preset",uri:c.Yb}:$e(i)}const n=Object.values(i).flatMap((e=>e)).find((e=>"uri"in e?w.presetUriToHumanReadableName[e.uri]===t:e.previewRootId===t));return n?"uri"in n?{type:"preset",uri:n.uri}:{type:"pageTemplate",template:n}:$e(i)}function $e(e){const t=e[Object.keys(e)[0]][0];return"uri"in t?{type:"preset",uri:t.uri}:{type:"pageTemplate",template:t}}function Qe(e){return qe.some((t=>m.Y[t].nameMessage.id===e))}},68750:(e,t,i)=>{i.d(t,{O:()=>V});var a=i(10434),n=i.n(a),o=i(23174),s=i.n(o),r=i(67294),l=i(480),d=i(24405),c=i(53877),u=i(42875),m=i(19889),p=i(4308),g=i(50906),h=i(87279),f=i(78140),v=i(40721),y=i(13148),S=i(5366),b=i(52275),M=i(72495);function w(e){const{onClick:t}=e;return s()(M.Z,{topBorder:!0},void 0,s()(b.Z,{focused:!1,icon:(0,y.U)({width:14,marginLeft:0}),title:s()(S.FormattedMessage,{defaultMessage:"Remove verification",id:"VerificationPropertyOverlayMenu.removeVerificationButton"}),onClick:t,style:{fontSize:14}}))}var C=i(30120),_=i(86628),k=i(28020),T=i(33929),I=i(66653),P=i(93289);const x=(0,S.defineMessages)({placeholder:{id:"VerificationExpiryMenu.pickSpecificDate.placeholder",defaultMessage:"Pick a date"}});function Z(e){window.__c={n:"VerificationCustomDatePicker"};const{onChange:t,clearCustomDatePicker:i}=e,a=(0,r.useRef)(e.today),n=(0,r.useRef)(e.today.plus({days:1})),[o,l]=(0,r.useState)(!1),d=(0,_.VK)((()=>k.AK.state),[]);return s()(M.Z,{mobileStyle:{paddingBottom:10},style:{padding:"12px 0"}},void 0,s()(I.Z,{placeholder:T.default.formatMessage(x.placeholder),focused:o,value:"verified"!==e.verificationState.type||e.verificationState.isIndefinite?void 0:c.ME(e.verificationState.dateTimeRange.end),onUpdate:e=>{if(e.error)return;const n=e.value&&c.XI(e.value);n?t({start:a.current,end:n.start}):i()},onFocus:()=>l(!0),onBlur:()=>l(!1),onClearButtonClick:i,hideClearButton:!0}),s()(P.Z,{firstDayOfWeek:d,value:n.current.toMillis(),selectValue:!1,onChange:e=>{t({start:a.current,end:C.ou.fromMillis(e)})},disabledDays:{before:new Date(n.current.toMillis())}}))}var F=i(36700),A=i(69651);const E=(0,i(45238).I)("infinity",{viewBox:"0 0 40 19",svg:s()("path",{d:"M0.297852 9.42383C0.297852 11.2695 0.65918 12.876 1.38184 14.2432C2.11426 15.6104 3.13477 16.6748 4.44336 17.4365C5.75195 18.1885 7.26562 18.5645 8.98438 18.5645C10.3613 18.5645 11.6504 18.2715 12.8516 17.6855C14.0625 17.0898 15.2881 16.1963 16.5283 15.0049L20 11.6504L23.4717 15.0049C24.7119 16.1963 25.9375 17.0898 27.1484 17.6855C28.3594 18.2715 29.6484 18.5645 31.0156 18.5645C32.7344 18.5645 34.248 18.1885 35.5566 17.4365C36.8652 16.6748 37.8809 15.6104 38.6035 14.2432C39.3359 12.876 39.7021 11.2695 39.7021 9.42383C39.7021 7.57812 39.3359 5.97168 38.6035 4.60449C37.8809 3.2373 36.8652 2.17773 35.5566 1.42578C34.248 0.664062 32.7344 0.283203 31.0156 0.283203C29.6484 0.283203 28.3594 0.581055 27.1484 1.17676C25.9375 1.7627 24.7119 2.65137 23.4717 3.84277L20 7.19727L16.5283 3.84277C15.2881 2.65137 14.0625 1.7627 12.8516 1.17676C11.6504 0.581055 10.3613 0.283203 8.98438 0.283203C7.26562 0.283203 5.75195 0.664062 4.44336 1.42578C3.13477 2.17773 2.11426 3.2373 1.38184 4.60449C0.65918 5.97168 0.297852 7.57812 0.297852 9.42383ZM3.5791 9.42383C3.5791 8.23242 3.80371 7.19727 4.25293 6.31836C4.71191 5.43945 5.34668 4.76074 6.15723 4.28223C6.96777 3.80371 7.91016 3.56445 8.98438 3.56445C9.88281 3.56445 10.752 3.78418 11.5918 4.22363C12.4316 4.66309 13.3154 5.3125 14.2432 6.17188L17.7002 9.42383L14.2285 12.6758C13.3105 13.5352 12.4316 14.1846 11.5918 14.624C10.752 15.0635 9.88281 15.2832 8.98438 15.2832C7.91016 15.2832 6.96777 15.0439 6.15723 14.5654C5.34668 14.0869 4.71191 13.4082 4.25293 12.5293C3.80371 11.6406 3.5791 10.6055 3.5791 9.42383ZM22.2998 9.42383L25.7568 6.17188C26.6846 5.3125 27.5684 4.66309 28.4082 4.22363C29.248 3.78418 30.1172 3.56445 31.0156 3.56445C32.0898 3.56445 33.0322 3.80371 33.8428 4.28223C34.6533 4.76074 35.2832 5.43945 35.7324 6.31836C36.1914 7.19727 36.4209 8.23242 36.4209 9.42383C36.4209 10.6055 36.1914 11.6406 35.7324 12.5293C35.2832 13.4082 34.6533 14.0869 33.8428 14.5654C33.0322 15.0439 32.0898 15.2832 31.0156 15.2832C30.1172 15.2832 29.248 15.0635 28.4082 14.624C27.5684 14.1846 26.6895 13.5352 25.7715 12.6758L22.2998 9.42383Z"})});var B=i(70693);function R(e){window.__c={n:"VerificationExpiryPickerMenu"};const{verificationState:t,onChange:i,onCustomDateClick:a}=e,n=(0,S.useIntl)(),o=(0,r.useRef)(e.today),l=(0,d.yK)((e=>({title:{fontSize:14,color:e.regularTextColor},optionsContainer:{width:"100%"},clockIconStyle:{width:14,marginLeft:0,marginTop:2}})),[]),c="expired"===t.type||"none"===t.type?s()(S.FormattedMessage,{defaultMessage:"Verify page",id:"VerificationExpiryPicker.verify.header"}):s()(S.FormattedMessage,{defaultMessage:"Reverify page",id:"VerificationExpiryPicker.reverify.header"}),u="verified"===t.type&&t.isIndefinite,m="verified"===t.type&&!t.isIndefinite&&t.dateTimeRange.end;return s()(M.Z,{title:c},void 0,p.Xs.map((e=>{const t=m&&p.fm({start:o.current,end:m})===e;return s()(b.Z,{focused:!1,icon:(0,F.m)(l.clockIconStyle),inline:!1,title:s()("span",{style:l.title},void 0,s()(S.FormattedMessage,{defaultMessage:"For {numDays} days",id:"VerificationExpiryMenu.preset.title",values:{numDays:e}})),caption:n.formatMessage({defaultMessage:"Until {date}",id:"VerificationExpiryMenu.preset.subtitle"},{date:B.mb({dateTime:p.z5(e,o.current).end,intl:n,shortenDateAndRange:!0})}),checkState:!!t,onClick:()=>{return t=e,void i({start:o.current,end:o.current.plus({days:t})});var t}},e)})),s()(b.Z,{focused:!1,icon:E({width:14,marginLeft:0,marginTop:1}),inline:!1,title:s()("span",{style:l.title},void 0,s()(S.FormattedMessage,{defaultMessage:"Indefinitely",id:"VerificationExpiryPicker.option.indefinitely"})),onClick:()=>i(),checkState:u},"indefinite"),s()(b.Z,{focused:!1,icon:(0,A.C)({width:14,marginLeft:0}),title:s()("span",{style:l.title},void 0,s()(S.FormattedMessage,{defaultMessage:"Pick a date",id:"VerificationExpiryPicker.option.customDate"})),onClick:a},"custom"))}var D=i(66897),L=i(64369);function N(e){window.__c={n:"VerificationMetadata"};const{getRecordModel:t,actorPointer:i,lastVerifiedDate:a}=e,n=(0,l.Fy)(),o=(0,S.useIntl)(),r=(0,_.VK)((()=>(0,D.$4)(o,(0,D.Hl)({pointer:i,getRecordModel:t}))),[t,o,i]);return s()("div",{style:{padding:"8px 14px"}},void 0,s()(L.Z,{isSmall:!0,isSecondaryColor:!0,isMobile:n.isMobile,isMultiline:!0,style:{marginBottom:4}},void 0,s()(S.FormattedMessage,{defaultMessage:"Last verified by {user}",id:"VerificationMetadata.lastVerified",values:{user:r}})),s()(L.Z,{isSmall:!0,isSecondaryColor:!0,isMobile:n.isMobile},void 0,(0,B.mb)({dateTime:a,intl:o})))}var O=i(19870);function V(e){window.__c={n:"VerificationPropertyOverlayMenu"};const{verificationValue:t,getRecordModel:i,onChange:a,blockId:o,propertyName:y,onClose:S}=e,b=(0,l.O7)(),M=(0,l.Fy)(),C=(0,d.Fg)(),[_,k]=(0,r.useState)(!1),T=(0,r.useMemo)((()=>p.WN(t)),[t]),I="verified"===T.type,P=(0,r.useRef)(c.Uu((0,u.r)())),x=(0,r.useRef)(c.Uu((0,u.r)()).plus({days:1})),F=e=>{var t;const i=null===(t=b.currentUser)||void 0===t?void 0:t.id;if(!i)return;if(null!=e&&e.end&&e.end.toMillis()<x.current.toMillis())return;const n={table:m.KJ,id:i},s=e?c.OQ.toPersistedDateTimeRange(e):c.OQ.toPersistedDateTime(P.current.toMillis()),r="none"===T.type?"add":"update";g.s$$(b,{action:r,verification_page_id:o,verification_expiry:e?e.end.toMillis():void 0}),a({value:[n,s]})};let A={menuType:h.og.Popup,footer:"none"!==T.type&&s()("div",{style:{borderTop:`1px solid ${C.regularDividerColor}`}},void 0,s()(N,{lastVerifiedDate:I&&T.isIndefinite?T.startDateTime:T.dateTimeRange.start,getRecordModel:i,actorPointer:T.actorPointer}))};return M.isMobile&&(A={...A,title:y,menuType:h.og.Modal,right:s()(v.DoneMenuText,{}),onClickRight:S}),r.createElement(f.Z,n()({},A,{header:!_&&"none"!==T.type&&r.createElement(r.Fragment,null,s()("div",{style:{padding:M.isMobile?10:7,paddingLeft:M.isMobile?20:7,background:M.isMobile?C.popoverBackground:C.tokenInputMenuItemBackground,display:"flex",alignItems:"center",borderBottom:`1px solid ${C.regularDividerColor}`}},void 0,s()(O.z,{verificationValue:t})))}),_?s()(Z,{today:P.current,verificationState:T,onChange:e=>F(e),clearCustomDatePicker:()=>k(!1)}):r.createElement(r.Fragment,null,s()(R,{today:P.current,verificationState:T,onChange:e=>F(e),onCustomDateClick:()=>k(!0)}),(I||"expired"===T.type)&&s()(w,{onClick:()=>{g.s$$(b,{action:"remove",verification_page_id:o}),a({value:void 0})}})))}},80366:(e,t,i)=>{i.d(t,{c:()=>r,s:()=>s});var a=i(23174),n=i.n(a),o=(i(67294),i(24405));function s(e){return{backgroundColor:e.groupedFormBackground,borderWidth:1,borderStyle:"solid",borderColor:e.groupedFormBorder,borderRadius:3,borderBottomWidth:0}}function r(e){window.__c={n:"FormGroup"};const t=(0,o.yK)((t=>({group:{display:"flex",borderBottomColor:t.groupedFormBorder,borderBottomWidth:1,borderBottomStyle:"solid",alignItems:"center",flex:1,...e.style}})),[e.style]);return n()("div",{style:t.group},void 0,e.children)}},30546:(e,t,i)=>{i.d(t,{Hq:()=>g,Ij:()=>p,KN:()=>r,PM:()=>d,Qb:()=>u,Zy:()=>c,dd:()=>s,eW:()=>m,mK:()=>h,o0:()=>l});var a=i(7057),n=i(53877),o=i(42875);function s(e,t){return(0,a.ZW)(n.OQ.notionDateTimeToLuxon(e,t.locale),"short")}function r(e,t){return(0,a.ZW)(n.OQ.notionDateTimeToLuxon(e,t.locale),"time")}function l(e,t){return n.OQ.notionDateTimeToLuxon(e,t.locale).toFormat(n._F)}function d(e,t){let i={starting:void 0,ending:void 0};var a,n,s,r;if(t.starting&&t.ending)i={starting:{type:"datetime",start_time:"",start_date:t.starting.start_date,time_zone:""},ending:{type:"datetime",start_time:"",start_date:t.ending.start_date,time_zone:""}},null!==(a=e.starting)&&void 0!==a&&a.start_time&&null!==(n=e.starting)&&void 0!==n&&n.time_zone&&(i.starting={...i.starting,start_time:e.starting.start_time,time_zone:e.starting.time_zone}),null!==(s=e.ending)&&void 0!==s&&s.start_time&&null!==(r=e.ending)&&void 0!==r&&r.time_zone?i.ending={...i.ending,start_time:e.ending.start_time,time_zone:e.ending.time_zone}:i={starting:{...i.starting,start_time:"00:00",time_zone:(0,o.r)()},ending:{...i.ending,start_time:"23:59",time_zone:(0,o.r)()}};else if(t.starting){var l,d;i=null!==(l=e.starting)&&void 0!==l&&l.start_time&&null!==(d=e.starting)&&void 0!==d&&d.time_zone?{starting:{type:"datetime",start_date:t.starting.start_date,start_time:e.starting.start_time,time_zone:e.starting.time_zone},ending:e.ending}:{starting:{type:"datetime",start_date:t.starting.start_date,start_time:"00:00",time_zone:(0,o.r)()},ending:e.ending}}else if(t.ending){var c,u;i=null!==(c=e.ending)&&void 0!==c&&c.start_time&&null!==(u=e.ending)&&void 0!==u&&u.time_zone?{ending:{type:"datetime",start_date:t.ending.start_date,start_time:e.ending.start_time,time_zone:e.ending.time_zone},starting:e.starting}:{ending:{type:"datetime",start_date:t.ending.start_date,start_time:"23:59",time_zone:(0,o.r)()},starting:e.starting}}else i={starting:e.starting,ending:e.ending};return i}function c(e){return e.starting&&e.ending?{starting:{type:"date",start_date:e.starting.start_date},ending:{type:"date",start_date:e.ending.start_date}}:e.starting?{starting:{type:"date",start_date:e.starting.start_date}}:e.ending?{ending:{type:"date",start_date:e.ending.start_date}}:{}}function u(e){if(e)return{type:"date",start_date:e.start_date}}function m(e){return`${e.actorType}:${e.actorId}`}function p(e){const t=e.split(":");if(2===t.length)return"bot"===t[0]?{actorId:t[1],actorType:"bot"}:"notion_user"===t[0]?{actorId:t[1],actorType:"notion_user"}:void 0}function g(e){return{starting:e.starting?{type:"date",start_date:e.starting.start_date}:void 0,ending:e.ending?{type:"date",start_date:e.ending.start_date}:void 0}}function h(e){return void 0===e.starting&&void 0===e.ending}},72340:(e,t,i)=>{i.d(t,{$6:()=>s,CN:()=>n,Tc:()=>o});var a=i(77080);const n=5;function o(e){return"on"===a.default.getEligibleGroup({experimentId:"parallel_confluence_importer_via_api",defaultGroup:"control"})}function s(e){return a.default.getEligibleGroup({experimentId:"special_case_confluence_file_size",defaultGroup:n.toString()})}},8989:(e,t,i)=>{i.d(t,{b:()=>s,t:()=>o});var a=i(77080),n=i(72340);function o(){return"on"===a.default.getEligibleGroup({experimentId:"generic_importer",defaultGroup:"control"})}function s(e){const t=a.default.getEligibleGroup({experimentId:"special_case_generic_file_size",defaultGroup:n.CN.toString()});return Number(t)}},45567:(e,t,i)=>{i.d(t,{G7:()=>s,Gh:()=>l,LR:()=>o,gU:()=>r,jo:()=>n});var a=i(97880);const n="fileTypeAnyFiles",o="fileTypeImages",s="fileTypeVideos",r="fileTypeNone";function l(e){let{fileMimeType:t,allowedType:i}=e;switch(i){case n:return!0;case o:return function(e){return e.startsWith("image")&&!e.includes("photoshop")}(t);case s:return function(e){return e.startsWith("video")}(t);case r:return!1;default:(0,a.t1)(i)}}},18441:(e,t,i)=>{i.d(t,{P9:()=>l,YJ:()=>d,jc:()=>r,jg:()=>s});i(57658);var a=i(77657),n=i(59753),o=i(32161);function s(e){if(e.integration_id!==a.nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,i,n]=t;return{organizationName:i,accountName:n}}function r(e){return n.kk.fromValue(o.P,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const i=r(e);return!!i&&t(i)})):e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i={};for(const a of e){const{accountName:e,organizationName:n}=s(a);c({query:t,accountName:e,organizationName:n})&&(i[e]||(i[e]=[]),i[e].push({externalAuthentication:a,workspaceName:n}))}return i}function c(e){const{accountName:t,organizationName:i,query:a}=e;if(0===a.length)return!0;const n=t.toLocaleLowerCase().indexOf(a.trim().toLocaleLowerCase())>=0,o=!!i&&i.toLocaleLowerCase().indexOf(a.trim().toLocaleLowerCase())>=0;return n||o}},16100:(e,t,i)=>{i.r(t),i.d(t,{getStripe:()=>S,injectStripe:()=>y,translateStripeError:()=>w,useElementsOptions:()=>M});var a=i(23174),n=i.n(a),o=i(86664),s=i(97894),r=i(67294),l=i(86628),d=i(24405),c=i(24211),u=i(97880),m=i(82990),p=i(50906),g=i(95477),h=i(62216),f=i(80444);let v=null;function y(e){return t=>{const[i]=r.useState(S);return n()(o.Elements,{stripe:i},void 0,n()(o.ElementsConsumer,{},void 0,(i=>{let{stripe:a,elements:n}=i;const o={...t,stripe:a,elements:n};return r.createElement(e,o)})))}}async function S(){return v||(s.loadStripe.setLoadParameters({advancedFraudSignals:!1}),v=(0,s.loadStripe)(g.default.stripe.key)),v}function b(e){switch(e){case"en-US":return"en";case"ko-KR":return"ko";case"ja-JP":return"ja";case"fr-FR":return"fr-FR";case"de-DE":return"de";case"es-ES":return"es-ES";case"es-LA":return"es-419";case"pt-BR":return"pt-BR";case"zh-CN":return"zh";case"zh-TW":return"zh-TW";case"da-DK":return"da";case"nl-NL":return"nl";case"fi-FI":return"fi";case"nb-NO":return"nb";case"sv-SE":return"sv";default:return"auto"}}function M(e){const t=(0,d.Fg)(),{type:i}=e,a="setup"===i||"subscription"===i?e.currency:void 0,n="subscription"===i?e.amount:void 0,[o,s]=(0,l.VK)((()=>{var e;const t=(null===(e=f.default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.preferred_locale)||c.al;return[h.rR(),t]}),[]);return(0,r.useMemo)((()=>{const e="dark"===t.mode,r={appearance:{labels:"floating",variables:{spacingGridRow:"8px",colorPrimary:t.blueColor,colorText:t.regularTextColor,colorTextPlaceholder:e?"#5A5A5A":"#ACABA9",fontFamily:m.Z.baseFontFamily.sans,borderRadius:"4px"},rules:{".Input":{display:"flex",alignItems:"center",width:"100%",fontSize:"14px",lineHeight:"20px",letterSpacing:"-0.154px",padding:"3px 6px",height:"40px",boxShadow:"none",backgroundColor:e?"#262626":"#F9F9F8",borderWidth:"1px",borderStyle:"solid",borderColor:e?"#1C1C1C":"rgba(227,226,224,0.5)",cursor:"text",color:e?"#E1E1E1":"#1D1B16"},".Label":{fontSize:"14px",color:e?"#5A5A5A":"#ACABA9"},".Label--resting":{fontSize:"14px",lineHeight:"140%",letterSpacing:"-0.154px",color:e?"#5A5A5A":"#ACABA9"},".Label--floating":{fontSize:"10px",fontWeight:"600",lineHeight:"13px",letterSpacing:"0.12px",marginTop:"4px",transition:"all 200ms ease"}}},locale:b(s)};switch(i){case"address":return r;case"setup":return o?{...r,currency:null==a?void 0:a.toLowerCase(),mode:"setup",paymentMethodCreation:"manual"}:{};case"subscription":return o?{...r,amount:n,currency:null==a?void 0:a.toLowerCase(),mode:"subscription",paymentMethodCreation:"manual"}:{};default:(0,u.t1)(i)}}),[t,i,n,a,s,o])}function w(e,t,i){if(!i.code)return i.message||"";switch(p._qN(e,{error:i.code,stripe_decline_code:i.decline_code}),i.code){case"invalid_expiry_year_past":return t.formatMessage({id:"stripeHelpers.invalidExpiryYear.error.message",defaultMessage:"Your card's expiration year is in the past."});case"invalid_cvc":return t.formatMessage({id:"stripeHelpers.invalidCVC.error.message",defaultMessage:"Your card's security code is invalid."});case"invalid_number":return t.formatMessage({id:"stripeHelpers.invalidNumber.error.message",defaultMessage:"Your card number is not a valid credit card number."});case"card_declined":return function(e,t){switch(t){case"expired_card":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.expiredCard",defaultMessage:"Your card was declined because it is an expired card."});case"incorrect_number":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.incorrectNumber",defaultMessage:"Your card was declined because you input an incorrect number."});case"insufficient_funds":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.declinedFunds",defaultMessage:"Your card was declined because of insufficient funds."});case"invalid_cvc":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.invalidCvc",defaultMessage:"Your card was declined because you input an invalid CVC number"});case"invalid_amount":return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message.invalidAmount",defaultMessage:"Your card was declined because payment amount exceeds the amount that's allowed."});default:return e.formatMessage({id:"stripeHelpers.cardDeclined.error.message",defaultMessage:"Your card was declined."})}}(t,i.decline_code);default:return i.message||""}}},80554:(e,t,i)=>{i.d(t,{MQ:()=>y,OL:()=>v,Tq:()=>h});var a=i(23174),n=i.n(a),o=i(67294),s=i(480),r=i(86628),l=i(5366),d=i(97880),c=i(54642),u=i(80444),m=i(78291),p=i(38755),g=i(41168);const h=1;async function f(e,t,i){var a;const n=m.default.state.data;if(!n)return!1;const o=g.XZ(e,n),s=u.default.state.currentSpaceStore;if(!(s&&(0,p.rn)(e,s))||!(0,g.GJ)(n))return!1;const r=null===(a=u.default.state.currentSpaceStore)||void 0===a?void 0:a.id;if(!r)return!1;const l=await c.getAIUsageEligibility(e,{spaceId:r});if("failed"===l.type)return!1;const d=l.data,f=d?+d.spaceUsage/d.spaceLimit:0;return(!1!==(null==d?void 0:d.isEligible)||!d.isSalesAssisted)&&(!o&&function(e,t,i){const a=e>=h?"limit_reached":"warning";if("warning"===a){if("settings"===t&&null!=i&&i.disableWarningNotificationInSettings||"sidebar"===t&&null!=i&&i.disableWarningNotificationInSidebar)return!1}else if("limit_reached"===a&&("settings"===t&&null!=i&&i.disableLimitNotificationInSettings||"sidebar"===t&&null!=i&&i.disableLimitNotificationInSidebar))return!1;return e>=.7}(f,t,i))}function v(e,t,i,a){switch(e){case"ai":return{addOnCostItem:n()("div",{},void 0,n()(l.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.unlimitedAI",defaultMessage:"<bold>Notion AI</bold>",values:{bold:e=>n()("b",{},void 0,e)}})),addOnCostItemWithMembers:n()("span",{style:{whiteSpace:"pre-wrap"}},void 0,n()(l.FormattedMessage,{id:"addOnUpgrade.confirmation.costSection.unlimitedAI.memberInfo",defaultMessage:"({memberCount, plural, one {{memberCount} member} other {{memberCount} members}} x {price} per month{interval, select, month {} other { x 12 months}})",values:{memberCount:t,interval:i,price:a}}))};default:(0,d.t1)(e)}}function y(e){const t=(0,s.O7)(),i=(0,r.VK)((()=>{var e;return null===(e=u.default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.addOnLimitNotifications}),[]),[a,n]=(0,o.useState)();return(0,o.useEffect)((()=>{!async function(){const a=await f(t,e,i);n(a)}()}),[t,e,i]),a}},94660:(e,t,i)=>{i.d(t,{IJ:()=>s,PL:()=>o,W4:()=>r,p8:()=>l});var a=i(62992),n=i(64002);function o(e,t){return e.filter((e=>{const i=e.getCopiedFromPointer();return Boolean(i&&(0,a.J)(i)&&Boolean(t&&t(i.id)))}))}const s=5;function r(e){const t=window.location.href;return n.SK(t,{tg:e.templateGalleryItem})}function l(){const e=window.location.href;let t;return t=n.iO(e,"tg"),t=n.iO(t,"np"),t=n.iO(t,"pjm"),t}},38479:(e,t,i)=>{i.d(t,{y:()=>r});var a=i(480),n=i(59054),o=i(97880),s=i(54642);function r(){const e=(0,a.O7)(),[t]=(0,n.r5)((async()=>{const t=await s.getAvailableCountries(e,{});return"success"===t.type?t.data.countries:"failed"===t.type?[]:void(0,o.t1)(t)}),[e]);return t.value}},55220:(e,t,i)=>{i.d(t,{E:()=>s});var a=i(480),n=i(86628),o=i(28020);function s(){var e;const t=(0,a.O7)();return(null===(e=(0,n.Kw)((0,o.k_)(t)))||void 0===e?void 0:e.userJoinedTeamsStores)??[]}},43914:(e,t,i)=>{i.d(t,{K:()=>r});var a=i(86628),n=i(27006),o=i(95697),s=i(80444);function r(e){return(0,a.VK)((()=>{if(!e)return 0;const t=s.default.state.currentSpaceStore,i=s.default.state.currentUserStore;if(!n.YX((null==t?void 0:t.getRole())??"none")){return(0,o.tu)({currentUserStore:i,currentSpaceStore:t,teamStore:e,members:e.getMembers()}).length}return(0,o.tO)({teamStore:e,spaceStore:t}).length}),[e])}},63060:(e,t,i)=>{i.d(t,{U:()=>_});var a=i(23174),n=i.n(a),o=(i(30541),i(67294)),s=i(480),r=i(86628),l=i(24405),d=i(8848);const c=(0,i(45238).I)("closedTeam",{viewBox:"0 0 28 28",svg:o.createElement(o.Fragment,null,n()("path",{d:"M18.0459 13.8125C20.1377 13.8125 21.8428 11.9492 21.8428 9.68164C21.8428 7.43164 20.1465 5.66504 18.0459 5.66504C15.9541 5.66504 14.2402 7.4668 14.249 9.69922C14.2578 11.958 15.9541 13.8125 18.0459 13.8125ZM7.9209 13.8828C9.73145 13.8828 11.2168 12.2568 11.2168 10.2617C11.2168 8.31055 9.74902 6.7373 7.9209 6.7373C6.11035 6.7373 4.61621 8.33691 4.625 10.2793C4.625 12.2656 6.11035 13.8828 7.9209 13.8828ZM18.0459 12.4854C16.7627 12.4854 15.6641 11.2549 15.6641 9.69922C15.6553 8.16992 16.7363 6.99219 18.0459 6.99219C19.3555 6.99219 20.4277 8.15234 20.4277 9.68164C20.4277 11.2373 19.3379 12.4854 18.0459 12.4854ZM7.9209 12.5732C6.83984 12.5732 5.93457 11.5449 5.93457 10.2793C5.93457 9.04004 6.83105 8.04688 7.9209 8.04688C9.02832 8.04688 9.91602 9.02246 9.91602 10.2617C9.91602 11.5449 9.00195 12.5732 7.9209 12.5732ZM3.02539 21.9424H9.9248C9.50293 21.7051 9.18652 21.1777 9.24805 20.6416H2.81445C2.62988 20.6416 2.55078 20.5713 2.55078 20.4043C2.55078 18.2246 5.03809 16.1855 7.91211 16.1855C9.01074 16.1855 10.0127 16.4492 10.8652 16.9502C11.1377 16.5986 11.4629 16.291 11.8584 16.0186C10.7246 15.2715 9.3623 14.8848 7.91211 14.8848C4.22949 14.8848 1.24121 17.5566 1.24121 20.4834C1.24121 21.459 1.83887 21.9424 3.02539 21.9424ZM12.5176 21.9424H23.5566C25.0244 21.9424 25.7188 21.5029 25.7188 20.5361C25.7188 18.2334 22.8096 14.9023 18.0371 14.9023C13.2734 14.9023 10.3643 18.2334 10.3643 20.5361C10.3643 21.5029 11.0586 21.9424 12.5176 21.9424ZM12.0957 20.6152C11.8672 20.6152 11.7793 20.5537 11.7793 20.3691C11.7793 18.9277 14.0117 16.2295 18.0371 16.2295C22.0713 16.2295 24.3037 18.9277 24.3037 20.3691C24.3037 20.5537 24.207 20.6152 23.9785 20.6152H12.0957Z"}))});var u=i(40462),m=i(90199),p=i(49364),g=i(5366),h=i(64684),f=i(1865),v=i(74136);const y=function(e){let{tier:t}=e;const i=()=>n()(g.FormattedMessage,"business"===t?{id:"upgradeToBusinessBadge",defaultMessage:"Business"}:{id:"upgradeToEnterpriseBadge",defaultMessage:"Enterprise"});return n()(v.Z,{},void 0,n()(i,{}))};var S=i(38755),b=i(80444),M=i(12205),w=i(45660),C=i(35901);function _(e){let{teamStore:t,isDefault:i,onChange:a=(()=>{})}=e;const o=(0,s.O7)(),v=(0,M.J)(),_=(0,C.y)(null==t?void 0:t.id),T=(0,w.e)(),I="business",P=(0,r.VK)((()=>b.default.state.currentSpaceStore),[]),x=(0,r.VK)((()=>{if(P)return(0,S.rn)(o,P)}),[o,P]),Z=(0,r.VK)((()=>{const e=null==t?void 0:t.getSettingsStore().getValue();return!!e&&("private"===(0,h.B5)(e)??!1)}),[t]),F=(0,l.yK)((()=>({openIcon:{width:20,height:20},lockIcon:{width:18,height:18},closedIcon:{width:20,height:20},iconContainer:{width:20,height:20,display:"flex",justifyContent:"center",alignItems:"center",marginLeft:5,marginRight:5}})),[]),A=n()(g.FormattedMessage,{id:"TeamAccessLevelSwitcher.privateTeamspaceUpsellBusiness.tooltip",defaultMessage:"Upgrade to Business Plan to enable Private teamspaces"}),E=n()(g.FormattedMessage,{id:"TeamAccessLevelSwitcher.defaultTeamSpace.title",defaultMessage:"Default"}),B=n()(g.FormattedMessage,{id:"TeamAccessLevelSwitcher.openTeamspace.title",defaultMessage:"Open"}),R=n()(g.FormattedMessage,{id:"TeamAccessLevelSwitcher.closedTeamSpace.title",defaultMessage:"Closed"}),D=n()(g.FormattedMessage,{id:"TeamAccessLevelSwitcher.privateTeamSpace.title",defaultMessage:"Private"}),L="dark"===(0,l.Fg)().mode?d.ZP.uiLightGray:d.ZP.black,N=[{key:"open",icon:e=>n()("div",{style:F.iconContainer},void 0,(0,p.R)({...e,...F.openIcon})),iconColor:L,level:B,title:B,caption:n()(g.FormattedMessage,{id:"CreateTeamspaceMenu.openTeamspace.caption",defaultMessage:"Anyone can see and join this teamspace"}),disabled:!1,onSelect:()=>a("open",!1)},{key:"closed",icon:e=>n()("div",{style:F.iconContainer},void 0,c({...e,...F.closedIcon})),iconColor:L,level:R,title:R,caption:n()(g.FormattedMessage,{id:"CreateTeamspaceMenu.closedTeamspace.caption",defaultMessage:"Anyone can see this teamspace but not join"}),disabled:!1,onSelect:()=>a("closed",!1)},{key:"private",icon:e=>n()("div",{style:F.iconContainer},void 0,(0,m.b)({...e,...F.lockIcon})),iconColor:L,level:D,title:T?n()(k,{title:D,badge:n()(y,{tier:I})}):D,caption:n()(g.FormattedMessage,{id:"CreateTeamspaceMenu.privateTeamspace.caption",defaultMessage:"Only members can see that this teamspace exists"}),disabled:T&&!v,tooltip:T?A:void 0,onSelect:()=>{if(T&&!Z)return f.y(o,{from:"team_security_settings",for:I,dontOpenPlansOnCancel:!0});a("private",!1)}}];if(i||v){const e=i&&(!v||_),t={key:"default",icon:e=>n()("div",{style:F.iconContainer},void 0,(0,u.o)({...e,...F.lockIcon})),iconColor:L,level:E,title:E,caption:n()(g.FormattedMessage,{id:"CreateTeamspaceMenu.defaultTeamspace.caption",defaultMessage:"Everyone at {spaceName} must be a member",values:{spaceName:x}}),disabled:!1,disableAllOptionsTooltip:e?n()(g.FormattedMessage,v?{id:"TeamAccessLevelSwitcher.closeOrPrivateTeamspace.disabledTooltipOnlyDefaultTeam",defaultMessage:"Add another default teamspace to change teamspace permissions."}:{id:"TeamAccessLevelSwitcher.defaultTeamspace.disabledTooltipNonAdmin",defaultMessage:"You can't change this setting because you are not a workspace admin"}):void 0,onSelect:()=>a("open",!0)};N.unshift(t)}return N}function k(e){let{title:t,badge:i}=e;window.__c={n:"TitleWithBadge"};const a=(0,l.yK)((()=>({container:{display:"flex",flexWrap:"wrap",alignItems:"center"},badge:{marginLeft:5}})),[]);return n()("div",{style:a.container},void 0,t,n()("div",{style:a.badge},void 0,i))}},92994:(e,t,i)=>{i.d(t,{a:()=>o});var a=i(86628),n=i(77080);function o(e){return(0,a.VK)((()=>n.default.getGroup(e)),[e])}},12646:(e,t,i)=>{i.r(t),i.d(t,{GlobalSearchStaticContext:()=>Nt,GlobalSearchStoresContext:()=>Ot,default:()=>Ut});var a=i(23174),n=i.n(a),o=i(67294),s=i(83355),r=i(13991),l=i(49085),d=i(15145),c=i(49271),u=i(1800),m=i(72126),p=i(84908),g=i(95477),h=i(43250),f=i(24042),v=i(2342),y=i(10434),S=i.n(y),b=i(86628),M=i(24405),w=i(36488),C=i(56940),_=i(78140),k=i(87279),T=i(35630),I=i(88632),P=i(35840),x=i(70203),Z=i(82990),F=i(5366),A=i(74194),E=i(68785),B=i(31278),R=i(33411),D=i(34700),L=i(65496),N=i(38755),O=i(80444),V=i(92338),U=i(29026);class W extends l.default{constructor(){super(...arguments),this.resetQuery=()=>{this.setState({...this.state,query:{...this.state.query,text:"",filters:(0,V.u4)()},limit:U.Xv})},this.updateQueryText=e=>{this.setState({...this.state,query:{...this.state.query,text:e},limit:U.Xv})}}getInitialState(){return{isOpen:!1,query:{text:"",filters:(0,V.u4)(),sort:{field:"relevance"}},limit:20}}}const z=new W;class K extends s.Z{constructor(){super(...arguments),this.typingTimer=void 0,this.combined=this.createComputedStore((()=>{var e,t;return L.oO({localResults:null===(e=this.props.searchResultStore.state.localResults)||void 0===e?void 0:e.results,serverResults:null===(t=this.props.searchResultStore.state.serverResults)||void 0===t?void 0:t.results})})),this.jumpToStore=this.createComputedStore((()=>{const e=this.combined.state,t=this.props.focusedIndexStore.state;if(!e||e.length<0||void 0===t)return;const i=e[t];return{focusedResultTitle:x.Jcv(null==i?void 0:i.store.getTitleValue()),focusedResultIcon:null==i?void 0:i.store.getIcon()}})),this.renderLeft=e=>{var t;const{showSpinner:i}=this.props,a=this.styles,o={...this.getThemeColors().searchIcon,...a.searchIcon()},s=Boolean(z.state.query.text.trim()),r=null===(t=this.jumpToStore)||void 0===t||null===(t=t.state)||void 0===t?void 0:t.focusedResultIcon,l=s?n()(B.Z,{disabled:!0,icon:r,isEmptyPage:Boolean(r),size:20,style:o}):(0,P.R)(o);return n()(R.Z,{show:i,showDelay:500,showHold:200,render:e=>e?n()(E.Z,{style:o}):l})},this.handleQueryChange=e=>{this.handleTyping();const t=String(e.target.value);this.props.onQueryChange(t)},this.handleClearButtonClick=()=>{z.resetQuery()},this.styles={inputDesktop:{fontSize:18,height:K.DESKTOP_INPUT_HEIGHT,paddingLeft:16,paddingRight:16,flexGrow:0,flexShrink:0,zIndex:1,...(0,D.X)(!0,!0)},searchIcon:()=>{const{device:e}=this.environment;return{width:e.isMobile?16:18,height:e.isMobile?16:18,marginRight:e.isMobile?12:10,flexGrow:0,flexShrink:0}},input:{minWidth:0,...Z.Z.textOverflowStyle,...(0,D.X)(!0,!1)},clearButton:{...(0,D.X)(!0,!1)}}}willUnmount(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=void 0)}renderComponent(){var e;const{device:t}=this.environment,{isOpen:i,searchResultStore:a}=this.props,o=this.styles,s=this.getThemeColors(),r=null===(e=this.jumpToStore.state)||void 0===e?void 0:e.focusedResultTitle,l=z.state.query.text,d=(null==r?void 0:r.slice(0,l.length).toLocaleLowerCase())===l.toLocaleLowerCase()&&l&&l.length<20&&!t.isMobile?l+(null==r?void 0:r.substring(l.length)):"",c=A.Z.Format.Transparent,u={...o.inputDesktop,...s.inputDesktop};return n()(A.Z,{format:c,placeholder:this.getPlaceholderText(),left:this.renderLeft(a),value:l,suggestedText:d,focus:i,focusInitial:!0,focusAfterAnimation:!0,showClearButton:!0,clearButtonStyle:o.clearButton,selectAll:!0,onChange:this.handleQueryChange,onClearButtonClick:this.handleClearButtonClick,style:u,inputStyle:o.input,window:this.props.window})}handleTyping(){const{onTypingChange:e}=this.props;this.typingTimer&&window.clearTimeout(this.typingTimer),e(!0),this.typingTimer=window.setTimeout((()=>e(!1)),K.TYPING_DEBOUNCE_MS)}getPlaceholderText(){const{currentSpaceStore:e}=O.default.state,t=e&&(0,N.rn)(this.environment,e);if(t)return this.props.intl.formatMessage({id:"searchInputMenuItem.placeholder.namedSpace",defaultMessage:"Search {spaceName}…"},{spaceName:t})}getThemeColors(){return{inputDesktop:{boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`},inputMobile:{background:this.theme.inputBackground},searchIcon:{fill:this.theme.mediumIconColor}}}}K.displayName="SearchInputMenuItem",K.TYPING_DEBOUNCE_MS=300,K.DESKTOP_INPUT_HEIGHT=48,K.MAX_PLACEHOLDER_TITLE_LENGTH=100;const H=(0,F.injectIntl)(K);i(57658);var G=i(97880),q=i(32163),j=i(43145),Y=i(72495),$=i(28020),Q=i(15447),J=i(69327),X=i(480),ee=i(28992),te=i(75024);const ie=e=>({fontSize:12,color:e.lightTextColor,marginLeft:6,paddingRight:4,paddingLeft:4,height:24}),ae=function(e){window.__c={n:"GlobalSearchFooterContainer"};const t=(0,X.O7)(),{device:i}=t,a=(0,M.yK)((e=>({footer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:i.isMobile?Z.Z.fontSize.UIRegular.mobile:Z.Z.fontSize.UIRegular.desktop},footerWrapper:{flexShrink:0,...(0,D.X)(!0,!0)},footerText:{color:e.lightTextColor,fontSize:te.yv(t,"UISmall"),...Z.Z.textOverflowStyle},footerDebugButton:{...ie(e),marginRight:6}})),[i.isMobile,t]);return n()("footer",{style:a.footerWrapper},void 0,n()(Y.Z,{topBorder:!0,style:a.footer,disableDesktopPadding:!0},void 0,o.createElement(ee.Z,S()({},e,{style:a.footerText}))))};var ne=i(75e3);function oe(){window.__c={n:"GlobalSearchFooterNavigationHints"};const e=(0,X.O7)(),t=(0,F.useIntl)(),i=(0,M.yK)((t=>({upDownIcon:{marginRight:4,marginBottom:-2,display:"inline",width:12,height:12,fill:t.mediumIconColor},enterIcon:{marginRight:4,marginBottom:-2,display:"inline",width:11,height:11,fill:t.mediumIconColor},commandGlyph:{fontSize:.75*te.yv(e,"UIRegular"),paddingRight:1,color:t.lightTextColor},footerText:{fontSize:te.yv(e,"UISmall"),color:t.lightTextColor,...Z.Z.textOverflowStyle},inlineHint:{display:"inline",marginRight:16}})),[e]),a={...te.mK,...i.footerText};return n()("ul",{style:a},void 0,n()("li",{style:i.inlineHint},void 0,(0,ne.U)(i.enterIcon),t.formatMessage({id:"searchFooter.helpText.openNewTab",defaultMessage:"Open in a new tab"})))}var se=i(94184),re=i.n(se),le=i(8848),de=i(79362),ce=i(21202),ue=i(32739),me=i(45168),pe=i(24039),ge=i(90403),he=i(52275),fe=i(64133),ve=i(12981),ye=i(86176),Se=i(76798),be=i(26388),Me=i(69988),we=i(98742),Ce=i(98165),_e=i(8323),ke=i(16402),Te=i(57559),Ie=i(73299),Pe=i(40793),xe=i(97239),Ze=i(64921),Fe=i(31945),Ae=i(96525),Ee=i(40721),Be=i(89728),Re=i(11470),De=i(95697);class Le extends s.Z{constructor(){super(...arguments),this.getBreadcrumbCommonProps=e=>({maxWidth:this.props.ancestorMaxWidth,iconSize:this.props.iconSize,titleStyle:this.getTitleStyle(),iconStyle:Le.iconStyle,highlighter:this.props.highlighter})}renderComponent(){const{store:e}=this.props,t=e.getTitleStore();if(t&&t.isReady())return n()("div",{style:this.getStyle(),className:"notranslate"},void 0,this.renderAncestors())}renderAncestors(){const{store:e,maxAncestorCount:t}=this.props,i=Ce.uJ(e),a=e.isNavigableBlock()?i.slice(1):[...i];if(a.reverse(),i.reverse(),a.length>t){const[e,n,s]=[a[0],a.slice(1,a.length-t+1),a.slice(a.length-t+1)];if((0,De.bq)()){const t=s.length;return[this.renderButtonForStore({store:e,showDivider:!this.props.isMobile}),this.renderBlocksAsPopup(this.props.isMobile?i:n),...s.map(((e,i)=>{const a=!this.props.hideCurrentPage||i!==t-1;return e instanceof Te.zX?o.createElement(xe.Z,S()({key:e.id,store:e,showDivider:a},this.getBreadcrumbCommonProps(e))):o.createElement(Pe.Z,S()({key:e.id,store:e,showDivider:a},this.getBreadcrumbCommonProps(e)))}))]}{const e=a.filter((e=>e instanceof Te.G)),i=a.filter((e=>e instanceof Te.G)),n=e.length;return[o.createElement(Pe.Z,S()({key:e[0].id,store:e[0],showDivider:!this.props.isMobile},this.getBreadcrumbCommonProps(e[0]))),this.renderBlocksAsPopup(this.props.isMobile?i:e.slice(1,e.length-t+1)),...e.slice(e.length-t+1).map(((e,t)=>o.createElement(Pe.Z,S()({key:e.id,store:e,showDivider:!this.props.hideCurrentPage||t!==n-1},this.getBreadcrumbCommonProps(e)))))]}}{const e=a.length;return a.map(((t,i)=>this.renderButtonForStore({store:t,showDivider:!this.props.hideCurrentPage||i!==e-1})))}}renderButtonForStore(e){const{store:t,showDivider:i}=e;return t instanceof Te.zX?o.createElement(xe.Z,S()({store:t,showDivider:i},this.getBreadcrumbCommonProps(t))):o.createElement(Pe.Z,S()({store:t,showDivider:i},this.getBreadcrumbCommonProps(t)))}getMenuListSections(e){const t=this.props.isMobile?Fe.Z4.SlideUp:Fe.Z4.Popup;return[{key:"results",render:e=>o.createElement(Y.Z,e),items:e.map(((e,i)=>({key:e.id,render:a=>o.createElement(Ae.Z,S()({},a,{stopClickPropagation:!0,popupType:t,renderOrigin:t=>o.createElement(Re.Z,S()({},t,{isSubpage:0!==i,store:e,hidePath:!0,focused:!1})),render:e=>null})),action:()=>{}})))}]}renderBlocksAsPopup(e){return n()(Fe.ZP,{popupType:this.props.isMobile?Fe.Z4.SlideUp:Fe.Z4.Popup,renderOrigin:e=>{var t;return this.props.isMobile?o.createElement(Ze.Z,S()({style:{...Le.dividerWrapStyle},mobileFeedback:!0},e),n()(Ie.f,{}),n()("div",{style:Ne},void 0,"..."),n()(Ie.f,{})):n()("div",{style:Le.dividerWrapStyle},void 0,o.createElement(Be.Z,S()({isSmall:!0},e,{style:{paddingLeft:2,paddingRight:2,fontSize:null===(t=this.props.style)||void 0===t?void 0:t.fontSize}}),"..."),n()(Ie.f,{}))},render:t=>{let i;return i=this.props.isMobile?{menuType:k.og.Modal,title:n()(F.FormattedMessage,{defaultMessage:"Breadcrumb",id:"globalSearch.breadcrumb.mobileBreadcrumbMenu.title"}),right:n()(Ee.DoneMenuText,{}),onClickRight:t.close}:{menuType:k.og.Popup,width:240},o.createElement(_.Z,i,n()(q.Z,{type:q.i.Vertical,initialFocus:void 0,sections:this.getMenuListSections(e)}))}},"pages-popup")}getStyle(){return{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:this.props.isMobile?Z.Z.fontSize.UIRegular.mobile:Z.Z.fontSize.UIRegular.desktop,color:this.theme.lightTextColor,filter:"grayscale(70%)",...this.props.style}}getTitleStyle(){return{lineHeight:1.2,fontSize:this.props.isMobile?Z.Z.fontSize.UISmall.mobile:Z.Z.fontSize.UISmall.desktop,color:this.theme.lightTextColor}}}Le.displayName="SearchPathBreadcrumb",Le.iconStyle={marginRight:3},Le.dividerWrapStyle={display:"flex",alignItems:"center",flexShrink:0};const Ne={marginLeft:3,marginRight:3};class Oe extends s.Z{constructor(){super(...arguments),this.storeTypes={explanationModalOpen:l.default.createClass(!1)},this.styles={title:{fontWeight:Z.Z.fontWeight.medium,lineHeight:"20px"},jumpToTitle:{fontWeight:Z.Z.fontWeight.medium,fontSize:15,lineHeight:"20px"},menuItem:{minHeight:36,paddingTop:this.environment.device.isMobile?12:8,paddingBottom:this.environment.device.isMobile?12:8},textWrapper:{marginLeft:10,alignItems:void 0,flex:void 0,width:"100%"},inlineTextWrapper:{alignItems:"baseline"},highlight:{fontWeight:Z.Z.fontWeight.medium},vectorHighlight:{fontWeight:Z.Z.fontWeight.medium,whiteSpace:"pre-wrap"},enterIcon:{height:14,width:14},uniqueIDBadgeWrapper:{display:"flex",gap:8,marginRight:8,alignItems:"center"},caption:{marginTop:1},debugArea:{fontFamily:"monospace"},timestamp:{fontSize:Z.Z.fontSize.UISmall.desktop,fontWeight:Z.Z.fontWeight.regular},toolTip:{maxWidth:300},toolTipTitle:{fontWeight:Z.Z.fontWeight.medium,fontSize:Z.Z.fontSize.UISmall.desktop},toolTipText:{fontWeight:Z.Z.fontWeight.medium,fontSize:Z.Z.fontSize.UISmall.desktop,marginLeft:0,paddingRight:20},toolTipValue:{fontSize:Z.Z.fontSize.UISmall.desktop,fontWeight:Z.Z.fontWeight.regular},toolTipMenuItem:{minHeight:20}},this.debugHitCustomRenderer=e=>{let{data:t,keyPath:i}=e;if(2===i.length&&"_explanation"===i[0])return{element:o.createElement(o.Fragment,null,n()("button",{onClick:e=>{this.stores.explanationModalOpen.setState(!0),e.stopPropagation()}},void 0,"show simplified explanation")),expanded:!1};const a=t._ltrlog;if(a)return function(e){const t=Object.keys(e[0])[0],i=e[0][t].map(((e,t)=>{const i=t%2==0?We:Ue;return n()("tr",{},e.name,n()("td",{style:i},void 0,`${t}`),n()("td",{style:i},void 0,`${e.name}`),n()("td",{style:i},void 0,`${e.value}`))}));return{element:o.createElement(o.Fragment,null,n()("div",{},void 0,n()("b",{},void 0,`Featureset: ${t}`)),n()("div",{style:{maxHeight:200,overflowY:"scroll"}},void 0,n()("table",{style:{border:"1px solid black"}},void 0,i))),expanded:!1}}(a);if(!["_score","matched_queries"].every((e=>t[e])))return null;const{_score:s,matched_queries:r}=t;return{element:o.createElement(o.Fragment,null,`score ${s}, ${(r??[]).length} matched query clauses`),expanded:!1}}}renderComponent(){const{focused:e,isLastInSection:t,isBeforeFocused:i,inline:a,className:s}=this.props,r=this.styles,l=this.getThemeColors(),d={...r.menuItem,...!a&&!t&&!i&&!e&&l.menuItemBorder},c={...r.caption,...l.caption},u={...r.timestamp,...l.timestamp},m={...r.textWrapper,...this.props.inline&&r.inlineTextWrapper},p={title:this.renderTitle(),icon:this.renderIcon(),caption:this.renderCaption(),body:this.renderPreview(),right:this.renderRight(e),rightStyle:e?void 0:u,dontShrinkRight:!0,captionStyle:c,style:d,spacerStyle:this.hasPath()?void 0:Ke,textWrapperStyle:m,className:re()("notranslate",s),buttonStyle:{paddingLeft:2},hoveredStyle:{background:this.theme.buttonHoveredBackground}};return(0,_e.Mk)()?n()(be.Z,{delayThreshold:50,disableTooltip:!0,placement:be.Z.Placement.Right,originGap:18,renderTooltip:()=>this.renderTooltip(),style:r.toolTip,render:e=>o.createElement(he.Z,S()({},this.props,p,{disableTransition:!0,ignoreLocalHoverState:!0},(0,we.Z)(e,this.props)))}):o.createElement(he.Z,S()({},this.props,p,{disableTransition:!0,ignoreLocalHoverState:!0}))}renderTooltip(){return n()(pe.Z,{store:this.props.store})}renderTitle(){var e;const{store:t,result:i,placeholder:a,index:o}=this.props,s=this.styles,r=this.getThemeColors(),l=void 0===i,d={...(null==i?void 0:i.sources.includes(V.vp.Local))&&0===o?s.jumpToTitle:s.title,...!l&&r.nonHighlightedTextColor},c=[];if(i&&i.highlight)if(c.push(...(0,Me.fe)(i.highlight.pathText)),this.usesFullPageIndexingHighlight())c.push(...(0,Me.fe)(i.highlight.title));else{Te.G.createChildStore(this.props.store,{table:ce.iU,id:i.id,spaceId:i.spaceId}).isNavigableBlock()&&c.push(...(0,Me.fe)(i.highlight.text))}const u=this.getWordHighlighter({words:c}),m=null===(e=(0,Ce.VP)(t))||void 0===e?void 0:e.isArchived(),p=(0,me.e)(i);return n()("div",{style:{display:"flex",justifyContent:"space-between",...d}},void 0,n()("div",{style:{display:"flex"}},void 0,p&&this.renderUniqueIdHighlight(i),n()(Se.Z,{style:d,store:t,placeholder:a,highlighter:u}),!1,m&&n()(ge.Z,{content:n()(F.FormattedMessage,{id:"globalSearch.result.archived.badge.text",defaultMessage:"Archived"}),style:ze})))}renderUniqueIdHighlight(e){var t;const{focused:i}=this.props,a=null==e||null===(t=e.highlight)||void 0===t?void 0:t.uniqueId;if(!a)return;const o="dark"===this.environment.ThemeStore.state.mode,s=this.styles,r=this.getWordHighlighter({words:[a]}),l=i?o?le.FN.dark.translucentGray[300]:le.se.light.darkgray.alpha(.09):o?le.FN.dark.translucentGray[200]:le.se.light.darkgray.alpha(.06);return n()("div",{style:s.uniqueIDBadgeWrapper},void 0,n()("div",{},void 0,n()(fe.Z,{text:a,highlighter:r})),n()("div",{style:{borderRight:`1.5px solid ${l}`,height:14,borderRadius:1}}))}renderRight(e){const{result:t}=this.props,i=Boolean(t);return n()("div",{style:{display:"flex",width:i?this.styles.enterIcon.width:void 0}},void 0,e?this.renderEnterIcon():this.renderTimestamp())}renderTimestamp(){const{result:e,lastViewed:t}=this.props;if(!e&&t)return(0,ke.IS)(t,{useCompactFormat:!0})}renderIcon(){const{store:e}=this.props,t=e.getIcon();if(t&&de.V2(t.icon)){const e=(0,ue.NV)({httpUrl:g.default.domainBaseUrl,protocol:g.default.protocol,includePort:!0}),i={width:20,height:20,objectFit:"cover",borderRadius:3,transition:"opacity 100ms ease-out"};return n()("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:"0.25em",flexShrink:0},className:`${h.S94} notranslate`},void 0,n()("div",{},void 0,n()(ve.Z,{src:`${e}${t.icon}?mode=${this.theme.mode}`,style:{...i,background:void 0},onContextMenu:e=>e.preventDefault()})))}return o.createElement(o.Fragment,null,n()(B.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:20,largeIcon:!0}))}renderCaption(){const{store:e,inline:t,result:i}=this.props,a=this.getWordHighlighter({words:(0,Me.fe)(i&&i.highlight&&i.highlight.pathText),removeDuplicate:!0}),{device:s}=this.environment,r=t||s.isMobile?0:2;return o.createElement(o.Fragment,null,n()(ye.Z,{store:e,extraLength:r,showFullPathInTooltip:!0,highlighter:a}))}renderPreview(){var e,t;const{result:i}=this.props;if(!i)return;if(!i.highlight)return;if(Te.G.createChildStore(this.props.store,{table:ce.iU,id:i.id,spaceId:i.spaceId}).isNavigableBlock()&&!this.usesFullPageIndexingHighlight())return;if(!i.highlight.text)return;const a=i.highlight.text,s=(0,Me.ZP)(a);if(this.usesFullPageIndexingHighlight()){const e=e=>e.filter(Me.il).map((e=>e[0].toLowerCase())),t=t=>void 0===t?[]:e((0,Me.ZP)(t)),a=[...new Set([...t(i.highlight.title),...t(i.highlight.pathText)])],n=e=>a.some((t=>t.includes(e)));if(e(s).every((e=>n(e))))return}const r=this.styles,l=null!==(e=i.sources)&&void 0!==e&&e.includes(V.vp.VectorDBBlock)||null!==(t=i.sources)&&void 0!==t&&t.includes(V.vp.VectorDBCollection)?r.vectorHighlight:r.highlight,d=this.getThemeColors();return o.createElement(o.Fragment,null,n()(fe.Z,{text:a,highlighter:{tokenize:e=>(0,Me.Vu)(s),style:{...l,...d.highlight}}}))}usesFullPageIndexingHighlight(){const{result:e}=this.props;return e&&!e.sources.includes(V.vp.Local)}getWordHighlighter(e){const{words:t,removeDuplicate:i}=e;if(0===t.length)return;const a={...this.styles.highlight,...this.getThemeColors().highlight},n=i?new Set:void 0;return{tokenize:e=>(0,Me.XT)({text:e,patterns:t,uniqueTokenHighlighterContext:n}),style:a}}renderEnterIcon(){const{device:e}=this.environment,{focused:t}=this.props,i=this.styles,a=this.getThemeColors();if(e.isMobile)return;const n={...i.enterIcon,...a.enterIcon,opacity:t?1:0};return(0,ne.U)(n)}hasPath(){const{hidePath:e,store:t}=this.props;return!e&&(0,ye.L)(t)}getThemeColors(){return{nonHighlightedTextColor:{color:this.theme.mediumTextColor},menuItemBorder:{boxShadow:`0 1px 0 ${this.theme.lightDividerColor}`},highlight:{color:this.theme.regularTextColor},enterIcon:{fill:this.theme.mediumIconColor},caption:{color:this.theme.mediumTextColor},timestamp:{color:this.theme.lightTextColor},toolTipTitle:{color:this.theme.mediumTextColor},toolTipText:{color:this.theme.regularTextColor},toolTipValue:{color:this.theme.lightTextColor}}}}Oe.displayName="SearchResultMenuItem",Oe.contextTypes={...k.mw,...s.w};const Ve=Oe,Ue={paddingLeft:5,paddingRight:20,paddingTop:2,paddingBottom:2,border:"1px solid black",color:le.FN.dark.green[900]},We={...Ue,color:le.FN.dark.gray[30]};const ze={fontWeight:Z.Z.fontWeight.regular},Ke={visibility:"hidden"};class He extends s.Z{constructor(){super(...arguments),this.storeTypes={isLoadingRecents:l.default.createClass(!1),endOfRecentsReached:l.default.createClass(!1)},this.renderComponent=()=>{if(!Q.X4.state)return;const{device:e}=this.environment,t=this.defaultViewStyles,{currentSpaceStore:i}=O.default.state;if(!i)return;const a=(0,$.np)(),s=Q.X4.state.filter((e=>e.pageId!==(null==a?void 0:a.id))),r={};s.forEach((e=>{let{pageId:t,visitedAt:i}=e;return r[t]=i}));const l=new Map;s.map(((t,i)=>{const a=Q._5(t.visitedAt),n="Today"!==a&&"Yesterday"!==a,s={key:`${t.store.id}:${i}`,action:e=>this.props.onSelect({store:t.store,action:e}),render:i=>o.createElement(Ve,S()({},i,{inline:!e.isMobile,store:t.store,hidePath:!1,lastViewed:n?r[t.store.id]:void 0,buttonStyle:{paddingLeft:1}}))};var d;l.has(a)?null===(d=l.get(a))||void 0===d||d.push(s):l.set(a,[s])}));const d=[];for(const[o,u]of l.entries()){const e=this.getMessageFromBucket(o),i={key:o,items:u,render:i=>n()(Y.Z,{title:e,desktopTitleStyle:t.sectionHeader,disableDesktopPadding:!0,style:t.section},void 0,i.children)};d.push(i)}const c=!e.isMobile&&s.length>0;return o.createElement(o.Fragment,null,n()("div",{style:t.wrapper},void 0,n()(q.Z,{type:q.i.Vertical,initialFocus:0,disableKeyboardArrowWrap:!0,sections:d,unfocusOnScroll:!0}),n()(j.Z,{onChange:this.handleScrollOffsetChange})),c&&n()(ae,{title:n()(oe,{})}))},this.handleScrollOffsetChange=e=>{this.getLastPageTimestamp()&&e<=200&&!this.stores.isLoadingRecents.state&&!this.stores.endOfRecentsReached.state&&this.loadMoreRecents()},this.loadMoreRecents=m.P2((async()=>{const e=this.getLastPageTimestamp(),{currentSpaceStore:t}=O.default.state,i=this.environment.currentUser.id,a=null==t?void 0:t.id;if(!i||!a||!e)return;this.stores.isLoadingRecents.setState(!0);const n=await Q.Od(e,{environment:this.environment,userId:i,spaceId:a});this.stores.isLoadingRecents.setState(!1),n||this.stores.endOfRecentsReached.setState(!0)}),300),this.defaultViewStyles={wrapper:{width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto"},sectionHeader:{fontWeight:Z.Z.fontWeight.semibold,marginBottom:7,marginLeft:2},section:{marginBottom:18}}}getLastPageTimestamp(){const{currentSpaceStore:e}=O.default.state;if(!e)return;const t=J.Z.getWithoutSubscribing(e.id),i=t[t.length-1];return null==i?void 0:i.visitedAt}getMessageFromBucket(e){switch(e){case"Today":return n()(F.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.today.text",defaultMessage:"Today"});case"Yesterday":return n()(F.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.yesterday.text",defaultMessage:"Yesterday"});case"Past Week":return n()(F.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.pastWeek.text",defaultMessage:"Past Week"});case"Past 30 Days":return n()(F.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.past30Days.text",defaultMessage:"Past 30 Days"});case"Older":return n()(F.FormattedMessage,{id:"globalSearch.recentPagesTimeBuckets.older.text",defaultMessage:"Older"})}(0,G.t1)(e)}}He.displayName="SearchDefaultBody";const Ge=He;var qe=i(11751),je=i(87531),Ye=i(12921),$e=i(29798),Qe=i(50506),Je=i(63296),Xe=i(77907),et=i(32470);class tt extends s.Z{constructor(){super(...arguments),this.storeTypes={requestModalOpen:l.default.createClass(!1),responseModalOpen:l.default.createClass(!1)},this.styles={footer:()=>{const{device:e}=this.environment;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:e.isMobile?Z.Z.fontSize.UIRegular.mobile:Z.Z.fontSize.UIRegular.desktop}},footerText:{fontSize:te.yv(this.environment,"UISmall"),...Z.Z.textOverflowStyle},inlineHint:{display:"inline",marginRight:16},resultCountWrapper:{display:"flex",alignItems:"center",...Z.Z.textOverflowStyle},resultCount:{fontWeight:Z.Z.fontWeight.medium},resultText:{verticalAlign:"middle",marginRight:6},spinner:{display:"inline",width:12,height:12,verticalAlign:"middle"},keyboardShortcut:{marginRight:4,marginBottom:1,fontVariant:"all-small-caps",fontSize:1.1*te.yv(this.environment,"UISmall")},commandGlyph:{fontSize:.75*te.yv(this.environment,"UIRegular")},footerDebugButton:ie(this.theme),debugModalStyle:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},navigationHints:{marginLeft:15}}}renderComponent(){const{shouldShow:e}=this.props;if(!e)return;const t=this.styles,i=this.getThemeColors(),a={...t.resultCount,...i.resultCount},{count:s,isLowerBound:r}=this.props.searchResultStore.getResultCount(),l=n()("span",{style:t.resultText},void 0,r?this.props.intl.formatMessage({id:"SearchResultsFooter.helpText.resultCountApproximate",defaultMessage:"{resultCount, plural, other {<resultwrapper>{resultCount}+</resultwrapper> results}}"},{resultCount:s,resultwrapper:e=>n()("span",{style:a},void 0,e)}):this.props.intl.formatMessage({id:"SearchResultsFooter.helpText.resultCount",defaultMessage:"{resultCount, plural, one {<resultwrapper>{resultCount}</resultwrapper> result} other {<resultwrapper>{resultCount}</resultwrapper> results}}"},{resultCount:s,resultwrapper:e=>n()("span",{style:a},void 0,e)})),d=n()("div",{style:t.resultCountWrapper},void 0,l,this.renderSpinner(this.props.showSpinner),n()("div",{style:t.navigationHints},void 0,n()(oe,{})));return n()(ae,{title:d,right:o.createElement(o.Fragment,null,this.renderSearchDebugButtons())})}renderSpinner(e){const t=this.styles;return n()(R.Z,{show:e,showDelay:500,showHold:200,render:e=>e&&n()(E.Z,{style:t.spinner})})}renderSearchDebugButtons(){var e;if(!et.ZP.state.debug&&!et.ZP.state.showDebugInfo)return;const{rawRequests:t,rawResponses:i}=(null===(e=this.props.searchResultStore.state.serverResults)||void 0===e||null===(e=e.debugInfo)||void 0===e?void 0:e.response)||{};return o.createElement(o.Fragment,null,t&&o.createElement(o.Fragment,null,n()(Qe.Z,{open:this.stores.requestModalOpen.state,innerStyle:this.styles.debugModalStyle,onDismiss:()=>{this.stores.requestModalOpen.setState(!1)},render:()=>n()(Xe.LazyAdminReactJson,{showCopyButton:"large",defaultCollapsed:!1,data:t})}),n()(Je.Z,{style:this.styles.footerDebugButton,onClick:()=>this.stores.requestModalOpen.setState(!0)},void 0,"Open Request")),i&&o.createElement(o.Fragment,null,n()(Qe.Z,{open:this.stores.responseModalOpen.state,innerStyle:this.styles.debugModalStyle,onDismiss:()=>{this.stores.responseModalOpen.setState(!1)},render:()=>n()(Xe.LazyAdminReactJson,{showCopyButton:"large",data:{rawResponses:i},defaultCollapsed:!1})}),n()(Je.Z,{style:this.styles.footerDebugButton,onClick:()=>this.stores.responseModalOpen.setState(!0)},void 0,"Open Response")))}getThemeColors(){return{footerText:{color:this.theme.lightTextColor},resultCount:{color:this.theme.mediumTextColor},keyboardShortcut:{color:this.theme.mediumTextColor}}}}tt.displayName="SearchResultsFooter";const it=(0,F.injectIntl)(tt);var at=i(43765),nt=i(64369);function ot(e){window.__c={n:"GlobalSearchActionMenuItem"};const{inline:t,title:i,focused:a,isBeforeFocused:n,className:s}=e,{icon:r,...l}=e,d=(0,M.yK)((e=>({hoveredStyle:{background:e.buttonHoveredBackground}})),[]),c=(0,M.yK)((e=>({style:{minHeight:36,paddingTop:8,paddingBottom:8,...!t&&!n&&!a&&{boxShadow:`0 1px 0 ${e.lightDividerColor}`}},textWrapper:{marginLeft:10,alignItems:void 0,flex:void 0,width:"100%",display:"block",textOverflow:"ellipsis",...t&&{alignItems:"baseline"}},icon:{display:"block",flexShrink:0,height:18,width:18,color:e.mediumTextColor},enterIcon:{height:14,width:14,fill:e.mediumIconColor},iconContainer:{marginTop:1}})),[a,t,n]),u={title:i,icon:st(r,c.icon,c.iconContainer),style:c.style,textWrapperStyle:c.textWrapper,right:rt(a,c.enterIcon),className:re()("notranslate",s),buttonStyle:{paddingLeft:2},hoveredStyle:d.hoveredStyle};return o.createElement(he.Z,S()({},l,u,{disableTransition:!0,ignoreLocalHoverState:!0}))}function st(e,t,i){return n()(nt.Z,{style:i},void 0,e(t))}function rt(e,t){const i={...t,opacity:e?1:0};return n()("div",{style:{display:"flex"}},void 0,(0,ne.U)(i))}var lt=i(39634),dt=i(16354),ct=i(36507);class ut extends s.Z{constructor(){super(...arguments),this.handleSendMessageClick=()=>{lt.j({environment:this.environment,from:"quick_find"})},this.styles={menuItem:{marginTop:"auto",marginBottom:"auto"},caption:{marginTop:"auto"},reportProblemButton:{display:"inline"},searchDeletedButton:{display:"inline",lineHeight:"25px"}}}renderComponent(){return o.createElement(ct.Z,S()({},this.getErrorMessage(),{style:this.styles.menuItem,captionStyle:this.styles.caption,shouldWrapCaption:!0}))}renderNoResults(){return{title:ut.noResultsTitle,caption:this.renderNoResultsMessage()}}renderNoResultsMessage(){const e=z.state.query.filters,t=L.FN(e);if(!L.VD.isDeletedOnly(e.isDeletedOnly)){const e=this.styles,t=this.getThemeColors(),i={...e.searchDeletedButton,...t.searchDeletedButton};return n()(F.FormattedMessage,{id:"globalSearchErrorMenuItem.errorPrompt.searchDeleted",defaultMessage:"Some results may be in your deleted pages.{br}<searchdeleted>Search deleted pages</searchdeleted>",values:{searchdeleted:e=>n()(dt.Z,{onClick:this.props.handleSearchDeletedOnly,style:i},void 0,e),br:n()("br",{})}})}return n()(F.FormattedMessage,t?{defaultMessage:"Try different search terms or filters",id:"globalSearchErrorMenuItem.errorPrompt.searchTermsAndFilters"}:{defaultMessage:"Try different search terms",id:"globalSearchErrorMenuItem.errorPrompt.searchTerms"})}renderOffline(){return{title:ut.noResultsTitle,caption:n()(F.FormattedMessage,{defaultMessage:"Go online for more results.",id:"globalSearchErrorMenuItem.errorPrompt.goOnline"})}}renderRequestFailed(){const e=this.styles,t=this.getThemeColors(),i={...e.reportProblemButton,...t.reportProblemButton};return{title:n()(F.FormattedMessage,{id:"globalSearchErrorMenuItem.error.genericErrorMessage",defaultMessage:"Something went wrong"}),caption:n()(F.FormattedMessage,{id:"globalSearchErrorMenuItem.errorPrompt.refreshOrReport",defaultMessage:"Try refreshing or <reportlink>report a problem</reportlink>.",values:{reportlink:e=>n()(dt.Z,{onClick:this.handleSendMessageClick,style:i},void 0,e)}})}}getErrorMessage(){const{error:e}=this.props;switch(e.type){case V.Ix.NoResults.type:return this.renderNoResults();case V.Ix.Offline.type:return this.renderOffline();case V.Ix.RequestFailed.type:return this.renderRequestFailed();default:(0,G.t1)(e)}}getThemeColors(){return{reportProblemButton:{color:this.theme.blueColor},searchDeletedButton:{color:this.theme.blueColor}}}}ut.displayName="SearchErrorMenuItem",ut.contextTypes={...k.mw,...s.w},ut.noResultsTitle=n()(F.FormattedMessage,{defaultMessage:"No results",id:"globalSearchErrorMenuItem.error.noResults"});const mt=ut;function pt(e){if(e){switch(e){case"local":return n()(F.FormattedMessage,{id:"globalSearch.searchResultBuckets.recent.text",defaultMessage:"Jump back in"});case"server":return n()(F.FormattedMessage,{id:"globalSearch.searchResultBuckets.server.text",defaultMessage:"More results"});case"actions":return n()(F.FormattedMessage,{id:"globalSearch.searchActions.actions.text",defaultMessage:"Actions"});case"unique_id":return n()(F.FormattedMessage,{id:"globalSearch.searchResultBuckets.uniqueID.text",defaultMessage:"ID matches"});case"main":return n()(F.FormattedMessage,{id:"globalSearch.searchResultBuckets.bestMatches.text",defaultMessage:"Best Matches"})}(0,G.t1)(e)}}function gt(e,t,i,a){const{store:n}=e,s=n.isNavigableBlock()?n:n.getNavigableBlockStore();if(s)return{key:`${n.id}:${t}`,action:t=>{a.handleSelectResult({store:n,action:t,selectedResult:e,allSearchResults:i})},render:i=>o.createElement(Ve,S()({},i,{index:t,originalPosition:e.originalPosition,isFirstInSection:0===t,store:s,hidePath:!1,result:e,className:h.ulv,inline:!1}))}}const ht=(0,F.injectIntl)((function(e){var t;window.__c={n:"GlobalSearchResultsMenuList"};const[i,a]=(0,o.useState)(!1),s=(0,X.Fy)().isMobile,r=(0,M.yK)((e=>({results:{flex:1,display:"flex",flexDirection:"column",overflow:"auto",height:"100%"},messageMenuItem:{...s&&{background:void 0,boxShadow:void 0}},actionMenuItemTitle:{fontWeight:Z.Z.fontWeight.medium,lineHeight:"20px",fontSize:15,color:e.mediumTextColor,textOverflow:"ellipsis",overflow:"hidden",display:"block"},menuListContainer:{display:"flex",flexDirection:"column",gap:12,marginTop:s?13:void 0}})),[s]),{results:l,resultListStore:d,intl:c,showActions:u}=e,p=e.errorState,g=(0,b.VK)((()=>z.state.query.text),[]),h=u.length>0?{key:"actions",render:e=>o.createElement(Y.Z,S()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:pt("actions")})),items:m.oA(u.map((e=>function(e){const{type:t,title:i,icon:a,action:n}=e;return{key:`actionMenuItem.${t}`,action:n,render:e=>o.createElement(ot,S()({},e,{title:i,icon:a}))}}({...e,title:e.renderTitle(g,c,r.actionMenuItemTitle)}))))}:void 0,f=(0,b.VK)((()=>l?l.filter((e=>e.sources.includes(V.vp.ElasticsearchUniqueID))):[]),[l]),v=(0,o.useMemo)((()=>new Set(f.map((e=>e.id)))),[f]),y=(0,b.VK)((()=>f.length>0?{key:"uniqueIdSearchResultSection",render:e=>o.createElement(Y.Z,S()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:pt("unique_id")})),items:m.oA(f.map(((t,i)=>gt(t,i,f,e))))}:void 0),[f,e]),w=(0,b.VK)((()=>(l||[]).filter((e=>!v.has(e.id)))),[l,v]),C=(0,b.VK)((()=>[]),[]),_=(0,b.VK)((()=>{const t=(()=>{if(0!==v.size)return v.size>0?"main":void 0})();return w.length>0?{key:"mainSearchResultSection",render:e=>o.createElement(Y.Z,S()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:pt(t)})),items:m.oA(w.map(((t,i)=>gt(t,i,w,e))))}:void 0}),[w,v.size,e]),k=(0,b.VK)((()=>C.length>0?{key:"serverOnlySearchResultSection",render:e=>o.createElement(Y.Z,S()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:pt("server")})),items:m.oA(C.map(((t,i)=>gt(t,i,C,e))))}:void 0),[C,e]),T=[h,y,_,k].filter(G.$K),I=(0,o.useCallback)(((t,n)=>{const{onMaybeLoadMoreResults:o}=e,s=t<=200;s&&!i&&o(),a(s)}),[i,e]),P=_||k?(null==h||null===(t=h.items)||void 0===t?void 0:t.length)??0:0;return n()("section",{style:r.results},void 0,T&&n()("div",{className:"search-results-list"},void 0,n()(q.Z,{type:q.i.Vertical,initialFocus:P,store:d,disableKeyboardArrowWrap:!0,sections:T,style:r.menuListContainer})),function(e,t){if(e.isLoading)return;if(e.showMajorError)return n()(mt,{error:e.serverError,handleSearchDeletedOnly:()=>{}});if(e.serverError&&e.serverError!==V.Ix.NoResults)return function(e,t){return n()(Y.Z,{disableMobilePadding:!0,disableMobileBorders:!0},void 0,n()(at.Z,{title:e,style:t}))}(e.serverError.message,t)}(p,r.messageMenuItem)||n()(j.Z,{onChange:I}))}));const ft=function(e){window.__c={n:"GlobalSearchResultsBody"};const{searchResultStore:t}=e,i=(0,X.O7)(),a=(0,X.Fy)(),s=(0,M.yK)((e=>({container:{display:"flex",flexDirection:"column",width:"100%",flex:1,overflow:"hidden"},askAiLabel:{color:e.aiPurpleColor,fontWeight:Z.Z.fontWeight.semibold},askAiQuery:{fontWeight:Z.Z.fontWeight.regular},askAiIcon:{fill:e.aiPurpleColor}})),[]),r=(0,b.qz)(void 0,$e.Z),l=(0,b.VK)((()=>r.state.focus.indexGlobal),[r]),{handleSelectResult:d,globalFocusedIndex:c}=(0,o.useContext)(Nt),{localResults:u,serverResults:m,clusterInfo:p,debugInfo:g,serverResultsLoading:h,hasPublicAccessPermission:f,errorState:v,serverResultsAllLoaded:y}=(0,b.VK)((()=>{var e,a;const{hasPublicAccessPermission:n}=L.bC(i);return{localResults:t.state.localResults,serverResults:t.state.serverResults,serverResultsLoading:t.state.serverResultsLoading,clusterInfo:null===(e=t.state.serverResults)||void 0===e?void 0:e.clusterInfo,debugInfo:null===(a=t.state.serverResults)||void 0===a?void 0:a.debugInfo,hasPublicAccessPermission:n,errorState:t.state.errorState,serverResultsAllLoaded:t.state.serverResultsAllLoaded}}),[t,i]),S=!1===v.isLoading&&v.showMajorError,w=Boolean(u||m),C=(0,o.useCallback)((()=>{!h&&!y&&void 0!==m&&z.update((e=>({...e,limit:e.limit+20})))}),[h,y,m]),_=(0,b.VK)((()=>L.oO({localResults:null==u?void 0:u.results,serverResults:null==m?void 0:m.results})),[u,m]),k=(0,b.VK)((()=>[{type:"assistant",renderTitle:(e,t,i)=>function(e,t){return n()("div",{className:"notranslate",style:t},void 0,e)}(o.createElement(o.Fragment,null,n()("span",{},void 0,"Ask AI "),n()("span",{style:s.askAiQuery},void 0,e)),{...i,...s.askAiLabel}),icon:e=>(0,qe.t)({...e,...s.askAiIcon}),action:()=>{je.yu({environment:i})},shouldShow:()=>(0,Ye.jp)(i.device)&&z.state.query.text.split(" ").length-1>=2&&z.state.query.text.length>6}].filter((e=>e.shouldShow(i)))),[i,s],{useDeepEqual:!0}),T=(0,o.useCallback)((()=>r.update((e=>e.focus.isInitialized&&0===e.focus.section&&0===e.focus.indexLocal&&0===e.focus.indexGlobal?e:{...e,focus:k.length>0?{section:1,indexLocal:0,indexGlobal:k.length}:{section:0,indexLocal:0,indexGlobal:0}}))),[r,k]);return(0,o.useEffect)((()=>{T()}),[_,T]),(0,o.useEffect)((()=>{c.setState(l)}),[c,l]),n()("div",{style:s.container},void 0,n()(ht,{errorState:v,handleSelectResult:d,onMaybeLoadMoreResults:C,resultListStore:r,results:_,debugInfo:g,clusterInfo:p,publicAccessPermission:f,showActions:k}),n()(it,{searchResultStore:t,combinedResults:_,showSpinner:h,shouldShow:!S&&w&&!a.isMobile}))};function vt(){window.__c={n:"GlobalSearchNavigationalView"};const{handleRecentPageSelect:e,searchResultStore:t}=(0,o.useContext)(Nt),{hasQuery:i}=(0,b.VK)((()=>({hasQuery:Boolean(z.state.query.text.trim())||L.VA(z.state.query.filters)})),[]),a={searchResultStore:t};return o.createElement(o.Fragment,null,i?o.createElement(ft,a):n()(Ge,{onSelect:e}))}var yt=i(59054),St=i(63143),bt=i(68120),Mt=i(18245);function wt(e){let{dependencies:t,debugColumnStore:i,localDebounce:a=25,serverDebounce:n=275,searchResultStore:s,localSearchCache:r,permanentFilterOverride:l,enabled:d}=e;const c=(0,X.O7)(),u=(0,b.VK)((()=>function(e){const{debugColumnStore:t}=e;return{shouldSearchLocal:!0,forcedClusterPattern:t.state.forcedClusterPattern,searchExperimentOverrides:t.state.searchExperimentOverrides,forcedBlockIds:t.state.forcedBlockIds}}({isOnline:t.isOnline,debugColumnStore:i})),[t.isOnline,i]),p=(0,o.useMemo)((()=>m.Ds(Ct,n)),[n]);(0,yt.r5)((()=>d?async function(e){const{query:t,openAsPage:i,store:a,fetchServerResultsFn:n}=e;if(i&&m.Xy(t,a.state.selectedQueryResultQuery))return;a.update((e=>({...e,localResults:e.localResults}))),function(e){const{shouldSearchLocal:t,parentStore:i,environment:a,query:n,limit:o,hasPublicAccessPermission:s,isOnline:r,localSearchCache:l,store:d,permanentFilterOverride:c}=e;let u;const p={...n,filters:{...n.filters,...c}};if(t){var g;u=L.b9(function(e){const{parentStore:t,requestInput:i,isOnline:a,environment:n,hasPublicAccessPermission:o,localSearchCache:s}=e,{query:r}=i;if(!s)return;if(!r.text.trim())return;if(o)return;const l=Mt.default.mark("rum.local_quick_search_query"),d=void 0,c=L.Y_({query:i,localCachedPages:s,parentStore:t,environment:n,isOnline:a,shouldLimitLocalResultsWhenOnline:!0,applyScoreThresholdWhenOnline:!0,maxLocalResultsOverride:d});return Mt.default.measure(l,{environment:n}),c}({parentStore:i,environment:a,requestInput:{query:p,limit:o},hasPublicAccessPermission:s,isOnline:r,localSearchCache:l})),m.xb(null===(g=u)||void 0===g?void 0:g.results)&&(0,v.Xx)(d.state)&&d.state.serverResultsLoading?d.update((e=>({...e,clearLocalResultsOnServerResponse:!0}))):d.update((e=>({...e,clearLocalResultsOnServerResponse:!1,localResults:u})))}}(e),await n(e)}({...t,...u,store:s,fetchServerResultsFn:p,environment:c,localSearchCache:r,permanentFilterOverride:l}):Promise.resolve()),[t,u,s,p,c,r,l,d],{debounce:a})}async function Ct(e){let{parentStore:t,environment:i,query:a,isOnline:n,publicAccessPermissionAncestorBlockId:o,currentSpaceStore:s,searchSessionId:r,searchExperimentOverrides:l,forcedClusterPattern:d,recentPagesForBoosting:c,store:u,forcedBlockIds:p,limit:g,permanentFilterOverride:h}=e;const f={query:{...a,filters:{...a.filters,...h}},limit:g};u.update((e=>({...e,serverResultsLoading:!0})));const v=u.state.serverResults,y=await async function(e){const{parentStore:t,requestInput:i,isOnline:a,environment:n,publicAccessPermissionAncestorBlockId:o,searchSessionId:s,source:r,spaceId:l,searchExperimentOverrides:d,forcedClusterPattern:c,recentPagesForBoosting:u,forcedBlockIds:m}=e,{query:p}=i;if(!p.text.trim()&&!L.FN(p.filters))return;if(!a)return{error:V.Ix.Offline};const g=Mt.default.mark("rum.server_quick_search_query"),h=await L.MS({environment:n,input:i,spaceId:l,publicAccessPermissionAncestorBlockId:o,searchSessionId:s,source:r,searchExperimentOverrides:d,forcedClusterPattern:c,recentPagesForBoosting:"on"===(null==d?void 0:d["search-debug-only-no-recent-boosting"])?[]:u,forcedBlockIds:m});if(!h)return;if("failed"===h.type)return h.offline?{error:V.Ix.Offline}:{error:V.Ix.RequestFailed};const f=h.data.trackEventProperties,v=(0,bt.Qr)(f)?{}:(0,St.m8)((0,G.Yd)(f).map((e=>[`server-${e}`,f[e]]))),y=h.data.results.map(((e,i)=>({...e,serverEventProperties:v,originalPosition:i,store:Te.G.createChildStore(t,{table:ce.iU,id:e.id})})));return Mt.default.measure(g,{environment:n}),{value:{results:y,total:h.data.total,debugInfo:h.data.debug,serverEventProperties:v,clusterInfo:h.data.clusterInfo}}}({parentStore:t,environment:i,requestInput:f,spaceId:null==s?void 0:s.id,searchSessionId:r,publicAccessPermissionAncestorBlockId:o,isOnline:n,source:void 0,searchExperimentOverrides:l,forcedClusterPattern:d,recentPagesForBoosting:c,forcedBlockIds:p}),S={query:{...z.state.query,filters:{...z.state.query.filters,...h}},limit:z.state.limit};if(!m.Xy(f,S))return;const b=L.b9(y),M=v?L.Nu({existingResults:v,newPageResults:b}):b;if(y&&!y.error){const e=y.value.results;u.update((t=>({...t,serverError:null==y?void 0:y.error,serverResultsLoading:!1,serverResults:M,serverResultsAllLoaded:e.length<g,serverEventProperties:y.value.serverEventProperties,localResults:t.clearLocalResultsOnServerResponse?void 0:t.localResults,clearLocalResultsOnServerResponse:!1})))}else u.update((e=>({...e,serverError:null==y?void 0:y.error,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0,localResults:e.clearLocalResultsOnServerResponse?void 0:e.localResults,clearLocalResultsOnServerResponse:!1})))}function _t(){const e=(0,X.O7)(),{searchResultStore:t,secondarySearchResultStore:i}=(0,o.useContext)(Nt),{parentStore:a}=(0,o.useContext)(Ot),n=function(e){const t=(0,X.O7)();return(0,b.VK)((()=>{const{hasPublicAccessPermission:i,publicAccessPermissionAncestorBlockId:a}=L.bC(t);return{isOnline:Boolean(I.Z.state.online),limit:z.state.limit,parentStore:e,hasPublicAccessPermission:i,publicAccessPermissionAncestorBlockId:a,currentSpaceStore:O.default.state.currentSpaceStore,debug:void 0,openAsPage:!1,recentPagesForBoosting:[],searchSessionId:void 0,searchMode:"default",currentSpaceViewStore:O.default.state.currentSpaceViewStore,query:z.state.query}}),[t,e])}(a),[{value:s}]=(0,yt.r5)((()=>n.hasPublicAccessPermission?Promise.resolve(void 0):n.currentSpaceStore?L.hb({environment:e,currentSpaceStore:n.currentSpaceStore,currentSpaceViewStore:n.currentSpaceViewStore,excludeCurrentPage:!0}):Promise.resolve(void 0)),[e,n.currentSpaceStore,n.currentSpaceViewStore,n.hasPublicAccessPermission]);wt({dependencies:n,searchResultStore:t,localSearchCache:s,debugColumnStore:et.v_,enabled:!0}),wt({dependencies:n,searchResultStore:i,localSearchCache:s,debugColumnStore:et.BJ,enabled:!1})}function kt(e){return window.__c={n:"GlobalSearchContentPane"},_t(),n()(C.Z,{capture:!0,ignoreBlockSelection:!0,focusOffscreenInput:!1,restoreSelection:!0,render:()=>n()(w.Z,{capture:!0,allowMenuList:!0,render:t=>o.createElement(Tt,S()({},e,{ignoreAreaEvents:t}))})})}function Tt(e){window.__c={n:"GlobalSearchContentPaneInner"};const{ignoreAreaEvents:t}=e,{handleQueryChange:i,searchResultStore:a,globalFocusedIndex:s}=(0,o.useContext)(Nt),r=(0,M.yK)((e=>({body:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},topbar:{height:void 0,marginTop:10,marginLeft:16,marginBottom:10,marginRight:16},topbarButton:{fontWeight:void 0,padding:0,color:e.mediumTextColor},scroller:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",maxHeight:"100vh"},clearButton:{color:e.lightTextColor}})),[]),[l,d]=(0,o.useState)(!1),{shouldShowSpinner:c}=(0,b.VK)((()=>({shouldShowSpinner:Boolean(I.Z.state.online)&&Boolean(z.state.query.text)&&a.state.serverResultsLoading&&!l,hasQuery:Boolean(z.state.query.text.trim())})),[l,a]),u=(0,T.zY)(),m=(0,o.useMemo)((()=>n()(H,{isOpen:!0,onTypingChange:d,showSpinner:c,onQueryChange:i,searchResultStore:a,focusedIndexStore:s,window:u})),[c,u,i,a,s]),p=(0,o.useMemo)((()=>({menuType:k.og.Popup,maxHeight:"100%",maxWidth:"100%",minHeight:50,disableScroller:!0,scrollerStyle:r.scroller,...t})),[r,t]);return o.createElement(_.Z,S()({},p,{className:h.Oau}),n()("div",{style:r.body},void 0,m,n()(vt,{})))}var It=i(62134),Pt=i(45023),xt=i(22294);function Zt(e){window.__c={n:"GlobalSearchKeyboardShortcutStackListener"};const t=(0,T.zY)(),i=(0,X.O7)(),a=(0,o.useCallback)((e=>{It.Zm(i,e)}),[i]),n=(0,o.useCallback)((e=>{const{shortcutMap:t}=i.KeyboardShortcutStackStore,a=m.w_(t,((t,a)=>(0,Pt.Z)(i,e,t)));if(a&&!{cut:!0,copy:!0,paste:!0}[a]){if("esc"===a)return void p.closeGlobalSearchModal();It.dJ(i,e,a)}}),[i]),s=(0,o.useCallback)((()=>{xt.Z.setKeyboardMode(!1)}),[]);return(0,o.useEffect)((()=>t?(t.addEventListener("mousemove",s),t.addEventListener("keydown",n),t.addEventListener("cut",a),t.addEventListener("copy",a),t.addEventListener("paste",a),t.addEventListener("keypress",a),()=>{t.addEventListener("mousemove",s),t.removeEventListener("keydown",n),t.removeEventListener("cut",a),t.removeEventListener("copy",a),t.removeEventListener("paste",a),t.removeEventListener("keypress",a)}):()=>{}),[s,n,a,t]),null}var Ft=i(23078),At=i.n(Ft),Et=i(58710),Bt=i(27186);const Rt={};function Dt(e){window.__c={n:"ChildWindow"};const t=e.name.startsWith("Notion")?e.name:`Notion - ${e.name}`,[i,a]=(0,o.useState)(!0),[s,r]=(0,o.useState)({id:Et.sI.length++});function l(){const e=Et.r1.get(s);Et.Ni(e)}(0,o.useEffect)((()=>(Et.sI.push(s),()=>{Et.sI.splice(Et.sI.indexOf(s),1)})),[s]);const d=e.features||Rt,c=!1===e.draggableTop?null:n()("div",{style:{width:"100vw",height:"20px",appRegion:"drag"}});return n()(At(),{onOpen:function(t){Et.r1.set(s,t),e.onOpen&&e.onOpen(t),t.addEventListener("focus",l),t.addEventListener("mousemove",Bt.Js),t.addEventListener("mousedown",Bt.HY)},onUnload:function(){e.onUnload&&e.onUnload(),a(!1);const t=Et.r1.get(s);null==t||t.removeEventListener("focus",l),null==t||t.removeEventListener("mousemove",Bt.Js),null==t||t.removeEventListener("mousedown",Bt.HY),Et.Jj()===t&&Et.Ni(void 0),Et.r1.delete(s)},features:d,copyStyles:e.copyStyles,name:t,title:t},void 0,c,n()("div",{style:c?{marginTop:20}:void 0},void 0,i&&e.children))}function Lt(e){window.__c={n:"GlobalSearchWindow"};const[t,i]=(0,o.useState)(void 0);return n()(Dt,{name:"Notion Global Search Modal",onOpen:e=>{i(e)},draggableTop:!1,features:{show:!1,type:"panel",frame:!1,alwaysOnTop:!0}},void 0,n()(T.oB.Provider,{value:t},void 0,e.children))}const Nt=o.createContext(null),Ot=o.createContext(null);class Vt extends s.Z{constructor(){super(...arguments),this.searchResultStore=new v.ZP,this.secondarySearchResultStore=new v.ZP,this.globalFocusedIndex=l.default.createValue(0),this.getStaticContext=m.HP((()=>({handleSelectResult:this.handleQueryResultSelect,handleRecentPageSelect:this.handleRecentPageSelect,handleQueryChange:this.handleQueryChange,searchResultStore:this.searchResultStore,secondarySearchResultStore:this.secondarySearchResultStore,globalFocusedIndex:this.globalFocusedIndex}))),this.getStoresContext=m.HP((e=>({parentStore:e}))),this.handleRecentPageSelect=e=>{this.handleSelectResult({...e,context:"recent_pages"})},this.handleQueryResultSelect=e=>{this.handleSelectResult({...e,context:"query_results"})},this.handleSelectResult=e=>{let{context:t,selectedResult:i,store:a}=e;"query_results"===t&&this.searchResultStore.update((e=>({...e,selectedQueryResultQuery:z.state.query})));const n=(0,u.Z)({pageModel:a.getModel(),pageId:a.id,baseUrl:g.default.domainBaseUrl,pageVisitSource:d.tY.SearchQuery});p.openPageFromGlobalSearch(n),p.closeGlobalSearchModal()},this.handleQueryChange=e=>{""!==e?z.updateQueryText(e):z.resetQuery()}}renderComponent(){const e=Boolean(f.Z.state.isGlobalSearchHost),t="light"===this.theme.mode?h.MsS:h.Xj_;return e?n()(Lt,{},void 0,n()(Zt,{}),n()(Nt.Provider,{value:this.getStaticContext()},void 0,n()(Ot.Provider,{value:this.getStoresContext(this.props.parentStore)},void 0,n()("div",{style:this.getStyle(),className:["notion-app-inner",t].join(" ")},void 0,n()(kt,{onClose:()=>{}}))))):null}getStyle(){return{...(0,c.ZP)(r.SP),color:this.theme.regularTextColor,WebkitFontSmoothing:"auto",backgroundColor:this.theme.contentBackground}}}Vt.displayName="Search";const Ut=Vt},14568:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(35431);class n extends a.Z{}const o=new n},31075:(e,t,i)=>{i.d(t,{i:()=>g});var a=i(23174),n=i.n(a),o=(i(21703),i(67294),i(26825)),s=i(5366),r=i(50906),l=i(47307),d=i(76464),c=i(39699),u=i(64369),m=i(18878),p=i(18245);async function g(e){const{oldPermissionItem:t,newPermissionItem:i,wasInherited:a,environment:g,store:h,sudoModeStore:f,restrictingVisibility:v,fromPermissionWrapper:y}=e;if(!(0,o.Kf)(t,i))throw new Error("Permission type mismatch.");const S=!!f&&f.shouldSaveTransactionWithSudoMode(h),b=(0,o.nl)(t.role,i.role);if(a&&b!==i.role||v)return void(await async function(e){const{environment:t,useSudoMode:i,store:a,permissionItem:o,fromPermissionWrapper:r}=e,p="none"===o.role?{type:"remove",permissionItem:o}:{type:"restrict"},g="user_permission"===o.type&&o.user_id===t.currentUser.id;(g||await l.confirmUserAction({message:(0,m.mX)(p),acceptLabel:(0,m.nH)(p),cancelLabel:n()(s.FormattedMessage,{id:"restrictedPermissionConfirmationModal.actionButton.cancel",defaultMessage:"Close"}),description:n()(u.Z,{isSmall:!0,isMultiline:!0},void 0,n()(s.FormattedMessage,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."}))}))&&c.createAndCommit({userAction:"PermissionItem.onAccept",environment:t,useSudoMode:i,perform:e=>{d.Pk({environment:t,store:a,permissionItem:o,shouldInherit:!0,transaction:e,fromPermissionWrapper:r})}})}({environment:g,useSudoMode:S,store:h,permissionItem:i,fromPermissionWrapper:y}));!h.isTopLevel()&&t.role!==i.role&&b!==t.role&&r.SMF(g),c.createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:g,useSudoMode:S,perform:t=>{const a=p.default.mark("share_menu.update_page_permission_lag");d.ep({environment:g,store:h,permissionItems:[i],transaction:t,pagePermissionChangeLocation:e.location,metric:a,fromPermissionWrapper:y})}})}},13630:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{count:0}}}const o=new n},22756:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{isModalOpen:!1,currentTab:"selectData",account:void 0,isAccountLinkingInProgress:!1,isAccountDelinkingInProgress:!1,workspaces:[],teamsAndProjects:[],selectedWorkspace:void 0,selectedProjectsAndTeamspaces:{},importCompletedTasks:!0,teams:void 0,loadMoreClicks:0,isLoadingProjects:!1,isLoadingAsanaWorkspaces:!1,result:void 0,isComplete:!1,loggerPageId:void 0,templateCreationInProgress:!1,isFetchingAsanaAccount:!1}}resetImport(){const{account:e,workspaces:t}=this.getState();this.setState({...this.getInitialState(),account:e,workspaces:t})}}const o=new n},74021:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{open:!1}}}const o=new n},17549:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{open:!1}}}const o=new n},85680:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{isOpen:!1}}}const o=new n},45214:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{open:!1}}}const o=new n},71071:(e,t,i)=>{i.d(t,{Sw:()=>s,ZP:()=>d,jR:()=>r});var a=i(13991),n=i(49085);const o=["en","en-us","en-ca"];function s(e){return"pdf"===e.exportOptions.exportType}function r(){return o.includes(a.SP.toLowerCase())?"Letter":"A4"}class l extends n.default{getInitialState(){return{open:!1}}}const d=new l},5188:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{open:!1}}}const o=new n},78900:(e,t,i)=>{i.d(t,{Z:()=>a});const a=new(i(61766).Z)},49900:(e,t,i)=>{i.d(t,{d:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{open:!1}}}const o=new n},25399:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{open:!1}}}const o=new n},2342:(e,t,i)=>{i.d(t,{Xx:()=>l,ZP:()=>c});var a=i(49085),n=i(92338),o=i(62965),s=i(29026);class r extends a.default{getInitialState(){return{insertedActionResultsCount:0,localResults:void 0,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0,serverResultsAllLoaded:!1,errorState:d,selectedQueryResultQuery:void 0}}setState(e){const t={...this.instanceState};if(!(0,o.Z)(this.instanceState,t))return;const i=function(e){const{newState:t,priorState:i}=e,{localResults:a,serverError:o,serverResultsLoading:s,serverResults:r}=t,l=Boolean(a),d=s?void 0:o;if(!l&&s)return!i.errorState.isLoading&&i.errorState.showMajorError?i.errorState:{isLoading:s};if(l)return{hasLocalResults:l,serverError:d,isLoading:!1,showMajorError:!1};if(d)return{hasLocalResults:l,serverError:d,isLoading:!1,showMajorError:!0};if(0===(null==r?void 0:r.results.length))return{hasLocalResults:l,serverError:n.Ix.NoResults,isLoading:!1,showMajorError:!0};return{hasLocalResults:l,serverError:d,isLoading:!1,showMajorError:!1}}({newState:e,priorState:t});super.setState({...e,errorState:i})}getResultCount(){const{serverResults:e,localResults:t}=this.state,i=(null==e?void 0:e.total)??(null==t?void 0:t.total)??0,a=Boolean(e&&i>=100);return{count:i,isLowerBound:Boolean(e&&t&&i<s.Xv)||a}}}function l(e){const t=Boolean(e.localResults),i=Boolean(e.serverResults)&&!e.serverResultsLoading;return t||i||!1}const d={showMajorError:!1,isLoading:!1,hasLocalResults:!1,serverError:void 0};const c=r},54983:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(49085);class n extends a.default{getInitialState(){return{}}}const o=n},83176:(e,t,i)=>{i.d(t,{z:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("analyticsSearch",{viewBox:"0 0 51 52",svg:n()("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},88145:(e,t,i)=>{i.d(t,{E:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("appDownload",{viewBox:"0 0 23 16",svg:n()("path",{clipRule:"evenodd",d:"m23 11.4338c0 2.5317-2.1591 4.5662-4.922 4.5662h-12.59789c-3.12888 0-5.48011-2.2739-5.48011-4.9804 0-2.2463 1.28998-4.10591 3.3576-4.43732.04574-2.57768 2.49761-4.2992 4.74821-3.63637 1.09785-1.61104 2.86359-2.94591 5.34289-2.94591 3.7418 0 6.6786 2.96433 6.6603 7.0702 1.784.75489 2.891 2.43038 2.891 4.3636zm-17.51989 3.084h12.59789c1.9487 0 3.449-1.3717 3.449-3.084 0-1.66625-1.0704-2.89065-2.7354-3.25889-.1098-.02761-.1556-.09206-.1464-.21173.0366-.43269.064-.92981.0366-1.35328-.1555-2.73418-2.2323-5.12774-5.2331-5.12774-2.3695 0-3.73271 1.30725-4.62014 2.89989-.05489.10126-.11893.12888-.22872.09206-1.8755-.6168-3.90652.22094-3.90652 3.05638 0 .11968-.04575.18412-.17383.18412-1.93954 0-3.04654 1.46376-3.04654 3.30499 0 1.878 1.70167 3.4982 4.00716 3.4982zm7.19089-9.49502c0-.39047-.3145-.70701-.7026-.70701-.388 0-.7026.31654-.7026.70701v4.89196l-1.61105-1.62112c-.27439-.27611-.71927-.27611-.99366 0-.2744.27611-.2744.72377 0 .99987l2.81051 2.82811c.2744.2761.7193.2761.9936 0l2.8106-2.82811c.2743-.2761.2743-.72376 0-.99987-.2744-.27611-.7193-.27611-.9937 0l-1.6111 1.62112z",fillRule:"evenodd"})})},92165:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("arrowsDiverging",{viewBox:"0 0 12 12",svg:n()("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},82114:(e,t,i)=>{i.d(t,{Q:()=>s,p:()=>r});var a=i(23174),n=i.n(a),o=(i(67294),i(45238));const s=n()("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"}),r=(0,o.I)("at",{viewBox:"0 0 16 16",svg:s})},67220:(e,t,i)=>{i.d(t,{S:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("bot",{viewBox:"0 0 16 16",svg:n()("path",{d:"M7.996 16C12.381 16 16 12.38 16 8s-3.627-8-8.012-8C3.611 0 0 3.62 0 8s3.62 8 7.996 8zm0-1.594A6.375 6.375 0 011.61 8a6.366 6.366 0 016.38-6.398A6.393 6.393 0 0114.398 8a6.383 6.383 0 01-6.403 6.406zM4.648 8.518c0 .21.17.364.386.364h2.53l-1.346 3.605c-.202.527.355.813.703.395l4.168-5.176a.515.515 0 00.132-.325c0-.209-.17-.356-.379-.356H8.305l1.346-3.613c.201-.518-.356-.812-.704-.395l-4.16 5.184a.484.484 0 00-.14.317z"})})},93108:(e,t,i)=>{i.d(t,{p:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("contentSearch",{viewBox:"0 0 16 16",svg:n()("path",{d:"M0.25293 5.82031C0.25293 8.88965 2.74805 11.3848 5.81738 11.3848C6.95898 11.3848 8.00488 11.0361 8.87988 10.4414L12.0244 13.5859C12.2158 13.7842 12.4824 13.873 12.749 13.873C13.3301 13.873 13.7471 13.4355 13.7471 12.8682C13.7471 12.5947 13.6514 12.3418 13.4668 12.1504L10.3428 9.01953C10.9922 8.12402 11.3818 7.0166 11.3818 5.82031C11.3818 2.75098 8.88672 0.255859 5.81738 0.255859C2.74805 0.255859 0.25293 2.75098 0.25293 5.82031ZM1.70215 5.82031C1.70215 3.55078 3.54102 1.70508 5.81738 1.70508C8.08691 1.70508 9.93262 3.55078 9.93262 5.82031C9.93262 8.08984 8.08691 9.93555 5.81738 9.93555C3.54102 9.93555 1.70215 8.08984 1.70215 5.82031Z"})})},77366:(e,t,i)=>{i.d(t,{F:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("customizePage",{viewBox:"0 0 16 16",svg:n()("path",{d:"M10.5361 5.54883C11.2744 5.54883 11.9033 5.09082 12.1631 4.44141H14.4258C14.7607 4.44141 15.0479 4.14746 15.0479 3.79199C15.0479 3.43652 14.7676 3.14258 14.4258 3.14258H12.1699C11.9102 2.49316 11.2744 2.03516 10.5361 2.03516C9.79785 2.03516 9.16211 2.49316 8.90234 3.14258H1.59473C1.23242 3.14258 0.952148 3.43652 0.952148 3.79199C0.952148 4.14746 1.23926 4.44141 1.59473 4.44141H8.90234C9.16211 5.09082 9.79785 5.54883 10.5361 5.54883ZM10.5361 4.62598C10.0713 4.62598 9.69531 4.25684 9.69531 3.79199C9.69531 3.31348 10.0713 2.95117 10.5361 2.95117C11.0078 2.95117 11.3701 3.31348 11.3701 3.79199C11.3701 4.25684 11.0078 4.62598 10.5361 4.62598ZM1.56738 7.40137C1.23242 7.40137 0.952148 7.68848 0.952148 8.05078C0.952148 8.39941 1.23926 8.69336 1.56738 8.69336H3.91211C4.16504 9.34277 4.80078 9.80762 5.5459 9.80762C6.27734 9.80762 6.91309 9.34277 7.17285 8.69336H14.4053C14.7607 8.69336 15.0479 8.40625 15.0479 8.05078C15.0479 7.68848 14.7676 7.40137 14.4053 7.40137H7.17285C6.91309 6.75195 6.27734 6.29395 5.5459 6.29395C4.80762 6.29395 4.17188 6.75195 3.91211 7.40137H1.56738ZM5.5459 8.88477C5.07422 8.88477 4.70508 8.51562 4.70508 8.05078C4.70508 7.57227 5.07422 7.20996 5.5459 7.20996C6.01758 7.20996 6.37988 7.57227 6.37988 8.05078C6.37988 8.51562 6.01758 8.88477 5.5459 8.88477ZM10.5361 14.0596C11.2744 14.0596 11.9102 13.6016 12.1699 12.9521H14.4258C14.7607 12.9521 15.0479 12.6582 15.0479 12.3027C15.0479 11.9404 14.7676 11.6533 14.4258 11.6533H12.1631C11.9102 11.0039 11.2744 10.5459 10.5361 10.5459C9.79785 10.5459 9.16211 11.0039 8.90234 11.6533H1.59473C1.23242 11.6533 0.952148 11.9473 0.952148 12.3027C0.952148 12.6582 1.23926 12.9521 1.59473 12.9521H8.90234C9.16211 13.6016 9.79785 14.0596 10.5361 14.0596ZM10.5361 13.1436C10.0713 13.1436 9.69531 12.7676 9.69531 12.3027C9.69531 11.8311 10.0713 11.4619 10.5361 11.4619C11.0078 11.4619 11.3701 11.8311 11.3701 12.3027C11.3701 12.7676 11.0078 13.1436 10.5361 13.1436Z"})})},50780:(e,t,i)=>{i.d(t,{E:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("editPropertyType",{viewBox:"0 0 16 16 ",svg:n()("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},81570:(e,t,i)=>{i.d(t,{T:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("giftOutline",{viewBox:"0 0 32 34",svg:n()("path",{d:"M7.781 33.219h16.422c2.938 0 4.563-1.547 4.563-4.5v-9.594h.109c1.375-.297 2.14-1.406 2.14-3v-4.11c0-1.906-1.062-3.109-2.968-3.109H24.89c.828-.828 1.312-1.953 1.312-3.25 0-3.031-2.39-5.187-5.422-5.187-2.187 0-4 1.203-4.797 3.297C15.187 1.672 13.39.469 11.187.469c-3.016 0-5.422 2.156-5.422 5.187 0 1.297.484 2.422 1.328 3.25H3.937C2.11 8.906.97 10.11.97 12.016v4.109c0 1.594.75 2.703 2.125 3h.11v9.594c0 2.953 1.624 4.5 4.577 4.5zm6.922-24.313h-2.437c-2.454 0-3.891-1.39-3.891-3.11 0-1.718 1.25-2.718 2.969-2.718 1.86 0 3.36 1.406 3.36 3.719v2.11zm2.563 0v-2.11c0-2.312 1.5-3.718 3.359-3.718 1.719 0 2.969 1 2.969 2.719 0 1.719-1.422 3.11-3.89 3.11h-2.438zm-2.672 7.969H4.578c-.781 0-1.094-.328-1.094-1.11V12.36c0-.78.313-1.093 1.094-1.093h10.016v5.609zm2.781 0v-5.61h10.047c.781 0 1.078.313 1.078 1.094v3.407c0 .78-.297 1.109-1.078 1.109H17.375zm-2.781 14H7.75c-1.297 0-2.031-.734-2.031-2.031v-9.61h8.875v11.641zm2.781 0v-11.64h8.875v9.609c0 1.297-.734 2.031-2.031 2.031h-6.844z"})})},80920:(e,t,i)=>{i.d(t,{X:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("integrationSecurity",{viewBox:"0 0 16 16",svg:n()("path",{d:"M7.996 16c.152 0 .37-.056.59-.16C13.407 13.481 15 12.242 15 9.38V3.421c0-.927-.38-1.263-1.205-1.59-.919-.36-4.03-1.408-4.931-1.696A3.17 3.17 0 0 0 7.996 0c-.278 0-.59.064-.86.136-.91.272-4.012 1.335-4.93 1.695C1.378 2.151 1 2.495 1 3.422V9.38c0 2.863 1.66 3.99 6.414 6.461.22.112.439.16.582.16Zm-.936-4.398c-.32 0-.573-.128-.817-.424L4.178 8.796a.86.86 0 0 1-.228-.568c0-.408.346-.744.775-.744.262 0 .464.096.683.352l1.627 1.96 3.481-5.294c.185-.272.421-.416.683-.416.421 0 .809.28.809.696 0 .184-.101.383-.22.56l-3.952 5.836a.915.915 0 0 1-.776.424Z"})})},66466:(e,t,i)=>{i.d(t,{S:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("logout",{viewBox:"0 0 30 30",svg:n()("path",{d:"M17,24l9-9l-9-9l-1.406,1.406L22.188,14H8v2h14.188l-6.594,6.594L17,24z M6,4h16V2H4v26h18v-2H6V4z"})})},3556:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("mail",{viewBox:"0 0 30 30",svg:n()("path",{d:"M0,4v22h30V4H0z M17.591,16.33C16.137,17.753,15.819,18,15,18s-1.137-0.247-2.555-1.635L2,6h26L17.591,16.33z M2,8.814 l7.17,7.119L2,21.8V8.814z M2.445,24l8.141-6.661L11,17.75c1.438,1.406,2.281,2.25,4,2.25s2.563-0.844,4-2.25l0.414-0.411L27.555,24 H2.445z M28,21.8l-7.17-5.867L28,8.814V21.8z"})})},22962:(e,t,i)=>{i.d(t,{O:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("mention",{viewBox:"0 0 20 20",svg:n()("path",{d:"M1 9.86523C1 15.2939 4.72705 18.6807 9.98975 18.6807C11.3511 18.6807 12.4634 18.5312 13.1606 18.2905C13.6919 18.1079 13.8828 17.8174 13.8828 17.4521C13.8828 17.0537 13.6089 16.7715 13.1523 16.7715C13.0195 16.7715 12.8784 16.7881 12.6958 16.8213C11.9238 16.9873 11.2266 17.1118 10.2637 17.1118C5.74805 17.1118 2.74316 14.4058 2.74316 9.91504C2.74316 5.56543 5.61523 2.56055 9.88184 2.56055C13.7417 2.56055 16.7383 4.97607 16.7383 9.11816C16.7383 11.3511 15.9995 12.8452 14.8125 12.8452C14.0239 12.8452 13.5757 12.3472 13.5757 11.4839V6.44531C13.5757 5.84766 13.252 5.49072 12.6709 5.49072C12.0981 5.49072 11.7578 5.84766 11.7578 6.44531V7.10107H11.6333C11.21 6.09668 10.2305 5.49072 9.01855 5.49072C6.90186 5.49072 5.43262 7.28369 5.43262 9.89844C5.43262 12.5547 6.91846 14.3892 9.11816 14.3892C10.3799 14.3892 11.3013 13.7417 11.7578 12.6045H11.8823C12.1147 13.7168 13.0942 14.3809 14.4307 14.3809C16.8877 14.3809 18.3984 12.1895 18.3984 8.96045C18.3984 4.1626 14.8706 1 9.89014 1C4.66064 1 1 4.56104 1 9.86523ZM9.5415 12.7207C8.26318 12.7207 7.46631 11.6499 7.46631 9.92334C7.46631 8.21338 8.27148 7.14258 9.5498 7.14258C10.8364 7.14258 11.6582 8.20508 11.6582 9.89844C11.6582 11.625 10.8281 12.7207 9.5415 12.7207Z"})})},80342:(e,t,i)=>{i.d(t,{$:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("minus",{viewBox:"0 0 16 16",svg:n()("path",{d:"M3.037 8.844h9.92a.705.705 0 00.368-.103.825.825 0 00.28-.28.73.73 0 000-.773.752.752 0 00-.28-.28.705.705 0 00-.369-.102H3.037a.705.705 0 00-.369.102.824.824 0 00-.28.28.73.73 0 000 .772.914.914 0 00.28.281.705.705 0 00.37.103z"})})},4635:(e,t,i)=>{i.d(t,{W:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("options",{viewBox:"0 0 17 15",svg:n()("path",{d:"M11.2871 4.48438C12.1309 4.48438 12.8574 3.95312 13.1621 3.21875H15.7324C16.123 3.21875 16.4512 2.875 16.4512 2.46094C16.4512 2.04688 16.123 1.71094 15.7324 1.71094H13.1621C12.8652 0.96875 12.1387 0.4375 11.2871 0.4375C10.4355 0.4375 9.70898 0.96875 9.41211 1.71094H1.04492C0.630859 1.71094 0.302734 2.04688 0.302734 2.46094C0.302734 2.875 0.630859 3.21875 1.04492 3.21875H9.41211C9.7168 3.95312 10.4434 4.48438 11.2871 4.48438ZM11.2871 3.42188C10.748 3.42188 10.3262 2.99219 10.3262 2.46094C10.3262 1.91406 10.748 1.49219 11.2871 1.49219C11.834 1.49219 12.248 1.91406 12.248 2.46094C12.248 2.99219 11.834 3.42188 11.2871 3.42188ZM1.02148 6.58594C0.630859 6.58594 0.302734 6.92188 0.302734 7.33594C0.302734 7.74219 0.630859 8.08594 1.02148 8.08594H3.67773C3.98242 8.83594 4.70898 9.35938 5.56055 9.35938C6.4043 9.35938 7.13086 8.83594 7.43555 8.08594H15.709C16.123 8.08594 16.4512 7.75 16.4512 7.33594C16.4512 6.92188 16.123 6.58594 15.709 6.58594H7.43555C7.13086 5.84375 6.4043 5.32031 5.56055 5.32031C4.70898 5.32031 3.98242 5.84375 3.67773 6.58594H1.02148ZM5.56055 8.30469C5.02148 8.30469 4.5918 7.875 4.5918 7.33594C4.5918 6.78906 5.02148 6.375 5.56055 6.375C6.09961 6.375 6.52148 6.78906 6.52148 7.33594C6.52148 7.875 6.09961 8.30469 5.56055 8.30469ZM11.2871 14.2344C12.1387 14.2344 12.8652 13.7031 13.1621 12.9609H15.7324C16.123 12.9609 16.4512 12.625 16.4512 12.2109C16.4512 11.7891 16.123 11.4609 15.7324 11.4609H13.1621C12.8652 10.7188 12.1387 10.1875 11.2871 10.1875C10.4434 10.1875 9.70898 10.7188 9.41211 11.4609H1.04492C0.630859 11.4609 0.302734 11.7969 0.302734 12.2109C0.302734 12.6172 0.630859 12.9609 1.04492 12.9609H9.41211C9.70898 13.7031 10.4355 14.2344 11.2871 14.2344ZM11.2871 13.1719C10.748 13.1719 10.3262 12.7422 10.3262 12.2109C10.3262 11.6641 10.748 11.25 11.2871 11.25C11.834 11.25 12.248 11.6641 12.248 12.2109C12.248 12.7422 11.834 13.1719 11.2871 13.1719Z"})})},36329:(e,t,i)=>{i.d(t,{_:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("personBadgeExclamationMark",{viewBox:"0 0 24 22",svg:n()("path",{d:"M14 20.91c1.36 0 2.64-.26 3.838-.781a10.166 10.166 0 003.183-2.158 10.198 10.198 0 002.159-3.174 9.59 9.59 0 00.78-3.848c0-1.36-.263-2.64-.79-3.838a10.165 10.165 0 00-2.158-3.183 10.165 10.165 0 00-3.184-2.158A9.52 9.52 0 0013.99.988c-1.27 0-2.47.228-3.603.684A10.24 10.24 0 007.34 3.566 10.179 10.179 0 005.152 6.39a9.75 9.75 0 00-1.045 3.466c.235-.045.508-.074.82-.087.32-.02.61-.013.87.02.137-1.01.44-1.948.908-2.813A8.088 8.088 0 018.512 4.7a8.261 8.261 0 012.5-1.504 8.095 8.095 0 012.978-.547c1.153 0 2.23.215 3.233.645a8.233 8.233 0 012.646 1.777 8.365 8.365 0 011.787 2.647 8.11 8.11 0 01.645 3.232 8.15 8.15 0 01-2.139 5.557c-.319-.378-.775-.736-1.367-1.074-.593-.345-1.296-.625-2.11-.84-.813-.215-1.712-.322-2.695-.322-.469 0-.918.029-1.347.087-.43.053-.837.124-1.221.215.117.469.176.96.176 1.475 0 .762-.134 1.488-.4 2.178a6.308 6.308 0 01-1.095 1.865c.6.26 1.228.462 1.885.605A9.426 9.426 0 0014 20.91zm-.01-8.3a3.02 3.02 0 001.69-.47 3.53 3.53 0 001.21-1.318c.3-.56.45-1.191.45-1.894 0-.658-.15-1.26-.45-1.807a3.55 3.55 0 00-1.21-1.309 3.035 3.035 0 00-1.69-.488c-.625 0-1.191.163-1.699.489a3.622 3.622 0 00-1.65 3.115c0 .696.15 1.321.449 1.875.3.553.7.993 1.201 1.318a3.194 3.194 0 001.7.488zM5.3 21.017c.67 0 1.305-.13 1.904-.391a5.082 5.082 0 001.582-1.074A5 5 0 009.87 17.97c.26-.6.39-1.237.39-1.914 0-.684-.13-1.325-.39-1.924a4.945 4.945 0 00-1.064-1.582 4.946 4.946 0 00-1.582-1.065 4.772 4.772 0 00-1.924-.39c-.677 0-1.315.13-1.914.39a4.87 4.87 0 00-1.582 1.074A5.082 5.082 0 00.73 14.142a4.707 4.707 0 00-.391 1.914c0 .683.13 1.325.39 1.924a5.07 5.07 0 001.075 1.581c.455.456.983.811 1.582 1.065.599.26 1.237.39 1.914.39zm-.01-1.797a.788.788 0 01-.576-.244.768.768 0 01-.244-.577c0-.227.081-.423.244-.585a.788.788 0 01.576-.245c.234 0 .43.085.586.254a.788.788 0 01.244.576.77.77 0 01-.244.577.8.8 0 01-.586.244zm.01-2.325a.601.601 0 01-.43-.156.613.613 0 01-.166-.41l-.078-2.793a.63.63 0 01.176-.488.673.673 0 01.498-.186.66.66 0 01.488.186.63.63 0 01.176.488l-.078 2.793a.592.592 0 01-.176.41.554.554 0 01-.41.157z"})})},50571:(e,t,i)=>{i.d(t,{S:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("personBadgeQuestionMark",{viewBox:"0 0 15 14",svg:n()("path",{d:"M12.4551 5.41699C12.8037 5.41699 13.0088 5.19824 13.0088 4.93164V4.84961C13.0088 4.45996 13.2344 4.2207 13.7061 3.90625C14.3691 3.46875 14.8408 3.07227 14.8408 2.25195C14.8408 1.11719 13.8291 0.501953 12.667 0.501953C11.498 0.501953 10.7256 1.0625 10.5342 1.69141C10.5 1.80078 10.4795 1.91016 10.4795 2.02637C10.4795 2.33398 10.7188 2.49805 10.9443 2.49805C11.1836 2.49805 11.3271 2.38867 11.4502 2.22461L11.5732 2.06055C11.8125 1.66406 12.1748 1.43164 12.626 1.43164C13.248 1.43164 13.6514 1.78711 13.6514 2.30664C13.6514 2.77148 13.3643 2.99707 12.7695 3.41406C12.2773 3.75586 11.915 4.11816 11.915 4.78809V4.87695C11.915 5.23242 12.1064 5.41699 12.4551 5.41699ZM5.79004 6.99609C7.25293 6.99609 8.52441 5.68359 8.52441 3.97461C8.52441 2.28613 7.25293 1.03516 5.79004 1.03516C4.32715 1.03516 3.05566 2.31348 3.05566 3.98828C3.05566 5.68359 4.32031 6.99609 5.79004 6.99609ZM12.4414 7.4541C12.8379 7.4541 13.1797 7.13965 13.1797 6.74316C13.1797 6.34668 12.8447 6.03223 12.4414 6.03223C12.0381 6.03223 11.7031 6.35352 11.7031 6.74316C11.7031 7.13281 12.0449 7.4541 12.4414 7.4541ZM1.20312 13.3262H10.3701C11.1016 13.3262 11.5391 12.9844 11.5391 12.417C11.5391 10.6533 9.33105 8.21973 5.7832 8.21973C2.24219 8.21973 0.0341797 10.6533 0.0341797 12.417C0.0341797 12.9844 0.47168 13.3262 1.20312 13.3262Z"})})},79310:(e,t,i)=>{i.d(t,{A:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("pinStrikethrough",{viewBox:"0 0 15 19",svg:n()("path",{d:"M3.094 1.328c0 .227.094.492.297.758.398.531 1.343 1.266 2.328 1.914l-.055.86 1.149 1.156.156-2.594c.008-.11-.008-.149-.086-.188-1.172-.601-2.078-1.312-2.14-1.468-.063-.102.007-.164.085-.164h6.68c.086 0 .148.062.086.164-.063.156-.961.867-2.14 1.468-.071.04-.087.079-.079.188l.234 3.875a7.12 7.12 0 00-1.437-.14h-.203l1.203 1.226c2.164.219 3.758 1.984 3.758 3.234 0 .04-.008.078-.008.117l.844.97c.257-.157.468-.477.468-.93 0-1.649-1.32-3.313-3.359-4.11L10.617 4c.992-.648 1.93-1.383 2.336-1.914.203-.266.297-.531.297-.758 0-.476-.367-.828-.914-.828H4.008c-.555 0-.914.352-.914.828zM.367 2.656l14.125 14.11a.603.603 0 00.852 0 .597.597 0 000-.852L1.227 1.804a.606.606 0 00-.86 0 .618.618 0 000 .852zm1.735 9.117c0 .665.445 1.102 1.148 1.102h4.234v3.648c0 1.196.493 2.188.688 2.188.195 0 .687-.992.687-2.188V12.97h.446L8.03 11.695H3.562c-.171 0-.257-.101-.226-.312.094-.875.828-1.805 1.984-2.399l-.82-.82c-1.477.867-2.398 2.234-2.398 3.61z"})})},91192:(e,t,i)=>{i.d(t,{x:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("privateTeam",{viewBox:"0 0 28 28",svg:n()("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},90028:(e,t,i)=>{i.d(t,{j:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("searchInPage",{viewBox:"0 0 12 14",svg:n()("path",{d:"M2.877 13.365h6.24c.63 0 1.104-.164 1.424-.492.32-.324.48-.8.48-1.43V6.13c0-.274-.015-.504-.046-.691a1.531 1.531 0 00-.182-.522 2.185 2.185 0 00-.387-.498l-3.07-3.123a2.11 2.11 0 00-.48-.38 1.528 1.528 0 00-.51-.183A3.464 3.464 0 005.7.68H2.877c-.629 0-1.104.164-1.424.492-.32.324-.48.8-.48 1.43v8.841c0 .633.16 1.112.48 1.436.32.324.795.486 1.424.486zm.094-1.154c-.282 0-.492-.072-.633-.217-.14-.144-.211-.351-.211-.621V2.678c0-.27.07-.479.21-.627.142-.149.354-.223.64-.223h2.496V5.04c0 .418.101.73.304.938.207.207.52.31.938.31h3.158v5.086c0 .27-.07.477-.21.621-.142.145-.354.217-.64.217H2.971zm3.855-6.938c-.12 0-.209-.027-.263-.082-.051-.054-.077-.142-.077-.263V1.986l3.229 3.287H6.826z"})})},83065:(e,t,i)=>{i.d(t,{_:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("sendArrow",{viewBox:"0 0 20 20",svg:n()("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},87393:(e,t,i)=>{i.d(t,{L:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("settingsIntegration",{viewBox:"0 0 20 20",svg:n()("path",{d:"M4.633 9.42h3.154c1.093 0 1.632-.532 1.632-1.656V4.655C9.42 3.532 8.88 3 7.787 3H4.633C3.532 3 3 3.532 3 4.655v3.109c0 1.124.532 1.655 1.633 1.655zm7.58 0h3.162C16.468 9.42 17 8.887 17 7.763V4.655C17 3.532 16.468 3 15.374 3h-3.16c-1.094 0-1.633.532-1.633 1.655v3.109c0 1.124.539 1.655 1.633 1.655zm-7.58-1.251c-.262 0-.382-.135-.382-.405V4.648c0-.27.12-.405.382-.405h3.146c.262 0 .39.135.39.405v3.116c0 .27-.128.405-.39.405H4.633zm7.588 0c-.262 0-.39-.135-.39-.405V4.648c0-.27.128-.405.39-.405h3.146c.262 0 .39.135.39.405v3.116c0 .27-.128.405-.39.405h-3.146zM4.633 17h3.154c1.093 0 1.632-.532 1.632-1.655v-3.109c0-1.124-.539-1.655-1.632-1.655H4.633C3.532 10.58 3 11.112 3 12.236v3.109C3 16.468 3.532 17 4.633 17zm7.58 0h3.162C16.468 17 17 16.468 17 15.345v-3.109c0-1.124-.532-1.655-1.626-1.655h-3.16c-1.094 0-1.633.531-1.633 1.655v3.109c0 1.123.539 1.655 1.633 1.655zm-7.58-1.25c-.262 0-.382-.128-.382-.398v-3.116c0-.277.12-.405.382-.405h3.146c.262 0 .39.128.39.405v3.116c0 .27-.128.397-.39.397H4.633zm7.588 0c-.262 0-.39-.128-.39-.398v-3.116c0-.277.128-.405.39-.405h3.146c.262 0 .39.128.39.405v3.116c0 .27-.128.397-.39.397h-3.146z"})})},62397:(e,t,i)=>{i.d(t,{I:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("settingsSecurity",{viewBox:"0 0 11 20",svg:n()("path",{d:"M4.92129 19.3231C5.26719 19.627 5.74092 19.6649 6.07178 19.3383L8.38779 16.9913C8.71865 16.6571 8.70361 16.1558 8.38027 15.8292L7.2749 14.7127L8.92168 13.0569C9.2375 12.7379 9.22998 12.229 8.90664 11.8948L7.41026 10.3757C9.44805 9.35026 10.5985 7.64127 10.5985 5.62847C10.5985 2.78016 8.32012 0.486328 5.49277 0.486328C2.66543 0.486328 0.394531 2.77257 0.394531 5.62847C0.394531 7.67166 1.54502 9.50217 3.37979 10.3301V17.4622C3.37979 17.7357 3.4625 18.0471 3.69561 18.2446L4.92129 19.3231ZM5.49277 17.9863L4.68066 17.166V9.34266C2.95869 8.9629 1.73301 7.4438 1.73301 5.62847C1.73301 3.53972 3.40986 1.84592 5.49277 1.84592C7.57569 1.84592 9.24502 3.53212 9.24502 5.62847C9.24502 7.42101 8.01181 8.96289 6.13194 9.38824V11.0289L7.57569 12.4872L6.03418 14.0214V15.3887L7.04931 16.3989L5.49277 17.9863ZM5.49277 5.67405C6.23721 5.67405 6.83877 5.06641 6.83877 4.32205C6.83877 3.5777 6.23721 2.97005 5.49277 2.97005C4.74834 2.97005 4.1543 3.5701 4.1543 4.32205C4.1543 5.06641 4.75586 5.67405 5.49277 5.67405Z"})})},73039:(e,t,i)=>{i.d(t,{K:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("settingsWorkspace",{viewBox:"0 0 20 20",svg:n()("path",{d:"M2.3 15.359c0 .819.463 1.327 1.231 1.327H16.43c.768 0 1.231-.508 1.231-1.327V7.507c0-.825-.463-1.333-1.231-1.333h-3.656V4.327C12.774 3.5 12.31 3 11.536 3H3.53C2.763 3 2.3 3.501 2.3 4.327v11.032zm1.25-.248V4.574c0-.216.108-.324.33-.324h7.313c.216 0 .33.108.33.324v10.537c0 .216-.114.324-.33.324H9.81v-1.834c0-.54-.254-.807-.768-.807H6.032c-.514 0-.768.267-.768.807v1.834H3.881c-.223 0-.33-.108-.33-.324zm1.911-8.118h1.213c.146 0 .247-.102.247-.254V5.564c0-.152-.101-.253-.247-.253H5.46c-.152 0-.247.101-.247.253V6.74c0 .152.095.254.247.254zm2.94 0h1.205c.152 0 .254-.102.254-.254V5.564c0-.152-.101-.253-.254-.253H8.4c-.152 0-.247.101-.247.253V6.74c0 .152.095.254.247.254zm4.373 8.366V7.424h3.307c.222 0 .33.115.33.33v7.357c0 .216-.108.324-.33.324h-3.307v-.076zM5.46 9.417h1.213c.146 0 .247-.101.247-.253V7.989c0-.152-.101-.254-.247-.254H5.46c-.152 0-.247.102-.247.254v1.175c0 .152.095.253.247.253zm2.94 0h1.205c.152 0 .254-.101.254-.253V7.989c0-.152-.101-.254-.254-.254H8.4c-.152 0-.247.102-.247.254v1.175c0 .152.095.253.247.253zm5.687.4h1.003a.2.2 0 00.209-.21V8.63c0-.127-.083-.21-.21-.21h-1.002c-.127 0-.204.083-.204.21v.978c0 .12.077.21.204.21zM5.46 11.842h1.213c.146 0 .247-.101.247-.254v-1.174c0-.152-.101-.254-.247-.254H5.46c-.152 0-.247.102-.247.254v1.174c0 .153.095.254.247.254zm2.94 0h1.205c.152 0 .254-.101.254-.254v-1.174c0-.152-.101-.254-.254-.254H8.4c-.152 0-.247.102-.247.254v1.174c0 .153.095.254.247.254zm5.687.311h1.003a.2.2 0 00.209-.21v-.977c0-.127-.083-.21-.21-.21h-1.002c-.127 0-.204.083-.204.21v.978c0 .12.077.21.204.21zm0 2.336h1.003a.2.2 0 00.209-.21v-.977c0-.127-.083-.21-.21-.21h-1.002c-.127 0-.204.083-.204.21v.978c0 .12.077.21.204.21zm-7.846-.552c0-.133.063-.197.197-.197h2.196c.133 0 .197.064.197.197v1.498h-2.59v-1.498z"})})},2356:(e,t,i)=>{i.d(t,{u:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("showDeletedPages",{viewBox:"0 0 16 16",svg:n()("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})})},50226:(e,t,i)=>{i.d(t,{I:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("sidebarTemplates",{viewBox:"0 0 14 14",svg:n()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.237 1l7.84 1.237-1.201 7.61L11.5 6.15 9.424 9.38 6 8.84 7.237 1zM5.545 5.31a4 4 0 1 0 2.29 4.832l-2.979-.47.689-4.363zM7 15l4.5-7 4.5 7H7z"})})},95094:(e,t,i)=>{i.d(t,{p:()=>o});var a=i(23174),n=i.n(a);i(67294);const o=(0,i(45238).I)("starFilled",{viewBox:"0 0 24 24",svg:n()("path",{d:"M4.603 22.837c.375.277.826.2 1.4-.22l6.002-4.411 6.003 4.41c.561.42 1.024.498 1.387.221.375-.276.463-.73.232-1.403l-2.346-7.075 6.047-4.366c.572-.41.77-.83.627-1.271-.143-.432-.55-.653-1.255-.653l-7.424.045-2.269-7.108C12.787.32 12.457 0 12.005 0c-.463 0-.782.32-1.002 1.006l-2.27 7.108-7.423-.045c-.716 0-1.123.221-1.266.653-.144.442.066.862.638 1.27l6.036 4.367-2.335 7.075c-.231.674-.143 1.127.22 1.403z"})})},33676:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(23174),n=i.n(a),o=(i(67294),i(45238)),s=i(39986);const r=(0,o.I)("thumbDown",{viewBox:"0 0 18 19",svg:n()("g",{transform:"rotate(180 9 9.5)"},void 0,s.f)})},39986:(e,t,i)=>{i.d(t,{P:()=>r,f:()=>s});var a=i(23174),n=i.n(a),o=(i(67294),i(45238));const s=n()("path",{d:"M0.539062 12.3125C0.539062 15.0547 2.29688 17.3125 4.54688 17.3125H7.11719C8.17188 17.8516 9.42188 18.1641 10.8047 18.1641H11.8906C12.9062 18.1641 13.7734 18.1016 14.3359 17.9609C15.4766 17.6797 16.1953 16.8672 16.1953 15.8516C16.1953 15.6641 16.1719 15.5 16.1172 15.3281C16.6562 14.9141 16.9609 14.2969 16.9609 13.6328C16.9609 13.3203 16.8984 13.0078 16.7891 12.7578C17.1484 12.375 17.3594 11.8203 17.3594 11.25C17.3594 10.875 17.2656 10.4922 17.1094 10.2031C17.3281 9.86719 17.4531 9.42188 17.4531 8.9375C17.4531 7.69531 16.5078 6.73438 15.2734 6.73438H12.3672C12.1953 6.73438 12.0859 6.65625 12.0938 6.50781C12.1328 5.69531 13.4062 3.75781 13.4062 2.17188C13.4062 1.01562 12.5859 0.171875 11.4688 0.171875C10.6484 0.171875 10.0859 0.59375 9.55469 1.61719C8.58594 3.48438 7.40625 5.125 5.65625 7.28125H4.25C2.14844 7.28125 0.539062 9.52344 0.539062 12.3125ZM5.375 12.25C5.375 10.5938 5.75 9.53125 6.80469 8.11719C7.99219 6.53125 9.625 4.63281 10.8125 2.27344C11.0625 1.77344 11.2344 1.64844 11.4844 1.64844C11.7891 1.64844 11.9844 1.86719 11.9844 2.25C11.9844 3.42188 10.6641 5.35156 10.6641 6.61719C10.6641 7.55469 11.4219 8.15625 12.4375 8.15625H15.2422C15.7031 8.15625 16.0391 8.5 16.0391 8.95312C16.0391 9.28125 15.9297 9.5 15.6562 9.76562C15.4609 9.96875 15.4375 10.25 15.6094 10.4453C15.8359 10.7734 15.9375 10.9844 15.9375 11.25C15.9375 11.5781 15.7812 11.8516 15.4609 12.0938C15.2031 12.2812 15.1094 12.5859 15.2656 12.8828C15.4297 13.2109 15.5156 13.3672 15.5156 13.6172C15.5156 14 15.2734 14.2891 14.7812 14.5469C14.5312 14.6875 14.4609 14.9531 14.5703 15.1875C14.7344 15.5938 14.7578 15.6641 14.7578 15.8438C14.7578 16.1797 14.5078 16.4531 13.9766 16.5859C13.5156 16.7031 12.7812 16.75 11.8203 16.7422L10.8125 16.7344C7.57031 16.7031 5.375 14.8828 5.375 12.25ZM1.9375 12.3125C1.9375 10.3281 2.96094 8.73438 4.14062 8.6875C4.34375 8.6875 4.55469 8.6875 4.75781 8.6875C4.20312 9.76562 3.95312 10.8984 3.95312 12.25C3.95312 13.6875 4.46094 14.9531 5.375 15.9453C5.07812 15.9453 4.76562 15.9375 4.46875 15.9375C3.10156 15.8906 1.9375 14.2812 1.9375 12.3125Z"}),r=(0,o.I)("thumbUp",{viewBox:"0 0 18 19",svg:s})},57222:(e,t,i)=>{i.d(t,{t:()=>a});const a=e=>({"en-US":{label:"English",caption:e.formatMessage({defaultMessage:"English (US)",id:"languagePicker.captions.englishUS"})},"de-DE":{label:"Deutsch",caption:e.formatMessage({defaultMessage:"German",id:"languagePicker.captions.germanDE"})},"ko-KR":{label:"한국어",caption:e.formatMessage({defaultMessage:"Korean",id:"languagePicker.captions.koreanKo"})},"zh-CN":{label:"简体中文",caption:e.formatMessage({defaultMessage:"Simplified Chinese",id:"languagePicker.captions.chineseS"})},"zh-TW":{label:"繁體中文",caption:e.formatMessage({defaultMessage:"Traditional Chinese",id:"languagePicker.captions.chineseT"})},"ja-JP":{label:"日本語",caption:e.formatMessage({defaultMessage:"Japanese",id:"languagePicker.captions.japaneseJa"})},"es-ES":{label:"Español (España)",caption:e.formatMessage({defaultMessage:"Spanish (Spain)",id:"languagePicker.captions.spanishEs"})},"es-LA":{label:"Español (Latinoamérica)",caption:e.formatMessage({defaultMessage:"Spanish (Latin America)",id:"languagePicker.captions.spanishLatam"})},"pt-BR":{label:"Português (Brasil)",caption:e.formatMessage({defaultMessage:"Portuguese (Brazil)",id:"languagePicker.captions.portugueseBr"})},"fr-FR":{label:"Français (France)",caption:e.formatMessage({defaultMessage:"French",id:"languagePicker.captions.frenchFr"})},"da-DK":{label:"Dansk",caption:e.formatMessage({defaultMessage:"Danish",id:"languagePicker.captions.danishDk"})},"fi-FI":{label:"Suomi",caption:e.formatMessage({defaultMessage:"Finnish",id:"languagePicker.captions.finnishFi"})},"nb-NO":{label:"Norsk",caption:e.formatMessage({defaultMessage:"Norwegian",id:"languagePicker.captions.norwegianNo"})},"nl-NL":{label:"Nederlands",caption:e.formatMessage({defaultMessage:"Dutch",id:"languagePicker.captions.dutchNl"})},"sv-SE":{label:"Svenska",caption:e.formatMessage({defaultMessage:"Swedish",id:"languagePicker.captions.swedishSe"})},pseudo:{label:"🤡Pseudolocale🤡",caption:e.formatMessage({defaultMessage:"Pseudolocale",id:"languagePicker.captions.pseudolocale"})}})},45168:(e,t,i)=>{i.d(t,{e:()=>n});var a=i(92338);function n(e){if(e)return e.sources.includes(a.vp.ElasticsearchUniqueID)}},68120:(e,t,i)=>{i.d(t,{Qr:()=>m});i(21703);var a=i(97880),n=i(63143),o=i(74487);const s=Symbol("JSON Schema"),r=Symbol("JSON Schema Components"),l=Symbol("No JSON Schema"),d={isNull:()=>({type:"null",[r]:{}}),boolean:()=>({type:"boolean",[r]:{}}),number:()=>({type:"number",[r]:{}}),integer:()=>({type:"integer",[r]:{}}),string:()=>({type:"string",[r]:{}}),dateString:()=>({type:"string",format:"date",[r]:{}}),literal:e=>({enum:[e],[r]:{}}),literals:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return{enum:t,[r]:{}}},uuid:()=>({type:"string",format:"uuid",[r]:{}}),uuidWithoutDashes:()=>({type:"string",format:"uuid",[r]:{}}),any:()=>u,array:e=>({type:"array",items:e[s],[r]:e[s][r]}),tuple:e=>({type:"tuple",items:!1,prefixItems:e.map((e=>e[s])).filter((e=>e!==l)),[r]:Object.assign({},...e.map((e=>e[s][r])))}),record:(e,t)=>({type:"object",additionalProperties:t[s],[r]:t[s][r]}),object:e=>{let{required:t,optional:i,exact:a}=e;return{type:"object",properties:(0,n.m8)(Object.entries({...t,...i}).filter((e=>{let[t,i]=e;return i[s]!==l})).map((e=>{let[t,i]=e;return[t,i[s]]}))),...a&&{additionalProperties:!1},...Object.keys(t).length>0&&{required:Object.keys(t)},[r]:Object.assign({},...Object.values({...t,...i}).map((e=>e[s][r])))}},union:e=>({anyOf:e.map((e=>e[s])).filter((e=>e!==l)),[r]:Object.assign({},...e.map((e=>e[s][r])))}),gte:(e,t)=>{const i=e[s];return i!==l?{...i,minimum:t}:i},lte:(e,t)=>{const i=e[s];return i!==l?{...i,maximum:t}:i},maxLength:(e,t)=>{const i=e[s];if(i===l)return i;if("type"in i){if("string"===i.type)return{...i,maxLength:t};if("array"===i.type)return{...i,maxItems:t}}throw new Error("Unknown type for max length.")},minLength:(e,t)=>{const i=e[s];if(i===l)return i;if("type"in i){if("string"===i.type)return{...i,minLength:t};if("array"===i.type)return{...i,minItems:t}}throw new Error("Unknown type for min length.")},nonEmpty:e=>{const t=e[s];if(t===l)return t;if("type"in t){if("string"===t.type)return{...t,minLength:1};if("object"===t.type)return{...t,minProperties:1};if("array"===t.type)return{...t,minItems:1}}throw new Error("Unknown non-emptyable type.")},nullable:e=>{const t=e[s];if(t===l)return t;if("type"in t)if(Array.isArray(t.type)){if("null"===t.type[1])return t;(0,a.t1)(t.type[1])}else{if("string"===t.type)return{...t,type:[t.type,"null"]};if("object"===t.type)return{...t,type:[t.type,"null"]};if("array"===t.type)return{...t,type:[t.type,"null"]};if("tuple"===t.type)return{...t,type:[t.type,"null"]};if("boolean"===t.type)return{...t,type:[t.type,"null"]};if("integer"===t.type)return{...t,type:[t.type,"null"]};if("number"===t.type)return{...t,type:[t.type,"null"]};if("null"===t.type)return t;(0,a.t1)(t.type)}else{if("const"in t)return{...t,enum:[t.const,null]};if("enum"in t)return{...t,enum:[...t.enum,null]};if("anyOf"in t)return{...t,anyOf:t.anyOf.map((e=>d.nullable({[s]:e})))};if("$ref"in t)return{anyOf:[t,{type:"null"}],[r]:t[r]};if(m(t))return t;(0,a.t1)(t)}}},c=(0,n.m8)(Object.entries(d).map((e=>{let[t,i]=e;return[t,function(){for(var e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return 1===n.length&&(0,a.Kn)(n[0])&&("id"in n[0]||"description"in n[0])?function(){const{description:e,examples:a,id:l}=n[0];let d={description:e,...a&&{examples:a},...i(...arguments)};return l&&(d={$ref:`#/components/schemas/${l}`,[r]:{...d[r],[l]:d}}),{[s]:d,...o[t](...arguments)}}:{[s]:i(...n),...o[t](...n)}}]}))),u=(Symbol("Exact empty object ({})"),c.object({id:"emptyObject"})({required:{},optional:{},exact:!0}),{});function m(e){return(0,a.Kn)(e)&&0===Object.keys(e).length}}}]);