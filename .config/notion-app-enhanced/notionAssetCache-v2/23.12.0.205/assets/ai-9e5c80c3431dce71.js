"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5741],{46564:(e,t,o)=>{o.d(t,{xj:()=>J,lA:()=>te,Rr:()=>R,NZ:()=>Y,Hh:()=>Q,F0:()=>$,xI:()=>U,LK:()=>V,sH:()=>G,cK:()=>H,yY:()=>Z,sY:()=>B});var n=o(10434),i=o.n(n),r=o(23174),a=o.n(r),s=(o(57658),o(67294)),l=o(480),c=o(86628),d=o(24405),u=o(41432),p=o(8848),m=o(12970),f=o(91856),v=o(56666),g=o(75e3),y=o(25651),C=o(11751);const h=(0,o(45238).I)("upLeftArrow",{viewBox:"0 0 16 16",svg:a()("path",{d:"M2.8457 10.5869C2.8457 11.0312 3.19434 11.373 3.59766 11.373C4.00098 11.373 4.3291 11.0176 4.3291 10.6074V8.05762L4.21973 5.22754L5.32031 6.47168L11.8418 12.9932C11.999 13.1504 12.1904 13.2256 12.3818 13.2256C12.7852 13.2256 13.1543 12.8564 13.1543 12.46C13.1543 12.2686 13.0654 12.0771 12.9082 11.9199L6.40039 5.39844L5.15625 4.30469L8.10254 4.40039H10.5361C10.9463 4.40039 11.2881 4.07227 11.2881 3.67578C11.2881 3.27246 10.9736 2.93066 10.5156 2.93066H3.64551C3.16016 2.93066 2.85254 3.25195 2.85254 3.72363L2.8457 10.5869Z"})});var k=o(5366),w=o(97880),b=o(42858),S=o(39699),M=o(84254),x=o(72495),I=o(19037),P=o(78663),A=o(91396),E=o(12921),_=o(40959),L=o(16772),F=o(27724),N=o(89941),T=o(62967);const B=(0,k.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"completions.completionActions.AIAssist"},more:{defaultMessage:"See more",id:"completions.completionActions.more"},alternativeUiString:{defaultMessage:"{text}",id:"completions.completionActions.alternativeUiString"},aiSummaryBlockDisplayName:{defaultMessage:"Summary",id:"completions.completionActions.aiSummaryBlockDisplayName"},aiActionItemsBlockDisplayName:{defaultMessage:"Action items",id:"completions.completionActions.aiActionItemsBlockDisplayName"},aiFreePromptBlockDisplayName:{defaultMessage:"Custom AI block",id:"completions.completionActions.aiFreePromptBlockDisplayName"}});function Z(e){return function(t){return s.createElement(x.Z,i()({},t,{title:a()("div",{style:{display:"flex",alignItems:"center"}},void 0,(0,C.t)({width:16,height:16,marginRight:4}),a()("div",{},void 0,t.title)),right:e}))}}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const o=[];if(o.push(...e.slice(0,t)),e.length>t){const n=(0,T.$J)({key:"more actions",render:e=>s.createElement(x.Z,e),actions:e.slice(t)});o.push((0,T.MV)({key:"more",displayName:B.more,analyticsName:"Completions - more",validators:N.v,svg:()=>a()(ee,{}),subActions:()=>[n],collapseSubActionsIntoParent:!0,width:350}))}return o}function D(){return a()(te,{svg:y.R,svgFill:p.FN.light.purple[500]})}function H(e){const{key:t,name:o,analyticsName:n,textToInsert:i,onUpdatePromptState:r,right:a,renderTooltip:s,showEllipsis:l,userProvidedSearchName:c,executeImmediately:d,gtmFavoriteId:u}=e,p=o.length>1e3?`${o.slice(0,1e3)}…`:o;return(0,T.cN)({key:t,analyticsName:`Completions - insert text into prompt - ${n}`,...(m=l?`${p}…`:p,{displayName:B.alternativeUiString,displayNameInterpolatedValues:{text:m}}),validators:[],closeParentMenu:!1,svg:D,action(){r({insertText:i??o,analyticsName:n,gtmFavoriteId:u,executeImmediately:d})},right:a??q("updatePrompt"),renderTooltip:s,userProvidedSearchName:c});var m}function V(e){const{from:t,type:o,onUpdatePromptState:n}=e;function i(e){return H({key:`completions.${e.key}`,name:(0,A.t8)(e),analyticsName:e.key,textToInsert:(0,P.$W)(e),onUpdatePromptState:n,showEllipsis:!0})}const r="cursor"===o?{selectionType:o,isPageEmpty:!I.IC()}:{selectionType:o},a=(0,A.up)(r),l=(0,A.pv)(a,r),c=[];for(const[d,u]of l){const e=[];for(const r of u)"helpMeDraft"!==r.key&&"helpMeEdit"!==r.key&&"helpMeWrite"!==r.key&&("translate"===r.key?e.push(W(r,N.v,o,t)):"changeTone"===r.key?e.push(z(r,N.v,o,t)):r.steps?e.push(i(r)):e.push(Y({prompt:r,validators:N.v,type:o,from:t})));const n=(0,T.$J)({key:`completions.${d}`,title:(0,A.Mh)(d,"cursor"===o?"page":"selection"),render:e=>s.createElement(x.Z,e),actions:R(e.filter(w.$K),7)});c.push(n)}return"cursor"===o&&c.push((0,T.$J)({key:"completions.aiBlocks",title:A.Dr.aiBlocks,render:e=>s.createElement(x.Z,e),actions:_.O5.map((e=>function(e){const t=_.Hc[e.aiBlockType],{displayName:o,svg:n}=O[e.aiBlockType];return(0,T.cN)({key:`completions.aiBlocks.${t.key}`,analyticsName:`Completions - ${t.key}`,closeParentMenu:!0,svg:n,displayName:o,validators:N.v,action:e=>{let{environment:o}=e;S.createAndCommit({userAction:"completionActions.createAiBlockAction",environment:o,perform:e=>{b.at({environment:o,selection:F.default.state.stores,createBlockItem:t,analyticsFrom:"ai_prompt",transaction:e})}})}})}({aiBlockType:e})))})),c}const O={[u.MF.aiSummaryBlock]:{displayName:B.aiSummaryBlockDisplayName,svg:()=>a()(oe,{svg:f.Y})},[u.MF.aiActionItemsBlock]:{displayName:B.aiActionItemsBlockDisplayName,svg:()=>a()(oe,{svg:m.O})},[u.MF.aiFreePromptBlock]:{displayName:B.aiFreePromptBlockDisplayName,svg:()=>a()(oe,{svg:C.t})}};function U(e){return(0,T.$J)({key:"completions",title:B.notionAI,render:Z(),actions:K(e)})}function K(e){const{store:t,from:o}=e,n=[];for(const i of E.fA){if("helpMeWrite"===i.key)continue;const e=Y({prompt:i,validators:N.v,type:"aiBlock",from:o,store:t});e&&n.push(e)}return n}function $(e){const{environment:t,inputValue:o,store:n}=e,i=(0,E.qB)({customPrompt:o,isPageEmpty:!1});M.triggerCompletionForAiBlock({environment:t,store:n,prompt:i,additionalContext:{prompt:o}})}function W(e,t,o,n){const{key:i,name:r,svg:l,svgFill:c,steps:d}=e;if("translate"!==i||!d||1!==d.length||"language"!==d[0].key||"dropdown"!==d[0].type)return;const u=d[0].dropdownOptions.map((i=>{let{key:r,name:a}=i;return(0,T.cN)({key:`completions.translate.${r}`,analyticsName:`Completions - translate - ${r}`,displayName:a,validators:t,closeParentMenu:!0,right:q("submitPrompt"),action:t=>{let{environment:i}=t;X({environment:i,prompt:e,from:n,type:o,additionalContext:{language:r}})}})})),p=(0,T.$J)({key:"translate language actions",render:e=>s.createElement(x.Z,e),actions:u}),m=l?()=>a()(te,{svg:l,svgFill:c}):void 0;return(0,T.MV)({key:"translate",displayName:r,analyticsName:`Completions - ${i}`,validators:t,svg:m,subActions:()=>[p]})}function z(e,t,o,n){const{key:i,name:r,svg:l,svgFill:c,steps:d}=e;if("changeTone"!==i||!d||1!==d.length||"tone"!==d[0].key||"dropdown"!==d[0].type)return;const u=d[0].dropdownOptions.map((i=>{let{key:r,name:a}=i;return(0,T.cN)({key:`completions.changeTone.${r}`,analyticsName:`Completions - changeTone - ${r}`,displayName:a,validators:t,closeParentMenu:!0,right:q("submitPrompt"),action:t=>{let{environment:i}=t;X({environment:i,prompt:e,from:n,type:o,additionalContext:{tone:r}})}})})),p=(0,T.$J)({key:"changeTone tone actions",render:e=>s.createElement(x.Z,e),actions:u}),m=l?()=>a()(te,{svg:l,svgFill:c}):void 0;return(0,T.MV)({key:"changeTone",displayName:r,analyticsName:`Completions - ${i}`,validators:t,svg:m,subActions:()=>[p]})}function J(e){window.__c={n:"ActionHintIcon"};const{focused:t,type:o}=e,n=(0,l.O7)(),i=(0,c.VK)((()=>n.device.isPhone),[n]),r=(0,d.yK)((e=>({iconStyle:{width:14,height:14,fill:e.mediumIconColor,opacity:!i&&t?1:0},containerStyle:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,i]);switch(o){case"submitPrompt":return a()("div",{style:r.containerStyle},void 0,(0,g.U)(r.iconStyle));case"updatePrompt":return a()("div",{style:r.containerStyle},void 0,h(r.iconStyle));default:(0,w.t1)(o)}}function q(e){return t=>a()(J,{type:e,focused:t.focused})}function G(e){const{customPrompt:t,execute:o}=e;return(0,T.cN)({analyticsName:"Completions - execute current prompt input",key:"explicitFreeFormAction",displayName:A.Dr.genericHelpMeWrite,displayNameInterpolatedValues:{filter:t},svg:D,right:q("submitPrompt"),validators:[],closeParentMenu:!1,renderTooltip:T.zz,action(){o()}})}const j=e=>(0,A.L3)(e.environment);function Y(e){const{prompt:t,validators:o,type:n,from:i,store:r,sortScoreMultiplier:s}=e,{key:l,name:c}=t;if("translate"===l&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return W(t,o,n,i);if("changeTone"===l&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return z(t,o,n,i);const d=function(e){const{svg:t,svgFill:o}=e;return t?()=>a()(te,{svg:t,svgFill:o}):void 0}(t),u=[...o];return t.requiresContent?u.push(I.IC):t.requiresNoContent&&u.push(I.ff(I.IC)),t.isNewModel&&u.push(j),(0,T.cN)({key:`completions.${l}`,analyticsName:`Completions - ${l}`,displayName:c,fuzzySearchKeywords:t.fuzzySearchKeywords,validators:u,closeParentMenu:!0,svg:d,right:q("submitPrompt"),sortScoreMultiplier:s,action:e=>{let{environment:o}=e;X({environment:o,prompt:t,type:n,from:i,store:r})}})}function X(e){const{environment:t,prompt:o,type:n,from:i,store:r,additionalContext:a}=e;if("textSelection"===n)M.openCompletionPopupForSavedContext({environment:t,prompt:o,from:i,additionalContext:a});else if("blockSelection"===n)M.openCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:a});else if("cursor"===n){if(o.preferToNeverInsertTextAtCursor)return void M.selectPageAndOpenCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:a});M.openCompletionPopupForCursorContext({environment:t,prompt:o,from:i,additionalContext:a})}else"aiBlock"===n?r&&M.triggerCompletionForAiBlock({environment:t,store:r,prompt:o,additionalContext:a}):(0,w.t1)(n)}function Q(e){const{inputValue:t,from:o,mode:n,environment:i}=e;switch(n){case"edit":return void function(e){const{customPrompt:t,from:o,environment:n}=e,i=(0,A.sB)(t);"closedWithContext"===L.default.state.type&&L.default.state.context&&M.openCompletionPopupForPrefilledContext({environment:n,context:L.default.state.context,prompt:i,additionalContext:{prompt:t},from:o,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o});case"write":const e=(0,A.wq)(t);if(e){const{prompt:t,additionalContext:n}=e,r=(0,P.FD)();if(!r)return;return void M.openCompletionPopupForPrefilledContext({environment:i,context:r,prompt:t,additionalContext:n,from:o,skipInitialForm:!0})}return void function(e){const{environment:t,customPrompt:o,from:n}=e,i=(0,E.qB)({customPrompt:o,isPageEmpty:!I.IC()}),r=(0,P.FD)();r&&M.openCompletionPopupForPrefilledContext({environment:t,context:r,prompt:i,additionalContext:{prompt:o},from:n,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o})}(0,w.t1)(n)}function ee(){window.__c={n:"MoreIcon"};const e=(0,d.Fg)();return(0,v.o)({width:12,marginLeft:2,marginRight:2,fill:e.mediumIconColor})}function te(e){window.__c={n:"BoxedIcon"};const t=(0,d.yK)((t=>({box:{height:e.fixedWidth?22:void 0,width:e.fixedWidth?22:void 0,display:"flex",alignItems:"center",justifyContent:"center",...e.boxStyles},icon:{height:16,width:16,fill:e.svgFill??(0,p.gh)({theme:"light"}).regularIconColor}})),[e]);return a()("div",{style:t.box},void 0,e.svg(t.icon))}function oe(e){window.__c={n:"AiBlockIcon"};const t=(0,d.yK)((e=>({box:{background:e.fill.purple,width:24,height:24,borderRadius:3},icon:{fill:e.icon.purple}})),[]);return a()(te,{svg:e.svg,svgFill:t.icon.fill,boxStyles:t.box})}},3316:(e,t,o)=>{o.r(t),o.d(t,{AiEligibilityUpdater:()=>lo,CompletionPopup:()=>ro});var n=o(10434),i=o.n(n),r=o(23174),a=o.n(r),s=o(67294),l=o(18466),c=o(26263),d=o(1302),u=o(480),p=o(86628),m=o(24405),f=o(42875),v=o(66673),g=o(82883),y=o(62965),C=o(97880),h=o(5366),k=o(46564),w=o(50906),b=o(14871),S=o(39699),M=o(3386),x=o(43250),I=o(91396),P=o(43455),A=o(95083),E=o(16772),_=o(29798),L=o(84254),F=o(89626),N=o(16091),T=o(92022),B=o(11751),Z=o(72897),R=o(32163),D=o(50506),H=o(63296),V=o(72495),O=o(34859);function U(e){window.__c={n:"ExitConfirmationDialog"};const{open:t,onCancelExit:o,onConfirmExit:n}=e,i=(0,s.useCallback)((()=>a()(K,{onConfirmExit:n,onCancelExit:o})),[n,o]);return a()(D.Z,{open:t,render:i,disableAnimation:!0,onDismiss:o})}function K(e){window.__c={n:"ExitConfirmationDialogContent"};const t=(0,m.yK)((e=>({wrapper:{padding:24,display:"flex",flexDirection:"column",minWidth:280},question:{fontWeight:500,maxWidth:240,textAlign:"center",marginTop:8,marginBottom:8,lineHeight:"1.2em"},icon:{width:32,height:32,alignSelf:"center",paddingTop:8,fill:e.accentColors.purple[400]}})),[]),o={width:"100%",marginTop:8},n=[{key:"confirm",render:e=>s.createElement(H.Z,i()({style:o},e),a()(h.FormattedMessage,{id:"completions.ExitConfirmationDialog.confirmExit",defaultMessage:"Discard"})),action:e.onConfirmExit},{key:"cancel",render:e=>s.createElement(H.Z,i()({style:o},e),a()(h.FormattedMessage,{id:"completions.ExitConfirmationDialog.cancelExit",defaultMessage:"Cancel"})),action:e.onCancelExit}];return a()(Z.Z,{capture:!0,preventType:O.Z.All},void 0,a()("div",{style:t.wrapper},void 0,(0,B.t)(t.icon),a()("p",{style:t.question},void 0,a()(h.FormattedMessage,{id:"completions.ExitConfirmationDialog.question",defaultMessage:"Do you want to discard the AI response?"})),a()(R.Z,{type:R.i.Vertical,initialFocus:0,sections:[{key:"dialog",render:e=>s.createElement(V.Z,i()({topBorder:!1,disableMobileBorders:!0},e)),items:n}]})))}o(57658);var $=o(50780),W=o(72126),z=o(62967),J=o(47307),q=o(64964),G=o(73063),j=o(45010),Y=o(80444),X=o(77080),Q=o(30793),ee=o(71184);const te="favorite-actions",oe=(0,h.defineMessages)({favoriteActions:{defaultMessage:"Favorites",id:"ai.favoriteActions.title"},editOrShareFavorite:{defaultMessage:"Edit or share favorite",id:"ai.favoriteActions.editOrShare"}});function ne(){const[e,t]=(0,s.useState)(void 0),o=(0,p.VK)((()=>X.default.checkGate("ai_favorites")),[]);return function(e){const t=(0,v.D9)(e);(0,s.useEffect)((()=>{e!==t&&j.Z.MenuScroller&&j.Z.MenuScroller.scrollToTop()}),[e,t])}(Boolean(e)),(0,s.useMemo)((()=>o?e?{type:"active",current:e,set:t,clear:()=>t(void 0)}:{type:"inactive",set:t}:{type:"disabled"}),[e,o])}const ie={maxWidth:400,whiteSpace:"pre-wrap"};function re(e){const{value:t}=e;return a()("div",{style:ie},void 0,a()("div",{},void 0,t.action.prompt))}function ae(e,t,o,n,i){const r=i.filterOut.toLocaleLowerCase().trim(),l=(0,ee.JS)(n),c=[];for(const s of l){if(s.action.prompt.toLocaleLowerCase().trim()===r)continue;const n=n=>a()("div",{style:{display:"flex"}},void 0,a()(G.Z,{style:{visibility:n.focused?"visible":"hidden",width:18,height:18},onClick:()=>{i.favoriteEditingState.set(s),w.VoR(e,{type:"edit",session_id:t.sessionId,gtm_favorite_id:s.gtmFavoriteId})},icon:$.E,ariaLabel:o.formatMessage(oe.editOrShareFavorite)}),!s.executeImmediately&&a()(k.xj,{type:"updatePrompt",focused:n.focused}));let l=!1;switch(s.action.type){case"helpMeEdit":"initialPrompt"!==t.stage||"blockSelection"!==t.context.type&&"textSelection"!==t.context.type||(l=!0);break;case"helpMeWrite":"initialPromptForAIBlock"!==t.stage&&"cursor"!==t.context.type||(l=!0);break;default:(0,C.t1)(s.action)}if(l){const e=(0,k.cK)({key:s.id,name:s.name,textToInsert:s.action.prompt,analyticsName:"favoriteAction",gtmFavoriteId:s.gtmFavoriteId,onUpdatePromptState:i.onUpdatePromptState,right:n,renderTooltip:()=>a()(re,{value:s}),userProvidedSearchName:`${s.name} ${s.action.prompt}`.slice(0,100),executeImmediately:s.executeImmediately});c.push(e)}}return[(0,z.$J)({key:te,title:oe.favoriteActions,render:e=>s.createElement(V.Z,e),actions:c})]}function se(e){const{state:t,environment:o,sessionId:n}=e,{currentUserSettingsStore:i}=Y.default.state;i&&(t.current.name?(S.createAndCommit({userAction:"favoriteActions.saveFavoriteEditsAndClearState",environment:o,perform(e){(0,ee.gC)(t.current,i,e)}}),t.clear(),w.VoR(o,{type:"save",session_id:n,gtm_favorite_id:t.current.gtmFavoriteId})):q.oV({label:a()(h.FormattedMessage,{defaultMessage:"Please enter a name for the action.",id:"ai.favoriteActions.nameRequiredMessage"})}))}var le=o(39186),ce=o(38715),de=o(37612),ue=o(48019),pe=o(68894),me=o(78140),fe=o(86825),ve=o(64369),ge=o(33929),ye=o(87279);const Ce=(0,h.defineMessages)({save:{id:"ai.favorites.save",defaultMessage:"Save changes"},delete:{id:"ai.favorites.delete",defaultMessage:"Delete"},runImmediately:{id:"ai.favorites.runImmediately",defaultMessage:"Run immediately"},actionNameLabel:{id:"ai.favorites.actionNameLabel",defaultMessage:"Action name"},cancelAndGoBack:{id:"ai.favorites.cancelAndGoBack",defaultMessage:"Cancel and go back"}});function he(e){window.__c={n:"FavoriteEditorMenuPopupContent"};const{state:t,context:o,sessionId:n}=e,r=(0,h.useIntl)(),l=(0,u.O7)(),c=(0,s.useMemo)((()=>new _.Z),[]),d=(0,z.cN)({key:"input",analyticsName:"TODO",displayName:Ce.save,validators:[],closeParentMenu:!1,render:()=>a()(V.Z,{isInput:!0,style:{marginTop:0}},void 0,a()(pe.ZP,{value:t.current.name,onChange:e=>{t.set({...t.current,name:e.target.value}),c.setState({focus:{section:0,indexLocal:1,indexGlobal:1}})},placeholder:ge.default.formatMessage(Ce.actionNameLabel),focusInitial:!0})),action(e,t){}}),p=[(0,z.$J)({key:"favorite options section",render:e=>s.createElement(V.Z,e),actions:[d,(0,z.cN)({key:"runImmediately",analyticsName:"TODO",displayName:Ce.runImmediately,validators:[],render:(e,o,n)=>{let{blocks:r,environment:a}=o;const l=Boolean(t.current.executeImmediately);return s.createElement(fe.Z,i()({},e,{title:ge.default.formatMessage(Ce.runImmediately),on:l}))},closeParentMenu:!1,action(e,o){t.set({...t.current,executeImmediately:!t.current.executeImmediately})}})]}),(0,z.$J)({actions:[(0,z.cN)({key:"save",analyticsName:"TODO",displayName:Ce.save,validators:[],svg:ce.N,closeParentMenu:!1,action(e,o){se({state:t,environment:l,sessionId:n})}})],key:"actions",render:e=>s.createElement(V.Z,e)}),(0,z.$J)({key:"delete action section",render:e=>s.createElement(V.Z,e),actions:[(0,z.cN)({key:"delete",analyticsName:"TODO",displayName:Ce.delete,validators:[],svg:de.y,closeParentMenu:!1,action(e,o){const{currentUserSettingsStore:i}=Y.default.state;i&&(S.createAndCommit({userAction:"ai.favoriteEditorPopup.delete",environment:l,perform(e){(0,ee.QC)(t.current,i,e)}}),t.clear(),w.VoR(l,{type:"delete",session_id:n,gtm_favorite_id:t.current.gtmFavoriteId}))}})]})],m=(0,s.useCallback)((()=>{}),[]);return a()("div",{style:{display:"flex",flexDirection:"column"}},void 0,a()("div",{style:{display:"flex",alignItems:"center",padding:"8px 8px 0 8px"}},void 0,a()(G.Z,{icon:le.G,onClick:()=>{!function(e){const{state:t,environment:o}=e,{currentUserSettingsStore:n}=Y.default.state;n&&(t.current.name||S.createAndCommit({userAction:"favoriteActions.cancelFavoriteEditsAndClearState",environment:o,perform(e){(0,ee.QC)(t.current,n,e),(0,Q.Nv)(t.current.action,n,e)}}),t.clear())}({environment:l,state:t})},ariaLabel:r.formatMessage(Ce.cancelAndGoBack)}),a()(ve.Z,{isSecondaryColor:!0,isSmall:!0,style:{fontWeight:700}},void 0,a()(h.FormattedMessage,{id:"ai.favorites.saveHeader",defaultMessage:"Save AI action"}))),a()(me.Z,{menuType:ye.og.Popup,width:"100%",maxHeight:"min(40vh, 320px)",minHeight:"100%"},void 0,a()(ue.Z,{menuListStore:c,sections:p,onAccept:m,initialFocus:0,context:o})))}var ke=o(57819),we=o(2585),be=o(5257);const Se=(0,h.defineMessages)({undoAriaLabel:{defaultMessage:"Go to previous AI response",id:"id.completions.undoAriaLabel"},redoAriaLabel:{defaultMessage:"Go to next AI response",id:"id.completions.redoAriaLabel"},historyLabel:{defaultMessage:"{currentRevision} of {totalRevisions}",id:"id.completions.historyLabel"}}),Me={display:"flex",alignItems:"center",marginLeft:-2,marginRight:-2},xe={width:20,height:20,marginLeft:2,marginRight:2};function Ie(e){window.__c={n:"CompletionHistory"};const{onUndo:t,onRedo:o,historyLabel:n}=e,i=(0,h.useIntl)();return t||o?a()("div",{style:Me},void 0,a()(G.Z,{icon:we.f,ariaLabel:i.formatMessage(Se.undoAriaLabel),disabled:!t,onClick:t,style:xe}),a()(ve.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontVariantNumeric:"tabular-nums"}},void 0,n),a()(G.Z,{icon:be.o,ariaLabel:i.formatMessage(Se.redoAriaLabel),disabled:!o,onClick:o,style:xe})):null}const Pe={onUndo:void 0,onRedo:void 0,historyLabel:void 0};function Ae(e,t){const o=E.default.state;if("completionPopup"!==o.type||"results"!==o.stage)return;const{sessionId:n}=o,i=(0,I.xM)(o);w.BpO(e,{session_id:n,inference_id:i.inferenceId,type:t})}var Ee=o(56863),_e=o(81598),Le=o(12921),Fe=o(5737),Ne=o(82375),Te=o(11066),Be=o(1743),Ze=o(74194);const Re=(0,h.defineMessages)({promptLabel:{defaultMessage:"Prompt for action",id:"ai.favoritePromptEditor.promptLabel"}});function De(e,t){e.set({...e.current,action:{...e.current.action,prompt:t}})}function He(e){window.__c={n:"FavoritePromptEditorContent"};const{state:t,inputRef:o,sessionId:n}=e,i=(0,u.O7)(),r=(0,ke.bJ)(),l=(0,h.useIntl)().formatMessage(Re.promptLabel);return a()(Be.Z,{capture:!0,allowMenuList:!1,allowEsc:!0},void 0,s.createElement(Ze.Z,{ref:o,format:Ze.Z.Format.Transparent,placeholder:l,selectAll:!0,value:t.current.action.prompt,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onChange:e=>De(t,e.target.value),onKeyDown:e=>{"Enter"===e.key&&De(t,`${t.current.action.prompt}\n`)},focusInitial:!1}),a()("div",{style:r.inputActions},void 0,a()(Te.Z,{style:r.purpleButton,onClick:()=>se({state:t,environment:i,sessionId:n})},void 0,a()(h.FormattedMessage,{defaultMessage:"Done",id:"ai.favoritePromptEditor.done"}))))}var Ve=o(61519);function Oe(e){window.__c={n:"PromptOrActionInput"};const{query:t,setQuery:o,onDismiss:n,onSubmit:i,inputRef:r,submitOnEnter:l,inputPlaceholder:c,children:d}=e,[u,p]=(0,s.useState)(void 0);return a()(Be.Z,{capture:!0,allowMenuList:!1,allowEsc:!0},void 0,s.createElement(Ze.Z,{ref:r,format:Ze.Z.Format.Transparent,placeholder:c,selectAll:!0,value:t,textarea:!0,textareaSubmitOnEnter:!0,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onSubmit:e=>{t&&l&&(e.stopPropagation(),null==i||i())},onChange:e=>{o(e.target.value)},onKeyUp:e=>{"Backspace"===e.key&&(""===u&&n(),p(void 0))},onKeyDown:e=>{"Backspace"===e.key&&void 0===u&&p(t)},focusInitial:!0}),d)}var Ue=o(83065),Ke=o(58261),$e=o(26388);function We(e){window.__c={n:"SubmitAIPromptButton"};const{onSubmit:t,canSend:o}=e,n=(0,ke.bJ)(),r=(0,u.O7)(),l=(0,p.VK)((()=>r.device.isPhone),[r]);return a()($e.Z,{renderTooltip:()=>a()("div",{},void 0,a()(h.FormattedMessage,{defaultMessage:"Send to AI",id:"completions.CompletionMenuActionBar.sendTooltip"}),a()(Ke.Z,{style:n.keyboardShortcutInverted,name:"enter"})),placement:$e.Z.Placement.Bottom,render:e=>s.createElement(G.Z,i()({icon:Ue._,onClick:t,isPurple:o,disabled:!o,iconStyle:{height:l?24:20,width:l?24:20},style:{pointerEvents:"auto",height:l?24:20,width:l?24:20}},e))})}const ze=(0,h.defineMessages)({followUpInputPlaceholder:{id:"AlternativeCommandPalette.followUp.inputPlaceholder",defaultMessage:"Tell AI what to do next…"}}),Je={padding:"8px 10px 8px 14px"};function qe(e){window.__c={n:"CompletionFinishedContent"};const t=(0,ke.bJ)(),o=(0,h.useIntl)(),n=0===e.query.trim().length,r=(0,u.O7)(),l=(0,p.VK)((()=>{if(!(0,Le.E8)(r.device)||!(0,Le.Gw)())return!1;const e=Ne.XN.state;return Boolean(e&&e.previewingStep)}),[r]);return s.createElement(Oe,i()({},e,{inputPlaceholder:o.formatMessage(ze.followUpInputPlaceholder)},l&&{onSubmit:void 0}),a()("div",{style:t.inputActions},void 0,a()(We,{onSubmit:e.onSubmit,canSend:!n&&!l}),(e.onUndo||e.onRedo)&&s.createElement(s.Fragment,null,a()(Ve.Z,{vertical:!0,size:1,style:Je}),s.createElement(Ie,e))))}var Ge=o(64921),je=o(91839);function Ye(e){window.__c={n:"CompletionInProgressContent"};const{onStop:t,onRetry:o}=e,n=(0,ke.bJ)(),i=(0,u.O7)().device,r=i.isMobileNative&&i.isIOS;return a()(M.Z,{capture:!0,onEnter:()=>{t()},onEsc:()=>{t()},onKeypress:e=>{e.metaKey||"r"!==e.key||o()}},void 0,a()("div",{style:n.writingLabel},void 0,a()(h.FormattedMessage,{id:"AlternativeCompletionsPopupContent.writing",defaultMessage:"AI is writing"}),a()(je.Z,{style:n.loadingDots})),!r&&a()(Ge.Z,{style:n.lightweightButton,onClick:o},void 0,a()(h.FormattedMessage,{id:"AlternativeCompletionsPopupContent.tryAgain.label",defaultMessage:"Try again"}),a()("span",{style:n.keyboardShortcut},void 0,a()(h.FormattedMessage,{id:"AlternativeCompletionsPopupContent.startOver.shortcut",defaultMessage:"r"}))),a()(Ge.Z,{style:n.lightweightButton,onClick:t},void 0,a()(h.FormattedMessage,r?{id:"AlternativeCompletionsPopupContent.cancel.label",defaultMessage:"Cancel"}:{id:"AlternativeCompletionsPopupContent.stop.label",defaultMessage:"Stop"}),a()("span",{style:n.keyboardShortcut},void 0,a()(h.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.shortcut",defaultMessage:"esc"}))))}var Xe=o(15201),Qe=o(53336),et=o(55217);function tt(e){window.__c={n:"CompletionPreview"};const{temporaryListStore:t,isLoading:o}=e,n=(0,u.O7)(),i=(0,s.useRef)(null),r=null==i?void 0:i.current,l=null==r?void 0:r.getStore(),c=(0,p.VK)((()=>n.device.isPhone),[n]),d=(0,ke.jq)({resetWhenScrolledToBottom:!0,areWeLoading:o,scrollerStore:l});(0,s.useEffect)((()=>{r&&(d?ot.cancel():ot(r))}),[r,t,d]);const m={scroller:{maxHeight:c?"min(15vh, 200px)":"min(40vh, 320px)",width:"100%"}};return a()(s.Fragment,{},void 0,s.createElement(Qe.Z,{type:Qe.Z.OverflowType.Y,style:m.scroller,ref:i},a()(Xe.O,{displayName:"CompletionPopupContent",disabled:!0},void 0,a()(et.Z,{store:t,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0}))))}const ot=W.Ds((e=>{e.scrollToBottom({animate:!0})}),60);var nt=o(63594),it=o(54497),rt=o(42402);function at(){window.__c={n:"AiWarningNotice"};const e=(0,s.useCallback)((()=>{window.open("/help/guides/using-notion-ai#what-are-the-current-limitations-of-notion-ai")}),[]),t=(0,m.yK)((e=>({icon:{width:12,height:12,fill:e.lightIconColor,marginLeft:2},link:{color:e.lightTextColor,fontWeight:500}})),[]);return s.createElement(s.Fragment,null,(0,it.t)(t.icon),a()(ve.Z,{isSecondaryColor:!0,isSmall:!0},void 0,a()(h.FormattedMessage,{id:"completions.AiWarning.warning",defaultMessage:"AI responses can be inaccurate or misleading."})),a()(ve.Z,{isSmall:!0},void 0,a()(rt.Z,{onClick:e,style:t.link,disableHover:!0,disableUnderline:!0},void 0,a()(h.FormattedMessage,{id:"completions.AiWarning.learnMore",defaultMessage:"Learn more"}))))}var st=o(51224),lt=o(81570),ct=o(99498),dt=o(1865),ut=o(41168),pt=o(8323),mt=o(78291);function ft(){window.__c={n:"UpsellNotice"};const e=(0,u.O7)(),t=(0,p.VK)((()=>e.device.isMobile),[e]),o=(0,p.VK)((()=>{const e=mt.default.state.data;return ut.GJ(e)}),[]),n=(0,s.useCallback)((()=>{t?ct.k2():dt.y(e,{from:"ai_upsell_notice",for:(0,pt.zt)(),addOnFeature:"ai"})}),[e,t]),i=(0,m.yK)((e=>({upsellIcon:{width:14,height:14,fill:e.lightIconColor},upsellLink:{color:e.blueColor,fontWeight:500}})),[]);return s.createElement(s.Fragment,null,(0,lt.T)(i.upsellIcon),a()(ve.Z,{isSecondaryColor:!0,isSmall:!0},void 0,a()(h.FormattedMessage,{id:"UpsellNotice.label",defaultMessage:"All free AI responses have been used for this workspace."}),!o&&s.createElement(s.Fragment,null," ",a()(h.FormattedMessage,{id:"UpsellNotice.contactWorkspaceOwner.label",defaultMessage:"Contact your workspace owner to add Notion AI."}))),o&&s.createElement(s.Fragment,null,a()(ve.Z,{isSmall:!0},void 0,a()(rt.Z,{onClick:n,style:i.upsellLink,disableHover:!0,disableUnderline:!0},void 0,a()(h.FormattedMessage,{id:"UpsellNotice.link.label",defaultMessage:"Go unlimited"})))))}function vt(e){window.__c={n:"MainPopupFooter"};const{state:t}=e,o=(0,u.O7)(),n=(0,p.VK)((()=>o.device.isPhone),[o]),i=(0,m.yK)((e=>({wrapper:{background:"dark"===e.mode?e.accentColors.gray[100]:e.accentColors.gray[30],display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 12px",borderTop:`1px solid ${e.lightDividerColor}`,gap:8,color:e.lightTextColor,fontSize:12,minHeight:36},noticeContent:{display:"flex",alignItems:"center",gap:8},actionContent:{display:"flex",alignItems:"center"}})),[]),r=(0,p.VK)((()=>!nt.Z.state),[]);if(n)return null;let s,l;return r&&(s=a()(ft,{})),"results"!==t.stage||t.loading||(s=s??a()(at,{}),l=a()(st.u,{revision:(0,I.xM)(t)})),s?a()("div",{style:i.wrapper},void 0,a()("div",{style:i.noticeContent},void 0,s),l&&a()("div",{style:i.actionContent},void 0,l)):null}const gt=(0,h.defineMessages)({writeInputPlaceholder:{defaultMessage:"Ask AI to write anything…",id:"completions.PromptMenu.alternativeUiWriteInputPlaceholder"},editInputPlaceholder:{defaultMessage:"Ask AI to edit or generate…",id:"completions.PromptMenu.alternativeUiEditInputPlaceholder"}});function yt(e){window.__c={n:"MainPopupContent"};const{state:t,onDismiss:o,onCompletionRetry:n,onCompletionStop:r,temporaryListStore:l,favoriteEditingState:c}=e,d=(0,s.useRef)(null);(0,s.useEffect)((()=>{Ee.w()}),[]);const f=(0,u.O7)(),v=(0,p.VK)((()=>f.device.isPhone),[f]),g=(0,p.VK)((()=>Y.default.state.currentSpaceStore),[]),y=(0,p.VK)((()=>Fe.N.state),[]),C=(0,p.VK)((()=>{if(!(0,Le.E8)(f.device))return;const e=Ne.XN.state;return e?e.temporaryClientSteps.filter((e=>"assistantChat"===e.type||"assistantLoadPage"===e.type||"assistantSearch"===e.type)):void 0}),[f],{useDeepEqual:!0}),h=(0,m.yK)((e=>({icon:{height:18,width:18,paddingLeft:v?0:4,marginLeft:v?-4:void 0,fill:"dark"===e.mode?e.accentColors.purple[600]:e.accentColors.purple[300]},outer:{width:"100%",minHeight:v?44:36,padding:v?"2px 16px 2px 16px":"2px 12px 2px 8px",display:"flex",flexDirection:"column",justifyContent:"center",gap:2,fontSize:v?16:14}})),[v]),k=a()("div",{style:{height:36,alignItems:"center",display:"flex"}},void 0,(0,B.t)(h.icon));if("active"===c.type)return s.createElement("div",{style:h.outer,ref:d},a()("div",{style:{display:"flex",gap:8,width:"100%"}},void 0,k,a()(He,{state:c,inputRef:e.inputRef,sessionId:t.sessionId})));const w=s.createElement("div",{style:h.outer,ref:d},l&&a()(tt,{temporaryListStore:l,isLoading:"results"===t.stage&&t.loading}),C&&g&&s.createElement(s.Fragment,null,C.map(((e,t)=>a()(_e.qS,{clientStep:e,parentStore:g,parentSpaceId:g.id,configurationState:y},t)))),a()("div",{style:{display:"flex",gap:8,width:"100%"}},void 0,k,"initialPrompt"===t.stage||"initialPromptForAIBlock"===t.stage?s.createElement(Ct,i()({},e,{paletteMode:(0,ke.rR)(t)})):t.loading?a()(Ye,{onDismiss:o,state:t,onRetry:n,onStop:r}):s.createElement(qe,e)));return s.createElement(s.Fragment,null,w,a()(vt,{state:t}))}function Ct(e){window.__c={n:"MainPopupInitialPromptContent"};const{query:t,onSubmit:o,paletteMode:n}=e,r=(0,ke.bJ)(),l=(0,h.useIntl)(),c="edit"===n?l.formatMessage(gt.editInputPlaceholder):l.formatMessage(gt.writeInputPlaceholder),d=t.trim().length>0;return s.createElement(Oe,i()({},e,{inputPlaceholder:c}),a()("div",{style:r.inputActions},void 0,a()(We,{onSubmit:o,canSend:d})))}o(30541);var ht=o(8848),kt=o(7500),wt=o(13148),bt=o(1230),St=o(25651),Mt=o(91427),xt=o(98519),It=o(55863),Pt=o(68204),At=(o(21703),o(36769)),Et=o(64275),_t=o(56666),Lt=o(37181);const Ft="recent-actions",Nt=(0,h.defineMessages)({recentActions:{defaultMessage:"Recents",id:"commandPalette.recentActions.title"},more:{defaultMessage:"See more",id:"commandPalette.recentActions.more"},removeFromMenu:{defaultMessage:"Remove this action from the menu",id:"commandPalette.recentActions.removeFromMenu"},addToFavorites:{defaultMessage:"Add to favorites",id:"commandPalette.recentActions.addToFavorites"}});function Tt(e){window.__c={n:"FavoriteButton"};const{focused:t,recentAction:o,state:n,intl:i,sessionId:r}=e,s=(0,u.O7)();return a()(G.Z,{style:{visibility:t?"visible":"hidden",width:18,height:18},onClick:()=>{w.VoR(s,{type:"create_from_recent",session_id:r,gtm_favorite_id:void 0}),n.set((0,ee.kg)(o))},icon:Mt.e,ariaLabel:i.formatMessage(Nt.addToFavorites)})}function Bt(){window.__c={n:"MoreIcon"};const e=(0,m.Fg)();return(0,_t.o)({width:12,fill:e.mediumIconColor,marginLeft:2,marginRight:2})}function Zt(e){if("completionPopup"!==e.type||"results"!==e.stage)return;const t=(0,I.xM)(e);return"initial"===t.type?t:void 0}(0,At.exposeDebugEnvironmentValue)("resetRecentAndFavoriteAIActions",(e=>()=>{const{currentUserSettingsStore:t}=Y.default.state;if(!t)throw new Error("currentUserSettingsStore not found");S.createAndCommit({userAction:"recentActions.debugging.resetRecentAndFavoriteAIActions",environment:e,perform(e){Lt.d2({userSettingsStore:t,transaction:e,data:{recent_ai_actions:[],favorite_ai_actions:[]}})}})}));const Rt="This string should never show up in analytics",Dt=(0,h.defineMessages)({clickToEditAndRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToEditAndRetry",defaultMessage:"Click to edit prompt and retry"},clickToRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToRetry",defaultMessage:"Click to retry"},tryAgain:{id:"completions.CompletionMenuActionBar.tryAgain",defaultMessage:"Try again"},delete:{id:"completions.CompletionMenuActionBar.delete",defaultMessage:"Discard"},close:{id:"completions.CompletionMenuActionBar.close",defaultMessage:"Close"},keep:{id:"completions.CompletionMenuActionBar.done",defaultMessage:"Done"},replace:{id:"completions.CompletionMenuActionBar.replace",defaultMessage:"Replace selection"},insert:{id:"completions.CompletionMenuActionBar.insert",defaultMessage:"Insert below"},addToFavorites:{id:"completions.CompletionMenuActionBar.addToFavorites",defaultMessage:"Add to favorites"}});function Ht(e){const{filter:t,state:o,from:n,favoriteEditingState:i,onUpdatePromptState:r,onImprove:l,context:c,intl:d,environment:u,completionResultInfo:p}=e,m=(0,Le.E8)(u.device);let f;switch(o.stage){case"initialPrompt":case"initialPromptForAIBlock":f=function(e){const{state:t,environment:o,intl:n,filter:i,from:r,onUpdatePromptState:l,favoriteEditingState:c,type:d}=e,{currentUserSettingsStore:u}=Y.default.state;if((0,Le.E8)(o.device))return[];const p=u?function(e,t,o,n,i){const r=i.filterOut.toLocaleLowerCase().trim(),l=(0,Q.pz)(o),c=[];let d=0;for(const s of l){const l="recentAction."+d++,u=r=>a()("div",{style:{display:"flex"}},void 0,a()(G.Z,{style:{visibility:r.focused?"visible":"hidden",width:18,height:18},onClick:()=>S.createAndCommit({userAction:"ai.recentActions.renderRemoveButton",environment:n,perform(e){(0,Q.lG)(s,o,e)}}),icon:Et.D,ariaLabel:t.formatMessage(Nt.removeFromMenu)}),"inactive"===i.favoriteEditingState.type?a()(Tt,{sessionId:e.sessionId,state:i.favoriteEditingState,focused:r.focused,recentAction:s,intl:t}):a()(k.xj,{type:"updatePrompt",focused:r.focused}));let p;if(s.prompt.toLocaleLowerCase().trim()!==r){switch(s.type){case"helpMeEdit":"initialPrompt"!==e.stage||"blockSelection"!==e.context.type&&"textSelection"!==e.context.type||(p=(0,k.cK)({key:l,name:s.prompt,analyticsName:"recentAction",right:u,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:z.zz}));break;case"helpMeWrite":"initialPromptForAIBlock"!==e.stage&&"cursor"!==e.context.type||(p=(0,k.cK)({key:l,name:s.prompt,analyticsName:"recentAction",right:u,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:z.zz}));break;default:(0,C.t1)(s)}p&&c.push(p)}}const u=c.slice(0,3),p=c.slice(3);if(p.length){const e=(0,z.$J)({key:"more recent actions",render:e=>s.createElement(V.Z,e),actions:p}),t=(0,z.MV)({key:"more recent actions extension",displayName:Nt.more,analyticsName:"Completions - more",validators:[],svg:()=>a()(Bt,{}),subActions:()=>[e],collapseSubActionsIntoParent:!0,width:400});u.push(t)}return[(0,z.$J)({key:Ft,title:Nt.recentActions,render:e=>s.createElement(V.Z,e),actions:u})]}(t,n,u,o,{onUpdatePromptState:l,favoriteEditingState:c,filterOut:i}):[],m=[...u&&"disabled"!==c.type?ae(o,t,n,u,{onUpdatePromptState:l,favoriteEditingState:c,filterOut:i}):[]];"initialPromptForAIBlock"===t.stage?m.push((0,k.xI)({store:t.store,from:r})):"aiBlock"!==d&&m.push(...(0,k.LK)({from:r,type:d,onUpdatePromptState:l}));return m.push(...p),m}({state:o,environment:u,intl:d,filter:t,from:n,context:c,favoriteEditingState:i,onUpdatePromptState:r,type:(0,ke.VZ)(o)});break;case"results":f=o.loading?[]:function(e){const{environment:t,state:o,defaultAction:n,isAssistant:i,closeOrDiscard:r,favoriteEditingState:l}=e,c={key:"insert",analyticsName:Rt,displayName:Dt.insert,validators:[],closeParentMenu:!0,svg:bt.H,action(){e.onInsert()}},d={key:"delete",analyticsName:Rt,displayName:Dt.delete,validators:[],closeParentMenu:!0,svg:de.y,action(){e.onCancel()}},u=function(e){const{state:t,onRetry:o}=e;if("results"!==t.stage)return;return{key:"tryAgain",analyticsName:Rt,displayName:Dt.tryAgain,validators:[],closeParentMenu:!0,svg:It.s,renderTooltip:()=>a()(Ot,{state:t}),action(){o()}}}({...e}),p=[],m=xt.k;if(i)return[(0,z.$J)({key:"main",render:e=>s.createElement(V.Z,e),actions:[(0,z.cN)({key:"keep",analyticsName:Rt,displayName:Dt.keep,validators:[],closeParentMenu:!0,svg:m,action(){e.onAccept({exitType:"accept"})}})]})];"accept"===n?p.push((0,z.cN)({key:"keep",analyticsName:Rt,displayName:Dt.keep,validators:[],closeParentMenu:!0,svg:m,action(){e.onAccept({exitType:"accept"})}})):"replace"===n?p.push((0,z.cN)({key:"replace",analyticsName:Rt,displayName:Dt.replace,validators:[],closeParentMenu:!0,svg:m,action(){e.onReplace()}}),(0,z.cN)(c)):"insert"===n?p.push((0,z.cN)({...c,svg:m})):(0,C.t1)(n);p.push((0,z.cN)({key:"continueWriting",analyticsName:Rt,displayName:I.Dr.continueWriting,validators:[],closeParentMenu:!0,svg:Ut(St.R),action(){e.onImprove({type:"continueWriting"})}}),(0,z.cN)({key:"makeLonger",analyticsName:Rt,displayName:I.Dr.makeLonger,validators:[],closeParentMenu:!0,svg:Ut(kt.H),action(){e.onImprove({type:"makeLonger"})}}),(0,z.cN)({key:"addToFavorites",analyticsName:Rt,displayName:Dt.addToFavorites,validators:[()=>Boolean(Kt(o,l))],closeParentMenu:!0,svg:Ut(Mt.e),action(){const e=Kt(o,l);if(!e)return;const n=(0,ee.kg)(e.recentAction);e.favoriteEditingState.set(n),w.VoR(t,{type:"create_from_completion",session_id:o.sessionId,gtm_favorite_id:void 0})}}),(0,z.cN)({key:"convertToAiBlock",analyticsName:Rt,displayName:I.Dr.insertAIBlock,validators:[()=>{if("completionPopup"!==o.type||"results"!==o.stage||"cursor"!==o.context.type)return!1;const e=Zt(o);return!!e&&Boolean(Le.Xi[e.clientPrompt.key])}],closeParentMenu:!0,svg:Ut(B.t),action(){e.onAccept({exitType:"convert_to_ai_block"})}}));const f=[u?(0,z.cN)(u):void 0,"discard"===r?(0,z.cN)(d):(0,z.cs)({key:"close",analyticsName:Rt,displayName:Dt.close,validators:[],closeParentMenu:!0,svg:wt.U,shortcuts:["esc"],action(){e.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0})}})],v=(0,z.$J)({key:"main",render:e=>s.createElement(V.Z,e),actions:p}),g=(0,z.$J)({key:"final",render:e=>s.createElement(V.Z,e),actions:f.filter(C.$K)});return[v,g]}({environment:u,state:o,onImprove:l,closeOrDiscard:"cursor"===o.context.type?"close":"discard",isAssistant:m,favoriteEditingState:i,...p});break;default:(0,C.t1)(o)}let v=(0,Pt.sG)({sections:f,context:c,query:t});if(1===v.length&&v[0].key===Ft){const e=v[0].actions.slice();(0,I.LN)(t,d)||e.unshift((0,k.sH)({customPrompt:t,execute:p.onSubmit})),v=[(0,z.$J)({key:"actions",render:e=>s.createElement(V.Z,e),actions:e})]}else(function(e){let t=!1;for(const o of e)if(o.key===te)t=!0;else if(o.key!==Ft)return!1;return t})(v)&&v.push((0,z.$J)({key:"literal-actions",render:e=>s.createElement(V.Z,e),actions:[(0,k.sH)({customPrompt:t,execute:p.onSubmit})]}));return v}function Vt(e,t){switch(t.type){case"continueWriting":return e.formatMessage(I.Dr.continueWriting);case"makeLonger":return e.formatMessage(I.Dr.makeLonger);case"helpMeEdit":return t.prompt}}function Ot(e){window.__c={n:"TryAgainTooltip"};const{state:t}=e,o=(0,m.yK)((e=>({hint:{color:e.mediumInvertedTextColor}})),[]),n=(0,I.xM)(t),i=(0,h.useIntl)();let r,l=Dt.clickToEditAndRetry;if("initial"===n.type)if(L.doesPromptNeedAdditionalUserInput(n))r=(0,I.gY)(n);else{l=Dt.clickToRetry;const e=n.clientPrompt.name;r="string"==typeof e?e:i.formatMessage(e)}else"followup"===n.type?r=Vt(i,n.improvement):(0,C.t1)(n);return s.createElement(s.Fragment,null,a()("div",{},void 0,r),a()("div",{style:o.hint},void 0,i.formatMessage(l)))}function Ut(e){return()=>a()(k.lA,{svg:e,svgFill:ht.FN.light.purple[400]})}function Kt(e,t){if("disabled"===t.type)return;const o=Zt(e);if(!o)return;const{currentUserSettingsStore:n}=Y.default.state;if(!n)return;const i=(0,Q.BG)({clientPrompt:o.clientPrompt,additionalContext:o.additionalContext,promptTitle:o.promptTitle});return i&&!(0,ee.Gl)(n,i)?{currentInitialRevision:o,recentAction:i,favoriteEditingState:t,currentUserSettingsStore:n}:void 0}function $t(e){window.__c={n:"MenuPopupContent"};const{sections:t,onCloseParentMenu:o,context:n,menuListStore:i}=e,r=(0,s.useCallback)((e=>{e.closeParentMenu&&o()}),[o]),l=(0,u.O7)(),c=(0,p.VK)((()=>l.device.isPhone),[l]);return a()(me.Z,{menuType:c?ye.og.ActionSheet:ye.og.Popup,width:"100%",maxHeight:c?"min(17vh, 160px)":"min(40vh, 320px)",maxWidth:"100%"},void 0,a()(ue.Z,{menuListStore:i,sections:t,onAccept:r,initialFocus:0,context:n}))}var Wt=o(51454),zt=o(69454),Jt=o(77794),qt=o(21199),Gt=o(57559);function jt(e){window.__c={n:"PopupPositioner"};const{scrollerStore:t,openState:o,children:n}=e,[r,l]=(0,s.useState)(Date.now()),c=(0,s.useCallback)((()=>l(Date.now())),[]),d=(0,s.useRef)(null),[u,f]=(0,s.useState)(void 0),[v,g]=(0,s.useState)(void 0),y=(0,p.VK)((()=>{const e=(0,ke.$b)(o);if(!e)return;const n=(0,I.wA)(e);if(!n)return;const{origin:i}=e;"results"!==o.stage&&n&&i instanceof Gt.G&&("spacebar"===o.from||i.isEmptyEditableBlock())&&(n.height=0);const r=t.state,a=r.clientRect??new DOMRect,s=r.scrollTop;return function(e){const{openState:t,originRect:o,scrollerRect:n,scrollerScrollTop:i,popupRect:r}=e,a=(null==r?void 0:r.height)??0,s=(null==r?void 0:r.width)??0,l=Math.min(Math.max(o.width,500),730);let c;const d=o.bottom-n.top+i+Xt;o.bottom+a+Xt+Qt>n.bottom&&(c=d-(n.height-a-Qt+i));let u;s+eo+to>n.width?u=eo:o.left+s>n.right?u=n.width-s-to:(u=o.left-n.left,"initialPromptForAIBlock"===t.stage&&(u-=s-o.width));return{top:d,left:u,width:l,scrollTopIntoView:c}}({openState:o,originRect:n,scrollerRect:a,scrollerScrollTop:s,popupRect:u})}),[t,u,o]);(0,s.useEffect)((()=>{y&&g(y)}),[y]);const C=y??v;(0,s.useEffect)((()=>{if(Date.now()-r>500)return;const e=null==C?void 0:C.scrollTopIntoView;if(!e)return;const o=oo(t);o&&Yt(e,o)}),[null==C?void 0:C.scrollTopIntoView,t,r]);const h=(0,m.yK)((e=>({wrap:{position:"absolute",left:null==C?void 0:C.left,top:null==C?void 0:C.top,width:null==C?void 0:C.width,zIndex:Wt.lB}})),[C]);(0,s.useEffect)((()=>{const e=new Jt.E;if(!d.current)throw new Error("ref.current is null");return e.observe(d.current),e.rect.addListener((e=>{f(e.state)})),()=>{e.destroy()}}),[]);const k="results"===o.stage&&!o.loading;(0,s.useEffect)((()=>{k&&c()}),[k,c]);const w="results"===o.stage&&o.loading,b=(0,ke.jq)({resetWhenScrolledToBottom:!1,areWeLoading:w,scrollerStore:t}),S="results"===o.stage&&"cursor"===o.context.type,[M,x]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{!w||!S&&M||(b?Yt.cancel():null!=C&&C.scrollTopIntoView&&(c(),x(!0)))}),[b,M,S,w,C,c]),a()(qt.Z,{capture:!0,render:e=>a()(Be.Z,{capture:!0,allowMenuList:!0,allowEsc:!0},void 0,s.createElement("div",i()({style:h.wrap,ref:d},e),C&&n))})}const Yt=W.Ds(((e,t)=>{t.scrollByOffset(e,0,{animate:!0}),j.Z.MenuScroller&&j.Z.MenuScroller.scrollToTop()}),60),Xt=4,Qt=6,eo=6,to=16;function oo(e){var t,o;return e===(null===(t=j.Z.PageScroller)||void 0===t?void 0:t.stores.store)?j.Z.PageScroller:e===(null===(o=j.Z.PeekViewScroller)||void 0===o?void 0:o.stores.store)?j.Z.PeekViewScroller:void 0}function no(e){window.__c={n:"MobilePopupPositioner"};const{children:t,scrollerStore:o,openState:n}=e,[i,r]=(0,s.useState)(Date.now()),a=(0,s.useRef)(null),[l,c]=(0,s.useState)(void 0),d=(0,s.useCallback)((()=>r(Date.now())),[]),{WindowSizeStore:m}=(0,u.O7)();(0,s.useEffect)((()=>{const e=new Jt.E,t=a.current;if(!t)throw new Error("ref.current is null");e.observe(t);let o=t.getBoundingClientRect().top;e.rect.addListener((e=>{o=e.state.top,c(e.state)}));const n=setInterval((()=>{const n=t.getBoundingClientRect().top;n!==o&&(o=n,e.recompute())}),50);return()=>{e.destroy(),clearInterval(n)}}),[]);const f="results"===n.stage&&!n.loading,g=("results"===n.stage||"initialPrompt"===n.stage)&&"cursor"===n.context.type,y=(0,p.VK)((()=>{const e=(0,ke.$b)(n);if(!e)return;const t=(0,I.wA)(e);if(!t)return;if(!l)return;const o=t.bottom-l.top;return o>0?o:void 0}),[n,l]);(0,s.useEffect)((()=>{if(Date.now()-i>500)return;if(!y)return;const e=oo(o);e&&Yt(y,e)}),[y,o,i]),(0,s.useEffect)((()=>{f&&g&&d()}),[f,g,d]);const C="results"===n.stage&&n.loading,h=(0,v.D9)(C),[k,w]=(0,s.useState)();(0,s.useEffect)((()=>{h&&!C&&w(Date.now())}),[C,h]),(0,s.useEffect)((()=>{const e=!!k&&Date.now()-k<1e3;(C||e)&&g&&y&&d()}),[g,C,d,y,k]);const b=(0,p.VK)((()=>{const e=zt.Z.state.phase===zt.i.hidden||zt.Z.state.phase===zt.i.willHide,t=zt.Z.estimatedNativeWebBottomOverlap()+Qt;return e?m.getSafePaddingBottomPx(t):t}),[m]);return s.createElement("div",{ref:a,style:{position:"absolute",bottom:b,left:eo,right:eo,zIndex:Wt.Mo}},t)}const io="notion-alternate-ai-ui";function ro(e){window.__c={n:"CompletionPopup"};const{scrollerStore:t}=e,o=(0,u.O7)(),n=(0,p.VK)((()=>E.default.state),[]);(0,F.w9)(n);const i=(0,s.useMemo)((()=>(0,ke.RR)(n)),[n]),r=(0,p.VK)((()=>i&&(0,ke.$b)(i)),[i]),l=(0,p.VK)((()=>o.device.isPhone),[o]);return i?t!==(null==r?void 0:r.scrollerStore)?null:a()(l?no:jt,{scrollerStore:t,openState:i},void 0,a()(ao,{openState:i})):null}function ao(e){window.__c={n:"PopupContent"};const{openState:t}=e,o=(0,u.O7)(),n=(0,h.useIntl)(),r=(0,s.useState)(function(e){switch(e.stage){case"results":return"";case"initialPromptForAIBlock":return e.prompt??e.prefilledValue;case"initialPrompt":return e.prefilledValue}}(t))[0],[B,Z]=function(e){const t=(0,h.useIntl)(),[o,n]=(0,s.useState)("");return[(0,p.VK)((()=>{if("initialPromptForAIBlock"!==e.stage||!(0,I.dU)())return o;const n=e.store.getTitleValue();return(0,g.X)({intl:t,textValue:n,getRecordModel:e.store.getRecordModel,userTimeZone:(0,f.r)()})}),[o,t,e]),n]}(t),[R,D]=(0,s.useState)(!1),[H,V]=(0,s.useState)(!1),[O,K]=(0,s.useState)(""),$=ne(),z=(0,s.useRef)(null),q=(0,ke.rR)(t),G=(0,s.useMemo)((()=>({environment:o,blocks:[],publicEditMode:void 0})),[o]);(0,F.lZ)(t);const j=(0,s.useCallback)((e=>{w.ovL(o,{session_id:t.sessionId,type:e.analyticsName,gtm_favorite_id:e.gtmFavoriteId}),Z(e.insertText),L.maybeSetPromptForCurrentAiBlock(o,e.insertText),e.executeImmediately&&D(!0),z.current&&z.current.focusInput()}),[t.sessionId,o,Z]),Q="results"===t.stage?(0,I.xM)(t).completion:void 0,te=(0,v.Z_)(Q,L.COMPLETION_THROTTLE,y.Z),oe="results"===t.stage?t:void 0,ie=(0,s.useMemo)((()=>{if(!oe||"textSelection"!==oe.context.type&&"blockSelection"!==oe.context.type)return;const{userSearchCache:e}=(0,I.xM)(oe);return te?l.Z.withListenerIgnored((()=>{const t=new c.Z({name:"CompletionPopup.PopupContent",isTemporaryData:!0}),n=S.createAndCommit({userAction:"CompletionPopup.temporarymarkdownToBlocks",environment:o,canUndo:!1,perform:n=>{const i=b.Mt({environment:o,text:te,inMemoryRecordCache:t,transaction:n,markdownOptions:(0,P.N9)(e)});if(i)return L.postProcessAICreatedStores(o,i),b.Lh({environment:o,stores:i,inMemoryRecordCache:t,transaction:n})}}).performResult;return t.addCacheFallback(o.defaultRecordCache.inMemoryRecordCache),n})):void 0}),[oe,te,o]),re=(0,p.VK)((()=>{if(!ie||!oe||"completionPopup"!==oe.type||"results"!==oe.stage||"textSelection"!==oe.context.type&&"blockSelection"!==oe.context.type)return;return oe.context.stores.every((e=>{const t=e.getType();return!!t&&("blockSelection"===oe.context.type?Boolean(A.d[t]):"textSelection"===oe.context.type&&Boolean(A.D[t]))}))}),[oe,ie]);let ae=!0,se=!1;switch(t.stage){case"initialPrompt":if(t.futureRevisions.length>0)break;case"initialPromptForAIBlock":ae=!1;break;case"results":t.loading||"cursor"!==t.context.type||""!==B||(se=!0);break;default:(0,C.t1)(t)}const le=function(e){const{environment:t,sessionId:o}=e,n=(0,s.useCallback)((e=>{let{exitType:n,selectInsertion:i}=e;const r=E.default.state;"completionPopup"!==r.type||"results"!==r.stage||r.loading||(w.HCf(t,{session_id:o,inference_id:(0,I.xM)(r).inferenceId,exit_type:n}),S.createAndCommit({userAction:"CompletionPopup.handleAccept",environment:t,perform:e=>{L.acceptCursorCompletion({environment:t,transaction:e,selectInsertion:i,exitType:n})}}))}),[t,o]),i=(0,s.useCallback)((()=>{const e=E.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||((0,ke.Tq)(t),w.HCf(t,{session_id:o,inference_id:(0,I.xM)(e).inferenceId,exit_type:"insert"}),"textSelection"===e.context.type?S.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{L.insertTextSelectionCompletion({environment:t,transaction:e})}}):"blockSelection"===e.context.type&&S.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{L.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!1})}}))}),[t,o]),r=(0,s.useCallback)((()=>{const e=E.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||"textSelection"!==e.context.type&&"blockSelection"!==e.context.type||((0,ke.Tq)(t),w.HCf(t,{session_id:o,inference_id:(0,I.xM)(e).inferenceId,exit_type:"replace"}),"textSelection"===e.context.type?S.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{L.replaceTextSelectionCompletion({environment:t,transaction:e})}}):"blockSelection"===e.context.type&&S.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{L.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!0})}}))}),[t,o]);return(0,s.useMemo)((()=>({onAccept:n,onInsert:i,onReplace:r})),[n,i,r])}({environment:o,sessionId:t.sessionId});(0,s.useEffect)((()=>{Z(r),z.current&&z.current.focusInput()}),[r,Z]);const ce="results"===t.stage&&t.hasErrored,de=(0,v.D9)(ce),ue=ce&&!de,pe=(0,s.useCallback)((e=>{const{purgeFromHistory:t}=e,i=L.revertCurrentCompletionRevision({environment:o,purgeFromHistory:t});i&&"followup"===i.type&&(Z(Vt(n,i.improvement)),z.current&&z.current.focusInput())}),[o,n,Z]),me=(0,s.useCallback)((()=>{"results"===t.stage&&(L.revertCurrentCompletionRevision({environment:o,purgeFromHistory:!1}),z.current&&z.current.focusInput())}),[t,o]),fe=(0,s.useCallback)((()=>{"results"===t.stage&&(L.redoCompletionRevision(o),z.current&&z.current.focusInput())}),[o,t]);(0,s.useEffect)((()=>{if(!ue||"results"!==t.stage)return;const{sessionId:e}=t;if((0,I.sr)(t))return void pe({purgeFromHistory:!0});const n=(0,I.Iz)(t);L.doesPromptNeedAdditionalUserInput(n)?(Z(O),(0,T.jn)({environment:o})):L.cancelCompletion({environment:o,sessionId:e,inferenceId:n.inferenceId,exitType:"error_modal"})}),[o,ue,t,O,pe,Z]);const ve=(0,s.useCallback)((()=>{if("results"!==t.stage)return;const{sessionId:e}=t,n=(0,I.xM)(t);if((0,I.sr)(t))return w.XwB(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!0}),void pe({purgeFromHistory:!1});w.XwB(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!1});const i=(0,I.Iz)(t);L.doesPromptNeedAdditionalUserInput(i)?(Z((0,I.gY)(i)),(0,T.jn)({environment:o})):L.handleCompletionPopupRetry({environment:o})}),[o,t,pe,Z]),ge=(0,s.useCallback)((()=>{if("results"!==t.stage)return;if(!(0,I.xM)(t).completion)return(0,I.sr)(t)?void pe({purgeFromHistory:!0}):(Z(O),void(0,T.jn)({environment:o}));L.stopCompletion(o)}),[t,o,pe,O,Z]),ye=(0,s.useCallback)((()=>{V(!1),d.default.afterNextFlush((()=>{z.current&&z.current.focusInput()}))}),[]),Ce=(0,s.useCallback)((()=>{switch(t.stage){case"initialPromptForAIBlock":w.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,T.fz)();break;case"initialPrompt":Z(""),(0,T.sj)();break;case"results":break;default:(0,C.t1)(t)}}),[t,o,Z]),we=(0,s.useCallback)((e=>{switch((0,ke.Tq)(o),V(!1),t.stage){case"initialPrompt":case"initialPromptForAIBlock":w.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:e}),(0,T.fz)();break;case"results":L.cancelCompletion({environment:o,sessionId:t.sessionId,inferenceId:(0,I.xM)(t).inferenceId,exitType:e});break;default:(0,C.t1)(t)}}),[t,o]),be=(0,s.useCallback)((()=>we("cancel")),[we]),Me=(0,s.useCallback)((()=>{"active"!==$.type?se?le.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0}):ae?V(!0):we("click_outside_window_cancel"):async function(e){const{state:t}=e,{currentUserSettingsStore:o}=Y.default.state;if(o){const e=(0,ee.JS)(o).filter((e=>e.id===t.current.id));if(e.length>0&&W.Xy(t.current,e[0]))return void t.clear()}await J.confirmUserAction({message:a()(h.FormattedMessage,{defaultMessage:"Are you sure you want to stop editing your favorite? Unsaved changes will be lost.",id:"ai.favoriteActions.cancelConfirmation"}),acceptLabel:a()(h.FormattedMessage,{defaultMessage:"Discard changes",id:"ai.favoriteActions.cancelConfirmation.discardChanges"}),cancelLabel:a()(h.FormattedMessage,{defaultMessage:"Go back",id:"ai.favoriteActions.cancelConfirmation.goBack"})})&&t.clear()}({state:$})}),[$,se,le,we,ae]),xe=(0,p.VK)((()=>(0,I.dU)()),[]);(0,s.useEffect)((()=>{function e(e){return!!(e instanceof Element&&(e.closest(`.${io}`)||e.closest(`.${x.YPt}`)||e.closest(`.${x.p4m}`)||e.closest(`.${x.zov}`)))}function t(t){xe||!e(t.target)&&e(t.relatedTarget)&&t.relatedTarget instanceof HTMLElement&&t.relatedTarget.focus()}function o(t){e(t.target)||("click"!==t.type&&"contextmenu"!==t.type||Me(),xe||(t.preventDefault(),t.stopPropagation()))}if(!H)return window.addEventListener("focus",t,!0),window.addEventListener("click",o,!0),window.addEventListener("contextmenu",o,!0),window.addEventListener("mousedown",o,!0),window.addEventListener("mouseup",o,!0),window.addEventListener("mouseover",o,!0),window.addEventListener("mouseout",o,!0),window.addEventListener("mouseenter",o,!0),window.addEventListener("mouseleave",o,!0),window.addEventListener("mousemove",o,!0),()=>{window.removeEventListener("focus",t,!0),window.removeEventListener("click",o,!0),window.removeEventListener("contextmenu",o,!0),window.removeEventListener("mousedown",o,!0),window.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseover",o,!0),window.removeEventListener("mouseout",o,!0),window.removeEventListener("mouseenter",o,!0),window.removeEventListener("mouseleave",o,!0),window.removeEventListener("mousemove",o,!0)}}),[Me,H,xe]);const Ie=(0,s.useCallback)((e=>{K(B),Z(""),L.improveCompletion(o,e)}),[o,B,Z]),Ee=(0,s.useCallback)((()=>{switch(t.stage){case"initialPrompt":(0,T.sj)(),K(B),Z(""),(0,k.Hh)({environment:o,inputValue:B,from:t.from,mode:q});break;case"initialPromptForAIBlock":w.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,T.fz)(),K(B),Z(""),(0,k.F0)({environment:o,inputValue:B,store:t.store});break;case"results":Ie({type:"helpMeEdit",prompt:B});break;default:(0,C.t1)(t)}}),[B,q,t,o,Ie,Z]);(0,s.useEffect)((()=>{R&&(D(!1),Ee())}),[R,Ee]);let _e="insert";"results"===t.stage&&"cursor"===t.context.type?_e="accept":re&&(_e="replace");const Le=(0,p.VK)((()=>t?Ht({environment:o,intl:n,filter:B,state:t,from:t.from,favoriteEditingState:$,onUpdatePromptState:j,onImprove:Ie,context:G,completionResultInfo:{...le,onRetry:ve,onSubmit:Ee,onCancel:be,defaultAction:_e}}):[]),[$,G,o,j,Ee,Ie,B,n,t,le,ve,be,_e]),Fe=Le.length>0,Ne=(0,s.useMemo)((()=>new _.Z),[]);(0,s.useEffect)((()=>{Ne.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[B,Ne]);const Te=(0,p.VK)((()=>o.device.isPhone),[o]),Be=(0,m.yK)((e=>({mainPopup:{borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,overflow:"hidden",isolation:"isolate"},menuPopup:{marginTop:4,marginBottom:4,borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,width:Te?"100%":320,overflow:"hidden",isolation:"isolate"}})),[Te]),Ze=(0,s.useRef)(null);let Re;"active"===$.type?Re=s.createElement("div",{style:Be.menuPopup,ref:Ze,className:io},a()(he,{sessionId:t.sessionId,state:$,context:G})):Fe&&(Re=s.createElement(s.Fragment,null,s.createElement("div",{style:Be.menuPopup,ref:Ze,className:io},a()($t,{sections:Le,onCloseParentMenu:Ce,context:G,menuListStore:Ne})),a()(N.gl,{originRef:Ze,openState:t,isInputEmpty:!B})));const De=(0,s.useRef)(null),He=function(e){const{openState:t,undoRevision:o,redoRevision:n}=e,i=(0,u.O7)(),r=(0,h.useIntl)(),a=(0,p.VK)((()=>X.default.checkGate("ai_multi_level_undo")),[]),l=(0,s.useCallback)((()=>{o(),Ae(i,"undo")}),[i,o]),c=(0,s.useCallback)((()=>{n(),Ae(i,"redo")}),[i,n]);if("results"!==t.stage||!a)return Pe;const d=t.revisions.length,m=t.futureRevisions.length,f=d+m,v=d;return 1===f?Pe:{onUndo:d>1?l:void 0,onRedo:m>0?c:void 0,historyLabel:r.formatMessage(Se.historyLabel,{currentRevision:v.toString(),totalRevisions:f.toString()})}}({openState:t,undoRevision:me,redoRevision:fe});return xe?s.createElement(s.Fragment,null,a()(M.Z,{capture:!0,onEsc:Me}),Re):s.createElement(s.Fragment,null,a()(M.Z,{capture:!0,onEsc:Me}),Te&&Re,a()(N.RD,{originRef:De,openState:t}),s.createElement("div",{ref:De,className:io,style:Be.mainPopup},s.createElement(yt,i()({state:t,onDismiss:Me,onCompletionRetry:ve,onCompletionStop:ge,query:B,setQuery:Z,onSubmit:Ee,submitOnEnter:!Fe&&!H,inputRef:z,temporaryListStore:ie,favoriteEditingState:$},He))),!Te&&Re,a()(U,{open:H,onConfirmExit:be,onCancelExit:ye}))}var so=o(63143);function lo(e){window.__c={n:"AiEligibilityUpdater"};const t=(0,u.O7)(),o=(0,p.VK)((()=>"completionPopup"===E.default.state.type),[]),n=(0,v.D9)(o)&&!o,i=o?30*so.C0:30*so.hM,r=(0,p.VK)((()=>{var e;return null===(e=Y.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,s.useEffect)((()=>{async function e(){r&&await L.updateAiEligibility(t,r)}const o=setInterval((()=>{e()}),i);return n||e(),()=>{clearInterval(o)}}),[t,r,i,n]),null}},16859:(e,t,o)=>{o.d(t,{d:()=>N});var n=o(10434),i=o.n(n),r=o(23174),a=o.n(r),s=o(67294),l=o(480),c=o(5366),d=o(73063),u=o(53437),p=o(26388),m=o(51224),f=o(24405),v=o(64275),g=o(81570),y=o(83065),C=o(82990),h=o(42922),k=o(64921),w=o(60458),b=o(1743),S=o(74194),M=o(16354),x=o(64369),I=o(42402),P=o(43250),A=o(18514);function E(e){const{checked:t,onChange:o}=e;return a()("div",{style:{display:"flex",gap:6,alignItems:"center"}},void 0,a()(w.Z,{checked:t,onClick:o,size:14}),a()("div",{onClick:o},void 0,a()(x.Z,{style:{cursor:"pointer"},isSmall:!0},void 0,a()(c.FormattedMessage,{defaultMessage:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"}))))}function _(){window.__c={n:"OptInLearnMore"};const e=(0,f.yK)((e=>({container:{display:"flex",flexDirection:"row"},giftIcon:{width:16,height:16,fill:e.lightIconColor},message:{marginLeft:9,color:e.mediumTextColor,fontSize:12}})),[]);return a()("div",{style:e.container},void 0,(0,g.T)(e.giftIcon),a()("div",{style:e.message},void 0,a()(c.FormattedMessage,{defaultMessage:"You’re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>a()(I.Z,{external:!0,href:(0,A.UY)("ai.dataSharingTerms")},void 0,e)}})))}function L(e){window.__c={n:"ShareDataPopup"};const{onSubmit:t}=e,o=(0,f.yK)((e=>({container:{width:300,display:"flex",flexDirection:"column",alignItems:"center",padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},giftIcon:{width:24,height:24,fill:e.lightIconColor},terms:{color:e.mediumTextColor,textAlign:"center",fontSize:13},shareButton:{width:"100%",marginTop:17,paddingTop:7,paddingBottom:7},notNowButton:{color:e.mediumTextColor,fontSize:14,marginTop:15},title:{textAlign:"center",marginTop:9,marginBottom:8,fontWeight:C.Z.fontWeight.semibold}})),[]);return a()("div",{style:o.container},void 0,a()("div",{style:o.closeButtonContainer},void 0,a()(k.Z,{onClick:()=>{t({optIn:!1})},style:o.closeButton,hoveredStyle:o.closeButtonHover},void 0,(0,v.D)(o.closeButtonIcon))),(0,g.T)(o.giftIcon),a()("div",{style:o.title},void 0,a()(c.FormattedMessage,{defaultMessage:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})),a()("div",{style:o.terms},void 0,a()(c.FormattedMessage,{defaultMessage:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:a()("br",{}),aiTerms:e=>a()(I.Z,{external:!0,href:(0,A.UY)("ai.dataSharingTerms")},void 0,e)}})),a()(h.Z,{style:o.shareButton,onClick:()=>{t({optIn:!0})}},void 0,a()(c.FormattedMessage,{defaultMessage:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})),a()(M.Z,{style:o.notNowButton,onClick:()=>{t({optIn:!1})}},void 0,a()(c.FormattedMessage,{defaultMessage:"Not now",id:"completions.ShareDataPopup.notNowButton"})))}function F(e){window.__c={n:"FeedbackPopup"};const{state:t,onUpdate:o,onSubmit:n,onCancel:i,userOptIn:r}=e,u=(0,s.useCallback)((()=>{o({...t,shareWithNotion:!t.shareWithNotion})}),[t,o]),p=(0,s.useCallback)((()=>{n(t)}),[n,t]),m=(0,s.useCallback)((e=>{o({...t,userContent:e.target.value})}),[o,t]),f=(0,c.useIntl)(),v=(0,l.O7)(),g=!r;return a()("div",{style:{padding:14,...v.device.isMobile?{width:"100%"}:{minWidth:400}},className:P.YOJ},void 0,a()(b.Z,{capture:!0},void 0,a()(S.Z,{value:t.userContent,onChange:m,onSubmit:e=>{e.stopPropagation(),p()},onCancel:i,focusInitial:!0,placeholder:f.formatMessage({id:"completions.FeedbackPopup.userCommentPlaceholder",defaultMessage:"How could the output be improved? (optional)"})}),a()("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10}},void 0,g?a()(E,{checked:t.shareWithNotion,onChange:u}):a()(_,{}),a()(d.Z,{icon:y._,onClick:p,ariaLabel:f.formatMessage({id:"completions.FeedbackPopup.submitButtonLabel",defaultMessage:"Submit feedback"}),isBlue:!0,iconStyle:{height:24,width:24},style:{height:20,width:20}}))))}function N(e){window.__c={n:"FeedbackButtonWithPopup"};const{type:t,ariaLabel:o,onClick:n,feedbackState:r,onDismiss:f,onSubmit:v,onUpdate:g,showShareDataPopup:y,onDataShareSubmit:C,userOptIn:h,iconButtonStyles:k}=e,w=(0,l.O7)(),b=t===(null==r?void 0:r.type),S=(0,m.L)(t,b),M=(0,s.useCallback)((()=>n(t)),[n,t]),x=a()(p.Z,{renderTooltip:()=>a()("div",{},void 0,a()(c.FormattedMessage,{defaultMessage:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})),placement:p.Z.Placement.Bottom,render:e=>s.createElement(d.Z,i()({onClick:M,icon:S,ariaLabel:o,style:{...k}},e))});return a()(u.ZP,{origin:x,open:(null==r?void 0:r.type)===t,popupType:w.device.isMobile?u.kQ.SlideUp:u.kQ.Popup,onDismiss:f,render:()=>r?y?a()(L,{onCancel:f,onSubmit:C}):a()(F,{state:r,onSubmit:v,onUpdate:g,onCancel:f,userOptIn:h}):null})}},51224:(e,t,o)=>{o.d(t,{u:()=>x,L:()=>M});var n=o(23174),i=o.n(n),r=o(67294),a=o(480),s=o(86628),l=o(33676),c=o(45238);const d=i()("path",{d:"M4 12.1875C3.99219 15.1641 6.34375 17.4297 10.0859 17.4375H11.1719C12.1953 17.4375 12.9766 17.3594 13.4297 17.2422C14.1016 17.0781 14.7031 16.6562 14.7031 15.8828C14.7031 15.5859 14.625 15.3594 14.5312 15.1875C14.4766 15.1016 14.4922 15.0234 14.5703 14.9922C15.0859 14.7578 15.4766 14.2812 15.4766 13.6562C15.4766 13.2969 15.375 12.9766 15.2031 12.75C15.125 12.6406 15.1406 12.5469 15.2656 12.4766C15.625 12.25 15.875 11.7891 15.875 11.2656C15.875 10.8828 15.7578 10.4844 15.5547 10.2812C15.4453 10.1797 15.4609 10.1094 15.5781 10.0156C15.8281 9.78906 15.9844 9.41406 15.9844 8.96094C15.9844 8.15625 15.3516 7.5 14.5234 7.5H11.7031C11.0234 7.5 10.5781 7.15625 10.5781 6.60156C10.5781 5.54688 11.9141 3.57812 11.9141 2.14844C11.9141 1.375 11.4219 0.90625 10.75 0.90625C10.1641 0.90625 9.85938 1.28906 9.53125 1.9375C8.33594 4.24219 6.75781 6.11719 5.54688 7.72656C4.49219 9.11719 4.00781 10.3125 4 12.1875ZM0.015625 12.25C0.015625 14.6719 1.52344 16.6719 3.53125 16.6719H4.89062C3.47656 15.5938 2.85156 13.9922 2.86719 12.1719C2.875 10.2031 3.57812 8.77344 4.32031 7.79688H3.23438C1.41406 7.79688 0.015625 9.75 0.015625 12.25Z"}),u=(0,c.I)("thumbUpFilled",{viewBox:"0 0 16 18",svg:d}),p=(0,c.I)("thumbDownFilled",{viewBox:"0 0 16 18",svg:i()("g",{transform:"rotate(180 8 9)"},void 0,d)});var m=o(39986),f=o(5366),v=o(50906),g=o(64964),y=o(39699),C=o(37181),h=o(8323),k=o(80444),w=o(77080),b=o(84254),S=o(16859);function M(e,t){switch(e){case"thumbsup":return t?u:m.P;case"thumbsdown":return t?p:l.A}}function x(e){window.__c={n:"FeedbackButtons"};const{revision:t}=e,o=(0,f.useIntl)(),n=(0,a.O7)(),[l,c]=(0,r.useState)(void 0),[d,u]=(0,r.useState)(!1),p=(0,r.useRef)(null),m=(0,s.VK)((()=>w.default.checkGate("ai_data_sharing")),[]),M=(0,s.VK)((()=>k.default.state.currentUserSettingsStore),[]),x=(0,s.VK)((()=>{var e;const t=null==M||null===(e=M.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,o=!(0,h.mq)();return!Boolean(t)&&o}),[M]),I=(0,s.VK)((()=>{var e;return(null==M||null===(e=M.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??false}),[M]),P=(0,r.useCallback)((()=>{g.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",defaultMessage:"Thanks for submitting feedback!"})})}),[o]),A=(0,r.useCallback)((e=>{p.current=document.activeElement,c((t=>({userContent:"",shareWithNotion:true,...t,type:e})))}),[]),E=(0,r.useCallback)((e=>{e.shareWithNotion&&x&&m?u(!0):(P(),c(void 0)),b.submitFeedbackForRevision({...e,environment:n,revision:t,userOptIn:I})}),[t,n,I,x,m,P]),_=(0,r.useCallback)((e=>{e&&e.stopPropagation&&e.stopPropagation(),c(void 0),p.current&&p.current instanceof HTMLElement&&p.current.focus()}),[]),L=(0,r.useCallback)((e=>{const{optIn:t}=e;M&&(y.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:n,userId:M.id,perform:e=>{C.d2({userSettingsStore:M,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),v.bd0(n,{user_opt_in:t}),t?g.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.dataShareThanks",defaultMessage:"Thank you for your help making Notion better!"})}):P(),u(!1),c(void 0))}),[o,M,n,P]);return t.hasFeedback&&!d?null:r.createElement(r.Fragment,null,i()(S.d,{type:"thumbsup",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsUp",defaultMessage:"Submit positive feedback"}),onClick:A,feedbackState:l,onDismiss:_,onSubmit:E,onUpdate:c,showShareDataPopup:d,onDataShareSubmit:L,userOptIn:I}),i()(S.d,{type:"thumbsdown",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsDown",defaultMessage:"Submit negative feedback"}),onClick:A,feedbackState:l,onDismiss:_,onSubmit:E,onUpdate:c,showShareDataPopup:d,onDataShareSubmit:L,userOptIn:I}))}},39186:(e,t,o)=>{o.d(t,{G:()=>r});var n=o(23174),i=o.n(n);o(67294);const r=(0,o(45238).I)("backward",{viewBox:"0 0 24 24",svg:i()("polygon",{points:"23,11 4.801,11 11.4,4.4 10,3 1,12 10,21 11.4,19.6 4.801,13 23,13 "})})},2585:(e,t,o)=>{o.d(t,{f:()=>r});var n=o(23174),i=o.n(n);o(67294);const r=(0,o(45238).I)("chevronLeft",{viewBox:"0 0 16 16",svg:i()("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},50780:(e,t,o)=>{o.d(t,{E:()=>r});var n=o(23174),i=o.n(n);o(67294);const r=(0,o(45238).I)("editPropertyType",{viewBox:"0 0 16 16 ",svg:i()("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},81570:(e,t,o)=>{o.d(t,{T:()=>r});var n=o(23174),i=o.n(n);o(67294);const r=(0,o(45238).I)("giftOutline",{viewBox:"0 0 32 34",svg:i()("path",{d:"M7.781 33.219h16.422c2.938 0 4.563-1.547 4.563-4.5v-9.594h.109c1.375-.297 2.14-1.406 2.14-3v-4.11c0-1.906-1.062-3.109-2.968-3.109H24.89c.828-.828 1.312-1.953 1.312-3.25 0-3.031-2.39-5.187-5.422-5.187-2.187 0-4 1.203-4.797 3.297C15.187 1.672 13.39.469 11.187.469c-3.016 0-5.422 2.156-5.422 5.187 0 1.297.484 2.422 1.328 3.25H3.937C2.11 8.906.97 10.11.97 12.016v4.109c0 1.594.75 2.703 2.125 3h.11v9.594c0 2.953 1.624 4.5 4.577 4.5zm6.922-24.313h-2.437c-2.454 0-3.891-1.39-3.891-3.11 0-1.718 1.25-2.718 2.969-2.718 1.86 0 3.36 1.406 3.36 3.719v2.11zm2.563 0v-2.11c0-2.312 1.5-3.718 3.359-3.718 1.719 0 2.969 1 2.969 2.719 0 1.719-1.422 3.11-3.89 3.11h-2.438zm-2.672 7.969H4.578c-.781 0-1.094-.328-1.094-1.11V12.36c0-.78.313-1.093 1.094-1.093h10.016v5.609zm2.781 0v-5.61h10.047c.781 0 1.078.313 1.078 1.094v3.407c0 .78-.297 1.109-1.078 1.109H17.375zm-2.781 14H7.75c-1.297 0-2.031-.734-2.031-2.031v-9.61h8.875v11.641zm2.781 0v-11.64h8.875v9.609c0 1.297-.734 2.031-2.031 2.031h-6.844z"})})},1230:(e,t,o)=>{o.d(t,{H:()=>r});var n=o(23174),i=o.n(n);o(67294);const r=(0,o(45238).I)("insertDown",{viewBox:"0 0 16 16",svg:i()("path",{d:"M9.55548 13.0343H14.2085C14.5315 13.0343 14.7951 13.2913 14.7951 13.6142C14.7951 13.9372 14.5315 14.1942 14.2085 14.1942H9.55548C9.23254 14.1942 8.9755 13.9372 8.9755 13.6142C8.9755 13.2913 9.23254 13.0343 9.55548 13.0343ZM1.21167 9.67959C1.21167 9.09961 1.52802 8.74371 2.0421 8.74371C2.55617 8.74371 2.87911 9.11279 2.87911 9.65982V10.7868C2.87911 10.945 2.96479 11.0373 3.12956 11.0373H4.70473V10.365C4.70473 9.818 5.26494 9.60709 5.68675 9.94322L7.56509 11.4525C7.84849 11.6766 7.84849 12.0786 7.56509 12.2961L5.68675 13.812C5.25176 14.1679 4.70473 13.9569 4.70473 13.3836V12.7047H2.93184C1.89051 12.7047 1.21167 12.0984 1.21167 11.057V9.67959ZM9.55548 9.58073H14.2085C14.5315 9.58073 14.7951 9.83777 14.7951 10.1607C14.7951 10.4837 14.5315 10.7407 14.2085 10.7407H9.55548C9.23254 10.7407 8.9755 10.4837 8.9755 10.1607C8.9755 9.83777 9.23254 9.58073 9.55548 9.58073ZM1.78506 6.12721H14.2085C14.5315 6.12721 14.7951 6.38425 14.7951 6.70719C14.7951 7.03014 14.5315 7.28717 14.2085 7.28717H1.78506C1.46211 7.28717 1.20508 7.03014 1.20508 6.70719C1.20508 6.38425 1.46211 6.12721 1.78506 6.12721ZM1.78506 2.68028H14.2085C14.5315 2.68028 14.7951 2.93073 14.7951 3.25367C14.7951 3.5832 14.5315 3.83365 14.2085 3.83365H1.78506C1.46211 3.83365 1.20508 3.5832 1.20508 3.25367C1.20508 2.93073 1.46211 2.68028 1.78506 2.68028Z"})})},38715:(e,t,o)=>{o.d(t,{N:()=>a});var n=o(23174),i=o.n(n),r=o(67294);const a=(0,o(45238).I)("save",{viewBox:"0 0 16 16",svg:r.createElement(r.Fragment,null,i()("path",{d:"M7.99316 10.8877C8.16406 10.8877 8.31445 10.833 8.47168 10.6758L10.7686 8.46094C10.8848 8.34473 10.9463 8.22168 10.9463 8.05762C10.9463 7.74316 10.6934 7.51074 10.3857 7.51074C10.2285 7.51074 10.0713 7.5791 9.96191 7.70215L8.99805 8.7207L8.56055 9.21973L8.62891 8.20801V1.11914C8.62891 0.78418 8.3418 0.49707 7.99316 0.49707C7.65137 0.49707 7.36426 0.78418 7.36426 1.11914V8.20801L7.43262 9.22656L6.98828 8.7207L6.03125 7.70215C5.92188 7.5791 5.75781 7.51074 5.60059 7.51074C5.29297 7.51074 5.04004 7.74316 5.04004 8.05762C5.04004 8.22168 5.1084 8.34473 5.22461 8.46094L7.52148 10.6758C7.67871 10.833 7.8291 10.8877 7.99316 10.8877ZM4.0625 15.3174H11.9307C13.4072 15.3174 14.1729 14.5586 14.1729 13.1025V6.36914C14.1729 4.91309 13.4072 4.1543 11.9307 4.1543H10.0781V5.49414H11.8486C12.4775 5.49414 12.833 5.82227 12.833 6.48535V12.9863C12.833 13.6494 12.4775 13.9775 11.8486 13.9775H4.14453C3.50879 13.9775 3.16016 13.6494 3.16016 12.9863V6.48535C3.16016 5.82227 3.50879 5.49414 4.14453 5.49414H5.92871V4.1543H4.0625C2.58594 4.1543 1.82031 4.91309 1.82031 6.36914V13.1025C1.82031 14.5586 2.58594 15.3174 4.0625 15.3174Z"}))})},83065:(e,t,o)=>{o.d(t,{_:()=>r});var n=o(23174),i=o.n(n);o(67294);const r=(0,o(45238).I)("sendArrow",{viewBox:"0 0 20 20",svg:i()("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},91427:(e,t,o)=>{o.d(t,{e:()=>r});var n=o(23174),i=o.n(n);o(67294);const r=(0,o(45238).I)("star",{viewBox:"0 0 16 16",svg:i()("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})},33676:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(23174),i=o.n(n),r=(o(67294),o(45238)),a=o(39986);const s=(0,r.I)("thumbDown",{viewBox:"0 0 18 19",svg:i()("g",{transform:"rotate(180 9 9.5)"},void 0,a.f)})},39986:(e,t,o)=>{o.d(t,{P:()=>s,f:()=>a});var n=o(23174),i=o.n(n),r=(o(67294),o(45238));const a=i()("path",{d:"M0.539062 12.3125C0.539062 15.0547 2.29688 17.3125 4.54688 17.3125H7.11719C8.17188 17.8516 9.42188 18.1641 10.8047 18.1641H11.8906C12.9062 18.1641 13.7734 18.1016 14.3359 17.9609C15.4766 17.6797 16.1953 16.8672 16.1953 15.8516C16.1953 15.6641 16.1719 15.5 16.1172 15.3281C16.6562 14.9141 16.9609 14.2969 16.9609 13.6328C16.9609 13.3203 16.8984 13.0078 16.7891 12.7578C17.1484 12.375 17.3594 11.8203 17.3594 11.25C17.3594 10.875 17.2656 10.4922 17.1094 10.2031C17.3281 9.86719 17.4531 9.42188 17.4531 8.9375C17.4531 7.69531 16.5078 6.73438 15.2734 6.73438H12.3672C12.1953 6.73438 12.0859 6.65625 12.0938 6.50781C12.1328 5.69531 13.4062 3.75781 13.4062 2.17188C13.4062 1.01562 12.5859 0.171875 11.4688 0.171875C10.6484 0.171875 10.0859 0.59375 9.55469 1.61719C8.58594 3.48438 7.40625 5.125 5.65625 7.28125H4.25C2.14844 7.28125 0.539062 9.52344 0.539062 12.3125ZM5.375 12.25C5.375 10.5938 5.75 9.53125 6.80469 8.11719C7.99219 6.53125 9.625 4.63281 10.8125 2.27344C11.0625 1.77344 11.2344 1.64844 11.4844 1.64844C11.7891 1.64844 11.9844 1.86719 11.9844 2.25C11.9844 3.42188 10.6641 5.35156 10.6641 6.61719C10.6641 7.55469 11.4219 8.15625 12.4375 8.15625H15.2422C15.7031 8.15625 16.0391 8.5 16.0391 8.95312C16.0391 9.28125 15.9297 9.5 15.6562 9.76562C15.4609 9.96875 15.4375 10.25 15.6094 10.4453C15.8359 10.7734 15.9375 10.9844 15.9375 11.25C15.9375 11.5781 15.7812 11.8516 15.4609 12.0938C15.2031 12.2812 15.1094 12.5859 15.2656 12.8828C15.4297 13.2109 15.5156 13.3672 15.5156 13.6172C15.5156 14 15.2734 14.2891 14.7812 14.5469C14.5312 14.6875 14.4609 14.9531 14.5703 15.1875C14.7344 15.5938 14.7578 15.6641 14.7578 15.8438C14.7578 16.1797 14.5078 16.4531 13.9766 16.5859C13.5156 16.7031 12.7812 16.75 11.8203 16.7422L10.8125 16.7344C7.57031 16.7031 5.375 14.8828 5.375 12.25ZM1.9375 12.3125C1.9375 10.3281 2.96094 8.73438 4.14062 8.6875C4.34375 8.6875 4.55469 8.6875 4.75781 8.6875C4.20312 9.76562 3.95312 10.8984 3.95312 12.25C3.95312 13.6875 4.46094 14.9531 5.375 15.9453C5.07812 15.9453 4.76562 15.9375 4.46875 15.9375C3.10156 15.8906 1.9375 14.2812 1.9375 12.3125Z"}),s=(0,r.I)("thumbUp",{viewBox:"0 0 18 19",svg:a})},40591:e=>{e.exports=function(e,t,o){var n=(o=o||{}).marker||":",i=n.charCodeAt(0),r=n.length,a=o.validate||function(e){return e.trim().split(" ",2)[0]===t},s=o.render||function(e,o,n,i,r){return 1===e[o].nesting&&e[o].attrJoin("class",t),r.renderToken(e,o,n,i,r)};e.block.ruler.before("fence","container_"+t,(function(e,o,s,l){var c,d,u,p,m,f,v,g,y=!1,C=e.bMarks[o]+e.tShift[o],h=e.eMarks[o];if(i!==e.src.charCodeAt(C))return!1;for(c=C+1;c<=h&&n[(c-C)%r]===e.src[c];c++);if((u=Math.floor((c-C)/r))<3)return!1;if(c-=(c-C)%r,p=e.src.slice(C,c),m=e.src.slice(c,h),!a(m,p))return!1;if(l)return!0;for(d=o;!(++d>=s)&&!((C=e.bMarks[d]+e.tShift[d])<(h=e.eMarks[d])&&e.sCount[d]<e.blkIndent);)if(i===e.src.charCodeAt(C)&&!(e.sCount[d]-e.blkIndent>=4)){for(c=C+1;c<=h&&n[(c-C)%r]===e.src[c];c++);if(!(Math.floor((c-C)/r)<u||(c-=(c-C)%r,(c=e.skipSpaces(c))<h))){y=!0;break}}return v=e.parentType,g=e.lineMax,e.parentType="container",e.lineMax=d,(f=e.push("container_"+t+"_open","div",1)).markup=p,f.block=!0,f.info=m,f.map=[o,d],e.md.block.tokenize(e,o+1,d),(f=e.push("container_"+t+"_close","div",-1)).markup=e.src.slice(C,c),f.block=!0,e.parentType=v,e.lineMax=g,e.line=d+(y?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules["container_"+t+"_open"]=s,e.renderer.rules["container_"+t+"_close"]=s}}}]);