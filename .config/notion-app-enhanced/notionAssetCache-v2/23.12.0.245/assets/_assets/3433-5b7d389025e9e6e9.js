"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3433],{45669:(e,t,o)=>{o.d(t,{Z:()=>s});o(67294);var i=o(5366),n=o(78316),r=o(62896),a=o(85893);const s=function(e){let{collectionViewName:t,collectionViewType:o}=e;return t?(0,a.jsx)(r.Z,{children:t}):"page"===o?(0,a.jsx)(i.FormattedMessage,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,a.jsx)(i.FormattedMessage,{...n.b1[o]})}},29921:(e,t,o)=>{o.d(t,{Z:()=>we});var i=o(67294),n=o(83355),r=o(480),a=o(53150),s=o(6740),l=o(86628),d=o(24405),c=o(49085),u=o(75071),p=o(15157),m=o(69246),g=o(97880),h=o(82990),S=o(5366),y=o(89858),b=o(43250),f=o(87279),v=o(98742),x=o(50659);var T=o(8848),I=o(3338),w=o(50906),j=o(23063),M=o(31945),C=o(55118),B=o(26388),P=o(12534),Z=o(35026),k=o(75024),L=o(77907),O=o(80444),_=o(3418),V=o(42185),A=o(33052),K=o(9867),F=o(5210),R=o(85893);const D=function(e){window.__c={n:"TeamCaratSwitcher"};const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:o,style:i}=e,n=(0,d.Fg)(),r=(0,d.yK)((()=>({caratContainer:{minHeight:20,minWidth:20,...i||{}}})),[i]),a=(0,l.VK)((()=>t.state.isHidden),[t]);return(0,R.jsx)("div",{style:r.caratContainer,children:(0,R.jsx)(F.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:!a,color:n.lightIconColor,onClick:o,disabled:!0})})};var H=o(86232),N=(o(57658),o(19889)),E=o(64684),z=o(29302),W=o(95697),U=o(35661);function $(e){window.__c={n:"TeamMembersList"};const t=(0,r.O7)(),[o,n]=(0,i.useState)(!1),{teamStore:a,spaceStore:s,teamOutlinerType:c}=e,{isReady:u,allMembersUserIds:p,userStores:m}=(0,l.VK)((()=>{const e=(0,W.tO)({teamStore:a,spaceStore:s}),t=e.map((e=>U.U6.createChildStore(a,{table:N.KJ,id:e}))),o=t&&t.every((e=>e.isReady()));return{allMembersUserIds:e,userStores:t,isReady:o}}),[a,s]),{ownerStores:g,memberStores:h}=(0,l.VK)((()=>{const e=[],t=[];if(!a.isReady())return{ownerStores:e,memberStores:t};for(const o of m){(null==o?void 0:o.id)&&((0,E.pd)({membership:a.getMembers()},null==o?void 0:o.id)?e.push(o):t.push(o))}return{ownerStores:e,memberStores:t}}),[a,m]),y=(0,d.yK)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},members:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginRight:10,marginLeft:5},avatar:{width:23,height:23,borderRadius:23,marginRight:-5,position:"relative"},teamMemberTooltipSectionLabel:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.mediumInvertedTextColor}})),[]);let b=0,f=m;return f=[...g,...h],m.length>5&&(b=m.length-5,f=f.slice(0,5)),u?(0,R.jsx)("div",{style:y.membershipSection,children:(0,R.jsx)(B.Z,{placement:B.Z.Placement.Bottom,disableTooltip:p.length<=0,render:t=>{return(0,R.jsxs)("span",{...t,style:e.renderStyle,children:[p.length," ",(o=p.length,o>1?(0,R.jsx)(S.FormattedMessage,{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}):(0,R.jsx)(S.FormattedMessage,{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"}))]});var o},renderTooltip:e=>(o||(n(!0),w.v2V(t,{teamStore:a,outliner_type:c})),(0,R.jsx)("div",{...e,children:(0,R.jsxs)("div",{style:{marginBottom:4},children:[f.map((e=>(0,R.jsx)(z.Z,{style:y.teamMemberList,userStore:e,avatarSize:18},e.id))),b>0&&(0,R.jsx)("div",{style:y.moreMessage,children:(0,R.jsx)(S.FormattedMessage,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:b}})})]})}))})}):null}var G=o(74016),J=o(64552);var Q=o(22487),Y=o(14720),q=o(64921),X=o(68785),ee=o(61766),te=o(37181),oe=o(28451),ie=o(81415),ne=o(75769);function re(e){let{teamId:t,origin:o}=e;window.__c={n:"TeamAddAppTemplateTooltip"};const n=(0,r.O7)(),[a,s]=(0,i.useState)(!1),l=(0,d.yK)((()=>({tooltip:{width:240}})),[]);(0,i.useEffect)((()=>{if(!o)return;const{current:e}=o;if(!e)return;const t="IntersectionObserver"in window?new IntersectionObserver((e=>{let[t]=e;return s(t.isIntersecting)}),{threshold:1}):void 0;return null==t||t.observe(e),()=>null==t?void 0:t.unobserve(e)}),[o]);const c=(0,i.useCallback)((()=>{ne.Z.setState({hasShownTooltip:!0,teamId:t}),w.Khd(n,{from:"team_add_app_template"})}),[n,t]),u=(0,i.useCallback)((()=>te.$n({environment:n,teamId:t})),[n,t]);return a?(0,R.jsx)(oe.P,{calloutId:"team_add_app_template_tooltip",onShow:c,children:(0,R.jsx)(ie.U,{origin:o,placementToOrigin:"right",header:(0,R.jsx)(S.FormattedMessage,{id:"teamAddAppTemplateTooltip.header",defaultMessage:"Add templates to your teamspace"}),content:(0,R.jsx)(S.FormattedMessage,{id:"teamAddAppTemplateTooltip.content",defaultMessage:"Get started with projects, docs, wiki, and more"}),onCloseClick:()=>u(),shouldDismissUponOutsideClick:!1,pointerPosition:"0%",pointerLength:24,style:l.tooltip})}):null}function ae(e){const t=(0,r.O7)();return(0,l.VK)((()=>(0,W.dY)({environment:t,teamId:e})),[t,e])}function se(e){window.__c={n:"OutlinerTeamToggleAddPageButton"};const{teamStore:t}=e,o=(0,S.useIntl)(),n=(0,l.qz)(void 0,ee.Z),a=(0,i.useRef)(null),s=ae(t.id),c=o.formatMessage({id:"sidebar.addAPageOrTemplateButtonTeamToggle.tooltip",defaultMessage:"Add a page or template"}),p=function(){const e=(0,r.Fy)(),t=e.isMobile?32:20;return(0,d.yK)((o=>({button:{height:t,width:t,border:"none",borderRadius:3,marginLeft:e.isMobile?0:4},mediumText:{color:o.mediumInvertedTextColor},plusIcon:{fill:e.isMobile?o.lightIconColor:o.sidebarTextColor,...e.isMobile?{width:18,height:18}:{width:14,height:14}},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:o.legacyRedSelectColor,height:t,width:t},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:3,height:20,width:20},menuItemButton:{minWidth:200},caption:{minWidth:230}})),[e.isMobile,t])}();return(0,R.jsxs)(R.Fragment,{children:[s&&(0,R.jsx)(re,{teamId:t.id,origin:a}),(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,buttonPopupStore:n,alignmentToOrigin:M.vR.Start,originGap:2,renderOrigin:e=>(0,R.jsx)(B.Z,{textWrap:!1,renderTooltip:()=>c,placement:B.Z.Placement.Bottom,render:t=>(0,R.jsx)(q.Z,{ariaLabel:c,ref:a,style:p.button,...(0,v.Z)(t,e),children:(0,R.jsx)("div",{style:p.plusIconContainer,children:(0,u.f)(p.plusIcon)})})}),render:e=>(0,R.jsx)(Y.p7,{renderLoading:e=>(0,R.jsx)("div",{style:Y.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,R.jsx)(X.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_new_page"})})]})}function le(e){window.__c={n:"OutlinerTeamToggleButton"};const{teamStore:t,label:o,isHovered:n,outlinerToggleButtonStore:a,teamOutlinerType:s,outlinerTeamOnToggle:c,onTeamJoinComplete:u,labelAriaId:p}=e,b=(0,r.Fy)().isMobile,f=function(e){switch(e){case m.cz:case m.mu:return!0;case m.PT:case m.kg:return!1;default:(0,g.t1)(e)}}(s),v=(0,r.O7)(),{name:x,showAddPageButton:F}=(0,l.VK)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),N=(0,J.e)(t),E=function(e){const t=(0,r.O7)(),o=(0,l.VK)((()=>O.default.state.currentSpaceStore),[]);return(0,l.VK)((()=>(0,W.zz)({teamStore:e,spaceStore:o,userId:t.currentUser.id})),[o,t.currentUser.id,e])}(t),z=(0,Q.K)(t),U=(0,l.VK)((()=>O.default.state.currentSpaceStore),[]),[,,Y]=(0,l.AF)(void 0,A.Z),q=(0,r.Fy)(),X=b||n,ee=(0,d.yK)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:T.ZP.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:3},container:{position:"relative",display:"flex",alignItems:"center",minHeight:b?48:f?30:28,padding:f?"6px 12px":"0px 10px 0px 11px"},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center"},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...h.Z.textOverflowStyle},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:h.Z.lineHeight.UISmall.desktop,marginBottom:1,...h.Z.textOverflowStyle},membersCountText:{display:"flex",fontSize:12,fontWeight:h.Z.fontWeight.regular,lineHeight:1.3,color:e.lightTextColor,width:"100%",...h.Z.textOverflowStyle},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...h.Z.textOverflowStyle},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.mediumTextColor,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...X?{}:k.jy},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,...X?{}:k.jy},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabelContainer:{display:"flex"},closedTeamLabel:{display:"flex",alignItems:"center"},closedTeamTooltip:{whiteSpace:"normal",width:220},carat:{minHeight:f?15:20,height:f?15:20}})),[b,f,X]),te=(0,l.VK)((()=>t.getTeamPagesStore()),[t]),oe=(0,l.VK)((()=>V.Z.state===t.id),[t.id]),ie=(0,l.VK)((()=>t.getTeamAccessLevel()),[t]),[ne,re]=(0,i.useState)(void 0),le=ae(t.id),ce=(0,i.useCallback)((e=>{let{draggingStores:t}=e;return!!U&&(0,Z.Pl)({environment:v,draggingStores:t,parentStore:te,currentSpaceStore:U})}),[U,v,te]),ue=(0,i.useCallback)((async e=>{await y.NP({dropArgs:e,environment:v,type:"team",isTopLevel:!0,parentStore:te})}),[v,te]);if(!x)return null;const pe=!E,me=function(e,t){if(!t)return!1;switch(e){case m.mu:return!0;case m.PT:case m.kg:case m.cz:return!1;default:(0,g.t1)(e)}}(s,N),ge=!q.isMobile&&!N&&"closed"===ie,he=e=>{_.Z.addNamedPopup("team_more_actions"),w.QkQ(v,{store:t,from:e})},Se=()=>{_.Z.removeNamedPopup("team_more_actions")};return(0,R.jsxs)(C.G,{dropTargetKey:K.Ui(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:ce,onSelectableDrop:ue,children:[(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,alignmentToOrigin:M.vR.Start,placementToOrigin:M.pO.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:ne,render:e=>(0,R.jsx)(L.LazyTeamOverflowMenu,{teamStore:t,permissionsInviteStore:Y,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:i}=e;return(0,R.jsxs)("div",{style:ee.container,onContextMenu:e=>{!q.isMobile&&(0,P.ZP)({event:e,context:P.Af.EditorContextMenu,callback:()=>{e.preventDefault(),re(new DOMRect(e.clientX,e.clientY)),i()}})},children:[q.isMobile&&(0,R.jsx)(D,{store:t,outlinerToggleButtonStore:a,outlinerTeamOnToggle:c}),(0,R.jsx)("div",{style:ee.teamIconContainer,children:(0,R.jsx)(G.p,{size:20,store:t,disabled:!0,style:{fontWeight:h.Z.fontWeight.medium}})}),(0,R.jsxs)("div",{style:ee.labelContainer,children:[(0,R.jsxs)("div",{style:ee.labelText,id:p,children:[o,!q.isMobile&&(0,R.jsx)(D,{store:t,outlinerToggleButtonStore:a,outlinerTeamOnToggle:c,style:X?ee.carat:k.jy})]}),f&&void 0!==z&&(0,R.jsxs)("div",{style:ee.membersCountText,children:[U&&(0,R.jsx)($,{teamStore:t,spaceStore:U,renderStyle:ee.membersCountText,teamOutlinerType:s}),ge&&(0,R.jsx)(B.Z,{placement:B.Z.Placement.Bottom,renderTooltip:e=>(0,R.jsx)("div",{style:ee.closedTeamTooltip,...e,children:de({accessLevel:ie})}),render:e=>(0,R.jsxs)("div",{style:ee.closedTeamLabel,...e,children:[" ","·"," ",(0,R.jsx)(S.FormattedMessage,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"})]})}),me&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{children:" "})," ·",(0,R.jsx)("span",{children:(0,I.p)(ee.joinedBadgeIcon)}),(0,R.jsx)("span",{style:ee.joinedBadge,children:(0,R.jsx)(S.FormattedMessage,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"})})]})]})]}),N&&(0,R.jsxs)("div",{style:{...ee.overflow,...X||le?{}:k.jy},children:[(0,R.jsx)(L.LazyOutlinerTeamOverflow,{teamStore:t,from:s,onPopupClick:()=>he(s),onPopupClose:Se}),F&&!q.isMobile&&(0,R.jsx)(se,{teamStore:t})]}),!N&&(0,R.jsx)("div",{style:ee.unjoinedOverflowMenu,children:(0,R.jsx)(L.LazyOutlinerTeamOverflow,{teamStore:t,from:s,hideJoin:!0,onPopupClick:()=>he(s),onPopupClose:Se})}),!q.isMobile&&pe&&(0,R.jsx)(H.M,{style:ee.joinLeaveButton,hoveredStyle:ee.joinLeaveButtonHovered,teamStore:t,placement:B.Z.Placement.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0,onJoinedTeam:u}),F&&q.isMobile&&(0,R.jsx)("div",{style:{...ee.overflow,...X?{}:k.jy},children:(0,R.jsx)(se,{teamStore:t})}),(0,R.jsx)(j.Z,{isVisible:oe,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},exitAnimationStyle:{opacity:0},springConfig:{stiffness:30,damping:10,precision:.001},render:()=>(0,R.jsx)("div",{style:ee.teamHighlightAnimationBackgroundContainer})})]})},onClick:()=>he("teamSidebar"),onClose:Se}),(0,R.jsx)(L.LazyTeamPermissionsInviteWithModal,{permissionsInviteStore:Y,store:t})]})}function de(e){let{accessLevel:t}=e;if("private"===t)return(0,R.jsx)(S.FormattedMessage,{id:"teamJoinLeaveButton.joinTeam.privateTeamTooltip",defaultMessage:"You can only join a private teamspace with an invite from a member"})}var ce=o(38676),ue=(o(77080),o(31792)),pe=o(70704),me=o(73292),ge=o(52275),he=o(78140),Se=o(32163),ye=o(72495),be=o(14694);class fe extends n.Z{constructor(){super(...arguments),this.storeTypes={mouseStore:ue.Z,focusStore:c.default.createClass(!1),labelMouseStore:ue.Z,labelFocusStore:c.default.createClass(!1),outlinerToggleButtonStore:pe.Z},this.headerRef=i.createRef(),this.contentsAriaId=(0,a.Z)(),this.labelAriaId=(0,a.Z)(),this.handleHideClick=()=>{const{isHidden:e}=this.getToggleButtonStore().state,t=!e;"team"===this.props.type?me.k7({environment:this.environment,spaceViewStore:this.props.spaceViewStore,teamStore:this.props.teamStore,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState,teamOutlinerType:this.props.teamOutlinerType,isExplicitUserAction:!0}):this.props.type===m.g$?y.Eo({environment:this.environment,type:this.props.type,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:!1}):y.Eo({environment:this.environment,spaceViewStore:this.props.spaceViewStore,type:this.props.type,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState})}}willMount(e){if(super.willMount(e),e.initialToggleState&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:"hidden"===e.initialToggleState}),!e.shouldPersistToggleState)return;const t=function(e){const{type:t,spaceViewStore:o}=e;if(t===m.g$)return;if("team"===t)return me.RW(o,e.teamStore.id);return y.B8(o,t)}(this.props);if(!t)return;const o=p.Z.get({userId:this.environment.currentUser.id,key:t});o&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:o})}renderComponent(){const{renderSidebar:e,isLastTeam:t,marginBottomOverrideWhenExpanded:o,marginBottomOverrideWhenCollapsed:i}=this.props,{isHidden:n}=this.getToggleButtonStore().state,r={bookmarks:b.F4o,workspace:b.j35,shared:b.MU2,private:b.aL4,offline:b.yNE,team:b.l24,[m.PT]:b.RG3,[m.cz]:b.Uwd,[m.mu]:b.jWx,[m.kg]:b.rIE,[m.g$]:b.Y6l}[this.props.type];return(0,R.jsxs)("div",{ref:this.headerRef,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&this.stores.focusStore.setState(!0)},onBlur:()=>this.stores.focusStore.setState(!1),onMouseMove:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0}),onMouseLeave:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1}),style:{marginBottom:n||t&&!this.environment.device.isMobile?i:o??fe.marginBottom,width:"100%"},className:`${r}-container`,children:[this.renderLabel(r),!n&&e({headerRef:this.headerRef,labelAriaId:this.labelAriaId,contentsAriaId:this.contentsAriaId})]})}renderLabel(e){const{isMobile:t}=this.environment.device,{isHidden:o}=this.getToggleButtonStore().state,{labelMouseStore:i,labelFocusStore:n}=this.stores,r=o?(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Click to show section",id:"sidebar.sectionHeaderShow.tooltip"}):(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Click to hide section",id:"sidebar.sectionHeaderHide.tooltip"}),a={...t?this.getMobileSectionLabelStyle():this.getSectionLabelStyle(),transition:"color 100ms ease-out",..."team"===this.props.type?{width:"100%"}:{}};(i.state.mouseEntered||n.state)&&Object.assign(a,this.getSectionLabelHoverStyles());const l="team"===this.props.type?{width:"100%",display:"flex",alignItems:"center",...(0,x.G$)({isMobile:t})}:this.getLabelButtonStyle();return(0,R.jsx)(be.Z,{className:e,disableMobileBorder:o&&"team"!==this.props.type,shouldShowMobileMarginBottom:o&&"team"!==this.props.type,style:"team"===this.props.type?this.getSectionTeamItemStyle():this.getSectionSidebarItemStyle(),childrenStyle:{overflow:"visible"},right:(0,R.jsx)(ve,{right:this.props.right,showAddButton:this.props.showAddButton,type:this.props.type,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,shouldPersistToggleState:this.props.shouldPersistToggleState,focusStore:this.stores.focusStore,outlinerToggleButtonStore:this.stores.outlinerToggleButtonStore}),children:(0,R.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,R.jsx)(B.Z,{textWrap:!1,disableTooltip:"team"===this.props.type,renderTooltip:()=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{children:r}),(0,R.jsx)("span",{style:{color:this.theme.mediumInvertedTextColor,whiteSpace:"nowrap"},children:this.props.labelTooltip})]}),placement:B.Z.Placement.Top,render:e=>(0,R.jsx)(q.Z,{..."team"===this.props.type&&this.props.teamHeaderLabel?{"aria-labelledby":this.labelAriaId}:{id:this.labelAriaId},"aria-expanded":!o,"aria-controls":this.contentsAriaId,mobileFeedback:t,style:l,hovered:!!this.props.forceHoveredButtonStyle||void 0,onClick:()=>this.handleHideClick(),...(0,v.Z)(e,{onMouseMove:()=>i.setState({...i.state,mouseEntered:!0}),onMouseLeave:()=>i.setState({...i.state,mouseEntered:!1}),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&n.setState(!0)},onBlur:()=>n.setState(!1)}),children:(0,R.jsx)("span",{style:a,children:this.renderLabelContent()})})})})})}renderLabelContent(){switch(this.props.type){case"bookmarks":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});case"team":if(this.props.teamHeaderLabel){const{isHidden:e}=this.getToggleButtonStore().state,{mouseEntered:t}=this.stores.labelMouseStore.state;return(0,R.jsx)(le,{isHovered:t||this.stores.labelFocusStore.state,isExpanded:!e,teamStore:this.props.teamStore,label:this.props.teamHeaderLabel,outlinerToggleButtonStore:this.getToggleButtonStore(),outlinerTeamOnToggle:()=>this.handleHideClick(),teamOutlinerType:this.props.teamOutlinerType,onTeamJoinComplete:this.props.onTeamJoinComplete,labelAriaId:this.labelAriaId})}break;case m.kg:case m.mu:case m.cz:case m.PT:case m.g$:return this.props.sectionLabel;default:(0,g.t1)(this.props)}}getToggleButtonStore(){return this.props.customToggleButtonStore||this.stores.outlinerToggleButtonStore}getSectionSidebarItemStyle(){return{paddingTop:0,paddingBottom:0,paddingRight:14,paddingLeft:15,minHeight:24,marginBottom:2,marginTop:6}}getSectionTeamItemStyle(){return{padding:0,margin:0,paddingLeft:10,borderRadius:0}}getSectionLabelStyle(){return{textTransform:"initial",fontSize:12,lineHeight:1,color:this.theme.lightTextColor,fontWeight:h.Z.fontWeight.semibold}}getMobileSectionLabelStyle(){return{textTransform:"initial",fontSize:13,lineHeight:1,color:this.theme.lightTextColor,fontWeight:h.Z.fontWeight.semibold}}getSectionLabelHoverStyles(){return{color:this.theme.darkTextColor}}getLabelButtonStyle(){const{isMobile:e}=this.environment.device;return{display:"flex",alignItems:"center",borderRadius:3,padding:"2px 4px",marginLeft:-4,...e&&{marginBottom:8}}}}function ve(e){let{right:t,showAddButton:o,focusStore:i,...n}=e;window.__c={n:"OutlinerToggleButtonRightLabel"};const r=(0,l.VK)((()=>ce.xH.state||i.state),[i]),a=(0,d.yK)((()=>({wrapper:{display:"flex",alignItems:"center",opacity:r?1:0,pointerEvents:r?"auto":"none",transition:"opacity 200ms ease-in"}})),[r]);return(0,R.jsxs)("div",{style:a.wrapper,children:[t,o&&(0,R.jsx)(xe,{...n})]})}function xe(e){let{type:t,disableTooltip:o,labelTooltip:n,spaceStore:a,spaceViewStore:s,shouldPersistToggleState:c,outlinerToggleButtonStore:p}=e;window.__c={n:"OutlinerToggleAddButton"};const h=(0,r.O7)(),b=h.device.isMobile,f=function(e){switch(e){case"bookmarks":case"private":case"shared":case"team":case"workspace":case m.g$:return!1;case m.PT:case m.cz:case m.mu:case m.kg:return!0;default:(0,g.t1)(e)}}(t),v=(0,S.useIntl)(),x=(0,i.useRef)(null),T=(0,i.useCallback)((e=>{s&&"team"!==t&&t!==m.g$&&y.kC({environment:h,spaceStore:a,spaceViewStore:s,type:t,outlinerToggleButtonStore:p,prepend:!0,shouldPersistToggleState:c,useCrdt:e})}),[h,p,c,a,s,t]),I=(0,i.useCallback)((()=>{K.lo("sidebar_team_section")}),[]),w=(0,d.yK)((e=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:3,marginLeft:b?0:4},plusIcon:{fill:e.mediumIconColor,width:14,height:14},tutorialTooltip:{width:230},tutorialText:{fontSize:16,lineHeight:.85},labelTooltip:{color:e.mediumInvertedTextColor}})),[b]),j=f?v.formatMessage({defaultMessage:"New teamspace",id:"sidebar.addButton.addTeamTooltip"}):v.formatMessage({defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}),M=(0,l.VK)((()=>!1),[]);return(0,R.jsx)(B.Z,{textWrap:!1,disableTooltip:o,renderTooltip:()=>(0,R.jsxs)(R.Fragment,{children:[j,(0,R.jsx)("br",{}),(0,R.jsx)("span",{style:w.labelTooltip,children:!f&&n})]}),placement:B.Z.Placement.Bottom,render:e=>!f&&M?(0,R.jsx)(Te,{...e,createPageFn:T}):(0,R.jsxs)(q.Z,{ariaLabel:j,style:w.plusButton,mobileFeedback:b,onClick:f?I:()=>T(),className:"private"===t?"shadow-cursor-new-page-sidebar":void 0,...e,children:[(0,R.jsx)("span",{ref:x}),(0,u.f)(w.plusIcon)]})})}function Te(e){window.__c={n:"AddCrdtPageButtonPopup"};const{createPageFn:t}=e,o=(0,d.yK)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:3},icon:{fill:e.mediumIconColor,width:14,height:14}})),[]);return(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,alignmentToOrigin:M.vR.Start,originGap:2,renderOrigin:t=>(0,R.jsx)(q.Z,{mobileFeedback:!1,style:o.button,...e,...t,children:(0,u.f)(o.icon)}),render:e=>(0,R.jsx)(Ie,{onDismiss:e.close,createPageFn:t}),onClick:()=>{_.Z.addNamedPopup("outliner_add_page")},onClose:()=>{_.Z.removeNamedPopup("outliner_add_page")}})}function Ie(e){const{onDismiss:t,createPageFn:o}=e,i=[{key:"addRegularPage",render:e=>(0,R.jsx)(ge.Z,{...e,title:"Add regular page"}),action:()=>{t(),o(!1)}},{key:"addCrdtPage",render:e=>(0,R.jsx)(ge.Z,{...e,title:"Add CRDT page"}),action:()=>{t(),o(!0)}}];return(0,R.jsx)(he.Z,{menuType:f.og.Popup,children:(0,R.jsx)(Se.Z,{type:Se.i.Vertical,sections:[{key:"addPageOptions",render:e=>(0,R.jsx)(ye.Z,{...e}),items:i}],initialFocus:void 0})})}fe.displayName="OutlinerToggleButton",fe.marginBottom=18;const we=fe},60442:(e,t,o)=>{o.d(t,{Z:()=>l});o(67294);var i=o(83355),n=o(82990),r=o(47853),a=o(85893);class s extends i.Z{renderComponent(){const{imageURL:e,imageWidth:t,imageHeight:o}=this.props;if(e){const i=(0,r.D)(e);return(0,a.jsxs)("div",{style:{width:t||200,marginTop:4,marginBottom:4},children:[(0,a.jsx)("div",{style:{width:"100%",height:o||100,borderRadius:3,backgroundImage:`url(${i})`,backgroundSize:"cover",marginBottom:6}}),this.renderText()]})}return this.renderText({width:t})}renderText(e){const{caption:t,title:o}=this.props;return(0,a.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...e},children:[o&&(0,a.jsx)("header",{style:{fontWeight:n.Z.fontWeight.bold,marginBottom:4},children:o}),t]})}}s.displayName="TooltipThumbnailLayout";const l=s},3392:(e,t,o)=>{o.d(t,{Z:()=>C});var i=o(67294),n=o(480),r=o(86628),a=o(24405),s=o(75071),l=o(72126),d=o(69246),c=o(5366),u=o(89858),p=o(64921),m=o(55118),g=o(25777),h=o(14694),S=o(43250),y=o(35026),b=o(80444),f=o(74948),v=o(24359),x=o(85893);function T(e){window.__c={n:"EmptyChildrenPlaceholder"};const t=(0,n.Fy)(),o=(0,a.yK)((e=>({placeholder:{color:e.lightTextColor,paddingLeft:12,...t.isMobile&&{display:"flex",alignItems:"center",height:32}}})),[t]);return(0,x.jsx)(h.Z,{role:"treeitem",style:e.itemStyle,children:(0,x.jsx)("div",{style:o.placeholder,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function I(e){window.__c={n:"AddPageButton"};const{type:t}=e,o=(0,n.O7)(),{currentSpaceStore:i,currentSpaceViewStore:s}=(0,r.VK)((()=>b.default.state),[]),l=o.device.isMobile,d=(0,a.yK)((e=>({sidebarItem:{color:e.mediumTextColor}})),[]);if(!i||!s)return null;return(0,x.jsx)(p.Z,{mobileFeedback:l,onClick:async()=>{if("team"===t)return;await u.kC({environment:o,spaceStore:i,spaceViewStore:s,type:t,prepend:!1,shouldPersistToggleState:!0})&&l&&f.close()},children:(0,x.jsx)(h.Z,{style:d.sidebarItem,left:(0,x.jsx)(M,{}),disableMobileBorder:!0,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"Add a page",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}function w(e){const{store:t,index:o}=e;return(0,x.jsx)(v.ZP,{type:e.type,store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:o,itemDepth:e.itemDepth,itemOpenByDefault:e.itemOpenByDefault,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled},t.id)}function j(e){window.__c={n:"EmptyDroppable"};const t=(0,n.O7)(),{type:o,parentStore:i}=e,r=l.oA(["OutlinerItem",o,null==i?void 0:i.id]).join("_");return(0,x.jsx)(m.G,{dropTargetKey:r,canDropBelow:!0,onSelectableDrop:async e=>{await u.NP({dropArgs:e,environment:t,type:o,isTopLevel:!0,parentStore:i})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=b.default.state;return!!o&&(0,y.Pl)({environment:t,draggingStores:e.draggingStores,parentStore:i,currentSpaceStore:o})}})}function M(){window.__c={n:"PlusIcon"};const e=(0,a.yK)((e=>({icon:{fill:e.mediumIconColor,width:16,height:16},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,x.jsx)("div",{style:e.iconContainer,children:(0,s.f)(e.icon)})}const C=function(e){window.__c={n:"Outliner"};const{disabled:t,childStores:o,areChildrenLoading:r,itemDepth:a,type:s}=e,l=(0,n.Fy)(),c=o.map(((t,o)=>(0,i.createElement)(w,{...e,key:t.id,store:t,index:o}))),u=0===a,p=0===c.length,m=(p||e.isHeaderless||l.isMobile)&&u&&("private"===s||"workspace"===s)&&!t,h=p&&!m&&!u,y={offline:S.blN,bookmarks:S.fe0,workspace:S.BEs,shared:S.JkF,private:S.q1J,team:S.l24,[d.PT]:void 0,[d.cz]:void 0,[d.mu]:void 0,[d.kg]:void 0,[d.g$]:void 0}[e.type];return(0,x.jsxs)(g.Z,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:u?"tree":"group",style:e.style,className:y,loaded:!r,showSpinnerTimeout:3e3,spinnerSize:"1em",children:[c,p&&u&&(0,x.jsx)(j,{type:e.type,parentStore:e.parentStore}),m&&(0,x.jsx)(I,{type:e.type}),h&&(0,x.jsx)(T,{itemStyle:e.itemStyle})]})}},24359:(e,t,o)=>{o.d(t,{gZ:()=>De,aZ:()=>He,ZP:()=>Ne});var i=o(67294),n=o(480),r=o(97511),a=o(33125),s=o(86628),l=o(24405),d=o(41432),c=o(15157),u=o(97880),p=o(89858),m=o(79954),g=o(19037),h=o(35026),S=o(52315),y=o(81844),b=o(49085);class f extends b.default{getInitialState(){return{open:!1,hovered:!1,focused:!1}}}const v=f;var x=o(35661),T=o(26664),I=o(24646),w=o(6740),j=o(21202),M=o(82990),C=o(50906),B=o(17659),P=o(84076),Z=o(68785),k=o(76798),L=o(14694),O=o(93959),_=o(84210),V=o(17652),A=o(50659),K=o(98165),F=o(95697),R=o(91948),D=o(80444),H=o(80796),N=o(89087),E=o(5366),z=o(9953),W=o(39699),U=o(31278),$=o(26388),G=o(28020),J=o(85893);function Q(e){window.__c={n:"OutlinerItemIcon"};const{targetStore:t,canEditItem:o}=e,i=(0,E.useIntl)(),r=(0,n.O7)(),{isMobile:a}=r.device,d=(0,s.VK)((()=>t.getIcon()),[t]),c=(0,s.VK)((()=>!a&&o&&!t.isLocked()&&!(0,G.qG)(t.id)),[a,o,t]),u=(0,s.VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),p=(0,l.yK)((e=>({pageIcon:{fill:e.mediumIconColor}})),[]),m=e=>{const o=t.getIconStore();o&&W.createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:r,perform:t=>{z.sO({store:o,value:e,transaction:t})}})};return(0,J.jsx)($.Z,{renderTooltip:()=>(0,J.jsx)(E.FormattedMessage,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:$.Z.Placement.Bottom,render:e=>{var o;return c?(0,J.jsx)(U.Z,{bucket:"secure",disabled:!1,icon:d,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:a?24:20,onChange:m,pageIconStyle:p.pageIcon,...e,largeIcon:!0,iconLoggingData:{recordTable:u,source:"sidebar",block_type:t.getType(),collection_id:"collection"===u?null===(o=t.getIconStore())||void 0===o?void 0:o.id:void 0},label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"})}):(0,J.jsx)(U.Z,{disabled:!0,icon:d,title:void 0,isEmptyPage:t.isEmptyPage(),size:a?24:20,pageIconStyle:p.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"})})}})}var Y=o(5210);function q(e){window.__c={n:"OutlinerItemLeftToggleButton"};const{store:t,outlinerItemStore:o,targetStore:i,type:r,itemIndex:a,itemDepth:d}=e,c=(0,n.O7)(),{isMobile:u}=c.device,p=(0,s.VK)((()=>o.state.open),[o]),m=(0,s.VK)((()=>{if((0,F.ku)()){const e=Boolean(null==i?void 0:i.isCollectionView()),o=h.Yz(t).length>0;return e||o}return!0}),[t,i]),g=(0,l.yK)((e=>({hiddenToggle:{width:(0,Y.q)({isMobile:u,isSidebar:!0})},toggle:{color:e.lightIconColor}})),[u]);if(!m)return(0,J.jsx)("div",{style:g.hiddenToggle});return(0,J.jsx)(Y.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:Boolean(p),color:g.toggle.color,onClick:()=>{const e=0===d,i=K.VP(t);C.t8_(c,{teamStore:i,type:e?"top_level":"nested",is_toggled:!p,outliner_type:r,outliner_position:a,outliner_depth:d}),h.Ps({store:t,toggleStore:o,toOpen:!p,environment:c,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var X=o(56666),ee=o(75071),te=o(69246),oe=o(6404),ie=o(24677),ne=o(64921),re=o(52275),ae=o(31945),se=o(78140),le=o(32163),de=o(40721),ce=o(72495),ue=o(33929),pe=o(87279),me=o(98742),ge=o(75024),he=o(34583),Se=o(74948);const ye=(0,E.defineMessages)({addAPageInside:{defaultMessage:"Quickly add a page inside",id:"sidebarItem.addAPageInside.tooltip"}});function be(e){window.__c={n:"OutlinerItemRightIcons"};const{store:t,type:o,outlinerItemStore:i,canEditItem:r,itemDepth:a}=e,{isMobile:d}=(0,n.Fy)(),c=(0,s.VK)((()=>d||i.state.hovered||i.state.focused),[d,i]),u=(0,s.VK)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),i=null===(e=t.getCollectionViewCollectionStore())||void 0===e?void 0:e.isSyncedCollection(),n=(0,G.qG)(t.id);return Boolean(t.getType()&&r&&!o&&!i&&!n)}),[t,r]),p=(0,l.yK)((()=>({iconContainer:{display:"flex",paddingLeft:3,...c?{}:{...ge.jy,display:"block"}}})),[c]);return o===te.g$?null:(0,J.jsxs)("div",{style:p.iconContainer,children:[(0,J.jsx)(Te,{store:t,type:e.type,itemIndex:e.itemIndex,itemDepth:a}),u&&(0,J.jsx)(fe,{store:t,outlinerItemStore:i,isTopLevelItem:0===a})]})}function fe(e){window.__c={n:"AddPageButton"};const{store:t,outlinerItemStore:o,isTopLevelItem:i}=e,r=(0,n.O7)(),{isMobile:a}=r.device,l=(0,s.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),d=ue.default.formatMessage(ye.addAPageInside);return l.length<=1?(0,J.jsx)($.Z,{renderTooltip:()=>d,placement:$.Z.Placement.Bottom,render:e=>{const n={...e,onClick:()=>{Ie({store:t,outlinerItemStore:o,sourceStore:l[0]??t,shouldNavigateToSource:!1,environment:r,isTopLevelItem:i})}};return(0,J.jsx)(ve,{events:n})}}):(0,J.jsx)($.Z,{renderTooltip:()=>d,placement:$.Z.Placement.Bottom,render:e=>(0,J.jsx)(ae.ZP,{popupType:a?ae.Z4.SlideUp:ae.Z4.Popup,renderOrigin:t=>(0,J.jsx)(ve,{events:(0,me.Z)(e,t)}),render:e=>(0,J.jsx)(xe,{store:t,outlinerItemStore:o,parent:e,isTopLevelItem:i})})})}function ve(e){window.__c={n:"AddPageButtonInternal"};const{isMobile:t}=(0,n.Fy)(),o=we();return(0,J.jsx)(ne.Z,{ariaLabel:ue.default.formatMessage(ye.addAPageInside),mobileFeedback:t,style:o.button,...e.events,children:(0,ee.f)(o.buttonIcon)})}function xe(e){window.__c={n:"AddToCollectionViewMenu"};const{store:t,outlinerItemStore:o,parent:i,isTopLevelItem:r}=e,a=(0,n.O7)(),{isMobile:d}=a.device,c=(0,s.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),u=(0,l.yK)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),p={menuType:d?pe.og.Modal:pe.og.Popup,right:d?(0,J.jsx)(de.DoneMenuText,{}):void 0},m={key:"collections",render:e=>(0,J.jsx)(ce.Z,{...e,title:(0,J.jsx)(E.FormattedMessage,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:c.map((e=>({key:e.id,render:t=>(0,J.jsx)(re.Z,{...t,title:(0,J.jsx)("div",{style:u.menuItem,children:(0,J.jsx)(k.Z,{store:e})}),icon:(0,J.jsx)(U.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})}),action:()=>{Ie({store:e,outlinerItemStore:o,sourceStore:e,shouldNavigateToSource:!0,environment:a,isTopLevelItem:r})}})))};return(0,J.jsx)(se.Z,{...p,children:(0,J.jsx)(le.Z,{type:le.i.Vertical,onAccept:i.close,initialFocus:void 0,sections:[m]})})}function Te(e){window.__c={n:"MenuButton"};const{store:t,type:o,itemDepth:i,itemIndex:r}=e,a=(0,E.useIntl)(),s=(0,n.O7)(),{isMobile:l}=s.device,d=we(),c=e=>{const n=K.VP(t);ie.Ys({environment:s,store:t}),oe.Qn({environment:s,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:n,type:0===i?"top_level":"nested",outliner_type:o,outliner_position:r,outliner_depth:i}})},u="bookmarks"===o?a.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):a.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,J.jsx)($.Z,{renderTooltip:()=>u,placement:$.Z.Placement.Bottom,render:e=>(0,J.jsx)(ne.Z,{ariaLabel:u,mobileFeedback:l,style:d.button,onClick:c,...e,children:(0,X.o)(d.buttonIcon)})})}function Ie(e){const{store:t,outlinerItemStore:o,sourceStore:i,shouldNavigateToSource:n,environment:r,isTopLevelItem:a}=e;he.M_(r)&&(r.device.isMobile&&Se.close(),W.createAndCommit({userAction:"OutlinerItem.createdPage",environment:r,perform:e=>p.D0({environment:r,store:i,transaction:e,navigateToParent:n})}),t.isCollectionView()||h.Ps({store:t,toggleStore:o,toOpen:!0,environment:r,isTopLevelItem:a}))}function we(){const e=(0,n.O7)().device.isMobile;return(0,l.yK)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:3,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:3,marginLeft:4},buttonIcon:e?{fill:t.lightIconColor,width:18}:{fill:t.sidebarTextColor,width:14}})),[e])}function je(e){window.__c={n:"BlockSidebarItem"};const{store:t,outlinerItemStore:o,style:i,targetStore:r,itemDepth:a,type:d,nestedOutlinerAriaId:c,titleAriaId:u}=e,p=(0,n.O7)(),m=p.device.isMobile,g=(0,s.VK)((()=>"copy_indicator"===t.getType()),[t]),S=(0,s.VK)((()=>function(e){const{targetStore:t,type:o}=e;if(!t)return;const i=(0,h.N)(o);if(t.isNavigableBlock())return(0,_.ZP)({store:t,fullyQualified:!1,pageVisitSource:i});{const e=K.Dg(t);if(e)return(0,_.ZP)({store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:i})}}({targetStore:r,type:d})),[r,d]),y=(0,s.VK)((()=>g&&N.transactionQueue.isPendingTransactionForRecord(t.pointer)),[g,t]),b=(0,s.VK)((()=>{const{mainEditorCurrentBlockStore:e}=D.default.state;return e&&t.id===e.id}),[t]),f=(0,s.VK)((()=>o.state.open),[o]),v=(0,s.VK)((()=>(0,V.H)()),[]),x=(0,l.yK)((e=>({sidebarItem:{...!m&&{paddingLeft:5},...b&&{fontWeight:M.Z.fontWeight.semibold,background:e.sidebarItemSelectedBackground,color:e.regularTextColor,...m&&{boxShadow:`\n                            0 1px 0 ${e.buttonHoveredBackground}\n                        `}},...(0,A.Z3)({isMobile:m}),...i},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:m?10:6,marginRight:m?12:void 0},link:{width:"100%"}})),[m,b,i]),T={role:"treeitem","aria-current":b?"page":void 0,"aria-expanded":!!f,"aria-owns":c,"aria-labelledby":u};if(g)return y?(0,J.jsxs)(L.Z,{style:x.sidebarItem,childrenStyle:x.children,onFocus:Ce(o),onBlur:Be(o),onMouseMove:Pe(o),onMouseLeave:Ze(o),children:[(0,J.jsx)(Z.Z,{style:x.loadingSpinner}),(0,J.jsx)(R.Z,{targetRecordId:t.id,style:x.moveOrDuplicateProgress})]}):null;if(S){const i=()=>{e.onNavigate&&e.onNavigate(t),v&&B.qQ({environment:p,open:!1});const o=K.VP(t);C.Yg1(p,{teamStore:o,type:0===a?"top_level":"nested",outliner_type:e.type,outliner_position:e.itemIndex,outliner_depth:a})};return(0,J.jsx)(P.Z,{onFocus:Ce(o),onBlur:Be(o),style:x.link,href:S,onClick:i,innerStyle:(0,A.G$)({isMobile:m}),...T,children:(0,J.jsx)(Me,{...e,sidebarItemStyle:x.sidebarItem,sidebarItemChildrenStyle:x.children,titleAriaId:u,nestedOutlinerAriaId:c})})}return(0,J.jsx)(Me,{...e,onFocus:Ce(o),onBlur:Be(o),sidebarItemStyle:x.sidebarItem,sidebarItemChildrenStyle:x.children,titleAriaId:u,nestedOutlinerAriaId:c,...T})}function Me(e){window.__c={n:"SidebarItemContainer"};const{store:t,parentStore:o,outlinerItemStore:i,targetStore:n,itemDepth:r,type:a,onFocus:l,onBlur:c,titleAriaId:u,nestedOutlinerAriaId:p}=e,m=(0,s.VK)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:n}=e;if(t.isDefined()&&(0,O.h7)(t))return!1;if(t.isCollectionView()&&!(0,F.bq)())return!t.getCollectionViewSourceCollectionStore();if("block"===(null==o?void 0:o.table)){if(x.G.createChildStore(o,{table:j.iU,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===d.Ti.alias)return!0;if(i&&"team"!==n)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:o,isTopLevelItem:0===r,type:a})),[t,o,r,a]);return(0,J.jsx)(L.Z,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:e.sidebarItemChildrenStyle,left:(0,J.jsx)(q,{store:t,outlinerItemStore:i,targetStore:n,type:a,itemIndex:e.itemIndex,itemDepth:r,"aria-controls":p,"aria-describedby":u}),icon:n&&(0,J.jsx)(Q,{targetStore:n,canEditItem:e.canEditItem}),right:(0,J.jsx)(be,{store:t,outlinerItemStore:i,type:a,itemIndex:e.itemIndex,itemDepth:r,canEditItem:e.canEditItem}),onFocus:l,onBlur:c,onMouseMove:Pe(i),onMouseLeave:Ze(i),isAlias:m,children:(0,J.jsx)(k.Z,{id:u,store:t})})}function Ce(e){return t=>{const o=t.target;o instanceof HTMLElement&&(0,w.E)(o)&&e.update((e=>({...e,focused:!0})))}}function Be(e){return t=>{e.update((e=>({...e,focused:!1})))}}function Pe(e){return t=>{H.Z.state.isDragging||e.update((e=>({...e,hovered:!0})))}}function Ze(e){return t=>{e.update((e=>({...e,hovered:!1})))}}var ke=o(12534),Le=o(45669),Oe=o(3392);function _e(e){window.__c={n:"CollectionViewOutlinerItem"};const{store:t,collectionViewStore:o,onNavigate:i,type:r}=e,a=(0,n.O7)(),d=(0,s.VK)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),c=(0,s.VK)((()=>{const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=D.default.state;return!d&&Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,d]),u=(0,l.yK)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.mediumTextColor},sideBarItem:{...c&&{fontWeight:M.Z.fontWeight.semibold,background:t.buttonHoveredBackground,color:t.regularTextColor,...a.device.isMobile&&{boxShadow:`\n\t\t\t\t\t\t0 1px 0 ${t.buttonHoveredBackground}\n\t\t\t\t\t`}},...e.style}})),[a.device.isMobile,c,e.style]),p=(0,s.VK)((()=>(0,_.ZP)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,h.N)(r)})),[o.id,t,r]),m=(0,s.VK)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),g=(0,s.VK)((()=>{if("page"!==m.type||!m.pagePointer)return null;const e=x.G.createChildStore(t,{table:m.pagePointer.table,id:m.pagePointer.id}),o=(0,h.Q2)(e);return{pageStore:e,ready:(0,S.b)(e),outlinerItems:o}}),[m,t]);if(!m.ready)return null;if("page"===m.type&&g){const{ready:o,outlinerItems:i}=g;return(0,J.jsx)(Oe.Z,{type:e.type,childStores:i,areChildrenLoading:!o,itemDepth:e.itemDepth+1,parentStore:t.getContentStore(),itemStyle:u.sideBarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled})}return d?null:(0,J.jsx)(P.Z,{href:p,style:{width:"100%"},innerStyle:(0,A.G$)({isMobile:a.device.isMobile}),onClick:()=>{i&&i(t)},role:"treeitem","aria-current":c?"step":void 0,children:(0,J.jsx)(L.Z,{icon:(0,J.jsx)("div",{style:u.initialIcon,children:"•"}),style:u.sideBarItem,children:(0,J.jsx)(Le.Z,{collectionViewName:m.name,collectionViewType:m.type??"table"})})})}function Ve(e){window.__c={n:"CollectionViewOutliner"};const{store:t}=e,o=(0,s.VK)((()=>t.getCollectionViewStores()),[t]);return(0,J.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,ke.ZP)({event:e,context:ke.Af.EditorContextMenu,callback:()=>{}})},children:o.map((o=>(0,J.jsx)(_e,{store:t,collectionViewStore:o,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores},o.id)))})}function Ae(e){window.__c={n:"NestedOutliner"};const{disabled:t,store:o,style:i,targetStore:r,itemDepth:a,nestedOutlinerAriaId:d,titleAriaId:c}=e,{isMobile:u}=(0,n.Fy)(),p=(0,s.VK)((()=>!(0,S.b)(o)),[o]),m=(0,s.VK)((()=>r.isCollectionView()?r:null),[r]),g=(0,s.VK)((()=>(0,h.Yz)(o)),[o]),y=(0,l.yK)((()=>{const e="number"==typeof(null==i?void 0:i.paddingLeft)?i.paddingLeft:u?De:5,t=u?He:14;return{item:{...i,paddingLeft:e+t}}}),[i,u]);return m?(0,J.jsx)(Ve,{store:m,itemStyle:y.item,onNavigate:e.onNavigate,type:e.type,childStores:g,areChildrenLoading:!1,itemDepth:a+1,parentStore:r.getContentStore(),itemToggleStyle:e.toggleStyle,disabled:t,id:d,"aria-labelledby":c}):(0,J.jsx)(Oe.Z,{type:e.type,childStores:g,areChildrenLoading:p,itemDepth:a+1,parentStore:r.getContentStore(),itemStyle:y.item,itemToggleStyle:e.toggleStyle,onNavigate:e.onNavigate,disabled:t,id:d,"aria-labelledby":c})}function Ke(e){return`Outliner-${e.id}`}function Fe(e){let{store:t,type:o,isTopLevelItem:i}=e;return e=>{const n=t.getRecordStoreUIParent();null!=n&&n.valueIs(T.i)&&p.A5({...e,type:o,targetStore:t,targetParentStore:n,isTopLevelItem:i})}}function Re(e){let{environment:t,store:o,parentStore:i,type:n,isTopLevelItem:r}=e;return async e=>{const{droppedDirection:a,droppedStores:s,duplicate:l}=e;i&&await p.v9({environment:t,type:n,targetParentStore:i,targetStore:o,isTopLevelItem:r,droppedDirection:a,droppedStores:s,duplicate:l})}}const De=6,He=22,Ne=function(e){window.__c={n:"OutlinerItem"};const{store:t,itemIndex:o,parentStore:l,type:h,itemDepth:S,disabled:b}=e,f=(0,n.O7)(),T=(0,r.l)(),w=(0,s.qz)(void 0,v),j=(0,i.useId)(),M=(0,i.useId)(),C=(0,s.VK)((()=>function(e){if(e.getType()===d.Ti.alias){const t=e.getAliasTargetStore();return t instanceof x.G?t:void 0}return e}(t)),[t]),B=(0,s.VK)((()=>I.Bb(t)),[t]),P=(0,s.VK)((()=>!b&&(0,g.J5)({environment:f,blocks:[t],publicEditMode:T&&T.publicEditModeStore.state})),[b,T,f,t]),Z=(0,s.VK)((()=>P&&!t.isLinkedCollectionView()),[t,P]),k=(0,s.VK)((()=>w.state.open),[w]),L=function(e){return 0===e}(S);(0,i.useEffect)((()=>{if((0,u.$K)(e.itemOpenByDefault)&&w.update((t=>({...t,open:e.itemOpenByDefault}))),L){const e=c.Z.get({userId:f.currentUser.id,key:Ke(t)});(0,u.$K)(e)&&w.update((t=>({...t,open:e})))}}),[]);const O=(0,i.useRef)(null);(0,a.c)(y.Z,(()=>({store:t,parentStore:l,type:h,isTopLevelItem:L,getNode:()=>O.current})),[t,l,h,L]);const _=B&&l?{onInsertBelow:e=>p.LR({...e,environment:f,store:t,parentStore:l,before:!0,type:h}),onInsertAbove:e=>p.LR({...e,environment:f,store:t,parentStore:l,before:!1,type:h})}:{},V=0===o;return C?(0,J.jsxs)(m.Z,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:B,canDropAbove:V,canDropBelow:B,canDropOnto:Z,canInsertBelow:B,canInsertAbove:B,canSelect:B,canTriggerContextMenu:!0,onRemove:Fe({store:t,type:h,isTopLevelItem:L}),onSelectableDrop:Re({environment:f,store:t,parentStore:l,type:h,isTopLevelItem:L}),shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,..._,ref:O,children:[(0,J.jsx)(je,{store:t,outlinerItemStore:w,style:e.style,parentStore:l,type:h,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:C,canEditItem:P,nestedOutlinerAriaId:j,titleAriaId:M}),k&&(0,J.jsx)(Ae,{...e,targetStore:C,nestedOutlinerAriaId:j,titleAriaId:M})]}):null}},75546:(e,t,o)=>{o.d(t,{o:()=>c});o(67294);var i=o(480),n=o(86628),r=o(24405),a=o(82990),s=o(95697),l=o(43488),d=o(85893);function c(e){let{teamStore:t,withSelectedStyle:o}=e;window.__c={n:"TeamHeaderLabel"};const c=(0,i.Fy)(),u=(0,n.VK)((()=>{var e;return{teamName:t.getName()??"",shouldShowLock:(0,s.C2)(null==t||null===(e=t.getSettingsStore())||void 0===e?void 0:e.getValue())}}),[t]),p=(0,r.yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},lockIcon:{width:15,marginLeft:6,marginBottom:1,fill:e.mediumIconColor},labelText:{...a.Z.textOverflowStyle,...o?{color:e.regularTextColor,fontWeight:a.Z.fontWeight.semibold}:{color:e.darkTextColor,fontWeight:a.Z.fontWeight.medium},fontSize:c.isMobile?a.Z.fontSize.UIRegular.mobile:a.Z.fontSize.UIRegular.desktop}})),[c.isMobile,o]);return u?(0,d.jsxs)("div",{style:p.container,children:[(0,d.jsx)("div",{style:p.labelText,children:u.teamName}),u.shouldShowLock&&(0,d.jsx)(l.Z,{iconStyle:p.lockIcon})]}):null}},29165:(e,t,o)=>{o.d(t,{O:()=>T});var i=o(67294),n=o(480),r=o(86628),a=o(29369),s=o(5366),l=o(29921),d=o(80444),c=o(70704),u=o(75546),p=o(24405),m=o(75071),g=o(14720),h=o(64921),S=o(31945),y=o(68785),b=o(14694),f=o(85893);function v(e){let{teamStore:t}=e;window.__c={n:"TeamOutlinerEmptyState"};const o=(0,n.Fy)(),a=(0,r.VK)((()=>t.canAddOrRemoveTopLevelPages()),[t]),[l,d]=(0,i.useState)(void 0),c=(0,p.yK)((e=>({emptyPlaceholder:{color:e.lightTextColor,paddingLeft:12,...!o.isMobile&&{fontSize:14},...o.isMobile&&{display:"flex",alignItems:"center",height:32},display:"flex",alignItems:"center"},addPage:{color:e.mediumTextColor,borderRadius:3},addPageButton:{borderRadius:3,marginLeft:4,marginRight:4},addPageIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},addPageIcon:{fill:e.mediumIconColor,width:16,height:16}})),[o]);return a?(0,f.jsx)(S.ZP,{popupType:S.Z4.Popup,alignmentToOrigin:S.vR.Start,originGap:2,originRect:l,renderOrigin:e=>(0,f.jsx)(h.Z,{mobileFeedback:o.isMobile,style:c.addPageButton,...e,onClick:t=>{d(new DOMRect(t.clientX,t.clientY)),e.onClick(t)},children:(0,f.jsx)(b.Z,{style:c.addPage,disableMobileBorder:!0,left:(0,f.jsx)("div",{style:c.addPageIconContainer,children:(0,m.f)(c.addPageIcon)}),children:(0,f.jsx)(s.FormattedMessage,{id:"teamOutliner.addPage",defaultMessage:"Add a page"})})}),render:e=>(0,f.jsx)(g.p7,{renderLoading:e=>(0,f.jsx)("div",{style:g.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,f.jsx)(y.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_empty_new_page"})}):(0,f.jsx)(b.Z,{disableMobileBorder:!0,children:(0,f.jsx)("div",{style:c.emptyPlaceholder,children:(0,f.jsx)("span",{children:(0,f.jsx)(s.FormattedMessage,{defaultMessage:"No pages inside",id:"teamOutliner.noOverflowEmptyMessage"})})})})}var x=o(54396);function T(e){let{teamStore:t,sidebarState:o,isLastTeam:i,initialToggleState:p,shouldPersistToggleState:m,customToggleStore:g,teamOutlinerType:h,onNavigate:S,onTeamJoinComplete:y}=e;window.__c={n:"TeamOutliner"};const{currentSpaceStore:b,currentSpaceViewStore:x,currentUserSettingsStore:T}=(0,r.VK)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}=d.default.state;return{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}}),[]),w=(0,r.qz)(void 0,c.Z),j=g??w,M=(0,r.VK)((()=>t.getTeamPagesStores()),[t]),C=(0,n.Fy)(),B=(0,r.VK)((()=>{const e=d.default.state.mainEditorCurrentBlockStore;return(null==e?void 0:e.getParentTable())===a.e0&&(null==e?void 0:e.getParentId())===t.id&&!C.isMobile&&j.state.isHidden}),[C.isMobile,t.id,j]);return b&&x&&T?(0,f.jsx)(l.Z,{type:"team",customToggleButtonStore:j,forceHoveredButtonStyle:B,initialToggleState:p,shouldPersistToggleState:m,teamHeaderLabel:(0,f.jsx)(u.o,{teamStore:t,withSelectedStyle:B}),teamStore:t,spaceStore:b,spaceViewStore:x,showAddButton:!1,isLastTeam:i,teamOutlinerType:h,labelTooltip:(0,f.jsx)(s.FormattedMessage,{defaultMessage:"One of your teams",id:"sidebar.teamSection.tooltip"}),onTeamJoinComplete:y,marginBottomOverrideWhenExpanded:C.isMobile?0:16,marginBottomOverrideWhenCollapsed:C.isMobile?0:1,renderSidebar:e=>{let{labelAriaId:i,contentsAriaId:n}=e;if(!t)return;const r=new Set(M.map((e=>e.id)));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(I,{teamSectionType:h,sidebarState:o,teamStore:t,onNavigate:S,labelAriaId:i,contentsAriaId:n}),0===r.size&&(0,f.jsx)(v,{teamStore:t})]})}}):null}const I=i.memo((e=>{window.__c={n:"MemoizedTeamTopLevelSidebarOutliner"};const{teamSectionType:t,teamStore:o,sidebarState:n,contentsAriaId:r,onNavigate:a,labelAriaId:s}=e,l=(0,i.useMemo)((()=>({type:"team",teamSectionType:t,teamStore:o})),[t,o]),d=(0,i.useMemo)((()=>({id:r,"aria-labelledby":s})),[r,s]);return(0,f.jsx)(x.r,{state:l,sidebarState:n,onNavigate:a,additionalOutlinerProps:d})}))},54396:(e,t,o)=>{o.d(t,{r:()=>S});var i=o(67294),n=o(480),r=o(86628),a=o(24405),s=o(97880),l=o(35683),d=o(35026),c=o(80444),u=o(61738),p=o(99757),m=o(3392),g=o(24359),h=o(85893);function S(e){window.__c={n:"TopLevelSidebarOutliner"};const{state:t,sidebarState:o,onNavigate:S,additionalOutlinerProps:y,id:b,isHeaderless:f}=e,v=(0,r.VK)((()=>c.default.state.currentSpaceStore),[]),x=(0,r.VK)((()=>c.default.state.currentSpaceViewStore),[]),T=(0,n.O7)(),I=(0,n.Fy)().isMobile,w=(0,r.VK)((()=>!p.n.state),[]),j=(0,r.VK)((()=>(null==v?void 0:v.canEdit())&&w),[v,w]),M=(0,r.VK)((()=>t),[t]),C=(0,r.VK)((()=>{if(x)return(0,d.EE)({currentSpaceViewStore:x,typeWithTeam:M,environment:T,sidebarState:o})}),[x,T,o,M]),B=(0,r.VK)((()=>{if(x&&v)return(0,d.P4)({currentSpaceStore:v,currentSpaceViewStore:x,typeWithTeam:M})}),[v,x,M]),P=(0,i.useCallback)((e=>{switch(M.type){case"bookmarks":u.Z.recordVisit({id:e.id,blockType:e.getType(),type:l.vu.Favorite,currentUserId:T.currentUser.id});break;case"team":case"workspace":case"shared":u.Z.recordVisit({id:e.id,blockType:e.getType(),type:l.vu.Link,currentUserId:T.currentUser.id});break;case"private":break;default:(0,s.t1)(M)}null==S||S()}),[T.currentUser.id,S,M]),Z=(0,a.yK)((()=>({outliner:{display:"block"},outlinerItem:{...I&&"team"===M.type?{paddingLeft:g.gZ+g.aZ}:void 0}})),[I,M.type]);return v&&x&&C?(0,h.jsx)(m.Z,{type:M.type,disabled:!j,itemDepth:0,childStores:C,parentStore:B,style:Z.outliner,itemStyle:Z.outlinerItem,onNavigate:P,id:b,"aria-labelledby":e["aria-labelledby"],isHeaderless:f,...y}):null}},14720:(e,t,o)=>{o.d(t,{Aj:()=>s,Rv:()=>r,Ry:()=>d,p7:()=>l,tn:()=>n,vs:()=>a});var i=o(77907);const n=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarTeamBrowserContent)),r=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSwitcherMultiAccountPopup)),a=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarFooter)),s=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSectionOnboardingHighlightPopup)),l=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.TeamAddAppTemplateMenu)),d={LazyTeamAddAppTemplateMenu:{width:250,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}}},56638:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(49085);class n extends i.default{getInitialState(){return{open:!1}}}const r=new n},30278:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(49085);class n extends i.default{getInitialState(){return{contacts:!1}}}const r=n},43488:(e,t,o)=>{o.d(t,{Z:()=>s});o(67294);var i=o(16184),n=o(5366),r=o(26388),a=o(85893);function s(e){let{iconStyle:t}=e;return(0,a.jsx)(r.Z,{textWrap:!0,style:{width:210},placement:r.Z.Placement.Bottom,renderTooltip:()=>(0,a.jsx)(n.FormattedMessage,{id:"teamLockIcon.tooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>(0,a.jsx)("div",{...e,children:(0,i.Q)(t)})})}},22487:(e,t,o)=>{o.d(t,{K:()=>s});var i=o(86628),n=o(27006),r=o(95697),a=o(80444);function s(e){return(0,i.VK)((()=>{if(!e)return 0;const t=a.default.state.currentSpaceStore,o=a.default.state.currentUserStore;if(!n.YX((null==t?void 0:t.getRole())??"none")){return(0,r.tu)({currentUserStore:o,currentSpaceStore:t,teamStore:e,members:e.getMembers()}).length}return(0,r.tO)({teamStore:e,spaceStore:t}).length}),[e])}}}]);