"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7983],{14694:(e,t,n)=>{n.d(t,{Z:()=>c});n(67294);var r=n(480),a=n(86628),i=n(24405),s=n(39567),o=n(50659),l=n(85893);function d(){window.__c={n:"AliasIcon"};const e=(0,i.yK)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.regularTextColor:"#3E3C38",stroke:"dark"===e.mode?e.sidebarBackground:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,l.jsx)("div",{children:(0,s.Y)(e.icon)})}function c(e){var t;window.__c={n:"SidebarItem"};const n=(0,r.O7)(),s=n.device.isMobile,c=(0,a.VK)((()=>{var t,r;if(s)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(r=e.style)||void 0===r?void 0:r.paddingLeft:10)}),[n.WindowSizeStore,s,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),u=(0,i.yK)((t=>({wrapper:{...s?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:c,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:e.disableMobileBorder?void 0:`0 1px 0 ${t.regularDividerColor}`,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:27,paddingTop:2,paddingBottom:2,marginTop:1,marginBottom:1,...(0,o.MF)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:s?28:22,height:s?24:18,marginLeft:-3,marginRight:4,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:3,color:t.mediumTextColor,width:s?26:22,height:s?24:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!s?"clip":"ellipsis",...e.childrenStyle}})),[s,c,e.disableMobileBorder,e.shouldShowMobileMarginBottom,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,l.jsxs)("div",{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:u.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,l.jsx)("div",{style:u.left,children:e.left}),e.icon&&(0,l.jsxs)("div",{style:u.icon,children:[e.icon,e.isAlias&&(0,l.jsx)(d,{})]}),(0,l.jsx)("div",{style:u.children,children:e.children}),e.right&&(0,l.jsx)("div",{style:u.right,children:e.right})]})}},60652:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ue,usePaymentRequest:()=>le});var r=n(86664),a=n(67294),i=n(480),s=n(86628),o=n(3791),l=n(5366),d=n(43250),c=n(38755),u=n(16100),p=n(80444),m=n(88632),y=n(45407),g=n(27242),f=n(78291),h=n(19234),b=n(68626),v=n(90850),x=n(50906),M=n(47307),S=n(92625),j=n(92083),C=n(70060),w=n(88893),I=n(33493),_=n(22616),T=n(34583),O=n(85893);const A=(0,l.defineMessages)({cancelFailedSubscription:{id:"subscription.upgrade.cancel_failed_subscription",defaultMessage:"Cancelling subscription..."},finishingUp:{id:"subscription.upgrade.finishing",defaultMessage:"Finishing up..."}});async function Z(e){const{environment:t,state:n,data:a,stripe:i,elements:s,intl:o,paymentOptionAvailabilityStore:l,useTestClock:d}=e,c=n.temporaryPaymentMethod;x.PNo(t,{paymentMethod:c});const p=l.state.paymentRequest;if("native_payment_platform"===c&&p)return void p.show();g.Z.update((e=>({...e,payButtonState:"disabled"})));k({environment:t,state:n,intl:o})&&await async function(e){const{environment:t,state:n,data:a,stripe:i,elements:s,intl:o,useTestClock:l}=e;if(!s||!i)return void b.log({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}});if(C.rR()){let e=n.paymentData;if(!e){const{error:r}=await s.submit();if(r)return x.VQs(t,{error:"could not submit form",error_type:"payment_method"}),void g.Z.setState({...n,error:o.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})});const a=await i.createPaymentMethod({elements:s});if(a.error)return x.VQs(t,{error:a.error.message,error_type:"payment_method"}),void g.Z.setState({...n,error:u.translateStripeError(t,o,a.error)});if(!a.paymentMethod)return x.VQs(t,{error:"could not create token",error_type:"payment_method"}),void g.Z.setState({...n,error:o.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})});e={type:"paymentMethodId",value:a.paymentMethod.id},g.Z.setState({...n,paymentData:e})}await F({environment:t,data:a,paymentData:e,stripe:i,onComplete:void 0,useTestClock:l})}else{if("invoice"===n.temporaryPaymentMethod)return void(await F({environment:t,data:a,stripe:i,paymentData:void 0,onComplete:void 0,useTestClock:l}));const e=s.getElement(r.CardElement);if(!e)return void b.log({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe Card Element could not be found"}});const d=await i.createToken(e);if(!d.error&&d.token){const e={type:"stripeToken",value:d.token.id};await F({environment:t,data:a,paymentData:e,stripe:i,onComplete:void 0,useTestClock:l})}else d.error?(x.VQs(t,{error:d.error.message,error_type:"credit_card"}),g.Z.setState({...n,error:u.translateStripeError(t,o,d.error)})):(x.VQs(t,{error:"could not create token",error_type:"credit_card"}),g.Z.setState({...n,error:o.formatMessage({id:"spaceSubscriptionUpgradeModal.creditCard.genericError",defaultMessage:"Your card could not be processed. Please try again."})}))}}({environment:t,state:n,data:a,stripe:i,elements:s,intl:o,useTestClock:d});const m=g.Z.state;m.open&&g.Z.setState({...m,payButtonState:"enabled"})}async function F(e){var t,n;const{environment:r,data:a,paymentData:i,stripe:s,useTestClock:o,onComplete:d}=e,c=p.default.state.currentSpaceStore,m=g.Z.state;c&&_.Z({environment:r,spaceId:c.id});const{status:y,prices:f,selectedCurrencyCode:h}=I.Z.state;if(!m.open||!c||"ready"!==y)return void(d&&d("fail"));const b=m.temporaryPaymentMethod,C=w.GD(m.temporaryBillingInterval),Z=w.Md(m,a),F=null===(t=f.find((e=>e.product===m.subscriptionTier&&e.billingInterval===C&&e.currencyCode===h)))||void 0===t?void 0:t.externalId,k=null===(n=f.find((e=>e.product===m.addOnFeature&&e.billingInterval===C&&e.currencyCode===h)))||void 0===n?void 0:n.externalId,B=m.appliedPromo,P=m.temporaryAddress;try{const e=await T.Mg({environment:r,spaceStore:c,plan:F,paymentData:i,billingEmail:Z,coupon:B&&"coupon"===B.source?B.code:void 0,customerName:P.name,businessName:P.businessName,addressLine1:P.addressLine1,addressCity:P.city,addressZip:P.zipCode,addressState:P.state,addressCountry:P.country,vatId:m.vatApplicable?m.temporaryVatCode:void 0,promoCodeId:B&&"promo_code"===B.source?B.code:void 0,from:"subscription_upgrade_modal",addOns:k?[{priceId:k,isCancellation:!1}]:[],useTestClock:o,sessionId:m.sessionId,inAppOffer:"ai"===m.addOnFeature?m.coupon:void 0,isTrial:m.isTrial});S.j({message:A.finishingUp});const t=e.paymentIntentClientSecret;let n=e.paymentIntentStatus;if(t&&"requires_action"===n){const{paymentIntent:e,error:r}=await s.handleNextAction({clientSecret:t});e?n=e.status:null!=r&&r.payment_intent&&(n=r.payment_intent.status)}"succeeded"===n?x.fZH(r,{paymentMethod:b}):u.paymentIntentRequiresPaymentMethod({status:n})&&(M.showDialog({message:"trialing"===e.subscriptionStatus?(0,O.jsx)(l.FormattedMessage,{id:"subscription.upgrade.payment_failed.trial",defaultMessage:"Please provide an alternate payment method to complete your upgrade."}):(0,O.jsx)(l.FormattedMessage,{id:"subscription.upgrade.payment_failed",defaultMessage:"Your payment could not be processed. Please provide an alternate payment method or you will lose access to Notion."}),showCancel:!1,keepFocus:!1,disableBackgroundDismiss:!0,items:[{label:(0,O.jsx)(l.FormattedMessage,{id:"subscription.upgrade.payment_failed.pay_invoice",defaultMessage:"Complete payment"}),onAccept:()=>{x.AqV(r,{paymentMethod:b}),window.open(e.invoiceUrl,"_blank")},color:"red"},{label:(0,O.jsx)(l.FormattedMessage,{id:"subscription.upgrade.payment_failed.cancel",defaultMessage:"Cancel upgrade"}),onAccept:async()=>{x.cYL(r,{paymentMethod:b}),S.j({message:A.cancelFailedSubscription}),await T.EO({environment:r,spaceStore:c,planType:c.getPlanType()??"personal",from:"subscription_upgrade_modal-failed_payment"}),S.x()}}]}),null==d||d("fail")),d&&d("success"),B&&(0,v.$r)(r.currentUser.id),function(e){const{environment:t}=e;g.Z.reset(),x.Xov(t)}({environment:r}),j.Z.setState({...j.Z.state,currentTab:"billing",defaultSubtab:void 0})}catch{x.cYL(r),d&&d("fail")}S.x()}function k(e){const{environment:t,intl:n,state:r}=e;if(!C.vi())return!0;let a;return r.temporaryAddress.country?"address_resolution_failed"!==r.taxCalculationError&&(0,h.A)(r.temporaryAddress)||(a=n.formatMessage({id:"spaceSubscriptionUpgradeModal.billingAddress.invalidError",defaultMessage:"Your address is invalid. Please update your address so we can process your payment."})):a=n.formatMessage({id:"spaceSubscriptionUpgradeModal.billingAddress.missingCountryError",defaultMessage:"Invalid country. Please select the country from the dropdown menu."}),a&&(g.Z.setState({...r,error:a}),x.VQs(t,{error:void 0,error_type:"address"})),void 0===a}var B=n(859),P=n(48122),D=n(97765),V=n(91624),U=n(51133),R=n(29497),E=n(7184),L=n(4550),z=n(10644),W=n(24405),K=n(97880),N=n(82990),Y=n(38461),q=n(27533),G=n(91493),H=n(59148),Q=n(42329),X=n(92041),$=n(61519),J=n(68785),ee=n(1063);function te(e){window.__c={n:"SpaceSubscriptionOrderSummary"};const{state:t,data:n,promo:r}=e,{coupon:a,isTrial:o}=t,d=(0,i.O7)(),c=(0,W.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},header:{alignItems:"center",color:e.regularTextColor,display:"flex",fontSize:16,fontWeight:N.Z.fontWeight.semibold,gap:8,marginBottom:11,lineHeight:"22px"},couponLink:{fontSize:12}})),[]),{availableCurrencyCodes:u,selectedCurrencyCode:p}=(0,s.VK)((()=>({availableCurrencyCodes:I.Z.availableCurrencyCodes,selectedCurrencyCode:I.Z.selectedCurrencyCode})),[]),m=t.temporaryBillingInterval??"month",y=U.Zr(r),g=U.Lp(t),f=(0,s.VK)((()=>g.map((e=>I.Z.getPrice(d,(t=>t.product===e&&t.billingInterval===m))))),[m,d,g]);if(f.some((e=>!e.isLoaded)))return(0,O.jsx)(J.Z,{});const h=f.map((e=>e.result)).filter(Boolean),b=w.su(n),v=h[0].unitAmount.currencyValue,x=U.cv({prices:h,quantity:b,coupon:a}),M=U.VT({calculatingTax:t.calculatingTax,taxAmount:t.taxAmount,currencyValue:v}),S=U.rF({prices:h,quantity:b,promo:y}),j=U.Et(n,v),C=x.plus(M).minus(S).minus(j),T=C.amount<0?C.withMultipliedAmount(0):C;return(0,O.jsxs)("div",{style:c.container,children:[o?null:(0,O.jsxs)("label",{style:c.header,children:[(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.header",defaultMessage:"Order summary"}),(0,O.jsx)(Y.V,{availableCurrencyCodes:u,from:"upgrade_modal",onSelectCurrency:_.y,selectedCurrencyCode:p})]}),(0,O.jsx)(ae,{prices:h,coupon:t.coupon,data:n,isTrial:o}),w.Fu(t.subscriptionTier)&&(0,O.jsx)(ee.X,{tier:t.subscriptionTier}),(0,O.jsx)($.Z,{size:1}),o?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(re,{subtotal:x,tax:M,discount:S,accountBalance:j,promo:y,state:t,style:{marginBottom:8}}),(0,O.jsx)(ne,{total:T})]})]})}function ne(e){const t=U.hr();return(0,O.jsxs)("div",{style:t.itemContainer,children:[(0,O.jsx)("div",{style:t.captionContainer,children:(0,O.jsx)("span",{style:t.totalName,children:(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeOrderSummary.totalForToday",defaultMessage:"Total for today"})})}),(0,O.jsx)("span",{style:t.totalPrice,children:(0,O.jsx)(q.W,{cost:e.total.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}function re(e){const{subtotal:t,tax:n,discount:r,accountBalance:a,style:i,promo:s}=e,{calculatingTax:o,coupon:l}=e.state;return(0,O.jsxs)("div",{style:i,children:[(0,O.jsx)(Q.r,{subtotal:t}),(0,O.jsx)(X.u,{tax:n,calculatingTax:o}),s&&!l?(0,O.jsx)(H.T,{discount:r,promo:s}):void 0,(0,O.jsx)(G.G,{accountBalance:a})]})}function ae(e){const{coupon:t,data:n,prices:r,isTrial:a}=e;return(0,O.jsx)(O.Fragment,{children:r.map((e=>(0,O.jsx)(ie,{price:e,data:n,coupon:t,isTrial:a},e.externalId)))})}function ie(e){window.__c={n:"SpaceSubscriptionGrossOrderItem"};const{price:t,data:n,coupon:r,isTrial:a}=e,i=(0,W.yK)((e=>({container:{display:"flex",justifyContent:"space-between"},item:{},title:{fontSize:14,fontWeight:N.Z.fontWeight.medium,marginBottom:4},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14}})),[]),s=w.su(n),o=t.getCostPerBillingInterval({quantity:s,coupon:r}),l=(0,O.jsx)(q.W,{cost:o.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});return(0,O.jsxs)("div",{style:i.container,children:[(0,O.jsxs)("div",{style:i.item,children:[(0,O.jsx)("div",{style:i.title,children:(0,O.jsx)(se,{price:t})}),(0,O.jsx)("div",{style:i.subtitle,children:(0,O.jsx)(oe,{price:t,data:n,coupon:r,isTrial:a})})]}),a?null:(0,O.jsx)("div",{style:i.price,children:l})]})}function se(e){const{price:t}=e;switch(t.product){case"free":case"student":return null;case"ai":return(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.ai.addOn",defaultMessage:"Notion AI"});case"personal":return(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.singlePlayerPlusPlan",defaultMessage:"Plus plan with a 1-member limit"});case"plus":return(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.plusPlan",defaultMessage:"Plus plan"});case"business":return(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.businessPlan",defaultMessage:"Business plan"});case"enterprise":return(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.enterprisePlan",defaultMessage:"Enterprise plan"});default:(0,K.t1)(t.product)}}function oe(e){const{price:t,data:n,coupon:r,isTrial:a}=e,i=w.su(n),s=t.getMonthlyUnitCost(r),o=(0,O.jsx)(q.W,{cost:s.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});if(a)return(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.trial.billedYearly",defaultMessage:"{price} / member / month",values:{br:(0,O.jsx)("br",{}),price:o}});switch(t.billingInterval){case"year":return(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedYearly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed yearly",values:{br:(0,O.jsx)("br",{}),price:o,numberOfMembers:i}});case"month":return(0,O.jsx)(l.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedMonthly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed monthly",values:{br:(0,O.jsx)("br",{}),price:o,numberOfMembers:i}});default:(0,K.t1)(t.billingInterval)}}function le(e){const{data:t,paymentOptionAvailabilityStore:n}=e,s=(0,i.O7)(),o=(0,r.useStripe)(),d=(0,l.useIntl)(),[c,u]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(!o||c)return;const e=o.paymentRequest({country:"US",currency:"usd",total:{label:d.formatMessage({id:"spaceSubscriptionUpgradeModal.applePay.total.label",defaultMessage:"Notion - You will be charged on a recurring basis"}),amount:0}});e.canMakePayment().then((t=>{t&&(n.update((n=>({...n,supportsApplePay:t.applePay,paymentRequest:e}))),n.addPaymentOption("native_payment_platform"))})),e.on("paymentmethod",(e=>{const n=g.Z.state;if(!n.open)return;if(k({environment:s,state:n,intl:d})){const n={type:"paymentMethodId",value:e.paymentMethod.id};F({environment:s,data:t,paymentData:n,stripe:o,onComplete:e.complete,useTestClock:!1})}else e.complete("fail")})),u(!0)}),[o,c,t,s,d,n])}function de(e){window.__c={n:"ModalContentWrapper"};const{state:t,data:n,paymentOptionAvailabilityStore:a,spaceStore:i}=e,{subscriptionTier:o,onlyShowAddOn:l,calculatingTax:d,temporaryBillingInterval:c,taxAmount:p,addOnFeature:m,coupon:y}=t,g=w.XX(n),f=(0,s.VK)((()=>(null==g?void 0:g.currencyCode)??I.Z.selectedCurrencyCode),[g]),{payAmount:h}=w.uN({subscriptionTier:o,currencyCode:f,promo:t.appliedPromo,data:n,onlyShowAddOn:l,calculatingTax:d,billingInterval:c??"year",taxAmount:p,addOnFeature:m,coupon:y}),b=(0,u.useElementsOptions)({type:"subscription",amount:h.amount,currency:h.currencyCode});return(0,O.jsx)(r.Elements,{stripe:(0,u.getStripe)(),options:b,children:(0,O.jsx)(ce,{state:t,data:n,paymentOptionAvailabilityStore:a,spaceStore:i})})}function ce(e){window.__c={n:"ModalContent"};const{state:t,data:n,paymentOptionAvailabilityStore:a,spaceStore:d}=e,u=(0,i.O7)(),p=(0,l.useIntl)(),{isMobile:y}=(0,i.Fy)(),h=(0,r.useStripe)(),b=(0,r.useElements)();le({data:n,paymentOptionAvailabilityStore:a});const v=(0,s.VK)((()=>m.Z.state.online),[]),[x,M,S,j,C]=(0,s.VK)((()=>{var e;const n=(null===(e=f.default.state.data)||void 0===e?void 0:e.addOns)??[],r=(0,c.CV)(d);return[t.subscriptionTier,t.temporaryBillingInterval,t.addOnFeature,!r&&!(0,o.de)(n),t.coupon]}),[t,d]);if(!t.open)return null;if(!v)return(0,O.jsx)(z.Z,{});const w=U.Lp(t);return(0,O.jsx)(R.CT,{showDismissButton:!0,main:(0,O.jsx)(R.T1,{width:y?"fill":450,children:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:{paddingBottom:24},children:(0,O.jsx)(V.Q,{subscriptionTier:t.subscriptionTier,onlyShowAddOn:t.onlyShowAddOn,addOnFeature:t.addOnFeature,type:t.type,isTrial:t.isTrial})}),t.onlyShowAddOn?null:(0,O.jsx)(L.Z,{subscriptionTier:x,billingInterval:M,addOnFeature:S,canAddAI:j,isTrial:t.isTrial,coupon:C,onChangeBillingInterval:e=>{g.Z.update((t=>({...t,temporaryBillingInterval:e})))},onChangeAddOnFeature:e=>{g.Z.update((t=>({...t,addOnFeature:e})))}}),(0,O.jsx)(D.g,{state:t,paymentOptionAvailabilityStore:a}),(0,O.jsx)(B.iQ,{})]})}),sidebar:(0,O.jsxs)(R.T6,{width:y?"fill":300,children:[(0,O.jsx)(te,{state:t,data:n,promo:t.appliedPromo}),(0,O.jsx)(P.f,{state:t,paymentOptionAvailabilityStore:a,products:w,onClickUpgrade:e=>Z({environment:u,intl:p,state:t,stripe:h,elements:b,data:n,paymentOptionAvailabilityStore:a,useTestClock:e.useTestClock})})]})})}const ue=function(e){window.__c={n:"SpaceSubscriptionUpgradeModal"};const{data:t,spaceStore:n}=e,r=(0,s.VK)((()=>g.Z.state),[]),i=(0,l.useIntl)(),o=(0,a.useMemo)((()=>new y.Z),[]);return(0,a.useEffect)((()=>{const{state:e}=g.Z;if(!e.open)return;const{currentUserStore:n}=p.default.state,r=null!=n&&n.isDefined()?n.getModel():void 0;if(r){const n=r.getDisplayName(i);var a;if(g.Z.setState({...e,temporaryAddress:{...e.temporaryAddress,name:n}}),"subscribed_admin"===t.type||"unsubscribed_admin"===t.type)g.Z.setState({...e,appliedPromo:null===(a=t.customerData)||void 0===a?void 0:a.stripe.promo})}}),[]),(0,O.jsx)(E.c,{ariaLabelledBy:d.BaY,isOpen:r.open,onDismiss:()=>g.Z.setState({open:!1}),children:r.open?(0,O.jsx)(de,{state:r,data:t,paymentOptionAvailabilityStore:o,spaceStore:n}):null})}},1063:(e,t,n)=>{n.d(t,{X:()=>c});n(67294);var r=n(480),a=n(24405),i=n(5366),s=n(50906),o=n(35057),l=n(42402),d=n(85893);function c(e){window.__c={n:"StartupCouponInlineTextLink"};const t=(0,r.O7)(),n=(0,a.yK)((()=>({couponLink:{fontSize:12}})),[]);return(0,d.jsx)(l.Z,{href:"https://notionup.typeform.com/to/qYXezfBW",external:!0,style:n.couponLink,onClick:()=>{const n=(0,o.zt)();s.sS1(t,{tier:e.tier,currentTier:n})},children:(0,d.jsx)("div",{children:(0,d.jsx)(i.FormattedMessage,{id:"startupCouponInlineLink.text",defaultMessage:"Are you a startup?"})})})}},69098:(e,t,n)=>{n.d(t,{j:()=>c,o:()=>r});var r={};n.r(r),n.d(r,{showAsyncModal:()=>p,showAsyncModalComponent:()=>m,testOnly:()=>M});var a=n(67294),i=n(86628),s=n(49085);class o extends s.default{getInitialState(){return{asyncModals:[]}}}const l=new o;var d=n(85893);const c=a.memo((e=>{window.__c={n:"AsyncModalRenderer"};const{store:t=l}=e,n=(0,i.VK)((()=>t.state.asyncModals),[t]);return(0,d.jsx)(d.Fragment,{children:n.map((e=>{const{id:t,internalRenderModal:n,isOpen:r}=e,i=n(r);return(0,d.jsx)(a.Fragment,{children:i},t)}))})}));var u=n(4615);function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return new Promise(((n,r)=>{try{y({asyncModal:b({renderModal:e,promiseResolve:n,promiseReject:r,store:t}),store:t})}catch(a){r(a)}}))}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;const n=t=>a.createElement(e,t);return p(n,t)}function y(e){const{asyncModal:t,store:n=l}=e;n.update((e=>({asyncModals:[...e.asyncModals,t]})))}function g(e){const{id:t,promiseResolve:n,store:r=l}=e;return e=>{const a=v({id:t,store:r});null!=a&&a.isOpen&&(x({id:t,store:r,update:{isOpen:!1}}),n(e))}}function f(e){const{id:t,promiseResolve:n,store:r=l}=e;return()=>{const e=v({id:t,store:r});null!=e&&e.isOpen&&(x({id:t,store:r,update:{isOpen:!1}}),n())}}function h(e){const{id:t,store:n=l}=e;return()=>{n.update((e=>({asyncModals:e.asyncModals.filter((e=>e.id!==t))})))}}function b(e){const{renderModal:t,promiseResolve:n,promiseReject:r,store:a=l}=e,i=(0,u.ZP)(),s=h({id:i,store:a}),o=f({id:i,promiseResolve:n,store:a}),d=g({id:i,promiseResolve:n,store:a});return{id:i,internalRenderModal:e=>{try{return t({isOpen:e,onClosed:s,onDismiss:o,resolve:d})}catch(n){throw r(n),n}},isOpen:!0}}function v(e){const{id:t,store:n=l}=e;return n.state.asyncModals.find((e=>e.id===t))}function x(e){const{id:t,update:n,store:r=l}=e;r.update((e=>({asyncModals:e.asyncModals.map((e=>e.id!==t?e:{...e,...n}))})))}const M={addAsyncModal:y,createAsyncModal:b,createOnClosed:h,createOnDismiss:f,createResolve:g,getAsyncModal:v,updateAsyncModal:x}},50659:(e,t,n)=>{n.d(t,{G$:()=>a,MF:()=>i,Z3:()=>r});function r(e){let{isMobile:t}=e;return{...!t&&{borderRadius:3}}}function a(e){let{isMobile:t}=e;return t?{}:{...r({isMobile:t}),marginLeft:4,marginRight:4,width:"calc(100% - 8px)"}}function i(){return{paddingLeft:10,paddingRight:10}}},91493:(e,t,n)=>{n.d(t,{G:()=>o});n(67294);var r=n(5366),a=n(51133),i=n(27533),s=n(85893);function o(e){window.__c={n:"OrderSummaryAccountBalanceItem"};const t=(0,a.hr)(),{accountBalance:n}=e;return 0===n.amount?null:(0,s.jsxs)("div",{style:t.itemContainer,children:[(0,s.jsx)("div",{style:t.captionContainer,children:(0,s.jsx)("span",{style:t.name,children:(0,s.jsx)(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.balance",defaultMessage:"Balance"})})}),(0,s.jsx)("span",{style:t.credit,children:(0,s.jsx)(i.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},59148:(e,t,n)=>{n.d(t,{T:()=>o});n(67294);var r=n(5366),a=n(51133),i=n(27533),s=n(85893);function o(e){window.__c={n:"OrderSummaryDiscountItem"};const t=(0,a.hr)(),{discount:n,promo:o}=e;return(0,s.jsxs)("div",{style:t.itemContainer,children:[(0,s.jsx)("div",{style:t.captionContainer,children:(0,s.jsx)("span",{style:t.name,children:(0,s.jsx)(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo",defaultMessage:"Coupon"})})}),o.duration_in_months?(0,s.jsx)("span",{style:t.caption,children:(0,s.jsx)(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo.subtitle",defaultMessage:"Valid for {durationInMonths} months",values:{durationInMonths:o.duration_in_months}})}):void 0,(0,s.jsx)("span",{style:t.credit,children:(0,s.jsx)(i.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},42329:(e,t,n)=>{n.d(t,{r:()=>o});n(67294);var r=n(5366),a=n(51133),i=n(27533),s=n(85893);function o(e){window.__c={n:"OrderSummarySubtotalItem"};const t=(0,a.hr)(),{subtotal:n}=e;return(0,s.jsxs)("div",{style:t.itemContainer,children:[(0,s.jsx)("div",{style:t.captionContainer,children:(0,s.jsx)("span",{style:t.name,children:(0,s.jsx)(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"})})}),(0,s.jsx)("span",{style:t.price,children:(0,s.jsx)(i.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},92041:(e,t,n)=>{n.d(t,{u:()=>l});n(67294);var r=n(5366),a=n(68785),i=n(51133),s=n(27533),o=n(85893);function l(e){window.__c={n:"OrderSummaryTaxItem"};const t=(0,i.hr)(),{tax:n,calculatingTax:l}=e;return(0,o.jsxs)("div",{style:t.itemContainer,children:[(0,o.jsx)("div",{style:t.captionContainer,children:(0,o.jsx)("span",{style:t.name,children:(0,o.jsx)(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",defaultMessage:"Tax if applicable"})})}),(0,o.jsx)("span",{style:t.price,children:l?(0,o.jsx)(a.Z,{}):0===n.amount?"—":(0,o.jsx)(s.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},72263:(e,t,n)=>{n.d(t,{_:()=>i});n(67294);var r=n(45238),a=n(85893);const i=(0,r.I)("settingsUpgrade",{viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M9.969 17.938c4.36 0 7.969-3.618 7.969-7.97C17.938 5.61 14.32 2 9.96 2 5.609 2 2 5.61 2 9.969c0 4.351 3.617 7.969 7.969 7.969zm0-1.329a6.609 6.609 0 01-6.633-6.64 6.602 6.602 0 016.625-6.64 6.627 6.627 0 016.648 6.64 6.61 6.61 0 01-6.64 6.64zm0-2.734a.562.562 0 00.586-.586V9.383l-.063-1.656.797.945.922.937a.52.52 0 00.414.172c.32 0 .57-.242.57-.562a.566.566 0 00-.164-.406L10.43 6.219c-.149-.149-.29-.227-.461-.227-.164 0-.297.07-.453.227l-2.61 2.593a.555.555 0 00-.148.407c0 .32.242.562.562.562a.572.572 0 00.414-.172l.93-.937.781-.938-.062 1.649v3.906c0 .344.25.586.586.586z"})})}}]);