"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5741],{89941:(e,t,o)=>{o.d(t,{ez:()=>a,fF:()=>s,vE:()=>r});var n=o(19037),i=o(19124);const s=[e=>(0,i.GD)(e.publicEditMode),n.J5],r=[...s,n.ff(n.fI),n.ff(n.OX)],a=[...r,e=>n.P9("ai_block")&&e.blocks.every((e=>e.isSkillBlock()))]},96323:(e,t,o)=>{o.d(t,{F0:()=>D,Hh:()=>G,LK:()=>E,NZ:()=>$,Rr:()=>T,cK:()=>B,lA:()=>Y,sH:()=>K,sY:()=>F,xI:()=>O,xj:()=>H,yY:()=>L});o(57658),o(67294);var n=o(480),i=o(86628),s=o(24405),r=o(41432),a=o(8848),l=o(12970),c=o(91856),d=o(56666),u=o(75e3),p=o(25651),m=o(11751),f=o(54434),g=o(5366),y=o(97880),v=o(42858),h=o(39699),C=o(84254),x=o(72495),k=o(19037),w=o(78663),A=o(99417),S=o(19124),I=o(40959),M=o(16772),b=o(27724),_=o(89941),P=o(62967),j=o(85893);const F=(0,g.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"completions.completionActions.AIAssist"},more:{defaultMessage:"See more",id:"completions.completionActions.more"},alternativeUiString:{defaultMessage:"{text}",id:"completions.completionActions.alternativeUiString"},aiSummaryBlockDisplayName:{defaultMessage:"Summary",id:"completions.completionActions.aiSummaryBlockDisplayName"},aiActionItemsBlockDisplayName:{defaultMessage:"Action items",id:"completions.completionActions.aiActionItemsBlockDisplayName"},aiFreePromptBlockDisplayName:{defaultMessage:"Custom AI block",id:"completions.completionActions.aiFreePromptBlockDisplayName"},aiSectionBlockDisplayName:{defaultMessage:"Custom AI section",id:"completions.completionActions.aiSectionBlockDisplayName"}});function L(e){return function(t){return(0,j.jsx)(x.Z,{...t,title:(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,m.t)({width:16,height:16,marginRight:4}),(0,j.jsx)("div",{children:t.title})]}),right:e})}}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const o=[];if(o.push(...e.slice(0,t)),e.length>t){const n=(0,P.$J)({key:"more actions",render:e=>(0,j.jsx)(x.Z,{...e}),actions:e.slice(t)});o.push((0,P.MV)({key:"more",displayName:F.more,analyticsName:"Completions - more",validators:_.vE,svg:()=>(0,j.jsx)(J,{}),subActions:()=>[n],collapseSubActionsIntoParent:!0,width:350}))}return o}function N(){return(0,j.jsx)(Y,{svg:p.R,svgFill:a.FN.light.purple[500]})}function B(e){const{key:t,name:o,analyticsName:n,textToInsert:i,onUpdatePromptState:s,right:r,renderTooltip:a,showEllipsis:l,userProvidedSearchName:c,executeImmediately:d,gtmFavoriteId:u}=e,p=o.length>1e3?`${o.slice(0,1e3)}…`:o;return(0,P.cN)({key:t,analyticsName:`Completions - insert text into prompt - ${n}`,...(m=l?`${p}…`:p,{displayName:F.alternativeUiString,displayNameInterpolatedValues:{text:m}}),validators:[],closeParentMenu:!1,svg:N,action(){s({insertText:i??o,analyticsName:n,gtmFavoriteId:u,executeImmediately:d})},right:r??W("updatePrompt"),renderTooltip:a,userProvidedSearchName:c});var m}function E(e){const{from:t,type:o,onUpdatePromptState:n}=e;function i(e){return B({key:`completions.${e.key}`,name:(0,A.t8)(e),analyticsName:e.key,textToInsert:(0,w.$W)(e),onUpdatePromptState:n,showEllipsis:!0})}const s="cursor"===o?{selectionType:o,isPageEmpty:!k.IC()}:{selectionType:o},r=(0,A.up)(s),a=(0,A.pv)(r,s),l=[];for(const[c,d]of a){const e=[];for(const s of d)"helpMeDraft"!==s.key&&"helpMeEdit"!==s.key&&"helpMeWrite"!==s.key&&("translate"===s.key?e.push(U(s,_.vE,o,t)):"changeTone"===s.key?e.push(V(s,_.vE,o,t)):s.steps?e.push(i(s)):e.push($({prompt:s,validators:_.vE,type:o,from:t})));const n=(0,P.$J)({key:`completions.${c}`,title:(0,A.Mh)(c,"cursor"===o?"page":"selection"),render:e=>(0,j.jsx)(x.Z,{...e}),actions:T(e.filter(y.$K),7)});l.push(n)}return"cursor"===o&&l.push((0,P.$J)({key:"completions.aiBlocks",title:A.Dr.aiBlocks,render:e=>(0,j.jsx)(x.Z,{...e}),actions:I.O5.map((e=>function(e){const t=I.Hc[e.aiBlockType],{displayName:o,svg:n}=Z[e.aiBlockType],i=e=>!t.shouldShow||t.shouldShow(e);return(0,P.cN)({key:`completions.aiBlocks.${t.key}`,analyticsName:`Completions - ${t.key}`,closeParentMenu:!0,svg:n,displayName:o,validators:[..._.vE,i],action:e=>{let{environment:o}=e;h.createAndCommit({userAction:"completionActions.createAiBlockAction",environment:o,perform:e=>{v.at({environment:o,selection:b.default.state.stores,createBlockItem:t,analyticsFrom:"ai_prompt",transaction:e})}})}})}({aiBlockType:e})))})),l}const Z={[r.MF.aiSummaryBlock]:{displayName:F.aiSummaryBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:c.Y})},[r.MF.aiActionItemsBlock]:{displayName:F.aiActionItemsBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:l.O})},[r.MF.aiFreePromptBlock]:{displayName:F.aiFreePromptBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:m.t})},[r.MF.aiSectionBlock]:{displayName:F.aiSectionBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:m.t})}};function O(e){return(0,P.$J)({key:"completions",title:F.notionAI,render:L(),actions:R(e)})}function R(e){const{store:t,from:o}=e,n=[];for(const i of(0,S.G9)()){if("helpMeWrite"===i.key)continue;const e=$({prompt:i,validators:_.vE,type:"aiBlock",from:o,store:t});e&&n.push(e)}return n}function D(e){const{environment:t,inputValue:o,store:n}=e,i=(0,S.qB)({customPrompt:o,isPageEmpty:!1});C.triggerCompletionForAiBlock({environment:t,store:n,prompt:i,additionalContext:{prompt:o}})}function U(e,t,o,n){const{key:i,name:s,svg:r,svgFill:a,steps:l}=e;if("translate"!==i||!l||1!==l.length||"language"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:s,name:r}=i;return(0,P.cN)({key:`completions.translate.${s}`,analyticsName:`Completions - translate - ${s}`,displayName:r,validators:t,closeParentMenu:!0,right:W("submitPrompt"),action:t=>{let{environment:i}=t;q({environment:i,prompt:e,from:n,type:o,additionalContext:{language:s}})}})})),d=(0,P.$J)({key:"translate language actions",render:e=>(0,j.jsx)(x.Z,{...e}),actions:c}),u=r?()=>(0,j.jsx)(Y,{svg:r,svgFill:a}):void 0;return(0,P.MV)({key:"translate",displayName:s,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function V(e,t,o,n){const{key:i,name:s,svg:r,svgFill:a,steps:l}=e;if("changeTone"!==i||!l||1!==l.length||"tone"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:s,name:r}=i;return(0,P.cN)({key:`completions.changeTone.${s}`,analyticsName:`Completions - changeTone - ${s}`,displayName:r,validators:t,closeParentMenu:!0,right:W("submitPrompt"),action:t=>{let{environment:i}=t;q({environment:i,prompt:e,from:n,type:o,additionalContext:{tone:s}})}})})),d=(0,P.$J)({key:"changeTone tone actions",render:e=>(0,j.jsx)(x.Z,{...e}),actions:c}),u=r?()=>(0,j.jsx)(Y,{svg:r,svgFill:a}):void 0;return(0,P.MV)({key:"changeTone",displayName:s,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function H(e){window.__c={n:"ActionHintIcon"};const{focused:t,type:o}=e,r=(0,n.O7)(),a=(0,i.VK)((()=>r.device.isPhone),[r]),l=(0,s.yK)((e=>({iconStyle:{width:14,height:14,fill:e.mediumIconColor,opacity:!a&&t?1:0},containerStyle:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,a]);switch(o){case"submitPrompt":return(0,j.jsx)("div",{style:l.containerStyle,children:(0,u.U)(l.iconStyle)});case"updatePrompt":return(0,j.jsx)("div",{style:l.containerStyle,children:(0,f.F)(l.iconStyle)});default:(0,y.t1)(o)}}function W(e){return t=>(0,j.jsx)(H,{type:e,focused:t.focused})}function K(e){const{customPrompt:t,execute:o}=e;return(0,P.cN)({analyticsName:"Completions - execute current prompt input",key:"explicitFreeFormAction",displayName:A.Dr.genericHelpMeWrite,displayNameInterpolatedValues:{filter:t},svg:N,right:W("submitPrompt"),validators:[],closeParentMenu:!1,renderTooltip:P.zz,action(){o()}})}const z=()=>(0,A.L3)();function $(e){const{prompt:t,validators:o,type:n,from:i,store:s,sortScoreMultiplier:r}=e,{key:a,name:l}=t;if("translate"===a&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return U(t,o,n,i);if("changeTone"===a&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return V(t,o,n,i);const c=function(e){const{svg:t,svgFill:o}=e;return t?()=>(0,j.jsx)(Y,{svg:t,svgFill:o}):void 0}(t),d=[...o];return t.requiresContent?d.push(k.IC):t.requiresNoContent&&d.push(k.ff(k.IC)),t.isNewModel&&d.push(z),(0,P.cN)({key:`completions.${a}`,analyticsName:`Completions - ${a}`,displayName:l,fuzzySearchKeywords:t.fuzzySearchKeywords,validators:d,closeParentMenu:!0,svg:c,right:W("submitPrompt"),sortScoreMultiplier:r,action:e=>{let{environment:o}=e;q({environment:o,prompt:t,type:n,from:i,store:s})}})}function q(e){const{environment:t,prompt:o,type:n,from:i,store:s,additionalContext:r}=e;if("textSelection"===n)C.openCompletionPopupForSavedContext({environment:t,prompt:o,from:i,additionalContext:r});else if("blockSelection"===n)C.openCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:r});else if("cursor"===n){if(o.preferToNeverInsertTextAtCursor)return void C.selectPageAndOpenCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:r});C.openCompletionPopupForCursorContext({environment:t,prompt:o,from:i,additionalContext:r})}else"aiBlock"===n?s&&C.triggerCompletionForAiBlock({environment:t,store:s,prompt:o,additionalContext:r}):(0,y.t1)(n)}function G(e){const{inputValue:t,from:o,mode:n,environment:i}=e;switch(n){case"edit":return void function(e){const{customPrompt:t,from:o,environment:n}=e,i=(0,A.sB)(t);"closedWithContext"===M.default.state.type&&M.default.state.context&&C.openCompletionPopupForPrefilledContext({environment:n,context:M.default.state.context,prompt:i,additionalContext:{prompt:t},from:o,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o});case"write":const e=(0,A.wq)(t);if(e){const{prompt:t,additionalContext:n}=e,s=(0,w.FD)();if(!s)return;return void C.openCompletionPopupForPrefilledContext({environment:i,context:s,prompt:t,additionalContext:n,from:o,skipInitialForm:!0})}return void function(e){const{environment:t,customPrompt:o,from:n}=e,i=(0,S.qB)({customPrompt:o,isPageEmpty:!k.IC()}),s=(0,w.FD)();s&&C.openCompletionPopupForPrefilledContext({environment:t,context:s,prompt:i,additionalContext:{prompt:o},from:n,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o})}(0,y.t1)(n)}function J(){window.__c={n:"MoreIcon"};const e=(0,s.Fg)();return(0,d.o)({width:12,marginLeft:2,marginRight:2,fill:e.mediumIconColor})}function Y(e){window.__c={n:"BoxedIcon"};const t=(0,s.yK)((t=>({box:{height:e.fixedWidth?22:void 0,width:e.fixedWidth?22:void 0,display:"flex",alignItems:"center",justifyContent:"center",...e.boxStyles},icon:{height:16,width:16,fill:e.svgFill??(0,a.gh)({theme:"light"}).regularIconColor}})),[e]);return(0,j.jsx)("div",{style:t.box,children:e.svg(t.icon)})}function Q(e){window.__c={n:"AiBlockIcon"};const t=(0,s.yK)((e=>({box:{background:e.fill.purple,width:24,height:24,borderRadius:3},icon:{fill:e.icon.purple}})),[]);return(0,j.jsx)(Y,{svg:e.svg,svgFill:t.icon.fill,boxStyles:t.box})}},79474:(e,t,o)=>{o.d(t,{r:()=>i});var n=o(43604);async function i(e){return new Promise((t=>{n.Z.setState({open:!0,onClose:()=>{n.Z.setState({open:!1}),t(!1)},onConfirm:()=>{n.Z.setState({open:!1}),t(!0)},...e})}))}},16091:(e,t,o)=>{o.d(t,{RD:()=>M,gc:()=>_,gl:()=>b,u7:()=>I});var n=o(67294),i=o(36769),s=o(480),r=o(86628),a=o(41432),l=o(5366),c=o(39699),d=o(37181),u=o(81415),p=(o(95477),o(19124)),m=o(68056),f=o(89086),g=o(28685),y=o(80444),v=o(77080),h=o(83212),C=o(35661),x=o(24666),k=o(41752),w=o(89626),A=o(85893);const S=(0,l.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Get instant answers to your questions"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"Ask a question about anything in your workspace. Notion AI will search across your pages and generate an answer."}});function I(){window.__c={n:"SpaceForAiOnboardingTooltip"};const e=(0,s.O7)(),t=function(){const e=(0,s.O7)(),t=(0,r.VK)((()=>{const t=y.default.state.mainEditorCurrentBlockStore;return t&&h.Z.getMode(e,t)}),[e]);return(0,r.VK)((()=>{if(e.device.isMobile)return;if(!v.default.checkGate("space_for_ai_tooltip_enabled"))return;const{currentUserSettingsStore:o,inAppCalloutStore:n}=y.default.state;if(!n.canShow("ai_onboarding_tooltip"))return;const i=null==o?void 0:o.getSettings();if(!i)return;if(i.signup_time&&i.signup_time>16770636e5)return;if("space_for_ai"!==(0,w.sy)())return;if(!(0,p.GD)(t))return;const s=x.default.state;if("editing"===s.mode){const e=(0,m.QY)(s.multiSelection);if(e&&(0,f.wd)(e.selection)){const t=e.store,o=g.E.findEditableWithStore(t);if(o){const e="block"===t.pointer.table?C.G.createChildStore(t,t.pointer):void 0,n=e&&e.getType(),i=Boolean(n&&(0,a.hD)(n)),s=t.getValue();if(i&&!s)return o}}}}),[e,t])}();return t?(0,A.jsx)(u.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,A.jsx)(l.FormattedMessage,{...S.spaceForAiHeader}),content:(0,A.jsx)(l.FormattedMessage,{...S.spaceForAiContent}),onCloseClick:()=>(0,w.h1)(e)}):null}function M(e){window.__c={n:"AskAIAnythingOnboardingTooltip"};const{originRef:t,openState:o}=e,n=(0,s.O7)(),i=(0,r.VK)((()=>(0,w.sy)()),[]);if(n.device.isMobile)return null;return"ask_ai_anything"===i&&"initialPrompt"===o.stage?(0,A.jsx)(u.U,{origin:t,placementToOrigin:"top",header:(0,A.jsx)(l.FormattedMessage,{...S.askAiAnythingHeader}),content:(0,A.jsx)(l.FormattedMessage,{...S.askAiAnythingContent}),onCloseClick:()=>(0,w.h1)(n)}):null}function b(e){window.__c={n:"RefineAIResponseOnboardingTooltip"};const{originRef:t,openState:o,isInputEmpty:n}=e,i=(0,s.O7)(),a=(0,r.VK)((()=>(0,w.sy)()),[]);if(i.device.isMobile)return null;const c="refine_ai_response"===a&&"results"===o.stage&&!o.loading&&"cursor"===o.context.type&&n;return(0,A.jsx)(u.U,{origin:c?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,A.jsx)(l.FormattedMessage,{...S.refineAiResponseHeader}),content:(0,A.jsx)(l.FormattedMessage,{...S.refineAiResponseContent}),onCloseClick:()=>(0,w.h1)(i)})}function _(e){window.__c={n:"ShowAssistantLocationTooltip"};const{origin:t}=e,o=(0,s.O7)(),i=(0,n.useCallback)((()=>{const{currentUserSettingsStore:e}=y.default.state;e&&(0,k.C)(o,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e})}),[o]);return(0,A.jsx)(u.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,A.jsx)(l.FormattedMessage,{...S.showAssistantLocationHeader}),content:(0,A.jsx)(l.FormattedMessage,{...S.showAssistantLocationContent}),onCloseClick:i})}(0,i.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=y.default.state;t&&c.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{d.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},41752:(e,t,o)=>{o.d(t,{C:()=>s});var n=o(39699),i=o(37181);function s(e,t){const{phase:o,transactionUserAction:s,userSettingsStore:r}=t;n.createAndCommit({environment:e,userAction:s,perform:e=>{i.d2({userSettingsStore:r,transaction:e,data:{ai_qna_intro_onboarding_phase:o}})}})}},44866:(e,t,o)=>{o.r(t),o.d(t,{autofillPropertyForBlocks:()=>Y,autofillPropertyForCollection:()=>X,fillAllPagesMessages:()=>H,getDefaultAiInference:()=>oe,getPropertyCompletionForBlock:()=>te,saveOrRemovePropertyAiInference:()=>ee,submitFeedbackForAiAutofill:()=>Q,triggerAiAutofillUpsell:()=>G});o(57658);var n=o(67294),i=o(26263),s=o(99036),r=o(74229),a=o(72126),l=o(5366),c=o(482),d=o(4615),u=o(3791),p=o(97880),m=o(50906),f=o(8406),g=o(54642),y=o(14871),v=o(45264),h=o(79474),C=o(47307),x=o(96802),k=o(9953),w=o(64964),A=o(39699),S=o(1865),I=o(86628),M=o(98519),b=o(82007),_=o(79576),P=o(73420),j=o(68785),F=o(6854),L=o(85893);const T=function(e){let{environment:t,inferenceIds:o,aiInference:i}=e;window.__c={n:"AiAutofillProgressLabel"};const s=(0,I.VK)((()=>{const{state:e}=_.W;return"uninitialized"===e.type?null:{numBlocksToAutofill:e.numBlocksToAutofill,numBlocksAutofilled:e.numBlocksAutofilled,propertySchema:e.propertySchema,collectionId:e.collectionId,sessionId:e.sessionId,haveAllBlocksCompletedAutofill:e.haveAllBlocksCompletedAutofill}}),[]),r=(0,n.useCallback)((()=>{s&&(o.forEach((e=>{m.qG2(t,{ai_inference_type:i.type,type:"undo_from_snackbar",inference_id:e,collection_id:s.collectionId,session_id:s.sessionId})})),b.Yw(t,!0),w.rN(),_.W.setState({type:"filling",...s,didInterruptStreaming:!0}))}),[s,t,i,o]);if(!s)return null;const{numBlocksToAutofill:a,numBlocksAutofilled:c,propertySchema:{name:d}}=s;return c===a?(0,L.jsxs)(P.X2,{gap:4,alignItems:"center",children:[(0,M.k)({width:16}),(0,L.jsx)(l.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillInProgress",values:{propertyName:d,numPages:a}}),(0,L.jsx)(F.Pn,{onClick:r,children:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"Undo",id:"snackbar.aiAutofill.undo"})}),(0,L.jsx)(F.Pn,{onClick:()=>{w.rN()},children:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"Close",id:"snackbar.aiAutofill.close"})})]}):(0,L.jsxs)(P.X2,{gap:4,alignItems:"center",children:[(0,L.jsx)(j.Z,{}),0===c?(0,L.jsx)(l.FormattedMessage,{defaultMessage:'AI updating "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillStarting",values:{propertyName:d,numPages:a}}):(0,L.jsx)(l.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numFilledPages} of {numTotalPages} pages',id:"snackbar.aiAutofill.completedAutofill",values:{propertyName:d,numFilledPages:c,numTotalPages:a}}),(0,L.jsx)(F.Pn,{onClick:r,children:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"Stop & undo",id:"snackbar.aiAutofill.undoAndStop"})})]})};var N=o(99417),B=o(33929),E=o(77907),Z=o(80444),O=o(35661),R=o(1310),D=o(78291),U=o(35057),V=o(84254);const H=(0,l.defineMessages)({fillAllPagesTooltip:{defaultMessage:"{hasNames, select, true {Autofill {propertyName} for all pages in {collectionName}} other {Autofill this property for all pages in the database}}",id:"aiAutofill.fillAllPages.buttonTooltip"},fillAllPagesAddOnMessage:{defaultMessage:"Only with Notion AI add-on",id:"aiAutofill.fillAllPages.onlyWithAiAddOnMessageInTooltip"}});function W(e){let{environment:t,propertyId:o,storesWithCompletions:n,blockIdToInferenceId:i,useTemporaryStore:s,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:a}=e;A.createAndCommit({userAction:"BlockPropertyValue.handleActionButtonClick.aiAutofill",environment:t,canUndo:!Boolean(s),undoCheckpoint:!0,perform:e=>{for(const{store:t,temporaryStore:l,completion:c}of n){const n=s?l:t;k.sO({store:n.getPropertyStore(o),value:y.of({text:c.trim(),stripText:!1,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:a}),transaction:e});const d=n.getFormat().ai_property_inference_map??{},u=i[t.id]??"";x.FH({stores:[n],update:{ai_property_inference_map:{...d,[o]:{inference_id:u,created_time:Date.now()}}},transaction:e})}}})}const K=(0,l.defineMessages)({FAILED_TO_AUTOFILL:{defaultMessage:"Something went wrong. Please try again later",id:"propertyCompletionActions.error.unableToAutofill"},INVALID_PROPERTY_FOR_AUTOFILL:{defaultMessage:"Invalid property configuration for AI autofill",id:"propertyCompletionActions.error.invalidPropertyForAutofill"},NO_BLOCKS_TO_AUTOFILL:{defaultMessage:"Nothing to update with AI",id:"propertyCompletionActions.error.noBlocksToAutofill"}}),z=(0,l.defineMessages)({featureUnavailable:{id:"completionActions.featureNotEnabledError",defaultMessage:"This feature is not currently enabled"}});function $(e){let{autofillPropertyResult:t}=e;const o=B.default.formatMessage(K[t]);w.rN(),C.deprecatedShowErrorMessage(o)}const q={ai_limit_property_autofill:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"Auto-update requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.autoUpdateOnPageEditUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"Updating all pages requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.fillAllPagesUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,L.jsx)(l.FormattedMessage,{defaultMessage:"Filling more pages at once requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.bulkFillUpsellDialogMessage"})};function G(e){var t;let{environment:o,from:n}=e;null!==(t=Z.default.state.currentSpaceStore)&&void 0!==t&&t.canAdmin()||C.deprecatedShowErrorMessage(q[n]),S.y(o,{from:n,for:(0,U.zt)(),addOnFeature:"ai"})}function J(e){let{errorCode:t,environment:o}=e;return 405===t?w.oV({label:B.default.formatMessage(z.featureUnavailable)}):(402===t&&(w.rN(),G({environment:o,from:"ai_limit_property_autofill"})),V.showCompletionErrorWithCode(t))}async function Y(e){var t;let{environment:o,stores:n,property:a,propertySchema:l,userEventForAnalytics:c,sessionIdForAnalytics:u,collectionContextStore:y,from:v,isBulkAction:h,aiInferenceOverride:C}=e;const x=u||(0,d.ZP)(),k=a,A=n.map((e=>({spaceId:e.getSpaceId(),...e.pointer,propertyId:k,inferenceId:(0,d.ZP)()}))),S=n[0].getParentCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),I=new i.Z({name:"propertyCompletionActions.autofillPropertyForBlocks"});if(_.W.setIsWriting({stores:n,propertySchema:l,sessionIdForAnalytics:u}),"uninitialized"!==_.W.state.type&&(0,s.qQ)(l)){w.oV({label:(0,L.jsx)(T,{environment:o,inferenceIds:A.map((e=>e.inferenceId)),aiInference:(0,s.q3)(l)}),durationMs:R.JY});try{var M;if(o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(I),!(0,p.Of)(A))return $({autofillPropertyResult:"NO_BLOCKS_TO_AUTOFILL"});const e=C||(0,s.q3)(l);if(!e)return $({autofillPropertyResult:"INVALID_PROPERTY_FOR_AUTOFILL"});A.forEach((t=>{m.qG2(o,{type:c,inference_id:t.inferenceId,ai_inference_type:e.type,collection_id:S,session_id:x})})),null!==(M=Z.default.state.currentSpaceStore)&&void 0!==M&&M.id&&g.publishAiSession(o,{inference_type:"autofill",id:x,spaceId:Z.default.state.currentSpaceStore.id,metadata:{blockPropertyPointers:A,aiInference:e,collection_id:S}});const t=await g.getCompletionForProperty(o,{blockPropertyPointers:A,aiInference:e,aiSessionId:x,model:(0,N.PD)()});if("success"!==t.type)return $({autofillPropertyResult:"FAILED_TO_AUTOFILL"});y&&f.rv({block_id:n[0].pointer.id,property:k,property_type:l.type,from:v,environment:o,collectionContextStore:y,isFromBulkActionsToolbar:h});const i=Object.fromEntries(n.map((e=>[e.pointer.id,{store:e,temporaryStore:e.clone(I),completion:""}]))),a=Object.fromEntries(A.map((e=>[e.id,e.inferenceId]))),d=new Set,[u,w]=await Promise.all([E.deps.markdownLinkifyIt.loader(),E.deps.tinyMceMicrosoftWordPasteFilter.loader()]);if(r.H1.is(t.data)){for await(const e of t.data){if("error"===e.type)return _.W.setState({..._.W.state,didInterruptStreaming:!0}),J({errorCode:e.errorCode,environment:o});if(_.W.state.didInterruptStreaming)return;const t=i[e.blockPropertyPointer.id],n=t.completion+e.completion;i[e.blockPropertyPointer.id]={...t,completion:n},d.add(e.blockPropertyPointer.id),W({environment:o,propertyId:k,storesWithCompletions:Object.values(i),blockIdToInferenceId:a,useTemporaryStore:!0,markdownLinkifyIt:u,tinyMceMicrosoftWordPasteFilter:w}),_.W.setState({..._.W.state,numBlocksAutofilled:d.size})}_.W.setState({..._.W.state,haveAllBlocksCompletedAutofill:!0})}o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(I),W({environment:o,propertyId:k,storesWithCompletions:Object.values(i),blockIdToInferenceId:a,useTemporaryStore:!1,markdownLinkifyIt:u,tinyMceMicrosoftWordPasteFilter:w})}finally{o.defaultRecordCache.inMemoryRecordCache.hasCacheOverride(I)&&o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(I)}}}function Q(e){const{environment:t,inferenceId:o,feedbackType:n,userContent:i,shareWithNotion:s}=e;m.NF$(t,{type:"property_autofill",inference_id:o,feedback_type:n,timestamp:(new Date).toUTCString(),user_comment:i,share_with_notion:s})}async function X(e){var t,o;let{environment:n,collectionStore:i,propertySchema:r,property:l,sessionIdForAnalytics:p,includedCollectionSchemaUpdateOp:f}=e;if(!(0,s.qQ)(r))return;const g=(0,s.q3)(r);if(!i||!r||!g)return;const y=(null===(t=D.default.state.data)||void 0===t?void 0:t.addOns)??[];if(!(0,u.de)(y))return void G({environment:n,from:"ai_autofill_fill_all_pages"});if(!(await h.r({sourceAction:"fill_all_pages",propertyName:r.name,collectionName:(null===(o=i.getName())||void 0===o?void 0:o.toString())||""})))return;m.qG2(n,{type:"generate_from_fill_all_pages",inference_id:(0,d.ZP)(),ai_inference_type:g.type,collection_id:i.id,session_id:p??(0,d.ZP)()});const C=a.oA([f]);C.push(c.op.update({pointer:i.pointer,path:["format","update_ai_inferences_status"],args:{[l]:{type:"requested",created_time:Date.now()}}})),v.HW({environment:n,collectionStore:i,performTransaction:e=>{for(const t of C)A.applyOperation({store:(0,O.Kv)(i,t.pointer),operation:t,transaction:e})}})}function ee(e){const{environment:t,propertySchema:o,collectionStore:n,property:i,draftAiInference:r}=e;let a="";switch(o.type){case"text":a="ai_inference";break;case"select":case"multi_select":a="select_ai_inference";break;default:return}const l=[];if(l.push({pointer:n.pointer,command:"set",path:["schema",i,a],args:r}),r)m._eA(t,{type:"set_ai_inference",ai_inference_type:r.type,collection_id:n.id});else{const e=(0,s.q3)(o);m._eA(t,{type:"remove_ai_inference",ai_inference_type:null==e?void 0:e.type,collection_id:n.id})}v.HW({environment:t,collectionStore:n,performTransaction:e=>{for(const t of l)A.applyOperation({store:(0,O.Kv)(n,t.pointer),operation:t,transaction:e})}})}async function te(e){var t;let{environment:o,store:n,property:i,propertySchema:s,userEventForAnalytics:a,sessionIdForAnalytics:l}=e;const c=l||(0,d.ZP)(),u=i,p={spaceId:n.getSpaceId(),...n.pointer,propertyId:u,inferenceId:(0,d.ZP)()},f=n.getParentCollectionId()??(null===(t=n.getCollectionViewCollectionStore())||void 0===t?void 0:t.id),y=oe(s,!1);if(!y)return"";m.qG2(o,{type:a,inference_id:p.inferenceId,ai_inference_type:y.type,collection_id:f,session_id:c});const v=(0,d.ZP)();g.publishAiSession(o,{inference_type:"autofill",id:v,metadata:{blockPropertyPointers:[p],aiInference:y,collection_id:f}});const h=await g.getCompletionForProperty(o,{blockPropertyPointers:[p],aiInference:y,aiSessionId:v,model:(0,N.PD)()});if("success"!==h.type)return"";let C="";if(r.H1.is(h.data))for await(const r of h.data)"error"!==r.type&&(C+=r.completion);return C}function oe(e,t){if(!(0,s.qQ)(e))return;const o=(0,s.q3)(e);return!o&&(0,s.cu)(e)?{type:e.type,auto_update_on_edit:t,add_options:!1}:o}},3316:(e,t,o)=>{o.r(t),o.d(t,{AiEligibilityUpdater:()=>ro,CompletionPopup:()=>no});var n=o(67294),i=o(18466),s=o(26263),r=o(1302),a=o(480),l=o(86628),c=o(24405),d=o(42875),u=o(66673),p=o(82883),m=o(62965),f=o(97880),g=o(5366),y=o(96323),v=o(50906),h=o(14871),C=o(39699),x=o(3386),k=o(43250),w=o(99417),A=o(43455),S=o(95083),I=o(77907),M=o(16772),b=o(29798),_=o(84254),P=o(89626),j=o(16091),F=o(92022),L=o(11751),T=o(72897),N=o(32163),B=o(50506),E=o(63296),Z=o(72495),O=o(34859),R=o(85893);function D(e){window.__c={n:"ExitConfirmationDialog"};const{open:t,onCancelExit:o,onConfirmExit:i}=e,s=(0,n.useCallback)((()=>(0,R.jsx)(U,{onConfirmExit:i,onCancelExit:o})),[i,o]);return(0,R.jsx)(B.Z,{open:t,render:s,disableAnimation:!0,onDismiss:o})}function U(e){window.__c={n:"ExitConfirmationDialogContent"};const t=(0,c.yK)((e=>({wrapper:{padding:24,display:"flex",flexDirection:"column",minWidth:280},question:{fontWeight:500,maxWidth:240,textAlign:"center",marginTop:8,marginBottom:8,lineHeight:"1.2em"},icon:{width:32,height:32,alignSelf:"center",paddingTop:8,fill:e.accentColors.purple[400]}})),[]),o={width:"100%",marginTop:8},n=[{key:"confirm",render:e=>(0,R.jsx)(E.Z,{style:o,...e,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.confirmExit",defaultMessage:"Discard"})}),action:e.onConfirmExit},{key:"cancel",render:e=>(0,R.jsx)(E.Z,{style:o,...e,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.cancelExit",defaultMessage:"Cancel"})}),action:e.onCancelExit}];return(0,R.jsx)(T.Z,{capture:!0,preventType:O.Z.All,children:(0,R.jsxs)("div",{style:t.wrapper,children:[(0,L.t)(t.icon),(0,R.jsx)("p",{style:t.question,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.ExitConfirmationDialog.question",defaultMessage:"Do you want to discard the AI response?"})}),(0,R.jsx)(N.Z,{type:N.i.Vertical,initialFocus:0,sections:[{key:"dialog",render:e=>(0,R.jsx)(Z.Z,{topBorder:!1,disableMobileBorders:!0,...e}),items:n}]})]})})}o(57658);var V=o(50780),H=o(72126),W=o(62967),K=o(47307),z=o(64964),$=o(73063),q=o(45010),G=o(80444),J=o(77080),Y=o(30793),Q=o(71184);const X="favorite-actions",ee=(0,g.defineMessages)({favoriteActions:{defaultMessage:"Favorites",id:"ai.favoriteActions.title"},editOrShareFavorite:{defaultMessage:"Edit or share favorite",id:"ai.favoriteActions.editOrShare"}});function te(){const[e,t]=(0,n.useState)(void 0),o=(0,l.VK)((()=>J.default.checkGate("ai_favorites")),[]);return function(e){const t=(0,u.D9)(e);(0,n.useEffect)((()=>{e!==t&&q.Z.MenuScroller&&q.Z.MenuScroller.scrollToTop()}),[e,t])}(Boolean(e)),(0,n.useMemo)((()=>o?e?{type:"active",current:e,set:t,clear:()=>t(void 0)}:{type:"inactive",set:t}:{type:"disabled"}),[e,o])}const oe={maxWidth:400,whiteSpace:"pre-wrap"};function ne(e){const{value:t}=e;return(0,R.jsx)("div",{style:oe,children:(0,R.jsx)("div",{children:t.action.prompt})})}function ie(e,t,o,n,i){const s=i.filterOut.toLocaleLowerCase().trim(),r=(0,Q.JS)(n),a=[];for(const l of r){if(l.action.prompt.toLocaleLowerCase().trim()===s)continue;const n=n=>(0,R.jsxs)("div",{style:{display:"flex"},children:[(0,R.jsx)($.Z,{style:{visibility:n.focused?"visible":"hidden",width:18,height:18},onClick:()=>{i.favoriteEditingState.set(l),v.VoR(e,{type:"edit",session_id:t.sessionId,gtm_favorite_id:l.gtmFavoriteId})},icon:V.E,ariaLabel:o.formatMessage(ee.editOrShareFavorite)}),!l.executeImmediately&&(0,R.jsx)(y.xj,{type:"updatePrompt",focused:n.focused})]});let r=!1;switch(l.action.type){case"helpMeEdit":"initialPrompt"!==t.stage||"blockSelection"!==t.context.type&&"textSelection"!==t.context.type||(r=!0);break;case"helpMeWrite":"initialPromptForAIBlock"!==t.stage&&"cursor"!==t.context.type||(r=!0);break;default:(0,f.t1)(l.action)}if(r){const e=(0,y.cK)({key:l.id,name:l.name,textToInsert:l.action.prompt,analyticsName:"favoriteAction",gtmFavoriteId:l.gtmFavoriteId,onUpdatePromptState:i.onUpdatePromptState,right:n,renderTooltip:()=>(0,R.jsx)(ne,{value:l}),userProvidedSearchName:`${l.name} ${l.action.prompt}`.slice(0,100),executeImmediately:l.executeImmediately});a.push(e)}}return[(0,W.$J)({key:X,title:ee.favoriteActions,render:e=>(0,R.jsx)(Z.Z,{...e}),actions:a})]}function se(e){const{state:t,environment:o,sessionId:n}=e,{currentUserSettingsStore:i}=G.default.state;i&&(t.current.name?(C.createAndCommit({userAction:"favoriteActions.saveFavoriteEditsAndClearState",environment:o,perform(e){(0,Q.gC)(t.current,i,e)}}),t.clear(),v.VoR(o,{type:"save",session_id:n,gtm_favorite_id:t.current.gtmFavoriteId})):z.oV({label:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Please enter a name for the action.",id:"ai.favoriteActions.nameRequiredMessage"})}))}var re=o(39186),ae=o(38715),le=o(37612),ce=o(48019),de=o(68894),ue=o(78140),pe=o(86825),me=o(64369),fe=o(33929),ge=o(87279);const ye=(0,g.defineMessages)({save:{id:"ai.favorites.save",defaultMessage:"Save changes"},delete:{id:"ai.favorites.delete",defaultMessage:"Delete"},runImmediately:{id:"ai.favorites.runImmediately",defaultMessage:"Run immediately"},actionNameLabel:{id:"ai.favorites.actionNameLabel",defaultMessage:"Action name"},cancelAndGoBack:{id:"ai.favorites.cancelAndGoBack",defaultMessage:"Cancel and go back"}});function ve(e){window.__c={n:"FavoriteEditorMenuPopupContent"};const{state:t,context:o,sessionId:i}=e,s=(0,g.useIntl)(),r=(0,a.O7)(),l=(0,n.useMemo)((()=>new b.Z),[]),c=(0,W.cN)({key:"input",analyticsName:"TODO",displayName:ye.save,validators:[],closeParentMenu:!1,render:()=>(0,R.jsx)(Z.Z,{isInput:!0,style:{marginTop:0},children:(0,R.jsx)(de.ZP,{value:t.current.name,onChange:e=>{t.set({...t.current,name:e.target.value}),l.setState({focus:{section:0,indexLocal:1,indexGlobal:1}})},placeholder:fe.default.formatMessage(ye.actionNameLabel),focusInitial:!0})}),action(e,t){}}),d=[(0,W.$J)({key:"favorite options section",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[c,(0,W.cN)({key:"runImmediately",analyticsName:"TODO",displayName:ye.runImmediately,validators:[],render:(e,o,n)=>{let{blocks:i,environment:s}=o;const r=Boolean(t.current.executeImmediately);return(0,R.jsx)(pe.Z,{...e,title:fe.default.formatMessage(ye.runImmediately),on:r})},closeParentMenu:!1,action(e,o){t.set({...t.current,executeImmediately:!t.current.executeImmediately})}})]}),(0,W.$J)({actions:[(0,W.cN)({key:"save",analyticsName:"TODO",displayName:ye.save,validators:[],svg:ae.N,closeParentMenu:!1,action(e,o){se({state:t,environment:r,sessionId:i})}})],key:"actions",render:e=>(0,R.jsx)(Z.Z,{...e})}),(0,W.$J)({key:"delete action section",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[(0,W.cN)({key:"delete",analyticsName:"TODO",displayName:ye.delete,validators:[],svg:le.y,closeParentMenu:!1,action(e,o){const{currentUserSettingsStore:n}=G.default.state;n&&(C.createAndCommit({userAction:"ai.favoriteEditorPopup.delete",environment:r,perform(e){(0,Q.QC)(t.current,n,e)}}),t.clear(),v.VoR(r,{type:"delete",session_id:i,gtm_favorite_id:t.current.gtmFavoriteId}))}})]})],u=(0,n.useCallback)((()=>{}),[]);return(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px 8px 0 8px"},children:[(0,R.jsx)($.Z,{icon:re.G,onClick:()=>{!function(e){const{state:t,environment:o}=e,{currentUserSettingsStore:n}=G.default.state;n&&(t.current.name||C.createAndCommit({userAction:"favoriteActions.cancelFavoriteEditsAndClearState",environment:o,perform(e){(0,Q.QC)(t.current,n,e),(0,Y.Nv)(t.current.action,n,e)}}),t.clear())}({environment:r,state:t})},ariaLabel:s.formatMessage(ye.cancelAndGoBack)}),(0,R.jsx)(me.Z,{isSecondaryColor:!0,isSmall:!0,style:{fontWeight:700},children:(0,R.jsx)(g.FormattedMessage,{id:"ai.favorites.saveHeader",defaultMessage:"Save AI action"})})]}),(0,R.jsx)(ue.Z,{menuType:ge.og.Popup,width:"100%",maxHeight:"min(40vh, 320px)",minHeight:"100%",children:(0,R.jsx)(ce.Z,{menuListStore:l,sections:d,onAccept:u,initialFocus:0,context:o})})]})}var he=o(57819),Ce=o(2585),xe=o(5257);const ke=(0,g.defineMessages)({undoAriaLabel:{defaultMessage:"Go to previous AI response",id:"id.completions.undoAriaLabel"},redoAriaLabel:{defaultMessage:"Go to next AI response",id:"id.completions.redoAriaLabel"},historyLabel:{defaultMessage:"{currentRevision} of {totalRevisions}",id:"id.completions.historyLabel"}}),we={display:"flex",alignItems:"center",marginLeft:-2,marginRight:-2},Ae={width:20,height:20,marginLeft:2,marginRight:2};function Se(e){window.__c={n:"CompletionHistory"};const{onUndo:t,onRedo:o,historyLabel:n}=e,i=(0,g.useIntl)();return t||o?(0,R.jsxs)("div",{style:we,children:[(0,R.jsx)($.Z,{icon:Ce.f,ariaLabel:i.formatMessage(ke.undoAriaLabel),disabled:!t,onClick:t,style:Ae}),(0,R.jsx)(me.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontVariantNumeric:"tabular-nums"},children:n}),(0,R.jsx)($.Z,{icon:xe.o,ariaLabel:i.formatMessage(ke.redoAriaLabel),disabled:!o,onClick:o,style:Ae})]}):null}const Ie={onUndo:void 0,onRedo:void 0,historyLabel:void 0};function Me(e,t){const o=M.default.state;if("completionPopup"!==o.type||"results"!==o.stage)return;const{sessionId:n}=o,i=(0,w.xM)(o);v.BpO(e,{session_id:n,inference_id:i.inferenceId,type:t})}var be=o(56863),_e=o(81598),Pe=o(19124),je=o(5737),Fe=o(82375),Le=o(11066),Te=o(1743),Ne=o(74194);const Be=(0,g.defineMessages)({promptLabel:{defaultMessage:"Prompt for action",id:"ai.favoritePromptEditor.promptLabel"}});function Ee(e,t){e.set({...e.current,action:{...e.current.action,prompt:t}})}function Ze(e){window.__c={n:"FavoritePromptEditorContent"};const{state:t,inputRef:o,sessionId:n}=e,i=(0,a.O7)(),s=(0,he.bJ)(),r=(0,g.useIntl)().formatMessage(Be.promptLabel);return(0,R.jsxs)(Te.Z,{capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,R.jsx)(Ne.Z,{ref:o,format:Ne.Z.Format.Transparent,placeholder:r,selectAll:!0,value:t.current.action.prompt,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onChange:e=>Ee(t,e.target.value),onKeyDown:e=>{"Enter"===e.key&&Ee(t,`${t.current.action.prompt}\n`)},focusInitial:!1}),(0,R.jsx)("div",{style:s.inputActions,children:(0,R.jsx)(Le.Z,{style:s.purpleButton,onClick:()=>se({state:t,environment:i,sessionId:n}),children:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Done",id:"ai.favoritePromptEditor.done"})})})]})}var Oe=o(61519);function Re(e){window.__c={n:"PromptOrActionInput"};const{query:t,setQuery:o,onDismiss:i,onSubmit:s,inputRef:r,submitOnEnter:a,inputPlaceholder:l,children:c}=e,[d,u]=(0,n.useState)(void 0);return(0,R.jsxs)(Te.Z,{capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,R.jsx)(Ne.Z,{ref:r,format:Ne.Z.Format.Transparent,placeholder:l,selectAll:!0,value:t,textarea:!0,textareaSubmitOnEnter:!0,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onSubmit:e=>{t&&a&&(e.stopPropagation(),null==s||s())},onChange:e=>{o(e.target.value)},onKeyUp:e=>{"Backspace"===e.key&&(""===d&&i(),u(void 0))},onKeyDown:e=>{"Backspace"===e.key&&void 0===d&&u(t)},focusInitial:!0}),c]})}var De=o(83065),Ue=o(58261),Ve=o(26388);function He(e){window.__c={n:"SubmitAIPromptButton"};const{onSubmit:t,canSend:o}=e,n=(0,he.bJ)(),i=(0,a.O7)(),s=(0,l.VK)((()=>i.device.isPhone),[i]);return(0,R.jsx)(Ve.Z,{renderTooltip:()=>(0,R.jsxs)("div",{children:[(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Send to AI",id:"completions.CompletionMenuActionBar.sendTooltip"}),(0,R.jsx)(Ue.Z,{style:n.keyboardShortcutInverted,name:"enter"})]}),placement:Ve.Z.Placement.Bottom,render:e=>(0,R.jsx)($.Z,{icon:De._,onClick:t,isPurple:o,disabled:!o,iconStyle:{height:s?24:20,width:s?24:20},style:{pointerEvents:"auto",height:s?24:20,width:s?24:20},...e})})}const We=(0,g.defineMessages)({followUpInputPlaceholder:{id:"AlternativeCommandPalette.followUp.inputPlaceholder",defaultMessage:"Tell AI what to do next…"}}),Ke={padding:"8px 10px 8px 14px"};function ze(e){window.__c={n:"CompletionFinishedContent"};const t=(0,he.bJ)(),o=(0,g.useIntl)(),n=0===e.query.trim().length,i=(0,l.VK)((()=>{if(!(0,Pe.E8)()||!(0,Pe.Gw)())return!1;const e=Fe.XN.state;return Boolean(e&&e.previewingStep)}),[]);return(0,R.jsx)(Re,{...e,inputPlaceholder:o.formatMessage(We.followUpInputPlaceholder),...i&&{onSubmit:void 0},children:(0,R.jsxs)("div",{style:t.inputActions,children:[(0,R.jsx)(He,{onSubmit:e.onSubmit,canSend:!n&&!i}),(e.onUndo||e.onRedo)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Oe.Z,{vertical:!0,size:1,style:Ke}),(0,R.jsx)(Se,{...e})]})]})})}var $e=o(64921),qe=o(91839);function Ge(e){window.__c={n:"CompletionInProgressContent"};const{onStop:t,onRetry:o}=e,n=(0,he.bJ)(),i=(0,a.O7)().device,s=i.isMobileNative&&i.isIOS;return(0,R.jsxs)(x.Z,{capture:!0,onEnter:()=>{t()},onEsc:()=>{t()},onKeypress:e=>{e.metaKey||"r"!==e.key||o()},children:[(0,R.jsxs)("div",{style:n.writingLabel,children:[(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.writing",defaultMessage:"AI is writing"}),(0,R.jsx)(qe.Z,{style:n.loadingDots})]}),!s&&(0,R.jsxs)($e.Z,{style:n.lightweightButton,onClick:o,children:[(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.tryAgain.label",defaultMessage:"Try again"}),(0,R.jsx)("span",{style:n.keyboardShortcut,children:(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.startOver.shortcut",defaultMessage:"r"})})]}),(0,R.jsxs)($e.Z,{style:n.lightweightButton,onClick:t,children:[s?(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.cancel.label",defaultMessage:"Cancel"}):(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.label",defaultMessage:"Stop"}),(0,R.jsx)("span",{style:n.keyboardShortcut,children:(0,R.jsx)(g.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.shortcut",defaultMessage:"esc"})})]})]})}var Je=o(15201),Ye=o(53336),Qe=o(55217);function Xe(e){window.__c={n:"CompletionPreview"};const{temporaryListStore:t,isLoading:o}=e,i=(0,a.O7)(),s=(0,n.useRef)(null),r=null==s?void 0:s.current,c=null==r?void 0:r.getStore(),d=(0,l.VK)((()=>i.device.isPhone),[i]),u=(0,he.jq)({resetWhenScrolledToBottom:!0,areWeLoading:o,scrollerStore:c});(0,n.useEffect)((()=>{r&&(u?et.cancel():et(r))}),[r,t,u]);const p={scroller:{maxHeight:d?"min(15vh, 200px)":"min(40vh, 320px)",width:"100%"}};return(0,R.jsx)(n.Fragment,{children:(0,R.jsx)(Ye.Z,{type:Ye.Z.OverflowType.Y,style:p.scroller,ref:s,children:(0,R.jsx)(Je.O,{displayName:"CompletionPopupContent",disabled:!0,children:(0,R.jsx)(Qe.Z,{store:t,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0})})})})}const et=H.Ds((e=>{e.scrollToBottom({animate:!0})}),60);var tt=o(63594),ot=o(54497),nt=o(42402);function it(){window.__c={n:"AiWarningNotice"};const e=(0,n.useCallback)((()=>{window.open("/help/guides/using-notion-ai#what-are-the-current-limitations-of-notion-ai")}),[]),t=(0,c.yK)((e=>({icon:{width:12,height:12,fill:e.lightIconColor,marginLeft:2},link:{color:e.lightTextColor,fontWeight:500}})),[]);return(0,R.jsxs)(R.Fragment,{children:[(0,ot.t)(t.icon),(0,R.jsx)(me.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.AiWarning.warning",defaultMessage:"AI responses can be inaccurate or misleading."})}),(0,R.jsx)(me.Z,{isSmall:!0,children:(0,R.jsx)(nt.Z,{onClick:e,style:t.link,disableHover:!0,disableUnderline:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"completions.AiWarning.learnMore",defaultMessage:"Learn more"})})})]})}var st=o(935),rt=o(81570),at=o(1865),lt=o(78291),ct=o(80671),dt=o(88893),ut=o(35057);function pt(){window.__c={n:"UpsellNotice"};const e=(0,a.O7)(),t=(0,l.VK)((()=>e.device.isMobile),[e]),o=(0,l.VK)((()=>{const e=lt.default.state.data;return dt.GJ(e)}),[]),i=(0,n.useCallback)((()=>{t?ct.k2():at.y(e,{from:"ai_upsell_notice",for:(0,ut.zt)(),addOnFeature:"ai"})}),[e,t]),s=(0,c.yK)((e=>({upsellIcon:{width:14,height:14,fill:e.lightIconColor},upsellLink:{color:e.blueColor,fontWeight:500}})),[]);return(0,R.jsxs)(R.Fragment,{children:[(0,rt.T)(s.upsellIcon),(0,R.jsxs)(me.Z,{isSecondaryColor:!0,isSmall:!0,children:[(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.label",defaultMessage:"All free AI responses have been used for this workspace."}),!o&&(0,R.jsxs)(R.Fragment,{children:[" ",(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.contactWorkspaceOwner.label",defaultMessage:"Contact your workspace owner to add Notion AI."})]})]}),o&&(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(me.Z,{isSmall:!0,children:(0,R.jsx)(nt.Z,{onClick:i,style:s.upsellLink,disableHover:!0,disableUnderline:!0,children:(0,R.jsx)(g.FormattedMessage,{id:"UpsellNotice.link.label",defaultMessage:"Go unlimited"})})})})]})}function mt(e){window.__c={n:"MainPopupFooter"};const{state:t}=e,o=(0,a.O7)(),n=(0,l.VK)((()=>o.device.isPhone),[o]),i=(0,c.yK)((e=>({wrapper:{background:"dark"===e.mode?e.accentColors.gray[100]:e.accentColors.gray[30],display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 12px",borderTop:`1px solid ${e.lightDividerColor}`,gap:8,color:e.lightTextColor,fontSize:12,minHeight:36},noticeContent:{display:"flex",alignItems:"center",gap:8},actionContent:{display:"flex",alignItems:"center"}})),[]),s=(0,l.VK)((()=>!tt.Z.state),[]);if(n)return null;let r,d;return s&&(r=(0,R.jsx)(pt,{})),"results"!==t.stage||t.loading||(r=r??(0,R.jsx)(it,{}),d=(0,R.jsx)(st.u,{revision:(0,w.xM)(t)})),r?(0,R.jsxs)("div",{style:i.wrapper,children:[(0,R.jsx)("div",{style:i.noticeContent,children:r}),d&&(0,R.jsx)("div",{style:i.actionContent,children:d})]}):null}const ft=(0,g.defineMessages)({writeInputPlaceholder:{defaultMessage:"Ask AI to write anything…",id:"completions.PromptMenu.alternativeUiWriteInputPlaceholder"},editInputPlaceholder:{defaultMessage:"Ask AI to edit or generate…",id:"completions.PromptMenu.alternativeUiEditInputPlaceholder"}});function gt(e){window.__c={n:"MainPopupContent"};const{state:t,onDismiss:o,onCompletionRetry:i,onCompletionStop:s,temporaryListStore:r,favoriteEditingState:d}=e,u=(0,n.useRef)(null);(0,n.useEffect)((()=>{be.w()}),[]);const p=(0,a.O7)(),m=(0,l.VK)((()=>p.device.isPhone),[p]),f=(0,l.VK)((()=>G.default.state.currentSpaceStore),[]),g=(0,l.VK)((()=>je.NM.state),[]),y=(0,l.VK)((()=>{if(!(0,Pe.E8)())return;const e=Fe.XN.state;return e?e.temporaryClientSteps.filter((e=>"assistantChat"===e.type||"assistantLoadPage"===e.type||"assistantSearch"===e.type)):void 0}),[],{useDeepEqual:!0}),v=(0,c.yK)((e=>({icon:{height:18,width:18,paddingLeft:m?0:4,marginLeft:m?-4:void 0,fill:"dark"===e.mode?e.accentColors.purple[600]:e.accentColors.purple[300]},outer:{width:"100%",minHeight:m?44:36,padding:m?"2px 16px 2px 16px":"2px 12px 2px 8px",display:"flex",flexDirection:"column",justifyContent:"center",gap:2,fontSize:m?16:14}})),[m]),h=(0,R.jsx)("div",{style:{height:36,alignItems:"center",display:"flex"},children:(0,L.t)(v.icon)});if("active"===d.type)return(0,R.jsx)("div",{style:v.outer,ref:u,children:(0,R.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[h,(0,R.jsx)(Ze,{state:d,inputRef:e.inputRef,sessionId:t.sessionId})]})});const C=(0,R.jsxs)("div",{style:v.outer,ref:u,children:[r&&(0,R.jsx)(Xe,{temporaryListStore:r,isLoading:"results"===t.stage&&t.loading}),y&&f&&(0,R.jsx)(R.Fragment,{children:y.map(((e,t)=>(0,R.jsx)(_e.qS,{clientStep:e,parentStore:f,parentSpaceId:f.id,configurationState:g},t)))}),(0,R.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[h,"initialPrompt"===t.stage||"initialPromptForAIBlock"===t.stage?(0,R.jsx)(yt,{...e,paletteMode:(0,he.rR)(t)}):t.loading?(0,R.jsx)(Ge,{onDismiss:o,state:t,onRetry:i,onStop:s}):(0,R.jsx)(ze,{...e})]})]});return(0,R.jsxs)(R.Fragment,{children:[C,(0,R.jsx)(mt,{state:t})]})}function yt(e){window.__c={n:"MainPopupInitialPromptContent"};const{query:t,onSubmit:o,paletteMode:n}=e,i=(0,he.bJ)(),s=(0,g.useIntl)(),r="edit"===n?s.formatMessage(ft.editInputPlaceholder):s.formatMessage(ft.writeInputPlaceholder),a=t.trim().length>0;return(0,R.jsx)(Re,{...e,inputPlaceholder:r,children:(0,R.jsx)("div",{style:i.inputActions,children:(0,R.jsx)(He,{onSubmit:o,canSend:a})})})}o(30541);var vt=o(8848),ht=o(7500),Ct=o(13148),xt=o(1230),kt=o(25651),wt=o(91427),At=o(98519),St=o(55863),It=o(68204),Mt=(o(21703),o(36769)),bt=o(64275),_t=o(56666),Pt=o(37181);const jt="recent-actions",Ft=(0,g.defineMessages)({recentActions:{defaultMessage:"Recents",id:"commandPalette.recentActions.title"},more:{defaultMessage:"See more",id:"commandPalette.recentActions.more"},removeFromMenu:{defaultMessage:"Remove this action from the menu",id:"commandPalette.recentActions.removeFromMenu"},addToFavorites:{defaultMessage:"Add to favorites",id:"commandPalette.recentActions.addToFavorites"}});function Lt(e){window.__c={n:"FavoriteButton"};const{focused:t,recentAction:o,state:n,intl:i,sessionId:s}=e,r=(0,a.O7)();return(0,R.jsx)($.Z,{style:{visibility:t?"visible":"hidden",width:18,height:18},onClick:()=>{v.VoR(r,{type:"create_from_recent",session_id:s,gtm_favorite_id:void 0}),n.set((0,Q.kg)(o))},icon:wt.e,ariaLabel:i.formatMessage(Ft.addToFavorites)})}function Tt(){window.__c={n:"MoreIcon"};const e=(0,c.Fg)();return(0,_t.o)({width:12,fill:e.mediumIconColor,marginLeft:2,marginRight:2})}function Nt(e){if("completionPopup"!==e.type||"results"!==e.stage)return;const t=(0,w.xM)(e);return"initial"===t.type?t:void 0}(0,Mt.exposeDebugEnvironmentValue)("resetRecentAndFavoriteAIActions",(e=>()=>{const{currentUserSettingsStore:t}=G.default.state;if(!t)throw new Error("currentUserSettingsStore not found");C.createAndCommit({userAction:"recentActions.debugging.resetRecentAndFavoriteAIActions",environment:e,perform(e){Pt.d2({userSettingsStore:t,transaction:e,data:{recent_ai_actions:[],favorite_ai_actions:[]}})}})}));const Bt="This string should never show up in analytics",Et=(0,g.defineMessages)({clickToEditAndRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToEditAndRetry",defaultMessage:"Click to edit prompt and retry"},clickToRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToRetry",defaultMessage:"Click to retry"},tryAgain:{id:"completions.CompletionMenuActionBar.tryAgain",defaultMessage:"Try again"},delete:{id:"completions.CompletionMenuActionBar.delete",defaultMessage:"Discard"},close:{id:"completions.CompletionMenuActionBar.close",defaultMessage:"Close"},keep:{id:"completions.CompletionMenuActionBar.done",defaultMessage:"Done"},replace:{id:"completions.CompletionMenuActionBar.replace",defaultMessage:"Replace selection"},insert:{id:"completions.CompletionMenuActionBar.insert",defaultMessage:"Insert below"},addToFavorites:{id:"completions.CompletionMenuActionBar.addToFavorites",defaultMessage:"Add to favorites"}});function Zt(e){const{filter:t,state:o,from:n,favoriteEditingState:i,onUpdatePromptState:s,onImprove:r,context:a,intl:l,environment:c,completionResultInfo:d}=e,u=(0,Pe.E8)();let p;switch(o.stage){case"initialPrompt":case"initialPromptForAIBlock":p=function(e){const{state:t,environment:o,intl:n,filter:i,from:s,onUpdatePromptState:r,favoriteEditingState:a,type:l}=e,{currentUserSettingsStore:c}=G.default.state;if((0,Pe.E8)())return[];const d=c?function(e,t,o,n,i){const s=i.filterOut.toLocaleLowerCase().trim(),r=(0,Y.pz)(o),a=[];let l=0;for(const u of r){const r="recentAction."+l++,c=s=>(0,R.jsxs)("div",{style:{display:"flex"},children:[(0,R.jsx)($.Z,{style:{visibility:s.focused?"visible":"hidden",width:18,height:18},onClick:()=>C.createAndCommit({userAction:"ai.recentActions.renderRemoveButton",environment:n,perform(e){(0,Y.lG)(u,o,e)}}),icon:bt.D,ariaLabel:t.formatMessage(Ft.removeFromMenu)}),"inactive"===i.favoriteEditingState.type?(0,R.jsx)(Lt,{sessionId:e.sessionId,state:i.favoriteEditingState,focused:s.focused,recentAction:u,intl:t}):(0,R.jsx)(y.xj,{type:"updatePrompt",focused:s.focused})]});let d;if(u.prompt.toLocaleLowerCase().trim()!==s){switch(u.type){case"helpMeEdit":"initialPrompt"!==e.stage||"blockSelection"!==e.context.type&&"textSelection"!==e.context.type||(d=(0,y.cK)({key:r,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:W.zz}));break;case"helpMeWrite":"initialPromptForAIBlock"!==e.stage&&"cursor"!==e.context.type||(d=(0,y.cK)({key:r,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:W.zz}));break;default:(0,f.t1)(u)}d&&a.push(d)}}const c=a.slice(0,3),d=a.slice(3);if(d.length){const e=(0,W.$J)({key:"more recent actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:d}),t=(0,W.MV)({key:"more recent actions extension",displayName:Ft.more,analyticsName:"Completions - more",validators:[],svg:()=>(0,R.jsx)(Tt,{}),subActions:()=>[e],collapseSubActionsIntoParent:!0,width:400});c.push(t)}return[(0,W.$J)({key:jt,title:Ft.recentActions,render:e=>(0,R.jsx)(Z.Z,{...e}),actions:c})]}(t,n,c,o,{onUpdatePromptState:r,favoriteEditingState:a,filterOut:i}):[],u=[...c&&"disabled"!==a.type?ie(o,t,n,c,{onUpdatePromptState:r,favoriteEditingState:a,filterOut:i}):[]];"initialPromptForAIBlock"===t.stage?u.push((0,y.xI)({store:t.store,from:s})):"aiBlock"!==l&&u.push(...(0,y.LK)({from:s,type:l,onUpdatePromptState:r}));return u.push(...d),u}({state:o,environment:c,intl:l,filter:t,from:n,context:a,favoriteEditingState:i,onUpdatePromptState:s,type:(0,he.VZ)(o)});break;case"results":p=o.loading?[]:function(e){const{environment:t,state:o,defaultAction:n,isAssistant:i,closeOrDiscard:s,favoriteEditingState:r}=e,a={key:"insert",analyticsName:Bt,displayName:Et.insert,validators:[],closeParentMenu:!0,svg:xt.H,action(){e.onInsert()}},l={key:"delete",analyticsName:Bt,displayName:Et.delete,validators:[],closeParentMenu:!0,svg:le.y,action(){e.onCancel()}},c=function(e){const{state:t,onRetry:o}=e;if("results"!==t.stage)return;return{key:"tryAgain",analyticsName:Bt,displayName:Et.tryAgain,validators:[],closeParentMenu:!0,svg:St.s,renderTooltip:()=>(0,R.jsx)(Rt,{state:t}),action(){o()}}}({...e}),d=[],u=At.k;if(i)return[(0,W.$J)({key:"main",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[(0,W.cN)({key:"keep",analyticsName:Bt,displayName:Et.keep,validators:[],closeParentMenu:!0,svg:u,action(){e.onAccept({exitType:"accept"})}})]})];"accept"===n?d.push((0,W.cN)({key:"keep",analyticsName:Bt,displayName:Et.keep,validators:[],closeParentMenu:!0,svg:u,action(){e.onAccept({exitType:"accept"})}})):"replace"===n?d.push((0,W.cN)({key:"replace",analyticsName:Bt,displayName:Et.replace,validators:[],closeParentMenu:!0,svg:u,action(){e.onReplace()}}),(0,W.cN)(a)):"insert"===n?d.push((0,W.cN)({...a,svg:u})):(0,f.t1)(n);d.push((0,W.cN)({key:"continueWriting",analyticsName:Bt,displayName:w.Dr.continueWriting,validators:[],closeParentMenu:!0,svg:Dt(kt.R),action(){e.onImprove({type:"continueWriting"})}}),(0,W.cN)({key:"makeLonger",analyticsName:Bt,displayName:w.Dr.makeLonger,validators:[],closeParentMenu:!0,svg:Dt(ht.H),action(){e.onImprove({type:"makeLonger"})}}),(0,W.cN)({key:"addToFavorites",analyticsName:Bt,displayName:Et.addToFavorites,validators:[()=>Boolean(Ut(o,r))],closeParentMenu:!0,svg:Dt(wt.e),action(){const e=Ut(o,r);if(!e)return;const n=(0,Q.kg)(e.recentAction);e.favoriteEditingState.set(n),v.VoR(t,{type:"create_from_completion",session_id:o.sessionId,gtm_favorite_id:void 0})}}),(0,W.cN)({key:"convertToAiBlock",analyticsName:Bt,displayName:w.Dr.insertAIBlock,validators:[()=>{if("completionPopup"!==o.type||"results"!==o.stage||"cursor"!==o.context.type)return!1;const e=Nt(o);return!!e&&Boolean((0,Pe.z1)()[e.clientPrompt.key])}],closeParentMenu:!0,svg:Dt(L.t),action(){e.onAccept({exitType:"convert_to_ai_block"})}}));const p=[c?(0,W.cN)(c):void 0,"discard"===s?(0,W.cN)(l):(0,W.cs)({key:"close",analyticsName:Bt,displayName:Et.close,validators:[],closeParentMenu:!0,svg:Ct.U,shortcuts:["esc"],action(){e.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0})}})],m=(0,W.$J)({key:"main",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:d}),g=(0,W.$J)({key:"final",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:p.filter(f.$K)});return[m,g]}({environment:c,state:o,onImprove:r,closeOrDiscard:"cursor"===o.context.type?"close":"discard",isAssistant:u,favoriteEditingState:i,...d});break;default:(0,f.t1)(o)}let m=(0,It.sG)({sections:p,context:a,query:t});if(1===m.length&&m[0].key===jt){const e=m[0].actions.slice();(0,w.LN)(t,l)||e.unshift((0,y.sH)({customPrompt:t,execute:d.onSubmit})),m=[(0,W.$J)({key:"actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:e})]}else(function(e){let t=!1;for(const o of e)if(o.key===X)t=!0;else if(o.key!==jt)return!1;return t})(m)&&m.push((0,W.$J)({key:"literal-actions",render:e=>(0,R.jsx)(Z.Z,{...e}),actions:[(0,y.sH)({customPrompt:t,execute:d.onSubmit})]}));return m}function Ot(e,t){switch(t.type){case"continueWriting":return e.formatMessage(w.Dr.continueWriting);case"makeLonger":return e.formatMessage(w.Dr.makeLonger);case"helpMeEdit":return t.prompt}}function Rt(e){window.__c={n:"TryAgainTooltip"};const{state:t}=e,o=(0,c.yK)((e=>({hint:{color:e.mediumInvertedTextColor}})),[]),n=(0,w.xM)(t),i=(0,g.useIntl)();let s,r=Et.clickToEditAndRetry;if("initial"===n.type)if(_.doesPromptNeedAdditionalUserInput(n))s=(0,w.gY)(n);else{r=Et.clickToRetry;const e=n.clientPrompt.name;s="string"==typeof e?e:i.formatMessage(e)}else"followup"===n.type?s=Ot(i,n.improvement):(0,f.t1)(n);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{children:s}),(0,R.jsx)("div",{style:o.hint,children:i.formatMessage(r)})]})}function Dt(e){return()=>(0,R.jsx)(y.lA,{svg:e,svgFill:vt.FN.light.purple[400]})}function Ut(e,t){if("disabled"===t.type)return;const o=Nt(e);if(!o)return;const{currentUserSettingsStore:n}=G.default.state;if(!n)return;const i=(0,Y.BG)({clientPrompt:o.clientPrompt,additionalContext:o.additionalContext,promptTitle:o.promptTitle});return i&&!(0,Q.Gl)(n,i)?{currentInitialRevision:o,recentAction:i,favoriteEditingState:t,currentUserSettingsStore:n}:void 0}function Vt(e){window.__c={n:"MenuPopupContent"};const{sections:t,onCloseParentMenu:o,context:i,menuListStore:s}=e,r=(0,n.useCallback)((e=>{e.closeParentMenu&&o()}),[o]),c=(0,a.O7)(),d=(0,l.VK)((()=>c.device.isPhone),[c]);return(0,R.jsx)(ue.Z,{menuType:d?ge.og.ActionSheet:ge.og.Popup,width:"100%",maxHeight:d?"min(17vh, 160px)":"min(40vh, 320px)",maxWidth:"100%",children:(0,R.jsx)(ce.Z,{menuListStore:s,sections:t,onAccept:r,initialFocus:0,context:i})})}var Ht=o(51454),Wt=o(69454),Kt=o(77794),zt=o(21199),$t=o(35661);function qt(e){window.__c={n:"PopupPositioner"};const{scrollerStore:t,openState:o,children:i}=e,[s,r]=(0,n.useState)(Date.now()),a=(0,n.useCallback)((()=>r(Date.now())),[]),d=(0,n.useRef)(null),[u,p]=(0,n.useState)(void 0),[m,f]=(0,n.useState)(void 0),g=(0,l.VK)((()=>{const e=(0,he.$b)(o);if(!e)return;const n=(0,w.wA)(e);if(!n)return;const{origin:i}=e;"results"!==o.stage&&n&&i instanceof $t.G&&("spacebar"===o.from||i.isEmptyEditableBlock())&&(n.height=0);const s=t.state,r=s.clientRect??new DOMRect,a=s.scrollTop;return function(e){const{openState:t,originRect:o,scrollerRect:n,scrollerScrollTop:i,popupRect:s}=e,r=(null==s?void 0:s.height)??0,a=(null==s?void 0:s.width)??0,l=Math.min(Math.max(o.width,500),730);let c;const d=o.bottom-n.top+i+Jt;o.bottom+r+Jt+Yt>n.bottom&&(c=d-(n.height-r-Yt+i));let u;a+Qt+Xt>n.width?u=Qt:o.left+a>n.right?u=n.width-a-Xt:(u=o.left-n.left,"initialPromptForAIBlock"===t.stage&&(u-=a-o.width));return{top:d,left:u,width:l,scrollTopIntoView:c}}({openState:o,originRect:n,scrollerRect:r,scrollerScrollTop:a,popupRect:u})}),[t,u,o]);(0,n.useEffect)((()=>{g&&f(g)}),[g]);const y=g??m;(0,n.useEffect)((()=>{if(Date.now()-s>500)return;const e=null==y?void 0:y.scrollTopIntoView;if(!e)return;const o=eo(t);o&&Gt(e,o)}),[null==y?void 0:y.scrollTopIntoView,t,s]);const v=(0,c.yK)((e=>({wrap:{position:"absolute",left:null==y?void 0:y.left,top:null==y?void 0:y.top,width:null==y?void 0:y.width,zIndex:Ht.lB}})),[y]);(0,n.useEffect)((()=>{const e=new Kt.E;if(!d.current)throw new Error("ref.current is null");return e.observe(d.current),e.rect.addListener((e=>{p(e.state)})),()=>{e.destroy()}}),[]);const h="results"===o.stage&&!o.loading;(0,n.useEffect)((()=>{h&&a()}),[h,a]);const C="results"===o.stage&&o.loading,x=(0,he.jq)({resetWhenScrolledToBottom:!1,areWeLoading:C,scrollerStore:t}),k="results"===o.stage&&"cursor"===o.context.type,[A,S]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{!C||!k&&A||(x?Gt.cancel():null!=y&&y.scrollTopIntoView&&(a(),S(!0)))}),[x,A,k,C,y,a]),(0,R.jsx)(zt.Z,{capture:!0,render:e=>(0,R.jsx)(Te.Z,{capture:!0,allowMenuList:!0,allowEsc:!0,children:(0,R.jsx)("div",{style:v.wrap,ref:d,...e,children:y&&i})})})}const Gt=H.Ds(((e,t)=>{t.scrollByOffset(e,0,{animate:!0}),q.Z.MenuScroller&&q.Z.MenuScroller.scrollToTop()}),60),Jt=4,Yt=6,Qt=6,Xt=16;function eo(e){var t,o;return e===(null===(t=q.Z.PageScroller)||void 0===t?void 0:t.stores.store)?q.Z.PageScroller:e===(null===(o=q.Z.PeekViewScroller)||void 0===o?void 0:o.stores.store)?q.Z.PeekViewScroller:void 0}function to(e){window.__c={n:"MobilePopupPositioner"};const{children:t,scrollerStore:o,openState:i}=e,[s,r]=(0,n.useState)(Date.now()),c=(0,n.useRef)(null),[d,p]=(0,n.useState)(void 0),m=(0,n.useCallback)((()=>r(Date.now())),[]),{WindowSizeStore:f}=(0,a.O7)();(0,n.useEffect)((()=>{const e=new Kt.E,t=c.current;if(!t)throw new Error("ref.current is null");e.observe(t);let o=t.getBoundingClientRect().top;e.rect.addListener((e=>{o=e.state.top,p(e.state)}));const n=setInterval((()=>{const n=t.getBoundingClientRect().top;n!==o&&(o=n,e.recompute())}),50);return()=>{e.destroy(),clearInterval(n)}}),[]);const g="results"===i.stage&&!i.loading,y=("results"===i.stage||"initialPrompt"===i.stage)&&"cursor"===i.context.type,v=(0,l.VK)((()=>{const e=(0,he.$b)(i);if(!e)return;const t=(0,w.wA)(e);if(!t)return;if(!d)return;const o=t.bottom-d.top;return o>0?o:void 0}),[i,d]);(0,n.useEffect)((()=>{if(Date.now()-s>500)return;if(!v)return;const e=eo(o);e&&Gt(v,e)}),[v,o,s]),(0,n.useEffect)((()=>{g&&y&&m()}),[g,y,m]);const h="results"===i.stage&&i.loading,C=(0,u.D9)(h),[x,k]=(0,n.useState)();(0,n.useEffect)((()=>{C&&!h&&k(Date.now())}),[h,C]),(0,n.useEffect)((()=>{const e=!!x&&Date.now()-x<1e3;(h||e)&&y&&v&&m()}),[y,h,m,v,x]);const A=(0,l.VK)((()=>{const e=Wt.Z.state.phase===Wt.i.hidden||Wt.Z.state.phase===Wt.i.willHide,t=Wt.Z.estimatedNativeWebBottomOverlap()+Yt;return e?f.getSafePaddingBottomPx(t):t}),[f]);return(0,R.jsx)("div",{ref:c,style:{position:"absolute",bottom:A,left:Qt,right:Qt,zIndex:Ht.Mo},children:t})}const oo="notion-alternate-ai-ui";function no(e){window.__c={n:"CompletionPopup"};const{scrollerStore:t}=e,o=(0,a.O7)(),i=(0,l.VK)((()=>M.default.state),[]);(0,P.w9)(i);const s=(0,n.useMemo)((()=>(0,he.RR)(i)),[i]),r=(0,l.VK)((()=>s&&(0,he.$b)(s)),[s]),c=(0,l.VK)((()=>o.device.isPhone),[o]);return s?t!==(null==r?void 0:r.scrollerStore)?null:c?(0,R.jsx)(to,{scrollerStore:t,openState:s,children:(0,R.jsx)(io,{openState:s})}):(0,R.jsx)(qt,{scrollerStore:t,openState:s,children:(0,R.jsx)(io,{openState:s})}):null}function io(e){window.__c={n:"PopupContent"};const{openState:t}=e,o=(0,a.O7)(),L=(0,g.useIntl)(),T=(0,n.useState)(function(e){switch(e.stage){case"results":return"";case"initialPromptForAIBlock":return e.prompt??e.prefilledValue;case"initialPrompt":return e.prefilledValue;default:return(0,f.t1)(e)}}(t))[0],[N,B]=function(e){const t=(0,g.useIntl)(),[o,i]=(0,n.useState)("");return[(0,l.VK)((()=>{if("initialPromptForAIBlock"!==e.stage||!(0,w.dU)())return o;const n=e.store.getTitleValue();return(0,p.X)({intl:t,textValue:n,getRecordModel:e.store.getRecordModel,userTimeZone:(0,d.r)()})}),[o,t,e]),i]}(t),[E,Z]=(0,n.useState)(!1),[O,U]=(0,n.useState)(!1),[V,W]=(0,n.useState)(""),z=te(),$=(0,n.useRef)(null),q=(0,he.rR)(t),Y=(0,n.useMemo)((()=>({environment:o,blocks:[],publicEditMode:void 0})),[o]);(0,P.lZ)(t);const X=(0,n.useCallback)((e=>{v.ovL(o,{session_id:t.sessionId,type:e.analyticsName,gtm_favorite_id:e.gtmFavoriteId}),B(e.insertText),_.maybeSetPromptForCurrentAiBlock(o,e.insertText),e.executeImmediately&&Z(!0),$.current&&$.current.focusInput()}),[t.sessionId,o,B]),ee="results"===t.stage?(0,w.xM)(t).completion:void 0,oe=(0,u.Z_)(ee,_.COMPLETION_THROTTLE,m.Z),ne="results"===t.stage?t:void 0,ie=(0,I.useDependency)(I.deps.markdownLinkifyIt),se=(0,I.useDependency)(I.deps.tinyMceMicrosoftWordPasteFilter),re=(0,n.useMemo)((()=>{if(!ne||"textSelection"!==ne.context.type&&"blockSelection"!==ne.context.type)return;if(["idle","pending"].includes(ie.status)||["idle","pending"].includes(se.status))return;const{userSearchCache:e}=(0,w.xM)(ne);return oe?i.Z.withListenerIgnored((()=>{const t=new s.Z({name:"CompletionPopup.PopupContent",isTemporaryData:!0}),n=C.createAndCommit({userAction:"CompletionPopup.temporarymarkdownToBlocks",environment:o,canUndo:!1,perform:n=>{const i=h.Mt({environment:o,text:oe,inMemoryRecordCache:t,transaction:n,markdownOptions:(0,A.N9)(e),markdownLinkifyIt:ie.value,tinyMceMicrosoftWordPasteFilter:se.value});if(i)return _.postProcessAICreatedStores(o,i),h.Lh({environment:o,stores:i,inMemoryRecordCache:t,transaction:n})}}).performResult;return t.addCacheFallback(o.defaultRecordCache.inMemoryRecordCache),n})):void 0}),[ne,oe,o,ie,se]),ae=(0,l.VK)((()=>{if(!re||!ne||"completionPopup"!==ne.type||"results"!==ne.stage||"textSelection"!==ne.context.type&&"blockSelection"!==ne.context.type)return;return ne.context.stores.every((e=>{const t=e.getType();return!!t&&("blockSelection"===ne.context.type?Boolean(S.d[t]):"textSelection"===ne.context.type&&Boolean(S.D[t]))}))}),[ne,re]);let le=!0,ce=!1;switch(t.stage){case"initialPrompt":if(t.futureRevisions.length>0)break;case"initialPromptForAIBlock":le=!1;break;case"results":t.loading||"cursor"!==t.context.type||""!==N||(ce=!0);break;default:(0,f.t1)(t)}const de=function(e){const{environment:t,sessionId:o}=e,{value:i}=(0,I.useDependency)(I.deps.markdownLinkifyIt),{value:s}=(0,I.useDependency)(I.deps.tinyMceMicrosoftWordPasteFilter),r=(0,n.useCallback)((e=>{let{exitType:n,selectInsertion:r}=e;const a=M.default.state;"completionPopup"!==a.type||"results"!==a.stage||a.loading||(v.HCf(t,{session_id:o,inference_id:(0,w.xM)(a).inferenceId,exit_type:n}),C.createAndCommit({userAction:"CompletionPopup.handleAccept",environment:t,perform:e=>{_.acceptCursorCompletion({environment:t,transaction:e,selectInsertion:r,exitType:n,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,i,s]),a=(0,n.useCallback)((()=>{const e=M.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||((0,he.Tq)(t),v.HCf(t,{session_id:o,inference_id:(0,w.xM)(e).inferenceId,exit_type:"insert"}),"textSelection"===e.context.type?C.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{_.insertTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}):"blockSelection"===e.context.type&&C.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{_.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!1,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,i,s]),l=(0,n.useCallback)((()=>{const e=M.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||"textSelection"!==e.context.type&&"blockSelection"!==e.context.type||((0,he.Tq)(t),v.HCf(t,{session_id:o,inference_id:(0,w.xM)(e).inferenceId,exit_type:"replace"}),"textSelection"===e.context.type?C.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{_.replaceTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}):"blockSelection"===e.context.type&&C.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{_.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!0,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,i,s]);return(0,n.useMemo)((()=>({onAccept:r,onInsert:a,onReplace:l})),[r,a,l])}({environment:o,sessionId:t.sessionId});(0,n.useEffect)((()=>{B(T),$.current&&$.current.focusInput()}),[T,B]);const ue="results"===t.stage&&t.hasErrored,pe=(0,u.D9)(ue),me=ue&&!pe,fe=(0,n.useCallback)((e=>{const{purgeFromHistory:t}=e,n=_.revertCurrentCompletionRevision({environment:o,purgeFromHistory:t});n&&"followup"===n.type&&(B(Ot(L,n.improvement)),$.current&&$.current.focusInput())}),[o,L,B]),ge=(0,n.useCallback)((()=>{"results"===t.stage&&(_.revertCurrentCompletionRevision({environment:o,purgeFromHistory:!1}),$.current&&$.current.focusInput())}),[t,o]),ye=(0,n.useCallback)((()=>{"results"===t.stage&&(_.redoCompletionRevision(o),$.current&&$.current.focusInput())}),[o,t]);(0,n.useEffect)((()=>{if(!me||"results"!==t.stage)return;const{sessionId:e}=t;if((0,w.sr)(t))return void fe({purgeFromHistory:!0});const n=(0,w.Iz)(t);_.doesPromptNeedAdditionalUserInput(n)?(B(V),(0,F.jn)({environment:o})):_.cancelCompletion({environment:o,sessionId:e,inferenceId:n.inferenceId,exitType:"error_modal"})}),[o,me,t,V,fe,B]);const Ce=(0,n.useCallback)((()=>{if("results"!==t.stage)return;const{sessionId:e}=t,n=(0,w.xM)(t);if((0,w.sr)(t))return v.XwB(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!0}),void fe({purgeFromHistory:!1});v.XwB(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!1});const i=(0,w.Iz)(t);_.doesPromptNeedAdditionalUserInput(i)?(B((0,w.gY)(i)),(0,F.jn)({environment:o})):_.handleCompletionPopupRetry({environment:o})}),[o,t,fe,B]),xe=(0,n.useCallback)((()=>{if("results"!==t.stage)return;if(!(0,w.xM)(t).completion)return(0,w.sr)(t)?void fe({purgeFromHistory:!0}):(B(V),void(0,F.jn)({environment:o}));_.stopCompletion(o)}),[t,o,fe,V,B]),we=(0,n.useCallback)((()=>{U(!1),r.default.afterNextFlush((()=>{$.current&&$.current.focusInput()}))}),[]),Ae=(0,n.useCallback)((()=>{switch(t.stage){case"initialPromptForAIBlock":v.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,F.fz)();break;case"initialPrompt":B(""),(0,F.sj)();break;case"results":break;default:(0,f.t1)(t)}}),[t,o,B]),Se=(0,n.useCallback)((e=>{switch((0,he.Tq)(o),U(!1),t.stage){case"initialPrompt":case"initialPromptForAIBlock":v.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:e}),(0,F.fz)();break;case"results":_.cancelCompletion({environment:o,sessionId:t.sessionId,inferenceId:(0,w.xM)(t).inferenceId,exitType:e});break;default:(0,f.t1)(t)}}),[t,o]),be=(0,n.useCallback)((()=>Se("cancel")),[Se]),_e=(0,n.useCallback)((()=>{"active"!==z.type?ce?de.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0}):le?U(!0):Se("click_outside_window_cancel"):async function(e){const{state:t}=e,{currentUserSettingsStore:o}=G.default.state;if(o){const e=(0,Q.JS)(o).filter((e=>e.id===t.current.id));if(e.length>0&&H.Xy(t.current,e[0]))return void t.clear()}await K.confirmUserAction({message:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Are you sure you want to stop editing your favorite? Unsaved changes will be lost.",id:"ai.favoriteActions.cancelConfirmation"}),acceptLabel:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Discard changes",id:"ai.favoriteActions.cancelConfirmation.discardChanges"}),cancelLabel:(0,R.jsx)(g.FormattedMessage,{defaultMessage:"Go back",id:"ai.favoriteActions.cancelConfirmation.goBack"})})&&t.clear()}({state:z})}),[z,ce,de,Se,le]),Pe=(0,l.VK)((()=>(0,w.dU)()),[]);(0,n.useEffect)((()=>{function e(e){return!!(e instanceof Element&&(e.closest(`.${oo}`)||e.closest(`.${k.YPt}`)||e.closest(`.${k.p4m}`)||e.closest(`.${k.zov}`)))}function t(t){Pe||!e(t.target)&&e(t.relatedTarget)&&t.relatedTarget instanceof HTMLElement&&t.relatedTarget.focus()}function o(t){e(t.target)||("click"!==t.type&&"contextmenu"!==t.type||_e(),Pe||(t.preventDefault(),t.stopPropagation()))}if(!O)return window.addEventListener("focus",t,!0),window.addEventListener("click",o,!0),window.addEventListener("contextmenu",o,!0),window.addEventListener("mousedown",o,!0),window.addEventListener("mouseup",o,!0),window.addEventListener("mouseover",o,!0),window.addEventListener("mouseout",o,!0),window.addEventListener("mouseenter",o,!0),window.addEventListener("mouseleave",o,!0),window.addEventListener("mousemove",o,!0),()=>{window.removeEventListener("focus",t,!0),window.removeEventListener("click",o,!0),window.removeEventListener("contextmenu",o,!0),window.removeEventListener("mousedown",o,!0),window.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseover",o,!0),window.removeEventListener("mouseout",o,!0),window.removeEventListener("mouseenter",o,!0),window.removeEventListener("mouseleave",o,!0),window.removeEventListener("mousemove",o,!0)}}),[_e,O,Pe]);const je=(0,n.useCallback)((e=>{W(N),B(""),_.improveCompletion(o,e)}),[o,N,B]),Fe=(0,n.useCallback)((()=>{switch(t.stage){case"initialPrompt":(0,F.sj)(),W(N),B(""),(0,y.Hh)({environment:o,inputValue:N,from:t.from,mode:q});break;case"initialPromptForAIBlock":v.HCf(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,F.fz)(),W(N),B(""),(0,y.F0)({environment:o,inputValue:N,store:t.store});break;case"results":je({type:"helpMeEdit",prompt:N});break;default:(0,f.t1)(t)}}),[N,q,t,o,je,B]);(0,n.useEffect)((()=>{E&&(Z(!1),Fe())}),[E,Fe]);let Le="insert";"results"===t.stage&&"cursor"===t.context.type?Le="accept":ae&&(Le="replace");const Te=(0,l.VK)((()=>t?Zt({environment:o,intl:L,filter:N,state:t,from:t.from,favoriteEditingState:z,onUpdatePromptState:X,onImprove:je,context:Y,completionResultInfo:{...de,onRetry:Ce,onSubmit:Fe,onCancel:be,defaultAction:Le}}):[]),[z,Y,o,X,Fe,je,N,L,t,de,Ce,be,Le]),Ne=Te.length>0,Be=(0,n.useMemo)((()=>new b.Z),[]);(0,n.useEffect)((()=>{Be.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[N,Be]);const Ee=(0,l.VK)((()=>o.device.isPhone),[o]),Ze=(0,c.yK)((e=>({mainPopup:{borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,overflow:"hidden",isolation:"isolate"},menuPopup:{marginTop:4,marginBottom:4,borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,width:Ee?"100%":320,overflow:"hidden",isolation:"isolate"}})),[Ee]),Oe=(0,n.useRef)(null);let Re;"active"===z.type?Re=(0,R.jsx)("div",{style:Ze.menuPopup,ref:Oe,className:oo,children:(0,R.jsx)(ve,{sessionId:t.sessionId,state:z,context:Y})}):Ne&&(Re=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:Ze.menuPopup,ref:Oe,className:oo,children:(0,R.jsx)(Vt,{sections:Te,onCloseParentMenu:Ae,context:Y,menuListStore:Be})}),(0,R.jsx)(j.gl,{originRef:Oe,openState:t,isInputEmpty:!N})]}));const De=(0,n.useRef)(null),Ue=function(e){const{openState:t,undoRevision:o,redoRevision:i}=e,s=(0,a.O7)(),r=(0,g.useIntl)(),c=(0,l.VK)((()=>J.default.checkGate("ai_multi_level_undo")),[]),d=(0,n.useCallback)((()=>{o(),Me(s,"undo")}),[s,o]),u=(0,n.useCallback)((()=>{i(),Me(s,"redo")}),[s,i]);if("results"!==t.stage||!c)return Ie;const p=t.revisions.length,m=t.futureRevisions.length,f=p+m,y=p;return 1===f?Ie:{onUndo:p>1?d:void 0,onRedo:m>0?u:void 0,historyLabel:r.formatMessage(ke.historyLabel,{currentRevision:y.toString(),totalRevisions:f.toString()})}}({openState:t,undoRevision:ge,redoRevision:ye});return Pe?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(x.Z,{capture:!0,onEsc:_e}),Re]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(x.Z,{capture:!0,onEsc:_e}),Ee&&Re,(0,R.jsx)(j.RD,{originRef:De,openState:t}),(0,R.jsx)("div",{ref:De,className:oo,style:Ze.mainPopup,children:(0,R.jsx)(gt,{state:t,onDismiss:_e,onCompletionRetry:Ce,onCompletionStop:xe,query:N,setQuery:B,onSubmit:Fe,submitOnEnter:!Ne&&!O,inputRef:$,temporaryListStore:re,favoriteEditingState:z,...Ue})}),!Ee&&Re,(0,R.jsx)(D,{open:O,onConfirmExit:be,onCancelExit:we})]})}var so=o(63143);function ro(e){window.__c={n:"AiEligibilityUpdater"};const t=(0,a.O7)(),o=(0,l.VK)((()=>"completionPopup"===M.default.state.type),[]),i=(0,u.D9)(o)&&!o,s=o?30*so.C0:30*so.hM,r=(0,l.VK)((()=>{var e;return null===(e=G.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,n.useEffect)((()=>{async function e(){r&&await _.updateAiEligibility(t,r)}const o=setInterval((()=>{e()}),s);return i||e(),()=>{clearInterval(o)}}),[t,r,s,i]),null}},16859:(e,t,o)=>{o.d(t,{d:()=>j});var n=o(67294),i=o(480),s=o(5366),r=o(73063),a=o(53437),l=o(26388),c=o(935),d=o(24405),u=o(64275),p=o(81570),m=o(83065),f=o(82990),g=o(42922),y=o(64921),v=o(60458),h=o(1743),C=o(74194),x=o(16354),k=o(64369),w=o(42402),A=o(43250),S=o(18514),I=o(85893);function M(e){const{checked:t,onChange:o}=e;return(0,I.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,I.jsx)(v.Z,{checked:t,onClick:o,size:14}),(0,I.jsx)("div",{onClick:o,children:(0,I.jsx)(k.Z,{style:{cursor:"pointer"},isSmall:!0,children:(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"})})})]})}function b(){window.__c={n:"OptInLearnMore"};const e=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"row"},giftIcon:{width:16,height:16,fill:e.lightIconColor},message:{marginLeft:9,color:e.mediumTextColor,fontSize:12}})),[]);return(0,I.jsxs)("div",{style:e.container,children:[(0,p.T)(e.giftIcon),(0,I.jsx)("div",{style:e.message,children:(0,I.jsx)(s.FormattedMessage,{defaultMessage:"You’re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>(0,I.jsx)(w.Z,{external:!0,href:(0,S.UY)("ai.dataSharingTerms"),children:e})}})})]})}function _(e){window.__c={n:"ShareDataPopup"};const{onSubmit:t}=e,o=(0,d.yK)((e=>({container:{width:300,display:"flex",flexDirection:"column",alignItems:"center",padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},giftIcon:{width:24,height:24,fill:e.lightIconColor},terms:{color:e.mediumTextColor,textAlign:"center",fontSize:13},shareButton:{width:"100%",marginTop:17,paddingTop:7,paddingBottom:7},notNowButton:{color:e.mediumTextColor,fontSize:14,marginTop:15},title:{textAlign:"center",marginTop:9,marginBottom:8,fontWeight:f.Z.fontWeight.semibold}})),[]);return(0,I.jsxs)("div",{style:o.container,children:[(0,I.jsx)("div",{style:o.closeButtonContainer,children:(0,I.jsx)(y.Z,{onClick:()=>{t({optIn:!1})},style:o.closeButton,hoveredStyle:o.closeButtonHover,children:(0,u.D)(o.closeButtonIcon)})}),(0,p.T)(o.giftIcon),(0,I.jsx)("div",{style:o.title,children:(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})}),(0,I.jsx)("div",{style:o.terms,children:(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:(0,I.jsx)("br",{}),aiTerms:e=>(0,I.jsx)(w.Z,{external:!0,href:(0,S.UY)("ai.dataSharingTerms"),children:e})}})}),(0,I.jsx)(g.Z,{style:o.shareButton,onClick:()=>{t({optIn:!0})},children:(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})}),(0,I.jsx)(x.Z,{style:o.notNowButton,onClick:()=>{t({optIn:!1})},children:(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Not now",id:"completions.ShareDataPopup.notNowButton"})})]})}function P(e){window.__c={n:"FeedbackPopup"};const{state:t,onUpdate:o,onSubmit:a,onCancel:l,userOptIn:c}=e,d=(0,n.useCallback)((()=>{o({...t,shareWithNotion:!t.shareWithNotion})}),[t,o]),u=(0,n.useCallback)((()=>{a(t)}),[a,t]),p=(0,n.useCallback)((e=>{o({...t,userContent:e.target.value})}),[o,t]),f=(0,s.useIntl)(),g=(0,i.O7)(),y=!c;return(0,I.jsx)("div",{style:{padding:14,...g.device.isMobile?{width:"100%"}:{minWidth:400}},className:A.YOJ,children:(0,I.jsxs)(h.Z,{capture:!0,children:[(0,I.jsx)(C.Z,{value:t.userContent,onChange:p,onSubmit:e=>{e.stopPropagation(),u()},onCancel:l,focusInitial:!0,placeholder:f.formatMessage({id:"completions.FeedbackPopup.userCommentPlaceholder",defaultMessage:"How could the output be improved? (optional)"})}),(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10},children:[y?(0,I.jsx)(M,{checked:t.shareWithNotion,onChange:d}):(0,I.jsx)(b,{}),(0,I.jsx)(r.Z,{icon:m._,onClick:u,ariaLabel:f.formatMessage({id:"completions.FeedbackPopup.submitButtonLabel",defaultMessage:"Submit feedback"}),isBlue:!0,iconStyle:{height:24,width:24},style:{height:20,width:20}})]})]})})}function j(e){window.__c={n:"FeedbackButtonWithPopup"};const{type:t,ariaLabel:o,onClick:d,feedbackState:u,onDismiss:p,onSubmit:m,onUpdate:f,showShareDataPopup:g,onDataShareSubmit:y,userOptIn:v,iconButtonStyles:h}=e,C=(0,i.O7)(),x=t===(null==u?void 0:u.type),k=(0,c.L)(t,x),w=(0,n.useCallback)((()=>d(t)),[d,t]),A=(0,I.jsx)(l.Z,{renderTooltip:()=>(0,I.jsx)("div",{children:(0,I.jsx)(s.FormattedMessage,{defaultMessage:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})}),placement:l.Z.Placement.Bottom,render:e=>(0,I.jsx)(r.Z,{onClick:w,icon:k,ariaLabel:o,style:{...h},...e})});return(0,I.jsx)(a.ZP,{origin:A,open:(null==u?void 0:u.type)===t,popupType:C.device.isMobile?a.kQ.SlideUp:a.kQ.Popup,onDismiss:p,render:()=>u?g?(0,I.jsx)(_,{onCancel:p,onSubmit:y}):(0,I.jsx)(P,{state:u,onSubmit:m,onUpdate:f,onCancel:p,userOptIn:v}):null})}},935:(e,t,o)=>{o.d(t,{L:()=>k,u:()=>w});var n=o(67294),i=o(480),s=o(86628),r=o(33676),a=o(97022),l=o(39986),c=o(10498),d=o(5366),u=o(50906),p=o(64964),m=o(39699),f=o(37181),g=o(80444),y=o(77080),v=o(35057),h=o(84254),C=o(16859),x=o(85893);function k(e,t){switch(e){case"thumbsup":return t?c.w:l.P;case"thumbsdown":return t?a.E:r.A}}function w(e){window.__c={n:"FeedbackButtons"};const{revision:t}=e,o=(0,d.useIntl)(),r=(0,i.O7)(),[a,l]=(0,n.useState)(void 0),[c,k]=(0,n.useState)(!1),w=(0,n.useRef)(null),A=(0,s.VK)((()=>y.default.checkGate("ai_data_sharing")),[]),S=(0,s.VK)((()=>g.default.state.currentUserSettingsStore),[]),I=(0,s.VK)((()=>{var e;const t=null==S||null===(e=S.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,o=!(0,v.mq)();return!Boolean(t)&&o}),[S]),M=(0,s.VK)((()=>{var e;return(null==S||null===(e=S.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??false}),[S]),b=(0,n.useCallback)((()=>{p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",defaultMessage:"Thanks for submitting feedback!"})})}),[o]),_=(0,n.useCallback)((e=>{w.current=document.activeElement,l((t=>({userContent:"",shareWithNotion:true,...t,type:e})))}),[]),P=(0,n.useCallback)((e=>{e.shareWithNotion&&I&&A?k(!0):(b(),l(void 0)),h.submitFeedbackForRevision({...e,environment:r,revision:t,userOptIn:M})}),[t,r,M,I,A,b]),j=(0,n.useCallback)((e=>{e&&e.stopPropagation&&e.stopPropagation(),l(void 0),w.current&&w.current instanceof HTMLElement&&w.current.focus()}),[]),F=(0,n.useCallback)((e=>{const{optIn:t}=e;S&&(m.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:r,userId:S.id,perform:e=>{f.d2({userSettingsStore:S,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),u.bd0(r,{user_opt_in:t}),t?p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.dataShareThanks",defaultMessage:"Thank you for your help making Notion better!"})}):b(),k(!1),l(void 0))}),[o,S,r,b]);return t.hasFeedback&&!c?null:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C.d,{type:"thumbsup",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsUp",defaultMessage:"Submit positive feedback"}),onClick:_,feedbackState:a,onDismiss:j,onSubmit:P,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:F,userOptIn:M}),(0,x.jsx)(C.d,{type:"thumbsdown",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsDown",defaultMessage:"Submit negative feedback"}),onClick:_,feedbackState:a,onDismiss:j,onSubmit:P,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:F,userOptIn:M})]})}},81598:(e,t,o)=>{o.d(t,{Q:()=>r,Zl:()=>s,eC:()=>a,qS:()=>i,yX:()=>l});var n=o(77907);const i=(0,n.lazyComponent)(n.deps.assistant,(e=>e.AssistantChatStep)),s=(0,n.lazyComponent)(n.deps.assistant,(e=>e.AssistantLabelerBar)),r=(0,n.lazyComponent)(n.deps.assistant,(e=>e.AssistantOriginElement)),a=(0,n.lazyComponent)(n.deps.assistant,(e=>e.AssistantMenuPopup)),l=(0,n.lazyComponent)(n.deps.assistant,(e=>e.SearchAssistantPane))},95083:(e,t,o)=>{o.d(t,{D:()=>i,d:()=>n});const n={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0},i={...n}},79576:(e,t,o)=>{o.d(t,{W:()=>r});var n=o(49085),i=o(4615);class s extends n.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:n,sessionIdForAnalytics:s}=e,r=n[0].getParentCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),a=s||(0,i.ZP)();return this.setState({type:"filling",propertySchema:o,collectionId:r,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const r=new s},43604:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(49085).default.createValue({open:!1})},80671:(e,t,o)=>{o.d(t,{Cl:()=>l,Kj:()=>c,k2:()=>r,v5:()=>a});var n=o(4615),i=o(896),s=o(63423);function r(){s.Z.setState({open:!0,stage:"limit_reached",addOnUpgradeId:(0,n.ZP)(),tax:0})}function a(){s.Z.setState({open:!1})}function l(e){const t=s.Z.state;t.open&&s.Z.setState({...t,stage:"confirm_purchase",coupon:e&&!(0,i.$v)(e)?e:void 0})}function c(){s.Z.setState({open:!0,stage:"cancel_plan",addOnUpgradeId:(0,n.ZP)(),tax:0})}},39186:(e,t,o)=>{o.d(t,{G:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("backward",{viewBox:"0 0 24 24",svg:(0,i.jsx)("polygon",{points:"23,11 4.801,11 11.4,4.4 10,3 1,12 10,21 11.4,19.6 4.801,13 23,13 "})})},2585:(e,t,o)=>{o.d(t,{f:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},13148:(e,t,o)=>{o.d(t,{U:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},64878:(e,t,o)=>{o.d(t,{h:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("dot",{viewBox:"0 0 5 4",svg:(0,i.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},50780:(e,t,o)=>{o.d(t,{E:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("editPropertyType",{viewBox:"0 0 16 16 ",svg:(0,i.jsx)("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},81570:(e,t,o)=>{o.d(t,{T:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("giftOutline",{viewBox:"0 0 32 34",svg:(0,i.jsx)("path",{d:"M7.781 33.219h16.422c2.938 0 4.563-1.547 4.563-4.5v-9.594h.109c1.375-.297 2.14-1.406 2.14-3v-4.11c0-1.906-1.062-3.109-2.968-3.109H24.89c.828-.828 1.312-1.953 1.312-3.25 0-3.031-2.39-5.187-5.422-5.187-2.187 0-4 1.203-4.797 3.297C15.187 1.672 13.39.469 11.187.469c-3.016 0-5.422 2.156-5.422 5.187 0 1.297.484 2.422 1.328 3.25H3.937C2.11 8.906.97 10.11.97 12.016v4.109c0 1.594.75 2.703 2.125 3h.11v9.594c0 2.953 1.624 4.5 4.577 4.5zm6.922-24.313h-2.437c-2.454 0-3.891-1.39-3.891-3.11 0-1.718 1.25-2.718 2.969-2.718 1.86 0 3.36 1.406 3.36 3.719v2.11zm2.563 0v-2.11c0-2.312 1.5-3.718 3.359-3.718 1.719 0 2.969 1 2.969 2.719 0 1.719-1.422 3.11-3.89 3.11h-2.438zm-2.672 7.969H4.578c-.781 0-1.094-.328-1.094-1.11V12.36c0-.78.313-1.093 1.094-1.093h10.016v5.609zm2.781 0v-5.61h10.047c.781 0 1.078.313 1.078 1.094v3.407c0 .78-.297 1.109-1.078 1.109H17.375zm-2.781 14H7.75c-1.297 0-2.031-.734-2.031-2.031v-9.61h8.875v11.641zm2.781 0v-11.64h8.875v9.609c0 1.297-.734 2.031-2.031 2.031h-6.844z"})})},1230:(e,t,o)=>{o.d(t,{H:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("insertDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.55548 13.0343H14.2085C14.5315 13.0343 14.7951 13.2913 14.7951 13.6142C14.7951 13.9372 14.5315 14.1942 14.2085 14.1942H9.55548C9.23254 14.1942 8.9755 13.9372 8.9755 13.6142C8.9755 13.2913 9.23254 13.0343 9.55548 13.0343ZM1.21167 9.67959C1.21167 9.09961 1.52802 8.74371 2.0421 8.74371C2.55617 8.74371 2.87911 9.11279 2.87911 9.65982V10.7868C2.87911 10.945 2.96479 11.0373 3.12956 11.0373H4.70473V10.365C4.70473 9.818 5.26494 9.60709 5.68675 9.94322L7.56509 11.4525C7.84849 11.6766 7.84849 12.0786 7.56509 12.2961L5.68675 13.812C5.25176 14.1679 4.70473 13.9569 4.70473 13.3836V12.7047H2.93184C1.89051 12.7047 1.21167 12.0984 1.21167 11.057V9.67959ZM9.55548 9.58073H14.2085C14.5315 9.58073 14.7951 9.83777 14.7951 10.1607C14.7951 10.4837 14.5315 10.7407 14.2085 10.7407H9.55548C9.23254 10.7407 8.9755 10.4837 8.9755 10.1607C8.9755 9.83777 9.23254 9.58073 9.55548 9.58073ZM1.78506 6.12721H14.2085C14.5315 6.12721 14.7951 6.38425 14.7951 6.70719C14.7951 7.03014 14.5315 7.28717 14.2085 7.28717H1.78506C1.46211 7.28717 1.20508 7.03014 1.20508 6.70719C1.20508 6.38425 1.46211 6.12721 1.78506 6.12721ZM1.78506 2.68028H14.2085C14.5315 2.68028 14.7951 2.93073 14.7951 3.25367C14.7951 3.5832 14.5315 3.83365 14.2085 3.83365H1.78506C1.46211 3.83365 1.20508 3.5832 1.20508 3.25367C1.20508 2.93073 1.46211 2.68028 1.78506 2.68028Z"})})},38715:(e,t,o)=>{o.d(t,{N:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("save",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M7.99316 10.8877C8.16406 10.8877 8.31445 10.833 8.47168 10.6758L10.7686 8.46094C10.8848 8.34473 10.9463 8.22168 10.9463 8.05762C10.9463 7.74316 10.6934 7.51074 10.3857 7.51074C10.2285 7.51074 10.0713 7.5791 9.96191 7.70215L8.99805 8.7207L8.56055 9.21973L8.62891 8.20801V1.11914C8.62891 0.78418 8.3418 0.49707 7.99316 0.49707C7.65137 0.49707 7.36426 0.78418 7.36426 1.11914V8.20801L7.43262 9.22656L6.98828 8.7207L6.03125 7.70215C5.92188 7.5791 5.75781 7.51074 5.60059 7.51074C5.29297 7.51074 5.04004 7.74316 5.04004 8.05762C5.04004 8.22168 5.1084 8.34473 5.22461 8.46094L7.52148 10.6758C7.67871 10.833 7.8291 10.8877 7.99316 10.8877ZM4.0625 15.3174H11.9307C13.4072 15.3174 14.1729 14.5586 14.1729 13.1025V6.36914C14.1729 4.91309 13.4072 4.1543 11.9307 4.1543H10.0781V5.49414H11.8486C12.4775 5.49414 12.833 5.82227 12.833 6.48535V12.9863C12.833 13.6494 12.4775 13.9775 11.8486 13.9775H4.14453C3.50879 13.9775 3.16016 13.6494 3.16016 12.9863V6.48535C3.16016 5.82227 3.50879 5.49414 4.14453 5.49414H5.92871V4.1543H4.0625C2.58594 4.1543 1.82031 4.91309 1.82031 6.36914V13.1025C1.82031 14.5586 2.58594 15.3174 4.0625 15.3174Z"})})})},83065:(e,t,o)=>{o.d(t,{_:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("sendArrow",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},91427:(e,t,o)=>{o.d(t,{e:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("star",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})},33676:(e,t,o)=>{o.d(t,{A:()=>r});o(67294);var n=o(45238),i=o(39986),s=o(85893);const r=(0,n.I)("thumbDown",{viewBox:"0 0 18 19",svg:(0,s.jsx)("g",{transform:"rotate(180 9 9.5)",children:i.f})})},97022:(e,t,o)=>{o.d(t,{E:()=>r});o(67294);var n=o(45238),i=o(10498),s=o(85893);const r=(0,n.I)("thumbDownFilled",{viewBox:"0 0 16 18",svg:(0,s.jsx)("g",{transform:"rotate(180 8 9)",children:i.O})})},39986:(e,t,o)=>{o.d(t,{P:()=>s,f:()=>i});o(67294);var n=o(45238);const i=(0,o(85893).jsx)("path",{d:"M0.539062 12.3125C0.539062 15.0547 2.29688 17.3125 4.54688 17.3125H7.11719C8.17188 17.8516 9.42188 18.1641 10.8047 18.1641H11.8906C12.9062 18.1641 13.7734 18.1016 14.3359 17.9609C15.4766 17.6797 16.1953 16.8672 16.1953 15.8516C16.1953 15.6641 16.1719 15.5 16.1172 15.3281C16.6562 14.9141 16.9609 14.2969 16.9609 13.6328C16.9609 13.3203 16.8984 13.0078 16.7891 12.7578C17.1484 12.375 17.3594 11.8203 17.3594 11.25C17.3594 10.875 17.2656 10.4922 17.1094 10.2031C17.3281 9.86719 17.4531 9.42188 17.4531 8.9375C17.4531 7.69531 16.5078 6.73438 15.2734 6.73438H12.3672C12.1953 6.73438 12.0859 6.65625 12.0938 6.50781C12.1328 5.69531 13.4062 3.75781 13.4062 2.17188C13.4062 1.01562 12.5859 0.171875 11.4688 0.171875C10.6484 0.171875 10.0859 0.59375 9.55469 1.61719C8.58594 3.48438 7.40625 5.125 5.65625 7.28125H4.25C2.14844 7.28125 0.539062 9.52344 0.539062 12.3125ZM5.375 12.25C5.375 10.5938 5.75 9.53125 6.80469 8.11719C7.99219 6.53125 9.625 4.63281 10.8125 2.27344C11.0625 1.77344 11.2344 1.64844 11.4844 1.64844C11.7891 1.64844 11.9844 1.86719 11.9844 2.25C11.9844 3.42188 10.6641 5.35156 10.6641 6.61719C10.6641 7.55469 11.4219 8.15625 12.4375 8.15625H15.2422C15.7031 8.15625 16.0391 8.5 16.0391 8.95312C16.0391 9.28125 15.9297 9.5 15.6562 9.76562C15.4609 9.96875 15.4375 10.25 15.6094 10.4453C15.8359 10.7734 15.9375 10.9844 15.9375 11.25C15.9375 11.5781 15.7812 11.8516 15.4609 12.0938C15.2031 12.2812 15.1094 12.5859 15.2656 12.8828C15.4297 13.2109 15.5156 13.3672 15.5156 13.6172C15.5156 14 15.2734 14.2891 14.7812 14.5469C14.5312 14.6875 14.4609 14.9531 14.5703 15.1875C14.7344 15.5938 14.7578 15.6641 14.7578 15.8438C14.7578 16.1797 14.5078 16.4531 13.9766 16.5859C13.5156 16.7031 12.7812 16.75 11.8203 16.7422L10.8125 16.7344C7.57031 16.7031 5.375 14.8828 5.375 12.25ZM1.9375 12.3125C1.9375 10.3281 2.96094 8.73438 4.14062 8.6875C4.34375 8.6875 4.55469 8.6875 4.75781 8.6875C4.20312 9.76562 3.95312 10.8984 3.95312 12.25C3.95312 13.6875 4.46094 14.9531 5.375 15.9453C5.07812 15.9453 4.76562 15.9375 4.46875 15.9375C3.10156 15.8906 1.9375 14.2812 1.9375 12.3125Z"}),s=(0,n.I)("thumbUp",{viewBox:"0 0 18 19",svg:i})},10498:(e,t,o)=>{o.d(t,{O:()=>i,w:()=>s});o(67294);var n=o(45238);const i=(0,o(85893).jsx)("path",{d:"M4 12.1875C3.99219 15.1641 6.34375 17.4297 10.0859 17.4375H11.1719C12.1953 17.4375 12.9766 17.3594 13.4297 17.2422C14.1016 17.0781 14.7031 16.6562 14.7031 15.8828C14.7031 15.5859 14.625 15.3594 14.5312 15.1875C14.4766 15.1016 14.4922 15.0234 14.5703 14.9922C15.0859 14.7578 15.4766 14.2812 15.4766 13.6562C15.4766 13.2969 15.375 12.9766 15.2031 12.75C15.125 12.6406 15.1406 12.5469 15.2656 12.4766C15.625 12.25 15.875 11.7891 15.875 11.2656C15.875 10.8828 15.7578 10.4844 15.5547 10.2812C15.4453 10.1797 15.4609 10.1094 15.5781 10.0156C15.8281 9.78906 15.9844 9.41406 15.9844 8.96094C15.9844 8.15625 15.3516 7.5 14.5234 7.5H11.7031C11.0234 7.5 10.5781 7.15625 10.5781 6.60156C10.5781 5.54688 11.9141 3.57812 11.9141 2.14844C11.9141 1.375 11.4219 0.90625 10.75 0.90625C10.1641 0.90625 9.85938 1.28906 9.53125 1.9375C8.33594 4.24219 6.75781 6.11719 5.54688 7.72656C4.49219 9.11719 4.00781 10.3125 4 12.1875ZM0.015625 12.25C0.015625 14.6719 1.52344 16.6719 3.53125 16.6719H4.89062C3.47656 15.5938 2.85156 13.9922 2.86719 12.1719C2.875 10.2031 3.57812 8.77344 4.32031 7.79688H3.23438C1.41406 7.79688 0.015625 9.75 0.015625 12.25Z"}),s=(0,n.I)("thumbUpFilled",{viewBox:"0 0 16 18",svg:i})},54434:(e,t,o)=>{o.d(t,{F:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("upLeftArrow",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.8457 10.5869C2.8457 11.0312 3.19434 11.373 3.59766 11.373C4.00098 11.373 4.3291 11.0176 4.3291 10.6074V8.05762L4.21973 5.22754L5.32031 6.47168L11.8418 12.9932C11.999 13.1504 12.1904 13.2256 12.3818 13.2256C12.7852 13.2256 13.1543 12.8564 13.1543 12.46C13.1543 12.2686 13.0654 12.0771 12.9082 11.9199L6.40039 5.39844L5.15625 4.30469L8.10254 4.40039H10.5361C10.9463 4.40039 11.2881 4.07227 11.2881 3.67578C11.2881 3.27246 10.9736 2.93066 10.5156 2.93066H3.64551C3.16016 2.93066 2.85254 3.25195 2.85254 3.72363L2.8457 10.5869Z"})})},40591:e=>{e.exports=function(e,t,o){var n=(o=o||{}).marker||":",i=n.charCodeAt(0),s=n.length,r=o.validate||function(e){return e.trim().split(" ",2)[0]===t},a=o.render||function(e,o,n,i,s){return 1===e[o].nesting&&e[o].attrJoin("class",t),s.renderToken(e,o,n,i,s)};e.block.ruler.before("fence","container_"+t,(function(e,o,a,l){var c,d,u,p,m,f,g,y,v=!1,h=e.bMarks[o]+e.tShift[o],C=e.eMarks[o];if(i!==e.src.charCodeAt(h))return!1;for(c=h+1;c<=C&&n[(c-h)%s]===e.src[c];c++);if((u=Math.floor((c-h)/s))<3)return!1;if(c-=(c-h)%s,p=e.src.slice(h,c),m=e.src.slice(c,C),!r(m,p))return!1;if(l)return!0;for(d=o;!(++d>=a)&&!((h=e.bMarks[d]+e.tShift[d])<(C=e.eMarks[d])&&e.sCount[d]<e.blkIndent);)if(i===e.src.charCodeAt(h)&&!(e.sCount[d]-e.blkIndent>=4)){for(c=h+1;c<=C&&n[(c-h)%s]===e.src[c];c++);if(!(Math.floor((c-h)/s)<u||(c-=(c-h)%s,(c=e.skipSpaces(c))<C))){v=!0;break}}return g=e.parentType,y=e.lineMax,e.parentType="container",e.lineMax=d,(f=e.push("container_"+t+"_open","div",1)).markup=p,f.block=!0,f.info=m,f.map=[o,d],e.md.block.tokenize(e,o+1,d),(f=e.push("container_"+t+"_close","div",-1)).markup=e.src.slice(h,c),f.block=!0,e.parentType=g,e.lineMax=y,e.line=d+(v?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules["container_"+t+"_open"]=a,e.renderer.rules["container_"+t+"_close"]=a}}}]);