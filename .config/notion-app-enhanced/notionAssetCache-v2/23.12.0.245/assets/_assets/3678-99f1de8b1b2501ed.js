"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3678],{65544:(e,a,t)=>{t.d(a,{SP:()=>v,W_:()=>g,l_:()=>m,nf:()=>b});var n=t(19234),r=t(31919),s=t(47425),i=t(27242),l=t(78291),o=t(88893),u=t(63423),d=t(62142),c=t(33493),p=t(25692),f=t(54642);async function g(e){const a=i.Z.state,t=l.default.state.data;if(!a.open||!t)return;const r=a.temporaryAddress;if(!(0,n.A)(r))return;i.Z.update((e=>({...e,calculatingTax:!0})));const{planAmount:s,promoInfo:u,accountBalance:d}=(0,o.uN)({promo:a.appliedPromo,currencyCode:c.Z.selectedCurrencyCode,data:t,addOnFeature:a.addOnFeature,onlyShowAddOn:a.onlyShowAddOn,subscriptionTier:a.subscriptionTier,taxAmount:a.taxAmount,calculatingTax:a.calculatingTax,billingInterval:a.temporaryBillingInterval??"year",coupon:a.coupon}),p=Math.max(0,s-u.amount+d),g=await f.calculateTax(e,{address:r,price:p,vatId:a.vatApplicable?a.temporaryVatCode:void 0,customerId:"subscribed_admin"===t.type?t.customerData.stripe.customerId:void 0});if("failed"===g.type)i.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=g.data;e.valid?i.Z.update((a=>({...a,taxAmount:e.taxAmount,calculatingTax:!1,taxCalculationError:void 0}))):i.Z.update((a=>({...a,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function m(e){var a;const t=d.Z.state,s=l.default.state.data;if(!t.open||!s)return;const i=t.temporaryAddress;if(!(0,n.A)(i))return;d.Z.update((e=>({...e,calculatingTax:!0})));const o=(null===(a=t.totalUpgradeCost)||void 0===a?void 0:a.amount)||0,u=await f.calculateTax(e,{address:i,price:o,vatId:t.vatApplicable?t.temporaryVatCode:void 0,customerId:"subscribed_admin"===s.type?s.customerData.stripe.customerId:void 0});if("failed"===u.type)d.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=u.data;e.valid?d.Z.update((a=>({...a,taxAmount:r.n.fromValue({amount:e.taxAmount,currencyCode:c.Z.selectedCurrencyCode}),calculatingTax:!1,taxCalculationError:void 0}))):d.Z.update((a=>({...a,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function b(e){const{environment:a,priceForTaxCalculation:t,address:n,customerId:r,vatId:s}=e,i=u.Z.state,l=await f.calculateTax(a,{address:n,customerId:r,vatId:s,price:t});if("failed"===l.type);else{const e=l.data;e.valid&&i.open&&u.Z.update((a=>({...a,tax:Math.max(0,e.taxAmount)})))}}async function v(e){var a;const t=p.Z.state,r=l.default.state.data;if(!t.open||!r)return;if("subscribed_admin"!==r.type&&"unsubscribed_admin"!==r.type)return;const i=null===(a=r.customerData)||void 0===a?void 0:a.stripe;if(!i)return;const u=i.address;if(!u||!(0,n.A)(u))return;p.Z.update((e=>({...e,calculatingTax:!0})));const d=t.temporarySubscriptionTier??t.subscriptionTier,g=(0,s.QM)(d)&&t.addOnFeature?"month":"year",m=t.temporaryBillingInterval??t.billingInterval??g,b=!(0,s.QM)(d)&&Boolean(t.addOnFeature),{payAmount:v}=(0,o.uN)({promo:void 0,currencyCode:c.Z.selectedCurrencyCode,data:r,addOnFeature:t.addOnFeature,onlyShowAddOn:b,subscriptionTier:d,taxAmount:t.taxAmount,calculatingTax:t.calculatingTax,billingInterval:m,coupon:t.coupon}),h=await f.calculateTax(e,{address:u,price:v.amount,vatId:i.vatId,customerId:i.customerId});if("failed"===h.type)return void p.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1,taxCalculationError:h.error})));const y=h.data;y.valid?p.Z.update((e=>({...e,taxAmount:y.taxAmount,calculatingTax:!1}))):p.Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})))}},1865:(e,a,t)=>{t.d(a,{y:()=>A});t(67294);var n=t(94919),r=t(47425),s=t(97880),i=t(5366),l=t(47307),o=t(33929),u=t(52533),d=t(80444),c=t(92083),p=t(78291),f=t(22616),g=t(34583),m=t(64891),b=t(70060),v=t(88893),h=t(35057),y=t(33493),M=t(39343),P=t(50906),w=t(85893);const A=async function(e,a){var t;function A(){a.dontOpenPlansOnCancel||c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0})}if(P.sA6(e,{from:a.from,for_subscription_tier:a.for,addOnFeature:a.addOnFeature}),!a.addOnFeature&&(0,r.QM)(a.for))return;const x=(0,u.S$)({environment:e})&&"personal"===a.for;if(e.device.isMobileNative){if("ai"===a.addOnFeature){const a=(0,u.Y2)({environment:e})?(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void l.showErrorMessage(a)}if(!x)return}const I=d.default.state.currentSpaceStore;if(!I)return;if(!I.canAdmin())return;await g.bi(e);const S=p.default.state.data;if(!S)return;if("unsubscribed_admin"!==S.type&&"subscribed_admin"!==S.type)return void A();if(v.Q6(S)){const e=(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void l.showErrorMessage(e)}if(x)return void(e.mobileNative&&I.id&&e.mobileNative.openUpgradeModal(I.id));if("revenueCat"===(null===(t=S.customerData)||void 0===t?void 0:t.activeSubscriptionPlatform)){const e=(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void l.showErrorMessage(e)}const T=v.XX(S);if(a.addOnFeature&&(0,M.F)(T)){const e=(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:a.addOnFeature}});l.showErrorMessage(e)}else if(T&&v.MM(S)){if(a.addOnFeature)return void m.af({environment:e,from:a.from,view:"add_ons",addOnFeature:a.addOnFeature,billingInterval:T.interval,pageSection:a.pageSection});f.Z({environment:e,spaceId:I.id});const{status:t,prices:u}=y.Z.state;if("ready"!==t)return;const{interval:d}=T,c=u.find((e=>e.product===a.for&&e.billingInterval===d&&e.currencyCode===T.currencyCode));if(void 0===c)return;const p=function(e){let{price:a,isSubscribed:t}=e;if(a.isAddOn())return null;const l=a.product;if((0,r.QM)(l)||(0,r.iJ)(l))return null;const u={tier:l,price:(0,w.jsx)(n.W,{cost:a.getMonthlyUnitCost(),trailingZeroDisplay:"stripIfInteger",intl:o.default.intl}),br:(0,w.jsx)("br",{}),isSubscribed:t};if((0,h.Aw)())switch(l){case"personal":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.personalMessage.fromSinglePlayerPlus",defaultMessage:"You are about to subscribe to Notion’s Personal Plan for {price} per member per month.{br}You will lose your current discounted price, and will be charged a prorated amount, minus any account balance.",values:u});case"plus":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.plusMessage.fromSinglePlayerPlus",defaultMessage:"You are about to subscribe to Notion’s Plus Plan with no member limit for {price} per member per month.{br}You will lose your current discounted price, and will be charged a prorated amount, minus any account balance.",values:u});case"business":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.businessMessage.fromSinglePlayerPlus",defaultMessage:"You are about to subscribe to Notion’s Business Plan for {price} per member per month.{br}You will lose your current discounted price, and will be charged a prorated amount, minus any account balance.",values:u});case"enterprise":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.enterpriseMessage.fromSinglePlayerPlus",defaultMessage:"You are about to subscribe to Notion’s Enterprise Plan for {price} per member per month.{br}You will lose your current discounted price, and will be charged a prorated amount, minus any account balance.",values:u});default:return(0,s.t1)(l)}switch(l){case"personal":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.personalMessage",defaultMessage:"You are about to subscribe to Notion’s Personal Plan for {price} per member per month.{br}{isSubscribed, select, true {You will be charged a prorated amount, minus any account balance.} other {}}",values:u});case"plus":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.plusMessage",defaultMessage:"You are about to subscribe to Notion’s Plus Plan for {price} per member per month.{br}{isSubscribed, select, true {You will be charged a prorated amount, minus any account balance.} other {}}",values:u});case"business":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.businessMessage",defaultMessage:"You are about to subscribe to Notion’s Business Plan for {price} per member per month.{br}{isSubscribed, select, true {You will be charged a prorated amount, minus any account balance.} other {}}",values:u});case"enterprise":return(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.enterpriseMessage",defaultMessage:"You are about to subscribe to Notion’s Enterprise Plan for {price} per member per month.{br}{isSubscribed, select, true {You will be charged a prorated amount, minus any account balance.} other {}}",values:u});default:return(0,s.t1)(l)}}({price:c,isSubscribed:void 0===T.canceledAt});if(!(await l.confirmUserAction({message:p,acceptLabel:(0,w.jsx)(i.FormattedMessage,{id:"upsellActions.confirmProration.acceptLabel",defaultMessage:"Upgrade to {plan, select, personal {Personal} team {Plus} plus {Plus} business {Business} other {Enterprise}}",values:{plan:a.for}})})))return void A();const b=null==c?void 0:c.externalId;await g.Mg({environment:e,spaceStore:I,plan:b,from:"upsell_modal"})}else{const t=(0,b.px)(e,a.for)?"ai_fifty_percent":void 0;g.I0(e,{subscriptionTier:a.for,from:a.from,addOnFeature:a.addOnFeature,coupon:t,isTrial:a.isTrial})}}},64891:(e,a,t)=>{t.d(a,{LZ:()=>T,Mg:()=>I,OT:()=>x,Zo:()=>C,af:()=>P,bX:()=>A,cM:()=>w,y5:()=>S});var n=t(4615),r=t(3791),s=t(97880),i=t(50906),l=t(54642),o=t(47307),u=t(92625),d=t(91376),c=t(64964),p=t(65544),f=t(80444),g=t(40670),m=t(35057),b=t(87598),v=t(33493),h=t(25692),y=t(22616),M=t(34583);function P(e){const{environment:a,from:t,view:r,temporarySubscriptionTier:s,temporaryBillingInterval:l,billingInterval:o,addOnFeature:u,pageSection:d,onSuccess:c}=e,f=(0,n.ZP)();i.YTO(a,{from:t,pageSection:d,view:r,modalId:f,currency_code:v.Z.selectedCurrencyCode}),h.Z.setState({open:!0,updateModalId:f,view:r,subscriptionTier:(0,m.zt)(),temporarySubscriptionTier:s,temporaryPaymentMethod:"credit_card",billingInterval:o,temporaryBillingInterval:l,calculatingTax:!1,isExpandedView:!1,addOnFeature:u,onSuccess:c}),p.SP(a)}function w(e){const a=h.Z.state;a.open&&(i.q7Y(e,{state:a}),h.Z.setState({open:!1}))}function A(e){const a=h.Z.state;a.open&&(i.y$F(e,{state:a}),h.Z.setState({...a,isExpandedView:!0}))}function x(e){const a=h.Z.state;a.open&&(i.k1K(e,{state:a}),h.Z.setState({...a,isExpandedView:!1}))}async function I(e,a){const t=h.Z.state;if(!t.open)return;i.ndA(e,{state:t});const{view:n,subscriptionTier:l,temporarySubscriptionTier:o,temporaryBillingInterval:u,billingInterval:d,addOnFeature:p,onSuccess:m}=t;let b;switch(n){case"add_ons":if(await async function(e){const{environment:a,addOnFeature:t,billingInterval:n,inAppOffer:s}=e,i=f.default.state.currentSpaceStore;if(!i||!t||!n)return;const l=(0,r.aG)({addOnFeature:t,addOnTier:"base",addOnBillingInterval:n,addOnPricingModel:"standard",addOnPricingVariant:"retail",currencyCode:v.Z.selectedCurrencyCode,isCancellation:!1});await M.Mg({environment:a,from:"space_settings-billing_tab",spaceStore:i,addOns:l,inAppOffer:s})}({environment:e,addOnFeature:p,billingInterval:d,inAppOffer:a}),w(e),p){const e=g.mV({type:"purchaseAddOn",addOnFeature:p});e&&c.oV(e)}break;case"billing_interval":if(!u)return;u!==d&&await async function(e){const{environment:a,tier:t,newInterval:n}=e,r=f.default.state.currentSpaceStore,{prices:s,selectedCurrencyCode:i}=v.Z,l=s.find((e=>e.product===t&&e.billingInterval===n&&e.currencyCode===i));if(!r||!l)return;await M.Mg({environment:a,from:"space_settings-billing_tab",spaceStore:r,plan:l.externalId})}({environment:e,tier:l,newInterval:u}),w(e),b=g.mV({type:"billingInterval",billingInterval:u}),b&&c.oV(b);break;case"plans":if(!o||!d)return;await async function(e){const{environment:a,tier:t,billingInterval:n}=e,r=f.default.state.currentSpaceStore,{prices:s,selectedCurrencyCode:i}=v.Z,l=s.find((e=>e.product===t&&e.billingInterval===n&&e.currencyCode===i));if(!r||!l)return;await M.Mg({environment:a,from:"space_settings-plans_tab",spaceStore:r,plan:l.externalId})}({environment:e,tier:o,billingInterval:d}),w(e),b=g.mV({type:"upgradePlan",newTier:o}),b&&c.oV(b);break;case"default":w(e);break;default:(0,s.t1)(n)}null==m||m()}async function S(e){const{environment:a,customerData:t}=e;if(t.willCancelAt){const e=f.default.state.currentSpaceStore;if(e)return await M.Mg({environment:a,from:"space_settings-billing_tab",spaceStore:e}),void c.oV({label:(0,g.UW)()})}const n=(0,g.dY)(t);if(!n)return o.showErrorMessage((0,g.JC)());if(!(0,g.bM)(t))return o.showErrorMessage((0,g.iS)());const r=await l.releaseSubscriptionSchedule(a,{id:n});if("success"===r.type&&r.data.subscriptionSchedule)return c.oV({label:(0,g.UW)()}),await M.bi(a);o.showErrorMessage((0,g.js)())}async function T(e){const{environment:a,customerData:t}=e,n=(0,r.Xi)(t.addOns),s=("interval"in t?t.interval:void 0)||n;if(!s)return;const i=f.default.state.currentSpaceStore;if(!i)return;await y.Z({environment:a,spaceId:i.id});const{prices:l,selectedCurrencyCode:u}=v.Z;let d,c;if((0,r.de)(t.addOns)&&(d=(0,r.aG)({addOnFeature:"ai",addOnTier:"base",addOnBillingInterval:s,addOnPricingModel:"standard",addOnPricingVariant:"retail",currencyCode:u,isCancellation:!1})),!(0,m.QM)()){const e=(0,m.zt)(),a=l.find((a=>a.product===e&&a.billingInterval===s&&a.currencyCode===u));c=null==a?void 0:a.externalId}if(!c&&!d)return o.showErrorMessage((0,g.js)());await M.Mg({environment:a,spaceStore:i,from:"space_settings-billing_tab",addOns:d,plan:c})}async function C(e){const a=f.default.state.currentSpaceStore;a&&(u.j({message:b.z.cancellingTrial}),await M.EO({environment:e,spaceStore:a,planType:a.getPlanType()??"personal",from:"space_settings-plans_tab"}),u.x(),d.r$({currentTab:"billing"}))}},40670:(e,a,t)=>{t.d(a,{A0:()=>V,JC:()=>w,Tg:()=>Y,UW:()=>A,Z_:()=>D,bM:()=>S,dA:()=>I,dY:()=>x,iS:()=>P,js:()=>M,mV:()=>B,n8:()=>j,rO:()=>k});t(57658),t(67294);var n=t(13991),r=t(7057),s=t(36591),i=t(5366),l=t(3791),o=t(47425),u=t(97880),d=t(33929),c=t(88893),p=t(35057),f=t(85893);const g=(0,i.defineMessages)({cancellationError:{id:"midtermSubscriptionHelpers.cancellationFailed",defaultMessage:"There was an error attempting to cancel your pending changes. Please try again."},unableToCancelError:{id:"midtermSubscriptionHelpers.unableToCancel",defaultMessage:"We cannot cancel your scheduled changes right now. Please contact support for more help."},cancellationSuccess:{id:"midtermSubscriptionHelpers.cancellationSucceeded",defaultMessage:"Pending changes have been canceled"},invalidSubscriptionId:{id:"midtermSubscriptionHelpers.invalidSubscriptionId",defaultMessage:"Unable to cancel your pending changes. Something was wrong with your pending subscription changes."}});function m(e){return(0,o.QM)(e)?"free":(0,o.iJ)(e)?"education":(0,o.Aw)(e)?"singlePlayerPlus":(0,o.eR)(e)?"plus":(0,o.NG)(e)?"business":(0,c.gG)(e)?"enterprise":"legacy"}const b=(0,i.defineMessages)({personalFreePlan:{defaultMessage:"Personal Plan",id:"personalFreePlan.title"},personalFree:{defaultMessage:"Personal",id:"personalFree.title"},teamTrialPlan:{defaultMessage:"Team Plan (Trial)",id:"teamTrialPlan.title"},freePlan:{defaultMessage:"Free Plan",id:"freePlan.title"},free:{defaultMessage:"Free",id:"free.title"},personalPlan:{defaultMessage:"Personal Pro Plan",id:"personalPlan.label"},personal:{defaultMessage:"Personal Pro",id:"personal.label"},singlePlayerPlusPlan:{defaultMessage:"Plus Plan with a 1-member limit",id:"singlePlayerPlusPlan.title"},educationPlan:{defaultMessage:"Personal Pro Plan (Education)",id:"personalEducationPlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"educationPlusPlan.title"},teamPlan:{defaultMessage:"Team Plan",id:"teamPlan.title"},team:{defaultMessage:"Team",id:"team.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},plus:{defaultMessage:"Plus",id:"plus.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},business:{id:"business.title",defaultMessage:"Business"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"enterprisePlan.label"},enterprise:{defaultMessage:"Enterprise",id:"enterprise.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"legacyPlan.label"}}),v={free:{planTitle:b.freePlan},singlePlayerPlus:{planTitle:b.plusPlan},education:{planTitle:b.educationPlusPlan},plus:{planTitle:b.plusPlan},business:{planTitle:b.businessPlan},enterprise:{planTitle:b.enterprisePlan},legacy:{planTitle:b.legacyPlan}},h=(0,i.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"notionAI.title"},removeAI:{defaultMessage:"Remove AI",id:"notionAI.remove.title"}}),y=(0,i.defineMessages)({month:{defaultMessage:"Monthly billing",id:"billingInterval.monthly"},year:{defaultMessage:"Annual billing",id:"billingInterval.annual"}});function M(){return d.default.formatMessage(g.cancellationError)}function P(){return d.default.formatMessage(g.unableToCancelError)}function w(){return d.default.formatMessage(g.invalidSubscriptionId)}function A(){return d.default.formatMessage(g.cancellationSuccess)}function x(e){var a;return null===(a=e.schedule)||void 0===a?void 0:a.id}function I(e){return e.willCancelAt}function S(e){var a;const t=null===(a=e.schedule)||void 0===a?void 0:a.status;return"not_started"===t||"active"===t}const T={personal_monthly_5:"personal",personal_yearly_48:"personal",team_monthly_10:"plus",team_yearly_96:"plus",business_monthly:"business",business_yearly:"business",enterprise_monthly_25:"enterprise",enterprise_yearly_240:"enterprise"};function C(e){for(const a of e)if(a.plan in T)return T[a.plan]}function O(e){for(const t of e)try{const e=(0,l.PG)(t.plan);if(e)return e}catch(a){}}function F(e){for(const a of e)return a.billingInterval}function _(e){var a;if(e.willCancelAt)return{oldTier:p.zt(),newTier:"free",oldAddOn:null===(a=e.addOns[0])||void 0===a?void 0:a.feature,newAddOn:void 0,oldInterval:e.interval,newInterval:void 0,phaseOneEndDate:e.willCancelAt,phaseTwoEndDate:NaN};const t=e.schedule;if(!t)return;const n=t.phases;if(!n)return;const r=n[0],s=n[1];if(!r)return;const i=[],l=[];for(const o of r.items)i.push({billingInterval:o.billing_interval,plan:o.plan});if(s)for(const o of s.items)l.push({billingInterval:o.billing_interval,plan:o.plan});return{oldTier:p.zt(),newTier:C(l),oldAddOn:O(i),newAddOn:O(l),oldInterval:F(i),newInterval:F(l),phaseOneEndDate:1e3*r.end_date,phaseTwoEndDate:1e3*(null==s?void 0:s.end_date)}}function E(e,a){const t=m(e),n=d.default.formatMessage(v[t].planTitle);if(!a)return"";const r=m(a);return`${n} → ${d.default.formatMessage(v[r].planTitle)}`}function Z(e,a){return`${d.default.formatMessage(e?h.notionAI:h.removeAI)} → ${d.default.formatMessage(a?h.notionAI:h.removeAI)}`}function j(e){const a=[];return p.QM()||a.push(E(p.zt(),"free")),(0,l.de)(e.addOns)&&a.push(Z("ai",void 0)),{cancelledChanges:a}}function Y(e){const a=_(e),t=[];if(!a)return{scheduledChanges:t,periodEndDate:0};const{newTier:n,oldTier:r,oldAddOn:s,newAddOn:i,oldInterval:l,newInterval:o,phaseOneEndDate:u}=a;return r!==n&&t.push(E(r,n)),s!==i&&t.push(Z(s,i)),l!==o&&t.push(function(e,a){return e&&a?`${d.default.formatMessage("month"===e?y.month:y.year)} → ${d.default.formatMessage("month"===a?y.month:y.year)}`:""}(l,o)),{scheduledChanges:t,periodEndDate:u}}function D(e,a,t){return"billing_interval"===e&&"year"===a&&"month"===t}function k(e,a,t){return"plans"===e||"add_ons"===e||"billing_interval"===e&&"month"===a&&"year"===t}function V(e){if(e.willCancelAt)return!0;const a=_(e),{oldAddOn:t,newAddOn:n}=a||{};return"ai"===t&&!n}function N(e){return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,s.e)({width:12}),e.children]})}function B(e){const{type:a}=e;switch(a){case"upgradePlan":return function(e){const{newTier:a}=e;switch(a){case"plus":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.upgradePlan.plus",defaultMessage:"You have successfully upgraded to the Plus plan"})})};case"business":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.upgradePlan.business",defaultMessage:"You have successfully upgraded to the Business plan"})})};case"enterprise":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.upgradePlan.enterprise",defaultMessage:"You have successfully upgraded to the Enterprise plan"})})};case"student":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.upgradePlan.student",defaultMessage:"You have successfully upgraded to the Student plan"})})};case"free":case"personal":case"personal_free":case"team_free":return;default:(0,u.t1)(a)}}(e);case"downgradePlan":return function(e){const{newTier:a}=e,t=(0,r.Yx)(e.effectiveDateEpochMs,"medium",n.SP);switch(a){case"plus":return{label:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.downgradePlan.plus",defaultMessage:"Downgrade to Plus plan will be effective {date}.",values:{date:t}})};case"business":return{label:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.downgradePlan.business",defaultMessage:"Downgrade to Business plan will be effective {date}.",values:{date:t}})};case"free":return{label:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.downgradePlan.free",defaultMessage:"Downgrade to Free plan will be effective {date}.",values:{date:t}})};case"enterprise":case"personal":case"personal_free":case"student":case"team_free":return;default:(0,u.t1)(a)}}(e);case"purchaseAddOn":return function(e){const{addOnFeature:a}=e;switch(a){case"ai":return{label:(0,f.jsx)(N,{children:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.purchaseAddOn.ai",defaultMessage:"You have successfully added Notion AI"})})};default:(0,u.t1)(a)}}(e);case"removeAddOn":return function(e){const{addOnFeature:a}=e;switch(a){case"ai":return{label:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.removeAddOn.ai",defaultMessage:"AI will be removed effective {effectiveDate}",values:{effectiveDate:(0,r.Yx)(e.effectiveDateEpochMs,"medium",n.SP)}})};default:(0,u.t1)(a)}}(e);case"billingInterval":return function(e){const{billingInterval:a,effectiveDateEpochMs:t}=e,s=t?(0,r.Yx)(t,"medium",n.SP):void 0;return s?{label:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.billingInterval.future",defaultMessage:"{billingInterval, select, year {Yearly} other {Monthly}} billling will be effective {date}",values:{billingInterval:a,date:s}})}:{label:(0,f.jsx)(N,{children:(0,f.jsx)(i.FormattedMessage,{id:"midtermChangeHelpers.snackbar.billingInterval.success",defaultMessage:"You have successfully changed to {billingInterval, select, year {yearly} other {monthly}} billing",values:{billingInterval:a}})})}}(e);default:(0,u.t1)(a)}}},87598:(e,a,t)=>{t.d(a,{z:()=>n});const n=(0,t(5366).defineMessages)({cancellingTrial:{defaultMessage:"Cancelling your trial.",id:"cancelTrial.error.message"},cancellationConfirmationMessage:{defaultMessage:"Are you sure you want to cancel your trial?",id:"cancelTrial.confirmation.message"},yes:{defaultMessage:"Yes, cancel my trial",id:"cancelTrial.yes.confirmation.message"}})},63423:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(49085);class r extends n.default{getInitialState(){return{open:!1}}}const s=new r},25692:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(49085);class r extends n.default{getInitialState(){return{open:!1}}}const s=new r},39343:(e,a,t)=>{t.d(a,{F:()=>i,n:()=>l});var n=t(30120),r=t(13991),s=t(7057);function i(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=n.ou.now().toSeconds()}function l(e){if(null!=e&&e.trialEnd)return(0,s.Yx)(1e3*e.trialEnd,"long",r.SP)}},19234:(e,a,t)=>{t.d(a,{A:()=>s});t(72126);const n=/^\d{5}(-\d{4})?$/,r=/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ] ?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i;function s(e){if(!e.country)return!1;switch(e.country){case"US":return n.test(e.zipCode);case"CA":return r.test(e.zipCode);default:return!0}}},94919:(e,a,t)=>{t.d(a,{W:()=>s});t(67294);var n=t(31919),r=t(85893);function s(e){const{cost:a,intl:t}=e,s=e.trailingZeroDisplay??"auto",i=e.currencySign??"accounting",l=n.n.fromValue(a);let o=t.formatNumber(l.amount/Math.pow(10,l.currencyValue.minorUnitDigits),{style:"currency",currency:l.currencyCode,currencyDisplay:"symbol",currencySign:i});return"stripIfInteger"===s&&(o=o.replace(new RegExp(`[.,]0{${l.currencyValue.minorUnitDigits}}(\\s+.*)?$`),"$1")),(0,r.jsx)(r.Fragment,{children:o})}}}]);