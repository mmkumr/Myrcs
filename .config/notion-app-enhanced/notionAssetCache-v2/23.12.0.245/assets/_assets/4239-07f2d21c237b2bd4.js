"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4239],{41752:(e,t,i)=>{i.d(t,{C:()=>n});var r=i(39699),s=i(37181);function n(e,t){const{phase:i,transactionUserAction:n,userSettingsStore:o}=t;r.createAndCommit({environment:e,userAction:n,perform:e=>{s.d2({userSettingsStore:o,transaction:e,data:{ai_qna_intro_onboarding_phase:i}})}})}},40824:(e,t,i)=>{i.d(t,{N:()=>o});var r=i(49085),s=i(92595);class n extends r.default{getInitialState(){return{currentState:"default",lastStepLoadingCompletionUnixEpochMs:-1/0,aiWindowLastSeenUnixEpochMs:-1/0}}setAssistantLastViewedTime(){o.setState({...o.state,aiWindowLastSeenUnixEpochMs:Date.now()})}}const o=new n;(0,s.exposeDebugValue)("AssistantOriginElementStore",o)},10912:(e,t,i)=>{i.d(t,{Z:()=>f});i(57658),i(67294);var r=i(83355),s=i(27531),n=i(41432),o=i(80951),l=i(95538),a=i(21202),d=i(97880),h=i(78316),p=i(17311),c=i(35328),u=i(35661),m=i(60981),g=i(12981),v=i(43568),y=i(81865),S=i(33411),C=i(35541),b=i(85893);function x(e){return"number"==typeof e}class M extends r.Z{constructor(){super(...arguments),this.renderContentBlock=e=>{const{store:t,renderAdditionalBlocks:i,rendererBlockStyle:r}=this.props,n=u.G.createChildStore(t,{table:a.iU,id:e}),o=n.getType(),l=i&&void 0!==o?(0,C.u)(n):(0,m.h)(n);if(l)return(0,b.jsx)(s.D,{value:this.restrictedContentStore,children:(0,b.jsx)(l,{store:n,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:(0,c.BX)(n),style:{fontSize:12,opacity:.8,pointerEvents:"none",...r},isQuickFind:!0,numberedListCounterStore:this.createComputedStore((()=>({depth:0,numberedListBlockIdsWithFormat:this.createNumberedListCounterStore(e)})))})},e)},this.coverStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,i=(0,h.NU)(e,t);return i.image?i.image:!(this.props.showLoadingShimmer&&0===i.blockIds.length&&!i.isDefined)&&i.blockIds})),this.restrictedContentStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,i=(0,h.wK)(e,t);return i.image?void 0:i.blockIds})),this.numberedLists=this.createComputedStore((()=>{const{store:e}=this.props,t=this.coverStore.state,i=[];if(Array.isArray(t)){let r=0;for(;r<t.length;){let s=t[r],o=u.G.createChildStore(e,{table:a.iU,id:s});if(o.getType()===n.Ti.numberedList){const l=[{blockId:s,idx:1}],d=[{id:s,format:void 0,depth:l.length-1,index:l[0].idx}];for(r+=1;r<t.length&&(s=t[r],o=u.G.createChildStore(e,{table:a.iU,id:s}),o.getType()===n.Ti.numberedList);){{const e=o.getParentId();if(o.getParentId()===l[l.length-1].blockId)l.push({blockId:s,idx:1});else{let t=l[l.length-1].idx;for(;l.length>0&&l[l.length-1].blockId!==e;)t=l[l.length-1].idx,l.pop();l.push({blockId:s,idx:t+1})}d.push({id:s,format:void 0,depth:l.length-1,index:l[l.length-1].idx})}r+=1}i.push(d)}else r+=1}}return i}))}didUpdate(e){this.props.coverFormat.type!==e.coverFormat.type&&this.props.onLoadProxiedImage()}renderComponent(){const{coverFormat:e}=this.props;return"page_cover"===e.type?this.renderPageCover():"page_content"===e.type?this.renderPageContent():"property"===e.type?this.renderProperty(e.property):void 0}renderPageCover(){var e;const{store:t}=this.props,i=null===(e=t.getCover())||void 0===e?void 0:e.cover;return i?(0,b.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,b.jsx)(y.Z,{url:i,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),render:(e,t)=>{if(t)return(0,b.jsx)(g.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]}):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderPageContent(){const e=this.coverStore.state,t=this.restrictedContentStore.state;if(!1===e)return this.renderLoadingShimmer();if(e){if(!Array.isArray(e))return(0,b.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,b.jsx)(y.Z,{url:e.url,onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),isAuthenticated:!0,permissionRecord:e.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return(0,b.jsx)(g.Z,{style:{...this.getImageStyle(),...this.getPageContentImageStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]});if(e.length>0)return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{style:this.getContentWrapStyle(),children:[t?e.filter((e=>t.indexOf(e)>=0)).map(this.renderContentBlock):e.map(this.renderContentBlock),this.props.coverContentFadedOverlay&&(0,b.jsx)("div",{style:this.getContentFadedOverlayStyle()})]})});if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}else if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}renderProperty(e){const{store:t}=this.props,i=(0,o.g)(t.getPropertyValue(e)).find((e=>(0,l.SR)({url:e.url})));return i?(0,b.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,b.jsx)(y.Z,{onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),url:i.url,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return(0,b.jsx)(g.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]}):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderEmptyGalleryCover(){return(0,b.jsx)("div",{style:{height:this.getCoverHeight(),...this.props.emptyGalleryCoverStyle}})}renderLoadingShimmer(){return(0,b.jsx)("div",{style:{height:this.getCoverHeight(),...this.props.loadingShimmerStyle},children:(0,b.jsx)(S.Z,{show:!0,showDelay:100,showHold:0,render:e=>e?(0,b.jsx)(v.Z,{paragraphs:[{lineHeight:12,lineMargin:6,sectionWidths:[100,100,50],repeat:1,sectionMargin:0}]}):void 0})})}renderImageBorder(){switch(this.props.variant){case"default":return null;case"gallery":return(0,b.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${this.theme.regularDividerColor}`}});default:(0,d.t1)(this.props.variant)}}get imagePosition(){const{coverPosition:e,store:t}=this.props;if(x(e))return e;if(t.getFormatStore().isDefined()){const{page_cover_position:e,card_cover_position:i}=t.getFormat();if(x(i))return i;if(x(e))return e}return.5}createNumberedListCounterStore(e){const t=this.numberedLists.state;for(const i of t)if(i.find((t=>t.id===e)))return i;return[]}getImageStyle(){return this.props.style||{}}getCoverHeight(){const{coverHeight:e,coverSizeFormat:t}=this.props;if(e)return e;switch(t){case"large":return p.Z.card.desktop.large.height;case"small":return p.Z.card.desktop.small.height;case"medium":default:return p.Z.card.desktop.medium.height}}getCoverWidth(){const{coverWidth:e,coverSizeFormat:t}=this.props;return e||(0,h.rD)(t)}getImageCoverWrapStyle(){return{height:this.getCoverHeight(),position:"relative",pointerEvents:"none",overflow:"hidden",...this.props.imageCoverWrapStyle}}getContentWrapVariantStyle(){const{ThemeStore:e}=this.environment,t="dark"===e.state.mode;switch(this.props.variant){case"default":return{};case"gallery":return{background:this.theme.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:t?"transparent":`inset 0 -1px 0 0 ${this.theme.regularDividerColor}`,...this.props.contentWrapStyle};default:(0,d.t1)(this.props.variant)}}getContentWrapStyle(){return{height:this.getCoverHeight(),pointerEvents:"none",overflow:"hidden",position:this.props.coverContentFadedOverlay?"relative":"static",...this.getContentWrapVariantStyle(),...this.props.contentWrapStyle}}getContentFadedOverlayStyle(){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${this.theme.accentColors.gray[30]} 100%)`,...this.props.coverContentFadedOverlayStyle}}getCoverVariantStyle(){switch(this.props.variant){case"default":return{border:`1px solid ${this.theme.stroke.regular}`,borderRadius:4};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,d.t1)(this.props.variant)}}getCoverStyle(){return{width:"100%",height:this.getCoverHeight(),...this.getCoverVariantStyle(),objectPosition:"center"}}getCoverAspectStyle(){const{coverAspectFormat:e}=this.props;return{objectFit:void 0===e?"cover":e}}getPageContentImageStyle(){return{...this.getCoverStyle(),objectPosition:"center center"}}}M.displayName="CollectionItemCover";const f=M},92660:(e,t,i)=>{i.d(t,{Z:()=>a});i(67294);var r=i(480),s=i(86628),n=i(50506),o=i(53437),l=i(85893);function a(e){window.__c={n:"DefaultPopupOrModal"};const t=(0,r.O7)(),{modalStore:i,render:a}=e,{device:d}=t,h=(0,s.VK)((()=>i.state.open),[i]);return d.isMobile?(0,l.jsx)(o.ZP,{ariaLabel:e.ariaLabel,open:h,popupType:o.ZP.PopupType.SlideUp,origin:e.origin,onDismiss:e.onDismiss,render:a,style:e.style}):(0,l.jsx)(n.Z,{ariaLabel:e.ariaLabel,open:h,preventHideChildrenWhileOpening:!0,render:a,onDismiss:e.onDismiss,style:e.style,innerStyle:e.innerStyle})}},255:(e,t,i)=>{i.d(t,{Z:()=>l});i(67294);var r=i(480),s=i(53465),n=i(73063),o=i(85893);const l=function(e){window.__c={n:"MenuItemRemoveButton"};const t=(0,r.O7)(),i={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:l,disabled:a}=e,{device:d}=t,h=d.isMobile?{...i.removeFilterButton,...i.removeFilterButtonMobile}:i.removeFilterButton;return(0,o.jsx)(n.Z,{icon:s.X,onClick:l,disabled:a,disableBackground:!0,style:h})}},30676:(e,t,i)=>{i.d(t,{F:()=>l});i(67294);var r=i(86628),s=i(74016),n=i(52275),o=i(85893);function l(e){window.__c={n:"TeamMenuItem"};const{teamStore:t}=e,{name:i}=(0,r.VK)((()=>({name:t.getName()})),[t]);return(0,o.jsx)(n.Z,{...e,icon:(0,o.jsx)(s.p,{size:14,store:t,disabled:!0}),title:i})}},83890:(e,t,i)=>{i.d(t,{Z:()=>C});var r=i(67294),s=i(83355),n=i(66897),o=i(22686),l=i(19889),a=i(7928),d=i(5366),h=i(31299),p=i(35661),c=i(92864),u=i(93044),m=i(255),g=i(97680),v=i(8319),y=i(85893);class S extends s.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:i,onRemove:r,onClick:s}=t;const o=this.styles,l=this.getUserValue(e),a=(0,y.jsx)(m.Z,{disabled:i,onClick:r});return(0,y.jsx)(g.Z,{disabled:i,focused:!1,actor:(0,n.m3)(l),right:a,style:o.menuItem,desktopTitleStyle:o.menuItemTitle,onClick:s},e)},this.renderItemForSummary=e=>(0,a.Nz)(this.props.intl,this.getUserValue(e)),this.renderToken=(e,t)=>{const{userIds:i}=this.props,r=1===i.length,s=this.getUserValue(e);if(s)return(0,y.jsx)(c.ZP,{format:this.environment.device.isMobile?u.lP.Large:u.lP.Small,showRemoveButton:!0,isSingle:r,onClickRemove:t.onRemove,actor:(0,n.m3)(s),shouldShrink:!0,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const i=this.getUserValue(e);return(0,r.createElement)(g.Z,{...t,key:e,actor:(0,n.m3)(i)})},this.performRequest=async e=>{let{query:t,current:i}=e;const r=new Set(i);return(await h.Yu({environment:this.environment,query:t,membersOnly:!1})).filter((e=>!r.has(e.id))).slice(0,20).map((e=>e.id))},this.getUserValue=e=>this.createUserStore(e).getValue(),this.createUserStore=e=>{const{parentStore:t}=this.props;return p.U6.createChildStore(t,{table:l.KJ,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,userIds:i,onChange:r,disabled:s,focused:n,onMenuDismiss:l,intl:a}=this.props;return(0,y.jsx)(v.Z,{mode:e,title:t,icon:o.f,iconStyles:this.styles.recordIcon,items:i,onChange:r,disabled:s,focused:n,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:(0,y.jsx)(d.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:a.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:l,hasItemsSelected:(null==i?void 0:i.length)>0})}}S.displayName="SearchPersonFilter";const C=(0,d.injectIntl)(S)},8319:(e,t,i)=>{i.d(t,{z:()=>O,Z:()=>D});var r=i(67294),s=i(83355),n=i(47453),o=i(72126),l=i(97880),a=i(5366),d=i(75024),h=i(49085);class p extends h.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const c=p;var u=i(33338),m=i(42922),g=i(52275),v=i(89728),y=i(53437),S=i(72495),C=i(75689),b=i(91642),x=i(68626),M=i(91155),f=i(87279),I=i(29798),k=i(72087),T=i(78140),j=i(32163),F=i(43765),Z=i(40721),P=i(77137),R=i(47082),w=i(85893);class B extends s.Z{constructor(){super(...arguments),this.storeTypes={requestStore:k.Z,menuListStore:I.Z},this.renderRequest=(e,t,i)=>{const{labelText:r,value:s}=this.props,{menuListStore:n}=this.stores,o=e=>(0,w.jsx)(S.Z,{...e,title:r.resultSectionTitle,loading:!i});if(e)return x.log({level:"error",from:r.componentDebugName,type:"requestFailed",error:(0,M.Ui)(e),data:{miscDataToConvertToString:{query:s}}}),(0,w.jsx)(o,{children:(0,w.jsx)(F.Z,{title:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!t)return(0,w.jsx)(o,{children:(0,w.jsx)(F.Z,{title:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Loadingâ€¦",id:"search.inputMenu.loading.message"})})});if(t&&0===t.length)return(0,w.jsx)(o,{children:(0,w.jsx)(F.Z,{title:(0,w.jsx)(a.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const l={key:"results",items:t.map(this.getResultMenuItem),render:o};return(0,w.jsx)(j.Z,{type:j.i.Vertical,store:n,initialFocus:0,sections:[l]})},this.handleMenuInputRemoveLast=()=>{const{items:e,onRemove:t}=this.props,i=o.Z$(e);i&&t(i)},this.getResultMenuItem=e=>{const{renderResultMenuItem:t,onConfirm:i}=this.props;return{key:e,action:()=>i(e),render:i=>t(e,i)}},this.styles={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}}}renderComponent(){const{value:e,items:t,performRequest:i}=this.props,{requestStore:r}=this.stores,s={query:e,current:t};return(0,w.jsx)(T.Z,{...this.getMenuProps(),children:(0,w.jsx)(P.Z,{debounce:100,requestStore:r,request:s,performRequest:i,render:this.renderRequest})})}renderTokenInput(){const{labelText:e,value:t,items:i,disabled:r,onChange:s,renderToken:n,onRemove:o,onClear:l}=this.props,a=i.map((e=>n(e,{onRemove:()=>o(e)})));return(0,w.jsx)(R.Z,{focus:!this.isMobile()||void 0,focusAfterAnimation:!0,format:R.Z.Format.FilterValue,tokens:a,placeholder:e.tokenInputPlaceholder,onRemoveLastToken:this.handleMenuInputRemoveLast,onClearButtonClick:l,value:t,onChange:s,showClearButton:!0,disabled:Boolean(r),style:this.styles.inputMenu})}getMenuProps(){const{onDismiss:e,labelText:t}=this.props,i=this.styles;if(this.isMobile()){return{menuType:f.og.Modal,title:t.title,right:(0,w.jsx)(Z.DoneMenuText,{}),onClickRight:e,header:this.renderTokenInput()}}return{menuType:f.og.Popup,onClickOutside:e,header:this.renderTokenInput(),...i.menu}}isMobile(){const{device:e}=this.environment;return e.isMobile}}B.displayName="SearchTokenInputMenu";const L=B;let O=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class A extends s.Z{constructor(){super(...arguments),this.animationFrame=void 0,this.origin=r.createRef(),this.storeTypes={componentStore:c},this.renderMobileFilterSummary=e=>{const{title:t,items:i,renderItemForSummary:s}=this.props,{disableFilters:n}=e,o=this.styles,l={...d.mK,...o.summary},a=i.length-1,h=(0,w.jsx)("ul",{style:l,children:i.map(((e,t)=>(0,w.jsx)("li",{style:o.summaryItem,children:(0,w.jsxs)(r.Fragment,{children:[s(e),t!==a&&","," "]})},e)))});return(0,w.jsx)(C.Z,{disabled:n,onClick:this.handleMenuOpenMobile,onClickClear:this.clearItems,label:t,title:h})},this.renderMenu=()=>{const{renderToken:e,renderFooter:t,allowApplyBatchSelection:i}=this.props,{componentStore:{state:r}}=this.stores;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(L,{...this.props,value:r.inputTemporaryValue,onChange:this.handleMenuInputChange,onDismiss:this.handleMenuClose,onConfirm:this.handleItemConfirm,onClear:()=>{this.handleClearTemporary(),this.clearItems()},onRemove:this.handleFilterRemove,renderToken:e}),t&&(0,w.jsxs)(S.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,w.jsx)(v.Z,{onClick:()=>{this.clearItems()},children:(0,w.jsx)(a.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),i&&(0,w.jsx)(m.Z,{onClick:()=>{this.handleMenuClose("applyButton")},children:(0,w.jsx)(a.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})},this.handleMenuOpen=e=>{this.scheduleMeasurement(void 0,(t=>({...t,isMenuOpen:!0,indexToReplace:e})))},this.handleMenuOpenMobile=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,isMenuOpen:!0})},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{componentStore:i}=this.stores;this.clearInput(),i.setState({...i.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(e)},this.handleClearTemporary=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:""})},this.handleItemConfirm=e=>{const{items:t}=this.props,{componentStore:i}=this.stores,{indexToReplace:r}=i.state;"number"==typeof r&&r<t.length?this.replaceItem(r,e):t.includes(e)&&A.Mode.Pill?this.removeItem(e):this.addItem(e),this.props.keepInputOnItemConfirm||this.clearInput()},this.handleFilterRemove=e=>{this.removeItem(e)},this.handleMenuInputChange=e=>{const{componentStore:t}=this.stores,{target:i}=e;t.setState({...t.state,inputTemporaryValue:String(i.value)})},this.scheduleMeasurement=(e,t)=>{this.animationFrame=requestAnimationFrame(this.measureOriginRect(t))},this.measureOriginRect=e=>t=>{const{componentStore:i}=this.stores;if(!this.origin)return;if(!this.origin.current)return;const r=e?e(i.state):i.state;i.setState({...r,popupOriginRect:this.origin.current.getBoundingClientRect()})},this.isMenuOpen=()=>{const{componentStore:{state:e}}=this.stores;return e.isMenuOpen},this.removeItem=e=>{const{items:t,onChange:i}=this.props;i(t.filter((t=>t!==e)))},this.clearItems=()=>{const{onChange:e}=this.props;e([])},this.replaceItem=(e,t)=>{const{items:i,onChange:r}=this.props;r(i.slice(0,e).concat(t,i.slice(e+1)))},this.clearInput=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:d.yv(this.environment,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===this.props.mode?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:i}=this.props,{componentStore:{state:r}}=this.stores,s=i||r.isMenuOpen;let n;const o=(()=>e===A.Mode.Section?(n=t,this.renderSectionOrigin()):e===A.Mode.Button?this.renderButtonOrigin():e===A.Mode.Pill?this.renderPillOrigin():void(0,l.t1)(e))();return(0,w.jsxs)(b.Z,{title:n,marginAfter:e===A.Mode.Section,style:this.styles.sectionMenuItem,children:[e!==A.Mode.Pill&&this.renderFilters({disableFilters:s,showLabel:!1}),o,(0,w.jsx)(y.ZP,{popupType:y.ZP.PopupType.Popup,placementToOrigin:y.ZP.Placement.Bottom,alignmentToOrigin:y.ZP.Alignment.Start,open:this.isMenuOpen(),originRect:r.popupOriginRect,render:()=>this.renderMenu(),onDismiss:this.handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:i,focused:r}=this.props,s=this.styles,n=this.getThemeColors(),o={...s.menuItem,...n.buttonMenuItem};return(0,w.jsx)("div",{ref:this.origin,style:s.menuItemWrapper,children:(0,w.jsx)(g.Z,{disabled:i||this.isMenuOpen(),icon:e(s.icon),title:t,focused:r,onClick:e=>this.handleMenuOpen(),style:o})})}renderPillOrigin(){const{icon:e,title:t,disabled:i,iconStyles:r}=this.props,s=this.styles,n=this.props.mode===O.Pill&&this.props.hasItemsSelected;return(0,w.jsx)("div",{ref:this.origin,style:s.menuItemWrapper,children:(0,w.jsx)(u.Z,{on:n,icon:e({...s.icon,...r}),title:(0,w.jsx)("span",{children:t}),onClick:e=>this.handleMenuOpen(),wrapStyle:{opacity:i?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,i=this.styles,s=this.getThemeColors();return(0,w.jsxs)(r.Fragment,{children:[(0,w.jsx)("div",{ref:this.origin,style:i.menuItemWrapper}),(0,w.jsx)(g.Z,{disabled:t||this.isMenuOpen(),icon:(0,n.R)(i.iconSmall),title:e,focused:!1,onClick:e=>this.handleMenuOpen(),style:{...i.appendListItemButton,...s.appendListItemButton}})]})}renderMobile(e){const{disabled:t}=this.props,i=t||this.isMenuOpen(),r=e===A.Mode.Section?this.renderMobileFilterSummary({disableFilters:i}):this.renderMobileButtonOrigin({disableFilters:i});return(0,w.jsx)(y.ZP,{popupType:y.ZP.PopupType.SlideUp,open:this.isMenuOpen(),origin:r,render:this.renderMenu,onDismiss:this.handleMenuClose,keepFocus:!0})}renderMobileButtonOrigin(e){const{icon:t,title:i}=this.props,r=this.styles;return(0,w.jsx)(g.Z,{disabled:e.disableFilters,focused:!1,icon:t({...r.icon}),title:i,onClick:e=>this.handleMenuOpenMobile()})}renderFilters(e){const{items:t,renderFilter:i}=this.props,{device:r}=this.environment,s=t.map(((t,s)=>(0,w.jsx)("li",{children:i(t,{disabled:e.disableFilters,onRemove:()=>this.handleFilterRemove(t),onClick:()=>r.isMobile?this.handleMenuOpenMobile():this.handleMenuOpen(s)})},`${t}_${s}`)));return(0,w.jsx)("ul",{style:d.mK,children:s})}addItem(e){const{items:t,onChange:i}=this.props,r=t.concat(e);i(o.jj(r))}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},appendListItemButton:{color:this.theme.lightTextColor}}}}A.displayName="SearchTokenFilter",A.Mode=O;const D=A},75689:(e,t,i)=>{i.d(t,{Z:()=>h});i(67294);var r=i(83355),s=i(82990),n=i(52275),o=i(24006),l=i(255),a=i(85893);class d extends r.Z{constructor(){super(...arguments),this.styles={menuItem:{background:void 0,minHeight:void 0,fontSize:this.environment.device.isMobile?s.Z.fontSize.UISmall.mobile:s.Z.fontSize.UIRegular.desktop,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}renderComponent(){const{disabled:e,label:t,title:i,onClick:r,isToggle:s,...o}=this.props,l=this.getThemeColors(),d=this.styles,h=(0,a.jsx)("span",{style:l.menuItemLabel,children:t});return(0,a.jsx)(n.Z,{focused:!1,...o,inline:s,disabled:e,icon:h,title:i,right:this.renderRight(),onClick:r,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:d.menuItem,desktopIconStyle:d.menuItemLabel})}renderRight(){const{disabled:e}=this.props,t=this.styles.rightWrapper;return this.props.isToggle?(0,a.jsx)("div",{style:t,children:(0,a.jsx)(o.Z,{on:this.props.isToggleActive,onClick:this.props.onClick})}):(0,a.jsx)(l.Z,{disabled:e,onClick:this.props.onClickClear})}getThemeColors(){return{menuItemLabel:{color:this.theme.lightTextColor}}}}d.displayName="SearchFilterSummaryMenuItem";const h=d},91642:(e,t,i)=>{i.d(t,{Z:()=>n});i(67294);var r=i(72495),s=i(85893);const n=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:i,marginAfter:n,desktopStyle:o,desktopTitleStyle:l,...a}=e,d=(n||o)&&{...n&&t.marginAfter,...o},h=l?{...t.desktopTitleStyle,...l}:t.desktopTitleStyle;return(0,s.jsx)(r.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:h,shouldShowBottomDivider:!1,title:i,...a})}},63334:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(49085);class s extends r.default{getInitialState(){return{}}}const n=s},54983:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(49085);class s extends r.default{getInitialState(){return{}}}const n=s},67220:(e,t,i)=>{i.d(t,{S:()=>n});i(67294);var r=i(45238),s=i(85893);const n=(0,r.I)("bot",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M7.996 16C12.381 16 16 12.38 16 8s-3.627-8-8.012-8C3.611 0 0 3.62 0 8s3.62 8 7.996 8zm0-1.594A6.375 6.375 0 011.61 8a6.366 6.366 0 016.38-6.398A6.393 6.393 0 0114.398 8a6.383 6.383 0 01-6.403 6.406zM4.648 8.518c0 .21.17.364.386.364h2.53l-1.346 3.605c-.202.527.355.813.703.395l4.168-5.176a.515.515 0 00.132-.325c0-.209-.17-.356-.379-.356H8.305l1.346-3.613c.201-.518-.356-.812-.704-.395l-4.16 5.184a.484.484 0 00-.14.317z"})})},90028:(e,t,i)=>{i.d(t,{j:()=>n});i(67294);var r=i(45238),s=i(85893);const n=(0,r.I)("searchInPage",{viewBox:"0 0 12 14",svg:(0,s.jsx)("path",{d:"M2.877 13.365h6.24c.63 0 1.104-.164 1.424-.492.32-.324.48-.8.48-1.43V6.13c0-.274-.015-.504-.046-.691a1.531 1.531 0 00-.182-.522 2.185 2.185 0 00-.387-.498l-3.07-3.123a2.11 2.11 0 00-.48-.38 1.528 1.528 0 00-.51-.183A3.464 3.464 0 005.7.68H2.877c-.629 0-1.104.164-1.424.492-.32.324-.48.8-.48 1.43v8.841c0 .633.16 1.112.48 1.436.32.324.795.486 1.424.486zm.094-1.154c-.282 0-.492-.072-.633-.217-.14-.144-.211-.351-.211-.621V2.678c0-.27.07-.479.21-.627.142-.149.354-.223.64-.223h2.496V5.04c0 .418.101.73.304.938.207.207.52.31.938.31h3.158v5.086c0 .27-.07.477-.21.621-.142.145-.354.217-.64.217H2.971zm3.855-6.938c-.12 0-.209-.027-.263-.082-.051-.054-.077-.142-.077-.263V1.986l3.229 3.287H6.826z"})})}}]);