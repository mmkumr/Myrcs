"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2174],{16287:(e,t,i)=>{i.d(t,{A:()=>r,h:()=>d});var s=i(53877),n=i(72126),a=i(23867),o=i(54642);async function r(e,t){const{store:i,activityIds:s,spaceId:r,filterActivityTypes:d,filterDateRange:c,navigableBlockId:u,collectionId:p}=t,g=n.Ps(s),m=await o.getActivityLog(e,{spaceId:r,navigableBlock:u?{id:u,spaceId:(0,a.C)(void 0)}:void 0,collection:p?{id:p,spaceId:(0,a.C)(void 0)}:void 0,endingBeforeId:g,limit:20,activityTypes:d,...l(c)});if("failed"===m.type)throw m.error;const h=m.data.activityIds;i.update((e=>({...e,shouldLoadNewerActivities:!1,activityIds:h.concat(s)})))}async function d(e,t){const{store:i,activityIds:s,spaceId:r,filterActivityTypes:d,filterDateRange:c,navigableBlockId:u,collectionId:p}=t,g=n.Z$(s),m=await o.getActivityLog(e,{spaceId:r,navigableBlock:u?{id:u,spaceId:(0,a.C)(void 0)}:void 0,collection:p?{id:p,spaceId:(0,a.C)(void 0)}:void 0,startingAfterId:g,limit:20,activityTypes:d,...l(c)});if("failed"===m.type)throw m.error;const h=m.data.activityIds;i.update((e=>({...e,shouldLoadOlderActivities:!1,activityIds:s.concat(h),hasOlderActivities:h.length>0})))}function l(e){var t,i;const n=null!==(t=e.ending)&&void 0!==t&&t.start_date?s.OQ.isoToUnixMs(e.ending.start_date):void 0;return{startingAfterTimeMs:null!==(i=e.starting)&&void 0!==i&&i.start_date?s.OQ.isoToUnixMs(e.starting.start_date):void 0,endingBeforeTimeMs:n?s.Xz({date:n,daysToAdd:1}):void 0}}},84708:(e,t,i)=>{i.d(t,{Z:()=>N});var s=i(67294),n=i(83355),a=i(69651),o=i(72050),r=i(72126),d=i(44615),l=i(70921),c=i(63143),u=i(5366),p=i(16287),g=i(19719),m=i(65598),h=i(95697),f=i(51811),y=i(77907),v=i(2688),x=i(5162),b=i(44904),S=i(80444),M=i(61766),w=i(88632),j=i(49085);class C extends j.default{getInitialState(){return{selectedItems:[]}}}const k=C;var Z=i(4761),T=i(68785),I=i(77137),A=i(43145),P=i(93481),F=i(52275),R=i(255),_=i(8319),U=i(85893);class B extends n.Z{constructor(){super(...arguments),this.storeTypes={store:k},this.renderFilterListItem=(e,t)=>{var i,s;let{disabled:n,onRemove:a,onClick:o}=t;const r=this.styles,d=(0,U.jsx)(R.Z,{disabled:n,onClick:a});return(0,U.jsx)(F.Z,{title:(null===(i=(s=this.props).getItemLabel)||void 0===i?void 0:i.call(s,e))||e,disabled:n,focused:!1,right:d,style:r.menuItem,desktopTitleStyle:r.menuItemTitle,onClick:o},e)},this.renderItemForSummary=e=>`hello${e}`,this.renderToken=e=>e,this.renderResultMenuItem=(e,t)=>{var i,n;return(0,s.createElement)(F.Z,{...t,key:e,title:(null===(i=(n=this.props).getItemLabel)||void 0===i?void 0:i.call(n,e))||e,checkState:this.props.mode===_.z.Pill&&this.stores.store.state.selectedItems.includes(e)})},this.performRequest=e=>{let{query:t}=e;return Promise.resolve(this.props.options.filter((e=>e.includes(t))))},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:4}}}willMountOrUpdate(e){this.stores.store.setState({selectedItems:e.items})}renderComponent(){const{mode:e,title:t,onChange:i,disabled:s,focused:n,onMenuDismiss:a,items:o,addItemLabel:r,tokenInputPlaceholder:d,resultSectionTitle:l,componentDebugName:c,icon:u}=this.props;return(0,U.jsx)(_.Z,{mode:e,hasItemsSelected:this.stores.store.state.selectedItems.length>0,title:t,icon:u,items:o,onChange:e=>{i(e)},disabled:s,focused:n,renderFilter:(e,t)=>this.renderFilterListItem(e,t),renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:r,labelText:{title:t,tokenInputPlaceholder:d,resultSectionTitle:l,componentDebugName:c},performRequest:this.performRequest,renderResultMenuItem:(e,t)=>this.renderResultMenuItem(e,t),onMenuDismiss:a})}}B.displayName="SearchListFilter";const L=B;var O=i(70268);class D extends n.Z{constructor(){super(...arguments),this.searchListFilterStore=new k,this.storeTypes={activityUpdatesStore:b.o,filterPopupStore:M.Z},this.closeAddFilterMenu=()=>{const{filterPopupStore:e}=this.stores;e.setState({...e.state,open:!1})},this.renderActivityTypeFilter=()=>{const{collectionId:e}=this.props,t=e=>(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(L,{store:this.searchListFilterStore,focused:!1,icon:o.A,options:[...e].sort(),items:this.stores.activityUpdatesStore.state.filterActivityTypes,mode:_.z.Pill,title:(0,U.jsx)(u.FormattedMessage,{id:"activityUpdates.filterMenu.byType.title",defaultMessage:"Activity type"}),tokenInputPlaceholder:this.props.intl.formatMessage({id:"activityUpdates.filterMenu.byType.search",defaultMessage:"Search for a type"}),resultSectionTitle:this.props.intl.formatMessage({id:"activityUpdates.filterMenu.byType.resultSectionTitle",defaultMessage:"Activity Types"}),addItemLabel:this.props.intl.formatMessage({id:"activityUpdates.filterMenu.byType.addItemLabel",defaultMessage:"Add an activity type"}),componentDebugName:"ActivityUpdatesSearchEditTypesFilter",onChange:e=>this.updateFiltersAndTrackChange((()=>this.stores.activityUpdatesStore.update((t=>({...t,filterActivityTypes:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0,shouldLoadNewerActivities:!1}))))),onMenuDismiss:this.closeAddFilterMenu,getItemLabel:e=>e.split("-").map((e=>e.replace(/(^.)/,(e=>e.toUpperCase())))).join(" ")})});return t(e?l.Se:l.Py)},this.renderActivityTimeFilter=()=>(0,U.jsx)(P.Z,{mode:_.z.Pill,focused:!1,showButtons:!0,title:(0,U.jsx)(u.FormattedMessage,{id:"activityUpdates.filterMenu.byDate",defaultMessage:"Date Range"}),icon:a.C,value:this.stores.activityUpdatesStore.state.filterDateRange,onMenuDismiss:this.closeAddFilterMenu,onChange:e=>this.updateFiltersAndTrackChange((()=>this.stores.activityUpdatesStore.update((t=>({...t,filterDateRange:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0})))))}),this.renderSearchFilters=()=>{const{currentUserStore:e,currentSpaceStore:t}=S.default.state;if(!e||!t)return;const i=this.stores.activityUpdatesStore.state.filterActivityTypes.length>0||this.stores.activityUpdatesStore.state.filterDateRange.ending||this.stores.activityUpdatesStore.state.filterDateRange.starting;return(0,U.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"12px 10px",width:"100%",gap:6},children:[this.renderActivityTypeFilter(),this.renderActivityTimeFilter(),i&&this.renderClearButton()]})},this.handleActivityEmit=e=>{this.stores.activityUpdatesStore.update((e=>({...e,shouldLoadNewerActivities:!0})))},this.handleActivityEmitThrottled=r.P2(this.handleActivityEmit,1e3),this.handleNavigableBlockEmit=c.YX(this.handleActivityEmitThrottled),this.handleCollectionEmit=c.YX(this.handleActivityEmitThrottled),this.navigableBlockListenerReference=void 0,this.collectionListenerReference=void 0}willMount(){this.startMessageListeners()}willUnmount(){this.stopMessageListeners()}renderComponent(){return w.Z.state.online?this.renderOnline():this.renderOffline()}renderClearButton(){return(0,U.jsx)("div",{style:{flexGrow:1,textAlign:"right",cursor:"pointer",fontSize:14,color:this.theme.mediumTextColor,marginRight:8},onClick:()=>this.updateFiltersAndTrackChange((()=>this.stores.activityUpdatesStore.reset())),children:(0,U.jsx)(u.FormattedMessage,{defaultMessage:"Clear",id:"activityUpdates.clearFilters"})})}renderOffline(){return(0,U.jsx)("div",{style:this.getPlaceholderContentStyle(),children:(0,U.jsx)(u.FormattedMessage,{defaultMessage:"Please go online to view updates.",id:"activityUpdates.offlineMessage"})})}updateFiltersAndTrackChange(e){const t=this.getFilterDataForTracking();e();const i=this.getFilterDataForTracking();g.Q6({environment:this.environment,activityUpdatesSource:this.props.source,filters:i,prevFilters:t})}renderOnline(){const{spaceId:e,navigableBlock:t,collectionId:i,source:s}=this.props,{currentUserStore:n,currentSpaceStore:a}=S.default.state;if(!n||!a)return;const o=a,{shouldLoadOlderActivities:r,shouldLoadNewerActivities:d,filterActivityTypes:l,filterDateRange:c,activityIds:g,hasOlderActivities:m}=this.stores.activityUpdatesStore.state,v=n.id,b=null==t?void 0:t.id;return(0,U.jsx)(I.Z,{throttle:1e3,request:{spaceId:e,navigableBlockId:b,collectionId:i,shouldLoadOlderActivities:r,shouldLoadNewerActivities:d,filterActivityTypes:l,filterDateRange:c,hasOlderActivities:m,activityIds:g},performRequest:async e=>{const{spaceId:t,navigableBlockId:i,collectionId:s,shouldLoadOlderActivities:n,shouldLoadNewerActivities:a,filterDateRange:o,filterActivityTypes:r,hasOlderActivities:d,activityIds:l}=e,c=Z.ZP.startLoading();a?await p.A(this.environment,{store:this.stores.activityUpdatesStore,activityIds:l,spaceId:t,filterActivityTypes:r,filterDateRange:o,navigableBlockId:i,collectionId:s}):n&&d&&await p.h(this.environment,{store:this.stores.activityUpdatesStore,activityIds:l,spaceId:t,filterActivityTypes:r,filterDateRange:o,navigableBlockId:i,collectionId:s}),Z.ZP.endLoading(c)},render:(t,n,a)=>{var d,p;const{activityIds:g}=this.stores.activityUpdatesStore.state;if(t)return(0,U.jsx)("div",{style:this.getPlaceholderContentStyle(),children:(0,U.jsx)(u.FormattedMessage,{defaultMessage:"Something went wrong.",id:"activityUpdate.unknownErrorLoadingActivities.message"})});const S=(0,h.oI)(),M=(0,x.Y)("supportsNativeHome"),w={spaceId:e,userId:v,navigableBlockId:b,collectionId:i,filterDateRange:c,filterActivityTypes:l},j=M&&0===g.length&&!a?f.IS(w):g;if(M&&a&&f.HB(w,g),0===j.length&&!a)return(0,U.jsxs)("div",{children:[S&&this.renderSearchFilters(),(0,U.jsx)(O.B,{areaHeight:window.innerHeight})]});const C=this.getActivityModels(j),k=this.stores.activityUpdatesStore.state,Z=0===k.filterActivityTypes.length&&void 0===k.filterDateRange.ending&&void 0===k.filterDateRange.starting,T=0===C.length&&!m&&a;return(0,U.jsxs)("div",{children:[S&&this.renderSearchFilters(),(0,U.jsxs)("div",{style:T?this.getPlaceholderContentStyle():this.getContentStyle(),className:T?"":"notranslate",children:[T?null===(d=(p=this.props).empty)||void 0===d?void 0:d.call(p,{hasFiltersOn:!Z}):null,(0,U.jsx)("section",{role:"feed",children:C.map(((e,t,i)=>{const n=i.length-1===t,a="notifications_tab"===s?{tab:"all",source:s}:{tab:"pageUpdatesSidebar",source:s};return(0,U.jsx)(y.LazyActivityUpdate,{activity:e,rootStore:o,isLast:n,tabArgs:a},e.id)}))}),(0,U.jsx)(A.Z,{onChange:e=>{e<200&&a&&!r&&m&&(Z||j.length>0)&&this.stores.activityUpdatesStore.update((e=>({...e,shouldLoadOlderActivities:!0})))},children:!a&&m?this.renderSpinner(!0):null})]})]})}})}renderSpinner(e){return(0,U.jsx)("div",{style:this.getSpinnerStyle(e),children:(0,U.jsx)(T.Z,{})})}startMessageListeners(){const{navigableBlock:e,collectionId:t}=this.props,i=null==e?void 0:e.id;if(i){const e=(0,d.bS)(i);this.navigableBlockListenerReference=v.Z.addListener(e,this.handleNavigableBlockEmit,void 0,this.environment)}if(t){const e=(0,d.Cy)(t);this.collectionListenerReference=v.Z.addListener(e,this.handleCollectionEmit,void 0,this.environment)}}stopMessageListeners(){this.navigableBlockListenerReference&&(v.Z.removeListener(this.navigableBlockListenerReference,this.environment),this.navigableBlockListenerReference=void 0),this.collectionListenerReference&&(v.Z.removeListener(this.collectionListenerReference,this.environment),this.collectionListenerReference=void 0)}getActivityModel(e){const{currentUserStore:t,currentSpaceStore:i}=S.default.state;if(!t||!i)return;const s=(0,m.No)(i,e,i.id).getModel();return s&&!s.invalid?s:null}getActivityModels(e){return r.oA(e.map((e=>this.getActivityModel(e))))}getContentStyle(){return{minHeight:this.environment.device.isMobile?void 0:"75vh"}}getPlaceholderContentStyle(){const{device:e}=this.environment;return{...this.getContentStyle(),paddingTop:e.isMobile?64:void 0,minHeight:e.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:this.theme.mediumTextColor,flexDirection:"column",flex:"1 1 0%"}}getSpinnerStyle(e){return{...this.getPlaceholderContentStyle(),minHeight:e?64:220}}getFilterDataForTracking(){var e,t;const{filterActivityTypes:i,filterDateRange:s}=this.stores.activityUpdatesStore.state;return{activityTypes:i,dateRange:{start:null===(e=s.starting)||void 0===e?void 0:e.start_date,end:null===(t=s.ending)||void 0===t?void 0:t.start_date}}}}D.displayName="ActivityUpdates";const N=(0,u.injectIntl)(D)},61208:(e,t,i)=>{i.d(t,{Z:()=>o});i(67294);var s=i(24405),n=i(96640),a=i(85893);function o(e){window.__c={n:"MobileUpdatesModalEmptyTab"};const{message:t,title:i}=e,o=(0,s.yK)((e=>({wrapper:{textAlign:"center",paddingLeft:20,paddingRight:20,height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",minHeight:220},icon:{width:48,fill:e.mediumTextColor},message:{fontSize:14,color:e.lightTextColor,marginTop:2,marginBottom:4,maxWidth:380},title:{fontSize:14,fontWeight:500,color:e.mediumTextColor,maxWidth:380}})),[]),r=e.icon||n.r;return(0,a.jsxs)("div",{style:o.wrapper,children:[(0,a.jsx)("div",{style:{paddingBottom:12},children:r(o.icon)}),(0,a.jsx)("div",{style:o.title,children:i}),(0,a.jsx)("div",{style:o.message,children:t})]})}},59878:(e,t,i)=>{i.d(t,{Z:()=>_});i(57658),i(30541);var s=i(67294),n=i(83355),a=i(480),o=i(49085),r=i(72126),d=i(44615),l=i(65311),c=i(63143),u=i(5366),p=i(54642),g=i(17659),m=i(39699),h=i(18245);const f={};var y=i(17652),v=i(65598),x=i(51811),b=i(77907),S=i(2688),M=i(5162),w=i(80444),j=i(88632),C=i(35661),k=i(4761),Z=i(77137),T=i(43145),I=i(70268),A=i(85893);const P={mentions:!0,archive:!1};function F(e){window.__c={n:"NotificationPerformanceMeasurer"};const t=(0,a.O7)();return(0,s.useEffect)((()=>{void 0!==e.requestId&&function(e,t){if(!(e in f))return;const i=f[e];if(i.measured)return;i.measured=!0;const{startTime:s,size:n,type:a}=i;h.default.measure({metricName:"notification_render",startTime:s},{environment:t,data:{size:n,type:a}})}(e.requestId,t)}),[e.requestId,t]),(0,A.jsx)(A.Fragment,{children:e.children})}class R extends n.Z{constructor(){super(...arguments),this.storeTypes={size:o.default.createClass(20),checkpoint:o.default.createClass(Math.random())},this.renderRequest=(e,t,i,s,n)=>{const a=this.renderRequestInner(e,t,i,s);return(0,A.jsx)(F,{requestId:n,children:a})},this.renderRequestInner=(e,t,i,s)=>{const n=w.default.state.currentSpaceStore;if(!n||t)return(0,A.jsx)("div",{style:this.getPlaceholderContentStyle(),children:(0,A.jsx)(u.FormattedMessage,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})});const a=(0,M.Y)("supportsNativeHome");let o=a?i??x.Tj(e):i;if(a&&i&&x.yW(e,i),"mentions"===k.ZP.state.currentTab&&k.ZP.state.showOnlyUnreadNotifications&&(o=k.ZP.state.unreadNotificationIds),!o)return(0,A.jsx)("div",{style:this.getContentStyle(),children:(0,A.jsx)(I.B,{areaHeight:window.innerHeight})});const d=o.map((e=>C.t1.createChildStore(n,{table:l.uX,id:e}))),c=[],p=r.oA(d.map((e=>{const t=e.getValue();if(!t)return;if(t.invalid)return;if(t.visited&&P[this.props.type]||!t.visited&&"archive"===this.props.type)return;const i=v.sl(e);if(!i||!i.isReady())return;const s=i.getModel();if(s){if(!s.invalid)return{activity:s,notification:t};c.push(t)}else c.push(t)})));this.markUnreadNotificationsAsRead(c,n);const g=this.stores.size.state,m=0===p.length,h=p.some((e=>{let{notification:t}=e;return!t.read})),f=h&&p.some((e=>{let{notification:t}=e;return t.read}));"mentions"===k.ZP.state.currentTab?k.ZP.setState({...k.ZP.state,isCurrentTabEmpty:m,containsBothReadAndUnreadNotifications:f,containsUnreadNotifications:h}):k.ZP.setState({...k.ZP.state,isCurrentTabEmpty:m});const S=(0,y.H)();return(0,A.jsxs)("div",{style:m?this.getPlaceholderContentStyle():this.getContentStyle(),children:[m&&this.props.empty,(0,A.jsx)("section",{role:"feed",className:"notranslate",children:S?(0,A.jsx)(b.LazyNotificationGroups,{notifications:p,rootStore:n,source:this.props.source,tab:this.props.tab}):p.map(((e,t,i)=>{let{activity:s,notification:a}=e;const o=i.length-1===t,r={source:this.props.source,tab:this.props.tab,notification:a};return(0,A.jsx)(b.LazyActivityNotification,{activity:s,rootStore:n,isLast:o,tabArgs:r,useInboxRedesign:!1},s.id)}))}),(0,A.jsx)(T.Z,{onChange:e=>{e<200&&o&&o.length>=g&&this.stores.size.setState(o.length+20)},children:!o&&(0,A.jsx)(I.B,{areaHeight:window.innerHeight})})]})},this.handleActivityEmit=(e,t)=>{String(t).includes("unreadCount")||this.stores.checkpoint.setState(Math.random())},this.handleActivityEmitThrottled=r.P2(this.handleActivityEmit,1e3),this.handleNotificationEmit=c.YX(this.handleActivityEmitThrottled),this.notificationListenerReference=void 0,this.markUnreadNotificationsAsRead=(e,t)=>{const i=e.filter((e=>!e.read));0!==i.length&&m.createAndCommit({userAction:"NotificationUpdates.unreadNotificationNotRendered",environment:this.environment,perform:e=>{for(const s of i)g.$h({notification:s,rootStore:t,transaction:e,read:!0})}})}}willMount(){this.startMessageListeners()}willUnmount(){this.stopMessageListeners()}renderComponent(){return j.Z.state.online?this.renderOnline():this.renderOffline()}renderOffline(){return(0,A.jsx)("div",{style:this.getPlaceholderContentStyle(),children:(0,A.jsx)("div",{children:(0,A.jsx)(u.FormattedMessage,{defaultMessage:"Please go online to view updates.",id:"notificationUpdates.offline.message"})})})}renderOnline(){const{currentUserStore:e,currentSpaceStore:t}=w.default.state;if(!e||!t)return;const i=t.id,s=this.stores.size.state,n=this.stores.checkpoint.state,a=this.props.type,o=e.id,r=(0,y.H)();return(0,A.jsx)(Z.Z,{throttle:1e3,request:{spaceId:i,size:s,type:a,checkpoint:n},performRequest:async e=>{let{spaceId:t,size:i,type:s}=e;const n=k.ZP.startLoading();var a,o;o={size:i,type:s},(a=n)in f||(f[a]={measured:!1,startTime:performance.now(),size:o.size,type:o.type});const d=r&&"mentions"===s?await p.getNotificationLogV2(this.environment,{spaceId:t,size:i,type:s}):await p.getNotificationLog(this.environment,{spaceId:t,size:i,type:s});if(k.ZP.endLoading(n),"failed"===d.type)throw d.error;if("mentions"===k.ZP.state.currentTab&&k.ZP.state.showOnlyUnreadNotifications){const e=await g.Qy({environment:this.environment}),t=[...k.ZP.state.unreadNotificationIds];for(const i of e)t.includes(i)||t.unshift(i);k.ZP.setState({...k.ZP.state,unreadNotificationIds:t})}return{notificationIds:d.data.notificationIds,requestId:n}},render:(e,t,s)=>this.renderRequest({spaceId:i,userId:o,type:a},e,null==t?void 0:t.notificationIds,s,null==t?void 0:t.requestId)})}startMessageListeners(){const{currentUserStore:e}=w.default.state;if(e){const t=(0,d.Lp)(e.id);this.notificationListenerReference=S.Z.addListener(t,this.handleNotificationEmit,void 0,this.environment)}}stopMessageListeners(){this.notificationListenerReference&&(S.Z.removeListener(this.notificationListenerReference,this.environment),this.notificationListenerReference=void 0)}getContentStyle(){const{device:e}=this.environment;return{minHeight:e.isMobile||"mentions"===this.props.type?void 0:"75vh"}}getPlaceholderContentStyle(){const{device:e}=this.environment;return{...this.getContentStyle(),paddingTop:e.isMobile?64:void 0,minHeight:e.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:this.theme.regularTextColor,overflow:"hidden"}}}R.displayName="NotificationUpdates";const _=R},55064:(e,t,i)=>{i.d(t,{Z:()=>C});var s=i(67294),n=i(83355),a=i(97880),o=i(51454),r=i(5366),d=i(17659),l=i(18957),c=i(24677),u=i(98742),p=i(89224),g=i(74948),m=i(24646),h=i(38676),f=i(36391),y=i(96049),v=i(31792),x=i(45325),b=i(88923),S=i(6685),M=i(26388),w=i(85893);class j extends n.Z{constructor(){super(...arguments),this.didDragMove=!1,this.storeTypes={mouseStore:v.Z},this.renderTooltip=()=>{const e=this.isSidebarExpanded(),t=this.theme.mediumInvertedTextColor;return(0,w.jsxs)("div",{style:{textAlign:"center"},children:[(0,w.jsx)(r.FormattedMessage,{defaultMessage:"Drag <invertedcolor>to resize</invertedcolor>",id:"sidebarResizer.tooltip.dragMessage",values:{invertedcolor:e=>(0,w.jsx)("span",{style:{color:t},children:e})}}),(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)(r.FormattedMessage,{defaultMessage:"Click <invertedcolor>to {expanded, select, true {close} other {lock open}}</invertedcolor>",id:"sidebarResizer.clickToToggleSidebar.message",values:{expanded:e,invertedcolor:e=>(0,w.jsx)("span",{style:{color:t},children:e})}})]})]})},this.handleMouseEnter=e=>{h.ck.setState(e.clientY)},this.handleMouseMove=()=>{this.updateResizingStore({isResizerHovered:!0})},this.handleMouseLeave=()=>{this.updateResizingStore({isResizerHovered:!1})},this.handleDragStart=()=>{c.ZH(this.environment),this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!0}),this.didDragMove=!1,this.updateResizingStore({...h.cY.state,isResizing:!0})},this.handleDragMove=e=>{const{type:t}=this.props;switch(p.clear(this.environment),this.didDragMove=!0,t){case"page":g.setWidth({width:this.calculateWidth(e.currentX),environment:this.environment});break;case"update":g.setUpdateWidth({width:this.calculateWidth(e.currentX),environment:this.environment});break;case"peek":g.setPeekWidth({width:this.calculateWidth(e.currentX),environment:this.environment});break;case"inbox":x.ZP.update((t=>({...t,width:this.calculateWidth(e.currentX)})));break;default:(0,a.t1)(t)}},this.handleDragEnd=()=>{const{type:e}=this.props;if(!this.didDragMove){switch(e){case"page":g.setExpand({environment:this.environment,isExpanded:!h.gV.state,from:"sidebar_resizer"}),h.TC.setState(!1);break;case"update":g.setUpdateExpand({environment:this.environment,isExpanded:!(0,m.Sx)(this.environment),from:"drag"});break;case"peek":l.xv(this.environment,"resizer_click");break;case"inbox":d.qQ({environment:this.environment,open:!x.ZP.isOpen()});break;default:(0,a.t1)(e)}this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1})}this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!1}),this.updateResizingStore({isResizing:!1})},this.handleDragCancel=()=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!1}),this.updateResizingStore({isResizing:!1})}}renderComponent(){const{device:e}=this.environment,{type:t}=this.props,i=this.getTooltipX(),s=h.ck.state;if(!y.Z.state&&!e.isChromebook)return(0,w.jsx)(M.Z,{renderTooltip:this.renderTooltip,originRect:new DOMRect(i,s,0,0),delayThreshold:500,placement:"page"===t||"inbox"===t?M.Z.Placement.Right:M.Z.Placement.Left,originGap:10,render:e=>(0,w.jsx)("div",{style:this.getWrapStyle(),...(0,u.Z)(e,{onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter}),children:(0,w.jsx)(S.Z,{onDraggableDragStart:this.handleDragStart,onDraggableDragMove:this.handleDragMove,onDraggableDragEnd:this.handleDragEnd,onDraggableDragCancel:this.handleDragCancel,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,w.jsx)("div",{style:this.getStyle(),...e})})})})}get minWidth(){const{type:e}=this.props;switch(e){case"page":return h.nP;case"update":return f.AO;case"peek":return b.sidePeekMinWidth;case"inbox":return 320;default:(0,a.t1)(e)}}get maxWidth(){const{type:e}=this.props,t=window.innerWidth;switch(e){case"page":return 480;case"update":return Math.min(t/2,m.Nc);case"peek":return t>2*b.sidePeekMinWidth?t/1.5:t;case"inbox":return 420;default:(0,a.t1)(e)}}calculateWidth(e){const{type:t}=this.props;let i;switch(t){case"page":i=e;break;case"inbox":i=e-(h.gV.state?h.GZ.state:0);break;case"peek":case"update":i=window.innerWidth-e;break;default:(0,a.t1)(t)}return i>this.maxWidth?this.maxWidth:i<this.minWidth?this.minWidth:i}getWidth(){const{type:e}=this.props;switch(e){case"page":return h.GZ.state;case"inbox":return x.ZP.getPanelWidth();case"update":return f.ZP.state.width;case"peek":return b.default.state.preferredSidePeekWidth;default:(0,a.t1)(e)}}updateResizingStore(e){const{type:t}=this.props;switch(t){case"page":h.cY.update((t=>({...t,...e})));break;case"update":f.ZP.update((t=>({...t,...e})));break;case"inbox":x.ZP.update((t=>({...t,...e})));break;case"peek":break;default:(0,a.t1)(t)}}getTooltipX(){const{type:e}=this.props,t=this.getWidth();switch(e){case"page":return t;case"inbox":return h.GZ.state+x.ZP.getPanelWidth();case"peek":case"update":return window.innerWidth-t;default:(0,a.t1)(e)}}isSidebarExpanded(){const{type:e}=this.props;switch(e){case"page":return(0,m.in)(this.environment);case"update":return(0,m.Sx)(this.environment);case"peek":return b.default.state.open;case"inbox":return x.ZP.isOpen();default:(0,a.t1)(e)}}getWrapStyle(){const{type:e}=this.props,t=(0,m.in)(this.environment);return{position:"absolute",left:"peek"===e?0:void 0,right:"peek"!==e?0:void 0,width:0,flexGrow:0,zIndex:"peek"===e?o.YO:1,top:t?0:-1,bottom:t?0:-1,pointerEvents:"auto"}}getStyle(){return{cursor:"col-resize",height:"100%",width:12,marginLeft:"update"===this.props.type?-f.ZP.state.width:-6}}}j.displayName="SidebarResizer";const C=j},64536:(e,t,i)=>{i.r(t),i.d(t,{PageAnalyticsPageOptOut:()=>T,TopbarPageAnalyticsOptOutMenu:()=>Z,TopbarPageAnalyticsOptOutMenuStore:()=>k,pageAnalyticsMenu:()=>C});i(67294);var s=i(480),n=i(86628),a=i(49085),o=i(83176),r=i(18442),d=i(5366),l=i(62967),c=i(97627),u=i(19037),p=i(18514),g=i(74948),m=i(36391),h=i(80444),f=i(73420),y=i(53437),v=i(72495),x=i(42402),b=i(55422),S=i(60526),M=i(85893);const w=(0,d.defineMessages)({pageAnalyticsName:{id:"action.pageAnalytics.name",defaultMessage:"Page analytics"},viewAnalyticsName:{id:"action.viewAnalytics.name",defaultMessage:"View analytics"},privacySettingsName:{id:"action.privacySettings.name",defaultMessage:"Privacy settings"}}),j=e=>{const t=e.blocks[0];if(!t)return!1;return(0,S.W2)({canEditPage:t.canEdit(),device:e.environment.device})},C=(0,l.MV)({key:"page analytics menu",displayName:w.pageAnalyticsName,analyticsName:w.pageAnalyticsName.defaultMessage,validators:[u.DF],svg:o.z,subActions:e=>[{key:"view analytics",render:e=>(0,M.jsx)(v.Z,{...e}),actions:[(0,l.cN)({key:"view analytics",displayName:w.viewAnalyticsName,analyticsName:w.viewAnalyticsName.defaultMessage,svg:o.z,validators:[j],closeParentMenu:!0,action:()=>{g.handleSidebarButtonClick(e.environment,e.blocks[0],m.gY.Updates,"more_menu"),m.ZP.setState({...m.ZP.state,currentSubTab:m.uF.Analytics})}}),(0,l.cN)({key:"privacy settings",displayName:w.privacySettingsName,analyticsName:w.privacySettingsName.defaultMessage,svg:r.H,validators:[],closeParentMenu:!0,action:e=>{k.setState({isOpen:!0,rect:e.originRect})}})]}]}),k=a.default.createValue({isOpen:!1,rect:void 0}),Z=()=>{window.__c={n:"TopbarPageAnalyticsOptOutMenu"};const e=(0,s.O7)(),t=(0,n.VK)((()=>k.state.isOpen),[]),i=(0,n.VK)((()=>k.state.rect),[]),a=(0,n.VK)((()=>h.default.state.mainEditorCurrentBlockStore),[]);return a?(0,M.jsx)(y.ZP,{popupType:e.device.isMobile?y.ZP.PopupType.SlideUp:y.ZP.PopupType.Popup,alignmentToOrigin:y.ZP.Alignment.Center,open:t,render:()=>(0,M.jsx)("div",{style:{minWidth:360,padding:16},children:(0,M.jsxs)(f.sg,{gap:16,children:[(0,M.jsx)("div",{style:{fontSize:16,fontWeight:500},children:(0,M.jsx)(d.FormattedMessage,{id:"TopbarPageAnalyticsOptOutMenu.heading",defaultMessage:"Privacy settings"})}),(0,M.jsx)(T,{store:a})]})}),originRect:i,onDismiss:()=>k.setState({isOpen:!1,rect:void 0})}):null};function T(e){window.__c={n:"PageAnalyticsPageOptOut"};const t=(0,s.O7)(),i=(0,n.VK)((()=>{const e=h.default.state.currentSpaceViewStore;return null==e?void 0:e.getSettings()}),[]),a=(0,n.VK)((()=>{const t=null==i?void 0:i.page_analytics_opt_out_list;return null==t?void 0:t.includes(e.store.id)}),[i,e.store.id]);return(0,M.jsx)(b.Z,{type:"dropdown",currentOption:a?"do_not_record":"record",options:[{key:"record",label:(0,M.jsx)(d.FormattedMessage,{id:"page_analytics.opt_out.record",defaultMessage:"Record"})},{key:"do_not_record",label:(0,M.jsx)(d.FormattedMessage,{id:"page_analytics.opt_out.do_not_record",defaultMessage:"Don't record"})}],onSelectOption:i=>{"do_not_record"===i?c.kY(t,e.store.id):c.pu(t,e.store.id)},isMobile:t.device.isMobile,title:(0,M.jsx)(d.FormattedMessage,{id:"page_analytics.opt_out.title",defaultMessage:"My view history"}),caption:(0,M.jsx)(d.FormattedMessage,{id:"page_analytics.opt_out.caption",defaultMessage:"Page editors can see my view history for this page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,M.jsx)(x.Z,{external:!0,href:(0,p.UY)("guides.pageAnalytics"),children:e})}}),captionStyle:{maxWidth:270}})}},70268:(e,t,i)=>{i.d(t,{B:()=>o});i(67294);var s=i(24405),n=i(36596),a=i(85893);function o(e){window.__c={n:"UpdateSidebarLoadingSkeleton"};let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const i=(0,s.yK)((e=>({skeletonRect:{height:8,borderRadius:3,margin:10,backgroundColor:e.lightDividerColor},skeletonCircle:{display:"flex",width:28,height:28,marginRight:8,backgroundColor:e.lightDividerColor,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),o=[...Array(t)].map(((e,t)=>(0,a.jsxs)("div",{style:i.skeletonSection,children:[(0,a.jsx)(n.Z,{style:i.skeletonCircle}),(0,a.jsxs)("div",{style:{width:"80%"},children:[(0,a.jsx)(n.Z,{style:{width:"80%",...i.skeletonRect,marginTop:0}}),(0,a.jsx)(n.Z,{style:{width:"50%",...i.skeletonRect}}),(0,a.jsx)(n.Z,{style:{width:"60%",...i.skeletonRect}}),(0,a.jsx)(n.Z,{style:{width:"50%",...i.skeletonRect}})]})]},t)));return(0,a.jsx)("div",{children:o})}},35767:(e,t,i)=>{i.d(t,{J:()=>te});var s=i(67294),n=i(74725),a=i(480),o=i(86628),r=i(24405),d=i(7057),l=i(42875),c=i(17880),u=i(72126),p=i(80503),g=i(82990),m=i(5366),h=i(54564),f=i(17707),y=i(34047),v=i(43250),x=i(33929),b=i(65598),S=i(77546),M=i(24646),w=i(36391),j=i(34859),C=i(80444),k=i(24229),Z=i(29798),T=i(32163),I=i(53336),A=i(36591),P=i(42853),F=i(74948),R=i(52275),_=i(89728),U=i(53437),B=i(72495),L=i(64921),O=i(85893);function D(){window.__c={n:"UpdateSidebarTabCommentsSegmentedControl"};const e=(0,o.VK)((()=>w.ZP.state.commentsMode),[]),t=(0,r.yK)((e=>({container:{background:e.buttonHoveredBackground,width:"calc(100% - 32px)",height:36,borderRadius:10,display:"flex",margin:"10px 16px 6px 16px",marginTop:20,padding:4,gap:2,pointerEvents:"auto"},defaultButton:{borderRadius:8,fontSize:13,fontWeight:g.Z.fontWeight.medium,textAlign:"center",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:1.8,color:e.regularTextColor,letterSpacing:-.08},selectedButton:{fontWeight:g.Z.fontWeight.semibold,background:e.segmentedControlActiveBackground,border:`0.5px solid ${e.outlineButtonBorder}`}})),[]);return(0,O.jsxs)("div",{style:t.container,className:v.rG8,children:[(0,O.jsx)(L.Z,{style:{...t.defaultButton,...e===w.F7.Unresolved?t.selectedButton:{}},onClick:()=>{F.setUpdateSidebarCommentsMode(w.F7.Unresolved)},children:(0,O.jsx)("span",{children:(0,O.jsx)(m.FormattedMessage,{id:"updateSidebarTabCommentsSegmentedControl.option.open",defaultMessage:"Open"})})}),(0,O.jsx)(L.Z,{style:{...t.defaultButton,...e===w.F7.Resolved?t.selectedButton:{}},onClick:()=>{F.setUpdateSidebarCommentsMode(w.F7.Resolved)},children:(0,O.jsx)("span",{children:(0,O.jsx)(m.FormattedMessage,{id:"updateSidebarTabCommentsSegmentedControl.option.resolved",defaultMessage:"Resolved"})})})]})}const N=[w.F7.Unresolved,w.F7.Resolved],V={[w.F7.Unresolved]:v.oc0,[w.F7.Resolved]:v.Y7r},K=(0,m.defineMessages)({[w.F7.Unresolved]:{id:"updateSidebar.comments.mode.unresolvedOption",defaultMessage:"Open comments"},[w.F7.Resolved]:{id:"updateSidebar.comments.mode.resolvedOption",defaultMessage:"Resolved comments"}}),E=(0,m.defineMessages)({[w.F7.Unresolved]:{id:"updateSidebar.comments.filter.button.unresolvedMode",defaultMessage:"Open"},[w.F7.Resolved]:{id:"updateSidebar.comments.filter.button.resolvedMode",defaultMessage:"Resolved"}});function z(){window.__c={n:"UpdateSidebarCommentsFilterControl"};return(0,a.O7)().device.isMobile?(0,O.jsx)(D,{}):(0,O.jsx)(H,{})}function H(){window.__c={n:"DesktopUpdateSidebarCommentsFilterControl"};const[e,t]=(0,s.useState)(!1),{commentsMode:i}=(0,o.Kw)(w.ZP),n=(0,r.yK)((e=>({container:{display:"flex",flexDirection:"column"},commentsHeader:{display:"flex",justifyContent:"space-between",borderBottom:`1px solid ${e.regularDividerColor}`,alignItems:"center",pointerEvents:"auto"},label:{fontSize:14,color:e.regularTextColor,fontWeight:g.Z.fontWeight.medium,display:"flex",alignItems:"center",padding:"12px 12px 12px 16px"},toggleButton:{justifyContent:"center",display:"flex",color:e.mediumTextColor},toggleButtonContainer:{paddingLeft:12,paddingRight:8,display:"flex"},chevronIcon:{width:10,marginLeft:4,fill:e.lightIconColor},getNotifiedContainer:{paddingRight:6,paddingLeft:6}})),[]),a=(0,s.useCallback)((()=>(0,O.jsx)(T.Z,{type:T.i.Vertical,initialFocus:void 0,sections:[{key:"commentFilter",render:e=>(0,O.jsx)(B.Z,{...e}),items:N.map((e=>({key:e,render:t=>(0,O.jsx)(R.Z,{...t,className:V[e],title:x.default.formatMessage(K[e]),right:(0,O.jsx)("div",{style:{width:14,opacity:i===e?1:0},children:(0,A.e)()})}),action:()=>{F.setUpdateSidebarCommentsMode(e),t(!1)}})))}]})),[i]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)("div",{style:n.container,children:(0,O.jsxs)("div",{style:n.commentsHeader,className:v.I9j,children:[(0,O.jsx)("div",{style:n.label,children:(0,O.jsx)(m.FormattedMessage,{id:"updateSidebar.header.commentsLabel",defaultMessage:"Comments"})}),(0,O.jsx)("div",{style:n.toggleButtonContainer,className:v.CBT,children:(0,O.jsx)(U.ZP,{popupType:U.ZP.PopupType.Popup,open:e,origin:(0,O.jsxs)(_.Z,{style:n.toggleButton,onClick:()=>{t(!0)},children:[x.default.formatMessage(E[i]),(0,P.i)(n.chevronIcon)]}),placementToOrigin:U.ZP.Placement.Bottom,alignmentToOrigin:U.ZP.Alignment.Center,originGap:4,render:a,onDismiss:()=>{t(!1)}})})]})})})}var W=i(21202),G=i(92120),$=i(77907),q=i(35661),Y=i(28992);const X=s.forwardRef(((e,t)=>{window.__c={n:"UpdateSidebarDiscussionItem"};const{currentBlockStore:i,discussion:n,showAllRepliesAfterTimestamp:d,focused:l,isLast:c,location:u}=e,p=(0,o.VK)((()=>k.Z.state.open&&k.Z.state.discussionIds||[]),[]),g=(0,a.O7)();(0,s.useEffect)((()=>{var e;if(l){G.Z.setState({source:"update_sidebar",discussionIds:[n.id]});const e=setTimeout((()=>{var e;(null===(e=G.Z.state)||void 0===e||null===(e=e.discussionIds)||void 0===e?void 0:e[0])===n.id&&f.AM([n.id])}),1500);return()=>{clearTimeout(e)}}(null===(e=G.Z.state)||void 0===e||null===(e=e.discussionIds)||void 0===e?void 0:e[0])===n.id&&G.Z.setState({discussionIds:[]})}),[l,n,g]);const m=(0,o.VK)((()=>{var e;return(null===(e=G.Z.state)||void 0===e?void 0:e.discussionIds)||[]}),[]),h=n.id,{parentId:x,currentSpaceId:b}=(0,o.VK)((()=>({parentId:n.getParentId(),currentSpaceId:n.getSpaceId()})),[n]),S=x?q.G.createChildStore(n,{table:W.iU,id:x}):void 0,M=p.includes(h),w=m.includes(h),j=(0,r.yK)((e=>({discussionContainer:{paddingTop:g.device.isMobile?4:10,borderBottom:c||g.device.isMobile?void 0:`1px solid ${e.regularDividerColor}`,transition:"background 300ms ease"},replyButton:{color:e.blueColor,marginLeft:23,fontSize:14},hoveredStyle:{background:"sidebar"===u?e.hoveredDiscussionBackground:void 0},pressedStyle:{background:"sidebar"===u?e.focusDiscussionBackground:void 0}})),[u,c,g]);if(!S||!b)return null;const C=(0,O.jsx)("div",{className:`sidebar-discussion-${h} ${v.s$o}`,onClick:e.onClick,onMouseEnter:e.onMouseEnter,ref:t,style:{...j.discussionContainer,...l||w?j.hoveredStyle:{},...M?j.pressedStyle:{}},children:(0,O.jsx)($.LazyDiscussion,{store:n,blockStore:i,format:y.O2.Sidebar,isFirst:!1,isOnly:!1,showResolveButtonByDefaultIfPossible:!1,discussionLocation:"updates_sidebar",showAllRepliesAfterTimestamp:d})});return(0,O.jsx)(Y.Z,{allowTextSelection:!0,title:C,style:{marginLeft:-14,marginRight:-14,width:"calc(100% + 28px)",lineHeight:void 0,cursor:"pointer"}})}));function J(e){window.__c={n:"UpdateSidebarDiscussionSection"};const{firstItemId:t}=e,i=(0,o.VK)((()=>{var e;return null===(e=G.Z.state)||void 0===e?void 0:e.discussionIds.some((e=>e===t))}),[t]),s=(0,o.VK)((()=>k.Z.state.open&&k.Z.state.discussionIds&&k.Z.state.discussionIds.some((e=>e===t))),[t]),n=(0,r.yK)((t=>({hoveredStyle:{background:"sidebar"===e.location?t.hoveredDiscussionBackground:void 0},pressedStyle:{background:"sidebar"===e.location?t.focusDiscussionBackground:void 0},basicDesktopTitleStyle:{paddingLeft:16,paddingTop:16,marginBottom:0,marginTop:0,fontSize:12,transition:"background 300ms ease"},mobileTitleStyle:{fontSize:13,fontWeight:g.Z.fontWeight.medium,paddingBottom:0,textTransform:"unset",marginTop:-12}})),[e.location]);return(0,O.jsx)(B.Z,{desktopTitleStyle:{...n.basicDesktopTitleStyle,...i?n.hoveredStyle:{},...s?n.pressedStyle:{}},mobileTitleStyle:n.mobileTitleStyle,disableDesktopPadding:!0,disableMobileBorders:!0,...e})}var Q=i(70268);const ee=new Z.Z;function te(e){window.__c={n:"UpdateSidebarTabComments"};const{timeMounted:t,location:i}=e,Z=(0,a.O7)(),[A,P]=(0,s.useState)(!1),F=(0,o.VK)((()=>C.default.state.mainEditorCurrentBlockStore),[]),R=(0,o.VK)((()=>Z.currentUser.id),[Z]),_=(0,o.VK)((()=>(0,y.DF)({blockStore:F,ignoreAfterTime:t,currentUserId:R})),[F,t,R]),[U]=(0,o.AF)(w.ZP),B=(0,o.VK)((()=>(0,M._c)(Z)),[Z]),L=(0,o.VK)((()=>k.Z.state.open&&k.Z.state.discussionIds||[]),[]),{resolved:D,unresolved:N}=(0,o.VK)((()=>(0,b.bB)(_)),[_]),V=U.commentsMode===w.F7.Unresolved,K=V?N:D,E=K.map((e=>e.id));(0,s.useEffect)((()=>{if("popup"===i&&A)return()=>{f.AM(E)}}),[i,E,A]);const H=(0,r.yK)((e=>({commentsEmptyStyle:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",color:e.mediumTextColor,fontSize:14,position:"relative",background:e.contentBackground,marginRight:B?2:0,pointerEvents:"auto",paddingTop:10},commentsContentStyle:{position:"relative",minHeight:0,display:"flex",flexDirection:"column",background:e.contentBackground,marginRight:B?2:0,pointerEvents:"auto",height:"100%"},commentsIconStyle:{height:54,width:54,marginBottom:12,fill:e.mediumIconColor}})),[B]),W=(0,s.useRef)(null),G=(0,o.VK)((()=>(0,M.Sx)(Z)),[Z]);(0,n.O)({active:G,closeHandler:h.LZ,ref:W});const $=(0,o.VK)((()=>{const e=u.vM(K,(e=>{const t=(0,y.Qg)({recordStore:e,currentUserId:R});return t?(0,d.$6)(t.getCreatedTime()):""}));return delete e[""],e}),[K,R]),q=(0,o.VK)((()=>(0,y.W5)(K)),[K]);if((0,s.useEffect)((()=>{A||q||P(!0)}),[A,q]),!F||!$||!A)return(0,O.jsx)(Q.B,{areaHeight:window.innerHeight});if(0===K.length)return(0,O.jsxs)("div",{style:H.commentsContentStyle,children:[(0,O.jsx)(z,{}),(0,O.jsxs)("div",{style:H.commentsEmptyStyle,children:[(0,c.W)(H.commentsIconStyle),(0,O.jsx)("div",{style:{fontWeight:g.Z.fontWeight.semibold,marginBottom:4},children:V?(0,O.jsx)(m.FormattedMessage,{id:"updateSidebar.commentContainer.emptyTitleUnresolved",defaultMessage:"No open comments yet"}):(0,O.jsx)(m.FormattedMessage,{id:"updateSidebar.commentContainer.emptyTitleResolved",defaultMessage:"No resolved comments yet"})}),(0,O.jsx)("div",{style:{width:200,alignSelf:"center"},children:V?(0,O.jsx)(m.FormattedMessage,{id:"updateSidebar.commentContainer.emptyUnresolved",defaultMessage:"Open comments on this page will appear here"}):(0,O.jsx)(m.FormattedMessage,{id:"updateSidebar.commentContainer.emptyResolved",defaultMessage:"Resolved comments on this page will appear here"})})]})]});const Y=Object.keys($).sort().reverse(),te=Y.map(((e,s)=>{const n=(0,d.ZV)({value:{type:"date",start_date:e},date_format:"relative",userTimeZone:(0,l.r)(),intl:x.default.getIntl(),allowRelativeDates:!0}),a=$[e];return{key:e,render:e=>(0,O.jsx)(J,{title:n,firstItemId:a[0].id,location:i,...e}),items:a.map(((e,n)=>({key:e.id,render:o=>(0,O.jsx)(X,{...o,currentBlockStore:F,discussion:e,isFirstInSection:0===n,location:i,isLast:n===a.length-1&&s===Y.length-1,showAllRepliesAfterTimestamp:t}),action:()=>{f.en({discussionId:e.id,currentBlockStore:F,environment:Z,analyticsFrom:"updates_sidebar",currentEl:W.current})}})))}})),ie=te.flatMap((e=>e.items)).findIndex((e=>L.includes(e.key.toString())));return(0,O.jsxs)("div",{style:H.commentsContentStyle,ref:W,children:[(0,O.jsx)(z,{}),(0,O.jsx)(I.Z,{type:j.Z.Y,style:{flexGrow:1,minHeight:0,transform:"translateZ(0px)",zIndex:1,overflow:"hidden auto",marginBottom:0},className:v.Xsh,children:(0,O.jsx)(T.Z,{disableKeyboard:!0,store:ee,type:T.i.Vertical,initialFocus:ie>=0?ie:void 0,scrollElIntoView:e=>{if(e instanceof Element){const t=e.getBoundingClientRect(),i=p.R6(Z.device.isElectronMac),s=window.innerHeight,n=i+50,a=s-n;if(t.height>=a)return;const o=t.top>=n&&t.top<=s,r=o&&t.bottom>=s,d=t.bottom>=n&&t.bottom<=s,l=d&&t.top-n<0,c=o||d,u=.4*t.height;r&&Math.abs(t.top-s)<u?(0,S.Wr)(e,{edgeDist:s-t.height-n,animate:!0}):l&&Math.abs(t.bottom-n)<u?(0,S.Wr)(e,{edgeDist:0,animate:!0}):c||(0,S.Wr)(e,{edgeDist:0,animate:!0})}},sections:te})})]})}},67579:(e,t,i)=>{i.d(t,{f:()=>y});var s=i(67294),n=i(24405),a=i(69651),o=i(73123),r=i(33929),d=i(87279),l=i(33338),c=i(52275),u=i(78140),p=i(32163),g=i(53437),m=i(72495),h=i(91642),f=i(85893);function y(e){window.__c={n:"DateFilter"};const t=(0,n.yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:i,hideAllTime:y}=e,[v,x]=(0,s.useState)(!1),b=o.Hz.filter((e=>!y||"all_time"!==e)).map((t=>{const i=()=>{e.onChangeFilter(t),x(!1)};return{key:t,action:()=>{},render:()=>(0,f.jsx)(c.Z,{focused:!1,onClick:i,title:r.default.formatMessage(o.Rh[t])})}})),S=(0,f.jsx)(l.Z,{on:Boolean(i),wrapStyle:t.pillStyle,icon:(0,a.C)({width:16,marginRight:6,fill:"currentColor"}),title:r.default.formatMessage(o.Rh[i]),onClick:()=>{x(!0)}}),M=[{key:"filters",items:b,render:e=>(0,f.jsx)(m.Z,{...e,title:null,loading:!1})}],w=(0,f.jsx)(u.Z,{menuType:d.og.Popup,header:null,children:(0,f.jsx)(p.Z,{type:p.i.Vertical,initialFocus:0,sections:M})});return(0,f.jsx)(h.Z,{marginAfter:!1,children:(0,f.jsx)(g.ZP,{popupType:g.ZP.PopupType.Popup,placementToOrigin:g.ZP.Placement.Bottom,alignmentToOrigin:g.ZP.Alignment.Start,open:v,render:()=>w,onDismiss:()=>x(!1),keepFocus:!0,origin:S,preventScaleTransition:!0,style:t.popup})})}},83420:(e,t,i)=>{i.d(t,{TL:()=>u,nc:()=>c,ue:()=>l});var s=i(66897),n=i(54368),a=i(77420),o=i(19889),r=i(97880),d=i(35661);function l(e){const{parentStore:t,pointer:i}=e,n=(0,d.Kv)(t,i).getValue();if(n)return(0,s.LU)({table:i.table,value:n})}function c(e){const{parentStore:t,pointer:i}=e;return i.table===a.cZ?d.Qx.createChildStore(t,i):i.table===o.KJ?d.U6.createChildStore(t,i):i.table===n.y?d.fg.createChildStore(t,i):void(0,r.t1)(i)}function u(e){return e.table===a.cZ?(0,s.ON)(e.getValue()):e.table===o.KJ?(0,s.m3)(e.getValue()):e.table===n.y?(0,s.I4)(e.getValue()):void(0,r.t1)(e)}},51811:(e,t,i)=>{i.d(t,{EX:()=>s,HB:()=>d,IS:()=>l,Tj:()=>r,yW:()=>o});let s=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.MobileBottomBarPhone=2]="MobileBottomBarPhone",e[e.MobileBottomBarTablet=3]="MobileBottomBarTablet",e[e.TopbarMobile=4]="TopbarMobile",e[e.RenderAsPage=5]="RenderAsPage",e}({});const n=new Map,a=new Map;function o(e,t){n.set(c(e),t)}function r(e){return n.get(c(e))}function d(e,t){a.set(u(e),t)}function l(e){return a.get(u(e))??[]}function c(e){return Object.keys(e).sort().map((t=>{const i=e[t];return JSON.stringify(i)})).join("-")}function u(e){return Object.keys(e).sort().map((t=>{const i=e[t];return JSON.stringify(i)})).join("-")}},35314:(e,t,i)=>{i.d(t,{e:()=>o});var s=i(67294),n=i(86628),a=i(77794);function o(){const[e,t]=(0,s.useState)(0),[i]=(0,s.useState)((()=>new a.E)),o=(0,s.createRef)();return(0,s.useEffect)((()=>{o.current&&i.observe(o.current)}),[o,i]),(0,n.VK)((()=>{e!==i.rect.state.width&&t(i.rect.state.width)}),[e,i.rect]),[o,e]}},24764:(e,t,i)=>{i.d(t,{t0:()=>M,Zk:()=>b,CA:()=>x});i(67294);var s=i(45433),n=i(98519),a=i(97880),o=i(5366),r=i(62967),d=i(57883),l=i(50906),c=i(9953),u=i(39699);function p(e){const{environment:t,key:i,selectedKey:s,following:n,followSettings:a,navigableBlockId:o,userId:r,spaceId:p,from:g}=e;u.createAndCommit({userAction:"UpdateSidebarFollowControl.setFollowing",environment:e.environment,canUndo:!1,perform:t=>{c.Ue({environment:e.environment,table:d.t0,args:{following:n,followSettings:a,navigableBlockId:o,userId:r,spaceId:p},inMemoryRecordCache:e.environment.defaultRecordCache.inMemoryRecordCache,transaction:t})}}),n?l.RJe(t,{from:"page_updates"}):l.ubm(t,{from:"page_updates"}),s!==i&&l.kLN(t,{from:g,navigableBlockId:o,oldSetting:s,newSetting:i})}var g=i(64964),m=i(93405),h=i(64369),f=i(80444),y=i(57538),v=i(85893);function x(e){const{followSettingsKey:t,environment:i,blockStore:n,from:a}=e,r=S({key:"none",selectedKey:t,title:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.repliesAndMentions.label",defaultMessage:"Replies and @mentions"}),environment:i,blockStore:n,from:a}),d=S({key:"comments",selectedKey:t,title:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.allComments.label",defaultMessage:"All comments"}),environment:i,blockStore:n,from:a}),l=S({key:"all",selectedKey:t,title:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.allUpdates.label",defaultMessage:"All updates"}),caption:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.simpleAllUpdates.caption",defaultMessage:"All comments and property changes"}),environment:i,blockStore:n,from:a}),c=n.getAssociatedCollectionStore();if(!c)return[d,r];const u=c.getDatabaseType();if(u===s.iS){return[l,S({key:"important",selectedKey:t,title:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesTasks.label",defaultMessage:"Important updates"}),caption:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesTasks.caption",defaultMessage:"All comments and changes to Status, Assignee, or Due Date"}),environment:i,blockStore:n,from:a}),r]}if(u===s.wW){return[l,S({key:"important",selectedKey:t,title:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesProjects.label",defaultMessage:"Important updates"}),caption:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesProjects.caption",defaultMessage:"All comments and changes to Status or Date"}),environment:i,blockStore:n,from:a}),r]}return[l,S({key:"comments",selectedKey:t,title:(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.onlyCommentsAllComments.label",defaultMessage:"All comments"}),environment:i,blockStore:n,from:a}),r]}function b(e){const{followSettingsKey:t,environment:i,blockStore:s,from:n}=e;return[S({key:"important",selectedKey:t,title:(0,v.jsx)(o.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.allComments.label",defaultMessage:"All comments"}),caption:(0,v.jsx)(o.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.allComments.caption",defaultMessage:"Notified of all comments and @mentions"}),environment:i,blockStore:s,from:n}),S({key:"none",selectedKey:t,title:(0,v.jsx)(o.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.mentionsAndReplies.label",defaultMessage:"Replies and @mentions"}),caption:(0,v.jsx)(o.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.mentionsAndReplies.caption",defaultMessage:"Notified of comment replies and @mentions"}),environment:i,blockStore:s,from:n})]}function S(e){const{key:t,title:i,caption:s,selectedKey:a,environment:o,blockStore:d,from:l}=e,c=M({key:t,userSelectedKey:a}),u={icon:{width:14,height:14},rightWrapper:s?{alignSelf:"flex-start",paddingTop:2}:{}};return{action:(0,r.cN)({key:t,displayName:void 0,analyticsName:t,validators:[],closeParentMenu:!0,action:()=>{const{currentUserRootStore:e}=f.default.state;if(e){const{following:i,followSettings:s}=(0,y.Z)(t),n=e.id,r=d.id,c=d.getSpaceId();p({environment:o,following:i,followSettings:s,navigableBlockId:r,spaceId:c,userId:n,from:l,key:t,selectedKey:a}),"inbox"!==l&&"more_menu"!==l||g.d4({item:{label:w(t)},undoFunc:()=>{const{following:e,followSettings:i}=(0,y.Z)(a);p({environment:o,following:e,followSettings:i,navigableBlockId:r,spaceId:c,userId:n,from:l,key:t,selectedKey:a})}})}},render:e=>(0,v.jsx)(m.Z,{...e,title:(0,v.jsx)(h.Z,{children:i}),caption:s,shouldWrapCaption:!0,right:c?(0,n.k)(u.icon):(0,v.jsx)("div",{style:u.icon}),rightStyle:u.right})}),title:i,isSelectedOption:c}}function M(e){const{key:t,userSelectedKey:i}=e;return"important"===i||"comments"===i?"important"===t||"comments"===t:t===i}function w(e){switch(e){case"none":return(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.subscribedRepliesAndMentionsSuccess.snackbarMessage",defaultMessage:"Subscribed to replies and @mentions"});case"comments":return(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.subscribedAllCommentsSuccess.snackbarMessage",defaultMessage:"Subscribed to all comments"});case"important":return(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.subscribedImportantUpdatesSuccess.snackbarMessage",defaultMessage:"Subscribed to important updates"});case"all":return(0,v.jsx)(o.FormattedMessage,{id:"GetNotifiedDropdown.subscribedAllUpdatesSuccess.snackbarMessage",defaultMessage:"Subscribed to all updates"});default:(0,a.t1)(e)}}},20536:(e,t,i)=>{i.r(t),i.d(t,{GetNotifiedFor:()=>C,NotificationInboxPanel:()=>St,TopbarUpdatesMenu:()=>U,UpdateSidebar:()=>tt});var s=i(67294),n=i(86628),a=i(24405),o=i(82990),r=i(5366),d=i(480),l=i(90792),c=i(42853),u=i(62967),p=i(19719),g=i(48019),m=i(31945),h=i(78140),f=i(89728),y=i(72495),v=i(87279),x=i(98742),b=i(77080),S=i(24764),M=i(57538),w=i(85893);function j(e){var t;window.__c={n:"GetNotifiedDropdown"};const{blockStore:i,from:r,buttonPopupStore:j}=e,C=e.moreProminentStyling??!1,k=(0,d.O7)(),Z=(0,n.VK)((()=>i.isPageBlock()),[i]),T=(0,n.VK)((()=>i.getFollowSettingsKey()),[i]),I=(0,s.useCallback)((()=>p.Z8({environment:k,pageId:i.pointer.id,isCurrentlyFollowing:(0,M.Z)(T).following,from:"page_updates"===r?"page_updates":void 0})),[i.pointer.id,k,T,r]),A=(0,n.VK)((()=>b.default.checkGate("property_updates_notifications")?S.CA({followSettingsKey:T,environment:k,blockStore:i,from:r}):S.Zk({followSettingsKey:T,environment:k,blockStore:i,from:r})),[T,k,i,r]),P=(0,a.yK)((e=>({buttonContainer:{display:"flex",alignItems:"center",color:e.mediumTextColor,padding:C?"4px 10px":4,borderRadius:3,marginRight:C?0:4,fontSize:o.Z.fontSize.UIRegular.desktop},bellIcon:{width:14,height:14,marginRight:4},chevronIcon:{marginLeft:4,width:10,height:10},spacer:{flexGrow:1},footerLabel:{padding:12,backgroundColor:e.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${e.regularDividerColor}`,marginTop:1}})),[C]),F=null===(t=A.find((e=>S.t0({key:e.action.analyticsName,userSelectedKey:T}))))||void 0===t?void 0:t.title;return Z?(0,w.jsx)(m.ZP,{popupType:m.Z4.Popup,alignmentToOrigin:m.vR.End,placementToOrigin:m.pO.Bottom,sameWidthAsOrigin:C,buttonPopupStore:j,render:e=>(0,w.jsx)(h.Z,{menuType:v.og.Popup,minWidth:290,maxHeight:"50vh",children:(0,w.jsx)(g.Z,{context:{blocks:[],environment:k,publicEditMode:void 0},sections:[(0,u.$J)({key:"in-app-notifications-section",render:e=>(0,w.jsx)(y.Z,{...e}),actions:A.map((e=>e.action))})],initialFocus:void 0,onAccept:()=>e.close()})}),renderOrigin:e=>(0,w.jsxs)(f.Z,{...(0,x.Z)(e,{onClick:I}),style:P.buttonContainer,children:[(0,l.t)(P.bellIcon),F,C&&(0,w.jsx)("div",{style:P.spacer}),(0,c.i)(P.chevronIcon)]})}):null}function C(e){window.__c={n:"GetNotifiedFor"};const{navigableBlock:t,from:i,buttonPopupStore:s}=e,d=(0,n.VK)((()=>t.isPageBlock()),[t]),l=(0,a.yK)((e=>({label:{fontSize:o.Z.fontSize.UIRegular.desktop,color:e.regularTextColor,fontWeight:o.Z.fontWeight.medium},container:{padding:"12px 8px 8px 10px"},border:{border:`1px solid ${e.outlineButtonBorder}`,borderRadius:3,marginTop:8}})),[]);return d?(0,w.jsxs)("div",{style:l.container,children:[(0,w.jsx)("div",{style:l.label,children:(0,w.jsx)(r.FormattedMessage,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),(0,w.jsx)("div",{style:l.border,children:(0,w.jsx)(j,{blockStore:t,moreProminentStyling:!0,from:i,buttonPopupStore:s})})]}):null}var k=i(84708),Z=i(80503),T=i(43250),I=i(36391),A=i(81258);const P=new(i(61766).Z);var F=i(66957);function R(){return(0,w.jsx)(r.FormattedMessage,{id:"updateSidebar.header.updatesLabel",defaultMessage:"Updates"})}function _(e){window.__c={n:"UpdateSidebarTabUpdatesHeader"};const t=(0,d.O7)(),{enablePageAnalytics:i,popOutMode:s,navigableBlock:l,inPeekView:c}=e,u=(0,a.yK)((e=>({updatesHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:s?0:Z.R6(t.device.isElectronMac),paddingTop:4,width:s&&!c?"calc(100% - 2px)":"100%",background:c?e.popoverBackground:e.contentBackground,padding:"12px 12px 12px 16px",borderBottom:`1px solid ${e.regularDividerColor}`},label:{fontSize:14,color:e.regularTextColor,fontWeight:o.Z.fontWeight.medium}})),[s,t,c]),p=(0,n.VK)((()=>I.ZP.state.currentSubTab),[]),g=c?P:A.Z;return(0,w.jsxs)("div",{style:{...u.updatesHeaderStyle,...i?{padding:"0 6px"}:{}},className:T.cFM,children:[(0,w.jsx)(C,{navigableBlock:l,from:"page_updates",buttonPopupStore:g}),i?(0,w.jsx)(F.Z,{tabs:[(0,w.jsx)(R,{},"updates"),(0,w.jsx)(r.FormattedMessage,{id:"updateSidebar.header.analyticsLabel",defaultMessage:"Analytics"},"analytics")],selectedIndex:p,onChange:e.onTabChange,style:{...u.label,padding:0,boxShadow:"none"},tabStyle:{padding:"12px 0"}}):(0,w.jsx)("div",{style:u.label,children:(0,w.jsx)(R,{})})]})}function U(e){window.__c={n:"TopbarUpdatesMenu"};const{blockStore:t,spaceStore:i}=e,s=function(e){const{spaceStore:t,blockStore:i}=e,s=(0,n.VK)((()=>{var e,t;return(null==i||null===(e=i.getModel())||void 0===e?void 0:e.isCollectionView())?null===(t=i.getCollectionPointer())||void 0===t?void 0:t.id:void 0}),[i]);if(!t)return;const a=i.id,o=t.id;return{navigableBlockId:a,collectionId:s,spaceId:o}}({blockStore:t,spaceStore:i});return s?(0,w.jsx)(h.Z,{menuType:v.og.Popup,className:T.KLh,header:(0,w.jsx)(_,{navigableBlock:t,enablePageAnalytics:!1,popOutMode:!0,inPeekView:!0}),children:(0,w.jsx)(k.Z,{empty:()=>(0,w.jsx)(B,{}),source:"updates_sidebar",navigableBlock:t,...s},t.id)}):null}function B(){window.__c={n:"EmptyState"};const e=(0,a.yK)((e=>({container:{marginTop:64,textAlign:"center",paddingLeft:18,paddingRight:18,marginBottom:64},content:{fontSize:14,color:e.mediumTextColor,marginTop:4}})),[]);return(0,w.jsx)("div",{style:e.container,children:(0,w.jsx)("div",{style:e.content,children:(0,w.jsx)("span",{children:(0,w.jsx)(r.FormattedMessage,{defaultMessage:"No edits in this page yet.",id:"topbar.updatesButton.emptyState"})})})})}var L=i(74725),O=i(97880),D=i(51454),N=i(50906),V=i(23063),K=i(3553),E=i(55064),z=i(70268),H=i(35767),W=(i(21703),i(30120)),G=i(45010),$=i(24646),q=i(34859),Y=i(80444),X=i(53336),J=i(30251),Q=i(13991),ee=i(7057),te=i(53877),ie=i(83176),se=i(82855),ne=i(16880),ae=i(84169),oe=i(18442),re=i(72126),de=i(32056),le=i(54368),ce=i(77420),ue=i(19889),pe=i(62965),ge=i(16287),me=i(54642),he=i(25320),fe=i(83420),ye=i(20095),ve=i(65598),xe=i(18514),be=i(35314),Se=i(77907),Me=i(44904),we=i(35661),je=i(88893),Ce=i(73420),ke=i(68785),Ze=i(63296),Te=i(70301),Ie=i(64369),Ae=i(45653),Pe=i(67579),Fe=i(64536);const Re=Date.now();function _e(e){let{store:t,spaceId:i,isDisabledForWorkspace:o}=e;window.__c={n:"PageAnalytics"};const[l,c]=(0,s.useState)("last_28_days"),[u,p]=(0,s.useState)({state:o?"disabled-for-workspace":"loading"}),g=(0,d.O7)(),f=(0,a.Fg)(),y=(0,n.VK)((()=>{const{currentSpaceStore:e}=Y.default.state;return null==e?void 0:e.getName()}),[]),x=(0,n.VK)((()=>{switch(l){case"last_7_days":return 7;case"last_28_days":return 28;case"last_90_days":return 90;case"all_time":return}}),[l]);(0,s.useEffect)((()=>{o||async function(){const e=await me.getPageAnalytics(g,{pageId:t.id,spaceId:i,days:x});if("failed"===e.type)return void p({state:"empty"});const s=e.data.map((e=>{let{ds:t,total_views:i,unique_views:s}=e;return{ds:t,values:{total_views:i,unique_views:s}}}));s.filter((e=>{let{ds:t}=e;return te.OQ.isoToUnixMs(t,"UTC")??Re<=Re})).every((e=>{let{values:t}=e;return 0===t.total_views}))?p({state:"empty"}):p({state:"loaded",data:s})}()}),[g,t.id,o,i,x]);const b=(0,a.yK)((e=>({fullHeight:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},spinner:{width:32,height:32}})),[]);return"loading"===u.state?(0,w.jsx)("div",{style:b.fullHeight,children:(0,w.jsx)(ke.Z,{style:b.spinner})}):"empty"===u.state?(0,w.jsx)("div",{style:b.fullHeight,children:(0,w.jsx)(ze,{heading:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.empty.heading",defaultMessage:"No page analytics yet"}),description:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.empty.description",defaultMessage:"It may take some time for page view information to appear."})})}):"disabled-for-workspace"===u.state?(0,w.jsx)("div",{style:b.fullHeight,children:(0,w.jsx)(ze,{heading:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.disabled.heading",defaultMessage:"Page viewership tracking is disabled"}),description:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[y?(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.disabled.description",defaultMessage:"Page viewership and analytics is turned off for all pages in {name}",values:{name:y}}):(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.disabled.description.unnamed",defaultMessage:"Page viewership and analytics is turned off for all pages in your space"}),(0,w.jsxs)("a",{href:(0,xe.UY)("guides.pageAnalytics"),target:"_blank",style:{display:"flex",gap:4,color:f.regularTextColor,alignItems:"center",textDecoration:"none",cursor:"pointer"},children:[(0,ae.m)({width:14,height:14}),(0,w.jsx)(Ie.Z,{isSmall:!0,children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}):(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},children:[(0,w.jsxs)(Ce.sg,{grow:1,gap:16,children:[(0,w.jsx)(Be,{store:t,data:u.data,currentFilter:l,onChangeFilter:c}),(0,w.jsx)(Oe,{store:t}),(0,w.jsx)(Ee,{spaceId:i,store:t})]}),(0,w.jsxs)("div",{style:{borderTop:`1px solid ${f.regularDividerColor}`,padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,w.jsx)(m.ZP,{renderOrigin:e=>{let{onClick:t}=e;return(0,w.jsx)(Ze.Z,{onClick:t,icon:oe.H,children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.timeseries.settings",defaultMessage:"Settings"})})},popupType:g.device.isMobile?m.Z4.SlideUp:m.Z4.Popup,render:()=>(0,w.jsx)(h.Z,{menuType:v.og.Popup,width:460,children:(0,w.jsx)("div",{style:Ue,children:(0,w.jsx)(Fe.PageAnalyticsPageOptOut,{store:t})})})}),(0,w.jsxs)("a",{href:(0,xe.UY)("guides.pageAnalytics"),target:"_blank",style:{display:"flex",gap:4,color:f.regularTextColor,alignItems:"center",textDecoration:"none",cursor:"pointer"},children:[(0,ae.m)({width:14,height:14}),(0,w.jsx)(Ie.Z,{isSmall:!0,children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.timeseries.learnMore",defaultMessage:"Learn more"})})]})]})]})}const Ue={margin:"8px 16px",pointerEvents:"auto",cursor:"default"};function Be(e){window.__c={n:"PageAnalyticsGraph"};const[t,i]=(0,be.e)(),{blueLayer:n,yellowLayer:a}=(0,J.useTimeSeriesPalette)(),o=(0,s.useMemo)((()=>{if(0===e.data.length)return Re;const t=te.OQ.isoToUnixMs(e.data[0].ds,"UTC")??Re;return Math.min(t,Re)}),[e.data]);return(0,w.jsxs)("div",{children:[(0,w.jsx)(Le,{store:e.store,data:e.data,currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter}),(0,w.jsx)("div",{ref:t,style:{...Ue,marginBottom:0},children:(0,w.jsx)(Se.LazyTimeSeries,{startDate:(0,ee.$6)(o,!0),endDate:(0,ee.$6)(Re,!0),width:i,height:175,data:e.data,layers:[{key:"total_views",...n,renderLabel:e=>(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.timeseries.total_views",defaultMessage:"{views, plural, one {1 total view} other {{views} total views}}",values:{views:e}})},{key:"unique_views",...a,renderLabel:e=>(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.timeseries.unique_views",defaultMessage:"{uniqueViews, plural, one {1 unique view} other {{uniqueViews} unique views}}",values:{uniqueViews:e}})}]})})]})}function Le(e){window.__c={n:"PageAnalyticsHeader"};const t=(0,r.useIntl)(),i=(0,s.useMemo)((()=>e.data.reduce(((e,t)=>{let{values:i}=t;return e+i.total_views}),0)),[e.data]);return(0,w.jsx)("div",{style:{margin:"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,w.jsxs)(Ce.X2,{justifyContent:"space-between",alignItems:"center",grow:1,children:[(0,w.jsxs)(Ce.X2,{gap:4,children:[(0,w.jsx)(Ie.Z,{style:{fontWeight:500},children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.timeseries.title",defaultMessage:"Views"})}),(0,w.jsx)(Ie.Z,{isSecondaryColor:!0,children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.timeseries.totalViews",defaultMessage:"({totalViews} total)",values:{totalViews:(0,de.uf)(i,"number_with_commas",t)}})})]}),(0,w.jsx)(Pe.f,{currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter})]})})}function Oe(e){window.__c={n:"PageAnalyticsViewers"};const{store:t}=e,{pageVisitStore:i,presenceStore:a}=(0,n.Kw)(Y.default),o=(0,d.O7)();(0,s.useEffect)((()=>{he.Ri(o,{block:t,pageVisitStore:i,incremental:!1,limit:he.s4})}),[o,t,i]);const l=(0,n.VK)((()=>(0,ye.AQ)(i,a)),[i,a]);if(0===l.length)return null;const c=l.map((e=>{let{userId:i,activityTimestampNearestMinuteMs:s}=e;return{actorStore:we.U6.createChildStore(t,{id:i,table:ue.KJ}),timestamp:s}}));return(0,w.jsxs)("div",{style:{...Ue,display:"flex",flexDirection:"column",gap:12},children:[(0,w.jsx)(Ie.Z,{style:{fontWeight:500},children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.viewers.title",defaultMessage:"Viewers"})}),(0,w.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:(0,w.jsx)(De,{store:t,actorStores:c,collapsedLabel:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.viewers.expand",defaultMessage:"Show more viewers"}),expandedLabel:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.viewers.collapse",defaultMessage:"Show less viewers"})})})]})}function De(e){window.__c={n:"PageAnalyticsActorList"};const{store:t,actorStores:i,collapsedLabel:n,expandedLabel:a}=e,[o,r]=(0,s.useState)(!0),d=o?i.slice(0,5):i;return(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[d.map((e=>{let{actorStore:i,timestamp:s}=e;return(0,w.jsx)(Ne,{store:t,actorStore:i,timestamp:s},i.id)})),i.length>5&&(0,w.jsx)("button",{onClick:e=>{e.preventDefault(),r(!o)},style:{background:"none",border:"none",textAlign:"left",padding:0,marginTop:4},children:(0,w.jsxs)(Ie.Z,{isSecondaryColor:!0,isSmall:!0,style:{display:"flex",gap:3,alignItems:"center"},children:[o?n:a,o?(0,se.E)({width:12}):(0,ne.R)({width:12})]})},"toggle")]})}function Ne(e){window.__c={n:"PageAnalyticsActor"};const{actorStore:t,timestamp:i}=e,a=(0,r.useIntl)(),o=(0,s.useMemo)((()=>{const e=Date.now();return(0,ee.tv)(Math.min(i??e,e),Q.SP)}),[i]),d=(0,n.VK)((()=>t.getDisplayName(a)),[t,a]);return(0,w.jsxs)(Ce.X2,{alignItems:"center",justifyContent:"space-between",children:[(0,w.jsxs)(Ce.X2,{gap:4,children:[(0,w.jsx)(Ve,{actorStore:t}),(0,w.jsx)(Ie.Z,{style:{fontWeight:500},children:d})]}),(0,w.jsx)(Ie.Z,{isSecondaryColor:!0,children:i?(0,w.jsx)("span",{title:(0,ee.Yx)(i,"medium_with_time",Q.SP),children:o}):o})]})}function Ve(e){const{actorStore:t}=e;return t.table===ce.cZ?(0,w.jsx)(Te.Z,{botStore:t,size:18}):t.table===ue.KJ?(0,w.jsx)(Ae.Z,{userStore:t,size:18}):t.table===le.y?(0,w.jsx)(Ae.Z,{userStore:void 0,size:18}):void(0,O.t1)(t)}function Ke(e){const{environment:t,store:i,spaceId:a,hasAccessToEditors:o}=e,[,,r]=(0,n.AF)(void 0,Me.o),[d,l]=(0,s.useState)([]);(0,s.useEffect)((()=>{o&&ge.h(t,{store:r,activityIds:d,spaceId:a,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0},navigableBlockId:i.id})}),[d,r,a,i.id,t,o]);return(0,n.VK)((()=>{if(!o)return[];const e=r.state.activityIds;(0,pe.Z)(d,e)||l(e);const{currentSpaceStore:t}=Y.default.state;if(!t)return[];const s=d.map((e=>(0,ve.No)(t,e,t.id))).flatMap((e=>{const t=e.getValue();return t?"top-level-block-created"!==t.type&&"top-level-block-deleted"!==t.type&&"block-edited"!==t.type?[]:function(e,t){var i;return re.oA(null===(i=e.edits)||void 0===i?void 0:i.flatMap((e=>{var i;return null===(i=e.authors)||void 0===i?void 0:i.map((i=>({actorStore:(0,fe.nc)({parentStore:t,pointer:i}),timestamp:e.timestamp})))})))}(t,i):[]})),n=re.MR(s,"timestamp").reverse();return re.mN(n,"userId")}),[d,r,o,i])}function Ee(e){window.__c={n:"PageAnalyticsEditors"};const{spaceId:t,store:i}=e,s=(0,d.O7)(),a=(0,n.VK)((()=>(0,je.qb)(s,"business")||(0,je.qb)(s,"enterprise")),[s]),o=Ke({environment:s,hasAccessToEditors:a,spaceId:t,store:i}),l=(0,n.VK)((()=>{const e=i.getCreatedByPointer(),t=i.getCreatedTime();if(e&&t)return{actorStore:(0,fe.nc)({parentStore:i,pointer:e}),createdTime:t}}),[i]);return(0,w.jsxs)("div",{style:{...Ue,display:"flex",flexDirection:"column",gap:12},children:[(0,w.jsx)(Ie.Z,{style:{fontWeight:500},children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.editors.title",defaultMessage:"Editors"})}),l&&(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:6},children:[(0,w.jsx)(Ie.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.editors.createdBy",defaultMessage:"Created by"})}),(0,w.jsx)(Ne,{store:i,actorStore:l.actorStore,timestamp:l.createdTime})]}),a&&o.length>0&&(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[(0,w.jsx)(Ie.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.editors.editedBy",defaultMessage:"Recently edited by"})}),(0,w.jsx)(De,{actorStores:o,store:i,collapsedLabel:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.editors.expand",defaultMessage:"Show more editors"}),expandedLabel:(0,w.jsx)(r.FormattedMessage,{id:"page_analytics.editors.collapse",defaultMessage:"Show less editors"})})]})]})}function ze(e){window.__c={n:"PageAnalyticsEmptyState"};const t=(0,a.yK)((e=>({column:{display:"flex",flexDirection:"column"},row:{display:"flex"},centered:{textAlign:"center",alignItems:"center",width:250},analyticsIcon:{position:"relative",top:-8,left:-4},secondaryIcon:{fill:e.mediumTextColor},settingsButton:{padding:"7.5px 10px",alignSelf:"center"},link:{cursor:"pointer",justifyContent:"center",alignItems:"center",padding:8,alignSelf:"center"}})),[]);return(0,w.jsx)("div",{style:{...t.column,gap:24},children:(0,w.jsxs)("div",{style:{...t.column,...t.centered,gap:4},children:[(0,ie.z)({...t.secondaryIcon,...t.analyticsIcon,width:62,height:62}),(0,w.jsx)(Ie.Z,{isSecondaryColor:!0,style:{fontSize:16,fontWeight:500},children:e.heading}),(0,w.jsx)(Ie.Z,{isSecondaryColor:!0,style:{whiteSpace:"normal",overflow:"visible"},children:e.description})]})})}function He(e){let{enablePageAnalytics:t}=e;window.__c={n:"UpdateSidebarTabUpdates"};const i=(0,n.VK)((()=>Y.default.state.mainEditorCurrentBlockStore),[]),s=(0,n.VK)((()=>{const e=W.ou.now().minus({years:1}).valueOf();return!!i&&i.getCreatedTime()<e}),[i]),o=(0,n.VK)((()=>Y.default.state.currentSpaceStore),[]),l=(0,n.VK)((()=>!(null!=i&&i.canRead())),[i]),c=(0,d.O7)(),u=(0,n.VK)((()=>(0,$._c)(c)),[c]),p=(0,n.VK)((()=>{var e;const t=null==i?void 0:i.getModel();return i&&null!=t&&t.isCollectionView()?null===(e=i.getCollectionPointer())||void 0===e?void 0:e.id:void 0}),[i]),g=(0,n.VK)((()=>Boolean(null==o?void 0:o.getSettings().disable_page_analytics)),[o]),m=(0,a.yK)((e=>({updatesEmptyStyle:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center",color:e.mediumTextColor,fontSize:14,background:e.contentBackground,marginRight:u?2:0,pointerEvents:"auto",height:"100%"},updatesNotEmptyStyle:{display:"flex",flexDirection:"column",flex:"1 1 0%",background:e.contentBackground,marginRight:u?2:0,pointerEvents:"auto",marginTop:1,height:"100%"}})),[u]),h=(0,n.VK)((()=>I.ZP.state.currentSubTab),[]);if(l)return(0,w.jsx)(X.Z,{type:q.Z.Y,style:m.updatesEmptyStyle,children:(0,w.jsx)("div",{style:{width:200,alignSelf:"center"},children:(0,w.jsx)(r.FormattedMessage,{id:"updateSidebar.commentContainer.restricted",defaultMessage:"You don't have permission to view the updates of this restricted page."})})});if(o&&i)return(0,w.jsxs)(X.Z,{type:q.Z.Y,ref:e=>{G.Z.UpdateSidebarScroller=e},style:m.updatesNotEmptyStyle,children:[t&&(0,w.jsx)("div",{style:{display:h===I.uF.Analytics?"block":"none",height:"100%"},children:(0,w.jsx)(_e,{spaceId:o.id,store:i,isDisabledForWorkspace:g})}),(0,w.jsx)("div",{style:{display:h===I.uF.Updates?"block":"none"},children:(0,w.jsx)(k.Z,{collectionId:p,navigableBlock:i,spaceId:o.id,source:"updates_sidebar",empty:e=>(0,w.jsx)(X.Z,{type:q.Z.Y,style:m.updatesEmptyStyle,ref:e=>{G.Z.UpdateSidebarScroller=e},children:(0,w.jsx)("div",{style:{width:200,alignSelf:"center"},children:e.hasFiltersOn?(0,w.jsx)(r.FormattedMessage,{id:"updateSidebar.updatesContainer.emptyAfterSearch",defaultMessage:"No updates match the requested filters."}):s?(0,w.jsx)(r.FormattedMessage,{id:"updateSidebar.updatesContainer.emptyMaybePurged",defaultMessage:"There are no recent updates on this page. Page updates are retained for one year."}):(0,w.jsx)(r.FormattedMessage,{id:"updateSidebar.updatesContainer.empty",defaultMessage:"No updates on this page yet."})})})},i.id)})]});throw new Error("Loaded sidebar without AppStore initialized.")}var We=i(38755),Ge=i(74948),$e=i(33784),qe=i(38302),Ye=i(88923);function Xe(e){window.__c={n:"UpdateSidebarContent"};const{currentTab:t}=e,i=(0,n.VK)((()=>Y.default.state.mainEditorCurrentBlockStore),[]),a=(0,n.VK)((()=>Y.default.state.currentSpaceStore),[]),o=(0,n.VK)((()=>Y.default.state.renderPhase),[]),[r,d]=(0,s.useState)(!1),l=(0,s.useMemo)((()=>(new Date).getTime()),[]);if((0,s.useEffect)((()=>{r||"rendered"!==o||d(!0)}),[null==i?void 0:i.id,r,o]),!i||!a||!r)return(0,w.jsx)(z.B,{areaHeight:window.innerHeight});switch(t){case I.gY.Comments:return(0,w.jsx)(H.J,{timeMounted:l,location:"sidebar"});case I.gY.Updates:return(0,w.jsx)(He,{enablePageAnalytics:e.enablePageAnalytics});default:(0,O.t1)(t)}}function Je(e){window.__c={n:"UpdateSidebar"};const t=(0,n.VK)((()=>({width:I.ZP.state.width,isAnimating:I.ZP.state.isAnimating})),[]),i=(0,d.O7)(),{shouldLoadSidebarComponents:o,isExpanded:r,popOutMode:l,closeSidebar:c}=e,u=(0,n.VK)((()=>r&&l&&!qe.Z.state.isOpen&&!$e.Z.state.open),[r,l]),p=(0,s.useRef)(null),g=(0,s.useMemo)((()=>[`.${T.zar}`,`.${T.hzx}`,`.${T.G6g}`,`.${T.K3y}`,`.${T.p0b}`,`.${T.mJW}`]),[]);(0,L.O)({active:u,closeHandler:c,ref:p,excludedSelectors:g});const m=Z.R6(i.device.isElectronMac),h=(0,a.yK)((e=>({container:{flexGrow:0,flexShrink:0,zIndex:D.XB,borderLeft:(l?"unset":!r&&"1px solid rgba(0,0,0,0)")||`1px solid ${e.regularDividerColor}`,alignSelf:"flex-end",position:"absolute",right:0,top:0,height:"100vh",pointerEvents:"none"},popOutContainer:{boxShadow:e.mediumBoxShadow,background:e.popoverBackground,borderRadius:3,border:r?`1px solid ${e.regularDividerColor}`:void 0,height:`calc(100% - 20px - ${m}px)`,marginTop:m+10,marginRight:r?10:0},wrap:{height:"100%"},content:{position:"absolute",top:0,bottom:0,display:r?"flex":"none",flexDirection:"column",overflow:"visible",zIndex:D.XB,width:t.width}})),[t.width,m,l,r]);return o?(0,w.jsx)("aside",{"aria-hidden":!r||void 0,ref:p,style:{...h.container,...l?h.popOutContainer:{}},onMouseMove:()=>{t.isAnimating||I.ZP.setState({...I.ZP.state,mouseEntered:!0})},onMouseLeave:()=>{t.isAnimating||I.ZP.setState({...I.ZP.state,mouseEntered:!1})},children:(0,w.jsx)("div",{style:h.wrap,children:(0,w.jsx)("div",{style:h.content,children:(0,w.jsx)(et,{...e})})})}):null}function Qe(e){let{enablePageAnalytics:t,navigableBlock:i,onTabChange:s}=e;window.__c={n:"SidebarHeader"};const o=(0,d.O7)(),{popOutMode:r}=(0,n.VK)((()=>({popOutMode:(0,$._c)(o)})),[o]),l=(0,n.VK)((()=>I.ZP.state.currentTab),[]),c=(0,a.yK)((()=>({commentsHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:r?0:Z.R6(o.device.isElectronMac)}})),[o,r]);switch(l){case I.gY.Comments:return(0,w.jsx)("div",{style:c.commentsHeaderStyle});case I.gY.Updates:return(0,w.jsx)(_,{popOutMode:r,navigableBlock:i,enablePageAnalytics:t,onTabChange:s})}}function et(e){window.__c={n:"SidebarActivityFeed"};const{isResizerHovered:t,isResizing:i,currentTab:o,expanded:r}=(0,n.VK)((()=>{const{isResizerHovered:e,isResizing:t,currentTab:i,expanded:s}=I.ZP.state;return{isResizerHovered:e,isResizing:t,currentTab:i,expanded:s}}),[]),{currentBlockStore:l}=e,c=(0,d.O7)(),{currentTabToRender:u,popOutMode:p}=(0,n.VK)((()=>({currentTabToRender:l.isCollectionView()&&!l.isCollectionViewPageWithContent()?I.gY.Updates:o,popOutMode:(0,$._c)(c)})),[l,o,c]),g=(0,n.VK)((()=>{const{currentSpaceStore:e}=Y.default.state;return!(0,We.Cx)(e)}),[]),m=s.useCallback((e=>{N.Zmw(c,{tab:e===I.uF.Updates?"updates":"analytics",origin:Ye.default.state.open?"peek_view":"page"}),I.ZP.setState({...I.ZP.state,currentSubTab:e})}),[c]),h=(0,a.yK)((e=>({pane:{display:"flex",flexDirection:"column",height:"100%",position:"relative",pointerEvents:"none",maxHeight:"100%",backgroundColor:o===I.gY.Comments?void 0:"inherit"},resizerStyle:{position:"absolute",top:0,left:-3,bottom:0,right:0,height:"100vh",width:3,zIndex:-1,display:"block",transition:"box-shadow 300ms ease-in",...(t||i)&&r?{boxShadow:e.sidebarResizerBoxShadow}:{}},controlsHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:p?0:Z.R6(c.device.isElectronMac),paddingTop:4,width:p?"calc(100% - 2px)":"100%",background:e.contentBackground,borderRadius:3,paddingBottom:1}})),[o,t,i,c,r,p]);return(0,w.jsxs)("div",{style:h.pane,className:T.zar,children:[(0,w.jsx)("div",{style:h.resizerStyle}),(0,w.jsx)(Qe,{enablePageAnalytics:g,navigableBlock:l,onTabChange:m}),(0,w.jsx)(Xe,{currentTab:u,enablePageAnalytics:g}),r&&(0,w.jsx)(E.Z,{type:"update"})]})}function tt(e){window.__c={n:"UpdateSidebarAnimatedWrapper"};const{isElectronMac:t,currentBlockStore:i}=e,a=(0,n.VK)((()=>({width:I.ZP.state.width,isAnimating:I.ZP.state.isAnimating,canRender:I.ZP.state.canRender})),[]),o=(0,n.VK)((()=>Y.default.state.currentSpaceStore),[]),r=(0,s.useMemo)((()=>null==o?void 0:o.clone()),[o]),l=(0,d.O7)(),c=(0,n.VK)((()=>l.currentUser.isLoggedIn()&&(0,$.Sx)(l)),[l]),{isExpanded:u,popOutMode:p,closeSidebar:g}=(0,n.VK)((()=>({isExpanded:(0,$.Sx)(l),popOutMode:(0,$._c)(l),closeSidebar:()=>Ge.setUpdateExpand({environment:l,isExpanded:!1,from:"close_for_space"})})),[l]),[m,h]=(0,s.useState)(!1),[f,y]=(0,s.useState)(void 0);return(0,s.useEffect)((()=>{(void 0===f||f===i.id)&&u&&(h(!0),y(i.id))}),[f,i,u]),a.canRender&&r?(0,w.jsx)(V.Z,{isVisible:!0,useCompositeLayer:!0,animationStyle:{width:c?a.width:0},render:()=>(0,w.jsx)(K.Z,{store:r,droppable:!0,render:()=>(0,w.jsx)(Je,{isElectronMac:t,isFullyExpanded:!a.isAnimating,currentBlockStore:i,isExpanded:u,popOutMode:p,closeSidebar:g,shouldLoadSidebarComponents:m})},r.id),onAnimationStart:()=>{I.ZP.setState({...I.ZP.state,isAnimating:!0})},onAnimationEnd:()=>{I.ZP.setState({...I.ZP.state,isAnimating:!1})}}):null}var it=i(52867),st=i(97439),nt=i(5686),at=i(8843),ot=i(98519),rt=i(44292),dt=i(17659),lt=i(11066),ct=i(52275),ut=i(73063),pt=i(32163),gt=i(43145),mt=i(26388),ht=i(61208),ft=i(59878),yt=i(29538),vt=i(19034),xt=i(45325),bt=i(4761);const St=s.memo((function(){window.__c={n:"NotificationInboxPanel"};const{openState:e,isOpen:t,isTransitioningOpenState:i}=(0,n.VK)((()=>{const{openState:e}=xt.ZP.state;return{openState:e,isOpen:xt.ZP.isOpen(),isTransitioningOpenState:xt.ZP.isTransitioningOpenState()}}),[]),s=(0,n.VK)((()=>xt.ZP.getPanelWidth()),[]);return(0,w.jsx)(V.Z,{isVisible:!0,useCompositeLayer:!0,animationStyle:{width:t?s:0,translateX:t?0:-s},skipAnimation:!i,onAnimationEnd:()=>{"opening"===e?xt.ZP.setState({...xt.ZP.state,openState:"open"}):"closing"===e&&xt.ZP.setState({...xt.ZP.state,openState:"closed"})},render:()=>(0,w.jsx)("div",{style:{position:"relative"},children:(0,w.jsx)(Mt,{})})})}));function Mt(){window.__c={n:"NotificationInboxPanelContent"};const e=(0,d.O7)(),t=(0,d.Fy)(),i=(0,r.useIntl)(),s=(0,n.VK)((()=>{const{currentSpaceStore:e}=Y.default.state;if(e)return e.id}),[]),l=(0,n.VK)((()=>xt.ZP.isOpen()),[]),{currentTab:c,filter:u}=(0,n.VK)((()=>{const{currentTab:e,filter:t}=xt.ZP.state;return{currentTab:e,filter:t}}),[]),p=(0,n.VK)((()=>xt.ZP.state.isResizerHovered&&xt.ZP.isOpen()),[]),g=(0,n.VK)((()=>xt.ZP.getPanelWidth()),[]),m=(0,a.yK)((e=>{const t={transition:"box-shadow 300ms ease",boxShadow:p?e.inboxPanelResizerBoxShadow:e.inboxPanelBoxShadow};return{container:{display:"flex",flexDirection:"column",background:e.contentBackground,zIndex:D.MU,width:g,height:"100%"},header:{cursor:"auto",width:"100%"},scroller:{minHeight:0,display:"flex",flexDirection:"column",marginRight:0,pointerEvents:"auto",width:"100%"},emptyState:{marginTop:100,cursor:"auto"},editorEmptyState:{background:e.contentBackground,display:"flex",flexDirection:"column",width:"100%",height:"100%",fontSize:26,alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontWeight:500},editorEmptyStateIcon:{width:80,height:80,fill:e.lightTextColor},inboxFilterTitle:{fontSize:14,fontWeight:o.Z.fontWeight.semibold},inboxActionsContainer:{display:"flex",justifyContent:"center",alignItems:"center",gap:10},headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:8,paddingBottom:8,paddingLeft:16,paddingRight:16},resizer:{position:"absolute",top:0,right:0,zIndex:1,height:"100%",width:2,display:l?"block":"none",...t}}}),[p,l,g]);return t.isMobile?null:(0,w.jsxs)("div",{style:m.container,children:[(0,w.jsx)("div",{className:T.JiD,style:m.header,children:(0,w.jsxs)("div",{style:m.headerContainer,children:[(0,w.jsx)(Ct,{}),(0,w.jsxs)("div",{style:m.inboxActionsContainer,children:[("readAndUnread"===u||"unread"===u)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(kt,{}),(0,w.jsx)(Zt,{})]}),(0,w.jsx)(yt.C,{shouldHide:!1,icon:st.D,caption:i.formatMessage({id:"notificationSidebar.close.tooltip",defaultMessage:"Close Inbox"}),onClick:()=>{dt.qQ({environment:e,open:!1})},keyboardShortcutName:"toggleUpdateSidebar",isElectron:!1,style:{marginLeft:0}})]})]})}),(0,w.jsxs)(X.Z,{type:q.Z.Y,style:m.scroller,children:[(0,w.jsx)(gt.Z,{onChange:(e,t)=>{let{offsetFromTop:i}=t;bt.n_.setState(i<=0)}}),"allPages"!==c?(0,w.jsx)(ft.Z,{type:c,source:"notifications_tab",tab:"inbox",empty:(0,w.jsx)("div",{style:m.emptyState,children:(0,w.jsx)(jt,{currentTab:c})})},u):s&&(0,w.jsx)(k.Z,{spaceId:s,source:"notifications_tab",empty:()=>(0,w.jsx)("div",{style:m.emptyState,children:(0,w.jsx)(jt,{currentTab:c})})},u)]}),(0,w.jsx)("div",{style:m.resizer}),(0,w.jsx)(E.Z,{type:"inbox"})]})}function wt(e){const{filter:t}=e;switch(t){case"readAndUnread":return(0,w.jsx)(r.FormattedMessage,{id:"inbox.unreadAndUnreadFilter.title",defaultMessage:"Inbox"});case"unread":return(0,w.jsx)(r.FormattedMessage,{id:"inbox.unreadOnlyFilter.title",defaultMessage:"Unread only"});case"archived":return(0,w.jsx)(r.FormattedMessage,{id:"inbox.archivedFilter.title",defaultMessage:"Archived"});case"allPages":return(0,w.jsx)(r.FormattedMessage,{id:"inbox.allUpdatesFilter.title",defaultMessage:"All updates"});default:return(0,O.t1)(t)}}function jt(e){let{currentTab:t}=e;switch(t){case"mentions":return(0,w.jsx)(ht.Z,{message:(0,w.jsx)(r.FormattedMessage,{defaultMessage:"You'll be notified here for @mentions, page activity, and page invites",id:"updatesModal.spaceUpdatesTab.allArchived"}),title:(0,w.jsx)(r.FormattedMessage,{defaultMessage:"You're all caught up",id:"updatesModal.spaceUpdatesTab.allArchivedTitle"})});case"archive":return(0,w.jsx)(ht.Z,{message:(0,w.jsx)(r.FormattedMessage,{defaultMessage:"Any Inbox updates you archived will show up here.",id:"updatesModal.archiveTab.emptyPrompt"}),title:(0,w.jsx)(r.FormattedMessage,{defaultMessage:"No archived updates",id:"updatesModal.archiveTab.emptyPromptTitle"})});case"allPages":return(0,w.jsx)("div",{children:"No activity on the workspace"});default:(0,O.t1)(t)}}function Ct(){window.__c={n:"InboxFilterButton"};const e=(0,n.VK)((()=>xt.ZP.state.filter),[]),t=(0,a.yK)((e=>({button:{display:"flex",alignItems:"center",gap:6,borderRadius:3,paddingLeft:8,marginLeft:-8,paddingRight:8,height:24},title:{fontSize:14,fontWeight:o.Z.fontWeight.semibold},chevronIcon:{height:10,width:10,color:e.mediumIconColor}})),[]);return(0,w.jsx)(m.ZP,{popupType:m.Z4.Popup,renderOrigin:i=>{let{onClick:s}=i;return(0,w.jsxs)(lt.Z,{style:t.button,onClick:s,children:[(0,w.jsx)(Ie.Z,{style:t.title,children:(0,w.jsx)(wt,{filter:e})}),(0,se.E)(t.chevronIcon)]})},render:e=>(0,w.jsx)(Tt,{closePopup:e.close}),alignmentToOrigin:m.vR.Start,originGap:2})}function kt(){window.__c={n:"InboxMarkReadButton"};const e=(0,d.O7)(),t=(0,d.Fy)(),i=(0,n.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=bt.ZP.state;if("mentions"!==e||t)return;const{containsUnreadNotifications:i}=bt.ZP.state;return{containsUnreadNotificationsAccordingToUpdatesStore:i}}),[]),a=(0,n.VK)((()=>vt.Z.getUnreadCountForCurrentSpace().mentions>0),[]),o=(0,s.useCallback)((()=>{p.Xf(e),dt.go(e)}),[e]);if(!i)return null;const{containsUnreadNotificationsAccordingToUpdatesStore:l}=i,c=l||a;return(0,w.jsx)(mt.Z,{renderTooltip:()=>c?(0,w.jsx)(r.FormattedMessage,{defaultMessage:"Mark all as read",id:"updatesModal.spaceUpdatesTab.markAllReadButton.tooltip"}):(0,w.jsx)(r.FormattedMessage,{defaultMessage:"All notifications have been marked as read.",id:"updatesModal.spaceUpdatesTab.markAllReadButton.disabledTooltip"}),render:e=>(0,w.jsx)(ut.Z,{ariaLabel:"mark-all-as-read",icon:nt.J,iconStyle:{width:14,height:14,marginTop:-.75},mobileFeedback:t.isMobile,disabled:!c,onClick:o,...e})})}function Zt(){window.__c={n:"InboxArchiveButton"};const e=(0,d.Fy)(),t=(0,d.O7)(),i=(0,n.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=bt.ZP.state;if("mentions"!==e||t)return;const{containsBothReadAndUnreadNotifications:i,showOnlyUnreadNotifications:s}=bt.ZP.state;return{containsBothReadAndUnreadNotifications:i,showOnlyUnreadNotifications:s}}),[]),a=(0,s.useCallback)((()=>{if(!i)return;const{containsBothReadAndUnreadNotifications:e,showOnlyUnreadNotifications:s}=i,{filter:n}=xt.ZP.state;let a="none";s||"unread"===n?a="unread":e&&(a="read"),p.zD(t,{readFilter:a}),dt.rG(t,"mentions",a)}),[t,i]);if(!i)return null;const{containsBothReadAndUnreadNotifications:o,showOnlyUnreadNotifications:l}=i;return(0,w.jsx)(mt.Z,{renderTooltip:()=>l?(0,w.jsx)(r.FormattedMessage,{defaultMessage:"Archive unread",id:"updatesModal.spaceUpdatesTab.archiveUnread.tooltip"}):o?(0,w.jsx)(r.FormattedMessage,{defaultMessage:"Archive read",id:"updatesModal.spaceUpdatesTab.archiveRead.tooltip"}):(0,w.jsx)(r.FormattedMessage,{defaultMessage:"Archive all",id:"updatesModal.spaceUpdatesTab.archiveAll.tooltip"}),render:t=>(0,w.jsx)(ut.Z,{ariaLabel:"archive-all",icon:it.H,iconStyle:{width:16,height:16},mobileFeedback:e.isMobile,onClick:a,...t})})}function Tt(e){window.__c={n:"InboxFilterMenu"};const{closePopup:t}=e,i=(0,d.O7)(),l=(0,n.VK)((()=>xt.ZP.state.filter),[]),c=(0,s.useCallback)((async e=>{switch(xt.ZP.setState({...xt.ZP.state,filter:e}),e){case"readAndUnread":xt.ZP.setState({...xt.ZP.state,currentTab:"mentions"}),bt.ZP.update((e=>({...e,currentTab:"mentions",containsBothReadAndUnreadNotifications:!1,containsUnreadNotifications:!1,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]})));break;case"unread":xt.ZP.setState({...xt.ZP.state,currentTab:"mentions"});const t=await dt.Qy({environment:i});bt.ZP.update((e=>({...e,currentTab:"mentions",showOnlyUnreadNotifications:!0,unreadNotificationIds:t,containsBothReadAndUnreadNotifications:!1,containsUnreadNotifications:!1})));break;case"archived":xt.ZP.setState({...xt.ZP.state,currentTab:"archive"}),bt.ZP.update((e=>({...e,currentTab:"archive"})));break;case"allPages":xt.ZP.setState({...xt.ZP.state,currentTab:"allPages"}),bt.ZP.update((e=>({...e,currentTab:"allPages"})));break;default:(0,O.t1)(e)}}),[i]),u=(0,a.yK)((()=>({header:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:o.Z.fontWeight.semibold}})),[]),p=[{type:"readAndUnread",title:(0,w.jsx)(r.FormattedMessage,{id:"inboxFilterMenu.readAndUnreadOption.label",defaultMessage:"Unread and read"}),icon:nt.J},{type:"unread",title:(0,w.jsx)(r.FormattedMessage,{id:"inboxFilterMenu.unreadOption.label",defaultMessage:"Unread only"}),icon:at.h},{type:"archived",title:(0,w.jsx)(r.FormattedMessage,{id:"inboxFilterMenu.archivedOption.label",defaultMessage:"Archived only"}),icon:it.H},{type:"allPages",title:(0,w.jsx)(r.FormattedMessage,{id:"inboxFilterMenu.allUpdatesOption.label",defaultMessage:"All updates"}),icon:rt.d}];return(0,w.jsx)(h.Z,{className:T.Mdu,menuType:v.og.Popup,minWidth:250,header:(0,w.jsx)(Ie.Z,{style:u.header,isSmall:!0,isSecondaryColor:!0,children:(0,w.jsx)(r.FormattedMessage,{id:"inbox.filterOptionsMenu.header",defaultMessage:"Filter options"})}),children:(0,w.jsx)(pt.Z,{type:pt.i.Vertical,sections:[{key:"inbox filters",render:e=>(0,w.jsx)(y.Z,{...e,topBorder:0!==e.index}),items:p.map((e=>{const i=e.type===l;return{key:e.type,render:t=>(0,w.jsx)(ct.Z,{...t,title:e.title,icon:e.icon({height:16,width:16}),right:i?(0,ot.k)({height:16,width:16}):void 0}),action:()=>{c(e.type),t()}}}))}],initialFocus:void 0,onAccept:()=>t()})})}},44904:(e,t,i)=>{i.d(t,{o:()=>n});var s=i(49085);class n extends s.default{getInitialState(){return{activityIds:[],shouldLoadNewerActivities:!1,shouldLoadOlderActivities:!0,hasOlderActivities:!0,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0}}}}},47054:(e,t,i)=>{i.d(t,{AD:()=>d});i(57658);var s=i(30120),n=i(59730),a=i(63143);function o(e){if(void 0===e)return s.ou.utc();const t={zone:"utc"};return"number"==typeof e?s.ou.fromMillis(e,t):s.ou.fromISO(e,t)}function r(e,t){const i=t?o(t):s.ou.utc(),a=o(e??function(e){const{days:t,endDate:i,startDate:a}=e;if(t<=0)throw new n.p8("Days must be greater than 0");const r=i?o(i):s.ou.utc();if(!r.isValid)throw new n.p8(`endDate ${i} is in an invalid format`);const d=a?o(a).toMillis():0,l=r.minus({days:t-1}).toMillis();return Math.max(l,d)}({days:7,endDate:t}));if(!a.isValid)throw new n.p8(`startDate ${e} is in an invalid format`);if(!i.isValid)throw new n.p8(`endDate ${t} is in an invalid format`);if(a>i)throw new n.p8(`startDate ${e} => ${a.toISO()} is after endDate ${t} => ${i.toISO()}`);return{startTimestamp:a.toMillis(),endTimestamp:i.toMillis()}}function d(e,t){const{startTimestamp:i,endTimestamp:s}=r(e,t),n=[];for(var d=i;d<=s;)n.push(o(d).toISODate()),d+=a.A0;return n}},52867:(e,t,i)=>{i.d(t,{H:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("archive",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.083 14.585h7.499c1.347 0 2.064-.697 2.064-2.037V5.739c.664-.11 1.019-.608 1.019-1.34V3.36c0-.834-.458-1.36-1.299-1.36H2.3C1.499 2 1 2.526 1 3.36V4.4c0 .73.355 1.23 1.019 1.34v6.808c0 1.347.717 2.037 2.064 2.037zM2.579 4.728c-.342 0-.478-.144-.478-.486v-.724c0-.342.136-.486.478-.486h10.514c.342 0 .472.144.472.486v.724c0 .342-.13.486-.472.486H2.579zm1.49 8.825c-.615 0-.95-.335-.95-.95V5.76h9.427v6.842c0 .616-.342.95-.95.95H4.069zM5.58 8.515h4.512c.287 0 .492-.199.492-.5v-.218c0-.3-.205-.492-.492-.492H5.58c-.287 0-.485.191-.485.492v.219c0 .3.198.499.485.499z"})})},90792:(e,t,i)=>{i.d(t,{t:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("bell",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.36914 11.7627C1.36914 12.3369 1.80664 12.7266 2.51074 12.7266H5.32031C5.38184 14.0322 6.44824 15.2285 8 15.2285C9.55176 15.2285 10.6182 14.0391 10.6797 12.7266H13.4893C14.2002 12.7266 14.6309 12.3369 14.6309 11.7627C14.6309 11.0381 13.9678 10.416 13.3457 9.81445C12.8672 9.34277 12.751 8.39941 12.6621 7.46289C12.5732 4.87207 11.8213 3.14258 10.0371 2.49316C9.77734 1.59082 9.01855 0.900391 8 0.900391C6.98145 0.900391 6.22266 1.59082 5.96289 2.49316C4.17871 3.14258 3.42676 4.87207 3.33789 7.46289C3.24902 8.39941 3.13965 9.34277 2.6543 9.81445C2.03906 10.416 1.36914 11.0381 1.36914 11.7627ZM3.00293 11.4756V11.3936C3.18066 11.1953 3.57715 10.833 3.91211 10.4434C4.38379 9.90332 4.60254 8.92578 4.6709 7.62695C4.75293 4.85156 5.60059 3.92871 6.70801 3.62793C6.87207 3.58691 6.96777 3.50488 6.98145 3.32031C7.01562 2.62305 7.39844 2.1582 8 2.1582C8.60156 2.1582 8.99121 2.62305 9.01855 3.32031C9.03223 3.50488 9.12793 3.58691 9.29883 3.62793C10.3994 3.92871 11.2539 4.85156 11.3291 7.62695C11.3975 8.92578 11.623 9.90332 12.0879 10.4434C12.4297 10.833 12.8125 11.1953 12.9834 11.3936V11.4756H3.00293ZM6.6123 12.7266H9.3877C9.33984 13.5811 8.7793 14.1348 8 14.1348C7.22754 14.1348 6.66699 13.5811 6.6123 12.7266Z"})})},16880:(e,t,i)=>{i.d(t,{R:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,n.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},17880:(e,t,i)=>{i.d(t,{W:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("commentSidebarZero",{viewBox:"0 0 56 56",svg:(0,n.jsx)("path",{d:"M13.1289 47.6641C13.9297 47.6641 14.4961 47.3516 15.4141 46.5508L21.8984 40.5938C23.0703 42.4297 25.1602 43.4258 27.9922 43.4258H36.3516L42.6602 48.8164C43.5195 49.5586 44.0273 49.9492 44.7305 49.9492C45.7461 49.9492 46.332 49.2266 46.332 48.0938V43.4258H47.4453C51.8398 43.4258 54.6328 40.8281 54.6328 36.2969V24.1289C54.6328 19.5977 51.8398 17 47.4453 17H43.9688V14.793C43.9688 9.83203 41.0781 7 36.0977 7H8.87109C4.00781 7 1 9.83203 1 14.793V32.4297C1 37.4102 4.00781 40.2422 8.87109 40.2422H11.4492V45.7695C11.4492 46.9609 12.0742 47.6641 13.1289 47.6641ZM13.7539 39.2461C13.7539 38.3867 13.2266 37.9766 12.543 37.9766H9.08594C5.43359 37.9766 3.42188 36.043 3.42188 32.293V14.9492C3.42188 11.2188 5.45312 9.26562 9.08594 9.26562H35.8828C39.5156 9.26562 41.5469 11.2188 41.5469 14.9492V17H27.9922C23.4414 17 20.8047 19.5977 20.8047 24.1289V36.3164C20.8047 36.9805 20.8438 37.6055 20.9609 38.1719L13.7539 44.9883V39.2461ZM44.0859 47.2148L38.1289 41.9023C37.4844 41.3359 37.0938 41.1602 36.2344 41.1602H28.168C25.0039 41.1602 23.207 39.4805 23.207 36.1797V24.2656C23.207 20.9648 25.0039 19.2656 28.168 19.2656H47.25C50.4336 19.2656 52.2305 20.9648 52.2305 24.2656V36.1602C52.2305 39.4609 50.4336 41.1602 47.25 41.1602H45.2383C44.5938 41.1602 44.0859 41.5312 44.0859 42.3711V47.2148Z"})})},96640:(e,t,i)=>{i.d(t,{r:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("inbox",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M4.445 25.3h20.532c2.296 0 3.457-1.16 3.457-3.421v-6.715c0-.902-.13-1.324-.563-1.887l-4.406-5.53c-1.195-1.5-1.793-1.934-3.668-1.934H9.625c-1.875 0-2.473.433-3.668 1.933l-4.406 5.531c-.434.563-.563.985-.563 1.887v6.715c0 2.273 1.172 3.422 3.457 3.422zm10.266-6.948c-1.734 0-2.93-1.442-2.93-3v-.059c0-.422-.234-.785-.738-.785h-8.11c-.304 0-.374-.27-.222-.469l4.664-5.93c.574-.726 1.207-1.02 2.121-1.02h10.43c.914 0 1.547.294 2.12 1.02l4.665 5.93c.164.2.094.469-.211.469h-8.121c-.504 0-.738.363-.738.785v.059c0 1.558-1.196 3-2.93 3zM4.469 23.859c-1.313 0-2.028-.703-2.028-2.05v-5.977h7.957c.188 2.25 2.004 3.855 4.313 3.855 2.309 0 4.125-1.617 4.312-3.855h7.957v5.977c0 1.347-.738 2.05-2.027 2.05H4.47z"})})},5686:(e,t,i)=>{i.d(t,{J:()=>a});i(67294);var s=i(45238),n=i(85893);const a=(0,s.I)("mailOpen",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.88965 15.9277C2.17415 15.9277 1.63639 15.75 1.27637 15.3945C0.920898 15.0436 0.743164 14.515 0.743164 13.8086V7.00684C0.743164 6.76074 0.756836 6.54427 0.78418 6.35742C0.816081 6.17057 0.863932 6.00423 0.927734 5.8584C0.996094 5.71257 1.08496 5.57812 1.19434 5.45508C1.30371 5.32747 1.43815 5.19987 1.59766 5.07227L6.88184 0.916016C7.12793 0.715495 7.36035 0.558268 7.5791 0.444336C7.80241 0.325846 8.03939 0.266602 8.29004 0.266602C8.54069 0.266602 8.77539 0.325846 8.99414 0.444336C9.21745 0.558268 9.45215 0.715495 9.69824 0.916016L14.9824 5.07227C15.1419 5.19987 15.2764 5.32747 15.3857 5.45508C15.4951 5.57812 15.5817 5.71257 15.6455 5.8584C15.7139 6.00423 15.7617 6.17057 15.7891 6.35742C15.821 6.54427 15.8369 6.76074 15.8369 7.00684V13.8086C15.8369 14.515 15.6569 15.0436 15.2969 15.3945C14.9414 15.75 14.4059 15.9277 13.6904 15.9277H2.88965ZM2.84863 14.8818H13.7314C14.0687 14.8818 14.3285 14.7907 14.5107 14.6084C14.6976 14.4307 14.791 14.1641 14.791 13.8086V6.82227C14.791 6.6582 14.7751 6.51921 14.7432 6.40527C14.7113 6.29134 14.6611 6.19108 14.5928 6.10449C14.529 6.01335 14.4424 5.92448 14.333 5.83789L9.11035 1.76367C8.94173 1.63607 8.80046 1.53809 8.68652 1.46973C8.57259 1.39681 8.44043 1.36035 8.29004 1.36035C8.13965 1.36035 8.00749 1.39681 7.89355 1.46973C7.77962 1.53809 7.63835 1.63607 7.46973 1.76367L2.24707 5.83789C2.1377 5.92448 2.04883 6.01335 1.98047 6.10449C1.91667 6.19108 1.86882 6.29134 1.83691 6.40527C1.80501 6.51921 1.78906 6.6582 1.78906 6.82227V13.8086C1.78906 14.1641 1.88021 14.4307 2.0625 14.6084C2.24479 14.7907 2.50684 14.8818 2.84863 14.8818ZM1.51562 14.6357L6.88184 9.37207C7.11882 9.13509 7.35352 8.96419 7.58594 8.85938C7.82292 8.75456 8.06217 8.70215 8.30371 8.70215C8.54525 8.70215 8.78223 8.75456 9.01465 8.85938C9.24707 8.96419 9.48405 9.13509 9.72559 9.37207L15.085 14.6357L14.374 15.3467L9.13086 10.1787C8.98047 10.0283 8.83691 9.92122 8.7002 9.85742C8.56803 9.78906 8.43587 9.75488 8.30371 9.75488C8.16699 9.75488 8.03027 9.78906 7.89355 9.85742C7.76139 9.92122 7.6224 10.0283 7.47656 10.1787L2.2334 15.3467L1.51562 14.6357ZM5.81543 10.6094L1.5498 6.3916L2.26074 5.68066L6.5332 9.90527L5.81543 10.6094ZM10.0742 9.90527L14.3398 5.68066L15.0508 6.3916L10.7852 10.6094L10.0742 9.90527Z"})})}}]);