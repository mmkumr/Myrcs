"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5509],{86282:(e,t,i)=>{i.d(t,{RL:()=>R,xv:()=>F,rC:()=>N,Hp:()=>E,Lf:()=>U,$7:()=>O,zO:()=>H,GF:()=>A});i(21703);var n=i(15145),o=i(68626),s=i(59730),r=i(15157),a=i(5366),l=i(45953),d=i(21202),c=i(23867),h=(i(95477),i(33929)),p=i(98165),u=i(74948),m=i(80444),g=i(77080),b=i(56638),C=i(50906),v=i(54642),f=i(54532),S=i(89858),Z=i(9953),x=i(4408),y=i(75018),M=i(24677),T=i(28014),B=i(42875),j=i(29477),k=i(33954);var w=i(39699),P=i(39865);const I="LastViewedTemplateId",_=(0,a.defineMessages)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function O(e){const{environment:t,item:i,createNewPage:n,isPrivate:o}=e;M.ZH(t),b.Z.setState({open:!0,item:i,createNewPage:n,isPrivate:o,isLoading:!1}),r.Z.set({userId:t.currentUser.id,key:I,value:i.rootId}),C.jWY(t,{template_name:i.name,from:n?"sidebar":"newPage"})}function H(e){let{templateItem:t,currentUserId:i}=e;const n=b.Z.state.item;b.Z.setState({...b.Z.state,item:t}),n!==t&&r.Z.set({userId:i,key:I,value:t.rootId})}function F(e){b.Z.setState({item:b.Z.state.item,open:!1}),M.ZH(e)}async function R(e){const{item:t,environment:i,spaceStore:o}=e;b.Z.state.open&&b.Z.setState({...b.Z.state,isLoading:!0});const s=e.initializeStore?{...e,initializeStore:e.initializeStore,isPrivate:!1,type:"inExistingStore",useMinimalTemplates:!1}:{...e,type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let r=!1;const a=Date.now();let l;try{l=await N(s),r=!0,y.navigateToBlock({environment:i,store:l,pageVisitSource:n.tY.Create}),F(i),i.device.isMobile&&u.close()}finally{var d;const n=Date.now()-a,s=e.initializeStore?p.VP(e.initializeStore):void 0,c=e.initializeStore?!Boolean(s):e.isPrivate;C.enX(i,{template_name:t.name,destination:c?"private":"team",template_block_id:t.rootId,template_duplication_duration_ms:n,team_id:null==s?void 0:s.id,created_page_id:null===(d=l)||void 0===d?void 0:d.id}),C.XyT(i,{from:"inApp",success:r,context:e.from,template_name:t.name,template_block_id:t.rootId,target_space_id:o.id,template_duplication_duration_ms:n})}}async function U(e){const{environment:t,initializeStore:i,item:n,isPrivate:o,useMinimalTemplates:s,spaceStore:r,spaceViewStore:a}=e,d=s?n.rootId:n.previewRootId,c=await v.loadBlockSubtree(t,{block:{id:d,spaceId:n.spaceId},shallow:!1});let p;"success"===c.type&&(p=l.PF.create(c.data.subtreeRecordMap));const u="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:m}=w.createAndCommit({userAction:u,environment:t,perform:e=>{const n=i||T.KE({environment:t,spaceStore:r,spaceViewStore:a,isPrivate:o,loading:!0,transaction:e});x.fL({environment:t,inMemoryRecordCache:n.inMemoryRecordCache,recordMap:p,debugSource:u});const s=f.K8(t,{blockId:d,inMemoryRecordCache:n.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0});if(!s)throw new Error(h.default.getIntl().formatMessage(_.clientCopyError));return f.E9({environment:t,sourceBlockId:d,targetBlockPointer:n.pointer,sourceBlockSubtree:s,targetInMemoryRecordCache:n.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:n.useCrdt()}),n}});return m}async function N(e){const{environment:t,item:i,useRecordCache:n,isPrivate:o,useMinimalTemplates:s,spaceStore:r,spaceViewStore:a,isOnboarding:l}=e,{serverCommitResult:c,performResult:{pageStore:h,copyBlock:p}}=w.createAndCommit({userAction:"pageTemplateModalActions.createTemplateInstance",environment:t,perform:l=>{let c;c="inExistingStore"===e.type&&e.initializeStore?e.initializeStore:"inTeam"===e.type&&e.teamStore?S.pq({environment:t,spaceStore:r,spaceViewStore:a,teamStore:e.teamStore,from:e.from,loading:!0,appendOrPrepend:e.appendOrPrepend?e.appendOrPrepend:"append",transaction:l}):T.KE({environment:t,spaceStore:r,spaceViewStore:a,isPrivate:o,loading:!0,transaction:l});const h={id:n&&!s?i.previewRootId:i.rootId,table:d.iU,spaceId:i.spaceId};return A({item:i,spaceViewStore:a,transaction:l}),function(e){const{item:t,transaction:i,spaceViewStore:n}=e;if(n){const e=n.getSidebarHiddenTemplateIds();if(e.indexOf(t.rootId)<0){const o=e.concat([t.rootId]);Z.sW({store:n,data:{sidebar_hidden_templates:o},transaction:i})}}}({item:i,spaceViewStore:a,transaction:l}),{pageStore:c,copyBlock:h}}});return await c,await E({environment:t,pageStore:h,copyBlock:p,useRecordCache:n,item:i,isOnboarding:Boolean(l)}),h}const L={block:!0,collection:!0,collection_view:!0,discussion:!0,comment:!0};async function E(e){const{environment:t,pageStore:i,copyBlock:n,item:r,useRecordCache:a,isOnboarding:d}=e,p=l.Ak.create();a&&a.forEachRecord(t.currentUser.id,(e=>{let{model:t}=e;L[t.table]&&p.setModel(t.pointer,t)}));const{currentSpaceStore:u}=m.default.state;if(!u)throw new s.p8("Could not get currentSpaceStore.");const b=()=>{w.createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplate.deletePageWhenError",environment:t,perform:e=>{P.y8({environment:t,blocks:[i],transaction:e})}}),d&&C.XyT(t,{success:!1,template_name:r.name,template_id:r.id,template_block_id:r.rootId,target_space_id:u.id,from:"onboarding"}),o.log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{template_name:r.name,template_id:r.id,template_block_id:r.rootId,is_onboarding:d}}})},f=g.default.getConfigKey("template_ids_to_use_duplicate_block","data");if(null!=f&&f.includes(n.id))await async function(e){const{environment:t,templateBlock:i,targetBlock:n}=e,o=j.UZ(),s=v.duplicateBlock(t,{sourceBlocks:[i],targetBlocks:[n],snapshotData:void 0,addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:{currentUserId:t.currentUser.id,currentTimeZone:(0,B.r)()},convertExternalObjectInstancesToPlaceholders:i.spaceId!==n.spaceId,useCrdt:!1});let r;for await(const a of s)r=a;if(r)if(r.error){const e=(0,k.HV)(h.default.getIntl(),r.error);o.reject(e)}else o.resolve(r);else o.reject(void 0);return o.promise}({environment:t,templateBlock:n,targetBlock:{id:i.pointer.id,spaceId:(0,c.C)(i.pointer.spaceId)}}).catch(b);else{"failed"===(await v.initializePageTemplate(t,{recordMap:p.toJson({allowVersionDowngrade:!1}),sourceBlock:n,targetBlock:{id:i.pointer.id,table:i.pointer.table,spaceId:(0,c.C)(i.pointer.spaceId)},isOnboarding:d})).type&&b()}return i}function A(e){const{item:t,transaction:i,spaceViewStore:n}=e;if(n){const e=n.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const o=e.concat([t.rootId]);Z.sW({store:n,data:{visited_templates:o},transaction:i})}}}},52187:(e,t,i)=>{i.d(t,{Z:()=>S});i(67294);var n=i(83355),o=i(78197),s=i(5366),r=i(75018),a=i(87279),l=i(88632),d=i(53610),c=i(35057),h=i(64921),p=i(31945),u=i(78140),m=i(64369),g=i(27386),b=i(14694),C=i(42868),v=i(85893);class f extends n.Z{constructor(){super(...arguments),this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{d.Z.setState({open:!1})};null!=e&&e.supportsNativeHomeOnPhone()?r.navigateToHomeTab(this.environment,t):t()}}renderComponent(){const{store:e}=this.props;if(!(0,c.Mk)()||!e.isDefined())return;const{mobileNative:t}=this.environment,i=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return(0,v.jsx)(p.ZP,{buttonPopupStore:d.Z,popupType:p.Z4.SlideUp,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,renderOrigin:e=>(0,v.jsx)(h.Z,{mobileFeedback:!0,...e,children:(0,v.jsx)(b.Z,{left:this.renderIcon(),disableMobileBorder:!0,children:(0,v.jsx)(s.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileSidebar.label"})})}),render:()=>{if(l.Z.state.online){const t={menuType:a.og.Modal,title:(0,v.jsx)(s.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileMemberSettings.title"}),right:(0,v.jsx)(s.FormattedMessage,{defaultMessage:"Done",id:"memberSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,onCancel:this.handleClose};return(0,v.jsx)(u.Z,{...t,children:(0,v.jsx)(C.Z,{store:e,isMobile:!0})})}this.renderOffline()}})}renderIcon(){return(0,o.S)({fill:this.theme.mediumIconColor,width:16})}renderOffline(){return(0,v.jsx)(g.Z,{children:(0,v.jsx)(m.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,v.jsx)(s.FormattedMessage,{defaultMessage:"Please go online to manage members.",id:"memberSettingsButton.goOnline.prompt"})})})}}f.displayName="MemberSettingsButton";const S=f},61671:(e,t,i)=>{i.d(t,{Z:()=>b});i(67294);var n=i(83355),o=i(16001),s=i(5366),r=i(75018),a=i(87279),l=i(97799),d=i(64921),c=i(31945),h=i(78140),p=i(15311),u=i(14694),m=i(85893);class g extends n.Z{constructor(){super(...arguments),this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{l.Z.setState({open:!1})};l.Z.state.source!==l.Y.Updates&&((null==e?void 0:e.supportsNativeHomeOnPhone())||!1)?r.navigateToHomeTab(this.environment,t):t()}}renderComponent(){const{device:e,mobileNative:t}=this.environment,i=l.Z.state.open,n=l.Z.state.source!==l.Y.Updates&&((null==t?void 0:t.supportsNativeHomeOnPhone())||!1);return(0,m.jsx)(c.ZP,{popupType:e.isMobile?c.Z4.SlideUp:c.Z4.Popup,hidesMobileNativeBottomBar:n,preventSlideUpTransition:n,buttonPopupStore:l.Z,renderOrigin:t=>(0,m.jsx)(d.Z,{mobileFeedback:e.isMobile,...t,children:(0,m.jsx)(u.Z,{left:(0,o.r)({fill:this.theme.mediumIconColor,width:16}),style:{background:i?this.theme.buttonHoveredBackground:"none"},disableMobileBorder:!0,children:(0,m.jsx)(s.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.label"})})}),render:()=>{let t;return t=e.isMobile?{menuType:a.og.Modal,title:(0,m.jsx)(s.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.title"}),right:(0,m.jsx)(s.FormattedMessage,{defaultMessage:"Done",id:"notificationSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,onCancel:this.handleClose,whiteBackground:!0}:{menuType:a.og.Popup},(0,m.jsx)(h.Z,{...t,children:(0,m.jsx)(p.Z,{isMobile:!0,passwordRequestStore:this.props.passwordRequestStore})})}})}}g.displayName="NotificationSettingsButton";const b=g},5480:(e,t,i)=>{i.d(t,{Z:()=>oe});var n=i(67294),o=i(83355),s=i(97107),r=i(5366),a=i(50906),l=i(42858),d=i(39699),c=i(98742),h=i(36896),p=i(44604),u=i(80444),m=i(64921),g=i(31945),b=i(79954),C=i(14694),v=i(15145),f=i(1800),S=i(35840),Z=i(37612),x=i(55863),y=i(21202),M=i(75018),T=i(31299),B=i(39865),j=i(95477),k=i(43250),w=i(33929),P=i(87279),I=i(18514),_=i(74948),O=i(88632),H=i(35661),F=i(72087),R=i(68894),U=i(68785),N=i(78140),L=i(32163),E=i(43765),A=i(40721),D=i(89728),V=i(11470),z=i(77137),Y=i(43145),q=i(72495),W=i(30506),G=i(33411),X=i(26388),K=i(83182),$=i(46247),J=i(66957),Q=i(85893);const ee=(0,r.defineMessages)({filterByPlaceholder:{id:"sidebarTrash.filterBy.placeholder",defaultMessage:"Filter by page title…"}});class te extends o.Z{constructor(){super(...arguments),this.storeTypes={requestStore:F.Z},this.renderTrashPages=(e,t)=>{const{device:i}=this.environment,o=t?t.results:[],{mainEditorCurrentBlockStore:s}=u.default.state;if(!s)return;const a=o.map((e=>H.G.createChildStore(s,{table:y.iU,id:e}))).filter((e=>e.isDefined()&&!p.Z.state.excludePages.has(e.id))).map((e=>({key:e.id,action:t=>{let{event:n}=t;if("metaKey"in n&&n.metaKey){const t=(0,f.Z)({baseUrl:j.default.domainBaseUrl,pageId:e.id,pageVisitSource:v.tY.SidebarTrash});M.navigateToExternalURL({environment:this.environment,url:t})}else M.navigateToBlock({environment:this.environment,store:e,pageVisitSource:v.tY.SidebarTrash}),h.Z.setState({...h.Z.state,open:!1});i.isMobile&&_.close()},render:t=>(0,Q.jsx)(V.Z,{...t,dontShrinkRight:!0,store:e,right:(0,Q.jsxs)("div",{style:{display:"flex"},children:[(0,Q.jsx)(X.Z,{placement:X.Z.Placement.Bottom,renderTooltip:()=>(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"Restore",id:"sidebarTrash.restorePageButton.tooltip"}),render:t=>(0,Q.jsx)(D.Z,{isGray:!0,onClick:()=>this.handleRestoreClick(e),...t,children:(0,x.s)({width:18,height:18})})}),(0,Q.jsx)(X.Z,{placement:X.Z.Placement.Bottom,renderTooltip:()=>(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"Delete permanently",id:"sidebarTrash.deletePagePermanentlyButton.tooltip"}),render:t=>(0,Q.jsx)(D.Z,{isGray:!0,onClick:()=>this.handleDeleteClick(e),...t,children:(0,Z.y)({width:18,height:18})})})]})})})));return 0===a.length?(0,Q.jsx)(q.Z,{children:i.isMobile?(0,Q.jsx)(E.Z,{title:(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"No matches found.",id:"sidebarTrash.mobileFilterBy.noMatchesPrompt"})}):(0,Q.jsx)("div",{style:{fontSize:14,color:this.theme.mediumTextColor,textAlign:"center"},children:(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"No matches found.",id:"sidebarTrash.filterBy.noMatchesPrompt"})})}):(0,Q.jsxs)(n.Fragment,{children:[(0,Q.jsx)(L.Z,{type:L.i.Vertical,initialFocus:void 0,sections:[{key:0,items:a,render:e=>(0,Q.jsx)(q.Z,{...e})}]}),(0,Q.jsx)(G.Z,{show:this.stores.requestStore.state.loading,showDelay:500,showHold:200,render:e=>{if(e)return(0,Q.jsx)("div",{style:{height:44,display:"flex",flex:1,alignItems:"center",justifyContent:"center"},children:(0,Q.jsx)(U.Z,{})})}}),(0,Q.jsx)(Y.Z,{onChange:this.handleScrollOffsetChange})]})},this.handleSwipeLeft=()=>{const e=te.tabs.indexOf(p.Z.state.currentTab)+1,t=te.tabs[e];void 0!==t&&this.changeTab(t)},this.handleSwipeRight=()=>{const e=te.tabs.indexOf(p.Z.state.currentTab)-1,t=te.tabs[e];void 0!==t&&this.changeTab(t)},this.handleTabChange=e=>{const t=te.tabs[e];this.changeTab(t)},this.handleRestoreClick=e=>{const{currentSpaceStore:t}=u.default.state;t&&B.DV({environment:this.environment,block:e,spaceId:e.pointer.spaceId||t.id})},this.handleDeleteClick=e=>{B.Rn({environment:this.environment,blocks:[e]})},this.handleSearchInputChange=e=>{p.Z.setState({...p.Z.state,filter:e.target.value,limit:p.Z.startLimit})},this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{h.Z.setState({...h.Z.state,open:!1})};null!=e&&e.supportsNativeHomeOnPhone()?M.navigateToHomeTab(this.environment,t):t()},this.handleScrollOffsetChange=e=>{const{requestStore:t}=this.stores,{ready:i,loading:n,result:o}=t.state,s=o;e<=p.Z.loadMoreOffset&&s&&i&&!n&&!s.endOfResultsReached&&p.Z.setState({...p.Z.state,limit:p.Z.state.limit+p.Z.limitIncrement})},this.performSearchRequest=async e=>{const{currentSpaceStore:t,mainEditorCurrentBlockStore:i,currentUserStore:n}=u.default.state;if(!t||!i||!n)return;const{limit:o,filter:s,currentTab:r}=p.Z.state;let a,l;if("in_current_page"===r)if(i.isCollectionView()){if(!i.isDefined())return;const e=i.getCollectionPointer();if(!e)return;l=e.id}else l=i.id;else"last_edited_by_me"===r&&(a=n.id);return await T.bI({environment:this.environment,query:s,limit:o,ancestorId:l,spaceId:t.id,editedById:a})}}willMount(e){super.willMount(e),p.Z.setState({...p.Z.state,limit:p.Z.startLimit,excludePages:new Set})}willUnmount(){p.Z.setState({...p.Z.state,filter:""})}renderComponent(){const{mobileNative:e}=this.environment;return null!=e&&e.supportsNativeHomeOnPhone()?this.renderNativeHomeEnabledLayout():this.renderLayout()}renderLayout(){const{device:e}=this.environment;let t;return t=e.isMobile?{menuType:P.og.Modal,title:(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:this.renderMobileHelpButton(),right:(0,Q.jsx)(A.DoneMenuText,{}),onClickRight:this.handleClose,onCancel:this.handleClose,header:this.renderHeaderWithTabs()}:{menuType:P.og.Popup,height:"50vh",width:414,header:this.renderHeaderWithTabs(),footer:this.renderFooter()},(0,Q.jsx)(W.Z,{onSwipeLeft:this.handleSwipeLeft,onSwipeRight:this.handleSwipeRight,render:e=>(0,Q.jsx)(N.Z,{...t,...e,className:k.TYv,children:this.renderPages()})})}renderNativeHomeEnabledLayout(){const e={menuType:P.og.Modal,title:(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:this.renderMobileHelpButton(),right:(0,Q.jsx)(A.DoneMenuText,{}),onClickRight:this.handleClose,onCancel:this.handleClose,header:this.renderSearchInput()};return(0,Q.jsx)(N.Z,{...e,className:k.TYv,children:this.renderPages()})}renderHeaderWithTabs(){const{device:e}=this.environment,t=p.Z.state.currentTab,i=te.tabs.indexOf(t);return(0,Q.jsxs)(n.Fragment,{children:[(0,Q.jsx)(J.Z,{tabs:[(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"All pages",id:"sidebarTrash.allPages.tabHeader"},"allPages"),(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"In current page",id:"sidebarTrash.inCurrentPage.tabHeader"},"currentPage"),(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"Last edited by me",id:"sidebarTrash.lastEditedByMe.tabHeader"},"lastEditedByMe")],selectedIndex:i,onChange:this.handleTabChange}),(0,Q.jsx)("div",{style:{margin:e.isMobile?0:"10px 0"},children:this.renderSearchInput()})]})}renderSearchInput(){const{device:e}=this.environment;return(0,Q.jsx)(R.ZP,{left:(0,Q.jsx)(G.Z,{show:this.stores.requestStore.state.loading,showDelay:500,showHold:200,render:e=>e?(0,Q.jsx)(U.Z,{style:this.getSearchIconStyle()}):(0,S.R)(this.getSearchIconStyle())}),style:{...e.isAndroid&&{borderBottom:"none"}},showClearButton:!0,placeholder:w.default.formatMessage(ee.filterByPlaceholder),focus:!e.isMobile||void 0,value:p.Z.state.filter,onChange:this.handleSearchInputChange})}renderFooter(){return(0,Q.jsx)(q.Z,{topBorder:!0,disableDesktopPadding:!0,children:(0,Q.jsx)(K.Z,{title:(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"Learn about deleting and restoring pages",id:"sidebarTrash.learnMore.prompt"}),href:(0,I.UY)("guides.trash"),analyticsFrom:"trash"})})}renderMobileHelpButton(){return(0,Q.jsx)($.Z,{href:(0,I.UY)("guides.trash"),analyticsFrom:"trash"})}renderPages(){if(!O.Z.state.online)return(0,Q.jsx)(q.Z,{children:(0,Q.jsx)(E.Z,{title:(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"Please go online to view the Trash.",id:"sidebarTrash.goOnline.prompt"})})});{const{filter:e,limit:t,currentTab:i}=p.Z.state,n=`${e}:${t}${i}`;return(0,Q.jsx)(z.Z,{requestStore:this.stores.requestStore,request:n,performRequest:this.performSearchRequest,render:this.renderTrashPages,debounce:T.vp})}}changeTab(e){p.Z.setState({...p.Z.state,currentTab:e,limit:p.Z.startLimit}),this.stores.requestStore.setState({...this.stores.requestStore.state,result:null}),a.vqh(this.environment,{tab:e})}getSearchIconStyle(){return{width:14,height:14,flexGrow:0,flexShrink:0,color:this.theme.regularIconColor}}}te.displayName="SidebarTrash",te.tabs=["all_pages","in_current_page","last_edited_by_me"];const ie=te;class ne extends o.Z{constructor(){super(...arguments),this.renderOrigin=e=>{const{onClick:t,...i}=(0,c.Z)(e,{onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave});return(0,Q.jsx)(b.Z,{store:this.clonedStore,canDropOnto:!0,onSelectableDrop:this.handleDrop,analyticsName:"sidebar_trash",shouldShowDropZone:!0,children:(0,Q.jsx)(m.Z,{...i,style:this.props.buttonStyle,onClick:t||this.handleClick,mobileFeedback:this.props.isMobile,children:(0,Q.jsx)(C.Z,{left:this.renderIcon(),style:{...h.Z.state.open&&{background:this.theme.buttonHoveredBackground}},disableMobileBorder:!0,children:(0,Q.jsx)(r.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})})},this.renderSidebarTrash=()=>{const{currentSpaceStore:e}=u.default.state;if(e)return(0,Q.jsx)(ie,{spaceStore:e})},this.handleClick=e=>{p.Z.setState({...p.Z.state,currentTab:"all_pages"}),a.YFJ(this.environment)},this.handleDrop=e=>{const{droppedStores:t,duplicate:i}=e;i||d.createAndCommit({userAction:"SidebarTrashButton.handleDrop",environment:this.environment,perform:e=>{l.Cl({environment:this.environment,blocks:t,transaction:e})}})}}willMount(e){super.willMount(e),this.clonedStore=e.store.clone()}renderComponent(){const{device:e,mobileNative:t}=this.environment,i=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return(0,Q.jsx)(g.ZP,{popupType:e.isMobile?g.Z4.SlideUp:g.Z4.Popup,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,buttonPopupStore:h.Z,alignmentToOrigin:g.vR.Start,placementToOrigin:g.pO.Right,originGap:0,onClick:this.handleClick,isFullWidthOnMobile:!0,render:this.renderSidebarTrash,preventScaleTransition:!0,renderOrigin:this.renderOrigin})}renderIcon(){const{device:e}=this.environment,t=this.theme.mediumIconColor;return e.isMobile?(0,s.w)({fill:t,height:16}):(0,s.w)({fill:t,width:14})}}ne.displayName="SidebarTrashButton";const oe=ne},58925:(e,t,i)=>{i.d(t,{Z:()=>B});i(67294);var n=i(83355),o=i(9555),s=i(79102),r=i(82990),a=i(5366),l=i(19719),d=i(17659),c=i(98742),h=i(50659),p=i(51811),u=i(77907),m=i(4023),g=i(62820),b=i(4761),C=i(64921),v=i(31945),f=i(58261),S=i(26388),Z=i(39849),x=i(92955),y=i(14694),M=i(85893);class T extends n.Z{constructor(){super(...arguments),this.closeMenu=()=>{this.handleCloseUpdatesPopup(),g.Z.setState({...g.Z.state,open:!1})},this.handleDismiss=()=>{this.handleCloseUpdatesPopup()},this.handleClick=()=>{b.ZP.endSession(),d.G7({environment:this.environment,newTab:"mentions",shouldTrack:!0})},this.handleCloseUpdatesPopup=()=>{l.nI(this.environment),d.G7({environment:this.environment,newTab:"mentions",shouldTrack:!1})},this.showUpdatesButtonWithBoldText=()=>{if(this.props.format!==p.EX.Sidebar)return!1;return g.Z.state.open}}willUnmount(){this.handleCloseUpdatesPopup()}renderComponent(){const{device:e,mobileNative:t}=this.environment;if(this.props.format===p.EX.RenderAsPage)return(0,M.jsx)("div",{style:{background:this.theme.popoverBackground},children:(0,M.jsx)(u.LazyUpdatesPopup,{format:this.props.format,onClose:this.closeMenu})});const i=(0,M.jsx)(a.FormattedMessage,{defaultMessage:"Updates for all pages in this workspace",id:"updatesButton.tooltip"});return(0,M.jsx)(S.Z,{renderTooltip:()=>(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{children:i}),(0,M.jsx)(f.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleAllUpdates"})]}),originGap:6,placement:m.u.Right,render:i=>(0,M.jsx)(v.ZP,{popupType:e.isMobile?v.Z4.SlideUp:v.Z4.Popup,alignmentToOrigin:m.v.Start,placementToOrigin:m.u.Right,onClick:this.handleClick,originGap:0,style:{...!e.isMobile&&{width:500,overflow:"hidden"}},isWideTabletWidth:!0,render:()=>(0,M.jsx)(u.LazyUpdatesPopup,{format:this.props.format,onClose:this.closeMenu}),onClose:this.handleDismiss,isFullWidthOnMobile:!0,preventScaleTransition:!0,preventSlideUpTransition:(null==t?void 0:t.supportsNativeHomeOnPhone())||!1,buttonPopupStore:g.Z,renderOrigin:e=>this.renderButton(i,e)})})}renderButton(e,t){const i=this.props.format,n=g.Z.state.open,l=d.aY(),u=Z.Z.Color.Red;if(i===p.EX.MobileBottomBarPhone)return(0,M.jsx)(C.Z,{style:T.mobileBottomBarPhoneButtonStyle,mobileFeedback:!0,...t,children:(0,M.jsxs)("div",{style:{position:"relative"},children:[(0,o.Y)({width:26,fill:this.theme.regularTextColor}),(0,M.jsx)(x.Z,{type:"currentSpace",color:u,style:{position:"absolute",top:-3,right:l<99?-5:-8}})]})});if(i===p.EX.MobileBottomBarTablet)return(0,M.jsx)(C.Z,{style:T.mobileBottomBarTabletButtonStyle,mobileFeedback:!0,...t,children:(0,M.jsxs)("div",{style:{position:"relative"},children:[(0,o.Y)({width:26,fill:this.theme.regularTextColor}),(0,M.jsx)(x.Z,{type:"currentSpace",color:u,style:{position:"absolute",top:-3,right:l<99?-5:-8}})]})});if(i===p.EX.TopbarMobile)return(0,M.jsxs)(C.Z,{style:{...T.actionButtonStyle,marginLeft:2,marginRight:2},mobileFeedback:!0,...t,children:[(0,o.Y)({width:26}),(0,M.jsx)(x.Z,{type:"currentSpace",color:u,style:{position:"absolute",top:8,right:0}})]});if(i===p.EX.SidebarMobile)return(0,M.jsxs)(C.Z,{style:T.actionButtonStyle,mobileFeedback:!0,...t,children:[(0,o.Y)({width:26}),(0,M.jsx)(x.Z,{type:"currentSpace",color:u,style:{position:"absolute",top:8,right:0}})]});if(i===p.EX.Sidebar){const i=this.showUpdatesButtonWithBoldText(),o=(0,M.jsx)(a.FormattedMessage,{defaultMessage:"Updates",id:"updatesButton.allUpdates.sidebarButton"}),l=(0,s.Y)({fill:i?this.theme.regularIconColor:this.theme.mediumIconColor,width:20});return(0,M.jsx)(C.Z,{style:{...i&&{fontWeight:r.Z.fontWeight.medium,color:this.theme.regularTextColor},...(0,h.G$)({isMobile:!1})},...(0,c.Z)(e,t),children:(0,M.jsx)(y.Z,{left:(0,M.jsx)("div",{style:{color:i?this.theme.regularTextColor:"inherit"},children:l}),right:(0,M.jsx)(x.Z,{type:"currentSpace",color:u,style:{marginBottom:2,marginLeft:6}}),style:{background:n?this.theme.buttonHoveredBackground:"none"},children:o})})}}}T.displayName="UpdatesButton",T.Format=p.EX,T.actionButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,height:"100%",minWidth:34,position:"relative"},T.mobileBottomBarPhoneButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",flex:1},T.mobileBottomBarTabletButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",width:62,flex:"none"};const B=T},24553:(e,t,i)=>{i.d(t,{Z:()=>P});var n=i(67294),o=i(13991),s=i(480),r=i(6740),a=i(86628),l=i(24405),d=i(84169),c=i(88642),h=i(5366),p=i(50906),u=i(39634),m=i(24215),g=i(43250),b=i(79897),C=i(98742),v=i(77907),f=i(58455),S=i(77080),Z=i(475),x=i(16194),y=i(55031),M=i(64921),T=i(31945),B=i(26388),j=i(14694),k=i(85893);function w(e){window.__c={n:"HelpButtonOrigin"};const t=(0,s.O7)(),{isMobile:i}=t.device,o=(0,h.useIntl)(),c=(0,l.Fg)(),p=(0,a.VK)((()=>Z.Z.state.open),[]),u=(0,l.yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),m=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&x.Z.setState(!0)}),[]),b=(0,n.useCallback)((()=>{x.Z.setState(!1)}),[]);if(i)return(0,k.jsx)(M.Z,{hovered:p,testId:g.lmr,mobileFeedback:i,...e,children:(0,k.jsx)(j.Z,{left:(0,d.m)(u.helpIcon),disableMobileBorder:!0,children:(0,k.jsx)(h.FormattedMessage,{defaultMessage:"Help & feedback",id:"helpButton.mobileHelpFeedbackButton.label"})})});const v=o.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),f=(0,C.Z)(e,{onFocus:m,onBlur:b});return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(B.Z,{renderTooltip:()=>(0,k.jsx)("span",{children:(0,k.jsx)(h.FormattedMessage,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,k.jsx)("br",{})}})}),render:e=>(0,k.jsx)(M.Z,{ariaLabel:v,className:g.lmr,testId:g.lmr,style:(0,y.y)(t,{theme:c,rightEdgeDistance:16,isInPeekRenderer:!1}),hoveredStyle:u.hoveredStyle,pressedStyle:u.pressedStyle,...(0,C.Z)(f,e),children:"?"})})})}const P=(0,h.injectIntl)((function(){window.__c={n:"HelpButton"};const e=(0,s.O7)(),{isMobile:t}=e.device,i=(0,a.VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),r=(0,n.useCallback)((()=>{p.Ar6(e);const t=f.default.state;if((0,m.Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:i,isSalesAssistedPlan:n}=(0,b.r)(e);c.j({locale:o.SP,analyticsSettings:t,isForethoughtEnabled:S.default.checkGate("forethought"),forethoughtInitializeArgs:u.z(),userHighestPlanType:i,isSalesAssistedPlan:n})}}),[e]);return(0,k.jsx)(T.ZP,{popupType:t?T.Z4.SlideUp:T.Z4.Popup,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,renderOrigin:e=>(0,k.jsx)(w,{...e}),originGap:t?0:12,placementToOrigin:t?T.pO.Right:T.pO.Top,alignmentToOrigin:t?T.vR.Center:T.vR.End,buttonPopupStore:Z.Z,onClick:r,render:()=>(0,k.jsx)(v.LazyHelpButtonContent,{shouldRenderAsStaticModal:i})})}))},53610:(e,t,i)=>{i.d(t,{Z:()=>n});const n=new(i(61766).Z)},40745:(e,t,i)=>{i.d(t,{M:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("arrowDown",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},38780:(e,t,i)=>{i.d(t,{w:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("mobileBottomBarSearch",{viewBox:"0 0 26 26",svg:(0,o.jsx)("path",{d:"M11.1416 19.3779C12.9355 19.3779 14.5898 18.7979 15.9434 17.8311L21.0352 22.9229C21.2715 23.1592 21.583 23.2773 21.916 23.2773C22.6143 23.2773 23.1084 22.7402 23.1084 22.0527C23.1084 21.7305 23.001 21.4297 22.7646 21.1934L17.7051 16.123C18.7686 14.7266 19.4023 12.9971 19.4023 11.1172C19.4023 6.57324 15.6855 2.85645 11.1416 2.85645C6.59766 2.85645 2.88086 6.57324 2.88086 11.1172C2.88086 15.6611 6.59766 19.3779 11.1416 19.3779ZM11.1416 17.5947C7.59668 17.5947 4.66406 14.6621 4.66406 11.1172C4.66406 7.57227 7.59668 4.63965 11.1416 4.63965C14.6865 4.63965 17.6191 7.57227 17.6191 11.1172C17.6191 14.6621 14.6865 17.5947 11.1416 17.5947Z"})})},9555:(e,t,i)=>{i.d(t,{Y:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("mobileBottomBarUpdates",{viewBox:"0 0 26 26",svg:(0,o.jsx)("path",{d:"M4.48145 20.4092H15.2988C15.2129 21.8594 14.2891 22.7832 12.9893 22.7832C11.7002 22.7832 10.7656 21.8594 10.6904 20.4092H9.01465C9.10059 22.4717 10.7227 24.2871 12.9893 24.2871C15.2666 24.2871 16.8887 22.4824 16.9746 20.4092H21.5078C22.5176 20.4092 23.1299 19.8828 23.1299 19.1094C23.1299 18.0352 22.0342 17.0684 21.1104 16.1123C20.4014 15.3711 20.208 13.8457 20.1221 12.6104C20.0469 8.37793 18.9512 5.63867 16.0938 4.60742C15.7285 3.21094 14.5791 2.09375 12.9893 2.09375C11.4102 2.09375 10.25 3.21094 9.89551 4.60742C7.03809 5.63867 5.94238 8.37793 5.86719 12.6104C5.78125 13.8457 5.58789 15.3711 4.87891 16.1123C3.94434 17.0684 2.85938 18.0352 2.85938 19.1094C2.85938 19.8828 3.46094 20.4092 4.48145 20.4092ZM4.94336 18.7871V18.6582C5.13672 18.3359 5.78125 17.7129 6.33984 17.0791C7.11328 16.2197 7.47852 14.8447 7.5752 12.7393C7.66113 8.05566 9.05762 6.55176 10.8945 6.05762C11.1631 5.99316 11.3135 5.85352 11.3242 5.58496C11.3564 4.45703 12.001 3.67285 12.9893 3.67285C13.9883 3.67285 14.6221 4.45703 14.665 5.58496C14.6758 5.85352 14.8154 5.99316 15.084 6.05762C16.9316 6.55176 18.3281 8.05566 18.4141 12.7393C18.5107 14.8447 18.876 16.2197 19.6387 17.0791C20.208 17.7129 20.8418 18.3359 21.0352 18.6582V18.7871H4.94336Z"})})},97107:(e,t,i)=>{i.d(t,{w:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("sidebarTrash",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M13.5000308,3.23952 C13.5000308,4.55848168 11.9230308,12.0493 11.9230308,12.0782 C11.9230308,12.6571 9.73825083,14 7.04165083,14 C4.34504083,14 2.16025083,12.6571 2.16025083,12.0782 C2.16025083,12.0541 0.5,4.55799105 0.5,3.23952 C0.5,1.91780104 3.02713083,0 7.03525083,0 C11.0433308,0 13.5000308,1.9178004 13.5000308,3.23952 Z M7,2 C3.625,2 2.5,3.25 2.5,4 C2.5,4.75 3.625,6 7,6 C10.375,6 11.5,4.75 11.5,4 C11.5,3.25 10.375,2 7,2 Z"})})},79102:(e,t,i)=>{i.d(t,{Y:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("sidebarUpdates",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M6.87695 10.8601C6.72038 10.8601 6.58708 10.8072 6.47705 10.7014C6.37126 10.5956 6.31836 10.4644 6.31836 10.3079C6.31836 10.1555 6.37126 10.0264 6.47705 9.92065C6.58708 9.81486 6.72038 9.76196 6.87695 9.76196H9.44775V6.24536C9.44775 6.08879 9.50065 5.9576 9.60645 5.85181C9.71224 5.74601 9.84131 5.69312 9.99365 5.69312C10.1502 5.69312 10.2814 5.74601 10.3872 5.85181C10.493 5.9576 10.5459 6.08879 10.5459 6.24536V10.3079C10.5459 10.4644 10.493 10.5956 10.3872 10.7014C10.2814 10.8072 10.1502 10.8601 9.99365 10.8601H6.87695ZM10 16.6174C9.0944 16.6174 8.2417 16.4439 7.44189 16.0969C6.64209 15.7542 5.9375 15.2781 5.32812 14.6687C4.71875 14.0593 4.24056 13.3569 3.89355 12.5613C3.55078 11.7615 3.37939 10.9067 3.37939 9.99683C3.37939 9.09123 3.55078 8.24064 3.89355 7.44507C4.24056 6.64526 4.71663 5.94067 5.32178 5.3313C5.93115 4.72192 6.63574 4.24585 7.43555 3.90308C8.23535 3.55607 9.08805 3.38257 9.99365 3.38257C10.8993 3.38257 11.752 3.55607 12.5518 3.90308C13.3558 4.24585 14.0604 4.72192 14.6655 5.3313C15.2749 5.94067 15.7531 6.64526 16.1001 7.44507C16.4471 8.24064 16.6206 9.09123 16.6206 9.99683C16.6206 10.9067 16.4471 11.7615 16.1001 12.5613C15.7531 13.3569 15.2749 14.0593 14.6655 14.6687C14.0604 15.2781 13.3579 15.7542 12.5581 16.0969C11.7583 16.4439 10.9056 16.6174 10 16.6174ZM10 15.1638C10.7152 15.1638 11.3838 15.0305 12.0059 14.7639C12.6322 14.4973 13.1823 14.1292 13.6562 13.6594C14.1302 13.1855 14.5005 12.6375 14.7671 12.0154C15.0337 11.3891 15.167 10.7162 15.167 9.99683C15.167 9.28166 15.0316 8.61304 14.7607 7.99097C14.4941 7.36466 14.1239 6.81453 13.6499 6.34058C13.1802 5.86662 12.6322 5.49634 12.0059 5.22974C11.3838 4.96313 10.7131 4.82983 9.99365 4.82983C9.27848 4.82983 8.60775 4.96313 7.98145 5.22974C7.35938 5.49634 6.81136 5.86662 6.3374 6.34058C5.86768 6.81453 5.49951 7.36466 5.23291 7.99097C4.97054 8.61304 4.83936 9.28166 4.83936 9.99683C4.83936 10.7162 4.97054 11.3891 5.23291 12.0154C5.49951 12.6375 5.86979 13.1855 6.34375 13.6594C6.81771 14.1292 7.36572 14.4973 7.98779 14.7639C8.6141 15.0305 9.28483 15.1638 10 15.1638Z"})})},78197:(e,t,i)=>{i.d(t,{S:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("teamSize",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M7.333 14.667a4.667 4.667 0 1 0 0-9.334 4.667 4.667 0 0 0 0 9.334zm4.356-.548A5.977 5.977 0 0 1 7.333 16a5.977 5.977 0 0 1-4.355-1.881A7.295 7.295 0 0 0 0 20h14.667a7.296 7.296 0 0 0-2.978-5.881zm1.599-4.832a4.664 4.664 0 1 0-5.242-5.241 6.01 6.01 0 0 1 5.242 5.241zm.003 1.347a6.024 6.024 0 0 1-.794 2.414 8.571 8.571 0 0 1 1.656 1.619H20a7.296 7.296 0 0 0-2.978-5.882 5.983 5.983 0 0 1-3.731 1.849z"})})}}]);