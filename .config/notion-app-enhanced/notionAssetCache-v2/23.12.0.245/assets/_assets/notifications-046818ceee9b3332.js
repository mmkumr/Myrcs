"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[1909],{33338:(e,t,i)=>{i.d(t,{Z:()=>l});i(67294);var n=i(480),o=i(24405),s=i(42853),r=i(64921),a=i(85893);function l(e){window.__c={n:"CollectionViewFilterPill"};const{icon:t,title:i,on:l,hasDiff:c,wrapStyle:p,innerStyle:u,hideChevron:h}=e,m=(0,o.Fg)(),g=(0,n.O7)();return(0,a.jsxs)("div",{style:{borderRadius:14,marginRight:6,display:"inline-flex",...c&&{position:"relative"},...p},children:[(0,a.jsxs)(r.Z,{disabled:e.disabled,style:d(Boolean(l),m,u,g.device.isMobile),hoveredStyle:l?{background:m.outlineBlueButtonHoveredBackground}:void 0,pressedStyle:l?{background:m.outlineBlueButtonPressedBackground}:void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,i,!h&&(0,s.i)({width:10,marginLeft:4,marginTop:1,fill:l?m.blueColor:m.lightIconColor})]}),c&&(0,a.jsx)("div",{style:{position:"absolute",top:-2,right:-2,background:"dark"===m.mode?m.accentColors.orange[500]:m.accentColors.orange[300],border:`1px solid ${m.contentBackground}`,width:9,height:9,borderRadius:9}})]})}function d(e,t,i,n){return{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:n?28:24,lineHeight:n?"28px":"24px",padding:"0 8px",border:`1px solid ${t.outlineButtonBorder}`,color:t.mediumTextColor,...e&&{color:t.blueColor,border:`1px solid ${t.filterPillBorder}`,background:t.filterPillBackground},...i}}},255:(e,t,i)=>{i.d(t,{Z:()=>a});i(67294);var n=i(480),o=i(53465),s=i(73063),r=i(85893);const a=function(e){window.__c={n:"MenuItemRemoveButton"};const t=(0,n.O7)(),i={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:a,disabled:l}=e,{device:d}=t,c=d.isMobile?{...i.removeFilterButton,...i.removeFilterButtonMobile}:i.removeFilterButton;return(0,r.jsx)(s.Z,{icon:o.X,onClick:a,disabled:l,disableBackground:!0,style:c})}},27386:(e,t,i)=>{i.d(t,{Z:()=>p,k:()=>d});i(67294);var n=i(83355),o=i(34859),s=i(91754),r=i(61519),a=i(53336),l=i(85893);function d(e){return e?18:60}class c extends n.Z{static renderDivider(){return(0,l.jsx)(r.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:i,bannerText:n,controlRowPaddingTopBottom:r=16}=this.props,c=()=>e.isMobile?18:36;return this.props.disableScroller?(0,l.jsxs)("div",{style:{paddingLeft:d(e.isMobile),paddingRight:d(e.isMobile)},children:[(0,l.jsx)("div",{style:{paddingTop:c(),paddingBottom:c()},children:t}),i&&(0,l.jsx)("div",{style:{paddingTop:r,paddingBottom:r,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`},children:i})]}):(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.cardContentBackground},children:[n&&(0,l.jsx)(s.Z,{styleKey:s.v.Blue,isMobile:!1,children:n}),(0,l.jsx)(a.Z,{type:o.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:d(e.isMobile),paddingRight:d(e.isMobile),paddingTop:n?15:c(),paddingBottom:n?22:c()},children:t}),i&&(0,l.jsx)("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:d(e.isMobile),paddingRight:d(e.isMobile),paddingTop:r,paddingBottom:r,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`},children:i})]})}}c.displayName="SettingBox";const p=c},55422:(e,t,i)=>{i.d(t,{Z:()=>R});i(57658);var n=i(67294),o=i(480),s=i(86628),r=i(24405),a=i(36591),l=i(42853),d=i(97880),c=i(5366),p=i(61045),u=i(1865),h=i(11368),m=i(87279),g=i(23570),b=i(52275),f=i(31945),x=i(78140),y=i(28992),M=i(32163),v=i(63296),C=i(89728),T=i(72495),j=i(24006),S=i(26388),k=i(64369),Z=i(91718),w=i(27386),B=i(23189),I=i(85893);function R(e){window.__c={n:"SettingsItem"};const{title:t,caption:i,captionStyle:a,isMobile:l,upsellOptions:d,type:c,shouldHighlight:m}=e,b=(0,o.O7)(),{paddingLeftCSS:f,paddingRightCSS:x}=(0,s.VK)((()=>b.WindowSizeStore.state),[b]),[y,M]=(0,n.useState)(!1),v=(0,n.useCallback)((()=>M(!0)),[M]),C=(0,n.useCallback)((()=>M(!1)),[M]),T=(0,n.useContext)(h.Ue),j=(0,n.useRef)(null);(0,n.useEffect)((()=>{m&&j.current&&p.bx({element:j.current,scrollers:{verticalScroller:null==T?void 0:T.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[m,j,null==T?void 0:T.verticalScroller]);const R=(0,n.useMemo)((()=>{if(l){if("dropdown"===c)return{display:"flex",flexDirection:"column"};if("toggleToButton"===e.type&&e.isOn||"custom"===e.type&&!0===e.useFlexboxStyle)return{}}return{display:"flex",alignItems:"center",justifyContent:"space-between"}}),[l,c,e]),P=(0,r.yK)((t=>({container:{...R,paddingLeft:l?f:void 0,paddingRight:l?x:void 0,cursor:y&&!e.disabled?"pointer":e.disabled?"not-allowed":"default",...m?{backgroundColor:t.buttonHoveredBackground,marginLeft:-1*(0,w.k)(l),marginRight:-1*(0,w.k)(l),paddingLeft:(0,w.k)(l),paddingRight:(0,w.k)(l),marginTop:-1*(0,g.f)(l)/2,marginBottom:-1*(0,g.f)(l)/2,paddingTop:(0,g.f)(l)/2,paddingBottom:(0,g.f)(l)/2}:{}},description:{display:"flex",flexDirection:"column",marginRight:"10%"},captionStyle:{...a},title:{display:"flex",flexDirection:"row"}})),[l,f,x,m,y,a,e.disabled,R]),L="toggle"===e.type||"toggleToButton"===e.type||"custom"===e.type&&!e.disableSettingsItemClick,O=(0,I.jsxs)("div",{ref:j,style:P.container,onClick:()=>{if(!(e.disabled||"custom"===e.type&&e.disableSettingsItemClick))return d&&d.shouldUpsell?u.y(b,{from:d.analyticsName,for:d.subscriptionTier}):void("toggle"===e.type?e.onToggle():"toggleToButton"===e.type?e.onClick():"custom"===e.type&&e.customButton&&n.isValidElement(e.customButton)&&e.customButton.props.onClick&&"function"==typeof e.customButton.props.onClick&&e.customButton.props.onClick())},onMouseEnter:L?v:void 0,onMouseLeave:L?C:void 0,children:[(0,I.jsxs)("div",{style:P.description,children:[(0,I.jsxs)(B.Z,{smallMarginBottom:!0,disabled:e.disabled,isCritical:e.isCritical,children:[(0,I.jsxs)("div",{style:P.title,children:[t,e.badge]}),d&&d.shouldUpsell&&(0,I.jsx)(Z.Z,{subscriptionTier:d.subscriptionTier,analyticsName:d.analyticsName,onClick:()=>u.y(b,{from:d.analyticsName,for:d.subscriptionTier}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})]}),(0,I.jsx)(k.Z,{style:P.captionStyle,isSmall:!0,isMultiline:!0,children:i})]}),(0,I.jsx)(F,{...e})]});return e.tooltipLabel?(0,I.jsx)(S.Z,{placement:S.Z.Placement.Bottom,alignment:S.Z.Alignment.Center,disableTooltip:e.disableTooltip,renderTooltip:()=>e.tooltipLabel,render:e=>(0,I.jsx)("div",{...e,children:O})}):O}function F(e){return"toggle"===e.type?(0,I.jsx)(j.Z,{on:e.isOn,disabled:e.disabled}):"dropdown"===e.type?(0,I.jsx)(P,{...e}):"custom"===e.type?(0,I.jsx)(I.Fragment,{children:e.customButton}):"toggleToButton"===e.type?e.isOn?(0,I.jsx)("div",{style:{marginTop:12},children:(0,I.jsx)(v.Z,{isLarge:!0,onClick:e.onClick,style:e.buttonStyle,disabled:e.disabled,children:e.buttonLabel})}):(0,I.jsx)(j.Z,{on:!1,onClick:e.onClick,disabled:e.disabled}):void(0,d.t1)(e)}function P(e){var t;window.__c={n:"Dropdown"};const{isMobile:i,title:n,upsellOptions:o,currentOption:s,options:d,info:p,onSelectOption:u,menuStyle:h}=e,g=null===(t=d.find((e=>{let{key:t}=e;return t===s})))||void 0===t?void 0:t.label,v=(0,r.yK)((e=>({button:{marginTop:12,marginBottom:4,marginRight:i?"auto":void 0,paddingLeft:i?12:8,paddingRight:i?12:8,height:i?44:28,border:i?`1px solid ${e.outlineButtonBorder}`:void 0},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[i]),j=Boolean(o&&o.shouldUpsell)||e.disabled;return(0,I.jsx)(f.ZP,{popupType:i?f.Z4.SlideUp:f.Z4.Popup,placementToOrigin:f.pO.Right,renderOrigin:e=>(0,I.jsxs)(C.Z,{...e,isLarge:!0,style:{...v.button,opacity:j?.4:1},disabled:j,children:[g,(0,l.i)(v.icon)]}),render:e=>{let t;t=i?{menuType:m.og.Modal,title:n,right:(0,I.jsx)(c.FormattedMessage,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:m.og.Popup,width:250,...h};const o=[{key:"settings-item-section",render:e=>(0,I.jsx)(T.Z,{...e}),items:d.map((t=>{let{key:n,label:o,caption:s}=t;return{key:n,action:()=>{u(n),e.close()},render:e=>(0,I.jsx)(b.Z,{...e,title:o,caption:s,shouldWrapCaption:!0,right:g===o?(0,I.jsx)("div",{style:{width:i?16:14},children:(0,a.e)()}):void 0})}}))}];if(p){const e=p.map((e=>{let{key:t,label:i}=e;return{key:t,action:()=>{},render:e=>(0,I.jsx)(y.Z,{...e,shouldWrapCaption:!0,caption:i})}}));o.push({key:"info-item-section",render:e=>(0,I.jsx)(T.Z,{...e,topBorder:!0}),items:e})}return(0,I.jsx)(x.Z,{...t,children:(0,I.jsx)(M.Z,{type:M.i.Vertical,sections:o,initialFocus:void 0})})}})}},66957:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(67294),o=i(480),s=i(86628),r=i(24405),a=i(87279),l=i(89728),d=i(85893);function c(e){let{tabs:t,selectedIndex:i,onChange:c,separatorIndexes:p,right:u,style:h,rightStyle:m,tabStyle:g,tabTitleStyle:b,tabBorderStyle:f,selectedTabStyle:x,readOnly:y,hideTabBorder:M}=e;window.__c={n:"TabBarMenuItem"};const v=(0,n.useContext)(a.Xp),{device:C,WindowSizeStore:T}=(0,o.O7)(),{safePaddingLeft:j,safePaddingRight:S}=(0,s.VK)((()=>({safePaddingLeft:T.getSafePaddingLeftCSS(16),safePaddingRight:T.getSafePaddingRightCSS(16)})),[T]),k=(0,r.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...g},i=`inset 0 -1px 0 ${e.regularDividerColor}`,n=v.menuType===a.og.Popup,o={fontSize:16,paddingTop:2,paddingLeft:n?16:j,paddingRight:n?16:S,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:M?void 0:i,...C.isMobile?o:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...h},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...x},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...f},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...m}}}),[v.menuType,C.isMobile,m,j,S,x,h,f,g,M]);return(0,d.jsxs)("div",{className:"hide-scrollbar",style:k.container,children:[t.map(((e,t)=>{const o=t===i;return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsxs)("div",{style:o?k.selectedTab:k.tab,children:[(0,d.jsx)(l.Z,{style:b,onClick:()=>c(t),disabled:y,mobileFeedback:C.isMobile,children:e}),o&&(0,d.jsx)("div",{style:k.border})]},`tabButton-${t}`),p&&p.includes(t)&&(0,d.jsx)("div",{style:k.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),u&&(0,d.jsx)("div",{style:k.rightContainer,children:u})]})}const p=n.memo(c)},26494:(e,t,i)=>{i.r(t),i.d(t,{default:()=>me});var n=i(67294),o=i(83355),s=i(49085),r=i(1464),a=i(98519),l=i(72126),d=i(29477),c=i(97880),p=i(5366),u=i(19719),h=i(17659),m=i(43250),g=i(87279),b=i(51811),f=i(5162),x=i(80444),y=i(4761),M=i(84708),v=i(23063),C=i(36488),T=i(68785),j=i(78140),S=i(89728),k=i(43145),Z=i(30506),w=i(33411),B=i(83785),I=i(61208),R=i(480),F=i(86628),P=i(24405),L=i(6637),O=i(73063),U=i(26388),A=i(85893);function D(e){let{location:t}=e;window.__c={n:"InboxFilterForUnreadButton"};const i=(0,p.useIntl)(),o=(0,R.O7)(),{currentTab:s,showOnlyUnreadNotifications:r,isCurrentTabEmpty:a}=(0,F.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=y.ZP.state;return{currentTab:e,showOnlyUnreadNotifications:"mentions"===e&&y.ZP.state.showOnlyUnreadNotifications,isCurrentTabEmpty:t}}),[]),l=(0,n.useCallback)((async()=>{if(r)y.ZP.update((e=>({...e,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))),u.U0(o,{toggled_to:"off"});else{const e=await h.Qy({environment:o});y.ZP.update((t=>({...t,showOnlyUnreadNotifications:!0,unreadNotificationIds:e}))),u.U0(o,{toggled_to:"on"})}}),[o,r]),d=(0,P.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:r?void 0:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17},desktopInboxPanelIcon:{height:18,width:18,...!r&&{fill:e.regularTextColor}}})),[r]);if("mentions"!==s)return null;const m=!r&&a,g=r?(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltip"}):(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltip"}),b=r?i.formatMessage({defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltipAriaLabel"}):i.formatMessage({defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltipAriaLabel"});let f,x;switch(t){case"mobileTopBar":f=void 0,x=d.mobileTopBarIcon;break;case"webUpdatesModal":f=!!r||void 0,d.webUpdatesModalIcon;break;case"desktopInboxPanel":f=!!r||void 0,x=d.desktopInboxPanelIcon;break;default:(0,c.t1)(t)}return(0,A.jsx)(U.Z,{disableTooltip:m,renderTooltip:()=>g,render:e=>(0,A.jsx)(O.Z,{icon:L.I,isBlue:r,hovered:f,iconStyle:x,disabled:m,onClick:l,ariaLabel:b,...e})})}const N=n.memo(D);var _=i(82990),z=i(18514),E=i(19034),V=i(74523),H=i(39849),K=i(66957),W=i(52867),$=i(5686),q=i(17652),G=i(63296);function X(e){let{}=e;window.__c={n:"InboxMentionsActionButtons"};const t=(0,R.Fy)(),i=(0,R.O7)(),o=(0,F.VK)((()=>(0,q.H)()),[]),s=(0,F.VK)((()=>y.n_.state),[]),r=(0,F.VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=y.ZP.state;if("mentions"!==e||t)return;const{containsBothReadAndUnreadNotifications:i,containsUnreadNotifications:n,showOnlyUnreadNotifications:o}=y.ZP.state;return{containsBothReadAndUnreadNotifications:i,containsUnreadNotificationsAccordingToUpdatesStore:n,showOnlyUnreadNotifications:o}}),[]),a=(0,F.VK)((()=>E.Z.getUnreadCountForCurrentSpace().mentions>0),[]),l=(0,n.useCallback)((()=>{u.Xf(i),h.go(i)}),[i]),d=(0,n.useCallback)((()=>{if(!r)return;const{containsBothReadAndUnreadNotifications:e,showOnlyUnreadNotifications:t}=r;let n="none";t?n="unread":e&&(n="read"),u.zD(i,{readFilter:n}),h.rG(i,"mentions",n)}),[i,r]),c=(0,P.yK)((e=>{const i={opacity:1,flex:1,height:t.isMobile?32:27,...o&&{fontSize:14}};return{headerWithBottomBorder:{borderBottom:s?void 0:`1px solid ${e.regularDividerColor}`},container:{display:"flex",marginTop:o&&!t.isMobile?0:12,marginLeft:16,marginRight:16,paddingBottom:12,gap:8},buttons:i,buttonsWithLoweredOpacity:{...i,opacity:.7}}}),[t.isMobile,s,o]);if(!r)return null;const{containsBothReadAndUnreadNotifications:m,containsUnreadNotificationsAccordingToUpdatesStore:g,showOnlyUnreadNotifications:b}=r,f=g||a;return(0,A.jsx)("div",{style:c.headerWithBottomBorder,children:(0,A.jsxs)("div",{style:c.container,children:[(0,A.jsx)(U.Z,{disableTooltip:f,renderTooltip:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"All notifications have been marked as read.",id:"updatesModal.spaceUpdatesTab.markAllReadButton.disabledTooltip"})}),render:e=>(0,A.jsx)(G.Z,{onClick:l,style:f?c.buttons:c.buttonsWithLoweredOpacity,isSmall:!t.isMobile,disabled:!f,icon:o?$.J:void 0,...e,children:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Mark all as read",id:"updatesModal.spaceUpdates.mentionsTab.markAllReadButtonTitle"})})}),(0,A.jsx)(G.Z,{onClick:d,style:c.buttons,isSmall:!t.isMobile,icon:o?W.H:void 0,children:b?(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Archive unread",id:"updatesModal.spaceUpdates.mentionsTab.archiveUnreadButtonTitle"}):m?(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Archive read",id:"updatesModal.spaceUpdates.mentionsTab.archiveReadButtonTitle"}):(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Archive all",id:"updatesModal.spaceUpdates.mentionsTab.archiveAllButtonTitle"})})]})})}const Y=n.memo(X);var Q=i(18442),J=i(50906),ee=i(97799),te=i(92083),ie=i(62820);function ne(e){let{location:t}=e;window.__c={n:"InboxNotificationSettingsButton"};const i=(0,p.useIntl)(),o=(0,R.O7)(),s=(0,n.useCallback)((()=>{const{device:e}=o;J.FRk(o),e.isMobile?ee.Z.setState({open:!0,source:ee.Y.Updates}):(ie.Z.setState({...ie.Z.state,open:!1}),(0,q.r)()?te.Z.setState({...te.Z.state,currentTab:"notifications",defaultSubtab:void 0}):te.Z.setState({...te.Z.state,currentTab:"notifications_and_settings",defaultSubtab:void 0}),te.Z.setState({...te.Z.state,open:!0}))}),[o]),r=(0,P.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{width:16,height:16}})),[]);let a;switch(t){case"mobileTopBar":a=r.mobileTopBarIcon;break;case"webUpdatesModal":a=r.webUpdatesModalIcon;break;default:(0,c.t1)(t)}return(0,A.jsx)(U.Z,{renderTooltip:()=>(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Open notifications settings",id:"updatesModal.openNotifications.tooltip"}),render:e=>(0,A.jsx)(O.Z,{icon:Q.H,iconStyle:a,onClick:s,ariaLabel:i.formatMessage({id:"updatesModal.openNotifications.tooltipAriaLabel",defaultMessage:"Open notifications settings button"}),...e})})}const oe=n.memo(ne);var se=i(79198);function re(e){let{location:t,onClick:i}=e;window.__c={n:"InboxRefreshAllTabButton"};const n=(0,p.useIntl)(),o=(0,F.VK)((()=>y.ZP.state.currentTab),[]),s=(0,P.yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17}})),[]);if("allPages"!==o)return null;let r;switch(t){case"mobileTopBar":r=s.mobileTopBarIcon;break;case"webUpdatesModal":r=s.webUpdatesModalIcon;break;default:(0,c.t1)(t)}return(0,A.jsx)(U.Z,{renderTooltip:()=>(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescription"}),render:e=>(0,A.jsx)(O.Z,{icon:se.n,iconStyle:r,onClick:i,ariaLabel:n.formatMessage({defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescriptionAriaLabel"}),...e})})}const ae=n.memo(re);var le=i(92955);function de(e){let{orderedTabConfigs:t,onClickRefreshAllTab:i}=e;window.__c={n:"InboxModalHeader"};const o=(0,R.Fy)(),s=(0,R.O7)(),{currentTab:r,currentTabIndex:a}=(0,F.VK)((()=>{const{currentTab:e}=y.ZP.state,i=t.findIndex((t=>t.tab===e));return{currentTab:e,currentTabIndex:i}}),[t]),l=(0,n.useMemo)((()=>t.map(((e,t)=>{if(e.showSeparatorBefore)return t-1})).filter(c.$K)),[t]),d=(0,F.VK)((()=>E.Z.getUnreadCountForCurrentSpace().mentions>0),[]),u=(0,n.useCallback)((e=>{const i=t[e],n=null==i?void 0:i.tab;n&&r!==n&&h.G7({environment:s,newTab:n,shouldTrack:!0})}),[r,s,t]),g=(0,P.yK)((()=>({mentionsContainer:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:d?_.Z.fontWeight.medium:void 0},tabBarRightStyle:{justifyContent:"space-between"},helpButton:{marginLeft:0,...o.isMobile&&{marginTop:-1}},unreadMentionsBadge:{marginLeft:6},actionButtons:{display:"flex",justifyContent:"center",gap:6}})),[o.isMobile,d]),b=H.Z.Color.Red,f={mentions:(0,A.jsxs)("div",{style:g.mentionsContainer,className:m.I2F,children:[(0,A.jsx)("div",{children:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Inbox",id:"updatesModal.mentionsTab.title"})}),(0,A.jsx)(le.Z,{type:"currentSpace",color:b,style:g.unreadMentionsBadge})]}),allPages:(0,A.jsx)("div",{className:m.gjL,children:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"All",id:"updatesModal.allUpdatesTab.title"})}),archive:(0,A.jsx)("div",{className:m.HKr,children:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Archived",id:"updatesModal.archiveTab.title"})})},x=t.map((e=>f[e.tab])),M="webUpdatesModal",v=!o.isMobile&&(0,A.jsxs)("div",{style:g.actionButtons,children:[(0,A.jsx)(ae,{location:M,onClick:i}),(0,A.jsx)(N,{location:M}),(0,A.jsx)(oe,{location:M})]}),C=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(U.Z,{render:e=>(0,A.jsx)(V.Z,{href:(0,z.UY)("guides.notifications"),analyticsFrom:"inbox_tabs_link",style:g.helpButton,...e}),renderTooltip:()=>(0,A.jsx)(p.FormattedMessage,{id:"updatesButton.learnMoreAboutInboxLink",defaultMessage:"Learn more about notifications"})}),v]});return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(K.Z,{tabs:x,selectedIndex:a,onChange:u,separatorIndexes:l,right:C,rightStyle:g.tabBarRightStyle}),"mentions"===r&&(0,A.jsx)(Y,{})]})}const ce=n.memo(de);var pe=i(59878);const ue=[{tab:"mentions"},{tab:"archive"},{tab:"allPages",showSeparatorBefore:!0}];class he extends o.Z{constructor(){super(...arguments),this.storeTypes={refreshCountStore:s.default.createClass(0)},this.loadingSpinner=()=>{if((0,f.Y)("supportsNativeHome"))return(0,A.jsx)(w.Z,{show:void 0!==y.ZP.state.loadingId,showDelay:400,showHold:0,render:e=>e?(0,A.jsx)(T.Z,{style:{width:14}}):(0,A.jsx)("div",{style:{width:14}})})},this.handleCloseUpdatesPopup=()=>{u.nI(this.environment),h.G7({environment:this.environment,newTab:"mentions",shouldTrack:!1})},this.handleSwipeLeft=()=>{const e=ue.findIndex((e=>e.tab===y.ZP.state.currentTab)),t=ue[e+1].tab;void 0!==t&&h.G7({environment:this.environment,newTab:t,shouldTrack:!0})},this.handleSwipeRight=()=>{const e=ue.findIndex((e=>e.tab===y.ZP.state.currentTab)),t=ue[e-1].tab;void 0!==t&&h.G7({environment:this.environment,newTab:t,shouldTrack:!0})},this.handleRefreshAll=()=>{const{refreshCountStore:e}=this.stores;e.setState(e.state+1)},this.handleRefreshAllThrottled=l.Ds(this.handleRefreshAll,1e3,{leading:!0})}willUnmount(){this.handleCloseUpdatesPopup()}renderComponent(){const{device:e}=this.environment;let t;const i=(0,A.jsx)(ce,{onClickRefreshAllTab:this.handleRefreshAllThrottled,orderedTabConfigs:ue});if(e.isMobile){const n="mobileTopBar";t={menuType:g.og.Modal,title:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Updates",id:"updatesModal.mobileMenu.title"}),width:this.props.format===b.EX.RenderAsPage?"100vw":void 0,renderAsPage:this.props.format===b.EX.RenderAsPage,right:[(0,A.jsx)(ae,{onClick:this.handleRefreshAllThrottled,location:n},"InboxRefreshAllTabButton"),(0,A.jsx)(N,{location:n},"InboxFilterForUnreadButton"),(0,A.jsx)("span",{style:{width:8}},"paddingSpan"),(0,A.jsx)(oe,{location:n},"InboxNotificationSettingsButton")],left:[this.loadingSpinner(),e.isPhone&&(0,f.Y)("supportsNativeHome")&&this.props.format===b.EX.RenderAsPage?void 0:(0,r.k)({fill:this.theme.regularTextColor,width:26,height:26})],onClickLeft:this.props.onClose,header:i,whiteBackground:!0}}else t={menuType:g.og.Popup,header:i,height:"auto"};return(0,A.jsx)(Z.Z,{onSwipeLeft:this.handleSwipeLeft,onSwipeRight:this.handleSwipeRight,render:e=>(0,A.jsxs)(j.Z,{...t,...e,className:m.C18,children:[(0,A.jsx)(k.Z,{onChange:(e,t)=>{let{offsetFromTop:i}=t;y.n_.setState(i<=0)}}),(0,A.jsx)(C.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>this.props.format===b.EX.RenderAsPage?this.renderContentAsPageWithLazyLoader():this.renderContent()})]})})}renderContent(){const e=y.ZP.state.currentTab;if("allPages"===e){const{currentSpaceStore:e,mainEditorCurrentBlockStore:t}=x.default.state;return e&&t?(0,A.jsx)(M.Z,{spaceId:e.id,empty:()=>(0,A.jsx)(I.Z,{message:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Updates on pages in your workspace will appear here.",id:"updatesModal.allPagesTab.emptyPrompt"}),title:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"No new updates",id:"updatesModal.allPagesTab.emptyPromptTitle"})}),source:"notifications_tab"},`all-pages-${this.stores.refreshCountStore.state}`):null}if("mentions"===e){const e=y.ZP.state.showOnlyUnreadNotifications;return(0,A.jsx)(pe.Z,{type:"mentions",empty:e?this.renderEmptyUnreadMentionsTab():(0,A.jsx)(I.Z,{message:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"You'll be notified here for @mentions, page activity, requests, and page invites.",id:"updatesModal.spaceUpdatesTab.allArchivedRequests"}),title:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"You're all caught up",id:"updatesModal.spaceUpdatesTab.allArchivedTitle"})}),source:"notifications_tab",tab:"inbox"},"mentions")}if("archive"===e)return(0,A.jsx)(pe.Z,{type:"archive",empty:(0,A.jsx)(I.Z,{message:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"Any Inbox updates you archived will show up here.",id:"updatesModal.archiveTab.emptyPrompt"}),title:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"No archived updates",id:"updatesModal.archiveTab.emptyPromptTitle"})}),source:"notifications_tab",tab:"archive"},"archive");(0,c.t1)(e)}renderContentAsPageWithLazyLoader(){return(0,A.jsx)(B.Z,{fetch:async()=>{await d.Vs(0),await x.default.waitUntil((()=>void 0!==x.default.state.currentSpaceStore))},loading:()=>(0,A.jsx)(n.Fragment,{}),willRender:()=>{var e;null===(e=this.environment.mobileNative)||void 0===e||e.markTransitionReady({type:"updates"})},render:()=>(0,A.jsx)(v.Z,{isVisible:!0,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},blockRenderQueueOnEnter:!0,render:()=>this.renderContent()})})}renderEmptyUnreadMentionsTab(){return(0,A.jsx)(I.Z,{icon:a.k,title:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"You've read everything",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabTitle"}),message:(0,A.jsxs)("div",{children:[(0,A.jsx)(p.FormattedMessage,{defaultMessage:"You have more notifications in your inbox.",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabMessage"}),(0,A.jsx)("div",{style:{height:12}}),(0,A.jsx)(S.Z,{isBlue:!0,onClick:()=>{"mentions"===y.ZP.state.currentTab&&y.ZP.setState({...y.ZP.state,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]})},children:(0,A.jsx)(p.FormattedMessage,{defaultMessage:"See all",id:"updatesModal.spaceUpdatesTab.emptyUnreadMentionsTabButton"})})]})})}}he.displayName="UpdatesPopup",he.Format=b.EX;const me=he},93481:(e,t,i)=>{i.d(t,{Z:()=>T});i(67294);var n=i(83355),o=i(69651),s=i(97880),r=i(5366),a=i(48141),l=i(41558),d=i(33338),c=i(42922),p=i(52275),u=i(3386),h=i(89728),m=i(53437),g=i(72495),b=i(83264),f=i(255),x=i(75689),y=i(91642),M=i(8319),v=i(85893);class C extends n.Z{constructor(){super(...arguments),this.storeTypes={store:l.Z},this.renderActiveButtonOrigin=()=>{const{value:e,dateFormat:t,disabled:i,focused:n,intl:s}=this.props,r=this.styles,l=this.getThemeColors(),d={...r.menuItem,...l.activeMenuItem},c=a._Q(e,s,t),u=(0,v.jsx)(f.Z,{onClick:this.handleClear,disabled:i});return(0,v.jsx)(p.Z,{focused:n,disabled:i,icon:(0,o.C)(r.iconActiveDesktop),title:c,right:u,isTokenTitle:!0,alignIconTop:!0,onClick:this.handleOriginActivate,desktopTitleStyle:r.menuItemTitleDesktop,desktopIconStyle:r.iconActiveDesktopWrapper,style:d})},this.renderInactiveButtonOrigin=()=>{const{title:e,icon:t,disabled:i,focused:n,mode:o}=this.props,s=this.styles,r=this.getThemeColors(),a={...s.menuItem,...r.buttonMenuItem,...o===M.Z.Mode.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,v.jsx)(p.Z,{focused:n,disabled:i,icon:t(s.icon),title:e,onClick:this.handleOriginActivate,style:a})},this.renderPillButtonOrigin=()=>{const{value:e,title:t}=this.props;return(0,v.jsx)(d.Z,{on:Boolean(e.starting||e.ending),icon:(0,o.C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,v.jsx)("span",{children:t}),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e,showButtons:t}=this.props,{store:i}=this.stores;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.Z,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:i,onDismiss:this.handleMenuClose}),t&&(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,v.jsx)(h.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:this.handleMenuClose,children:(0,v.jsx)(r.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,v.jsx)(c.Z,{onClick:()=>this.props.onChange(this.stores.store.state.temporaryDateRange),children:(0,v.jsx)(r.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]})]})},this.renderFooter=()=>{const{store:e}=this.stores;return(0,v.jsxs)(g.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,v.jsx)(h.Z,{onClick:()=>{e.setState({...e.state,temporaryDateRange:{starting:void 0,ending:void 0}}),this.props.onChange({})},children:(0,v.jsx)(r.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,v.jsx)(c.Z,{onClick:this.handleMenuClose,children:(0,v.jsx)(r.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})},this.handleOriginActivate=()=>{const{disabled:e}=this.props,{store:t}=this.stores;e||t.setState({...t.state,isOpen:!0,focus:"starting"})},this.handleMenuClose=e=>{const{onChange:t,onMenuDismiss:i}=this.props,{store:n}=this.stores,{temporaryDateRange:o}=n.state;a.zD(e)||(this.props.showButtons||t(o),n.setState({...n.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),i&&i())},this.handleClear=()=>{const{onChange:e}=this.props;e({starting:void 0,ending:void 0})},this.handleMenuListKey=e=>{e.preventDefault&&e.preventDefault()},this.updateTemporary=e=>{const{store:t}=this.stores;if(!e.error)return t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},sectionMenuItem:{display:"flex"},summary:{display:"inline-flex"}}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t}=this.props,{store:i}=this.stores,n=this.styles,o=e===M.z.Section,r=o?t:void 0,a=(()=>e===M.Z.Mode.Section?this.renderActiveButtonOrigin():e===M.Z.Mode.Button?this.renderInactiveButtonOrigin():e===M.Z.Mode.Pill?this.renderPillButtonOrigin():void(0,s.t1)(e))();return(0,v.jsx)(y.Z,{title:r,marginAfter:o,children:(0,v.jsx)(u.Z,{capture:i.state.isOpen,onUp:this.handleMenuListKey,onDown:this.handleMenuListKey,onEnter:this.handleMenuListKey,children:(0,v.jsx)(m.ZP,{popupType:this.getPopupType(),open:i.state.isOpen,origin:a,render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:m.ZP.Placement.Bottom,alignmentToOrigin:m.ZP.Alignment.Start,keepFocus:!0,style:n.popup})})})}renderMobile(e){const{store:t}=this.stores,i=e===M.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return(0,v.jsx)(m.ZP,{popupType:m.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:i,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:i}=this.props,n=this.styles;return(0,v.jsx)(p.Z,{disabled:i,focused:!1,icon:e(n.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,dateFormat:i,disabled:n,intl:s}=this.props,r=this.styles,l=(0,v.jsxs)("div",{style:r.summary,children:[(0,o.C)(r.iconActiveMobile),a._Q(t,s,i)]});return(0,v.jsx)(x.Z,{disabled:n,onClick:this.handleOriginActivate,onClickClear:this.handleClear,label:e,title:l})}getCurrentValue(){const{value:e}=this.props,{store:t}=this.stores,{temporaryDateRange:i}=t.state;return{...e,...i}}getPopupType(){const{device:e}=this.environment;return e.isMobile?m.ZP.PopupType.SlideUp:m.ZP.PopupType.Popup}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},activeMenuItem:{color:this.theme.regularTextColor}}}}C.displayName="SearchDateFilter";const T=(0,r.injectIntl)(C)},8319:(e,t,i)=>{i.d(t,{z:()=>O,Z:()=>A});var n=i(67294),o=i(83355),s=i(47453),r=i(72126),a=i(97880),l=i(5366),d=i(75024),c=i(49085);class p extends c.default{getInitialState(){return{isMenuOpen:!1,inputTemporaryValue:"",indexToReplace:void 0,popupOriginRect:void 0}}}const u=p;var h=i(33338),m=i(42922),g=i(52275),b=i(89728),f=i(53437),x=i(72495),y=i(75689),M=i(91642),v=i(68626),C=i(91155),T=i(87279),j=i(29798),S=i(72087),k=i(78140),Z=i(32163),w=i(43765),B=i(40721),I=i(77137),R=i(47082),F=i(85893);class P extends o.Z{constructor(){super(...arguments),this.storeTypes={requestStore:S.Z,menuListStore:j.Z},this.renderRequest=(e,t,i)=>{const{labelText:n,value:o}=this.props,{menuListStore:s}=this.stores,r=e=>(0,F.jsx)(x.Z,{...e,title:n.resultSectionTitle,loading:!i});if(e)return v.log({level:"error",from:n.componentDebugName,type:"requestFailed",error:(0,C.Ui)(e),data:{miscDataToConvertToString:{query:o}}}),(0,F.jsx)(r,{children:(0,F.jsx)(w.Z,{title:(0,F.jsx)(l.FormattedMessage,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!t)return(0,F.jsx)(r,{children:(0,F.jsx)(w.Z,{title:(0,F.jsx)(l.FormattedMessage,{defaultMessage:"Loadingâ€¦",id:"search.inputMenu.loading.message"})})});if(t&&0===t.length)return(0,F.jsx)(r,{children:(0,F.jsx)(w.Z,{title:(0,F.jsx)(l.FormattedMessage,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const a={key:"results",items:t.map(this.getResultMenuItem),render:r};return(0,F.jsx)(Z.Z,{type:Z.i.Vertical,store:s,initialFocus:0,sections:[a]})},this.handleMenuInputRemoveLast=()=>{const{items:e,onRemove:t}=this.props,i=r.Z$(e);i&&t(i)},this.getResultMenuItem=e=>{const{renderResultMenuItem:t,onConfirm:i}=this.props;return{key:e,action:()=>i(e),render:i=>t(e,i)}},this.styles={input:{marginTop:8,marginLeft:8,marginRight:8,boxSizing:"border-box",width:"auto"},menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}}}renderComponent(){const{value:e,items:t,performRequest:i}=this.props,{requestStore:n}=this.stores,o={query:e,current:t};return(0,F.jsx)(k.Z,{...this.getMenuProps(),children:(0,F.jsx)(I.Z,{debounce:100,requestStore:n,request:o,performRequest:i,render:this.renderRequest})})}renderTokenInput(){const{labelText:e,value:t,items:i,disabled:n,onChange:o,renderToken:s,onRemove:r,onClear:a}=this.props,l=i.map((e=>s(e,{onRemove:()=>r(e)})));return(0,F.jsx)(R.Z,{focus:!this.isMobile()||void 0,focusAfterAnimation:!0,format:R.Z.Format.FilterValue,tokens:l,placeholder:e.tokenInputPlaceholder,onRemoveLastToken:this.handleMenuInputRemoveLast,onClearButtonClick:a,value:t,onChange:o,showClearButton:!0,disabled:Boolean(n),style:this.styles.inputMenu})}getMenuProps(){const{onDismiss:e,labelText:t}=this.props,i=this.styles;if(this.isMobile()){return{menuType:T.og.Modal,title:t.title,right:(0,F.jsx)(B.DoneMenuText,{}),onClickRight:e,header:this.renderTokenInput()}}return{menuType:T.og.Popup,onClickOutside:e,header:this.renderTokenInput(),...i.menu}}isMobile(){const{device:e}=this.environment;return e.isMobile}}P.displayName="SearchTokenInputMenu";const L=P;let O=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});class U extends o.Z{constructor(){super(...arguments),this.animationFrame=void 0,this.origin=n.createRef(),this.storeTypes={componentStore:u},this.renderMobileFilterSummary=e=>{const{title:t,items:i,renderItemForSummary:o}=this.props,{disableFilters:s}=e,r=this.styles,a={...d.mK,...r.summary},l=i.length-1,c=(0,F.jsx)("ul",{style:a,children:i.map(((e,t)=>(0,F.jsx)("li",{style:r.summaryItem,children:(0,F.jsxs)(n.Fragment,{children:[o(e),t!==l&&","," "]})},e)))});return(0,F.jsx)(y.Z,{disabled:s,onClick:this.handleMenuOpenMobile,onClickClear:this.clearItems,label:t,title:c})},this.renderMenu=()=>{const{renderToken:e,renderFooter:t,allowApplyBatchSelection:i}=this.props,{componentStore:{state:n}}=this.stores;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(L,{...this.props,value:n.inputTemporaryValue,onChange:this.handleMenuInputChange,onDismiss:this.handleMenuClose,onConfirm:this.handleItemConfirm,onClear:()=>{this.handleClearTemporary(),this.clearItems()},onRemove:this.handleFilterRemove,renderToken:e}),t&&(0,F.jsxs)(x.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,F.jsx)(b.Z,{onClick:()=>{this.clearItems()},children:(0,F.jsx)(l.FormattedMessage,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),i&&(0,F.jsx)(m.Z,{onClick:()=>{this.handleMenuClose("applyButton")},children:(0,F.jsx)(l.FormattedMessage,{id:"searchTokenFilter.applyButton",defaultMessage:"Apply"})})]})]})},this.handleMenuOpen=e=>{this.scheduleMeasurement(void 0,(t=>({...t,isMenuOpen:!0,indexToReplace:e})))},this.handleMenuOpenMobile=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,isMenuOpen:!0})},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{componentStore:i}=this.stores;this.clearInput(),i.setState({...i.state,isMenuOpen:!1,indexToReplace:void 0}),t&&t(e)},this.handleClearTemporary=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:""})},this.handleItemConfirm=e=>{const{items:t}=this.props,{componentStore:i}=this.stores,{indexToReplace:n}=i.state;"number"==typeof n&&n<t.length?this.replaceItem(n,e):t.includes(e)&&U.Mode.Pill?this.removeItem(e):this.addItem(e),this.props.keepInputOnItemConfirm||this.clearInput()},this.handleFilterRemove=e=>{this.removeItem(e)},this.handleMenuInputChange=e=>{const{componentStore:t}=this.stores,{target:i}=e;t.setState({...t.state,inputTemporaryValue:String(i.value)})},this.scheduleMeasurement=(e,t)=>{this.animationFrame=requestAnimationFrame(this.measureOriginRect(t))},this.measureOriginRect=e=>t=>{const{componentStore:i}=this.stores;if(!this.origin)return;if(!this.origin.current)return;const n=e?e(i.state):i.state;i.setState({...n,popupOriginRect:this.origin.current.getBoundingClientRect()})},this.isMenuOpen=()=>{const{componentStore:{state:e}}=this.stores;return e.isMenuOpen},this.removeItem=e=>{const{items:t,onChange:i}=this.props;i(t.filter((t=>t!==e)))},this.clearItems=()=>{const{onChange:e}=this.props;e([])},this.replaceItem=(e,t)=>{const{items:i,onChange:n}=this.props;n(i.slice(0,e).concat(t,i.slice(e+1)))},this.clearInput=()=>{const{componentStore:e}=this.stores;e.setState({...e.state,inputTemporaryValue:"",indexToReplace:void 0})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:d.yv(this.environment,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===this.props.mode?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}didMount(){window.addEventListener("resize",this.scheduleMeasurement)}willUnmount(){window.removeEventListener("resize",this.scheduleMeasurement),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}didUpdate(e){(e.items.length!==this.props.items.length||e.mode!==this.props.mode)&&this.scheduleMeasurement()}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,disabled:i}=this.props,{componentStore:{state:n}}=this.stores,o=i||n.isMenuOpen;let s;const r=(()=>e===U.Mode.Section?(s=t,this.renderSectionOrigin()):e===U.Mode.Button?this.renderButtonOrigin():e===U.Mode.Pill?this.renderPillOrigin():void(0,a.t1)(e))();return(0,F.jsxs)(M.Z,{title:s,marginAfter:e===U.Mode.Section,style:this.styles.sectionMenuItem,children:[e!==U.Mode.Pill&&this.renderFilters({disableFilters:o,showLabel:!1}),r,(0,F.jsx)(f.ZP,{popupType:f.ZP.PopupType.Popup,placementToOrigin:f.ZP.Placement.Bottom,alignmentToOrigin:f.ZP.Alignment.Start,open:this.isMenuOpen(),originRect:n.popupOriginRect,render:()=>this.renderMenu(),onDismiss:this.handleMenuClose,keepFocus:!0,preventScaleTransition:!0})]})}renderButtonOrigin(){const{icon:e,title:t,disabled:i,focused:n}=this.props,o=this.styles,s=this.getThemeColors(),r={...o.menuItem,...s.buttonMenuItem};return(0,F.jsx)("div",{ref:this.origin,style:o.menuItemWrapper,children:(0,F.jsx)(g.Z,{disabled:i||this.isMenuOpen(),icon:e(o.icon),title:t,focused:n,onClick:e=>this.handleMenuOpen(),style:r})})}renderPillOrigin(){const{icon:e,title:t,disabled:i,iconStyles:n}=this.props,o=this.styles,s=this.props.mode===O.Pill&&this.props.hasItemsSelected;return(0,F.jsx)("div",{ref:this.origin,style:o.menuItemWrapper,children:(0,F.jsx)(h.Z,{on:s,icon:e({...o.icon,...n}),title:(0,F.jsx)("span",{children:t}),onClick:e=>this.handleMenuOpen(),wrapStyle:{opacity:i?.4:1}})})}renderSectionOrigin(){const{addItemLabel:e,disabled:t}=this.props,i=this.styles,o=this.getThemeColors();return(0,F.jsxs)(n.Fragment,{children:[(0,F.jsx)("div",{ref:this.origin,style:i.menuItemWrapper}),(0,F.jsx)(g.Z,{disabled:t||this.isMenuOpen(),icon:(0,s.R)(i.iconSmall),title:e,focused:!1,onClick:e=>this.handleMenuOpen(),style:{...i.appendListItemButton,...o.appendListItemButton}})]})}renderMobile(e){const{disabled:t}=this.props,i=t||this.isMenuOpen(),n=e===U.Mode.Section?this.renderMobileFilterSummary({disableFilters:i}):this.renderMobileButtonOrigin({disableFilters:i});return(0,F.jsx)(f.ZP,{popupType:f.ZP.PopupType.SlideUp,open:this.isMenuOpen(),origin:n,render:this.renderMenu,onDismiss:this.handleMenuClose,keepFocus:!0})}renderMobileButtonOrigin(e){const{icon:t,title:i}=this.props,n=this.styles;return(0,F.jsx)(g.Z,{disabled:e.disableFilters,focused:!1,icon:t({...n.icon}),title:i,onClick:e=>this.handleMenuOpenMobile()})}renderFilters(e){const{items:t,renderFilter:i}=this.props,{device:n}=this.environment,o=t.map(((t,o)=>(0,F.jsx)("li",{children:i(t,{disabled:e.disableFilters,onRemove:()=>this.handleFilterRemove(t),onClick:()=>n.isMobile?this.handleMenuOpenMobile():this.handleMenuOpen(o)})},`${t}_${o}`)));return(0,F.jsx)("ul",{style:d.mK,children:o})}addItem(e){const{items:t,onChange:i}=this.props,n=t.concat(e);i(r.jj(n))}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},appendListItemButton:{color:this.theme.lightTextColor}}}}U.displayName="SearchTokenFilter",U.Mode=O;const A=U},75689:(e,t,i)=>{i.d(t,{Z:()=>c});i(67294);var n=i(83355),o=i(82990),s=i(52275),r=i(24006),a=i(255),l=i(85893);class d extends n.Z{constructor(){super(...arguments),this.styles={menuItem:{background:void 0,minHeight:void 0,fontSize:this.environment.device.isMobile?o.Z.fontSize.UISmall.mobile:o.Z.fontSize.UIRegular.desktop,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}renderComponent(){const{disabled:e,label:t,title:i,onClick:n,isToggle:o,...r}=this.props,a=this.getThemeColors(),d=this.styles,c=(0,l.jsx)("span",{style:a.menuItemLabel,children:t});return(0,l.jsx)(s.Z,{focused:!1,...r,inline:o,disabled:e,icon:c,title:i,right:this.renderRight(),onClick:n,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:d.menuItem,desktopIconStyle:d.menuItemLabel})}renderRight(){const{disabled:e}=this.props,t=this.styles.rightWrapper;return this.props.isToggle?(0,l.jsx)("div",{style:t,children:(0,l.jsx)(r.Z,{on:this.props.isToggleActive,onClick:this.props.onClick})}):(0,l.jsx)(a.Z,{disabled:e,onClick:this.props.onClickClear})}getThemeColors(){return{menuItemLabel:{color:this.theme.lightTextColor}}}}d.displayName="SearchFilterSummaryMenuItem";const c=d},91642:(e,t,i)=>{i.d(t,{Z:()=>s});i(67294);var n=i(72495),o=i(85893);const s=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:i,marginAfter:s,desktopStyle:r,desktopTitleStyle:a,...l}=e,d=(s||r)&&{...s&&t.marginAfter,...r},c=a?{...t.desktopTitleStyle,...a}:t.desktopTitleStyle;return(0,o.jsx)(n.Z,{isTitleUppercase:!0,disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:c,shouldShowBottomDivider:!1,title:i,...l})}},23570:(e,t,i)=>{function n(e){return e?32:18}i.d(t,{f:()=>n})},32856:(e,t,i)=>{i.d(t,{D:()=>s});var n=i(86628),o=i(77080);function s(e){window.__c={n:"ExperimentSwitch"};const{experimentId:t,groups:i,disableExposureLogging:s}=e;return i[function(e){const{experimentId:t,disableExposureLogging:i,defaultGroup:s}=e;return(0,n.VK)((()=>o.default.getEligibleGroup({experimentId:t,defaultGroup:s??"control",disableExposureLogging:i})),[t,i,s])}({experimentId:t,disableExposureLogging:s})]}},83176:(e,t,i)=>{i.d(t,{z:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("analyticsSearch",{viewBox:"0 0 51 52",svg:(0,o.jsx)("path",{d:"M.414 21.297c0 2.86.533 5.543 1.6 8.049a21.156 21.156 0 004.468 6.576 20.797 20.797 0 006.577 4.443c2.505 1.067 5.18 1.6 8.023 1.6 2.116 0 4.13-.305 6.043-.914a21.55 21.55 0 005.332-2.565l11.654 11.655a3.44 3.44 0 001.245.812c.473.186.964.28 1.472.28.728 0 1.371-.17 1.93-.508a3.48 3.48 0 001.32-1.346 3.887 3.887 0 00.482-1.93 3.8 3.8 0 00-.279-1.447 3.126 3.126 0 00-.787-1.193l-11.578-11.63a20.414 20.414 0 002.818-5.51c.694-2.013 1.041-4.138 1.041-6.372 0-2.844-.541-5.51-1.625-7.998a20.718 20.718 0 00-4.443-6.602 20.515 20.515 0 00-6.602-4.468c-2.488-1.067-5.162-1.6-8.023-1.6-2.844 0-5.518.533-8.023 1.6a20.592 20.592 0 00-6.577 4.468A21.072 21.072 0 002.014 13.3c-1.067 2.488-1.6 5.154-1.6 7.998zm5.408 0c0-2.1.39-4.071 1.168-5.916a15.517 15.517 0 013.301-4.875 15.168 15.168 0 014.875-3.276c1.845-.795 3.817-1.193 5.916-1.193 2.116 0 4.096.398 5.941 1.193a14.877 14.877 0 014.85 3.276 15.515 15.515 0 013.3 4.875c.796 1.845 1.194 3.817 1.194 5.916 0 2.116-.398 4.096-1.193 5.941a15.517 15.517 0 01-3.301 4.875 15.426 15.426 0 01-4.85 3.276c-1.845.795-3.825 1.193-5.941 1.193-2.099 0-4.07-.398-5.916-1.193a15.737 15.737 0 01-4.875-3.276 15.52 15.52 0 01-3.3-4.875c-.78-1.845-1.169-3.825-1.169-5.941zm15.31 10.36c.458 0 .746-.263.864-.788.237-1.32.474-2.437.711-3.351.254-.931.559-1.693.914-2.286a4.554 4.554 0 011.397-1.498c.575-.389 1.311-.694 2.209-.914.914-.237 2.056-.448 3.427-.634.542-.085.813-.381.813-.89 0-.507-.271-.812-.813-.913-1.354-.17-2.496-.373-3.427-.61-.915-.253-1.668-.567-2.26-.939a4.814 4.814 0 01-1.422-1.498c-.373-.61-.677-1.363-.914-2.26a42.337 42.337 0 01-.635-3.326c-.084-.542-.372-.813-.863-.813s-.796.263-.914.788a53.724 53.724 0 01-.737 3.377c-.22.914-.507 1.675-.863 2.285a4.64 4.64 0 01-1.396 1.472c-.576.373-1.32.677-2.235.914-.914.22-2.048.424-3.402.61-.559.101-.838.406-.838.914 0 .49.28.787.838.889 1.693.186 3.055.44 4.088.761 1.032.305 1.828.762 2.387 1.371.575.61 1.015 1.44 1.32 2.489.305 1.05.584 2.395.838 4.037a1 1 0 00.279.584c.17.152.38.228.635.228z"})})},82855:(e,t,i)=>{i.d(t,{E:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},6637:(e,t,i)=>{i.d(t,{I:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("filterCircled",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.41797 6.75879H11.5889C11.9307 6.75879 12.1699 6.54688 12.1699 6.22559C12.1699 5.9043 11.9307 5.68555 11.5889 5.68555H4.41797C4.07617 5.68555 3.84375 5.9043 3.84375 6.22559C3.84375 6.54688 4.07617 6.75879 4.41797 6.75879ZM5.36816 9.02148H10.6455C10.9805 9.02148 11.2197 8.80273 11.2197 8.48145C11.2197 8.16016 10.9805 7.94141 10.6455 7.94141H5.36816C5.02637 7.94141 4.78711 8.16016 4.78711 8.48145C4.78711 8.80273 5.02637 9.02148 5.36816 9.02148ZM6.35254 11.2773H9.6543C9.99609 11.2773 10.2354 11.0654 10.2354 10.7441C10.2354 10.4229 9.99609 10.2041 9.6543 10.2041H6.35254C6.01074 10.2041 5.77148 10.4229 5.77148 10.7441C5.77148 11.0654 6.01074 11.2773 6.35254 11.2773Z"})})},12392:(e,t,i)=>{i.d(t,{S:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("historyBack",{viewBox:"0 0 14 14",svg:(0,o.jsx)("polygon",{points:"2.85893 7.74676 8.05608 12.9439 7 14 0.528042 7.52804 0 7 0.528042 6.47196 7 0 8.05608 1.05608 2.85893 6.25324 14 6.25324 14 7.74676"})})},8843:(e,t,i)=>{i.d(t,{h:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("mailRound",{viewBox:"0 0 17 12",svg:(0,o.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})},79198:(e,t,i)=>{i.d(t,{n:()=>s});i(67294);var n=i(45238),o=i(85893);const s=(0,n.I)("refresh",{viewBox:"0 0 24 20",svg:(0,o.jsx)("path",{d:"M0.19663 9.99023C-0.184229 10.5273-0.00844799 11.0059 0.694677 11.0059L2.04233 11.0059C2.56968 15.9766 6.85679 19.9219 11.9447 19.9219C14.9232 19.9219 17.6185 18.5645 19.4544 16.4551C19.8158 16.0352 19.7669 15.5078 19.3861 15.2344C19.0052 14.9609 18.5365 15.0586 18.224 15.4199C16.7103 17.168 14.4642 18.2617 11.9447 18.2617C7.68686 18.2617 4.22007 15.1074 3.72202 11.0059L5.1771 11.0059C5.87046 11.0059 6.04624 10.5273 5.67515 10L3.48765 6.88477C3.17515 6.43555 2.7064 6.42578 2.38413 6.88477ZM4.44468 3.4668C4.07358 3.88672 4.12241 4.4043 4.51304 4.67773C4.8939 4.95117 5.35288 4.86328 5.67515 4.50195C7.19858 2.76367 9.44468 1.66016 11.9447 1.66016C16.1927 1.66016 19.6595 4.81445 20.1673 8.92578L18.7123 8.92578C18.0189 8.92578 17.8431 9.39453 18.2142 9.93164L20.4017 13.0469C20.7142 13.4961 21.183 13.5059 21.5052 13.0469L23.683 9.94141C24.0736 9.39453 23.888 8.92578 23.1849 8.92578L21.847 8.92578C21.3099 3.95508 17.0326 0 11.9447 0C8.96616 0 6.28061 1.34766 4.44468 3.4668Z"})})}}]);