"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[801],{76463:(e,t,i)=>{i.d(t,{P0:()=>I,RN:()=>D,VG:()=>F,Yw:()=>k,jX:()=>P,k2:()=>T,lz:()=>j,v2:()=>Z});var r=i(5366),n=i(26825),a=i(27006),o=i(45953),s=i(21202),l=i(77420),d=i(15047),u=i(19889),c=i(97880),p=i(47307),g=i(33929),m=i(67669),h=i(35661),f=i(54642),v=i(92625),y=i(76464),b=i(9953),x=i(64964),_=i(28014),S=i(39699),w=i(61202);const C=(0,r.defineMessages)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function M(e,t){const{environment:i,spaceStore:r,spaceRole:n}=t,a=function(e){const{name:t,spaceStore:i,userId:r,icon:n,type:a}=e,o=Date.now(),s={name:t,created_at:o,created_by_table:u.KJ,created_by_id:r,alive:!0,icon:n,space_id:i.id,last_edited_at:o,last_edited_by_id:r,last_edited_by_table:u.KJ};switch(a){case"guest":return{...s,type:"guest",capabilities:e.capabilities,parent_table:d.bx,parent_id:i.id,integration_id:void 0};case"scim":return{...s,type:"scim",parent_table:u.KJ,parent_id:r};default:(0,c.t1)(a)}}(t),o=b.ae({environment:i,table:l.cZ,value:a,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,transaction:e});return y.ep({environment:i,store:r,permissionItems:[{type:"bot_permission",role:n,bot_id:o.id}],transaction:e}),{botStore:o}}function j(e){const{environment:t}=e,{serverCommitResult:i,performResult:{botStore:r}}=S.createAndCommit({userAction:"botActions.createSpaceBot",environment:t,perform:t=>M(t,e)});return{botStore:r,transactionPromise:i}}async function I(e){const{environment:t,botId:i,onSuccess:r}=e,n=await f.deleteBot(t,{botId:i});"failed"===n.type?p.showError(n):"success"===n.type&&r&&(await w.pJ({environment:t}),r())}async function k(e){const{environment:t,table:i,id:r,type:n}=e,a=await f.getBots(t,{table:i,id:r,type:n});if("failed"===a.type)throw p.showError(a),a;return{botIds:a.data.botIds,recordMap:a.data.recordMap}}async function F(e){const{environment:t,botId:i}=e,r=await f.getBotToken(t,{botId:i});if("failed"!==r.type)return r.data.token;p.showError(r)}function Z(e){const{botValue:t,store:i,environment:r}=e,{id:a,parent_id:o,parent_table:s,capabilities:l}=t,d={type:"bot_permission",bot_id:a,parent_id:o,parent_table:s,role:(0,n.uH)(l)};S.createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:r,perform:e=>{y.ep({environment:r,store:i,permissionItems:[d],transaction:e})}})}function D(e){const{botId:t,store:i,environment:r}=e,n=i.getPermissionItems().filter((0,c.AO)((e=>(0,a.FB)(e)?{true:e}:{false:e})));for(const a of n)if(a.bot_id===t){const e={...a,role:"none"};S.createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:r,perform:t=>{y.ep({environment:r,store:i,permissionItems:[e],transaction:t})}})}}function P(e){const{currentSpaceStore:t,environment:i,pages:r,botStore:n,addPermission:a}=e;if(!t)return;const o=(0,m.zT)({botStore:n,addPermission:a});r.forEach((e=>{const r=h.t1.createChildStore(t,{table:s.iU,id:e});S.createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:i,perform:e=>{y.ep({environment:i,store:r,permissionItems:[o],transaction:e})}})}))}async function T(e){const{environment:t,spaceStore:i,spaceViewStore:r,templatePageId:n,botValue:a,pages:s}=e;if(!i)return;const d=h.t1.createChildStore(i,{table:l.cZ,id:a.id});if(n)return await async function(e){const{environment:t,spaceStore:i,spaceViewStore:r,templatePageId:n,botStore:a}=e;if(!i||!r)return;try{v.j({message:C.duplicatingTemplate});const e=await f.loadBlockSubtree(t,{block:{id:n,spaceId:i.id},shallow:!1});if("failed"===e.type)return;const s=o.PF.create(e.data.subtreeRecordMap),{performResult:l}=S.createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,perform:e=>{const o=_.cc({environment:t,recordMap:s,copyPageId:n,isPrivate:!0,spaceStore:i,spaceViewStore:r,transaction:e,allowCopyExternalObjectInstances:!1}),l=r.getPrivatePageIds();l.length>0&&b.sW({store:r,data:{private_pages:[o.id,...l]},transaction:e});const d=(0,m.zT)({botStore:a,addPermission:!0});return y.ep({environment:t,store:o,permissionItems:[d],transaction:e}),o}});return l}catch(s){x.oV({label:g.default.formatMessage(C.duplicatingTemplateError)})}finally{v.x()}}({environment:t,templatePageId:n,botStore:d,spaceStore:i,spaceViewStore:r});P({environment:t,currentSpaceStore:i,botStore:d,pages:s,addPermission:!0})}},76067:(e,t,i)=>{i.d(t,{uU:()=>Z,Pk:()=>L,V2:()=>B,A1:()=>R,QO:()=>T,bO:()=>F,JJ:()=>D});i(57658);var r=i(15070),n=i(68626),a=i(20270),o=i(91155),s=i(4615),l=i(89101),d=i(77420),u=i(49953),c=i(9844),p=i(19889),g=i(97880),m=i(44876),h=i(36054),f=i(50906),v=i(76463),y=i(47307),b=i(54642),x=i(9953);var _=i(95477),S=i(12982),w=i(43348),C=i(33929),M=i(80444),j=i(35661),I=i(75018),k=i(39699);function F(e){const{environment:t,integrationStore:i}=e;k.createAndCommit({userAction:"developerIntegrationActions.setIntegrationSecretView",environment:t,perform:e=>{!function(e){const{integrationStore:t,transaction:i}=e,r=(0,j.Vh)(t,t.pointer,"info");x.sW({store:r,data:{has_viewed_secret:!0},transaction:i})}({integrationStore:i,transaction:e})}})}async function Z(e){const{environment:t,recordStore:i}=e;function r(){f.tfS(t,{table:i.table})}i.table===d.cZ?await v.P0({environment:t,botId:i.id,onSuccess:r}):i.table===c.K2?await async function(e){const{environment:t,integrationId:i,onSuccess:r}=e,n=await b.deleteIntegration(t,{integrationId:i});"failed"===n.type?y.showError(n):"success"===n.type&&r&&r()}({environment:t,integrationId:i.id,onSuccess:r}):(0,g.t1)(i)}function D(e){const{environment:t,formState:i,formData:n}=e;return"create-bot"===i.type?function(e){const{environment:t,formData:i}=e,{currentUserRootStore:r}=M.default.state;if(!r)return;const{botStore:n}=v.lz({environment:t,name:i.name,icon:i.icon,userId:r.id,spaceStore:i.space,spaceRole:"none",type:"guest",capabilities:i.capabilities||{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0}});return B(t,{id:n.id,table:d.cZ,spaceId:i.space.id}),f.PR(t,{table:d.cZ}),{id:n.id,table:d.cZ,spaceId:i.space.id}}({environment:t,formData:n}):"update-bot"===i.type?function(e){const{environment:t,botPointer:i,formData:r}=e,{currentUserRootStore:n}=M.default.state;if(!n)return;const a=(0,j.Kv)(n,i),o="developerIntegrationActions.updateBot";return k.createAndCommit({userAction:o,environment:t,perform:e=>{x.sW({store:a,data:{name:r.name,icon:r.icon,parent_id:r.space.id,last_edited_by_id:n.id,last_edited_by_table:p.KJ,last_edited_at:Date.now(),capabilities:r.capabilities},transaction:e}),e.postSubmitCallbacks=[t=>{t&&U(t,o,e.spaceId)}]}}),f.FBk(t,{table:d.cZ}),i}({environment:t,botPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table,spaceId:i.startingRecord.value.space_id},formData:n}):"create-guest-integration"===i.type?function(e){const{environment:t,botPointer:i,formData:n}=e,{currentUserRootStore:a}=M.default.state;if(!a)return;const o=(0,j.Kv)(a,i),s=o.getValue(),l=s&&(0,r.hA)(s)?s.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},d={name:n.name,tagline:n.tagline,icon:n.icon,email:n.email,website_url:n.website_url,privacy_policy_url:n.privacy_policy_url,terms_of_use_url:n.terms_of_use_url,template_page_id:n.template_page_id,redirect_uris:n.redirect_uris,capabilities:l,userRootStore:a,developer_name:n.developer_name},u="developerIntegrationActions.integrationId",{performResult:g}=k.createAndCommit({userAction:u,environment:t,perform:e=>{const i=function(e,t,i){const{name:r,tagline:n,icon:a,email:o,website_url:s,privacy_policy_url:l,terms_of_use_url:d,template_page_id:u,redirect_uris:g,capabilities:m,userRootStore:h,developer_name:f}=i,v=Date.now(),y=h.id,b={name:r,parent_table:p.KJ,parent_id:y,created_at:v,created_by_id:y,created_by_table:p.KJ,updated_at:v,updated_by_id:y,updated_by_table:p.KJ,redirect_uris:g,type:"guest",status:"unpublished",info:{tagline:n,icon:a,email:o,website_url:s,privacy_policy_url:l,terms_of_use_url:d,template_page_id:u,developer_name:f},capabilities:m,alive:!0};return x.ae({environment:e,table:c.K2,value:b,transaction:t,inMemoryRecordCache:h.inMemoryRecordCache})}(t,e,d).id;return x.sW({store:o,data:{integration_id:i,parent_table:p.KJ,parent_id:a.id},transaction:e}),e.postSubmitCallbacks=[t=>{t&&U(t,u,e.spaceId)}],i}}),m={id:g,table:c.K2};return B(t,m),f.PR(t,{table:c.K2,template_id:n.template_page_id}),m}({environment:t,botPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table,spaceId:i.startingRecord.value.space_id},formData:n}):"update-guest-integration"===i.type?P({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:n}):"create-third-party-external-integration"===i.type?function(e){const{environment:t,formData:i,integrationPointer:r}=e,{currentUserRootStore:n}=M.default.state,a=r.id;if(!n)return;const o=V(i);if(!o)return;const s=o.oauth_authorize_url;P({environment:t,integrationPointer:r,formData:i,hasLinkPreviewCapabilities:!0,redirect_uris:[s]});const l="developerIntegrationActions.createThirdPartyExternalIntegration";return k.createAndCommit({userAction:l,environment:t,perform:e=>{!function(e,t,i){const{integrationId:r,userRootStore:n,config:{oauth_authorize_url:a,oauth_token_url:o,client_id:s,client_secret:l,scopes:d,deletion_url:c}}=i,g={id:r,oauth_authorize_url:a,oauth_token_url:o,client_id:s,client_secret:l,scopes:d,parent_id:n.id,parent_table:p.KJ,deletion_url:c};x.ae({environment:e,table:u.r9,value:g,transaction:t,inMemoryRecordCache:n.inMemoryRecordCache})}(t,e,{integrationId:a,userRootStore:n,config:o}),e.postSubmitCallbacks=[t=>{t&&U(t,l,e.spaceId)}]}}),B(t,r),f.PR(t,{table:c.K2}),r}({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:n}):"update-third-party-external-integration"===i.type?function(e){const{environment:t,integrationPointer:i,formData:r}=e,{currentUserRootStore:n}=M.default.state;if(!n)return;const a=V(r);if(!a)return;const o=(0,j.Kv)(n,{table:u.r9,id:i.id}),s={oauth_authorize_url:a.oauth_authorize_url,oauth_token_url:a.oauth_token_url,client_id:a.client_id,client_secret:a.client_secret,scopes:a.scopes||null,deletion_url:a.deletion_url||null},l=a.oauth_authorize_url;P({environment:t,integrationPointer:i,formData:r,hasLinkPreviewCapabilities:!0,redirect_uris:[l]});const d="developerIntegrationActions.updateThirdPartyExternalIntegration";return k.createAndCommit({userAction:d,environment:t,perform:e=>{x.sW({store:o,data:s,transaction:e}),e.postSubmitCallbacks=[t=>{t&&U(t,d,e.spaceId)}]}}),i}({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:n}):"update-first-party-external-integration"===i.type?P({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:n,hasLinkPreviewCapabilities:!0}):(0,g.t1)(i)}function P(e){const{environment:t,integrationPointer:i,formData:r,hasLinkPreviewCapabilities:n,redirect_uris:o}=e,{currentUserRootStore:s}=M.default.state;if(!s)return;const l=(0,j.Kv)(s,i),d=l.getValue(),u=i.id,p=null==d?void 0:d.info.template_page_id,h=n?{...r.capabilities,link_preview:!0}:r.capabilities,v=n?"external":"guest",y={name:r.name,redirect_uris:o??r.redirect_uris,capabilities:h,type:v},b=(0,j.Vh)(l,l.pointer,"info"),_=function(e){const{hasLinkPreviewCapabilities:t,integrationId:i,formData:r,currentIntegrationInfo:n}=e;if(t)return function(e){var t;const{integrationId:i,formData:r,currentIntegrationInfo:n}=e,o=(null==n||null===(t=n.original_url_patterns)||void 0===t?void 0:t.filter((e=>{var t;return!0===(null===(t=e.additional_types)||void 0===t?void 0:t.collection)})))??[],s=r.url_matching_and_placeholder.map((e=>{const t=[];for(const i of e.attributes){const e=(0,m.GY)(i);if(!(0,a.nj)(e))return;t.push(e)}return{name:(0,w.X)({patternName:e.name,integrationId:i}),regex:e.regex,attributes:t,sample_urls:e.sampleUrls}})).filter(g.$K),l=r.domain.domainVerifications.filter((e=>"unverified"===e.type)).map((e=>e.domain));return{template_page_id:r.template_page_id,tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,developer_name:r.developer_name,unfurl_url:r.unfurl_url,development_url_domains:l,original_url_patterns:[...s,...o],dark_icon:(null==n?void 0:n.dark_icon)??r.icon,accent_color:(null==n?void 0:n.accent_color)??{r:36,g:41,b:47},accent_icon:(null==n?void 0:n.accent_icon)??r.icon}}({integrationId:i,formData:r,currentIntegrationInfo:n});return{tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,template_page_id:r.template_page_id,developer_name:r.developer_name}}({hasLinkPreviewCapabilities:n,integrationId:u,formData:r,currentIntegrationInfo:b.getValue()}),S="developerIntegrationActions.updateIntegration";k.createAndCommit({userAction:S,environment:t,perform:e=>{x.sW({store:l,data:y,transaction:e}),x.sW({store:b,data:_,transaction:e}),e.postSubmitCallbacks=[t=>{t&&U(t,S,e.spaceId)}]}});const C=r.template_page_id??void 0,I=p!==C;return f.FBk(t,{table:c.K2,...I&&{template_id_before:p},...I&&{template_id_after:C}}),i}function T(e){const{environment:t,integrationId:i,allVerifiedDomains:r,domainToRemove:n}=e,{currentUserRootStore:a}=M.default.state;if(!a)return;const o=(0,j.Kv)(a,{table:c.K2,id:i}),s=(0,j.Vh)(o,o.pointer,"info"),l="developerIntegrationActions.removeVerifiedDomain";k.createAndCommit({userAction:l,environment:t,perform:e=>{x.sW({store:s,data:{original_url_domains:r.filter((e=>e!==n))},transaction:e}),e.postSubmitCallbacks=[t=>{t&&U(t,l,e.spaceId)}]}}),f.FBk(t,{table:c.K2})}function R(e){I.navigate({environment:e,url:l._j.myIntegrations})}function B(e,t){const i={[d.cZ]:"internal",[c.K2]:"public"}[t.table],r=(0,s.cj)(t.id);I.navigate({environment:e,url:`${l._j.myIntegrations}/${i}/${r}`})}function L(e){const t=(0,s.cj)(e.id);return`${_.default.domainBaseUrl}${l._j.myIntegrations}/public/${t}/lab`}function V(e){const t={oauth_authorize_url:e.external_oauth_authorize_url,oauth_token_url:e.external_oauth_token_url,client_id:e.external_client_id,client_secret:e.external_client_secret,scopes:e.external_oauth_scopes,deletion_url:e.external_deletion_url};return(0,h.Gu)(u.wG,t)?void 0:t}function U(e,t,i){y.showErrorMessage(C.default.formatMessage(S.sY.transactionGenericError)),n.log({level:"error",from:"developerIntegrationActions",type:"createAndCommit",error:(0,o.Ui)(e),data:{userAction:t,spaceId:i}})}},87636:(e,t,i)=>{i.d(t,{Z:()=>f});var r=i(67294),n=i(13991),a=i(480),o=i(24405),s=i(22491),l=i(97880),d=i(82990),u=i(17311),c=i(23063),p=i(64921),g=i(26388),m=i(85893);function h(e){window.__c={n:"ActionMenuGroupButton"};const{button:t,isLast:i}=e,n=(0,o.yK)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:d.Z.fontWeight.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return r.cloneElement(t,{...(0,s.iv)(t.props.style,n.button,i&&n.buttonLast),hoveredStyle:(0,s.iv)(n.buttonHovered,i&&n.buttonLast).style,pressedStyle:n.buttonPressed})}const f=function(e){let{children:t,isVisible:i,position:f,style:v}=e;window.__c={n:"ActionMenuGroup"};const y=(0,a.O7)(),b=(0,o.yK)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,display:"flex",whiteSpace:"nowrap",borderRadius:u.Z.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:y.device.isMobile?"auto":"none",opacity:y.device.isMobile?1:0,fontFamily:d.Z.getCompositeFontFamily(n.SP).sans,position:"absolute",right:u.Z.horizontal.small,bottom:u.Z.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:u.Z.vertical.small,bottom:void 0}})),[y]),x=r.Children.toArray(t).filter(l.$K),_=x.length;return(0,m.jsx)(c.Z,{isVisible:!0,animationStyle:{opacity:i?1:0},render:()=>(0,m.jsx)("div",{...(0,s.iv)(b.container,v,i&&b.containerHover,"top"===f&&b.containerTop),children:x.map(((e,t)=>{const i=t===_-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===g.Z&&r.isValidElement(e))return r.cloneElement(e,{render:(t,r)=>{const n=e.props.render(t,r);return(0,m.jsx)(h,{isLast:i,button:n},e.key)}});if(e.type===p.Z&&r.isValidElement(e))return(0,m.jsx)(h,{isLast:i,button:e},e.key)}}))})})}},3403:(e,t,i)=>{i.d(t,{Z:()=>o});i(67294);var r=i(68785),n=i(33411),a=i(85893);function o(){return(0,a.jsx)(n.Z,{show:!0,showDelay:400,showHold:100,render:e=>(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:e&&(0,a.jsx)(r.Z,{})})})}},10912:(e,t,i)=>{i.d(t,{Z:()=>w});i(57658),i(67294);var r=i(83355),n=i(27531),a=i(41432),o=i(80951),s=i(95538),l=i(21202),d=i(97880),u=i(78316),c=i(17311),p=i(35328),g=i(35661),m=i(60981),h=i(12981),f=i(43568),v=i(81865),y=i(33411),b=i(35541),x=i(85893);function _(e){return"number"==typeof e}class S extends r.Z{constructor(){super(...arguments),this.renderContentBlock=e=>{const{store:t,renderAdditionalBlocks:i,rendererBlockStyle:r}=this.props,a=g.G.createChildStore(t,{table:l.iU,id:e}),o=a.getType(),s=i&&void 0!==o?(0,b.u)(a):(0,m.h)(a);if(s)return(0,x.jsx)(n.D,{value:this.restrictedContentStore,children:(0,x.jsx)(s,{store:a,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:(0,p.BX)(a),style:{fontSize:12,opacity:.8,pointerEvents:"none",...r},isQuickFind:!0,numberedListCounterStore:this.createComputedStore((()=>({depth:0,numberedListBlockIdsWithFormat:this.createNumberedListCounterStore(e)})))})},e)},this.coverStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,i=(0,u.NU)(e,t);return i.image?i.image:!(this.props.showLoadingShimmer&&0===i.blockIds.length&&!i.isDefined)&&i.blockIds})),this.restrictedContentStore=this.createComputedStore((()=>{const{store:e,renderAdditionalBlocks:t=!1}=this.props,i=(0,u.wK)(e,t);return i.image?void 0:i.blockIds})),this.numberedLists=this.createComputedStore((()=>{const{store:e}=this.props,t=this.coverStore.state,i=[];if(Array.isArray(t)){let r=0;for(;r<t.length;){let n=t[r],o=g.G.createChildStore(e,{table:l.iU,id:n});if(o.getType()===a.Ti.numberedList){const s=[{blockId:n,idx:1}],d=[{id:n,format:void 0,depth:s.length-1,index:s[0].idx}];for(r+=1;r<t.length&&(n=t[r],o=g.G.createChildStore(e,{table:l.iU,id:n}),o.getType()===a.Ti.numberedList);){{const e=o.getParentId();if(o.getParentId()===s[s.length-1].blockId)s.push({blockId:n,idx:1});else{let t=s[s.length-1].idx;for(;s.length>0&&s[s.length-1].blockId!==e;)t=s[s.length-1].idx,s.pop();s.push({blockId:n,idx:t+1})}d.push({id:n,format:void 0,depth:s.length-1,index:s[s.length-1].idx})}r+=1}i.push(d)}else r+=1}}return i}))}didUpdate(e){this.props.coverFormat.type!==e.coverFormat.type&&this.props.onLoadProxiedImage()}renderComponent(){const{coverFormat:e}=this.props;return"page_cover"===e.type?this.renderPageCover():"page_content"===e.type?this.renderPageContent():"property"===e.type?this.renderProperty(e.property):void 0}renderPageCover(){var e;const{store:t}=this.props,i=null===(e=t.getCover())||void 0===e?void 0:e.cover;return i?(0,x.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,x.jsx)(v.Z,{url:i,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),render:(e,t)=>{if(t)return(0,x.jsx)(h.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]}):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderPageContent(){const e=this.coverStore.state,t=this.restrictedContentStore.state;if(!1===e)return this.renderLoadingShimmer();if(e){if(!Array.isArray(e))return(0,x.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,x.jsx)(v.Z,{url:e.url,onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),isAuthenticated:!0,permissionRecord:e.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return(0,x.jsx)(h.Z,{style:{...this.getImageStyle(),...this.getPageContentImageStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]});if(e.length>0)return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{style:this.getContentWrapStyle(),children:[t?e.filter((e=>t.indexOf(e)>=0)).map(this.renderContentBlock):e.map(this.renderContentBlock),this.props.coverContentFadedOverlay&&(0,x.jsx)("div",{style:this.getContentFadedOverlayStyle()})]})});if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}else if(this.props.showEmptyGalleryCover)return this.renderEmptyGalleryCover()}renderProperty(e){const{store:t}=this.props,i=(0,o.g)(t.getPropertyValue(e)).find((e=>(0,s.SR)({url:e.url})));return i?(0,x.jsxs)("div",{style:this.getImageCoverWrapStyle(),children:[(0,x.jsx)(v.Z,{onFinishedLoadingProxyUrl:e=>this.props.onLoadProxiedImage(e),url:i.url,isAuthenticated:!0,permissionRecord:this.props.store.pointer,width:this.getCoverWidth(),render:(e,t)=>{if(t)return(0,x.jsx)(h.Z,{style:{...this.getImageStyle(),...this.getCoverStyle(),...this.getCoverAspectStyle(),objectPosition:`center ${100*(1-this.imagePosition)}%`},src:t})}}),this.renderImageBorder()]}):this.props.showEmptyGalleryCover?this.renderEmptyGalleryCover():void 0}renderEmptyGalleryCover(){return(0,x.jsx)("div",{style:{height:this.getCoverHeight(),...this.props.emptyGalleryCoverStyle}})}renderLoadingShimmer(){return(0,x.jsx)("div",{style:{height:this.getCoverHeight(),...this.props.loadingShimmerStyle},children:(0,x.jsx)(y.Z,{show:!0,showDelay:100,showHold:0,render:e=>e?(0,x.jsx)(f.Z,{paragraphs:[{lineHeight:12,lineMargin:6,sectionWidths:[100,100,50],repeat:1,sectionMargin:0}]}):void 0})})}renderImageBorder(){switch(this.props.variant){case"default":return null;case"gallery":return(0,x.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${this.theme.regularDividerColor}`}});default:(0,d.t1)(this.props.variant)}}get imagePosition(){const{coverPosition:e,store:t}=this.props;if(_(e))return e;if(t.getFormatStore().isDefined()){const{page_cover_position:e,card_cover_position:i}=t.getFormat();if(_(i))return i;if(_(e))return e}return.5}createNumberedListCounterStore(e){const t=this.numberedLists.state;for(const i of t)if(i.find((t=>t.id===e)))return i;return[]}getImageStyle(){return this.props.style||{}}getCoverHeight(){const{coverHeight:e,coverSizeFormat:t}=this.props;if(e)return e;switch(t){case"large":return c.Z.card.desktop.large.height;case"small":return c.Z.card.desktop.small.height;case"medium":default:return c.Z.card.desktop.medium.height}}getCoverWidth(){const{coverWidth:e,coverSizeFormat:t}=this.props;return e||(0,u.rD)(t)}getImageCoverWrapStyle(){return{height:this.getCoverHeight(),position:"relative",pointerEvents:"none",overflow:"hidden",...this.props.imageCoverWrapStyle}}getContentWrapVariantStyle(){const{ThemeStore:e}=this.environment,t="dark"===e.state.mode;switch(this.props.variant){case"default":return{};case"gallery":return{background:this.theme.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:t?"transparent":`inset 0 -1px 0 0 ${this.theme.regularDividerColor}`,...this.props.contentWrapStyle};default:(0,d.t1)(this.props.variant)}}getContentWrapStyle(){return{height:this.getCoverHeight(),pointerEvents:"none",overflow:"hidden",position:this.props.coverContentFadedOverlay?"relative":"static",...this.getContentWrapVariantStyle(),...this.props.contentWrapStyle}}getContentFadedOverlayStyle(){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${this.theme.accentColors.gray[30]} 100%)`,...this.props.coverContentFadedOverlayStyle}}getCoverVariantStyle(){switch(this.props.variant){case"default":return{border:`1px solid ${this.theme.stroke.regular}`,borderRadius:4};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,d.t1)(this.props.variant)}}getCoverStyle(){return{width:"100%",height:this.getCoverHeight(),...this.getCoverVariantStyle(),objectPosition:"center"}}getCoverAspectStyle(){const{coverAspectFormat:e}=this.props;return{objectFit:void 0===e?"cover":e}}getPageContentImageStyle(){return{...this.getCoverStyle(),objectPosition:"center center"}}}S.displayName="CollectionItemCover";const w=S},56305:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});i(67294);var r=i(86628),n=i(5366),a=i(43250),o=i(12982),s=i(22230),l=i(79500),d=i(59308),u=i(98167),c=i(85893);function p(e){window.__c={n:"DeveloperIntegrationCreateV2"};const{onClose:t,onSuccess:i}=e,p=(0,r.qz)(void 0,s.Z);return(0,c.jsx)(u.Z,{className:a.Zp2,title:(0,c.jsx)(n.FormattedMessage,{id:"developerIntegrationsCreateInternal.title.label",defaultMessage:"Create a new integration"}),subtitle:(0,c.jsx)(n.FormattedMessage,{id:"developerIntegrationsCreateInternal.subtitle.label",defaultMessage:"We’ll walk you through how to set up a new integration"}),onNavigateBack:t,sideContent:(0,c.jsx)(l.T,{supportedPages:(0,o.H)("create-bot")}),children:(0,c.jsx)(d.Z,{onCreateNew:i,integrationFormStore:p,currentPage:"basic"})})}},79500:(e,t,i)=>{i.d(t,{T:()=>u,e:()=>g});var r=i(67294),n=i(86628),a=i(24405),o=i(82990),s=i(12982),l=i(89728),d=i(85893);function u(e){window.__c={n:"DeveloperIntegrationFormSectionSidebar"};const{supportedPages:t,selectedPage:i,setSelectedPage:r,integrationFormStore:a}=e,o=(0,n.VK)((()=>null==a?void 0:a.getState().type),[a]),l=i||t[0],u=e=>{if(!(0,s.mP)(e))return;const t=(0,s._R)(o);l!==e&&t&&(null==a||a.updateRecordTypeOnSwitch(t)),r&&r(e)};return(0,d.jsx)("div",{style:f,children:t.map((e=>{const t=function(e,t,i){if(e!==t||!i)return!1;const r="linkPreview"===e&&"update-guest-integration"!==i;return"distribution"===e&&"update-bot"!==i||r}(l,e,o);return(0,d.jsxs)("div",{children:[(0,d.jsx)(p,{highlightedSelection:l,currentSelection:{key:s.vb[e].key,title:s.vb[e].title},handleOnClick:u}),t&&(0,d.jsx)(c,{currentPage:e,formStateType:o})]},e)}))})}function c(e){window.__c={n:"DeveloperIntegrationFormSidebarSection"};const{currentPage:t,formStateType:i}=e,n=s.vb[t].subsections,[o,l]=r.useState(),u=o||n[0].key,c=(0,a.yK)((()=>({sectionContainer:{marginLeft:20}})),[]),g=e=>{if((0,s.mP)(e))return;const t=document.getElementById((0,s.bK)(e));t&&(t.scrollIntoView(),l(e))};return(0,d.jsx)("div",{style:c.sectionContainer,children:n.map((e=>(0,d.jsx)(p,{currentSelection:e,highlightedSelection:u,handleOnClick:g,formStateType:i},e.key)))})}function p(e){window.__c={n:"DeveloperIntegrationFormSidebarButton"};const{currentSelection:{key:t,title:i},highlightedSelection:r,handleOnClick:n,formStateType:s}=e,u="create-third-party-external-integration"===s&&"unfurling"===t,c=(0,a.yK)((e=>({sidebarButton:{...h,color:e.sidebarTextColor,...r===t&&{color:e.regularTextColor,fontWeight:o.Z.fontWeight.medium}}})),[t,r]);return(0,d.jsx)(l.Z,{style:c.sidebarButton,onClick:()=>n(t),disabled:u,disabledFeedback:!0,children:i})}function g(e){window.__c={n:"DeveloperIntegrationFormSectionHeader"};const{section:t}=e,{title:i,subtitle:r,key:n}=t,l=(0,a.yK)((e=>({titleStyle:{...m},subtitleStyle:{fontWeight:o.Z.fontWeight.regular,fontSize:15,color:e.lightTextColor}})),[]);return(0,d.jsxs)("div",{style:l.titleStyle,id:(0,s.bK)(n),children:[i,r&&(0,d.jsx)("div",{style:l.subtitleStyle,children:r})]})}const m={fontSize:30,marginTop:24,marginBottom:24,fontWeight:o.Z.fontWeight.bold},h={fontSize:15,height:28,marginTop:4,width:"100%"},f={display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},59308:(e,t,i)=>{i.d(t,{Z:()=>st});var r=i(67294),n=i(480),a=i(86628),o=i(72126),s=i(21202),l=i(97880),d=i(5366),u=i(76067),c=i(47307),p=i(12982),g=i(18514),m=i(80444),h=i(35661),f=i(33929),v=i(13991),y=i(24405),b=i(8848),x=i(84619),_=i(47453),S=i(74446),w=i(45953),C=i(89101),M=i(44312),j=i(15047),I=i(82990),k=i(54642),F=i(14871),Z=i(65270),D=i(38755),P=i(52507),T=i(64921),R=i(52275),B=i(60458),L=i(74194),V=i(32163),U=i(89728),A=i(72495),E=i(26388),N=i(37240),z=i(87279),O=i(78140),W=i(53437),H=i(85893);function K(e){const{value:t}=e,[i,n]=r.useState(!1),a=()=>n(!1);return(0,H.jsx)(W.GI,{popupType:W.GI.PopupType.Popup,alignmentToOrigin:W.GI.Alignment.Start,placementToOrigin:W.GI.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:i,onDismiss:a,render:()=>(0,H.jsx)(Y,{...e,value:t,onClose:a}),origin:(0,H.jsx)(q,{...e,value:t,onClick:()=>n(!0)})})}function q(e){window.__c={n:"ClickableButton"};const{onClick:t,value:i,renderMenuItem:r}=e,n=(0,y.yK)((e=>({dropdown:{background:e.whiteButtonBackground,border:`1px solid ${e.outlineButtonBorder}`,borderRadius:3,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return(0,H.jsx)(H.Fragment,{children:r({item:i,focused:!1,onClick:t,style:n.dropdown,right:(0,N.s)(n.expandIcon)})})}function Y(e){const{keyName:t,items:i,value:r,setValue:n,renderMenuItem:a,onClose:o}=e;let s=0;const l=i.map(((e,t)=>(e.id===(null==r?void 0:r.id)&&(s=t),{key:e.id,action:()=>{n(e),o()},render:t=>a({...t,item:e})})));return(0,H.jsx)(O.Z,{menuType:z.og.Popup,children:(0,H.jsx)(V.Z,{type:V.i.Vertical,initialFocus:s,sections:[{key:`form-input-section-${t}`,items:l,render:e=>(0,H.jsx)(A.Z,{...e})}]})})}var $=i(53471),G=i(12981),J=i(68785),Q=i(63296),X=i(81865);function ee(e){window.__c={n:"DeveloperIntegrationFormIconUpload"};const{value:t,setValue:i,setError:a}=e,o=(0,n.O7)(),[s,l]=r.useState(!1);return(0,H.jsxs)(H.Fragment,{children:[t&&(0,H.jsx)(X.Z,{url:t,isAuthenticated:!1,stripGoogleIconQuery:!0,width:90,render:(e,t)=>(0,H.jsx)("div",{style:{width:90,height:90},children:(0,H.jsx)(G.Z,{src:t,style:{width:90,height:90,objectFit:"cover",borderRadius:3}})})}),(0,H.jsxs)(Q.Z,{isLarge:!0,style:{width:"fit-content",backgroundColor:"white"},onClick:()=>{$.cR({environment:o,onStart:()=>l(!0),bucket:"public",onError:e=>{a(e.message),l(!1)},onComplete:e=>{i(e[0]),l(!1)},accept:"image/*"})},children:[(0,H.jsx)(d.FormattedMessage,{id:"formInputIcon.uploadButton.label",defaultMessage:"Upload image"}),s&&(0,H.jsx)(J.Z,{style:{marginLeft:4}})]})]})}function te(e){window.__c={n:"DeveloperIntegrationFormLabel"};const{label:t,subtitle:i,caption:r,error:n,children:a,field:o,formStateType:s}=e,l=p.aP[o].requiredBy[s],d=(0,y.yK)((()=>({wrapper:{display:"flex"},label:{fontSize:15,fontWeight:I.Z.fontWeight.medium,color:b.ZP.frontTextMedium},required:{color:b.ZP.red,marginLeft:2},subtitle:{fontSize:15,color:b.ZP.frontTextLight},caption:{fontSize:15,color:b.ZP.frontTextLight},error:{marginTop:4,fontSize:15,color:b.ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return(0,H.jsxs)("div",{style:d.field,children:[(0,H.jsxs)("header",{style:d.wrapper,children:[(0,H.jsx)("div",{style:d.label,children:t}),l&&(0,H.jsx)("div",{style:d.required,children:"*"})]}),r&&(0,H.jsx)("div",{style:d.caption,children:r}),a,i&&(0,H.jsx)("div",{style:d.subtitle,children:i}),n&&(0,H.jsx)("div",{style:d.error,children:n})]})}var ie=i(37612),re=i(91996),ne=i(38381),ae=i(74181),oe=i(95477),se=i(85567),le=i(719);function de(e){const{currentValue:t,setNewValue:i,typeaheadTitle:n,style:a}=e,o=t||[],[s,l]=r.useState(""),d=()=>l("");return(0,H.jsx)(W.ZP,{popupType:W.ZP.PopupType.Popup,sameWidthAsOrigin:!0,open:s.length>0,onDismiss:d,origin:(0,H.jsx)(le.Z,{style:{background:b.ZP.white,minHeight:32,fontSize:15},placeholder:"",value:s,onChange:e=>l(e.target.value),tokens:o.map(((e,t)=>(0,H.jsx)(se.Z,{format:x.l.Medium,showRemoveButton:!0,isSingle:!1,shouldWrap:!0,value:e,style:a,onClickRemove:()=>{i(o.filter((t=>t!==e)))}},`${e}-${t}`))),onRemoveLastToken:()=>{o.length>0&&i(o.slice(0,o.length-1))}}),render:()=>{const e=s.trim(),t=(0,ae.ue)(oe.default.domainBaseUrl,e).map((e=>({key:e,render:t=>(0,H.jsx)(R.Z,{...t,title:e}),action:()=>{d(),i([...o,e])}})));return(0,H.jsx)(O.Z,{menuType:z.og.Popup,children:(0,H.jsx)(V.Z,{type:V.i.Vertical,initialFocus:0,sections:[{key:"valid-url-suggestion",items:t,render:e=>(0,H.jsx)(A.Z,{...e,title:n})}]})})}})}function ue(e){const{currentRule:t,onUpdate:i,shouldShowDelete:n,onDelete:a,onError:o}=e,{name:s,regex:l,attributes:u,sampleUrls:c}=t,[p,g]=r.useState(JSON.stringify(u,null,2));return(0,H.jsxs)("div",{style:{marginBottom:24},children:[(0,H.jsxs)("label",{children:[(0,H.jsx)("div",{style:{fontSize:15,fontWeight:I.Z.fontWeight.regular,color:b.ZP.frontTextMedium},children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.regexRule.name.label",defaultMessage:"Rule Name"})}),(0,H.jsx)(L.Z,{inputClassName:s,style:{background:b.ZP.white,height:32,fontSize:15},value:s,onChange:e=>{i({...t,name:e.target.value})},right:n&&(0,H.jsx)(ce,{onDelete:a})})]}),(0,H.jsxs)("label",{children:[(0,H.jsx)("div",{style:{fontSize:15,fontWeight:I.Z.fontWeight.regular,color:b.ZP.frontTextMedium},children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.sampleUrls.label",defaultMessage:"Sample URLs"})}),(0,H.jsx)(de,{currentValue:c,setNewValue:e=>{i({...t,sampleUrls:e})},style:{color:b.ZP.frontTextMedium},setErrorValue:e=>o(e),typeaheadTitle:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.urlsInput.typePrompt",defaultMessage:"Type or paste a url…"})})]}),(0,H.jsxs)("label",{children:[(0,H.jsx)("div",{style:{fontSize:15,fontWeight:I.Z.fontWeight.regular,color:b.ZP.frontTextMedium},children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.regexRule.pattern.label",defaultMessage:"Pattern"})}),(0,H.jsx)(L.Z,{style:{background:b.ZP.white,fontSize:15},autosize:!0,textarea:!0,value:l,onChange:e=>{i({...t,regex:e.target.value})}})]}),(0,H.jsxs)("label",{children:[(0,H.jsx)("div",{style:{fontSize:15,fontWeight:I.Z.fontWeight.regular,color:b.ZP.frontTextMedium},children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.regexRule.attributes.label",defaultMessage:"Attributes"})}),(0,H.jsx)(L.Z,{format:L.B.ExtraLarge,style:{backgroundColor:b.ZP.white},inputStyle:{fontSize:14,lineHeight:"18px",height:200,fontFamily:I.Z.baseFontFamily.mono,padding:4},textarea:!0,value:p,onChange:e=>{const r=e.target.value;g(r);const n=(0,re.Jv)(r);void 0===n?o((0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.jsonEditor.error",defaultMessage:"{value} attributes has invalid JSON.",values:{value:s}})):i({...t,attributes:n})}})]})]})}function ce(e){let{onDelete:t}=e;return(0,H.jsx)(T.Z,{style:{padding:4,borderRadius:3},onClick:()=>{ne.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.title",defaultMessage:"Are you sure you want to delete this regex pattern rule?"}),message:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.message",defaultMessage:"Changes will not be saved until you submit the form."}),confirmationMessage:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.confirm",defaultMessage:"Delete"}),onConfirm:()=>{t()}})},children:(0,ie.y)({width:15,height:15})})}var pe=i(79500),ge=i(31278),me=i(76798);const he=r.forwardRef(((e,t)=>{window.__c={n:"DeveloperIntegrationFormSpaceDropdownItem"};const{item:i,...r}=e,o=(0,n.O7)(),s=(0,a.VK)((()=>i&&(0,D.Wd)(o,i)),[o,i]),l=(0,a.VK)((()=>i&&(0,D.rn)(o,i)),[o,i]);return(0,H.jsx)(R.Z,{...r,ref:t,title:i&&(0,H.jsx)(me.Z,{store:i}),icon:i&&(0,H.jsx)(ge.Z,{disabled:!0,icon:s,title:l,isEmptyPage:!1,size:19})})}));var fe=i(77420),ve=i(50906),ye=i(33954);function be(e){const{secret:t,secretName:i,onCopy:r,actionButtons:n}=e;return(0,H.jsx)(L.Z,{type:t?"text":"password",disabled:!0,style:{fontFamily:I.Z.getCompositeFontFamily(v.SP).mono,color:b.ZP.frontTextMedium},inputStyle:t?{cursor:"text"}:void 0,value:t||" ".repeat(40),right:(0,H.jsxs)("div",{style:{display:"flex"},children:[(0,H.jsx)("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),t?(0,H.jsx)(xe,{onCopy:r,secret:t,secretName:i}):n]})})}function xe(e){window.__c={n:"CopySecretButton"};const{secretName:t,secret:i,onCopy:a}=e,o=(0,n.O7)(),[s,l]=r.useState(!1),u=r.useCallback((()=>{F.RD({environment:o,stringValue:i,copiedMessage:F.tq.copiedToClipboard}),a()}),[o,a,i]),c=s?(0,H.jsx)(d.FormattedMessage,{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",values:{secretName:t}}):(0,H.jsx)(d.FormattedMessage,{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",values:{secretName:t}});return(0,H.jsx)(E.Z,{placement:E.Z.Placement.Top,renderTooltip:()=>c,render:e=>(0,H.jsx)(T.Z,{onClick:e=>{e.preventDefault(),l(!0),setTimeout((()=>{l(!1)}),1500),u()},...e,style:{..._e.button,color:s?b.ZP.mediumTextColor:b.ZP.blue},children:s?(0,H.jsx)(d.FormattedMessage,{id:"formSecretShow.copied.label",defaultMessage:"Copied"}):(0,H.jsx)(d.FormattedMessage,{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"})})})}const _e={button:{display:"inline-flex",alignItems:"center",fontFamily:I.Z.getCompositeFontFamily(v.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:b.ZP.blue}};function Se(e){window.__c={n:"DeveloperIntegrationShowBotToken"};const{onError:t,bot:i}=e,a=(0,n.O7)(),o=(0,d.useIntl)(),s=i.id,[l,u]=r.useState(),c=r.useCallback((async()=>{const e=await k.getBotToken(a,{botId:s});"success"===e.type?(ve.Cm3(a,{table:fe.cZ}),u(e.data.token)):t((0,ye.wf)(o,e)??"Error fetching bot token.")}),[a,s,t,o]),p=r.useCallback((async()=>{const e=await k.revokeBotToken(a,{botId:s});return"success"===e.type?{success:!0}:(t((0,ye.wf)(o,e)??"Error revoking bot token."),{success:!1})}),[a,s,t,o]);return(0,H.jsx)(be,{secret:l,secretName:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{ve.IVn(a,{table:fe.cZ,from:"developer-integrations-view"})},actionButtons:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(T.Z,{onClick:()=>{!function(e){const{onConfirm:t}=e;ne.Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:t,title:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.title",defaultMessage:"Refresh token?"}),message:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.message",defaultMessage:"Refreshing will revoke the existing token and generate a new one. Make sure you’re storing the token securely."}),confirmationMessage:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.confirm",defaultMessage:"Continue"})})}({onConfirm:async()=>{(await p()).success&&await c()}})},style:we.button,children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationShotBotToken.refreshSecret.label",defaultMessage:"Refresh"})}),(0,H.jsx)(T.Z,{onClick:()=>{c()},style:we.button,children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationShotBotToken.showSecret.label",defaultMessage:"Show"})})]})})}const we={button:{display:"inline-flex",alignItems:"center",fontFamily:I.Z.getCompositeFontFamily(v.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:b.ZP.blue}};var Ce=i(9844);function Me(e){window.__c={n:"DeveloperIntegrationShowClientSecret"};const{onError:t,integration:i}=e,o=(0,n.O7)(),s=(0,d.useIntl)(),[l,c]=r.useState(),p=i.id,g=i.info.has_viewed_secret,f=(0,a.VK)((()=>m.default.state.currentUserStore),[]),v=f?(0,h.Kv)(f,{id:p,table:Ce.K2}):void 0,y=r.useCallback((async()=>{if(!v)return;const e=await k.getIntegrationSecret(o,{integrationId:p});"success"===e.type?(u.bO({environment:o,integrationStore:v}),ve.Cm3(o,{table:Ce.K2}),c(e.data.secret)):t((0,ye.wf)(s,e)??"Error fetching client secret.")}),[o,v,p,t,s]);return(0,H.jsx)(be,{secret:l,secretName:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{ve.IVn(o,{table:Ce.K2,from:"developer-integrations-view"})},actionButtons:(0,H.jsx)(je,{onClick:()=>{!function(e){const{hasSecretBeenViewed:t,onConfirm:i}=e,r=t?(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.refreshTitle",defaultMessage:"Refresh OAuth client secret?"}):(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.showTitle",defaultMessage:"Show OAuth client secret?"}),n=t?(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.alreadyViewedMessage",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}):(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.displayOnceMessage",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."});ne.Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:i,title:r,message:n,confirmationMessage:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})})}({hasSecretBeenViewed:g,onConfirm:()=>{y()}})},hasSecretBeenViewed:g})})}function je(e){const{onClick:t,hasSecretBeenViewed:i}=e;return(0,H.jsx)(T.Z,{onClick:t,style:Ie.button,children:i?(0,H.jsx)(d.FormattedMessage,{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}):(0,H.jsx)(d.FormattedMessage,{id:"formSecretShow.showSecret.label",defaultMessage:"Show"})})}const Ie={button:{display:"inline-flex",alignItems:"center",fontFamily:I.Z.getCompositeFontFamily(v.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:b.ZP.blue}};var ke=i(86249),Fe=i(42402),Ze=i(46978),De=i(5478);function Pe(e){window.__c={n:"DeveloperIntegrationFormPageView"};const{integrationFormStore:t,formData:i,setFormData:n,pageSections:o,fieldDetails:s}=e,l=(0,a.VK)((()=>t.getState()),[t]),{type:d}=l,u=o.map((e=>({...e,fields:e.fields.filter((e=>{const{supportedBy:t}=p.aP[e];return t[d]}))})));return(0,H.jsx)(H.Fragment,{children:u.map((e=>(0,H.jsxs)(r.Fragment,{children:[e.fields.length>0&&(0,H.jsx)("div",{style:{marginBottom:24},children:(0,H.jsx)(pe.e,{section:e})},e.key),e.fields.map((e=>(0,H.jsx)(Te,{formData:i,setFormData:n,formStoreState:l,formFieldDetail:s,field:e},e)))]},e.key)))})}function Te(e){window.__c={n:"DeveloperIntegrationsFormFieldView"};const{formData:t,setFormData:i,formStoreState:r,formFieldDetail:n,field:o}=e,s=(0,a.VK)((()=>m.default.state.currentUserRootStore),[]),l=(0,a.VK)((()=>s?s.getAdminSpaceStores():[]),[s]),{type:d}=r,{label:u,subtitle:c,caption:p}=n[o]??{},g=Re[o];return g?(0,H.jsx)(te,{label:u,subtitle:c,caption:p,error:t[o].error,field:o,formStateType:d,children:(0,H.jsx)(g,{autoFocus:Boolean("create-bot"===d&&"name"===o),spaces:l,currentValue:t[o].value,setErrorValue:e=>{i({field:o,error:e})},setNewValue:e=>{i({value:e,field:o})},formStoreState:r})},o):null}const Re={type:function(){return(0,H.jsx)(L.Z,{style:{color:b.ZP.frontTextLight},value:"Internal",disabled:!0})},name:Be,icon:function(e){const{currentValue:t,setNewValue:i,setErrorValue:r}=e;return(0,H.jsx)(ee,{value:t,setValue:i,setError:r})},space:function(e){window.__c={n:"SpacePicker"};const{spaces:t,currentValue:i,setNewValue:n,setErrorValue:a}=e,[o,s]=r.useState(!1);return(0,r.useEffect)((()=>{o||0!==t.length||(s(!0),a((0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an owner of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace owner to update your access.",values:{linktonotion:e=>(0,H.jsx)(Fe.Z,{href:(0,g.UY)("guides.joinOrCreateWorkspace"),children:e})}})))}),[t,a,o]),(0,H.jsx)(K,{keyName:"space",items:t,value:i,setValue:n,renderMenuItem:e=>(0,H.jsx)(he,{...e})})},token:function(e){window.__c={n:"ShowBotToken"};const t=(0,n.O7)(),{currentValue:i,setErrorValue:r}=e,o=(0,a.VK)((()=>m.default.state.currentUserStore),[]),s=(0,a.VK)((()=>{if(!o||!i)return;if(i.value.parent_table!==j.bx)return;const e=h.H2.createChildStore(o,{id:i.value.parent_id,table:i.value.parent_table});return(0,D.rn)(t,e)}),[o,i,t]);if(!i)return null;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Se,{bot:i.value,onError:r}),s&&(0,H.jsx)("div",{style:{fontSize:15,color:b.ZP.frontTextLight},children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:s,bold:e=>(0,H.jsx)("b",{children:e}),developertermslink:e=>(0,H.jsx)(Fe.Z,{href:C._j.myIntegrations,children:e})}})})]})},client_id:function(e){window.__c={n:"ShowOAuthClientId"};const{currentValue:t}=e,i=(0,n.O7)(),[a,o]=r.useState(!1),s=Ae(a);if(!t)return null;const l=a?(0,H.jsx)(d.FormattedMessage,{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}):(0,H.jsx)(d.FormattedMessage,{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return(0,H.jsx)(L.Z,{type:"text",disabled:!0,style:s.authInput,value:t.value.id,right:(0,H.jsxs)("div",{style:{display:"flex"},children:[(0,H.jsx)("div",{style:s.authInputRight}),(0,H.jsx)(E.Z,{placement:E.Z.Placement.Top,renderTooltip:()=>l,render:e=>(0,H.jsx)(T.Z,{onClick:e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500),F.RD({environment:i,stringValue:t.value.id,copiedMessage:F.tq.copiedLinkToClipboard})},...e,style:s.authButton,children:a?(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}):(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"})})})]})})},client_secret:function(e){const{currentValue:t,setErrorValue:i}=e;if(!t)return null;return(0,H.jsx)(Me,{integration:t.value,onError:i})},authorization_url:function(e){window.__c={n:"ShowAuthorizationURL"};const{currentValue:t}=e,i=(0,n.O7)(),[a,o]=r.useState(!1),s=Ae(a);if(!t)return null;const l=a?(0,H.jsx)(d.FormattedMessage,{defaultMessage:"URL copied",id:"developerIntegrationsForm.authUrlCopied.tooltip"}):(0,H.jsx)(d.FormattedMessage,{defaultMessage:"Copy authorization URL",id:"developerIntegrationsForm.authUrlCopy.tooltip"});return(0,H.jsx)(L.Z,{type:"text",disabled:!0,style:s.authInput,value:t,right:(0,H.jsxs)("div",{style:{display:"flex"},children:[(0,H.jsx)("div",{style:s.authInputRight}),(0,H.jsx)(E.Z,{placement:E.Z.Placement.Top,renderTooltip:()=>l,render:e=>(0,H.jsx)(T.Z,{onClick:e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500),F.RD({environment:i,stringValue:t,copiedMessage:F.tq.copiedLinkToClipboard})},...e,style:s.authButton,children:a?(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.copiedAuthUrl.label",defaultMessage:"Copied"}):(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.copyAuthUrl.label",defaultMessage:"Copy"})})})]})})},capabilities:function(e){const{setNewValue:t,currentValue:i}=e,n={...p.fP,...i},a={no_user_capabilities:!1===n.read_user_without_email&&!1===n.read_user_with_email,read_user_without_email:!0===n.read_user_without_email&&!1===n.read_user_with_email,read_user_with_email:!0===n.read_user_with_email};return(0,H.jsx)(V.Z,{type:V.i.Vertical,initialFocus:void 0,sections:o.oA([{key:"content_capabilities",items:["read_content","update_content","insert_content"].map((e=>Ve(e,n,t))),render:e=>(0,H.jsx)(A.Z,{...e,title:f.default.formatMessage(Le.content_capabilities_title)})},{key:"comment_capabilities",items:["read_comment","insert_comment"].map((e=>Ve(e,n,t))),render:e=>(0,H.jsx)(A.Z,{...e,title:f.default.formatMessage(Le.comment_capabilities_title)})},{key:"user_capabilities",items:["no_user_capabilities","read_user_without_email","read_user_with_email"].map((e=>((e,t,i,n)=>({key:e,action:()=>null,render:a=>{const o=t=>{t.preventDefault(),n({...i,read_user_without_email:"no_user_capabilities"!==e,read_user_with_email:"read_user_with_email"===e})};return(0,r.createElement)(R.Z,{...a,title:f.default.formatMessage(Le[`${e}_title`]),caption:f.default.formatMessage(Le[`${e}_caption`]),icon:(0,H.jsx)(Ze.Z,{isSelected:t}),key:e,onClick:o})}}))(e,a[e],n,t))),render:e=>(0,H.jsx)(A.Z,{...e,title:f.default.formatMessage(Le.user_capabilities_title)})}])})},template_url:Be,redirect_uris:function(e){return(0,H.jsx)(de,{...e,style:{color:b.ZP.frontTextMedium},typeaheadTitle:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})})},tagline:Be,privacy_policy_url:Be,terms_of_use_url:Be,email:Be,developer_name:Be,website_url:Be,unfurl_url:Be,domain:function(e){window.__c={n:"VerifyDomainInput"};const{currentValue:t,autoFocus:i,setNewValue:r,formStoreState:a,setErrorValue:o}=e,s=(0,n.O7)(),c=(0,d.useIntl)(),p=Ue();if("update-third-party-external-integration"!==a.type&&"update-first-party-external-integration"!==a.type)return null;const{developmentDomain:g,verifiedDomains:m,domainVerifications:h}=t||{developmentDomain:"",verifiedDomains:[],domainVerifications:[]},f=m.map((e=>({domain:e,status:De.YF.Success,data:{type:"verified",domain:e}}))),v=Date.now(),y=h.filter(P.AS).sort(((e,t)=>e.createdAt-t.createdAt)).map((e=>({domain:e.domain,status:v>e.expiresAt?De.YF.Failure:De.YF.Pending,data:{...e,type:v>e.expiresAt?"invalid":"unverified"}}))),b=a.startingRecord.value.id;async function _(){const e=await k.getIntegrationDomainVerifications(s,{integrationId:b});if("success"===e.type){const t=w.PF.create(e.data.recordMap),i=S.mF.fromRecordMapWithRole(t),n=e.data.verificationIds.map((e=>i({table:M.Jd,id:e}))).filter(l.$K).map(P.Hs).filter((e=>"verified"!==e.type));r({developmentDomain:g,verifiedDomains:m,domainVerifications:n})}}if("update-third-party-external-integration"===a.type)return(0,H.jsx)(ke.ZP,{domains:[...f,...y],domainVerificationStore:a.domainVerificationStore,verificationType:"integration",verificationTargetId:b,refreshDomains:_,onRemoveDomain:async function(e){if("verified"!==e.type){const t=await k.deleteDomainVerificationCode(s,{id:e.id});"failed"===t.type&&o(t.error.message),await _()}else u.QO({environment:s,integrationId:b,allVerifiedDomains:m,domainToRemove:e.domain})}});return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("div",{style:p.domainInputTitle,children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.domain.developmentDomain.label",defaultMessage:"Development domain"})}),(0,H.jsx)(L.Z,{autoFocus:i,style:p.basicTextInput,value:g,onChange:e=>r({verifiedDomains:m,domainVerifications:h,developmentDomain:e.target.value})}),(0,H.jsx)("div",{style:p.domainInputTitle,children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.domain.verifiedDomains.label",defaultMessage:"Verified domain(s)"})}),(0,H.jsx)(le.Z,{placeholder:c.formatMessage({id:"domainVerificationInput.domainInput.placeholder",defaultMessage:"No domains configured"}),value:"",onChange:()=>{},onRemoveLastToken:()=>{},readOnly:!0,tokens:f.map((e=>{let{domain:t,status:i}=e;return(0,H.jsx)(De.ZP,{status:i,showRemoveButton:!1,isSingle:!1,format:x.l.Medium,value:t},t)}))})]})},url_matching_and_placeholder:function(e){window.__c={n:"RegexPatternRulesInput"};const{currentValue:t,setNewValue:i,setErrorValue:r}=e,n=Ue();return(0,H.jsxs)(H.Fragment,{children:[null==t?void 0:t.map(((e,n)=>(0,H.jsx)(ue,{currentRule:e,shouldShowDelete:0!==n,onUpdate:e=>{i([...t.slice(0,n),e,...t.slice(n+1)])},onDelete:()=>{0!==n&&i([...t.slice(0,n),...t.slice(n+1)])},onError:r},`regex-rule-${n}`))),(0,H.jsxs)(U.Z,{style:n.plainButton,isBlue:!0,onClick:e=>{e.preventDefault(),i([...t??[],Z.VH])},children:[(0,_.R)(n.icon),(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.regexPatternRulesInput.addMore.label",defaultMessage:"Add another rule"})]})]})},external_oauth_authorize_url:Be,external_oauth_token_url:Be,external_client_id:Be,external_client_secret:function(e){window.__c={n:"HiddenTextInput"};const{autoFocus:t,currentValue:i,setNewValue:r}=e,n=Ue();return(0,H.jsx)(L.Z,{type:"password",autoFocus:t,style:n.basicTextInput,value:i,onChange:e=>r(e.target.value)})},external_oauth_scopes:Be,external_deletion_url:Be};function Be(e){window.__c={n:"BasicTextInput"};const{autoFocus:t,currentValue:i,setNewValue:r}=e,n=Ue();return(0,H.jsx)(L.Z,{autoFocus:t,style:n.basicTextInput,value:i,onChange:e=>r(e.target.value)})}const Le=(0,d.defineMessages)({read_comment_title:{id:"developerIntegrationForm.capabilities.read_comment.title",defaultMessage:"Read comments"},read_comment_caption:{id:"developerIntegrationForm.capabilities.read_comment.caption",defaultMessage:"Read comments on blocks and pages."},insert_comment_title:{id:"developerIntegrationForm.capabilities.insert_comment.title",defaultMessage:"Insert comments"},insert_comment_caption:{id:"developerIntegrationForm.capabilities.insert_comment.caption",defaultMessage:"Create comments on blocks and pages."},comment_capabilities_title:{id:"developerIntegrationForm.capabilities.comment_capabilities.title",defaultMessage:"Comment Capabilities"},content_capabilities_title:{id:"developerIntegrationForm.capabilities.content_capabilities.headerTitle",defaultMessage:"Content Capabilities"},user_capabilities_title:{id:"developerIntegrationForm.capabilities.user_capabilities.headerTitle",defaultMessage:"User Capabilities"},read_content_title:{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"},read_content_caption:{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."},update_content_title:{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"},update_content_caption:{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."},insert_content_title:{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"},insert_content_caption:{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."},no_user_capabilities_title:{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"},no_user_capabilities_caption:{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."},read_user_without_email_title:{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"},read_user_without_email_caption:{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."},read_user_with_email_title:{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"},read_user_with_email_caption:{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."}}),Ve=(e,t,i)=>({key:e,action:()=>null,render:n=>{const a=r=>{r.preventDefault(),i({...t,[e]:!t[e]})};return(0,r.createElement)(R.Z,{...n,title:f.default.formatMessage(Le[`${e}_title`]),caption:f.default.formatMessage(Le[`${e}_caption`]),icon:(0,H.jsx)(B.Z,{checked:Boolean(t[e]),size:16,onClick:a}),key:e,onClick:a})}});function Ue(){return(0,y.yK)((()=>({basicTextInput:{background:b.ZP.white,height:32,fontSize:15},domainInputTitle:{marginTop:15,fontSize:15,fontWeight:I.Z.fontWeight.regular,color:b.ZP.frontTextMedium},plainButton:{display:"flex",alignItems:"center"},icon:{width:15,height:15}})),[])}function Ae(e){return(0,y.yK)((()=>({authInput:{color:b.ZP.frontTextMedium,fontFamily:I.Z.getCompositeFontFamily(v.SP).mono},authInputRight:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1},authButton:{display:"inline-flex",alignItems:"center",borderRadius:3,padding:"0 6px",height:24,color:e?b.ZP.frontTextMedium:b.ZP.blue,fontFamily:I.Z.getCompositeFontFamily(v.SP).sans}})),[e])}const Ee={key:"basic",title:f.default.formatMessage(p.sY.basicSectionTitle),fields:["type","space","name","icon"]},Ne=[Ee],ze={type:{label:f.default.formatMessage(p.sY.integrationTypeLabel),subtitle:f.default.formatMessage(p.sY.integrationTypeSubtitle)},name:{label:f.default.formatMessage(p.sY.nameLabel),subtitle:f.default.formatMessage(p.sY.nameSubtitle)},icon:{label:f.default.formatMessage(p.sY.iconLabel),subtitle:f.default.formatMessage(p.sY.iconSubtitle)},space:{label:f.default.formatMessage(p.sY.spaceLabel),subtitle:f.default.formatMessage(p.sY.spaceSubtitle)}};const Oe=[{key:"capabilities",title:f.default.formatMessage(p.sY.capabilitiesSectionTitle),fields:["capabilities"]}],We={capabilities:{label:f.default.formatMessage(p.sY.capabilitiesLabel),caption:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,H.jsx)(Fe.Z,{href:"https://developers.notion.com/docs/authorization",children:e})}})}};var He=i(70764),Ke=i(24006);function qe(e){window.__c={n:"DeveloperIntegrationFormSwitcherButton"};const{label:t,subtitle:i,onClick:r,isDisabled:n,isActive:a}=e,o=(0,y.yK)((e=>({label:{fontSize:15,color:e.lightTextColor,display:"flex",justifyContent:"space-between"},subtitle:{fontSize:15,color:e.lightTextColor,paddingTop:15}})),[]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{style:o.label,children:[t,(0,H.jsx)(Ke.Z,{onClick:r,on:a,disabled:n})]}),(0,H.jsx)("div",{style:o.subtitle,children:i})]})}const Ye=[{key:"organization",title:f.default.formatMessage(p.sY.organizationSectionTitle),fields:["developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]},{key:"oauth",title:f.default.formatMessage(p.sY.oauthSectionTitle),fields:["redirect_uris","template_url"]}];function $e(e){const t=e?f.default.formatMessage(p.sY.redirectUrisBetaSubtitle):f.default.formatMessage(p.sY.redirectUrisSubtitle);return{redirect_uris:{label:f.default.formatMessage(p.sY.redirectUrisLabel),subtitle:t},website_url:{label:f.default.formatMessage(p.sY.websiteUrlLabel),subtitle:f.default.formatMessage(p.sY.websiteUrlSubtitle)},tagline:{label:f.default.formatMessage(p.sY.taglineLabel),subtitle:f.default.formatMessage(p.sY.taglineSubtitle)},privacy_policy_url:{label:f.default.formatMessage(p.sY.privacyPolicyUrlLabel),subtitle:f.default.formatMessage(p.sY.privacyPolicyUrlSubtitle)},terms_of_use_url:{label:f.default.formatMessage(p.sY.termOfUseLabel),subtitle:f.default.formatMessage(p.sY.termOfUseSubtitle)},template_url:{label:f.default.formatMessage(p.sY.templateLabel),subtitle:f.default.formatMessage(p.sY.templateSubtitle)},email:{label:f.default.formatMessage(p.sY.emailLabel),subtitle:f.default.formatMessage(p.sY.emailSubtitle)},developer_name:{label:f.default.formatMessage(p.sY.developerNameLabel),subtitle:f.default.formatMessage(p.sY.developerNameSubtitle)}}}var Ge=i(33907),Je=i(97122);const Qe=(0,d.defineMessages)({confirmTitle:{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",defaultMessage:"Switch to Public integration?"},confirmContinue:{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.confirm",defaultMessage:"Continue"},confirmCapability:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.title",defaultMessage:"Change requested capabilities?"},confirmCapabilityMessage:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.message",defaultMessage:"Any existing users of your integration will be required to re-authenticate."},confirmCapabilitySubmit:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.confirm",defaultMessage:"Change"},submitButtonCreate:{id:"formHandler.submitButton.create.label",defaultMessage:"Submit"},submitButtonUpdate:{id:"formHandler.submitButton.create.update",defaultMessage:"Save changes"},submitButtonContinue:{id:"formHandler.submitButton.continue.label",defaultMessage:"Continue"},submitButtonSaved:{id:"formHandler.submitButton.saved.label",defaultMessage:"Saved"}});function Xe(e){window.__c={n:"DeveloperIntegrationFormHandler"};const{onSubmit:t,children:i,submitType:r,currentPage:n,capabilitiesHaveChanged:a,formSaved:o}=e,s=(0,p.hs)(n,r),l=("update-guest-integration"===r||"update-third-party-external-integration"===r)&&a,u=it({});return(0,H.jsxs)("form",{id:"developer-integration-form",style:u.formContainerStyle,onSubmit:e=>{e.preventDefault(),"create-guest-integration"===r?ne.Z.setState({open:!0,isDestructive:!1,isWarning:!1,title:f.default.formatMessage(Qe.confirmTitle),message:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",defaultMessage:"You‘ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:e=>(0,H.jsx)(Fe.Z,{href:C._j.developerOAuthDocs,children:e})}}),confirmationMessage:f.default.formatMessage(Qe.confirmContinue),onConfirm:()=>{t()}}):l?ne.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:f.default.formatMessage(Qe.confirmCapability),message:f.default.formatMessage(Qe.confirmCapabilityMessage),confirmationMessage:f.default.formatMessage(Qe.confirmCapabilitySubmit),onConfirm:()=>{t()}}):t()},children:[i,s&&(0,H.jsx)(et,{submitType:r,formSaved:o})]})}function et(e){window.__c={n:"FormFooter"};const{submitType:t,formSaved:i}=e,r=(0,p.oX)(t),n=(0,p.w8)(t),a=!r&&i,o=it({isCreate:r});return(0,H.jsxs)("div",{style:o.buttonContainerStyle,children:[r&&(0,H.jsx)("span",{style:o.buttonLabelStyle,children:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationFormHandler.create.developerTermsOnSubmit",defaultMessage:"By {action}, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:e=>(0,H.jsx)(Fe.Z,{href:C._j.developerTerms,children:e}),action:n?"continuing":"submitting"}})}),(0,H.jsx)(tt,{submitType:t,showSavedButton:a})]})}function tt(e){window.__c={n:"FormButton"};const{submitType:t,showSavedButton:i}=e,r=(0,p.oX)(t),n=(0,p.w8)(t),a=it({showSavedButton:i}),o=n?"submitButtonContinue":"submitButtonCreate",s=i?"submitButtonSaved":"submitButtonUpdate",l=r?f.default.formatMessage(Qe[o]):f.default.formatMessage(Qe[s]);return(0,H.jsxs)(Je.h,{styles:a.buttonBackground,onClick:()=>{const e=document.querySelector("form#developer-integration-form");if(e){const t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}},children:[l,r&&(0,Ge.n)(a.rightArrow)]})}function it(e){const{showSavedButton:t,isCreate:i}=e;return(0,y.yK)((()=>({buttonContainerStyle:{display:"flex",marginTop:24,flexDirection:i?"row":"row-reverse",alignItems:"center"},buttonLabelStyle:{fontSize:15,color:b.ZP.frontTextLight,marginRight:42},formContainerStyle:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",flexDirection:"column"},buttonBackground:{...t&&{background:b.ZP.frontBlackButtonBackgroundPressed}},rightArrow:{width:14,height:14,marginLeft:4}})),[t,i])}const rt=[{key:"secrets",title:f.default.formatMessage(p.sY.secretSectionTitle),fields:["token","client_id","client_secret","authorization_url"]}],nt={token:{label:f.default.formatMessage(p.sY.tokenLabel)},client_id:{label:f.default.formatMessage(p.sY.clientIdLabel)},client_secret:{label:f.default.formatMessage(p.sY.clientSecretLabel)},authorization_url:{label:f.default.formatMessage(p.sY.authorizationUrlLabel)}};const at={key:"external_oauth",title:f.default.formatMessage(p.sY.externalOauthSectionTitle),subtitle:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.sectionSubtitle.external_oauth",defaultMessage:"See <textlink>Notion documentation</textlink> for information on <authlink>OAuth 2.0.</authlink>",values:{textlink:e=>(0,H.jsx)(Fe.Z,{href:"https://developers.notion.com/docs/build-a-link-preview-integration",external:!0,children:e}),authlink:e=>(0,H.jsx)(Fe.Z,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0,children:e})}}),fields:["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"]};const ot={icon:{label:f.default.formatMessage(p.sY.iconLabel),subtitle:f.default.formatMessage(p.sY.iconSubtitle)},unfurl_url:{label:f.default.formatMessage(p.sY.unfurlUrlLabel),caption:f.default.formatMessage(p.sY.unfurlUrlCaption)},domain:{label:f.default.formatMessage(p.sY.domainLabel),caption:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.domainVerification.caption",defaultMessage:"Development and verified domains for URLs to unfurl with this integration. Domains must be verified before publishing to users. See the <textlink>Notion documentation</textlink> for more verification process.",values:{textlink:e=>(0,H.jsx)(Fe.Z,{href:"https://developers.notion.com/docs/building-a-link-preview#domain-verification",external:!0,children:e})}})},url_matching_and_placeholder:{label:f.default.formatMessage(p.sY.urlMatchingAndPlaceholderLabel),caption:f.default.formatMessage(p.sY.urlMatchingAndPlaceholderCaption)},external_oauth_authorize_url:{label:f.default.formatMessage(p.sY.externalOauthAuthorizeUrlLabel),caption:f.default.formatMessage(p.sY.externalOauthAuthorizeUrlCaption)},external_oauth_token_url:{label:f.default.formatMessage(p.sY.externalOauthTokenUrlLabel),caption:f.default.formatMessage(p.sY.externalOauthTokenUrlCaption)},external_oauth_scopes:{label:f.default.formatMessage(p.sY.externalOauthScopesLabel),caption:f.default.formatMessage(p.sY.externalOauthScopesCaption)},external_client_id:{label:f.default.formatMessage(p.sY.externalClientIdLabel)},external_client_secret:{label:f.default.formatMessage(p.sY.externalClientSecretLabel)},external_deletion_url:{label:f.default.formatMessage(p.sY.externalDeletionUrlLabel),caption:f.default.formatMessage(p.sY.externalDeletionUrlCaption)}};function st(e){var t;window.__c={n:"DeveloperIntegrationForm"};const{integrationFormStore:i,onCreateNew:f,currentPage:v,setSelectedPage:y,spaceName:b}=e,x=(0,n.O7)(),[_,S]=r.useState(!1),w=(0,a.VK)((()=>m.default.state.currentUserRootStore),[]),C=(0,a.VK)((()=>i.getState()),[i]),{type:M}=C,[j,I]=r.useReducer(p.x6,p.yb);(0,r.useEffect)((()=>{if(!w)return;(async()=>{const e=await(0,p.hl)({formStoreState:C,userRootStore:w,environment:x});for(const t of(0,l.Yd)(e))I({field:t,value:e[t]})})()}),[C,w,x,v]),(0,r.useEffect)((()=>{const e=()=>{S(!1)};return window.addEventListener("keydown",e),window.addEventListener("click",e),()=>{window.removeEventListener("keydown",e),window.removeEventListener("click",e)}}));const k=o.Ds((async()=>{S(!0);const e=(0,p.m0)({formData:j,setFormData:I,formStateType:M,currentFieldNames:dt(v)});let t;if(j.template_url.value){const e=(0,g.K2)(j.template_url.value);w&&e&&(t=h.G.createChildStore(w,{table:s.iU,id:e}),await t.load())}const i=(0,p.Z6)({formData:j,setFormData:I,formStateType:M,templateStore:t,currentFieldNames:dt(v)});if(e.length>0||i.length>0||(0,p.tm)({formData:j,formStateType:M,currentFieldNames:dt(v)})||!w)return void S(!1);const r=u.JJ({environment:x,formState:C,formData:(0,p.Xr)(j)});if(!r)return c.showErrorMessage((0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."})),void S(!1);f&&f(r),(0,p.w8)(M)||(0,p.oX)(M)&&y&&y("secrets")}),300),F=function(e,t){if(!t||!e)return!1;return(0,l.qP)(t).some((t=>{let[i,r]=t;return Boolean(e[i])!==r}))}(null===(t=C.startingRecord)||void 0===t?void 0:t.value.capabilities,j.capabilities.value),Z=lt[v];return(0,H.jsx)(Xe,{submitType:M,onSubmit:k,capabilitiesHaveChanged:F,currentPage:v,formSaved:_,children:(0,H.jsx)(Z,{integrationFormStore:i,formData:j,setFormData:I,spaceName:b})})}const lt={distribution:function(e){window.__c={n:"DeveloperIntegrationFormDistributionView"};const{integrationFormStore:t}=e,i=(0,a.VK)((()=>t.getState().type),[t]),n=(0,a.VK)((()=>(0,He.QS)()),[]),o=["update-guest-integration","update-third-party-external-integration","update-first-party-external-integration","create-third-party-external-integration"].includes(i),s="update-bot"!==i,[l,u]=(0,r.useState)(s);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(qe,{onClick:()=>{const e=l?"internal":"public";u(!l),t.updateRecordTypeOnSwitch(e)},label:f.default.formatMessage(p.sY.distributionSwitcherLabel),subtitle:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationFormDistributionView.switcher.subtitle",defaultMessage:"A public integration is available to any Notion user. <br>After submission, only the creator will be able to manage this integration. To transfer ownership of this integration to another user, please contact Notion support.</br> <br>If you’ve built a public integration, you may be eligible to become a technology partner and get Notion’s support in promoting and distributing your integration. Learn more about the Notion Technology Partner Program <partnerProgramLink>here</partnerProgramLink>.</br>",values:{partnerProgramLink:e=>(0,H.jsx)(Fe.Z,{href:"https://www.notion.so/technology-partner-program",external:!0,children:e}),br:e=>(0,H.jsx)("div",{style:{marginTop:15},children:e})}}),isActive:l,isDisabled:o}),l&&(0,H.jsx)(Pe,{...e,pageSections:Ye,fieldDetails:$e(n)})]})},linkPreview:function(e){window.__c={n:"DeveloperIntegrationFormUnfurlingView"};const{integrationFormStore:t}=e,i=(0,a.VK)((()=>t.getState().type),[t]),n=(0,a.VK)((()=>{var e;return null===(e=t.getState().startingRecord)||void 0===e?void 0:e.value.id}),[t]),o="update-third-party-external-integration"===i||"update-first-party-external-integration"===i,s="create-third-party-external-integration"===i||"update-third-party-external-integration"===i||"update-first-party-external-integration"===i,[l,c]=(0,r.useState)(s),g="create-third-party-external-integration"===i?[at]:[at,(m=n,{key:"unfurling",title:f.default.formatMessage(p.sY.unfurlingSectionTitle),subtitle:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationForm.sectionCaption.unfurling",defaultMessage:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:e=>{if(!m)return"";const t=u.Pk({table:Ce.K2,id:m});return(0,H.jsx)(Fe.Z,{href:t,external:!0,children:e})}}}),fields:["unfurl_url","domain","url_matching_and_placeholder"]})];var m;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(qe,{onClick:()=>{const e=l?"public":"unfurling";c(!l),t.updateRecordTypeOnSwitch(e)},label:f.default.formatMessage(p.sY.unfurlingSwitcherLabel),subtitle:(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.switcher.subtitle",defaultMessage:"Unfurl external data inside Notion. Requires additional fields to configure the matching URL pattern and interface. <br> To be publicly distributed, <formLink>fill out this form</formLink> to submit your integration for security review. </br>",values:{br:e=>(0,H.jsx)("div",{style:{marginTop:15},children:e}),formLink:e=>(0,H.jsx)(Fe.Z,{href:"https://docs.google.com/forms/d/e/1FAIpQLSd94UcRziV-1yFv6udO0qZwohLyXxhYYadUqEJyyEd03RAj1w/viewform",external:!0,children:e})}}),isActive:l,isDisabled:o}),l&&(0,H.jsx)(Pe,{...e,pageSections:g,fieldDetails:ot})]})},secrets:function(e){return(0,H.jsx)(Pe,{...e,pageSections:rt,fieldDetails:nt})},capabilities:function(e){return(0,H.jsx)(Pe,{...e,pageSections:Oe,fieldDetails:We})},basic:function(e){const{integrationFormStore:t,formData:i,setFormData:r,spaceName:n}=e,a=n?(0,H.jsx)(d.FormattedMessage,{id:"developerIntegrationView.subtitle.internalIntegrationLabel",defaultMessage:"Workspace owners for <bold>{spaceName}</bold> can manage this integration",values:{spaceName:n,bold:e=>(0,H.jsx)("b",{children:e})}}):void 0;return(0,H.jsx)(Pe,{integrationFormStore:t,formData:i,setFormData:r,pageSections:[{...Ee,subtitle:a}],fieldDetails:ze})}};function dt(e){switch(e){case"basic":return(0,p.Qo)(Ne);case"secrets":return(0,p.Qo)(rt);case"capabilities":return(0,p.Qo)(Oe);case"distribution":return(0,p.Qo)(Ye);case"linkPreview":return["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url","unfurl_url","domain","url_matching_and_placeholder"];default:return[]}}},90704:(e,t,i)=>{i.r(t),i.d(t,{LinkPreviewLab:()=>ee,default:()=>X});var r=i(67294),n=i(480),a=i(86628),o=i(24405),s=i(63123),l=i(42853),d=i(91),u=i(74181),c=i(89602),p=i(70203),g=i(97880),m=i(82990),h=i(44876),f=i(36054),v=i(5366),y=i(76067),b=i(43250),x=i(91996),_=i(65270),S=i(87279),w=i(80444),C=i(61766),M=i(30874),j=i(3403),I=i(64921),k=i(52275),F=i(31945),Z=i(74194),D=i(78140),P=i(32163),T=i(63296),R=i(72495),B=i(29823),L=i(98167),V=i(14562),U=i(98567),A=i(17970),E=i(34958),N=i(14577),z=i(20475),O=i(8848),W=(i(75553),i(77744)),H=(i(73063),i(26388)),K=i(64369),q=(i(29551),i(85893));function Y(e){window.__c={n:"Artboard"};const[t,i]=(0,r.useState)(!1);return(0,q.jsx)("div",{onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},children:(0,q.jsx)($,{isInverted:e.isInverted,children:(0,q.jsx)(G,{showSize:e.showSize??t,showInsets:e.showInsets??t,insetSize:24,children:(0,q.jsx)(Q,{isInverted:e.isInverted,children:e.children})})})})}function $(e){window.__c={n:"ArtboardBorder"};const t=(0,o.Fg)(),i=J(),n=e.isInverted?i:t,a=(0,r.useMemo)((()=>({borderRadius:3,overflow:"hidden",border:`1px solid ${n.regularDividerColor}`,backgroundColor:n.contentBackground,marginTop:12,marginBottom:12,color:n.regularTextColor})),[n]);return(0,q.jsx)("div",{style:a,children:e.children})}function G(e){window.__c={n:"ArtboardInsets"};const{showInsets:t,showSize:i,insetSize:n,children:a}=e,s=(0,r.useRef)(null),l=(0,o.yK)((e=>{const i=t?"rgba(255, 105, 180, 1)":"rgba(255, 105, 180, 0)",r=`1px dashed ${i}`,a=`${n}px`,o="all 0.1s ease-in-out",s={t:{borderBottom:r,transition:o},l:{borderRight:r,transition:o},r:{borderLeft:r,transition:o},b:{borderTop:r,transition:o,position:"relative"}};return{grid:{display:"grid",gridTemplateColumns:`${a} auto ${a}`,gridTemplateRows:`${a} auto ${a}`,...s.t,...s.l,...s.r,...s.b},...s,tl:{...s.t,...s.l},tr:{...s.t,...s.r},bl:{...s.b,...s.l},br:{...s.b,...s.r},c:{position:"relative"},insetText:{color:i,fontSize:10,paddingLeft:(n-10)/2,fontFamily:m.Z.baseFontFamily.githubMono,lineHeight:a,maxHeight:n,transition:o,position:"absolute"}}}),[t,n]);return(0,q.jsxs)("div",{style:l.grid,children:[(0,q.jsx)("div",{style:l.tl}),(0,q.jsx)("div",{style:l.t}),(0,q.jsx)("div",{style:l.tr}),(0,q.jsx)("div",{style:l.l}),(0,q.jsx)("div",{style:l.c,ref:s,children:a}),(0,q.jsx)(H.Z,{forceVisibleState:i??t,renderTooltip:()=>{var e;return`${null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().height}px`},placement:H.Z.Placement.Right,render:()=>(0,q.jsx)("div",{style:l.r})}),(0,q.jsx)("div",{style:l.bl}),(0,q.jsx)(H.Z,{placement:H.Z.Placement.Bottom,forceVisibleState:i??t,renderTooltip:()=>{var e;return`${null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().width}px`},render:()=>(0,q.jsx)("div",{style:l.b,children:(0,q.jsx)(K.Z,{style:l.insetText,children:`${n}px inset`})})}),(0,q.jsx)("div",{style:l.br})]})}function J(){const{mode:e}=(0,o.Fg)();return(0,O.gh)({theme:"light"===e?"dark":"light"})}function Q(e){let{children:t,isInverted:i}=e;window.__c={n:"InverseThemeProvider"};const{mode:a}=J(),o=function(e){const t=(0,n.O7)();return(0,r.useMemo)((()=>{const i=new z.Z;return i.setState({mode:e}),{...t,ThemeStore:i,ThemeModeStore:new N.Z((()=>i.state.mode),{debugName:"UIDocComponents.ThemeModeStore"})}}),[t,e])}(a);return i?(0,q.jsx)(E.EnvironmentContextProvider,{value:o,children:t}):(0,W.jD)(t)}function X(e){window.__c={n:"DeveloperIntegrationLab"};const t=(0,n.O7)(),{integrationPointer:i}=e,r=(0,a.VK)((()=>w.default.state.currentUserStore),[]),o=(0,a.VK)((()=>{if(r)return r.getRecordValue(i)}),[r,i]),l=(0,s.V)({value:o,waitTimeInMs:5e3});return"pending"===l.status?(0,q.jsx)(j.Z,{}):"rejected"!==l.status&&(0,u.VM)(l.value)?(0,q.jsx)(L.Z,{className:b.hEP,title:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.title.label",defaultMessage:"Link Preview Lab"}),subtitle:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.subtitle.label",defaultMessage:"Plan out preview URL regex patterns and API responses."}),onNavigateBack:()=>y.V2(t,i),navigateBackMessage:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.navigateBack.label",defaultMessage:"Back to integration"}),innerContainerStyles:{width:1200,margin:"auto",marginBottom:200},children:(0,q.jsx)(ee,{starterIntegration:l.value})}):(0,q.jsx)(B.Z,{})}function ee(e){let{starterIntegration:t}=e;const[i,n]=r.useState(""),[a,o]=r.useState(_.Az),[s,l]=r.useState(_.SV),[d,u]=r.useState(_.VR()),[c,p]=r.useState(_.nZ),[g,m]=r.useState(_.e_),[f,v]=r.useState(_.P4),[y,b]=r.useState(t);return r.useEffect((()=>{const{original_url_domains:e,development_url_domains:i,original_url_patterns:r}=t.info,n=(null==e?void 0:e[0])||(null==i?void 0:i[0]);if(n&&p(n),null!=r&&r[0]){const{regex:e,attributes:t,sample_urls:i}=null==r?void 0:r[0];m(e);const n=t.map(h.Ah);v(n);const a=null==i?void 0:i[0];a&&o(a)}}),[t]),r.useEffect((()=>{b((e=>_.Hx({domain:c,regex:g,attributes:f,currentIntegration:e})))}),[c,g,f]),r.useEffect((()=>{M.Z.setState({loaded:!0,loading:!1,userId:void 0,spaceId:_.C,integrations:[y],externalAuthentications:[],bots:[],completeSlackAuthentications:[]})}),[y]),(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,q.jsx)(te,{style:{flex:1,marginRight:12},setErrorMessage:n,rootUrl:a,setRootUrl:o,relatedUrisToAttributes:d,setRelatedUrisToAttributes:u,domain:c,setDomain:p,regexPattern:g,setRegexPattern:m,regexAttributes:f,setRegexAttributes:v,rootAttributes:s,setRootAttributes:l}),(0,q.jsx)(ne,{style:{flex:1},rootUrl:a,rootAttributes:s,relatedUrisToAttributes:d,integration:y,errorMessage:i})]})}function te(e){window.__c={n:"ConfigurationInput"};const{style:t,rootUrl:i,setRootUrl:r,domain:n,setDomain:o,regexPattern:s,setRegexPattern:l,regexAttributes:d,setRegexAttributes:u,rootAttributes:p,setRootAttributes:g,relatedUrisToAttributes:h,setRelatedUrisToAttributes:f,setErrorMessage:y}=e,b=(0,a.VK)((()=>_.TG(p)),[p]);return(0,q.jsxs)("div",{style:t,children:[(0,q.jsxs)("label",{children:[(0,q.jsx)("div",{style:{fontSize:15,fontWeight:m.Z.fontWeight.medium},children:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.rootUrl.label",defaultMessage:"Pasted URL to Preview"})}),(0,q.jsx)(Z.Z,{value:i,onChange:e=>r(e.target.value)})]}),(0,q.jsxs)(ae,{title:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.regexConfiguration.label",defaultMessage:"Manage Regex Configuration"}),style:{marginTop:12},children:[(0,q.jsxs)("label",{style:{marginTop:12},children:[(0,q.jsx)("div",{style:{fontSize:15,fontWeight:m.Z.fontWeight.medium},children:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.domain.label",defaultMessage:"Domain"})}),(0,q.jsx)(Z.Z,{value:n,onChange:e=>o(e.target.value)})]}),(0,q.jsx)(se,{regexPattern:s,setRegexPattern:l,setErrorMessage:y}),(0,q.jsxs)("label",{style:{marginTop:12},children:[(0,q.jsx)("div",{style:{fontSize:15,fontWeight:m.Z.fontWeight.medium},children:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.regexAttributes.label",defaultMessage:"Regex Attributes"})}),(0,q.jsx)(oe,{value:d,onChange:u,validationType:c.$1,setErrorMessage:y})]})]}),(0,q.jsx)(ae,{title:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.rootAttributes.label",defaultMessage:"Unfurl response payload"}),style:{marginTop:12},children:(0,q.jsx)(oe,{value:p,onChange:g,validationType:c.$1,setErrorMessage:y})}),(0,q.jsx)(ae,{title:(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.label",defaultMessage:"Related unfurl response payloads"}),style:{marginTop:12},children:b.map((e=>{const t=h[e];return(0,q.jsx)(ae,{title:e,style:{marginTop:12,marginLeft:12},children:t?(0,q.jsx)(oe,{value:t,onChange:t=>{f({...h,[e]:t})},validationType:c.$1,setErrorMessage:y}):(0,q.jsx)(v.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.empty",defaultMessage:"No related attributes found."})},e)}))})]})}const ie=["preview","mention","hover"],re=["authenticate","error","update","loaded"];function ne(e){const{style:t,rootUrl:i,rootAttributes:n,relatedUrisToAttributes:a,integration:o,errorMessage:s}=e,[l,d]=r.useState("preview"),[u,c]=r.useState("loaded");return(0,q.jsxs)("div",{style:t,children:[(0,q.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,q.jsx)("div",{style:{marginRight:12},children:"Preview type:"}),(0,q.jsx)(le,{title:l,options:ie,onSelectOption:e=>d(e)}),(0,q.jsx)("div",{style:{marginLeft:12,marginRight:12},children:"Preview state:"}),(0,q.jsx)(le,{title:u,options:re,onSelectOption:e=>c(e)})]}),(0,q.jsx)("div",{style:{marginTop:12,maxWidth:600},children:(0,q.jsx)(de,{previewType:l,previewState:u,rootUrl:i,rootAttributes:n,relatedUrisToAttributes:a,integration:o,errorMessage:s})})]})}function ae(e){const[t,i]=r.useState(!1);return(0,q.jsxs)("div",{style:e.style,children:[(0,q.jsxs)(I.Z,{onClick:()=>i(!t),style:{display:"flex",alignItems:"center"},children:[(0,d.L)({width:"0.6875em",height:"0.6875em",transition:"transform 200ms ease-out",transform:`rotateZ(${t?180:90}deg)`,marginRight:4}),e.title]}),t&&e.children]})}function oe(e){const{value:t,onChange:i,validationType:n,setErrorMessage:a}=e,[o,s]=r.useState(JSON.stringify(t,null,2));return(0,q.jsx)(Z.Z,{format:Z.B.ExtraLarge,inputStyle:{fontSize:14,lineHeight:"18px",height:500},textarea:!0,value:o,onChange:e=>{const t=e.target.value;s(t);const r=x.Jv(t);if(void 0===r)a("Could not parse JSON object input.");else{const e=(0,f.Gu)(n,r);e?a(e.message):(a(""),i(r))}}})}function se(e){const{regexPattern:t,setRegexPattern:i,setErrorMessage:n}=e,[a,o]=r.useState(t);return(0,q.jsxs)("label",{style:{marginTop:12},children:[(0,q.jsx)("div",{style:{fontSize:15,fontWeight:m.Z.fontWeight.medium},children:"Regex Pattern"}),(0,q.jsx)(Z.Z,{value:a,onChange:e=>{const t=e.target.value;o(t);try{new RegExp(t);i(t),n("")}catch(r){n("Invalid Regex.")}}})]})}function le(e){window.__c={n:"PreviewDropdownButton"};const{title:t,options:i,onSelectOption:r}=e,[n,o,s]=(0,a.AF)(void 0,C.Z);return(0,q.jsx)(F.ZP,{popupType:F.Z4.Popup,buttonPopupStore:s,renderOrigin:()=>(0,q.jsxs)(T.Z,{onClick:()=>o({...n,open:!0}),children:[t,(0,l.i)({width:10,marginTop:4,marginLeft:4})]}),render:()=>(0,q.jsx)(D.Z,{menuType:S.og.Popup,children:(0,q.jsx)(P.Z,{type:P.i.Vertical,sections:[{key:t,items:i.map((e=>({key:e,action:()=>{r(e),o({...n,open:!1})},render:t=>(0,q.jsx)(k.Z,{...t,title:e})}))),render:e=>(0,q.jsx)(R.Z,{...e})}],initialFocus:void 0})})})}function de(e){window.__c={n:"RenderedPreviewWithError"};const{previewType:t,previewState:i,rootUrl:a,rootAttributes:s,relatedUrisToAttributes:l,integration:d,errorMessage:u}=e,[c,p]=r.useState(""),g=(0,n.O7)(),[m,h]=r.useState();r.useEffect((()=>{const e=_.rn({environment:g,rootUrl:a,rootAttributes:s,relatedUrisToAttributes:l,integration:d});"error"in e?p(e.error):(p(""),h(e))}),[g,a,s,l,d]),r.useEffect((()=>{p(u)}),[u]);const f=(0,o.yK)((e=>({error:{marginTop:12,marginBottom:12,padding:"12px 24px",marginRight:"auto",backgroundColor:e.accentColors.red[100]}})),[]);return(0,q.jsxs)(q.Fragment,{children:[c&&(0,q.jsxs)("div",{style:f.error,children:[c," "]}),m&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(Y,{isInverted:!1,showInsets:!1,showSize:!1,children:(0,q.jsx)(ce,{previewType:t,previewState:i,previewStores:m})}),(0,q.jsx)(Y,{isInverted:!0,showInsets:!1,showSize:!1,children:(0,q.jsx)(ce,{previewType:t,previewState:i,previewStores:m})})]})]})}function ue(e){window.__c={n:"RenderedHoverPreview"};const{previewStores:t}=e,i=(0,o.yK)((e=>({container:{borderRadius:4,boxShadow:e.lightBoxShadow}})),[]),r=(0,a.VK)((()=>{const e=t.previewBlockStore.id;if(!e)return;return{annotation:(0,p.x36)(e),store:t.inlineBlockStore,token:void 0}}),[t.previewBlockStore,t.inlineBlockStore]);return r?(0,q.jsx)("div",{style:i.container,children:(0,q.jsx)(U.D5,{isHoveredTokenEditable:!0,state:r})}):null}function ce(e){const{previewType:t,previewState:i,previewStores:r}=e;return"preview"===t?(0,q.jsx)(V.Z,{store:"authenticate"===i?r.emptyInstanceBlockStore:r.previewBlockStore,disabled:!1,forceActionForUIDoc:"loaded"===i?void 0:i}):"mention"===t?(0,q.jsx)(A.Z,{store:"authenticate"===i?r.emptyInlineBlockStore:r.inlineBlockStore,disabled:!1}):"hover"===t?(0,q.jsx)(ue,{...e}):void(0,g.t1)(t)}},29823:(e,t,i)=>{i.d(t,{Z:()=>u});i(67294);var r=i(480),n=i(25278),a=i(5366),o=i(76067),s=i(43250),l=i(98167),d=i(85893);function u(){window.__c={n:"DeveloperIntegrationNotFound"};const e=(0,r.O7)();return(0,d.jsx)(l.Z,{className:s.wG0,title:(0,d.jsx)(a.FormattedMessage,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:(0,d.jsx)(a.FormattedMessage,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn't exist."}),onNavigateBack:()=>o.A1(e),icon:(0,n.H)({width:98,height:98}),sideContent:null,children:null})}},12265:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var r=i(67294),n=i(480),a=i(86628),o=i(63123),s=i(15070),l=i(59054),d=i(39248),u=i(77420),c=i(44312),p=i(49953),g=i(9844),m=i(15047),h=i(70043),f=i(97880),v=i(5366),y=i(50906),b=i(54642),x=i(76067),_=i(43250),S=i(70764),w=i(12982),C=i(38755),M=i(80444),j=i(22230),I=i(35661),k=i(3403),F=i(91754),Z=i(31278),D=i(79500),P=i(59308),T=i(29823),R=i(98167),B=i(42402),L=i(85893);function V(e){window.__c={n:"DeveloperIntegrationView"};const{botOrIntegrationPointer:t}=e,i=(0,n.O7)(),V=(0,a.VK)((()=>M.default.state.currentUserRootStore),[]),U=(0,a.qz)(void 0,j.Z),A=(0,a.VK)((()=>U.getState().type),[U]),E=(0,a.VK)((()=>U.getState().startingRecord),[U]),N=(0,a.VK)((()=>U.getState().status),[U]),z=(0,a.VK)((()=>{const e=(0,S.QS)();return(0,w.H)(A,e)}),[A]),[O,W]=(0,r.useState)("secrets"),H="published"===N&&"secrets"!==O,K=(0,a.VK)((()=>{if(t&&V){const e=t.table,i=V.getRecordValue(t);if(i){const r=e===g.K2&&((0,s.Be)(i.capabilities)||(0,s.Uz)(i.capabilities))&&V.getRecordValue({table:p.r9,id:t.id});return{botOrIntegrationRecord:{value:i,table:t.table},maybeExternalAuthRecord:r?{table:p.r9,value:r}:void 0}}}}),[V,t]),[{value:q}]=(0,l.r5)((async()=>{if(!V||!K||K.botOrIntegrationRecord.table!==g.K2)return[];const e=K.botOrIntegrationRecord.value.id,t=await b.getIntegrationDomainVerifications(i,{integrationId:e});if("success"===t.type){return t.data.verificationIds.map((e=>V.getRecordValue({table:c.Jd,id:e}))).filter(f.$K)}if("failed"===t.type)throw t.error;return(0,f.t1)(t)}),[i,K,V]);(0,r.useEffect)((()=>{if(!K)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=K;U.initializeNewForm(e,t,q||[]),y.DUp(i,{table:e.table})}),[U,i,K,q]);const Y=(0,a.VK)((()=>{if(!V||!K)return;const{botOrIntegrationRecord:e}=K;if(e.value.parent_table!==m.bx)return;const t=I.H2.createChildStore(V,{id:e.value.parent_id,table:e.value.parent_table});return(0,C.rn)(i,t)}),[K,V,i]),$=(0,o.V)({value:E});if("rejected"===$.status||!t)return(0,L.jsx)(T.Z,{});if("pending"===$.status)return(0,L.jsx)(k.Z,{});const G=$.value,J=i.currentUser.id;if(G.table===g.K2&&G.value.parent_id!==J)return(0,L.jsx)(T.Z,{});const Q=G.value.name,X=G.table===u.cZ?G.value.icon:G.value.info.icon,ee={id:G.value.id,table:G.table},te=X?{pointer:ee,icon:X}:void 0;return(0,L.jsxs)(R.Z,{className:_.TFu,title:Q,subtitle:(0,L.jsx)(v.FormattedMessage,{id:"developerIntegrationView.subtitle.genericLabel",defaultMessage:"Review and edit integration information."}),onNavigateBack:()=>x.A1(i),icon:(0,L.jsx)(Z.Z,{disabled:!0,icon:te,title:Q,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:h.Z.frontDeepShadow},useInvertedColors:!0}),sideContent:(0,L.jsx)(D.T,{supportedPages:z,selectedPage:O,setSelectedPage:W,integrationFormStore:U}),children:[H&&(0,L.jsx)(F.Z,{styleKey:F.v.Red,isMobile:!1,style:{marginBottom:20},children:(0,L.jsx)(v.FormattedMessage,{id:"developerIntegrationView.publishedIntegrationWarning.label",defaultMessage:"Saving changes to your integration will immediately update its listing on Notion's <integrationgallerylink>Integration Gallery.</integrationgallerylink> ",values:{integrationgallerylink:e=>(0,L.jsx)(B.Z,{disableHover:!0,href:(0,d.E)(G.value.id,G.value.name||""),children:e})}})}),(0,L.jsx)(P.Z,{integrationFormStore:U,currentPage:O,setSelectedPage:W,spaceName:Y})]})}},50526:(e,t,i)=>{i.d(t,{Z:()=>w});var r=i(67294),n=i(480),a=i(86628),o=i(98519),s=i(19889),l=i(97880),d=i(7928),u=i(70782),c=i(33929),p=i(87279),g=i(80444),m=i(64921),h=i(52275),f=i(78140),v=i(32163),y=i(53437),b=i(72495),x=i(64369),_=i(45653),S=i(85893);function w(e){let{onChange:t}=e;window.__c={n:"DeveloperIntegrationsAccountSwitcher"};const i=(0,n.O7)(),[o,d]=(0,r.useState)(!1),u=()=>d(!1),c=(0,a.VK)((()=>g.default.state.currentUserStore),[]),p=(0,a.VK)((()=>c?i.currentUser.loggedInUserIds.map((e=>c.getRecordModel({table:s.KJ,id:e}))).filter(l.$K):[]),[c,i]),m=(0,a.VK)((()=>null==c?void 0:c.getValue()),[c]);return m?(0,S.jsx)(y.ZP,{popupType:y.kQ.Popup,origin:(0,S.jsx)(C,{onClick:()=>d(!0),currentUserValue:m}),render:()=>(0,S.jsx)(M,{users:p,currentUserId:m.id,onChange:t,onClose:u}),placementToOrigin:y.ZP.Placement.Bottom,alignmentToOrigin:y.ZP.Alignment.End,onDismiss:u,open:o}):null}function C(e){const{onClick:t,currentUserValue:i}=e;return(0,S.jsx)("div",{style:{marginLeft:18},children:(0,S.jsx)(m.Z,{onClick:t,style:{borderRadius:"100%"},children:(0,S.jsx)(_.Z,{userValue:i,size:32})})})}function M(e){window.__c={n:"OpenedSwitcherMenu"};const t=(0,n.O7)(),{users:i,currentUserId:r,onClose:a,onChange:o}=e;return(0,S.jsx)(f.Z,{menuType:p.og.Popup,children:(0,S.jsx)(v.Z,{type:v.i.Vertical,initialFocus:void 0,sections:[{key:"developer-integration-accounts",items:i.map((e=>({key:e.id,action:async()=>{const i=await u.x({environment:t,newCurrentUserId:e.id});null==o||o(i),a()},render:t=>(0,S.jsx)(j,{...t,user:e,isLoggedIn:e.id===r})}))),render:e=>(0,S.jsx)(b.Z,{...e})}]})})}const j=r.forwardRef(((e,t)=>{window.__c={n:"AccountMenuItem"};const{user:i,isLoggedIn:r,...n}=e,s=c.default.getIntl(),l=(0,a.VK)((()=>(0,d.Nz)(s,i)),[s,i]),u=(0,a.VK)((()=>i.email),[i]);return(0,S.jsx)(h.Z,{...n,ref:t,title:(0,S.jsx)(x.Z,{className:"notranslate",children:l}),icon:(0,S.jsx)(_.Z,{userValue:i,size:28}),caption:(0,S.jsx)(x.Z,{isSmall:!0,children:u}),right:r&&(0,o.k)({width:12,height:12})})}))},98167:(e,t,i)=>{i.d(t,{Z:()=>P});var r=i(67294),n=i(13991),a=i(41892),o=i(8848),s=i(9999),l=i(12392),d=i(89101),u=i(82990),c=i(5366),p=i(76067),g=i(43250),m=i(34859),h=i(64921),f=i(16354),v=i(89728),y=i(53336),b=i(50526),x=i(86628),_=i(70043),S=i(51454),w=i(38381),C=i(74194),M=i(50506),j=i(85893);function I(){window.__c={n:"DeveloperIntegrationsDialog"};const e=(0,x.Kw)(w.Z);return(0,j.jsx)(M.Z,{open:e.open,overlayZIndex:S.Wd,onDismiss:()=>{w.Z.reset()},preventHideChildrenWhileOpening:!0,innerStyle:{overflow:"hidden",borderRadius:3,padding:"24px 32px",width:336,fontSize:16,boxShadow:_.Z.frontDialogShadow,background:o.ZP.white},render:()=>(0,j.jsx)(k,{...e})})}function k(e){const[t,i]=r.useState(""),[n,a]=r.useState(!1);if(!e.open)return null;const{title:s,message:l,onConfirm:d}=e,p=i=>{const{deleteIntegrationIfConfirmationInputMatch:r}=i;e.isDestructive&&e.deleteMatchText!==t?a(!0):r&&(d(),w.Z.reset())};return(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,j.jsx)("div",{style:{fontSize:16,fontWeight:u.Z.fontWeight.semibold},children:s}),(0,j.jsx)("div",{style:{fontSize:14,color:o.ZP.frontTextMedium,margin:"8px 0 16px"},children:l}),e.isDestructive&&(0,j.jsxs)("div",{style:{marginBottom:12},children:[(0,j.jsx)(C.Z,{autoFocus:!0,placeholder:e.deleteMatchText,value:t,onChange:t=>{const r=t.target.value;n&&e.deleteMatchText===r&&a(!1),i(r)},onSubmit:()=>p({deleteIntegrationIfConfirmationInputMatch:!1})}),n&&(0,j.jsx)("div",{style:{marginTop:4,color:o.ZP.frontRed,fontSize:12},children:e.deleteMatchError})]}),(0,j.jsxs)("div",{style:{display:"flex"},children:[(0,j.jsx)(h.Z,{onClick:()=>{w.Z.reset()},style:{...Z.button,border:`1px solid ${o.ZP.uiLightBorder}`,marginRight:8,fontSize:15},children:(0,j.jsx)(c.FormattedMessage,{id:"developerIntegration.confirmationModal.cancelLabel",defaultMessage:"Cancel"})}),(0,j.jsx)(F,{onSubmit:()=>p({deleteIntegrationIfConfirmationInputMatch:!0}),isWarning:e.isDestructive||e.isWarning,confirmationMessage:e.confirmationMessage})]})]})}function F(e){const{onSubmit:t,confirmationMessage:i,isWarning:r}=e;return(0,j.jsx)(h.Z,{onClick:t,style:{...Z.button,background:r?o.ZP.frontPrimaryButtonBackground:o.ZP.blue,color:o.ZP.white,fontSize:15},hoveredStyle:{backgroundColor:r?o.ZP.frontPrimaryButtonBackgroundHovered:o.ZP.frontBlueButtonHoveredBackground},pressedStyle:{backgroundColor:r?o.ZP.frontPrimaryButtonBackgroundPressed:o.ZP.frontBlueButtonPressedBackground},children:i})}const Z={button:{padding:6,borderRadius:3,flex:1,textAlign:"center"}};var D=i(36360);function P(e){window.__c={n:"DeveloperIntegrationsContainer"};const{className:t,title:i,subtitle:r,onNavigateBack:n,navigateBackMessage:o,children:u,icon:x,sideContent:_,innerContainerStyles:S}=e,w=(0,c.useIntl)();return(0,j.jsx)(D.Z,{title:w.formatMessage({id:"developerIntegrationsLayout.document.title",defaultMessage:"My integrations | Notion Developers"}),children:(0,j.jsxs)(y.Z,{className:t,style:T.scroller,type:m.Z.Y,children:[(0,j.jsx)(I,{}),(0,j.jsxs)("div",{className:g.rIs,style:T.topBar,children:[(0,j.jsx)("div",{children:(0,j.jsx)(f.Z,{href:d._j.developerPortal,external:!0,children:(0,j.jsx)("img",{src:a.Z.images.integrations.notionDevsLogoGaSvg})})}),(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,j.jsx)(f.Z,{style:{display:"flex",marginLeft:-6},href:d._j.developerPortal,external:!0,children:(0,j.jsx)(v.Z,{icon:s.J,isSmall:!0,children:"View documentation"})}),(0,j.jsx)(b.Z,{onChange:e=>{p.A1(e)}})]})]}),(0,j.jsxs)("div",{style:{...T.innerContainer,...S},children:[(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80},children:[(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"},children:[(0,j.jsx)(h.Z,{style:{...T.button,...!n&&{display:"none"}},onClick:n,children:(0,j.jsxs)("div",{style:{...T.buttonContent,fontSize:20},children:[(0,l.S)(T.arrowIcon),(0,j.jsx)("div",{style:{marginLeft:12},children:o||(0,j.jsx)(c.FormattedMessage,{id:"developerIntegrationsLayout.backButton.label",defaultMessage:"My integrations"})})]})}),(0,j.jsx)("div",{style:T.header,children:i}),(0,j.jsx)("div",{style:T.subtitle,children:r})]}),(0,j.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1},children:x})]}),_?(0,j.jsxs)("div",{style:T.gridContainer,children:[(0,j.jsx)("div",{style:T.leftColumn,children:_}),(0,j.jsx)("div",{style:T.rightColumn,children:u})]}):u]}),(0,j.jsxs)("footer",{style:T.footerContainer,children:[(0,j.jsxs)("section",{style:T.footerColophon,children:[(0,j.jsx)("h1",{style:T.footerLogo,children:(0,j.jsx)("img",{src:a.Z.images.integrations.notionFooterLogoSvg})}),(0,j.jsx)("h6",{style:T.footerCopy,children:"The all-in-one workspace for your notes, tasks, wikis, and databases."}),(0,j.jsx)("h6",{style:T.footerCopy,children:`©${(new Date).getFullYear()} Notion Labs, Inc.`}),(0,j.jsx)(f.Z,{external:!0,href:d._j.termsAndPrivacy,style:T.footerLink,children:"Terms & Privacy"})]}),(0,j.jsxs)("nav",{style:{...T.footerNav,gridColumnStart:7},children:[(0,j.jsx)("h5",{style:T.footerSectionHeader,children:"Developers"}),(0,j.jsx)(f.Z,{external:!0,href:"https://developers.notion.com/docs",style:T.footerLink,children:"Guides"}),(0,j.jsx)(f.Z,{external:!0,href:"https://developers.notion.com/reference",style:T.footerLink,children:"API Reference"}),(0,j.jsx)(f.Z,{external:!0,href:d._j.myIntegrations,style:T.footerLink,children:"My integrations"}),(0,j.jsx)(f.Z,{external:!0,href:"https://developers.notion.com/page/frequently-asked-questions",style:T.footerLink,children:"FAQs"}),(0,j.jsx)(f.Z,{external:!0,href:d._j.developerTerms,style:T.footerLink,children:"Developer terms"})]}),(0,j.jsxs)("nav",{style:T.footerNav,children:[(0,j.jsx)("h5",{style:T.footerSectionHeader,children:"Notion"}),(0,j.jsx)(f.Z,{external:!0,href:d._j.product,style:T.footerLink,children:"Product"}),(0,j.jsx)(f.Z,{external:!0,href:d._j.teams,style:T.footerLink,children:"Teams"}),(0,j.jsx)(f.Z,{external:!0,href:d._j.enterprise,style:T.footerLink,children:"Enterprise"}),(0,j.jsx)(f.Z,{external:!0,href:d._j.blog,style:T.footerLink,children:"Blog"}),(0,j.jsx)(f.Z,{external:!0,href:d._j.careers,style:T.footerLink,children:"Careers"})]}),(0,j.jsxs)("nav",{style:T.footerNav,children:[(0,j.jsx)("h5",{style:T.footerSectionHeader,children:"Social"}),(0,j.jsx)(f.Z,{external:!0,href:"https://notionup.typeform.com/to/dSurQQp2Q",style:T.footerLink,children:"Developer newsletter"}),(0,j.jsx)(f.Z,{external:!0,href:"http://twitter.com/notionapi",style:T.footerLink,children:"Twitter"})]})]})]})})}const T={footerLink:{color:o.ZP.frontTextMedium,cursor:"pointer",textDecoration:"none",display:"block",marginBottom:4},footerColophon:{gridColumn:"auto/span 3"},footerNav:{gridColumn:"auto/span 2",marginBottom:16},footerLogo:{margin:"0 auto 20px",fontSize:0,display:"block"},footerSectionHeader:{fontFamily:u.Z.getCompositeFontFamily(n.SP).mono,fontWeight:u.Z.fontWeight.medium,margin:"0 auto 8px",marginBottom:"1.1em",fontSize:15},footerCopy:{fontSize:15,fontWeight:u.Z.fontWeight.regular,lineHeight:"1.5em",color:o.ZP.frontTextMedium,margin:"0 auto 8px",marginBottom:"1.1em"},footerContainer:{padding:"70px 30px",alignItems:"flex-start",justifyItems:"flex-start",flex:"1 0 auto",zIndex:999,width:"100%",maxWidth:1160,boxSizing:"border-box",margin:"0 auto",borderTop:`1px solid ${o.ZP.dividerColor}`,display:"grid",gridTemplateColumns:"repeat(12,1fr)",columnGap:16,gap:16},scroller:{height:"100vh",background:o.ZP.frontCreamBackground,padding:"0px 10px"},innerContainer:{margin:"auto",width:914},topBar:{maxWidth:1100,height:60,margin:"0 auto",display:"flex",alignItems:"center",marginTop:13,marginBottom:10,justifyContent:"space-between"},header:{fontWeight:u.Z.fontWeight.bold,fontFamily:u.Z.getCompositeFontFamily(n.SP).sans,fontSize:50,color:o.ZP.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:u.Z.fontWeight.regular,fontSize:24,color:o.ZP.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:o.ZP.frontTextMedium,borderRadius:3,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20},gridContainer:{display:"grid",gridTemplateColumns:"180px auto",paddingBottom:120,gap:60},leftColumn:{gridColumnStart:1,gridColumnEnd:2},rightColumn:{gridColumnStart:2,gridColumnEnd:3}}},67229:(e,t,i)=>{i.r(t),i.d(t,{default:()=>q});var r=i(67294),n=i(480),a=i(86628),o=i(63123),s=i(41892),l=i(8848),d=i(59054),u=i(47453),c=i(77420),p=i(9844),g=i(97880),m=i(82990),h=i(63143),f=i(5366),v=i(50906),y=i(54642),b=i(43250),x=i(71776),_=i(77907),S=i(80444),w=i(97122),C=i(89728),M=i(19889),j=i(70043),I=i(7928),k=i(76067),F=i(35661),Z=i(64921),D=i(31278),P=i(56666),T=i(87279),R=i(38381),B=i(52275),L=i(78140),V=i(32163),U=i(53437),A=i(72495),E=i(85893);function N(e){window.__c={n:"DeveloperIntegrationCardPopup"};const{integrationOrBot:t}=e,i=(0,a.VK)((()=>t.name||""),[t]),o=(0,n.O7)(),s=(0,a.VK)((()=>S.default.state.currentUserStore),[]),[d,u]=r.useState(!1),[c,p]=(0,a.AF)(R.Z);if(!s)return null;const g=(0,F.Kv)(s,{id:t.id,table:t.table});return(0,E.jsx)(U.ZP,{popupType:U.ZP.PopupType.Popup,open:d,placementToOrigin:U.ZP.Placement.Bottom,alignmentToOrigin:U.ZP.Alignment.End,onDismiss:()=>u(!1),origin:(0,E.jsx)(Z.Z,{onClick:()=>{u(!0),v.iIv(o,{table:g.table})},style:{padding:"3px 6px",borderRadius:3},children:(0,P.o)({width:18,height:18})}),render:()=>(0,E.jsx)(L.Z,{menuType:T.og.Popup,children:(0,E.jsx)(V.Z,{type:V.i.Vertical,initialFocus:0,sections:[{key:"integration-card-dropdown",items:[{key:"delete-integration",action:()=>{v.DWr(o,{table:g.table}),p({open:!0,title:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationTitle",defaultMessage:"Delete {integrationName}?",values:{integrationName:i}}),message:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationMessage",defaultMessage:"This public integration will be deactivated and removed from all workspaces it has been added to. To confirm, type in the name of this integration."}),confirmationMessage:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegration.confirmationModal.deleteLabel",defaultMessage:"Delete"}),onConfirm:async()=>{await k.uU({environment:o,recordStore:g})},isDestructive:!0,deleteMatchText:i,deleteMatchError:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationError",defaultMessage:"Input did not match integration name."})})},render:e=>(0,E.jsx)(B.Z,{...e,title:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCard.dropdown.delete",defaultMessage:"Delete this integration"}),style:{color:l.ZP.frontRed}})}],render:e=>(0,E.jsx)(A.Z,{...e})}]})})})}function z(e){window.__c={n:"DeveloperIntegrationCard"};const{integrationOrBot:t}=e,i=(0,n.O7)(),o=(0,f.useIntl)(),s=(0,a.VK)((()=>t.table===p.K2?t.getInfo().tagline||(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCard.integrationTagline.placeholder",defaultMessage:"Public integration."}):(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCard.botTagline.placeholder",defaultMessage:"Internal integration."})),[t]),l=(0,a.VK)((()=>t.table===p.K2?t.getInfo().icon:t.icon),[t]),d=(0,a.VK)((()=>({id:t.id,table:t.table})),[t]),u=(0,a.VK)((()=>S.default.state.currentUserStore),[]),c=(0,a.VK)((()=>{if(!u)return;if(t.created_by_id===u.id)return(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCard.createdByTagline.creatorIsUser",defaultMessage:"Created by you"});const e=F.U6.createChildStore(u,{table:M.KJ,id:t.created_by_id}),i=e.getModel();return e.isReady()&&i?(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCard.createdByTagline.placeholder",defaultMessage:"Created by {userFullDisplayName}",values:{userFullDisplayName:(0,I.Nz)(o,i)}}):void 0}),[t,o,u]),g=(0,r.useCallback)((()=>{k.V2(i,d)}),[i,d]),m=(0,a.VK)((()=>t.name),[t]);return(0,E.jsxs)(Z.Z,{style:H.containerCard,onClick:g,children:[(0,E.jsxs)("div",{style:H.innerDetailsContainer,children:[(0,E.jsx)(D.Z,{disabled:!0,icon:l?{pointer:d,icon:l}:void 0,title:m,isEmptyPage:!1,size:48,isLarge:!0,useInvertedColors:!0}),(0,E.jsx)("div",{style:H.name,children:m}),(0,E.jsx)("div",{style:H.creatorTagline,children:c}),(0,E.jsx)("div",{style:H.typeTagline,children:s})]}),(0,E.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,E.jsx)(C.Z,{onClick:g,style:{...H.blueButton,padding:8,marginLeft:-8,fontSize:15},children:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationsList.viewIntegration.buttonText",defaultMessage:"View integration"})}),(0,E.jsx)(N,{integrationOrBot:t})]})]})}function O(e){const{onClick:t}=e;return(0,E.jsxs)(Z.Z,{onClick:t,style:{...H.containerCard,...H.addNewCard},children:[(0,u.R)({width:24,height:24,color:l.ZP.mediumIconColor}),(0,E.jsx)("div",{style:{height:12}}),(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationCard.placeholderCard.label",defaultMessage:"Create new integration"})]})}function W(){return(0,E.jsx)(Z.Z,{style:{...H.containerCard,boxShadow:"none",background:"rgba(0,0,0,0.02)",border:"none"},children:(0,E.jsxs)("div",{style:H.innerDetailsContainer,children:[(0,E.jsx)("div",{style:{...H.placeholderGradient,opacity:.7,width:48,height:48,borderRadius:4}}),(0,E.jsx)("div",{style:{...H.name,...H.placeholderGradient,opacity:.7,width:"50%",height:24}})]})})}const H={containerCard:{boxShadow:j.Z.frontCardShadow,border:`1px solid ${l.ZP.blackWithAlpha(.1)}`,background:l.ZP.white,height:240,width:320,borderRadius:5,padding:24,paddingTop:28,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between"},addNewCard:{background:"transparent",boxShadow:void 0,alignItems:"center",justifyContent:"center",color:l.ZP.frontTextLight,fill:l.ZP.frontTextLight},innerDetailsContainer:{width:"100%"},name:{fontWeight:m.Z.fontWeight.semibold,fontSize:18,marginTop:12,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},creatorTagline:{lineHeight:"24px",fontSize:14,color:l.ZP.frontTextLight,maxHeight:72,overflow:"hidden"},typeTagline:{lineHeight:"24px",fontSize:14,color:l.ZP.frontTextLight,maxHeight:72,overflow:"hidden",marginTop:10},blueButton:{padding:0,background:void 0,color:l.ZP.blue,fill:l.ZP.blue},placeholderGradient:{backgroundColor:"rgba(0,0,0,0.05)"}};var K=i(98167);function q(){window.__c={n:"DeveloperIntegrationsList"};const e=(0,n.O7)(),[t,i]=r.useState(!1),[o,s]=r.useState([]),[l,m]=r.useState([]),M=(0,a.VK)((()=>S.default.state.currentUserStore),[]),j=(0,a.VK)((()=>S.default.state.currentUserRootStore),[]),I=(0,a.VK)((()=>j?j.getAdminSpaceStores():[]),[j]),[k,F]=r.useState("all");(0,r.useEffect)((()=>{s([]),m([])}),[e.currentUser.id]);const Z=(0,r.useCallback)((e=>{const{id:t,table:i}=e;i===c.cZ?m((e=>e.includes(t)?e:e.concat(t))):i===p.K2?s((e=>e.includes(t)?e:e.concat(t))):(0,g.t1)(i)}),[]),D=(0,r.useCallback)((()=>{i(!0),v.Ngp(e)}),[e]);(0,r.useEffect)((()=>{v.BI8(e)}),[e]);const[{status:P,error:T,value:R}]=(0,d.r5)((async()=>{const t=I.map((e=>e.id)),i=await y.getDeveloperBotsAndIntegrations(e,{ownedSpaceIds:t});if("success"===i.type)return i.data;if("failed"===i.type)throw i.error;return(0,g.t1)(i)}),[e,I]),B=null==R?void 0:R.integrationIds;(0,r.useEffect)((()=>{B&&s((e=>(0,h.jj)([...e,...B])))}),[B]);const L=null==R?void 0:R.botIds;(0,r.useEffect)((()=>{L&&m((e=>(0,h.jj)([...e,...L])))}),[L]);const V=(0,a.VK)((()=>{if(M){return(0,x.GU)({ids:o,table:p.K2,userStore:M}).filter((e=>e.alive))}return[]}),[M,o]),U=(0,a.VK)((()=>{if(M){return(0,x.GU)({ids:l,table:c.cZ,userStore:M}).filter((e=>e.alive))}return[]}),[M,l]),A=(0,a.VK)((()=>(0,x.cr)([...V,...U])),[V,U]),N=(0,a.VK)((()=>({all:A,internal:U,public:V}[k])),[k,A,U,V]);return t?(0,E.jsx)(_.LazyDeveloperIntegrationCreateV2,{onClose:()=>i(!1),onSuccess:Z}):(0,E.jsx)(K.Z,{className:b.pg$,title:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationsList.title",defaultMessage:"My integrations"}),subtitle:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationsList.subtitle",defaultMessage:"Create, review, and edit development info and credentials."}),icon:(0,E.jsx)($,{}),sideContent:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(w.h,{onClick:D,styles:{marginBottom:12,width:"100%"},children:[(0,u.R)({width:16,height:16,fill:"white"}),(0,E.jsx)("div",{style:{marginLeft:8},children:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationsList.addNewButton.label",defaultMessage:"New integration"})})]}),(0,E.jsx)("div",{style:{marginTop:8},children:x.$Z.map((t=>(0,E.jsx)("div",{children:(0,E.jsx)(C.Z,{onClick:()=>{F(t),v.EJs(e,{type:t})},isSmall:!0,style:{...J.filterButton,...t===k&&J.selectedFilterButton},children:Y[t]})},t)))})]}),children:(0,E.jsx)(G,{isLoading:!M||"pending"===P||"idle"===P,error:T,integrationOrBotRecords:N,onCreateNewClick:D})})}const Y={all:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationsList.allFilter.label",defaultMessage:"View all"}),internal:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationsList.internalFilter.label",defaultMessage:"Internal"}),public:(0,E.jsx)(f.FormattedMessage,{id:"developerIntegrationsList.publicFilter.label",defaultMessage:"Public"})};function $(){return(0,E.jsx)("img",{alt:"Funky build icon",src:s.Z.images.integrations.funkyManagementIconPng,style:{height:130,width:130}})}function G(e){window.__c={n:"CardGrid"};const{isLoading:t,error:i,integrationOrBotRecords:r,onCreateNewClick:n}=e,{status:a}=(0,o.V)({value:r,validateLoaded:e=>e.length>0});return i?(0,E.jsx)("div",{style:J.error,children:i.message}):(0,E.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridAutoRows:"auto",gap:28,minHeight:508},children:"pending"===a||t?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(W,{}),(0,E.jsx)(W,{}),(0,E.jsx)(W,{})]}):(0,E.jsxs)(E.Fragment,{children:[r.map((e=>(0,E.jsx)(z,{integrationOrBot:e},e.id))),(0,E.jsx)(O,{onClick:n})]})})}const J={filterButton:{fontSize:15,height:28,marginTop:4,color:l.ZP.frontTextLight,width:"100%"},selectedFilterButton:{color:l.ZP.frontText,fontWeight:m.Z.fontWeight.medium},error:{color:l.ZP.frontRed}}},36360:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(83355);class n extends r.Z{willMount(e){document.title=e.title}willUpdate(e){document.title=e.title}renderComponent(){return this.props.children}}n.displayName="DocumentTitle";const a=n},86249:(e,t,i)=>{i.d(t,{ZP:()=>J,UV:()=>G,f4:()=>$});i(57658);var r=i(67294),n=i(24405),a=i(56666),o=i(44495),s=i(37612),l=i(5366),d=i(97880),u=i(47307),c=i(40394),p=i(42922),g=i(52275),m=i(53695),h=i(64369),f=i(480),v=i(86628),y=i(50906),b=i(54642),x=i(33954),_=i(52507),S=i(50506),w=i(13991),C=i(82990),M=i(74194),j=i(68785),I=i(85893);const k=(0,l.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const F=function(e){let{handleAddNewDomain:t,loading:i,verificationType:a}=e;window.__c={n:"AddNewDomain"};const[o,s]=(0,r.useState)(""),u=!Boolean(o),c=(0,r.useCallback)((e=>{s(e.target.value)}),[]),g=(0,n.yK)((()=>({title:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:u?.5:1}})),[u]);let m;switch(a){case"integration":m=k.integrationSubtitle;break;case"saml_config":m=k.samlConfigSubtitle;break;default:(0,d.t1)(a)}return(0,I.jsxs)(r.Fragment,{children:[(0,I.jsx)(h.Z,{style:g.title,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})}),(0,I.jsx)(h.Z,{style:g.subtitle,isMultiline:!0,children:(0,I.jsx)(l.FormattedMessage,{...m,values:{br:(0,I.jsx)("br",{})}})}),(0,I.jsx)(M.Z,{value:o,style:g.input,placeholder:"notion.so",onChange:c}),(0,I.jsx)(p.Z,{onClick:()=>t(o),style:g.button,isLarge:!0,disabled:u,children:i?(0,I.jsx)(j.Z,{}):(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})})]})};var Z=i(63296);const D=function(e){let{domain:t,isExpired:i,onClose:a}=e;window.__c={n:"InvalidDomain"};const o=(0,n.yK)((e=>({title:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return(0,I.jsxs)(r.Fragment,{children:[(0,I.jsx)(h.Z,{style:o.title,isMultiline:!0,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:t}})}),(0,I.jsx)(h.Z,{style:o.subtitle,isMultiline:!0,children:i?(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain's verification has expired."}):(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})}),(0,I.jsx)(Z.Z,{onClick:a,style:{width:"100%"},children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"Okay"})})]})},P=(0,l.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const T=function(e){let{domain:t,onClose:i,verificationType:a}=e;window.__c={n:"VerifyDomain"};const o=(0,n.yK)((()=>({title:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let s;switch(a){case"saml_config":s=P.samlConfigSubtitle;break;case"integration":s=P.integrationSubtitle;break;default:(0,d.t1)(a)}return(0,I.jsxs)(r.Fragment,{children:[(0,I.jsx)(h.Z,{style:o.title,isMultiline:!0,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:t}})}),(0,I.jsx)(h.Z,{style:o.subtitle,isMultiline:!0,children:(0,I.jsx)(l.FormattedMessage,{...s,values:{br:(0,I.jsx)("br",{})}})}),(0,I.jsx)(Z.Z,{onClick:i,style:{width:"100%"},children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"Okay"})})]})};var R=i(75553),B=i(63143),L=i(14871),V=i(16402),U=i(64921);const A=function(e){let{handleVerifyDomain:t,domainVerification:i,loading:a}=e;window.__c={n:"VerifyExistingDomain"};const o=(0,f.O7)(),s=i.expiresAt-Date.now()<2*B.U6,d=(0,n.yK)((e=>({title:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{paddingInlineStart:22,margin:"24px 0"},listItem:{fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",marginBottom:12},expiresSoonText:{color:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500]},copyButton:{borderRadius:3,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:C.Z.getCompositeFontFamily(w.SP).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},code:{width:"100%",color:e.mediumTextColor,fontFamily:C.Z.getCompositeFontFamily(w.SP).mono,fontSize:14,fontWeight:400,lineHeight:"18px"},codeContainer:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:3,marginTop:4,marginBottom:8}})),[]);return(0,I.jsxs)(r.Fragment,{children:[(0,I.jsx)(h.Z,{style:d.title,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})}),(0,I.jsx)(h.Z,{style:d.subtitle,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})}),(0,I.jsx)(h.Z,{isSmall:!0,style:{marginTop:22},children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"})}),(0,I.jsxs)("div",{style:d.codeContainer,children:[(0,I.jsx)(h.Z,{style:d.code,children:`notion-domain-verification=${i.verificationCode}`}),(0,I.jsxs)(U.Z,{onClick:function(){L.RD({environment:o,stringValue:`notion-domain-verification=${i.verificationCode}`,copiedMessage:L.tq.copiedLinkToClipboard})},style:d.copyButton,children:[(0,R.U)(d.copyIcon),(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.copy",defaultMessage:"Copy"})]})]}),(0,I.jsx)(h.Z,{style:s?d.expiresSoonText:void 0,isSmall:!0,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"Expires on {timeLeft}",values:{timeLeft:(0,V.gs)(i.expiresAt)}})}),(0,I.jsxs)("ol",{style:d.list,children:[(0,I.jsx)("li",{style:d.listItem,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Navigate to the DNS record section of your domain host."})}),(0,I.jsx)("li",{style:d.listItem,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a new TXT record and paste in the code above as the value."})}),(0,I.jsx)("li",{style:d.listItem,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"Typically, this change takes only minutes to occur, however, there are cases where it may take up to 72 hours for the DNS record to propagate."})}),(0,I.jsx)("li",{style:d.listItem,children:(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:'Click "Verify" to notify Notion to check your DNS record.'})})]}),(0,I.jsx)(Z.Z,{style:{width:"100%"},onClick:()=>t(i),disabled:a,children:a?(0,I.jsx)(j.Z,{}):(0,I.jsx)(l.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify"})})]})};const E=function(e){window.__c={n:"VerifyDomainModal"};const t=(0,f.O7)(),i=(0,l.useIntl)(),a=(0,n.Fg)(),[o,s]=(0,v.AF)(e.store,_.ZP),{verificationType:c,verificationTargetId:p,refreshDomains:g}=e,m=(0,r.useCallback)((()=>{s((e=>({...e,loading:!1,modalOpen:!1})))}),[s]),h=(0,r.useCallback)((async e=>{s((e=>({...e,loading:!0})));const r="integration"===c?{type:c,integrationId:p,domain:e}:{type:c,spaceId:p,domain:e},n=await b.createDomainVerificationCode(t,r);if("success"===n.type){g(),y.G7$(t,{type:c});const e=n.data.domainVerification,i=(0,_.Hs)(e);s((e=>({...e,domainVerification:i,loading:!1})))}else u.showErrorMessage((0,x.wf)(i,n)),s((e=>({...e,loading:!1})))}),[t,s,p,g,c,i]),w=(0,r.useCallback)((async e=>{s((e=>({...e,loading:!0})));const r=await b.verifyDomain(t,{verificationId:e.id});if(y.DoK(t,{type:c}),"success"===r.type){g(),y.aOs(t,{type:c});const i={type:"verified",domain:e.domain};s((e=>({...e,domainVerification:i,loading:!1})))}else u.showErrorMessage((0,x.wf)(i,r)),s((e=>({...e,loading:!1})))}),[t,i,s,g,c]),C=(0,r.useCallback)((()=>{if(!o.domainVerification)return(0,I.jsx)(F,{handleAddNewDomain:h,loading:o.loading,verificationType:c});switch(o.domainVerification.type){case"invalid":return(0,I.jsx)(D,{domain:o.domainVerification.domain,isExpired:Date.now()>o.domainVerification.expiresAt,onClose:m});case"unverified":return(0,I.jsx)(A,{handleVerifyDomain:w,domainVerification:o.domainVerification,loading:o.loading});case"verified":return(0,I.jsx)(T,{domain:o.domainVerification.domain,onClose:m,verificationType:c});default:(0,d.t1)(o.domainVerification)}}),[o.domainVerification,o.loading,w,h,m,c]);return(0,I.jsx)(S.Z,{open:o.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:m,render:()=>(0,I.jsx)("div",{style:{background:a.popoverBackground,width:410,padding:24,borderRadius:3},children:C()})})};var N=i(5478);const z=[{id:"domain",headerTitle:(0,I.jsx)(l.FormattedMessage,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>(0,I.jsx)(h.Z,{children:e.domain}),widthData:{width:100},sortable:!1},{id:"status",headerTitle:(0,I.jsx)(l.FormattedMessage,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>(0,I.jsx)(K,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>(0,I.jsx)(q,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],O=(0,l.defineMessages)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}}),W={fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},H={fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"};function K(e){let{status:t}=e;window.__c={n:"VerificationToken"};const i=(0,n.yK)((e=>{const i={[N.YF.Success]:e.statusTokenBackground.green,[N.YF.Pending]:e.statusTokenBackground.yellow,[N.YF.Failure]:e.statusTokenBackground.red},r={[N.YF.Success]:e.statusTokenIndicator.green,[N.YF.Pending]:e.statusTokenIndicator.yellow,[N.YF.Failure]:e.statusTokenIndicator.red},n={[N.YF.Success]:e.statusTokenText.green,[N.YF.Pending]:e.statusTokenText.yellow,[N.YF.Failure]:e.statusTokenText.red};return{container:{background:i[t],color:n[t],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:r[t],width:10,height:10,borderRadius:"100%"}}}),[t]);return(0,I.jsxs)("div",{style:i.container,children:[(0,I.jsx)("div",{style:i.dot}),Y(t)]})}function q(e){let{onShowDetails:t,onRemove:i}=e;window.__c={n:"DropdownMenu"};const r=(0,n.yK)((e=>({primaryIcon:{width:14,height:14,color:e.mediumIconColor,fill:"currentColor"},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.regularIconColor,fill:"currentColor"}})),[]),d=[];return t&&d.push({key:"details",action:()=>t(),render:e=>(0,I.jsx)(g.Z,{...e,style:r.menuItem,focused:!1,icon:(0,o.D)(r.menuIcon),title:(0,I.jsx)(l.FormattedMessage,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:(0,I.jsx)(l.FormattedMessage,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0})}),i&&d.push({key:"remove",action:()=>i(),render:e=>(0,I.jsx)(g.Z,{...e,style:r.menuItem,focused:!1,icon:(0,s.y)(r.menuIcon),title:(0,I.jsx)(l.FormattedMessage,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:(0,I.jsx)(l.FormattedMessage,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0})}),0===d.length?null:(0,I.jsx)(m.N,{hideDropdownIcon:!0,title:(0,a.o)(r.primaryIcon),items:d})}function Y(e){switch(e){case N.YF.Success:return(0,I.jsx)(l.FormattedMessage,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case N.YF.Pending:return(0,I.jsx)(l.FormattedMessage,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case N.YF.Failure:return(0,I.jsx)(l.FormattedMessage,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,d.t1)(e)}}function $(e){return{domain:e,status:N.YF.Success,data:{type:"verified",domain:e}}}function G(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:N.YF.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:N.YF.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const J=function(e){window.__c={n:"DomainVerificationTable"};const{disabled:t,domains:i,domainVerificationStore:a,verificationType:o,verificationTargetId:s,refreshDomains:g,onRemoveDomain:m,onClickAddDomain:f,renderOverrideAddDomainButton:v}=e,y=(0,n.yK)((e=>(0,c.b)({columnRenderInfo:z,theme:e,containerMarginTop:0})),[]);function b(){t||(f&&f(),a.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}const x=i.map((e=>{let{domain:i,status:r,data:n}=e;return{id:"verified"===n.type?i:n.id,isClickable:!1,domain:i,status:r,onShowDetails:t?void 0:()=>function(e){t||a.setState({domainVerification:e,loading:!1,modalOpen:!0})}(n),onRemove:t?void 0:()=>async function(e,t){let i;if(t===N.YF.Failure)return void m(e);t===N.YF.Pending?i=O.unverifiedDomainWarning:t===N.YF.Success?i="saml_config"===o?O.verifiedSAMLWarning:O.verifiedIntegrationsWarning:(0,d.t1)(t),await u.confirmUserAction({message:(0,I.jsx)("div",{style:W,children:(0,I.jsx)(l.FormattedMessage,{defaultMessage:"Are you sure you want to delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"})}),description:(0,I.jsx)("div",{style:H,children:(0,I.jsx)(l.FormattedMessage,{...i})}),acceptLabel:(0,I.jsx)(l.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:(0,I.jsx)(l.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})})&&m(e)}(n,r)}}));return(0,I.jsxs)(r.Fragment,{children:[v?v(b):(0,I.jsx)(p.Z,{isLarge:!0,disabled:t,onClick:b,style:{margin:"4px 0px 16px",width:"fit-content"},children:(0,I.jsx)(l.FormattedMessage,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})}),(0,I.jsx)(c.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:z,rows:x,styles:y,renderNoRowsComponent:()=>(0,I.jsx)(h.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,I.jsx)(l.FormattedMessage,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."})})}),(0,I.jsx)(E,{store:a,verificationTargetId:s,verificationType:o,refreshDomains:g})]})}},74169:(e,t,i)=>{i.d(t,{Z:()=>R});var r=i(67294),n=i(83355),a=i(72126),o=i(5366),s=i(47307),l=i(96802),d=i(27153),u=i(39699),c=i(53471),p=i(33929),g=i(94841),m=i(49085);const h="loadingLocalImage",f="uploading",v="loaded";class y extends m.default{getInitialState(){return{loadingMode:v}}}const b=y;var x=i(31792),_=i(87636),S=i(23063),w=i(64921),C=i(12981),M=i(65107),j=i(68785),I=i(32854),k=i(81865),F=i(69278),Z=i(56282),D=i(85893);const P=(0,o.defineMessages)({embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"}});class T extends n.Z{constructor(){super(...arguments),this.lastProxiedUrl=void 0,this.storeTypes={imageUploadStore:b,mouseStore:x.Z},this.handleLoadComplete=()=>{this.stores.imageUploadStore.reset()},this.renderControl=e=>{let{isVisible:t,isRepositioning:i,handleCancelClick:r,handleRepositionClick:n,handleSavePositionClick:a}=e;if(this.props.disabled||this.stores.imageUploadStore.state.loadingMode!==v)return;const{device:s}=this.environment,{isMobile:l}=s;return(0,D.jsx)(S.Z,{isVisible:!0,animationStyle:{width:this.getAdjustedPageWidth(),opacity:t?1:0},render:()=>(0,D.jsx)("div",{style:{position:(0,g.q0)()?"absolute":"relative",pointerEvents:t?"auto":"none",maxWidth:"100%",top:(0,g.q0)()?48:void 0},children:(0,D.jsxs)(_.Z,{isVisible:t,position:"bottom",style:{marginRight:this.props.paddingRight,marginLeft:this.props.paddingLeft},children:[!i&&(0,D.jsx)(w.Z,{style:{...F.Z.actionButtonStyle,...l&&{borderRight:"none"}},onClick:this.handleChangeCoverClick,children:(0,D.jsx)(o.FormattedMessage,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!i&&!l&&(0,D.jsx)(w.Z,{style:{...F.Z.actionButtonStyle,borderRight:"none"},onClick:e=>n(e,this.lastProxiedUrl),children:(0,D.jsx)(o.FormattedMessage,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),i&&!l&&(0,D.jsx)(w.Z,{style:F.Z.actionButtonStyle,onClick:a,children:(0,D.jsx)(o.FormattedMessage,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),i&&!l&&(0,D.jsx)(w.Z,{style:{...F.Z.actionButtonStyle,borderRight:"none"},onClick:r,children:(0,D.jsx)(o.FormattedMessage,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})})},this.handleFlushTemporaryPosition=e=>{let{imagePosition:t,reset:i}=e;u.createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:this.environment,perform:e=>{l.Mp({store:this.props.store,coverPosition:t,transaction:e}),i()}})},this.handleChangeCoverClick=e=>{const{intl:t,store:i}=this.props;this.stores.mouseStore.reset();const r=e.target.getBoundingClientRect();d.$(this.environment,{originGap:3,originRect:r,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:t.formatMessage({defaultMessage:"Page cover",id:"pageCover.mobileMenu.title"}),onDelete:this.handleDelete,currentTab:"gallery",tabs:[{type:"gallery",onChange:this.handleGalleryChange},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:(0,D.jsx)(o.FormattedMessage,{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption",values:{idealImageWidth:1500}}),onUpload:e=>{this.props.store.getCoverStore()&&c.cT({environment:this.environment,file:e,bucket:"secure",record:i.pointer,onStart:this.handleUploadStart,onProgress:this.handleUploadProgress,onComplete:this.handleUploadComplete,onError:()=>{s.showErrorMessage(t.formatMessage({defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"}))}})}},{type:"embed",title:(0,D.jsx)(o.FormattedMessage,{defaultMessage:"Link",id:"pageCover.embedType.title"}),inputPlaceholder:p.default.formatMessage(P.embedPlaceholder),caption:(0,D.jsx)(o.FormattedMessage,{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"}),buttonText:(0,D.jsx)(o.FormattedMessage,{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}),onChange:this.handleEmbedLinkChange},{type:"unsplash",onChange:this.handleGalleryChange}]})},this.handleUploadComplete=e=>{this.updatePageCover({url:e,position:.5})},this.handleGalleryChange=e=>{const{url:t,position:i}=e;this.updatePageCover({url:t,position:a.hj(i)?i:.5});const{device:r}=this.environment;r.isMobile&&d.Z()},this.handleEmbedLinkChange=e=>{this.updatePageCover({url:e,position:.5}),d.Z()},this.coverWithRecordStore=this.createComputedStore((()=>this.props.store.getCover()),!0),this.updatePageCover=async e=>{const{url:t,position:i}=e,{serverCommitResult:r}=u.createAndCommit({userAction:"PageCover.updatePageCover",environment:this.environment,perform:e=>{l.fs({store:this.props.store,url:t,position:i,transaction:e})}});await r,this.stores.imageUploadStore.state.loadingMode===f&&this.stores.imageUploadStore.setState({loadingMode:"downloading",dataURL:this.stores.imageUploadStore.state.dataURL,uploadProgress:100})},this.handleUploadStart=e=>{const{file:t,name:i,size:r}=e;if(d.Z(),this.stores.imageUploadStore.setState({loadingMode:h,file:t,name:i,size:r}),t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{this.stores.imageUploadStore.state.loadingMode===h&&this.stores.imageUploadStore.setState({...this.stores.imageUploadStore.state,uploadProgress:0,loadingMode:f,dataURL:e.target.result})},e.readAsDataURL(t)}},this.handleUploadProgress=e=>{const{progressPercent:t}=e;this.stores.imageUploadStore.state.loadingMode===f&&this.stores.imageUploadStore.setState({...this.stores.imageUploadStore.state,uploadProgress:t})},this.handleDelete=()=>{d.Z(),u.createAndCommit({userAction:"PageCover.handleDelete",environment:this.environment,perform:e=>{l.MF({store:this.props.store,transaction:e})}})}}renderComponent(){const e=this.coverWithRecordStore.getState();if(!e)return;const t=this.stores.imageUploadStore.state,i=t.loadingMode!==v&&t.loadingMode!==h;return(0,D.jsx)(Z.Z,{mouseStore:this.stores.mouseStore,onFlushTemporaryPosition:this.handleFlushTemporaryPosition,renderControl:this.renderControl,source:"page",store:this.props.store,style:{display:"flex",flexDirection:"column",alignItems:"center",height:this.props.height,cursor:"default"},render:n=>(0,D.jsxs)(r.Fragment,{children:[(0,D.jsx)(k.Z,{url:e.cover,isAuthenticated:!0,permissionRecord:e.pointer,width:this.props.proxyWidth,render:(e,r)=>{this.lastProxiedUrl=r;const a={width:"100%",height:this.props.height,objectFit:"cover",opacity:i?.5:1,objectPosition:`center ${100*(1-(n.imagePosition||0))}%`,borderRadius:0},o={width:"100%",height:this.props.height};return(0,D.jsx)(M.B,{src:r,placeholderSrc:i?t.dataURL:void 0,placeholderBehavior:i?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:o,imageStyle:a,onLoadComplete:this.handleLoadComplete})}}),i&&(0,D.jsxs)("div",{style:C.Z.loadingContainerStyle,children:[(0,D.jsx)(j.Z,{style:{width:16,height:16,marginRight:4}}),(0,D.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,D.jsx)(I.Z,{percentage:t.uploadProgress})})]})]})})}getAdjustedPageWidth(){let e;return e=!!this.props.store.isFullWidth()?"100%":900,e}}T.displayName="PageCover";const R=(0,o.injectIntl)(T)},69872:(e,t,i)=>{i.d(t,{L:()=>u,Z:()=>p});i(67294);var r=i(83355),n=i(39068),a=i(52821),o=i(87279),s=i(52275),l=i(28992),d=i(85893);let u=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});class c extends r.Z{renderComponent(){const{name:e,type:t,icon:i}=this.props.propertySchema,r=this.props.format===u.Name?e:a.SO[t],{theme:o}=this;return this.props.locked?(0,d.jsx)(l.Z,{title:r,icon:(0,d.jsx)(n.ZP,{icon:i,type:t,size:this.environment.device.isMobile?18:16,theme:o,style:{fill:o.regularIconColor}}),...this.props}):(0,d.jsx)(s.Z,{title:r,icon:(0,d.jsx)(n.ZP,{icon:i,type:t,size:this.environment.device.isMobile?18:16,theme:o,style:{fill:o.regularIconColor,marginLeft:6,marginRight:2}}),...this.props})}}c.displayName="PropertyMenuItem",c.DisplayFormat=u,c.contextTypes={...o.mw,...r.w};const p=c},46978:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(67294),n=i(24405),a=i(85893);function o(e,t){let{isSelected:i}=e;window.__c={n:"RadioButtonIcon"};const{radioButtonStyle:r,dotStyle:o}=(0,n.yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:8,background:i?e.blueColor:e.whiteButtonBackground,border:i?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:i?1:0}})),[i]);return(0,a.jsx)("div",{ref:t,style:r,children:(0,a.jsx)("div",{style:o})})}const s=r.forwardRef(o)},5478:(e,t,i)=>{i.d(t,{YF:()=>l,ZP:()=>u});i(67294);var r=i(24405),n=i(4023),a=i(26388),o=i(85567),s=i(85893);const l={Success:"success",Pending:"pending",Failure:"failure"};const d={display:"flex",justifyContent:"center",alignItems:"baseline"},u=function(e){let{status:t,value:i,renderTooltip:u,...c}=e;window.__c={n:"StatusToken"};const p=(0,r.Fg)(),g={[l.Success]:p.statusTokenBackground.green,[l.Pending]:p.statusTokenBackground.yellow,[l.Failure]:p.statusTokenBackground.red},m={[l.Success]:p.statusTokenIndicator.green,[l.Pending]:p.statusTokenIndicator.yellow,[l.Failure]:p.statusTokenIndicator.red},h={[l.Success]:p.statusTokenText.green,[l.Pending]:p.statusTokenText.yellow,[l.Failure]:p.statusTokenText.red};return u?(0,s.jsx)(o.Z,{...c,backgroundColor:g[t],color:h[t],value:(0,s.jsx)(a.Z,{placement:n.u.Bottom,alignment:n.v.Start,renderTooltip:u,render:e=>(0,s.jsxs)("div",{style:d,...e,children:[(0,s.jsx)("div",{style:{background:m[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),i]})})}):(0,s.jsx)(o.Z,{...c,backgroundColor:g[t],color:h[t],value:(0,s.jsxs)("div",{style:d,children:[(0,s.jsx)("div",{style:{background:m[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),i]})})}},719:(e,t,i)=>{i.d(t,{Z:()=>l});i(67294);var r=i(83355),n=i(98742),a=i(74194),o=i(85893);class s extends r.Z{constructor(){super(...arguments),this.handleKeyDown=e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken()}}renderComponent(){const{device:e}=this.environment;return(0,o.jsxs)("div",{className:this.props.readOnly?void 0:"notion-focusable-within",onClick:this.props.onClick,style:e.isMobile?this.getMobileWrapStyle():this.getDesktopWrapStyle(),children:[this.props.tokens,this.renderInput()]})}renderInput(){const{device:e}=this.environment,t=0===this.props.tokens.length;return(0,o.jsx)(a.Z,{format:a.Z.Format.Transparent,...(0,n.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),value:this.props.value,onSubmit:this.props.onSubmit,onBlur:this.props.onBlur,focus:this.props.focus,style:{...s.inputStyle,margin:e.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this.props.readOnly,inputStyle:{height:18},size:1,type:this.props.type,placeholder:t?this.props.placeholder:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})}getDesktopWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this.props.style}}getMobileWrapStyle(){return{...this.getDesktopWrapStyle(),fontSize:14,padding:"7px 10px 0"}}}s.displayName="TokenInput",s.inputStyle={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};const l=s},56282:(e,t,i)=>{i.d(t,{Z:()=>M});i(67294);var r=i(73935),n=i(83355),a=i(13991),o=i(6740),s=i(49085),l=i(12137),d=i(8848),u=i(22491),c=i(72126),p=i(82990),g=i(63143),m=i(5366),h=i(24677),f=i(94841),v=i(31792),y=i(27724);class b extends s.default{getInitialState(){return{showFadeInAnimation:!1,isRepositioning:!1}}}const x=b;var _=i(23063),S=i(6685),w=i(85893);class C extends n.Z{constructor(){super(...arguments),this.storeTypes={focusStore:s.default.createClass(!1),mouseStore:v.Z,withImageRepositioningStore:x},this.renderDraggable=()=>(0,w.jsx)(S.Z,{onDraggableDragStart:this.handleDragStart,onDraggableDragMove:this.handleDragMove,onDraggableDragEnd:this.handleDragEnd,onDraggableDragCancel:this.handleDragCancel,disabled:!this.isRepositioning(),render:e=>(0,w.jsx)("div",{...(0,u.iv)(this.getDragContainerStyle()),...e,children:this.props.render({imagePosition:this.getRenderedCoverPosition(),isRepositioning:this.isRepositioning(),showFadeInAnimation:!1})})}),this.shouldBeActiveStore=this.createComputedStore((()=>0===y.default.state.stores.length)),this.handleFocus=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o.E)(t)&&this.stores.focusStore.setState(!0)},this.handleBlur=e=>{this.stores.focusStore.setState(!1)},this.handleMouseMove=e=>{this.mouseStore.setState({...this.mouseStore.state,mouseEntered:!0})},this.handleMouseLeave=e=>{this.mouseStore.setState({...this.mouseStore.state,mouseEntered:!1})},this.handleMouseMoveThrottled=(0,c.P2)(this.handleMouseMove,100),this.handleMouseLeaveDebounced=(0,c.Ds)(this.handleMouseLeave,100),this.handleWindowMouseDown=e=>{const t=r.findDOMNode(this);t&&!t.contains(e.target)&&this.isRepositioning()&&this.props.onFlushTemporaryPosition({imagePosition:this.getRenderedCoverPosition(),reset:()=>{this.mouseStore.reset(),this.stores.withImageRepositioningStore.reset()}})},this.handleRepositionClick=(e,t)=>{h.ZH(this.environment);const i=new Image;i.onload=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,isRepositioning:!0,image:i})},t&&(i.src=t)},this.handleCancelClick=e=>{this.stores.withImageRepositioningStore.reset()},this.handleSavePositionClick=e=>{this.props.onFlushTemporaryPosition({imagePosition:this.getRenderedCoverPosition(),reset:()=>{this.stores.withImageRepositioningStore.reset()}})},this.handleDragStart=e=>{const t=this.isRepositioning(),{image:i}=this.stores.withImageRepositioningStore.state;if(i&&t){const e=r.findDOMNode(this);if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/i.width*i.height,r=this.getRenderedCoverPosition();this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:t,startDragRenderedPosition:r})}}},this.handleDragMove=e=>{if(this.isRepositioning()){const{startDragRenderedPosition:t,startDragImageScreenHeight:i}=this.stores.withImageRepositioningStore.state,r=e.diffY/(i||0)+(t||0);this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,temporaryPosition:(0,c.NM)((0,l.Z)(r,0,1),4)})}},this.handleDragEnd=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})},this.handleDragCancel=()=>{this.stores.withImageRepositioningStore.setState({...this.stores.withImageRepositioningStore.state,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})}}didMount(){super.didMount(),window.addEventListener("mousedown",this.handleWindowMouseDown)}willUnmount(){super.willUnmount(),window.removeEventListener("mousedown",this.handleWindowMouseDown)}willMountOrUpdate(){this.isRepositioning()&&!this.shouldBeActiveStore.state&&this.stores.withImageRepositioningStore.reset()}renderComponent(){const{device:e}=this.environment,{style:t}=this.props,{isMobile:i}=e,r=this.isRepositioning(),{mouseEntered:n}=this.mouseStore.state,a=this.stores.focusStore.state;return(0,w.jsxs)("div",{onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseEnter:this.handleMouseMoveThrottled,onMouseMove:this.handleMouseMoveThrottled,onMouseLeave:this.handleMouseLeaveDebounced,...(0,u.iv)(this.getContainerStyle(),t),children:[this.renderDraggable(),this.renderDragMessage(),this.props.renderControl({handleRepositionClick:this.handleRepositionClick,handleSavePositionClick:this.handleSavePositionClick,handleCancelClick:this.handleCancelClick,isVisible:i||n||a||r,isRepositioning:r})]})}renderDragMessage(){const{isRepositioning:e}=this.stores.withImageRepositioningStore.state;if(!this.props.small)return(0,w.jsx)(_.Z,{isVisible:!0,animationStyle:{opacity:e?1:0},render:()=>(0,w.jsx)("div",{...(0,u.iv)(this.getDragMessageContainerStyle()),"aria-hidden":!e,children:(0,w.jsx)(m.FormattedMessage,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})})}isRepositioning(){return this.stores.withImageRepositioningStore.state.isRepositioning}getRenderedCoverPosition(){const{temporaryPosition:e}=this.stores.withImageRepositioningStore.state;return(0,c.hj)(e)?e:this.getPersistedCoverPosition()}getPersistedCoverPosition(){const{source:e,store:t}=this.props;if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c.hj)(e))return e}if(t.isCollectionView()){const e=t.getCollectionViewCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,g.z4)(t)?.5:t}}const i=t.getFormat().page_cover_position;return(0,c.hj)(i)?i:.5}get mouseStore(){return this.props.mouseStore||this.stores.mouseStore}getContainerStyle(){return{position:"relative",width:"100%"}}getDragContainerStyle(){return{width:"100%",cursor:this.isRepositioning()?"move":"inherit"}}getDragMessageContainerStyle(){return{background:d.ZP.blackWithAlpha(.4),borderRadius:3,color:d.ZP.white,fontSize:12,fontFamily:p.Z.getCompositeFontFamily(a.SP).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:(0,f.q0)()?56:"calc(50% - 10px)",textAlign:"center"}}}C.displayName="WithImageRepositioning";const M=C},12982:(e,t,i)=>{i.d(t,{H:()=>M,Qo:()=>P,Xr:()=>Z,Z6:()=>k,_R:()=>N,aP:()=>j,bK:()=>O,fP:()=>T,hl:()=>A,hs:()=>W,m0:()=>I,mP:()=>w,oX:()=>E,sY:()=>_,tm:()=>D,vb:()=>C,w8:()=>z,x6:()=>V,yb:()=>L});i(57658),i(67294);var r=i(33728),n=i(72126),a=i(21202),o=i(15047),s=i(97880),l=i(44876),d=i(64002),u=i(5366),c=(i(95477),i(81236)),p=i(35661),g=i(91924),m=i(43348),h=i(91996),f=i(65270),v=i(84210),y=i(33929),b=i(18514),x=i(85893);const _=(0,u.defineMessages)({missingValuesError:{id:"developerIntegrationForm.error.missingFieldRequired",defaultMessage:"{ fieldName } is required."},invalidInputError:{id:"developerIntegrationForm.error.invalidInput",defaultMessage:"{ fieldName } is invalid."},transactionGenericError:{id:"developerIntegrationAction.error.failedTransaction",defaultMessage:"Something went wrong, please try again"},basicSectionTitle:{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic Information"},secretSectionTitle:{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"},capabilitiesSectionTitle:{id:"developerIntegrationForm.sectionHeader.capabilities",defaultMessage:"Capabilities"},oauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.oauthAndUri",defaultMessage:"OAuth Domain & URIs"},organizationSectionTitle:{id:"developerIntegrationForm.sectionHeader.organization",defaultMessage:"Organization Information"},externalOauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.external_oauth_setup",defaultMessage:"External Authorization Setup"},unfurlingSectionTitle:{id:"developerIntegrationForm.sectionHeader.unfurlingDomains",defaultMessage:"Unfurling Domain & Patterns"},basicPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.basic",defaultMessage:"Basic Information"},secretPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.secrets",defaultMessage:"Secrets"},capabilitiesPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.capabilities",defaultMessage:"Capabilities"},distributionPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.distribution",defaultMessage:"Distribution"},linkPreviewPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.unfurling",defaultMessage:"Link Preview"},distributionSwitcherLabel:{id:"developerIntegrationFormDistributionView.switcher.label",defaultMessage:"Do you want to make this integration public?"},unfurlingSwitcherLabel:{id:"developerIntegrationFormUnfurlingView.switcher.label",defaultMessage:"Do you want to enable link preview for this integration?"},integrationTypeLabel:{id:"developerIntegrationFormBasicView.integrationType.label",defaultMessage:"Type"},integrationTypeSubtitle:{id:"developerIntegrationFormBasicView.integrationType.subtitle",defaultMessage:"Internal integrations are installed to a specific workspace. You can make this integration public later"},nameLabel:{id:"developerIntegrationFormBasicView.name.label",defaultMessage:"Name"},nameSubtitle:{id:"developerIntegrationFormBasicView.name.subtitle",defaultMessage:"Name to identify your integration to users"},iconLabel:{id:"developerIntegrationFormBasicView.icon.label",defaultMessage:"Logo"},iconSubtitle:{id:"developerIntegrationFormBasicView.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended"},spaceLabel:{id:"developerIntegrationFormBasicView.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"developerIntegrationFormBasicView.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},tokenLabel:{id:"developerIntegrationFormSecretView.secret.label",defaultMessage:"Internal Integration Secret"},authorizationUrlLabel:{id:"developerIntegrationFormSecretView.integrationAuthUrl.label",defaultMessage:"Authorization URL"},clientIdLabel:{id:"developerIntegrationFormSecretView.clientId.label",defaultMessage:"OAuth client ID"},clientSecretLabel:{id:"developerIntegrationFormSecretView.clientSecret.label",defaultMessage:"OAuth client secret"},capabilitiesLabel:{id:"developerIntegrationFormCapabilitiesView.capabilities.label",defaultMessage:"Capabilities"},redirectUrisLabel:{id:"developerIntegrationFormDistributionView.redirect_uris.label",defaultMessage:"Redirect URIs"},redirectUrisBetaSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri_link_preview_beta.subtitle",defaultMessage:"If you are creating a integration with Link Preview capabilities, redirect to notion.so. Otherwise, populate this field with the URI that users will be redirected to after they complate authentication with Notion. The URI will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},redirectUrisSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},websiteUrlLabel:{id:"developerIntegrationFormDistributionView.website_url.label",defaultMessage:"Website or homepage"},websiteUrlSubtitle:{id:"developerIntegrationFormDistributionView.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens"},taglineLabel:{id:"developerIntegrationFormDistributionView.tagline.label",defaultMessage:"Tagline"},taglineSubtitle:{id:"developerIntegrationFormDistributionView.tagline.subtitle",defaultMessage:"A short description of what the integration does"},privacyPolicyUrlLabel:{id:"developerIntegrationFormDistributionView.privacy_policy_url.label",defaultMessage:"Privacy policy"},privacyPolicyUrlSubtitle:{id:"developerIntegrationFormDistributionView.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},termOfUseLabel:{id:"developerIntegrationFormDistributionView.term_of_use.label",defaultMessage:"Terms of use"},termOfUseSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"developerIntegrationFormDistributionView.email.label",defaultMessage:"Support email"},emailSubtitle:{id:"developerIntegrationFormDistributionView.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens"},developerNameLabel:{id:"developerIntegrationFormDistributionView.developer_name.label",defaultMessage:"Company name"},developerNameSubtitle:{id:"developerIntegrationFormDistributionView.developer_name.subtitle",defaultMessage:"The name of your company or organization. You may use your own name if this does not apply"},templateLabel:{id:"developerIntegrationFormDistributionView.template.label",defaultMessage:"Notion URL for optional template"},templateSubtitle:{id:"developerIntegrationFormDistributionView.template.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page"},unfurlUrlLabel:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},domainLabel:{id:"developerIntegrationFormUnfurlingView.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"developerIntegrationFormUnfurlingView.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"developerIntegrationFormUnfurlingView.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"developerIntegrationFormUnfurlingView.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"developerIntegrationFormUnfurlingView.externalClientSecret.label",defaultMessage:"OAuth Client Secret"}});function S(e){return`${n.eV(e)}Label`}const w=(0,s.AO)((e=>"distribution"===e||"secrets"===e||"basic"===e||"linkPreview"===e||"capabilities"===e?{true:e}:{false:e})),C={basic:{key:"basic",title:y.default.formatMessage(_.basicPageTitle),subsections:[]},secrets:{key:"secrets",title:y.default.formatMessage(_.secretPageTitle),subsections:[]},capabilities:{key:"capabilities",title:y.default.formatMessage(_.capabilitiesPageTitle),subsections:[]},distribution:{key:"distribution",title:y.default.formatMessage(_.distributionPageTitle),subsections:[{key:"organization",title:y.default.formatMessage(_.organizationSectionTitle)},{key:"oauth",title:y.default.formatMessage(_.oauthSectionTitle)}]},linkPreview:{key:"linkPreview",title:y.default.formatMessage(_.linkPreviewPageTitle),subsections:[{key:"external_oauth",title:y.default.formatMessage(_.externalOauthSectionTitle)},{key:"unfurling",title:y.default.formatMessage(_.unfurlingSectionTitle)}]}},M=(e,t)=>{const i=["basic","secrets","capabilities","distribution"];switch(t&&i.push("linkPreview"),e){case"create-bot":return["basic"];case"update-bot":case"create-guest-integration":return["basic","secrets","capabilities","distribution"];case"update-first-party-external-integration":case"update-guest-integration":default:return i}},j={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}}};function I(e){const{formData:t,setFormData:i,formStateType:r,currentFieldNames:n}=e,a=function(e){const{formData:t,formStateType:i,currentFieldNames:r}=e;return r.filter((e=>{const r=t[e].value;return j[e].requiredBy[i]&&!r}))}({formData:t,formStateType:r,currentFieldNames:n});return a.forEach((e=>{const t=S(e);i({field:e,error:y.default.formatMessage(_.missingValuesError,{fieldName:y.default.formatMessage(_[t])})})})),a}function k(e){const{formData:t,formStateType:i,templateStore:r,setFormData:n,currentFieldNames:a}=e,o=function(e){const{formData:t,formStateType:i,templateStore:r,currentFieldNames:n}=e,a=[];return n.forEach((e=>{const n=t[e].value,o=j[e].supportedBy[i],s=h.tV[e];if(o&&n&&s){const i=s({value:n,formData:t,templateStore:r});var l;i.validated||a.push({fieldName:e,errorMessages:null===(l=i.errorMessages)||void 0===l?void 0:l.map((e=>{let{descriptor:t,values:i}=e;return{descriptor:t,values:i??{}}}))})}})),a}({formData:t,formStateType:i,templateStore:r,currentFieldNames:a});return o.forEach((e=>{n({field:e.fieldName,error:e.errorMessages?e.errorMessages.map(((e,t)=>{let{descriptor:i,values:r}=e;return(0,x.jsx)("div",{children:y.default.formatMessage(i,r)},`validation-error-${t}`)})):y.default.formatMessage(_.invalidInputError,{fieldName:_[S(e.fieldName)].defaultMessage})})})),o}function F(e){if(!e)return;const t={};return Object.entries(e).forEach((e=>{let[i,r]=e;r&&(t[i]=!0)})),t}function Z(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,authorization_url:e.authorization_url.value,name:e.name.value,icon:e.icon.value,space:e.space.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>h.FR(e))),website_url:h.FR(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:h.FR(e.privacy_policy_url.value),terms_of_use_url:h.FR(e.terms_of_use_url.value),template_page_id:(0,b.K2)(e.template_url.value??"")??null,email:r.H3(e.email.value),capabilities:F(e.capabilities.value),developer_name:e.developer_name.value,unfurl_url:e.unfurl_url.value,domain:e.domain.value,url_matching_and_placeholder:e.url_matching_and_placeholder.value,external_oauth_authorize_url:h.FR(e.external_oauth_authorize_url.value),external_oauth_token_url:h.FR(e.external_oauth_token_url.value),external_client_id:e.external_client_id.value,external_client_secret:e.external_client_secret.value,external_oauth_scopes:e.external_oauth_scopes.value,external_deletion_url:h.FR(e.external_deletion_url.value)}}function D(e){const{formData:t,formStateType:i,currentFieldNames:r}=e;return r.some((e=>j[e].supportedBy[i]&&t[e].error))}const P=e=>e.flatMap((e=>e.fields)),T={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1,read_comment:!1,insert_comment:!1,link_preview:!1,synced_database:!1};function R(e){const t={...T};return e&&Object.entries(e).forEach((e=>{let[i,r]=e;r&&(t[i]=!0)})),t}const B={value:void 0,error:void 0},L={type:B,name:B,icon:B,space:B,capabilities:B,token:B,authorization_url:B,client_secret:B,client_id:B,tagline:B,email:B,website_url:B,privacy_policy_url:B,terms_of_use_url:B,template_url:B,redirect_uris:B,developer_name:B,external_oauth_authorize_url:B,external_oauth_token_url:B,external_client_id:B,external_client_secret:B,external_oauth_scopes:B,external_deletion_url:B,unfurl_url:B,domain:B,url_matching_and_placeholder:B};function V(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}async function U(e){const{pageId:t,store:i,environment:r}=e;if(!i||!t)return;const n=p.G.createChildStore(i,{table:a.iU,id:t});return await n.load(),(0,v.ZP)({store:n,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=c.Z.getPublicSpaceData(r,n.getSpaceId()))||void 0===e?void 0:e.domain},pageVisitSource:void 0})}async function A(e){const{userRootStore:t,formStoreState:i,environment:r}=e;if("create-bot"===i.type){return{token:void 0,client_id:void 0,client_secret:void 0,authorization_url:void 0,space:(t?t.getAdminSpaceStores():[])[0],developer_name:void 0,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_comment:!1,insert_comment:!1,read_user_with_email:!1,read_user_without_email:!1,link_preview:!1,synced_database:!1},unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-bot"===i.type||"create-guest-integration"===i.type){const e=i.startingRecord.value,r=t&&p.H2.createChildStore(t,{id:e.space_id,table:o.bx});return{token:i.startingRecord,client_id:void 0,client_secret:void 0,authorization_url:void 0,name:e.name,icon:e.icon,space:r,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:R(e.capabilities),developer_name:void 0,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-guest-integration"===i.type){const e=i.startingRecord.value;return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,d.LH)({baseUrl:(0,g.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await U({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:e.redirect_uris,capabilities:R(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("create-third-party-external-integration"===i.type){const e=i.startingRecord.value;return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,d.LH)({baseUrl:(0,g.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await U({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:void 0,capabilities:R(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:{developmentDomain:f.nZ,verifiedDomains:[],domainVerifications:[]},url_matching_and_placeholder:[f.VH],external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-third-party-external-integration"===i.type){var n,a;const e=i.startingRecord.value,o=null===(n=i.startingAuthRecord)||void 0===n?void 0:n.value,u=i.domainVerifications,c=e.info.original_url_patterns||[],p={developmentDomain:(null===(a=e.info.development_url_domains)||void 0===a?void 0:a[0])||"",verifiedDomains:e.info.original_url_domains||[],domainVerifications:u},h=c.map((t=>{var i;if(!0!==(null===(i=t.additional_types)||void 0===i?void 0:i.collection))return{name:(0,m.R)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(l.Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(s.$K);return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,d.LH)({baseUrl:(0,g.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await U({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:e.redirect_uris,capabilities:R(e.capabilities),developer_name:e.info.developer_name,domain:p,url_matching_and_placeholder:h,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:null==o?void 0:o.oauth_authorize_url,external_oauth_token_url:null==o?void 0:o.oauth_token_url,external_client_id:null==o?void 0:o.client_id,external_client_secret:null==o?void 0:o.client_secret,external_oauth_scopes:null==o?void 0:o.scopes,external_deletion_url:null==o?void 0:o.deletion_url}}if("update-first-party-external-integration"===i.type){var u;const e=i.startingRecord.value,t=e.info.original_url_patterns||[],r={developmentDomain:(null===(u=e.info.development_url_domains)||void 0===u?void 0:u[0])||"",verifiedDomains:e.info.original_url_domains??[],domainVerifications:[]},n=t.map((t=>{var i;if(!0!==(null===(i=t.additional_types)||void 0===i?void 0:i.collection))return{name:(0,m.R)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(l.Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(s.$K);return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:void 0,name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:void 0,redirect_uris:e.redirect_uris,capabilities:R(e.capabilities),developer_name:e.info.developer_name,domain:r,url_matching_and_placeholder:n,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}(0,s.t1)(i)}function E(e){return"create-bot"===e||"create-guest-integration"===e||"create-third-party-external-integration"===e}function N(e){return"create-guest-integration"===e?"internal":"create-third-party-external-integration"===e?"public":void 0}function z(e){return"create-third-party-external-integration"===e}function O(e){return`developer-integration-section-header-${e}`}function W(e,t){return!("secrets"===e)&&!("distribution"===e&&"update-bot"===t)&&!("linkPreview"===e&&"update-guest-integration"===t)}},43348:(e,t,i)=>{i.d(t,{R:()=>n,X:()=>a});var r=i(77657);i(95477);function n(e){const{patternName:t,integrationId:i}=e;if((0,r.BP)({integrationId:i,env:"production"}))return t;{const e=t.indexOf("_");return e<0?"entity_item":t.slice(e+1)}}function a(e){const{patternName:t,integrationId:i}=e;return(0,r.BP)({integrationId:i,env:"production"})?t:`${i}_${t}`}},91996:(e,t,i)=>{i.d(t,{FR:()=>S,Jv:()=>v,tV:()=>M});i(57658);var r=i(33728),n=i(20270),a=i(74181),o=i(89602),s=i(97880),l=i(44876),d=i(64002),u=i(63143),c=i(36054),p=i(5366),g=i(95477),m=i(67669),h=i(18514);const f=(0,p.defineMessages)({capabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent2",defaultMessage:"At least one capability must be requested."},regexPatternErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.regex.error",defaultMessage:"{value} regex pattern is invalid."},regexAttributesErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.attributes.error",defaultMessage:"{value} attributes JSON does not match request schema."},sampleUrlMissingDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlMissingDomain.error",defaultMessage:'URL "{value}" is missing a domain.'},sampleUrlDoesNotMatchProvidedDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedDomain.error",defaultMessage:'URL "{value}" does not match a provided domain.'},sampleUrlDoesNotMatchProvidedRegexes:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedRegexes.error",defaultMessage:'URL "{value}" does not match a provided regex pattern.'},templateUrlIsNotNotionPage:{id:"developerIntegrationFormValidator.templateUrl.templateUrlIsNotNotionPage.error",defaultMessage:"URL must direct to a public Notion template."},templateUrlCannotBeDuplicated:{id:"developerIntegrationFormValidator.templateUrl.templateUrlCannotBeDuplicated.error",defaultMessage:"Linked template must be public."}});function v(e){let t;try{t=JSON.parse(e)}catch(i){t=void 0}return t}function y(e){const{value:t}=e,i=d.yn(t);if(!i)return{validated:!1};return d.Qc(i).hostname?{validated:!0}:{validated:!1}}function b(e){try{return new RegExp(e),{validated:!0}}catch{return{validated:!1}}}function x(e){if((0,c.Gu)(o.$1,e))return{validated:!1};for(const t of e){const e=(0,l.GY)(t);if(!(0,n.nj)(e))return{validated:!1}}return{validated:!0}}function _(e){const{domains:t,regex:i,urls:r}=e;if(0===r.length)return[];const n=[];for(const a of r){const e=(0,l.XR)({url:a,domains:t,regex:new RegExp(i)});"invalid_url"===e.type?n.push({descriptor:f.sampleUrlMissingDomain,value:a}):"url_does_not_match_domain"===e.type?n.push({descriptor:f.sampleUrlDoesNotMatchProvidedDomain,value:a}):"url_does_not_match_regex"===e.type?n.push({descriptor:f.sampleUrlDoesNotMatchProvidedRegexes,value:a}):"success"===e.type||(0,s.t1)(e)}return n}function S(e){const t=d.yn(e);if(!t||!e)return;const i=t[t.length-1],r=e[e.length-1];return"/"===i&&"/"!==r?t.slice(0,t.length-1):t}const w={insert_comment:!0,insert_content:!0,read_comment:!0,read_content:!0,update_content:!0,link_preview:!0,synced_database:!0,read_user_with_email:!1,read_user_without_email:!1},C=(0,s.Yd)(w).filter((e=>w[e]));const M={email:function(e){const{value:t}=e,i=r.H3(t);return i?{validated:r.oH(i).valueOf()}:{validated:!1}},redirect_uris:function(e){const{value:t}=e;return{validated:t.every((e=>(0,a.mb)(g.default.domainBaseUrl,e)))}},website_url:y,privacy_policy_url:y,terms_of_use_url:y,template_url:function(e){const{value:t,templateStore:i}=e;return d.yn(t)?(0,h.K2)(t)?i&&(0,m.Oc)(i)?{validated:!0}:{validated:!1,errorMessages:[{descriptor:f.templateUrlCannotBeDuplicated}]}:{validated:!1,errorMessages:[{descriptor:f.templateUrlIsNotNotionPage}]}:{validated:!1}},capabilities:function(e){const{value:t}=e;return C.some((e=>t[e]))?{validated:!0}:{validated:!1,errorMessages:[{descriptor:f.capabilityErrorMessage}]}},unfurl_url:y,url_matching_and_placeholder:function(e){const{value:t,formData:i}=e,r=[];for(const o of t){if(b(o.regex).validated){var n;const e=_({domains:(a=null===(n=i.domain)||void 0===n?void 0:n.value,a?(0,u.jj)([...a.developmentDomain&&[a.developmentDomain],...a.domainVerifications.map((e=>{let{domain:t}=e;return t})),...a.verifiedDomains]):[]),regex:o.regex,urls:o.sampleUrls});r.push(...e)}else r.push({descriptor:f.regexPatternErrorMessage,value:o.name});x(o.attributes).validated||r.push({descriptor:f.regexAttributesErrorMessage,value:o.name})}var a;return r.length>0?{validated:!1,errorMessages:r.map((e=>{let{descriptor:t,value:i}=e;return{descriptor:t,values:{value:i}}}))}:{validated:!0}},external_oauth_authorize_url:y,external_oauth_token_url:y,external_deletion_url:y}},65270:(e,t,i)=>{i.d(t,{Az:()=>v,C:()=>f,Hx:()=>j,P4:()=>x,SV:()=>S,TG:()=>m,VH:()=>_,VR:()=>M,e_:()=>b,nZ:()=>y,rn:()=>h});i(57658);var r=i(26263),n=i(41432),a=i(20270),o=i(4615),s=i(21202),l=i(19889),d=i(70203),u=i(97880),c=i(44876),p=i(63143),g=i(35661);function m(e){return(0,p.jj)(e.flatMap((e=>{if("relation"===e.type)return e.relation.uri})).filter(u.$K))}function h(e){const{environment:t,integration:i,rootUrl:u,rootAttributes:p,relatedUrisToAttributes:m}=e,h=(0,o.ZP)(),f=t.currentUser.id,v=new r.Z({name:"developerIntegrationLabHelpers.getBlockStores"}),y=[],b={};for(const[r,n]of Object.entries(m)){const e=(0,o.ZP)();y.push({id:e,uri:r,attributes:n}),b[r]=e}const x=[{id:"rootInstanceId",original_url:u,attributes:p,related_external_object_uris_to_instance_ids:b},...y].map((e=>{const t=[];for(const i of e.attributes){const e=(0,c.GY)(i);(0,a.nj)(e)&&t.push(e)}return{...e,attributes:t}}));if("success"!==(0,c.ny)({url:u,integrations:[i],currentSpaceId:h}).type)return{error:"Sample URL does not match provided integration regex."};const _={table:s.iU,id:(0,o.ZP)(),spaceId:h};let S;for(const r of x){const e={table:s.iU,id:r.id,spaceId:h},t={...r,domain:"test"},i={id:r.id,type:n.Ti.externalObjectInstance,version:0,created_at:0,created_by_table:l.KJ,created_by_id:(0,o.ZP)(),last_edited_time:0,last_edited_by_table:l.KJ,last_edited_by_id:(0,o.ZP)(),parent_table:s.iU,parent_id:(0,o.ZP)(),space_id:h,alive:!0,domain:"",format:t};if(v.setRecord({pointer:e,userId:f},{role:"editor",value:i}),r===x[0]){const r={...i,format:{...t,attributes:void 0}};v.setRecord({pointer:_,userId:f},{role:"editor",value:r}),S=e}}if(!S)return{error:"Root external object was not defined."};const w=new g.G(t,_,{inMemoryRecordCache:v}),C=new g.G(t,S,{inMemoryRecordCache:v}),M={table:s.iU,id:(0,o.ZP)(),spaceId:h},j=new g.G(t,M,{inMemoryRecordCache:v}),I={id:M.id,type:"text",version:0,space_id:h,parent_id:(0,o.ZP)(),parent_table:s.iU,alive:!0,properties:{title:[(0,d.YCD)((0,d.x36)(_.id))]}};v.setRecord({pointer:M,userId:f},{role:"editor",value:I});const k={table:s.iU,id:(0,o.ZP)(),spaceId:h},F=new g.G(t,k,{inMemoryRecordCache:v}),Z={id:k.id,type:"text",version:0,space_id:h,parent_id:(0,o.ZP)(),parent_table:s.iU,alive:!0,properties:{title:[(0,d.YCD)((0,d.x36)(x[0].id))]}};return v.setRecord({pointer:k,userId:f},{role:"editor",value:Z}),{emptyInstanceBlockStore:w,previewBlockStore:C,emptyInlineBlockStore:j,inlineBlockStore:F}}const f=(0,o.ZP)(),v="https://acme.com/items/23487",y="acme.com",b="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",x=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Acme Item #$<itemNo>",section:"title"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#$<itemNo>",section:"identifier"}}},{id:"site",name:"Site",type:"inline",inline:{plain_text:{value:"$<site>",section:"secondary"}}}],_={name:"item",regex:b,attributes:x,sampleUrls:[v]},S=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Feature Request: Link Previews",section:"title"}}},{id:"state",name:"State",type:"relation",relation:{uri:"acme:item_state/open",mention:{section:"primary"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#23487",section:"identifier"}}},{id:"itemIcon",name:"Item Icon",type:"inline",inline:{color:{value:{r:247,g:247,b:42},section:"entity"}}},{id:"user",name:"User",type:"relation",relation:{uri:"https://acme.com/fig-ment",extension:[{id:"title",section:"secondary"},{id:"avatar_url",section:"avatar"}]}},{id:"description",name:"Description",type:"inline",inline:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",section:"body"}}},{id:"updated_at",name:"Updated At",type:"inline",inline:{datetime:{value:"2022-01-11T19:53:18.829Z",section:"secondary"}}},{id:"label",name:"Label",type:"inline",inline:{enum:{value:"🔨 Ready to Build",color:{r:100,g:100,b:100},section:"primary"}}}],w={uri:"https://acme.com/fig-ment",attributes:[{id:"title",name:"User Name",type:"inline",inline:{title:{value:"fig"}}},{id:"avatar_url",name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},C={uri:"acme:item_state/open",attributes:[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Open",section:"title"}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:"/images/external_integrations/acme-icon.png",image:{section:"avatar"}}},{id:"color",name:"Color",type:"inline",inline:{color:{value:{r:235,g:64,b:52},section:"background"}}}]};function M(){const e=[w,C],t=m(S),i={};for(const r of t){const t=e.find((e=>e.uri===r));t&&(i[r]=t.attributes)}return i}function j(e){const{domain:t,regex:i,currentIntegration:r}=e,n={...r.info,original_url_domains:[t],original_url_patterns:[{name:"acme-issue",regex:i,attributes:e.attributes.map((e=>{const t=(0,c.GY)(e);if((0,a.nj)(t))return t})).filter(u.$K)}]};return{...r,info:n}}},22230:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(49085),n=i(77657),a=i(74181),o=i(77420),s=i(9844),l=i(97880),d=(i(95477),i(52507));class u extends r.default{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"}}updateRecordTypeOnSwitch(e){if("update-bot"===this.state.type){if("public"!==e)return;this.setState({type:"create-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("create-guest-integration"===this.state.type){if("internal"!==e)return;this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("update-guest-integration"===this.state.type){if("unfurling"!==e)return;this.setState({type:"create-third-party-external-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,startingAuthRecord:void 0,status:"unpublished"})}else if("create-third-party-external-integration"===this.state.type){if("public"!==e)return;this.setState({type:"update-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else"create-bot"===this.state.type||"update-third-party-external-integration"===this.state.type||"update-first-party-external-integration"===this.state.type||(0,l.t1)(this.state)}initializeNewForm(e,t,i){if(e.table===o.cZ)this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:"internal",status:"unpublished"});else if(e.table===s.K2)if((0,a.VM)(e.value)||(0,a.t9)(e.value))if((0,n.BP)({integrationId:e.value.id,env:"production"}))this.setState({type:"update-first-party-external-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"unfurling",status:e.value.status});else{if(!t)return;const r=i.map((e=>({type:e.verified_at?"verified":"unverified",id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,alive:e.alive})));this.setState({type:"update-third-party-external-integration",startingRecord:{table:e.table,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"unfurling",status:e.value.status,domainVerifications:r,domainVerificationStore:"update-third-party-external-integration"===this.state.type?this.state.domainVerificationStore:new d.ZP})}else"guest"===e.value.type&&this.setState({type:"update-guest-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"public",status:e.value.status});else(0,l.t1)(e)}}const c=u},38381:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(49085);class n extends r.default{getInitialState(){return{open:!1}}}const a=new n},52507:(e,t,i)=>{i.d(t,{AS:()=>l,Hs:()=>d,ZP:()=>u});var r=i(49085),n=i(59753),a=i(44312),o=i(97880);class s extends r.default{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const l=(0,o.AO)((e=>"invalid"===e.type||"unverified"===e.type?{true:e}:{false:e}));function d(e){const t=n.kk.fromValue(a.Jd,e);return{type:t.verified_at?"verified":"unverified",id:t.id,domain:t.domain,verificationCode:t.verification_code,createdAt:t.created_at,expiresAt:t.expires_at,invalidatedAt:t.getInfo().invalidated_at}}const u=s},40745:(e,t,i)=>{i.d(t,{M:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("arrowDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},7189:(e,t,i)=>{i.d(t,{K:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},13148:(e,t,i)=>{i.d(t,{U:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("close",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},25278:(e,t,i)=>{i.d(t,{H:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("eyes",{viewBox:"0 0 72 72",svg:(0,n.jsx)("path",{d:"M17.0312 64.4375C26.25 64.4375 33.5625 52.9688 33.5625 36.4375C33.5625 19.9062 26.25 8.46875 17.0312 8.46875C7.8125 8.46875 0.5 19.9062 0.5 36.4375C0.5 52.9688 7.8125 64.4375 17.0312 64.4375ZM54.9688 64.4375C64.1875 64.4375 71.5 52.9688 71.5 36.4375C71.5 19.9062 64.1875 8.46875 54.9688 8.46875C45.75 8.46875 38.4375 19.9062 38.4375 36.4375C38.4375 52.9688 45.75 64.4375 54.9688 64.4375ZM10.0625 47.1875C15.125 47.1875 18.4688 43.6562 18.4688 38.3438C18.4688 33.0938 15.125 29.5625 10.0625 29.5625C7.6875 29.5625 5.71875 30.3125 4.25 31.6875C5.375 19.9375 10.6875 11.9375 17.0312 11.9062C24.25 11.875 30.125 22.0312 30.125 36.4375C30.125 50.7812 24.25 60.9688 17.0312 61C11.5312 61.0312 6.78125 54.9688 4.90625 45.5938C6.28125 46.625 8.03125 47.1875 10.0625 47.1875ZM47.9688 47.1875C53 47.1875 56.4062 43.6562 56.4062 38.3438C56.4062 33.0938 53 29.5625 47.9688 29.5625C45.5938 29.5625 43.5938 30.3438 42.1562 31.6875C43.2812 19.9375 48.5938 11.9375 54.9688 11.9375C62.1562 11.9062 68 22.0938 68 36.4375C68 50.7812 62.1562 60.9688 54.9688 60.9688C49.4375 61 44.6875 54.9375 42.7812 45.5938C44.1562 46.5938 45.9375 47.1875 47.9688 47.1875ZM45.5312 37.4062C44.4375 37.25 43.75 35.9688 44.0312 34.6562C44.3125 33.3125 45.3125 32.3438 46.375 32.5312C47.4688 32.75 48.0938 34.0312 47.8438 35.3125C47.5938 36.6562 46.5938 37.5938 45.5312 37.4062ZM7.625 37.4062C6.53125 37.25 5.84375 35.9688 6.09375 34.6562C6.375 33.3125 7.40625 32.3438 8.4375 32.5312C9.5625 32.7812 10.1875 34.0312 9.9375 35.3125C9.6875 36.6562 8.65625 37.5938 7.625 37.4062Z"})})},40462:(e,t,i)=>{i.d(t,{o:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("globe2",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},82356:(e,t,i)=>{i.d(t,{l:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("import",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},16184:(e,t,i)=>{i.d(t,{Q:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},22686:(e,t,i)=>{i.d(t,{f:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("person",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,i)=>{i.d(t,{X:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,n.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,n.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},70663:(e,t,i)=>{i.d(t,{h:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("replace",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})})},45137:(e,t,i)=>{i.d(t,{o:()=>a});i(67294);var r=i(45238),n=i(85893);const a=(0,r.I)("speechBubbleThin",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.73926 15.6797C5.12207 15.6797 5.40918 15.4951 5.87402 15.085L8.21875 13.0068H12.3545C14.4121 13.0068 15.5674 11.8311 15.5674 9.80078V4.49609C15.5674 2.46582 14.4121 1.29004 12.3545 1.29004H3.63867C1.58105 1.29004 0.425781 2.46582 0.425781 4.49609V9.80078C0.425781 11.8311 1.6084 13.0068 3.59082 13.0068H3.87109V14.6953C3.87109 15.3037 4.19238 15.6797 4.73926 15.6797ZM5.07422 14.1758V12.2275C5.07422 11.8242 4.90332 11.667 4.51367 11.667H3.67285C2.38086 11.667 1.76562 11.0176 1.76562 9.75977V4.53711C1.76562 3.2793 2.38086 2.62988 3.67285 2.62988H12.3135C13.6055 2.62988 14.2275 3.2793 14.2275 4.53711V9.75977C14.2275 11.0176 13.6055 11.667 12.3135 11.667H8.14355C7.7334 11.667 7.52832 11.7354 7.24121 12.0361L5.07422 14.1758ZM4.51367 5.35059H11.4043C11.6367 5.35059 11.8281 5.15918 11.8281 4.91992C11.8281 4.69434 11.6367 4.50293 11.4043 4.50293H4.51367C4.28125 4.50293 4.09668 4.69434 4.09668 4.91992C4.09668 5.15918 4.28125 5.35059 4.51367 5.35059ZM4.51367 7.53125H11.4043C11.6367 7.53125 11.8281 7.33301 11.8281 7.10059C11.8281 6.86816 11.6367 6.67676 11.4043 6.67676H4.51367C4.28125 6.67676 4.09668 6.86816 4.09668 7.10059C4.09668 7.33301 4.28125 7.53125 4.51367 7.53125ZM4.51367 9.70508H9.00488C9.2373 9.70508 9.42188 9.51367 9.42188 9.28125C9.42188 9.04199 9.2373 8.85742 9.00488 8.85742H4.51367C4.28125 8.85742 4.09668 9.04199 4.09668 9.28125C4.09668 9.51367 4.28125 9.70508 4.51367 9.70508Z"})})},39248:(e,t,i)=>{i.d(t,{E:()=>s});var r=i(4615),n=i(89101),a=i(64002);function o(e,t){const i=t.trim().toLowerCase(),r=(0,a.Of)(i).replace(/\./g,"-");return r?`${r}-${e}`:e}function s(e,t){if(!(0,r.e)(e))return`${n._j.integrations}/${e}`;const i=o(e,void 0===t?"":t);return`${n._j.integrations}/${i}`}},89602:(e,t,i)=>{i.d(t,{$1:()=>Z});var r=i(14710),n=i(74487);const a=n.object({required:{r:n.lte(n.gte(n.integer(),0),255),g:n.lte(n.gte(n.integer(),0),255),b:n.lte(n.gte(n.integer(),0),255)},optional:{}}),o=n.object({required:{value:n.union([n.string(),n.nonEmpty(n.array(n.string()))])},optional:{section:n.literals(r.kE.avatar,r.kE.identifier,r.kE.primary,r.kE.secondary,r.kE.body)}}),s=n.object({required:{value:n.union([n.boolean(),n.nonEmpty(n.array(n.boolean()))])},optional:{}}),l=n.object({required:{value:n.union([n.number(),n.nonEmpty(n.array(n.number()))])},optional:{}}),d=n.object({required:{value:n.union([n.string(),n.nonEmpty(n.array(n.string()))])},optional:{color:a,section:n.literals(r.kE.primary)}}),u=n.object({required:{value:n.union([n.string(),n.tuple([n.string()])])},optional:{color:a,section:n.literal(r.kE.title)}}),c=n.object({required:{value:n.union([a,n.nonEmpty(n.array(a))])},optional:{section:n.literals(r.kE.entity,r.kE.background)}}),p=n.object({required:{value:n.union([n.dateString(),n.nonEmpty(n.array(n.dateString()))])},optional:{section:n.literals(r.kE.primary,r.kE.secondary)}}),g=n.object({required:{value:n.union([n.dateString(),n.nonEmpty(n.array(n.dateString()))])},optional:{section:n.literals(r.kE.primary,r.kE.secondary)}}),m=n.object({required:{value:n.tuple([n.dateString(),n.dateString()])},optional:{section:n.literals(r.kE.primary,r.kE.secondary)}}),h=n.object({required:{value:n.union([n.dateString(),n.tuple([n.dateString()])])},optional:{section:n.literals(r.kE.primary,r.kE.secondary)}}),f=n.object({required:{value:n.union([n.dateString(),n.tuple([n.dateString()])])},optional:{section:n.literals(r.kE.primary,r.kE.secondary)}}),v=n.union([n.object({required:{plain_text:o},optional:{type:n.literal("plain_text")}}),n.object({required:{boolean:s},optional:{type:n.literal("boolean")}}),n.object({required:{number:l},optional:{type:n.literal("number")}}),n.object({required:{enum:d},optional:{type:n.literal("enum")}}),n.object({required:{title:u},optional:{type:n.literal("title")}}),n.object({required:{color:c},optional:{type:n.literal("color")}}),n.object({required:{date:p},optional:{type:n.literal("date")}}),n.object({required:{datetime:g},optional:{type:n.literal("datetime")}}),n.object({required:{datetimerange:m},optional:{type:n.literal("datetimerange")}}),n.object({required:{created_datetime:h},optional:{type:n.literal("created_datetime")}}),n.object({required:{last_edited_datetime:f},optional:{type:n.literal("last_edited_datetime")}})]),y=n.object({required:{},optional:{section:n.literal(r.kE.embed)}}),b=n.object({required:{},optional:{section:n.literal(r.kE.embed)}}),x=n.object({required:{},optional:{section:n.literal(r.kE.embed)}}),_=n.object({required:{},optional:{section:n.literal(r.kE.embed)}}),S=n.object({required:{},optional:{format:n.nullable(n.literals("icon")),section:n.literals(r.kE.avatar,r.kE.entity,r.kE.embed)}}),w=n.intersection([n.object({required:{src_url:n.union([n.string(),n.nonEmpty(n.array(n.string()))])},optional:{default_height:n.number(),default_width:n.number()}}),n.union([n.object({required:{html:y},optional:{type:n.literal("html")}}),n.object({required:{pdf:b},optional:{type:n.literal("pdf")}}),n.object({required:{audio:x},optional:{type:n.literal("audio")}}),n.object({required:{video:_},optional:{type:n.literal("video")}}),n.object({required:{image:S},optional:{type:n.literal("image")}})])]),C=n.union([n.string(),n.nonEmpty(n.array(n.string()))]),M=n.object({required:{uri:C},optional:{type:n.literal("mention"),mention:n.object({required:{},optional:{section:n.literal(r.kE.primary)}}),extension:n.isNull()}}),j=n.object({required:{uri:C},optional:{type:n.literal("extension"),extension:n.nonEmpty(n.array(n.object({required:{id:n.string()},optional:{section:n.literals(r.kE.avatar,r.kE.embed,r.kE.primary,r.kE.secondary)}}))),mention:n.isNull()}}),I=n.union([M,j]),k=n.object({required:{uri:C},optional:{}}),F=n.intersection([n.object({required:{id:n.string(),name:n.string()},optional:{}}),n.union([n.object({required:{inline:v},optional:{type:n.literal("inline")}}),n.object({required:{embed:w},optional:{type:n.literal("embed")}}),n.object({required:{relation:I},optional:{type:n.literal("relation")}}),n.object({required:{people:k},optional:{type:n.literal("people")}})])]),Z=n.array(F)}}]);