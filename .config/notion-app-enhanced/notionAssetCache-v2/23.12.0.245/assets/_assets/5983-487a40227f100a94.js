"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5983],{32984:(e,t,o)=>{o.d(t,{vV:()=>se,QF:()=>ie,li:()=>me});var r=o(67294),n=o(480),i=o(86628),a=o(24405),s=o(3865),l=o(48777),c=o(23290),d=o(76218),p=o(72126),u=o(5366),m=o(6287),h=o(97880),g=o(9953),y=o(39699),S=o(52275),v=o(31945),x=o(78140),C=o(32163),f=o(72495),b=o(40190),w=o(61766),k=o(53437),M=o(72865),T=o(149),j=o(87279),P=o(77907),V=o(40721),_=o(74648),F=o(85893);const Z=(0,P.withDependency)(P.deps.formulas,((e,t)=>(0,F.jsx)(B,{...t,formulas:e})));function B(e){window.__c={n:"FormulaInputMenu"};const{value:t,onChange:o,onClose:a,disabled:s,contextStore:l,formulas:c}=e,d=(0,n.Fy)(),p=(0,r.useCallback)((()=>{o({type:"simple",value:null==t?void 0:t.value}),a()}),[o,a,null==t?void 0:t.value]),u=(0,r.useCallback)((e=>{void 0!==e&&e[0][0].length?o({type:"formula",value:e}):o(void 0),a()}),[o,a]),m=(0,i.VK)((()=>l.context.parentRecordStore.getSpaceId()),[l.context.parentRecordStore]),h=(0,i.Kw)(l.compilationResultStore),g=(0,r.useMemo)((()=>c.createFormulaDataRequestHandler(l.context.parentRecordStore.getRecordModel,l.context.parentRecordStore.loadRecordModel)),[l.context.parentRecordStore.getRecordModel,l.context.parentRecordStore.loadRecordModel,c]),y=(0,i.VK)((()=>{if(T.x.isFail(h))return;return{valueTypes:h.value.valueTypes,handleDataRequest:g}}),[h,g],{useDeepEqual:!0});let S;return S=d.isMobile?{menuType:j.og.Modal,right:(0,F.jsx)(V.DoneMenuText,{}),onClickRight:parent.close}:{menuType:j.og.Popup,maxHeight:"50vh",width:600,height:320,disableHeaderBorder:!0},m&&y?(0,F.jsx)(x.Z,{...S,children:(0,F.jsx)(_.Z,{formulas:c,initialCode:null==t?void 0:t.value,typecheckContext:y,handleClose:u,handleBack:p,parentSpaceId:m,disabled:s,focus:!0,evaluationErrors:[],getRecordModel:l.context.parentRecordStore.getRecordModel})}):null}var A=o(70203),I=o(17809),R=o(65187);function L(e){window.__c={n:"NumberInput"};const{value:t,disabled:o,buttonPopupStore:n,onChange:i}=e,s=(0,a.yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:3,padding:4}})),[]),l=(0,r.useCallback)((e=>{"="===(0,A.QaF)(e)&&(0,I.NY)()?(i({type:"formula",value:void 0}),n.setState({open:!0})):i({type:"simple",value:e})}),[i,n]),{store:c}=(0,I.Cl)({initialValue:null==t?void 0:t.value,onChange:l});return(0,F.jsx)("div",{style:s.wrap,children:(0,F.jsx)(R.Z,{disabled:o,store:c,pasteBehavior:"inline",disableSlashCommands:!0,disableEmojiCommands:!0,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableEmbedMenu:!0,disableMobileActionBar:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableEquationInteraction:!0})})}var D=o(53498),K=o(18466),H=o(13991),O=o(32426),N=o(82990),W=o(60682),z=o(14976),E=o(75311),Q=o(30387);function G(e){window.__c={n:"ValuePickerValue"};const{value:t,type:o,currentSimpleFormulaValueTokens:r,contextStore:n,context:s}=e,{collectionStore:l,property:c}=s,d=(0,a.yK)((()=>({tokenWrap:{display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",marginTop:6}})),[]),p=(0,E.M)(l,c),u=(0,i.VK)((()=>(0,I.NY)()),[]);if("formula"===(null==t?void 0:t.type)&&t.value&&u)return(0,F.jsx)(U,{...e});if("text"===o.type||"number"===o.type)return null;if("date"===o.type||"select"===o.type||"checkbox"===o.type){const e=r[0];return void 0===e?(0,F.jsx)(q,{}):(0,F.jsx)("div",{style:d.tokenWrap,children:(0,F.jsx)(D.K,{token:e,contextStore:n,disabled:!0,currentSimpleFormulaValueTokens:r,context:s})})}if("person_array"===o.type||"block_array"===o.type||"select_array"===o.type)return 0===r.length?(0,F.jsx)(q,{}):(0,F.jsx)("div",{style:d.tokenWrap,children:p(r,"first").map(((e,t)=>(0,F.jsx)(D.K,{token:e,contextStore:n,disabled:!0,currentSimpleFormulaValueTokens:r,context:s},t)))});(0,h.t1)(o)}function q(){window.__c={n:"ValueEmptyPlaceholder"};const e=(0,a.yK)((e=>({placeholderText:{color:e.lightTextColor}})),[]);return(0,F.jsx)("div",{style:e.placeholderText,children:(0,F.jsx)(u.FormattedMessage,{...Q.s.personSelect})})}function U(e){window.__c={n:"MinimalFormulaText"};const{value:t,contextStore:o}=e,s=(0,n.O7)(),l=(0,a.Fg)(),c=(0,a.yK)((e=>({wrap:{display:"flex",alignItems:"center",pointerEvents:"none",fontFamily:N.Z.getCompositeFontFamily(H.SP).githubMono,fontSize:12,flexGrow:1,...N.Z.textOverflowStyle},icon:{width:14,fill:e.mediumIconColor,marginRight:6}})),[]),d=(0,W.kw)(),p=(0,i.VK)((()=>s.KatexStore.getKatex()),[s]),u=(0,i.VK)((()=>o.context.parentRecordStore.getSpaceId()),[o.context.parentRecordStore]),m=(0,i.Kw)(o.compilationResultStore),h=T.x.isSuccess(m)?m.value.valueTypes:void 0,g=(0,r.useMemo)((()=>K.Z.withListenerIgnored((()=>(0,z.IY)({environment:s,textValue:null!=t&&t.value&&u?{value:t.value,spaceId:u}:void 0,parentStore:o.context.parentRecordStore,disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!0,theme:l,emojiType:d,katex:p,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:h||[]})))),[t,u,s,o.context.parentRecordStore,d,p,l,h]);return(0,F.jsxs)("div",{style:c.wrap,children:[(0,O.D)(c.icon),g]})}function Y(e){window.__c={n:"SimpleFormulaValuePicker"};const{type:t,value:o,disabled:r}=e,s=(0,n.Fy)(),l=!o||"simple"===o.type,c=(0,i.VK)((()=>(0,d.A6)(null==o?void 0:o.value)),[o]),p=(0,a.yK)((e=>({button:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow}})),[]),u=(0,i.qz)(void 0,w.Z);return"number"===t.type&&l?(0,F.jsx)(L,{...e,buttonPopupStore:u}):"text"===t.type?(0,F.jsx)(M.D,{...e}):(0,F.jsx)(v.ZP,{popupType:s.isMobile?k.kQ.SlideUp:k.kQ.Popup,alignmentToOrigin:v.vR.End,placementToOrigin:v.pO.Bottom,originGap:0,buttonPopupStore:u,disabled:r,renderOrigin:t=>(0,F.jsx)(b.S,{disabled:r,variant:"gray",...t,style:p.button,children:(0,F.jsx)(G,{...e,currentSimpleFormulaValueTokens:c})}),render:t=>l?(0,F.jsx)(D.a,{...e,onClose:t.close,currentSimpleFormulaValueTokens:c}):(0,F.jsx)(Z,{...e,onClose:t.close})})}var $=o(28267),X=o(73266),J=o(95193),ee=o(35294),te=o(39068),oe=o(61053);function re(e){window.__c={n:"AutomationPropertyPicker"};const{availablePropertyIds:t,currentValue:o,collectionStore:s,onChange:l,onRemove:c,disabled:d,alreadyHaveProperties:p}=e,m=(0,n.O7)(),h=(0,a.Fg)(),{device:g}=m,y=(0,i.VK)((()=>s.getSchema()??{}),[s]),S=(0,i.VK)((()=>s.getFormat()??{}),[s]),C=(0,i.VK)((()=>o?s.getSchema()[o]:void 0),[o,s]),f=(0,a.yK)((e=>({propertyIcon:{fill:e.lightTextColor,height:"auto",marginRight:4,width:16}})),[]),w=(0,r.useCallback)((()=>t),[t]),k=(0,ee.d)();return(0,F.jsx)(v.ZP,{popupType:k,alignmentToOrigin:v.vR.End,placementToOrigin:v.pO.Bottom,originGap:0,disabled:d,renderOrigin:e=>(0,F.jsx)(b.S,{...e,disabled:d,icon:C?e=>(0,F.jsx)(te.ZP,{icon:void 0,type:C.type,size:16,theme:h,style:{...e,...f.propertyIcon}}):void 0,variant:p||C?C?"default":"gray":"blue",children:C?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("div",{style:{fontWeight:N.Z.fontWeight.medium,...N.Z.textOverflowStyle},children:C.name})}):p?(0,F.jsx)(u.FormattedMessage,{id:"automations.propertyPicker.buttonPlaceholderAlreadyHaveProperties",defaultMessage:"Edit another property"}):(0,F.jsx)(u.FormattedMessage,{id:"automations.propertyPicker.buttonPlaceholder",defaultMessage:"Edit a property"})}),render:e=>{const t=(0,J.U)({device:g,width:280,paddingTop:4});return(0,F.jsx)(x.Z,{...t,children:(0,F.jsx)(oe.Z,{schema:y,format:S,showRemoveOption:Boolean(c),currentProperty:o,getProperties:w,onAccept:t=>{t&&t!==o?l(t):void 0===t&&(null==c||c(o)),e.close()}})})}})}const ne=(0,u.defineMessages)({replaceActionLabel:{id:"automations.AutomationActionSetPropertiesSection.replaceAction.label",defaultMessage:"Replace with"},appendActionLabel:{id:"automations.AutomationActionSetPropertiesSection.appendAction.label",defaultMessage:"Add"},removeActionLabel:{id:"automations.AutomationActionSetPropertiesSection.removeAction.label",defaultMessage:"Remove"},titlePlaceholder:{id:"automations.AutomationActionSetPropertiesSection.titlePlaceholder",defaultMessage:"Untitled"}});function ie(e){window.__c={n:"ButtonAutomationActionSetPropertiesSection"};const{contextStore:t,actionStore:o,collectionStore:a,disabled:s,showSetPropertyActions:l}=e,c=(0,n.O7)(),d=(0,i.VK)((()=>o.id),[o.id]),p=(0,i.VK)((()=>{var e;return(null===(e=o.getConfig())||void 0===e?void 0:e.values)??{}}),[o]),u=(0,i.VK)((()=>{var e;return(null===(e=o.getConfig())||void 0===e?void 0:e.properties)??[]}),[o]),m=(0,r.useMemo)((()=>({properties:u,values:p})),[u,p]),h=(0,r.useCallback)((e=>{const t=u.concat([e]),r={...p,[e]:void 0};y.createAndCommit({userAction:"AutomationActionSetPropertiesSection.propertiesChange",environment:c,perform:e=>{ae({configStore:o.getConfigStore(),properties:t,transaction:e,values:r})}})}),[c,u,p,o]),g=(0,r.useCallback)(((e,t)=>{const r=u.indexOf(e);if(-1===r)return;const n=u.slice(0);n[r]=t;const i={...p,[t]:void 0};y.createAndCommit({userAction:"AutomationActionSetPropertiesSection.setProperties",environment:c,perform:e=>{ae({configStore:o.getConfigStore(),properties:n,transaction:e,values:i})}})}),[c,u,p,o]),S=(0,r.useCallback)((e=>{const t=u.filter((t=>t!==e)),r={...p,[e]:void 0};y.createAndCommit({userAction:"AutomationActionSetPropertiesSection.removeProperty",environment:c,perform:e=>{ae({configStore:o.getConfigStore(),properties:t,transaction:e,values:r})}})}),[c,u,p,o]),v=(0,r.useCallback)(((e,t)=>{const r={...p,[e]:t};y.createAndCommit({userAction:"AutomationActionSetPropertiesSection.handleValueChange",environment:c,perform:e=>{ae({configStore:o.getConfigStore(),properties:u,transaction:e,values:r})}})}),[c,u,p,o]);return(0,F.jsx)(se,{contextStore:t,actionId:d,config:m,onPropertyAdd:h,onPropertyChange:g,onPropertyRemove:S,onPropertyValueChange:v,collectionStore:a,showSetPropertyActions:l,disabled:s})}function ae(e){const{configStore:t,properties:o,transaction:r,values:n}=e;g.sW({store:t,data:{properties:o,values:n},transaction:r})}function se(e){window.__c={n:"AutomationActionSetPropertiesSection"};const{contextStore:t,actionId:o,config:r,collectionStore:n,onPropertyAdd:l,onPropertyChange:c,onPropertyRemove:d,onPropertyValueChange:p,disabled:u,showSetPropertyActions:m}=e,h=(0,a.yK)((e=>({addPropertyValuePlaceholder:{color:e.mediumTextColor,flexGrow:1,textAlign:"right"},addPropertyRow:{display:"flex",alignItems:"center"}})),[]),g=(0,i.VK)((()=>(0,s.cO)({collectionFormat:n.getFormat(),collectionSchema:n.getSchema(),sort:!1,sourcePropertyIds:r.properties})),[n,r.properties]),y=(0,i.VK)((()=>(0,s.cO)({collectionFormat:n.getFormat(),collectionSchema:n.getSchema(),filter:e=>{let[t]=e;return!g.includes(t)}})),[n,g]),S=0===y.length;return(0,F.jsxs)(F.Fragment,{children:[g.length>0&&(0,F.jsx)(le,{availablePropertyIds:y,contextStore:t,actionId:o,config:{properties:g,values:r.values},collectionStore:n,onPropertyChange:c,onPropertyRemove:d,onPropertyValueChange:p,showSetPropertyActions:m,disabled:u}),!u&&!S&&(0,F.jsx)("div",{style:h.addPropertyRow,children:(0,F.jsx)(re,{availablePropertyIds:y,currentValue:void 0,collectionStore:n,contextStore:t,onChange:l,disabled:u,alreadyHaveProperties:g.length>0})})]})}function le(e){window.__c={n:"PropertySectionList"};const{availablePropertyIds:t,contextStore:o,actionId:n,config:i,collectionStore:s,onPropertyChange:l,onPropertyRemove:c,onPropertyValueChange:d,showSetPropertyActions:p,disabled:u}=e,m=(0,r.useRef)(null),h=(0,$.X)(m),g=(0,X.a)(h),y=(0,a.yK)((()=>({wrap:{alignItems:"center",columnGap:4,display:"grid",gridTemplateColumns:g?"100%":"140px 1fr",rowGap:g?4:8},propertyValue:{...g?{fontSize:14,marginBlockEnd:16}:{}},lastPropertyValue:{...g?{fontSize:14,marginBlockEnd:0}:{}}})),[g]);return(0,F.jsx)("div",{style:y.wrap,ref:m,children:i.properties.map(((e,r)=>{const a=r===i.properties.length-1;return(0,F.jsx)(ce,{actionId:n,availablePropertyIds:t,collectionStore:s,contextStore:o,disabled:u,onPropertyChange:l,onPropertyRemove:c,onPropertyValueChange:d,property:e,showSetPropertyActions:p,value:i.values[e],valueStyle:a?y.lastPropertyValue:y.propertyValue},e)}))})}function ce(e){window.__c={n:"PropertySection"};const{actionId:t,availablePropertyIds:o,collectionStore:n,contextStore:s,disabled:p,onPropertyChange:h,onPropertyRemove:g,onPropertyValueChange:y,property:S,showSetPropertyActions:v,value:x,valueStyle:C}=e,f={type:"collection",collectionStore:n,property:S},b=(0,u.useIntl)(),w=(0,a.yK)((e=>({propertyName:{},propertyValue:{display:"flex",gap:4,minWidth:50,...C}})),[C]),k=(0,r.useMemo)((()=>{if("title"===S)return b.formatMessage(ne.titlePlaceholder)}),[b,S]),M=(0,i.VK)((()=>{const e=n.getSchema()[S];if(e)return e}),[n,S]),T=(0,i.VK)((()=>{if(M)return(0,d.qW)({table:m.v,id:n.id,spaceId:n.getSpaceId()},S,M)}),[n,M,S]),j=(0,i.VK)((()=>null==M?void 0:M.type),[M]),P=null==x?void 0:x.value,V=(0,i.VK)((()=>(0,c.o9)(x)),[x]),_=(0,i.VK)((()=>s.context.parentRecordStore.getSpaceId()),[s.context.parentRecordStore]),Z=(0,i.VK)((()=>s.getContextValuesForAction(t)),[s,t]),B=(0,r.useCallback)((e=>{h(S,e)}),[h,S]),A=(0,r.useCallback)((()=>g(S)),[g,S]),I=(0,r.useCallback)((e=>{y(S,e)}),[y,S]),R=(0,r.useCallback)((e=>{I({action:e,value:P})}),[P,I]),L=(0,r.useCallback)((e=>{I({action:V,value:e})}),[V,I]);if(!T||!_)return null;const D=me(j);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{style:w.propertyName,children:(0,F.jsx)(re,{availablePropertyIds:o,currentValue:S,contextStore:s,collectionStore:n,onChange:B,disabled:p,onRemove:A})}),(0,F.jsxs)("div",{style:w.propertyValue,children:[v&&M&&l.Y[M.type]&&(0,F.jsx)(de,{disabled:p,onChange:R,value:V}),(0,F.jsx)(Y,{...D,type:T,value:null==x?void 0:x.value,onChange:L,disabled:p,contextStore:s,context:f,placeholder:k,disableMobileActionBar:!0,formulaTypecheckContextValues:Z,disableTemplateVariableMentions:!0})]})]})}function de(e){window.__c={n:"SetPropertyListActionDropdownButton"};const{disabled:t,onChange:o,value:r}=e,n=(0,ee.d)();return(0,F.jsx)(v.ZP,{popupType:n,alignmentToOrigin:v.vR.End,placementToOrigin:v.pO.Bottom,originGap:0,disabled:t,renderOrigin:e=>(0,F.jsx)(b.S,{disabled:t,variant:"gray",...e,children:(0,F.jsx)(ue,{action:r})}),render:e=>(0,F.jsx)(pe,{onChange:o,parent:e,value:r})})}function pe(e){window.__c={n:"SetPropertyListActionDropdownMenu"};const{value:t,onChange:o,parent:r}=e,n=(0,J.F)({width:250}),i=p.oA(c.E2.map(((e,n)=>({key:n,render:o=>(0,F.jsx)(S.Z,{...o,disabled:!1,title:(0,F.jsx)(ue,{action:e}),checkState:t===e}),action:()=>{e!==t&&o(e),r.close()}}))));return(0,F.jsx)(x.Z,{...n,children:(0,F.jsx)(C.Z,{type:C.i.Vertical,sections:[{key:0,render:e=>(0,F.jsx)(f.Z,{enableActionSheetTitle:!0,...e}),items:i}],initialFocus:0})})}function ue(e){const{action:t}=e;return"replace"===t?(0,F.jsx)(u.FormattedMessage,{...ne.replaceActionLabel}):"append"===t?(0,F.jsx)(u.FormattedMessage,{...ne.appendActionLabel}):"remove"===t?(0,F.jsx)(u.FormattedMessage,{...ne.removeActionLabel}):void(0,h.t1)(t)}function me(e){return"email"===e||"phone_number"===e||"url"===e?{disableEmojiCommands:!0,disableFormattingAndMentions:!0}:{}}},73239:(e,t,o)=>{o.d(t,{a:()=>y});var r=o(67294),n=o(86628),i=o(84619),a=o(5366),s=o(31945),l=o(76798),c=o(21396),d=o(61766),p=o(35661),u=o(35294),m=o(40190),h=o(8808),g=o(85893);function y(e){window.__c={n:"AutomationCollectionPicker"};const{actionStore:t,currentValue:o,contextStore:y,onChange:S,disabled:v,errorMessage:x,skipVariables:C}=e,f=(0,n.qz)(void 0,d.Z),b=(0,n.VK)((()=>o&&"collection"===o.type?p.NW.createChildStore(y.context.parentRecordStore,o.collection):void 0),[o,y.context.parentRecordStore]),w=(0,n.VK)((()=>{if(t&&o&&"variable"===o.type)return y.getContextValueForActionById(t.id,o.id)}),[t,o,y]),k=(0,r.useCallback)((e=>{"collection"!==e.type&&"variable"!==e.type||(S(e),f.reset())}),[S,f]),M=(0,r.useCallback)((()=>f.reset()),[f]),T=(0,u.d)(),j=(0,m.d)({errorMessage:x,hasValue:Boolean(b||w)});return(0,g.jsx)(s.ZP,{buttonPopupStore:f,popupType:T,alignmentToOrigin:s.vR.End,placementToOrigin:s.pO.Bottom,originGap:0,disabled:v,renderOrigin:e=>(0,g.jsx)(m.S,{...j,...e,disabled:v,children:b?(0,g.jsx)(l.Z,{store:b}):w?(0,g.jsx)(c.F,{format:i.l.Medium,isSingle:!0,value:w}):(0,g.jsx)(a.FormattedMessage,{id:"automations.databasePicker.buttonPlaceholder",defaultMessage:"Select database"})}),render:e=>(0,g.jsx)(h.L,{actionId:null==t?void 0:t.id,automationContextStore:y,onChange:k,onClose:M,selectedTarget:o,skipPages:!0,skipVariables:C})})}},29180:(e,t,o)=>{o.d(t,{f:()=>f});var r=o(67294),n=o(480),i=o(86628),a=o(72126),s=o(5366),l=o(21202),c=o(40071),d=o(31945),p=o(78140),u=o(32163),m=o(76798),h=o(72495),g=o(35661),y=o(64737),S=o(95193),v=o(35294),x=o(40190),C=o(85893);function f(e){window.__c={n:"AutomationCollectionTemplatePicker"};const{collectionStore:t,currentTemplateId:o,onChange:r,disabled:a,errorMessage:c}=e,u=(0,n.O7)(),{device:h}=u,f=(0,i.VK)((()=>{let e=o;if(!e&&t){const o=t.getFormat().collection_default_template;o&&"empty"!==o&&(e=o.template_page_id)}if(e&&t)return g.G.createChildStore(t,{table:l.iU,id:e,spaceId:t.getSpaceId()})}),[t,o]),w=(0,v.d)(),k=(0,x.d)({errorMessage:c,hasValue:!0}),M=(0,i.VK)((()=>(0,y.q)(t)),[t]),T=Boolean(o);return(0,C.jsx)(d.ZP,{popupType:w,alignmentToOrigin:d.vR.End,placementToOrigin:d.pO.Bottom,originGap:0,disabled:a,renderOrigin:e=>(0,C.jsx)(x.S,{...k,...e,disabled:a,style:{minWidth:50},children:f&&(T||(0,y.w)(f))?(0,C.jsx)(m.Z,{store:f}):(0,C.jsx)(s.FormattedMessage,{id:"automations.templatePicker.buttonPlaceholder",defaultMessage:"Empty"})}),render:e=>{const o=(0,S.U)({device:h,width:280});return(0,C.jsx)(p.Z,{...o,children:t&&(0,C.jsx)(b,{collectionStore:t,templatePageStores:M,parent:e,onChange:r})})}})}function b(e){window.__c={n:"AutomationCollectionTemplateMenuList"};const{collectionStore:t,templatePageStores:o,parent:l,onChange:d}=e,p=(0,n.O7)(),{device:m}=p,g=(0,i.VK)((()=>t.getDefaultTemplatePageStore()),[t]),y=o.map((e=>({key:e.id,render:o=>(0,r.createElement)(c.Z,{...o,key:e.id,isOverlay:!0,collectionStore:t,canConfigureCollection:!1,templateStore:e,isMobile:m.isMobile,locked:!0,isDefault:g===e,onCancelClick:()=>{},draggable:!1}),action:t=>{d(e.id),l.close()}}))),S={key:"empty",render:e=>(0,r.createElement)(c.Z,{...e,key:"empty",isOverlay:!0,collectionStore:t,canConfigureCollection:!1,templateStore:void 0,isMobile:m.isMobile,locked:!0,onCancelClick:()=>{},draggable:!1}),action:e=>{d(void 0),l.close()}};return(0,C.jsx)(u.Z,{type:u.i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,C.jsx)(h.Z,{...e,title:(0,C.jsx)(s.FormattedMessage,{id:"automations.templatePicker.menuHeader",defaultMessage:"Select a template"})}),items:a.oA([...y,g?void 0:S])}]})}},52105:(e,t,o)=>{o.d(t,{W:()=>S});var r=o(67294),n=o(86628),i=o(76205),a=o(5366),s=o(6758),l=o(42917),c=o(31945),d=o(8982),p=o(78140),u=o(72495),m=o(95193),h=o(35294),g=o(40190),y=o(85893);function S(e){var t;window.__c={n:"AutomationCombinatorFilterPopup"};const{contextStore:o,filter:r,onChange:n,noFiltersMessage:s,collectionStore:l,disabled:d}=e,p=(0,h.d)({tabletBehavior:"slideUp"}),u=(null==r||null===(t=r.filters)||void 0===t?void 0:t.length)||0;return(0,y.jsx)(c.ZP,{popupType:p,alignmentToOrigin:c.vR.End,placementToOrigin:c.pO.Bottom,originGap:0,disabled:d,renderOrigin:e=>(0,y.jsx)(g.S,{disabled:d,variant:"gray",...e,onClick:t=>{e.onClick(t),0===u&&n(i.TI)},children:u>0?(0,y.jsx)(a.FormattedMessage,{defaultMessage:"{ruleCount, plural, one {{ruleCount} filter} other {{ruleCount} filters}}",id:"automations.QueryCollectionAction.filterRuleCount.label",values:{ruleCount:u}}):s}),render:e=>(0,y.jsx)(v,{contextStore:o,filter:r,disabled:d,onChange:n,onClose:()=>e.close(),collectionStore:l})})}function v(e){window.__c={n:"AutomationCombinatorFilterMenu"};const{contextStore:t,filter:o,onChange:c,onClose:h,collectionStore:g}=e,S=(0,n.VK)((()=>g.getSchema()),[g]),v=(0,m.F)({minWidth:300,tabletBehavior:"actionSheet"}),x=(0,r.useCallback)(((e,t)=>{c(t)}),[c]),C=(0,r.useCallback)((()=>{c(void 0),h()}),[c,h]);return(0,y.jsxs)(p.Z,{...v,children:[(0,y.jsx)(d.D,{children:(0,y.jsx)(s.Pq,{index:0,level:0,combinatorFilter:o||i.hh,schema:S,onChange:x,collectionViewType:"table",collectionViewId:"test",parentStore:t.context.parentRecordStore})}),(0,y.jsx)(u.Z,{topBorder:!0,children:(0,y.jsx)(l.Z,{title:(0,y.jsx)(a.FormattedMessage,{defaultMessage:"Delete filter",id:"automations.AutomationCombinatorFilterPopup.deleteFilter.label"}),onClick:C})})]})}},40190:(e,t,o)=>{o.d(t,{S:()=>h,d:()=>g});var r=o(67294),n=o(480),i=o(24405),a=o(42853),s=o(54497),l=o(82990),c=o(24677),d=o(98104),p=o(89728),u=o(26388),m=o(85893);const h=r.forwardRef(((e,t)=>{window.__c={n:"AutomationDropdownButton"};const{variant:o,onClick:h,style:g,icon:y,children:S,disabled:v}=e,x=(0,n.O7)(),C=(0,i.yK)((e=>({button:{..."gray"===o&&{color:e.mediumTextColor},..."blue"===o&&{color:e.blueColor,fontWeight:500},..."error"===o&&{color:e.errorText},maxWidth:"calc(100% + 2px)",marginLeft:1,padding:"0 8px 0 5px",...g},warningIcon:{width:12,height:12,marginLeft:-6,marginLeft:6,fill:e.errorText,color:e.errorText},chevronIcon:{width:10,height:10,marginLeft:4,marginTop:2,fill:e.lightIconColor},spacer:{flexGrow:1}})),[o,g]),f=(0,r.useCallback)((e=>{d.ZH(x),c.ZH(x),null==h||h(e)}),[h,x]);return(0,m.jsx)(u.Z,{renderTooltip:()=>"error"===o?e.errorMessage:null,placement:u.Z.Placement.Bottom,disableTooltip:"error"!==o,delayThreshold:0,render:e=>(0,m.jsxs)(p.Z,{...e,style:C.button,icon:y,onClick:f,ref:t,shouldShrink:!0,disabled:v,disabledFeedback:v,children:[(0,m.jsx)("div",{style:{...l.Z.textOverflowStyle},children:S}),(0,m.jsx)("div",{style:C.spacer}),"error"===o&&(0,s.t)(C.warningIcon),(0,a.i)(C.chevronIcon)]})})}));function g(e){const{errorMessage:t,hasValue:o}=e;return(0,r.useMemo)((()=>t?{variant:"error",errorMessage:t}:o?{variant:"gray"}:{variant:"blue"}),[t,o])}},8808:(e,t,o)=>{o.d(t,{H:()=>O,L:()=>H});o(57658),o(21703);var r=o(67294),n=o(480),i=o(86628),a=o(24405),s=o(84619),l=o(23790),c=o(84116),d=o(78106),p=o(58573),u=o(59054),m=o(56666),h=o(72126),g=o(5366),y=o(4615),S=o(21202),v=o(6287),x=o(97880),C=o(8406),f=o(31299),b=o(73657),w=o(71846),k=o(52275),M=o(68894),T=o(78140),j=o(32163),P=o(11470),V=o(72495),_=o(26388),F=o(21396),Z=o(78948),B=o(87279),A=o(98742),I=o(29798),R=o(35661),L=o(95193),D=o(85893);const K=(0,g.defineMessages)({searchInputPlaceholder:{defaultMessage:"Select blocks to edit…",id:"automations.AutomationTargetPickerMenu.search.placeholder"}});function H(e){window.__c={n:"AutomationTargetPickerMenu"};const t=(0,n.O7)(),o=(0,L.F)({maxWidth:360,paddingTop:12,width:280}),i=(0,r.useMemo)((()=>(0,y.ZP)()),[]),a=(0,r.useCallback)((()=>{C.tW({environment:t,eventName:"abandoned_search",sessionId:i,source:w.S.Automation})}),[t,i]);return o.menuType===B.og.Popup&&(o.onClickOutside=a),(0,D.jsx)(T.Z,{...o,children:(0,D.jsx)(O,{...e,searchSessionId:i})})}function O(e){window.__c={n:"AutomationTargetPickerMenuChildren"};const{actionId:t,automationContextStore:o,onChange:a,onClose:m,selectedTarget:y,skipCollections:M,skipPages:T,skipVariables:B,searchSessionId:L}=e,K=(0,n.O7)(),H=(0,i.qz)(void 0,I.Z),O=(0,i.VK)((()=>{const{context:e}=o;if("button_property"===e.type)return e.collectionContextStore.collectionViewBlockStore()}),[o]),Q=(0,i.VK)((()=>{if(B)return[];const e=(0,x.$K)(t)?o.getContextValuesForAction(t):o.getAllContextValues();if(e){return Object.values(e).filter((e=>{if(!(0,l.uy)(e.type,{type:"block"}))return!1;if("event"===o.context.type&&e.kind===c.yp.ContextValue){const t=(0,d.MY)(e.id);return!("global"===t.source&&"button_page"===t.global)}return!0}))}return[]}),[B,o,t],{useDeepEqual:!0}),G=(0,r.useMemo)((()=>o.context.parentRecordStore),[o.context]),q=(0,i.VK)((()=>G.getSpaceId()),[G]),[U,Y]=(0,r.useReducer)(z,{automationVariables:[],collectionQueryLimit:5,pageQueryLimit:5,searchTerm:""});(0,r.useEffect)((()=>{if(U.searchTerm){const e=(0,p.ZP)(U.searchTerm,Q,(e=>e.kind===c.yp.ContextValue?e.name:""));Y({type:"set_variables",variables:e})}else Y({type:"set_variables",variables:Q})}),[U.searchTerm,Q]);const $=function(e){const{collectionViewBlockStore:t,limit:o,parentStore:i,searchTerm:a,skip:s}=e,l=(0,n.O7)(),[c,d]=(0,r.useReducer)(E,{error:void 0,isLoading:Boolean(s),results:void 0,total:void 0}),[p]=(0,u.r5)((async()=>{if(s)return;const e=await f.RT({collectionViewBlockStore:t,environment:l,limit:o,parentStore:i,query:a,requireEditPermissions:!0});return{results:e.results,total:e.total}}),[t,l,o,i,a,s],{debounce:f.vp});return(0,r.useEffect)((()=>{if("pending"===p.status||"idle"===p.status)d({type:"query_loadstart"});else if("resolved"===p.status){var e,t;d({results:null===(e=p.value)||void 0===e?void 0:e.results,total:null===(t=p.value)||void 0===t?void 0:t.total,type:"query_finish"})}else"rejected"===p.status?d({error:p.error,type:"query_error"}):(0,x.t1)(p)}),[p]),c}({collectionViewBlockStore:O,limit:U.collectionQueryLimit,parentStore:G,searchTerm:U.searchTerm,skip:M}),X=function(e){const{limit:t,searchTerm:o,skip:i,spaceId:a}=e,s=(0,n.O7)(),[l,c]=(0,r.useReducer)(E,{error:void 0,isLoading:Boolean(i),results:void 0,total:void 0}),[d]=(0,u.r5)((async()=>{if(i||!a)return;const e=await f.D7({boostRecentlyViewedPages:!0,environment:s,excludeTemplates:!0,limit:t,query:o,requireEditPermissions:!1,source:"automation_page_picker",spaceId:a});return{results:e.results.map((e=>e.id)),total:e.total}}),[s,t,o,i,a],{debounce:f.vp});return(0,r.useEffect)((()=>{if("pending"===d.status||"idle"===d.status)c({type:"query_loadstart"});else if("resolved"===d.status){var e,t;c({results:null===(e=d.value)||void 0===e?void 0:e.results,total:null===(t=d.value)||void 0===t?void 0:t.total,type:"query_finish"})}else"rejected"===d.status?c({error:d.error,type:"query_error"}):(0,x.t1)(d)}),[d]),l}({limit:U.pageQueryLimit,searchTerm:U.searchTerm,skip:T,spaceId:q}),J=(0,r.useCallback)((e=>{"collection"===e.type&&C.tW({environment:K,eventName:"select_search_item",queryLength:U.searchTerm.length,sessionId:L,source:w.S.Automation,totalResults:$.total}),y&&!h.Xy(y,e)?a(e):y?m():a(e)}),[K,L,U.searchTerm,$.total,y,a,m]),ee=(0,r.useCallback)((e=>{const t=e.target.value;Y({searchTerm:t,type:"set_search_term"}),H.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[H]),te=(0,r.useCallback)((()=>{Y({queryLimit:U.collectionQueryLimit+20,type:"set_collection_query_limit"})}),[U.collectionQueryLimit]),oe=(0,r.useCallback)((()=>{Y({queryLimit:U.pageQueryLimit+20,type:"set_page_query_limit"})}),[U.pageQueryLimit]),re="variable"===(null==y?void 0:y.type)?y.id:void 0,ne="collection"===(null==y?void 0:y.type)?y.collection.id:void 0,ie="page"===(null==y?void 0:y.type)?y.page.id:void 0,ae=[],se=function(e){const{automationVariables:t,onClick:o,selectedVariableId:r}=e,n=t.map((e=>{if(e.kind!==c.yp.ContextValue)throw new Error("Not implemented yet.");return{action:()=>o({id:e.id,type:"variable"}),key:e.id,render:t=>(0,D.jsx)(_.Z,{placement:_.Z.Placement.Right,render:o=>(0,D.jsx)(k.Z,{...(0,A.Z)(o,t),checkState:e.id===r,title:(0,D.jsx)("div",{style:{display:"flex"},children:(0,D.jsx)(F.F,{value:e,format:s.l.Medium,isSingle:!0,shouldShrink:!0})})}),renderTooltip:()=>e.name,textWrap:!0})}}));if(0===n.length)return;return{key:"variable_results",items:n,render:e=>(0,D.jsx)(V.Z,{...e,title:(0,D.jsx)(g.FormattedMessage,{defaultMessage:"From this automation",id:"automations.AutomationTargetPickerMenu.variablesSection.title"})})}}({automationVariables:U.automationVariables,onClick:J,selectedVariableId:re});se&&ae.push(se);const le=function(e){const{collectionQueryResult:t,onCollectionMenuItemClick:o,onShowMoreItemClick:r,parentRecordStore:n,selectedCollectionId:i}=e;if(t.isLoading)return;let a=[];if(t.error)a.push({action:r,key:"show_more_collection_results",render:e=>(0,D.jsx)(b.Z,{...e,caption:(0,D.jsx)(g.FormattedMessage,{defaultMessage:"Sorry, something went wrong while searching for databases.",id:"automations.AutomationTargetPickerMenu.errorCollections.label"}),shouldWrapCaption:!0})});else{const e=t.results??[],s=e.length;a=e.map((e=>{const t=R.NW.createChildStore(n,{table:v.v,id:e});return{action:()=>o({collection:t.getSpaceShardedPointer(),type:"collection"}),key:e,render:o=>(0,D.jsx)(P.Z,{...o,checkState:e===i,store:t})}}));const l=t.total??0,c=Math.max(0,l-s);c>0&&a.push({action:r,key:"show_more_collection_results",render:e=>(0,D.jsx)(W,{...e,showMoreCount:c})})}if(0===a.length)return;return{key:"collection_results",items:a,render:e=>(0,D.jsx)(V.Z,{...e,title:(0,D.jsx)(g.FormattedMessage,{defaultMessage:"Databases",id:"automations.AutomationTargetPickerMenu.collectionsSection.title"})})}}({collectionQueryResult:$,onCollectionMenuItemClick:J,onShowMoreItemClick:te,parentRecordStore:G,selectedCollectionId:ne});le&&ae.push(le);const ce=function(e){const{pageQueryResult:t,onPageMenuItemClick:o,onShowMoreItemClick:r,parentRecordStore:n,selectedPageId:i}=e;if(t.isLoading)return;let a=[];if(t.error)a.push({action:r,key:"show_more_collection_results",render:e=>(0,D.jsx)(b.Z,{...e,caption:(0,D.jsx)(g.FormattedMessage,{defaultMessage:"Sorry, something went wrong while searching for pages.",id:"automations.AutomationTargetPickerMenu.errorPages.label"}),shouldWrapCaption:!0})});else{const e=t.results??[],s=e.length;a=e.map((e=>{const t=R.G.createChildStore(n,{table:S.iU,id:e});return{key:e,render:o=>(0,D.jsx)(P.Z,{...o,checkState:e===i,store:t}),action:()=>o({page:t.getSpaceShardedPointer(),type:"page"})}}));const l=t.total??0,c=Math.max(0,l-s);c>0&&a.push({action:r,key:"show_more_page_results",render:e=>(0,D.jsx)(W,{...e,showMoreCount:c})})}if(0===a.length)return;return{key:"page_results",items:a,render:e=>(0,D.jsx)(V.Z,{...e,title:(0,D.jsx)(g.FormattedMessage,{defaultMessage:"Pages",id:"automations.AutomationTargetPickerMenu.pagesSection.title"})})}}({onPageMenuItemClick:J,onShowMoreItemClick:oe,pageQueryResult:X,parentRecordStore:G,selectedPageId:ie});ce&&ae.push(ce);const de=$.isLoading||X.isLoading;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(N,{onChange:ee,value:U.searchTerm}),de?(0,D.jsx)(V.Z,{children:(0,D.jsx)(Z.Z,{})}):!de&&ae.length>0?(0,D.jsx)(j.Z,{initialFocus:0,sections:ae,store:H,type:j.i.Vertical}):(0,D.jsx)(b.Z,{caption:(0,D.jsx)(g.FormattedMessage,{defaultMessage:"No results",id:"automations.AutomationTargetPickerMenu.noResults.label"})})]})}function N(e){window.__c={n:"SearchInputSection"};const{onChange:t,value:o}=e,{isMobile:r}=(0,n.Fy)(),i=(0,g.useIntl)(),s=(0,a.yK)((()=>({section:{paddingBlockStart:0}})),[]);return(0,D.jsx)(V.Z,{style:s.section,children:(0,D.jsx)(M.ZP,{focusInitial:!r||void 0,onChange:t,placeholder:i.formatMessage(K.searchInputPlaceholder),showClearButton:!0,value:o??""})})}const W=(0,r.forwardRef)((function(e,t){window.__c={n:"ShowMoreButtonMenuItem"};const{showMoreCount:o}=e,r=(0,a.yK)((e=>({showMoreButton:{color:e.mediumTextColor,fill:e.mediumIconColor}})),[]);return(0,D.jsx)(k.Z,{...e,icon:(0,m.o)({width:16,height:16}),ref:t,style:r.showMoreButton,title:(0,D.jsx)(g.FormattedMessage,{defaultMessage:"Show {showMore} more",id:"automations.AutomationTargetPickerMenu.showMore.label",values:{showMore:Math.min(o,20)}})})}));function z(e,t){if("set_variables"===t.type)return{...e,automationVariables:t.variables.slice(0)};if("set_search_term"===t.type){const o=t.searchTerm?20:5;return{...e,collectionQueryLimit:o,pageQueryLimit:o,searchTerm:t.searchTerm}}if("set_collection_query_limit"===t.type){if(e.collectionQueryLimit!==t.queryLimit)return{...e,collectionQueryLimit:t.queryLimit}}else if("set_page_query_limit"===t.type){if(e.pageQueryLimit!==t.queryLimit)return{...e,pageQueryLimit:t.queryLimit}}else(0,x.t1)(t);return e}function E(e,t){if("query_loadstart"===t.type){if(!e.isLoading)return{...e,isLoading:!0}}else{if("query_finish"===t.type)return{...e,error:void 0,isLoading:!1,results:t.results,total:t.total};if("query_error"===t.type)return{...e,error:t.error,isLoading:!1,results:void 0,total:void 0};(0,x.t1)(t)}return e}},37867:(e,t,o)=>{o.d(t,{Z:()=>p});o(67294);var r=o(480),n=o(24405),i=o(84619),a=o(54497),s=o(5366),l=o(85567),c=o(56812),d=o(85893);function p(e){let{key:t,tokenFormat:o=i.l.Medium,isSingle:p,showRemoveButton:u,onClickRemove:m}=e;window.__c={n:"DeletedOptionToken"};const{isMobile:h}=(0,r.Fy)(),g=(0,s.useIntl)(),y=(0,n.yK)((e=>{const t="light"===e.mode?400:800,o="light"===e.mode?50:200,r="light"===e.mode?700:900;return{tokenValueWrap:{display:"inline-flex",gap:"4px",alignItems:"baseline"},warning:{color:e.accentColors.orange[t],height:"auto",width:h?16:14},warningWrap:{alignSelf:"center"},token:{backgroundColor:e.accentColors.yellow[o]},textWrap:{color:e.accentColors.yellow[r]}}}),[h]);return(0,d.jsx)(l.Z,{format:o,isSingle:p??!0,showRemoveButton:u??!1,onClickRemove:m,style:y.token,value:(0,d.jsxs)("span",{style:y.tokenValueWrap,children:[(0,d.jsx)("span",{style:y.warningWrap,children:(0,a.t)(y.warning)}),(0,d.jsx)("span",{style:y.textWrap,children:(0,c.ST)(g)})]})},t)}},64737:(e,t,o)=>{o.d(t,{q:()=>i,w:()=>n});var r=o(97880);function n(e){return!e.pathIsDead()&&e.isDefined()}function i(e){if(!(0,r.$K)(e))return[];return e.getTemplatePageStores().filter((e=>n(e)))}},56812:(e,t,o)=>{o.d(t,{$G:()=>k,Bo:()=>n,Ig:()=>S,Iu:()=>p,Mw:()=>h,Mz:()=>f,NZ:()=>v,Oq:()=>d,S0:()=>u,ST:()=>P,Sj:()=>y,VO:()=>j,XJ:()=>T,aD:()=>C,c5:()=>b,hW:()=>i,ht:()=>l,nf:()=>w,oJ:()=>V,om:()=>m,rf:()=>g,vE:()=>x,vz:()=>M,wE:()=>c,xf:()=>a,zU:()=>s});var r=o(80951);const n=(0,o(5366).defineMessages)({actionCheckboxPropertyChecked:{defaultMessage:"checked",id:"automations.action.checkboxProperty.checked"},actionCheckboxPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.checkboxProperty.single"},actionCheckboxPropertyUnchecked:{defaultMessage:"unchecked",id:"automations.action.checkboxProperty.unchecked"},actionDatePropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.dateProperty.clear"},actionDatePropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.dateProperty.single"},actionPersonPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.personProperty.clear"},actionPersonPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.personProperty.single"},actionPersonPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.personProperty.multiple"},actionRelationPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.relationProperty.clear"},actionRelationPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.relationProperty.multiple"},actionRelationPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.relationProperty.single"},actionSelectPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.selectProperty.clear"},actionSelectPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.selectProperty.multiple"},actionSelectPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.selectProperty.single"},actionStatusPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.statusProperty.single"},actionTextPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.textProperty.clear"},actionTextPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.textProperty.single"},actionDeletedProperty:{defaultMessage:"Edit a deleted property",id:"automations.action.deletedProperty"},triggerAnyPageAdded:{defaultMessage:"Page added",id:"automations.trigger.pageAdded.title"},triggerAnyPagePropertyEdit:{defaultMessage:"Any property edited",id:"automations.trigger.anyPagePropertyEdited.title"},triggerAnyPropertyEdit:{defaultMessage:"{propertyName} is edited",id:"automations.trigger.propertyChangesToAny.title"},triggerCheckboxPropertyChecked:{defaultMessage:"checked",id:"automations.trigger.checkboxProperty.checked"},triggerCheckboxPropertySet:{defaultMessage:"{propertyName} set to {propertyValues}",id:"automations.trigger.checkboxPropertySet.title"},triggerCheckboxPropertyUnchecked:{defaultMessage:"unchecked",id:"automations.trigger.checkboxProperty.unchecked"},triggerSelectPropertySet:{id:"automations.trigger.selectPropertySet.title",defaultMessage:"{propertyName} set to {propertyValues}"},triggerStatusPropertySet:{defaultMessage:"{propertyName} set to {propertyValues}",id:"automations.trigger.statusPropertySet.singleProperty"},triggerDeletedPropertyEdit:{defaultMessage:"Deleted property is edited",id:"automations.trigger.deletedPropertyEdited"},deletedPropertyOption:{defaultMessage:"Deleted option",id:"automations.values.deletedPropertyOption"}});function i(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionCheckboxPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function a(e){const{propertyName:t}=e;return{...n.actionDatePropertyClear,values:{propertyName:t}}}function s(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionDatePropertySetSingle,values:{propertyName:t,propertyValue:o}}}function l(e){const{propertyName:t}=e;return{...n.actionPersonPropertyClear,values:{propertyName:t}}}function c(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionPersonPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function d(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionPersonPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function p(e){const{propertyName:t}=e;return{...n.actionRelationPropertyClear,values:{propertyName:t}}}function u(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionRelationPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function m(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionRelationPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function h(e){const{propertyName:t}=e;return{...n.actionSelectPropertyClear,values:{propertyName:t}}}function g(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionSelectPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function y(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionSelectPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function S(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionStatusPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function v(e){const{propertyName:t}=e;return{...n.actionTextPropertyClear,values:{propertyName:t}}}function x(e){const{propertyName:t,propertyValue:o}=e;return{...n.actionTextPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function C(e){return e.formatMessage(n.actionDeletedProperty)}function f(e){return e.formatMessage(n.triggerAnyPageAdded)}function b(e){return e.formatMessage(n.triggerAnyPagePropertyEdit)}function w(e){return e.formatMessage(n.triggerDeletedPropertyEdit)}function k(e,t){const{propertyName:o}=t;return e.formatMessage(n.triggerAnyPropertyEdit,{propertyName:o})}function M(e,t){return e.formatMessage(n.triggerCheckboxPropertySet,t)}function T(e,t){return e.formatMessage(n.triggerSelectPropertySet,t)}function j(e,t){return e.formatMessage(n.triggerStatusPropertySet,t)}function P(e){return e.formatMessage(n.deletedPropertyOption)}function V(e){const{limit:t,optionValues:o,propertySchema:n}=e,i=n.options??[],a=i.length>0,s=o.map((e=>{const t=a?(0,r.i7)(i,e):void 0;return t?{type:"option",value:t}:{type:"deleted",value:e}}));let l=s;if(void 0!==t&&s.length>t){const e=s.length-t;l=[...s.slice(0,t),{type:"truncation",value:`+${e}`}]}return l}},73266:(e,t,o)=>{o.d(t,{a:()=>n});var r=o(67294);function n(e){return(0,r.useMemo)((()=>Boolean(e&&e.width<400)),[e])}},95193:(e,t,o)=>{o.d(t,{F:()=>s,U:()=>a});var r=o(480),n=o(86628),i=o(87279);function a(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:i.og.ActionSheet}:{menuType:i.og.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function s(e){const t=(0,r.Fy)();return(0,n.VK)((()=>a({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},35294:(e,t,o)=>{o.d(t,{d:()=>a});var r=o(480),n=o(86628),i=o(53437);function a(e){const t=(0,r.Fy)();return(0,n.VK)((()=>t.isPhone||"slideUp"===(null==e?void 0:e.tabletBehavior)&&t.isTablet?i.kQ.SlideUp:i.kQ.Popup),[t,null==e?void 0:e.tabletBehavior])}},61053:(e,t,o)=>{o.d(t,{Z:()=>M});o(57658);var r=o(43261),n=o.n(r),i=o(67294),a=o(83355),s=o(49085),l=o(6695),c=o(56666),d=o(37612),p=o(72126),u=o(5366),m=o(52821),h=o(33929),g=o(29798),y=o(73657),S=o(52275),v=o(68894),x=o(32163),C=o(72495),f=o(69872),b=o(85893);const w=(0,u.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});class k extends a.Z{constructor(){super(...arguments),this.storeTypes={inputStore:s.default.createClass(""),menuListStore:g.Z,showAllProperties:s.default.createClass(!1)}}renderComponent(){const{currentProperty:e,showNoneOption:t,showRemoveOption:o,getProperties:r,onAccept:a,intl:s,inputPlaceholder:g,defaultShowPropertyCount:f,schema:k,format:M}=this.props,{device:T}=this.environment,{inputStore:j,menuListStore:P}=this.stores,V=j.state,_=(0,l.iB)(M,k,void 0,l.j5.Page).collection_page_properties||[],F=!f||this.stores.showAllProperties.state,Z=s.formatMessage(w.none),B=t?{key:"none",render:t=>(0,b.jsx)(S.Z,{...t,checkState:!e,title:Z}),action:()=>{a(void 0)}}:void 0,A=o?{key:"remove",render:e=>(0,b.jsx)(S.Z,{...e,icon:(0,d.y)({width:16,fill:this.theme.mediumTextColor,marginLeft:4,marginRight:2}),title:s.formatMessage(w.remove)}),action:()=>{a(void 0)}}:void 0,I=r();let R=p.MR(I,(e=>_.findIndex((t=>t.property===e))));if(V){const e=new Map;let t=R.map((t=>{const o=k[t],r=o?`${o.name} ${m.SO[o.type]}`:"";return e.set(t,r),r}));t=n().filter(V,t).map((e=>{let{original:t}=e;return t})),R=R.filter((o=>t.includes(e.get(o)||"")))}else!F&&f&&(R=R.slice(0,f));const L=p.oA([!V||n().test(V,Z)?B:void 0,...R.map((e=>this.renderPropertyMenuItem(e)))]);if(!F&&I.length>R.length&&!V){const e={key:"show_more",render:e=>(0,b.jsx)(S.Z,{...e,icon:(0,c.o)({width:16,fill:this.theme.mediumTextColor,marginLeft:4,marginRight:2}),style:{color:this.theme.mediumTextColor},title:(0,b.jsx)(u.FormattedMessage,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:I.length-R.length}})}),action:()=>{this.stores.showAllProperties.setState(!0)}};L.push(e)}const D=L.length>0,K=Boolean(V),H=!A||D||K;H&&!D&&L.push({action:p.ZT,key:"noResults",render:e=>(0,b.jsx)(y.Z,{...e,caption:(0,b.jsx)(u.FormattedMessage,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const O=[];return H&&O.push({key:"input",comp:(0,b.jsx)(C.Z,{children:(0,b.jsx)(v.ZP,{focusInitial:!T.isMobile||void 0,focus:!T.isMobile||void 0,value:V,onChange:e=>{j.setState(e.target.value),P.setState({...P.state,focus:{section:0,indexLocal:0,indexGlobal:0}}),this.stores.showAllProperties.setState(!1)},placeholder:g||h.default.formatMessage(w.inputPlaceholder)})})}),(L.length>0||A)&&O.push({key:"properties",comp:(0,b.jsx)(x.Z,{type:x.i.Vertical,initialFocus:0,sections:[...L.length>0?[{key:"results",render:e=>(0,b.jsx)(C.Z,{...e}),items:L}]:[],...A?[{key:"remove",render:e=>(0,b.jsx)(C.Z,{topBorder:L.length>0,...e}),items:[A]}]:[]],store:P})}),(0,b.jsx)(b.Fragment,{children:O.map((e=>{let{key:t,comp:o}=e;return(0,b.jsx)(i.Fragment,{children:o},t)}))})}renderPropertyMenuItem(e){const{schema:t,currentProperty:o,onAccept:r,renderProperty:n}=this.props,i=t[e];if(!i)return;return{key:e,render:t=>{const r=e===o;return n?n(t,e,r,i):(0,b.jsx)(f.Z,{...t,propertySchema:i,format:f.Z.DisplayFormat.Name,checkState:r})},action:()=>{r(e)}}}}k.displayName="CollectionSettingsPropertySelectMenu";const M=(0,u.injectIntl)(k)},23877:(e,t,o)=>{o.d(t,{Z:()=>ie,v:()=>ne});o(21703),o(67294);var r=o(83355),n=o(49085),i=o(15145),a=o(6906),s=o(99036),l=o(39068),c=o(53877),d=o(6695),p=o(72126),u=o(4615),m=o(82990),h=o(5366),g=o(50906),y=o(8406),S=o(5149),v=o(45264),x=o(96802),C=o(75018),f=o(80402),b=o(39699),w=o(28020),k=o(40863),M=o(33929);const T=(0,h.defineMessages)({none:{defaultMessage:"None",id:"database.viewPropertiesMenu.coverFormat.none"},page_content:{defaultMessage:"Page content",id:"database.viewPropertiesMenu.coverFormat.pageContent"},page_cover:{defaultMessage:"Page cover",id:"database.viewPropertiesMenu.coverFormat.pageCover"}}),j=(0,h.defineMessages)({small:{defaultMessage:"Small",id:"database.viewPropertiesMenu.coverSize.small"},medium:{defaultMessage:"Medium",id:"database.viewPropertiesMenu.coverSize.medium"},large:{defaultMessage:"Large",id:"database.viewPropertiesMenu.coverSize.large"}}),P=function(e){return e?"page_content"===e.type?M.default.formatMessage(T.page_content):"page_cover"===e.type?M.default.formatMessage(T.page_cover):void 0:M.default.formatMessage(T.none)},V=e=>{switch(e){case"small":return M.default.formatMessage(j.small);case"medium":return M.default.formatMessage(j.medium);case"large":return M.default.formatMessage(j.large)}};var _=o(81849),F=o(52821),Z=o(48543),B=o(65742),A=o(78316),I=o(84210),R=o(87279),L=o(18514),D=o(80444),K=o(61766),H=o(36857),O=o(88923),N=o(21269),W=o(42917),z=o(13709),E=o(61053),Q=o(75544),G=o(42922),q=o(64921),U=o(31945),Y=o(74194),$=o(78140),X=o(53437),J=o(72495),ee=o(86825),te=o(85893);class oe extends r.Z{constructor(){super(...arguments),this.storeTypes={hoveredType:n.default.createClass(void 0),timelineByButtonPopupStore:K.Z,timelineByEndButtonPopupStore:K.Z,calendarByButtonPopupStore:K.Z},this.renderViewTypeButton=e=>{const{intl:t,collectionContextStore:o}=this.props,r=this.getCurrentViewType(),n=o.permissionScopes.state,i=r===e,a=i||!n.canConfigureBlock;return(0,te.jsxs)(q.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"calc(33% - 12px)",flexGrow:0,flexShrink:0,fontSize:11,borderRadius:3,margin:6,padding:6,boxShadow:`0 0 0 1px ${this.theme.regularDividerColor}`,color:this.theme.mediumTextColor,fill:this.theme.mediumTextColor,...i&&{boxShadow:`0 0 0 2px ${this.theme.blueColor}`,color:this.theme.blueColor,fill:this.theme.blueColor,fontWeight:500}},disabled:a,onClick:()=>{b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderViewTypeButton",environment:this.environment,perform:r=>{v.z2({environment:this.environment,collectionContextStore:o,newViewType:e,transaction:r,intl:t})}}),y.wd({environment:this.environment,collectionContextStore:o,action:"change_type",original_view_type:r})},onMouseMove:()=>{this.stores.hoveredType.setState(e)},children:[F.aW[e]({width:void 0,height:20,marginBottom:4,marginTop:4}),(0,te.jsx)("div",{children:F.Bh[e]})]})},this.handleCoverFormatChange=e=>{const{collectionContextStore:t}=this.props,o=this.getCoverFormatKey(),r=t.collectionViewStore();o&&r&&(b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverFormatChange",environment:this.environment,perform:t=>{x.FH({stores:[r],update:{[o]:e},transaction:t})}}),y.wd({environment:this.environment,collectionContextStore:t,action:"update_cover_format"}))},this.handleCoverSizeFormatChange=e=>{const{collectionContextStore:t}=this.props,o=this.getCoverSizeFormatKey(),r=t.collectionViewStore();o&&r&&(b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverSizeFormatChange",environment:this.environment,perform:t=>{x.FH({stores:[r],update:{[o]:e},transaction:t})}}),y.wd({environment:this.environment,collectionContextStore:t,action:"toggle_cover_size_format"}))},this.handleCoverAspectFormatToggle=()=>{const{collectionContextStore:e}=this.props,t=this.getCoverAspectFormatKey(),o=e.collectionViewStore(),r=e.normalizedFormatStore.state;t&&o&&(b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverAspectFormatToggle",environment:this.environment,perform:e=>{x.FH({stores:[o],update:{[t]:"contain"===r[t]?"cover":"contain"},transaction:e})}}),y.wd({environment:this.environment,collectionContextStore:e,action:"toggle_cover_aspect_format"}))},this.handleShowCollectionTitleClick=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=!e.shouldShowSource.state;b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleShowCollectionTitleClick",environment:this.environment,perform:e=>{x.FH({stores:[t],update:{hide_linked_collection_name:!o},transaction:e})}}),y.wd({environment:this.environment,collectionContextStore:e,action:"toggle_show_collection_title"})},this.handleTableWrapCellsToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=Boolean(e.normalizedFormatStore.state.table_wrap);f.qY({environment:this.environment,collectionViewStore:t,currentValue:o}),g.wds(this.environment,{view_type:this.getCurrentViewType(),action:"set_first_load_limit"}),y.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_wrap_cells"})},this.handleTableVerticalLinesToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=Boolean(e.normalizedFormatStore.state.hide_table_vertical_lines);f.AU({environment:this.environment,collectionViewStore:t,currentValue:o}),y.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_vertical_lines"})},this.handleTableSubitemToggleOnTitleToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();t&&(f.d1({environment:this.environment,collectionViewStore:t,currentValue:e.normalizedFormatStore.state.table_subitem_toggle_column}),y.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_subitem_toggle_on_title"}))},this.handleTimelineSeparateDatesClick=()=>{const{collectionContextStore:e}=this.props,t=e.normalizedQueryStore.state,o=e.collectionViewStore(),r=null==t?void 0:t.timeline_by,n=null==t?void 0:t.timeline_by_end;if(!r||!o)return;const i=n?void 0:r;b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleTimelineSeparateDatesClick",environment:this.environment,perform:e=>{v.Es({collectionViewStore:o,update:{timeline_by_end:i??null},transaction:e})}}),y.wd({environment:this.environment,collectionContextStore:e,action:"toggle_timeline_separate_dates"})},this.handleOpenPeekModePicker=()=>{y.nS({environment:this.environment,collectionContextStore:this.props.collectionContextStore,from:"collection_view_settings"})},this.handleCalendarViewRangeOptionClick=e=>{const{collectionContextStore:t}=this.props,o=t.collectionViewStore();if(!o)return;const{serverCommitResult:r}=b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleViewRangeOptionClick",environment:this.environment,perform:t=>{x.FH({stores:[o],update:{calendar_view_range:e},transaction:t})}}),n=w.AK.state,i=t.dateRangeStart.state,a=t.dateRangeEnd.state,{newDateRangeStart:s,newDateRangeEnd:l}=this.getNewDateRange({oldCalendarEnd:a,newViewRange:e,startOfWeekSetting:n});v.t5({dateRangeStart:s,dateRangeEnd:l,collectionContextStore:t}),r.then((()=>{y.wd({environment:this.environment,collectionContextStore:t,action:"update_calendar_view_range"})})).catch((()=>{v.t5({dateRangeStart:i,dateRangeEnd:a,collectionContextStore:t})}))},this.handlePeekModeFormatClick=e=>{const{collectionContextStore:t}=this.props,o=t.collectionViewStore();if(o&&e&&(b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handlePeekModeFormatClick",environment:this.environment,perform:t=>{x.FH({stores:[o],update:{collection_peek_mode:e},transaction:t})}}),y.gl({environment:this.environment,collectionContextStore:t,peek_mode:e,from:"collection_view_settings"}),O.default.state.open&&O.default.state.collectionContextStore===t)){const{mainEditorCurrentBlockStore:t}=D.default.state,o="full_page"===e?(0,I.ZP)({store:O.default.state.target,fullyQualified:!1,pageVisitSource:i.tY.Expand}):(0,A.mb)({store:O.default.state.target,mainEditorCurrentBlockStore:t,collectionContextStore:O.default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,O.getPeekModeFromCollectionPeekModeFormat)(e)});o&&C.navigate({environment:this.environment,url:o})}},this.handleViewTypeAreaMouseLeave=()=>{this.stores.hoveredType.setState(void 0)},this.handleDoneClick=()=>{const{collectionSettingsStore:e,collectionContextStore:t}=this.props;S.wl({collectionSettingsStore:e,item:{type:"main"}}),y.wd({environment:this.environment,collectionContextStore:t,action:"click_create_view_done"})}}renderComponent(){const{collectionContextStore:e,showDoneButton:t}=this.props,{hoveredType:o}=this.stores,{device:r}=this.environment,n=e.normalizedQueryStore.state,i=e.normalizedSchemaStore.state,a=e.normalizedFormatStore.state,l=e.isFullScreen.state,c=e.isRootChild.state,d=this.getCurrentViewType(),p=Boolean(this.getCoverFormatKey()),u="table"===d||"board"===d||"gallery"===d,m="table"===d,g=Object.keys(i).filter((e=>{const t=i[e];return t&&(0,s.Lt)(t)})),y="timeline"===d&&g.length>0,S="timeline"===d&&g.length>1,v="timeline"===d&&Boolean(null==n?void 0:n.timeline_by_end),x="calendar"===d&&g.length>0,C="calendar"===d,f="board"===d,b=(0,B.d$)({environment:this.environment,isFullScreen:l,isRootChild:c}),w="timeline"===d&&Boolean(a.timeline_show_table)&&b,k="timeline"===d&&b,M=e.collectionViewBlockStore();if(!M)return;const T=M.getCollectionViewSourceCollectionStore(),j=!("collectionTypedView"===e.contextType||T&&l),P=e.permissionScopes.state,V="page"===d;return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(J.Z,{topBorder:!1,shouldShowBottomDivider:r.isMobile,children:(0,te.jsxs)("div",{style:{...!r.isMobile&&{width:"100%",paddingLeft:8,paddingRight:8},...r.isMobile&&{background:this.theme.contentBackground,width:"100%",paddingTop:12,paddingBottom:12}},onMouseLeave:this.handleViewTypeAreaMouseLeave,children:[(0,te.jsx)("div",{style:{display:"flex",flexFlow:"wrap",justifyContent:"center"},children:["table","board","timeline","calendar","list","gallery"].map(this.renderViewTypeButton)}),(0,te.jsx)("div",{style:{color:this.theme.lightTextColor,fontSize:12,margin:"6px 8px 0px 8px"},children:F.sN[o.state||d]})]})}),(0,te.jsxs)(J.Z,{children:[j&&(0,te.jsx)(ee.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Show database title",id:"database.viewSettings.layoutTab.showDatabaseTitle.title"}),focused:!1,on:e.shouldShowSource.state,onClick:this.handleShowCollectionTitleClick,disabled:!P.canConfigureBlock,textWrapperStyle:{opacity:1}}),p&&this.renderCardSettings(),m&&this.renderTableVerticalLinesSetting(),u&&this.renderTableWrapCellsSetting(),V&&this.renderPageViewSetting(),y&&this.renderTimelineBySetting(),v&&this.renderTimelineEndSetting(),S&&this.renderTimelineSeparateDatesSetting(),x&&this.renderCalendarBySetting(),C&&this.renderCalendarViewRangeSetting(),k&&(0,te.jsx)(Q.N,{collectionContextStore:e}),w&&this.renderTimelineTableProperties(),f&&this.renderBoardGroupByShortcuts(),this.renderPeekModeSetting()]}),t&&(0,te.jsx)(J.Z,{disableMobileBorders:!0,children:(0,te.jsx)(G.Z,{style:{display:"flex",margin:"0 14px"},onClick:this.handleDoneClick,children:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Done",id:"database.viewSettings.createViewTab.doneButton.title"})})}),(0,te.jsx)(J.Z,{topBorder:!1,children:(0,te.jsx)(N.Z,{href:(0,L.UY)("guides.databaseView"),title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Learn about views",id:"database.viewSettings.layoutTab.learnMoreButton.title"}),analyticsFrom:"view_settings_layout"})})]})}renderCardSettings(){const{device:e}=this.environment,{collectionContextStore:t}=this.props,o=this.getCoverFormat(),r=this.getCoverSizeFormat(),n=!e.isMobile||"board"===this.getCurrentViewType(),i=t.permissionScopes.state;return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(z.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Card preview",id:"database.viewSettings.layoutTab.cardPreviewButtonTitle"}),selectedKey:o,popupStyle:{minWidth:190},options:this.getCoverFormatOptions(),onChange:this.handleCoverFormatChange,disabled:!i.canConfigureBlock}),n&&(0,te.jsx)(z.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Card size",id:"databdatabase.viewSettings.layoutTab.cardSizeButtonTitle"}),selectedKey:r,popupStyle:{minWidth:190},options:this.getCoverSizeFormatOptions(),onChange:this.handleCoverSizeFormatChange,disabled:!i.canConfigureBlock}),o&&(0,te.jsx)(ee.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Fit image",id:"databdatabase.viewSettings.layoutTab.fitImageButtonTitle"}),on:"contain"===this.getCoverAspectFormat(),focused:!1,onClick:this.handleCoverAspectFormatToggle,disabled:!i.canConfigureBlock,textWrapperStyle:{opacity:1}})]})}getCoverFormatOptions(){const{collectionContextStore:e}=this.props,t=e.normalizedSchemaStore.state;let o=Object.keys(t);o=p.MR(o,(e=>{const o=t[e];return o?o.name:""}));const{theme:r}=this,n=p.oA(o.map((e=>{const o=t[e];if(o&&"file"===o.type){return{key:{type:"property",property:e},title:o.name,icon:(0,te.jsx)(l.ZP,{type:o.type,icon:o.icon,size:this.environment.device.isMobile?16:14,theme:r,style:{fill:r.regularIconColor}})}}})));return[...[void 0,{type:"page_cover"},{type:"page_content"}].map((e=>({key:e,title:P(e)}))),...n]}getCoverSizeFormatOptions(){return["small","medium","large"].map((e=>({key:e,title:V(e)})))}renderTableVerticalLinesSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state;return(0,te.jsx)(ee.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Show vertical lines",id:"database.viewSettings.layoutTab.tableShowVerticalLines"}),on:!Boolean(e.normalizedFormatStore.state.hide_table_vertical_lines),focused:!1,onClick:this.handleTableVerticalLinesToggle,disabled:!t.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderTableWrapCellsSetting(){const{collectionContextStore:e}=this.props,t=e.normalizedFormatStore.state,o=e.permissionScopes.state,r=this.getCurrentViewType();return(0,te.jsx)(ee.Z,{title:"table"===r?(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Wrap all columns",id:"database.viewSettings.layoutTab.tableWrapAllColumns"}):(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Wrap all properties",id:"database.viewSettings.layoutTab.tableWrapAllProperties"}),on:Boolean(t.table_wrap),focused:!1,onClick:this.handleTableWrapCellsToggle,disabled:!o.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderPageViewSetting(){const e=this.props.collectionContextStore.collectionViewStore();if(e)return(0,te.jsx)("div",{style:{padding:5},children:(0,te.jsx)(Y.Z,{showClearButton:!0,placeholder:"Enter page ID",focusInitial:!0,onChange:e=>{H.Z.setState({pageId:e.target.value})},onSubmit:t=>{const o=H.Z.state.pageId;o&&b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderPageViewSettings",environment:this.environment,perform:t=>{x.FH({stores:[e],update:{page_pointer:{id:(0,u.Mt)(o),spaceId:t.spaceId,table:"block"}},transaction:t})}})}})})}renderTimelineBySetting(){var e,t;const{device:o}=this.environment,{collectionContextStore:r}=this.props,n=null===(e=r.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by,i=null===(t=r.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by_end,a=r.normalizedSchemaStore.state,l=r.collectionViewStore(),c=r.permissionScopes.state,d=r.collectionStore();if(!n||!l||!d)return;const p=a[n];return p?(0,te.jsx)(U.ZP,{popupType:o.isPhone?X.kQ.SlideUp:X.kQ.Popup,alignmentToOrigin:U.vR.End,placementToOrigin:U.pO.Bottom,originGap:0,renderOrigin:e=>(0,te.jsx)(W.Z,{title:i?(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Start date",id:"database.viewSettings.layoutTab.timelineStartDate.title"}):(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Show timeline by",id:"database.viewSettings.layoutTab.showTimelineByProperty.title"}),disabled:!c.canConfigureBlock,showChevron:!0,right:(0,te.jsx)("div",{style:m.Z.textOverflowStyle,children:p.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:e=>{let t;return t=o.isPhone?{menuType:R.og.ActionSheet}:{menuType:R.og.Popup,width:300},(0,te.jsx)($.Z,{...t,children:(0,te.jsx)(E.Z,{schema:d.getSchema(),format:d.getFormat(),currentProperty:n,getProperties:()=>Object.keys(a).filter((e=>{const t=a[e];return t&&(0,s.Lt)(t)})),onAccept:t=>{t&&(b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineBySetting",environment:this.environment,perform:e=>{v.Es({collectionViewStore:l,update:{timeline_by:t},transaction:e})}}),e.close(),y.wd({environment:this.environment,collectionContextStore:r,action:"update_timeline_by",original_view_type:void 0,property_type:p[t].type}))}})})}}):void 0}renderTimelineEndSetting(){var e;const{device:t}=this.environment,{collectionContextStore:o}=this.props,r=null===(e=o.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by_end,n=o.normalizedSchemaStore.state,i=o.permissionScopes.state,a=o.collectionViewStore(),l=o.collectionStore();if(!r||!a||!l)return;const c=n[r];return c?(0,te.jsx)(U.ZP,{popupType:t.isPhone?X.kQ.SlideUp:X.kQ.Popup,alignmentToOrigin:U.vR.End,placementToOrigin:U.pO.Bottom,originGap:0,renderOrigin:e=>(0,te.jsx)(W.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"End date",id:"database.viewSettings.layoutTab.timelineEndDate.title"}),showChevron:!0,right:c.name,disabled:!i.canConfigureBlock,...e}),render:e=>{let i;return i=t.isPhone?{menuType:R.og.ActionSheet}:{menuType:R.og.Popup,width:300},(0,te.jsx)($.Z,{...i,children:(0,te.jsx)(E.Z,{schema:l.getSchema(),format:l.getFormat(),currentProperty:r,getProperties:()=>Object.keys(n).filter((e=>{const t=n[e];return t&&(0,s.Lt)(t)})),onAccept:t=>{t&&(b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineEndSetting",environment:this.environment,perform:e=>{v.Es({collectionViewStore:a,update:{timeline_by_end:t},transaction:e})}}),e.close(),y.wd({environment:this.environment,collectionContextStore:o,action:"update_timeline_by_end",original_view_type:void 0,property_type:c[t].type}))}})})}}):void 0}renderTimelineSeparateDatesSetting(){const{collectionContextStore:e}=this.props,t=e.normalizedQueryStore.state,o=null==t?void 0:t.timeline_by_end,r=e.permissionScopes.state;return(0,te.jsx)(ee.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Separate start and end dates",id:"database.viewSettings.layoutTab.timelineUseSeparateDates.title"}),focused:!1,on:Boolean(o),onClick:this.handleTimelineSeparateDatesClick,disabled:!r.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderCalendarViewRangeSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state,o=this.getCalendarViewRange();return(0,te.jsx)(z.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Show calendar as",id:"database.viewSettings.layoutTab.showCalendarAs.title"}),collectionContextStore:e,openButtonPopup:"peekModeFormat"===e.settingsStore.state.openButtonPopup,selectedKey:o,popupStyle:{minWidth:190},options:re(),onChange:this.handleCalendarViewRangeOptionClick,disabled:!t.canConfigureBlock})}renderCalendarBySetting(){var e;const{device:t}=this.environment,{collectionContextStore:o}=this.props,r=null===(e=o.normalizedQueryStore.state)||void 0===e?void 0:e.calendar_by,n=o.permissionScopes.state,i=o.normalizedSchemaStore.state,a=o.collectionViewStore(),l=o.collectionStore();if(!r||!a||!l)return;const c=i[r];return c?(0,te.jsx)(U.ZP,{popupType:t.isPhone?X.kQ.SlideUp:X.kQ.Popup,alignmentToOrigin:U.vR.End,placementToOrigin:U.pO.Bottom,originGap:0,renderOrigin:e=>(0,te.jsx)(W.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Show calendar by",id:"database.viewSettings.layoutTab.showCalendarByProperty.title"}),disabled:!n.canConfigureBlock,showChevron:!0,right:(0,te.jsx)("div",{style:m.Z.textOverflowStyle,children:c.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:e=>{let n;return n=t.isPhone?{menuType:R.og.ActionSheet}:{menuType:R.og.Popup,width:300},(0,te.jsx)($.Z,{...n,children:(0,te.jsx)(E.Z,{schema:l.getSchema(),format:l.getFormat(),currentProperty:r,getProperties:()=>Object.keys(i).filter((e=>{const t=i[e];return t&&(0,s.Lt)(t)})),onAccept:t=>{t&&(b.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderCalendarBySetting",environment:this.environment,perform:e=>{v.Es({collectionViewStore:a,update:{calendar_by:t},transaction:e})}}),e.close(),y.wd({environment:this.environment,collectionContextStore:o,action:"update_calendar_by",original_view_type:void 0,property_type:c[t].type}))}})})}}):void 0}renderTimelineTableProperties(){const{collectionContextStore:e,collectionSettingsStore:t}=this.props,o=(e.normalizedFormatStore.state.timeline_table_properties||[]).filter((e=>Boolean(e.visible))).length,r=e.permissionScopes.state;return(0,te.jsx)(W.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Table properties",id:"database.viewSettings.layoutTab.tablePropertiesButton.title"}),showChevron:!0,right:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"{propertiesShown} shown",id:"database.viewSettings.layoutTab.propertiesButton.propertiesShown.title",values:{propertiesShown:o}}),onClick:()=>{S.H4({collectionSettingsStore:t,item:{type:"properties",timelineViewTab:"table"}}),y.wd({environment:this.environment,collectionContextStore:e,action:"click_timeline_table_properties"})},disabled:!r.canConfigureBlock})}renderBoardGroupByShortcuts(){const{collectionContextStore:e,collectionSettingsStore:t}=this.props,o=e.normalizedFormatStore.state.board_columns_by,r=e.normalizedSchemaStore.state;if(!o)return;const n=e.permissionScopes.state,i=r[o.property];return i?(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(W.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Group by",id:"database.viewSettings.layoutTab.boardGroupByButton.title"}),showChevron:!0,right:i.name,onClick:()=>{S.H4({collectionSettingsStore:t,item:{type:"group",groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}}),y.wd({environment:this.environment,collectionContextStore:e,action:"click_board_group_by",original_view_type:void 0,property_type:i.type})},disabled:!n.canConfigureBlock}),(0,te.jsx)(ee.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Color columns",id:"database.viewSettings.groupTab.colorColumns"}),on:!(0,_.h6)(this.environment,e),focused:!1,onClick:()=>{S.iN({environment:this.environment,collectionContextStore:e})},disabled:!n.canConfigureBlock,textWrapperStyle:{opacity:1}})]}):void 0}renderPeekModeSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state,o=this.getPeekModeFormat();return(0,te.jsx)(z.Z,{title:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Open pages in",id:"database.viewSettings.layoutTab.peekModeTitle"}),collectionContextStore:e,openButtonPopup:"peekModeFormat"===e.settingsStore.state.openButtonPopup,selectedKey:o,popupStyle:{minWidth:190},options:ne({currentViewType:this.getCurrentViewType(),theme:this.theme}),menuItemOptionsStyle:{paddingTop:8,paddingBottom:8},onClick:this.handleOpenPeekModePicker,onChange:this.handlePeekModeFormatClick,disabled:!t.canConfigureBlock})}getNewDateRange(e){const{newViewRange:t,oldCalendarEnd:o,startOfWeekSetting:r}=e;if("month"===t){const e=(0,c.IS)((0,c.kl)(o),r);return{newDateRangeStart:e,newDateRangeEnd:(0,c.V7)((0,c._)({date:e,monthsToAdd:1}),r)}}{const e=(0,c.IS)(o,r);return{newDateRangeStart:e,newDateRangeEnd:(0,c.V7)(e,r)}}}getCurrentViewType(){var e;const{collectionContextStore:t}=this.props,o=null===(e=t.collectionViewStore())||void 0===e?void 0:e.getType();if(!o)throw new Error("View type was not defined.");return o}getCoverFormatKey(){return F.DL[this.getCurrentViewType()]}getCoverFormat(){const{collectionContextStore:e}=this.props,t=e.normalizedFormatStore.state,o=this.getCoverFormatKey();if(o&&t)return t[o]}getCoverSizeFormatKey(){return F.oy[this.getCurrentViewType()]}getCoverSizeFormat(){const{collectionContextStore:e}=this.props,t=e.normalizedFormatStore.state,o=this.getCoverSizeFormatKey();if(o&&t){const e=t[o];if(e)return e}return d.PZ}getPeekModeFormat(){const{collectionContextStore:e}=this.props,t=e.normalizedFormatStore.state,o=this.getCurrentViewType();return(null==t?void 0:t.collection_peek_mode)||Z.Ls[o]}getCalendarViewRange(){const{collectionContextStore:e}=this.props,t=e.normalizedFormatStore.state;return(null==t?void 0:t.calendar_view_range)||"month"}getCoverAspectFormatKey(){return F._Y[this.getCurrentViewType()]}getCoverAspectFormat(){const{collectionContextStore:e}=this.props,t=e.normalizedFormatStore.state,o=this.getCoverAspectFormatKey();if(o&&t)return t[o]}}function re(){return["month","week"].map((e=>({key:e,title:M.default.formatMessage(k.Lh[e])})))}function ne(e){const{currentViewType:t,theme:o}=e,r=t?Z.Ls[t]:void 0;return["side_peek","center_peek","full_page"].map((e=>({key:e,title:(0,Z.LQ)(e),body:(0,te.jsxs)(te.Fragment,{children:[(0,Z.RI)(e),r&&t&&e===r&&(0,te.jsx)("div",{style:{marginTop:2,fontWeight:500,color:o.blueColor},children:(0,te.jsx)(h.FormattedMessage,{defaultMessage:"Default for {view}",id:"database.viewPropertiesMenu.peekMode.defaultForView",values:{view:(0,a.Z)(t)}})})]}),icon:(0,Z.RO)(e)({width:16,fill:o.mediumTextColor})})))}oe.displayName="CollectionSettingsViewLayoutMenu";const ie=(0,h.injectIntl)(oe)},75544:(e,t,o)=>{o.d(t,{N:()=>J,Z:()=>ee});var r=o(43261),n=o.n(r),i=(o(67294),o(83355)),a=o(480),s=o(86628),l=o(49085),c=o(99036),d=o(80951),p=o(39068),u=o(6695),m=o(5257),h=o(39132),g=o(61061),y=o(47453),S=o(37612),v=o(72126),x=o(97880),C=o(82990),f=o(5366),b=o(8406),w=o(5149),k=o(87085),M=o(45264),T=o(96802),j=o(39699),P=o(52821),V=o(68641),_=o(65742),F=o(19124),Z=o(33929),B=o(18514),A=o(29798),I=o(73657),R=o(21269),L=o(13005),D=o(42917),K=o(54119),H=o(52275),O=o(79131),N=o(5145),W=o(73063),z=o(68894),E=o(32163),Q=o(89728),G=o(72495),q=o(86825),U=o(66957),Y=o(85893);const $=(0,f.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertiesTab.inputPlaceholder"},toggleFrozenColumnsAriaLabel:{defaultMessage:"Toggle frozen columns",id:"database.viewSettings.propertiesTab.toggleFrozenColumnsAriaLabel"},togglePropertyVisibilityAriaLabel:{defaultMessage:"Toggle property visibility",id:"database.viewSettings.propertiesTab.togglePropertyVisibilityAriaLabel"}});class X extends i.Z{constructor(){super(...arguments),this.storeTypes={inputStore:l.default.createClass(""),menuListStore:A.Z},this.handleHideAllClick=e=>{const{collectionContextStore:t}=this.props;b.wd({environment:this.environment,collectionContextStore:t,action:"click_hide_all_properties"}),this.setAllPropertiesVisibility({formatKey:e,visibility:!1})},this.handleShowAllClick=e=>{const{collectionContextStore:t}=this.props;b.wd({environment:this.environment,collectionContextStore:t,action:"click_show_all_properties"}),this.setAllPropertiesVisibility({formatKey:e,visibility:!0})},this.handlePropertyReorder=e=>{const{formatKey:t,newPropertyKeys:o}=e,{collectionContextStore:r}=this.props,n=r.collectionViewStore();if(!n)return;const i=r.normalizedFormatStore.state[t]||[],a=o.indexOf("group-header-hidden-property"),s=[...v.oA(o.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const o=i.find((t=>t.property===e));if(o)return a>=0?{...o,visible:Boolean(t<a)}:o}))),...i.filter((e=>!o.includes(e.property)))];j.createAndCommit({userAction:"CollectionSettingsViewProperties.handlePropertyReorder",environment:this.environment,perform:e=>{T.FH({stores:[n],update:{[t]:s},transaction:e})}}),b.wd({environment:this.environment,collectionContextStore:r,action:"reorder_properties",original_view_type:n.getType()}),this.stores.menuListStore.reset()},this.handleTogglePropertyVisibility=e=>{var t;const{formatKey:o,propertyFormat:r}=e,{collectionContextStore:n}=this.props,i=n.collectionViewStore();if(!i)return;const a=n.normalizedFormatStore.state,s=(a[o]||[]).filter((e=>e.property!==r.property)),l=s.filter((e=>e.visible)),c=s.filter((e=>!e.visible)),d={...r,visible:!r.visible},p=[...l,d,...c],u={...a,[o]:p};j.createAndCommit({userAction:"CollectionSettingsViewProperties.handleTogglePropertyVisibility",environment:this.environment,perform:e=>{M.iG({collectionViewStore:i,update:{format:u},transaction:e})}}),b.wd({environment:this.environment,collectionContextStore:n,action:"toggle_property_visibility",original_view_type:i.getType(),property_type:null===(t=i.getCollectionStore())||void 0===t||null===(t=t.getSchema()[d.property])||void 0===t?void 0:t.type}),this.clearInput()},this.handlePropertyClick=e=>{var t,o,r;const{collectionSettingsStore:n,collectionContextStore:i}=this.props,a=(null===(t=i.collectionStore())||void 0===t?void 0:t.getSchema())||i.normalizedSchemaStore.state||{},{formatKey:s,propertyFormat:l}=e;b.wd({environment:this.environment,collectionContextStore:i,action:"click_property",original_view_type:null==i||null===(o=i.collectionViewStore())||void 0===o?void 0:o.getType(),property_type:null===(r=a[l.property])||void 0===r?void 0:r.type}),w.H4({collectionSettingsStore:n,item:{type:"property",formatKey:s,property:l.property}})},this.handleViewDeletedPropertiesClick=()=>{const{collectionSettingsStore:e,collectionContextStore:t,timelineViewTab:o}=this.props;t.collectionStore()&&(b.wd({environment:this.environment,collectionContextStore:t,action:"click_deleted_properties"}),w.H4({collectionSettingsStore:e,item:{type:"deletedProperties",timelineViewTab:o}}))},this.handleNewPropertyClick=()=>{const{collectionContextStore:e}=this.props,t=e.collectionStore();t&&(b.wd({environment:this.environment,collectionContextStore:e,action:"click_new_property"}),w.wl({collectionSettingsStore:e.settingsStore,item:{type:"propertyType",propertyTypes:(0,P.TP)({isSyncedCollection:t.isSyncedCollection(),collectionContextStore:e,environment:this.environment}),onAccept:(t,o)=>{k.PW({environment:this.environment,propertyType:t,propertyName:o,collectionContextStore:e,from:"view_settings"})}}}))},this.handleTabChange=e=>{const{collectionSettingsStore:t,collectionContextStore:o}=this.props;b.wd({environment:this.environment,collectionContextStore:o,action:0===e?"click_properties_tab_timeline":"click_properties_tab_table"}),w.FK({collectionSettingsStore:t,item:{type:"properties",timelineViewTab:0===e?"timeline":"table"}}),this.clearInput()},this.handleShowTableClick=()=>{this.clearInput()}}renderComponent(){const{collectionContextStore:e,timelineViewTab:t}=this.props,{device:o}=this.environment,{inputStore:r,menuListStore:n}=this.stores,i=r.state,a=(0,V.WY)({collectionContextStore:e}),s=(0,V.jI)({timelineViewTab:t,collectionContextStore:e}),l=(0,_.d$)({environment:this.environment,isFullScreen:e.isFullScreen.state,isRootChild:e.isRootChild.state});return(0,Y.jsxs)(L.ZP,{...this.props,title:(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Properties",id:"database.viewSettings.propertiesTab.title"}),header:(0,Y.jsx)(G.Z,{children:(0,Y.jsx)(z.ZP,{focusInitial:!o.isMobile,value:i,showClearButton:!0,onChange:e=>{r.setState(e.target.value),n.setState({...n.state,focus:{section:0,indexLocal:0,indexGlobal:0}})},placeholder:Z.default.formatMessage($.inputPlaceholder)})}),footer:this.renderFooter(),children:["timeline"===a&&l&&this.renderTimelineControls(),s&&this.renderPropertyFormatList(s),(0,Y.jsx)(G.Z,{children:this.renderDeletedProperties()})]})}renderTimelineControls(){const{timelineViewTab:e,collectionContextStore:t}=this.props,o="timeline"===e?0:1;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(U.Z,{tabs:[(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Timeline",id:"database.viewSettings.propertiesTab.timelineProperties"},"database.viewSettings.propertiesTab.timelineProperties"),(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Table",id:"database.viewSettings.propertiesTab.tableProperties"},"database.viewSettings.propertiesTab.tableProperties")],selectedIndex:o,onChange:this.handleTabChange}),"table"===e&&(0,Y.jsx)(G.Z,{children:(0,Y.jsx)(J,{collectionContextStore:t,onClick:this.handleShowTableClick})})]})}renderPropertyFormatList(e){const{collectionContextStore:t}=this.props,o=t.permissionScopes.state,r=t.normalizedFormatStore.state,i=t.normalizedSchemaStore.state,{inputStore:a}=this.stores,s=a.state;let l=r[e]||[];if(s){let e=l.map((e=>{const t=(0,d.Qm)({schema:i,property:e.property});return null==t?void 0:t.name}));e=n().filter(s,e).map((e=>{let{original:t}=e;return t})),l=l.filter((t=>{const o=i[t.property];return o&&o.name&&e.includes(o.name)}))}const c=l.filter((e=>Boolean(e.visible))),p=l.filter((e=>!Boolean(e.visible))),u="timeline_table_properties"===e?"table":(0,V.WY)({collectionContextStore:t});return(0,Y.jsxs)(Y.Fragment,{children:[0===l.length&&(0,Y.jsx)(G.Z,{children:(0,Y.jsx)(I.Z,{caption:(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"No results",id:"database.viewSettings.propertiesTab.noResults"})})}),l.length>0&&(0,Y.jsx)(E.Z,{type:E.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,sections:v.oA([c.length>0&&{key:"visible_and_hidden_properties",render:t=>(0,Y.jsx)(G.Z,{...t,noTextOverflow:!0,isTitleUppercase:!1,title:this.renderShownInViewMessage(u),desktopTitleStyle:{height:19},right:!s&&o.canConfigureBlock&&(0,Y.jsx)(Q.Z,{isSmall:!0,shouldShrink:!0,isBlue:!0,style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>this.handleHideAllClick(e),children:(0,Y.jsx)(f.FormattedMessage,{id:"database.viewSettings.propertiesTab.hideAllProperties",defaultMessage:"Hide all"})}),children:this.renderPropertySortList({formatKey:e,visibleProperties:c,hiddenProperties:p,children:t.children})}),items:v.oA([...this.renderPropertySortListItems({formatKey:e,properties:c}),p.length>0&&{key:"group-header-hidden-property",render:t=>this.renderHiddenPropertySectionHeader({props:t,formatKey:e,children:(0,Y.jsx)(Y.Fragment,{})}),action:()=>{}},...this.renderPropertySortListItems({formatKey:e,properties:p})])},0===c.length&&p.length>0&&{key:"hidden_properties",render:t=>this.renderHiddenPropertySectionHeader({props:t,formatKey:e,children:this.renderPropertySortList({formatKey:e,visibleProperties:c,hiddenProperties:p,children:t.children})}),items:this.renderPropertySortListItems({formatKey:e,properties:p})}])})]})}renderHiddenPropertySectionHeader(e){const{props:t,formatKey:o,children:r}=e,{collectionContextStore:n}=this.props,i=n.permissionScopes.state,{inputStore:a}=this.stores,s=a.state,l="timeline_table_properties"===o?"table":(0,V.WY)({collectionContextStore:n});return(0,Y.jsx)(G.Z,{...t,noTextOverflow:!0,isTitleUppercase:!1,title:this.renderHiddenInViewMessage(l),desktopTitleStyle:{height:19},right:!s&&i.canConfigureBlock&&(0,Y.jsx)(Q.Z,{isSmall:!0,shouldShrink:!0,isBlue:!0,style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>this.handleShowAllClick(o),children:(0,Y.jsx)(f.FormattedMessage,{id:"database.viewSettings.propertiesTab.showAllProperties",defaultMessage:"Show all"})}),style:{width:"100%",paddingBottom:0},children:r})}renderFooter(){const{collectionContextStore:e,timelineViewTab:t}=this.props,o=e.permissionScopes.state,r="timeline"===(0,V.WY)({collectionContextStore:e})&&"table"===t&&!(0,V.vw)({collectionContextStore:e}),n=o.canConfigureCollection&&!r;return(0,Y.jsxs)(G.Z,{topBorder:!0,children:[n&&(0,Y.jsx)(D.Z,{icon:y.R,title:(0,Y.jsx)(f.FormattedMessage,{id:"database.viewSettings.propertiesTab.newProperty",defaultMessage:"New property"}),isGray:!0,onClick:this.handleNewPropertyClick}),(0,Y.jsx)(R.Z,{href:(0,B.UY)("guides.databaseProperties"),title:(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Learn about properties",id:"database.viewSettings.propertiesTab.learnMoreButton.title"}),analyticsFrom:"view_settings_properties"})]})}renderPropertySortList(e){const{formatKey:t,visibleProperties:o,hiddenProperties:r,children:n}=e,i=v.oA([...o.map((e=>e.property)),o.length>0&&r.length>0&&{key:"group-header-hidden-property",draggable:!1},...r.map((e=>e.property))]);return this.canReorder()?(0,Y.jsx)(O.ZP,{direction:"vertical",keys:i,renderKey:(e,t)=>n[t],onDrop:(e,o)=>{this.handlePropertyReorder({formatKey:t,newPropertyKeys:e})}}):n}renderPropertySortListItems(e){const{formatKey:t,properties:o}=e;return v.oA(o.map((e=>this.renderPropertySortListItem({formatKey:t,propertyFormat:e}))))}renderPropertySortListItem(e){var t;const{formatKey:o,propertyFormat:r}=e,{collectionContextStore:n}=this.props,i=null===(t=n.collectionStore())||void 0===t?void 0:t.isSyncedCollection(),a=n.permissionScopes.state,s=!r.visible,l=n.normalizedSchemaStore.state,u=(0,d.Qm)({schema:l,property:r.property}),y="title"!==r.property||this.primaryPropertyFormatAllowsHidingTitle(o);let S=!a.canConfigureCollection||i&&((0,d.wl)(r.property)||(0,c.HF)(r.property));if("collectionTypedView"===n.contextType&&a.canConfigureBlock&&(S=!1),!u)return;const{theme:v}=this;return{key:r.property,render:e=>(0,Y.jsx)(H.Z,{...e,title:(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[this.canReorder()&&(0,Y.jsx)(N.ZP,{iconSize:12,style:{marginRight:8}}),(0,Y.jsx)(p.ZP,{type:u.type,icon:u.icon,size:16,theme:v,style:{fill:v.regularIconColor}}),(0,Y.jsx)("span",{style:{marginLeft:8,...C.Z.textOverflowStyle},children:u.name}),(0,c.qQ)(u)&&(0,c.q3)(u)&&("text"===u.type||(0,F.KZ)())&&(0,Y.jsx)(K.Z,{})]}),right:(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Y.jsx)(W.Z,{icon:s?g.B:h.c,iconStyle:{width:16,height:16},isDarkIconColor:!s,onClick:()=>{this.handleTogglePropertyVisibility({formatKey:o,propertyFormat:r})},ariaLabel:this.props.intl.formatMessage($.togglePropertyVisibilityAriaLabel),disabled:!y||!a.canConfigureBlock}),!S&&(0,m.o)({width:12,fill:v.lightTextColor,marginLeft:5})]})}),action:()=>{S||this.handlePropertyClick({formatKey:o,propertyFormat:r})}}}renderShownInViewMessage(e){return"table"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Shown in table",id:"database.viewSettings.propertiesTab.shownInTableTitle"}):"timeline"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Shown in timeline",id:"database.viewSettings.propertiesTab.shownInTimelineTitle"}):"board"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Shown in board",id:"database.viewSettings.propertiesTab.shownInBoardTitle"}):"list"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Shown in list",id:"database.viewSettings.propertiesTab.shownInListTitle"}):"gallery"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Shown in gallery",id:"database.viewSettings.propertiesTab.shownInGalleryTitle"}):"calendar"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Shown in calendar",id:"database.viewSettings.propertiesTab.shownInCalendarTitle"}):"page"===e?null:void(0,x.t1)(e)}renderHiddenInViewMessage(e){return"table"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in table",id:"database.viewSettings.propertiesTab.hiddenInTableTitle"}):"timeline"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in timeline",id:"database.viewSettings.propertiesTab.hiddenInTimelineTitle"}):"board"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in board",id:"database.viewSettings.propertiesTab.hiddenInBoardTitle"}):"list"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in list",id:"database.viewSettings.propertiesTab.hiddenInListTitle"}):"gallery"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in gallery",id:"database.viewSettings.propertiesTab.hiddenInGalleryTitle"}):"calendar"===e?(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in calendar",id:"database.viewSettings.propertiesTab.hiddenInCalendarTitle"}):"page"===e?null:void(0,x.t1)(e)}renderDeletedProperties(){const{collectionContextStore:e}=this.props,t=e.normalizedDeletedSchemaStore.state,o=Object.keys(t).length;if(e.permissionScopes.state.canConfigureCollection&&o>0)return(0,Y.jsx)(D.Z,{icon:S.y,title:(0,Y.jsx)(f.FormattedMessage,{id:"database.viewSettings.propertiesTab.deletedProperties",defaultMessage:"Deleted properties"}),isGray:!0,onClick:this.handleViewDeletedPropertiesClick,right:o,showChevron:!0})}canReorder(){const{inputStore:e}=this.stores,t=e.state,{collectionContextStore:o}=this.props,r=o.permissionScopes.state;return!this.environment.device.isMobile&&r.canConfigureBlock&&!t}setAllPropertiesVisibility(e){const{formatKey:t,visibility:o}=e,{collectionContextStore:r}=this.props,n=r.collectionViewStore();if(!n)return;const i=r.normalizedFormatStore.state[t]||[],a=i.filter((e=>Boolean(e.visible))),s=i.filter((e=>!Boolean(e.visible))),l=[...a.map((e=>({...e,visible:o}))),...s.map((e=>({...e,visible:o})))];j.createAndCommit({userAction:"CollectionSettingsViewProperties.setAllPropertiesVisibility",environment:this.environment,perform:e=>{T.FH({stores:[n],update:{[t]:l},transaction:e})}})}primaryPropertyFormatAllowsHidingTitle(e){const{collectionContextStore:t}=this.props,o=t.normalizedFormatStore.state,r=(0,V.WY)({collectionContextStore:t});return"board"===r?(0,u.Lw)(o.board_cover):"gallery"===r?(0,u.Lw)(o.gallery_cover):"timeline"===r&&("timeline_table_properties"===e||(0,u.vP)(Boolean(o.timeline_show_table),o.timeline_table_properties||[]))}clearInput(){this.stores.inputStore.reset()}}function J(e){window.__c={n:"TimelineShowTableSwitcher"};const{collectionContextStore:t,onClick:o}=e,r=(0,a.O7)(),n=(0,s.Kw)(t.normalizedFormatStore),i=Boolean(n.timeline_show_table),l=(0,s.Kw)(t.permissionScopes);return(0,Y.jsx)(q.Z,{title:(0,Y.jsx)(f.FormattedMessage,{defaultMessage:"Show table",id:"database.viewSettings.propertiesTab.showTable"}),on:i,focused:!1,onClick:()=>{const e=t.collectionViewStore();e&&(j.createAndCommit({userAction:"CollectionSettingsViewProperties.TimelineShowTableSwitcher",environment:r,perform:t=>{T.FH({stores:[e],update:{timeline_show_table:!i,timeline_table_properties:[{property:"name",visible:!0}]},transaction:t})}}),null==o||o(),b.wd({environment:r,collectionContextStore:t,action:"timeline_toggle_show_table"}))},disabled:!l.canConfigureBlock,textWrapperStyle:{opacity:1}})}X.displayName="CollectionSettingsViewProperties";const ee=(0,f.injectIntl)(X)},75117:(e,t,o)=>{o.d(t,{Z:()=>L});var r=o(67294),n=o(83355),i=o(8848),a=o(63014),s=o(47453),l=o(37612),c=o(72126),d=o(5366),p=o(50906),u=o(12534),m=o(33929),h=o(87279),g=o(31339),y=o(42917),S=o(61053),v=o(60246),x=o(52275),C=o(31945),f=o(45959),b=o(77498),w=o(62045),k=o(50542),M=o(85893);class T extends n.Z{constructor(){super(...arguments),this.handleAccept=e=>{const{sort:t,collectionViewType:o}=this.props,r={...t,property:e};this.props.onChange(this.props.index,r),o&&p.wds(this.environment,{view_type:o,action:"set_sort_property"})}}renderComponent(){const{schema:e,sort:t}=this.props,o=e[t.property];if(o)return(0,M.jsxs)(r.Fragment,{children:[this.renderPropertyDropdown(o),this.renderSortDirection()]})}renderPropertyDropdown(e){const{device:t}=this.environment,{disabled:o}=this.props;return(0,M.jsx)(C.ZP,{popupType:t.isMobile?C.Z4.SlideUp:C.Z4.Popup,renderOrigin:t=>(0,M.jsx)(k.Z,{...t,propertySchema:e,disabled:o,textWrapperStyle:{opacity:1}}),render:e=>(0,M.jsx)(b.Z,{isRelationProperty:!1,schema:this.props.schema,onAccept:this.handleAccept,onClose:e.close}),disabled:o})}renderSortDirection(){const{sort:e,index:t,onChange:o,collectionViewType:r,intl:n,disabled:i}=this.props,a=e.direction,s={menuTitle:n.formatMessage({id:"collectionSortMenuRow.sortDirectionSelectMenu.title",defaultMessage:"Sort"}),items:[...v.C6],getKey:e=>e,selectedItem:a,disabled:i,onSelect:n=>{const i={...e,direction:n};o(t,i),r&&p.wds(this.environment,{view_type:r,action:"set_sort_direction"})},renderItem:e=>(0,M.jsx)(x.Z,{title:T.sortDirectionMessage[e.value],...e}),renderOrigin:e=>(0,M.jsx)(w.Z,{...e,placeholder:n.formatMessage({id:"collectionSortMenuRow.sortDirectionSelectMenu.placeholder",defaultMessage:"Empty"}),title:a&&T.sortDirectionMessage[a],disabled:i,desktopStyle:{opacity:1}})};return(0,M.jsx)(f.Z,{...s,mobileActionSheet:!0},"direction")}}T.displayName="CollectionSortMenuRow",T.sortDirectionMessage={ascending:(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Ascending",id:"collectionSortMenuRow.sortDirectionSelectMenu.ascending"}),descending:(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Descending",id:"collectionSortMenuRow.sortDirectionSelectMenu.descending"})};const j=(0,d.injectIntl)(T);var P=o(79131),V=o(73063),_=o(78140),F=o(28992),Z=o(53437),B=o(72495),A=o(26388);const I=(0,d.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.collectionSortMenu.inputPlaceholder"}});class R extends n.Z{constructor(){super(...arguments),this.handleDraggableListDrop=e=>{const{onChange:t}=this.props,{sorts:o}=this.props;t(c.oA(e.map((e=>o[parseInt(e)]))));const r=this.getCurrentViewType();r&&p.wds(this.environment,{action:"reorder_sorts",view_type:r})},this.handleChangeSort=(e,t)=>{const{onChange:o}=this.props,{sorts:r}=this.props;o(r.map(((o,r)=>r===e?t:o)));const n=this.getCurrentViewType();n&&p.wds(this.environment,{action:"update_sort",view_type:n})},this.handleDeleteSort=e=>{const{onChange:t}=this.props,{sorts:o}=this.props;t(o.filter(((t,o)=>o!==e)));const r=this.getCurrentViewType();r&&p.wds(this.environment,{action:"delete_sort",view_type:r})},this.handleDeleteAllSortsClick=()=>{const{onChange:e,onDeleteAll:t}=this.props;e([]),null==t||t();const o=this.getCurrentViewType();o&&p.wds(this.environment,{action:"delete_all_sorts",view_type:o})},this.handleNewPropertyAccept=e=>{var t;if(!e)return;const{schema:o,sorts:r,onChange:n}=this.props,i=null===(t=o[e])||void 0===t?void 0:t.type;n([...r,{property:e,direction:"ascending"}]);const a=this.getCurrentViewType();a&&p.wds(this.environment,{action:"create_sort_accept",view_type:a,property_type:i})}}renderComponent(){const{device:e}=this.environment,{schema:t,format:o,sorts:r,showDeleteAll:n}=this.props,i=!!Object.keys(t).some((e=>!r.find((t=>t.property===e)))),a=n&&r.length>0;return(0,M.jsxs)(M.Fragment,{children:[this.renderSorts(),(i||a)&&(0,M.jsxs)(B.Z,{children:[i&&(0,M.jsx)(C.ZP,{popupType:e.isMobile?Z.kQ.SlideUp:Z.kQ.Popup,renderOrigin:e=>(0,M.jsx)(y.Z,{icon:s.R,isGray:!0,title:(0,M.jsx)(d.FormattedMessage,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"}),...e}),render:n=>{let i;return i=e.isMobile?{menuType:h.og.ActionSheet}:{menuType:h.og.Popup,width:280,height:287},(0,M.jsx)(_.Z,{...i,children:(0,M.jsx)(S.Z,{schema:t,format:o,getProperties:()=>Object.keys(t).filter((e=>!r.find((t=>t.property===e)))),onAccept:e=>{this.handleNewPropertyAccept(e),n.close()},inputPlaceholder:m.default.formatMessage(I.inputPlaceholder)})})}}),a&&(0,M.jsx)(y.Z,{icon:l.y,isRed:!0,isGray:!0,title:(0,M.jsx)(d.FormattedMessage,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"}),onClick:this.handleDeleteAllSortsClick})]})]})}renderSorts(){const{device:e}=this.environment,{sorts:t}=this.props;if(e.isMobile)return t.map(((e,t)=>this.renderSort(e,t)));{const e=t.map(((e,t)=>t.toString()));return e.length>0&&(0,M.jsx)("div",{style:{marginBottom:2},children:(0,M.jsx)(P.ZP,{direction:"vertical",keys:e,renderKey:e=>this.renderSort(t[parseInt(e)],parseInt(e)),onDrop:this.handleDraggableListDrop})})}}renderSort(e,t){const{device:o}=this.environment,{schema:r,disabled:n,parentStore:i}=this.props;return o.isMobile?(0,M.jsxs)(B.Z,{children:[(0,M.jsx)(j,{index:t,sort:e,schema:r,parentStore:i,collectionViewType:this.getCurrentViewType(),onChange:this.handleChangeSort}),!n&&this.renderMobileDeleteButtonMenuItem(t)]},t):(0,M.jsx)(B.Z,{extraTopPadding:!0,desktopStyle:{padding:"8px 0 0 8px",width:"100%"},children:(0,M.jsx)(F.Z,{showDragHandle:!o.isMobile&&!n,title:(0,M.jsx)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},onMouseDown:u.$0,children:(0,M.jsx)(j,{index:t,sort:e,schema:r,parentStore:i,collectionViewType:this.getCurrentViewType(),onChange:this.handleChangeSort})}),right:!n&&this.renderDesktopDeleteButton(t)})},t)}renderMobileDeleteButtonMenuItem(e){return(0,M.jsx)(x.Z,{title:(0,M.jsx)("div",{style:{color:i.ZP.red},children:(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Delete",id:"database.viewSettings.sortTab.mobileDeleteButtonTitle"})}),icon:(0,M.jsx)(g.Z,{icon:l.y,styles:{color:i.ZP.red}}),onClick:()=>this.handleDeleteSort(e),focused:!1})}renderDesktopDeleteButton(e){return(0,M.jsx)(A.Z,{render:t=>(0,M.jsx)(V.Z,{icon:a.b,onClick:()=>this.handleDeleteSort(e),style:{marginRight:-6},...t}),renderTooltip:()=>(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Remove sort rule",id:"database.sortMenu.deleteButtonTooltip"})})}getCurrentViewType(){const{collectionViewStore:e}=this.props;return null==e?void 0:e.getType()}}R.displayName="CollectionSortMenu";const L=(0,d.injectIntl)(R)},66957:(e,t,o)=>{o.d(t,{Z:()=>p});var r=o(67294),n=o(480),i=o(86628),a=o(24405),s=o(87279),l=o(89728),c=o(85893);function d(e){let{tabs:t,selectedIndex:o,onChange:d,separatorIndexes:p,right:u,style:m,rightStyle:h,tabStyle:g,tabTitleStyle:y,tabBorderStyle:S,selectedTabStyle:v,readOnly:x,hideTabBorder:C}=e;window.__c={n:"TabBarMenuItem"};const f=(0,r.useContext)(s.Xp),{device:b,WindowSizeStore:w}=(0,n.O7)(),{safePaddingLeft:k,safePaddingRight:M}=(0,i.VK)((()=>({safePaddingLeft:w.getSafePaddingLeftCSS(16),safePaddingRight:w.getSafePaddingRightCSS(16)})),[w]),T=(0,a.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...g},o=`inset 0 -1px 0 ${e.regularDividerColor}`,r=f.menuType===s.og.Popup,n={fontSize:16,paddingTop:2,paddingLeft:r?16:k,paddingRight:r?16:M,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:C?void 0:o,...b.isMobile?n:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...m},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...v},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...S},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...h}}}),[f.menuType,b.isMobile,h,k,M,v,m,S,g,C]);return(0,c.jsxs)("div",{className:"hide-scrollbar",style:T.container,children:[t.map(((e,t)=>{const n=t===o;return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsxs)("div",{style:n?T.selectedTab:T.tab,children:[(0,c.jsx)(l.Z,{style:y,onClick:()=>d(t),disabled:x,mobileFeedback:b.isMobile,children:e}),n&&(0,c.jsx)("div",{style:T.border})]},`tabButton-${t}`),p&&p.includes(t)&&(0,c.jsx)("div",{style:T.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),u&&(0,c.jsx)("div",{style:T.rightContainer,children:u})]})}const p=r.memo(d)},60442:(e,t,o)=>{o.d(t,{Z:()=>l});o(67294);var r=o(83355),n=o(82990),i=o(47853),a=o(85893);class s extends r.Z{renderComponent(){const{imageURL:e,imageWidth:t,imageHeight:o}=this.props;if(e){const r=(0,i.D)(e);return(0,a.jsxs)("div",{style:{width:t||200,marginTop:4,marginBottom:4},children:[(0,a.jsx)("div",{style:{width:"100%",height:o||100,borderRadius:3,backgroundImage:`url(${r})`,backgroundSize:"cover",marginBottom:6}}),this.renderText()]})}return this.renderText({width:t})}renderText(e){const{caption:t,title:o}=this.props;return(0,a.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...e},children:[o&&(0,a.jsx)("header",{style:{fontWeight:n.Z.fontWeight.bold,marginBottom:4},children:o}),t]})}}s.displayName="TooltipThumbnailLayout";const l=s},72865:(e,t,o)=>{o.d(t,{D:()=>m});var r=o(67294),n=o(480),i=o(24405),a=o(97444),s=o(39699),l=o(43250),c=o(17809),d=o(24666),p=o(65187),u=o(85893);function m(e){window.__c={n:"SimpleFormulaValueTextInput"};const{value:t,disabled:o,onChange:m,multiline:h,placeholder:g,disableFormattingAndMentions:y,disableMobileActionBar:S,disableEmojiCommands:v,disableTemplateVariableMentions:x}=e,C=(0,n.O7)(),f=(0,i.yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:4,padding:h?"6px 10px":"4px 8px",overflow:"hidden",..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:h?{minHeight:60}:{whiteSpace:"pre"},placeholder:h?{minHeight:60}:{}})),[h]),b=(0,r.useCallback)((e=>{m({type:"simple",value:e})}),[m]),{store:w}=(0,c.Cl)({initialValue:null==t?void 0:t.value,onChange:b}),k=(0,r.useMemo)((()=>h?()=>{const e=d.default.state;"editing"===e.mode&&s.createAndCommit({userAction:"SimpleFormulaValueTextInput.handleEnter",environment:C,perform:t=>{a.hJ({environment:C,string:"\n",multiSelection:e.multiSelection,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})}:void 0),[C,h]);return(0,u.jsx)("div",{style:f.wrap,className:l.Wh_,children:(0,u.jsx)(p.Z,{placeholder:g,disabled:o,store:w,style:f.text,placeholderStyle:f.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:v,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:k,disableMobileActionBar:S,disableTemplateVariableMentions:x,...y?{disableDateMentions:!0,disableDateReminderMentions:!0,disableMentions:!0,disableStyleAnnotations:!0}:{}})})}},53498:(e,t,o)=>{o.d(t,{a:()=>be,K:()=>M});var r=o(67294),n=o(480),i=o(86628),a=o(66897),s=o(99036),l=o(80951),c=o(84619),d=o(78106),p=o(76218),u=o(149),m=o(19889),h=o(70203),g=o(97880),y=o(37867),S=o(60458),v=o(92864),x=o(89845),C=o(10009),f=o(22084),b=o(21396),w=o(75311),k=o(85893);function M(e){window.__c={n:"ValuePickerMenuToken"};const{token:t,contextStore:o,disabled:r,setCurrentTokens:M,currentSimpleFormulaValueTokens:T,context:j}=e,P=(0,n.Fy)(),V=(0,i.Kw)(o.compilationResultStore),_=(0,i.VK)((()=>{if((0,p.S3)(t)&&(0,h.IWo)(t)){const e=(0,h.zEN)(t);if(e)return(0,a.Hl)({pointer:{table:m.KJ,id:e},getRecordValue:o.context.parentRecordStore.getRecordValue})}}),[o.context.parentRecordStore,t]),F=(0,i.VK)((()=>(0,w._)(j)),[j]),Z=(0,i.VK)((()=>j.collectionStore.getSchema()[j.property]),[j]);if("string"==typeof t){if(!Z||!(0,s.t)(Z))return null;const e=(0,l.i7)((null==Z?void 0:Z.options)??[],t);if(!e)return(0,k.jsx)(y.Z,{isSingle:!1,showRemoveButton:!r,onClickRemove:()=>{null==M||M((0,p.Ck)(T,t))}},`deleted_option_value_${t}`);const o={value:e.value,color:e.color,isSingle:!1,showRemoveButton:!r,format:P.isMobile?c.l.Medium:c.l.Small,onClickRemove:()=>{null==M||M((0,p.Ck)(T,t))}};if((0,s.gB)(Z)){var B;const t=null===(B=Z.groups)||void 0===B||null===(B=B.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)})))||void 0===B?void 0:B.color;return(0,k.jsx)(f.F,{...o,groupColor:t})}return(0,k.jsx)(f.a,{...o})}if("boolean"==typeof t)return(0,k.jsx)(S.Z,{checked:t,disabled:!0,size:16,checkSize:12,style:{marginBottom:6}},t.toString());if((0,h.IWo)(t))return null!=_&&_.asActor?(0,k.jsx)(v.ZP,{actor:_,format:P.isMobile?v.ZP.Format.Medium:v.ZP.Format.Small,showRemoveButton:!r,onClickRemove:()=>{null==M||M((0,p.Ck)(T,t))},shouldShrink:!0,isSingle:!1},_.id):null;if((0,h.wjk)(t)){const e=(0,h.vmO)(t).id,o=u.x.isSuccess(V)?(0,d.vx)(V.value.valueTypes,e):void 0;return o?(0,k.jsx)(b.F,{value:o,format:c.l.Small,isSingle:!1,shouldShrink:!0,showRemoveButton:!r,onClickRemove:()=>{null==M||M((0,p.Ck)(T,t))}}):null}if((0,h.fpG)(t)){const e=T[0],t=e&&(0,p.S3)(e)&&(0,h.fpG)(e)?(0,h.zyO)(e):void 0;return t?(0,k.jsx)(x.Z,{value:t,dateFormat:F.dateFormat,timeFormat:F.timeFormat,style:{marginBottom:6}}):null}if((0,h.STW)(t)){const e=(0,h.TOT)(t);return e?(0,k.jsx)(C.Z,{format:P.isMobile?c.l.Medium:c.l.Small,blockId:e,shouldWrap:!1,shouldShrink:!0,isSingle:!1,parentStore:o.context.parentRecordStore,showRemoveButton:!r,onClickRemove:()=>{null==M||M((0,p.Ck)(T,t))}},e):null}(0,g.t1)(t)}o(57658);var T=o(23790),j=o(84116),P=o(58573),V=o(59054),_=o(72126),F=o(5366),Z=o(31299),B=o(17809),A=o(87279),I=o(29798),R=o(78140),L=o(32163),D=o(43765),K=o(40721),H=o(72495),O=o(78948),N=o(47082),W=o(30387),z=o(32426),E=o(24405),Q=o(5257),G=o(52275);function q(e){window.__c={n:"IconMenuItem"};const t=(0,E.yK)((e=>({icon:{width:14,fill:e.mediumIconColor},chevronRight:{width:12,fill:e.mediumIconColor}})),[]);return(0,k.jsx)(G.Z,{icon:e.icon(t.icon),title:e.title,focused:!1,right:(0,Q.o)(t.chevronRight),onClick:e.onClick})}function U(e){window.__c={n:"CustomFormulaItem"};const{value:t,onChange:o}=e,n=(0,r.useCallback)((()=>{o({type:"formula",value:null==t?void 0:t.value})}),[t,o]);return(0,k.jsx)(q,{icon:z.D,title:(0,k.jsx)(F.FormattedMessage,{...W.s.customFormula}),onClick:n})}o(21703);var Y=o(21202),$=o(35661),X=o(11470),J=o(26388);function ee(e){window.__c={n:"ValuePickerMenuItem"};const{token:t,contextStore:o,args:r,checkState:y,checkType:x,context:C,onCheckboxClick:w}=e,M=(0,n.Fy)(),T=(0,i.VK)((()=>o.context.parentRecordStore.getSpaceId()),[o.context.parentRecordStore]),j=(0,i.VK)((()=>{if((0,p.S3)(t)&&(0,h.IWo)(t)){const e=(0,h.zEN)(t);if(e)return(0,a.Hl)({pointer:{table:m.KJ,id:e},getRecordValue:o.context.parentRecordStore.getRecordValue})}}),[o.context.parentRecordStore,t]),P=(0,i.VK)((()=>C.collectionStore.getSchema()[C.property]),[C]),V=(0,i.VK)((()=>P&&(0,s.t)(P)?P.options??[]:[]),[P]),_=(0,i.VK)((()=>P&&(0,s.gB)(P)?P.groups??[]:[]),[P]),F=(0,i.Kw)(o.compilationResultStore),Z=Boolean(P&&(0,s.gB)(P)),B="single"===x?{checkState:y}:{icon:(0,k.jsx)(S.Z,{checked:y,size:14,onClick:w})};if("string"==typeof t){if(Z){const e=(0,l.i7)(V,t),o=_.find((t=>{var o;return e&&(null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id))}));return e?(0,k.jsx)(G.Z,{...r,...B,title:(0,k.jsx)(f.F,{format:M.isMobile?c.l.Large:c.l.Small,isSingle:!0,value:e.value,color:e.color,groupColor:null==o?void 0:o.color,shouldShrink:!0,showRemoveButton:!1},t),isTokenTitle:!0,...r}):null}{const e=(0,l.i7)(V,t);return e?(0,k.jsx)(G.Z,{...r,...B,title:(0,k.jsx)(f.a,{value:e.value,color:e.color,showRemoveButton:!1,isSingle:!0,shouldShrink:!0,format:M.isMobile?c.l.Large:c.l.Small}),isTokenTitle:!0,...r}):null}}if("boolean"==typeof t)return null;if((0,h.IWo)(t))return null!=j&&j.asActor&&j.table===m.KJ?(0,k.jsx)(G.Z,{...r,...B,title:(0,k.jsx)(v.vw,{isSingle:!0,shouldShrink:!0,format:M.isMobile?v.vw.Format.Large:v.vw.Format.Medium,userValue:j.asActor}),isTokenTitle:!0}):null;if((0,h.wjk)(t)){const e=(0,h.vmO)(t).id,o=u.x.isSuccess(F)?(0,d.vx)(F.value.valueTypes,e):void 0;return o?(0,k.jsx)(G.Z,{...B,title:(0,k.jsx)(J.Z,{renderTooltip:()=>(0,b.e)(o),placement:J.Z.Placement.Right,render:e=>(0,k.jsx)("div",{style:{display:"flex"},...e,children:(0,k.jsx)(b.F,{value:o,format:c.l.Medium,isSingle:!0,shouldShrink:!0})})}),...r}):null}if((0,h.fpG)(t))return null;if((0,h.STW)(t)){const e=(0,h.TOT)(t);if(!e)return null;if(!T)return null;const n=$.G.createChildStore(o.context.parentRecordStore,{table:Y.iU,id:e,spaceId:T});return(0,k.jsx)(X.Z,{store:n,checkState:y,hidePath:!0,...r})}(0,g.t1)(t)}function te(e){const{currentSimpleFormulaValueTokens:t,value:o,contextStore:r,setCurrentTokens:n,action:i,context:a,checkType:s,onCheckboxClick:l}=e;if(o.kind!==j.yp.ContextValue)throw new Error("Not implemented yet.");const c=Boolean(t.find((e=>(0,p.S3)(e)&&(0,h.wjk)(e)&&(0,h.vmO)(e).id===o.id))),d=(0,h._QF)({id:o.id}),u=()=>{n("append"===i?c?(0,p.Ck)(t,d):[...t,d]:[d]),null==l||l()};return{key:o.id,render:e=>(0,k.jsx)(ee,{token:d,contextStore:r,args:e,checkState:c,checkType:s,context:a,onCheckboxClick:u}),action:u}}function oe(e){var t,o;window.__c={n:"ValuePickerMenuBlockArray"};const{currentSimpleFormulaValueTokens:a,menuProps:l,onClose:c,onChange:d,contextStore:u,formulaTypecheckContextValues:m,context:g,showClearButton:y,showInputMenuItem:S,type:v}=e,x=(0,n.Fy)(),C=(0,F.useIntl)(),f=(0,n.O7)(),[b,z]=(0,r.useState)(""),E=(0,i.qz)(void 0,I.Z),{collectionStore:Q,property:G}=g,q=(0,w.M)(Q,G),Y=q(a,"first"),$=(0,i.VK)((()=>Q.getSchema()[g.property]),[Q,g.property]),X=(0,i.VK)((()=>!(!$||!(0,s.en)($))&&1===$.limit),[$]),J=(0,r.useMemo)((()=>{const e="relation"===(null==$?void 0:$.type)?(0,s.j0)($):void 0;return m.filter((t=>(0,T.uy)(t.type,{type:"block",collection:e},!0)))}),[m,$]),[oe]=(0,V.r5)((async()=>{const e=b?(0,P.ZP)(b,J,(e=>e.kind===j.yp.ContextValue?e.name:"")):J,{results:t}=await Z.df({environment:f,query:b,collectionId:v.collection.id,limit:20,spaceId:v.collection.spaceId,excludeTemplates:!0,source:"simple_formula_value_page_search",includePublicPagesWithoutExplicitAccess:!1,boostRecentlyViewedPages:!1});return{valueResults:e,pageResults:t}}),[f,b,J,v],{debounce:Z.vp}),re=(0,r.useCallback)((()=>{z(""),E.setState({...E.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[E]),ne=(0,r.useCallback)((e=>{const t=q(e,"last");d({type:"simple",value:(0,p.iC)(t)}),re(),X&&c()}),[q,d,re,X,c]),ie=(0,i.VK)((()=>(0,B.NY)()),[]),ae=_.oA(Y.map(((e,t)=>(0,k.jsx)(M,{token:e,contextStore:u,disabled:!1,currentSimpleFormulaValueTokens:Y,setCurrentTokens:ne,context:g},t)))),se=(0,k.jsx)(N.Z,{focus:!x.isMobile||void 0,focusAfterAnimation:!0,format:N.Z.Format.FilterValue,tokens:ae,placeholder:C.formatMessage(W.s.pageSearchPlaceholder),onRemoveLastToken:()=>{ne(Y.slice(0,Y.length-1))},onClearButtonClick:()=>{ne([])},value:b,onChange:e=>{z(e.target.value)},dontShowBorderBottom:x.isAndroid,showClearButton:y}),le=void 0!==(null==l?void 0:l.header)?l.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:C.formatMessage(W.s.genericMenuHeader)});let ce;ce=x.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(K.DoneMenuText,{}),onClickRight:c}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,paddingTop:0,footer:ie&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const de={...ce,...l,header:x.isMobile?null:le},pe=X?"single":"multi",ue=[],me=[..._.oA(((null===(t=oe.value)||void 0===t?void 0:t.valueResults)||[]).map((e=>te({currentSimpleFormulaValueTokens:Y,value:e,setCurrentTokens:ne,contextStore:u,action:"append",context:g,checkType:pe})))),..._.oA(((null===(o=oe.value)||void 0===o?void 0:o.pageResults)||[]).map((e=>{const t=Boolean(Y.find((t=>(0,p.S3)(t)&&(0,h.STW)(t)&&(0,h.TOT)(t)===e))),o=(0,h.$0A)(e,v.collection.spaceId),r=()=>{ne(t?(0,p.Ck)(Y,o):[...Y,o])};return{key:e,render:e=>(0,k.jsx)(ee,{token:o,contextStore:u,args:e,checkState:t,checkType:pe,context:g,onCheckboxClick:r}),action:r}})))];if(S){const e=Boolean(le);ue.push({key:"search-input",render:t=>(0,k.jsx)(H.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>se}]})}if(me.length>0){const e=Boolean(le)||S;ue.push({key:"values",render:t=>(0,k.jsx)(H.Z,{topBorder:e,...t}),items:me})}return(0,k.jsxs)(R.Z,{...de,children:[oe.error&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.somethingWentWrong})})}),0===ue.length&&oe.value&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.noResults})})}),!oe.value&&!oe.error&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(O.Z,{})}),ue.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:ue,store:E})]})}function re(e){window.__c={n:"ValuePickerMenuCheckbox"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:a,formulaTypecheckContextValues:s,menuProps:l,onChange:c,onClose:d}=e,u=(0,F.useIntl)(),m=(0,n.Fy)(),h=s.filter((e=>"checkbox"===e.type.type)),g=(0,r.useCallback)((e=>{c({type:"simple",value:void 0!==e[0]?(0,p.YD)(e[0]):void 0})}),[c]),y=(0,r.useCallback)((e=>{g(e),d()}),[g,d]),S=(0,i.VK)((()=>(0,B.NY)()),[]),v=_.oA(h.map((e=>te({currentSimpleFormulaValueTokens:a,value:e,setCurrentTokens:y,contextStore:o,action:"replace",context:t,checkType:"single"})))),x=[],C=a.some((e=>!0===e)),f=[...v,...[{key:0,render:e=>(0,k.jsx)(G.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.unchecked}),checkState:!C,...e}),action:()=>{y([!1])}},{key:1,render:e=>(0,k.jsx)(G.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.checked}),checkState:C,...e}),action:()=>{y([!0])}}]],b=void 0!==(null==l?void 0:l.header)?l.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:u.formatMessage(W.s.genericMenuHeader)}),w=Boolean(b);let M;x.push({key:"checkbox",render:e=>(0,k.jsx)(H.Z,{...e,topBorder:w}),items:f}),M=m.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(K.DoneMenuText,{}),onClickRight:d}:{header:b,menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:S&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const T={...M,...l,header:m.isMobile?null:b};return(0,k.jsx)(R.Z,{...T,children:(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:x})})}var ne=o(53016),ie=o(40506),ae=o(12392),se=o(28020),le=o(77907),ce=o(73063),de=o(89728);function pe(e){window.__c={n:"ValueDatePicker"};const{currentSimpleFormulaValueTokens:t,disabled:o,setInDatePicker:n,onClose:a,setCurrentTokens:s,context:l}=e,c=t[0],d=c&&(0,p.S3)(c)&&h.fpG(c)?h.zyO(c):void 0,u=(0,F.useIntl)(),m=(0,i.Kw)(se.AK),g=(0,r.useCallback)((()=>{n(!1)}),[n]),y=(0,r.useCallback)((e=>{e&&(0,ie.U3)(e)?s([h.pZr(e)]):s([])}),[s]),S=(0,E.yK)((e=>({header:{display:"flex",alignItems:"center",fontSize:12,paddingInline:14,color:e.mediumTextColor,marginTop:8,fontWeight:500},iconWrap:{width:18,height:18,marginRight:4},icon:{width:12,height:12},title:{flex:"1 1 auto"}})),[]),v=(0,i.VK)((()=>(0,w._)(l)),[l]);return(0,k.jsx)(le.DependencyConsumer,{dependency:le.deps.menus,children:e=>{let{DatePropertyMenu:t}=e;return(0,k.jsx)(t,{firstDayOfWeek:m,value:d,canConfigureCollection:!1,onChangeValue:y,dateFormat:v.dateFormat,timeFormat:v.timeFormat,onDismiss:a,disabled:o,shouldShowReminder:!1,header:(0,k.jsxs)("div",{style:S.header,children:[(0,k.jsx)(ce.Z,{ariaLabel:u.formatMessage(W.s.back),icon:ae.S,onClick:g,style:S.iconWrap,iconStyle:S.icon}),(0,k.jsx)("span",{style:S.title,children:(0,k.jsx)(F.FormattedMessage,{...W.s.pickADate})}),(0,k.jsx)(de.Z,{onClick:a,isBlue:!0,children:(0,k.jsx)(K.DoneMenuText,{})})]}),isTemplatePage:!1})}})}function ue(e){window.__c={n:"ValuePickerMenuDate"};const{currentSimpleFormulaValueTokens:t,onClose:o,onChange:a,contextStore:s,formulaTypecheckContextValues:l,context:c,menuProps:d}=e,u=(0,F.useIntl)(),m=(0,n.Fy)(),[h,g]=(0,r.useState)(!1),y=l.filter((e=>"date"===e.type.type)),S=(0,r.useCallback)((e=>{a({type:"simple",value:void 0!==e[0]?(0,p.YD)(e[0]):void 0})}),[a]),v=(0,r.useCallback)((e=>{S(e),o()}),[S,o]),x=(0,r.useCallback)((()=>{g(!0)}),[]),C=(0,r.useCallback)((()=>{S([]),o()}),[S,o]),f=(0,i.VK)((()=>(0,B.NY)()),[]);if(h)return(0,k.jsx)(pe,{...e,setInDatePicker:g,setCurrentTokens:S,currentSimpleFormulaValueTokens:t});const b=void 0!==(null==d?void 0:d.header)?d.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:u.formatMessage(W.s.genericMenuHeader)}),w=_.oA(y.map((e=>te({currentSimpleFormulaValueTokens:t,value:e,setCurrentTokens:v,contextStore:s,action:"replace",context:c,checkType:"single"})))),M=[];if(w.length>0){const e=Boolean(b);M.push({key:"values",render:t=>(0,k.jsx)(H.Z,{topBorder:e,...t}),items:w})}const T=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(H.Z,{topBorder:!0,children:[(0,k.jsx)(q,{icon:ne.V,title:(0,k.jsx)(F.FormattedMessage,{...W.s.pickADate}),onClick:x}),f&&(0,k.jsx)(U,{...e})]}),t.length>0&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(G.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.clear}),focused:!1,onClick:C})})]});let j;j=m.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(K.DoneMenuText,{}),onClickRight:o,footer:T}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:T,disableHeaderBorder:!0};const P={...j,...d,header:m.isMobile?null:b};return(0,k.jsx)(R.Z,{...P,children:(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:M})})}var me=o(68894);function he(e){window.__c={n:"ValuePickerMenuNumber"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:a,formulaTypecheckContextValues:s,menuProps:l,onChange:c,onClose:d,value:u}=e,m=(0,F.useIntl)(),g=(0,n.Fy)(),y=s.filter((e=>"number"===e.type.type)),S=(0,r.useCallback)((e=>{c({type:"simple",value:e})}),[c]),v=(0,r.useCallback)((e=>{S(e),d()}),[S,d]),x=(0,r.useCallback)((e=>{const t=e.target.value;let o;o=""===t?void 0:[[t]],S(o)}),[S]),C=(0,r.useCallback)((e=>{const t=_.U2(e,"event.target.value");let o;o="string"==typeof t&&""!==t?[[t]]:void 0,v(o)}),[v]),f=(0,r.useCallback)((e=>{const t=void 0!==e[0]?(0,p.YD)(e[0]):void 0;v(t)}),[v]),b=(0,i.VK)((()=>(0,B.NY)()),[]),w=[],M=[...[{action:C,key:"input",render:e=>{const t=a[0],o="string"==typeof t?t:(0,h.QaF)(null==u?void 0:u.value);return(0,k.jsx)(me.ZP,{...e,focus:!0,onChange:x,onClick:void 0,value:o})}}],..._.oA(y.map((e=>te({currentSimpleFormulaValueTokens:a,value:e,setCurrentTokens:f,contextStore:o,action:"replace",context:t,checkType:"single"}))))],T=void 0!==(null==l?void 0:l.header)?l.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:m.formatMessage(W.s.genericMenuHeader)});let j;w.push({key:"textbox",render:e=>(0,k.jsx)(H.Z,{...e}),items:M}),j=g.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(K.DoneMenuText,{}),onClickRight:d}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:b&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const P={...j,...l,header:g.isMobile?null:T};return(0,k.jsx)(R.Z,{...P,children:(0,k.jsx)(L.Z,{initialFocus:0,sections:w,type:L.i.Vertical})})}var ge=o(1302);function ye(e){var t,o;window.__c={n:"ValuePickerMenuPersonArray"};const{context:a,contextStore:l,currentSimpleFormulaValueTokens:c,formulaTypecheckContextValues:d,menuProps:u,onChange:m,onClose:g,showClearButton:y,showInputMenuItem:S}=e,v=(0,n.Fy)(),x=(0,F.useIntl)(),C=(0,n.O7)(),{collectionStore:f,property:b}=a,[z,E]=(0,r.useState)(""),Q=(0,i.qz)(void 0,I.Z),G=(0,w.M)(f,b),q=G(c,"first"),Y=(0,i.VK)((()=>{const e=f.getSchema()[a.property];return!(!e||!(0,s.en)(e))&&1===e.limit}),[f,a]),$=d.filter((e=>(0,T.uy)(e.type,{type:"person"}))),[X]=(0,V.r5)((async()=>({valueResults:z?(0,P.ZP)(z,$,(e=>e.kind===j.yp.ContextValue?e.name:"")):$,userResults:(await Z.Yu({environment:C,query:z,membersOnly:!1})).map((e=>e.id)).slice(0,20)})),[C,z,$],{debounce:Z.vp}),J=(0,r.useCallback)((()=>{E(""),Q.setState({...Q.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[Q]),oe=(0,r.useCallback)((e=>{const t=G(e,"last");m({type:"simple",value:(0,p.iC)(t)}),J()}),[m,J,G]),re=(0,i.VK)((()=>(0,B.NY)()),[]),ne=_.oA(q.map(((e,t)=>(0,k.jsx)(M,{token:e,contextStore:l,disabled:!1,currentSimpleFormulaValueTokens:q,setCurrentTokens:oe,context:a},t)))),ie=(0,k.jsx)(N.Z,{focus:!v.isMobile||void 0,focusAfterAnimation:!0,format:N.Z.Format.FilterValue,tokens:ne,placeholder:x.formatMessage(W.s.personSearchPlaceholder),onRemoveLastToken:()=>{oe(q.slice(0,q.length-1))},onClearButtonClick:()=>{oe([])},value:z,onChange:e=>{E(e.target.value)},dontShowBorderBottom:v.isAndroid,showClearButton:y}),ae=void 0!==(null==u?void 0:u.header)?u.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:x.formatMessage(W.s.genericMenuHeader)});let se;se=v.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(K.DoneMenuText,{}),onClickRight:g}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:re&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const le={...se,...u,header:v.isMobile?null:ae},ce=Y?"single":"multi",de=[..._.oA(((null===(t=X.value)||void 0===t?void 0:t.valueResults)||[]).map((e=>te({currentSimpleFormulaValueTokens:q,value:e,setCurrentTokens:oe,contextStore:l,action:"append",context:a,checkType:ce,onCheckboxClick:()=>{Y&&ge.default.afterNextFlush((()=>{g()}))}})))),..._.oA(((null===(o=X.value)||void 0===o?void 0:o.userResults)||[]).map((e=>{const t=Boolean(q.find((t=>(0,p.S3)(t)&&(0,h.IWo)(t)&&(0,h.zEN)(t)===e))),o=(0,h.tEo)(e),r=()=>{oe(t?(0,p.Ck)(q,o):[...q,o]),Y&&ge.default.afterNextFlush((()=>{g()}))};return{key:e,render:e=>(0,k.jsx)(ee,{token:o,contextStore:l,args:e,checkState:t,checkType:ce,context:a,onCheckboxClick:r}),action:r}})))],pe=[];if(S){const e=Boolean(ae);pe.push({key:"search-input",render:t=>(0,k.jsx)(H.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>ie}]})}if(de.length>0){const e=Boolean(ae)||S;pe.push({key:"users",render:t=>(0,k.jsx)(H.Z,{topBorder:e,...t}),items:de})}return(0,k.jsxs)(R.Z,{...le,children:[X.error&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.somethingWentWrong})})}),0===pe.length&&X.value&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.noResults})})}),!X.value&&!X.error&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(O.Z,{})}),pe.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:pe,store:Q})]})}function Se(e){window.__c={n:"ValuePickerMenuSelect"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:a,formulaTypecheckContextValues:l,isSingle:c,menuProps:d,onChange:u,onClose:m,showClearButton:h,showInputMenuItem:y,type:S}=e,v=(0,n.Fy)(),x=(0,F.useIntl)(),[C,f]=(0,r.useState)(""),b=(0,i.qz)(void 0,I.Z),w=$.NW.createChildStore(o.context.parentRecordStore,S.collection),V=(0,i.VK)((()=>w.getSchema()[S.property]),[w,S]),Z=(0,i.VK)((()=>V&&(0,s.gB)(V)?V.groups??[]:[]),[V]),O=(0,i.VK)((()=>V&&(0,s.t)(V)&&V.options||[]),[V]),z=l.filter((e=>(0,T.uy)(e.type,{type:"select",collection:S.collection,property:S.property}))),E=(0,i.VK)((()=>({valueResults:C?(0,P.ZP)(C,z,(e=>e.kind===j.yp.ContextValue?e.name:"")):z,selectResults:C?(0,P.ZP)(C,O,(e=>e.value)):O})),[C,z,O]),Q=(0,r.useCallback)((()=>{f(""),b.setState({...b.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[b]),G=(0,r.useCallback)((e=>{u({type:"simple",value:c?(0,p.YD)(e[0]):(0,p.iC)(e)}),Q()}),[u,Q,c]),q=(0,i.VK)((()=>(0,B.NY)()),[]),Y=_.oA(a.map(((e,r)=>(0,k.jsx)(M,{token:e,contextStore:o,disabled:!1,currentSimpleFormulaValueTokens:a,setCurrentTokens:G,context:t},r)))),X=void 0!==(null==d?void 0:d.header)?d.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:x.formatMessage(W.s.genericMenuHeader)}),J=(0,k.jsx)(N.Z,{focus:!v.isMobile||void 0,focusAfterAnimation:!0,format:N.Z.Format.FilterValue,tokens:Y,placeholder:x.formatMessage(W.s.searchPlaceHolder),onRemoveLastToken:()=>{G(a.slice(0,a.length-1))},onClearButtonClick:()=>{G([])},value:C,onChange:e=>{f(e.target.value)},dontShowBorderBottom:v.isAndroid,showClearButton:h}),oe=[];if(y){const e=Boolean(X);oe.push({key:"search-input",render:t=>(0,k.jsx)(H.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>J}]})}const re=Boolean(V&&(0,s.gB)(V)),ne={automationContextValues:E.valueResults??[],onClose:m,context:t,contextStore:o,currentSimpleFormulaValueTokens:a,isSingle:c,groupOptions:Z,selectOptions:E.selectResults??[],setCurrentTokens:G},ie=re?function(e){const{automationContextValues:t,onClose:o,context:r,contextStore:n,currentSimpleFormulaValueTokens:i,isSingle:a,groupOptions:s,selectOptions:l,setCurrentTokens:c}=e,d=[],u=a?"single":"multi",m=_.oA(t.map((e=>te({currentSimpleFormulaValueTokens:i,value:e,setCurrentTokens:c,contextStore:n,action:a?"replace":"append",context:r,checkType:u,onCheckboxClick:()=>{a&&ge.default.afterNextFlush((()=>{o()}))}}))));m.length>0&&d.push({key:"automation-variables",render:e=>(0,k.jsx)(H.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.valuesFromThisAutomation}),topBorder:!0,...e}),items:m});const h=new Map(l.map((e=>[e.id,e]))),y=s.map((e=>{const t=(e.optionIds??[]).map((e=>h.get(e))).filter(g.$K).map((e=>{const t=Boolean(i.find((t=>"string"==typeof t&&t===e.value))),s=()=>{c(a?t?[]:[e.value]:t?(0,p.Ck)(i,e.value):[...i,e.value]),a&&ge.default.afterNextFlush((()=>{o()}))};return{key:e.id,render:o=>(0,k.jsx)(ee,{token:e.value,contextStore:n,args:o,checkState:t,checkType:u,context:r,onCheckboxClick:s}),action:s}}));return{key:e.id,items:t,render:t=>(0,k.jsx)(H.Z,{title:e.name,topBorder:!0,...t})}})).filter((e=>e.items.length>0));return d.push(...y),d}(ne):function(e){const{automationContextValues:t,onClose:o,context:r,contextStore:n,currentSimpleFormulaValueTokens:i,isSingle:a,selectOptions:s,setCurrentTokens:l}=e,c=[],d=a?"single":"multi",u=_.oA(t.map((e=>te({currentSimpleFormulaValueTokens:i,value:e,setCurrentTokens:l,contextStore:n,action:a?"replace":"append",context:r,checkType:d,onCheckboxClick:()=>{a&&ge.default.afterNextFlush((()=>{o()}))}})))),m=_.oA(s.map((e=>{const t=Boolean(i.find((t=>"string"==typeof t&&t===e.value))),s=()=>{l(a?t?[]:[e.value]:t?(0,p.Ck)(i,e.value):[...i,e.value]),a&&ge.default.afterNextFlush((()=>{o()}))};return{key:e.id,render:o=>(0,k.jsx)(ee,{token:e.value,contextStore:n,args:o,checkState:t,checkType:d,context:r,onCheckboxClick:s}),action:s}}))),h=[...u,...m];h.length>0&&c.push({key:"options",render:e=>(0,k.jsx)(H.Z,{topBorder:!0,...e}),items:h});return c}(ne);let ae;oe.push(...ie),ae=v.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(K.DoneMenuText,{}),onClickRight:m}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,paddingTop:0,footer:q&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const se={...ae,...d,header:v.isMobile?null:X};return(0,k.jsxs)(R.Z,{...se,children:[0===oe.length&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...W.s.noResults})})}),oe.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:oe,store:b})]})}var ve=o(65187),xe=o(43250),Ce=o(28992);function fe(e){window.__c={n:"ValuePickerMenuText"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:a,formulaTypecheckContextValues:s,menuProps:l,onChange:c,onClose:d,value:u,disableEmojiCommands:m,disableFormattingAndMentions:h,disableMobileActionBar:g,disableTemplateVariableMentions:y}=e,S=(0,F.useIntl)(),{isMobile:v}=(0,n.Fy)(),x=(0,E.yK)((e=>({wrap:{background:e.inputBackground,borderRadius:4,boxShadow:e.inputBoxShadow,lineHeight:"24px",padding:1,marginBlock:v?12:0},text:{maxHeight:120,overflow:"auto",padding:"4px 10px"}})),[v]),C=(0,i.VK)((()=>(0,B.NY)()),[]),f=(0,r.useMemo)((()=>s.filter((e=>"text"===e.type.type))),[s]),b=(0,r.useCallback)((e=>{c({type:"simple",value:e})}),[c]),w=(0,r.useCallback)((e=>{b(e),d()}),[b,d]),M=(0,r.useCallback)((e=>{const t=void 0!==e[0]?(0,p.YD)(e[0]):void 0;w(t)}),[w]),{store:T}=(0,B.Cl)({initialValue:null==u?void 0:u.value,onChange:b}),j=[],P=[..._.oA(f.map((e=>te({currentSimpleFormulaValueTokens:a,value:e,setCurrentTokens:M,contextStore:o,action:"replace",context:t,checkType:"single"})))),...[{action:_.ZT,key:"input",render:e=>(0,k.jsx)(Ce.Z,{...e,title:(0,k.jsx)("div",{className:xe.Wh_,style:x.wrap,children:(0,k.jsx)(ve.Z,{disableComment:!0,disabled:!1,disableEmbedMenu:!0,disableEmojiCommands:m,disableMobileActionBar:g,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableSlashCommands:!0,disableTemplateVariableMentions:y,...h?{disableDateMentions:!0,disableDateReminderMentions:!0,disableMentions:!0,disableStyleAnnotations:!0}:{},onEnter:d,pasteBehavior:"inline",store:T,style:x.text})})})}]],V=void 0!==(null==l?void 0:l.header)?l.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:S.formatMessage(W.s.genericMenuHeader)});let Z;j.push({key:"textbox",render:e=>(0,k.jsx)(H.Z,{...e}),items:P}),Z=v?{menuType:A.og.Modal,right:(0,k.jsx)(K.DoneMenuText,{}),onClickRight:d}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:C&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const I={...Z,...l,header:v?null:V};return(0,k.jsx)(R.Z,{...I,children:(0,k.jsx)(L.Z,{initialFocus:0,sections:j,type:L.i.Vertical})})}function be(e){const{showClearButton:t,showInputMenuItem:o,type:r}=e;return"text"===r.type?(0,k.jsx)(fe,{...e,type:r}):"number"===r.type?(0,k.jsx)(he,{...e,type:r}):"checkbox"===r.type?(0,k.jsx)(re,{...e,type:r}):"date"===r.type?(0,k.jsx)(ue,{...e,type:r}):"person_array"===r.type?(0,k.jsx)(ye,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:r}):"block_array"===r.type?(0,k.jsx)(oe,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:r}):"select"===r.type?(0,k.jsx)(Se,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:r,isSingle:!0}):"select_array"===r.type?(0,k.jsx)(Se,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:r,isSingle:!1}):void(0,g.t1)(r)}},75311:(e,t,o)=>{o.d(t,{M:()=>l,_:()=>c});var r=o(67294),n=o(86628),i=o(99036),a=o(40506),s=o(97880);function l(e,t){const o=(0,n.VK)((()=>{const o=e.getSchema()[t];let r;return o&&(0,i.en)(o)&&(r=o.limit),r}),[e,t]);return(0,r.useCallback)(((e,t)=>(0,s.$K)(o)?"first"===t?e.slice(0,o):"last"===t?e.slice(-o):void(0,s.t1)(t):e),[o])}function c(e){var t;const o=null===(t=e.collectionStore.getSchema())||void 0===t?void 0:t[e.property];return o&&"date"===o.type?{dateFormat:o.date_format||a.sF,timeFormat:o.time_format||a.c_}:{dateFormat:a.sF,timeFormat:a.c_}}},30387:(e,t,o)=>{o.d(t,{s:()=>r});const r=(0,o(5366).defineMessages)({back:{defaultMessage:"Back",id:"formulas.SimpleFormulaValuePicker.back"},valuesFromThisAutomation:{defaultMessage:"From this automation",id:"formulas.SimpleFormulaValuePicker.valuesFromThisAutomation"},pickADate:{defaultMessage:"Pick a date",id:"formulas.SimpleFormulaValuePicker.pickADate"},clear:{defaultMessage:"Clear",id:"formulas.SimpleFormulaValuePicker.clear"},unchecked:{defaultMessage:"Unchecked",id:"formulas.SimpleFormulaValuePicker.checkbox.unchecked"},checked:{defaultMessage:"Checked",id:"formulas.SimpleFormulaValuePicker.checkbox.checked"},checkboxOptions:{defaultMessage:"Checkbox options",id:"formulas.SimpleFormulaValuePicker.checkbox.sectionHeader"},searchPlaceHolder:{defaultMessage:"Select one or more options…",id:"formulas.SimpleFormulaValuePicker.select.searchPlaceholder"},selectOptionsSectionHeader:{defaultMessage:"Select an option",id:"formulas.SimpleFormulaValuePicker.select.sectionHeader"},noResults:{defaultMessage:"No results",id:"formulas.simpleValuePicker.noResults"},pageSearchPlaceholder:{defaultMessage:"Search for one or more pages…",id:"formulas.SimpleFormulaValuePicker.pages.searchPlaceholder"},pages:{defaultMessage:"Pages",id:"formulas.SimpleFormulaValuePicker.pages.sectionHeader"},somethingWentWrong:{defaultMessage:"Something went wrong.",id:"formulas.simpleValuePicker.errorMessage"},personSelect:{defaultMessage:"Select...",id:"formulas.SimpleFormulaValuePicker.chooseAValue"},personSearchPlaceholder:{defaultMessage:"Search for one or more people…",id:"formulas.SimpleFormulaValuePicker.people.searchPlaceholder"},customFormula:{defaultMessage:"Custom formula",id:"formulas.SimpleFormulaValuePicker.customFormula"},peopleInWorkspace:{defaultMessage:"People",id:"formulas.SimpleFormulaValuePicker.people.sectionHeader"},genericMenuHeader:{defaultMessage:"Set property to",id:"formulas.SimpleFormulaValuePicker.genericMenuHeader"}})},28267:(e,t,o)=>{o.d(t,{X:()=>i});var r=o(67294),n=o(77794);function i(e){const[t,o]=(0,r.useState)(void 0);return(0,r.useEffect)((()=>{if(!e.current)return;const t=new n.E;return t.observe(e.current),t.rect.addListener((e=>{o(e.state)})),()=>{t.destroy()}}),[e]),t}},36857:(e,t,o)=>{o.d(t,{Z:()=>i});var r=o(49085);class n extends r.default{getInitialState(){return{pageId:void 0}}}const i=new n},65955:(e,t,o)=>{o.d(t,{o:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("addPage",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},13148:(e,t,o)=>{o.d(t,{U:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("close",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},63014:(e,t,o)=>{o.d(t,{b:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("collectionDeleteRule",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M12 3.27273L10.7273 2L7 5.72727L3.27273 2L2 3.27273L5.72727 7L2 10.7273L3.27273 12L7 8.27273L10.7273 12L12 10.7273L8.27273 7L12 3.27273Z"})})},1230:(e,t,o)=>{o.d(t,{H:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("insertDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M9.55548 13.0343H14.2085C14.5315 13.0343 14.7951 13.2913 14.7951 13.6142C14.7951 13.9372 14.5315 14.1942 14.2085 14.1942H9.55548C9.23254 14.1942 8.9755 13.9372 8.9755 13.6142C8.9755 13.2913 9.23254 13.0343 9.55548 13.0343ZM1.21167 9.67959C1.21167 9.09961 1.52802 8.74371 2.0421 8.74371C2.55617 8.74371 2.87911 9.11279 2.87911 9.65982V10.7868C2.87911 10.945 2.96479 11.0373 3.12956 11.0373H4.70473V10.365C4.70473 9.818 5.26494 9.60709 5.68675 9.94322L7.56509 11.4525C7.84849 11.6766 7.84849 12.0786 7.56509 12.2961L5.68675 13.812C5.25176 14.1679 4.70473 13.9569 4.70473 13.3836V12.7047H2.93184C1.89051 12.7047 1.21167 12.0984 1.21167 11.057V9.67959ZM9.55548 9.58073H14.2085C14.5315 9.58073 14.7951 9.83777 14.7951 10.1607C14.7951 10.4837 14.5315 10.7407 14.2085 10.7407H9.55548C9.23254 10.7407 8.9755 10.4837 8.9755 10.1607C8.9755 9.83777 9.23254 9.58073 9.55548 9.58073ZM1.78506 6.12721H14.2085C14.5315 6.12721 14.7951 6.38425 14.7951 6.70719C14.7951 7.03014 14.5315 7.28717 14.2085 7.28717H1.78506C1.46211 7.28717 1.20508 7.03014 1.20508 6.70719C1.20508 6.38425 1.46211 6.12721 1.78506 6.12721ZM1.78506 2.68028H14.2085C14.5315 2.68028 14.7951 2.93073 14.7951 3.25367C14.7951 3.5832 14.5315 3.83365 14.2085 3.83365H1.78506C1.46211 3.83365 1.20508 3.5832 1.20508 3.25367C1.20508 2.93073 1.46211 2.68028 1.78506 2.68028Z"})})},41490:(e,t,o)=>{o.d(t,{F:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("insertUp",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M9.55566 3.61987H14.2095C14.5325 3.61987 14.7961 3.36279 14.7961 3.03979C14.7961 2.7168 14.5325 2.45972 14.2095 2.45972H9.55566C9.23267 2.45972 8.97559 2.7168 8.97559 3.03979C8.97559 3.36279 9.23267 3.61987 9.55566 3.61987ZM1.21045 6.9751C1.21045 7.55518 1.52686 7.91113 2.04102 7.91113C2.55518 7.91113 2.87817 7.54199 2.87817 6.99487V5.86768C2.87817 5.70947 2.96387 5.61719 3.12866 5.61719H4.7041V6.28955C4.7041 6.83667 5.2644 7.04761 5.68628 6.71143L7.56494 5.2019C7.84839 4.97778 7.84839 4.57568 7.56494 4.35815L5.68628 2.84204C5.25122 2.48608 4.7041 2.69702 4.7041 3.27051V3.94946H2.93091C1.8894 3.94946 1.21045 4.55591 1.21045 5.59741V6.9751ZM9.55566 7.07397H14.2095C14.5325 7.07397 14.7961 6.81689 14.7961 6.4939C14.7961 6.1709 14.5325 5.91382 14.2095 5.91382H9.55566C9.23267 5.91382 8.97559 6.1709 8.97559 6.4939C8.97559 6.81689 9.23267 7.07397 9.55566 7.07397ZM1.78394 10.5281H14.2095C14.5325 10.5281 14.7961 10.271 14.7961 9.948C14.7961 9.625 14.5325 9.36792 14.2095 9.36792H1.78394C1.46094 9.36792 1.20386 9.625 1.20386 9.948C1.20386 10.271 1.46094 10.5281 1.78394 10.5281ZM1.78394 13.9756H14.2095C14.5325 13.9756 14.7961 13.7251 14.7961 13.4021C14.7961 13.0725 14.5325 12.822 14.2095 12.822H1.78394C1.46094 12.822 1.20386 13.0725 1.20386 13.4021C1.20386 13.7251 1.46094 13.9756 1.78394 13.9756Z"})})},16184:(e,t,o)=>{o.d(t,{Q:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},62208:(e,t,o)=>{o.d(t,{z:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("loop",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},22686:(e,t,o)=>{o.d(t,{f:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("person",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,o)=>{o.d(t,{X:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,n.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,n.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},53470:(e,t,o)=>{o.d(t,{H:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.I)("rename",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M14.7881 2.5752L15.3008 2.04199C15.5605 1.76855 15.5742 1.39941 15.3213 1.13965L15.1436 0.955078C14.9111 0.722656 14.5283 0.763672 14.2754 1.00977L13.749 1.5293L14.7881 2.5752ZM6.68066 9.87598L8.0752 9.28809L14.2891 3.06738L13.25 2.03516L7.03613 8.25586L6.4209 9.60254C6.35254 9.75977 6.52344 9.9375 6.68066 9.87598ZM4.09668 14.4355H12.0674C13.373 14.4355 14.1387 13.6768 14.1387 12.2207V4.99512L12.7988 6.33496V12.1045C12.7988 12.7676 12.4434 13.1025 11.9854 13.1025H4.17871C3.54297 13.1025 3.19434 12.7676 3.19434 12.1045V4.49609C3.19434 3.83301 3.54297 3.49805 4.17871 3.49805H10.0234L11.3633 2.1582H4.09668C2.62695 2.1582 1.85449 2.91699 1.85449 4.37988V12.2207C1.85449 13.6836 2.62695 14.4355 4.09668 14.4355Z"})})}}]);