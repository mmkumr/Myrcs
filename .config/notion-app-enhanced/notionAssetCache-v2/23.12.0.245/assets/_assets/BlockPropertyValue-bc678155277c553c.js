"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4832],{97039:(e,t,o)=>{o.d(t,{Z:()=>Mi});var r=o(67294),n=o(33125),i=o(11368),l=o(58299),s=o(480),a=o(86628),d=o(24405),c=o(90559),u=o(80951),p=o(39694),y=o(65473),m=o(8606),h=o(78030),f=o(53876),S=o(77722),b=o(85893);const x=r.memo((0,r.forwardRef)(((e,t)=>{const{store:o,collectionStore:n,buttonStyle:i,onContextMenu:l,quickActionButtons:s,property:c}=e,{baseStyles:u}=(0,r.useContext)(m.O),p=(0,a.VK)((()=>o.getPropertyValue(c)),[c,o]),h=(0,d.yK)((()=>({buttonStyle:{...u.buttonStyle,...i},buttonPressedStyle:u.buttonPressedStyle??{},buttonHoveredStyle:u.buttonHoveredStyle??{}})),[u.buttonHoveredStyle,u.buttonPressedStyle,u.buttonStyle,i]);return(0,b.jsx)(y.Z,{ref:t,style:h.buttonStyle,hoveredStyle:h.buttonHoveredStyle,pressedStyle:h.buttonPressedStyle,onContextMenu:l,quickActionButtons:s,editButtonClickProps:void 0,children:(0,b.jsx)(S.Y,{fontColor:"light",children:(0,b.jsx)(g,{propertyValue:p,collectionStore:n})})})})));function g(e){window.__c={n:"AutoIncrementIdPropertyValue"};const{propertyValue:t,collectionStore:o}=e,r=(0,a.VK)((()=>{var e;const r=null==o||null===(e=o.getRecordKeyStore())||void 0===e?void 0:e.getRecordKey(),n=(0,u.ah)(t);return void 0===n?"...":(0,c.wf)(r,n)}),[o,t]);return(0,b.jsx)(b.Fragment,{children:r})}const v=(0,r.forwardRef)(((e,t)=>{window.__c={n:"PageAutoIncrementIdProperty"};const{store:o,collectionStore:n,property:i,format:l}=e,s=(0,a.VK)((()=>n.getSchema()),[n]),c=(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].text}})),[]),u=(0,r.useMemo)((()=>(0,b.jsx)(p.Z,{store:o,schema:s,property:i,format:l})),[l,i,s,o]),y=M(e,t,c);return(0,b.jsx)(x,{...y,quickActionButtons:u})})),w=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableAutoIncrementIdProperty"};const{store:o,collectionStore:n,property:i,format:l}=e,{isMobile:c}=(0,s.Fy)(),u=(0,a.VK)((()=>n.getSchema()),[n]),y=(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].text}})),[]),m=(0,r.useMemo)((()=>{if(!c)return(0,b.jsx)(p.Z,{store:o,schema:u,property:i,format:l},"copy")}),[l,c,i,u,o]),S=M(e,t,y);return(0,b.jsx)(x,{...S,quickActionButtons:m})})),C=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CompactAutoIncrementIdProperty"};const o=M(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(x,{...o})})),P=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListAutoIncrementIdProperty"};const o=M(e,t);return(0,b.jsx)(x,{...o})})),_=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BoardAutoIncrementIdProperty"};const o=M(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].text}})),[]));return(0,b.jsx)(x,{...o})})),k=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CalendarAutoIncrementIdProperty"};const o=M(e,t);return(0,b.jsx)(x,{...o})})),R=(0,r.forwardRef)(((e,t)=>{window.__c={n:"GalleryAutoIncrementIdProperty"};const o=M(e,t);return(0,b.jsx)(x,{...o})})),j=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TimelineAutoIncrementIdProperty"};const o=M(e,t);return(0,b.jsx)(x,{...o})})),B=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationAutoIncrementIdProperty"};const o=M(e,t);return(0,b.jsx)(x,{...o})})),T=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionAutoIncrementIdProperty"};const o=M(e,t);return(0,b.jsx)(x,{...o})}));function M(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var V=o(98963),A=o(5366),I=o(2553),F=o(82343),E=o(33929),K=o(35661),O=o(27755),Z=o(63296);const L=r.memo((0,r.forwardRef)(((e,t)=>{const{store:o,property:n,collectionStore:i,buttonStyle:l,innerButtonStyle:c,onContextMenu:u}=e,p=(0,s.O7)(),{baseStyles:h,propertySchema:f,collectionContextStore:S}=(0,r.useContext)(m.O),x=f,g=(null==h?void 0:h.sizing)??"default",v=(0,a.VK)((()=>{const e=p.currentUser.id;if(!S||"button"!==(null==x?void 0:x.type)||!x.automation_id)return;const t=K.Mz.createChildStore(i,{table:V.cv,id:x.automation_id,spaceId:i.getSpaceId()});return{type:"button_property",persisted:!0,automationStore:t,collectionContextStore:S,propertyId:n,propertySchema:x,intl:E.default.getIntl(),parentRecordStore:t,currentUserId:e}}),[S,i,p.currentUser.id,n,x]),w=(0,r.useCallback)((async()=>{v&&await I.oS({environment:p,store:o,clientContext:v})}),[v,p,o]),C=(0,a.VK)((()=>null==v?void 0:v.automationStore.getNameStore().getValue()),[v]),P=(0,a.VK)((()=>v&&"sufficient"===(0,F.Gb)(v).state.executionPermissionStatus),[v]),_=!C||0===C.length,k=(0,d.yK)((e=>({textStyle:{...h.textStyle,color:e.lightTextColor},buttonStyle:{...h.buttonStyle,...l},buttonPressedStyle:h.buttonPressedStyle??{},buttonHoveredStyle:h.buttonHoveredStyle??{},innerButtonStyle:{pointerEvents:"auto",overflow:"hidden",height:"small"===g?20:24,...c},innerButtonLabelStyle:{overflow:"hidden",textOverflow:"ellipsis",color:_?e.lightTextColor:void 0},innerButtonLabelPlaceholderStyle:{color:e.lightTextColor}})),[h.buttonHoveredStyle,h.buttonPressedStyle,h.buttonStyle,h.textStyle,l,c,_,g]);return(0,b.jsx)(y.Z,{ref:t,style:k.buttonStyle,hoveredStyle:k.buttonHoveredStyle,pressedStyle:k.buttonPressedStyle,editButtonClickProps:void 0,onContextMenu:u,children:(0,b.jsx)(Z.Z,{isSmall:!0,disabled:!P,onClick:w,disabledFeedback:!0,style:k.innerButtonStyle,children:(0,b.jsx)("span",{style:k.innerButtonLabelStyle,children:_?(0,b.jsx)(A.FormattedMessage,{...O.y.buttonPlaceholder}):C})})})}))),H=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableButtonProperty"};const o=Y(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].button},innerButtonStyle:{maxWidth:"100%"}})),[]));return(0,b.jsx)(L,{...o})})),z=(0,r.forwardRef)(((e,t)=>{window.__c={n:"PageButtonProperty"};const o=Y(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].button}})),[]));return(0,b.jsx)(L,{...o})})),D=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CompactButtonProperty"};const o=Y(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].button}})),[]));return(0,b.jsx)(L,{...o})})),W=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListButtonProperty"};const o=Y(e,t);return(0,b.jsx)(L,{...o})})),U=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BoardButtonProperty"};const o=Y(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].button}})),[]));return(0,b.jsx)(L,{...o})})),N=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CalendarButtonProperty"};const o=Y(e,t);return(0,b.jsx)(L,{...o})})),q=(0,r.forwardRef)(((e,t)=>{window.__c={n:"GalleryButtonProperty"};const o=Y(e,t);return(0,b.jsx)(L,{...o})})),G=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TimelineButtonProperty"};const o=Y(e,t,(0,d.yK)((()=>({buttonStyle:{maxWidth:200}})),[]));return(0,b.jsx)(L,{...o})})),Q=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationButtonProperty"};const o=Y(e,t,(0,d.yK)((()=>({buttonStyle:{height:void 0}})),[]));return(0,b.jsx)(L,{...o})})),$=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionButtonProperty"};const o=Y(e,t);return(0,b.jsx)(L,{...o})}));function Y(e,t,o){const{store:r,collectionStore:n,property:i,disabled:l,onContextMenu:s}=e;return{ref:t,store:r,collectionStore:n,property:i,disabled:l,onContextMenu:s,buttonStyle:null==o?void 0:o.buttonStyle,innerButtonStyle:null==o?void 0:o.innerButtonStyle}}var X=o(51365),J=o(39699),ee=o(24118),te=o(69823);const oe=r.memo(r.forwardRef(((e,t)=>{const{store:o,property:n,enablePointerEventsForInteractiveTypes:i,editButtonClickProps:l,onClick:c,onContextMenu:p,buttonStyle:h,showLabel:f,disabled:S}=e,x=(0,s.O7)(),g=(0,a.VK)((()=>u.Ml(o.getPropertyValue(n))),[n,o]),{baseStyles:v,trackEditBlockProperty:w,propertySchema:C}=(0,r.useContext)(m.O),P=re(o,n,S),_=C,k=(0,r.useCallback)((()=>{o.getPropertyStore(n)&&J.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:x,perform:e=>{X.vO({stores:[o],property:n,transaction:e})}}),w(),c&&c()}),[x,c,n,o,w]),R=(0,d.yK)((()=>({buttonStyle:{...v.buttonStyle,...h},buttonPressedStyle:v.buttonPressedStyle??{},buttonHoveredStyle:v.buttonHoveredStyle??{}})),[v,h]);return(0,b.jsx)(y.Z,{ref:t,onContextMenu:p,editButtonClickProps:l,style:R.buttonStyle,hoveredStyle:R.buttonHoveredStyle,pressedStyle:R.buttonPressedStyle,children:(0,b.jsx)(te.n,{propertyLabel:f?null==_?void 0:_.name:void 0,checked:g,enablePointerEventsForInteractiveTypes:i,onClick:k,disabled:P})})})));function re(e,t,o){return(0,a.VK)((()=>o||!e.canEdit()||u.wl(t)||e.isLocked()),[o,t,e])}const ne=r.forwardRef(((e,t)=>{window.__c={n:"TableCheckboxProperty"};const o=he(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].checkbox}})),[]));return(0,b.jsx)(oe,{...o,showLabel:!1})})),ie=r.forwardRef(((e,t)=>{window.__c={n:"PageCheckboxProperty"};const o=he(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].checkbox}})),[]));return(0,b.jsx)(oe,{...o,showLabel:!1})})),le=r.forwardRef(((e,t)=>{window.__c={n:"CompactCheckboxProperty"};const o=he(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].checkbox}})),[]));return(0,b.jsx)(oe,{...o,showLabel:!0})})),se=r.forwardRef(((e,t)=>{window.__c={n:"ListCheckboxProperty"};const o=he(e,t);return(0,b.jsx)(oe,{...o,showLabel:!1})})),ae=r.forwardRef(((e,t)=>{window.__c={n:"BoardCheckboxProperty"};const o=he(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].checkbox}})),[]));return(0,b.jsx)(oe,{...o,showLabel:!0})})),de=r.forwardRef(((e,t)=>{window.__c={n:"CalendarCheckboxProperty"};const o=he(e,t);return(0,b.jsx)(oe,{...o,showLabel:!0})})),ce=r.forwardRef(((e,t)=>{window.__c={n:"GalleryCheckboxProperty"};const o=he(e,t);return(0,b.jsx)(oe,{...o,showLabel:!0})})),ue=r.forwardRef(((e,t)=>{window.__c={n:"TimelineCheckboxProperty"};const o=he(e,t);return(0,b.jsx)(oe,{...o,showLabel:!1})})),pe=r.forwardRef(((e,t)=>{window.__c={n:"RelationCheckboxProperty"};const o=he(e,t);return(0,b.jsx)(oe,{...o,showLabel:!1})})),ye=r.forwardRef(((e,t)=>{window.__c={n:"RelationSectionCheckboxProperty"};const o=he(e,t);return(0,b.jsx)(oe,{...o,showLabel:!1})})),me=r.forwardRef(((e,t)=>{window.__c={n:"MiniCheckboxProperty"};const o=he(e,t);return(0,b.jsx)(oe,{...o,showLabel:!1})}));function he(e,t,o){const{store:r,disabled:n,collectionStore:i,property:l,enablePointerEventsForInteractiveTypes:s,onClick:a,onContextMenu:d}=e;return{ref:t,store:r,disabled:n,collectionStore:i,property:l,editButtonClickProps:(0,ee.Am)(e),enablePointerEventsForInteractiveTypes:s,onClick:a,onContextMenu:d,buttonStyle:null==o?void 0:o.buttonStyle}}var fe=o(77729),Se=o(77866);const be=r.memo(r.forwardRef(((e,t)=>{const{onContextMenu:o,editButtonClickProps:n,property:i,store:l,buttonStyle:s,EmptyComponent:c,quickActionButtons:u=[],showIfEmpty:p}=e,{propertySchema:h,isEmpty:f,baseStyles:x}=(0,r.useContext)(m.O),g=h,v=(0,a.VK)((()=>l.getPropertyValue(i)),[i,l]),w=(0,d.yK)((()=>({buttonStyle:{...x.buttonStyle,...s},buttonPressedStyle:x.buttonPressedStyle??{},buttonHoveredStyle:x.buttonHoveredStyle??{}})),[x.buttonHoveredStyle,x.buttonPressedStyle,x.buttonStyle,s]);return f&&void 0===c?null:(0,b.jsx)(y.Z,{ref:t,editButtonClickProps:n,onContextMenu:o,style:w.buttonStyle,pressedStyle:w.buttonPressedStyle,hoveredStyle:w.buttonHoveredStyle,quickActionButtons:u,children:f&&void 0!==c?(0,b.jsx)(c,{}):g?(0,b.jsx)(S.Y,{children:(0,b.jsx)(fe.t,{type:g.type,textValue:v,useShortenedUrl:!1,disableLinkify:p})}):null})}))),xe=r.forwardRef(((e,t)=>{window.__c={n:"TableContactProperty"};const{store:o,property:n,format:i,collectionStore:l}=e,{isMobile:c}=(0,s.Fy)(),u=(0,a.VK)((()=>l.getSchema()),[l]),y=(0,r.useMemo)((()=>{if(!c)return(0,b.jsx)(p.Z,{store:o,schema:u,property:n,format:i},"copy")}),[i,c,n,u,o]),m=Te(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].text}})),[]));return(0,b.jsx)(be,{...m,EmptyComponent:Se.q8,quickActionButtons:y})})),ge=r.forwardRef(((e,t)=>{window.__c={n:"PageContactProperty"};const{store:o,property:n,format:i,collectionStore:l}=e,s=(0,a.VK)((()=>l.getSchema()),[l]),c=(0,r.useMemo)((()=>(0,b.jsx)(p.Z,{store:o,schema:s,property:n,format:i},"copy")),[i,n,s,o]),u=Te(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].text}})),[]));return(0,b.jsx)(be,{...u,EmptyComponent:Se.T$,quickActionButtons:c})})),ve=r.forwardRef(((e,t)=>{window.__c={n:"CompactContactProperty"};const o=Te(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(be,{...o,EmptyComponent:Se.T$})})),we=r.forwardRef(((e,t)=>{window.__c={n:"ListContactProperty"};const{showIfEmpty:o}=e,r=Te(e,t);return(0,b.jsx)(be,{...r,EmptyComponent:o?Se.s3:void 0})})),Ce=r.forwardRef(((e,t)=>{window.__c={n:"BoardContactProperty"};const{showIfEmpty:o}=e,r=Te(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].text}})),[]));return(0,b.jsx)(be,{...r,EmptyComponent:o?Se.s3:void 0})})),Pe=r.forwardRef(((e,t)=>{window.__c={n:"CalendarContactProperty"};const o=Te(e,t);return(0,b.jsx)(be,{...o})})),_e=r.forwardRef(((e,t)=>{window.__c={n:"GalleryContactProperty"};const{showIfEmpty:o}=e,r=Te(e,t);return(0,b.jsx)(be,{...r,EmptyComponent:o?Se.s3:void 0})})),ke=r.forwardRef(((e,t)=>{window.__c={n:"TimelineContactProperty"};const o=Te(e,t);return(0,b.jsx)(be,{...o})})),Re=r.forwardRef(((e,t)=>{window.__c={n:"RelationContactProperty"};const o=Te(e,t);return(0,b.jsx)(be,{...o})})),je=r.forwardRef(((e,t)=>{window.__c={n:"RelationSectionContactProperty"};const o=Te(e,t);return(0,b.jsx)(be,{...o})})),Be=r.forwardRef(((e,t)=>{window.__c={n:"MiniContactProperty"};const o=Te(e,t);return(0,b.jsx)(be,{...o,EmptyComponent:Se.zX,showIfEmpty:!0})}));function Te(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,ee.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var Me=o(53877),Ve=o(42875),Ae=o(81381),Ie=o(69582);const Fe=r.memo((0,r.forwardRef)(((e,t)=>{const{store:o,onContextMenu:n,editButtonClickProps:i,quickActionButtons:l,EmptyComponent:s,buttonStyle:c,property:p}=e,{isEmpty:h,baseStyles:f,templateVariableContext:x,propertySchema:g}=(0,r.useContext)(m.O),v=g,w=function(e,t,o){return(0,a.VK)((()=>{switch(t){case"created_time":const t=e.getCreatedTime();return t?Me.CQ(t,(0,Ve.r)()):void 0;case"last_edited_time":const r=e.getLastEditedTime();return r?Me.CQ(r,(0,Ve.r)()):void 0;default:const n=e.getPropertyValue(o);return(0,u.Gl)(n)}}),[o,e,t])}(o,null==v?void 0:v.type,p),C=(0,d.yK)((e=>({buttonStyle:{...f.buttonStyle,...c},buttonPressedStyle:f.buttonPressedStyle??{},buttonHoveredStyle:f.buttonHoveredStyle??{}})),[f.buttonHoveredStyle,f.buttonPressedStyle,f.buttonStyle,c]);if(h&&void 0===s&&void 0===x)return null;let P;return P=x?(0,b.jsx)(Ie.P,{templateVariableType:x.templateVariable}):h&&void 0!==s?(0,b.jsx)(s,{}):(0,b.jsx)(S.Y,{children:(0,b.jsx)(Ae.z,{dateValue:w,dateFormat:null==v?void 0:v.date_format,timeFormat:null==v?void 0:v.time_format})}),(0,b.jsx)(y.Z,{ref:t,style:C.buttonStyle,hoveredStyle:C.buttonHoveredStyle,pressedStyle:C.buttonPressedStyle,onContextMenu:n,editButtonClickProps:i,quickActionButtons:l,children:P})})));const Ee=(0,r.forwardRef)(((e,t)=>{window.__c={n:"PageDateProperty"};const{store:o,collectionStore:n,property:i,format:l}=e,{isMobile:c}=(0,s.Fy)(),u=(0,a.VK)((()=>n.getSchema()),[n]),y=(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].text}})),[]),m=(0,r.useMemo)((()=>{if(!c)return(0,b.jsx)(p.Z,{store:o,schema:u,property:i,format:l},"copy")}),[l,c,i,u,o]),S=qe(e,t,y);return(0,b.jsx)(Fe,{...S,EmptyComponent:Se.T$,quickActionButtons:m})})),Ke=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableDateProperty"};const{store:o,collectionStore:n,property:i,format:l}=e,{isMobile:c}=(0,s.Fy)(),u=(0,a.VK)((()=>n.getSchema()),[n]),y=(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].text}})),[]),m=(0,r.useMemo)((()=>{if(!c)return(0,b.jsx)(p.Z,{store:o,schema:u,property:i,format:l},"copy")}),[l,c,i,u,o]),S=qe(e,t,y);return(0,b.jsx)(Fe,{...S,EmptyComponent:Se.q8,quickActionButtons:m})})),Oe=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CompactDateProperty"};const o=qe(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(Fe,{...o,EmptyComponent:Se.T$})})),Ze=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListDateProperty"};const{showIfEmpty:o}=e,r=qe(e,t);return(0,b.jsx)(Fe,{...r,EmptyComponent:o?Se.s3:void 0})})),Le=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BoardDateProperty"};const{showIfEmpty:o}=e,r=qe(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].text}})),[]));return(0,b.jsx)(Fe,{...r,EmptyComponent:o?Se.s3:void 0})})),He=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CalendarDateProperty"};const o=qe(e,t);return(0,b.jsx)(Fe,{...o})})),ze=(0,r.forwardRef)(((e,t)=>{window.__c={n:"GalleryDateProperty"};const{showIfEmpty:o}=e,r=qe(e,t);return(0,b.jsx)(Fe,{...r,EmptyComponent:o?Se.s3:void 0})})),De=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TimelineDateProperty"};const o=qe(e,t);return(0,b.jsx)(Fe,{...o})})),We=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationDateProperty"};const o=qe(e,t);return(0,b.jsx)(Fe,{...o})})),Ue=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionDateProperty"};const o=qe(e,t);return(0,b.jsx)(Fe,{...o})})),Ne=(0,r.forwardRef)(((e,t)=>{window.__c={n:"MiniDateProperty"};const o=qe(e,t);return(0,b.jsx)(Fe,{...o,EmptyComponent:Se.zX})}));function qe(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,ee.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var Ge=o(79954),Qe=o(79074),$e=o(83559);const Ye=r.memo(r.forwardRef(((e,t)=>{const{store:o,EmptyComponent:n,onContextMenu:i,buttonStyle:l,selectableStyle:c,property:p,editButtonClickProps:h}=e,f=(0,s.O7)(),{baseStyles:S,collectionContextStore:x,isReadOnly:g}=(0,r.useContext)(m.O),[v,w]=(0,r.useState)(void 0);(0,r.useEffect)((()=>{w(o.clone())}),[o]);const C=(0,r.useCallback)((e=>{X.bA({environment:f,blockPropertyValueOverlayStore:h.blockPropertyValueOverlayStore,store:o,property:p,format:h.format,uploadFiles:e.files,disableHorizontalEdgeScroll:h.disableHorizontalEdgeScroll,collectionContextStore:x})}),[x,h.blockPropertyValueOverlayStore,h.disableHorizontalEdgeScroll,h.format,f,p,o]),P=(0,a.VK)((()=>{const e=o.getPropertyValue(p);return u.g(e)}),[o,p]),_=(0,d.yK)((()=>{var e;return{buttonStyle:{...S.buttonStyle,...l},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{},selectableStyle:{display:"inherit",borderRadius:null===(e=S.buttonStyle)||void 0===e?void 0:e.borderRadius,...c}}}),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,l,c]),k=!P||0===P.length,R=(0,r.useMemo)((()=>(0,b.jsx)($e.K,{children:P.map(((e,t)=>(0,b.jsx)(Qe.e,{linkValue:e,permissionRecord:o.pointer},e.url+t)))})),[P,o.pointer]);return!v||k&&void 0===n?null:(0,b.jsx)(Ge.Z,{store:v,canNativeDropOnto:!g,onNativeDrop:C,analyticsName:"file_property",shouldShowDropZone:!g,style:_.selectableStyle,children:(0,b.jsx)(y.Z,{ref:t,onContextMenu:i,editButtonClickProps:h,style:_.buttonStyle,pressedStyle:_.buttonPressedStyle,hoveredStyle:_.buttonHoveredStyle,children:k&&void 0!==n?(0,b.jsx)(n,{}):R})})}))),Xe=r.forwardRef(((e,t)=>{window.__c={n:"TableFileProperty"};const o=at(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].button,height:"100%"}})),[]));return(0,b.jsx)(Ye,{...o,EmptyComponent:Se.q8})})),Je=r.forwardRef(((e,t)=>{window.__c={n:"PageFileProperty"};const o=at(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].button,width:"100%"},selectableStyle:{width:"100%"}})),[]));return(0,b.jsx)(Ye,{...o,EmptyComponent:Se.T$})})),et=r.forwardRef(((e,t)=>{window.__c={n:"CompactFileProperty"};const o=at(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].button}})),[]));return(0,b.jsx)(Ye,{...o,EmptyComponent:Se.T$})})),tt=r.forwardRef(((e,t)=>{window.__c={n:"ListFileProperty"};const{showIfEmpty:o}=e,r=at(e,t);return(0,b.jsx)(Ye,{...r,EmptyComponent:o?Se.s3:void 0})})),ot=r.forwardRef(((e,t)=>{window.__c={n:"BoardFileProperty"};const{showIfEmpty:o}=e,r=at(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].button,width:"100%"},selectableStyle:{width:"100%"}})),[]));return(0,b.jsx)(Ye,{...r,EmptyComponent:o?Se.s3:void 0})})),rt=r.forwardRef(((e,t)=>{window.__c={n:"CalendarFileProperty"};const o=at(e,t);return(0,b.jsx)(Ye,{...o})})),nt=r.forwardRef(((e,t)=>{window.__c={n:"GalleryFileProperty"};const{showIfEmpty:o}=e,r=at(e,t);return(0,b.jsx)(Ye,{...r,EmptyComponent:o?Se.s3:void 0})})),it=r.forwardRef(((e,t)=>{window.__c={n:"TimelineFileProperty"};const o=at(e,t);return(0,b.jsx)(Ye,{...o})})),lt=r.forwardRef(((e,t)=>{window.__c={n:"RelationFileProperty"};const o=at(e,t);return(0,b.jsx)(Ye,{...o})})),st=r.forwardRef(((e,t)=>{window.__c={n:"RelationSectionFileProperty"};const o=at(e,t);return(0,b.jsx)(Ye,{...o})}));function at(e,t,o){const{store:r,onContextMenu:n,property:i}=e;return{ref:t,store:r,property:i,editButtonClickProps:(0,ee.Am)(e),onContextMenu:n,buttonStyle:null==o?void 0:o.buttonStyle,selectableStyle:null==o?void 0:o.selectableStyle}}var dt=o(30752),ct=o(30694);const ut=r.memo(r.forwardRef(((e,t)=>{const{store:o,EmptyComponent:n,onContextMenu:i,buttonStyle:l}=e,{baseStyles:s,collectionContextStore:c}=(0,r.useContext)(m.O),u=(0,a.VK)((()=>o.getParentCollectionStore()),[o]),p=(0,d.yK)((()=>({buttonStyle:{...s.buttonStyle,...l},buttonPressedStyle:s.buttonPressedStyle??{},buttonHoveredStyle:s.buttonHoveredStyle??{}})),[s.buttonHoveredStyle,s.buttonPressedStyle,s.buttonStyle,l]),h=!u||!c;return h&&void 0===n?null:(0,b.jsx)(y.Z,{ref:t,onContextMenu:i,editButtonClickProps:void 0,style:p.buttonStyle,pressedStyle:p.buttonPressedStyle,hoveredStyle:p.buttonHoveredStyle,children:h&&void 0!==n?(0,b.jsx)(n,{}):(0,b.jsx)(ct.Z,{collectionContextStore:c,parentStore:o,collectionForLocation:u})})}))),pt=r.forwardRef(((e,t)=>{window.__c={n:"TableLocationProperty"};const o=wt(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].text}})),[]));return(0,b.jsx)(ut,{...o,EmptyComponent:Se.q8})})),yt=r.forwardRef(((e,t)=>{window.__c={n:"PageLocationProperty"};const o=wt(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].text}})),[]));return(0,b.jsx)(ut,{...o,EmptyComponent:Se.T$})})),mt=r.forwardRef(((e,t)=>{window.__c={n:"CompactLocationProperty"};const o=wt(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(ut,{...o,EmptyComponent:Se.T$})})),ht=r.forwardRef(((e,t)=>{window.__c={n:"ListLocationProperty"};const{showIfEmpty:o}=e,r=wt(e,t);return(0,b.jsx)(ut,{...r,EmptyComponent:o?Se.s3:void 0})})),ft=r.forwardRef(((e,t)=>{window.__c={n:"BoardLocationProperty"};const{showIfEmpty:o}=e,r=wt(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].text}})),[]));return(0,b.jsx)(ut,{...r,EmptyComponent:o?Se.s3:void 0})})),St=r.forwardRef(((e,t)=>{window.__c={n:"CalendarLocationProperty"};const o=wt(e,t);return(0,b.jsx)(ut,{...o})})),bt=r.forwardRef(((e,t)=>{window.__c={n:"GalleryLocationProperty"};const{showIfEmpty:o}=e,r=wt(e,t);return(0,b.jsx)(ut,{...r,EmptyComponent:o?Se.s3:void 0})})),xt=r.forwardRef(((e,t)=>{window.__c={n:"TimelineLocationProperty"};const o=wt(e,t);return(0,b.jsx)(ut,{...o})})),gt=r.forwardRef(((e,t)=>{window.__c={n:"RelationLocationProperty"};const o=wt(e,t);return(0,b.jsx)(ut,{...o})})),vt=r.forwardRef(((e,t)=>{window.__c={n:"RelationSectionLocationProperty"};const o=wt(e,t);return(0,b.jsx)(ut,{...o})}));function wt(e,t,o){const{store:r,onContextMenu:n}=e;return{ref:t,store:r,onContextMenu:n,buttonStyle:null==o?void 0:o.buttonStyle}}var Ct=o(84619),Pt=o(4023),_t=o(26388),kt=o(99036),Rt=o(20669),jt=o(72899),Bt=o(49616),Tt=o(19124),Mt=o(85957),Vt=o(79576),At=o(19671),It=o(13023),Ft=o(83212),Et=o(73063);function Kt(e){const{href:t,icon:o,iconStyle:r,tooltip:n,externalLink:i,onClick:l}=e;return(0,b.jsx)(_t.Z,{renderTooltip:()=>n,render:e=>(0,b.jsx)(Et.Z,{ariaLabel:n,icon:o,iconStyle:r,href:t,onClick:l,hasBackground:!0,showShadow:!0,external:i,...e})})}function Ot(e){window.__c={n:"AIAutofillButton"};const{store:t,property:o,openOverlay:n}=e,i=(0,s.O7)(),l=(0,d.Fg)(),{propertySchema:c,format:u,collectionContextStore:p,isEmpty:y,isReadOnly:h}=(0,r.useContext)(m.O),f=(0,r.useCallback)((async()=>{if(!c)return;if(n){const e=(0,Mt.wq)(t)?It.Z:At.Z;X.bA({blockPropertyValueOverlayStore:e,collectionContextStore:p,format:u,environment:i,store:t,property:o})}const e=Vt.W.setIsWriting({propertySchema:c,stores:[t]});(await jt.l4.loader()).autofillPropertyForBlocks({environment:i,stores:[t],property:o,propertySchema:c,userEventForAnalytics:"generate_from_action_button",collectionContextStore:p,sessionIdForAnalytics:e,from:Bt.Sy(u)})}),[p,i,u,n,o,c,t]);return(0,a.VK)((()=>!h&&(!i.device.isMobile||y)&&(0,Tt.RT)(Ft.Z.getMode(i,t),t)&&c&&(0,kt.qQ)(c)&&(0,kt.q3)(c)&&("text"===c.type||(0,Tt.KZ)())),[i,h,y,c,t])?(0,b.jsx)(Kt,{icon:Rt.y,iconStyle:{fill:l.aiPurpleColor},tooltip:E.default.formatMessage(Zt.update),onClick:f}):null}const Zt=(0,A.defineMessages)({update:{defaultMessage:"Update",id:"database.editButton.autofillWithAiTooltip"}});var Lt=o(88071),Ht=o(44731);const zt=r.memo((0,r.forwardRef)(((e,t)=>{const{buttonStyle:o,editButtonClickProps:n,property:i,EmptyComponent:l,onContextMenu:s,tokenLimit:c,store:p}=e,{propertySchema:h,isEmpty:f,baseStyles:S}=(0,r.useContext)(m.O),x=(null==S?void 0:S.tokenFormat)??Ct.l.Medium,g=h,v=(0,a.VK)((()=>(null==g?void 0:g.options)??[]),[g]),w=(0,a.VK)((()=>null==g?void 0:g.type),[g]),[C,P]=(0,a.VK)((()=>{const e=p.getPropertyValue(i);let t=[];if("select"===w){const o=u.P4(e,v);t=o?[o]:[]}else t=u.ib(e,v);return[c?t.slice(0,c):t,c?t.slice(c):[]]}),[p,i,w,c,v]),_=(0,d.yK)((e=>({buttonStyle:{...S.buttonStyle,...o},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{},overflowIndicator:{marginRight:4,color:e.mediumTextColor},tooltip:{padding:8},remainderPropertiesContainer:{display:"flex",flexWrap:"wrap",fontWeight:"normal",width:"max-content",maxWidth:"240px",gap:4},selectToken:{margin:0},moreToken:{margin:0}})),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,o]),k=(0,r.useMemo)((()=>(0,b.jsx)(Ot,{store:p,property:i,openOverlay:!1},"autofill")),[i,p]);return f&&void 0===l?null:(0,b.jsx)(y.Z,{ref:t,editButtonClickProps:n,onContextMenu:s,style:_.buttonStyle,hoveredStyle:_.buttonHoveredStyle,pressedStyle:_.buttonPressedStyle,quickActionButtons:k,children:f&&void 0!==l?(0,b.jsx)(l,{}):(0,b.jsx)(Dt,{shownOptions:C,hiddenOptions:P,tokenLimit:c,tokenFormat:x,styles:_})})})));function Dt(e){let{shownOptions:t,hiddenOptions:o,tokenLimit:r,styles:n,tokenFormat:i}=e;return(0,b.jsxs)($e.K,{children:[t.map((e=>(0,b.jsx)(Ht.J,{type:"select",value:e.value,color:e.color,shouldShrink:!!r},e.id))),o.length>0&&(0,b.jsx)(_t.Z,{style:n.tooltip,renderTooltip:()=>(0,b.jsx)("div",{style:n.remainderPropertiesContainer,children:o.map((e=>(0,b.jsx)(Ht.J,{type:"select",value:e.value,color:e.color,shouldShrink:!1},e.id)))}),isLightBackground:!0,textWrap:!0,alignment:Pt.v.Center,placement:Pt.u.Bottom,render:e=>(0,b.jsx)("div",{...e,children:(0,b.jsx)(Lt.Z,{count:o.length,format:i,fixedHeight:!1,style:n.moreToken,isCompact:!0})})})]})}const Wt=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableMultiSelectProperty"};const o=to(e,t);return(0,b.jsx)(zt,{...o,EmptyComponent:Se.q8})})),Ut=(0,r.forwardRef)(((e,t)=>{window.__c={n:"PageMultiSelectProperty"};const o=to(e,t);return(0,b.jsx)(zt,{...o,EmptyComponent:Se.T$})})),Nt=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CompactMultiSelectProperty"};const o=to(e,t);return(0,b.jsx)(zt,{...o,EmptyComponent:Se.T$,tokenLimit:2})})),qt=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListMultiSelectProperty"};const{showIfEmpty:o}=e,r=to(e,t);return(0,b.jsx)(zt,{...r,EmptyComponent:o?Se.s3:void 0})})),Gt=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BoardMultiSelectProperty"};const{showIfEmpty:o}=e,r=to(e,t);return(0,b.jsx)(zt,{...r,EmptyComponent:o?Se.s3:void 0})})),Qt=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CalendarMultiSelectProperty"};const o=to(e,t);return(0,b.jsx)(zt,{...o})})),$t=(0,r.forwardRef)(((e,t)=>{window.__c={n:"GalleryMultiSelectProperty"};const{showIfEmpty:o}=e,r=to(e,t);return(0,b.jsx)(zt,{...r,EmptyComponent:o?Se.s3:void 0})})),Yt=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TimelineMultiSelectProperty"};const o=to(e,t);return(0,b.jsx)(zt,{...o})})),Xt=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationMultiSelectProperty"};const o=to(e,t);return(0,b.jsx)(zt,{...o})})),Jt=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionMultiSelectProperty"};const o=to(e,t);return(0,b.jsx)(zt,{...o})})),eo=(0,r.forwardRef)(((e,t)=>{window.__c={n:"MiniMultiSelectProperty"};const o=to(e,t);return(0,b.jsx)(zt,{...o,EmptyComponent:Se.zX,tokenLimit:1})}));function to(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,ee.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var oo=o(59580);const ro=r.memo((0,r.forwardRef)(((e,t)=>{var o,n;const{store:i,buttonStyle:l,onContextMenu:s,editButtonClickProps:c,quickActionButtons:p,EmptyComponent:h,isRightAligned:f,property:x}=e,{isEmpty:g,baseStyles:v,propertySchema:w,shouldRenderTooltip:C}=(0,r.useContext)(m.O),P=w,_=(0,a.VK)((()=>{const e=i.getPropertyValue(x);return u.VY(e)}),[x,i]),k=(0,Bt.X7)({numberValue:_,numberFormat:null==P?void 0:P.number_format,numberShowAs:null==P?void 0:P.show_as}),R=(0,d.yK)((()=>({buttonStyle:{...v.buttonStyle,...l},buttonPressedStyle:v.buttonPressedStyle??{},buttonHoveredStyle:v.buttonHoveredStyle??{}})),[v.buttonHoveredStyle,v.buttonPressedStyle,v.buttonStyle,l]);if(g&&void 0===h)return null;const j="bar"===(null==P||null===(o=P.show_as)||void 0===o?void 0:o.type)||"ring"===(null==P||null===(n=P.show_as)||void 0===n?void 0:n.type);return(0,b.jsx)(y.Z,{ref:t,style:R.buttonStyle,hoveredStyle:R.buttonHoveredStyle,pressedStyle:R.buttonPressedStyle,onContextMenu:s,editButtonClickProps:c,quickActionButtons:p,quickActionButtonsAlign:f?"left":void 0,tooltipPropertyValue:C?k:void 0,children:g&&void 0!==h?(0,b.jsx)(h,{}):j?(0,b.jsx)($e.K,{isRightAligned:f,children:(0,b.jsx)(oo.A,{numberValue:_,isRightAligned:f})}):(0,b.jsx)(S.Y,{isRightAligned:f,children:(0,b.jsx)(oo.A,{numberValue:_,isRightAligned:f})})})}))),no=(0,r.forwardRef)(((e,t)=>{window.__c={n:"PageNumberProperty"};const{store:o,property:n,format:i,collectionStore:l}=e,s=fo(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].text}})),[])),c=(0,a.VK)((()=>l.getSchema()),[l]),u=(0,r.useMemo)((()=>(0,b.jsx)(p.Z,{store:o,schema:c,property:n,format:i},"copy")),[i,n,c,o]);return(0,b.jsx)(ro,{...s,EmptyComponent:Se.T$,quickActionButtons:u})})),io=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableNumberProperty"};const{store:o,property:n,format:i,collectionStore:l}=e,{isMobile:c}=(0,s.Fy)(),u=fo(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].text}})),[])),y=(0,a.VK)((()=>l.getSchema()),[l]),m=(0,r.useMemo)((()=>{if(!c)return(0,b.jsx)(p.Z,{store:o,schema:y,property:n,format:i},"copy")}),[i,c,n,y,o]);return(0,b.jsx)(ro,{...u,EmptyComponent:Se.q8,quickActionButtons:m,isRightAligned:!0})})),lo=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CompactNumberProperty"};const o=fo(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(ro,{...o,EmptyComponent:Se.T$})})),so=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListNumberProperty"};const{showIfEmpty:o}=e,r=fo(e,t);return(0,b.jsx)(ro,{...r,EmptyComponent:o?Se.s3:void 0})})),ao=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BoardNumberProperty"};const{showIfEmpty:o}=e,r=fo(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].text}})),[]));return(0,b.jsx)(ro,{...r,EmptyComponent:o?Se.s3:void 0})})),co=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CalendarNumberProperty"};const o=fo(e,t);return(0,b.jsx)(ro,{...o})})),uo=(0,r.forwardRef)(((e,t)=>{window.__c={n:"GalleryNumberProperty"};const{showIfEmpty:o}=e,r=fo(e,t);return(0,b.jsx)(ro,{...r,EmptyComponent:o?Se.s3:void 0})})),po=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TimelineNumberProperty"};const o=fo(e,t);return(0,b.jsx)(ro,{...o})})),yo=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationNumberProperty"};const o=fo(e,t);return(0,b.jsx)(ro,{...o})})),mo=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionNumberProperty"};const o=fo(e,t);return(0,b.jsx)(ro,{...o})})),ho=(0,r.forwardRef)(((e,t)=>{window.__c={n:"MiniNumberProperty"};const o=fo(e,t);return(0,b.jsx)(ro,{...o,EmptyComponent:Se.zX})}));function fo(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,ee.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var So=o(66897),bo=o(70203),xo=o(97880),go=o(93044),vo=o(11061),wo=o(18417);const Co=r.memo(r.forwardRef(((e,t)=>{const{buttonStyle:o,onContextMenu:n,editButtonClickProps:i,property:l,store:s,EmptyComponent:c,tokenLimit:p}=e,{propertySchema:h,isEmpty:f,baseStyles:S,templateVariableContext:x}=(0,r.useContext)(m.O),g=(null==S?void 0:S.tokenFormat)??Ct.l.Medium,v=function(e){let{property:t,store:o,propertySchema:r}=e;return(0,a.VK)((()=>{const e=null==r?void 0:r.type;switch(e){case"created_by":{const e=o.getCreatedByPointer();if(e)return[e];break}case"last_edited_by":{const e=o.getLastEditedByPointer();if(e)return[e];break}case"person":return(0,u.BW)({value:o.getPropertyValue(t),isTemplatePage:o.isTemplate(),propertySchema:r,blockCreatorPointer:o.getCreatedByPointer()});case void 0:return[];default:(0,xo.t1)(e)}return[]}),[t,r,o])}({store:s,property:l,propertySchema:h}),w=(0,d.yK)((()=>({buttonStyle:{...S.buttonStyle,...o},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{},tokensContainer:{...g===Ct.l.Inline?{gap:0}:{}},actorTokenOverlap:{...g===Ct.l.Inline?{margin:go.wS[g].margin}:{}},moreToken:{margin:0}})),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,o,g]);return f&&void 0===c?null:(0,b.jsx)(y.Z,{ref:t,editButtonClickProps:i,onContextMenu:n,style:w.buttonStyle,pressedStyle:w.buttonPressedStyle,hoveredStyle:w.buttonHoveredStyle,tooltipHide:g===Ct.l.Inline,children:f&&void 0!==c&&!x?(0,b.jsx)(c,{}):(0,b.jsx)(Po,{values:v,tokenLimit:p,tokenFormat:g,styles:w})})})));function Po(e){let{values:t,tokenLimit:o,tokenFormat:r,styles:n}=e;const i=t.slice(0,o);return(0,b.jsxs)($e.K,{style:n.tokensContainer,children:[i.map(((e,o)=>(0,So.Wk)(e)?(0,b.jsx)(wo.H,{actorPointer:e,style:o<t.length-1?n.actorTokenOverlap:void 0},e.id):(0,bo.D4X)(e)?(0,b.jsx)(Ie.w,{templateVariableType:e},`person-property-value-${e}`):void(0,xo.t1)(e))),o&&t.length>o&&(0,b.jsx)(Lt.Z,{count:t.length-o,format:r,style:n.moreToken,fixedHeight:!0,isCompact:!0})]})}const _o=r.forwardRef(((e,t)=>{window.__c={n:"TablePersonProperty"};const o=Eo(e,t);return(0,b.jsx)(Co,{...o,EmptyComponent:Se.q8})})),ko=r.forwardRef(((e,t)=>{window.__c={n:"PagePersonProperty"};const{store:o,property:r,collectionStore:n}=e,i=Eo(e,t);return(0,b.jsx)(vo.O,{store:o,property:r,collectionStore:n,children:(0,b.jsx)(Co,{...i,EmptyComponent:Se.T$})})})),Ro=r.forwardRef(((e,t)=>{window.__c={n:"CompactPersonProperty"};const o=Eo(e,t);return(0,b.jsx)(Co,{...o,EmptyComponent:Se.T$,tokenLimit:1})})),jo=r.forwardRef(((e,t)=>{window.__c={n:"MiniPersonProperty"};const o=Eo(e,t);return(0,b.jsx)(Co,{...o,EmptyComponent:Se.zX,tokenLimit:1})})),Bo=r.forwardRef(((e,t)=>{window.__c={n:"ListPersonProperty"};const{showIfEmpty:o}=e,r=Eo(e,t);return(0,b.jsx)(Co,{...r,EmptyComponent:o?Se.s3:void 0})})),To=r.forwardRef(((e,t)=>{window.__c={n:"BoardPersonProperty"};const{showIfEmpty:o}=e,r=Eo(e,t);return(0,b.jsx)(Co,{...r,EmptyComponent:o?Se.s3:void 0})})),Mo=r.forwardRef(((e,t)=>{window.__c={n:"CalendarPersonProperty"};const o=Eo(e,t);return(0,b.jsx)(Co,{...o})})),Vo=r.forwardRef(((e,t)=>{window.__c={n:"GalleryPersonProperty"};const{showIfEmpty:o}=e,r=Eo(e,t);return(0,b.jsx)(Co,{...r,EmptyComponent:o?Se.s3:void 0})})),Ao=r.forwardRef(((e,t)=>{window.__c={n:"TimelinePersonProperty"};const o=Eo(e,t);return(0,b.jsx)(Co,{...o})})),Io=r.forwardRef(((e,t)=>{window.__c={n:"RelationPersonProperty"};const o=Eo(e,t);return(0,b.jsx)(Co,{...o})})),Fo=r.forwardRef(((e,t)=>{window.__c={n:"RelationSectionPersonProperty"};const o=Eo(e,t);return(0,b.jsx)(Co,{...o})}));function Eo(e,t,o){const{store:r,property:n,onContextMenu:i}=e;return{ref:t,store:r,property:n,editButtonClickProps:(0,ee.Am)(e),onContextMenu:i,buttonStyle:null==o?void 0:o.buttonStyle}}o(57658);var Ko=o(40652),Oo=o(31869),Zo=o(14473),Lo=o(66890),Ho=o(29798),zo=o(64921),Do=o(32163),Wo=o(72495),Uo=o(68139),No=o(90692);const qo=r.memo((0,r.forwardRef)(((e,t)=>{const{collectionStore:o,buttonStyle:n,editButtonClickProps:i,property:l,EmptyComponent:s,onContextMenu:c,blockPropertyValueOverlayStore:p,store:h,format:f,renderAs:S}=e,{propertySchema:x,isReadOnly:g,baseStyles:v}=(0,r.useContext)(m.O),w=x,C=(null==v?void 0:v.tokenFormat)??Ct.l.Medium,P=(0,a.qz)(void 0,Ho.Z),_=(0,a.VK)((()=>{const e=h.getPropertyValue(l);return w?u.j$({relationValue:u.rq(e),propertySchema:w,getRecordModel:h.getRecordModel}):void 0}),[h,l,w]),k=(0,r.useMemo)((()=>{const e=w?kt.j0(w):void 0;return e?K.NW.createChildStore(h,e):void 0}),[w,h]),R=(0,a.VK)((()=>{const e=null!=w&&w.limit&&_?_.slice(0,w.limit):_;return e?e.map((e=>{const t=K.G.createChildStore(h,e),o=t.getAssociatedCollectionStore();if(!o)return;const r=o.id;return w&&r===kt.F0(w)?{pointer:e,pageStore:t}:void 0})).filter(xo.$K):[]}),[w,_,h]),j=0===R.length,B="rows"===S&&!j,T=(0,d.yK)((e=>({buttonStyle:{...v.buttonStyle,...n,...B&&{padding:0}},buttonPressedStyle:v.buttonPressedStyle??{},buttonHoveredStyle:v.buttonHoveredStyle??{},overflowIndicator:{marginRight:4,color:e.mediumTextColor}})),[v.buttonHoveredStyle,v.buttonPressedStyle,v.buttonStyle,n,B]),M=(0,r.useMemo)((()=>k?"rows"===S?w&&_&&(0,b.jsx)(Go,{relationItemPointers:R,relationValue:_,collectionStore:o,menuListStore:P,store:h,targetCollectionStore:k,property:l,disabled:g,buttonContainerRef:t,blockPropertyValueOverlayStore:p,format:f,propertySchema:w}):"inline"===S?(0,b.jsx)(Qo,{relationItemPointers:R,store:h,tokenFormat:C}):void(0,xo.t1)(S):null),[p,o,f,g,P,l,w,t,R,_,S,h,k,C]);return j&&void 0===s?null:(0,b.jsx)(y.Z,{ref:t,editButtonClickProps:B?void 0:i,onContextMenu:c,style:T.buttonStyle,hoveredStyle:T.buttonHoveredStyle,pressedStyle:T.buttonPressedStyle,children:j&&void 0!==s?(0,b.jsx)(s,{}):M})})));function Go(e){window.__c={n:"RelationRows"};const{collectionStore:t,targetCollectionStore:o,relationItemPointers:n,relationValue:i,property:l,store:c,disabled:u,menuListStore:p,buttonContainerRef:y,blockPropertyValueOverlayStore:m,format:h,propertySchema:f}=e,S=(0,Lo.Y$)(),x=(0,s.O7)(),g=(0,r.useCallback)(((e,t)=>{X.bA({environment:x,blockPropertyValueOverlayStore:m,store:c,property:l,rect:null==t?void 0:t.getBoundingClientRect(),format:h,mode:e,collectionContextStore:S})}),[m,S,x,h,l,c]),v=(0,r.useCallback)(((e,t)=>{if(!S)return;const o=e.filter((e=>e.id!==t.id));J.createAndCommit({userAction:"RelationBlockPropertyValue.handleRemoveRelationClick",environment:x,perform:e=>{Oo.sf({store:c,propertyId:l,value:o,environment:x,relatedPageId:t.id,propertySchema:f,transaction:e,collectionContextStore:S,analyticsData:{isFromBulkActionsToolbar:Bt.VM(m),analyticsFrom:Bt.Sy(h)},isUnthrottled:!1})}})}),[m,S,x,h,l,f,c]),w=(0,a.VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===Ko.p$),[o]),C=(0,d.yK)((()=>({moreMenuItem:{width:"100%",display:"flex",alignItems:"center",justifyItems:"center",borderRadius:3,fontSize:14,minHeight:32,margin:0,padding:"6px 8px"},moreMenuItemLabel:{lineHeight:"normal",margin:0}})),[]),P=n.slice(0,5).map(((e,r)=>{let{pageStore:n}=e;return{key:n.id,render:e=>(0,b.jsx)(Uo.Z,{...e,canDrag:!1,collectionStore:t,targetCollectionStore:o,relatedPageStore:n,disabled:u,isSelected:!0,pageStore:c,property:l,rowType:"inline",onActionButtonClick:()=>{v(i,n)},onMouseLeave:()=>p.unsetFocus(),onSecondaryButtonClick:e=>{g({type:w?"view":"add",index:r+1},e)},onOpenPageButtonClick:()=>{Zo.O(i,n,x,"relation_property")}}),action:()=>{}}}));return n.length>5&&P.push({key:"add",render:e=>(0,b.jsx)(zo.Z,{...e,style:C.moreMenuItem,onClick:e=>g({type:"view"},y&&"current"in y?y.current:void 0),children:(0,b.jsx)(Lt.Z,{style:C.moreMenuItemLabel,count:n.length-5,format:Ct.l.Medium,fixedHeight:!1,isCompact:!1})}),action:()=>{g({type:"add",index:i.length},void 0)}}),(0,b.jsx)(Do.Z,{type:Do.i.Vertical,store:p,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"results",render:e=>(0,b.jsx)(Wo.Z,{...e,disableDesktopPadding:!0,disableMobileBorders:!0,children:e.children}),items:P}]})}function Qo(e){window.__c={n:"RelationInlineTokens"};const{relationItemPointers:t,store:o,tokenFormat:r}=e,n=(0,d.yK)((()=>({moreToken:{margin:0}})),[]),i=t.slice(0,10).map((e=>{let{pointer:t}=e;return(0,b.jsx)(No.Z,{recordPointer:t,parentStore:o},t.id)}));return t.length>10&&i.push((0,b.jsx)(Lt.Z,{style:n.moreToken,count:t.length-10,format:r,fixedHeight:!1,isCompact:!0})),(0,b.jsx)($e.K,{children:i})}const $o=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableRelationProperty"};const o=sr(e,t);return(0,b.jsx)(qo,{...o,EmptyComponent:Se.q8,renderAs:"inline"})})),Yo=(0,r.forwardRef)(((e,t)=>{window.__c={n:"PageRelationProperty"};const{store:o,property:r,collectionStore:n}=e,i=sr(e,t);return(0,b.jsx)(vo.O,{store:o,property:r,collectionStore:n,children:(0,b.jsx)(qo,{...i,EmptyComponent:Se.T$,renderAs:"rows"})})})),Xo=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CompactRelationProperty"};const o=sr(e,t);return(0,b.jsx)(qo,{...o,EmptyComponent:Se.T$,renderAs:"rows"})})),Jo=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListRelationProperty"};const{showIfEmpty:o}=e,r=sr(e,t);return(0,b.jsx)(qo,{...r,EmptyComponent:o?Se.s3:void 0,renderAs:"inline"})})),er=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BoardRelationProperty"};const{showIfEmpty:o}=e,r=sr(e,t);return(0,b.jsx)(qo,{...r,EmptyComponent:o?Se.s3:void 0,renderAs:"inline"})})),tr=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CalendarRelationProperty"};const o=sr(e,t);return(0,b.jsx)(qo,{...o,renderAs:"inline"})})),or=(0,r.forwardRef)(((e,t)=>{window.__c={n:"GalleryRelationProperty"};const{showIfEmpty:o}=e,r=sr(e,t);return(0,b.jsx)(qo,{...r,EmptyComponent:o?Se.s3:void 0,renderAs:"inline"})})),rr=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TimelineRelationProperty"};const o=sr(e,t);return(0,b.jsx)(qo,{...o,renderAs:"inline"})})),nr=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationRelationProperty"};const o=sr(e,t);return(0,b.jsx)(qo,{...o,renderAs:"inline"})})),ir=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionRelationProperty"};const o=sr(e,t);return(0,b.jsx)(qo,{...o,renderAs:"inline"})})),lr=(0,r.forwardRef)(((e,t)=>{window.__c={n:"MiniRelationProperty"};const o=sr(e,t);return(0,b.jsx)(qo,{...o,EmptyComponent:Se.zX,renderAs:"inline"})}));function sr(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l,blockPropertyValueOverlayStore:s,format:a}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,ee.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle,blockPropertyValueOverlayStore:s,format:a}}var ar=o(35011),dr=o(34299),cr=o(7057),ur=o(78106),pr=o(84682),yr=o(72126),mr=o(82883),hr=o(89470),fr=o(16187),Sr=o(17809),br=o(73807),xr=o(25651),gr=o(43664),vr=o(31792);const wr=(0,A.defineMessages)({rollup:{defaultMessage:"Configure rollup",id:"database.editButton.configureRollupTooltip"}});function Cr(e){window.__c={n:"EditButton"};const{type:t,editButtonClickProps:o}=e,n=(0,s.O7)(),{isMobile:i}=(0,s.Fy)(),{containerRef:l,collectionContextStore:d,isReadOnly:c}=(0,r.useContext)(m.O),u=(0,a.qz)(void 0,vr.Z),p=(0,r.useMemo)((()=>E.default.formatMessage(wr[t])),[t]),y=(0,r.useCallback)((async e=>{if(void 0===o)return;const{onClick:t,store:r,property:i,format:s,collectionStore:a,blockPropertyValueOverlayStore:c,disableHorizontalEdgeScroll:p}=o;await gr.z({element:l&&"current"in l&&(null==l?void 0:l.current)||void 0,environment:n,onClick:t,store:r,property:a.getMappedProperty(i),format:s,collectionStore:a,blockPropertyValueOverlayStore:c,disableHorizontalEdgeScroll:p,collectionContextStore:d,mouseStore:u})}),[d,l,o,n,u]);return c||i?null:(0,b.jsx)(Kt,{icon:xr.R,tooltip:p,onClick:y})}var Pr=o(19629);const _r=r.memo(r.forwardRef(((e,t)=>{const{store:o,property:n,EmptyComponent:i,collectionStore:l,onContextMenu:c,editButtonClickProps:p,checkboxButtonStyle:h,textButtonStyle:x,buttonButtonStyle:g,quickActionButtons:v,numberRightAlign:w}=e,{baseStyles:C,collectionContextStore:P}=(0,r.useContext)(m.O),_=(0,a.VK)((()=>{var e;return null==P||null===(e=P.collectionStore())||void 0===e?void 0:e.getSchema()}),[P]),k=(0,a.VK)((()=>o.getModel()),[o]),R=(0,br._)(),j=(0,a.VK)((()=>{if(void 0!==_)return(0,dr.gT)({property:n,schema:_,getRecordModel:l.getRecordModel})}),[_,n,l.getRecordModel]),{propertySchema:B,targetPropertySchema:T}=j||{},M=function(e){var t;const{block:o,schema:r,property:n,store:i,propertySchema:l,targetPropertySchema:s,numberRightAlign:d,clientFormulaTimeoutMs:c}=e,{rollupAggregationValue:u,numberFormat:p}=(0,a.VK)((()=>{if(!(null!=l&&l.aggregation&&"show_unique"!==l.aggregation&&o&&null!=s&&s.type&&r))return{rollupAggregationValue:void 0,numberFormat:void 0};const e=(0,dr.O0)({block:o,property:n,schema:r,getRecordModel:i.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,Ve.r)(),depth:0,intl:E.default.getIntl(),visitedProperties:new Set,resultCache:{},formulaTimeoutTimestampMs:Date.now()+c}});if(!e)return{rollupAggregationValue:void 0,numberFormat:void 0};const t=(0,fr.SD)(l.aggregation,"formula"===(null==s?void 0:s.type)||"number"===(null==s?void 0:s.type)?s.number_format:void 0);if(t){const o=void 0===(null==e?void 0:e.value)||"number"!=typeof e.value?void 0:yr.NM(e.value,3);if(void 0!==o&&!isNaN(o))return{rollupAggregationValue:o,numberFormat:t}}const a=(0,fr.Ol)({numberFormat:void 0,dateFormat:s&&"date_format"in s?s.date_format:void 0,aggregationType:l.aggregation,value:e,userTimeZone:(0,Ve.r)(),roundDecimal:3});return void 0===a||""===a?{rollupAggregationValue:void 0,numberFormat:void 0}:{rollupAggregationValue:a,numberFormat:void 0}}),[o,n,l,r,i.getRecordModel,s,c]);return(0,a.VK)((()=>{if(void 0===u)return null;if(p){var e,t;return"bar"===(null==l||null===(e=l.show_as)||void 0===e?void 0:e.type)||"ring"===(null==l||null===(t=l.show_as)||void 0===t?void 0:t.type)?(0,b.jsx)($e.K,{isRightAligned:d,children:(0,b.jsx)(oo.A,{numberFormat:p,numberValue:u,isRightAligned:d})}):(0,b.jsx)(S.Y,{isRightAligned:d,children:(0,b.jsx)(oo.A,{numberFormat:p,numberValue:u,isRightAligned:d})})}return(0,b.jsx)(S.Y,{children:u})}),[d,p,null==l||null===(t=l.show_as)||void 0===t?void 0:t.type,u])}({store:o,block:k,schema:_,property:n,propertySchema:B,targetPropertySchema:T,numberRightAlign:w,clientFormulaTimeoutMs:R}),V=function(e){const{block:t,store:o,rollupPropertyData:n,numberRightAlign:i,clientFormulaTimeoutMs:l}=e,{propertySchema:d,relationPropertySchema:c,targetPropertySchema:p,targetProperty:y,targetCollectionModel:h}=n||{},{collectionContextStore:f}=(0,r.useContext)(m.O),S=(0,a.VK)((()=>{if(void 0!==(null==d?void 0:d.aggregation)&&"show_unique"!==(null==d?void 0:d.aggregation)||!d||!c||!p||!h||!t||void 0===(null==d?void 0:d.relation_property))return[];return u.j$({relationValue:u.rq(u.wS(t,d.relation_property)),getRecordModel:o.getRecordModel,propertySchema:c}).map((e=>K.G.createChildStore(o,e))).filter((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)===h.id}))}),[d,c,p,h,t,o]),x=(0,s.O7)(),g=(0,a.VK)((()=>{if(void 0===c||void 0===p||void 0===y||void 0===d)return[];const e=null==f?void 0:f.collectionViewBlockStore(),t=c.collection_pointer;if(void 0===t||void 0===e)return[];const o=K.NW.createChildStore(e,t),r=[];for(const n of S){const e=n.getPropertyValue(y);if(void 0===e&&!["status","checkbox","formula","last_edited_time","last_edited_by","created_time","created_by","title"].includes(p.type))continue;const t=Rr({textValue:e,blockStore:n,targetCollectionStore:o,targetPropertySchema:p,targetProperty:y,currentUserId:x.currentUser.id,clientFormulaTimeoutMs:l}).map((e=>[e,n]));r.push(...t)}return"show_unique"===d.aggregation?yr.mN(r,(e=>{let[t,o]=e;return t.id})):r}),[S,f,c,d,y,p,x.currentUser.id,l]);return(0,a.VK)((()=>{if(null==g||!g.length||!d)return null;const e=g[0][0].type,t=(0,Pr.vQ)(e,d);return(0,b.jsx)(Pr.E1,{propertyType:e,rootPropertySchema:d,numberRightAlign:i,children:g.map(((e,o)=>{let[r,n]=e;return(0,b.jsx)(Pr.gZ,{token:r,targetPropertySchema:p,blockStore:n,withComma:t&&o<g.length-1,numberRightAlign:i},`${r.id}-${o}`)}))})}),[i,d,g,p])}({block:k,store:o,rollupPropertyData:j,numberRightAlign:w,clientFormulaTimeoutMs:R}),A=!M&&!V,I=(0,a.VK)((()=>A||void 0===j?"text":void 0!==(null==B?void 0:B.aggregation)&&"show_unique"!==B.aggregation?void 0!==(0,fr.SD)(B.aggregation,"number")?"number":"text":null!=j&&j.targetPropertySchema?function(e){if("formula"===e.type){if(e.formula2&&(0,Sr.V1)()){const t=(0,ur.aL)(e.formula2.result_type).type;return"block"===t?"relation":"unknown"===t||"array"===t?"text":t}return"text"}return"rollup"===e.type?"text":e.type}(j.targetPropertySchema):"text"),[A,null==B?void 0:B.aggregation,j]),F=(0,d.yK)((e=>({buttonStyle:{...C.buttonStyle,..."checkbox"===I?h:{},..."title"!==I&&(0,f.A2)(I)?x:{},...(0,f.e4)(I)?g:{}},buttonPressedStyle:C.buttonPressedStyle??{},buttonHoveredStyle:C.buttonHoveredStyle??{}})),[C.buttonHoveredStyle,C.buttonPressedStyle,C.buttonStyle,g,h,I,x]);if(A&&void 0===i)return null;const O=!0===w&&"number"===I;return(0,b.jsx)(y.Z,{ref:t,onContextMenu:c,editButtonClickProps:p,style:F.buttonStyle,pressedStyle:F.buttonPressedStyle,hoveredStyle:F.buttonHoveredStyle,quickActionButtons:v?(0,b.jsx)(kr,{buttons:v,editButtonClickProps:p}):void 0,quickActionButtonsAlign:O?"left":void 0,children:A?i?(0,b.jsx)(i,{}):null:M??V})}))),kr=e=>{let{buttons:t,editButtonClickProps:o}=e;const r=t.map((e=>{switch(e){case"edit":return(0,b.jsx)(Cr,{type:"rollup",editButtonClickProps:o},e);default:(0,xo.t1)(e)}})).filter(xo.K0);return r?(0,b.jsx)(b.Fragment,{children:r}):null};function Rr(e){var t;const{textValue:o,blockStore:r,targetCollectionStore:n,targetPropertySchema:i,targetProperty:l,clientFormulaTimeoutMs:s}=e,{type:a}=i;switch(a){case"auto_increment_id":if(void 0===o)return[];const p=null===(t=n.getRecordKeyStore())||void 0===t?void 0:t.getRecordKey(),y=(0,c.wf)(p,u.ah(o));return y?[{id:y,type:"text",value:[[y]]}]:[];case"button":return[];case"checkbox":{const e=u.Ml(o);return[{id:e,type:"checkbox",value:e}]}case"date":{const e=u.Gl(o);if(void 0===e)return[];return[{id:cr.ZV({allowRelativeDates:!1,value:e,userTimeZone:(0,Ve.r)(),intl:E.default.getIntl()}),type:"date",value:e}]}case"email":case"phone_number":case"url":return void 0===o?[]:[{id:(0,bo.Jcv)(o),type:a,value:o}];case"file":return u.g(o).map((e=>({id:e.url,type:"file",value:e})));case"formula":{const e=r.getModel();if(void 0===e)return[];const t=E.default.getIntl(),o=(0,Ve.r)();if("v2"===i.version){var d;if(null===(d=i.formula2)||void 0===d||!d.code)return[];const n=(0,ar.EC)({block:e,property:l,formulaCode:i.formula2.code,getRecordModel:r.getRecordModel,intl:t,userTimeZone:o,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+s});return n?(0,dt.$I)(n,r.getRecordModel,o):[]}{const n=(0,pr.AH)({property:l,schema:r.getSchema(),block:e,getRecordModel:r.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:o,depth:0,intl:t,resultCache:{},visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+s}});return(0,dt.tT)(n)}}case"select":{const e=u.Sj(o,i.options??[]);if(!i.options||!e)return[];return[{id:e,type:"select",value:e,color:(0,u.wI)(i.options??[],e)}]}case"multi_select":return u.uP(o,i.options??[]).map((e=>({id:e,type:"select",value:e,color:(0,u.wI)(i.options??[],e)})));case"number":{const e=u.VY(o);return void 0===e?[]:[{id:e,type:"number",value:e}]}case"person":return u.DW({textValue:o,propertySchema:i}).map((e=>({id:e.id,type:"person",value:e})));case"title":if(void 0===n)return[];return[{id:(0,mr.X)({textValue:o,getRecordModel:r.getRecordModel,deterministic:!0,userTimeZone:(0,Ve.r)(),intl:E.default.getIntl()}),type:"relation",value:{id:r.id,table:"block",spaceId:n.getSpaceId()}}];case"relation":if(void 0===n)return[];return u.j$({relationValue:u.rq(o),getRecordModel:r.getRecordModel,propertySchema:i}).map((e=>({id:e.id,type:"relation",value:e})));case"status":{const e=u.ZG(o,i),{options:t,groups:r}=i,n=null==t?void 0:t.find((t=>t.value===e));if(void 0===e||void 0===n)return[];const l=null==r?void 0:r.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(n.id)}));return[{id:e,type:"select",value:e,color:n.color,groupColor:(null==l?void 0:l.color)??"default"}]}case"text":if(void 0===o)return[];const m=(0,mr.X)({textValue:o,getRecordModel:r.getRecordModel,deterministic:!0,userTimeZone:(0,Ve.r)(),intl:E.default.getIntl()});return 0===m.length?[]:[{id:m,type:"text",value:o}];case"created_by":const h=r.getCreatedByPointer();return h?[{id:h.id,type:"person",value:h}]:[];case"created_time":{const e=r.getCreatedTime();return[{id:e,type:"date",value:(0,Me.CQ)(e,(0,Ve.r)())}]}case"last_edited_by":{const e=r.getLastEditedByPointer();return e?[{id:e.id,type:"person",value:e}]:[]}case"last_edited_time":{const e=r.getLastEditedTime();return[{id:e,type:"date",value:(0,Me.CQ)(e,(0,Ve.r)())}]}case"last_visited_time":{const{currentUserId:t}=e;if(!t)return[];const o=(0,hr.Pv)({parent_id:r.id,user_id:t}),n=K.H8.createChildStore(r,{table:hr.UI,id:o,spaceId:r.getSpaceId()}).getModel(),i=null==n?void 0:n.getVisitedAt();if(!i)return[];return[{id:i,type:"date",value:(0,Me.CQ)(i,(0,Ve.r)())}]}case"rollup":case"location":case"verification":return[];default:(0,xo.t1)(a)}}const jr=["edit"],Br=r.forwardRef(((e,t)=>{window.__c={n:"TableRollupProperty"};const o=Lr(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:f.sf[h.C.Table].checkbox},textButtonStyle:{padding:f.sf[h.C.Table].text},buttonButtonStyle:{padding:f.sf[h.C.Table].button}})),[]));return(0,b.jsx)(_r,{...o,numberRightAlign:!0,EmptyComponent:Se.q8,quickActionButtons:jr})})),Tr=["edit"],Mr=r.forwardRef(((e,t)=>{window.__c={n:"PageRollupProperty"};const o=Lr(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:f.sf[h.C.Page].checkbox},textButtonStyle:{padding:f.sf[h.C.Page].text},buttonButtonStyle:{padding:f.sf[h.C.Page].button}})),[]));return(0,b.jsx)(_r,{...o,quickActionButtons:Tr,EmptyComponent:Se.T$})})),Vr=r.forwardRef(((e,t)=>{window.__c={n:"CompactRollupProperty"};const o=Lr(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:f.sf[h.C.CompactPage].checkbox},textButtonStyle:{padding:f.sf[h.C.CompactPage].text},buttonButtonStyle:{padding:f.sf[h.C.CompactPage].button}})),[]));return(0,b.jsx)(_r,{...o,EmptyComponent:Se.T$})})),Ar=r.forwardRef(((e,t)=>{window.__c={n:"ListRollupProperty"};const o=Lr(e,t);return(0,b.jsx)(_r,{...o})})),Ir=r.forwardRef(((e,t)=>{window.__c={n:"BoardRollupProperty"};const o=Lr(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:f.sf[h.C.Board].checkbox},textButtonStyle:{padding:f.sf[h.C.Board].text},buttonButtonStyle:{padding:f.sf[h.C.Board].button}})),[]));return(0,b.jsx)(_r,{...o})})),Fr=r.forwardRef(((e,t)=>{window.__c={n:"CalendarRollupProperty"};const o=Lr(e,t);return(0,b.jsx)(_r,{...o})})),Er=r.forwardRef(((e,t)=>{window.__c={n:"GalleryRollupProperty"};const o=Lr(e,t);return(0,b.jsx)(_r,{...o})})),Kr=r.forwardRef(((e,t)=>{window.__c={n:"TimelineRollupProperty"};const o=Lr(e,t);return(0,b.jsx)(_r,{...o})})),Or=r.forwardRef(((e,t)=>{window.__c={n:"RelationRollupProperty"};const o=Lr(e,t);return(0,b.jsx)(_r,{...o})})),Zr=r.forwardRef(((e,t)=>{window.__c={n:"RelationSectionRollupProperty"};const o=Lr(e,t);return(0,b.jsx)(_r,{...o})}));function Lr(e,t,o){const{store:r,onContextMenu:n,property:i,collectionStore:l}=e;return{ref:t,store:r,property:i,collectionStore:l,editButtonClickProps:(0,ee.Am)(e),onContextMenu:n,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,textButtonStyle:null==o?void 0:o.textButtonStyle,buttonButtonStyle:null==o?void 0:o.buttonButtonStyle}}const Hr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(Wt,{...e,ref:t}))),zr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(Ut,{...e,ref:t}))),Dr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(Nt,{...e,ref:t}))),Wr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(qt,{...e,ref:t}))),Ur=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(Gt,{...e,ref:t}))),Nr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(Qt,{...e,ref:t}))),qr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)($t,{...e,ref:t}))),Gr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(Yt,{...e,ref:t}))),Qr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(Xt,{...e,ref:t}))),$r=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(Jt,{...e,ref:t}))),Yr=(0,r.forwardRef)(((e,t)=>(0,b.jsx)(eo,{...e,ref:t}))),Xr=r.memo(r.forwardRef(((e,t)=>{const{store:o,onContextMenu:n,property:i,disabled:l,enablePointerEventsForInteractiveTypes:s,editButtonClickProps:c,selectButtonStyle:p,checkboxButtonStyle:h,checkboxShowLabel:f}=e,{baseStyles:S,collectionContextStore:x,propertySchema:g,shouldRenderTooltip:v}=(0,r.useContext)(m.O),w=g,C=(null==S?void 0:S.tokenFormat)??Ct.l.Medium,P=(0,a.VK)((()=>o.getPropertyValue(i)),[i,o]),_=(0,r.useMemo)((()=>w?u.ZG(P,w)??"":""),[P,w]),k=(0,a.VK)((()=>{var e;return(null==x||null===(e=x.getPropertyFormat(i))||void 0===e?void 0:e.statusShowAs)??"select"}),[x,i]),R=(0,d.yK)((()=>({buttonStyle:{...S.buttonStyle,..."select"===k?p:h},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{}})),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,p,h,k]);return(0,b.jsx)(y.Z,{ref:t,onContextMenu:n,editButtonClickProps:c,style:R.buttonStyle,pressedStyle:R.buttonPressedStyle,hoveredStyle:R.buttonHoveredStyle,tooltipPropertyValue:v&&"checkbox"===k?_:void 0,children:"checkbox"===k?(0,b.jsx)(en,{enablePointerEventsForInteractiveTypes:s,showLabel:f,propertyName:null==w?void 0:w.name,propertyValue:P,statusValue:_,editButtonClickProps:c,containerRef:t,store:o,property:i,disabled:l}):(0,b.jsx)(Jr,{statusValue:_,tokenFormat:C})})})));function Jr(e){window.__c={n:"StatusSelectPropertyValue"};const{statusValue:t}=e,{propertySchema:o}=(0,r.useContext)(m.O),n=o,{foundOption:i,foundGroup:l}=(0,r.useMemo)((()=>{const e=(null==n?void 0:n.options)??[],o=e.find((e=>e.value===t)),r=(null==n?void 0:n.groups)??[],i=o&&r.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(o.id)}));return{options:e,foundOption:o,foundGroup:i}}),[n,t]);return i?(0,b.jsx)($e.K,{children:(0,b.jsx)(Ht.J,{type:"status",value:i.value,color:i.color,groupColor:null==l?void 0:l.color})}):null}function en(e){window.__c={n:"StatusCheckboxPropertyValue"};const{propertyName:t,propertyValue:o,statusValue:n,showLabel:i,enablePointerEventsForInteractiveTypes:l,editButtonClickProps:a,containerRef:d,store:c,property:p,disabled:y}=e,{propertySchema:h,shouldRenderTooltip:f}=(0,r.useContext)(m.O),S=h,x=re(c,p,y),g=(0,s.O7)(),v=(0,r.useMemo)((()=>!!S&&u.rO(o,S,E.default.getIntl())),[o,S]),w=(0,r.useCallback)((async e=>{const t=e.altKey;await gr.z({...a,element:d&&"current"in d?(null==d?void 0:d.current)??void 0:void 0,environment:g,statusSetCheckbox:!t})}),[d,a,g]);return(0,b.jsx)(te.n,{onClick:w,propertyLabel:i?t:void 0,checked:v,enablePointerEventsForInteractiveTypes:l,tooltip:f?void 0:n,disabled:x})}const tn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableStatusProperty"};const o=yn(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:f.sf[h.C.Table].checkbox}})),[]));return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!1})})),on=(0,r.forwardRef)(((e,t)=>{window.__c={n:"PageStatusProperty"};const{store:o,property:r,collectionStore:n}=e,i=yn(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:f.sf[h.C.Page].checkbox}})),[]));return(0,b.jsx)(vo.O,{store:o,property:r,collectionStore:n,children:(0,b.jsx)(Xr,{...i,checkboxShowLabel:!1})})})),rn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CompactStatusProperty"};const o=yn(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:f.sf[h.C.CompactPage].checkbox}})),[]));return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!1})})),nn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListStatusProperty"};const o=yn(e,t);return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!1})})),ln=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BoardStatusProperty"};const o=yn(e,t,(0,d.yK)((()=>({checkboxButtonStyle:{padding:f.sf[h.C.Board].checkbox}})),[]));return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!0})})),sn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CalendarStatusProperty"};const o=yn(e,t);return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!0})})),an=(0,r.forwardRef)(((e,t)=>{window.__c={n:"GalleryStatusProperty"};const o=yn(e,t);return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!0})})),dn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TimelineStatusProperty"};const o=yn(e,t);return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!1})})),cn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationStatusProperty"};const o=yn(e,t);return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!1})})),un=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionStatusProperty"};const o=yn(e,t);return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!1})})),pn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"MiniStatusProperty"};const o=yn(e,t);return(0,b.jsx)(Xr,{...o,checkboxShowLabel:!1})}));function yn(e,t,o){const{store:n,disabled:i,property:l,onContextMenu:s,enablePointerEventsForInteractiveTypes:d}=e,{collectionContextStore:c}=(0,r.useContext)(m.O),u=(0,a.VK)((()=>{var e;return"checkbox"===((null==c||null===(e=c.getPropertyFormat(l))||void 0===e?void 0:e.statusShowAs)??"select")}),[c,l]),p=(0,ee.Am)(e,{isStatusCheckbox:u});return{ref:t,store:n,disabled:i,property:l,selectButtonStyle:null==o?void 0:o.selectButtonStyle,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,editButtonClickProps:p,onContextMenu:s,enablePointerEventsForInteractiveTypes:d}}var mn=o(18746);const hn=r.memo((0,r.forwardRef)(((e,t)=>{const{store:o,buttonStyle:n,onContextMenu:i,editButtonClickProps:l,quickActionButtons:s=[],EmptyComponent:c,property:u}=e,{isEmpty:p,baseStyles:h}=(0,r.useContext)(m.O),f=(0,a.VK)((()=>o.getPropertyValue(u)),[u,o]),x=(0,d.yK)((()=>({buttonStyle:{...h.buttonStyle,...n},buttonPressedStyle:h.buttonPressedStyle??{},buttonHoveredStyle:h.buttonHoveredStyle??{}})),[h.buttonHoveredStyle,h.buttonPressedStyle,h.buttonStyle,n]);return p&&void 0===c?null:(0,b.jsx)(y.Z,{ref:t,style:x.buttonStyle,hoveredStyle:x.buttonHoveredStyle,pressedStyle:x.buttonPressedStyle,onContextMenu:i,editButtonClickProps:l,quickActionButtons:s,children:p&&void 0!==c?(0,b.jsx)(c,{}):(0,b.jsx)(S.Y,{children:(0,b.jsx)(mn.A,{textValue:f,parentStore:o})})})}))),fn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"PageTextProperty"};const{store:o,property:n,format:i,collectionStore:l}=e,s=(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].text}})),[]),c=(0,a.VK)((()=>l.getSchema()),[l]),u=(0,r.useMemo)((()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ot,{store:o,property:n,openOverlay:!0},"autofill"),(0,b.jsx)(p.Z,{store:o,schema:c,property:n,format:i},"copy")]})),[i,n,c,o]),y=Rn(e,t,s);return(0,b.jsx)(hn,{...y,EmptyComponent:Se.T$,quickActionButtons:u})})),Sn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableTextProperty"};const{store:o,property:n,format:i,collectionStore:l}=e,{isMobile:c}=(0,s.Fy)(),u=(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].text}})),[]),y=(0,a.VK)((()=>l.getSchema()),[l]),m=(0,r.useMemo)((()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ot,{store:o,property:n,openOverlay:!0},"autofill"),c?void 0:(0,b.jsx)(p.Z,{store:o,schema:y,property:n,format:i},"copy")]})),[i,c,n,y,o]),S=Rn(e,t,u);return(0,b.jsx)(hn,{...S,EmptyComponent:Se.q8,quickActionButtons:m})})),bn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CompactTextProperty"};const o=Rn(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].text,maxWidth:"300px"}})),[]));return(0,b.jsx)(hn,{...o,EmptyComponent:Se.T$})})),xn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListTextProperty"};const{showIfEmpty:o}=e,r=Rn(e,t);return(0,b.jsx)(hn,{...r,EmptyComponent:o?Se.s3:void 0})})),gn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BoardTextProperty"};const{showIfEmpty:o}=e,r=Rn(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].text}})),[]));return(0,b.jsx)(hn,{...r,EmptyComponent:o?Se.s3:void 0})})),vn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"CalendarTextProperty"};const o=Rn(e,t);return(0,b.jsx)(hn,{...o})})),wn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"GalleryTextProperty"};const{showIfEmpty:o}=e,r=Rn(e,t);return(0,b.jsx)(hn,{...r,EmptyComponent:o?Se.s3:void 0})})),Cn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TimelineTextProperty"};const o=Rn(e,t);return(0,b.jsx)(hn,{...o})})),Pn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationTextProperty"};const o=Rn(e,t);return(0,b.jsx)(hn,{...o})})),_n=(0,r.forwardRef)(((e,t)=>{window.__c={n:"RelationSectionTextProperty"};const o=Rn(e,t);return(0,b.jsx)(hn,{...o})})),kn=(0,r.forwardRef)(((e,t)=>{window.__c={n:"MiniTextProperty"};const o=Rn(e,t);return(0,b.jsx)(hn,{...o,EmptyComponent:Se.zX})}));function Rn(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,ee.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle}}var jn=o(68626),Bn=o(95855),Tn=o(54497),Mn=o(23867),Vn=o(82990),An=o(64002),In=o(8406),Fn=o(45264),En=o(9953),Kn=o(24677),On=o(98104),Zn=o(60682),Ln=o(28020),Hn=o(14976),zn=o(52821),Dn=o(41232),Wn=o(65598),Un=o(72395),Nn=o(19511),qn=o(20362),Gn=o(31278),Qn=o(65187),$n=o(50906),Yn=o(75079);function Xn(e){window.__c={n:"TitlePropertyEditButton"};const{store:t}=e,o=(0,s.O7)(),n=(0,Lo.DK)(),i=(0,r.useCallback)((()=>{const e=t.getBlockTitleStore();Fn.Z5({store:t}),Kn.eP({environment:o,store:t}),On.NX({store:e}),$n.sdb(o,"list_item_edit_mode_enter",{...(0,Yn.Pn)(n),block_id:t.id,from:"click",view_type:"list"})}),[t,o,n]),l=(0,d.yK)((e=>({buttonStyle:{color:e.mediumTextColor,fill:e.mediumTextColor,height:24,width:30},iconStyle:{color:e.mediumTextColor,fill:e.mediumTextColor}})),[]);return(0,b.jsx)(_t.Z,{renderTooltip:()=>(0,b.jsx)(A.FormattedMessage,{defaultMessage:"Edit",id:"collectionViewItem.edit.tooltip"}),render:e=>(0,b.jsx)(Et.Z,{icon:xr.R,ariaLabel:"edit",onClick:i,hasBackground:!0,showShadow:!0,style:l.buttonStyle,iconStyle:l.iconStyle,...e})})}var Jn=o(15145),ei=o(75018),ti=o(78316),oi=o(84210),ri=o(80444);const ni=(0,A.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"}});function ii(e){window.__c={n:"TitlePropertyPeekButton"};const{store:t,handleOpenPeekPage:o,showLabel:n,showIcon:i}=e,l=(0,s.O7)(),c=(0,Lo.DK)(),u=(0,a.VK)((()=>null==c?void 0:c.collectionViewStore()),[c]),{peekModeProps:p}=(0,a.VK)((()=>{const e=void 0!==u?ti.kr(u):"full_page";return{peekModeProps:(0,Bt.X9)(e,!1)}}),[u],{useDeepEqual:!0}),y=(0,a.VK)((()=>(0,oi.ZP)({store:t,fullyQualified:!1,pageVisitSource:Jn.tY.LinkInPage})),[t]),m=(0,r.useCallback)((()=>{const{mainEditorCurrentBlockStore:e}=ri.default.state;return ti.mb({store:t,mainEditorCurrentBlockStore:e,collectionContextStore:c,fullyQualified:!1})}),[t,c]),h=(0,r.useCallback)((e=>{if(e.metaKey||e.ctrlKey)ei.navigate({environment:l,url:y,openInNew:"tab"});else{const e=m();e&&(o&&o(),ei.navigate({environment:l,url:e}))}}),[l,m,y,o]),f=(0,r.useCallback)((e=>{1===e.button&&ei.navigate({environment:l,url:y,openInNew:"tab"})}),[l,y]),S=(0,d.yK)((e=>({buttonStyle:{color:e.mediumTextColor,fill:e.mediumTextColor,...!n&&{width:30,height:24},background:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,border:void 0,fontSize:12,fontWeight:Vn.Z.fontWeight.medium,textTransform:"uppercase",letterSpacing:.5},buttonHoveredStyle:{background:e.whiteButtonHoveredBackground},buttonPressedStyle:{background:e.whiteButtonPressedBackground},iconStyle:{color:e.mediumTextColor,fill:e.mediumTextColor}})),[n]);return(0,b.jsx)(_t.Z,{renderTooltip:()=>p.tooltip,render:e=>(0,b.jsx)("div",{onAuxClick:f,children:(0,b.jsx)(Z.Z,{onClick:h,icon:i?p.icon:void 0,ariaLabel:p.tooltip,isSmall:!0,style:S.buttonStyle,iconStyle:S.iconStyle,hoveredStyle:S.buttonHoveredStyle,pressedStyle:S.buttonPressedStyle,...e,children:n?E.default.formatMessage(ni.openAsPageTitle):void 0})})})}const li=r.memo((0,r.forwardRef)(((e,t)=>{const{store:o,collectionStore:n,buttonStyle:i,textStyle:l,recordIconStyle:c,format:u,editButtonClickProps:p,onContextMenu:h,quickActionButtons:f,quickActionButtonsStyle:S,onTab:x,onUntab:g,forceMouseEntered:v,iconActionFrom:w,iconSize:C,showIcon:P,hidePlaceholderText:_,property:k,isInlineEditable:R,linkifyText:j}=e,B=(0,s.O7)(),T=(0,d.Fg)(),{baseStyles:M,collectionContextStore:V,isReadOnly:A,propertySchema:I}=(0,r.useContext)(m.O),F=(0,a.VK)((()=>(0,zn.JI)(o)),[o],{useDeepEqual:!0}),K=(0,a.VK)((()=>{if(!R)return;const e=Nn.Z.state;return Boolean(e.isActive&&e.store.id===o.id)}),[R,o.id]),{icon:O,iconStore:Z,isEmptyPage:L,recordTable:H,blockType:z,hasError:D}=(0,a.VK)((()=>{var e;return{icon:o.getIcon(),iconStore:o.getIconStore(),isEmptyPage:o.isEmptyPage(),recordTable:null===(e=o.getIconStore())||void 0===e?void 0:e.table,blockType:o.getType(),hasError:o.hasError()}}),[o],{useDeepEqual:!0}),W=(0,a.VK)((()=>Wn.Xp(o,{recursivelyLoadAllDiscussions:!1})),[o]),U=(0,kt.us)(k),N=(0,a.VK)((()=>{if(!U)return j?Bt.Hw({store:o,propertySchema:I,property:k}):void 0;const e=o.getFormatStore().getKeyStore("uri").getValue(),t=e&&An.Nm({str:e,allowNoProtocol:!1});return t&&(0,Dn.pI)(t,o.pointer.spaceId)}),[U,o,j,I,k]),q=(0,d.yK)((()=>({textStyle:{...M.textStyle,display:"inline",fontWeight:Vn.Z.fontWeight.medium,...l},buttonStyle:{...M.buttonStyle,...i},quickActionButtonsStyle:{...S},buttonPressedStyle:{...M.buttonPressedStyle,background:"none"},buttonHoveredStyle:{...M.buttonHoveredStyle,background:"none"},recordIconStyle:{display:"inline-flex",verticalAlign:"text-top",...c},link:{display:"inline"},discussionIndicator:{display:"inline-flex",alignItems:"center",color:T.lightTextColor,fontSize:12,fontWeight:Vn.Z.fontWeight.semibold,marginLeft:8,verticalAlign:"text-top"},errorIcon:{display:"inline-block",verticalAlign:"text-top",marginLeft:1,marginRight:7,paddingBottom:4,width:16,fill:T.accentColors.orange[500]}})),[M.buttonHoveredStyle,M.buttonPressedStyle,M.buttonStyle,M.textStyle,i,S,c,l,T]),G=(0,r.useCallback)((()=>{V&&U&&In.YU({environment:B,collectionContextStore:V,block_id:o.id,property:k,from:Bt.Sy(u),is_external_title_property_id:!0})}),[V,B,u,k,o.id,U]),Q=(0,r.useCallback)((e=>{Z&&J.createAndCommit({userAction:"TitleProperty.handleRecordIconChange",environment:B,perform:t=>{En.sO({store:Z,value:e,transaction:t})}})}),[B,Z]),$=(0,r.useCallback)((e=>{"Enter"!==(null==e?void 0:e.key)&&Fn.IH({store:o})}),[o]),Y=(0,r.useCallback)((()=>{Nn.Z.setState({isActive:!1}),On.ZH(B),Kn.Ys({environment:B,store:o})}),[o,B]),X=(0,a.VK)((()=>{var e;if(R){const e=_?void 0:K?E.default.formatMessage(ui.typeAName):E.default.formatMessage(ui.untitledBlock);return(0,b.jsx)(Qn.Z,{store:F,disabled:!K,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableEmbedMenu:!0,disableShiftEnter:!0,onEnter:Y,onEsc:Y,onTab:x,onUntab:g,onChange:$,placeholder:e,style:q.textStyle,disableSelectAllBlocks:!0,pasteBehavior:"inline"})}let t=null===(e=o.getTitleStore())||void 0===e?void 0:e.getValue();o.isType("external_object_instance_page")&&(t=o.getPropertyValue(k));const r=Hn.IY({environment:B,textValue:t&&{value:t,spaceId:(0,Mn.C)(o.pointer.spaceId)},parentStore:o,disableHover:!0,disableStyleAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,theme:T,emojiType:(0,Zn.e_)(B),katex:B.KatexStore.getKatex(),formulaValueTypes:[]});return(0,b.jsx)("span",{style:q.textStyle,children:r})}),[F,B,_,R,K,$,x,g,k,o,q.textStyle,T,Y]),ee=(0,r.useMemo)((()=>D?(0,Tn.t)(q.errorIcon):"withContent"===P&&void 0===O&&L?null:A?(0,b.jsx)(Gn.Z,{disabled:!0,icon:O,isEmptyPage:L,size:C,style:q.recordIconStyle}):(0,b.jsx)(Gn.Z,{disabled:!1,bucket:"secure",store:o,icon:O,isEmptyPage:L,size:C,iconLoggingData:{collection_id:n.id,recordTable:H,source:w,block_type:z},style:q.recordIconStyle,onChange:Q})),[z,n.id,Q,D,O,w,L,A,C,H,P,o,q.errorIcon,q.recordIconStyle]),te=(0,r.useMemo)((()=>W>0&&(0,b.jsxs)("span",{style:q.discussionIndicator,children:[(0,Bn.z)({width:14,height:14,marginRight:4,fill:T.mediumIconColor}),W]},"discussion-indicator")),[W,q.discussionIndicator,T.mediumIconColor]);return(0,b.jsxs)(y.Z,{ref:t,editButtonClickProps:p,onContextMenu:h,style:q.buttonStyle,pressedStyle:q.buttonPressedStyle,hoveredStyle:q.buttonHoveredStyle,quickActionButtons:f,quickActionButtonsStyle:q.quickActionButtonsStyle,quickActionButtonsForceVisible:B.device.isMobile?void 0:v,tooltipHide:!0,children:[ee,!K&&N?(0,b.jsx)(qn.Z,{href:N,external:U,onClick:G,style:q.link,children:X}):X,te]})}))),si=(0,r.forwardRef)(((e,t)=>{window.__c={n:"TableTitleProperty"};const{store:o,handleOpenPeekPage:n,width:i}=e,{isMobile:l}=(0,s.Fy)(),{isReadOnly:a}=(0,r.useContext)(m.O),c=(0,d.yK)((e=>({buttonStyle:{padding:"5px 8px"},textStyle:{...Bt.z0(e)},recordIconStyle:{height:22,width:22,margin:"-2px 3px 0px -2px"}})),[]),u=(0,r.useMemo)((()=>(0,b.jsx)(ii,{handleOpenPeekPage:n,store:o,showLabel:l||void 0===i||i>100,showIcon:!l})),[n,l,o,i]),p=ci(e,t,c);return(0,b.jsx)(li,{...p,iconActionFrom:"collection_table_view",showIcon:"withContent",iconSize:20,hidePlaceholderText:!0,quickActionButtons:u,linkifyText:a})})),ai=(0,r.forwardRef)(((e,t)=>{window.__c={n:"ListTitleProperty"};const{store:o}=e,{isReadOnly:n}=(0,r.useContext)(m.O),{isPhone:i,isMobile:l}=(0,s.Fy)(),c=(0,a.VK)((()=>{const e=Nn.Z.state;return Boolean(e.isActive&&e.store.id===o.id)}),[o]),{collectionContextStore:u}=(0,r.useContext)(m.O),p=(0,a.VK)((()=>{const e=null==u?void 0:u.collectionViewBlockStore();return!!e&&(0,Ln.aT)(e.id)}),[u]),y=(0,d.yK)((e=>({buttonStyle:{marginLeft:0,marginRight:"auto",maxWidth:p?"100%":"max(75%, 400px)",minWidth:i?void 0:240,padding:0,paddingLeft:p?Un.B/2:void 0},textStyle:{fontSize:p?14:16,whiteSpace:c?"normal":"nowrap",pointerEvents:c?void 0:"none",cursor:c?"text":void 0,borderBottom:p?"":`1px solid ${e.tableDividerColor}`,width:"auto"},recordIconStyle:{marginRight:5},actionButton:{marginLeft:10,marginRight:1,order:3}})),[c,i,p]),h=(0,r.useMemo)((()=>!l&&(!n&&!c?(0,b.jsx)(Xn,{store:o}):(0,b.jsx)(ii,{store:o,showLabel:!1,showIcon:!0}))),[c,l,n,o]),f=ci(e,t,y);return(0,b.jsx)(li,{...f,iconActionFrom:"collection_list_view",showIcon:"always",iconSize:p?20:22,editButtonClickProps:void 0,quickActionButtonsStyle:y.actionButton,quickActionButtons:h,isInlineEditable:!0})})),di=(0,r.forwardRef)(((e,t)=>{window.__c={n:"UnsupportedTitleProperty"},jn.log({level:"error",from:"BlockPropertyValue",type:"BlockPropertyValue.InvalidTitlePropertyFormat"});const o=ci(e,t);return(0,b.jsx)(li,{...o,iconActionFrom:"collection_table_view",showIcon:"always",iconSize:20})}));function ci(e,t,o){const{store:r,collectionStore:n,property:i,onContextMenu:l,format:s,onTab:a,onUntab:d,forceMouseEntered:c}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,ee.Am)(e),onContextMenu:l,buttonStyle:null==o?void 0:o.buttonStyle,textStyle:null==o?void 0:o.textStyle,recordIconStyle:null==o?void 0:o.recordIconStyle,quickActionButtonsStyle:null==o?void 0:o.quickActionButtonsStyle,format:s,onTab:a,onUntab:d,forceMouseEntered:c}}const ui=(0,A.defineMessages)({untitledBlock:{defaultMessage:"Untitled",id:"collectionViewItemTitle.untitledBlock"},typeAName:{defaultMessage:"Type a name",id:"collectionViewItemTitle.itemName.placeholder"}});var pi=o(4308),yi=o(11028),mi=o(58230);const hi=r.memo(r.forwardRef(((e,t)=>{var o;const{property:n,collectionStore:i,store:l,buttonStyle:s,editButtonClickProps:c,EmptyComponent:p}=e,{isReadOnly:h,propertySchema:f,baseStyles:S}=(0,r.useContext)(m.O),x=f,g=(0,a.VK)((()=>i.getSchema()),[i]),v=(0,a.VK)((()=>!!x&&zn._W(x,l,g)),[x,g,l]),w=h||!v,C=(0,d.yK)((e=>({buttonStyle:{...S.buttonStyle,...s,cursor:w?"text":"pointer"},buttonPressedStyle:S.buttonPressedStyle??{},buttonHoveredStyle:S.buttonHoveredStyle??{},secondaryTooltipText:{color:e.mediumInvertedTextColor}})),[S.buttonHoveredStyle,S.buttonPressedStyle,S.buttonStyle,s,w]),P=(0,a.VK)((()=>{const e=l.getPropertyValue(n);return(0,u._w)(e)}),[n,l]),_=(0,r.useMemo)((()=>(0,pi.WN)(P)),[P]),k=(0,r.useMemo)((()=>{if("none"!==_.type)return(0,b.jsx)(mi.Z,{verificationState:_,blockStore:l})}),[l,_]),R=(0,r.useMemo)((()=>{var e;if(!!v)return;const t=null==x?void 0:x.verifier_property,o=t?null===(e=g[t])||void 0===e?void 0:e.name:void 0;return(0,b.jsx)(fi,{verifierPropertyName:o})}),[v,g,x]),j="none"===_.type;return j&&void 0===p?null:(0,b.jsx)(y.Z,{ref:t,editButtonClickProps:w?void 0:c,style:C.buttonStyle,hoveredStyle:C.buttonHoveredStyle,pressedStyle:C.buttonPressedStyle,tooltipPropertyValue:k,tooltipPropertyCaption:R,children:j&&void 0!==p?(0,b.jsx)(p,{}):(0,b.jsx)(yi.z,{verificationValue:P,fontSize:null===(o=S.buttonStyle)||void 0===o?void 0:o.fontSize})})})));function fi(e){const{verifierPropertyName:t}=e;return t?(0,b.jsx)(A.FormattedMessage,{defaultMessage:"Only people listed in {verifierPropertyName} can verify this page",id:"VerificationPropertyButton.tooltip.editRestrictedToVerifier",values:{verifierPropertyName:(0,b.jsx)("span",{style:{fontWeight:Vn.Z.fontWeight.bold},children:t})}}):(0,b.jsx)(A.FormattedMessage,{defaultMessage:"Only page owners can verify this page",id:"VerificationPropertyButton.tooltip.editRestrictedToOwner"})}const Si=r.forwardRef(((e,t)=>{window.__c={n:"TableVerificationProperty"};const o=Ri(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Table].text}})),[]));return(0,b.jsx)(hi,{...o,EmptyComponent:Se.q8})})),bi=r.forwardRef(((e,t)=>{window.__c={n:"PageVerificationProperty"};const o=Ri(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Page].text}})),[]));return(0,b.jsx)(hi,{...o,EmptyComponent:Se.T$})})),xi=r.forwardRef(((e,t)=>{window.__c={n:"CompactVerificationProperty"};const o=Ri(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.CompactPage].text}})),[]));return(0,b.jsx)(hi,{...o,EmptyComponent:Se.T$})})),gi=r.forwardRef(((e,t)=>{window.__c={n:"ListVerificationProperty"};const{collectionStore:o,store:n,showIfEmpty:i}=e,{propertySchema:l}=(0,r.useContext)(m.O),s=l,d=(0,a.VK)((()=>o.getSchema()),[o]),c=(0,a.VK)((()=>!!s&&zn._W(s,n,d)),[s,d,n]),u=Ri(e,t);return(0,b.jsx)(hi,{...u,EmptyComponent:i&&c?Se.s3:void 0})})),vi=r.forwardRef(((e,t)=>{window.__c={n:"BoardVerificationProperty"};const{collectionStore:o,store:n,showIfEmpty:i}=e,{propertySchema:l}=(0,r.useContext)(m.O),s=l,c=(0,a.VK)((()=>o.getSchema()),[o]),u=(0,a.VK)((()=>!!s&&zn._W(s,n,c)),[s,c,n]),p=Ri(e,t,(0,d.yK)((()=>({buttonStyle:{padding:f.sf[h.C.Board].text}})),[]));return(0,b.jsx)(hi,{...p,EmptyComponent:i&&u?Se.s3:void 0})})),wi=r.forwardRef(((e,t)=>{window.__c={n:"CalendarVerificationProperty"};const o=Ri(e,t);return(0,b.jsx)(hi,{...o})})),Ci=r.forwardRef(((e,t)=>{window.__c={n:"GalleryVerificationProperty"};const o=Ri(e,t);return(0,b.jsx)(hi,{...o})})),Pi=r.forwardRef(((e,t)=>{window.__c={n:"TimelineVerificationProperty"};const o=Ri(e,t);return(0,b.jsx)(hi,{...o})})),_i=r.forwardRef(((e,t)=>{window.__c={n:"RelationVerificationProperty"};const o=Ri(e,t);return(0,b.jsx)(hi,{...o})})),ki=r.forwardRef(((e,t)=>{window.__c={n:"RelationSectionVerificationProperty"};const o=Ri(e,t);return(0,b.jsx)(hi,{...o})}));function Ri(e,t,o){const{store:r,collectionStore:n,property:i,onClick:l,onContextMenu:s}=e;return{ref:t,store:r,collectionStore:n,property:i,editButtonClickProps:(0,ee.Am)(e),onClick:l,onContextMenu:s,buttonStyle:null==o?void 0:o.buttonStyle}}function ji(e){window.__c={n:"BlockPropertyRouter"};const{property:t,collectionStore:o,format:s}=e,{type:a}=(0,ee.PJ)(o,t)||{},d=(0,r.useContext)(i.Ue),c=(0,r.useRef)(null),u=(0,ee.Ri)(o,t);if((0,n.c)(l.Z,(()=>({getNode:()=>{const{current:e}=c;return e?"getNode"in e?e.getNode():e:null},getProps:()=>({...e,property:u}),getContextHorizontalScroller:()=>null==d?void 0:d.horizontalScroller,getContextVerticalScroller:()=>null==d?void 0:d.verticalScroller})),[e]),!a)return null;const p=Ti[s][a];return null===p?null:(0,b.jsx)(m.Z,{...e,property:u,containerRef:c,children:(0,b.jsx)(p,{ref:c,...e,property:u})})}const Bi=null,Ti={[h.C.Table]:{checkbox:ne,created_by:_o,created_time:Ke,date:Ke,email:xe,file:Xe,formula:dt.n8,last_edited_by:_o,last_edited_time:Ke,last_visited_time:Ke,location:pt,multi_select:Wt,number:io,person:_o,phone_number:xe,relation:$o,rollup:Br,select:Hr,status:tn,text:Sn,title:si,url:xe,verification:Si,auto_increment_id:w,button:H},[h.C.Board]:{checkbox:ae,created_by:To,created_time:Le,date:Le,email:Ce,file:ot,formula:dt.mm,last_edited_by:To,last_edited_time:Le,last_visited_time:Le,location:ft,multi_select:Gt,number:ao,person:To,phone_number:Ce,relation:er,rollup:Ir,select:Ur,status:ln,text:gn,title:di,url:Ce,verification:vi,auto_increment_id:_,button:U},[h.C.Calendar]:{checkbox:de,created_by:Mo,created_time:He,date:He,email:Pe,file:rt,formula:dt.yJ,last_edited_by:Mo,last_edited_time:He,last_visited_time:He,location:St,multi_select:Qt,number:co,person:Mo,phone_number:Pe,relation:tr,rollup:Fr,select:Nr,status:sn,text:vn,title:di,url:Pe,verification:wi,auto_increment_id:k,button:N},[h.C.ListView]:{checkbox:se,created_by:Bo,created_time:Ze,date:Ze,email:we,file:tt,formula:dt.p5,last_edited_by:Bo,last_edited_time:Ze,last_visited_time:Ze,location:ht,multi_select:qt,number:so,person:Bo,phone_number:we,relation:Jo,rollup:Ar,select:Wr,status:nn,text:xn,title:ai,url:we,verification:gi,auto_increment_id:P,button:W},[h.C.GalleryView]:{checkbox:ce,created_by:Vo,created_time:ze,date:ze,email:_e,file:nt,formula:dt.tD,last_edited_by:Vo,last_edited_time:ze,last_visited_time:ze,location:bt,multi_select:$t,number:uo,person:Vo,phone_number:_e,relation:or,rollup:Er,select:qr,status:an,text:wn,title:di,url:_e,verification:Ci,auto_increment_id:R,button:q},[h.C.Timeline]:{checkbox:ue,created_by:Ao,created_time:De,date:De,email:ke,file:it,formula:dt.uS,last_edited_by:Ao,last_edited_time:De,last_visited_time:De,location:xt,multi_select:Yt,number:po,person:Ao,phone_number:ke,relation:rr,rollup:Kr,select:Gr,status:dn,text:Cn,title:di,url:ke,verification:Pi,auto_increment_id:j,button:G},[h.C.Page]:{checkbox:ie,created_by:ko,created_time:Ee,date:Ee,email:ge,file:Je,formula:dt.wC,last_edited_by:ko,last_edited_time:Ee,last_visited_time:Ee,location:yt,multi_select:Ut,number:no,person:ko,phone_number:ge,relation:Yo,rollup:Mr,select:zr,status:on,text:fn,title:di,url:ge,verification:bi,auto_increment_id:v,button:z},[h.C.CompactPage]:{checkbox:le,created_by:Ro,created_time:Oe,date:Oe,email:ve,file:et,formula:dt.lE,last_edited_by:Ro,last_edited_time:Oe,last_visited_time:Oe,location:mt,multi_select:Nt,number:lo,person:Ro,phone_number:ve,relation:Xo,rollup:Vr,select:Dr,status:rn,text:bn,title:di,url:ve,verification:xi,auto_increment_id:C,button:D},[h.C.Relation]:{checkbox:pe,created_by:Io,created_time:We,date:We,email:Re,file:lt,formula:dt.eQ,last_edited_by:Io,last_edited_time:We,last_visited_time:We,location:gt,multi_select:Xt,number:yo,person:Io,phone_number:Re,relation:nr,rollup:Or,select:Qr,status:cn,text:Pn,title:di,url:Re,verification:_i,auto_increment_id:B,button:Q},[h.C.RelationSection]:{checkbox:ye,created_by:Fo,created_time:Ue,date:Ue,email:je,file:st,formula:dt.CJ,last_edited_by:Fo,last_edited_time:Ue,last_visited_time:Ue,location:vt,multi_select:Jt,number:mo,person:Fo,phone_number:je,relation:ir,rollup:Zr,select:$r,status:un,text:_n,title:di,url:je,verification:ki,auto_increment_id:T,button:$},[h.C.Mini]:{checkbox:me,created_by:Bi,created_time:Bi,date:Ne,email:Be,file:Bi,formula:Bi,last_edited_by:Bi,last_edited_time:Bi,last_visited_time:Bi,location:Bi,multi_select:eo,number:ho,person:jo,phone_number:Be,relation:lr,rollup:Bi,select:Yr,status:pn,text:kn,title:di,url:Be,verification:Bi,auto_increment_id:Bi,button:Bi}},Mi=r.memo(ji)},96310:(e,t,o)=>{o.d(t,{Z:()=>r});const r=32},11977:(e,t,o)=>{o.d(t,{Z:()=>Le});var r=o(67294),n=o(83355),i=o(1302),l=o(480),s=o(24405),a=o(41432),d=o(99036),c=o(80951),u=o(45433),p=o(40506),y=o(20669),m=o(72126),h=o(21202),f=o(6287),S=o(3791),b=o(70203),x=o(95371),g=o(97880),v=o(82990),w=o(63143),C=o(5366),P=o(50906),_=o(8406),k=o(51365),R=o(26797),j=o(98834),B=o(45264),T=o(19785),M=o(9953),V=o(79978),A=o(97444),I=o(39699),F=o(44866),E=o(66890),K=o(28020),O=o(49616),Z=o(75079),L=o(78316),H=o(19124),z=o(17809),D=o(88804),W=o(87279),U=o(77907),N=o(18245),q=o(1018),G=o(79576),Q=o(69454),$=o(35661),Y=o(78291),X=o(73420),J=o(56940),ee=o(3386),te=o(91839),oe=o(68785),re=o(78140),ne=o(40721),ie=o(89728),le=o(53437),se=o(64369),ae=o(16972),de=o(72589),ce=o(83785),ue=o(38354),pe=o(18145),ye=o(40424),me=o(56633),he=o(56596),fe=o(65187),Se=o(88898),be=o(32056),xe=o(33846),ge=o(74194),ve=o(83197),we=o(85893);class Ce extends n.Z{constructor(){super(...arguments),this.storeTypes={inputStore:xe.Z},this.handleInputChange=e=>{const t=e.target.value;this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:t}),this.props.onChange(this.parseInputChange(t))}}willMount(e){super.willMount(e);const{value:t,format:o,insertChar:r,intl:n}=e;r?(this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:r}),this.props.onChange(this.parseInputChange(r))):this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:be.uf(t,o,n)||""})}renderComponent(){const{disabled:e}=this.props;return(0,we.jsx)(ee.Z,{capture:!e,onDelete:m.yR,onSpace:m.yR,onBackspace:m.yR,onLeft:m.yR,onRight:m.yR,onUp:m.yR,onDown:m.yR,onSelectAll:m.yR,onRedo:m.yR,onUndo:m.yR,onCut:m.yR,onCopy:m.yR,onPaste:m.yR,onKeypress:m.yR,children:(0,we.jsx)(ge.Z,{style:{...ve.F,display:"block"},value:this.stores.inputStore.state.inputValue,format:ge.Z.Format.Transparent,onChange:this.handleInputChange,inputStyle:this.getInputStyle(),focus:!e,disabled:e})})}getInputStyle(){const{isTable:e}=this.props;return{textAlign:e?"right":"left"}}parseInputChange(e){this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:e});let t=be.p3(e);return"percent"===this.props.format&&void 0!==t&&(t/=100),t}}Ce.displayName="NumberPropertyValue";const Pe=(0,C.injectIntl)(Ce);class _e extends n.Z{constructor(){super(...arguments),this.storeTypes={inputStore:xe.Z},this.handleInputChange=e=>{const{onChange:t}=this.props,o=e.target.value;this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:o}),t(o)}}willMount(e){super.willMount(e);const{value:t}=e;this.stores.inputStore.setState({...this.stores.inputStore.state,inputValue:t||""})}renderComponent(){const{disabled:e}=this.props;return(0,we.jsx)(ee.Z,{capture:!e,onDelete:m.yR,onSpace:m.yR,onBackspace:m.yR,onLeft:m.yR,onRight:m.yR,onUp:m.yR,onDown:m.yR,onSelectAll:m.yR,onRedo:m.yR,onUndo:m.yR,onCut:m.yR,onCopy:m.yR,onPaste:m.yR,onKeypress:m.yR,children:(0,we.jsx)(ge.Z,{type:this.props.inputType,style:{...ve.F,display:"block"},value:this.stores.inputStore.state.inputValue,format:ge.Z.Format.Transparent,onChange:this.handleInputChange,focus:!e,disabled:e})})}}_e.displayName="URLPropertyValue";const ke=_e;var Re=o(78030),je=o(86628),Be=o(64964),Te=o(16859),Me=o(68709),Ve=o(24118);function Ae(e,t){const o=(0,l.O7)(),n=(0,C.useIntl)(),[i,s]=(0,r.useState)(),[a,c]=(0,r.useState)(!1),u=(0,je.VK)((()=>{const r=t&&d.qQ(t)?d.q3(t):void 0;return!(0,Ve.bb)({store:e.store,schema:e.store.getSchema(),property:e.property,userId:o.currentUser.id})&&(null==r?void 0:r.auto_update_on_edit)&&!a}),[e.property,e.store,t,a,o]),p=(0,r.useCallback)((()=>{s(void 0)}),[]),y=(0,je.VK)((()=>{var t;return null===(t=e.store)||void 0===t||null===(t=t.getFormat())||void 0===t||null===(t=t.ai_property_inference_map)||void 0===t||null===(t=t[e.property])||void 0===t?void 0:t.inference_id}),[e]),m=(0,r.useCallback)((e=>{F.submitFeedbackForAiAutofill({environment:o,inferenceId:y,feedbackType:e.type,userContent:e.userContent,shareWithNotion:e.shareWithNotion}),c(!0),Be.oV({label:n.formatMessage({id:"database.propertyValues.submitAIAutofillFeedbackThanks",defaultMessage:"Thank you for making Notion better!"})})}),[o,n,y]);return{feedbackState:i,setFeedbackState:s,handleFeedbackButtonDismiss:p,handleFeedbackButtonSubmit:m,shouldDisplayFeedbackButtons:Boolean(u)}}function Ie(e){let{autofillBlockPropertyValueFeedbackButtonsState:t}=e;window.__c={n:"AutofillBlockPropertyValueFeedbackButtons"};const o=(0,l.O7)(),n=(0,s.yK)((()=>({iconButtonStyles:{height:o.device.isMobile?24:28,width:o.device.isMobile?24:28}})),[o.device.isMobile]);return(0,we.jsxs)(r.Fragment,{children:[(0,we.jsx)(Te.d,{type:"thumbsup",ariaLabel:"thumbs-up",onClick:()=>{t.setFeedbackState({type:"thumbsup",userContent:"",shareWithNotion:!0})},feedbackState:t.feedbackState,onDismiss:t.handleFeedbackButtonDismiss,onSubmit:t.handleFeedbackButtonSubmit,onUpdate:t.setFeedbackState,showShareDataPopup:!1,onDataShareSubmit:m.ZT,userOptIn:!1,iconButtonStyles:n.iconButtonStyles}),(0,we.jsx)(Te.d,{type:"thumbsdown",ariaLabel:"thumbs-down",onClick:()=>{t.setFeedbackState({type:"thumbsdown",userContent:"",shareWithNotion:!0})},feedbackState:t.feedbackState,onDismiss:t.handleFeedbackButtonDismiss,onSubmit:t.handleFeedbackButtonSubmit,onUpdate:t.setFeedbackState,showShareDataPopup:!1,onDataShareSubmit:m.ZT,userOptIn:!1,iconButtonStyles:n.iconButtonStyles})]})}function Fe(e){let{overlayState:t,theme:o,propertySchema:r}=e;window.__c={n:"AutofillUpdateButtonSection"};const n=(0,je.VK)((()=>G.W.isWriting()),[]),i=(0,l.O7)(),s=Ae(t,r);return i.device.isMobile||n?null:(0,we.jsx)(Me.p,{allowSelectionWithin:!1,children:(0,we.jsxs)("div",{style:{position:"absolute",top:-36,right:0,borderRadius:5,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",background:o.popoverBackground,boxShadow:o.mediumBoxShadow,zIndex:-1,padding:2},children:[(0,we.jsx)(Ee,{overlayState:t,propertySchema:r}),s.shouldDisplayFeedbackButtons&&(0,we.jsx)(Ie,{autofillBlockPropertyValueFeedbackButtonsState:s})]})})}function Ee(e){let{overlayState:t,propertySchema:o}=e;window.__c={n:"AutofillUpdateButton"};const r=(0,l.O7)(),n=(0,s.yK)((e=>({buttonStyle:{display:"flex",height:28},iconStyle:{height:16,width:16,fill:e.aiPurpleColor},updateTextStyle:{fontWeight:500,color:e.aiPurpleColor}})),[]);return(0,we.jsx)(ie.Z,{style:n.buttonStyle,onClick:()=>{o&&F.autofillPropertyForBlocks({environment:r,stores:[t.store],property:t.property,propertySchema:o,userEventForAnalytics:"generate_from_overlay_button",collectionContextStore:t.collectionContextStore,from:O.Sy(t.format)})},children:(0,we.jsxs)(X.X2,{gap:4,children:[(0,y.y)(n.iconStyle),(0,we.jsx)("span",{style:n.updateTextStyle,children:(0,we.jsx)(C.FormattedMessage,{defaultMessage:"Update",id:"database.propertyValues.reGenerateAiAutofill"})})]})})}function Ke(e){let{overlayState:t,propertySchema:o,showSeparator:r}=e;window.__c={n:"AutofillBlockPropertyValueOverlayFeedbackButtonsMobile"};const n=Ae(t,o),i=(0,s.yK)((e=>({dot:{color:e.lightTextColor}})),[]);return n.shouldDisplayFeedbackButtons?(0,we.jsxs)(we.Fragment,{children:[r?(0,we.jsx)("div",{style:i.dot,children:""}):null,(0,we.jsx)(Ie,{autofillBlockPropertyValueFeedbackButtonsState:n})]}):null}class Oe extends n.Z{constructor(){super(...arguments),this.previousPopupProps=void 0,this.renderOverlay=()=>{const e=this.props.store.state;if(e.isOpen)return(0,we.jsx)(ee.Z,{capture:!0,onTab:this.handleTab,onUntab:this.handleUntab,onEnter:this.handleEnter,onDelete:m.yR,onBackspace:m.yR,children:(0,we.jsxs)(E.L1,{value:e.collectionContextStore,children:[this.renderAutofillUpdateButton(e),(0,we.jsx)("div",{style:{display:"flex",flexDirection:"column",overflowY:"auto",flexGrow:1,height:"100%"},children:this.renderOverlayContent(e)})]})},`${e.store.id}${e.property}`)},this.renderTitle=(e,t)=>{const{clonedStore:o}=e;return(0,we.jsx)(J.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!1,render:()=>(0,we.jsx)("div",{style:Oe.titleStyle,children:(0,we.jsx)(fe.Z,{store:o.getTitleStore()||o.getPropertyStore(e.property),disableSlashCommands:!0,onEnter:this.handleEnter,onEsc:this.handleEsc,onTab:this.handleTab,onUntab:this.handleUntab,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableShiftEnter:!0,onChange:()=>this.handleTextChange(e,t),disabled:this.isDisabled(e),pasteBehavior:"inline"})})})},this.aiAutofillExplanationTextIfAIProperty=e=>{var t;const o=this.getNormalizedPropertySchema(e),r=o&&d.qQ(o)&&("text"===o.type||(0,H.KZ)())?(0,d.q3)(o):void 0;if(!(0,H.Zt)(this.environment))return!1;if(G.W.isWriting())return(0,we.jsxs)(se.Z,{isSecondaryColor:!0,style:{fontSize:12,color:this.theme.aiPurpleColor,display:"flex",alignItems:"inline",fontWeight:500,marginTop:6,marginBottom:2},isSmall:!0,isMultiline:!0,children:[(0,we.jsx)(C.FormattedMessage,{defaultMessage:"AI is writing",id:"BlockPropertyValueOverlay.AIActionText.overlay"}),(0,we.jsx)("div",{style:{marginLeft:4},children:(0,we.jsx)(te.Z,{})})]});const n=(0,H.RT)(null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,e.store);return null!=r&&r.auto_update_on_edit?(0,we.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:6,marginBottom:2},children:[(0,we.jsx)(se.Z,{isSecondaryColor:!0,style:{fontSize:12},isSmall:!0,isMultiline:!0,children:(0,we.jsx)(C.FormattedMessage,{defaultMessage:"Auto-updated by AI",id:"BlockPropertyValueOverlay.helpText.overlay"})}),this.environment.device.isMobile&&n&&(0,we.jsxs)("div",{style:{paddingLeft:2,display:"flex",alignItems:"center"},children:[(0,we.jsx)("div",{style:{color:this.theme.lightTextColor},children:""}),(0,we.jsx)(Ze,{overlayState:e,propertySchema:o,style:{paddingLeft:2,paddingRight:2}}),(0,we.jsx)(Ke,{overlayState:e,propertySchema:o,showSeparator:!0})]})]}):this.environment.device.isMobile&&r&&n?(0,we.jsx)(Ze,{overlayState:e,propertySchema:o,style:{marginTop:6,marginBottom:2}}):void 0},this.handleBulkAutofillClick=(e,t)=>{const{collectionsBulkActionsToolbarStore:o}=e;if(o)if(t){const t=o.state.textStoresBeingEdited;if(!(0,g.Of)(t))return;const r=this.getNormalizedPropertySchema(e);if(!r)return;F.autofillPropertyForBlocks({environment:this.environment,stores:t,property:e.property,propertySchema:r,userEventForAnalytics:"generate_from_overlay_button",isBulkAction:!0,from:O.Sy(e.format),collectionContextStore:e.collectionContextStore})}else F.triggerAiAutofillUpsell({environment:this.environment,from:"ai_autofill_bulk_fill"})},this.bulkAutofillButton=e=>{var t;const{store:o,collectionsBulkActionsToolbarStore:r}=e,n=this.getNormalizedPropertySchema(e),i=null==n?void 0:n.name;if(n&&(0,H.RT)(null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,o)&&d.qQ(n)&&(0,d.q3)(n)&&r){var l;const t=r.getNumberOfTextStoresBeingEdited(),o=(null===(l=Y.default.state.data)||void 0===l?void 0:l.addOns)??[],n=(0,S.de)(o)||t<=5;return(0,we.jsx)(ie.Z,{style:{width:"100%",height:"auto",borderTop:`1px solid ${this.theme.regularDividerColor}`},onClick:()=>this.handleBulkAutofillClick(e,n),children:(0,we.jsxs)(X.X2,{gap:8,padding:8,alignItems:"start",children:[(0,y.y)({width:18,fill:this.theme.aiPurpleColor}),(0,we.jsxs)(X.sg,{gap:4,children:[(0,we.jsx)("div",{style:{fontSize:14,whiteSpace:"normal"},children:i?(0,we.jsx)(C.FormattedMessage,{defaultMessage:'Update "{propertyName}" with AI',id:"BlockPropertyValueOverlay.bulkAiAutofillButton.titleWithPropertyName",values:{propertyName:i}}):(0,we.jsx)(C.FormattedMessage,{defaultMessage:"Update with AI",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.title"})}),(0,we.jsx)("div",{style:{fontSize:12,color:this.theme.mediumTextColor,whiteSpace:"normal",lineHeight:"1.4em"},children:n?(0,we.jsx)(C.FormattedMessage,{defaultMessage:"{numPages, select, 1 {Update {numPages} page} other {Update {numPages} pages}}",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.countAndDescription",values:{numPages:t}}):(0,we.jsx)(C.FormattedMessage,{defaultMessage:"Get the AI add-on to update more than {maxItems} pages at once",id:"BlockPropertyValueOverlay.bulkAiAutofillButton.largeBulkFillUpsellMessage",values:{maxItems:5}})})]})]})})}},this.renderText=(e,t)=>{var o;const{clonedStore:r}=e,n=this.getNormalizedPropertySchema(e);let i;return"text"===(null==n?void 0:n.type)&&null!==(o=n.ai_inference)&&void 0!==o&&o.auto_update_on_edit&&(i="Empty"),(0,we.jsx)(J.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!1,render:()=>(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)("div",{style:ve.F,children:[(0,we.jsx)(fe.Z,{store:r.getPropertyStore(e.property),disableSlashCommands:!0,onEnter:this.handleEnter,onEsc:this.handleEsc,onTab:this.handleTab,onUntab:this.handleUntab,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onChange:()=>this.handleTextChange(e,t),disabled:this.isDisabled(e),pasteBehavior:"inline",placeholder:i}),this.aiAutofillExplanationTextIfAIProperty(e)]}),this.bulkAutofillButton(e)]})})},this.renderURL=(e,t)=>{const o=c.zB(this.getPropertyValue(e));let r="url";return"phone_number"===t?r="tel":"email"===t&&(r="email"),(0,we.jsx)(ke,{value:o,inputType:r,disabled:this.isDisabled(e),onChange:this.handleURLValueChange,onDismiss:this.close})},this.renderNumber=e=>{const t=e.format===Re.C.Table,o=c.VY(this.getPropertyValue(e)),r=this.getNormalizedPropertySchema(e);if(r&&"number"===r.type)return(0,we.jsx)(Pe,{value:o,isTable:t,format:r.number_format||"number",disabled:this.isDisabled(e),insertChar:e.insertChar,onChange:this.handleNumberValueChange})},this.renderSelect=e=>{const t=this.getSchema(e),o=this.getCollectionStore(e),r=this.getNormalizedPropertySchema(e);if(!o||!r||"select"!==r.type)return;const n=r.options||[],i=c.Sj(this.getPropertyValue(e),n);return(0,we.jsx)(ye.Z,{allowMultiple:!1,value:i?[i]:[],property:e.property,collectionId:o.id,schema:t,disabled:this.isDisabled(e),canConfigureCollection:this.canConfigureCollection(e),onChange:this.handleSelectPropertyMenuUpdate,analyticsFrom:this.getAnalyticsFrom(e),insertChar:e.insertChar,onAccept:this.handleSelectPropertyMenuAccept,onDismiss:this.close,blockStore:e.store})},this.renderMultiSelect=e=>{const t=this.getSchema(e),o=this.getCollectionStore(e),r=this.getNormalizedPropertySchema(e);if(!o||!r||"multi_select"!==r.type)return;const n=r.options||[],i=c.uP(this.getPropertyValue(e),n);return(0,we.jsx)(ye.Z,{allowMultiple:!0,value:i,property:e.property,collectionId:o.id,schema:t,disabled:this.isDisabled(e),canConfigureCollection:this.canConfigureCollection(e),onChange:this.handleSelectPropertyMenuUpdate,analyticsFrom:this.getAnalyticsFrom(e),insertChar:e.insertChar,onAccept:this.handleSelectPropertyMenuAccept,onDismiss:this.close,blockStore:e.store})},this.renderStatus=e=>{const t=this.getCollectionStore(e),o=this.getNormalizedPropertySchema(e);if(!t||!o||"status"!==o.type)return;const r={initialValue:c.ZG(this.getPropertyValue(e),o),property:e.property,propertySchema:o,disabled:this.isDisabled(e),onDismiss:this.close,onChange:e=>{this.handleSelectPropertyMenuUpdate({value:e?[e]:[]})},onAccept:this.handleSelectPropertyMenuAccept,blockPropertyValueOverlayStore:this.props.store};return e.property===u.b0.StatusV2?(0,we.jsx)(me.G,{...r}):(0,we.jsx)(he.x,{...r})},this.renderPerson=e=>{const t=this.getSchema(e),o=this.getNormalizedPropertySchema(e);if(!o||"person"!==o.type)return;const r=e.store.isTemplate(),n=c.BW({value:this.getPropertyValue(e),isTemplatePage:r,propertySchema:o,blockCreatorPointer:e.store.getCreatedByPointer()});return(0,we.jsx)(ue.Z,{value:n,property:e.property,schema:t,disabled:this.isDisabled(e),onChange:this.handlePersonPropertyMenuUpdate,insertChar:e.insertChar,onDismiss:this.close,parentStore:e.store,isTemplatePage:r})},this.renderRelation=e=>{const t=this.getSchema(e),o=c.rq(this.getPropertyValue(e)),r=this.getCollectionStore(e);if(r)return(0,we.jsx)(q.ev,{value:o,property:e.property,collectionStore:r,schema:t,disabled:this.isDisabled(e),canConfigureCollection:this.canConfigureCollection(e),onChange:this.handleRelationPropertyMenuUpdate,analyticsFrom:this.getAnalyticsFrom(e),insertChar:e.insertChar,onDismiss:this.close,blockStore:e.store,blockPropertyValueOverlayStore:this.props.store,overlayMode:e.mode})},this.renderRollup=e=>{const t=this.getSchema(e);return(0,we.jsx)(pe.Z,{context:pe.t.BlockPropertyOverlay,property:e.property,schema:t,disabled:this.isDisabled(e)||!this.canConfigureCollection(e)||this.isTypedPropertyStore.state,onChange:this.handleRollupPropertyMenuUpdate,parentStore:e.store,analyticsFrom:this.getAnalyticsFrom(e),onDismiss:this.close})},this.renderDate=e=>{const t=this.getNormalizedPropertySchema(e);if(!t||"date"!==t.type)return;const o=c.Gl(this.getPropertyValue(e));return(0,we.jsx)(U.DependencyConsumer,{dependency:U.deps.menus,children:r=>{let{DatePropertyMenu:n}=r;return(0,we.jsx)(n,{firstDayOfWeek:K.AK.state,value:o,onChangeValue:this.handleDatePropertyValueChange,dateFormat:t.date_format,onChangeDateFormat:this.handleDatePropertyDateFormatChange,timeFormat:t.time_format,disabled:this.isDisabled(e),canConfigureCollection:this.canConfigureCollection(e),onChangeTimeFormat:this.handleDatePropertyTimeFormatChange,onDismiss:this.close,shouldShowReminder:!0,isTemplatePage:e.store.isTemplate()})}})},this.renderFile=e=>{const t=this.getSchema(e),o=c.g(this.getPropertyValue(e));return(0,we.jsx)(ae.Z,{store:e.store,value:o,property:e.property,schema:t,onDismiss:this.close,uploadFiles:e.uploadFiles,disabled:this.isDisabled(e),onChange:t=>{I.createAndCommit({userAction:"BlockPropertyValueOverlay.renderFile",environment:this.environment,perform:o=>{if(w.z4(t.schema)||this.setSchema(t.schema,o),!w.z4(t.value)){const r=c.CC(t.value);for(const t of this.getPropertyStores(e))M.sO({store:t,value:r,transaction:o});this.trackEditPropertyValue(e)}}})}})},this.renderFormula=e=>{const{device:t}=this.environment,r=this.getSchema(e),{store:n}=e,i=n.getModel(),l=this.getCollectionStore(e),s=this.getNormalizedPropertySchema(e),a=this.isDisabled(e)||!this.canConfigureCollection(e)||this.isTypedPropertyStore.state;if((0,z.V1)()){if(i&&l&&s&&"formula"===s.type)return(0,we.jsx)(U.DependencyConsumer,{dependency:U.deps.formulas,children:t=>(0,we.jsx)(de.Z,{handleClose:this.close,property:e.property,getRecordModel:n.getRecordModel,propertySchema:s,collectionStore:l,handleSave:this.handleFormula2CodeChange,formulas:t,disabled:a,blockStore:n,analyticsFrom:this.getAnalyticsFrom(e)})})}else if(i)return(0,we.jsx)(ce.Z,{fetch:()=>o.e(71).then(o.bind(o,41389)),loading:e=>t.isMobile?(0,we.jsx)(re.Z,{menuType:W.og.Modal,title:(0,we.jsx)(C.FormattedMessage,{defaultMessage:"Formula",id:"database.propertyValues.mobileFormulaMenu.title"}),left:(0,we.jsx)(ne.CancelMenuText,{}),onClickLeft:this.handleFormulaPropertyMenuCancelClick,children:(0,we.jsx)("div",{style:{width:"100%",paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"},children:e&&(0,we.jsx)(oe.Z,{})})}):(0,we.jsx)("div",{style:{height:358,width:580,display:"flex",alignItems:"center",justifyContent:"center"},children:e&&(0,we.jsx)(oe.Z,{})}),render:t=>{let{default:o}=t;return(0,we.jsx)(o,{property:e.property,exampleBlock:i,disabled:a,schema:r,onChange:this.handleFormulaPropertyMenuUpdate,onClickCancel:this.handleFormulaPropertyMenuCancelClick,analyticsFrom:this.getAnalyticsFrom(e)})}})},this.renderVerificationOverlay=e=>{const t=this.getNormalizedPropertySchema(e);if("verification"!==(null==t?void 0:t.type))return;const o=c._w(this.getPropertyValue(e));return(0,we.jsx)(Se.O,{propertyName:t.name,onChange:t=>{I.createAndCommit({userAction:"BlockPropertyValueOverlay.verification",environment:this.environment,perform:o=>{const r=c.Tp(t.value);for(const t of this.getPropertyStores(e))M.sO({store:t,value:r,transaction:o});this.trackEditPropertyValue(e)}}),this.close()},verificationValue:o,getRecordModel:e.store.getRecordModel,blockId:e.store.id,onClose:this.close})},this.isTypedPropertyStore=this.createComputedStore((()=>{var e;const t=this.props.store.state;if(!t.isOpen)return!1;const o=null===(e=t.collectionContextStore)||void 0===e?void 0:e.collectionStore();if(!o)return!1;const r=t.property;return Boolean(o.getDatabaseType()&&o.isTypedProperty(r))})),this.renderFunctions={title:this.renderTitle,text:this.renderText,relation:this.renderRelation,rollup:this.renderRollup,select:this.renderSelect,multi_select:this.renderMultiSelect,status:this.renderStatus,person:this.renderPerson,number:this.renderNumber,date:this.renderDate,file:this.renderFile,url:this.renderURL,phone_number:this.renderURL,email:this.renderURL,formula:this.renderFormula,checkbox:void 0,created_by:void 0,created_time:void 0,last_edited_by:void 0,last_edited_time:void 0,last_visited_time:void 0,button:void 0,auto_increment_id:void 0,location:void 0,verification:this.renderVerificationOverlay},this.handleBgClick=()=>{k.fG({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleEsc=()=>{k.i2({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleTab=e=>{e.preventDefault(),k.$o({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleUntab=e=>{e.preventDefault(),k.RX({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleEnter=()=>{k.gT({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.handleSelectPropertyMenuAccept=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=this.getNormalizedPropertySchema(t);!o||"select"!==o.type&&"status"!==o.type||i.default.afterNextFlush((()=>{e?k.gT({environment:this.environment,blockPropertyValueOverlayStore:this.props.store}):k.i2({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})}))},this.handleSelectPropertyMenuUpdate=e=>{const t=this.props.store.state;t.isOpen&&I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleSelectPropertyMenuUpdate",environment:this.environment,perform:o=>{if(w.z4(e.operations)||this.applyOperationsToSchema(e.operations,o),!w.z4(e.value)){const r=c.zq(e.value);for(const e of this.getPropertyStores(t))M.sO({store:e,value:r,transaction:o});this.trackEditPropertyValue(t)}}})},this.handlePersonPropertyMenuUpdate=e=>{const t=this.props.store.state;t.isOpen&&I.createAndCommit({userAction:"BlockPropertyValueOverlay.handlePersonPropertyMenuUpdate",environment:this.environment,perform:o=>{if(w.z4(e.schema)||this.setSchema(e.schema,o),!w.z4(e.value)){const r=c.BY(e.value);for(const e of this.getPropertyStores(t))M.sO({store:e,value:r,transaction:o});this.trackEditPropertyValue(t)}}})},this.handleRelationPropertyMenuUpdate=async e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=this.getNormalizedPropertySchema(t);if(!o||"relation"!==o.type)return;const r="relation"===o.type&&d.F0(o),n=r&&new $.NW(this.environment,{table:f.v,id:r});n&&await n.load();const l=this.getSchema(t);I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleRelationPropertyMenuUpdate",environment:this.environment,perform:o=>{if(e.newPage&&r&&n){const r=b.TPx(e.newPage.name),i=n.getRootPagePointer(),l=i??n.pointer,s={id:e.newPage.id,version:0,type:a.Ti.page,parent_id:l.id,parent_table:l.table,properties:{title:r},alive:!0,collection_id:void 0,space_id:e.newPage.spaceId},d=M.ae({environment:this.environment,table:h.iU,value:s,inMemoryRecordCache:t.store.inMemoryRecordCache,transaction:o});if(i){const e=new $.G(this.environment,{table:i.table,id:i.id}),t=new $.G(this.environment,{table:h.iU,id:s.id});T.jG({parentStore:e,childStore:t,transaction:o})}const c=n.getDefaultTemplatePageStore();c&&j.ob({title:{text:r},environment:this.environment,store:$.G.createChildStore(n,d.pointer),templateStore:c,isKeyboard:!1,isCreateIn:!1,transaction:o,from:"relation_property_menu_update"})}if(e.value){for(const r of this.getAllEditStores(t))V.tG({environment:this.environment,store:r,pointers:e.value,propertyId:t.property,transaction:o});this.trackEditPropertyValue(t)}if(e.rollupPropertyId&&e.rollupPropertySchema){const t={...l,[e.rollupPropertyId]:e.rollupPropertySchema};this.setSchema(t,o)}}}),e.rollupPropertyId&&(await i.default.afterNextFlush(),k.mm({environment:this.environment,blockPropertyValueOverlayStore:this.props.store,openProperty:e.rollupPropertyId}))},this.handleDatePropertyValueChange=e=>{const t=this.props.store.state;t.isOpen&&I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyValueChange",environment:this.environment,perform:o=>{for(const r of this.getAllEditStores(t))!e||p.U3(e)?(R.xD({environment:this.environment,store:r,type:"dateValue",dateValue:e,propertyId:t.property,transaction:o}),e||this.close()):(M.sW({store:r.getPropertiesStore(),transaction:o,data:{[t.property]:[b.YCD(b.WBu({type:e}))]}}),this.close()),this.trackEditPropertyValue(t)}})},this.handleDatePropertyDateFormatChange=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=this.getNormalizedPropertySchema(t);if(!o||"date"!==o.type)return;const r=this.getSchema(t),n={...o,date_format:e},i={...r,[t.property]:n};var l;(I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyDateFormatChange",environment:this.environment,perform:e=>{this.setSchema(i,e)}}),n)&&(this.getAnalyticsFrom(t),P.$qu(this.environment,{property_type:n.type,action:"date_change_format",from:this.getAnalyticsFrom(t),collection_id:null===(l=this.getCollectionStore(t))||void 0===l?void 0:l.id}))},this.handleDatePropertyTimeFormatChange=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=this.getNormalizedPropertySchema(t);if(!o||"date"!==o.type)return;const r=this.getSchema(t),n={...o,time_format:e},i={...r,[t.property]:n};var l;(I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleDatePropertyTimeFormatChange",environment:this.environment,perform:e=>{this.setSchema(i,e)}}),n)&&(this.getAnalyticsFrom(t),P.$qu(this.environment,{property_type:n.type,action:"date_change_format",from:this.getAnalyticsFrom(t),collection_id:null===(l=this.getCollectionStore(t))||void 0===l?void 0:l.id}))},this.handleFormula2CodeChange=e=>{const{newValue:t,newType:o,propertySchema:r,property:n,collectionStore:i}=e,l=t?{...r,formula2:{code:t,result_type:o},version:"v2"}:{...r,formula2:void 0,version:"v2"};I.createAndCommit({userAction:"CollectionSettingsFormulaOptions.handleFormulaChange",environment:this.environment,perform:e=>{B.xO({environment:this.environment,collectionStore:i,update:{[n]:l},transaction:e})}})},this.handleFormulaPropertyMenuUpdate=e=>{let{propertySchema:t,close:o}=e;const r=this.props.store.state;r.isOpen&&(I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleFormulaPropertyMenuUpdate",environment:this.environment,perform:e=>{this.updateSchema({[r.property]:t},e)}}),o&&this.close())},this.handleNumberValueChange=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=c.eP(e);I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleNumberValueChange",environment:this.environment,perform:e=>{for(const r of this.getPropertyStores(t))M.sO({store:r,value:o,transaction:e})}}),this.trackEditPropertyValue(t)},this.handleURLValueChange=e=>{const t=this.props.store.state;if(!t.isOpen)return;const o=c.iD(e);I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleURLValueChange",environment:this.environment,perform:e=>{for(const r of this.getPropertyStores(t))M.sO({store:r,value:o,transaction:e})}}),this.trackEditPropertyValue(t),P.bOx(this.environment,{pastedText:e,source:"url_property"})},this.handleTextChange=(e,t)=>{this.measurePropertyOverlayTypingLagUntilNextRender(e,t);const{store:o,property:r,additionalStores:n}=e,i=o.getNormalizedPropertyStore(r).getValue();I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleTextChange",environment:this.environment,perform:e=>{for(const t of n)A.sO({environment:this.environment,store:t.getNormalizedPropertyStore(r),value:i,transaction:e})}}),this.trackEditPropertyValue(e)},this.handleRollupPropertyMenuUpdate=e=>{const t=this.props.store.state;t.isOpen&&I.createAndCommit({userAction:"BlockPropertyValueOverlay.handleRollupPropertyMenuUpdate",environment:this.environment,perform:o=>{this.updateSchema({[t.property]:e.propertySchema},o)}})},this.handleFormulaPropertyMenuCancelClick=()=>{this.props.store.setState({...this.props.store.state,isOpen:!1})},this.close=()=>{k.xv({environment:this.environment,blockPropertyValueOverlayStore:this.props.store})},this.myTasksView=this.createComputedStore((()=>{var e;const t=this.props.store.state;if(!t.isOpen)return;const o=null===(e=t.collectionContextStore)||void 0===e||null===(e=e.collectionViewBlockStore())||void 0===e?void 0:e.id;return o?(0,K.$A)(o)?"home_tile_tasks":(0,K.qG)(o)?"home_tasks":void 0:void 0}))}willMount(e){super.willMount(e),this.trackRenderTime({isFirstRender:!0})}willUpdate(e){super.willUpdate(e),this.trackRenderTime({isFirstRender:!1})}renderComponent(){const{device:e}=this.environment,t=this.props.store.state;let o,r,n;if(t.isOpen){const s=t.format===Re.C.Page,a=this.getNormalizedPropertySchema(t),c=a&&a.type,u=t.store.canEdit();let p=t.rect.top,y=t.rect.left,h=t.rect.width,f=t.rect.height;if(s?(y-=1,h+=1):(p-=1,y-=1,h+=1,f+=2),"number"===c)r={width:h};else if("date"===c)p+=f-1,r={};else if("relation"===c){const e=q.NW;r={width:Math.max(e,h),minHeight:u?65:void 0,overflow:"hidden"}}else if("person"===c)r={width:Math.max(240,h),minHeight:u?100:void 0};else if("formula"===c)p+=f-1,r={borderRadius:12};else if("select"===c||"multi_select"===c)r={width:Math.max(300,h)};else if("rollup"===c)p+=f-1,r={};else if("text"!==c&&"title"!==c||!e.isMobile)if("file"===c)r={minWidth:Math.max(240,h)};else if("verification"===c)r={width:m.uZ(h,265,365)};else{const e=24+(this.shouldShowAutofillUpdateButton(t)?28:0);r={width:Math.max(240,h),minHeight:Math.min(f,window.innerHeight-e),maxHeight:window.innerHeight-e,overflow:"visible",display:"flex",flexDirection:"column"}}else{const e=Q.Z.estimatedNativeWebBottomOverlap()+24;n={overflowY:"auto",WebkitOverflowScrolling:"touch",width:Math.max(240,h),maxHeight:`calc(100vh - ${e}px)`}}const S=t.collectionContextStore;if(S){var i,l;const e=S.subitemTreeStore.state,o=(0,x.DY)(e.children,(e=>e.value.store===t.store)),n=null==o?void 0:o.length,s=null===(i=S.formatStore())||void 0===i||null===(i=i.getFormat())||void 0===i||null===(i=i.table_properties)||void 0===i?void 0:i.filter((e=>e.visible)),a=s&&(null===(l=s[0])||void 0===l?void 0:l.property)===t.property;n&&a&&(r={...r,...c&&d.Yl(c)&&{width:Math.max(90,h)}})}o=new DOMRect(y,p,h,0)}if(t.isOpen||!this.previousPopupProps){const i=this.getPopupType(),l=!e.isMobile||i===le.ZP.PopupType.Popup,s={key:this.getPopupKey(),popupType:i,open:t.isOpen,originRect:o,style:e.isMobile?{width:r?r.width:void 0,...n}:r,alignmentToOrigin:le.ZP.Alignment.Start,placementToOrigin:le.ZP.Placement.Bottom,preventScaleTransition:l,preventOpacityTransition:l,render:this.renderOverlay,onDismiss:this.handleBgClick};return this.previousPopupProps=s,(0,we.jsx)(le.ZP,{...s})}{const e={...this.previousPopupProps,open:!1};return(0,we.jsx)(le.ZP,{...e})}}trackRenderTime(e){let{isFirstRender:t}=e;const o=this.props.store.state;if(!o.isOpen||!o.collectionContextStore)return;const r=N.default.mark("collections.block_property_value_overlay_render");N.default.measureAfterNextFlush(r,{environment:this.environment,getData:()=>{var e;return{...Z.vS(o.collectionContextStore),is_first_render:t,property_type:null===(e=this.getNormalizedPropertySchema(o))||void 0===e?void 0:e.type,from:O.Sy(o.format)}}})}shouldShowAutofillUpdateButton(e){var t;const{store:o}=e,r=this.getNormalizedPropertySchema(e);return r&&(0,H.RT)(null===(t=this.pageContext)||void 0===t?void 0:t.publicEditModeStore.state,o)&&d.qQ(r)&&d.q3(r)&&("text"===r.type||(0,H.KZ)())&&!e.collectionsBulkActionsToolbarStore}renderAutofillUpdateButton(e){if(this.shouldShowAutofillUpdateButton(e))return(0,we.jsx)(Fe,{theme:this.theme,propertySchema:this.getNormalizedPropertySchema(e),overlayState:e})}renderOverlayContent(e){const t=this.getNormalizedPropertySchema(e);if(!t)return;const o=this.renderFunctions[t.type];return o?o(e,t.type):void 0}getPopupType(){const{device:e}=this.environment;if(e.isMobile){const e=this.props.store.state;if(!e.isOpen)return le.kQ.SlideUp;const t=this.getNormalizedPropertySchema(e);return t?ve.m[t.type]:le.kQ.SlideUp}return le.kQ.Popup}getPopupKey(){const e=this.props.store.state;if(!e.isOpen)return"ignore";const t=this.getNormalizedPropertySchema(e);return t?t.type:"ignore"}measurePropertyOverlayTypingLagUntilNextRender(e,t){const o=N.default.mark("collections.property_overlay_typing_lag");N.default.measureAfterNextFlush(o,{environment:this.environment,getData:()=>({...Z.vS(e.collectionContextStore),property_type:t,from:O.Sy(e.format)})})}getSchema(e){return e.store.getSchema()||{}}getNormalizedPropertySchema(e){return this.getSchema(e)[e.property]}getCollectionStore(e){return e.store.getAssociatedCollectionStore()}getPropertyStores(e){return this.getAllEditStores(e).map((t=>t.getPropertyStore(e.property)))}getPropertyValue(e){return e.store.getPropertyValue(e.property)}updateSchema(e,t){const o=this.props.store.state;if(o.isOpen&&o.isOpen){const r=this.getCollectionStore(o);r&&B.xO({environment:this.environment,collectionStore:r,update:e,transaction:t})}}setSchema(e,t){const o=this.props.store.state;if(o.isOpen&&o.isOpen){const r=this.getCollectionStore(o);r&&B.Rm({environment:this.environment,collectionStore:r,update:{schema:e},transaction:t})}}applyOperationsToSchema(e,t){const o=this.props.store.state;if(o.isOpen&&o.isOpen){const r=this.getCollectionStore(o);if(r){const o=r.getSchema();for(const i of e)I.applyOperation({store:(0,$.Kv)(r,i.pointer),operation:i,transaction:t});const n=r.getSchema();B.C_({environment:this.environment,collectionStore:r,oldSchema:o,newSchema:n,transaction:t})}}}trackEditPropertyValue(e){const t=e.store.getType(),o=this.getNormalizedPropertySchema(e),{collectionContextStore:r}=e;if(t&&o&&r){const t=this.myTasksView.state?this.myTasksView.state:this.getAnalyticsFrom(e);_.rv({environment:this.environment,collectionContextStore:r,block_id:e.store.id,property:e.property,property_type:o.type,from:t,isFromBulkActionsToolbar:O.VM(this.props.store)})}}getAnalyticsFrom(e){return O.Sy(e.format)}getAllEditStores(e){return[e.store,...e.additionalStores]}canConfigureCollection(e){const t=this.getCollectionStore(e),o=null==t?void 0:t.getParentBlockStore();return L.eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!1})}isDisabled(e){const t=this.getNormalizedPropertySchema(e),o=t&&d.qQ(t)&&("text"===t.type||(0,H.KZ)())&&(0,d.q3)(t);return!!(o&&o.auto_update_on_edit&&(0,H.Zt)(this.environment))||((0,D.N)(this.environment,e.store)||c.wl(e.property))}}function Ze(e){let{overlayState:t,propertySchema:o,style:r}=e;window.__c={n:"AutofillUpdateMobileLink"};const n=(0,l.O7)(),i=(0,s.yK)((e=>({linkStyle:{color:e.aiPurpleColor,fontSize:12,...r}})),[r]);return(0,we.jsx)("div",{style:i.linkStyle,onClick:()=>{o&&F.autofillPropertyForBlocks({environment:n,stores:[t.store],property:t.property,propertySchema:o,userEventForAnalytics:"generate_from_overlay_button",collectionContextStore:t.collectionContextStore,from:O.Sy(t.format)})},children:(0,we.jsx)(C.FormattedMessage,{defaultMessage:"Update",id:"database.propertyValues.reGenerateAiAutofill"})})}Oe.displayName="BlockPropertyValueOverlay",Oe.titleStyle={...ve.F,fontWeight:v.Z.fontWeight.medium};const Le=Oe},83197:(e,t,o)=>{o.d(t,{F:()=>i,m:()=>n});var r=o(53437);const n={title:r.kQ.Popup,text:r.kQ.Popup,number:r.kQ.Popup,url:r.kQ.Popup,phone_number:r.kQ.Popup,email:r.kQ.Popup,relation:r.kQ.SlideUp,rollup:r.kQ.SlideUp,select:r.kQ.SlideUp,multi_select:r.kQ.SlideUp,status:r.kQ.SlideUp,person:r.kQ.SlideUp,date:r.kQ.SlideUp,file:r.kQ.SlideUp,formula:r.kQ.SlideUp,checkbox:r.kQ.SlideUp,created_by:r.kQ.SlideUp,created_time:r.kQ.SlideUp,last_edited_by:r.kQ.SlideUp,last_edited_time:r.kQ.SlideUp,last_visited_time:r.kQ.SlideUp,button:r.kQ.SlideUp,auto_increment_id:r.kQ.Popup,location:r.kQ.Popup,verification:r.kQ.SlideUp},i=Object.freeze({paddingLeft:9,paddingRight:9,paddingTop:6,paddingBottom:6,fontSize:14,minHeight:34,display:"flex",height:"100%",flexDirection:"column",justifyContent:"space-between",flexGrow:1})},77866:(e,t,o)=>{o.d(t,{T$:()=>c,q8:()=>u,s3:()=>p,zX:()=>y});var r=o(67294),n=o(24405),i=o(39068),l=o(5366),s=o(8606),a=o(77722),d=o(85893);function c(){return(0,d.jsx)(a.Y,{fontColor:"light",style:{lineHeight:"20px"},children:(0,d.jsx)(l.FormattedMessage,{defaultMessage:"Empty",id:"database.pageProperty.emptyTitle"})})}function u(){return null}function p(){window.__c={n:"QuickEditEmptyPropertyText"};const e=(0,n.Fg)(),{propertySchema:t}=(0,r.useContext)(s.O),o=(0,n.yK)((()=>({textContainer:{display:"inline-flex",alignItems:"center"},propertyIcon:{marginRight:6}})),[]);return t?(0,d.jsxs)(a.Y,{fontColor:"light",style:o.textContainer,children:[(0,d.jsx)(i.ZP,{type:t.type,icon:t.icon,size:14,theme:e,style:o.propertyIcon}),(0,d.jsx)(l.FormattedMessage,{defaultMessage:"Add {propertyName}",id:"database.boardProperty.fillProperty",values:{propertyName:t.name}})]}):null}function y(){window.__c={n:"MiniEmptyPropertyText"};const e=(0,n.Fg)(),{propertySchema:t,baseStyles:o}=(0,r.useContext)(s.O),l=(0,n.yK)((e=>({container:{...null==o?void 0:o.textStyle,display:"inline-flex",alignItems:"center",overflow:"hidden",color:e.lightTextColor},text:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},icon:{marginRight:6}})),[o]);return t?(0,d.jsxs)("div",{style:l.container,children:[(0,d.jsx)(i.ZP,{type:t.type,icon:t.icon,size:14,theme:e,style:l.icon}),(0,d.jsx)("div",{style:l.text,children:t.name})]}):null}},30752:(e,t,o)=>{o.d(t,{$I:()=>G,CJ:()=>U,eQ:()=>W,lE:()=>O,mm:()=>L,n8:()=>F,p5:()=>Z,tD:()=>z,tT:()=>q,uS:()=>D,wC:()=>K,yJ:()=>H});o(21703);var r=o(67294),n=o(480),i=o(86628),l=o(24405),s=o(14577),a=o(35011),d=o(40506),c=o(7057),u=o(47218),p=o(84682),y=o(42875),m=o(72126),h=o(82883),f=o(149),S=o(97880),b=o(5366),x=o(17809),g=o(33929),v=o(73807),w=o(77907),C=o(39694),P=o(65473),_=o(8606),k=o(78030),R=o(24118),j=o(53876),B=o(19629),T=o(77866),M=o(85893);const V=r.memo(r.forwardRef(((e,t)=>{var o,n;const{store:d,property:c,EmptyComponent:m,collectionStore:h,onContextMenu:S,editButtonClickProps:g,checkboxButtonStyle:C,textButtonStyle:k,quickActionButtons:R,checkboxShowLabel:j}=e,{baseStyles:T,propertySchema:V,format:I}=(0,r.useContext)(_.O),F=V,E=(0,i.VK)((()=>"v2"===(null==F?void 0:F.version)&&(0,x.V1)()),[null==F?void 0:F.version])?null==F||null===(o=F.formula2)||void 0===o?void 0:o.result_type.type:null==F||null===(n=F.formula)||void 0===n?void 0:n.result_type,K=!0===e.numberRightAlign&&"number"===(0,a.r9)(F),O=function(e){const{store:t,collectionStore:o,property:n,formulas:l,checkboxShowLabel:d,numberRightAlign:c}=e,m=(0,b.useIntl)(),h=(0,i.VK)((()=>o.getSchema()),[o]),{propertySchema:S}=(0,r.useContext)(_.O),g=S,w=(0,i.VK)((()=>(0,x.V1)()),[]),C=(0,v._)(),P=(0,i.VK)((()=>{var e;const r=t.getModel(),i=o.getModel();if(!i)return;const d=i.getNormalizedSchema()[n],c=null==d||null===(e=d.formula2)||void 0===e?void 0:e.code;if(!(w&&r&&l&&i&&c))return;const p=(0,a.cO)(r,i,n);if(p)return p;const h=new s.Z((()=>{const e=(0,a.NM)({block:r,formulaCode:c,getRecordModel:t.getRecordModel,intl:m,userTimeZone:(0,y.r)(),depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+C});return!e||f.x.isFail(e)?{error:{type:u.FY.UnexpectedError,error:new Error("Something went wrong in formula evaluation.")}}:{value:e.value}}),{debugName:`${Math.random()}`});return(0,a.HU)(r,i,n,(()=>h.getState())),h.getState()}),[o,l,w,m,n,t,C]),k=(0,i.VK)((()=>{const e=P;return!e||f.x.isFail(e)?{type:"undefined"}:e.value}),[P]),R=null==g?void 0:g.formula,j=(0,i.VK)((()=>{if(w&&"v2"===(null==g?void 0:g.version)){var e;if(void 0===k)return[[],"formula"];const o=G(k,t.getRecordModel,(0,y.r)());return[o,(null===(e=o[0])||void 0===e?void 0:e.type)??"text"]}if(!t.isDefined())return[[],"formula"];return[q((0,p.AH)({property:n,schema:h,block:t.getModel(),getRecordModel:t.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,y.r)(),depth:0,intl:m,resultCache:{},visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+C}})),(null==R?void 0:R.result_type)??"text"]}),[null==R?void 0:R.result_type,k,null==g?void 0:g.version,w,m,n,h,t,C]);return(0,i.VK)((()=>{const[e,o]=j;if(0===e.length)return null;const r=d&&"checkbox"===(0,a.mm)(g)&&1===e.length?null==g?void 0:g.name:void 0,n=!!g&&(0,B.vQ)(o,g);return g&&(0,M.jsx)(B.E1,{propertyType:o,rootPropertySchema:g,numberRightAlign:c,children:e.map(((o,i)=>(0,M.jsx)(B.gZ,{token:o,targetPropertySchema:g,blockStore:t,checkboxPropertyLabel:r,withComma:n&&i<e.length-1,numberRightAlign:c},`${o.id}-${i}`)))})}),[d,g,j,c,t])}({store:d,collectionStore:h,property:c,numberRightAlign:K,checkboxShowLabel:j,formulas:(0,w.useDependency)(w.deps.formulas)}),Z=(0,l.yK)((e=>({buttonStyle:{...T.buttonStyle,..."checkbox"===E?C:{},..."number"===E||"date"===E||"text"===E?k:{}},buttonPressedStyle:T.buttonPressedStyle??{},buttonHoveredStyle:T.buttonHoveredStyle??{}})),[T.buttonHoveredStyle,T.buttonPressedStyle,T.buttonStyle,C,E,k]),L=null===O;return L&&void 0===m?null:(0,M.jsx)(P.Z,{ref:t,onContextMenu:S,editButtonClickProps:g,style:Z.buttonStyle,pressedStyle:Z.buttonPressedStyle,hoveredStyle:Z.buttonHoveredStyle,quickActionButtons:R?(0,M.jsx)(A,{buttons:R,store:d,collectionStore:h,property:c,format:I,isEmpty:L}):void 0,quickActionButtonsAlign:K?"left":void 0,children:L?m?(0,M.jsx)(m,{}):null:O})})));function A(e){window.__c={n:"FormulaQuickActionButtons"};const{buttons:t,store:o,collectionStore:r,property:n,format:l,isEmpty:s}=e,a=(0,i.VK)((()=>r.getSchema()),[r]);if(s)return null;const d=t.map((e=>{switch(e){case"copy":return(0,M.jsx)(C.Z,{store:o,schema:a,property:n,format:l},"copy");default:(0,S.t1)(e)}})).filter(S.K0);return d?(0,M.jsx)(M.Fragment,{children:d}):null}const I=["copy"],F=r.forwardRef(((e,t)=>{window.__c={n:"TableFormulaProperty"};const{isMobile:o}=(0,n.Fy)(),r=N(e,t,(0,l.yK)((()=>({checkboxButtonStyle:{padding:j.sf[k.C.Table].checkbox},textButtonStyle:{padding:j.sf[k.C.Table].text}})),[]));return(0,M.jsx)(V,{...r,numberRightAlign:!0,EmptyComponent:T.q8,quickActionButtons:o?void 0:I})})),E=["copy"],K=r.forwardRef(((e,t)=>{window.__c={n:"PageFormulaProperty"};const o=N(e,t,(0,l.yK)((()=>({checkboxButtonStyle:{padding:j.sf[k.C.Page].checkbox},textButtonStyle:{padding:j.sf[k.C.Page].text}})),[]));return(0,M.jsx)(V,{...o,EmptyComponent:T.T$,quickActionButtons:E})})),O=r.forwardRef(((e,t)=>{window.__c={n:"CompactFormulaProperty"};const o=N(e,t,(0,l.yK)((()=>({checkboxButtonStyle:{padding:j.sf[k.C.CompactPage].checkbox},textButtonStyle:{padding:j.sf[k.C.CompactPage].text}})),[]));return(0,M.jsx)(V,{...o,EmptyComponent:T.T$})})),Z=r.forwardRef(((e,t)=>{window.__c={n:"ListFormulaProperty"};const o=N(e,t);return(0,M.jsx)(V,{...o})})),L=r.forwardRef(((e,t)=>{window.__c={n:"BoardFormulaProperty"};const o=N(e,t,(0,l.yK)((()=>({checkboxButtonStyle:{padding:j.sf[k.C.Board].checkbox},textButtonStyle:{padding:j.sf[k.C.Board].text}})),[]));return(0,M.jsx)(V,{...o,checkboxShowLabel:!0})})),H=r.forwardRef(((e,t)=>{window.__c={n:"CalendarFormulaProperty"};const o=N(e,t);return(0,M.jsx)(V,{...o,checkboxShowLabel:!0})})),z=r.forwardRef(((e,t)=>{window.__c={n:"GalleryFormulaProperty"};const o=N(e,t);return(0,M.jsx)(V,{...o,checkboxShowLabel:!0})})),D=r.forwardRef(((e,t)=>{window.__c={n:"TimelineFormulaProperty"};const o=N(e,t);return(0,M.jsx)(V,{...o})})),W=r.forwardRef(((e,t)=>{window.__c={n:"RelationFormulaProperty"};const o=N(e,t);return(0,M.jsx)(V,{...o})})),U=r.forwardRef(((e,t)=>{window.__c={n:"RelationSectionFormulaProperty"};const o=N(e,t);return(0,M.jsx)(V,{...o})}));function N(e,t,o){const{store:r,onContextMenu:n,property:i,collectionStore:l}=e;return{ref:t,store:r,property:i,collectionStore:l,editButtonClickProps:(0,R.Am)(e),onContextMenu:n,checkboxButtonStyle:null==o?void 0:o.checkboxButtonStyle,textButtonStyle:null==o?void 0:o.textButtonStyle}}function q(e){if(void 0===e)return[];if("string"==typeof e)return 0===e.length?[]:[{id:e,type:"text",value:[[e]]}];if("number"==typeof e)return[{id:e,type:"number",value:e}];if((0,d.U3)(e)){return[{id:c.ZV({allowRelativeDates:!1,value:e,userTimeZone:(0,y.r)(),intl:g.default.getIntl()}),type:"date",value:e}]}if("boolean"==typeof e)return[{id:e,type:"checkbox",value:e}];(0,S.t1)(e)}function G(e,t,o){switch(e.type){case"text":const r=(0,h.X)({textValue:e.value,getRecordModel:t,userTimeZone:o,intl:g.default.getIntl(),deterministic:!0});return 0===r.length?[]:[{id:r,type:"text",value:e.value}];case"block":return[{id:e.value.id,type:"relation",value:e.value}];case"date":return[{id:c.ZV({allowRelativeDates:!1,value:e.value,userTimeZone:(0,y.r)(),intl:g.default.getIntl()}),type:"date",value:e.value}];case"checkbox":return[{id:e.value,type:"checkbox",value:e.value}];case"number":return[{id:e.value,type:"number",value:e.value}];case"person":return[{id:e.value.id,type:"person",value:e.value}];case"array":return m.Ar(e.values.map((e=>G(e,t,o))));case"undefined":return[];default:(0,S.t1)(e)}}},69823:(e,t,o)=>{o.d(t,{n:()=>a});var r=o(67294),n=o(24405),i=o(60458),l=o(8606),s=o(85893);const a=r.memo((e=>{window.__c={n:"CheckboxPropertyValue"};const{propertyLabel:t,checked:o,enablePointerEventsForInteractiveTypes:a,onClick:d,disabled:c,tooltip:u}=e,{baseStyles:p}=(0,r.useContext)(l.O),y=(null==p?void 0:p.sizing)??"default",m=(0,n.yK)((()=>({cardCheckboxWrapStyle:{display:"flex",alignItems:"center"},cardCheckboxNameStyle:{marginLeft:"small"===y?5:6,marginRight:2}})),[y]),h={checked:o,disabled:c,style:{...a&&{pointerEvents:"auto"}},onClick:d,..."small"===y?{size:14,checkSize:10}:{size:16,checkSize:12},tooltipHeader:u};return t?(0,s.jsxs)("div",{style:m.cardCheckboxWrapStyle,children:[(0,s.jsx)(i.Z,{...h}),(0,s.jsx)("div",{style:m.cardCheckboxNameStyle,children:t})]}):(0,s.jsx)(i.Z,{...h})}))},77729:(e,t,o)=>{o.d(t,{t:()=>d});var r=o(67294),n=o(24405),i=o(80951),l=o(49616),s=o(84076),a=o(85893);const d=r.memo((e=>{window.__c={n:"ContactPropertyValue"};const{textValue:t,type:o,useShortenedUrl:r,disableLinkify:d,withComma:c}=e,u=(0,n.yK)((e=>({linkBoxStyle:{pointerEvents:"all",display:"inline",background:void 0,...(0,l.z0)(e)},hoveredLinkBoxStyle:{background:void 0,...(0,l.z0)(e)},pressedLinkBoxStyle:{background:void 0,...(0,l.z0)(e)}})),[]),p=(0,i.Hw)(o,t),y=r&&void 0!==t?(0,l.yt)(t,o):(0,i.zB)(t);return!p||d?(0,a.jsx)(a.Fragment,{children:y}):(0,a.jsxs)(s.Z,{href:p,onClick:e=>{(e.metaKey||e.ctrlKey)&&window.open(p,"_blank")},style:u.linkBoxStyle,hoveredStyle:u.hoveredLinkBoxStyle,pressedStyle:u.pressedLinkBoxStyle,external:!0,children:[y,c?", ":null]})}))},81381:(e,t,o)=>{o.d(t,{z:()=>d});var r=o(67294),n=o(24405),i=o(40506),l=o(89845),s=o(8606),a=o(85893);const d=r.memo((e=>{window.__c={n:"DatePropertyValue"};const{dateValue:t,dateFormat:o,timeFormat:d,withComma:c}=e,{baseStyles:u,shouldRenderTooltip:p}=(0,r.useContext)(s.O),y=(0,n.yK)((()=>({dateBox:{...u.textStyle,display:"inline"}})),[u.textStyle]);return(0,a.jsx)(l.Z,{value:t,dateFormat:o??i.sF,timeFormat:d??i.c_,style:y.dateBox,disableTooltip:p||"relative"!==o,withComma:c,displayInUserTimezone:!0})}))},79074:(e,t,o)=>{o.d(t,{e:()=>y});var r=o(67294),n=o(480),i=o(24405),l=o(95538),s=o(82990),a=o(54604),d=o(75018),c=o(81865),u=o(8606),p=o(85893);const y=r.memo((e=>{window.__c={n:"FilePropertyValue"};const{linkValue:t,permissionRecord:o}=e,{url:y,name:m}=t,{baseStyles:h}=(0,r.useContext)(u.O),f=(0,n.O7)(),S=r.createRef(),b=(null==h?void 0:h.sizing)??"default",x=(0,i.yK)((e=>({fileTextStyle:{display:"inline-block",height:"small"===b?20:24,lineHeight:"small"===b?"20px":"24px",borderRadius:3,background:e.legacyDefaultSelectColor,padding:"0px 6px",maxWidth:120,cursor:"zoom-in",...s.Z.textOverflowStyle},fileImageStyle:{maxHeight:"small"===b?20:24,borderRadius:3,cursor:"zoom-in"}})),[b]),g=(0,r.useCallback)(((e,t)=>{if(t){const e=e=>{e.stopPropagation(),e.preventDefault(),a.ui({environment:f,renderFullScreenNode:()=>(0,p.jsx)(c.Z,{url:y,isAuthenticated:!0,permissionRecord:o,width:300,render:(e,t)=>(0,p.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:S.current.getBoundingClientRect(),imageUrl:y})};return(0,p.jsx)("img",{ref:S,src:t,style:x.fileImageStyle,onClick:e},y)}}),[f,S,o,x.fileImageStyle,y]);if((0,l.SR)({url:y}))return(0,p.jsx)(c.Z,{url:y,isAuthenticated:!0,permissionRecord:o,width:20,render:g},y);return(0,p.jsx)("span",{style:x.fileTextStyle,onClick:e=>{e.stopPropagation(),d.openFileUrl(f,{url:y,type:"file",from:"view_original",downloadName:m,permissionRecord:o})},children:m},y)}))},90692:(e,t,o)=>{o.d(t,{Z:()=>d});var r=o(67294),n=o(24405),i=o(84619),l=o(10009),s=o(8606),a=o(85893);const d=r.memo((e=>{window.__c={n:"InlineRelationPropertyValue"};const{recordPointer:t,parentStore:o,linkify:d}=e,{isReadOnly:c,shouldWrap:u,baseStyles:p,containerRef:y}=(0,r.useContext)(s.O),m=(null==p?void 0:p.tokenFormat)??i.l.Medium,h=(0,n.yK)((()=>({relationToken:{margin:0}})),[]);return(0,a.jsx)(l.Z,{blockId:t.id,isSingle:!1,parentStore:o,shouldWrap:u,format:m,showRelationTooltip:!1,style:h.relationToken,containingParentRef:y,clickTitleBehavior:d||c?"peek":void 0},t.id)}))},59580:(e,t,o)=>{o.d(t,{A:()=>d});var r=o(67294),n=o(24405),i=o(32056),l=o(56247),s=o(8606),a=o(85893);function d(e){var t;window.__c={n:"NumberPropertyValue"};const{numberValue:o,numberFormat:d,withComma:c,isRightAligned:u}=e,{baseStyles:p,propertySchema:y,shouldRenderTooltip:m,shouldWrap:h}=(0,r.useContext)(s.O),f=y,S=(0,n.yK)((()=>{var e,t,o;const r="bar"===(null==f||null===(e=f.show_as)||void 0===e?void 0:e.type)||"ring"===(null==f||null===(t=f.show_as)||void 0===t?void 0:t.type);return{style:{...!r&&{display:void 0},..."bar"===(null==f||null===(o=f.show_as)||void 0===o?void 0:o.type)?{flex:"1 0 auto",justifyContent:u?"flex-end":void 0}:{},...!h&&{display:r?"inline-flex":"inline",textWrap:"nowrap"}},barStyle:"small"===(null==p?void 0:p.sizing)?{flexGrow:1,minWidth:48,maxWidth:120}:{flexGrow:1,minWidth:48,maxWidth:160}}}),[null==p?void 0:p.sizing,u,null==f||null===(t=f.show_as)||void 0===t?void 0:t.type,h]);return(0,a.jsx)(l.b,{style:S.style,barStyle:S.barStyle,progressSize:p.textLineHeight,numberValue:o,numberFormat:d||"number"===(null==f?void 0:f.type)&&(null==f?void 0:f.number_format)||i.dk,numberShowAs:null==f?void 0:f.show_as,shouldRenderTooltip:!m,withComma:c})}},18417:(e,t,o)=>{o.d(t,{H:()=>u});var r=o(67294),n=o(86628),i=o(24405),l=o(66897),s=o(84619),a=o(92864),d=o(8606),c=o(85893);const u=r.memo((e=>{var t;window.__c={n:"PersonPropertyValue"};const{actorPointer:o,style:u,shouldShrink:p}=e,{store:y,baseStyles:m,shouldRenderTooltip:h,propertySchema:f}=(0,r.useContext)(d.O),S=(null==m?void 0:m.tokenFormat)??s.l.Medium,b=(0,i.yK)((()=>({actorStyle:{margin:0,...u,...(null==m?void 0:m.tokenFormat)===s.l.Inline&&{pointerEvents:"auto"}}})),[null==m?void 0:m.tokenFormat,u]),x=(0,n.VK)((()=>{const e=null==y?void 0:y.getRecordModel;if(e)return(0,l.Hl)({pointer:o,getRecordModel:e})}),[o,null==y?void 0:y.getRecordModel]);return void 0===x?null:(0,c.jsx)(a.ZP,{actor:x,showRemoveButton:!1,format:S,isSingle:!1,shouldShrink:p,style:b.actorStyle,hasTooltip:!h||S===s.l.Inline,tooltipHeader:null==f?void 0:f.name},null===(t=x.asActor)||void 0===t?void 0:t.id)}))},19629:(e,t,o)=>{o.d(t,{E1:()=>v,gZ:()=>g,vQ:()=>w});var r=o(67294),n=o(32056),i=o(97880),l=o(8606),s=o(53876),a=o(69823),d=o(77729),c=o(81381),u=o(79074),p=o(90692),y=o(59580),m=o(18417),h=o(44731),f=o(77722),S=o(18746),b=o(83559),x=o(85893);function g(e){const{token:t,targetPropertySchema:o,blockStore:r,checkboxPropertyLabel:l,withComma:s,numberRightAlign:f}=e,{type:b,value:g}=t;switch(b){case"url":case"email":case"phone_number":return(0,x.jsx)(d.t,{textValue:g,type:b,useShortenedUrl:!1,withComma:s});case"checkbox":return(0,x.jsx)(a.n,{checked:g,propertyLabel:l,disabled:!0});case"number":return(0,x.jsx)(y.A,{numberValue:g,numberFormat:o&&"number_format"in o?null==o?void 0:o.number_format:n.dk,withComma:s,isRightAligned:f});case"date":return(0,x.jsx)(c.z,{dateValue:g,dateFormat:o&&"date_format"in o?o.date_format:void 0,timeFormat:o&&"time_format"in o?o.time_format:void 0,withComma:s});case"file":return(0,x.jsx)(u.e,{linkValue:g,permissionRecord:r.pointer});case"person":return(0,x.jsx)(m.H,{actorPointer:g,shouldShrink:!1});case"relation":return(0,x.jsx)(p.Z,{recordPointer:g,parentStore:r,linkify:!0});case"select":return(0,x.jsx)(h.J,{type:t.groupColor?"status":"select",value:g,groupColor:t.groupColor,color:t.color});case"text":return(0,x.jsx)(S.A,{textValue:g,parentStore:r,withComma:s,linkifyUrls:!0});default:return(0,i.t1)(b)}}const v=e=>{let{children:t,propertyType:o,rootPropertySchema:n,numberRightAlign:i}=e;window.__c={n:"PropertyValueTokensWrapper"};const{shouldWrap:s}=(0,r.useContext)(l.O),a="number"===o&&i;return w(o,n)?(0,x.jsx)(f.Y,{style:s?{display:"flex",flexWrap:"wrap"}:void 0,isRightAligned:a,children:t}):(0,x.jsx)(b.K,{isRightAligned:a,children:t})},w=(e,t)=>{var o,r;return void 0!==e&&"title"!==e&&(!!(0,s.A2)(e)&&("number"!==e||"bar"!==(null==t||null===(o=t.show_as)||void 0===o?void 0:o.type)&&"ring"!==(null==t||null===(r=t.show_as)||void 0===r?void 0:r.type)))}},44731:(e,t,o)=>{o.d(t,{J:()=>p});var r=o(67294),n=o(24405),i=o(8848),l=o(84619),s=o(82990),a=o(62896),d=o(85567),c=o(8606),u=o(85893);const p=r.memo((e=>{window.__c={n:"SelectPropertyValue"};const{value:t,color:o,shouldShrink:p,type:y}=e,m="status"===y?e.groupColor??"default":void 0,h=(0,n.Fg)(),{baseStyles:f}=(0,r.useContext)(c.O),S=(null==f?void 0:f.tokenFormat)??l.l.Medium,b=(0,n.yK)((()=>({token:{margin:0,...s.Z.textOverflowStyle}})),[]);if(!t)return null;const{textColor:x,backgroundColor:g}=(0,i.KR)(h,o??m),v="status"===y?o&&"default"!==o?o:m??"gray":void 0;return(0,u.jsx)(d.Z,{format:S,value:(0,u.jsx)(a.Z,{children:t}),color:x,backgroundColor:g,showRemoveButton:!1,shouldShrink:p,isRound:"status"===y,isSingle:!1,showColoredDot:v,style:b.token,showFullValueTooltip:!1})}))},69582:(e,t,o)=>{o.d(t,{P:()=>m,w:()=>h});o(67294);var r=o(24405),n=o(84619),i=o(69651),l=o(22686),s=o(5366),a=o(70203),d=o(97880),c=o(93044),u=o(77722),p=o(85893);const y=(0,s.defineMessages)({me:{id:"templateVariablePropertyValueComponent.templateVariables.text.me",defaultMessage:"Person who duplicated page"},now:a.olT.nowText,today:a.olT.todayText});function m(e){window.__c={n:"TemplateVariablePropertyValueText"};const t=(0,r.yK)((e=>({textWrapper:{lineHeight:"20px"}})),[]);return(0,p.jsx)(u.Y,{fontColor:"light",style:t.textWrapper,children:(0,p.jsx)(h,{templateVariableType:e.templateVariableType})})}function h(e){window.__c={n:"TemplateVariableUIToken"};const{templateVariableType:t,showRemoveButton:o,onRemove:u,style:y}=e,m=(0,s.useIntl)(),h=(0,r.yK)((e=>({uiToken:{background:e.outlineBlueButtonPressedBackground,color:e.blueColor,padding:"2px 4px",width:"max-content",...y||{}}})),[y]);return(0,p.jsx)(c.ZP,{format:n.l.Medium,isSingle:!0,title:f(t,m),renderAvatar:()=>function(e){let t;(0,a.pJX)(e)?t=l.f:(0,a.tXA)(e)?t=i.C:(0,d.t1)(e);return t}(t)({width:12,height:12,marginRight:4}),shouldShrink:!0,onClickRemove:u,showRemoveButton:Boolean(o),style:h.uiToken})}function f(e,t){let o;return"me"===e?o=t.formatMessage(y.me):"now"===e?o=t.formatMessage(y.now):"today"===e?o=t.formatMessage(y.today):(0,d.t1)(e),o}},18746:(e,t,o)=>{o.d(t,{A:()=>f});var r=o(67294),n=o(480),i=o(86628),l=o(24405),s=o(80951),a=o(12549),d=o(23867),c=o(70203),u=o(60682),p=o(49616),y=o(14976),m=o(16354),h=o(85893);const f=r.memo((e=>{window.__c={n:"TextPropertyValue"};const{textValue:t,parentStore:o,withComma:f,linkifyUrls:S}=e,b=(0,n.O7)(),x=(0,l.Fg)(),g=(0,u.kw)();(0,r.useEffect)((()=>{void 0!==t&&b.KatexStore.loadIfNeeded((()=>t))}),[b.KatexStore,t]);const v=(0,i.VK)((()=>b.KatexStore.getKatex()),[b.KatexStore]),w=(0,i.VK)((()=>void 0===t?null:y.IY({environment:b,textValue:t&&{value:t,spaceId:(0,d.C)(o.pointer.spaceId)},parentStore:o,disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!0,theme:x,emojiType:g,katex:v,formulaValueTypes:[],stopLinkPropagation:!0,linkTargetBlank:!0})),[g,b,v,o,t,x]),C=(0,r.useMemo)((()=>{if(!S||void 0===t)return null;const e=(0,c.Jcv)(t);return(0,a.Z)(e)?(0,s.zB)(t):null}),[S,t]);return(0,h.jsxs)("span",{children:[C?(0,h.jsx)(m.Z,{href:C,style:{display:"inline",pointerEvents:"auto",...(0,p.z0)(x)},external:!0,onClick:e=>e.stopPropagation(),children:w}):w,f?", ":null]})}))},77722:(e,t,o)=>{o.d(t,{Y:()=>s});var r=o(67294),n=o(24405),i=o(8606),l=o(85893);const s=r.forwardRef(((e,t)=>{let{children:o,fontColor:s,style:a,isRightAligned:d}=e;window.__c={n:"TextlikePropertyValueWrapper"};const{baseStyles:c}=(0,r.useContext)(i.O),u=(0,n.yK)((e=>({textStyle:{...c.textStyle,...a,...d?{justifyContent:"right",textAlign:"right"}:{},..."light"===s?{color:e.lightTextColor}:{}}})),[c.textStyle,a,d,s]);return(0,l.jsx)("div",{ref:t,style:u.textStyle,children:o})}))},83559:(e,t,o)=>{o.d(t,{K:()=>s});var r=o(67294),n=o(24405),i=o(8606),l=o(85893);const s=r.forwardRef(((e,t)=>{let{children:o,style:s,isRightAligned:a}=e;window.__c={n:"TokenPropertyValueWrapper"};const{baseStyles:d}=(0,r.useContext)(i.O),c=(0,n.yK)((()=>({tokenWrapStyle:{...d.tokenWrapStyle,...a?{justifyContent:"end"}:void 0,...s}})),[d.tokenWrapStyle,s,a]);return(0,l.jsx)("div",{ref:t,style:c.tokenWrapStyle,children:o})}))},65473:(e,t,o)=>{o.d(t,{Z:()=>A});var r=o(67294),n=o(480),i=o(86628),l=o(24405),s=o(48299),a=o(43664),d=o(12534),c=o(80444),u=o(31792),p=o(64921),y=o(36596),m=o(85893);function h(){window.__c={n:"PropertyValueShimmer"};const e=(0,l.yK)((e=>({outer:{display:"inline-flex",overflow:"hidden",position:"relative",width:"100%"},inner:{width:"60%",height:10,borderRadius:12,backgroundColor:e.lightDividerColor}})),[]);return(0,m.jsx)("div",{style:e.outer,children:(0,m.jsx)(y.Z,{style:{...e.inner}})})}var f=o(51454),S=o(66890),b=o(24646),x=o(8606),g=o(78030);function v(e){window.__c={n:"QuickActionButtonsBase"};const{style:t,children:o,align:r}=e,n=(0,l.yK)((()=>({buttonWrapperStyle:{display:"flex",position:"absolute",top:4,gap:"4px",zIndex:f.XP,..."right"===r&&{right:6},..."left"===r&&{left:6},...t}})),[r,t]);return o?(0,m.jsx)("div",{style:n.buttonWrapperStyle,children:o}):null}function w(e){const{format:t,align:o}=e;switch(t){case g.C.Table:return(0,m.jsx)(R,{...e,align:o??"right"});case g.C.Page:return(0,m.jsx)(P,{...e,align:o??"right"});case g.C.Board:return(0,m.jsx)(C,{...e,align:o??"right"});case g.C.GalleryView:return(0,m.jsx)(_,{...e,align:o??"right"});case g.C.ListView:return(0,m.jsx)(k,{...e,align:o??"right"});default:return(0,m.jsx)(v,{...e,align:o??"right"})}}function C(e){window.__c={n:"BoardQuickActionButtons"};const t=(0,l.yK)((()=>({buttonWrapperStyle:{top:0,...e.style}})),[e.style]);return(0,m.jsx)(v,{...e,style:t.buttonWrapperStyle})}function P(e){window.__c={n:"PageQuickActionButtons"};const t=(0,l.yK)((()=>({buttonWrapperStyle:{top:5,...e.style}})),[e.style]);return(0,m.jsx)(v,{...e,style:t.buttonWrapperStyle})}function _(e){window.__c={n:"GalleryQuickActionButtons"};const t=(0,l.yK)((()=>({buttonWrapperStyle:{top:-1,...e.style}})),[e.style]);return(0,m.jsx)(v,{...e,style:t.buttonWrapperStyle})}function k(e){window.__c={n:"ListQuickActionButtons"};const t=(0,l.yK)((()=>({buttonWrapperStyle:{position:void 0,...e.style}})),[e.style]);return(0,m.jsx)(v,{...e,style:t.buttonWrapperStyle})}function R(e){window.__c={n:"TableQuickActionButtons"};const{containerRef:t,align:o="right",children:s}=e,a=(0,S.DK)(),{isMobile:d}=(0,n.Fy)(),{shouldWrap:c}=(0,r.useContext)(x.O),u=function(e){const{containerEl:t,collectionContextStore:o,skip:l}=e,s=(0,n.O7)(),a=(0,i.VK)((()=>l?0:s.WindowSizeStore.state.width),[s.WindowSizeStore,l]),d=(0,i.VK)((()=>l||null!=o&&o.isInPeekRenderer.state?0:(0,b.vJ)(s)),[o,s,l]),[c,u]=(0,r.useMemo)((()=>{if(!d||l||!t)return[void 0,void 0];const e=t.getBoundingClientRect();return[e.right,e.width]}),[d,t,l]);return(0,i.VK)((()=>{if(l||!d||void 0===u||void 0===c)return 0;const e=a-d;return Math.min(u-60,Math.max(0,c-e))}),[d,a,u,c,l],{debugName:"useTableViewMarginRight"})}({containerEl:t.current,collectionContextStore:a,skip:"left"===o||!s||d}),p=(0,l.yK)((()=>({buttonWrapperStyle:{..."right"===o?{right:6+u}:void 0,...e.style,...d&&c?{position:"static",float:o,marginLeft:2}:{}}})),[o,d,u,e.style,c]);return(0,m.jsx)(v,{...e,style:p.buttonWrapperStyle})}var j=o(26388);function B(e){window.__c={n:"BlockPropertyButtonTooltip"};const{propertyValue:t,propertyCaption:o,render:n}=e,{propertySchema:i,format:s,shouldRenderTooltip:a}=(0,r.useContext)(x.O),d=null==i?void 0:i.name,c=!a,u=s===g.C.Board||s===g.C.GalleryView,p=(null==d?void 0:d.length)&&!c,y=void 0!==t,h=void 0!==o,f=p||y||h,S=(0,l.yK)((e=>({value:{color:p?e.mediumInvertedTextColor:void 0},caption:{color:p||y?e.mediumInvertedTextColor:void 0}})),[p,y]),b=(0,r.useCallback)((()=>(0,m.jsxs)(m.Fragment,{children:[p&&(0,m.jsx)("div",{children:d}),y&&(0,m.jsx)("div",{style:S.value,children:t}),h&&(0,m.jsx)("span",{style:S.caption,children:o})]})),[h,p,y,o,d,t,S.caption,S.value]);return f?(0,m.jsx)(j.Z,{renderTooltip:b,render:e=>n(e),placement:u?j.Z.Placement.Left:j.Z.Placement.Bottom}):n()}var T=o(11061);const M=r.memo((0,r.forwardRef)(((e,t)=>{const{tooltipPropertyValue:o,tooltipPropertyCaption:r,tooltipHide:n}=e,i=o=>(0,m.jsx)(V,{ref:t,...e,tooltipEvents:o});return n?i():(0,m.jsx)(B,{propertyValue:o,propertyCaption:r,render:i})}))),V=(0,r.forwardRef)(((e,t)=>{window.__c={n:"BlockPropertyButtonInner"};const o=(0,n.O7)(),{device:y}=o,f=(0,i.qz)(void 0,u.Z),{style:S,quickActionButtons:b,quickActionButtonsAlign:g,quickActionButtonsStyle:v,quickActionButtonsForceVisible:C,editButtonClickProps:P}=e,{collectionContextStore:_,format:k,isReadOnly:R,store:j}=(0,r.useContext)(x.O),{tooltipPhase:B,nextTooltipPhase:M}=(0,r.useContext)(T.J),V=(0,i.VK)((()=>{var e,t;const o=null==_?void 0:_.collectionStore(),r=null==o?void 0:o.isSyncedCollection();return Boolean(r&&!(null!=j&&null!==(e=j.getFormat())&&void 0!==e&&null!==(e=e.attributes)&&void 0!==e&&e.length)&&!(null!=j&&null!==(t=j.getFormat())&&void 0!==t&&t.error))}),[_,j]),A=(0,l.yK)((()=>({buttonStyle:{position:"relative",...S}})),[S]),I=(0,i.VK)((()=>f.state.mouseEntered),[f]),F=(0,r.useCallback)((()=>{f.setState({...f.state,mouseEntered:!0})}),[f]),E=(0,r.useCallback)((()=>{f.setState({...f.state,mouseEntered:!1})}),[f]),K=(0,r.useRef)(null),O=e=>{K.current=e,"function"==typeof t?t(e):t&&(t.current=e)},Z=(0,r.useMemo)((()=>{if(!b)return null;return(void 0!==C?C:I||y.isMobile)?(0,m.jsx)(w,{align:g,style:v,format:k,containerRef:K,children:b}):void 0}),[y.isMobile,k,I,b,g,v,C]);return V?(0,m.jsx)("div",{style:A.buttonStyle,children:(0,m.jsx)(h,{})}):R||void 0===P?(0,m.jsxs)("div",{ref:O,style:A.buttonStyle,onMouseMove:F,onMouseLeave:E,...e.tooltipEvents,children:[Z,e.children]}):(0,m.jsxs)(p.Z,{ref:O,hoveredStyle:e.hoveredStyle,pressedStyle:e.pressedStyle,style:A.buttonStyle,onMouseMove:F,onMouseLeave:E,onContextMenu:t=>{const{onContextMenu:o}=e;y.isAndroid&&y.isPhone?t.preventDefault():o&&(0,d.ZP)({event:t,context:d.Af.EditorContextMenu,callback:()=>{o(t)}})},onClick:async e=>{if(void 0===P)return;const{onClick:t,store:r,property:n,format:i,collectionStore:l,blockPropertyValueOverlayStore:d,disableHorizontalEdgeScroll:u,isStatusCheckbox:p}=P;await a.z({element:K.current??void 0,environment:o,onClick:t,store:r,property:l.getMappedProperty(n),format:i,collectionStore:l,blockPropertyValueOverlayStore:d,disableHorizontalEdgeScroll:u,collectionContextStore:_,mouseStore:f,statusSetCheckbox:p?!e.altKey:void 0});const{currentUserSettingsStore:y,currentSpaceStore:m}=c.default.state;void 0!==y&&void 0!==m&&void 0!==B&&void 0!==M&&s.uR({environment:o,requiredCurrPhase:B,nextPhase:M,currentUserSettingsStore:y,currentSpaceStore:m})},testId:"property-value",...e.tooltipEvents,children:[Z,e.children]})})),A=M},11061:(e,t,o)=>{o.d(t,{J:()=>m,O:()=>y});var r=o(67294),n=o(480),i=o(86628),l=o(45433),s=o(93959),a=o(80444),d=o(91007),c=o(8606),u=o(85893);const p={[l.Es.Assign]:"assign_to_someone",[l.Es.Status]:"change_task_status",[l.Es.TaskToProjectRelation]:"select_a_project"};function y(e){window.__c={n:"BlockPropertyIntroTourTooltipWrapper"};const{store:t,collectionStore:o,property:y,children:m}=e,{isReadOnly:f}=(0,r.useContext)(c.O),S=(0,n.O7)(),b=(0,i.VK)((()=>{if(S.device.isMobile||t.pathIsDead()||f||o.getFormatStore().getKeyStore("app_config_uri").getValue()!==l.iS)return;const e=(0,s.jH)(a.default.state.currentUserSettingsStore,a.default.state.currentSpaceStore);return void 0===p[y]||p[y]!==e||t.getFormat().app_config_uri?void 0:e}),[S.device.isMobile,t,f,o,y]);return void 0!==b?(0,u.jsx)(h,{tooltipPhase:b,collectionStore:o,children:(0,u.jsx)(d.Z,{store:t,origin:m,isFirstTooltip:!1,phase:b})}):m}const m=(0,r.createContext)({tooltipPhase:void 0,nextTooltipPhase:void 0});function h(e){window.__c={n:"BlockPropertyIntroTourTooltipContextProvider"};const{tooltipPhase:t,collectionStore:o,children:r}=e,n=(0,i.VK)((()=>{var e;const r=null===(e=o.getFormat().app_uri_map)||void 0===e?void 0:e[l.Es.TaskToProjectRelation],n=Boolean(r&&!o.getDeletedSchema()[r]);return(0,s.$j)(t,n)}),[o,t]);return(0,u.jsx)(m.Provider,{value:{tooltipPhase:t,nextTooltipPhase:n},children:r})}},8606:(e,t,o)=>{o.d(t,{O:()=>v,Z:()=>w});var r=o(67294),n=o(480),i=o(86628),l=o(99036),s=o(80951),a=o(42875),d=o(72126),c=o(70203),u=o(8406),p=o(66890),y=o(49616),m=o(33929),h=o(96620),f=o(77080),S=o(78030),b=o(24118),x=o(53876),g=o(85893);const v=(0,r.createContext)({collectionContextStore:void 0,propertySchema:void 0,isEmpty:!1,isReadOnly:!0,shouldRenderTooltip:!1,shouldWrap:!1,baseStyles:{},trackEditBlockProperty:()=>{},format:0,containerRef:null,store:void 0,templateVariableContext:void 0});function w(e){window.__c={n:"BlockPropertyValueContextProvider"};const{format:t,children:o,disabled:w,store:C,tableWrap:P,collectionStore:_,property:k,width:R,shouldSetCellHeight:j,isLast:B,disableTableBorderRight:T,locked:M,containerRef:V,showIfEmpty:A}=e,I=(0,n.O7)(),F=(0,p.Y$)(),E=(0,i.VK)((()=>_.getSchema()),[_]),K=(0,i.VK)((()=>C.getPropertyStore(k)),[C,k],{debugName:"propertyStore"}),O=(0,b.PJ)(_,k),Z=(0,i.qz)(void 0,h.Z),L=function(e,t,o,r){const l=(0,n.O7)();return(0,i.VK)((()=>{if(!e.isDefined())return!1;const n=null==r?void 0:r.type;return"checkbox"!==n&&"status"!==n&&"button"!==n&&"created_time"!==n&&"created_by"!==n&&"formula"!==n&&"rollup"!==n&&"auto_increment_id"!==n&&(0,s.wV)({block:e.getModel(),property:o,schema:t,getRecordModel:e.getRecordModel,userTimeZone:(0,a.r)(),intl:m.default.getIntl(),userId:l.currentUser.id})}),[l.currentUser.id,t,o,r,e],{debugName:"BlockPropertyValueContext.useIsEmpty"})}(C,E,k,O),H=function(e,t,o,r,n){return(0,i.VK)((()=>o||!e.canEdit()||(0,s.wl)(t)||(0,b.Sm)(n)||e.isLocked()||r===S.C.Calendar||r===S.C.Timeline||(0,s.f0)(e.getModel(),t,e.getRecordModel)||(0,s.A0)(n)),[o,r,t,n,e],{debugName:"BlockPropertyValueContext.useIsReadOnly"})}(C,k,w,t,O),z=function(e,t){if([S.C.Board,S.C.GalleryView,S.C.ListView,S.C.Relation,S.C.RelationSection].includes(e))return!0;if(e===S.C.Mini)return!t;return!1}(t,L),D=function(e,t){return e===S.C.Page||e===S.C.CompactPage||e===S.C.Table&&t||e===S.C.Board&&t||e===S.C.GalleryView&&t}(t,P),W=(0,x.uo)({width:R,shouldSetCellHeight:j,format:t,shouldWrap:D,isLast:B,disableTableBorderRight:T,locked:M,disabled:w,showIfEmpty:A}),U=function(e,t,o){return(0,i.VK)((()=>{if(!f.default.checkGate("template-variable-properties"))return;if(!e.isDefined())return;if(!e.isTemplate())return;const r=null==o?void 0:o.type;if((0,l.fc)(r)){const o=e.getPropertyValue(t),r=d.Ps(o);if(r&&c.km_(r)){const e=c.QGY(c.hn0(r)),t=e&&c.fsE(e);return t&&{templateVariable:t.type}}}}),[t,o,e],{debugName:"BlockPropertyValueContext.useTemplateVariableContext"})}(C,k,O),N=(0,r.useCallback)((()=>{F&&(null==O?void 0:O.type)&&u.rv({environment:I,collectionContextStore:F,block_id:K.id,property:k,property_type:null==O?void 0:O.type,from:y.Sy(t),isFromBulkActionsToolbar:Boolean(Z)})}),[F,Z,I,t,k,null==O?void 0:O.type,K.id]),q=(0,r.useMemo)((()=>({store:C,collectionContextStore:F,propertySchema:O,isEmpty:L,isReadOnly:H,shouldRenderTooltip:z,shouldWrap:D,baseStyles:W,trackEditBlockProperty:N,format:t,containerRef:V,templateVariableContext:U})),[C,F,O,L,H,z,D,W,N,t,V,U]);return(0,g.jsx)(v.Provider,{value:q,children:o})}},78030:(e,t,o)=>{o.d(t,{C:()=>r});let r=function(e){return e[e.Table=0]="Table",e[e.Board=1]="Board",e[e.Calendar=2]="Calendar",e[e.ListView=3]="ListView",e[e.GalleryView=4]="GalleryView",e[e.Timeline=5]="Timeline",e[e.Page=6]="Page",e[e.CompactPage=7]="CompactPage",e[e.Relation=8]="Relation",e[e.RelationSection=9]="RelationSection",e[e.Mini=10]="Mini",e}({})},88071:(e,t,o)=>{o.d(t,{Z:()=>a});o(67294);var r=o(24405),n=o(84619),i=o(5366),l=o(85893);const s={[n.l.ExtraSmall]:{height:14,fontSize:12,margin:"0 4px 0 0"},[n.l.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0"},[n.l.Medium]:{height:21,fontSize:14,margin:"0 12px 6px 0"},[n.l.Inline]:{height:21,fontSize:14,margin:"0 12px 0 0"},[n.l.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0"}};const a=function(e){window.__c={n:"BlockPropertyValueTokenMore"};const{count:t,format:o,fixedHeight:n,style:a,isCompact:d}=e,{margin:c,height:u,fontSize:p}=s[o],y=(0,r.yK)((e=>({wrapper:{display:"flex",alignItems:"center",lineHeight:1.2,borderRadius:3,fontSize:p,margin:c,color:e.mediumTextColor,...n&&{height:u},...a},compact:{whiteSpace:"nowrap"}})),[p,u,n,c,a]);return(0,l.jsx)("div",{style:y.wrapper,children:d?(0,l.jsx)("span",{style:y.compact,children:(0,l.jsx)(i.FormattedMessage,{defaultMessage:"+{thinSpace}{moreItemsCount}",id:"database.tokens.moreItems.message",values:{moreItemsCount:t,thinSpace:(0,l.jsx)("span",{children:""})}})}):(0,l.jsx)("span",{children:(0,l.jsx)(i.FormattedMessage,{defaultMessage:"{relationMoreItemsCount} more",id:"database.relationPropertyValue.moreItems.message",values:{relationMoreItemsCount:t}})})})}},39694:(e,t,o)=>{o.d(t,{Z:()=>x});var r=o(67294),n=o(480),i=o(24405),l=o(18955),s=o(75553),a=o(5366),d=o(43664),c=o(80402),u=o(66890),p=o(33929),y=o(29370),m=o(73063),h=o(26388),f=o(8606),S=o(78030),b=o(85893);function x(e){window.__c={n:"CopyButton"};const{store:t,schema:o,property:a,style:x,format:v}=e,w=(0,n.O7)(),C=(0,i.Fg)(),P=(0,u.DK)(),{isEmpty:_,propertySchema:k,isReadOnly:R}=(0,r.useContext)(f.O);if(void 0===k||_||w.device.isMobile&&!1===R||"checkbox"===(0,l.z6)(k))return null;const j=v===S.C.Table,B=p.default.formatMessage(g.copy);return(0,b.jsx)(h.Z,{renderTooltip:()=>B,render:e=>(0,b.jsx)("div",{onClick:()=>{let e;j&&(e=y.Z.getState(),c.MO()),d.r({environment:w,theme:C,store:t,schema:o,property:a,collectionContextStore:P}),j&&e&&y.Z.setState(e)},style:x,...e,children:(0,b.jsx)(m.Z,{ariaLabel:B,hasBackground:!0,icon:s.U,showShadow:!0})})})}const g=(0,a.defineMessages)({copy:{defaultMessage:"Copy to Clipboard",id:"database.copyButton.copyToClipboard"}})},24118:(e,t,o)=>{o.d(t,{Ae:()=>c,Am:()=>y,PJ:()=>m,Ri:()=>h,Sm:()=>u,bb:()=>p});var r=o(67294),n=o(86628),i=o(35011),l=o(80951),s=o(42875),a=o(66890),d=o(33929);const c=["last_edited_by","created_by","last_edited_time","created_time","auto_increment_id","location"],u=e=>!e||c.includes(e.type);function p(e){const{store:t,schema:o,property:r,userId:n}=e,a=o[r],c=null==a?void 0:a.type;return"checkbox"!==c&&"button"!==c&&"checkbox"!==(0,i.mm)(a)&&(!t.isDefined()||l.wV({block:t.getModel(),property:r,schema:o,getRecordModel:t.getRecordModel,userId:n,userTimeZone:(0,s.r)(),intl:d.default.getIntl()}))}function y(e,t){let{store:o,property:n,format:i,onClick:l,collectionStore:s,blockPropertyValueOverlayStore:a,disableHorizontalEdgeScroll:d}=e;return(0,r.useMemo)((()=>({store:o,property:n,format:i,onClick:l,collectionStore:s,blockPropertyValueOverlayStore:a,disableHorizontalEdgeScroll:d,isStatusCheckbox:null==t?void 0:t.isStatusCheckbox})),[a,s,d,i,null==t?void 0:t.isStatusCheckbox,l,n,o])}function m(e,t){const o=(0,a.Y$)();return(0,n.VK)((()=>{const r=e.getSchema(),n=e.getMappedProperty(t),i=o.normalizedSchemaStore.state;return r[n]??i[t]}),[o,e,t],{debugName:"usePropertySchema"})}function h(e,t){return(0,n.VK)((()=>e.getMappedProperty(t)),[e,t],{debugName:"useMappedProperty"})}},53876:(e,t,o)=>{o.d(t,{A2:()=>S,Ac:()=>u,IT:()=>m,RQ:()=>g,ch:()=>y,e4:()=>x,sf:()=>h,uo:()=>v,z6:()=>d});var r=o(67294),n=o(480),i=o(24405),l=o(84619),s=o(97880),a=o(78030);const d="14px",c="12px",u=1.5,p=18,y=24,m=30,h={[a.C.Table]:{default:"6px 8px",text:"5px 8px",checkbox:"8px",button:"4px 8px"},[a.C.Page]:{default:"7px 8px",text:"6px 8px",checkbox:"9px 8px",button:"5px 8px"},[a.C.CompactPage]:{default:"5px 6px",text:"4px 8px",token:"5px 6px",checkbox:"7px 6px",button:"3px 6px"},[a.C.Board]:{default:"5px",text:"5px",checkbox:"5px",button:"4px"}},f=["title","text","email","phone_number","number","url","date","created_time","last_edited_time","auto_increment_id"];function S(e){return f.includes(e)}const b=["button","file"];function x(e){return b.includes(e)}const g={[l.l.Small]:{columnGap:6,rowGap:4},[l.l.Medium]:{columnGap:8,rowGap:6},[l.l.Inline]:{columnGap:6,rowGap:4}};function v(e){let{width:t,shouldSetCellHeight:o,format:f,shouldWrap:S,isLast:b,disableTableBorderRight:x,disabled:v,locked:w,showIfEmpty:C}=e;const P=(0,i.Fg)(),{isPhone:_}=(0,n.Fy)();return(0,r.useMemo)((()=>{switch(f){case a.C.Table:return{buttonStyle:{display:"block",fontSize:d,overflow:"hidden",width:t,borderRight:x?"none":`1px solid ${P.tableDividerColor}`,whiteSpace:S?"normal":"nowrap",height:o?32:void 0,minHeight:32,cursor:v||w?"default":"pointer",padding:h[a.C.Table].default},buttonHoveredStyle:{background:"unset"},buttonPressedStyle:{background:"unset"},textStyle:{lineHeight:u,whiteSpace:S?"pre-wrap":"nowrap",wordBreak:S?"break-word":"normal"},tokenWrapStyle:{display:"flex",flexWrap:S?"wrap":"nowrap",...g[l.l.Medium]},textLineHeight:21,sizing:"default",tokenFormat:l.l.Medium};case a.C.GalleryView:return{buttonStyle:{display:"flex",overflow:"hidden",alignItems:"center",borderRadius:5,margin:"0 6px 2px 6px",padding:"0 5px",fontSize:_?d:c,minHeight:24,whiteSpace:S?"normal":"nowrap",width:C?"auto":"fit-content"},textStyle:{lineHeight:u,whiteSpace:S?"pre-wrap":"nowrap",wordBreak:S?"break-word":"normal",overflow:"hidden"},tokenWrapStyle:{display:"flex",minWidth:0,flexShrink:0,flexWrap:S?"wrap":"nowrap",width:S?"100%":void 0,...g[_?l.l.Medium:l.l.Small]},textLineHeight:_?21:p,sizing:_?"default":"small",tokenFormat:_?l.l.Medium:l.l.Small};case a.C.Board:return{buttonStyle:{display:"flex",overflow:"hidden",alignItems:"center",borderRadius:5,fontSize:c,margin:"0 6px 2px 6px",padding:h[a.C.Board].default,minHeight:28,whiteSpace:S?"normal":"nowrap",width:C?"auto":"fit-content"},textStyle:{lineHeight:u,whiteSpace:S?"pre-wrap":"nowrap",wordBreak:S?"break-word":"normal"},tokenWrapStyle:{display:"flex",flexWrap:S?"wrap":"nowrap",...g[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Small};case a.C.RelationSection:return{buttonStyle:{display:"inline-flex",fontSize:c,overflow:"hidden",alignItems:"center",marginLeft:0,minHeight:32,padding:"0 8px",borderRadius:5},tokenWrapStyle:{display:"flex",minWidth:0,...g[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Small};case a.C.Relation:return{buttonStyle:{fontSize:c,overflow:"hidden",alignItems:"center",padding:"0 4px",borderRadius:5,display:"flex",marginLeft:_?0:8,marginRight:_?8:0,height:24,minWidth:20},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",minWidth:0,...g[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Small};case a.C.ListView:return{buttonStyle:{fontSize:c,overflow:"hidden",alignItems:"center",padding:"0 6px 0 8px",borderRadius:5,display:"flex",marginLeft:_?0:2,marginRight:_?8:0,minHeight:30,minWidth:20},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",minWidth:0,...g[l.l.Inline]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Inline};case a.C.Page:return{buttonStyle:{fontSize:d,overflow:"hidden",display:"inline-block",borderRadius:3,width:"100%",minHeight:34,padding:h[a.C.Page].default},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"pre-wrap"},tokenWrapStyle:{display:"flex",flexWrap:"wrap",...g[l.l.Medium]},textLineHeight:21,sizing:"default",tokenFormat:l.l.Medium};case a.C.Timeline:return{buttonStyle:{display:"flex",alignItems:"center",fontSize:c,marginRight:b?0:10},buttonHoveredStyle:{background:"unset"},buttonPressedStyle:{background:"unset"},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap"},tokenWrapStyle:{display:"flex",minWidth:0,...g[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Inline};case a.C.Calendar:return{buttonStyle:{fontSize:c,display:"flex",alignItems:"center",height:y,whiteSpace:"nowrap",width:"100%"},textStyle:{lineHeight:u,whiteSpace:"nowrap",overflow:"hidden"},tokenWrapStyle:{display:"flex",flexShrink:0,flexWrap:"nowrap",...g[l.l.Small]},textLineHeight:p,sizing:"small",tokenFormat:l.l.Small};case a.C.CompactPage:return{buttonStyle:{fontSize:d,overflow:"hidden",alignItems:"center",borderRadius:3,display:"flex",width:"100%",minHeight:30,padding:h[a.C.CompactPage].default},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},tokenWrapStyle:{display:"flex",flexWrap:"nowrap",overflow:"hidden",alignItems:"center",...g[l.l.Medium]},textLineHeight:21,sizing:"default",tokenFormat:l.l.Medium};case a.C.Mini:return{buttonStyle:{fontSize:d,overflow:"hidden",alignItems:"center",borderRadius:4,display:"flex",padding:"0 6px",minWidth:0,height:m},textStyle:{lineHeight:u,wordBreak:"break-word",whiteSpace:"nowrap",textOverflow:"ellipsis"},tokenWrapStyle:{display:"flex",flexWrap:"nowrap",overflow:"hidden",alignItems:"center",...g[l.l.Medium]},textLineHeight:21,sizing:"default",tokenFormat:l.l.Medium};default:(0,s.t1)(f)}}),[x,v,f,b,_,w,o,S,C,P.tableDividerColor,t])}}}]);