"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4700],{43664:(e,t,a)=>{a.d(t,{r:()=>V,z:()=>O});var o=a(1302),n=a(90559),i=a(35011),r=a(99036),s=a(80951),l=a(40506),d=a(7057),c=a(53877),u=a(78106),g=a(84682),p=a(42875),m=a(72126),f=a(32056),h=a(70203),y=a(44805),v=a(97880),M=a(63143),S=a(14871),b=a(83197),_=a(53437),k=a(95477),x=a(24990),C=a(49616),w=a(14976),P=a(17809),R=a(33929),T=a(8406),j=a(51365),I=a(9953),F=a(61045),D=a(39699);function V(e){const{environment:t,theme:a,store:o,schema:r,property:d,collectionContextStore:m}=e,f=t.device,b=r[d];if(b){switch(b.type){case"formula":"v2"===b.version&&(0,P.V1)()?function(e){const{environment:t,store:a,propertySchema:o,property:n}=e,r=a.getModel();if(!o.formula2||!r)return;const s=R.default.getIntl(),l=(0,p.r)(),d=(0,i.EC)({block:r,property:n,formulaCode:o.formula2.code,getRecordModel:a.getRecordModel,intl:s,userTimeZone:l,depth:0,visitedProperties:new Set});if(!d)return;const c=(0,u.j4)(d),g=(0,w.Xh)(c,a);S.RD({stringValue:g,environment:t,copiedMessage:S.tq.copiedPropertyToClipboard})}({environment:t,store:o,propertySchema:b,property:d}):function(e){var t;const{environment:a,store:o,schema:n,property:i,propertySchema:r}=e,s=o.getValue();if(!s)return;const d=(0,g.AH)({property:i,schema:n,block:s,getRecordValue:o.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,p.r)(),depth:0,intl:R.default.getIntl(),resultCache:{},visitedProperties:new Set}}),c=null==r||null===(t=r.formula)||void 0===t?void 0:t.result_type;switch(c){case"number":M.hj(d)&&B({value:d,propertySchema:r,environment:a});break;case"date":d&&l.U3(d)&&N({date:d,environment:a});break;case"text":d&&S.RD({stringValue:d.toString(),environment:a,copiedMessage:S.tq.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,v.t1)(c)}}({environment:t,store:o,schema:r,property:d,propertySchema:b});break;case"person":{const e=o.getPropertyValue(d);Z({actors:s.DW({textValue:e,propertySchema:b,blockCreatorPointer:o.getCreatedByPointer()}),environment:t,store:o});break}case"created_by":{const e=o.getCreatedByPointer();e&&Z({actors:[e],environment:t,store:o});break}case"last_edited_by":{const e=o.getLastEditedByPointer();e&&Z({actors:[e],environment:t,store:o});break}case"number":B({value:s.VY(o.getPropertyValue(d)),propertySchema:b,environment:t});break;case"text":{const e=o.getPropertyValue(d);if(!e)return;const n=y.hW({textValue:{value:e,spaceId:o.getSpaceId()},getRecordModel:o.getRecordModel,getRecordRole:o.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!0,disableLinks:!1,disabled:!1,userTimeZone:(0,p.r)(),isClient:!0,isAndroid:f.isAndroid,isSafariOrIOS:f.isSafari||f.isIOS,isWindows:f.isWindows,showEmojiInline:f.isWindows,emojiType:"raw",theme:a,baseUrl:k.default.domainBaseUrl,publicDomainName:k.default.publicDomainName,currentUserId:t.currentUser.id,intl:R.default.getIntl(),katex:void 0,overwriteBaseUrlFromSpaceId:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:x.Z.state}),i=(0,w.Xh)(o.getPropertyValue(d),o);S.g9({stringValue:i,htmlValue:n,environment:t,copiedMessage:S.tq.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=h.Jcv(o.getPropertyValue(d));S.RD({stringValue:e,environment:t,copiedMessage:S.tq.copiedPropertyToClipboard});break}case"date":{const e=o.getPropertyValue(d),a=s.Gl(e);a&&N({date:a,environment:t,dateFormat:b.date_format,timeFormat:b.time_format});break}case"last_edited_time":case"created_time":{const e=o.getKeyStore(b.type).getValue();if(e){N({date:c.CQ(e,(0,p.r)()),environment:t,dateFormat:b.date_format,timeFormat:b.time_format})}break}case"auto_increment_id":{const e=o.getPropertyValue(d);!function(e){const{value:t,environment:a,collectionContextStore:o}=e;if(t&&o){var i;const e=(null===(i=o.collectionStore())||void 0===i||null===(i=i.getRecordKeyStore())||void 0===i?void 0:i.getRecordKey())??"";S.RD({stringValue:(0,n.wf)(e,t),environment:a,copiedMessage:S.tq.copiedPropertyToClipboard})}}({value:s.ah(e),environment:t,collectionContextStore:m});break}}T.S$(t,m,{block_id:o.id,property:d,property_type:b.type})}}function Z(e){const{actors:t,environment:a,store:o}=e,n=s.C1(t);S.RD({stringValue:(0,w.Xh)(n,o),environment:a,copiedMessage:S.tq.copiedPropertyToClipboard})}function B(e){const{value:t,propertySchema:a,environment:o}=e;if(!m.i2(t)&&!M.z4(t)){const e=(null==a?void 0:a.number_format)||f.dk,n=f.uf(t,e,R.default.getIntl());S.RD({stringValue:n,environment:o,copiedMessage:S.tq.copiedPropertyToClipboard})}}function N(e){const{date:t,environment:a,dateFormat:o,timeFormat:n}=e,i=(0,d.ZV)({value:t,date_format:o??l.sF,time_format:n??l.c_,allowRelativeDates:!0,intl:R.default.getIntl()});S.RD({stringValue:i,environment:a,copiedMessage:S.tq.copiedPropertyToClipboard})}async function O(e){var t;const{element:a,rect:n,environment:i,onClick:l,store:d,additionalStores:c=[],property:u,format:g,collectionStore:p,blockPropertyValueOverlayStore:m,disableHorizontalEdgeScroll:f,collectionContextStore:h,mouseStore:y,statusSetCheckbox:v,preventClearSelection:M,collectionsBulkActionsToolbarStore:S,scrollers:k}=e,{device:x,WindowSizeStore:w}=i,P=null===(t=p.getSchema())||void 0===t?void 0:t[u],V=null==P?void 0:P.type;if(!V)return;if(!C.g0({property:u,collectionStore:p})){if("checkbox"===V){const e=d.getPropertyStore(u);e&&D.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:i,perform:e=>{j.vO({stores:[d,...c],property:u,transaction:e})}}),h&&T.rv({environment:i,collectionContextStore:h,block_id:e.id,property:u,property_type:V,from:C.Sy(g),isFromBulkActionsToolbar:Boolean(S)})}else if("status"===V&&"status"===P.type&&v){const e=d.getPropertyValue(u),t=s.rO(e,P,R.default.getIntl());d.getPropertyStore(u)&&D.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:i,perform:e=>{const a=P.groups??[],o=!0===t?a[0]:a[a.length-1],n=(P.options??[]).find((e=>{var t;return e.id===(null==o||null===(t=o.optionIds)||void 0===t?void 0:t[0])}));if(n)for(const t of[d,...c])I.sO({store:t.getPropertyStore(u),value:s.Is(n.value),transaction:e})}})}else{-1===r.uk.indexOf(V)&&(y&&y.setState({...y.state,mouseEntered:!1}),a&&k&&x.isMobileNative&&b.m[V]===_.kQ.Popup&&(F.bx({element:a,scrollers:k,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:w.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await o.default.afterNextFlush()),j.bA({environment:i,blockPropertyValueOverlayStore:m,store:d,additionalStores:c,property:u,format:g,rect:n,disableHorizontalEdgeScroll:f,collectionContextStore:h,preventClearSelection:M,collectionsBulkActionsToolbarStore:S}),h&&T.zF({environment:i,collectionContextStore:h,property:u,property_type:V,from:C.Sy(g),isFromBulkActionsToolbar:Boolean(S)}))}l&&l()}}},14473:(e,t,a)=>{a.d(t,{O:()=>u});var o=a(15145),n=a(1800),i=a(70219),r=a(80444),s=a(88923),l=a(35661),d=a(50906),c=a(75018);function u(e,t,a,i,u){const{mainEditorCurrentBlockStore:p}=r.default.state;if(!p)return;const m=e.find((e=>e.id===t.id));if(!m)return;let f;if(u){const e=l.G.createChildStore(p,m).getModel(),t=e?g(a,e.getSpaceId()):void 0;f=(0,n.Z)({pageId:m.id,pageModel:e,baseUrl:t,pageVisitSource:o.tY.MentionInPage})}else{const e=p.getModel(),t=e?g(a,e.getSpaceId()):void 0;f=(0,n.Z)({pageId:p.id,pageModel:e,baseUrl:t,peekViewBlockId:m.id,peekMode:(0,s.getUrlParamFromPeekMode)(s.default.state.mode),pageVisitSource:o.tY.MentionInPage}),d.XXm(a,{from:i,meta_click:Boolean(u)})}c.navigate({environment:a,url:f,openInNew:u})}function g(e,t){return(0,i.b)(e)(t)}},30694:(e,t,a)=>{a.d(t,{Z:()=>C});a(67294);var o=a(480),n=a(86628),i=a(24405),r=a(15145),s=a(16184),l=a(26774),d=a(5366),c=a(6287),u=a(82990),g=a(75018),p=a(75081),m=a(98165),f=a(80444),h=a(35661),y=a(74016),v=a(64921),M=a(31278),S=a(86176),b=a(26388),_=a(85893);function k(){return(0,_.jsx)("span",{style:{paddingRight:3},children:"/"})}function x(e){window.__c={n:"CollectionInTeamLocation"};const{team:t,isOnlyCollectionInTeam:a,collection:o}=e,r=(0,n.VK)((()=>t.getName()),[t]),s=(0,n.VK)((()=>{const e=m.uJ(o).slice(1);return e.reverse(),e}),[o]),l=(0,n.VK)((()=>o.getName()),[o]),d=(0,n.VK)((()=>o.getIcon()),[o]),c=(0,i.yK)((e=>({recordPathTextStyle:{color:e.accentColors.gray[100]},collectionTitleTextStyle:{lineHeight:1,fontWeight:u.Z.fontWeight.medium,marginTop:2,textWrap:"nowrap"}})),[]);return(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"fit-content"},children:[(0,_.jsx)(b.Z,{renderTooltip:()=>(0,_.jsx)("span",{children:r}),render:e=>(0,_.jsx)("div",{...e,children:(0,_.jsx)(y.p,{style:{marginRight:7},store:t,disabled:!0,size:20},"icon")})}),a&&(0,_.jsx)("div",{style:c.collectionTitleTextStyle,children:r}),!a&&(0,_.jsxs)(_.Fragment,{children:[s.length>1&&(0,_.jsx)(b.Z,{renderTooltip:()=>(0,_.jsx)("span",{children:(0,_.jsx)(S.Z,{store:o,hideTeam:!0,textColor:c.recordPathTextStyle.color})}),render:e=>(0,_.jsxs)("span",{...e,children:[(0,_.jsx)(k,{}),(0,_.jsx)("span",{style:{paddingRight:4},children:"..."})]})}),(0,_.jsx)(k,{}),d&&(0,_.jsx)(M.Z,{icon:d,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",style:{marginRight:3},isLarge:!0,largeIcon:!0,disabled:!0}),(0,_.jsx)("div",{style:c.collectionTitleTextStyle,children:l})]})]})}const C=function(e){window.__c={n:"CollectionLocation"};const{collectionContextStore:t,parentStore:a,collectionForLocation:y}=e,S=(0,o.O7)(),C=(0,n.VK)((()=>f.default.state.currentSpaceStore),[]),w=(0,d.useIntl)(),P=(0,d.defineMessages)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"}}),R=(0,n.VK)((()=>t.remoteCollectionIds.state.map((e=>h.NW.createChildStore(a,{table:c.v,id:e})))),[t.remoteCollectionIds,a]),T=(0,n.VK)((()=>{if(C)return(0,p.x1)({environment:S,typedCollections:R,spaceStore:C})}),[R,S,C]),j=(0,n.VK)((()=>m.VP(y)),[y]),I=(0,n.VK)((()=>{var e;return Boolean(j&&1===(null==T||null===(e=T.teamDatabases[j.id])||void 0===e?void 0:e.length))}),[null==T?void 0:T.teamDatabases,j]),F=Boolean(null==T?void 0:T.privateDatabases.some((e=>e.id===y.id))),D=Boolean(null==T?void 0:T.otherDatabases.some((e=>e.id===y.id))),V=(0,n.VK)((()=>y.getName()),[y]),Z=(0,n.VK)((()=>y.getIcon()),[y]),B=(0,i.yK)((e=>({button:{color:e.accentColors.gray[800]},shareTypeIndicatorIcon:{width:20,height:20,marginRight:3,color:e.accentColors.gray[400],padding:2,backgroundColor:e.accentColors.gray[75],borderRadius:2},collectionTitleTextStyle:{lineHeight:1,fontWeight:u.Z.fontWeight.medium,marginTop:2,textWrap:"nowrap"}})),[]);return(0,_.jsxs)(v.Z,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:B.button,onClick:()=>{const e=y.getParentBlockStore();e&&g.navigateToBlock({environment:S,store:e,pageVisitSource:r.tY.Breadcrumb})},children:[j&&(0,_.jsx)(x,{isOnlyCollectionInTeam:I,team:j,collection:y}),(F||D)&&(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},children:[F&&(0,_.jsx)(b.Z,{renderTooltip:()=>(0,_.jsx)("span",{children:w.formatMessage(P.private)}),render:e=>(0,_.jsx)("div",{...e,children:(0,s.Q)(B.shareTypeIndicatorIcon)})}),D&&(0,_.jsx)(b.Z,{renderTooltip:()=>(0,_.jsx)("span",{children:w.formatMessage(P.shared)}),render:e=>(0,_.jsx)("div",{...e,children:(0,l.O)(B.shareTypeIndicatorIcon)})}),(0,_.jsx)(k,{}),Z&&(0,_.jsx)(M.Z,{icon:Z,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",style:{marginRight:3},isLarge:!0,largeIcon:!0,disabled:!0}),(0,_.jsx)("div",{style:B.collectionTitleTextStyle,children:V})]})]})}},56247:(e,t,a)=>{a.d(t,{b:()=>g});a(67294);var o=a(24405),n=a(72126),i=a(32056),r=a(63143),s=a(49616),l=a(33929),d=a(85248),c=a(78942),u=a(85893);function g(e){window.__c={n:"NumberValue"};const{numberValue:t,numberFormat:a,numberShowAs:g,shouldRenderTooltip:p,withComma:m,style:f}=e,h=(0,o.Fg)();if(n.i2(t)||r.z4(t))return null;const y=e.progressSize??21,v=(null==g?void 0:g.showValue)??!0,M=v&&i.uf(t,a,l.default.getIntl());let S;if("bar"===(null==g?void 0:g.type)||"ring"===(null==g?void 0:g.type)){const o=i.IM(t,g.maxValue),n="default"===g.color?h.selectLightGray:h.accentColors[g.color],r="dark"===h.mode?n[500]:n[400],l=n[50],m="dark"===h.mode?n[200]:h.selectLightGray[200],f=p?s.X7({numberValue:t,numberFormat:a,numberShowAs:g}):void 0;S="bar"===g.type?(0,u.jsx)(d.k,{percentage:o,filledColor:r,gapColor:l,unfilledColor:m,style:{marginLeft:v?8:0,height:y,...e.barStyle,...v?{}:{flexBasis:"100%"}},tooltip:f}):(0,u.jsx)(c.e,{percentage:o,filledColor:r,gapColor:l,unfilledColor:m,size:y,style:{marginLeft:v?8:0},tooltip:f})}const b={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",...f};return(0,u.jsxs)("div",{style:b,children:[M,S,m?", ":null]})}},68139:(e,t,a)=>{a.d(t,{Z:()=>W});var o=a(67294),n=a(83355),i=a(15145),r=a(84619),s=a(45433),l=a(22225),d=a(13148),c=a(12217),u=a(58810),g=a(17683),p=a(32240),m=a(47453),f=a(98519),h=a(72126),y=a(5366),v=a(82990),M=a(50906),S=a(75018),b=a(48543),_=a(73744),k=a(12534),x=a(33929),C=a(39500),w=a(29376),P=a(86098),R=a(31792),T=a(19671),j=a(88923),I=a(97039),F=a(78030),D=a(53876),V=a(64921),Z=a(5145),B=a(50478),N=a(73063),O=a(11470),A=a(26388),L=a(10009),q=a(85893);const z=(0,y.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.navigateButton.openAsPageTitle"}});class E extends n.Z{constructor(){var e;super(...arguments),e=this,this.outerRef=o.createRef(),this.relationTokenBlockStoreRef=o.createRef(),this.storeTypes={mouseStore:R.Z},this.isSprintsTypedProperty=this.createComputedStore((()=>this.props.targetCollectionStore.getFormatStore().getKeyStore("app_config_uri").getValue()===s.p$)),this.renderOuterDesktopRelationRow=(e,t,a,o,n,i,r)=>(0,q.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},ref:this.outerRef,children:["section"===t&&this.stores.mouseStore.state.mouseEntered&&a&&(0,q.jsx)(A.Z,{renderTooltip:()=>(0,q.jsx)(y.FormattedMessage,{defaultMessage:"Drag <medium>to move</medium>",id:"database.relationMenuRow..dragPrompt.text",values:{medium:e=>(0,q.jsx)("span",{style:{color:this.theme.mediumInvertedTextColor},children:e})}}),render:e=>(0,q.jsx)(N.Z,{hasBackground:!1,ariaLabel:"Drag to move a related page",icon:c.D,iconStyle:{width:14,height:14,fill:this.theme.lightIconColor},hoveredStyle:{borderRadius:3},style:{cursor:"grab",width:B.C$+4,marginLeft:-(B.C$+4),height:24,borderRadius:3},...e})}),"section"===t?(0,q.jsx)("div",{style:this.getCellStyle(o),onContextMenu:this.handleContextMenu,onMouseEnter:i,onMouseLeave:r,onClick:this.handleRelationSectionRelationMenuRowClick,role:"button","aria-label":"Editable title","aria-disabled":this.props.disabled,tabIndex:this.props.disabled?-1:0,children:e}):(0,q.jsx)("div",{style:this.getCellStyle(o),onContextMenu:this.handleContextMenu,onMouseEnter:i,onMouseLeave:r,role:"button",tabIndex:this.props.disabled?-1:0,"aria-disabled":this.props.disabled,onClick:e=>{(0,k.ZP)({event:e,context:k.Af.EditorClick,callback:()=>{(0,C.uG)(e)||(n?n(this.outerRef.current):this.handleButtonClick(e,this.isSprintsTypedProperty.state))}})},children:e})]}),this.renderInnerRelationMenuRow=(e,t,a,o,n,i,r,s,d,c,u)=>{const g="section"===a&&!this.props.disabled&&t.canEdit()&&!o.isMobile,p=w.BI(this.props.collectionStore.getSchema(),this.props.property);let f,h;return f=s?p?(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePR.message",defaultMessage:"Unlink PR"}):(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePage.message",defaultMessage:"Unlink page"}):p?(0,q.jsx)(y.FormattedMessage,{defaultMessage:"Link PR",id:"database.relationMenuRow.tooltip.addPR.message"}):(0,q.jsx)(y.FormattedMessage,{defaultMessage:"Link page",id:"database.relationMenuRow.tooltip.addPage.message"}),h="section"===a&&s?p?(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPRInline.message",defaultMessage:"Insert new PR"}):(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):p?(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPR.message",defaultMessage:"Link another PR"}):(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPage.message",defaultMessage:"Link another page"}),(0,q.jsxs)(q.Fragment,{children:[e&&"popup"===a&&(0,q.jsx)(Z.ZP,{iconSize:12,style:{marginLeft:2,height:20}}),o.isPhone?this.renderRelationToken(o,g):this.renderRelationProperties(o,g),(n||i)&&(0,q.jsxs)("div",{style:this.getRelationButtonWrapperStyle(n||i,!1),children:[n&&(0,q.jsx)(U,{isOpenPage:!1,ariaLabel:s?"Unlink page":"Link page",onClick:d,style:{borderRadius:3},icon:s?l.g:m.R,tooltipMessage:f}),i&&c&&(0,q.jsx)(U,{isOpenPage:!1,ariaLabel:"section"===a&&s?"Insert new page":"Link another page",onClick:()=>c(this.outerRef.current),style:{borderRadius:0},icon:m.R,tooltipMessage:h})]}),r&&u&&this.renderRelationMenuRowOpenPageButton(n,i,u)]})},this.renderRelationMenuRowOpenPageButton=(e,t,a)=>(0,q.jsx)("div",{style:this.getRelationButtonWrapperStyle(e||t,!0),children:(0,q.jsx)(U,{isOpenPage:!0,ariaLabel:"side_peek"===this.peekModeStore.state?"Open in side peek":"center_peek"===this.peekModeStore.state?"Open in center peek":"Open as page",onClick:a,style:{width:60},icon:"side_peek"===this.peekModeStore.state?p.y:"center_peek"===this.peekModeStore.state?g.Q:u.Z,tooltipMessage:"side_peek"===this.peekModeStore.state?(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPageSidePeek.message",defaultMessage:"Open in side peek"}):"center_peek"===this.peekModeStore.state?(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPageCenterPeek.message",defaultMessage:"Open in center peek"}):(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPage.message",defaultMessage:"Open as page"})})}),this.renderSprintsInnerRelationMenuRow=(e,t,a,o,n,i,r,s,d,c,u)=>{const g="section"===a&&!this.props.disabled&&t.canEdit()&&!o.isMobile;return(0,q.jsxs)(q.Fragment,{children:[e&&"popup"===a&&(0,q.jsx)(Z.ZP,{iconSize:12,style:{marginLeft:2,height:20}}),o.isPhone?this.renderRelationToken(o,g):this.renderRelationProperties(o,g),s&&"popup"===a&&(0,q.jsx)("div",{style:{display:"inline-flex",marginLeft:"auto",alignItems:"center",justifyContent:"center",padding:0,height:24},children:(0,f.k)({width:16,height:16,fill:this.theme.regularIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"})}),(n||i)&&(0,q.jsxs)("div",{style:this.getRelationButtonWrapperStyle(n||i,!1),children:[n&&(0,q.jsx)(U,{isOpenPage:!1,ariaLabel:s?"Remove this sprint":"Add this sprint",onClick:d,style:{borderRadius:3},icon:s?l.g:m.R,tooltipMessage:s?(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePage.messageSprints",defaultMessage:"Remove this sprint"}):(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.addPage.messageSprints",defaultMessage:"Add this sprint"})}),i&&c&&(0,q.jsx)(U,{isOpenPage:!1,ariaLabel:"section"===a&&s?"Insert new page":"Move to a different sprint",onClick:()=>c(this.outerRef.current),style:{borderRadius:0},icon:m.R,tooltipMessage:"section"===a&&s?(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):(0,q.jsx)(y.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPage.messageSprints",defaultMessage:"Move to a different sprint"})})]}),r&&u&&this.renderRelationMenuRowOpenPageButton(n,i,u)]})},this.renderRelationToken=function(t,a){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{relatedPageStore:n,rowType:i,pageStore:s}=e.props;return(0,q.jsx)("div",{style:{display:"flex",alignItems:"center",flex:"0 1 auto",minHeight:0,...!o&&{minWidth:40},paddingLeft:"section"===i?4:6},children:(0,q.jsx)(L.Z,{ref:e.relationTokenBlockStoreRef,format:r.l.Inline,blockId:n.id,isSingle:!0,parentStore:s,showRelationTooltip:!0,noUnderline:e.isSprintsTypedProperty.state,style:{display:"flex",alignItems:"center",margin:0,whiteSpace:"nowrap",marginRight:"section"===i?0:t.isTablet?8:0},tooltipOriginStyle:{minWidth:0},titleStyle:{...v.Z.textOverflowStyle,maxWidth:"100%"},tooltipDynamicMouseOverflow:!0,clickTitleBehavior:a?"edit":void 0,onTitleEnter:e.props.onInsertInline,index:e.props.index},n.id)})},this.renderRelationProperties=(e,t)=>{const{relatedPageStore:a,targetCollectionStore:n,blockPropertyValueOverlayStore:i,rowType:r}=this.props,s=this.targetPropertiesToDisplay.state;if(h.xb(s))return;const l="section"!==r||(this.props.disabled||!a.canEdit()||this.environment.device.isMobile),d=s.map((s=>{if("title"===s.property){const a=this.isSprintsTypedProperty.state;return(0,q.jsx)(o.Fragment,{children:this.renderRelationToken(e,t,a)},"title")}return(0,q.jsx)(I.Z,{store:a,property:s.property,disabled:l,locked:!1,format:"section"===r?F.C.RelationSection:F.C.Relation,tableWrap:!1,blockPropertyValueOverlayStore:i??T.Z,collectionStore:n},s.property)}));return(0,q.jsx)("div",{style:{display:"flex",marginRight:8,maxHeight:22,alignItems:"center",...v.Z.textOverflowStyle},children:d})},this.targetPropertiesToDisplay=this.createComputedStore((()=>{const{collectionStore:e,targetCollectionStore:t,property:a}=this.props,o=t.getSchema();return o?w.U1({collectionStore:e,property:a}).filter((e=>e.visible&&("title"===e.property||o[e.property]))):[]}),!0),this.peekModeStore=this.createComputedStore((()=>{if(j.default.state.open)return j.default.state.mode;const{blockPropertyValueOverlayStore:e}=this.props,t=null==e?void 0:e.state;if(null==t||!t.isOpen||null==t||!t.collectionContextStore)return j.default.state.mode;const a=t.collectionContextStore,o=null==a?void 0:a.collectionViewStore(),n=null==o?void 0:o.getType();return o&&n?o.getFormat().collection_peek_mode??b.Ls[n]:j.default.state.mode})),this.handleMouseMove=()=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0})},this.handleMouseLeave=()=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1})},this.handleButtonClick=(e,t)=>{const{collectionStore:a,targetCollectionStore:o,relatedPageStore:n,onActionButtonClick:r,disabled:s,rowType:l,blockPropertyValueOverlayStore:d,isSelected:c}=this.props;if(s||c){if(t)return;const r=_.DJ(e),s=a.id===o.id?j.default.state.resultsStore:void 0,c=a.id===o.id?j.default.state.collectionContextStore:void 0,u=j.default.isSidePeekOpen();if(S.peekBlock({environment:this.environment,store:n,peekMode:this.peekModeStore.state,openInNew:r,resultsStore:s,collectionContextStore:c,pageVisitSource:i.tY.PeekOpen}),M.XXm(this.environment,{from:"inline"===l||"section"===l?"property_value":"configure_relation_modal",meta_click:Boolean(r)}),"popup"===l&&!u){(d??T.Z).setState({isOpen:!1})}}else r(e)},this.handleRelationSectionRelationMenuRowClick=e=>{const{collectionStore:t,targetCollectionStore:a,isSelected:o,relatedPageStore:n,onActionButtonClick:r,disabled:s}=this.props;(0,k.ZP)({event:e,context:k.Af.EditorClick,callback:()=>{if(!(0,C.uG)(e))if(o||s){const o=_.DJ(e),r=t.id===a.id?j.default.state.resultsStore:void 0,s=t.id===a.id?j.default.state.collectionContextStore:void 0;S.peekBlock({environment:this.environment,store:n,peekMode:this.peekModeStore.state,openInNew:o,resultsStore:r,collectionContextStore:s,pageVisitSource:i.tY.PeekOpen}),M.XXm(this.environment,{from:"relation_section",meta_click:Boolean(o)})}else r(e)}})},this.handleContextMenu=e=>{const{device:t}=this.environment;t.isAndroid&&t.isPhone&&e.preventDefault()}}get registries(){return[P.Z]}renderComponent(){const{device:e}=this.environment;return e.isPhone&&"popup"===this.props.rowType?this.renderMobileMenuItem():this.renderDesktopMenuItem()}renderMobileMenuItem(){const{disabled:e,relatedPageStore:t,isSelected:a}=this.props,o=!e&&a;return(0,q.jsx)(O.Z,{...this.props,store:t,hidePath:!0,right:o?this.renderMobileRemoveButton():void 0})}renderDesktopMenuItem(){const{disabled:e,locked:t,canDrag:a,relatedPageStore:o,focused:n,isSelected:i,rowType:r,targetCollectionStore:s,onActionButtonClick:l,onSecondaryButtonClick:d,onOpenPageButtonClick:c,onMouseEnter:u,onMouseLeave:g}=this.props,{device:p}=this.environment,f=(p.isMobile||n)&&!t&&!e;if(this.isSprintsTypedProperty.state)return this.renderSprintsDesktopMenuItem();const v="section"!==r?(p.isMobile||n)&&!t&&!e:f,M=!t&&!e&&"section"===r&&!p.isMobile&&!(1===this.props.propertyLimit)&&s.canEdit(),S=!p.isMobile&&!t&&n&&!e&&("inline"===r||"section"===r)&&!h.o8(d),b=!p.isMobile&&n&&!e&&"section"===r&&!h.o8(c),_=this.renderInnerRelationMenuRow(a,o,r,p,v,S&&"section"!==r,b,i,l,d,c),k=this.theme.mediumInvertedTextColor;return(0,q.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"calc(100% + 48px)",paddingLeft:48,position:"relative",left:-48},onMouseEnter:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,ref:this.outerRef,children:[this.stores.mouseStore.state.mouseEntered&&M&&(0,q.jsx)(A.Z,{renderTooltip:()=>(0,q.jsx)(y.FormattedMessage,{defaultMessage:"Click <medium>to insert a page below</medium>",id:"database.relationMenuRow.tooltip.floatingAddPageButton.message",values:{medium:e=>(0,q.jsx)("span",{style:{color:k},children:e})}}),render:e=>(0,q.jsx)(N.Z,{hasBackground:!1,ariaLabel:"Create a new related page",icon:m.R,iconStyle:{width:16,height:16,fill:this.theme.lightIconColor},onClick:this.props.onInsertInline,hoveredStyle:{borderRadius:3},style:{marginLeft:a?-44:-22,position:"absolute",marginRight:4},...e})}),this.renderOuterDesktopRelationRow(_,r,a,n,void 0,u,g)]})}renderSprintsDesktopMenuItem(){const{disabled:e,locked:t,canDrag:a,relatedPageStore:o,focused:n,isSelected:i,rowType:r,onActionButtonClick:s,onSecondaryButtonClick:l,onOpenPageButtonClick:d,onMouseEnter:c,onMouseLeave:u,propertyLimit:g}=this.props,{device:p}=this.environment,m=(p.isMobile||n)&&!t&&!e,f="section"!==r?(p.isMobile||n)&&!t&&!e&&1!==g&&"popup"===r&&i:m,y=!p.isMobile&&!t&&n&&!e&&!h.o8(l),v=!p.isMobile&&n&&!e&&("section"===r||"inline"===r)&&!h.o8(d),M=v,S=this.renderSprintsInnerRelationMenuRow(a,o,r,p,f,y&&!M&&"section"!==r,v,i,s,l,d);return this.renderOuterDesktopRelationRow(S,r,a,n,l,c,u)}renderMobileRemoveButton(){return(0,q.jsx)(V.Z,{mobileFeedback:!0,onClick:this.props.onActionButtonClick,style:{padding:12,marginRight:-12},children:(0,d.U)({width:20,height:20})})}getCellStyle(e){const{rowType:t}=this.props;return{...v.Z.textOverflowStyle,display:"flex",alignItems:"center",position:"relative",borderRadius:3,width:"100%",height:w.Mu,paddingTop:2,paddingRight:4,paddingBottom:2,paddingLeft:0,fontSize:D.z6,margin:"popup"===t?"0px 4px":0,cursor:"pointer",background:e?this.theme.buttonHoveredBackground:void 0,userSelect:"none"}}getRelationButtonWrapperStyle(e,t){return{position:"absolute",right:t?e?36:6:6,top:4,display:"inline-flex",flexShrink:0,borderRadius:4,overflow:"hidden",padding:2,gap:1,background:this.theme.popoverBackground,boxShadow:this.theme.lightBoxShadow}}}function U(e){const{isOpenPage:t,onClick:a,style:o,icon:n,tooltipMessage:i,ariaLabel:r}=e;return(0,q.jsx)(A.Z,{renderTooltip:()=>i,render:e=>(0,q.jsx)(N.Z,{hasBackground:!1,ariaLabel:r,icon:n,onClick:a,caption:t&&x.default.formatMessage(z.openAsPageTitle),hoveredStyle:{borderRadius:3},style:{height:20,width:20,flex:"0 0 auto",...o},...e})})}E.displayName="RelationMenuRow";const W=E},91007:(e,t,a)=>{a.d(t,{Z:()=>w});var o=a(67294),n=a(480),i=a(86628),r=a(24405),s=a(8848),l=a(13148),d=a(5366),c=a(50906),u=a(48299),g=a(66890),p=a(93959),m=a(33929),f=a(85957),h=a(24646),y=a(80444),v=a(3418),M=a(88923),S=a(23063),b=a(73063),_=a(32662),k=a(85893);const x="pm_intro_tooltip",C=(0,d.defineMessages)({dismissTooltip:{defaultMessage:"Dismiss tooltip",id:"components.collections.projManagementIntroTooltip.dismissTooltip"}});function w(e){window.__c={n:"ProjManagementIntroTooltip"};const t=(0,n.O7)(),a=(0,g.DK)(),w=(0,n.Fy)(),{store:P,origin:R,isFirstTooltip:T,phase:j,additionalPhaseToShowOn:I}=e,F=(0,i.VK)((()=>y.default.state.currentUserSettingsStore),[]),D=(0,i.VK)((()=>y.default.state.currentSpaceStore),[]),V=(0,i.VK)((()=>(0,p.jH)(F,D)),[F,D]),Z=(0,i.VK)((()=>{var e;return null==a||null===(e=a.settingsStore.state)||void 0===e?void 0:e.open}),[a]),B=(0,i.VK)((()=>{if("assign_to_someone"===V||"change_task_status"===V||"select_a_project"===V){const e=M.default.isSidePeekOpen()?590:650;return(0,f.wq)(P)&&(0,f.PQ)(t)>=e||!(0,f.wq)(P)&&(0,h.$3)(t)>=e?"right":"bottom"}return"bottom"}),[V,P,t]),N=(0,i.VK)((()=>{const e=y.default.state.inAppCalloutStore;return!(v.Z.state.openPopups.size>0||Z||!e.canShow("pm_intro_tooltip"))&&(V===j||(!(V||!T)||!(!I||V!==I)))}),[Z,V,j,T,I]),O=(0,o.useCallback)((()=>{T&&F&&D&&!V&&u.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"create_a_task",currentUserSettingsStore:F,currentSpaceStore:D})}),[V,F,D,t,T]);(0,o.useEffect)((()=>{if(N){var e;y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:x,visible:!0}),c.ADR(t,{phase:j,collection_id:null==a||null===(e=a.collectionStore())||void 0===e?void 0:e.id,space_id:null==D?void 0:D.id}),O()}}),[a,null==D?void 0:D.id,t,j,N,O]);const A=(0,o.useCallback)((()=>{var e;if(F&&D){if("create_a_task"===j)u.uR({environment:t,requiredCurrPhase:"create_a_task",nextPhase:"assign_to_someone",currentUserSettingsStore:F,currentSpaceStore:D});else{y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:x,visible:!1}),u.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"complete",currentUserSettingsStore:F,currentSpaceStore:D})}c.rx3(t,{phase:j,collection_id:null==a||null===(e=a.collectionStore())||void 0===e?void 0:e.id,space_id:null==D?void 0:D.id})}}),[a,D,F,t,j]),L=(0,r.yK)((e=>({popupContainer:{fontSize:12,color:s.ZP.white,position:"absolute",..."bottom"===B?{top:"calc(100% + 12px)",left:"calc(50% - 110px)"}:{},..."right"===B?{top:"select_a_project"===j?"calc(2px - 50%)":"calc(-5px - 50%)",left:"calc(100% + 12px)"}:{},background:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[700],borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:e.largeLightBoxShadow,zIndex:99},circle:{position:"absolute",..."bottom"===B?{top:-12,left:"calc(50% - 3px)"}:{},..."right"===B?{top:"calc(50% - 3px)",left:-12}:{},background:s.ZP.UIDocNotificationsDarkGrayColor,width:6,height:6,borderRadius:6,boxShadow:`0 0 0 1.5px ${e.contentBackground}`},verticalLine:{position:"absolute",..."bottom"===B?{top:-11,left:"calc(50% - 1px)",width:2,height:11}:{},..."right"===B?{top:"calc(50% - 1px)",left:-11,width:11,height:2}:{},background:s.ZP.UIDocNotificationsDarkGrayColor},popupTitle:{width:"90%",fontWeight:500,marginBottom:2},popupDescription:{opacity:.8,lineHeight:1.35},iconButtonStyle:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:s.ZP.white},dotStyle:{width:5,height:5,borderRadius:"50%",background:s.FN.dark.gray[600]},activeDotStyle:{width:5,height:5,borderRadius:"50%",background:s.FN.dark.gray[800]}})),[B,j]),q=(0,o.useCallback)((()=>(0,k.jsxs)("div",{style:L.popupContainer,children:[(0,k.jsx)("div",{style:L.circle}),(0,k.jsx)("div",{style:L.verticalLine}),(0,k.jsxs)("div",{style:L.popupTitle,children:["create_a_task"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Create a new task",id:"pmIntroTooltip.title.createATask"}),"assign_to_someone"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Assign it to someone",id:"pmIntroTooltip.title.assignToSomeone"}),"change_task_status"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Update status",id:"pmIntroTooltip.title.changeTaskStatus"}),"click_view_settings"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Configure your tasks",id:"pmIntroTooltip.title.clickViewSettings"}),"select_a_project"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Select a project",id:"pmIntroTooltip.title.selectAProject"})]}),(0,k.jsxs)("div",{style:L.popupDescription,children:["create_a_task"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Start from scratch or use the dropdown to select or create a template",id:"pmIntroTooltip.subtitle.createATask"}),"assign_to_someone"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Click to select one or multiple people",id:"pmIntroTooltip.subtitle.assignToSomeone"}),"change_task_status"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Click to change the status to ‘In progress’ or something else",id:"pmIntroTooltip.subtitle.changeTaskStatus"}),"click_view_settings"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Further configure your tasks layout, grouping, properties and more",id:"pmIntroTooltip.subtitle.clickViewSettings"}),"select_a_project"===j&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Click to add this task to a project",id:"pmIntroTooltip.subtitle.selectAProject"})]}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:8},children:[(0,k.jsx)("div",{style:"create_a_task"===j?L.activeDotStyle:L.dotStyle}),(0,k.jsx)(_.Z,{size:6}),(0,k.jsx)("div",{style:"assign_to_someone"===j?L.activeDotStyle:L.dotStyle}),(0,k.jsx)(_.Z,{size:6}),(0,k.jsx)("div",{style:"change_task_status"===j?L.activeDotStyle:L.dotStyle}),(0,k.jsx)(_.Z,{size:6}),(0,k.jsx)("div",{style:"select_a_project"===j||"click_view_settings"===j?L.activeDotStyle:L.dotStyle})]}),(0,k.jsx)(b.Z,{icon:l.U,style:L.iconButtonStyle,iconStyle:L.iconStyle,onClick:A,ariaLabel:m.default.formatMessage(C.dismissTooltip)})]})),[A,j,L.activeDotStyle,L.circle,L.dotStyle,L.iconButtonStyle,L.iconStyle,L.popupContainer,L.popupDescription,L.popupTitle,L.verticalLine]);return w.isMobile?(0,k.jsx)(k.Fragment,{children:R}):(0,k.jsxs)("div",{style:{position:"relative"},children:[R,(0,k.jsx)(S.Z,{isVisible:N,animationStyle:{opacity:1},enterAnimationStyle:{opacity:-10},exitAnimationStyle:{opacity:0},render:q})]})}},11028:(e,t,a)=>{a.d(t,{z:()=>m});var o=a(67294),n=a(24405),i=a(94308),r=a(50063),s=a(5366),l=a(97880),d=a(82990),c=a(70693),u=a(4308),g=a(53876),p=a(85893);function m(e){window.__c={n:"VerificationPropertyLabel"};const{verificationValue:t,fontSize:a=g.z6}=e,m=(0,s.useIntl)(),f=(0,o.useMemo)((()=>u.WN(t)),[t]),h=f.type,y=(0,n.yK)((e=>({icon:{width:"expired"===h?8:14,height:"expired"===h?9:14,fill:"verified"===h?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:d.Z.fontWeight.regular,color:e.regularTextColor,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:a,lineHeight:g.Ac},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[h,a]);if("none"===h)return null;let v=null,M=null;const S=y.caption;switch(h){case"verified":v=(0,i.f)({...y.icon}),M=f.isIndefinite?(0,p.jsx)(s.FormattedMessage,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,p.jsx)(s.FormattedMessage,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:c.mb({dateTime:f.dateTimeRange.end,intl:m})}});break;case"expired":v=(0,p.jsx)("div",{style:y.expiredIconContainer,children:(0,r.X)({...y.icon})}),M=(0,p.jsx)(s.FormattedMessage,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired",values:{timeFromMoment:u.kY(f.dateTimeRange.end)}});break;default:(0,l.t1)(h)}return(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,p.jsx)("div",{style:S,children:M})]})}},58230:(e,t,a)=>{a.d(t,{Z:()=>f});a(67294);var o=a(480),n=a(86628),i=a(5366),r=a(54368),s=a(77420),l=a(19889),d=a(97880),c=a(70693),u=a(35661),g=a(39111),p=a(29302),m=a(85893);function f(e){window.__c={n:"VerificationSummary"};const{isMobile:t}=(0,o.Fy)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(h,{...e})})}function h(e){window.__c={n:"VerificationSummaryMessage"};const{verificationState:t,blockStore:a}=e,o=(0,i.useIntl)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(i.FormattedMessage,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:a}),date:(0,c.mb)({dateTime:t.startDateTime,intl:o})}}):(0,m.jsx)(i.FormattedMessage,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:a}),dateTimeRange:(0,c.pe)({luxonRange:t.dateTimeRange,intl:o})}});case"expired":return(0,m.jsx)(i.FormattedMessage,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:a}),dateTimeRange:(0,c.pe)({luxonRange:t.dateTimeRange,intl:o})}});default:(0,d.t1)(t)}}function y(e){window.__c={n:"VerificationSummaryUser"};const{actorPointer:t,blockStore:a}=e,o=(0,n.VK)((()=>u.t1.createChildStore(a,t)),[a,t]),i={display:"flex",marginLeft:4,marginRight:4};return o.table===l.KJ?(0,m.jsx)(p.Z,{userStore:o,inline:!0,style:i,avatarSize:16,avatarMarginRight:4}):o.table===s.cZ?(0,m.jsx)(g.Z,{botStore:o,style:i,avatarSize:16}):o.table===r.y?(0,m.jsx)(p.Z,{userStore:void 0,inline:!0,style:i,avatarSize:16,avatarMarginRight:4}):void(0,d.t1)(o)}},49616:(e,t,a)=>{a.d(t,{Hw:()=>S,Sy:()=>v,TP:()=>w,VM:()=>y,X7:()=>_,X9:()=>x,g0:()=>k,yt:()=>b,z0:()=>M});var o=a(15145),n=a(80951),i=a(58810),r=a(17683),s=a(32240),l=a(72126),d=a(32056),c=a(97880),u=a(64002),g=a(63143),p=a(5366),m=a(78030),f=a(84210),h=a(33929);function y(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function v(e){switch(e){case m.C.Table:return"table";case m.C.Board:return"board";case m.C.ListView:return"list";case m.C.GalleryView:return"gallery";case m.C.Relation:case m.C.RelationSection:return"relation_section";case m.C.Timeline:return"timeline";case m.C.Calendar:return"calendar";case m.C.Page:return"page_properties";case m.C.CompactPage:return"compact_page";case m.C.Mini:return"mini_peek";default:(0,c.t1)(e)}}function M(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function S(e){const{store:t,property:a,propertySchema:i}=e,r=null==i?void 0:i.type;if("title"===r)return(0,f.ZP)({store:t,fullyQualified:!1,pageVisitSource:o.tY.LinkInPage});{const e=t.getPropertyValue(a);return n.Hw(r,e)}}function b(e,t){const a=n.zB(e);if("url"===t){const e=u.Qc(a).hostname;if(e)return e.replace(/^www./i,"")}return a}function _(e){const{numberValue:t,numberFormat:a,numberShowAs:o}=e;if(!(l.i2(t)||g.z4(t)||"bar"!==(null==o?void 0:o.type)&&"ring"!==(null==o?void 0:o.type))){const e=h.default.getIntl();return"percent"===a?d.uf(t,"percent",e):`${t} / ${o.maxValue}`}}function k(e){const{property:t,collectionStore:a}=e,o=a.isSyncedCollection();return Boolean(o)&&n.wl(t)}function x(e,t){switch(e){case"side_peek":return{icon:s.y,tooltip:h.default.formatMessage(C.openInSidePeekTooltip),caption:t?"":h.default.formatMessage(C.openAsPageTitle)};case"center_peek":return{icon:r.Q,tooltip:h.default.formatMessage(C.openInCenterPeekTooltip),caption:t?"":h.default.formatMessage(C.openAsPageTitle)};case"full_page":return{icon:i.Z,tooltip:h.default.formatMessage(C.openAsPageTooltip),caption:t?"":h.default.formatMessage(C.openAsPageTitle)};default:(0,c.t1)(e)}}const C=(0,p.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function w(e){const t=e.getSchema();if(t)for(const[o,n]of Object.entries(t)){var a;if(n&&"text"===n.type&&"summarize"===(null===(a=n.ai_inference)||void 0===a?void 0:a.type)){const t=e.getPropertyValue(o);if(t)return t}}}},16187:(e,t,a)=>{a.d(t,{BG:()=>y,Ol:()=>S,SD:()=>M,Sn:()=>v,VN:()=>p,v6:()=>f});var o=a(41892),n=a(2032),i=a(40506),r=a(7057),s=a(72126),l=a(32056),d=a(97880),c=a(5366),u=a(33929);const g=(0,c.defineMessages)({show_unique:{defaultMessage:"Show unique values",id:"database.aggregationFullName.unique_values"},count:{defaultMessage:"Count all",id:"database.aggregationFullName.count"},count_values:{defaultMessage:"Count values",id:"database.aggregationFullName.count_values"},unique:{defaultMessage:"Count unique values",id:"database.aggregationFullName.unique"},empty:{defaultMessage:"Count empty",id:"database.aggregationFullName.empty"},not_empty:{defaultMessage:"Count not empty",id:"database.aggregationFullName.not_empty"},percent_empty:{defaultMessage:"Percent empty",id:"database.aggregationFullName.percent_empty"},percent_not_empty:{defaultMessage:"Percent not empty",id:"database.aggregationFullName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationFullName.sum"},average:{defaultMessage:"Average",id:"database.aggregationFullName.average"},median:{defaultMessage:"Median",id:"database.aggregationFullName.median"},min:{defaultMessage:"Min",id:"database.aggregationFullName.min"},max:{defaultMessage:"Max",id:"database.aggregationFullName.max"},range:{defaultMessage:"Range",id:"database.aggregationFullName.range"},earliest_date:{defaultMessage:"Earliest date",id:"database.aggregationFullName.earliest_date"},latest_date:{defaultMessage:"Latest date",id:"database.aggregationFullName.latest_date"},date_range:{defaultMessage:"Date range",id:"database.aggregationFullName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationFullName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationFullName.unchecked"},percent_checked:{defaultMessage:"Percent checked",id:"database.aggregationFullName.percent_checked"},percent_unchecked:{defaultMessage:"Percent unchecked",id:"database.aggregationFullName.percent_unchecked"},count_per_group:{defaultMessage:"Count per group",id:"database.aggregationFullName.count_per_group"},percent_per_group:{defaultMessage:"Percent per group",id:"database.aggregationFullName.percent_per_group"}}),p={count:u.default.formatMessage(g.count),count_values:u.default.formatMessage(g.count_values),unique:u.default.formatMessage(g.unique),show_unique:u.default.formatMessage(g.show_unique),empty:u.default.formatMessage(g.empty),not_empty:u.default.formatMessage(g.not_empty),percent_empty:u.default.formatMessage(g.percent_empty),percent_not_empty:u.default.formatMessage(g.percent_not_empty),sum:u.default.formatMessage(g.sum),average:u.default.formatMessage(g.average),median:u.default.formatMessage(g.median),min:u.default.formatMessage(g.min),max:u.default.formatMessage(g.max),range:u.default.formatMessage(g.range),earliest_date:u.default.formatMessage(g.earliest_date),latest_date:u.default.formatMessage(g.latest_date),date_range:u.default.formatMessage(g.date_range),checked:u.default.formatMessage(g.checked),unchecked:u.default.formatMessage(g.unchecked),percent_checked:u.default.formatMessage(g.percent_checked),percent_unchecked:u.default.formatMessage(g.percent_unchecked),count_per_group:u.default.formatMessage(g.count_per_group),percent_per_group:u.default.formatMessage(g.percent_per_group)},m=(0,c.defineMessages)({count:{defaultMessage:"Count",id:"database.aggregationShortName.count"},count_values:{defaultMessage:"Values",id:"database.aggregationShortName.count_values"},unique:{defaultMessage:"Unique",id:"database.aggregationShortName.unique"},show_unique:{defaultMessage:"Show unique",id:"database.aggregationShortName.showUnique"},empty:{defaultMessage:"Empty",id:"database.aggregationShortName.empty"},not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.not_empty"},percent_empty:{defaultMessage:"Empty",id:"database.aggregationShortName.percent_empty"},percent_not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationShortName.sum"},average:{defaultMessage:"Average",id:"database.aggregationShortName.average"},median:{defaultMessage:"Median",id:"database.aggregationShortName.median"},min:{defaultMessage:"Min",id:"database.aggregationShortName.min"},max:{defaultMessage:"Max",id:"database.aggregationShortName.max"},range:{defaultMessage:"Range",id:"database.aggregationShortName.range"},earliest_date:{defaultMessage:"Earliest",id:"database.aggregationShortName.earliest_date"},latest_date:{defaultMessage:"Latest",id:"database.aggregationShortName.latest_date"},date_range:{defaultMessage:"Range",id:"database.aggregationShortName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationShortName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.unchecked"},percent_checked:{defaultMessage:"Checked",id:"database.aggregationShortName.percent_checked"},percent_unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.percent_unchecked"},count_per_group:{defaultMessage:"Count",id:"database.aggregationShortName.count_per_group"},percent_per_group:{defaultMessage:"Percent",id:"database.aggregationShortName.percent_per_group"}}),f={count:u.default.formatMessage(m.count),count_values:u.default.formatMessage(m.count_values),unique:u.default.formatMessage(m.unique),show_unique:u.default.formatMessage(m.show_unique),empty:u.default.formatMessage(m.empty),not_empty:u.default.formatMessage(m.not_empty),percent_empty:u.default.formatMessage(m.percent_empty),percent_not_empty:u.default.formatMessage(m.percent_not_empty),sum:u.default.formatMessage(m.sum),average:u.default.formatMessage(m.average),median:u.default.formatMessage(m.median),min:u.default.formatMessage(m.min),max:u.default.formatMessage(m.max),range:u.default.formatMessage(m.range),earliest_date:u.default.formatMessage(m.earliest_date),latest_date:u.default.formatMessage(m.latest_date),date_range:u.default.formatMessage(m.date_range),checked:u.default.formatMessage(m.checked),unchecked:u.default.formatMessage(m.unchecked),percent_checked:u.default.formatMessage(m.percent_checked),percent_unchecked:u.default.formatMessage(m.percent_unchecked),count_per_group:u.default.formatMessage(m.count_per_group),percent_per_group:u.default.formatMessage(m.percent_per_group)},h=(0,c.defineMessages)({count:{defaultMessage:"Counts the total number of pages, including blank pages.",id:"database.aggregationDescription.count"},count_values:{defaultMessage:"Counts the number of non-empty values for this property. For a type that can contain multiple values like multi-select or person, this will count the number of selected values for each page.",id:"database.aggregationDescription.count_values"},unique:{defaultMessage:"Counts the number of unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.unique"},show_unique:{defaultMessage:"Shows the unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.show_unique"},empty:{defaultMessage:"Counts the number of pages with an empty value for this property.",id:"database.aggregationDescription.empty"},not_empty:{defaultMessage:"Counts the number of pages with a non-empty value for this property.",id:"database.aggregationDescription.not_empty"},percent_empty:{defaultMessage:"Displays the percentage of pages that have an empty value for this property.",id:"database.aggregationDescription.percent_empty"},percent_not_empty:{defaultMessage:"Displays the percentage of pages that have a non-empty value for this property.",id:"database.aggregationDescription.percent_not_empty"},sum:{defaultMessage:"Computes the sum of a numeric property.",id:"database.aggregationDescription.sum"},average:{defaultMessage:"Computes the average of a numeric property.",id:"database.aggregationDescription.average"},median:{defaultMessage:"Finds the median of a numeric property.",id:"database.aggregationDescription.median"},min:{defaultMessage:"Finds the minimum of a numeric property.",id:"database.aggregationDescription.min"},max:{defaultMessage:"Finds the maximum of a numeric property.",id:"database.aggregationDescription.max"},range:{defaultMessage:"Computes the range (maximum - minimum) of a numeric property.",id:"database.aggregationDescription.range"},earliest_date:{defaultMessage:"Finds the earliest date in time of a date property.",id:"database.aggregationDescription.earliest_date"},latest_date:{defaultMessage:"Finds the latest date in time of a date property.",id:"database.aggregationDescription.latest_date"},date_range:{defaultMessage:"Computes the date range (latest date - earliest date) of a date property.",id:"database.aggregationDescription.date_range"},checked:{defaultMessage:"Counts the number of pages with a checked checkbox for this property.",id:"database.aggregationDescription.checked"},unchecked:{defaultMessage:"Counts the number of pages with an unchecked checkbox for this property.",id:"database.aggregationDescription.unchecked"},percent_checked:{defaultMessage:"Displays the percentage of pages that have a checked checkbox for this property.",id:"database.aggregationDescription.percent_checked"},percent_unchecked:{defaultMessage:"Displays the percentage of pages that have an unchecked checkbox for this property.",id:"database.aggregationDescription.percent_unchecked"},count_per_group:{defaultMessage:"Counts the total number of pages that have this Status Group.",id:"database.aggregationDescription.count_per_group"},percent_per_group:{defaultMessage:"Displays the percentage of pages that have this Status Group",id:"database.aggregationDescription.percent_per_group"}}),y={count:u.default.formatMessage(h.count),count_values:u.default.formatMessage(h.count_values),unique:u.default.formatMessage(h.unique),show_unique:u.default.formatMessage(h.show_unique),empty:u.default.formatMessage(h.empty),not_empty:u.default.formatMessage(h.not_empty),percent_empty:u.default.formatMessage(h.percent_empty),percent_not_empty:u.default.formatMessage(h.percent_not_empty),sum:u.default.formatMessage(h.sum),average:u.default.formatMessage(h.average),median:u.default.formatMessage(h.median),min:u.default.formatMessage(h.min),max:u.default.formatMessage(h.max),range:u.default.formatMessage(h.range),earliest_date:u.default.formatMessage(h.earliest_date),latest_date:u.default.formatMessage(h.latest_date),date_range:u.default.formatMessage(h.date_range),checked:u.default.formatMessage(h.checked),unchecked:u.default.formatMessage(h.unchecked),percent_checked:u.default.formatMessage(h.percent_checked),percent_unchecked:u.default.formatMessage(h.percent_unchecked),count_per_group:u.default.formatMessage(h.count_per_group),percent_per_group:u.default.formatMessage(h.percent_per_group)},v={count:o.Z.images.aggregations.countPng,count_values:o.Z.images.aggregations.countValuesPng,unique:o.Z.images.aggregations.uniquePng,show_unique:void 0,empty:o.Z.images.aggregations.emptyPng,not_empty:o.Z.images.aggregations.notEmptyPng,percent_empty:o.Z.images.aggregations.percentEmptyPng,percent_not_empty:o.Z.images.aggregations.percentNotEmptyPng,sum:o.Z.images.aggregations.sumPng,average:o.Z.images.aggregations.averagePng,median:o.Z.images.aggregations.medianPng,min:o.Z.images.aggregations.minPng,max:o.Z.images.aggregations.maxPng,range:o.Z.images.aggregations.rangePng,earliest_date:o.Z.images.aggregations.earliestDatePng,latest_date:o.Z.images.aggregations.latestDatePng,date_range:o.Z.images.aggregations.dateRangePng,checked:o.Z.images.aggregations.checkedPng,unchecked:o.Z.images.aggregations.uncheckedPng,percent_checked:o.Z.images.aggregations.percentCheckedPng,percent_unchecked:o.Z.images.aggregations.percentUncheckedPng,count_per_group:o.Z.images.aggregations.countPng,percent_per_group:o.Z.images.aggregations.percentCheckedPng};function M(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"earliest_date":case"date_range":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":return"percent";case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return"number";case"sum":case"average":case"median":case"min":case"max":case"range":return t??"number";default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return"percent";default:(0,d.t1)(e.operator)}}}function S(e){const{aggregationType:t,value:a,userTimeZone:o,dateFormat:d,roundDecimal:c}=e;if("date"===a.type){if(!(0,n.Fw)(t))return;if(!a.value)return;return"date_range"===t?(0,r.LU)(a.value,o,u.default.getIntl()):(0,r.ZV)({value:i.QD(a.value),date_format:d??i.sF,userTimeZone:o,allowRelativeDates:!0,intl:u.default.getIntl()})}if((0,n.Fw)(t))return;if("show_unique"===t)return;if("object"==typeof a.value)return;if("string"==typeof a.value)return a.value;const g=void 0===a.value?void 0:s.NM(a.value,c),p=M(t,e.numberFormat);return(0,l.uf)(g,p,u.default.getIntl())}},73807:(e,t,a)=>{a.d(t,{_:()=>i});var o=a(86628),n=a(77080);function i(){return(0,o.VK)((()=>n.default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")),[])}},55535:(e,t,a)=>{a.d(t,{W:()=>r,Z:()=>l});var o=a(67294),n=a(51077),i=a(85893);const r=16;function s(e){let{icon:t,style:a,size:o=r}=e;return(0,i.jsx)(n.Z,{type:"notion_icon",size:o,icon:`/icons/${t}_lightgray.svg`,largeIcon:!0,style:a})}const l=o.memo(s)},72395:(e,t,a)=>{a.d(t,{B:()=>l,Z:()=>c});var o=a(67294),n=a(24405),i=a(82990),r=a(55535),s=a(85893);const l=16;function d(e){let{children:t,title:a,icon:d,panelStyle:c,headerStyle:u,actions:g,right:p}=e;window.__c={n:"PersonalHomePanelPreview"};const[m,f]=(0,o.useState)(!1),h=(0,n.yK)((e=>{const t=`0 0 0 1px ${e.personalHomeTileBorder}`;return{panel:{zIndex:1,position:"relative",width:"100%",display:"flex",flexDirection:"column",background:e.personalHomeTileBackground,borderRadius:6,padding:l,paddingBottom:20,boxShadow:"dark"===e.mode?t:`${t}, 0 12px 40px rgba(0, 0, 0, 0.025)`,...c},headerContainer:{flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center",height:44,marginTop:-l,...u},panelTitleAndIcon:{display:"flex",alignItems:"center",fontSize:i.Z.fontSize.UISmall.desktop,fontWeight:i.Z.fontWeight.medium,color:e.text.secondary,...i.Z.textOverflowStyle},panelIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:r.W,height:r.W,marginRight:8,marginTop:1},actions:{display:"flex",flexDirection:"row",paddingLeft:6,opacity:m?1:0,transition:"opacity 200ms ease-in"},right:{opacity:m?1:0,transition:"opacity 200ms ease-in"}}}),[u,c,m]);return(0,s.jsxs)("div",{style:h.panel,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[(0,s.jsxs)("div",{style:h.headerContainer,children:[(0,s.jsxs)("div",{style:h.panelTitleAndIcon,children:[(0,s.jsx)("div",{style:h.panelIconContainer,children:d}),a,(0,s.jsx)("span",{style:h.actions,children:g})]}),(0,s.jsx)("div",{style:h.right,children:p})]}),t]})}const c=o.memo(d)},86098:(e,t,a)=>{a.d(t,{Z:()=>i});var o=a(35431);class n extends o.Z{findRow(e,t,a){return this.find((o=>o.props.relatedPageStore.id===e&&o.props.rowType===t&&o.props.property===a))}}const i=new n},79576:(e,t,a)=>{a.d(t,{W:()=>r});var o=a(49085),n=a(4615);class i extends o.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:a,stores:o,sessionIdForAnalytics:i}=e,r=o[0].getParentCollectionId()??(null===(t=o[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),s=i||(0,n.ZP)();return this.setState({type:"filling",propertySchema:a,collectionId:r,numBlocksToAutofill:o.length,numBlocksAutofilled:0,sessionId:s,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),s}}const r=new i},96620:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(49085),n=a(70203);class i extends o.default{getInitialState(){return{textStoresBeingEdited:[],lastBlockPropertyValueOverlayCloseTime:void 0}}getNumberOfTextStoresBeingEdited(){return this.state.textStoresBeingEdited.length}textStoresWithEmptyProperty(e){return this.state.textStoresBeingEdited.filter((t=>{const a=t.getPropertyValue(e);return""===n.QaF(a)}))}}const r=i},50063:(e,t,a)=>{a.d(t,{X:()=>i});a(67294);var o=a(45238),n=a(85893);const i=(0,o.I)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},70693:(e,t,a)=>{a.d(t,{mb:()=>s,nK:()=>l,pe:()=>d});var o=a(40506),n=a(7057),i=a(53877),r=a(42875);function s(e){const{dateTime:t,intl:a,shortenDateAndRange:o}=e,r=i.OQ.toPersistedDate(t.valueOf());return n.ZV({value:r,allowRelativeDates:!0,intl:a,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:a,userTimeZone:o,displayInUserTimezone:r,alwaysIncludeTimezone:s}=e,l=i.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return n.ZV({value:l,allowRelativeDates:!0,intl:a,userTimeZone:o,displayInUserTimezone:r,alwaysIncludeTimezone:s})}function d(e){const{luxonRange:t,intl:a}=e,s=i.OQ.toPersistedDateRange(t),l=n.ZV({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:a,displayInUserTimezone:!0}),d=t.end.setZone((0,r.r)()),c=n.mr({start_time:d.toFormat(o.jK),humanReadable:!1,intl:a});return a.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:c})}}}]);