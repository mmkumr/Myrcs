"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2721],{66653:(e,t,i)=>{i.d(t,{Z:()=>f});i(67294);var n=i(83355),s=i(40506),r=i(53877),o=i(84795),a=i(72126),d=i(97880),l=i(5366),p=i(17335),u=i(48141),h=i(67950),c=i(74194),g=i(68894),v=i(26388),m=i(85893);class y extends n.Z{constructor(){super(...arguments),this.storeTypes={store:h.Z},this.renderInput=()=>{const{device:e}=this.environment,{store:t,hideClearButton:i,focused:n,value:s,...r}=this.props,o=e.isMobile&&"relative"!==(null==s?void 0:s.type)?"date":"text",a="date"===o?c.Z.Format.Transparent:c.Z.Format.Large,d=e.isMobile?void 0:n;return(0,m.jsx)(g.ZP,{...r,type:o,format:a,left:this.renderMobilePlaceholder(o),showClearButton:this.showClearButton(),focus:d,onFocus:this.handleFocus,onClearButtonClick:this.handleClear,onChange:this.handleChange,onSubmit:this.handleSubmit,onBlur:this.handleBlur,value:this.getInputValue(),disableInput:"relative"===(null==s?void 0:s.type),...this.getInputStyles()})},this.handleFocus=e=>{const{onFocus:t}=this.props,{store:i}=this.stores;i.setState({...i.state,edited:!1}),t&&t(e)},this.handleClear=()=>{const{onClearButtonClick:e,onUpdate:t}=this.props,{store:i}=this.stores;i.setState({...i.state,edited:!0,temporary:"",error:void 0});const n=this.validateCurrent();n&&t(n),i.setState({...i.state,edited:!1}),e&&e()},this.handleChange=e=>{const{device:t}=this.environment,{store:i}=this.stores;i.setState({...i.state,edited:!0,temporary:e.target.value||""}),t.isAndroid&&this.handleBlur()},this.handleSubmit=e=>{const{onUpdate:t,onSubmit:i}=this.props,{store:n}=this.stores,s=this.validateCurrent();s&&(t(s),s.error?n.setState({...n.state,edited:!1,error:s.error}):n.reset()),i&&i(e,s)},this.handleBlur=e=>{const{onUpdate:t,onBlur:i}=this.props,{store:n}=this.stores,s=this.validateCurrent();s?(t(s),s.error?n.setState({...n.state,edited:!1,error:s.error}):n.reset()):n.setState({...n.state,edited:!1}),e&&i&&i(e)},this.styles={menuItem:{marginBottom:this.environment.device.isMobile?1:8},inputWrapper:{borderRadius:3,height:28,paddingRight:this.showClearButton()?8:0,position:"relative"},inputEditRegion:{width:this.showClearButton()?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"},placeholder:{position:"absolute",left:this.environment.device.isIpad?26:12,top:this.environment.device.isIpad?void 0:"50%",transform:"translateY(-50%)"},tooltipOriginGap:-8}}didUpdate(e){const{store:t}=this.stores;a.Xy(e.value,this.props.value)||t.reset()}renderComponent(){const e=this.styles,t=this.getError();return t?(0,m.jsx)(v.Z,{renderTooltip:()=>t,forceVisibleState:!0,placement:v.Z.Placement.Left,render:this.renderInput,originGap:e.tooltipOriginGap}):this.renderInput()}getDateFormat(){const{device:e}=this.environment;return e.isMobile?"YYYY-MM-DD":this.props.desktopDateFormat??s.sF}renderMobilePlaceholder(e){const{placeholder:t,value:i}=this.props,n=this.styles,s=this.getThemeColors();if("date"===e&&!i)return(0,m.jsx)("div",{style:{...n.placeholder,...s.placeholder},children:t})}getInputValue(){const{device:e}=this.environment,{value:t,intl:i}=this.props,{store:n}=this.stores;if(t&&"relative"===t.type)return(0,p.x)(t);const s=t&&"date"!==t.type?r.Id(t):t;return e.isMobile?s?u.p6(s,i,this.getDateFormat()):"":n.state.temporary||n.state.edited?n.state.temporary:s?u.p6(s,i,this.getDateFormat()):""}getError(){const{store:e}=this.stores,{intl:t}=this.props;if(e.state.error)switch(e.state.error){case h.B.INVALID_DATE:return t.formatMessage({id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"});case h.B.INVALID_RANGE:return t.formatMessage({id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"});default:(0,d.t1)(e.state.error)}}validateCurrent(){const{validate:e}=this.props,t=this.parseCurrentValue();if(t)return e?e(t):t}parseCurrentValue(){const{store:e}=this.stores;if(!e.state.edited)return;if(!e.state.temporary)return{value:void 0};const t=(0,o.parseDateValueWithInputFormat)(e.state.temporary,this.environment.device.isMobile?r.Iq:this.getDateFormat(),this.props.intl);return t?{value:{type:"date",start_date:t}}:{error:h.B.INVALID_DATE}}showClearButton(){const{device:e}=this.environment,{hideClearButton:t}=this.props;return!!e.isMobile||!t}getInputStyles(){const{device:e}=this.environment,{inputStyle:t,inputOuterStyle:i,style:n}=this.props,s=this.styles;return{style:{...s.menuItem,...n,marginRight:0},inputOuterStyle:{...this.getInputBorders(),...s.inputWrapper,...i},inputStyle:{...s.inputEditRegion,...e.isMobile&&s.inputEditRegionMobile,...t}}}getInputBorders(){const{disabled:e,focused:t}=this.props,i=this.getThemeColors(),n=this.getError();if(!e)return n?i.inputError:t?i.inputFocused:i.inputDefault}getThemeColors(){return{inputDefault:{background:this.theme.inputBackground,boxShadow:this.theme.inputBoxShadow},inputFocused:{background:this.theme.inputBackground,boxShadow:this.theme.outlineBlueInputBoxShadow},inputError:{background:this.theme.inputBackground,boxShadow:this.theme.outlineRedInputBoxShadow},placeholder:{color:this.theme.lightTextColor}}}}y.displayName="DateInputMenuItem";const f=(0,l.injectIntl)(y)},41209:(e,t,i)=>{i.d(t,{Z:()=>v});i(67294);var n=i(480),s=i(76205),r=i(17335),o=i(33929),a=i(87279),d=i(52275),l=i(31945),p=i(78140),u=i(32163),h=i(53437),c=i(72495),g=i(85893);function v(e){window.__c={n:"DateOrRangeFilterOperatorValueMenu"};const{filterValue:t,renderOrigin:i,buttonPopupStore:v}=e,m=(0,n.O7)(),y=e=>"relative"===e.filter.type&&"custom"===e.filter.value?o.default.formatMessage(r.HL[e.filter.value]):"date"===e.type?(0,r.x)(e.filter):(0,r.ip)(e.filter);return(0,g.jsx)(l.ZP,{popupType:m.device.isMobile?h.kQ.SlideUp:h.kQ.Popup,buttonPopupStore:v,render:()=>{let i;i=m.device.isMobile?{menuType:a.og.ActionSheet}:{menuType:a.og.Popup};const n="date"===e.type?(()=>{const e=s.tO;return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((i=>({key:"relative"===i.type?i.value:i.type,render:e=>(0,g.jsx)(d.Z,{...e,title:y({type:"date",filter:i}),checkState:i.type===t.type&&(void 0===i.value||i.value===t.value)}),action:()=>{e.onUpdate(i),v.setState({open:!1})}}))):(()=>{const e=(0,s.v8)();return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((i=>({key:(0,s.eX)(i),render:e=>(0,g.jsx)(d.Z,{...e,title:y({type:"daterange",filter:i}),checkState:i.type===t.type&&(void 0===i.value||i.value===t.value)}),action:()=>{e.onUpdate(i),v.setState({open:!1})}})));return(0,g.jsx)(p.Z,{...i,children:(0,g.jsx)(u.Z,{type:u.i.Vertical,sections:[{key:"filterOperators",render:e=>(0,g.jsx)(c.Z,{disableMobilePadding:!0,...e}),items:n}],initialFocus:void 0})})},renderOrigin:i,style:{width:240},originGap:2,placementToOrigin:l.pO.Bottom,alignmentToOrigin:l.vR.Center,disabled:e.disabled})}},83264:(e,t,i)=>{i.d(t,{Z:()=>w});i(67294);var n=i(83355),s=i(76205),r=i(53877),o=i(42875),a=i(97880),d=i(5366),l=i(28020),p=i(33929),u=i(87279),h=i(48141),c=i(67950),g=i(41558),v=i(78140),m=i(40721),y=i(72495),f=i(64369),S=i(66653),x=i(41209),b=i(46945),D=i(14390),M=i(85893);const k=(0,d.defineMessages)({startingMessage:{defaultMessage:"Starting",id:"search.dateRangeMenu.startingMessage"},endingMessage:{defaultMessage:"Ending",id:"search.dateRangeMenu.endingMessage"}});class C extends n.Z{constructor(){super(...arguments),this.storeTypes={store:g.Z},this.renderInputs=()=>{const{value:e,relativeRangePopupStore:t,onUpdateRelativeFilter:i}=this.props;if(t&&i){const n="type"in e?e:{type:"exact",value:void 0};return(0,M.jsx)(x.Z,{type:"daterange",filterValue:n,onUpdate:i,renderOrigin:e=>"exact"===n.type?this.renderStartEnd(e):"relative"!==n.type||"surrounding"!==n.value&&"custom"!==n.value?void 0:this.renderRelativePicker(e,i,n),disabled:"exact"===n.type,buttonPopupStore:t})}return this.renderStartEnd()},this.renderRelativePicker=(e,t,i)=>(0,M.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:this.environment.device.isMobile?"wrap":void 0,marginBottom:12},children:(0,M.jsx)("div",{style:{width:"92%",marginLeft:10,marginRight:10},children:(0,M.jsx)(D.b,{onUpdate:t,filter:i})})}),this.renderStartEnd=e=>{const{value:t,disabled:i,allowRelativeRangeFilter:n}=this.props,{store:s}=this.stores,r=s.getFocus(),o=this.getRangeBounds(),a="type"in t?{starting:void 0,ending:void 0}:t;return(0,M.jsxs)("div",{...e,style:{display:"flex",flexDirection:n&&!this.environment.device.isMobile?"row":"column",alignItems:"center",width:this.environment.device.isMobile?void 0:280},children:[(0,M.jsx)(S.Z,{disabled:i,placeholder:this.environment.device.isMobile?void 0:p.default.formatMessage(k.startingMessage),focused:"starting"===r,value:a.starting,validate:this.validateStart,onUpdate:this.handleUpdateStart,onFocus:()=>this.handleFocus("starting"),onSubmit:this.handleStartSubmit,inputElementAttributes:o?{max:o.latestValidStarting}:void 0,inputOuterStyle:this.styles.firstDateInput,textWrapperStyle:n&&!this.environment.device.isMobile?{marginRight:2}:{},desktopDateFormat:n?"YYYY/MM/DD":void 0}),(0,M.jsx)(S.Z,{disabled:i,placeholder:this.environment.device.isMobile?void 0:p.default.formatMessage(k.endingMessage),focused:"ending"===r,value:a.ending,validate:this.validateEnd,onUpdate:this.handleUpdateEnd,onFocus:()=>this.handleFocus("ending"),onSubmit:this.handleEndSubmit,inputElementAttributes:o?{min:o.earliestValidEnding}:void 0,textWrapperStyle:n&&!this.environment.device.isMobile?{marginLeft:2}:{},desktopDateFormat:n?"YYYY/MM/DD":void 0})]})},this.renderCalendar=()=>{const{device:e}=this.environment,{value:t,onUpdate:i}=this.props,{store:n}=this.stores,s=this.styles,r=this.getThemeColors(),o={...s.pickerSection,...e.isMobile&&s.pickerSectionMobile,...e.isMobile&&r.pickerSectionMobile},a="type"in t?this.convertToDateRangeFilter(t):t;return(0,M.jsx)(y.Z,{style:s.calendarWrapper,children:(0,M.jsxs)("div",{style:o,children:[(0,M.jsx)(b.Z,{value:a,store:n,onUpdate:i,validate:this.validateField,readonly:"type"in t}),"type"in t&&(0,M.jsx)(f.Z,{isSmall:!0,style:{marginLeft:4,marginTop:4},children:(0,M.jsx)(d.FormattedMessage,{id:"collectionFilterMenu.dateRangeFilter.relativeDateRangeFilter.description",defaultMessage:"Filter will update with the current date"})})]})})},this.handleFocus=e=>{const{store:t}=this.stores;t.setState({...t.state,focus:e})},this.handleUpdateStart=e=>{const{onUpdate:t}=this.props;e.error||t({value:{starting:e.value}})},this.handleUpdateEnd=e=>{const{onUpdate:t}=this.props;e.error||t({value:{ending:e.value}})},this.handleStartSubmit=(e,t)=>{const{store:i}=this.stores;t&&t.error||i.setState({...i.state,focus:"ending"})},this.handleEndSubmit=(e,t)=>{const{onDismiss:i}=this.props;t&&t.error||i&&i(e)},this.validateStart=e=>{const t=this.validateField("starting",e);return t.error?t:{value:t.value.starting}},this.validateEnd=e=>{const t=this.validateField("ending",e);return t.error?t:{value:t.value.ending}},this.validateField=(e,t)=>{const{value:i}=this.props;if("type"in i)return{value:{starting:void 0,ending:void 0}};if(t.error)return t;const n=t.value&&"date"!==t.value.type?r.Id(t.value):t.value;return this.validateRange({...i,[e]:n})},this.validateRange=e=>{if(e.starting&&e.ending){const t=r.OQ.notionDateToLuxon(e.starting);return r.OQ.notionDateToLuxon(e.ending)>=t?{value:e}:{error:c.B.INVALID_RANGE}}return{value:e}},this.getMenuProps=()=>{const{device:e}=this.environment,{onDismiss:t,title:i}=this.props;if(e.isMobile){return{menuType:u.og.Modal,title:i,right:(0,M.jsx)(m.DoneMenuText,{}),onClickRight:t,header:this.renderInputs()}}return{menuType:u.og.Popup,onClickOutside:t}},this.styles={calendarWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},firstDateInput:{marginTop:2}}}renderComponent(){const{disableMenuWrap:e,hideDateInputMenuItems:t}=this.props,{device:i}=this.environment;return e?(0,M.jsxs)(M.Fragment,{children:[!t&&this.renderInputs(),this.renderCalendar()]}):(0,M.jsxs)(v.Z,{...this.getMenuProps(),children:[!i.isMobile&&!t&&this.renderInputs(),this.renderCalendar()]})}convertToDateRangeFilter(e){return"custom"===e.value?this.calculateDateRangeFromCustomRelativeFilter(e.direction,e.count,e.unit):"surrounding"===e.value?this.calculateDateRangeFromSurroundingRelativeFilter(e.unit):this.convertToDateRangeFilterLegacy(e)}convertToDateRangeFilterLegacy(e){switch(e.value){case"this_week":return{starting:this.startOfWeek((0,o.r)()),ending:this.endOfWeek((0,o.r)())};case"the_past_month":return{starting:r.dj((0,o.r)()),ending:r.Lg((0,o.r)())};case"the_past_week":return{starting:r.Oo((0,o.r)()),ending:r.Lg((0,o.r)())};case"the_past_year":return{starting:r.b8((0,o.r)()),ending:r.Lg((0,o.r)())};case"the_next_month":return{starting:r.Lg((0,o.r)()),ending:r.nD((0,o.r)())};case"the_next_week":return{starting:r.Lg((0,o.r)()),ending:r.Kq((0,o.r)())};case"the_next_year":return{starting:r.Lg((0,o.r)()),ending:r.NJ((0,o.r)())};default:(0,a.t1)(e)}}calculateDateRangeFromSurroundingRelativeFilter(e){const{start:t,end:i}=(0,s.je)(e,(0,o.r)(),l.AK.state);return{starting:r.ME(t),ending:r.ME(i)}}calculateDateRangeFromCustomRelativeFilter(e,t,i){const n=(0,s.Fo)(e,t,i,(0,o.r)());switch(e){case"past":return{starting:r.ME(n),ending:r.Lg((0,o.r)())};case"future":return{starting:r.Lg((0,o.r)()),ending:r.ME(n)};default:(0,a.t1)(e)}}getRangeBounds(){const{value:e,intl:t}=this.props;if("type"in e)return;return{earliestValidEnding:e.starting&&h.p6(e.starting,t,"YYYY-MM-DD"),latestValidStarting:e.ending&&h.p6(e.ending,t,"YYYY-MM-DD")}}startOfWeek(e){return{type:"date",start_date:r.em(Date.now(),r.aN(),e).toFormat(r.Iq)}}endOfWeek(e){return{type:"date",start_date:r.gQ(Date.now(),r.aN(),e).toFormat(r.Iq)}}getThemeColors(){return{pickerSectionMobile:{background:this.theme.popoverBackground,boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,marginBottom:1}}}}C.displayName="DateRangeMenu";const w=(0,d.injectIntl)(C)},46945:(e,t,i)=>{i.d(t,{Z:()=>g});i(67294);var n=i(83355),s=i(13991),r=i(8848),o=i(53877),a=i(42875),d=i(82990),l=i(28020),p=i(77907),u=i(13854),h=i(85893);class c extends n.Z{constructor(){super(...arguments),this.currentDate=void 0,this.handleDayClick=e=>{const{disabled:t,store:i,dateTimeStore:n,value:s,validate:r,onUpdate:a,readonly:d}=this.props;if(t||d)return;const l=i.getFocus(),p=r(l,{value:o.OQ.toPersistedDate(e.valueOf())});if(a(p.error?p:{value:{[l]:p.value[l]}}),i.setState({...i.state,hovered:void 0}),n&&n.setState({...n.state,hovered:void 0}),p.error)return;"starting"!==l||s.ending||(i.setState({...i.state,focus:"ending"}),n&&n.setState({...n.state,focus:u.yO.ending}));const h="starting"===l?"ending":"starting";i.setState({...i.state,focus:h}),n&&n.setState({...n.state,focus:u.yO[h]})},this.handleDayMouseEnter=e=>{const{disabled:t,store:i,dateTimeStore:n,value:s,readonly:r}=this.props,a=i.getFocus(),d=o.OQ.jsDateToLuxon(e);if(!t&&!r)if("starting"===a&&s.ending&&!s.starting){o.OQ.notionDateToLuxon(s.ending)>=d&&(i.setState({...i.state,hovered:e}),n&&n.setState({...n.state,hovered:e}))}else if("ending"===a&&s.starting&&!s.ending){o.OQ.notionDateToLuxon(s.starting)<=d&&(i.setState({...i.state,hovered:e}),n&&n.setState({...n.state,hovered:e}))}},this.handleMonthChange=e=>{const{store:t,dateTimeStore:i}=this.props;t.setState({...t.state,displayMonth:o.OQ.jsDateToLuxon(e)}),i&&i.setState({...i.state,displayMonth:o.OQ.jsDateToLuxon(e)})},this.styles={monthControl:{position:"absolute",top:0,right:0,display:"flex"},selectedRange:{backgroundColor:r.ZP.blueWithAlpha(.15)},active:{backgroundColor:r.ZP.blue,color:r.ZP.white},inactive:{backgroundColor:r.ZP.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:d.Z.fontWeight.regular}}}renderComponent(){const{readonly:e}=this.props,t=this.getDisplayMonth();return(0,h.jsx)(p.LazyDayPicker,{className:"notion-calendar-picker",defaultMonth:t,month:t,numberOfMonths:1,weekStartsOn:this.getFirstDayOfWeek(),locale:s.SP,showOutsideDays:!0,fixedWeeks:!0,onDayClick:this.handleDayClick,onDayMouseEnter:this.handleDayMouseEnter,onMonthSelected:this.handleMonthChange,modifiers:this.getModifiers(),modifiersStyles:this.getModifiersStyles(),disabled:!!e||void 0})}getCurrentDate(){if(!this.currentDate){const e=o.Lg((0,a.r)());this.currentDate=o.OQ.notionDateToJsDate(e)}return this.currentDate}getDisplayMonth(){const{value:e,store:t}=this.props;if(t.state.displayMonth)return t.state.displayMonth.toJSDate();if("starting"===t.getFocus()){if(e.starting)return o.OQ.notionDateToJsDate(e.starting);if(e.ending)return o.OQ.notionDateToJsDate(e.ending)}if("ending"===t.getFocus()){if(e.ending)return o.OQ.notionDateToJsDate(e.ending);if(e.starting)return o.OQ.notionDateToJsDate(e.starting)}return this.getCurrentDate()}getFirstDayOfWeek(){return l.AK.state}getModifiers(){const{store:e,disabled:t,value:i}=this.props,n=this.getDisabledModifier(),{hovered:s}=e.state;if(t)return{disabled:n};if(i.starting&&i.ending){const e=o.OQ.notionDateToJsDate(i.starting),t=o.OQ.notionDateToJsDate(i.ending);return{range:{from:e,to:t},start:e,end:t,disabled:n}}if(i.starting){const e=o.OQ.notionDateToJsDate(i.starting);return{range:s&&{from:e,to:s},start:e,end:s,disabled:n,selected:[e,s]}}if(i.ending){const e=o.OQ.notionDateToJsDate(i.ending);return{range:s&&{from:s,to:e},start:s,end:e,disabled:n,selected:[e,s]}}}getDisabledModifier(){const{value:e,disabled:t,store:i}=this.props;if(t)return e=>!0;const n=e=>"ending"===i.getFocus()&&{before:e},s=e=>"starting"===i.getFocus()&&{after:e};if(e.starting&&e.ending){const t=o.OQ.notionDateToJsDate(e.starting),i=o.OQ.notionDateToJsDate(e.ending);return n(t)||s(i)}if(e.starting){return n(o.OQ.notionDateToJsDate(e.starting))}if(e.ending){return s(o.OQ.notionDateToJsDate(e.ending))}return!1}getModifiersStyles(){const{store:e}=this.props,t=this.styles,i=this.getThemeColors(),n=e.getFocus(),s=t.selectedRange,r={...t.disabled,...i.disabled},o={...t.today,...i.today};return{range:s,start:"starting"===n?t.active:t.inactive,end:"ending"===n?t.active:t.inactive,disabled:r,today:o}}getThemeColors(){return{disabled:{color:this.theme.lightTextColor},today:{color:r.ZP.white}}}}c.displayName="DateRangePicker";const g=c},62045:(e,t,i)=>{i.d(t,{Z:()=>u});i(67294);var n=i(83355),s=i(8848),r=i(42853),o=i(52275),a=i(8982),d=i(63296),l=i(85893);class p extends n.Z{constructor(){super(...arguments),this.handleClick=()=>{this.props.onClick&&this.props.onClick()}}renderComponent(){const{device:e}=this.environment,t=Boolean(this.props.title);if(e.isMobile)return(0,l.jsx)(o.Z,{showExtensionArrow:!this.props.disabled,focused:!1,title:t?(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",...this.props.innerStyle},children:this.props.title}):(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",color:s.ZP.uiGray,...this.props.innerStyle},children:this.props.placeholder}),onClick:this.props.onClick});{const e="dark"===this.theme.mode?this.theme.lightTextColor:this.theme.mediumTextColor;return(0,l.jsx)(a.i,{action:this.handleClick,disabled:this.props.disabled,render:i=>(0,l.jsxs)(d.Z,{...i,hovered:i.focused,isLarge:!0,backgroundColor:this.theme.buttonBackground,style:{marginRight:8,maxWidth:180,padding:"0 8px",...i.disabled&&{opacity:.5},...this.props.disableMargins&&{marginRight:0,maxWidth:"100%",justifyContent:"space-between"},...this.props.desktopStyle},children:[(0,l.jsx)("div",{style:{display:"flex",minWidth:0,color:t?this.theme.regularTextColor:e,...this.props.innerStyle},children:t?this.props.title:this.props.placeholder}),!this.props.disabled&&(0,r.i)({width:10,marginLeft:6,fill:this.theme.lightIconColor})]})})}}}p.displayName="QueryMenuDropdownItem";const u=p},14390:(e,t,i)=>{i.d(t,{b:()=>w});i(67294);var n=i(480),s=i(86628),r=i(24405),o=i(42853),a=i(5366),d=i(63143),l=i(17335),p=i(33929),u=i(87279),h=i(61766),c=i(52275),g=i(31945),v=i(73063),m=i(68894),y=i(78140),f=i(32163),S=i(63296),x=i(53437),b=i(72495),D=i(64369),M=i(62045),k=i(85893);function C(e){window.__c={n:"DateRangePickerButton"};const{humanReadableLabel:t,placeholder:i,outlineButtonStyle:n,buttonWrapperStyle:s,renderAsQueryDropdown:a,events:d,isMobile:l}=e,p=(0,r.yK)((e=>({iconStyle:{...!l&&{height:12,width:12},color:e.mediumIconColor},textStyle:{marginLeft:6,color:e.regularTextColor}})),[l]);return a?(0,k.jsx)(M.Z,{...d,placeholder:i,title:(0,k.jsx)(D.Z,{isMobile:l,children:t}),disableMargins:!0}):(0,k.jsx)("div",{style:s,...d,children:(0,k.jsxs)(S.Z,{isLarge:l,style:n,children:[(0,k.jsx)("div",{style:p.textStyle,children:t}),(0,k.jsx)(v.Z,{disableBackground:!0,icon:o.i,iconStyle:p.iconStyle})]})})}function w(e){window.__c={n:"RelativeDateRangePicker"};const{onUpdate:t,filter:i,renderAsQueryDropdown:o}=e,v=(0,n.Fy)(),S=(0,a.useIntl)(),D=(0,s.qz)(void 0,h.Z),M=(0,s.qz)(void 0,h.Z),w="count"in i,T=(0,r.yK)((e=>({directionButtonStyle:{paddingLeft:4,paddingRight:4,minWidth:70,justifyContent:"space-between",...v.isMobile&&{marginTop:12,width:"100%",paddingLeft:12,marginBottom:6},...!w&&{marginRight:4}},unitButtonStyle:{paddingLeft:4,paddingRight:4,minWidth:90,justifyContent:"space-between",width:"100%",...v.isMobile&&{paddingLeft:12,marginTop:6}},directionButtonWrapperStyle:{...v.isMobile&&{width:"100%"},flexGrow:0},unitButtonWrapperStyle:{...v.isMobile&&{width:"100%"},flexGrow:2},inputStyle:{minWidth:35,height:16},inputOuterStyle:{minWidth:60,height:32},container:{display:"flex",justifyContent:"start",alignItems:"center",flexDirection:v.isMobile?"column":"row",width:"100%"},textWrapper:{marginRight:6,marginLeft:o?16:6}})),[v.isMobile,o,w]);function R(e){return"this"===e?p.default.formatMessage(l.Fc[e]):p.default.formatMessage(l.Sj[e])}function I(e,t){return t&&t>1?p.default.formatMessage(l.D0[e]):p.default.formatMessage(l.Sb[e])}const F=["day","week","month","year"].map((e=>({key:e,render:t=>(0,k.jsx)(c.Z,{...t,title:I(e,w?i.count:void 0),checkState:e===i.unit}),action:n=>{t({...i,unit:e}),D.setState({open:!1})}}))),j=["past","future","this"].map((e=>({key:e,render:t=>(0,k.jsx)(c.Z,{...t,checkState:"surrounding"===i.value?"this"===e:e===i.direction,title:R(e)}),action:n=>{"this"===e&&"custom"===i.value?t({type:"relative",value:"surrounding",unit:i.unit}):"this"!==e&&"surrounding"===i.value?t({type:"relative",value:"custom",count:1,direction:e,unit:i.unit}):"this"!==e&&"custom"===i.value&&t({...i,direction:e}),M.setState({open:!1})}})));return(0,k.jsxs)("div",{style:T.container,children:[(0,k.jsx)(g.ZP,{buttonPopupStore:M,popupType:v.isMobile?x.kQ.SlideUp:x.kQ.Popup,renderOrigin:e=>(0,k.jsx)(C,{events:e,placeholder:S.formatMessage(l.$7.direction),renderAsQueryDropdown:o,isMobile:v.isMobile,outlineButtonStyle:T.directionButtonStyle,buttonWrapperStyle:T.directionButtonWrapperStyle,humanReadableLabel:R("direction"in i?i.direction:"this")}),render:()=>(0,k.jsx)(y.Z,{menuType:v.isMobile?u.og.ActionSheet:u.og.Popup,children:(0,k.jsx)(f.Z,{initialFocus:void 0,type:f.i.Vertical,sections:[{key:"directionOptions",render:e=>(0,k.jsx)(b.Z,{disableMobilePadding:!0,...e}),items:j}]})})}),w&&(0,k.jsx)(m.ZP,{type:"number",style:T.inputStyle,textWrapperStyle:T.textWrapper,inputOuterStyle:T.inputOuterStyle,min:"1",value:i.count.toString(),onChange:e=>{const n=parseInt(e.target.value);!(0,d.hj)(n)||n<1||t({...i,count:n})}}),(0,k.jsx)(g.ZP,{buttonPopupStore:D,popupType:v.isMobile?x.kQ.SlideUp:x.kQ.Popup,renderOrigin:e=>(0,k.jsx)(C,{events:e,placeholder:S.formatMessage(l.$7.unit),renderAsQueryDropdown:o,isMobile:v.isMobile,outlineButtonStyle:T.unitButtonStyle,buttonWrapperStyle:T.unitButtonWrapperStyle,humanReadableLabel:I(i.unit,"count"in i?i.count:void 0)}),render:()=>(0,k.jsx)(y.Z,{menuType:v.isMobile?u.og.ActionSheet:u.og.Popup,children:(0,k.jsx)(f.Z,{initialFocus:void 0,type:f.i.Vertical,sections:[{key:"unitOptions",render:e=>(0,k.jsx)(b.Z,{disableMobilePadding:!0,...e}),items:F}]})})})]})}},47082:(e,t,i)=>{i.d(t,{Z:()=>S});i(67294);var n=i(83355),s=i(53465),r=i(72126),o=i(87279),a=i(98742),d=i(34859),l=i(64113),p=i(64921),u=i(37601),h=i(74194),c=i(3386),g=i(53336),v=i(64369),m=i(85893),y=function(e){return e[e.Select=0]="Select",e[e.Person=1]="Person",e[e.Relation=2]="Relation",e[e.FilterValue=3]="FilterValue",e[e.Share=4]="Share",e[e.Group=5]="Group",e}(y||{});class f extends n.Z{constructor(){super(...arguments),this.storeTypes={store:l.Z},this.handleFocused=()=>{this.stores.store.setState({focused:!0})},this.handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleKeyDown=e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken(),this.props.onKeyDown&&this.props.onKeyDown(e)},this.handleSubmit=e=>{0===this.props.value.length&&this.props.onEmptySubmit&&this.props.onEmptySubmit(),this.props.onSubmit&&this.props.onSubmit(e)},this.handleContainerClick=()=>{var e,t;this.props.disabled||(this.input.focusInput(),null===(e=(t=this.props).onClick)||void 0===e||e.call(t))}}willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:e}=this.props;return(0,m.jsx)(c.Z,{capture:!e,onLeft:r.yR,onRight:r.yR,onSelectAll:r.yR,onRedo:r.yR,onUndo:r.yR,onToggleBold:r.yR,onToggleItalics:r.yR,onToggleCode:r.yR,onCut:r.yR,onCopy:r.yR,onPaste:r.yR,onKeypress:r.yR,children:(0,m.jsx)(c.Z,{capture:!e&&this.props.value.length>0,onDelete:r.yR,onBackspace:r.yR,children:(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",width:"100%",gap:this.props.message?4:void 0},children:[this.renderTokenInput(),(0,m.jsx)(v.Z,{isSmall:!0,children:this.props.message})]})})})}renderTokenInput(){const{right:e,showClearButton:t}=this.props;return e||t?(0,m.jsxs)(g.Z,{type:d.Z.All,style:{...this.getWrapStyle(),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,m.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,m.jsx)("div",{style:{flexShrink:0},children:this.renderRight()})]}):this.environment.device.isMobile?(0,m.jsxs)("div",{style:{...this.getWrapStyle(),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick,children:[(0,m.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:this.isGroup()?6:0},children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]}),(0,m.jsx)(u.Z,{show:this.stores.store.state.focused})]}):(0,m.jsxs)(g.Z,{type:d.Z.All,style:{...this.getWrapStyle(),...this.props.style},onClick:this.handleContainerClick,children:[this.props.tokens,!this.props.hideInput&&this.renderInput()]})}renderRight(){const{showClearButton:e,right:t,onClearButtonClick:i,tokens:n,value:r}=this.props,{isMobile:o}=this.environment.device;return t||(e&&(n.length>0||r.length>0)?(0,m.jsx)(p.Z,{onClick:i,style:{flexShrink:0,flexGrow:0,borderRadius:o?24:20,marginTop:2},children:(0,s.X)({width:o?16:14,height:o?16:14,fill:this.theme.lightIconColor})}):void 0)}renderInput(){const e=0===this.props.tokens.length;return(0,m.jsx)(h.Z,{disabled:this.props.disabled,format:h.Z.Format.Transparent,...(0,a.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:this.getInputDivStyle(),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:this.isGroup()?20:18},size:1,ref:e=>e&&(this.input=e),type:this.props.type,placeholder:e?this.props.placeholder:"",onSubmit:this.handleSubmit,onFocus:this.handleFocused,onBlur:this.handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete})}isGroup(){return this.props.format===y.Group}getDesktopWrapStyle(){const{disabled:e}=this.props;return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:e?"none":this.theme.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}getMobileWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${this.theme.regularDividerColor}`,fontSize:16,background:this.theme.popoverBackground}}getWrapStyle(){var e,t;const{focus:i,format:n}=this.props,{WindowSizeStore:s}=this.environment;return{...this.environment.device.isMobile?{...this.getMobileWrapStyle(),paddingTop:14,paddingBottom:8,paddingLeft:(null===(e=this.context.menu)||void 0===e?void 0:e.menuType)!==o.og.Popup?s.getSafePaddingLeftCSS(16):16,paddingRight:(null===(t=this.context.menu)||void 0===t?void 0:t.menuType)!==o.og.Popup?s.getSafePaddingRightCSS(16):16,...this.props.dontShowBorderBottom&&{borderBottom:"none"}}:{...this.getDesktopWrapStyle(),...this.getStyles()[n].desktopWrapStyle},...this.props.showBorder&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...this.props.showBorder&&this.props.focus&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!this.environment.device.isMobile&&i&&this.getStyles()[this.props.format].inputDivDesktopFocusStyle}}getStyles(){const e={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:3,borderTopRightRadius:3},inputDivDesktopFocusStyle:{}};return{[y.Select]:e,[y.Person]:e,[y.Relation]:e,[y.Group]:e,[y.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:3},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}},[y.Share]:{desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 0 0 2px",borderTopLeftRadius:3,borderTopRightRadius:3},inputDivDesktopFocusStyle:{}}}}getInputDivStyle(){return{flexGrow:1,flexShrink:1,flexBasis:this.props.inputFullWidth?"100%":60,minWidth:60,width:"auto",lineHeight:"20px",...this.environment.device.isMobile?{margin:"0 8px 8px 0"}:this.getStyles()[this.props.format].inputDivDesktopStyle,...this.props.inputDivStyle}}}f.displayName="TokenInputMenuItem",f.contextTypes={...o.mw,...n.w},f.Format=y;const S=f},67950:(e,t,i)=>{i.d(t,{B:()=>s,Z:()=>o});var n=i(49085);const s={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range"};class r extends n.default{getInitialState(){return{edited:!1,temporary:"",error:void 0}}}const o=r},76150:(e,t,i)=>{i.d(t,{Hv:()=>s,ZP:()=>a,pd:()=>r});var n=i(49085);let s=function(e){return e.StartDate="startDate",e.StartTime="startTime",e.EndDate="endDate",e.EndTime="endTime",e}({}),r=function(e){return e.InvalidDate="Invalid date",e.InvalidTime="Invalid time",e.InvalidRange="Invalid range",e}({});class o extends n.default{getInitialState(){return{focus:s.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const a=o},13854:(e,t,i)=>{i.d(t,{QJ:()=>r,ZP:()=>d,yO:()=>o});var n=i(49085),s=i(76150);const r={[s.Hv.StartDate]:"starting",[s.Hv.StartTime]:"starting",[s.Hv.EndDate]:"ending",[s.Hv.EndTime]:"ending"},o={starting:s.Hv.StartDate,ending:s.Hv.EndDate};class a extends n.default{getInitialState(){return{isOpen:!1,focus:s.Hv.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const d=a},41558:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(49085);class s extends n.default{getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime"}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const r=s}}]);