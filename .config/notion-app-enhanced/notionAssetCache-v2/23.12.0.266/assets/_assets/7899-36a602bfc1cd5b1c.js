"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7899],{32984:(e,t,o)=>{o.d(t,{vV:()=>le,QF:()=>ie,li:()=>me});var n=o(67294),r=o(480),i=o(86628),a=o(24405),l=o(3865),s=o(48777),c=o(23290),d=o(76218),p=o(72126),u=o(6287),m=o(97880),h=o(31412),g=o(9953),y=o(39699),S=o(52275),x=o(31945),v=o(78140),f=o(32163),C=o(72495),b=o(40190),w=o(61766),k=o(53437),M=o(72865),j=o(149),T=o(87279),P=o(77907),V=o(40721),_=o(74648),F=o(85893);const Z=(0,P.withDependency)(P.deps.formulas,((e,t)=>(0,F.jsx)(B,{...t,formulas:e})));function B(e){window.__c={n:"FormulaInputMenu"};const{value:t,onChange:o,onClose:a,disabled:l,contextStore:s,formulas:c}=e,d=(0,r.Fy)(),p=(0,n.useCallback)((()=>{o({type:"simple",value:null==t?void 0:t.value}),a()}),[o,a,null==t?void 0:t.value]),u=(0,n.useCallback)((e=>{void 0!==e&&e[0][0].length?o({type:"formula",value:e}):o(void 0),a()}),[o,a]),m=(0,i.VK)((()=>s.context.parentRecordStore.getSpaceId()),[s.context.parentRecordStore]),h=(0,i.Kw)(s.compilationResultStore),g=(0,n.useMemo)((()=>c.createFormulaDataRequestHandler(s.context.parentRecordStore.getRecordModel,s.context.parentRecordStore.loadRecordModel)),[s.context.parentRecordStore.getRecordModel,s.context.parentRecordStore.loadRecordModel,c]),y=(0,i.VK)((()=>{if(j.x.isFail(h))return;return{valueTypes:h.value.valueTypes,handleDataRequest:g}}),[h,g],{useDeepEqual:!0});let S;return S=d.isMobile?{menuType:T.og.Modal,right:(0,F.jsx)(V.DoneMenuText,{}),onClickRight:parent.close}:{menuType:T.og.Popup,maxHeight:"50vh",width:600,height:320,disableHeaderBorder:!0},m&&y?(0,F.jsx)(v.Z,{...S,children:(0,F.jsx)(_.Z,{formulas:c,initialCode:null==t?void 0:t.value,typecheckContext:y,handleClose:u,handleBack:p,parentSpaceId:m,disabled:l,focus:!0,evaluationErrors:[],getRecordModel:s.context.parentRecordStore.getRecordModel})}):null}var A=o(70203),I=o(17809),R=o(65187);function L(e){window.__c={n:"NumberInput"};const{value:t,disabled:o,buttonPopupStore:r,onChange:i}=e,l=(0,a.yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:4,padding:4}})),[]),s=(0,n.useCallback)((e=>{"="===(0,A.QaF)(e)&&(0,I.NY)()?(i({type:"formula",value:void 0}),r.setState({open:!0})):i({type:"simple",value:e})}),[i,r]),{store:c}=(0,I.Cl)({initialValue:null==t?void 0:t.value,onChange:s});return(0,F.jsx)("div",{style:l.wrap,children:(0,F.jsx)(R.Z,{disabled:o,store:c,pasteBehavior:"inline",disableSlashCommands:!0,disableEmojiCommands:!0,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableEmbedMenu:!0,disableMobileActionBar:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableEquationInteraction:!0})})}var K=o(53498),D=o(18466),O=o(13991),N=o(32426),W=o(82990),H=o(60682),z=o(14976),E=o(75311),Q=o(30387);function q(e){window.__c={n:"ValuePickerValue"};const{value:t,type:o,currentSimpleFormulaValueTokens:n,contextStore:r,context:l}=e,{collectionStore:s,property:c}=l,d=(0,a.yK)((()=>({tokenWrap:{display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",marginTop:6}})),[]),p=(0,E.M)(s,c),u=(0,i.VK)((()=>(0,I.NY)()),[]);if("formula"===(null==t?void 0:t.type)&&t.value&&u)return(0,F.jsx)(U,{...e});if("text"===o.type||"number"===o.type)return null;if("date"===o.type||"select"===o.type||"checkbox"===o.type){const e=n[0];return void 0===e?(0,F.jsx)(G,{}):(0,F.jsx)("div",{style:d.tokenWrap,children:(0,F.jsx)(K.K,{token:e,contextStore:r,disabled:!0,currentSimpleFormulaValueTokens:n,context:l})})}if("person_array"===o.type||"block_array"===o.type||"select_array"===o.type)return 0===n.length?(0,F.jsx)(G,{}):(0,F.jsx)("div",{style:d.tokenWrap,children:p(n,"first").map(((e,t)=>(0,F.jsx)(K.K,{token:e,contextStore:r,disabled:!0,currentSimpleFormulaValueTokens:n,context:l},t)))});(0,m.t1)(o)}function G(){window.__c={n:"ValueEmptyPlaceholder"};const e=(0,a.yK)((e=>({placeholderText:{color:e.lightTextColor}})),[]);return(0,F.jsx)("div",{style:e.placeholderText,children:(0,F.jsx)(h.FormattedMessage,{...Q.s.personSelect})})}function U(e){window.__c={n:"MinimalFormulaText"};const{value:t,contextStore:o}=e,l=(0,r.O7)(),s=(0,a.Fg)(),c=(0,a.yK)((e=>({wrap:{display:"flex",alignItems:"center",pointerEvents:"none",fontFamily:W.Z.getCompositeFontFamily(O.SP).githubMono,fontSize:12,flexGrow:1,...W.Z.textOverflowStyle},icon:{width:14,fill:e.mediumIconColor,marginRight:6}})),[]),d=(0,H.kw)(),p=(0,i.VK)((()=>l.KatexStore.getKatex()),[l]),u=(0,i.VK)((()=>o.context.parentRecordStore.getSpaceId()),[o.context.parentRecordStore]),m=(0,i.Kw)(o.compilationResultStore),h=j.x.isSuccess(m)?m.value.valueTypes:void 0,g=(0,n.useMemo)((()=>D.Z.withListenerIgnored((()=>(0,z.IY)({environment:l,textValue:null!=t&&t.value&&u?{value:t.value,spaceId:u}:void 0,parentStore:o.context.parentRecordStore,disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!0,theme:s,emojiType:d,katex:p,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:h||[]})))),[t,u,l,o.context.parentRecordStore,d,p,s,h]);return(0,F.jsxs)("div",{style:c.wrap,children:[(0,N.D)(c.icon),g]})}function Y(e){window.__c={n:"SimpleFormulaValuePicker"};const{type:t,value:o,disabled:n}=e,l=(0,r.Fy)(),s=!o||"simple"===o.type,c=(0,i.VK)((()=>(0,d.A6)(null==o?void 0:o.value)),[o]),p=(0,a.yK)((e=>({button:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow}})),[]),u=(0,i.qz)(void 0,w.Z);return"number"===t.type&&s?(0,F.jsx)(L,{...e,buttonPopupStore:u}):"text"===t.type?(0,F.jsx)(M.D,{...e}):(0,F.jsx)(x.ZP,{popupType:l.isMobile?k.kQ.SlideUp:k.kQ.Popup,alignmentToOrigin:x.vR.End,placementToOrigin:x.pO.Bottom,originGap:0,buttonPopupStore:u,disabled:n,renderOrigin:t=>(0,F.jsx)(b.S,{disabled:n,variant:"gray",...t,style:p.button,children:(0,F.jsx)(q,{...e,currentSimpleFormulaValueTokens:c})}),render:t=>s?(0,F.jsx)(K.a,{...e,onClose:t.close,currentSimpleFormulaValueTokens:c}):(0,F.jsx)(Z,{...e,onClose:t.close})})}var $=o(28267),X=o(83656),J=o(95193),ee=o(35294),te=o(39068),oe=o(61053);function ne(e){window.__c={n:"AutomationPropertyPicker"};const{availablePropertyIds:t,currentValue:o,collectionStore:l,onChange:s,onRemove:c,disabled:d,alreadyHaveProperties:p}=e,u=(0,r.O7)(),m=(0,a.Fg)(),{device:g}=u,y=(0,i.VK)((()=>l.getSchema()??{}),[l]),S=(0,i.VK)((()=>l.getFormat()??{}),[l]),f=(0,i.VK)((()=>o?l.getSchema()[o]:void 0),[o,l]),C=(0,a.yK)((e=>({propertyIcon:{fill:e.lightTextColor,height:"auto",marginRight:4,width:16}})),[]),w=(0,n.useCallback)((()=>t),[t]),k=(0,ee.d)();return(0,F.jsx)(x.ZP,{popupType:k,alignmentToOrigin:x.vR.End,placementToOrigin:x.pO.Bottom,originGap:0,disabled:d,renderOrigin:e=>(0,F.jsx)(b.S,{...e,disabled:d,icon:f?e=>(0,F.jsx)(te.ZP,{icon:void 0,type:f.type,size:16,theme:m,style:{...e,...C.propertyIcon}}):void 0,variant:p||f?f?"default":"gray":"blue",children:f?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("div",{style:{fontWeight:W.Z.fontWeight.medium,...W.Z.textOverflowStyle},children:f.name})}):p?(0,F.jsx)(h.FormattedMessage,{id:"automations.propertyPicker.buttonPlaceholderAlreadyHaveProperties",defaultMessage:"Edit another property"}):(0,F.jsx)(h.FormattedMessage,{id:"automations.propertyPicker.buttonPlaceholder",defaultMessage:"Edit a property"})}),render:e=>{const t=(0,J.U)({device:g,width:280,paddingTop:4});return(0,F.jsx)(v.Z,{...t,children:(0,F.jsx)(oe.Z,{schema:y,format:S,showRemoveOption:Boolean(c),currentProperty:o,getProperties:w,onAccept:t=>{t&&t!==o?s(t):void 0===t&&(null==c||c(o)),e.close()}})})}})}const re=(0,h.defineMessages)({replaceActionLabel:{id:"automations.AutomationActionSetPropertiesSection.replaceAction.label",defaultMessage:"Replace with"},appendActionLabel:{id:"automations.AutomationActionSetPropertiesSection.appendAction.label",defaultMessage:"Add"},removeActionLabel:{id:"automations.AutomationActionSetPropertiesSection.removeAction.label",defaultMessage:"Remove"},titlePlaceholder:{id:"automations.AutomationActionSetPropertiesSection.titlePlaceholder",defaultMessage:"Untitled"}});function ie(e){window.__c={n:"ButtonAutomationActionSetPropertiesSection"};const{contextStore:t,actionStore:o,collectionStore:a,disabled:l,showSetPropertyActions:s}=e,c=(0,r.O7)(),d=(0,i.VK)((()=>o.id),[o.id]),p=(0,i.VK)((()=>{var e;return(null===(e=o.getConfig())||void 0===e?void 0:e.values)??{}}),[o]),u=(0,i.VK)((()=>{var e;return(null===(e=o.getConfig())||void 0===e?void 0:e.properties)??[]}),[o]),m=(0,n.useMemo)((()=>({properties:u,values:p})),[u,p]),h=(0,n.useCallback)((e=>{const t=u.concat([e]),n={...p,[e]:void 0};y.createAndCommit({userAction:"AutomationActionSetPropertiesSection.propertiesChange",environment:c,perform:e=>{ae({configStore:o.getConfigStore(),properties:t,transaction:e,values:n})}})}),[c,u,p,o]),g=(0,n.useCallback)(((e,t)=>{const n=u.indexOf(e);if(-1===n)return;const r=u.slice(0);r[n]=t;const i={...p,[t]:void 0};y.createAndCommit({userAction:"AutomationActionSetPropertiesSection.setProperties",environment:c,perform:e=>{ae({configStore:o.getConfigStore(),properties:r,transaction:e,values:i})}})}),[c,u,p,o]),S=(0,n.useCallback)((e=>{const t=u.filter((t=>t!==e)),n={...p,[e]:void 0};y.createAndCommit({userAction:"AutomationActionSetPropertiesSection.removeProperty",environment:c,perform:e=>{ae({configStore:o.getConfigStore(),properties:t,transaction:e,values:n})}})}),[c,u,p,o]),x=(0,n.useCallback)(((e,t)=>{const n={...p,[e]:t};y.createAndCommit({userAction:"AutomationActionSetPropertiesSection.handleValueChange",environment:c,perform:e=>{ae({configStore:o.getConfigStore(),properties:u,transaction:e,values:n})}})}),[c,u,p,o]);return(0,F.jsx)(le,{contextStore:t,actionId:d,config:m,onPropertyAdd:h,onPropertyChange:g,onPropertyRemove:S,onPropertyValueChange:x,collectionStore:a,showSetPropertyActions:s,disabled:l})}function ae(e){const{configStore:t,properties:o,transaction:n,values:r}=e;g.sW({store:t,data:{properties:o,values:r},transaction:n})}function le(e){window.__c={n:"AutomationActionSetPropertiesSection"};const{contextStore:t,actionId:o,config:n,collectionStore:r,onPropertyAdd:s,onPropertyChange:c,onPropertyRemove:d,onPropertyValueChange:p,disabled:u,showSetPropertyActions:m}=e,h=(0,a.yK)((e=>({addPropertyValuePlaceholder:{color:e.mediumTextColor,flexGrow:1,textAlign:"right"},addPropertyRow:{display:"flex",alignItems:"center"}})),[]),g=(0,i.VK)((()=>(0,l.cO)({collectionFormat:r.getFormat(),collectionSchema:r.getSchema(),sort:!1,sourcePropertyIds:n.properties})),[r,n.properties]),y=(0,i.VK)((()=>(0,l.cO)({collectionFormat:r.getFormat(),collectionSchema:r.getSchema(),filter:e=>{let[t]=e;return!g.includes(t)}})),[r,g]),S=0===y.length;return(0,F.jsxs)(F.Fragment,{children:[g.length>0&&(0,F.jsx)(se,{availablePropertyIds:y,contextStore:t,actionId:o,config:{properties:g,values:n.values},collectionStore:r,onPropertyChange:c,onPropertyRemove:d,onPropertyValueChange:p,showSetPropertyActions:m,disabled:u}),!u&&!S&&(0,F.jsx)("div",{style:h.addPropertyRow,children:(0,F.jsx)(ne,{availablePropertyIds:y,currentValue:void 0,collectionStore:r,contextStore:t,onChange:s,disabled:u,alreadyHaveProperties:g.length>0})})]})}function se(e){window.__c={n:"PropertySectionList"};const{availablePropertyIds:t,contextStore:o,actionId:r,config:i,collectionStore:l,onPropertyChange:s,onPropertyRemove:c,onPropertyValueChange:d,showSetPropertyActions:p,disabled:u}=e,m=(0,n.useRef)(null),h=(0,$.X)(m),g=(0,X.a)(h),y=(0,a.yK)((()=>({wrap:{alignItems:"center",columnGap:4,display:"grid",gridTemplateColumns:g?"100%":"140px 1fr",rowGap:g?4:8},propertyValue:{...g?{fontSize:14,marginBlockEnd:16}:{}},lastPropertyValue:{...g?{fontSize:14,marginBlockEnd:0}:{}}})),[g]);return(0,F.jsx)("div",{style:y.wrap,ref:m,children:i.properties.map(((e,n)=>{const a=n===i.properties.length-1;return(0,F.jsx)(ce,{actionId:r,availablePropertyIds:t,collectionStore:l,contextStore:o,disabled:u,onPropertyChange:s,onPropertyRemove:c,onPropertyValueChange:d,property:e,showSetPropertyActions:p,value:i.values[e],valueStyle:a?y.lastPropertyValue:y.propertyValue},e)}))})}function ce(e){window.__c={n:"PropertySection"};const{actionId:t,availablePropertyIds:o,collectionStore:r,contextStore:l,disabled:p,onPropertyChange:m,onPropertyRemove:g,onPropertyValueChange:y,property:S,showSetPropertyActions:x,value:v,valueStyle:f}=e,C={type:"collection",collectionStore:r,property:S},b=(0,h.useIntl)(),w=(0,a.yK)((e=>({propertyName:{},propertyValue:{display:"flex",gap:4,minWidth:50,...f}})),[f]),k=(0,n.useMemo)((()=>{if("title"===S)return b.formatMessage(re.titlePlaceholder)}),[b,S]),M=(0,i.VK)((()=>{const e=r.getSchema()[S];if(e)return e}),[r,S]),j=(0,i.VK)((()=>{if(M)return(0,d.qW)({table:u.v,id:r.id,spaceId:r.getSpaceId()},S,M)}),[r,M,S]),T=(0,i.VK)((()=>null==M?void 0:M.type),[M]),P=null==v?void 0:v.value,V=(0,i.VK)((()=>(0,c.o9)(v)),[v]),_=(0,i.VK)((()=>l.context.parentRecordStore.getSpaceId()),[l.context.parentRecordStore]),Z=(0,i.VK)((()=>l.getContextValuesForAction(t)),[l,t]),B=(0,n.useCallback)((e=>{m(S,e)}),[m,S]),A=(0,n.useCallback)((()=>g(S)),[g,S]),I=(0,n.useCallback)((e=>{y(S,e)}),[y,S]),R=(0,n.useCallback)((e=>{I({action:e,value:P})}),[P,I]),L=(0,n.useCallback)((e=>{I({action:V,value:e})}),[V,I]);if(!j||!_)return null;const K=me(T);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{style:w.propertyName,children:(0,F.jsx)(ne,{availablePropertyIds:o,currentValue:S,contextStore:l,collectionStore:r,onChange:B,disabled:p,onRemove:A})}),(0,F.jsxs)("div",{style:w.propertyValue,children:[x&&M&&s.Y[M.type]&&(0,F.jsx)(de,{disabled:p,onChange:R,value:V}),(0,F.jsx)(Y,{...K,type:j,value:null==v?void 0:v.value,onChange:L,disabled:p,contextStore:l,context:C,placeholder:k,disableMobileActionBar:!0,formulaTypecheckContextValues:Z,disableTemplateVariableMentions:!0})]})]})}function de(e){window.__c={n:"SetPropertyListActionDropdownButton"};const{disabled:t,onChange:o,value:n}=e,r=(0,ee.d)();return(0,F.jsx)(x.ZP,{popupType:r,alignmentToOrigin:x.vR.End,placementToOrigin:x.pO.Bottom,originGap:0,disabled:t,renderOrigin:e=>(0,F.jsx)(b.S,{disabled:t,variant:"gray",...e,children:(0,F.jsx)(ue,{action:n})}),render:e=>(0,F.jsx)(pe,{onChange:o,parent:e,value:n})})}function pe(e){window.__c={n:"SetPropertyListActionDropdownMenu"};const{value:t,onChange:o,parent:n}=e,r=(0,J.F)({width:250}),i=p.oA(c.E2.map(((e,r)=>({key:r,render:o=>(0,F.jsx)(S.Z,{...o,disabled:!1,title:(0,F.jsx)(ue,{action:e}),checkState:t===e}),action:()=>{e!==t&&o(e),n.close()}}))));return(0,F.jsx)(v.Z,{...r,children:(0,F.jsx)(f.Z,{type:f.i.Vertical,sections:[{key:0,render:e=>(0,F.jsx)(C.Z,{enableActionSheetTitle:!0,...e}),items:i}],initialFocus:0})})}function ue(e){const{action:t}=e;return"replace"===t?(0,F.jsx)(h.FormattedMessage,{...re.replaceActionLabel}):"append"===t?(0,F.jsx)(h.FormattedMessage,{...re.appendActionLabel}):"remove"===t?(0,F.jsx)(h.FormattedMessage,{...re.removeActionLabel}):void(0,m.t1)(t)}function me(e){return"email"===e||"phone_number"===e||"url"===e?{disableEmojiCommands:!0,disableFormattingAndMentions:!0}:{}}},73239:(e,t,o)=>{o.d(t,{a:()=>y});var n=o(67294),r=o(86628),i=o(84619),a=o(31412),l=o(31945),s=o(76798),c=o(21396),d=o(61766),p=o(26350),u=o(35294),m=o(40190),h=o(8808),g=o(85893);function y(e){window.__c={n:"AutomationCollectionPicker"};const{actionStore:t,currentValue:o,contextStore:y,onChange:S,disabled:x,errorMessage:v,skipVariables:f}=e,C=(0,r.qz)(void 0,d.Z),b=(0,r.VK)((()=>o&&"collection"===o.type?p.NW.createChildStore(y.context.parentRecordStore,o.collection):void 0),[o,y.context.parentRecordStore]),w=(0,r.VK)((()=>{if(t&&o&&"variable"===o.type)return y.getContextValueForActionById(t.id,o.id)}),[t,o,y]),k=(0,n.useCallback)((e=>{"collection"!==e.type&&"variable"!==e.type||(S(e),C.reset())}),[S,C]),M=(0,n.useCallback)((()=>C.reset()),[C]),j=(0,u.d)(),T=(0,m.d)({errorMessage:v,hasValue:Boolean(b||w)});return(0,g.jsx)(l.ZP,{buttonPopupStore:C,popupType:j,alignmentToOrigin:l.vR.End,placementToOrigin:l.pO.Bottom,originGap:0,disabled:x,renderOrigin:e=>(0,g.jsx)(m.S,{...T,...e,disabled:x,children:b?(0,g.jsx)(s.Z,{store:b}):w?(0,g.jsx)(c.F,{format:i.lo.Medium,isSingle:!0,value:w}):(0,g.jsx)(a.FormattedMessage,{id:"automations.databasePicker.buttonPlaceholder",defaultMessage:"Select database"})}),render:e=>(0,g.jsx)(h.L,{actionId:null==t?void 0:t.id,automationContextStore:y,onChange:k,onClose:M,selectedTarget:o,skipPages:!0,skipVariables:f})})}},29180:(e,t,o)=>{o.d(t,{f:()=>C});var n=o(67294),r=o(480),i=o(86628),a=o(72126),l=o(21202),s=o(31412),c=o(40071),d=o(31945),p=o(78140),u=o(32163),m=o(76798),h=o(72495),g=o(26350),y=o(64737),S=o(95193),x=o(35294),v=o(40190),f=o(85893);function C(e){window.__c={n:"AutomationCollectionTemplatePicker"};const{collectionStore:t,currentTemplateId:o,onChange:n,disabled:a,errorMessage:c}=e,u=(0,r.O7)(),{device:h}=u,C=(0,i.VK)((()=>{if(!t)return;if(o){const e=g.G.createChildStore(t,{id:o,spaceId:t.getSpaceId(),table:l.iU});if(!e.pathIsDead())return e}const e=t.getDefaultTemplatePageStore();return e&&!e.pathIsDead()?e:void 0}),[t,o]),w=(0,x.d)(),k=(0,v.d)({errorMessage:c,hasValue:!0}),M=(0,i.VK)((()=>(0,y.q)(t)),[t]),j=Boolean(o);return(0,f.jsx)(d.ZP,{popupType:w,alignmentToOrigin:d.vR.End,placementToOrigin:d.pO.Bottom,originGap:0,disabled:a,renderOrigin:e=>(0,f.jsx)(v.S,{...k,...e,disabled:a,style:{minWidth:50},children:C&&(j||(0,y.w)(C))?(0,f.jsx)(m.Z,{store:C}):(0,f.jsx)(s.FormattedMessage,{id:"automations.templatePicker.buttonPlaceholder",defaultMessage:"Empty"})}),render:e=>{const o=(0,S.U)({device:h,width:280});return(0,f.jsx)(p.Z,{...o,children:t&&(0,f.jsx)(b,{collectionStore:t,templatePageStores:M,parent:e,onChange:n})})}})}function b(e){window.__c={n:"AutomationCollectionTemplateMenuList"};const{collectionStore:t,templatePageStores:o,parent:l,onChange:d}=e,p=(0,r.O7)(),{device:m}=p,g=(0,i.VK)((()=>t.getDefaultTemplatePageStore()),[t]),y=o.map((e=>({key:e.id,render:o=>(0,n.createElement)(c.Z,{...o,key:e.id,isOverlay:!0,collectionStore:t,canConfigureCollection:!1,templateStore:e,isMobile:m.isMobile,locked:!0,isDefault:g===e,onCancelClick:()=>{},draggable:!1}),action:t=>{d(e.id),l.close()}}))),S={key:"empty",render:e=>(0,n.createElement)(c.Z,{...e,key:"empty",isOverlay:!0,collectionStore:t,canConfigureCollection:!1,templateStore:void 0,isMobile:m.isMobile,locked:!0,onCancelClick:()=>{},draggable:!1}),action:e=>{d(void 0),l.close()}};return(0,f.jsx)(u.Z,{type:u.i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,f.jsx)(h.Z,{...e,title:(0,f.jsx)(s.FormattedMessage,{id:"automations.templatePicker.menuHeader",defaultMessage:"Select a template"})}),items:a.oA([...y,g?void 0:S])}]})}},52105:(e,t,o)=>{o.d(t,{W:()=>S});var n=o(67294),r=o(86628),i=o(76205),a=o(31412),l=o(6758),s=o(42917),c=o(31945),d=o(8982),p=o(78140),u=o(72495),m=o(95193),h=o(35294),g=o(40190),y=o(85893);function S(e){var t;window.__c={n:"AutomationCombinatorFilterPopup"};const{contextStore:o,filter:n,onChange:r,noFiltersMessage:l,collectionStore:s,disabled:d}=e,p=(0,h.d)({tabletBehavior:"slideUp"}),u=(null==n||null===(t=n.filters)||void 0===t?void 0:t.length)||0;return(0,y.jsx)(c.ZP,{popupType:p,alignmentToOrigin:c.vR.End,placementToOrigin:c.pO.Bottom,originGap:0,disabled:d,renderOrigin:e=>(0,y.jsx)(g.S,{disabled:d,variant:"gray",...e,onClick:t=>{e.onClick(t),0===u&&r(i.TI)},children:u>0?(0,y.jsx)(a.FormattedMessage,{defaultMessage:"{ruleCount, plural, one {{ruleCount} filter} other {{ruleCount} filters}}",id:"automations.QueryCollectionAction.filterRuleCount.label",values:{ruleCount:u}}):l}),render:e=>(0,y.jsx)(x,{contextStore:o,filter:n,disabled:d,onChange:r,onClose:()=>e.close(),collectionStore:s})})}function x(e){window.__c={n:"AutomationCombinatorFilterMenu"};const{contextStore:t,filter:o,onChange:c,onClose:h,collectionStore:g}=e,S=(0,r.VK)((()=>g.getSchema()),[g]),x=(0,m.F)({minWidth:300,tabletBehavior:"actionSheet"}),v=(0,n.useCallback)(((e,t)=>{c(t)}),[c]),f=(0,n.useCallback)((()=>{c(void 0),h()}),[c,h]);return(0,y.jsxs)(p.Z,{...x,children:[(0,y.jsx)(d.D,{children:(0,y.jsx)(l.Pq,{index:0,level:0,combinatorFilter:o||i.hh,schema:S,onChange:v,collectionViewType:"table",collectionViewId:"test",parentStore:t.context.parentRecordStore})}),(0,y.jsx)(u.Z,{topBorder:!0,children:(0,y.jsx)(s.Z,{title:(0,y.jsx)(a.FormattedMessage,{defaultMessage:"Delete filter",id:"automations.AutomationCombinatorFilterPopup.deleteFilter.label"}),onClick:f})})]})}},40190:(e,t,o)=>{o.d(t,{S:()=>h,d:()=>g});var n=o(67294),r=o(480),i=o(24405),a=o(42853),l=o(54497),s=o(82990),c=o(24677),d=o(98104),p=o(89728),u=o(26388),m=o(85893);const h=n.forwardRef(((e,t)=>{window.__c={n:"AutomationDropdownButton"};const{variant:o,onClick:h,style:g,icon:y,children:S,disabled:x}=e,v=(0,r.O7)(),f=(0,i.yK)((e=>({button:{..."gray"===o&&{color:e.mediumTextColor},..."blue"===o&&{color:e.blueColor,fontWeight:500},..."error"===o&&{color:e.errorText},maxWidth:"calc(100% + 2px)",marginLeft:1,padding:"0 8px 0 5px",...g},warningIcon:{width:12,height:12,marginLeft:-6,marginLeft:6,fill:e.errorText,color:e.errorText},chevronIcon:{width:10,height:10,marginLeft:4,marginTop:2,fill:e.lightIconColor},spacer:{flexGrow:1}})),[o,g]),C=(0,n.useCallback)((e=>{d.ZH(v),c.ZH(v),null==h||h(e)}),[h,v]);return(0,m.jsx)(u.Z,{renderTooltip:()=>"error"===o?e.errorMessage:null,placement:u.Z.Placement.Bottom,disableTooltip:"error"!==o,delayThreshold:0,render:e=>(0,m.jsxs)(p.Z,{...e,style:f.button,icon:y,onClick:C,ref:t,shouldShrink:!0,disabled:x,disabledFeedback:x,children:[(0,m.jsx)("div",{style:{...s.Z.textOverflowStyle},children:S}),(0,m.jsx)("div",{style:f.spacer}),"error"===o&&(0,l.t)(f.warningIcon),(0,a.i)(f.chevronIcon)]})})}));function g(e){const{errorMessage:t,hasValue:o}=e;return(0,n.useMemo)((()=>t?{variant:"error",errorMessage:t}:o?{variant:"gray"}:{variant:"blue"}),[t,o])}},8808:(e,t,o)=>{o.d(t,{H:()=>W,L:()=>N});o(57658),o(21703);var n=o(67294),r=o(480),i=o(86628),a=o(24405),l=o(84619),s=o(23790),c=o(84116),d=o(78106),p=o(58573),u=o(59054),m=o(56666),h=o(72126),g=o(4615),y=o(21202),S=o(6287),x=o(97880),v=o(31412),f=o(8406),C=o(31299),b=o(73657),w=o(71846),k=o(52275),M=o(68894),j=o(78140),T=o(32163),P=o(11470),V=o(72495),_=o(26388),F=o(21396),Z=o(78948),B=o(87279),A=o(98742),I=o(80444),R=o(29798),L=o(26350),K=o(95193),D=o(85893);const O=(0,v.defineMessages)({searchInputPlaceholder:{defaultMessage:"Select blocks to edit…",id:"automations.AutomationTargetPickerMenu.search.placeholder"}});function N(e){window.__c={n:"AutomationTargetPickerMenu"};const t=(0,r.O7)(),o=(0,K.F)({maxWidth:360,paddingTop:12,width:280}),i=(0,n.useMemo)((()=>(0,g.ZP)()),[]),a=(0,n.useCallback)((()=>{f.tW({environment:t,eventName:"abandoned_search",sessionId:i,source:w.S.Automation})}),[t,i]);return o.menuType===B.og.Popup&&(o.onClickOutside=a),(0,D.jsx)(j.Z,{...o,children:(0,D.jsx)(W,{...e,searchSessionId:i})})}function W(e){window.__c={n:"AutomationTargetPickerMenuChildren"};const{actionId:t,automationContextStore:o,onChange:a,onClose:m,selectedTarget:g,skipCollections:M,skipPages:j,skipVariables:B,searchSessionId:K}=e,O=(0,r.O7)(),N=(0,i.qz)(void 0,R.Z),W=(0,i.VK)((()=>{const{context:e}=o;if("button_property"===e.type)return e.collectionContextStore.collectionViewBlockStore()}),[o]),q=(0,i.VK)((()=>{if(B)return[];const e=(0,x.$K)(t)?o.getContextValuesForAction(t):o.getAllContextValues();if(e){return Object.values(e).filter((e=>{if(!(0,s.uy)(e.type,{type:"block"}))return!1;if("event"===o.context.type&&e.kind===c.yp.ContextValue){const t=(0,d.MY)(e.id);return!("global"===t.source&&"button_page"===t.global)}return!0}))}return[]}),[B,o,t],{useDeepEqual:!0}),G=(0,n.useMemo)((()=>o.context.parentRecordStore),[o.context]),U=(0,i.VK)((()=>G.getSpaceId()),[G]),[Y,$]=(0,n.useReducer)(E,{automationVariables:[],collectionQueryLimit:5,pageQueryLimit:5,searchTerm:""});(0,n.useEffect)((()=>{if(Y.searchTerm){const e=(0,p.ZP)(Y.searchTerm,q,(e=>e.kind===c.yp.ContextValue?e.name:""));$({type:"set_variables",variables:e})}else $({type:"set_variables",variables:q})}),[Y.searchTerm,q]);const X=function(e){const{collectionViewBlockStore:t,limit:o,parentStore:a,searchTerm:l,skip:s}=e,c=(0,r.O7)(),d=(0,i.VK)((()=>I.default.state.currentSpaceStore),[]),[p,m]=(0,n.useReducer)(Q,{error:void 0,isLoading:Boolean(s),results:void 0,total:void 0}),[h]=(0,u.r5)((async()=>{if(s)return;const e=await C.RT({collectionViewBlockStore:t,environment:c,spaceStore:d,limit:o,parentStore:a,query:l,requireEditPermissions:!0});return{results:e.results,total:e.total}}),[t,c,o,a,l,s,d],{debounce:C.vp});return(0,n.useEffect)((()=>{if("pending"===h.status||"idle"===h.status)m({type:"query_loadstart"});else if("resolved"===h.status){var e,t;m({results:null===(e=h.value)||void 0===e?void 0:e.results,total:null===(t=h.value)||void 0===t?void 0:t.total,type:"query_finish"})}else"rejected"===h.status?m({error:h.error,type:"query_error"}):(0,x.t1)(h)}),[h]),p}({collectionViewBlockStore:W,limit:Y.collectionQueryLimit,parentStore:G,searchTerm:Y.searchTerm,skip:M}),J=function(e){const{limit:t,searchTerm:o,skip:i,spaceId:a}=e,l=(0,r.O7)(),[s,c]=(0,n.useReducer)(Q,{error:void 0,isLoading:Boolean(i),results:void 0,total:void 0}),[d]=(0,u.r5)((async()=>{if(i||!a)return;const e=await C.D7({boostRecentlyViewedPages:!0,environment:l,excludeTemplates:!0,limit:t,query:o,requireEditPermissions:!1,source:"automation_page_picker",spaceId:a});return{results:e.results.map((e=>e.id)),total:e.total}}),[l,t,o,i,a],{debounce:C.vp});return(0,n.useEffect)((()=>{if("pending"===d.status||"idle"===d.status)c({type:"query_loadstart"});else if("resolved"===d.status){var e,t;c({results:null===(e=d.value)||void 0===e?void 0:e.results,total:null===(t=d.value)||void 0===t?void 0:t.total,type:"query_finish"})}else"rejected"===d.status?c({error:d.error,type:"query_error"}):(0,x.t1)(d)}),[d]),s}({limit:Y.pageQueryLimit,searchTerm:Y.searchTerm,skip:j,spaceId:U}),ee=(0,n.useCallback)((e=>{"collection"===e.type&&f.tW({environment:O,eventName:"select_search_item",queryLength:Y.searchTerm.length,sessionId:K,source:w.S.Automation,totalResults:X.total}),g&&!h.Xy(g,e)?a(e):g?m():a(e)}),[O,K,Y.searchTerm,X.total,g,a,m]),te=(0,n.useCallback)((e=>{const t=e.target.value;$({searchTerm:t,type:"set_search_term"}),N.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[N]),oe=(0,n.useCallback)((()=>{$({queryLimit:Y.collectionQueryLimit+20,type:"set_collection_query_limit"})}),[Y.collectionQueryLimit]),ne=(0,n.useCallback)((()=>{$({queryLimit:Y.pageQueryLimit+20,type:"set_page_query_limit"})}),[Y.pageQueryLimit]),re="variable"===(null==g?void 0:g.type)?g.id:void 0,ie="collection"===(null==g?void 0:g.type)?g.collection.id:void 0,ae="page"===(null==g?void 0:g.type)?g.page.id:void 0,le=[],se=function(e){const{automationVariables:t,onClick:o,selectedVariableId:n}=e,r=t.map((e=>{if(e.kind!==c.yp.ContextValue)throw new Error("Not implemented yet.");return{action:()=>o({id:e.id,type:"variable"}),key:e.id,render:t=>(0,D.jsx)(_.Z,{placement:_.Z.Placement.Right,render:o=>(0,D.jsx)(k.Z,{...(0,A.Z)(o,t),checkState:e.id===n,title:(0,D.jsx)("div",{style:{display:"flex"},children:(0,D.jsx)(F.F,{value:e,format:l.lo.Medium,isSingle:!0,shouldShrink:!0})})}),renderTooltip:()=>e.name,textWrap:!0})}}));if(0===r.length)return;return{key:"variable_results",items:r,render:e=>(0,D.jsx)(V.Z,{...e,title:(0,D.jsx)(v.FormattedMessage,{defaultMessage:"From this automation",id:"automations.AutomationTargetPickerMenu.variablesSection.title"})})}}({automationVariables:Y.automationVariables,onClick:ee,selectedVariableId:re});se&&le.push(se);const ce=function(e){const{collectionQueryResult:t,onCollectionMenuItemClick:o,onShowMoreItemClick:n,parentRecordStore:r,selectedCollectionId:i}=e;if(t.isLoading)return;let a=[];if(t.error)a.push({action:n,key:"show_more_collection_results",render:e=>(0,D.jsx)(b.Z,{...e,caption:(0,D.jsx)(v.FormattedMessage,{defaultMessage:"Sorry, something went wrong while searching for databases.",id:"automations.AutomationTargetPickerMenu.errorCollections.label"}),shouldWrapCaption:!0})});else{const e=t.results??[],l=e.length;a=e.map((e=>{const t=L.NW.createChildStore(r,{table:S.v,id:e});return{action:()=>o({collection:t.getSpaceShardedPointer(),type:"collection"}),key:e,render:o=>(0,D.jsx)(P.Z,{...o,checkState:e===i,store:t})}}));const s=t.total??0,c=Math.max(0,s-l);c>0&&a.push({action:n,key:"show_more_collection_results",render:e=>(0,D.jsx)(z,{...e,showMoreCount:c})})}if(0===a.length)return;return{key:"collection_results",items:a,render:e=>(0,D.jsx)(V.Z,{...e,title:(0,D.jsx)(v.FormattedMessage,{defaultMessage:"Databases",id:"automations.AutomationTargetPickerMenu.collectionsSection.title"})})}}({collectionQueryResult:X,onCollectionMenuItemClick:ee,onShowMoreItemClick:oe,parentRecordStore:G,selectedCollectionId:ie});ce&&le.push(ce);const de=function(e){const{pageQueryResult:t,onPageMenuItemClick:o,onShowMoreItemClick:n,parentRecordStore:r,selectedPageId:i}=e;if(t.isLoading)return;let a=[];if(t.error)a.push({action:n,key:"show_more_collection_results",render:e=>(0,D.jsx)(b.Z,{...e,caption:(0,D.jsx)(v.FormattedMessage,{defaultMessage:"Sorry, something went wrong while searching for pages.",id:"automations.AutomationTargetPickerMenu.errorPages.label"}),shouldWrapCaption:!0})});else{const e=t.results??[],l=e.length;a=e.map((e=>{const t=L.G.createChildStore(r,{table:y.iU,id:e});return{key:e,render:o=>(0,D.jsx)(P.Z,{...o,checkState:e===i,store:t}),action:()=>o({page:t.getSpaceShardedPointer(),type:"page"})}}));const s=t.total??0,c=Math.max(0,s-l);c>0&&a.push({action:n,key:"show_more_page_results",render:e=>(0,D.jsx)(z,{...e,showMoreCount:c})})}if(0===a.length)return;return{key:"page_results",items:a,render:e=>(0,D.jsx)(V.Z,{...e,title:(0,D.jsx)(v.FormattedMessage,{defaultMessage:"Pages",id:"automations.AutomationTargetPickerMenu.pagesSection.title"})})}}({onPageMenuItemClick:ee,onShowMoreItemClick:ne,pageQueryResult:J,parentRecordStore:G,selectedPageId:ae});de&&le.push(de);const pe=X.isLoading||J.isLoading;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(H,{onChange:te,value:Y.searchTerm}),pe?(0,D.jsx)(V.Z,{children:(0,D.jsx)(Z.Z,{})}):!pe&&le.length>0?(0,D.jsx)(T.Z,{initialFocus:0,sections:le,store:N,type:T.i.Vertical}):(0,D.jsx)(b.Z,{caption:(0,D.jsx)(v.FormattedMessage,{defaultMessage:"No results",id:"automations.AutomationTargetPickerMenu.noResults.label"})})]})}function H(e){window.__c={n:"SearchInputSection"};const{onChange:t,value:o}=e,{isMobile:n}=(0,r.Fy)(),i=(0,v.useIntl)(),l=(0,a.yK)((()=>({section:{paddingBlockStart:0}})),[]);return(0,D.jsx)(V.Z,{style:l.section,children:(0,D.jsx)(M.ZP,{focusInitial:!n||void 0,onChange:t,placeholder:i.formatMessage(O.searchInputPlaceholder),showClearButton:!0,value:o??""})})}const z=(0,n.forwardRef)((function(e,t){window.__c={n:"ShowMoreButtonMenuItem"};const{showMoreCount:o}=e,n=(0,a.yK)((e=>({showMoreButton:{color:e.mediumTextColor,fill:e.mediumIconColor}})),[]);return(0,D.jsx)(k.Z,{...e,icon:(0,m.o)({width:16,height:16}),ref:t,style:n.showMoreButton,title:(0,D.jsx)(v.FormattedMessage,{defaultMessage:"Show {showMore} more",id:"automations.AutomationTargetPickerMenu.showMore.label",values:{showMore:Math.min(o,20)}})})}));function E(e,t){if("set_variables"===t.type)return{...e,automationVariables:t.variables.slice(0)};if("set_search_term"===t.type){const o=t.searchTerm?20:5;return{...e,collectionQueryLimit:o,pageQueryLimit:o,searchTerm:t.searchTerm}}if("set_collection_query_limit"===t.type){if(e.collectionQueryLimit!==t.queryLimit)return{...e,collectionQueryLimit:t.queryLimit}}else if("set_page_query_limit"===t.type){if(e.pageQueryLimit!==t.queryLimit)return{...e,pageQueryLimit:t.queryLimit}}else(0,x.t1)(t);return e}function Q(e,t){if("query_loadstart"===t.type){if(!e.isLoading)return{...e,isLoading:!0}}else{if("query_finish"===t.type)return{...e,error:void 0,isLoading:!1,results:t.results,total:t.total};if("query_error"===t.type)return{...e,error:t.error,isLoading:!1,results:void 0,total:void 0};(0,x.t1)(t)}return e}},37867:(e,t,o)=>{o.d(t,{Z:()=>p});o(67294);var n=o(480),r=o(24405),i=o(84619),a=o(54497),l=o(31412),s=o(85567),c=o(56812),d=o(85893);function p(e){let{key:t,tokenFormat:o=i.lo.Medium,isSingle:p,showRemoveButton:u,onClickRemove:m}=e;window.__c={n:"DeletedOptionToken"};const{isMobile:h}=(0,n.Fy)(),g=(0,l.useIntl)(),y=(0,r.yK)((e=>{const t="light"===e.mode?400:800,o="light"===e.mode?50:200,n="light"===e.mode?700:900;return{tokenValueWrap:{display:"inline-flex",gap:"4px",alignItems:"baseline"},warning:{color:e.accentColors.orange[t],height:"auto",width:h?16:14},warningWrap:{alignSelf:"center"},token:{backgroundColor:e.accentColors.yellow[o]},textWrap:{color:e.accentColors.yellow[n]}}}),[h]);return(0,d.jsx)(s.Z,{format:o,isSingle:p??!0,showRemoveButton:u??!1,onClickRemove:m,style:y.token,value:(0,d.jsxs)("span",{style:y.tokenValueWrap,children:[(0,d.jsx)("span",{style:y.warningWrap,children:(0,a.t)(y.warning)}),(0,d.jsx)("span",{style:y.textWrap,children:(0,c.ST)(g)})]})},t)}},64737:(e,t,o)=>{o.d(t,{q:()=>i,w:()=>r});var n=o(97880);function r(e){return!e.pathIsDead()&&e.isDefined()}function i(e){if(!(0,n.$K)(e))return[];return e.getTemplatePageStores().filter((e=>r(e)))}},56812:(e,t,o)=>{o.d(t,{$G:()=>k,Bo:()=>r,Ig:()=>S,Iu:()=>p,Mw:()=>h,Mz:()=>C,NZ:()=>x,Oq:()=>d,S0:()=>u,ST:()=>P,Sj:()=>y,VO:()=>T,XJ:()=>j,aD:()=>f,c5:()=>b,hW:()=>i,ht:()=>s,nf:()=>w,oJ:()=>V,om:()=>m,rf:()=>g,vE:()=>v,vz:()=>M,wE:()=>c,xf:()=>a,zU:()=>l});var n=o(80951);const r=(0,o(31412).defineMessages)({actionCheckboxPropertyChecked:{defaultMessage:"checked",id:"automations.action.checkboxProperty.checked"},actionCheckboxPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.checkboxProperty.single"},actionCheckboxPropertyUnchecked:{defaultMessage:"unchecked",id:"automations.action.checkboxProperty.unchecked"},actionDatePropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.dateProperty.clear"},actionDatePropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.dateProperty.single"},actionPersonPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.personProperty.clear"},actionPersonPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.personProperty.single"},actionPersonPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.personProperty.multiple"},actionRelationPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.relationProperty.clear"},actionRelationPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.relationProperty.multiple"},actionRelationPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.relationProperty.single"},actionSelectPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.selectProperty.clear"},actionSelectPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.selectProperty.multiple"},actionSelectPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.selectProperty.single"},actionStatusPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.statusProperty.single"},actionTextPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.textProperty.clear"},actionTextPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.textProperty.single"},actionDeletedProperty:{defaultMessage:"Edit a deleted property",id:"automations.action.deletedProperty"},triggerAnyPageAdded:{defaultMessage:"Page added",id:"automations.trigger.pageAdded.title"},triggerAnyPagePropertyEdit:{defaultMessage:"Any property edited",id:"automations.trigger.anyPagePropertyEdited.title"},triggerAnyPropertyEdit:{defaultMessage:"{propertyName} is edited",id:"automations.trigger.propertyChangesToAny.title"},triggerButtonClicked:{defaultMessage:"<b>Button</b> is clicked",id:"automations.trigger.button.clicked"},triggerCheckboxPropertyChecked:{defaultMessage:"checked",id:"automations.trigger.checkboxProperty.checked"},triggerCheckboxPropertySet:{defaultMessage:"{propertyName} set to {propertyValues}",id:"automations.trigger.checkboxPropertySet.title"},triggerCheckboxPropertyUnchecked:{defaultMessage:"unchecked",id:"automations.trigger.checkboxProperty.unchecked"},triggerSelectPropertySet:{id:"automations.trigger.selectPropertySet.title",defaultMessage:"{propertyName} set to {propertyValues}"},triggerStatusPropertySet:{defaultMessage:"{propertyName} set to {propertyValues}",id:"automations.trigger.statusPropertySet.singleProperty"},triggerDeletedPropertyEdit:{defaultMessage:"Deleted property is edited",id:"automations.trigger.deletedPropertyEdited"},deletedPropertyOption:{defaultMessage:"Deleted option",id:"automations.values.deletedPropertyOption"}});function i(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionCheckboxPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function a(e){const{propertyName:t}=e;return{...r.actionDatePropertyClear,values:{propertyName:t}}}function l(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionDatePropertySetSingle,values:{propertyName:t,propertyValue:o}}}function s(e){const{propertyName:t}=e;return{...r.actionPersonPropertyClear,values:{propertyName:t}}}function c(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionPersonPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function d(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionPersonPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function p(e){const{propertyName:t}=e;return{...r.actionRelationPropertyClear,values:{propertyName:t}}}function u(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionRelationPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function m(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionRelationPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function h(e){const{propertyName:t}=e;return{...r.actionSelectPropertyClear,values:{propertyName:t}}}function g(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionSelectPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function y(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionSelectPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function S(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionStatusPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function x(e){const{propertyName:t}=e;return{...r.actionTextPropertyClear,values:{propertyName:t}}}function v(e){const{propertyName:t,propertyValue:o}=e;return{...r.actionTextPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function f(e){return e.formatMessage(r.actionDeletedProperty)}function C(e){return e.formatMessage(r.triggerAnyPageAdded)}function b(e){return e.formatMessage(r.triggerAnyPagePropertyEdit)}function w(e){return e.formatMessage(r.triggerDeletedPropertyEdit)}function k(e,t){const{propertyName:o}=t;return e.formatMessage(r.triggerAnyPropertyEdit,{propertyName:o})}function M(e,t){return e.formatMessage(r.triggerCheckboxPropertySet,t)}function j(e,t){return e.formatMessage(r.triggerSelectPropertySet,t)}function T(e,t){return e.formatMessage(r.triggerStatusPropertySet,t)}function P(e){return e.formatMessage(r.deletedPropertyOption)}function V(e){const{limit:t,optionValues:o,propertySchema:r}=e,i=r.options??[],a=i.length>0,l=o.map((e=>{const t=a?(0,n.i7)(i,e):void 0;return t?{type:"option",value:t}:{type:"deleted",value:e}}));let s=l;if(void 0!==t&&l.length>t){const e=l.length-t;s=[...l.slice(0,t),{type:"truncation",value:`+${e}`}]}return s}},83656:(e,t,o)=>{o.d(t,{a:()=>r});var n=o(67294);function r(e){return(0,n.useMemo)((()=>Boolean(e&&e.width<400)),[e])}},95193:(e,t,o)=>{o.d(t,{F:()=>l,U:()=>a});var n=o(480),r=o(86628),i=o(87279);function a(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:i.og.ActionSheet}:{menuType:i.og.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function l(e){const t=(0,n.Fy)();return(0,r.VK)((()=>a({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},35294:(e,t,o)=>{o.d(t,{d:()=>a});var n=o(480),r=o(86628),i=o(53437);function a(e){const t=(0,n.Fy)();return(0,r.VK)((()=>t.isPhone||"slideUp"===(null==e?void 0:e.tabletBehavior)&&t.isTablet?i.kQ.SlideUp:i.kQ.Popup),[t,null==e?void 0:e.tabletBehavior])}},61053:(e,t,o)=>{o.d(t,{Z:()=>M});o(57658);var n=o(43261),r=o.n(n),i=o(67294),a=o(83355),l=o(49085),s=o(6695),c=o(56666),d=o(37612),p=o(72126),u=o(31412),m=o(52821),h=o(33929),g=o(29798),y=o(73657),S=o(52275),x=o(68894),v=o(32163),f=o(72495),C=o(69872),b=o(85893);const w=(0,u.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});class k extends a.Z{constructor(){super(...arguments),this.storeTypes={inputStore:l.default.createClass(""),menuListStore:g.Z,showAllProperties:l.default.createClass(!1)}}renderComponent(){const{currentProperty:e,showNoneOption:t,showRemoveOption:o,getProperties:n,onAccept:a,intl:l,inputPlaceholder:g,defaultShowPropertyCount:k,schema:M,format:j}=this.props,{device:T}=this.environment,{inputStore:P,menuListStore:V}=this.stores,_=P.state,F=(0,s.iB)(j,M,void 0,s.j5.Page).collection_page_properties||[],Z=!k||this.stores.showAllProperties.state,B=l.formatMessage(w.none),A=t?{key:"none",render:t=>(0,b.jsx)(S.Z,{...t,checkState:!e,title:B}),action:()=>{a(void 0)}}:void 0,I=o?{key:"remove",render:e=>(0,b.jsx)(S.Z,{...e,icon:(0,d.y)({width:16,fill:this.theme.mediumTextColor,marginLeft:4,marginRight:2}),title:l.formatMessage(w.remove)}),action:()=>{a(void 0)}}:void 0,R=n();let L=p.MR(R,(e=>F.findIndex((t=>t.property===e))));if(_){const e=new Map;let t=L.map((t=>{const o=M[t],n=o?`${o.name} ${m.SO[o.type]}`:"";return e.set(t,n),n}));t=r().filter(_,t).map((e=>{let{original:t}=e;return t})),L=L.filter((o=>t.includes(e.get(o)||"")))}else!Z&&k&&(L=L.slice(0,k));const K=p.oA([!_||r().test(_,B)?A:void 0,...L.map((e=>function(e,t,o,n,r){const i=t[e];if(!i)return;return{key:e,render:t=>{const o=e===n;return r?r(t,e,o,i):(0,b.jsx)(C.Z,{...t,propertySchema:i,format:C.Z.DisplayFormat.Name,checkState:o})},action:()=>{o(e)}}}(e,this.props.schema,this.props.onAccept,this.props.currentProperty,this.props.renderProperty)))]);if(!Z&&R.length>L.length&&!_){const e={key:"show_more",render:e=>(0,b.jsx)(S.Z,{...e,icon:(0,c.o)({width:16,fill:this.theme.mediumTextColor,marginLeft:4,marginRight:2}),style:{color:this.theme.mediumTextColor},title:(0,b.jsx)(u.FormattedMessage,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:R.length-L.length}})}),action:()=>{this.stores.showAllProperties.setState(!0)}};K.push(e)}const D=K.length>0,O=Boolean(_),N=!I||D||O;N&&!D&&K.push({action:p.ZT,key:"noResults",render:e=>(0,b.jsx)(y.Z,{...e,caption:(0,b.jsx)(u.FormattedMessage,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const W=[];return N&&W.push({key:"input",comp:(0,b.jsx)(f.Z,{children:(0,b.jsx)(x.ZP,{focusInitial:!T.isMobile||void 0,focus:!T.isMobile||void 0,value:_,onChange:e=>{P.setState(e.target.value),V.setState({...V.state,focus:{section:0,indexLocal:0,indexGlobal:0}}),this.stores.showAllProperties.setState(!1)},placeholder:g||h.default.formatMessage(w.inputPlaceholder)})})}),(K.length>0||I)&&W.push({key:"properties",comp:(0,b.jsx)(v.Z,{type:v.i.Vertical,initialFocus:0,sections:[...K.length>0?[{key:"results",render:e=>(0,b.jsx)(f.Z,{...e}),items:K}]:[],...I?[{key:"remove",render:e=>(0,b.jsx)(f.Z,{topBorder:K.length>0,...e}),items:[I]}]:[]],store:V})}),(0,b.jsx)(b.Fragment,{children:W.map((e=>{let{key:t,comp:o}=e;return(0,b.jsx)(i.Fragment,{children:o},t)}))})}}k.displayName="CollectionSettingsPropertySelectMenu";const M=(0,u.injectIntl)(k)},23877:(e,t,o)=>{o.d(t,{Z:()=>le,v:()=>ae});o(21703),o(67294);var n=o(83355),r=o(480),i=o(86628),a=o(49085),l=o(15145),s=o(6906),c=o(99036),d=o(39068),p=o(53877),u=o(6695),m=o(72126),h=o(4615),g=o(82990),y=o(31412),S=o(50906),x=o(8406),v=o(5149),f=o(58023),C=o(96802),b=o(75018),w=o(80402),k=o(39699),M=o(28020),j=o(40863),T=o(33929);const P=(0,y.defineMessages)({none:{defaultMessage:"None",id:"database.viewPropertiesMenu.coverFormat.none"},page_content:{defaultMessage:"Page content",id:"database.viewPropertiesMenu.coverFormat.pageContent"},page_cover:{defaultMessage:"Page cover",id:"database.viewPropertiesMenu.coverFormat.pageCover"}}),V=(0,y.defineMessages)({small:{defaultMessage:"Small",id:"database.viewPropertiesMenu.coverSize.small"},medium:{defaultMessage:"Medium",id:"database.viewPropertiesMenu.coverSize.medium"},large:{defaultMessage:"Large",id:"database.viewPropertiesMenu.coverSize.large"}}),_=function(e){return e?"page_content"===e.type?T.default.formatMessage(P.page_content):"page_cover"===e.type?T.default.formatMessage(P.page_cover):void 0:T.default.formatMessage(P.none)},F=e=>{switch(e){case"small":return T.default.formatMessage(V.small);case"medium":return T.default.formatMessage(V.medium);case"large":return T.default.formatMessage(V.large)}};var Z=o(81849),B=o(52821),A=o(48543),I=o(65742),R=o(78316),L=o(84210),K=o(87279),D=o(18514),O=o(80444),N=o(61766),W=o(36857),H=o(88923),z=o(21269),E=o(42917),Q=o(13709),q=o(61053),G=o(75544),U=o(42922),Y=o(64921),$=o(31945),X=o(74194),J=o(78140),ee=o(53437),te=o(72495),oe=o(86825),ne=o(85893);class re extends n.Z{constructor(){super(...arguments),this.storeTypes={hoveredType:a.default.createClass(void 0),timelineByButtonPopupStore:N.Z,timelineByEndButtonPopupStore:N.Z,calendarByButtonPopupStore:N.Z},this.renderViewTypeButton=e=>{const{intl:t,collectionContextStore:o}=this.props,n=ce(this.props.collectionContextStore),r=o.permissionScopes.state,i=n===e,a=i||!r.canConfigureBlock;return(0,ne.jsxs)(Y.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"calc(33% - 12px)",flexGrow:0,flexShrink:0,fontSize:11,borderRadius:4,margin:6,padding:6,boxShadow:`0 0 0 1px ${this.theme.regularDividerColor}`,color:this.theme.mediumTextColor,fill:this.theme.mediumTextColor,...i&&{boxShadow:`0 0 0 2px ${this.theme.blueColor}`,color:this.theme.blueColor,fill:this.theme.blueColor,fontWeight:500}},disabled:a,onClick:()=>{k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderViewTypeButton",environment:this.environment,perform:n=>{f.z2({environment:this.environment,collectionContextStore:o,newViewType:e,transaction:n,intl:t})}}),x.wd({environment:this.environment,collectionContextStore:o,action:"change_type",original_view_type:n})},onMouseMove:()=>{this.stores.hoveredType.setState(e)},children:[B.aW[e]({width:void 0,height:20,marginBottom:4,marginTop:4}),(0,ne.jsx)("div",{children:B.Bh[e]})]})},this.handleCoverFormatChange=e=>{const{collectionContextStore:t}=this.props,o=de(this.props.collectionContextStore),n=t.collectionViewStore();o&&n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverFormatChange",environment:this.environment,perform:t=>{C.FH({stores:[n],update:{[o]:e},transaction:t})}}),x.wd({environment:this.environment,collectionContextStore:t,action:"update_cover_format"}))},this.handleCoverSizeFormatChange=e=>{const{collectionContextStore:t}=this.props,o=pe(this.props.collectionContextStore),n=t.collectionViewStore();o&&n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverSizeFormatChange",environment:this.environment,perform:t=>{C.FH({stores:[n],update:{[o]:e},transaction:t})}}),x.wd({environment:this.environment,collectionContextStore:t,action:"toggle_cover_size_format"}))},this.handleCoverAspectFormatToggle=()=>{const{collectionContextStore:e}=this.props,t=ue(this.props.collectionContextStore),o=e.collectionViewStore(),n=e.normalizedFormatStore.state;t&&o&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverAspectFormatToggle",environment:this.environment,perform:e=>{C.FH({stores:[o],update:{[t]:"contain"===n[t]?"cover":"contain"},transaction:e})}}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_cover_aspect_format"}))},this.handleShowCollectionTitleClick=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=!e.shouldShowSource.state;k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleShowCollectionTitleClick",environment:this.environment,perform:e=>{C.FH({stores:[t],update:{hide_linked_collection_name:!o},transaction:e})}}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_show_collection_title"})},this.handleTableWrapCellsToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=Boolean(e.normalizedFormatStore.state.table_wrap);w.qY({environment:this.environment,collectionViewStore:t,currentValue:o}),S.wds(this.environment,{view_type:ce(this.props.collectionContextStore),action:"set_first_load_limit"}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_wrap_cells"})},this.handleTableVerticalLinesToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=Boolean(e.normalizedFormatStore.state.hide_table_vertical_lines);w.AU({environment:this.environment,collectionViewStore:t,currentValue:o}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_vertical_lines"})},this.handleTableSubitemToggleOnTitleToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();t&&(w.d1({environment:this.environment,collectionViewStore:t,currentValue:e.normalizedFormatStore.state.table_subitem_toggle_column}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_subitem_toggle_on_title"}))},this.handleTimelineSeparateDatesClick=()=>{const{collectionContextStore:e}=this.props,t=e.normalizedQueryStore.state,o=e.collectionViewStore(),n=null==t?void 0:t.timeline_by,r=null==t?void 0:t.timeline_by_end;if(!n||!o)return;const i=r?void 0:n;k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleTimelineSeparateDatesClick",environment:this.environment,perform:e=>{f.Es({collectionViewStore:o,update:{timeline_by_end:i??null},transaction:e})}}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_timeline_separate_dates"})},this.handleOpenPeekModePicker=()=>{x.nS({environment:this.environment,collectionContextStore:this.props.collectionContextStore,from:"collection_view_settings"})},this.handleCalendarViewRangeOptionClick=e=>{const{collectionContextStore:t}=this.props,o=t.collectionViewStore();if(!o)return;const{serverCommitResult:n}=k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleViewRangeOptionClick",environment:this.environment,perform:t=>{C.FH({stores:[o],update:{calendar_view_range:e},transaction:t})}}),r=M.AK.state,i=t.dateRangeStart.state,a=t.dateRangeEnd.state,{newDateRangeStart:l,newDateRangeEnd:s}=function(e){const{newViewRange:t,oldCalendarEnd:o,startOfWeekSetting:n}=e;if("month"===t){const e=(0,p.IS)((0,p.kl)(o),n);return{newDateRangeStart:e,newDateRangeEnd:(0,p.V7)((0,p._)({date:e,monthsToAdd:1}),n)}}{const e=(0,p.IS)(o,n);return{newDateRangeStart:e,newDateRangeEnd:(0,p.V7)(e,n)}}}({oldCalendarEnd:a,newViewRange:e,startOfWeekSetting:r});f.t5({dateRangeStart:l,dateRangeEnd:s,collectionContextStore:t}),n.then((()=>{x.wd({environment:this.environment,collectionContextStore:t,action:"update_calendar_view_range"})})).catch((()=>{f.t5({dateRangeStart:i,dateRangeEnd:a,collectionContextStore:t})}))},this.handlePeekModeFormatClick=e=>{const{collectionContextStore:t}=this.props,o=t.collectionViewStore();if(o&&e&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handlePeekModeFormatClick",environment:this.environment,perform:t=>{C.FH({stores:[o],update:{collection_peek_mode:e},transaction:t})}}),x.gl({environment:this.environment,collectionContextStore:t,peek_mode:e,from:"collection_view_settings"}),H.default.state.open&&H.default.state.collectionContextStore===t)){const{mainEditorCurrentBlockStore:t}=O.default.state,o="full_page"===e?(0,L.ZP)({store:H.default.state.target,fullyQualified:!1,pageVisitSource:l.tY.Expand}):(0,R.mb)({store:H.default.state.target,mainEditorCurrentBlockStore:t,collectionContextStore:H.default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,H.getPeekModeFromCollectionPeekModeFormat)(e)});o&&b.navigate({environment:this.environment,url:o})}},this.handleViewTypeAreaMouseLeave=()=>{this.stores.hoveredType.setState(void 0)},this.handleDoneClick=()=>{const{collectionSettingsStore:e,collectionContextStore:t}=this.props;v.wl({collectionSettingsStore:e,item:{type:"main"}}),x.wd({environment:this.environment,collectionContextStore:t,action:"click_create_view_done"})}}renderComponent(){const{collectionContextStore:e,showDoneButton:t}=this.props,{hoveredType:o}=this.stores,{device:n}=this.environment,r=e.normalizedQueryStore.state,i=e.normalizedSchemaStore.state,a=e.normalizedFormatStore.state,l=e.isFullScreen.state,s=e.isRootChild.state,d=ce(this.props.collectionContextStore),p=Boolean(de(this.props.collectionContextStore)),u="table"===d||"board"===d||"gallery"===d,m="table"===d,h=Object.keys(i).filter((e=>{const t=i[e];return t&&(0,c.Lt)(t)})),g="timeline"===d&&h.length>0,S="timeline"===d&&h.length>1,x="timeline"===d&&Boolean(null==r?void 0:r.timeline_by_end),v="calendar"===d&&h.length>0,f="calendar"===d,C="board"===d,b=(0,I.d$)({environment:this.environment,isFullScreen:l,isRootChild:s}),w="timeline"===d&&Boolean(a.timeline_show_table)&&b,k="timeline"===d&&b,M=e.collectionViewBlockStore();if(!M)return;const j=M.getCollectionViewSourceCollectionStore(),T=!("collectionTypedView"===e.contextType||j&&l),P=e.permissionScopes.state,V="page"===d;return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(te.Z,{topBorder:!1,shouldShowBottomDivider:n.isMobile,children:(0,ne.jsxs)("div",{style:{...!n.isMobile&&{width:"100%",paddingLeft:8,paddingRight:8},...n.isMobile&&{background:this.theme.contentBackground,width:"100%",paddingTop:12,paddingBottom:12}},onMouseLeave:this.handleViewTypeAreaMouseLeave,children:[(0,ne.jsx)("div",{style:{display:"flex",flexFlow:"wrap",justifyContent:"center"},children:["table","board","timeline","calendar","list","gallery"].map(this.renderViewTypeButton)}),(0,ne.jsx)("div",{style:{color:this.theme.lightTextColor,fontSize:12,margin:"6px 8px 0px 8px"},children:B.sN[o.state||d]})]})}),(0,ne.jsxs)(te.Z,{children:[T&&(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Show database title",id:"database.viewSettings.layoutTab.showDatabaseTitle.title"}),focused:!1,on:e.shouldShowSource.state,onClick:this.handleShowCollectionTitleClick,disabled:!P.canConfigureBlock,textWrapperStyle:{opacity:1}}),p&&this.renderCardSettings(),m&&this.renderTableVerticalLinesSetting(),u&&this.renderTableWrapCellsSetting(),V&&(0,ne.jsx)(he,{collectionContextStore:this.props.collectionContextStore}),g&&(0,ne.jsx)(ge,{collectionContextStore:this.props.collectionContextStore}),x&&(0,ne.jsx)(ye,{collectionContextStore:this.props.collectionContextStore}),S&&this.renderTimelineSeparateDatesSetting(),v&&(0,ne.jsx)(Se,{collectionContextStore:this.props.collectionContextStore}),f&&this.renderCalendarViewRangeSetting(),k&&(0,ne.jsx)(G.N,{collectionContextStore:e}),w&&(0,ne.jsx)(xe,{collectionContextStore:this.props.collectionContextStore,collectionSettingsStore:this.props.collectionSettingsStore}),C&&(0,ne.jsx)(ve,{collectionContextStore:this.props.collectionContextStore,collectionSettingsStore:this.props.collectionSettingsStore}),this.renderPeekModeSetting()]}),t&&(0,ne.jsx)(te.Z,{disableMobileBorders:!0,children:(0,ne.jsx)(U.Z,{style:{display:"flex",margin:"0 14px"},onClick:this.handleDoneClick,children:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Done",id:"database.viewSettings.createViewTab.doneButton.title"})})}),(0,ne.jsx)(te.Z,{topBorder:!1,children:(0,ne.jsx)(z.Z,{href:(0,D.UY)("guides.databaseView"),title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Learn about views",id:"database.viewSettings.layoutTab.learnMoreButton.title"}),analyticsFrom:"view_settings_layout"})})]})}renderCardSettings(){const{device:e}=this.environment,{collectionContextStore:t}=this.props,o=function(e){const t=e.normalizedFormatStore.state,o=de(e);if(o&&t)return t[o]}(this.props.collectionContextStore),n=function(e){const t=e.normalizedFormatStore.state,o=pe(e);if(o&&t){const e=t[o];if(e)return e}return u.PZ}(this.props.collectionContextStore),r=!e.isMobile||"board"===ce(this.props.collectionContextStore),i=t.permissionScopes.state;return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Q.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Card preview",id:"database.viewSettings.layoutTab.cardPreviewButtonTitle"}),selectedKey:o,popupStyle:{minWidth:190},options:this.getCoverFormatOptions(),onChange:this.handleCoverFormatChange,disabled:!i.canConfigureBlock}),r&&(0,ne.jsx)(Q.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Card size",id:"databdatabase.viewSettings.layoutTab.cardSizeButtonTitle"}),selectedKey:n,popupStyle:{minWidth:190},options:se(),onChange:this.handleCoverSizeFormatChange,disabled:!i.canConfigureBlock}),o&&(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Fit image",id:"databdatabase.viewSettings.layoutTab.fitImageButtonTitle"}),on:"contain"===me(this.props.collectionContextStore),focused:!1,onClick:this.handleCoverAspectFormatToggle,disabled:!i.canConfigureBlock,textWrapperStyle:{opacity:1}})]})}getCoverFormatOptions(){const{collectionContextStore:e}=this.props,t=e.normalizedSchemaStore.state;let o=Object.keys(t);o=m.MR(o,(e=>{const o=t[e];return o?o.name:""}));const{theme:n}=this,r=m.oA(o.map((e=>{const o=t[e];if(o&&"file"===o.type){return{key:{type:"property",property:e},title:o.name,icon:(0,ne.jsx)(d.ZP,{type:o.type,icon:o.icon,size:this.environment.device.isMobile?16:14,theme:n,style:{fill:n.regularIconColor}})}}})));return[...[void 0,{type:"page_cover"},{type:"page_content"}].map((e=>({key:e,title:_(e)}))),...r]}renderTableVerticalLinesSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state;return(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Show vertical lines",id:"database.viewSettings.layoutTab.tableShowVerticalLines"}),on:!Boolean(e.normalizedFormatStore.state.hide_table_vertical_lines),focused:!1,onClick:this.handleTableVerticalLinesToggle,disabled:!t.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderTableWrapCellsSetting(){const{collectionContextStore:e}=this.props,t=e.normalizedFormatStore.state,o=e.permissionScopes.state,n=ce(this.props.collectionContextStore);return(0,ne.jsx)(oe.Z,{title:"table"===n?(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Wrap all columns",id:"database.viewSettings.layoutTab.tableWrapAllColumns"}):(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Wrap all properties",id:"database.viewSettings.layoutTab.tableWrapAllProperties"}),on:Boolean(t.table_wrap),focused:!1,onClick:this.handleTableWrapCellsToggle,disabled:!o.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderTimelineSeparateDatesSetting(){const{collectionContextStore:e}=this.props,t=e.normalizedQueryStore.state,o=null==t?void 0:t.timeline_by_end,n=e.permissionScopes.state;return(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Separate start and end dates",id:"database.viewSettings.layoutTab.timelineUseSeparateDates.title"}),focused:!1,on:Boolean(o),onClick:this.handleTimelineSeparateDatesClick,disabled:!n.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderCalendarViewRangeSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state,o=function(e){const t=e.normalizedFormatStore.state;return(null==t?void 0:t.calendar_view_range)||"month"}(this.props.collectionContextStore);return(0,ne.jsx)(Q.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Show calendar as",id:"database.viewSettings.layoutTab.showCalendarAs.title"}),collectionContextStore:e,openButtonPopup:"peekModeFormat"===e.settingsStore.state.openButtonPopup,selectedKey:o,popupStyle:{minWidth:190},options:ie(),onChange:this.handleCalendarViewRangeOptionClick,disabled:!t.canConfigureBlock})}renderPeekModeSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state,o=function(e){const t=e.normalizedFormatStore.state,o=ce(e);return(null==t?void 0:t.collection_peek_mode)||A.Ls[o]}(this.props.collectionContextStore);return(0,ne.jsx)(Q.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Open pages in",id:"database.viewSettings.layoutTab.peekModeTitle"}),collectionContextStore:e,openButtonPopup:"peekModeFormat"===e.settingsStore.state.openButtonPopup,selectedKey:o,popupStyle:{minWidth:190},options:ae({currentViewType:ce(this.props.collectionContextStore),theme:this.theme}),menuItemOptionsStyle:{paddingTop:8,paddingBottom:8},onClick:this.handleOpenPeekModePicker,onChange:this.handlePeekModeFormatClick,disabled:!t.canConfigureBlock})}}function ie(){return["month","week"].map((e=>({key:e,title:T.default.formatMessage(j.Lh[e])})))}function ae(e){const{currentViewType:t,theme:o}=e,n=t?A.Ls[t]:void 0;return["side_peek","center_peek","full_page"].map((e=>({key:e,title:(0,A.LQ)(e),body:(0,ne.jsxs)(ne.Fragment,{children:[(0,A.RI)(e),n&&t&&e===n&&(0,ne.jsx)("div",{style:{marginTop:2,fontWeight:500,color:o.blueColor},children:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Default for {view}",id:"database.viewPropertiesMenu.peekMode.defaultForView",values:{view:(0,s.Z)(t)}})})]}),icon:(0,A.RO)(e)({width:16,fill:o.mediumTextColor})})))}re.displayName="CollectionSettingsViewLayoutMenu";const le=(0,y.injectIntl)(re);function se(){return["small","medium","large"].map((e=>({key:e,title:F(e)})))}function ce(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(!o)throw new Error("View type was not defined.");return o}function de(e){return B.DL[ce(e)]}function pe(e){return B.oy[ce(e)]}function ue(e){return B._Y[ce(e)]}function me(e){const t=e.normalizedFormatStore.state,o=ue(e);if(o&&t)return t[o]}function he(e){let{collectionContextStore:t}=e;window.__c={n:"PageViewSetting"};const o=(0,r.O7)(),n=(0,i.VK)((()=>t.collectionViewStore()),[t]);return n?(0,ne.jsx)("div",{style:{padding:5},children:(0,ne.jsx)(X.Z,{showClearButton:!0,placeholder:"Enter page ID",focusInitial:!0,onChange:e=>{W.Z.setState({pageId:e.target.value})},onSubmit:e=>{const t=W.Z.state.pageId;t&&k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderPageViewSettings",environment:o,perform:e=>{C.FH({stores:[n],update:{page_pointer:{id:(0,h.Mt)(t),spaceId:e.spaceId,table:"block"}},transaction:e})}})}})}):null}function ge(e){let{collectionContextStore:t}=e;window.__c={n:"TimelineBySetting"};const o=(0,r.O7)(),n=(0,r.MO)(),a=(0,i.VK)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by}),[t]),l=(0,i.VK)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by_end}),[t]),s=(0,i.VK)((()=>t.permissionScopes.state),[t]),d=(0,i.VK)((()=>t.normalizedSchemaStore.state),[t]),p=(0,i.VK)((()=>t.collectionViewStore()),[t]),u=(0,i.VK)((()=>t.collectionStore()),[t]),m=(0,i.VK)((()=>null==u?void 0:u.getSchema()),[u]),h=(0,i.VK)((()=>null==u?void 0:u.getFormat()),[u]);if(!(a&&p&&u&&h&&m))return null;const S=d[a];return S?(0,ne.jsx)($.ZP,{popupType:n?ee.kQ.SlideUp:ee.kQ.Popup,alignmentToOrigin:$.vR.End,placementToOrigin:$.pO.Bottom,originGap:0,renderOrigin:e=>(0,ne.jsx)(E.Z,{title:l?(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Start date",id:"database.viewSettings.layoutTab.timelineStartDate.title"}):(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Show timeline by",id:"database.viewSettings.layoutTab.showTimelineByProperty.title"}),disabled:!s.canConfigureBlock,showChevron:!0,right:(0,ne.jsx)("div",{style:g.Z.textOverflowStyle,children:S.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:e=>{let r;return r=n?{menuType:K.og.ActionSheet}:{menuType:K.og.Popup,width:300},(0,ne.jsx)(J.Z,{...r,children:(0,ne.jsx)(q.Z,{schema:m,format:h,currentProperty:a,getProperties:()=>Object.keys(d).filter((e=>{const t=d[e];return t&&(0,c.Lt)(t)})),onAccept:n=>{n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineBySetting",environment:o,perform:e=>{f.Es({collectionViewStore:p,update:{timeline_by:n},transaction:e})}}),e.close(),x.wd({environment:o,collectionContextStore:t,action:"update_timeline_by",original_view_type:void 0,property_type:S[n].type}))}})})}}):null}function ye(e){let{collectionContextStore:t}=e;window.__c={n:"TimelineEndSetting"};const o=(0,r.O7)(),n=(0,r.MO)(),a=(0,i.VK)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by_end}),[t]),l=(0,i.VK)((()=>t.permissionScopes.state),[t]),s=(0,i.VK)((()=>t.normalizedSchemaStore.state),[t]),d=(0,i.VK)((()=>t.collectionViewStore()),[t]),p=(0,i.VK)((()=>t.collectionStore()),[t]),u=(0,i.VK)((()=>null==p?void 0:p.getSchema()),[p]),m=(0,i.VK)((()=>null==p?void 0:p.getFormat()),[p]);if(!(a&&d&&p&&m&&u))return null;const h=s[a];return h?(0,ne.jsx)($.ZP,{popupType:n?ee.kQ.SlideUp:ee.kQ.Popup,alignmentToOrigin:$.vR.End,placementToOrigin:$.pO.Bottom,originGap:0,renderOrigin:e=>(0,ne.jsx)(E.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"End date",id:"database.viewSettings.layoutTab.timelineEndDate.title"}),showChevron:!0,right:h.name,disabled:!l.canConfigureBlock,...e}),render:e=>{let r;return r=n?{menuType:K.og.ActionSheet}:{menuType:K.og.Popup,width:300},(0,ne.jsx)(J.Z,{...r,children:(0,ne.jsx)(q.Z,{schema:u,format:m,currentProperty:a,getProperties:()=>Object.keys(s).filter((e=>{const t=s[e];return t&&(0,c.Lt)(t)})),onAccept:n=>{n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineEndSetting",environment:o,perform:e=>{f.Es({collectionViewStore:d,update:{timeline_by_end:n},transaction:e})}}),e.close(),x.wd({environment:o,collectionContextStore:t,action:"update_timeline_by_end",original_view_type:void 0,property_type:h[n].type}))}})})}}):null}function Se(e){let{collectionContextStore:t}=e;window.__c={n:"CalendarBySetting"};const o=(0,r.O7)(),n=(0,r.MO)(),a=(0,i.VK)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.calendar_by}),[t]),l=(0,i.VK)((()=>t.permissionScopes.state),[t]),s=(0,i.VK)((()=>t.normalizedSchemaStore.state),[t]),d=(0,i.VK)((()=>t.collectionViewStore()),[t]),p=(0,i.VK)((()=>t.collectionStore()),[t]),u=(0,i.VK)((()=>null==p?void 0:p.getSchema()),[p]),m=(0,i.VK)((()=>null==p?void 0:p.getFormat()),[p]);if(!(a&&d&&p&&m&&u))return null;const h=s[a];return h?(0,ne.jsx)($.ZP,{popupType:n?ee.kQ.SlideUp:ee.kQ.Popup,alignmentToOrigin:$.vR.End,placementToOrigin:$.pO.Bottom,originGap:0,renderOrigin:e=>(0,ne.jsx)(E.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Show calendar by",id:"database.viewSettings.layoutTab.showCalendarByProperty.title"}),disabled:!l.canConfigureBlock,showChevron:!0,right:(0,ne.jsx)("div",{style:g.Z.textOverflowStyle,children:h.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:e=>{let r;return r=n?{menuType:K.og.ActionSheet}:{menuType:K.og.Popup,width:300},(0,ne.jsx)(J.Z,{...r,children:(0,ne.jsx)(q.Z,{schema:u,format:m,currentProperty:a,getProperties:()=>Object.keys(s).filter((e=>{const t=s[e];return t&&(0,c.Lt)(t)})),onAccept:n=>{n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderCalendarBySetting",environment:o,perform:e=>{f.Es({collectionViewStore:d,update:{calendar_by:n},transaction:e})}}),e.close(),x.wd({environment:o,collectionContextStore:t,action:"update_calendar_by",original_view_type:void 0,property_type:h[n].type}))}})})}}):null}function xe(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;window.__c={n:"TimelineTableProperties"};const n=(0,r.O7)(),a=((0,i.VK)((()=>t.normalizedFormatStore.state),[t]).timeline_table_properties||[]).filter((e=>Boolean(e.visible))).length,l=(0,i.VK)((()=>t.permissionScopes.state),[t]);return(0,ne.jsx)(E.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Table properties",id:"database.viewSettings.layoutTab.tablePropertiesButton.title"}),showChevron:!0,right:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"{propertiesShown} shown",id:"database.viewSettings.layoutTab.propertiesButton.propertiesShown.title",values:{propertiesShown:a}}),onClick:()=>{v.H4({collectionSettingsStore:o,item:{type:"properties",timelineViewTab:"table"}}),x.wd({environment:n,collectionContextStore:t,action:"click_timeline_table_properties"})},disabled:!l.canConfigureBlock})}function ve(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;window.__c={n:"BoardGroupByShortcuts"};const n=(0,r.O7)(),a=(0,i.VK)((()=>t.normalizedFormatStore.state.board_columns_by),[t]),l=(0,i.VK)((()=>t.normalizedSchemaStore.state),[t]),s=(0,i.VK)((()=>t.permissionScopes.state),[t]),c=(0,i.VK)((()=>(0,Z.h6)(n,t)),[t,n]);if(!a)return null;const d=l[a.property];return d?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(E.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Group by",id:"database.viewSettings.layoutTab.boardGroupByButton.title"}),showChevron:!0,right:d.name,onClick:()=>{v.H4({collectionSettingsStore:o,item:{type:"group",groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}}),x.wd({environment:n,collectionContextStore:t,action:"click_board_group_by",original_view_type:void 0,property_type:d.type})},disabled:!s.canConfigureBlock}),(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(y.FormattedMessage,{defaultMessage:"Color columns",id:"database.viewSettings.groupTab.colorColumns"}),on:!c,focused:!1,onClick:()=>{v.iN({environment:n,collectionContextStore:t})},disabled:!s.canConfigureBlock,textWrapperStyle:{opacity:1}})]}):null}},75544:(e,t,o)=>{o.d(t,{N:()=>J,Z:()=>ee});var n=o(43261),r=o.n(n),i=(o(67294),o(83355)),a=o(480),l=o(86628),s=o(49085),c=o(99036),d=o(80951),p=o(39068),u=o(6695),m=o(5257),h=o(39132),g=o(61061),y=o(47453),S=o(37612),x=o(72126),v=o(97880),f=o(82990),C=o(31412),b=o(8406),w=o(5149),k=o(87085),M=o(58023),j=o(96802),T=o(39699),P=o(52821),V=o(68641),_=o(65742),F=o(19124),Z=o(33929),B=o(18514),A=o(29798),I=o(73657),R=o(21269),L=o(13005),K=o(42917),D=o(54119),O=o(52275),N=o(79131),W=o(5145),H=o(73063),z=o(68894),E=o(32163),Q=o(89728),q=o(72495),G=o(86825),U=o(66957),Y=o(85893);const $=(0,C.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertiesTab.inputPlaceholder"},toggleFrozenColumnsAriaLabel:{defaultMessage:"Toggle frozen columns",id:"database.viewSettings.propertiesTab.toggleFrozenColumnsAriaLabel"},togglePropertyVisibilityAriaLabel:{defaultMessage:"Toggle property visibility",id:"database.viewSettings.propertiesTab.togglePropertyVisibilityAriaLabel"}});class X extends i.Z{constructor(){super(...arguments),this.storeTypes={inputStore:s.default.createClass(""),menuListStore:A.Z},this.handleHideAllClick=e=>{const{collectionContextStore:t}=this.props;b.wd({environment:this.environment,collectionContextStore:t,action:"click_hide_all_properties"}),ne({formatKey:e,visibility:!1},this.props.collectionContextStore,this.environment)},this.handleShowAllClick=e=>{const{collectionContextStore:t}=this.props;b.wd({environment:this.environment,collectionContextStore:t,action:"click_show_all_properties"}),ne({formatKey:e,visibility:!0},this.props.collectionContextStore,this.environment)},this.handlePropertyReorder=e=>{const{formatKey:t,newPropertyKeys:o}=e,{collectionContextStore:n}=this.props,r=n.collectionViewStore();if(!r)return;const i=n.normalizedFormatStore.state[t]||[],a=o.indexOf("group-header-hidden-property"),l=[...x.oA(o.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const o=i.find((t=>t.property===e));if(o)return a>=0?{...o,visible:Boolean(t<a)}:o}))),...i.filter((e=>!o.includes(e.property)))];T.createAndCommit({userAction:"CollectionSettingsViewProperties.handlePropertyReorder",environment:this.environment,perform:e=>{j.FH({stores:[r],update:{[t]:l},transaction:e})}}),b.wd({environment:this.environment,collectionContextStore:n,action:"reorder_properties",original_view_type:r.getType()}),this.stores.menuListStore.reset()},this.handleTogglePropertyVisibility=e=>{var t;const{formatKey:o,propertyFormat:n}=e,{collectionContextStore:r}=this.props,i=r.collectionViewStore();if(!i)return;const a=r.normalizedFormatStore.state,l=(a[o]||[]).filter((e=>e.property!==n.property)),s=l.filter((e=>e.visible)),c=l.filter((e=>!e.visible)),d={...n,visible:!n.visible},p=[...s,d,...c],u={...a,[o]:p};T.createAndCommit({userAction:"CollectionSettingsViewProperties.handleTogglePropertyVisibility",environment:this.environment,perform:e=>{M.iG({collectionViewStore:i,update:{format:u},transaction:e})}}),b.wd({environment:this.environment,collectionContextStore:r,action:"toggle_property_visibility",original_view_type:i.getType(),property_type:null===(t=i.getCollectionStore())||void 0===t||null===(t=t.getSchema()[d.property])||void 0===t?void 0:t.type}),this.clearInput()},this.handlePropertyClick=e=>{var t,o,n;const{collectionSettingsStore:r,collectionContextStore:i}=this.props,a=(null===(t=i.collectionStore())||void 0===t?void 0:t.getSchema())||i.normalizedSchemaStore.state||{},{formatKey:l,propertyFormat:s}=e;b.wd({environment:this.environment,collectionContextStore:i,action:"click_property",original_view_type:null==i||null===(o=i.collectionViewStore())||void 0===o?void 0:o.getType(),property_type:null===(n=a[s.property])||void 0===n?void 0:n.type}),w.H4({collectionSettingsStore:r,item:{type:"property",formatKey:l,property:s.property}})},this.handleViewDeletedPropertiesClick=()=>{const{collectionSettingsStore:e,collectionContextStore:t,timelineViewTab:o}=this.props;t.collectionStore()&&(b.wd({environment:this.environment,collectionContextStore:t,action:"click_deleted_properties"}),w.H4({collectionSettingsStore:e,item:{type:"deletedProperties",timelineViewTab:o}}))},this.handleNewPropertyClick=()=>{const{collectionContextStore:e}=this.props,t=e.collectionStore();t&&(b.wd({environment:this.environment,collectionContextStore:e,action:"click_new_property"}),w.wl({collectionSettingsStore:e.settingsStore,item:{type:"propertyType",propertyTypes:(0,P.TP)({isSyncedCollection:t.isSyncedCollection(),collectionContextStore:e,environment:this.environment}),onAccept:(t,o)=>{k.PW({environment:this.environment,propertyType:t,propertyName:o,collectionContextStore:e,from:"view_settings"})}}}))},this.handleTabChange=e=>{const{collectionSettingsStore:t,collectionContextStore:o}=this.props;b.wd({environment:this.environment,collectionContextStore:o,action:0===e?"click_properties_tab_timeline":"click_properties_tab_table"}),w.FK({collectionSettingsStore:t,item:{type:"properties",timelineViewTab:0===e?"timeline":"table"}}),this.clearInput()},this.handleShowTableClick=()=>{this.clearInput()}}renderComponent(){const{collectionContextStore:e,timelineViewTab:t}=this.props,{device:o}=this.environment,{inputStore:n,menuListStore:r}=this.stores,i=n.state,a=(0,V.WY)({collectionContextStore:e}),l=(0,V.jI)({timelineViewTab:t,collectionContextStore:e}),s=(0,_.d$)({environment:this.environment,isFullScreen:e.isFullScreen.state,isRootChild:e.isRootChild.state});return(0,Y.jsxs)(L.ZP,{...this.props,title:(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Properties",id:"database.viewSettings.propertiesTab.title"}),header:(0,Y.jsx)(q.Z,{children:(0,Y.jsx)(z.ZP,{focusInitial:!o.isMobile,value:i,showClearButton:!0,onChange:e=>{n.setState(e.target.value),r.setState({...r.state,focus:{section:0,indexLocal:0,indexGlobal:0}})},placeholder:Z.default.formatMessage($.inputPlaceholder)})}),footer:this.renderFooter(),children:["timeline"===a&&s&&this.renderTimelineControls(),l&&this.renderPropertyFormatList(l),(0,Y.jsx)(q.Z,{children:this.renderDeletedProperties()})]})}renderTimelineControls(){const{timelineViewTab:e,collectionContextStore:t}=this.props,o="timeline"===e?0:1;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(U.Z,{tabs:[(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Timeline",id:"database.viewSettings.propertiesTab.timelineProperties"},"database.viewSettings.propertiesTab.timelineProperties"),(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Table",id:"database.viewSettings.propertiesTab.tableProperties"},"database.viewSettings.propertiesTab.tableProperties")],selectedIndex:o,onChange:this.handleTabChange}),"table"===e&&(0,Y.jsx)(q.Z,{children:(0,Y.jsx)(J,{collectionContextStore:t,onClick:this.handleShowTableClick})})]})}renderPropertyFormatList(e){const{collectionContextStore:t}=this.props,o=t.permissionScopes.state,n=t.normalizedFormatStore.state,i=t.normalizedSchemaStore.state,{inputStore:a}=this.stores,l=a.state;let s=n[e]||[];if(l){let e=s.map((e=>{const t=(0,d.Qm)({schema:i,property:e.property});return null==t?void 0:t.name}));e=r().filter(l,e).map((e=>{let{original:t}=e;return t})),s=s.filter((t=>{const o=i[t.property];return o&&o.name&&e.includes(o.name)}))}const c=s.filter((e=>Boolean(e.visible))),p=s.filter((e=>!Boolean(e.visible))),u="timeline_table_properties"===e?"table":(0,V.WY)({collectionContextStore:t});return(0,Y.jsxs)(Y.Fragment,{children:[0===s.length&&(0,Y.jsx)(q.Z,{children:(0,Y.jsx)(I.Z,{caption:(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"No results",id:"database.viewSettings.propertiesTab.noResults"})})}),s.length>0&&(0,Y.jsx)(E.Z,{type:E.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,sections:x.oA([c.length>0&&{key:"visible_and_hidden_properties",render:t=>(0,Y.jsx)(q.Z,{...t,noTextOverflow:!0,isTitleUppercase:!1,title:(0,Y.jsx)(te,{viewType:u}),desktopTitleStyle:{height:19},right:!l&&o.canConfigureBlock&&(0,Y.jsx)(Q.Z,{isSmall:!0,shouldShrink:!0,isBlue:!0,style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>this.handleHideAllClick(e),children:(0,Y.jsx)(C.FormattedMessage,{id:"database.viewSettings.propertiesTab.hideAllProperties",defaultMessage:"Hide all"})}),children:this.renderPropertySortList({formatKey:e,visibleProperties:c,hiddenProperties:p,children:t.children})}),items:x.oA([...this.renderPropertySortListItems({formatKey:e,properties:c}),p.length>0&&{key:"group-header-hidden-property",render:t=>this.renderHiddenPropertySectionHeader({props:t,formatKey:e,children:(0,Y.jsx)(Y.Fragment,{})}),action:()=>{}},...this.renderPropertySortListItems({formatKey:e,properties:p})])},0===c.length&&p.length>0&&{key:"hidden_properties",render:t=>this.renderHiddenPropertySectionHeader({props:t,formatKey:e,children:this.renderPropertySortList({formatKey:e,visibleProperties:c,hiddenProperties:p,children:t.children})}),items:this.renderPropertySortListItems({formatKey:e,properties:p})}])})]})}renderHiddenPropertySectionHeader(e){const{props:t,formatKey:o,children:n}=e,{collectionContextStore:r}=this.props,i=r.permissionScopes.state,{inputStore:a}=this.stores,l=a.state,s="timeline_table_properties"===o?"table":(0,V.WY)({collectionContextStore:r});return(0,Y.jsx)(q.Z,{...t,noTextOverflow:!0,isTitleUppercase:!1,title:(0,Y.jsx)(oe,{viewType:s}),desktopTitleStyle:{height:19},right:!l&&i.canConfigureBlock&&(0,Y.jsx)(Q.Z,{isSmall:!0,shouldShrink:!0,isBlue:!0,style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>this.handleShowAllClick(o),children:(0,Y.jsx)(C.FormattedMessage,{id:"database.viewSettings.propertiesTab.showAllProperties",defaultMessage:"Show all"})}),style:{width:"100%",paddingBottom:0},children:n})}renderFooter(){const{collectionContextStore:e,timelineViewTab:t}=this.props,o=e.permissionScopes.state,n="timeline"===(0,V.WY)({collectionContextStore:e})&&"table"===t&&!(0,V.vw)({collectionContextStore:e}),r=o.canConfigureCollection&&!n;return(0,Y.jsxs)(q.Z,{topBorder:!0,children:[r&&(0,Y.jsx)(K.Z,{icon:y.R,title:(0,Y.jsx)(C.FormattedMessage,{id:"database.viewSettings.propertiesTab.newProperty",defaultMessage:"New property"}),isGray:!0,onClick:this.handleNewPropertyClick}),(0,Y.jsx)(R.Z,{href:(0,B.UY)("guides.databaseProperties"),title:(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Learn about properties",id:"database.viewSettings.propertiesTab.learnMoreButton.title"}),analyticsFrom:"view_settings_properties"})]})}renderPropertySortList(e){const{formatKey:t,visibleProperties:o,hiddenProperties:n,children:r}=e,i=x.oA([...o.map((e=>e.property)),o.length>0&&n.length>0&&{key:"group-header-hidden-property",draggable:!1},...n.map((e=>e.property))]);return this.canReorder()?(0,Y.jsx)(N.ZP,{direction:"vertical",keys:i,renderKey:(e,t)=>r[t],onDrop:(e,o)=>{this.handlePropertyReorder({formatKey:t,newPropertyKeys:e})}}):r}renderPropertySortListItems(e){const{formatKey:t,properties:o}=e;return x.oA(o.map((e=>this.renderPropertySortListItem({formatKey:t,propertyFormat:e}))))}renderPropertySortListItem(e){var t;const{formatKey:o,propertyFormat:n}=e,{collectionContextStore:r}=this.props,i=null===(t=r.collectionStore())||void 0===t?void 0:t.isSyncedCollection(),a=r.permissionScopes.state,l=!n.visible,s=r.normalizedSchemaStore.state,y=(0,d.Qm)({schema:s,property:n.property}),S="title"!==n.property||function(e,t){const o=t.normalizedFormatStore.state,n=(0,V.WY)({collectionContextStore:t});if("board"===n)return(0,u.Lw)(o.board_cover);if("gallery"===n)return(0,u.Lw)(o.gallery_cover);if("timeline"===n)return"timeline_table_properties"===e||(0,u.vP)(Boolean(o.timeline_show_table),o.timeline_table_properties||[]);return!1}(o,this.props.collectionContextStore);let x=!a.canConfigureCollection||i&&((0,d.wl)(n.property)||(0,c.HF)(n.property));if("collectionTypedView"===r.contextType&&a.canConfigureBlock&&(x=!1),!y)return;const{theme:v}=this;return{key:n.property,render:e=>(0,Y.jsx)(O.Z,{...e,title:(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[this.canReorder()&&(0,Y.jsx)(W.ZP,{iconSize:12,style:{marginRight:8}}),(0,Y.jsx)(p.ZP,{type:y.type,icon:y.icon,size:16,theme:v,style:{fill:v.regularIconColor}}),(0,Y.jsx)("span",{style:{marginLeft:8,...f.Z.textOverflowStyle},children:y.name}),(0,c.qQ)(y)&&(0,c.q3)(y)&&("text"===y.type||(0,F.KZ)())&&(0,Y.jsx)(D.Z,{})]}),right:(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Y.jsx)(H.Z,{icon:l?g.B:h.c,iconStyle:{width:16,height:16},isDarkIconColor:!l,onClick:()=>{this.handleTogglePropertyVisibility({formatKey:o,propertyFormat:n})},ariaLabel:this.props.intl.formatMessage($.togglePropertyVisibilityAriaLabel),disabled:!S||!a.canConfigureBlock}),!x&&(0,m.o)({width:12,fill:v.lightTextColor,marginLeft:5})]})}),action:()=>{x||this.handlePropertyClick({formatKey:o,propertyFormat:n})}}}renderDeletedProperties(){const{collectionContextStore:e}=this.props,t=e.normalizedDeletedSchemaStore.state,o=Object.keys(t).length;if(e.permissionScopes.state.canConfigureCollection&&o>0)return(0,Y.jsx)(K.Z,{icon:S.y,title:(0,Y.jsx)(C.FormattedMessage,{id:"database.viewSettings.propertiesTab.deletedProperties",defaultMessage:"Deleted properties"}),isGray:!0,onClick:this.handleViewDeletedPropertiesClick,right:o,showChevron:!0})}canReorder(){const{inputStore:e}=this.stores,t=e.state,{collectionContextStore:o}=this.props,n=o.permissionScopes.state;return!this.environment.device.isMobile&&n.canConfigureBlock&&!t}clearInput(){this.stores.inputStore.reset()}}function J(e){window.__c={n:"TimelineShowTableSwitcher"};const{collectionContextStore:t,onClick:o}=e,n=(0,a.O7)(),r=(0,l.Kw)(t.normalizedFormatStore),i=Boolean(r.timeline_show_table),s=(0,l.Kw)(t.permissionScopes);return(0,Y.jsx)(G.Z,{title:(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Show table",id:"database.viewSettings.propertiesTab.showTable"}),on:i,focused:!1,onClick:()=>{const e=t.collectionViewStore();e&&(T.createAndCommit({userAction:"CollectionSettingsViewProperties.TimelineShowTableSwitcher",environment:n,perform:t=>{j.FH({stores:[e],update:{timeline_show_table:!i,timeline_table_properties:[{property:"name",visible:!0}]},transaction:t})}}),null==o||o(),b.wd({environment:n,collectionContextStore:t,action:"timeline_toggle_show_table"}))},disabled:!s.canConfigureBlock,textWrapperStyle:{opacity:1}})}X.displayName="CollectionSettingsViewProperties";const ee=(0,C.injectIntl)(X);function te(e){let{viewType:t}=e;return"table"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Shown in table",id:"database.viewSettings.propertiesTab.shownInTableTitle"}):"timeline"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Shown in timeline",id:"database.viewSettings.propertiesTab.shownInTimelineTitle"}):"board"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Shown in board",id:"database.viewSettings.propertiesTab.shownInBoardTitle"}):"list"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Shown in list",id:"database.viewSettings.propertiesTab.shownInListTitle"}):"gallery"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Shown in gallery",id:"database.viewSettings.propertiesTab.shownInGalleryTitle"}):"calendar"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Shown in calendar",id:"database.viewSettings.propertiesTab.shownInCalendarTitle"}):"page"===t?null:void(0,v.t1)(t)}function oe(e){let{viewType:t}=e;return"table"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Hidden in table",id:"database.viewSettings.propertiesTab.hiddenInTableTitle"}):"timeline"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Hidden in timeline",id:"database.viewSettings.propertiesTab.hiddenInTimelineTitle"}):"board"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Hidden in board",id:"database.viewSettings.propertiesTab.hiddenInBoardTitle"}):"list"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Hidden in list",id:"database.viewSettings.propertiesTab.hiddenInListTitle"}):"gallery"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Hidden in gallery",id:"database.viewSettings.propertiesTab.hiddenInGalleryTitle"}):"calendar"===t?(0,Y.jsx)(C.FormattedMessage,{defaultMessage:"Hidden in calendar",id:"database.viewSettings.propertiesTab.hiddenInCalendarTitle"}):"page"===t?null:void(0,v.t1)(t)}function ne(e,t,o){const{formatKey:n,visibility:r}=e,i=t.collectionViewStore();if(!i)return;const a=t.normalizedFormatStore.state[n]||[],l=a.filter((e=>Boolean(e.visible))),s=a.filter((e=>!Boolean(e.visible))),c=[...l.map((e=>({...e,visible:r}))),...s.map((e=>({...e,visible:r})))];T.createAndCommit({userAction:"CollectionSettingsViewProperties.setAllPropertiesVisibility",environment:o,perform:e=>{j.FH({stores:[i],update:{[n]:c},transaction:e})}})}},75117:(e,t,o)=>{o.d(t,{Z:()=>D});var n=o(67294),r=o(83355),i=o(8848),a=o(63014),l=o(47453),s=o(37612),c=o(72126),d=o(31412),p=o(50906),u=o(12534),m=o(33929),h=o(87279),g=o(31339),y=o(42917),S=o(61053),x=o(480),v=o(60246),f=o(52275),C=o(31945),b=o(45959),w=o(77498),k=o(62045),M=o(50542),j=o(85893);class T extends r.Z{constructor(){super(...arguments),this.handleAccept=e=>{const{sort:t,collectionViewType:o}=this.props,n={...t,property:e};this.props.onChange(this.props.index,n),o&&p.wds(this.environment,{view_type:o,action:"set_sort_property"})}}renderComponent(){const{schema:e,sort:t}=this.props,o=e[t.property];if(o)return(0,j.jsxs)(n.Fragment,{children:[this.renderPropertyDropdown(o),(0,j.jsx)(V,{sort:this.props.sort,index:this.props.index,onChange:this.props.onChange,collectionViewType:this.props.collectionViewType,intl:this.props.intl,disabled:this.props.disabled})]})}renderPropertyDropdown(e){const{device:t}=this.environment,{disabled:o}=this.props;return(0,j.jsx)(C.ZP,{popupType:t.isMobile?C.Z4.SlideUp:C.Z4.Popup,renderOrigin:t=>(0,j.jsx)(M.Z,{...t,propertySchema:e,disabled:o,textWrapperStyle:{opacity:1}}),render:e=>(0,j.jsx)(w.Z,{isRelationProperty:!1,schema:this.props.schema,onAccept:this.handleAccept,onClose:e.close}),disabled:o})}}T.displayName="CollectionSortMenuRow";const P=(0,d.injectIntl)(T);function V(e){let{sort:t,index:o,onChange:n,collectionViewType:r,intl:i,disabled:a}=e;window.__c={n:"SortDirection"};const l=(0,x.O7)(),s=t.direction,c={ascending:(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Ascending",id:"collectionSortMenuRow.sortDirectionSelectMenu.ascending"}),descending:(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Descending",id:"collectionSortMenuRow.sortDirectionSelectMenu.descending"})},u={menuTitle:i.formatMessage({id:"collectionSortMenuRow.sortDirectionSelectMenu.title",defaultMessage:"Sort"}),items:[...v.C6],getKey:e=>e,selectedItem:s,disabled:a,onSelect:e=>{const i={...t,direction:e};n(o,i),r&&p.wds(l,{view_type:r,action:"set_sort_direction"})},renderItem:e=>(0,j.jsx)(f.Z,{title:c[e.value],...e}),renderOrigin:e=>(0,j.jsx)(k.Z,{...e,placeholder:i.formatMessage({id:"collectionSortMenuRow.sortDirectionSelectMenu.placeholder",defaultMessage:"Empty"}),title:s&&c[s],disabled:a,desktopStyle:{opacity:1}})};return(0,j.jsx)(b.Z,{...u,mobileActionSheet:!0},"direction")}var _=o(79131),F=o(73063),Z=o(78140),B=o(28992),A=o(53437),I=o(72495),R=o(26388);const L=(0,d.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.collectionSortMenu.inputPlaceholder"}});class K extends r.Z{constructor(){super(...arguments),this.handleDraggableListDrop=e=>{const{onChange:t}=this.props,{sorts:o}=this.props;t(c.oA(e.map((e=>o[parseInt(e)]))));const n=O(this.props.collectionViewStore);n&&p.wds(this.environment,{action:"reorder_sorts",view_type:n})},this.handleChangeSort=(e,t)=>{const{onChange:o}=this.props,{sorts:n}=this.props;o(n.map(((o,n)=>n===e?t:o)));const r=O(this.props.collectionViewStore);r&&p.wds(this.environment,{action:"update_sort",view_type:r})},this.handleDeleteSort=e=>{const{onChange:t}=this.props,{sorts:o}=this.props;t(o.filter(((t,o)=>o!==e)));const n=O(this.props.collectionViewStore);n&&p.wds(this.environment,{action:"delete_sort",view_type:n})},this.handleDeleteAllSortsClick=()=>{const{onChange:e,onDeleteAll:t}=this.props;e([]),null==t||t();const o=O(this.props.collectionViewStore);o&&p.wds(this.environment,{action:"delete_all_sorts",view_type:o})},this.handleNewPropertyAccept=e=>{var t;if(!e)return;const{schema:o,sorts:n,onChange:r}=this.props,i=null===(t=o[e])||void 0===t?void 0:t.type;r([...n,{property:e,direction:"ascending"}]);const a=O(this.props.collectionViewStore);a&&p.wds(this.environment,{action:"create_sort_accept",view_type:a,property_type:i})}}renderComponent(){const{device:e}=this.environment,{schema:t,format:o,sorts:n,showDeleteAll:r}=this.props,i=!!Object.keys(t).some((e=>!n.find((t=>t.property===e)))),a=r&&n.length>0;return(0,j.jsxs)(j.Fragment,{children:[this.renderSorts(),(i||a)&&(0,j.jsxs)(I.Z,{children:[i&&(0,j.jsx)(C.ZP,{popupType:e.isMobile?A.kQ.SlideUp:A.kQ.Popup,renderOrigin:e=>(0,j.jsx)(y.Z,{icon:l.R,isGray:!0,title:(0,j.jsx)(d.FormattedMessage,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"}),...e}),render:r=>{let i;return i=e.isMobile?{menuType:h.og.ActionSheet}:{menuType:h.og.Popup,width:280,height:287},(0,j.jsx)(Z.Z,{...i,children:(0,j.jsx)(S.Z,{schema:t,format:o,getProperties:()=>Object.keys(t).filter((e=>!n.find((t=>t.property===e)))),onAccept:e=>{this.handleNewPropertyAccept(e),r.close()},inputPlaceholder:m.default.formatMessage(L.inputPlaceholder)})})}}),a&&(0,j.jsx)(y.Z,{icon:s.y,isRed:!0,isGray:!0,title:(0,j.jsx)(d.FormattedMessage,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"}),onClick:this.handleDeleteAllSortsClick})]})]})}renderSorts(){const{device:e}=this.environment,{sorts:t}=this.props;if(e.isMobile)return t.map(((e,t)=>this.renderSort(e,t)));{const e=t.map(((e,t)=>t.toString()));return e.length>0&&(0,j.jsx)("div",{style:{marginBottom:2},children:(0,j.jsx)(_.ZP,{direction:"vertical",keys:e,renderKey:e=>this.renderSort(t[parseInt(e)],parseInt(e)),onDrop:this.handleDraggableListDrop})})}}renderSort(e,t){const{device:o}=this.environment,{schema:n,disabled:r,parentStore:i}=this.props;return o.isMobile?(0,j.jsxs)(I.Z,{children:[(0,j.jsx)(P,{index:t,sort:e,schema:n,parentStore:i,collectionViewType:O(this.props.collectionViewStore),onChange:this.handleChangeSort}),!r&&this.renderMobileDeleteButtonMenuItem(t)]},t):(0,j.jsx)(I.Z,{extraTopPadding:!0,desktopStyle:{padding:"8px 0 0 8px",width:"100%"},children:(0,j.jsx)(B.Z,{showDragHandle:!o.isMobile&&!r,title:(0,j.jsx)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},onMouseDown:u.$0,children:(0,j.jsx)(P,{index:t,sort:e,schema:n,parentStore:i,collectionViewType:O(this.props.collectionViewStore),onChange:this.handleChangeSort})}),right:!r&&this.renderDesktopDeleteButton(t)})},t)}renderMobileDeleteButtonMenuItem(e){return(0,j.jsx)(f.Z,{title:(0,j.jsx)("div",{style:{color:i.ZP.red},children:(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Delete",id:"database.viewSettings.sortTab.mobileDeleteButtonTitle"})}),icon:(0,j.jsx)(g.Z,{icon:s.y,styles:{color:i.ZP.red}}),onClick:()=>this.handleDeleteSort(e),focused:!1})}renderDesktopDeleteButton(e){return(0,j.jsx)(R.Z,{render:t=>(0,j.jsx)(F.Z,{icon:a.b,onClick:()=>this.handleDeleteSort(e),style:{marginRight:-6},...t}),renderTooltip:()=>(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Remove sort rule",id:"database.sortMenu.deleteButtonTooltip"})})}}K.displayName="CollectionSortMenu";const D=(0,d.injectIntl)(K);function O(e){return null==e?void 0:e.getType()}},69872:(e,t,o)=>{o.d(t,{L:()=>d,Z:()=>u});o(67294);var n=o(83355),r=o(39068),i=o(52821),a=o(87279),l=o(52275),s=o(28992),c=o(85893);let d=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});class p extends n.Z{renderComponent(){const{name:e,type:t,icon:o}=this.props.propertySchema,n=this.props.format===d.Name?e:i.SO[t],{theme:a}=this;return this.props.locked?(0,c.jsx)(s.Z,{title:n,icon:(0,c.jsx)(r.ZP,{icon:o,type:t,size:this.environment.device.isMobile?18:16,theme:a,style:{fill:a.regularIconColor}}),...this.props}):(0,c.jsx)(l.Z,{title:n,icon:(0,c.jsx)(r.ZP,{icon:o,type:t,size:this.environment.device.isMobile?18:16,theme:a,style:{fill:a.regularIconColor,marginLeft:6,marginRight:2}}),...this.props})}}p.displayName="PropertyMenuItem",p.DisplayFormat=d,p.contextTypes={...a.mw,...n.w};const u=p},66957:(e,t,o)=>{o.d(t,{Z:()=>p});var n=o(67294),r=o(480),i=o(86628),a=o(24405),l=o(87279),s=o(89728),c=o(85893);function d(e){let{tabs:t,selectedIndex:o,onChange:d,separatorIndexes:p,right:u,style:m,rightStyle:h,tabStyle:g,tabTitleStyle:y,tabBorderStyle:S,selectedTabStyle:x,readOnly:v,hideTabBorder:f}=e;window.__c={n:"TabBarMenuItem"};const C=(0,n.useContext)(l.Xp),{device:b,WindowSizeStore:w}=(0,r.O7)(),{safePaddingLeft:k,safePaddingRight:M}=(0,i.VK)((()=>({safePaddingLeft:w.getSafePaddingLeftCSS(16),safePaddingRight:w.getSafePaddingRightCSS(16)})),[w]),j=(0,a.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...g},o=`inset 0 -1px 0 ${e.regularDividerColor}`,n=C.menuType===l.og.Popup,r={fontSize:16,paddingTop:2,paddingLeft:n?16:k,paddingRight:n?16:M,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:f?void 0:o,...b.isMobile?r:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...m},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...x},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...S},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...h}}}),[C.menuType,b.isMobile,h,k,M,x,m,S,g,f]);return(0,c.jsxs)("div",{className:"hide-scrollbar",style:j.container,children:[t.map(((e,t)=>{const r=t===o;return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsxs)("div",{style:r?j.selectedTab:j.tab,children:[(0,c.jsx)(s.Z,{style:y,onClick:()=>d(t),disabled:v,mobileFeedback:b.isMobile,children:e}),r&&(0,c.jsx)("div",{style:j.border})]},`tabButton-${t}`),p&&p.includes(t)&&(0,c.jsx)("div",{style:j.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),u&&(0,c.jsx)("div",{style:j.rightContainer,children:u})]})}const p=n.memo(d)},60442:(e,t,o)=>{o.d(t,{Z:()=>a});o(67294);var n=o(82990),r=o(47853),i=o(85893);const a=function(e){let{imageURL:t,imageWidth:o,imageHeight:n,caption:a,title:s}=e;if(t){const e=(0,r.D)(t);return(0,i.jsxs)("div",{style:{width:o||200,marginTop:4,marginBottom:4},children:[(0,i.jsx)("div",{style:{width:"100%",height:n||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6}}),(0,i.jsx)(l,{caption:a,title:s})]})}return(0,i.jsx)(l,{caption:a,title:s,style:{width:o}})};function l(e){let{style:t,caption:o,title:r}=e;return(0,i.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[r&&(0,i.jsx)("header",{style:{fontWeight:n.Z.fontWeight.bold,marginBottom:4},children:r}),o]})}},72865:(e,t,o)=>{o.d(t,{D:()=>m});var n=o(67294),r=o(480),i=o(24405),a=o(97444),l=o(39699),s=o(43250),c=o(17809),d=o(24666),p=o(65187),u=o(85893);function m(e){window.__c={n:"SimpleFormulaValueTextInput"};const{value:t,disabled:o,onChange:m,multiline:h,placeholder:g,disableFormattingAndMentions:y,disableMobileActionBar:S,disableEmojiCommands:x,disableTemplateVariableMentions:v}=e,f=(0,r.O7)(),C=(0,i.yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:4,padding:h?"6px 10px":"4px 8px",overflow:"hidden",..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:h?{minHeight:60}:{whiteSpace:"pre"},placeholder:h?{minHeight:60}:{}})),[h]),b=(0,n.useCallback)((e=>{m({type:"simple",value:e})}),[m]),{store:w}=(0,c.Cl)({initialValue:null==t?void 0:t.value,onChange:b}),k=(0,n.useMemo)((()=>h?()=>{const e=d.default.state;"editing"===e.mode&&l.createAndCommit({userAction:"SimpleFormulaValueTextInput.handleEnter",environment:f,perform:t=>{a.hJ({environment:f,string:"\n",multiSelection:e.multiSelection,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})}:void 0),[f,h]);return(0,u.jsx)("div",{style:C.wrap,className:s.Wh_,children:(0,u.jsx)(p.Z,{placeholder:g,disabled:o,store:w,style:C.text,placeholderStyle:C.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:x,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:k,disableMobileActionBar:S,disableTemplateVariableMentions:v,...y?{disableDateMentions:!0,disableDateReminderMentions:!0,disableMentions:!0,disableStyleAnnotations:!0}:{}})})}},53498:(e,t,o)=>{o.d(t,{a:()=>be,K:()=>M});var n=o(67294),r=o(480),i=o(86628),a=o(66897),l=o(99036),s=o(80951),c=o(84619),d=o(78106),p=o(76218),u=o(149),m=o(19889),h=o(70203),g=o(97880),y=o(37867),S=o(60458),x=o(92864),v=o(89845),f=o(10009),C=o(22084),b=o(21396),w=o(75311),k=o(85893);function M(e){window.__c={n:"ValuePickerMenuToken"};const{token:t,contextStore:o,disabled:n,setCurrentTokens:M,currentSimpleFormulaValueTokens:j,context:T}=e,P=(0,r.Fy)(),V=(0,i.Kw)(o.compilationResultStore),_=(0,i.VK)((()=>{if((0,p.S3)(t)&&(0,h.IWo)(t)){const e=(0,h.zEN)(t);if(e)return(0,a.Hl)({pointer:{table:m.KJ,id:e},getRecordValue:o.context.parentRecordStore.getRecordValue})}}),[o.context.parentRecordStore,t]),F=(0,i.VK)((()=>(0,w._)(T)),[T]),Z=(0,i.VK)((()=>T.collectionStore.getSchema()[T.property]),[T]);if("string"==typeof t){if(!Z||!(0,l.t)(Z))return null;const e=(0,s.i7)((null==Z?void 0:Z.options)??[],t);if(!e)return(0,k.jsx)(y.Z,{isSingle:!1,showRemoveButton:!n,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))}},`deleted_option_value_${t}`);const o={value:e.value,color:e.color,isSingle:!1,showRemoveButton:!n,format:P.isMobile?c.lo.Medium:c.lo.Small,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))}};if((0,l.gB)(Z)){var B;const t=null===(B=Z.groups)||void 0===B||null===(B=B.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)})))||void 0===B?void 0:B.color;return(0,k.jsx)(C.F,{...o,groupColor:t})}return(0,k.jsx)(C.a,{...o})}if("boolean"==typeof t)return(0,k.jsx)(S.Z,{checked:t,disabled:!0,size:16,checkSize:12,style:{marginBottom:6}},t.toString());if((0,h.IWo)(t))return null!=_&&_.asActor?(0,k.jsx)(x.ZP,{actor:_,format:P.isMobile?x.ZP.Format.Medium:x.ZP.Format.Small,showRemoveButton:!n,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))},shouldShrink:!0,isSingle:!1},_.id):null;if((0,h.wjk)(t)){const e=(0,h.vmO)(t).id,o=u.x.isSuccess(V)?(0,d.vx)(V.value.valueTypes,e):void 0;return o?(0,k.jsx)(b.F,{value:o,format:c.lo.Small,isSingle:!1,shouldShrink:!0,showRemoveButton:!n,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))}}):null}if((0,h.fpG)(t)){const e=j[0],t=e&&(0,p.S3)(e)&&(0,h.fpG)(e)?(0,h.zyO)(e):void 0;return t?(0,k.jsx)(v.Z,{value:t,dateFormat:F.dateFormat,timeFormat:F.timeFormat,style:{marginBottom:6}}):null}if((0,h.STW)(t)){const e=(0,h.TOT)(t);return e?(0,k.jsx)(f.Z,{format:P.isMobile?c.lo.Medium:c.lo.Small,blockId:e,shouldWrap:!1,shouldShrink:!0,isSingle:!1,parentStore:o.context.parentRecordStore,showRemoveButton:!n,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))}},e):null}(0,g.t1)(t)}o(57658);var j=o(23790),T=o(84116),P=o(58573),V=o(59054),_=o(72126),F=o(31412),Z=o(31299),B=o(17809),A=o(87279),I=o(29798),R=o(78140),L=o(32163),K=o(43765),D=o(40721),O=o(72495),N=o(78948),W=o(47082),H=o(30387),z=o(32426),E=o(24405),Q=o(5257),q=o(52275);function G(e){window.__c={n:"IconMenuItem"};const t=(0,E.yK)((e=>({icon:{width:14,fill:e.mediumIconColor},chevronRight:{width:12,fill:e.mediumIconColor}})),[]);return(0,k.jsx)(q.Z,{icon:e.icon(t.icon),title:e.title,focused:!1,right:(0,Q.o)(t.chevronRight),onClick:e.onClick})}function U(e){window.__c={n:"CustomFormulaItem"};const{value:t,onChange:o}=e,r=(0,n.useCallback)((()=>{o({type:"formula",value:null==t?void 0:t.value})}),[t,o]);return(0,k.jsx)(G,{icon:z.D,title:(0,k.jsx)(F.FormattedMessage,{...H.s.customFormula}),onClick:r})}o(21703);var Y=o(21202),$=o(26350),X=o(11470),J=o(26388);function ee(e){window.__c={n:"ValuePickerMenuItem"};const{token:t,contextStore:o,args:n,checkState:y,checkType:v,context:f,onCheckboxClick:w}=e,M=(0,r.Fy)(),j=(0,i.VK)((()=>o.context.parentRecordStore.getSpaceId()),[o.context.parentRecordStore]),T=(0,i.VK)((()=>{if((0,p.S3)(t)&&(0,h.IWo)(t)){const e=(0,h.zEN)(t);if(e)return(0,a.Hl)({pointer:{table:m.KJ,id:e},getRecordValue:o.context.parentRecordStore.getRecordValue})}}),[o.context.parentRecordStore,t]),P=(0,i.VK)((()=>f.collectionStore.getSchema()[f.property]),[f]),V=(0,i.VK)((()=>P&&(0,l.t)(P)?P.options??[]:[]),[P]),_=(0,i.VK)((()=>P&&(0,l.gB)(P)?P.groups??[]:[]),[P]),F=(0,i.Kw)(o.compilationResultStore),Z=Boolean(P&&(0,l.gB)(P)),B="single"===v?{checkState:y}:{icon:(0,k.jsx)(S.Z,{checked:y,size:14,onClick:w})};if("string"==typeof t){if(Z){const e=(0,s.i7)(V,t),o=_.find((t=>{var o;return e&&(null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id))}));return e?(0,k.jsx)(q.Z,{...n,...B,title:(0,k.jsx)(C.F,{format:M.isMobile?c.lo.Large:c.lo.Small,isSingle:!0,value:e.value,color:e.color,groupColor:null==o?void 0:o.color,shouldShrink:!0,showRemoveButton:!1},t),isTokenTitle:!0,...n}):null}{const e=(0,s.i7)(V,t);return e?(0,k.jsx)(q.Z,{...n,...B,title:(0,k.jsx)(C.a,{value:e.value,color:e.color,showRemoveButton:!1,isSingle:!0,shouldShrink:!0,format:M.isMobile?c.lo.Large:c.lo.Small}),isTokenTitle:!0,...n}):null}}if("boolean"==typeof t)return null;if((0,h.IWo)(t))return null!=T&&T.asActor&&T.table===m.KJ?(0,k.jsx)(q.Z,{...n,...B,title:(0,k.jsx)(x.vw,{isSingle:!0,shouldShrink:!0,format:M.isMobile?x.vw.Format.Large:x.vw.Format.Medium,userValue:T.asActor}),isTokenTitle:!0}):null;if((0,h.wjk)(t)){const e=(0,h.vmO)(t).id,o=u.x.isSuccess(F)?(0,d.vx)(F.value.valueTypes,e):void 0;return o?(0,k.jsx)(q.Z,{...B,title:(0,k.jsx)(J.Z,{renderTooltip:()=>(0,b.e)(o),placement:J.Z.Placement.Right,render:e=>(0,k.jsx)("div",{style:{display:"flex"},...e,children:(0,k.jsx)(b.F,{value:o,format:c.lo.Medium,isSingle:!0,shouldShrink:!0})})}),...n}):null}if((0,h.fpG)(t))return null;if((0,h.STW)(t)){const e=(0,h.TOT)(t);if(!e)return null;if(!j)return null;const r=$.G.createChildStore(o.context.parentRecordStore,{table:Y.iU,id:e,spaceId:j});return(0,k.jsx)(X.Z,{store:r,checkState:y,hidePath:!0,...n})}(0,g.t1)(t)}function te(e){const{currentSimpleFormulaValueTokens:t,value:o,contextStore:n,setCurrentTokens:r,action:i,context:a,checkType:l,onCheckboxClick:s}=e;if(o.kind!==T.yp.ContextValue)throw new Error("Not implemented yet.");const c=Boolean(t.find((e=>(0,p.S3)(e)&&(0,h.wjk)(e)&&(0,h.vmO)(e).id===o.id))),d=(0,h._QF)({id:o.id}),u=()=>{r("append"===i?c?(0,p.Ck)(t,d):[...t,d]:[d]),null==s||s()};return{key:o.id,render:e=>(0,k.jsx)(ee,{token:d,contextStore:n,args:e,checkState:c,checkType:l,context:a,onCheckboxClick:u}),action:u}}function oe(e){var t,o;window.__c={n:"ValuePickerMenuBlockArray"};const{currentSimpleFormulaValueTokens:a,menuProps:s,onClose:c,onChange:d,contextStore:u,formulaTypecheckContextValues:m,context:g,showClearButton:y,showInputMenuItem:S,type:x}=e,v=(0,r.Fy)(),f=(0,F.useIntl)(),C=(0,r.O7)(),[b,z]=(0,n.useState)(""),E=(0,i.qz)(void 0,I.Z),{collectionStore:Q,property:q}=g,G=(0,w.M)(Q,q),Y=G(a,"first"),$=(0,i.VK)((()=>Q.getSchema()[g.property]),[Q,g.property]),X=(0,i.VK)((()=>!(!$||!(0,l.en)($))&&1===$.limit),[$]),J=(0,n.useMemo)((()=>{const e="relation"===(null==$?void 0:$.type)?(0,l.j0)($):void 0;return m.filter((t=>(0,j.uy)(t.type,{type:"block",collection:e},!0)))}),[m,$]),[oe]=(0,V.r5)((async()=>{const e=b?(0,P.ZP)(b,J,(e=>e.kind===T.yp.ContextValue?e.name:"")):J,{results:t}=await Z.df({environment:C,query:b,collectionId:x.collection.id,limit:20,spaceId:x.collection.spaceId,excludeTemplates:!0,source:"simple_formula_value_page_search",includePublicPagesWithoutExplicitAccess:!1,boostRecentlyViewedPages:!1});return{valueResults:e,pageResults:t}}),[C,b,J,x],{debounce:Z.vp}),ne=(0,n.useCallback)((()=>{z(""),E.setState({...E.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[E]),re=(0,n.useCallback)((e=>{const t=G(e,"last");d({type:"simple",value:(0,p.iC)(t)}),ne(),X&&c()}),[G,d,ne,X,c]),ie=(0,i.VK)((()=>(0,B.NY)()),[]),ae=_.oA(Y.map(((e,t)=>(0,k.jsx)(M,{token:e,contextStore:u,disabled:!1,currentSimpleFormulaValueTokens:Y,setCurrentTokens:re,context:g},t)))),le=(0,k.jsx)(W.Z,{focus:!v.isMobile||void 0,focusAfterAnimation:!0,format:W.Z.Format.FilterValue,tokens:ae,placeholder:f.formatMessage(H.s.pageSearchPlaceholder),onRemoveLastToken:()=>{re(Y.slice(0,Y.length-1))},onClearButtonClick:()=>{re([])},value:b,onChange:e=>{z(e.target.value)},dontShowBorderBottom:v.isAndroid,showClearButton:y}),se=void 0!==(null==s?void 0:s.header)?s.header:(0,k.jsx)(O.Z,{style:{paddingBottom:0},title:f.formatMessage(H.s.genericMenuHeader)});let ce;ce=v.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(D.DoneMenuText,{}),onClickRight:c}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,paddingTop:0,footer:ie&&(0,k.jsx)(O.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const de={...ce,...s,header:v.isMobile?null:se},pe=X?"single":"multi",ue=[],me=[..._.oA(((null===(t=oe.value)||void 0===t?void 0:t.valueResults)||[]).map((e=>te({currentSimpleFormulaValueTokens:Y,value:e,setCurrentTokens:re,contextStore:u,action:"append",context:g,checkType:pe})))),..._.oA(((null===(o=oe.value)||void 0===o?void 0:o.pageResults)||[]).map((e=>{const t=Boolean(Y.find((t=>(0,p.S3)(t)&&(0,h.STW)(t)&&(0,h.TOT)(t)===e))),o=(0,h.$0A)(e,x.collection.spaceId),n=()=>{re(t?(0,p.Ck)(Y,o):[...Y,o])};return{key:e,render:e=>(0,k.jsx)(ee,{token:o,contextStore:u,args:e,checkState:t,checkType:pe,context:g,onCheckboxClick:n}),action:n}})))];if(S){const e=Boolean(se);ue.push({key:"search-input",render:t=>(0,k.jsx)(O.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>le}]})}if(me.length>0){const e=Boolean(se)||S;ue.push({key:"values",render:t=>(0,k.jsx)(O.Z,{topBorder:e,...t}),items:me})}return(0,k.jsxs)(R.Z,{...de,children:[oe.error&&(0,k.jsx)(O.Z,{children:(0,k.jsx)(K.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.somethingWentWrong})})}),0===ue.length&&oe.value&&(0,k.jsx)(O.Z,{children:(0,k.jsx)(K.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.noResults})})}),!oe.value&&!oe.error&&(0,k.jsx)(O.Z,{children:(0,k.jsx)(N.Z,{})}),ue.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:ue,store:E})]})}function ne(e){window.__c={n:"ValuePickerMenuCheckbox"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:a,formulaTypecheckContextValues:l,menuProps:s,onChange:c,onClose:d}=e,u=(0,F.useIntl)(),m=(0,r.Fy)(),h=l.filter((e=>"checkbox"===e.type.type)),g=(0,n.useCallback)((e=>{c({type:"simple",value:void 0!==e[0]?(0,p.YD)(e[0]):void 0})}),[c]),y=(0,n.useCallback)((e=>{g(e),d()}),[g,d]),S=(0,i.VK)((()=>(0,B.NY)()),[]),x=_.oA(h.map((e=>te({currentSimpleFormulaValueTokens:a,value:e,setCurrentTokens:y,contextStore:o,action:"replace",context:t,checkType:"single"})))),v=[],f=a.some((e=>!0===e)),C=[...x,...[{key:0,render:e=>(0,k.jsx)(q.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.unchecked}),checkState:!f,...e}),action:()=>{y([!1])}},{key:1,render:e=>(0,k.jsx)(q.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.checked}),checkState:f,...e}),action:()=>{y([!0])}}]],b=void 0!==(null==s?void 0:s.header)?s.header:(0,k.jsx)(O.Z,{style:{paddingBottom:0},title:u.formatMessage(H.s.genericMenuHeader)}),w=Boolean(b);let M;v.push({key:"checkbox",render:e=>(0,k.jsx)(O.Z,{...e,topBorder:w}),items:C}),M=m.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(D.DoneMenuText,{}),onClickRight:d}:{header:b,menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:S&&(0,k.jsx)(O.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const j={...M,...s,header:m.isMobile?null:b};return(0,k.jsx)(R.Z,{...j,children:(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:v})})}var re=o(53016),ie=o(40506),ae=o(12392),le=o(28020),se=o(77907),ce=o(73063),de=o(89728);function pe(e){window.__c={n:"ValueDatePicker"};const{currentSimpleFormulaValueTokens:t,disabled:o,setInDatePicker:r,onClose:a,setCurrentTokens:l,context:s}=e,c=t[0],d=c&&(0,p.S3)(c)&&h.fpG(c)?h.zyO(c):void 0,u=(0,F.useIntl)(),m=(0,i.Kw)(le.AK),g=(0,n.useCallback)((()=>{r(!1)}),[r]),y=(0,n.useCallback)((e=>{e&&(0,ie.U3)(e)?l([h.pZr(e)]):l([])}),[l]),S=(0,E.yK)((e=>({header:{display:"flex",alignItems:"center",fontSize:12,paddingInline:14,color:e.mediumTextColor,marginTop:8,fontWeight:500},iconWrap:{width:18,height:18,marginRight:4},icon:{width:12,height:12},title:{flex:"1 1 auto"}})),[]),x=(0,i.VK)((()=>(0,w._)(s)),[s]);return(0,k.jsx)(se.DependencyConsumer,{dependency:se.deps.menus,children:e=>{let{DatePropertyMenu:t}=e;return(0,k.jsx)(t,{firstDayOfWeek:m,value:d,canConfigureCollection:!1,onChangeValue:y,dateFormat:x.dateFormat,timeFormat:x.timeFormat,onDismiss:a,disabled:o,shouldShowReminder:!1,header:(0,k.jsxs)("div",{style:S.header,children:[(0,k.jsx)(ce.Z,{ariaLabel:u.formatMessage(H.s.back),icon:ae.S,onClick:g,style:S.iconWrap,iconStyle:S.icon}),(0,k.jsx)("span",{style:S.title,children:(0,k.jsx)(F.FormattedMessage,{...H.s.pickADate})}),(0,k.jsx)(de.Z,{onClick:a,isBlue:!0,children:(0,k.jsx)(D.DoneMenuText,{})})]}),isTemplatePage:!1})}})}function ue(e){window.__c={n:"ValuePickerMenuDate"};const{currentSimpleFormulaValueTokens:t,onClose:o,onChange:a,contextStore:l,formulaTypecheckContextValues:s,context:c,menuProps:d}=e,u=(0,F.useIntl)(),m=(0,r.Fy)(),[h,g]=(0,n.useState)(!1),y=s.filter((e=>"date"===e.type.type)),S=(0,n.useCallback)((e=>{a({type:"simple",value:void 0!==e[0]?(0,p.YD)(e[0]):void 0})}),[a]),x=(0,n.useCallback)((e=>{S(e),o()}),[S,o]),v=(0,n.useCallback)((()=>{g(!0)}),[]),f=(0,n.useCallback)((()=>{S([]),o()}),[S,o]),C=(0,i.VK)((()=>(0,B.NY)()),[]);if(h)return(0,k.jsx)(pe,{...e,setInDatePicker:g,setCurrentTokens:S,currentSimpleFormulaValueTokens:t});const b=void 0!==(null==d?void 0:d.header)?d.header:(0,k.jsx)(O.Z,{style:{paddingBottom:0},title:u.formatMessage(H.s.genericMenuHeader)}),w=_.oA(y.map((e=>te({currentSimpleFormulaValueTokens:t,value:e,setCurrentTokens:x,contextStore:l,action:"replace",context:c,checkType:"single"})))),M=[];if(w.length>0){const e=Boolean(b);M.push({key:"values",render:t=>(0,k.jsx)(O.Z,{topBorder:e,...t}),items:w})}const j=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(O.Z,{topBorder:!0,children:[(0,k.jsx)(G,{icon:re.V,title:(0,k.jsx)(F.FormattedMessage,{...H.s.pickADate}),onClick:v}),C&&(0,k.jsx)(U,{...e})]}),t.length>0&&(0,k.jsx)(O.Z,{topBorder:!0,children:(0,k.jsx)(q.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.clear}),focused:!1,onClick:f})})]});let T;T=m.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(D.DoneMenuText,{}),onClickRight:o,footer:j}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:j,disableHeaderBorder:!0};const P={...T,...d,header:m.isMobile?null:b};return(0,k.jsx)(R.Z,{...P,children:(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:M})})}var me=o(68894);function he(e){window.__c={n:"ValuePickerMenuNumber"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:a,formulaTypecheckContextValues:l,menuProps:s,onChange:c,onClose:d,value:u}=e,m=(0,F.useIntl)(),g=(0,r.Fy)(),y=l.filter((e=>"number"===e.type.type)),S=(0,n.useCallback)((e=>{c({type:"simple",value:e})}),[c]),x=(0,n.useCallback)((e=>{S(e),d()}),[S,d]),v=(0,n.useCallback)((e=>{const t=e.target.value;let o;o=""===t?void 0:[[t]],S(o)}),[S]),f=(0,n.useCallback)((e=>{const t=_.U2(e,"event.target.value");let o;o="string"==typeof t&&""!==t?[[t]]:void 0,x(o)}),[x]),C=(0,n.useCallback)((e=>{const t=void 0!==e[0]?(0,p.YD)(e[0]):void 0;x(t)}),[x]),b=(0,i.VK)((()=>(0,B.NY)()),[]),w=[],M=[...[{action:f,key:"input",render:e=>{const t=a[0],o="string"==typeof t?t:(0,h.QaF)(null==u?void 0:u.value);return(0,k.jsx)(me.ZP,{...e,focus:!0,onChange:v,onClick:void 0,value:o})}}],..._.oA(y.map((e=>te({currentSimpleFormulaValueTokens:a,value:e,setCurrentTokens:C,contextStore:o,action:"replace",context:t,checkType:"single"}))))],j=void 0!==(null==s?void 0:s.header)?s.header:(0,k.jsx)(O.Z,{style:{paddingBottom:0},title:m.formatMessage(H.s.genericMenuHeader)});let T;w.push({key:"textbox",render:e=>(0,k.jsx)(O.Z,{...e}),items:M}),T=g.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(D.DoneMenuText,{}),onClickRight:d}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:b&&(0,k.jsx)(O.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const P={...T,...s,header:g.isMobile?null:j};return(0,k.jsx)(R.Z,{...P,children:(0,k.jsx)(L.Z,{initialFocus:0,sections:w,type:L.i.Vertical})})}var ge=o(1302);function ye(e){var t,o;window.__c={n:"ValuePickerMenuPersonArray"};const{context:a,contextStore:s,currentSimpleFormulaValueTokens:c,formulaTypecheckContextValues:d,menuProps:u,onChange:m,onClose:g,showClearButton:y,showInputMenuItem:S}=e,x=(0,r.Fy)(),v=(0,F.useIntl)(),f=(0,r.O7)(),{collectionStore:C,property:b}=a,[z,E]=(0,n.useState)(""),Q=(0,i.qz)(void 0,I.Z),q=(0,w.M)(C,b),G=q(c,"first"),Y=(0,i.VK)((()=>{const e=C.getSchema()[a.property];return!(!e||!(0,l.en)(e))&&1===e.limit}),[C,a]),$=d.filter((e=>(0,j.uy)(e.type,{type:"person"}))),[X]=(0,V.r5)((async()=>({valueResults:z?(0,P.ZP)(z,$,(e=>e.kind===T.yp.ContextValue?e.name:"")):$,userResults:(await Z.Yu({environment:f,query:z,membersOnly:!1})).map((e=>e.id)).slice(0,20)})),[f,z,$],{debounce:Z.vp}),J=(0,n.useCallback)((()=>{E(""),Q.setState({...Q.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[Q]),oe=(0,n.useCallback)((e=>{const t=q(e,"last");m({type:"simple",value:(0,p.iC)(t)}),J()}),[m,J,q]),ne=(0,i.VK)((()=>(0,B.NY)()),[]),re=_.oA(G.map(((e,t)=>(0,k.jsx)(M,{token:e,contextStore:s,disabled:!1,currentSimpleFormulaValueTokens:G,setCurrentTokens:oe,context:a},t)))),ie=(0,k.jsx)(W.Z,{focus:!x.isMobile||void 0,focusAfterAnimation:!0,format:W.Z.Format.FilterValue,tokens:re,placeholder:v.formatMessage(H.s.personSearchPlaceholder),onRemoveLastToken:()=>{oe(G.slice(0,G.length-1))},onClearButtonClick:()=>{oe([])},value:z,onChange:e=>{E(e.target.value)},dontShowBorderBottom:x.isAndroid,showClearButton:y}),ae=void 0!==(null==u?void 0:u.header)?u.header:(0,k.jsx)(O.Z,{style:{paddingBottom:0},title:v.formatMessage(H.s.genericMenuHeader)});let le;le=x.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(D.DoneMenuText,{}),onClickRight:g}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:ne&&(0,k.jsx)(O.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const se={...le,...u,header:x.isMobile?null:ae},ce=Y?"single":"multi",de=[..._.oA(((null===(t=X.value)||void 0===t?void 0:t.valueResults)||[]).map((e=>te({currentSimpleFormulaValueTokens:G,value:e,setCurrentTokens:oe,contextStore:s,action:"append",context:a,checkType:ce,onCheckboxClick:()=>{Y&&ge.default.afterNextFlush((()=>{g()}))}})))),..._.oA(((null===(o=X.value)||void 0===o?void 0:o.userResults)||[]).map((e=>{const t=Boolean(G.find((t=>(0,p.S3)(t)&&(0,h.IWo)(t)&&(0,h.zEN)(t)===e))),o=(0,h.tEo)(e),n=()=>{oe(t?(0,p.Ck)(G,o):[...G,o]),Y&&ge.default.afterNextFlush((()=>{g()}))};return{key:e,render:e=>(0,k.jsx)(ee,{token:o,contextStore:s,args:e,checkState:t,checkType:ce,context:a,onCheckboxClick:n}),action:n}})))],pe=[];if(S){const e=Boolean(ae);pe.push({key:"search-input",render:t=>(0,k.jsx)(O.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>ie}]})}if(de.length>0){const e=Boolean(ae)||S;pe.push({key:"users",render:t=>(0,k.jsx)(O.Z,{topBorder:e,...t}),items:de})}return(0,k.jsxs)(R.Z,{...se,children:[X.error&&(0,k.jsx)(O.Z,{children:(0,k.jsx)(K.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.somethingWentWrong})})}),0===pe.length&&X.value&&(0,k.jsx)(O.Z,{children:(0,k.jsx)(K.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.noResults})})}),!X.value&&!X.error&&(0,k.jsx)(O.Z,{children:(0,k.jsx)(N.Z,{})}),pe.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:pe,store:Q})]})}function Se(e){window.__c={n:"ValuePickerMenuSelect"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:a,formulaTypecheckContextValues:s,isSingle:c,menuProps:d,onChange:u,onClose:m,showClearButton:h,showInputMenuItem:y,type:S}=e,x=(0,r.Fy)(),v=(0,F.useIntl)(),[f,C]=(0,n.useState)(""),b=(0,i.qz)(void 0,I.Z),w=$.NW.createChildStore(o.context.parentRecordStore,S.collection),V=(0,i.VK)((()=>w.getSchema()[S.property]),[w,S]),Z=(0,i.VK)((()=>V&&(0,l.gB)(V)?V.groups??[]:[]),[V]),N=(0,i.VK)((()=>V&&(0,l.t)(V)&&V.options||[]),[V]),z=s.filter((e=>(0,j.uy)(e.type,{type:"select",collection:S.collection,property:S.property}))),E=(0,i.VK)((()=>({valueResults:f?(0,P.ZP)(f,z,(e=>e.kind===T.yp.ContextValue?e.name:"")):z,selectResults:f?(0,P.ZP)(f,N,(e=>e.value)):N})),[f,z,N]),Q=(0,n.useCallback)((()=>{C(""),b.setState({...b.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[b]),q=(0,n.useCallback)((e=>{u({type:"simple",value:c?(0,p.YD)(e[0]):(0,p.iC)(e)}),Q()}),[u,Q,c]),G=(0,i.VK)((()=>(0,B.NY)()),[]),Y=_.oA(a.map(((e,n)=>(0,k.jsx)(M,{token:e,contextStore:o,disabled:!1,currentSimpleFormulaValueTokens:a,setCurrentTokens:q,context:t},n)))),X=void 0!==(null==d?void 0:d.header)?d.header:(0,k.jsx)(O.Z,{style:{paddingBottom:0},title:v.formatMessage(H.s.genericMenuHeader)}),J=(0,k.jsx)(W.Z,{focus:!x.isMobile||void 0,focusAfterAnimation:!0,format:W.Z.Format.FilterValue,tokens:Y,placeholder:v.formatMessage(H.s.searchPlaceHolder),onRemoveLastToken:()=>{q(a.slice(0,a.length-1))},onClearButtonClick:()=>{q([])},value:f,onChange:e=>{C(e.target.value)},dontShowBorderBottom:x.isAndroid,showClearButton:h}),oe=[];if(y){const e=Boolean(X);oe.push({key:"search-input",render:t=>(0,k.jsx)(O.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>J}]})}const ne=Boolean(V&&(0,l.gB)(V)),re={automationContextValues:E.valueResults??[],onClose:m,context:t,contextStore:o,currentSimpleFormulaValueTokens:a,isSingle:c,groupOptions:Z,selectOptions:E.selectResults??[],setCurrentTokens:q},ie=ne?function(e){const{automationContextValues:t,onClose:o,context:n,contextStore:r,currentSimpleFormulaValueTokens:i,isSingle:a,groupOptions:l,selectOptions:s,setCurrentTokens:c}=e,d=[],u=a?"single":"multi",m=_.oA(t.map((e=>te({currentSimpleFormulaValueTokens:i,value:e,setCurrentTokens:c,contextStore:r,action:a?"replace":"append",context:n,checkType:u,onCheckboxClick:()=>{a&&ge.default.afterNextFlush((()=>{o()}))}}))));m.length>0&&d.push({key:"automation-variables",render:e=>(0,k.jsx)(O.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.valuesFromThisAutomation}),topBorder:!0,...e}),items:m});const h=new Map(s.map((e=>[e.id,e]))),y=l.map((e=>{const t=(e.optionIds??[]).map((e=>h.get(e))).filter(g.$K).map((e=>{const t=Boolean(i.find((t=>"string"==typeof t&&t===e.value))),l=()=>{c(a?t?[]:[e.value]:t?(0,p.Ck)(i,e.value):[...i,e.value]),a&&ge.default.afterNextFlush((()=>{o()}))};return{key:e.id,render:o=>(0,k.jsx)(ee,{token:e.value,contextStore:r,args:o,checkState:t,checkType:u,context:n,onCheckboxClick:l}),action:l}}));return{key:e.id,items:t,render:t=>(0,k.jsx)(O.Z,{title:e.name,topBorder:!0,...t})}})).filter((e=>e.items.length>0));return d.push(...y),d}(re):function(e){const{automationContextValues:t,onClose:o,context:n,contextStore:r,currentSimpleFormulaValueTokens:i,isSingle:a,selectOptions:l,setCurrentTokens:s}=e,c=[],d=a?"single":"multi",u=_.oA(t.map((e=>te({currentSimpleFormulaValueTokens:i,value:e,setCurrentTokens:s,contextStore:r,action:a?"replace":"append",context:n,checkType:d,onCheckboxClick:()=>{a&&ge.default.afterNextFlush((()=>{o()}))}})))),m=_.oA(l.map((e=>{const t=Boolean(i.find((t=>"string"==typeof t&&t===e.value))),l=()=>{s(a?t?[]:[e.value]:t?(0,p.Ck)(i,e.value):[...i,e.value]),a&&ge.default.afterNextFlush((()=>{o()}))};return{key:e.id,render:o=>(0,k.jsx)(ee,{token:e.value,contextStore:r,args:o,checkState:t,checkType:d,context:n,onCheckboxClick:l}),action:l}}))),h=[...u,...m];h.length>0&&c.push({key:"options",render:e=>(0,k.jsx)(O.Z,{topBorder:!0,...e}),items:h});return c}(re);let ae;oe.push(...ie),ae=x.isMobile?{menuType:A.og.Modal,right:(0,k.jsx)(D.DoneMenuText,{}),onClickRight:m}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,paddingTop:0,footer:G&&(0,k.jsx)(O.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const le={...ae,...d,header:x.isMobile?null:X};return(0,k.jsxs)(R.Z,{...le,children:[0===oe.length&&(0,k.jsx)(O.Z,{children:(0,k.jsx)(K.Z,{title:(0,k.jsx)(F.FormattedMessage,{...H.s.noResults})})}),oe.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:oe,store:b})]})}var xe=o(65187),ve=o(43250),fe=o(28992);function Ce(e){window.__c={n:"ValuePickerMenuText"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:a,formulaTypecheckContextValues:l,menuProps:s,onChange:c,onClose:d,value:u,disableEmojiCommands:m,disableFormattingAndMentions:h,disableMobileActionBar:g,disableTemplateVariableMentions:y}=e,S=(0,F.useIntl)(),{isMobile:x}=(0,r.Fy)(),v=(0,E.yK)((e=>({wrap:{background:e.inputBackground,borderRadius:4,boxShadow:e.inputBoxShadow,lineHeight:"24px",padding:1,marginBlock:x?12:0},text:{maxHeight:120,overflow:"auto",padding:"4px 10px"}})),[x]),f=(0,i.VK)((()=>(0,B.NY)()),[]),C=(0,n.useMemo)((()=>l.filter((e=>"text"===e.type.type))),[l]),b=(0,n.useCallback)((e=>{c({type:"simple",value:e})}),[c]),w=(0,n.useCallback)((e=>{b(e),d()}),[b,d]),M=(0,n.useCallback)((e=>{const t=void 0!==e[0]?(0,p.YD)(e[0]):void 0;w(t)}),[w]),{store:j}=(0,B.Cl)({initialValue:null==u?void 0:u.value,onChange:b}),T=[],P=[..._.oA(C.map((e=>te({currentSimpleFormulaValueTokens:a,value:e,setCurrentTokens:M,contextStore:o,action:"replace",context:t,checkType:"single"})))),...[{action:_.ZT,key:"input",render:e=>(0,k.jsx)(fe.Z,{...e,title:(0,k.jsx)("div",{className:ve.Wh_,style:v.wrap,children:(0,k.jsx)(xe.Z,{disableComment:!0,disabled:!1,disableEmbedMenu:!0,disableEmojiCommands:m,disableMobileActionBar:g,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableSlashCommands:!0,disableTemplateVariableMentions:y,...h?{disableDateMentions:!0,disableDateReminderMentions:!0,disableMentions:!0,disableStyleAnnotations:!0}:{},onEnter:d,pasteBehavior:"inline",store:j,style:v.text})})})}]],V=void 0!==(null==s?void 0:s.header)?s.header:(0,k.jsx)(O.Z,{style:{paddingBottom:0},title:S.formatMessage(H.s.genericMenuHeader)});let Z;T.push({key:"textbox",render:e=>(0,k.jsx)(O.Z,{...e}),items:P}),Z=x?{menuType:A.og.Modal,right:(0,k.jsx)(D.DoneMenuText,{}),onClickRight:d}:{menuType:A.og.Popup,maxHeight:"50vh",width:260,footer:f&&(0,k.jsx)(O.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const I={...Z,...s,header:x?null:V};return(0,k.jsx)(R.Z,{...I,children:(0,k.jsx)(L.Z,{initialFocus:0,sections:T,type:L.i.Vertical})})}function be(e){const{showClearButton:t,showInputMenuItem:o,type:n}=e;return"text"===n.type?(0,k.jsx)(Ce,{...e,type:n}):"number"===n.type?(0,k.jsx)(he,{...e,type:n}):"checkbox"===n.type?(0,k.jsx)(ne,{...e,type:n}):"date"===n.type?(0,k.jsx)(ue,{...e,type:n}):"person_array"===n.type?(0,k.jsx)(ye,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:n}):"block_array"===n.type?(0,k.jsx)(oe,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:n}):"select"===n.type?(0,k.jsx)(Se,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:n,isSingle:!0}):"select_array"===n.type?(0,k.jsx)(Se,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:n,isSingle:!1}):void(0,g.t1)(n)}},75311:(e,t,o)=>{o.d(t,{M:()=>s,_:()=>c});var n=o(67294),r=o(86628),i=o(99036),a=o(40506),l=o(97880);function s(e,t){const o=(0,r.VK)((()=>{const o=e.getSchema()[t];let n;return o&&(0,i.en)(o)&&(n=o.limit),n}),[e,t]);return(0,n.useCallback)(((e,t)=>(0,l.$K)(o)?"first"===t?e.slice(0,o):"last"===t?e.slice(-o):void(0,l.t1)(t):e),[o])}function c(e){var t;const o=null===(t=e.collectionStore.getSchema())||void 0===t?void 0:t[e.property];return o&&"date"===o.type?{dateFormat:o.date_format||a.sF,timeFormat:o.time_format||a.c_}:{dateFormat:a.sF,timeFormat:a.c_}}},30387:(e,t,o)=>{o.d(t,{s:()=>n});const n=(0,o(31412).defineMessages)({back:{defaultMessage:"Back",id:"formulas.SimpleFormulaValuePicker.back"},valuesFromThisAutomation:{defaultMessage:"From this automation",id:"formulas.SimpleFormulaValuePicker.valuesFromThisAutomation"},pickADate:{defaultMessage:"Pick a date",id:"formulas.SimpleFormulaValuePicker.pickADate"},clear:{defaultMessage:"Clear",id:"formulas.SimpleFormulaValuePicker.clear"},unchecked:{defaultMessage:"Unchecked",id:"formulas.SimpleFormulaValuePicker.checkbox.unchecked"},checked:{defaultMessage:"Checked",id:"formulas.SimpleFormulaValuePicker.checkbox.checked"},checkboxOptions:{defaultMessage:"Checkbox options",id:"formulas.SimpleFormulaValuePicker.checkbox.sectionHeader"},searchPlaceHolder:{defaultMessage:"Select one or more options…",id:"formulas.SimpleFormulaValuePicker.select.searchPlaceholder"},selectOptionsSectionHeader:{defaultMessage:"Select an option",id:"formulas.SimpleFormulaValuePicker.select.sectionHeader"},noResults:{defaultMessage:"No results",id:"formulas.simpleValuePicker.noResults"},pageSearchPlaceholder:{defaultMessage:"Search for one or more pages…",id:"formulas.SimpleFormulaValuePicker.pages.searchPlaceholder"},pages:{defaultMessage:"Pages",id:"formulas.SimpleFormulaValuePicker.pages.sectionHeader"},somethingWentWrong:{defaultMessage:"Something went wrong.",id:"formulas.simpleValuePicker.errorMessage"},personSelect:{defaultMessage:"Select...",id:"formulas.SimpleFormulaValuePicker.chooseAValue"},personSearchPlaceholder:{defaultMessage:"Search for one or more people…",id:"formulas.SimpleFormulaValuePicker.people.searchPlaceholder"},customFormula:{defaultMessage:"Custom formula",id:"formulas.SimpleFormulaValuePicker.customFormula"},peopleInWorkspace:{defaultMessage:"People",id:"formulas.SimpleFormulaValuePicker.people.sectionHeader"},genericMenuHeader:{defaultMessage:"Set property to",id:"formulas.SimpleFormulaValuePicker.genericMenuHeader"}})},28267:(e,t,o)=>{o.d(t,{X:()=>i});var n=o(67294),r=o(77794);function i(e){const[t,o]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{if(!e.current)return;const t=new r.E;return t.observe(e.current),t.rect.addListener((e=>{o(e.state)})),()=>{t.destroy()}}),[e]),t}},36857:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(49085);class r extends n.default{getInitialState(){return{pageId:void 0}}}const i=new r},65955:(e,t,o)=>{o.d(t,{o:()=>i});o(67294);var n=o(45238),r=o(85893);const i=(0,n.I)("addPage",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},40745:(e,t,o)=>{o.d(t,{M:()=>i});o(67294);var n=o(45238),r=o(85893);const i=(0,n.I)("arrowDown",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},13148:(e,t,o)=>{o.d(t,{U:()=>i});o(67294);var n=o(45238),r=o(85893);const i=(0,n.I)("close",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},16184:(e,t,o)=>{o.d(t,{Q:()=>i});o(67294);var n=o(45238),r=o(85893);const i=(0,n.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},62208:(e,t,o)=>{o.d(t,{z:()=>i});o(67294);var n=o(45238),r=o(85893);const i=(0,n.I)("loop",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},22686:(e,t,o)=>{o.d(t,{f:()=>i});o(67294);var n=o(45238),r=o(85893);const i=(0,n.I)("person",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,o)=>{o.d(t,{X:()=>i});o(67294);var n=o(45238),r=o(85893);const i=(0,n.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,r.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,r.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},53470:(e,t,o)=>{o.d(t,{H:()=>i});o(67294);var n=o(45238),r=o(85893);const i=(0,n.I)("rename",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M14.7881 2.5752L15.3008 2.04199C15.5605 1.76855 15.5742 1.39941 15.3213 1.13965L15.1436 0.955078C14.9111 0.722656 14.5283 0.763672 14.2754 1.00977L13.749 1.5293L14.7881 2.5752ZM6.68066 9.87598L8.0752 9.28809L14.2891 3.06738L13.25 2.03516L7.03613 8.25586L6.4209 9.60254C6.35254 9.75977 6.52344 9.9375 6.68066 9.87598ZM4.09668 14.4355H12.0674C13.373 14.4355 14.1387 13.6768 14.1387 12.2207V4.99512L12.7988 6.33496V12.1045C12.7988 12.7676 12.4434 13.1025 11.9854 13.1025H4.17871C3.54297 13.1025 3.19434 12.7676 3.19434 12.1045V4.49609C3.19434 3.83301 3.54297 3.49805 4.17871 3.49805H10.0234L11.3633 2.1582H4.09668C2.62695 2.1582 1.85449 2.91699 1.85449 4.37988V12.2207C1.85449 13.6836 2.62695 14.4355 4.09668 14.4355Z"})})}}]);