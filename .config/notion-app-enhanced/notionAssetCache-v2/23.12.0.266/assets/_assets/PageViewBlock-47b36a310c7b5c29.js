"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9938],{31192:(e,t,s)=>{s.d(t,{Z:()=>Vt});s(57658),s(30541);var i=s(67294),o=s(1302),n=s(13991),r=s(480),l=s(6740),a=s(86628),d=s(49085),h=s(99747),c=s(41432),p=s(99036),u=s(80951),g=s(45433),m=s(20302),S=s(6695),v=s(65955),C=s(64788),f=s(68074),x=s(9999),y=s(27961),b=s(25651),k=s(98519),w=s(70406),P=s(83303),M=s(72126),D=s(6287),j=s(23867),T=s(90965),B=s(70203),V=s(82990),E=s(51454),_=s(31412),L=s(50906),I=s(35253),F=s(54564),A=s(51365),R=s(96802),Z=s(32603),H=s(72711),W=s(61916),O=s(24677),U=s(98104),z=s(29373),N=s(39699),G=s(89626),K=s(57819),$=s(19977),X=s(34047),q=s(92650),Q=s(82994),Y=(s(95477),s(66890)),J=s(28020),ee=s(80365),te=s(43250),se=s(75079),ie=s(78316),oe=s(19124),ne=s(11599),re=s(12534),le=s(83055),ae=s(70177),de=s(87279),he=s(39500),ce=s(45162),pe=s(98165),ue=s(66430),ge=s(94134),me=s(65598),Se=s(18514),ve=s(45010),Ce=s(77546),fe=s(89086),xe=s(77907),ye=s(18245),be=s(49427),ke=s(24646),we=s(5162),Pe=s(80444),Me=s(61766),De=s(886),je=s(16772),Te=s(80796),Be=s(77080),Ve=s(73329),Ee=s(29755),_e=s(77144),Le=s(22294),Ie=s(29798),Fe=s(31792),Ae=s(19671),Re=s(63971),Ze=s(94896),He=s(82136),We=s(91551),Oe=s(13023),Ue=s(88923),ze=s(26350),Ne=s(69784),Ge=s(27724),Ke=s(17963),$e=s(4350),Xe=s(2834),qe=s(78030),Qe=s(53223),Ye=s(15201),Je=s(68709),et=s(23063),tt=s(91754),st=s(31945),it=s(68785),ot=s(78140),nt=s(40721),rt=s(89728),lt=s(26388),at=s(58792),dt=s(98272),ht=s(67064),ct=s(61679),pt=s(99731),ut=s(79354),gt=s(16720),mt=s(6779),St=s(2524),vt=s(56507),Ct=s(5618),ft=s(22735),xt=s(35943),yt=s(21953),bt=s(55217),kt=s(56199),wt=s(74169),Pt=s(16738),Mt=s(3553),Dt=s(37451),jt=s(85893);function Tt(e){return!!e.isIOS&&"on"===Be.default.getGroup("multi-select-new-page-view-block-layout")}class Bt extends Xe.Z{constructor(){super(...arguments),this.contentEl=null,this.clickedAddIconState=!1,this.openResolvedDiscussionPopup=()=>{this.stores.resolvedDiscussionButtonPopupStore.setState({open:!0}),this.stores.pageViewBlockStore.setState({...this.stores.pageViewBlockStore.state,forceDiscussionOpen:!0})},this.getContentWrapEl=()=>this.contentEl,this.collectionContextStore=new De.Z(this.environment),this.discussionInputStore=new Q.Z(this.environment,(0,j.C)(this.props.store.pointer.spaceId)),this.documentViewHorizontalOffset=this.createComputedStore((()=>{const{store:e}=this.props;return this.marginCommentsVisible.state&&!this.props.store.isFullWidth()?(0,q.gC)(this.environment,(0,ie.en)(e),(0,ie.Ks)(e)):0})),this.isCompletionsUiVisible=this.createComputedStore((()=>Boolean((0,K.RR)(je.default.state)))),this.storeTypes={headerFocusStore:d.default.createClass(!1),headerMouseStore:Fe.Z,detailsFocusStore:d.default.createClass(!1),detailsMouseStore:Fe.Z,pageViewBlockStore:He.Z,resolvedDiscussionButtonPopupStore:Me.Z,backlinksButtonPopupStore:Me.Z,templatePickerMenuListStore:Ie.Z,pageDescriptionStore:Re.Z,loadingPageCoverStore:d.default.createClass(!1)},this.getHorizontalTransformStyles=()=>{const e=this.documentViewHorizontalOffset.state;return{layout:{translateX:-1*e},layoutFull:{translateX:e}}},this.headerAndBottomControlsStore=this.createComputedStore((()=>{let e=[],t=[];const s=this.pageExpandedBacklinksRenderState(),i=this.pageDiscussionsRenderState({disableDiscussionInput:!1});e=this.getTopControls(),t=this.getBottomControls(s,i);const o=this.getCommentControlPlacement({isTopControlsEmpty:0===e.length,isBottomControlsEmpty:0===t.length,discussionsRenderState:i});"top"===o?e.push(this.renderAddDiscussion({isBottomControl:!1})):"bottom"===o&&t.push(this.renderAddDiscussion({isBottomControl:!0}));return{headerControls:(0,jt.jsx)("div",{style:this.getHeaderControlsStyle(),className:"notion-page-controls",children:e}),bottomControls:t}})),this.hasCoverStore=this.createComputedStore((()=>this.props.store.hasCover())),this.hasIconStore=this.createComputedStore((()=>this.props.store.hasIcon())),this.renderBacklinksIcon=e=>(0,x.J)({...e,transform:"rotate(180deg)"}),this.titleStore=this.createComputedStore((()=>this.props.store.getTitleStore())),this.handleAddIconClick=()=>{this.clickedAddIconState=!1},this.handleAddRandomIconClick=()=>{const{store:e}=this.props;N.createAndCommit({userAction:"PageViewBlock.handleAddRandomIconClick",environment:this.environment,perform:t=>{R.is({store:e,transaction:t})}}),this.clickedAddIconState=!0},this.handleAddRandomCoverClick=async()=>{const{store:e}=this.props,{environment:t}=this,s=e.getCoverStore();if(!s)return;if(s.getValue())return;this.stores.loadingPageCoverStore.setState(!0);const i=(await xe.deps.pageCovers.loader()).default;N.createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:t,perform:t=>{H.tk({transaction:t,store:e,coverStore:s,pageCovers:i})}}),this.stores.loadingPageCoverStore.setState(!1)},this.handleAddDiscussion=async()=>{this.stores.pageViewBlockStore.setState({...this.stores.pageViewBlockStore.state,forceDiscussionOpen:!0}),L.ZW8(this.environment,{from:"page_comments"}),await o.default.afterNextFlush(),U.NX({store:this.discussionInputStore.state.textStore})},this.handleShowBacklinks=()=>{!function(e,t,s){const i=t.id;"PageDetailsStore"in s&&s.PageDetailsStore.setToggleState({environment:s,type:"backlinks",id:i},e)}(!0,this.props.store,this.environment)},this.handleShowDiscussion=()=>{!function(e,t,s){const i=t.id;"PageDetailsStore"in s&&s.PageDetailsStore.setToggleState({environment:s,type:"discussion",id:i},e)}(!0,this.props.store,this.environment)},this.handleAddDescriptionClick=()=>{const{device:e}=this.environment,{pageDescriptionStore:t}=this.stores,{currentUserSettingsStore:s}=Pe.default.state,i=At(this.props.store);W.YT({environment:this.environment,pageId:this.props.store.id,store:t,userSettingsStore:s,isExpanded:!0,descriptionStore:i}),o.default.afterNextFlush((()=>{const t=At(this.props.store);t&&(e.isMobileBrowser||U.NX({store:t}))}))},this.handleHeaderFocus=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,l.E)(t)&&this.stores.headerFocusStore.setState(!0)},this.handleHeaderBlur=()=>{this.stores.headerFocusStore.setState(!1)},this.handleDetailsFocus=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,l.E)(t)&&this.stores.detailsFocusStore.setState(!0)},this.handleDetailsBlur=()=>{this.stores.detailsFocusStore.setState(!1)},this.handleHeaderMouseEnter=()=>{Te.Z.state.isDragging||Ne.Z.state.isActive||this.stores.headerMouseStore.setState({...this.stores.headerMouseStore.state,mouseEntered:!0})},this.handleHeaderMouseLeave=()=>{Te.Z.state.isDragging||Ne.Z.state.isActive||this.stores.headerMouseStore.setState({...this.stores.headerMouseStore.state,mouseEntered:!1})},this.handleDetailsMouseEnter=()=>{Te.Z.state.isDragging||Ne.Z.state.isActive||this.stores.detailsMouseStore.setState({...this.stores.detailsMouseStore.state,mouseEntered:!0})},this.handleDetailsMouseLeave=()=>{Te.Z.state.isDragging||Ne.Z.state.isActive||this.stores.detailsMouseStore.setState({...this.stores.detailsMouseStore.state,mouseEntered:!1})},this.handleHideDescription=()=>{const{pageDescriptionStore:e}=this.stores,{currentUserSettingsStore:t}=Pe.default.state,s=this.props.store.id,i=At(this.props.store);W.YT({environment:this.environment,pageId:s,isExpanded:!1,store:e,userSettingsStore:t,descriptionStore:i})},this.handleShowDescription=()=>{const{pageDescriptionStore:e}=this.stores,{currentUserSettingsStore:t}=Pe.default.state,s=this.props.store.id,i=At(this.props.store);W.YT({environment:this.environment,pageId:s,isExpanded:!0,store:e,userSettingsStore:t,descriptionStore:i})},this.handleHeaderMouseEnterThrottled=M.P2(this.handleHeaderMouseEnter,100),this.handleHeaderMouseLeaveDebounced=M.Ds(this.handleHeaderMouseLeave,100),this.handleDetailsMouseEnterThrottled=M.P2(this.handleDetailsMouseEnter,100),this.handleDetailsMouseLeaveDebounced=M.Ds(this.handleDetailsMouseLeave,100),this.handleTitleEditText=e=>{const t=this.titleStore.state;t&&(O.eP({environment:this.environment,store:this.props.store}),e.isAtStartOfLine?U.N_({store:t}):U.NX({store:t}))},this.handleTitleEsc=e=>{const{onTitleEsc:t}=this.props;U.ZH(this.environment),O.ZH(this.environment),t&&t(e)},this.handleTitleTab=e=>{const{store:t,preventDefaultTitleTabBehavior:s}=this.props;if(s)return!0;if(e.preventDefault(),function(e){return Boolean(Rt(e))}(this.props.store)){const e=qt(this.props.store);if(e&&e.collection_page_properties){const s=e.collection_page_properties.find(((e,t)=>function(e,t){if(!Rt(t))return!1;const s=Zt(t)[e];return Boolean(s&&!p.uk.includes(s.type))}(e.property,this.props.store)));s&&o.default.afterNextFlush((()=>{A.bA({environment:this.environment,blockPropertyValueOverlayStore:Gt(this.props.context),collectionContextStore:this.collectionContextStore,store:t,property:s.property,format:qe.C.Page})}))}}},this.handleTitleUntab=e=>{if(this.props.preventDefaultTitleUntabBehavior)return!0;this.handleTitleEsc(e)},this.handlePlaceholderClick=()=>{const{store:e}=this.props;!e.canEdit()||this.props.store.isLocked()||Ht(this.props.store)||(0,he.X9)()||N.createAndCommit({userAction:"PageViewBlock.handlePlaceholderClick",environment:this.environment,perform:t=>{z.ls({environment:this.environment,store:e,transaction:t})}})},this.handlePlaceholderWrapClick=e=>{(0,re.ZP)({event:e,context:re.Af.EditorClick,callback:this.handlePlaceholderClick})},this.handleTitleChange=()=>{this.stores.templatePickerMenuListStore.reset()},this.handleAddTitleClick=()=>{const e=this.titleStore.state;e&&(O.ZH(this.environment),U.NX({store:e}))},this.numberOfBacklinks=this.createComputedStore((()=>(0,ee.L)(this.props.store,this.environment).backlinks.length)),this.discussionToggleStore=this.createComputedStore((()=>{const e=this.props.store.id;return"PageDetailsStore"in this.environment&&this.environment.PageDetailsStore.getToggleState({environment:this.environment,type:"discussion",id:e})})),this.backlinksToggleStore=this.createComputedStore((()=>{const e=this.props.store.id;return"PageDetailsStore"in this.environment&&this.environment.PageDetailsStore.getToggleState({environment:this.environment,type:"backlinks",id:e})})),this.inlinePropertyIDsStore=this.createComputedStore((()=>{const e=qt(this.props.store);if(!e)return;const{store:t}=this.props,s=e.collection_page_sections||[],i=Zt(this.props.store);return s.filter((e=>{const s=i[e.section];if(!s||"relation"!==s.type)return;const o=t.getPropertyValue(e.section),n=u.j$({relationValue:u.rq(o),propertySchema:s,getRecordModel:t.getRecordModel}).length;return"inline"===e.visibility&&i[e.section]&&0!==n})).map((e=>e.section))})),this.minimalPropertyIDsStore=this.createComputedStore((()=>{const e=qt(this.props.store);if(!e)return;const{store:t}=this.props,s=e.collection_page_sections||[],i=Zt(this.props.store);return s.filter((e=>{const s=i[e.section];if(!s||"relation"!==s.type)return;const o=t.getPropertyValue(e.section),n=u.j$({relationValue:u.rq(o),propertySchema:s,getRecordModel:t.getRecordModel}).length;return"minimal"===e.visibility&&i[e.section]||"inline"===e.visibility&&i[e.section]&&0===n})).map((e=>e.section))})),this.showTemplatePickerStore=this.createComputedStore((()=>{const{store:e,loadingContainerStore:t}=this.props,s=this.environment.currentUser.isLoggedIn(),i=this.pageContext&&this.pageContext.publicEditModeStore.state;return Boolean(e&&t&&e.isDefined()&&!e.isLocked()&&e.canEdit()&&!e.hasContent()&&s&&(!(null!=i&&i.hasPublicPermission)||"edit"===(null==i?void 0:i.permission))&&!Ht(this.props.store)&&t.state.ready&&!_t(this.props.store)&&(!(0,oe.GD)(i)||"completionPopup"!==je.default.state.type))})),this.shouldShowCollectionViewBlockTitle=this.createComputedStore((()=>{const{store:e}=this.props;if(e.getCollectionViewSourceCollectionStore())return!0;const t=this.titleStore.state;if(!t)return!1;if(B.QaF(t.getValue()))return!0;return!!(0,fe.J5)(t)})),this.titleStyleStore=this.createComputedStore((()=>{const{device:e}=this.environment,{store:t,paddingLeft:s,paddingRight:i}=this.props,o=t.getFormat(),r=!!o.page_small_text,l=t.isCollectionView(),a=r||e.isMobile||l||zt(this.props.store)?32:40,d=(0,ke.$3)(this.environment)+(0,ke.vJ)(this.environment)-s-i;return{color:this.theme.regularTextColor,fontWeight:V.Z.fontWeight.bold,lineHeight:1.2,fontSize:a,fontFamily:V.Z.getHeaderFontFamily({pageFont:o.page_font,locale:n.SP}),cursor:"text",display:"flex",alignItems:"center",textRendering:e.isSafari?"optimizeSpeed":void 0,width:t.isCollectionView()&&!this.props.store.getAppContainerBlockStore()?d:void 0,...this.props.titleStyle}})),this.collectionViewProps=this.createComputedStore((()=>{const{store:e,context:t,disabled:s}=this.props;if(e.isCollectionView())return{store:e,context:t,disabled:s,collectionViewId:ts(this.props.store,this.environment)}})),this.pageIconProps=this.createComputedStore((()=>({store:this.props.store,isEditable:this.isEditable(),hasCover:this.hasCoverStore.state,isInSidePeek:zt(this.props.store),openMenuOnMount:this.clickedAddIconState,openMenuOnMountCallback:()=>{this.clickedAddIconState=!1}}))),this.pageTitleProps=this.createComputedStore((()=>({store:this.props.store,disabled:!this.canEdit(),isInSidePeek:zt(this.props.store),paddingLeft:this.props.paddingLeft,paddingRight:this.props.paddingRight,extraStyles:this.titleStyleStore.state,titlePlaceholder:this.props.titlePlaceholder,collectionContextStore:this.collectionContextStore,shouldShowTemplatePicker:this.showTemplatePickerStore.state,onTitleChange:this.handleTitleChange,onTitleEditText:this.handleTitleEditText,onTitleEsc:this.handleTitleEsc,onTitleUntab:this.handleTitleUntab,onTitleTab:this.handleTitleTab}))),this.descriptionProps=this.createComputedStore((()=>{const e=this.pageDescriptionRenderState();if("visible"===e.type)return{type:"description",disabled:!this.isEditable(),canEdit:this.canEdit(),locked:this.props.store.isLocked(),pageId:this.props.store.id,toggleStore:this.stores.pageDescriptionStore,descriptionStore:e.descriptionStore,collectionStore:e.collectionStore,userSettingsStore:e.currentUserSettingsStore}}))}get registries(){return super.registries.concat(be.Z)}getContentInnerWidth(){const e=this.getContentWrapEl();if(e){const t=e.getBoundingClientRect().width,s=this.getContentPadding()??{paddingLeft:0,paddingRight:0};return t-s.paddingLeft-s.paddingRight}}getContentPadding(){const e=this.getContentWrapEl();if(e){if(Tt(this.environment.device))return{paddingLeft:0,paddingRight:0};const t=getComputedStyle(e),s=parseFloat(t.getPropertyValue("padding-left")),i=parseFloat(t.getPropertyValue("padding-left"));return{paddingLeft:M.i2(s)?0:s,paddingRight:M.i2(i)?0:i}}}willMount(e){super.willMount(e);const{store:t}=this.props,{currentUserSettingsStore:s}=Pe.default.state,i=t.id;this.stores.pageDescriptionStore=new Re.Z,W.nI({pageId:i,store:this.stores.pageDescriptionStore,userSettingsStore:s,descriptionHasText:$t(this.props.store)})}willMountOrUpdate(e){super.willMountOrUpdate(e);const{store:t,context:s}=e;var i;"page"===this.environment.RouterStore.state.route.name&&(null===(i=this.environment.mobileNative)||void 0===i||i.markTransitionReady({type:"page",id:this.props.store.id}));const o=Rt(this.props.store);if(this.collectionContextStore.collectionStore()!==o&&o){const e=o.getParentBlockStore();this.collectionContextStore.setContext({type:"collectionPage",collectionViewBlockStore:e,collectionStore:o})}if(s===He.S.Frame){const e=this.pageContext&&this.pageContext.publicEditModeStore.state;null!=e&&e.hasPublicPermission&&"edit"===e.permission&&!t.isTemplate()?I.Bw({bannerStore:Xt(this.props.context),id:"EditingPageBanner",contentKey:"editing_page",styleKey:tt.v.White}):I.qL({bannerStore:Xt(this.props.context),id:"EditingPageBanner"})}if(Qt(this.props.context)){const e=pe.oZ(t),s=pe.wf(t),i=pe.D0(t);if((0,T.nV)(e))I.Bw({bannerStore:Xt(this.props.context),id:"SpaceContentDuplicationPage",contentKey:"space_content_duplication",styleKey:tt.v.Red,blockStore:t});else if(s)I.Bw({bannerStore:Xt(this.props.context),id:"DeletedPage",contentKey:"deleted_or_moved_page",blockStore:t,styleKey:tt.v.Red});else if(i)I.Bw({bannerStore:Xt(this.props.context),id:"ArchivedTeamPage",contentKey:"page_in_archived_team",styleKey:tt.v.Red});else for(const t of["SpaceContentDuplicationPage","DeletedPage","ArchivedTeamPage"])I.qL({bannerStore:Xt(this.props.context),id:t})}if(Qt(this.props.context)&&(t.isTemplate()?I.Bw({bannerStore:Xt(this.props.context),id:"CollectionTemplatePage",contentKey:"template_in_page",styleKey:tt.v.Beige,blockStore:t,context:this.props.context,disabled:this.props.disabled}):t.isInsideFactoryOrDuplicateBlocksAction()?I.Bw({bannerStore:Xt(this.props.context),id:"CollectionTemplatePage",contentKey:"template_in_button",styleKey:tt.v.Beige,blockStore:t,context:this.props.context,disabled:this.props.disabled}):I.qL({bannerStore:Xt(this.props.context),id:"CollectionTemplatePage"})),s===He.S.Frame){Ee.Z.state.pageMap[t.id]?I.Bw({bannerStore:Xt(this.props.context),id:"ImportingEvernotePage",contentKey:"importing_evernote",styleKey:tt.v.Blue,blockStore:t}):I.qL({bannerStore:Xt(this.props.context),id:"ImportingEvernotePage"})}t.useCrdt()?I.Bw({bannerStore:Xt(this.props.context),id:"CrdtPage",contentKey:"crdt_page",styleKey:tt.v.Beige}):I.qL({bannerStore:Xt(this.props.context),id:"CrdtPage"})}didMount(){const{device:e}=this.environment,{store:t,context:s}=this.props,i=this.titleStore.state,o=this.environment.RouterStore.state;let n;var r,l;"page"===o.route.name&&(n=o.route.mobileData,Z.updateMetricData({is_push:null===(r=n)||void 0===r?void 0:r.isPush}));if((0,ae.L)(),e.isPhone){const{PageScroller:e}=ve.Z;if(e){if(e.scrollerEl()&&this.canEdit()&&!this.hasCoverStore.state){const t=ds(this.props.context,this.environment);e.scrollTo(t)}}}i&&this.shouldSelectTitleOnMount()&&(O.eP({environment:this.environment,store:t}),U.NX({store:i}),e.isAndroid&&(0,we.Y)("supportsUntitledPageAutoSelectOnStart")&&(null===(l=this.environment.mobileNative)||void 0===l||l.forceShowSoftKeyboard()));if(s===He.S.Frame&&!this.props.store.isCollectionView()){const e=this.environment.RouterStore.state.initialRoute.name,{initialRenderCompleted:t,initialRenderAfterLoginCompleted:s,initialLoadCachedPageChunkCalledAt:i}=_e.Z.state;if(t)if(s||"login"!==e){var a;ye.default.measure("navigation_page_render",{environment:this.environment,data:{is_push:(null===(a=n)||void 0===a?void 0:a.isPush)??!1}})}else ye.default.measure("initial_page_render_after_login",{environment:this.environment}),_e.Z.update((e=>({...e,initialRenderAfterLoginCompleted:!0})));else{Z.setInitialRenderCompleted();const t=performance.mark("initial_page_render").startTime;Z.setSubMetric({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:t}),ye.default.measureFromAppStart({metricName:"initial_page_render",endTime:t},{environment:this.environment,data:{...le.IN(),initial_route:e,did_prefetch_for_root_route:ue.l4,is_editable:this.isEditable(),profiling_tool:ge.getProfilingToolForSession()},shouldSendIfStatsigNotInitialized:!0}),Z.measureSubMetricsInBrowserProfiler(),void 0!==i&&ye.default.measureFromAppStart({metricName:"load_cached_page_chunk_wait_time",endTime:i},{environment:this.environment,data:{initial_route:e},shouldSendIfStatsigNotInitialized:!0})}!function(e,t){const{device:s,RouterStore:i}=t,{route:o}=i.state,n=e;var r;s.isMobileNative&&"page"===o.name&&o.showMoveTo&&n.isEmptyTitle()&&n.isEmptyPage()&&(null===(r=t.mobileNative)||void 0===r||r.markTransitionReady({type:"new_page",id:n.id}))}(this.props.store,this.environment)}if(this.collectionContextStore){const e=(0,se.vS)(this.collectionContextStore);ye.default.measure("collections.open_item_page_lag",{environment:this.environment,data:{...e,peek_mode:Ue.default.getPeekMode()}})}!function(e,t){if("space_for_ai"!==(0,G.sy)())return;const s=e.getContentStores()[0],i=G.__.state;if(!s||s.id!==i)return;O.eP({environment:t,store:s}),U.NX({store:s.getBlockTitleStore()})}(this.props.store,this.environment)}willUnmount(){super.willUnmount(),Qt(this.props.context)&&(I.qL({bannerStore:Xt(this.props.context),id:"DeletedPage"}),I.qL({bannerStore:Xt(this.props.context),id:"CollectionTemplatePage"}))}renderCollectionPageViewBlock(){const{store:e,context:t,style:s,paddingLeft:i,paddingRight:o}=this.props,{WindowSizeStore:n}=this.environment;if(!e.isCollectionView())return;if(t===He.S.CollectionPageView){let e=this.renderCollectionPageViewContent();return(0,ce.Aw)(this.environment)&&(e=(0,jt.jsx)(Ye.O,{displayName:"PageContent",style:{...Bt.wrapStyle,...s},disabled:!this.canEdit()||this.props.store.isLocked(),children:e})),e}const r=this.pageDiscussionsRenderState({disableDiscussionInput:!0});return(0,jt.jsxs)(jt.Fragment,{children:[this.renderCollectionHeader(),"visible"===r.type&&(0,jt.jsx)("div",{style:{paddingLeft:n.getSafePaddingLeftCSS(i),paddingRight:n.getSafePaddingRightCSS(o)},children:(0,jt.jsx)(mt.z,{store:this.props.store,showDiscussionInput:r.showDiscussionInput,unresolvedDiscussionStores:r.unresolvedDiscussionStores})}),(0,jt.jsx)(ns,{store:this.props.store,paddingLeft:this.props.paddingLeft,paddingRight:this.props.paddingRight,context:this.props.context,disabled:this.props.disabled})]})}renderCollectionPageViewContent(){const{store:e}=this.props;if(e.isCollectionView())return(0,jt.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"center",paddingTop:5},children:[(0,jt.jsx)(et.Z,{isVisible:!0,animationStyle:{width:ls(this.props.store,this.props.context,this.environment)},render:()=>(0,jt.jsx)("div",{style:{maxWidth:"100%",minWidth:0},children:this.renderDocumentView()})}),!this.environment.device.isMobile&&(0,jt.jsx)($.Z,{pageBlockStore:this.props.store,isVisible:this.marginCommentsVisible.state,context:this.props.context,pageViewBlockAccessor:this.getContentWrapEl})]})}getMeetingNotePageContent(){var e;const t=Be.default.checkGate("enable_transcript_tab"),s=null===(e=this.props.store.getFormatStore().getValue())||void 0===e||null===(e=e.content_tabs)||void 0===e?void 0:e[m.Z];if(!t||!s)return Nt(this.props.context)?this.layoutV2_getPageContent():this.getPageContent();const{bottomControls:i}=this.headerAndBottomControlsStore.state,o=this.pageDiscussionsRenderState({disableDiscussionInput:!1}),n=this.pagePropertiesRenderState(),r=(0,ht.E)({collectionStore:Rt(this.props.store),format:qt(this.props.store),sectionPropertyIds:this.inlinePropertyIDsStore.state}),l=this.pageExpandedBacklinksRenderState(),a=Jt(this.props.store,this.environment),d=this.getHorizontalTransformStyles(),h=this.getLayoutContentStyles(!0),c=rs(a.visible,this.props.store,this.props.context,this.environment),p=ze.G.createChildStore(this.props.store,s);return(0,jt.jsx)(et.Z,{isVisible:!0,animationStyle:d.layout,render:()=>(0,jt.jsxs)(ct.Ar,{type:c,withBottomPadding:!0,children:[(0,jt.jsx)(ct.hy,{children:(0,jt.jsx)(et.Z,{isVisible:!0,animationStyle:d.layoutFull,render:()=>this.renderPageCover()})}),(0,jt.jsx)(ct.bU,{children:this.layoutV2_getPeekPageHeaderControls()}),(0,jt.jsx)(ct.bU,{children:this.layoutV2_getPeekPageTitleWithIcon()}),"visible"===n.type&&(0,jt.jsx)(ct.bU,{className:"layout-content-with-divider",children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)(ft.$,{...n})})}),"visible"===r.type&&(0,jt.jsx)(ct.bU,{className:"layout-content-with-divider",children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)(ht._,{topBorder:!0,state:r,store:this.props.store,disabled:this.props.disabled,onMouseEnter:this.handleDetailsMouseEnter,onMouseLeave:this.handleDetailsMouseLeave,blockPropertyValueOverlayStore:Gt(this.props.context),isInPeekRenderer:Wt(this.props.context)})})}),l&&(0,jt.jsx)(ct.bU,{className:"layout-content-with-divider",children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)(pt.f,{store:this.props.store})})}),"visible"===o.type&&(0,jt.jsx)(ct.bU,{className:"layout-content-with-divider",children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)(mt.z,{...o,store:this.props.store})})}),i.length>0&&(0,jt.jsx)(ct.bU,{children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)("div",{style:this.getDetailControlsSectionStyle(),className:"notion-page-details-controls",onMouseEnter:this.handleDetailsMouseEnterThrottled,onMouseMove:this.handleDetailsMouseEnterThrottled,onMouseLeave:this.handleDetailsMouseLeaveDebounced,children:i})})}),(0,jt.jsx)(ct.kg,{style:"left-aligned",items:[{key:"notes",label:"Notes",icon:b.R,children:(0,jt.jsx)(ct.bU,{className:"layout-editor",style:{minHeight:"170px"},children:(0,jt.jsx)(St.e,{store:this.props.store,disabled:this.props.disabled,loadingContainerStore:this.props.loadingContainerStore,templatePickerMenuListStore:this.stores.templatePickerMenuListStore,onClick:It(this.props.store)?this.handlePlaceholderWrapClick:void 0,legacyStyles:h.nonIOSLayoutBody,ref:e=>{e&&(this.contentEl=e)}})})},{key:"transcript",icon:w.p,label:"Transcript",children:(0,jt.jsx)(ct.bU,{className:"layout-editor",children:(0,jt.jsx)(kt.Z,{store:p})})}]}),a.visible&&(0,jt.jsx)(ct.$K,{children:(0,jt.jsx)($.Z,{pageBlockStore:this.props.store,isVisible:a.visible,context:this.props.context,pageViewBlockAccessor:this.getContentWrapEl,isCollapsedAnchor:!0})})]})})}layoutV2_getPageContent(){const{bottomControls:e}=this.headerAndBottomControlsStore.state,t=this.pageDiscussionsRenderState({disableDiscussionInput:!1}),s=this.pagePropertiesRenderState(),i=(0,ht.E)({collectionStore:Rt(this.props.store),format:qt(this.props.store),sectionPropertyIds:this.inlinePropertyIDsStore.state}),o=this.pageExpandedBacklinksRenderState(),n=Jt(this.props.store,this.environment),r=this.getHorizontalTransformStyles(),l=this.getLayoutContentStyles(!0),a=rs(n.visible,this.props.store,this.props.context,this.environment);return(0,jt.jsx)(et.Z,{isVisible:!0,animationStyle:r.layout,render:()=>(0,jt.jsxs)(ct.Ar,{type:a,withBottomPadding:!0,children:[(0,jt.jsx)(ct.hy,{children:(0,jt.jsx)(et.Z,{isVisible:!0,animationStyle:r.layoutFull,render:()=>this.renderPageCover()})}),(0,jt.jsx)(ct.bU,{children:this.layoutV2_getPeekPageHeaderControls()}),(0,jt.jsx)(ct.bU,{children:this.layoutV2_getPeekPageTitleWithIcon()}),"visible"===s.type&&(0,jt.jsx)(ct.bU,{className:"layout-content-with-divider",children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)(ft.$,{...s})})}),"visible"===i.type&&(0,jt.jsx)(ct.bU,{className:"layout-content-with-divider",children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)(ht._,{topBorder:!0,state:i,store:this.props.store,disabled:this.props.disabled,onMouseEnter:this.handleDetailsMouseEnter,onMouseLeave:this.handleDetailsMouseLeave,blockPropertyValueOverlayStore:Gt(this.props.context),isInPeekRenderer:Wt(this.props.context)})})}),o&&(0,jt.jsx)(ct.bU,{className:"layout-content-with-divider",children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)(pt.f,{store:this.props.store})})}),"visible"===t.type&&(0,jt.jsx)(ct.bU,{className:"layout-content-with-divider",children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)(mt.z,{...t,store:this.props.store})})}),e.length>0&&(0,jt.jsx)(ct.bU,{children:(0,jt.jsx)(Je.p,{allowSelectionWithin:!0,children:(0,jt.jsx)("div",{style:this.getDetailControlsSectionStyle(),className:"notion-page-details-controls",onMouseEnter:this.handleDetailsMouseEnterThrottled,onMouseMove:this.handleDetailsMouseEnterThrottled,onMouseLeave:this.handleDetailsMouseLeaveDebounced,children:e})})}),(0,jt.jsx)(ct.bU,{className:"layout-editor",style:{minHeight:"170px"},children:(0,jt.jsx)(St.e,{store:this.props.store,disabled:this.props.disabled,loadingContainerStore:this.props.loadingContainerStore,templatePickerMenuListStore:this.stores.templatePickerMenuListStore,onClick:It(this.props.store)?this.handlePlaceholderWrapClick:void 0,legacyStyles:l.nonIOSLayoutBody,ref:e=>{e&&(this.contentEl=e)}})}),n.visible&&(0,jt.jsx)(ct.$K,{children:(0,jt.jsx)($.Z,{pageBlockStore:this.props.store,isVisible:n.visible,context:this.props.context,pageViewBlockAccessor:this.getContentWrapEl,isCollapsedAnchor:!0})})]})})}layoutV2_getPeekPageHeaderControls(){const{headerControls:e}=this.headerAndBottomControlsStore.state;if(zt(this.props.store))return(0,jt.jsx)(vt.U,{onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,headerControls:e})}layoutV2_getPeekPageTitleWithIcon(){const{headerControls:e}=this.headerAndBottomControlsStore.state;return zt(this.props.store)?(0,jt.jsx)(at.B,{...this.pageIconProps.state,...this.pageTitleProps.state}):(0,jt.jsx)("div",{style:ss(this.props.store,this.environment),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,children:(0,jt.jsx)(yt.J,{...this.pageIconProps.state,...this.pageTitleProps.state,headerControls:e,headerFocusStore:this.stores.headerFocusStore,paddingLeft:0,paddingRight:0})})}layoutV2_renderCollectionPageViewBlock(){const e=this.descriptionProps.state,t=this.pageDiscussionsRenderState({disableDiscussionInput:!1}),s=this.collectionViewProps.state;return this.props.context===He.S.CollectionPageView?this.layoutV2_renderWikiPageView():(0,jt.jsxs)(ct.Ar,{type:"wide",children:[(0,jt.jsx)(ct.bU,{children:(0,jt.jsx)(vt.U,{onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,headerControls:this.renderCollectionHeaderControls()})}),(0,jt.jsx)(ct.bU,{children:(0,jt.jsx)(at.B,{...this.pageIconProps.state,...this.pageTitleProps.state})}),e&&(0,jt.jsx)(ct.bU,{children:(0,jt.jsx)(gt.Z,{...e})}),"visible"===t.type&&(0,jt.jsx)(ct.bU,{children:(0,jt.jsx)(mt.z,{...t,store:this.props.store})}),s&&(0,jt.jsx)(ct.bU,{children:(0,jt.jsx)(ut.o,{...s})})]})}layoutV2_renderWikiPageView(){const e=Jt(this.props.store,this.environment),t=e.visible?"wiki-right-margin-expanded":"wiki";return(0,jt.jsxs)(ct.Ar,{type:t,withBottomPadding:!0,children:[(0,jt.jsx)(ct.bU,{children:(0,jt.jsx)(St.e,{store:this.props.store,disabled:this.props.disabled,loadingContainerStore:this.props.loadingContainerStore,templatePickerMenuListStore:this.stores.templatePickerMenuListStore,onClick:It(this.props.store)?this.handlePlaceholderWrapClick:void 0,ref:e=>{e&&(this.contentEl=e)}})}),e.visible&&(0,jt.jsx)(ct.$K,{children:(0,jt.jsx)($.Z,{pageBlockStore:this.props.store,isVisible:e.visible,context:this.props.context,pageViewBlockAccessor:this.getContentWrapEl,isCollapsedAnchor:!0})})]})}renderPersisted(){var e;if(this.props.store.getType()===c.Ti.copyIndicator&&(this.props.store.getParentTable()!==D.v||this.props.store.getParentTable()===D.v&&0===Object.keys(this.props.store.getProperties()).length))return(0,jt.jsx)(dt.X,{});if(this.props.store.isCollectionView())return(0,jt.jsx)(Y.L1,{value:this.collectionContextStore,children:Be.default.checkGate("layout_collection_view_page")?this.layoutV2_renderCollectionPageViewBlock():this.renderCollectionPageViewBlock()});let t=(null===(e=this.collectionContextStore.collectionStore())||void 0===e?void 0:e.getDatabaseType())===g.Fi?this.getMeetingNotePageContent():Nt(this.props.context)?this.layoutV2_getPageContent():this.getPageContent();return this.collectionContextStore&&this.collectionContextStore.contextType&&(t=(0,jt.jsx)(Y.L1,{value:this.collectionContextStore,children:t})),(0,ce.Aw)(this.environment)?(0,jt.jsx)(Ye.O,{displayName:"PageContent",style:{...Bt.wrapStyle,...this.props.style},disabled:!this.canEdit()||this.props.store.isLocked(),shouldSelectOnEnter:Et,children:t}):t}getPageContent(){const e=!_t(this.props.store),t=-1*this.documentViewHorizontalOffset.state;return(0,jt.jsxs)(jt.Fragment,{children:[this.renderPageCover(),(0,jt.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",zIndex:E.db,flexShrink:0},children:(0,jt.jsx)(et.Z,{isVisible:!0,animationStyle:{width:ls(this.props.store,this.props.context,this.environment),translateX:t},render:()=>(0,jt.jsx)("div",{style:{maxWidth:"100%",minWidth:0},children:this.renderPageHeader()})})}),e&&(0,jt.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"center",paddingTop:5},children:[(0,jt.jsx)(et.Z,{isVisible:!0,animationStyle:{width:ls(this.props.store,this.props.context,this.environment),translateX:t},render:()=>(0,jt.jsx)("div",{style:{maxWidth:"100%",minWidth:0},children:this.renderDocumentView()})}),this.props.context===He.S.Frame&&(0,jt.jsx)($.Z,{pageBlockStore:this.props.store,isVisible:this.marginCommentsVisible.state,context:this.props.context,pageViewBlockAccessor:this.getContentWrapEl})]})]})}renderDetailsDivider(e){return(0,jt.jsx)("div",{style:{width:"100%",height:1,background:this.theme.regularDividerColor,marginBottom:8}},`divider-${e}`)}renderPageHeader(){const{WindowSizeStore:e}=this.environment,{store:t,paddingLeft:s,paddingRight:o}=this.props,{headerControls:n,bottomControls:r}=this.headerAndBottomControlsStore.state,l=[],a=this.pagePropertiesRenderState();"visible"===a.type&&(l.push((0,jt.jsx)(ft.$,{...a},"page-properties")),l.push(this.renderDetailsDivider(1)));const d=(0,ht.E)({collectionStore:Rt(this.props.store),format:qt(this.props.store),sectionPropertyIds:this.inlinePropertyIDsStore.state});"visible"===d.type&&(l.push((0,jt.jsx)(ht._,{topBorder:!0,state:d,store:t,disabled:this.props.disabled,onMouseEnter:this.handleDetailsMouseEnter,onMouseLeave:this.handleDetailsMouseLeave,blockPropertyValueOverlayStore:Gt(this.props.context),isInPeekRenderer:Wt(this.props.context)},"inline-page-sections")),l.push(this.renderDetailsDivider(2)));this.pageExpandedBacklinksRenderState()&&(l.push((0,jt.jsx)(pt.f,{store:this.props.store},"page-expanded-backlinks")),l.push(this.renderDetailsDivider(3)));const h=this.pageDiscussionsRenderState({disableDiscussionInput:!1});return"visible"===h.type&&(l.push((0,jt.jsx)(mt.z,{store:this.props.store,showDiscussionInput:h.showDiscussionInput,unresolvedDiscussionStores:h.unresolvedDiscussionStores},"page-discussions")),l.push(this.renderDetailsDivider(4))),(0,jt.jsxs)(i.Fragment,{children:[(0,jt.jsx)("div",{style:ss(this.props.store,this.environment),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,children:(0,jt.jsx)(yt.J,{store:t,pageViewBlockStore:this.stores.pageViewBlockStore,discussionInputStore:this.discussionInputStore,isEditable:this.isEditable(),headerControls:n,hasCover:this.hasCoverStore.state,isInSidePeek:zt(this.props.store),headerFocusStore:this.stores.headerFocusStore,paddingLeft:s,paddingRight:o,openMenuOnMount:this.clickedAddIconState,openMenuOnMountCallback:this.handleAddIconClick,disabled:!this.canEdit(),extraStyles:this.titleStyleStore.state,titlePlaceholder:this.props.titlePlaceholder,collectionContextStore:this.collectionContextStore,shouldShowTemplatePicker:this.showTemplatePickerStore.state,onTitleChange:this.handleTitleChange,onTitleEditText:this.handleTitleEditText,onTitleEsc:this.handleTitleEsc,onTitleUntab:this.handleTitleUntab,onTitleTab:this.handleTitleTab})}),(0,jt.jsx)("div",{style:ss(this.props.store,this.environment),onMouseEnter:this.handleDetailsMouseEnterThrottled,onMouseMove:this.handleDetailsMouseEnterThrottled,onMouseLeave:this.handleDetailsMouseLeaveDebounced,children:(0,jt.jsxs)(Je.p,{onFocus:this.handleDetailsFocus,onBlur:this.handleDetailsBlur,allowSelectionWithin:!0,style:{paddingLeft:e.getSafePaddingLeftCSS(s),paddingRight:e.getSafePaddingRightCSS(o),maxWidth:"100%",width:"100%"},children:[l,r.length>0&&(0,jt.jsx)("div",{style:this.getDetailControlsSectionStyle(),className:"notion-page-details-controls",children:r}),(0,jt.jsx)($e.Z,{store:t},t.id)]})})]})}getTopControls(){const e=[],t=this.renderAddIcon();t&&e.push((0,jt.jsx)(i.Fragment,{children:t},"add-icon"));const s=this.renderAddCover();return s&&e.push((0,jt.jsx)(i.Fragment,{children:s},"add-cover")),e}getBottomControls(e,t){const s=[],o=!e&&this.renderShowBacklinks();o&&s.push((0,jt.jsx)(i.Fragment,{children:o},"backlinks"));const n="hidden"===t.type,r=n&&this.renderShowDiscussion();r&&s.push((0,jt.jsx)(i.Fragment,{children:r},"discussions"));const l=this.renderResolveDiscussionButtonPopupMenu();l&&!n&&s.unshift((0,jt.jsx)(i.Fragment,{children:l},"resoled-discussions"));const a=this.renderMinimalPageSections();return a&&s.push((0,jt.jsx)(i.Fragment,{children:a},"minimal-page-sections")),s}getCommentControlPlacement(e){const{isTopControlsEmpty:t,isBottomControlsEmpty:s,discussionsRenderState:i}=e,{device:o}=this.environment;return this.shouldRenderAddDiscussion()?"hidden"!==i.type||s?o.isMobile&&t?"bottom":"top":"bottom":"hidden"}renderCollectionHeaderControls(){return(0,jt.jsxs)("div",{onFocus:this.handleHeaderFocus,onBlur:this.handleHeaderBlur,style:{...this.getHeaderControlsStyle()},className:"notion-page-controls",children:[this.renderAddIcon(),this.renderAddCover(),this.renderLinkedCollectionViewBlockAddTitle(),this.renderSprintBoardDescriptionToggle(),this.renderDescriptionToggle()]})}renderCollectionHeader(){const{paddingLeft:e,paddingRight:t,store:s}=this.props,{WindowSizeStore:i}=this.environment,o=this.shouldShowCollectionViewBlockTitle.state,n=(0,J.qG)(s.id)?null:(0,jt.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,jt.jsx)(Ct.Z,{store:this.props.store,isEditable:this.isEditable(),hasCover:this.hasCoverStore.state,isInSidePeek:zt(this.props.store),openMenuOnMount:this.clickedAddIconState,openMenuOnMountCallback:this.handleAddIconClick}),o&&(0,jt.jsx)(xt.Z,{store:this.props.store,disabled:!this.canEdit(),isInSidePeek:zt(this.props.store),paddingLeft:e,paddingRight:t,extraStyles:this.titleStyleStore.state,titlePlaceholder:this.props.titlePlaceholder,collectionContextStore:this.collectionContextStore,shouldShowTemplatePicker:this.showTemplatePickerStore.state,onTitleChange:this.handleTitleChange,onTitleEditText:this.handleTitleEditText,onTitleEsc:this.handleTitleEsc,onTitleUntab:this.handleTitleUntab,onTitleTab:this.handleTitleTab})]}),r=this.pagePropertiesRenderState(),l=this.pageDescriptionRenderState();return(0,jt.jsxs)("div",{style:ss(this.props.store,this.environment),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,children:[this.renderPageCover(),(0,jt.jsx)(et.Z,{isVisible:!0,animationStyle:{width:ls(this.props.store,this.props.context,this.environment)},render:()=>(0,jt.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:i.getSafePaddingLeftCSS(e)},children:[this.renderCollectionHeaderControls(),(0,jt.jsxs)("div",{style:{paddingRight:i.getSafePaddingRightCSS(t),marginBottom:8},children:[n,(0,jt.jsx)(Yt,{store:this.props.store}),"visible"===l.type&&(0,jt.jsx)(gt.Z,{disabled:!this.isEditable(),canEdit:this.canEdit(),locked:this.props.store.isLocked(),pageId:this.props.store.id,toggleStore:this.stores.pageDescriptionStore,descriptionStore:l.descriptionStore,collectionStore:l.collectionStore,userSettingsStore:l.currentUserSettingsStore}),"visible"===r.type&&(0,jt.jsx)(ft.$,{...r})]})]})})]})}renderPageCover(){const{WindowSizeStore:e}=this.environment,{store:t,paddingLeft:s,paddingRight:i,pageCoverHeight:o}=this.props,n=t.isCollectionView()?"20vh":o;return(0,jt.jsx)(Je.p,{allowSelectionWithin:!1,style:as(this.props.store,this.environment),onMouseEnter:this.handleHeaderMouseEnterThrottled,onMouseMove:this.handleHeaderMouseEnterThrottled,onMouseLeave:this.handleHeaderMouseLeaveDebounced,children:(0,jt.jsx)(wt.Z,{height:n,store:t,disabled:!this.isEditable(),paddingLeft:e.getSafePaddingLeftCSS(s),paddingRight:e.getSafePaddingRightCSS(i),proxyWidth:e.state.width})})}renderAddIcon(){const{device:e}=this.environment;if(this.isEditable()&&!this.hasIconStore.state)return(0,jt.jsx)(rt.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddRandomIconClick,icon:v.o,children:e.isSmallPhone?(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageIconMobile",defaultMessage:"Icon"}):(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageIcon",defaultMessage:"Add icon"})},"add-icon")}renderAddCover(){const{device:e}=this.environment;if(this.isEditable()&&!(0,J.qG)(this.props.store.id)&&!this.hasCoverStore.state)return!0===this.stores.loadingPageCoverStore.state?(0,jt.jsx)(rt.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,disabled:!0,icon:C.P,children:e.isSmallPhone?(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,jt.jsx)(rt.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddRandomCoverClick,icon:C.P,children:e.isSmallPhone?(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageCoverMobile",defaultMessage:"Cover"}):(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageCover",defaultMessage:"Add cover"})},"add-cover")}renderLinkedCollectionViewBlockAddTitle(){var e;const{store:t}=this.props,{device:s}=this.environment;if(!this.isEditable()||!t.isCollectionView()||t.getCollectionViewSourceCollectionStore())return;return B.QaF(null===(e=this.titleStore.state)||void 0===e?void 0:e.getValue())?void 0:(0,jt.jsx)(rt.Z,{style:this.getControlHoverStyle({}),isLightGray:!0,onClick:this.handleAddTitleClick,icon:P.c,children:s.isSmallPhone?(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"})},"add-title")}renderSprintBoardDescriptionToggle(){const{store:e}=this.props,{device:t}=this.environment;if(!e.isCollectionView()||!Lt(this.props.store)||!this.isEditable())return;return Boolean(e.getFormat().hide_collection_view_page_description)?(0,jt.jsx)(rt.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:()=>W.kQ({environment:this.environment,store:e,value:!1}),icon:y.z,children:t.isSmallPhone?(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):(0,jt.jsx)(rt.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:()=>{W.kQ({environment:this.environment,store:e,value:!0})},icon:y.z,children:(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})})}renderDescriptionToggle(){const{store:e}=this.props,{device:t}=this.environment;if(e.isCollectionView()&&e.getCollectionViewSourceCollectionStore())return this.shouldShowDescription()?(0,jt.jsx)(rt.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:this.handleHideDescription,icon:y.z,children:(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})}):this.isEditable()&&!$t(this.props.store)?(0,jt.jsx)(rt.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:this.handleAddDescriptionClick,icon:y.z,children:t.isSmallPhone?(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})}):$t(this.props.store)?(0,jt.jsx)(rt.Z,{isLightGray:!0,style:this.getControlHoverStyle({}),onClick:this.handleShowDescription,icon:y.z,children:t.isSmallPhone?(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):void 0}shouldRenderAddDiscussion(){const{store:e}=this.props;return!ne.A$("comments","section_hide")&&(!e.isCollectionView()&&(!e.isInsideCollection()&&(!Kt(this.props.store)&&(!!e.canComment()&&(!!this.environment.currentUser.isLoggedIn()&&!this.stores.pageViewBlockStore.state.forceDiscussionOpen)))))}renderAddDiscussion(e){const{device:t}=this.environment;return(0,jt.jsx)(rt.Z,{style:this.getControlHoverStyle({isBottomControl:e.isBottomControl}),isLightGray:!0,onClick:this.handleAddDiscussion,icon:f.v,children:t.isSmallPhone?(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"})},"add-comment")}renderShowDiscussion(){if(!ne.A$("comments","section_hide")&&Kt(this.props.store)){const e=Ft(this.props.store);return(0,jt.jsx)(rt.Z,{isGray:!0,onClick:this.handleShowDiscussion,icon:f.v,style:this.getDetailControlButtonStyle(),children:(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:e}})},"show-comments")}}renderShowBacklinks(){const e=this.numberOfBacklinks.state;if(0===e)return;if(ne.A$("backlinks","section_hide"))return;const t=t=>{let{onClick:s=M.ZT,tooltipEvents:i={},buttonPopupEvents:o={}}=t;return(0,jt.jsx)(rt.Z,{isGray:!0,icon:this.renderBacklinksIcon,style:this.getDetailControlButtonStyle(),onClick:s,...o,...i,children:(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:e}})})},s=(0,jt.jsx)(lt.Z,{renderTooltip:()=>(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Show pages linked to this page",id:"pageViewBlock.show.backlinks.tooltip"}),placement:lt.Z.Placement.Bottom,delayThreshold:400,render:e=>t({tooltipEvents:e,onClick:this.handleShowBacklinks})},"show-backlinks"),i=(0,jt.jsx)(st.ZP,{buttonPopupStore:this.stores.backlinksButtonPopupStore,popupType:st.Z4.Popup,renderOrigin:e=>t({buttonPopupEvents:e}),render:()=>{const e={menuType:de.og.Popup,width:500};return(0,jt.jsx)(ot.Z,{...e,children:this.numberOfBacklinks.state>0?(0,jt.jsx)(pt.f,{store:this.props.store}):null})}},"backlinks-popup");return ne.A$("backlinks","section_collapsed")?i:s}pageDescriptionRenderState(){if(!this.shouldShowDescription())return{type:"hidden"};const e=At(this.props.store);if(!e)return{type:"hidden"};const{pageDescriptionStore:t}=this.stores;if(!t.isExpanded())return{type:"hidden"};const{store:s}=this.props,{currentUserSettingsStore:i}=Pe.default.state;return{type:"visible",descriptionStore:e,currentUserSettingsStore:i,collectionStore:s.getCollectionViewSourceCollectionStore()}}pagePropertiesRenderState(){const{store:e}=this.props;if(e.isCollectionViewPageWithContent())return{type:"hidden"};const t=Rt(this.props.store);if(!t)return{type:"hidden"};const s=qt(this.props.store);return s?{type:"visible",store:e,format:s,collectionStore:t,disabled:!this.canEdit(),blockPropertyValueOverlayStore:Gt(this.props.context),isInPeekRenderer:Wt(this.props.context)}:{type:"hidden"}}renderMinimalPageSections(){const{store:e,disabled:t}=this.props,s=Rt(this.props.store);if(!s)return;const i=Zt(this.props.store),o=qt(this.props.store),n=e.isLocked();if(!o)return;const r=this.minimalPropertyIDsStore.state;return r&&r.length?(0,jt.jsx)(Pt.Z,{propertyIds:r,store:e,collectionStore:s,disabled:t,locked:n,schema:i,handleMouseMove:this.handleDetailsMouseEnter,handleMouseLeave:this.handleDetailsMouseLeave,handleContextMenu:()=>{},blockPropertyValueOverlayStore:Gt(this.props.context),format:o,type:"minimal",isInPeekRenderer:Wt(this.props.context)}):void 0}pageDiscussionsRenderState(e){if(ne.A$("comments","section_hide"))return{type:"hidden"};const t=this.environment.currentUser.isLoggedIn(),s=this.shouldShowDiscussion(),{store:i}=this.props,o=me.vV(i,{recursivelyLoadAllDiscussions:!1}),n=!e.disableDiscussionInput&&t&&i.canComment()&&0===o.length&&!_t(this.props.store);return!s||!n&&0===o.length?{type:"hidden"}:{type:"visible",showDiscussionInput:n,unresolvedDiscussionStores:o}}renderResolveDiscussionButtonPopupMenu(){const{device:e}=this.environment,t=me.mY(this.props.store,{recursivelyLoadAllDiscussions:!1});if(0===t.length)return;const s=(0,jt.jsx)(_.FormattedMessage,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:t.length}});return(0,ke.Sx)(this.environment)?(0,jt.jsx)(rt.Z,{icon:k.k,isGray:!0,style:this.getDetailControlButtonStyle(),onClick:()=>{F.Ib({environment:this.environment,blockStore:this.props.store,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:t.map((e=>e.id))})},children:s}):(0,jt.jsx)(st.ZP,{buttonPopupStore:this.stores.resolvedDiscussionButtonPopupStore,popupType:e.isMobile?st.Z4.SlideUp:st.Z4.Popup,renderOrigin:e=>(0,jt.jsx)(rt.Z,{icon:k.k,isGray:!0,style:this.getDetailControlButtonStyle(),...e,children:s}),render:s=>{let i;return i=e.isMobile?{menuType:de.og.Modal,title:(0,jt.jsx)(_.FormattedMessage,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:(0,jt.jsx)(nt.DoneMenuText,{}),onClickRight:s.close,whiteBackground:!0}:{menuType:de.og.Popup,width:500},(0,jt.jsx)(ot.Z,{...i,children:t.map(((e,t,i)=>(0,jt.jsx)(Mt.Z,{store:e,droppable:!0,render:()=>(0,jt.jsx)(xe.LazyDiscussion,{store:e,format:X.O2.Menu,isFirst:0===t,isOnly:1===i.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:this.props.store,onDismiss:s.close},e.id)},e.id)))})}},"resolve-discussions")}renderDocumentView(){const e=this.getLayoutContentStyles(),t=It(this.props.store)?this.handlePlaceholderWrapClick:void 0;return Tt(this.environment.device)?(0,jt.jsxs)("div",{style:e.wrapper,children:[e.leftPadding&&(0,jt.jsx)(Je.p,{allowSelectionWithin:!1,style:e.leftPadding,onClick:t}),this.renderDocumentViewContent(e.body,t),e.rightPadding&&(0,jt.jsx)(Je.p,{allowSelectionWithin:!1,style:e.rightPadding,onClick:t})]}):this.renderDocumentViewContent(e.nonIOSLayoutBody,t)}renderDocumentViewContent(e,t){const{store:s}=this.props,i=Ht(this.props.store),o=this.showTemplatePickerStore.state;return(0,jt.jsxs)("div",{style:e,ref:e=>{e&&(this.contentEl=e)},className:te.QS0,onClick:t,children:[!_t(this.props.store)&&(0,jt.jsx)(bt.Z,{store:s.getContentStore(),emptyDroppableStyle:{width:"100%"},disabled:this.props.store.isLocked()||this.props.disabled}),i&&(0,jt.jsx)(it.Z,{}),Qt(this.props.context)&&o&&(0,jt.jsx)(Dt.Z,{store:s,menuListStore:this.stores.templatePickerMenuListStore})]})}pageExpandedBacklinksRenderState(){return!!this.shouldShowBacklinks()&&0!==this.numberOfBacklinks.state}shouldShowDiscussion(){if(this.stores.pageViewBlockStore.state.forceDiscussionOpen)return!0;const e=ne.dy(this.environment,"comments"),t=ne.A$("comments","section_collapsed");if(this.props.store.isInsideCollection()&&!Kt(this.props.store)&&(e||t))return!0;if(!Kt(this.props.store))return!1;const s=this.discussionToggleStore.state;return void 0===s?e:s}shouldShowBacklinks(){const e=ne.dy(this.environment,"backlinks"),t=this.backlinksToggleStore.state;return void 0===t?e:t}shouldShowDescription(){if("sprint_board"===this.props.store.getFormat().special_page_for_pm_launch)return!0;const e=this.stores.pageDescriptionStore.isExpanded();return($t(this.props.store)||this.isEditable())&&e}isEditable(){return this.canEditCollection()&&!this.props.store.isLocked()&&!_t(this.props.store)}shouldSelectTitleOnMount(){const{device:e}=this.environment,{store:t}=this.props,s=this.titleStore.state,{forceSelectTitleOnMount:i}=this.props;return!!s&&(!!i||!t.isCollectionView()&&(!(e.isMobile&&!(0,Se.NW)(this.environment)&&!(0,we.Y)("supportsUntitledPageAutoSelectOnStart"))&&(!B.QaF(s.getValue())||It(this.props.store)&&!e.isMobile)))}static defaultPageCoverHeight(e){return e.device.isMobile?200:`${Bt.defaultDesktopPageCoverViewportPercentage}vh`}static paddingBottom(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{device:s}=e;return s.isTablet?380:s.isIOS?Math.max(350,t):s.isMobile?400:"30vh"}getHeaderControlsStyle(){const{store:e}=this.props,{device:t}=this.environment,{isMobile:s}=t,i=is(this.props.context,this.environment);let o,r,l;return s?this.hasCoverStore.state?(this.hasIconStore.state,l="block",o=i,r=4):(l="flex",o=i,r=os(this.environment)):e.isCollectionView()||zt(this.props.store)?(l="flex",this.hasCoverStore.state?(o=16,r=4):(o=4,r=4)):(l="flex",this.hasIconStore.state?(o=8,r=4):this.hasCoverStore.state?(o=16,r=4):(o=i,r=os(this.environment))),{display:l,justifyContent:"flex-start",flexWrap:"wrap",marginTop:o,marginBottom:r,marginLeft:-1,color:this.theme.lightTextColor,fontFamily:V.Z.getCompositeFontFamily(n.SP).sans,pointerEvents:"auto"}}getDetailControlsSectionStyle(){return{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:this.theme.lightTextColor,fontFamily:V.Z.getCompositeFontFamily(n.SP).sans}}getControlHoverIsVisible(e){const{device:t}=this.environment,s=this.stores.headerMouseStore.state.mouseEntered,i=this.stores.detailsMouseStore.state.mouseEntered,o=this.stores.headerFocusStore.state,n=this.stores.detailsFocusStore.state;return!!t.isMobile||(e?i&&!Le.Z.state.isKeyboardMode||n:s&&!Le.Z.state.isKeyboardMode||o)}getControlHoverStyle(e){let{isBottomControl:t}=e;const s=this.getControlHoverIsVisible(t);return{opacity:s?1:0,pointerEvents:s?"auto":"none",transition:"opacity 100ms ease"}}getDetailControlButtonStyle(){return{fontWeight:V.Z.fontWeight.medium,color:this.theme.mediumTextColor}}getLayoutContentStyles(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{device:t}=this.environment,{context:s,paddingLeft:i,paddingRight:o,paddingBottom:n}=this.props,{store:r}=this.props,l=r.getFormat(),a=l.page_font||Bt.defaultFontFamily,d=Bt.fontFamily[a],c=Wt(this.props.context),p=It(this.props.store)&&c&&!this.showTemplatePickerStore.state&&!Ht(this.props.store),u=s===He.S.InAppTemplatePreview;let g,m,S;if(t.isMobile)S=t.isAndroid?Bt.defaultAndroidFontSize:Bt.defaultMobileFontSize;else{S=l.page_small_text?Bt.fontSmallSize[a]||Bt.defaultFontSmallSize:Bt.fontSize[a]||Bt.defaultFontSize}let v={},C={},f={};if(!p){const{WindowSizeStore:t}=this.environment,s=t.getSafePaddingLeftCSS(i),r=t.getSafePaddingRightCSS(o);v={gridTemplateColumns:`${s} calc(100% - ${s} - ${r}) ${r}`},g={},m={},C=this.isCompletionsUiVisible.state?{paddingBottom:"600px"}:It(this.props.store)?{paddingBottom:"15vh"}:{paddingBottom:Be.default.checkGate("remove_legacy_editor_styling")?0:n},f={...C,paddingLeft:e?0:s,paddingRight:e?0:r}}const x=Bt.fontLetterSpacing[a],y=Bt.fontLineHeight[a]||1.5;let b={};c&&(b={minHeight:Bt.peekViewContentMinHeight,zIndex:1});let k={};u&&(k={margin:"0 auto"});let w={};if(t.isPhone&&!r.isCollectionView()&&this.canEdit()&&!this.hasCoverStore.state){const e=132,t=ds(this.props.context,this.environment);w={minHeight:`calc(100vh - ${h.g+e-t}px)`}}return{wrapper:{flexShrink:0,flexGrow:1,display:"grid",gridTemplateColumns:"100%",maxWidth:"100%",width:"100%",...v},leftPadding:g,body:{display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:d,fontSize:S,letterSpacing:x?`${x}em`:void 0,lineHeight:y,zIndex:E.ke,...C,...b,...k,...w},rightPadding:m,nonIOSLayoutBody:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:d,fontSize:S,letterSpacing:x?`${x}em`:void 0,lineHeight:y,width:"100%",zIndex:E.ke,...f,...b,...k,...w}}}}Bt.wrapStyle={width:"100%",display:"flex",flexDirection:"column",position:"relative",alignItems:"center",flexGrow:1},Bt.defaultDesktopPageCoverViewportPercentage=30,Bt.defaultFontFamily=V.Z.getCompositeFontFamily(n.SP).sans,Bt.defaultFontSize=16,Bt.defaultMobileFontSize=16,Bt.defaultAndroidFontSize=17,Bt.defaultFontSmallSize=14,Bt.peekViewContentMinHeight=240,Bt.fontFamily={serif:V.Z.getCompositeFontFamily(n.SP).serif,mono:V.Z.getCompositeFontFamily(n.SP).mono},Bt.fontSize={serif:17,mono:15},Bt.fontSmallSize={serif:15,mono:14},Bt.fontLetterSpacing={serif:0,mono:.055},Bt.fontLineHeight={serif:1.6,mono:1.6};const Vt=Bt;function Et(){return 0===Ge.default.state.stores.length}function _t(e){if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(c.Ti.externalObjectInstancePage)}function Lt(e){return"sprint_board"===e.getFormat().special_page_for_pm_launch}function It(e){return!e.hasContent()&&(!e.isCollectionView()||e.isType("collection_view_page")&&e.isCollectionViewPageWithContent())}function Ft(e){return me.Xp(e,{recursivelyLoadAllDiscussions:!1})}function At(e){return e.getCollectionViewSourceDescriptionStore()}function Rt(e){return e.getAssociatedCollectionStore()}function Zt(e){return e.getSchema()}function Ht(e){return Boolean(Ke.Z.state.pageMap[e.id])||Ze.Z.state.pages.has(e.id)}function Wt(e){return e===He.S.PeekView}function Ot(e){return e===He.S.Frame}function Ut(e){return e===He.S.InAppTemplatePreview}function zt(e){return ie.en(e)&&(Ue.default.isSidePeekOpen()||Ue.default.isSidePeekClosing.state)}function Nt(e){return!!(Wt(e)||Ot(e)||Ut(e))&&Be.default.checkGate("layout_main_frame_page")}function Gt(e){return Wt(e)?Oe.Z:Ae.Z}function Kt(e){return Ft(e)>0}function $t(e){const t=At(e);return W.vn(t)}function Xt(e){return Wt(e)?We.Z:Ve.Z}function qt(e){const t=Rt(e);if(!t)return;const s=Zt(e),i=t.getFormat();return S.iB(i,s,void 0,S.j5.Collection)}function Qt(e){return Ot(e)||Wt(e)}function Yt(e){let{store:t}=e;window.__c={n:"SprintBoardDescription"};const s=(0,a.VK)((()=>Lt(t)),[t]),i=(0,a.VK)((()=>Boolean(t.getFormat().hide_collection_view_page_description)),[t]);return s&&!i?(0,jt.jsx)(gt.k,{}):null}function Jt(e,t){return{visible:(0,q.fg)(t,e)}}function es(e,t,s){if(t===He.S.CollectionPageView)return!0;const{device:i}=s,{isPhone:o}=i,n=e.isFullWidth(),r=e.isCollectionView(),l=Wt(t);return n&&!o||r||l||o}function ts(e,t){if(function(e){return e===Pe.default.state.mainEditorCurrentBlockStore}(e)){const{RouterStore:e}=t;return e.state.route.collectionViewId}}function ss(e,t){const s={width:"100%",display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,flexGrow:0};return e.isCollectionView()&&(e.isLocked()&&(s.cursor="default"),Ce.eA(t)&&(s.position="sticky",s.left=0)),s}function is(e,t){return t.device.isMobile?16:Wt(e)?32:80}function os(e){return e.device.isMobile?32:4}function ns(e){let{store:t,paddingLeft:s,paddingRight:i,context:o,disabled:n}=e;window.__c={n:"CollectionView"};const l=(0,r.O7)(),d=(0,a.VK)((()=>t.isCollectionView()),[t]),h=(0,a.VK)((()=>ts(t,l)),[t,l]);return d?(0,jt.jsx)(Qe.D,{overridePaddingLeft:s,overridePaddingRight:i,store:t,isFullScreen:!0,viewId:h,disabled:n,hideHeaderActions:o===He.S.InAppTemplatePreview}):null}function rs(e,t,s,i){return i.device.isPhone?"phone":i.device.isTablet?es(t,s,i)?"wide":"tablet":Wt(s)?zt(t)?"side-peek":"center-peek":Ut(s)?"template-preview":es(t,s,i)?e?"wide-right-margin-expanded":"wide":"default"}function ls(e,t,s){return es(e,t,s)?"100%":J.CC}function as(e,t){const s=ss(e,t);return s.zIndex=E.ag,s}function ds(e,t){return 28+is(e,t)}}}]);