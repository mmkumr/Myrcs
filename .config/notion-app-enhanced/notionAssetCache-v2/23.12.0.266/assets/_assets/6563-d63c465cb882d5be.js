"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6563],{54814:(e,t,o)=>{o.d(t,{nc:()=>a,rG:()=>l});o(57658);var n=o(6287),i=o(98165),r=o(26350),s=o(54642);async function l(e){let{environment:t,spaceId:o,databaseType:i,parentStore:l}=e;if(!o)return;const a=await s.getTypedDatabases(t,{spaceId:o,databaseType:i});return"success"===a.type?a.data.result.map((e=>r.NW.createChildStore(l,{table:n.v,id:e.collectionId}))):void 0}async function a(e){let{environment:t,spaceId:o,databaseTypes:n,parentStore:r,teamId:s}=e;const a=[];return await Promise.all(n.map((async e=>{await async function(e){let{environment:t,spaceId:o,databaseType:n,parentStore:r,teamId:s}=e;const a=await l({spaceId:o,environment:t,databaseType:n,parentStore:r});if(!a)return!1;for(const l of a){const e=i.VP(l);if(e&&e.id===s)return!0}return!1}({environment:t,spaceId:o,databaseType:e,parentStore:r,teamId:s})&&a.push(e)}))),a}},13401:(e,t,o)=>{o.d(t,{Z:()=>c});var n=o(67294),i=o(24405),r=o(8848),s=o(47453),l=o(31339),a=o(52275),d=o(85893);const c=n.forwardRef(((e,t)=>{window.__c={n:"AddMenuItem"};const o=(0,i.yK)((t=>({base:{color:e.isBlue?r.ZP.blue:t.mediumTextColor}})),[e.isBlue]),{color:n}=o.base;return(0,d.jsx)(a.Z,{ref:t,...e,title:(0,d.jsx)("div",{style:{color:n,fill:n},children:e.title}),icon:(0,d.jsx)(l.Z,{icon:s.R,styles:{fill:n}})})}))},73657:(e,t,o)=>{o.d(t,{Z:()=>r});o(67294);var n=o(28992),i=o(85893);const r=function(e){return(0,i.jsx)(n.Z,{...e,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}},62644:(e,t,o)=>{o.d(t,{Qv:()=>Ie,ZP:()=>De,I4:()=>Le,Sm:()=>_e});o(30541),o(57658);var n=o(67294),i=o(83355),r=o(480),s=o(86628),l=o(49085),a=o(66897),d=o(76205),c=o(99036),p=o(80951),u=o(84619),h=o(45433),m=o(40506),g=o(53877),v=o(58573),f=o(42875),x=o(42853),y=o(56666),C=o(21197),b=o(37612),S=o(72126),M=o(32056),k=o(23014),w=o(21202),j=o(77420),F=o(13493),Z=o(29369),T=o(19889),I=o(70203),R=o(97880),P=o(82990),V=o(4308),A=o(31412),B=o(31299),D=o(28020),_=o(97004),L=o(17335),E=o(26991),O=o(33929),H=o(87279),N=o(98742),G=o(98165),U=o(29376),W=o(59054),K=o(54814);var z=o(80444),Q=o(61766),q=o(29798),$=o(26350),Y=o(68834),X=o(28398),J=o(97180),ee=o(64921),te=o(52275),oe=o(31945),ne=o(60458),ie=o(73063),re=o(68894),se=o(3386),le=o(68785),ae=o(78140),de=o(32163),ce=o(43765),pe=o(40721),ue=o(53437),he=o(11470),me=o(77137),ge=o(72495),ve=o(45959),fe=o(26388),xe=o(92864),ye=o(64369),Ce=o(66653),be=o(41209),Se=o(93289),Me=o(83264),ke=o(78948),we=o(10009),je=o(22084),Fe=o(85567),Ze=o(47082),Te=o(85893);let Ie=function(e){return e[e.AdvancedFilter=0]="AdvancedFilter",e[e.PropertyFilter=1]="PropertyFilter",e}({});const Re=(0,A.defineMessages)({startingMessage:{defaultMessage:"Select or type a date...",id:"search.dateMenu.dateMessage"}}),Pe="50vh";class Ve extends i.Z{constructor(){super(...arguments),this.storeTypes={query:l.default.createClass(""),menuListStore:q.Z,dateFilterPopupStore:Q.Z,dateRangeFilterPopupStore:Q.Z},this.renderTextMenu=e=>{const{intl:t}=this.props,{device:o}=this.environment,n=(0,Te.jsx)(ge.Z,{isInput:!0,disableDesktopPadding:!0,children:(0,Te.jsx)(re.ZP,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,d.vR)(e)&&e.value.value?e.value.value:"",onChange:e=>{Ne({type:"exact",value:e.target.value},this.props.onChange,this.props.propertyFilter)},onClearButtonClick:()=>{Ne({type:"exact",value:void 0},this.props.onChange,this.props.propertyFilter)},placeholder:t.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.textType.searchPlaceholder"}),showClearButton:!0,textWrapperStyle:{marginLeft:8,marginRight:8}})}),i=(0,Te.jsxs)(ge.Z,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!o.isMobile&&this.renderDesktopTopActions(),(0,d.vR)(e)&&n]});let r;return r=o.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose,header:i}:{menuType:H.og.Popup,maxHeight:Pe,width:220,header:i},(0,Te.jsx)(ae.Z,{...r})},this.renderNumberMenu=e=>{const{intl:t}=this.props,{device:o}=this.environment,n=(0,Te.jsx)(ge.Z,{isInput:!0,disableDesktopPadding:!0,children:(0,Te.jsx)(re.ZP,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,d.vR)(e)&&"number"==typeof e.value.value?e.value.value.toString():"",inputLeft:this.renderNumberOperator(e),onChange:e=>{Ne({type:"exact",value:(0,M.p3)(e.target.value)},this.props.onChange,this.props.propertyFilter)},onClearButtonClick:()=>{Ne({type:"exact",value:void 0},this.props.onChange,this.props.propertyFilter)},placeholder:t.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.numberType.searchPlaceholder"}),showClearButton:!0,textWrapperStyle:{marginLeft:8,marginRight:8}})}),i=(0,Te.jsxs)(ge.Z,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!o.isMobile&&this.renderDesktopTopActions(),(0,d.vR)(e)&&n]});let r;return r=o.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose,header:i}:{menuType:H.og.Popup,maxHeight:Pe,width:220,header:i},(0,Te.jsx)(ae.Z,{...r})},this.renderUserMenuItem=(e,t)=>{const{device:o}=this.environment,n=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,Te.jsx)(te.Z,{...t,title:(0,Te.jsx)(xe.vw,{isSingle:!0,shouldShrink:!0,format:o.isMobile?xe.vw.Format.Large:xe.vw.Format.Medium,userValue:e,showRemoveButton:!1}),isTokenTitle:!0,checkState:n}),action:()=>{Ne(n?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:T.KJ,id:e.id}}],this.props.onChange,this.props.propertyFilter)}}},this.renderBotMenuItem=(e,t)=>{const{device:o}=this.environment,n=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,Te.jsx)(te.Z,{...t,title:(0,Te.jsx)(xe.Jn,{isSingle:!0,shouldShrink:!0,format:o.isMobile?xe.Jn.Format.Large:xe.Jn.Format.Medium,botValue:e,showRemoveButton:!1}),isTokenTitle:!0,checkState:n}),action:()=>{Ne(n?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:j.cZ,id:e.id}}],this.props.onChange,this.props.propertyFilter)}}},this.getRelatedCollectionPartial=this.createComputedStore((()=>{const e=Ue(this.props.schema,this.props.propertyFilter,this.props.parentStore);return e&&(0,c.p_)(e)?{appConfigUri:(0,U.ke)(e,this.props.parentStore),schema:(0,U.uJ)(e,this.props.parentStore)}:{}})),this.renderMoreActionsPopup=e=>{const{allowAddingToCombinatorFilter:t}=this.props,{device:o}=this.environment;let n;n=o.isMobile?{menuType:H.og.ActionSheet}:{menuType:H.og.Popup,maxHeight:Pe};const i=S.oA([{key:"delete",render:e=>(0,Te.jsx)(te.Z,{...e,title:(0,Te.jsx)(A.FormattedMessage,{id:"database.filterValue.deleteFilter.title",defaultMessage:"Delete filter"}),icon:(0,b.y)({width:14})}),action:()=>{var t,o;e.close(),null===(t=(o=this.props).onDelete)||void 0===t||t.call(o)}},t&&{key:"merge",render:e=>(0,Te.jsx)(fe.Z,{placement:fe.Z.Placement.Right,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,Te.jsx)("div",{children:(0,Te.jsx)(X.ep,{})}),render:t=>(0,Te.jsx)(te.Z,{...(0,N.Z)(e,t),title:(0,Te.jsx)(A.FormattedMessage,{id:"database.filterValue.mergeIntoAdvancedFilter.title",defaultMessage:"Add to advanced filter"}),icon:(0,C.Q)({width:14})})}),action:()=>{var t,o;e.close(),null===(t=(o=this.props).onAddToCombinatorFilter)||void 0===t||t.call(o)}}]);return(0,Te.jsx)(ae.Z,{...n,children:(0,Te.jsx)(de.Z,{type:de.i.Vertical,sections:[{key:"actions",render:e=>(0,Te.jsx)(ge.Z,{disableMobilePadding:!0,...e}),items:i}],initialFocus:void 0})})},this.handleClose=e=>{var t,o;null===(t=(o=this.props).onClose)||void 0===t||t.call(o)},this.getPersonAutocompleteResults=async e=>{let{users:t,bots:o}=await B.CO({environment:this.environment,query:e,membersOnly:!1});return t=t.slice(0,20),o=o.slice(0,20),await Promise.all([...t.map((async e=>{let{id:t}=e;const o=(0,$.Kv)(this.props.parentStore,{table:T.KJ,id:t});await o.load()})),...o.map((async e=>{const t=(0,$.Kv)(this.props.parentStore,{table:j.cZ,id:e.id,spaceId:e.space_id});await t.load()}))]),{users:t,bots:o}},this.getRelationAutocompleteResults=async e=>{const{query:t,spaceId:o,collectionId:n}=e;if(!o||!n)return[];const{results:i}=await B.df({environment:this.environment,query:t,collectionId:n,limit:20,spaceId:o,excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!1,boostRecentlyViewedPages:!1});return 0===i.length?[]:(await Promise.all(i.map((async e=>{const t=(0,$.Kv)(this.props.parentStore,{table:w.iU,id:e});await t.load()}))),i)}}renderComponent(){return(0,Te.jsx)(se.Z,{capture:!0,onEsc:this.handleClose,children:this.renderMenu()})}renderMenu(){const{propertyFilter:e,schema:t,parentStore:o}=this.props,{property:n,filter:i}=e,r=(0,d.fI)({schema:t,property:n,getRecordModel:o.getRecordModel}),s=(0,d.a_)(i)?i.subfilter:i;if("text"===r)return(0,d.Ly)(s)&&this.renderTextMenu(s);if("relation"===r)return(0,d.e)(s)&&this.renderRelationRequest(s);if("checkbox"===r)return(0,d.XA)(s)&&this.renderCheckboxMenu(s);if("select"===r||"multi_select"===r)return((0,d.dx)(s)||(0,d.NU)(s))&&this.renderSelectMenu(s);if("status"===r)return(0,d.r2)(s)&&this.renderStatusMenu(s);if("person"===r)return(0,d.Gb)(s)&&this.renderPersonRequest(s);if("number"===r)return(0,d.h6)(s)&&this.renderNumberMenu(s);if("date"===r)return(0,d.gE)(s)&&this.renderDateMenu(s);if("file"===r);else{if("location"===r)return(0,d.Mp)(s)?(0,Te.jsx)(Be,{filter:s,parentStore:o,updateValue:e=>Ne(e,this.props.onChange,this.props.propertyFilter),onClose:this.props.onClose,desktopTopActions:this.renderDesktopTopActions(),mobileMenuTitle:this.renderMobileMenuTitle(),mobileMoreActions:this.renderMobileMoreActions()}):null;if("verification"===r)return(0,d.Jw)(s)&&this.renderVerificationMenu(s);(0,R.t1)(r)}}renderSelectMenu(e){const{intl:t}=this.props,{device:o}=this.environment,n=this.stores.query.state,i=Ue(this.props.schema,this.props.propertyFilter,this.props.parentStore);if(!i||!(0,c.cu)(i))return;const r=i.options||[],s=(0,d.vR)(e)?(0,d.dx)(e)?(0,d.mg)(e):(0,d.qC)(e):[],l=Le({query:n,propertySchema:i,selectedValues:s,updateValue:e=>{Ne(e,this.props.onChange,this.props.propertyFilter)},isMobile:o.isMobile,styles:{checkboxIcon:{fill:this.theme.regularIconColor,pointerEvents:"none"}}}),a=s.map((e=>{if(void 0===e.value)return;const t=(0,p.i7)(r,e.value);return t?(0,Te.jsx)(je.a,{format:o.isMobile?u.lo.Large:u.lo.Small,isSingle:!1,value:t.value,color:t.color,showRemoveButton:!0,onClickRemove:()=>{Ne(S.zu(s,e),this.props.onChange,this.props.propertyFilter)}},t.id):void 0})),h=(0,Te.jsx)(Ze.Z,{focus:!o.isMobile||void 0,focusAfterAnimation:!0,format:Ze.Z.Format.FilterValue,tokens:a,placeholder:t.formatMessage({defaultMessage:"Select one or more options…",id:"database.filterValue.selectType.searchPlaceholder"}),onRemoveLastToken:()=>{Ne(s.slice(0,s.length-1),this.props.onChange,this.props.propertyFilter)},onClearButtonClick:()=>{var e,t;Ne([],this.props.onChange,this.props.propertyFilter),null===(e=(t=this.props).onClose)||void 0===e||e.call(t)},value:this.stores.query.state,onChange:e=>{this.updateInputValue(e.target.value)},dontShowBorderBottom:o.isAndroid,showClearButton:!0}),m=(0,Te.jsxs)(ge.Z,{desktopStyle:{paddingBottom:0},children:[!o.isMobile&&this.renderDesktopTopActions(),(0,d.vR)(e)&&h]});let g;return g=o.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose,header:m}:{menuType:H.og.Popup,maxHeight:Pe,width:260,header:m,disableHeaderBorder:!0,tokenInputHeader:!0},(0,Te.jsx)(ae.Z,{...g,children:(0,d.vR)(e)&&(0,Te.jsxs)(Te.Fragment,{children:[0===l.length&&(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ce.Z,{title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}),l.length>0&&(0,Te.jsx)(de.Z,{type:de.i.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Te.jsx)(ge.Z,{...e}),items:l}],store:this.stores.menuListStore,onAccept:()=>{this.updateInputValue("")}})]})})}renderStatusMenu(e){const{device:t}=this.environment,o=Ue(this.props.schema,this.props.propertyFilter,this.props.parentStore);if(!o||"status"!==o.type)return;const n=(0,Te.jsx)(ge.Z,{desktopStyle:{paddingBottom:0},children:!t.isMobile&&this.renderDesktopTopActions()});let i;i=t.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose,header:n}:{menuType:H.og.Popup,maxHeight:Pe,width:260,header:n,disableHeaderBorder:!0,tokenInputHeader:!0};const r=_e({propertySchema:o,statusFilterValues:(0,d.vR)(e)?(0,d.wB)(e):[],updateValue:e=>{Ne(e,this.props.onChange,this.props.propertyFilter)},isMobile:t.isMobile,styles:{checkboxIcon:{fill:this.theme.regularIconColor}}}),s=(0,Te.jsx)(de.Z,{type:de.i.Vertical,initialFocus:0,sections:[{key:"groups",items:r,render:e=>(0,Te.jsx)(ge.Z,{...e,title:"",style:{paddingTop:0}})}]}),l=(0,Te.jsx)(ge.Z,{topBorder:!0,children:(0,Te.jsx)(te.Z,{title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"Clear selection",id:"database.filterValue.selectType.clearSelection.message"}),focused:!1,onClick:()=>{Ne([],this.props.onChange,this.props.propertyFilter)}})});return(0,Te.jsx)(ae.Z,{...i,children:(0,d.vR)(e)&&(0,Te.jsxs)(Te.Fragment,{children:[s,l]})})}renderPersonRequest(e){const t=this.stores.query.state;return(0,Te.jsx)(me.Z,{request:t,performRequest:this.getPersonAutocompleteResults,render:(t,o)=>this.renderPersonMenu(e,t,o)})}renderPersonMenu(e,t,o){const{intl:n}=this.props,{device:i}=this.environment,r=this.stores.query.state,s=Ue(this.props.schema,this.props.propertyFilter,this.props.parentStore);if(!s)return;const l=(0,d.vR)(e)?(0,d.R8)(e):[],c=S.oA(l.map(((e,t)=>{if("exact"===e.type&&e.value){const t=(0,a.Hl)({pointer:e.value,getRecordValue:this.props.parentStore.getRecordValue});return(0,Te.jsx)(xe.ZP,{actor:t,format:i.isMobile?xe.ZP.Format.Large:xe.ZP.Format.Small,showRemoveButton:!0,onClickRemove:()=>{Ne(S.zu(l,e),this.props.onChange,this.props.propertyFilter)},shouldShrink:!0,isSingle:!1},e.value.id)}if("relative"===e.type&&"me"===e.value&&this.props.allowRelativePersonFilter)return(0,Te.jsx)(Fe.Z,{format:i.isMobile?u.lo.Large:u.lo.Small,value:(0,Te.jsx)(He,{}),onClickRemove:()=>{Ne(S.zu(l,e),this.props.onChange,this.props.propertyFilter)},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showFullValueTooltip:!0},t)}))),p=(0,Te.jsx)(Ze.Z,{focus:!i.isMobile||void 0,focusAfterAnimation:!0,format:Ze.Z.Format.FilterValue,tokens:c,placeholder:n.formatMessage({defaultMessage:"Search for one or more people…",id:"database.filterValue.personType.searchPlaceholder"}),onRemoveLastToken:()=>{Ne(l.slice(0,l.length-1),this.props.onChange,this.props.propertyFilter)},onClearButtonClick:()=>{var e,t;Ne([],this.props.onChange,this.props.propertyFilter),null===(e=(t=this.props).onClose)||void 0===e||e.call(t)},value:this.stores.query.state,onChange:e=>{this.updateInputValue(e.target.value)},dontShowBorderBottom:i.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"}}),h=(0,Te.jsxs)(ge.Z,{desktopStyle:{paddingBottom:0},children:[!i.isMobile&&this.renderDesktopTopActions(),(0,d.vR)(e)&&p]});let m;m=i.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose,header:h}:{menuType:H.og.Popup,maxHeight:Pe,width:260,header:h,disableHeaderBorder:!0};const g=S.oA((o&&o.users||[]).map((e=>this.renderUserMenuItem(e,l)))),v=["created_by","last_edited_by"].includes(s.type)?S.oA((o&&o.bots||[]).map((e=>this.renderBotMenuItem(e,l)))):[];if(this.props.allowRelativePersonFilter&&o&&(!r||"me".includes(r))){const e=Boolean(l.find((e=>"relative"===e.type&&"me"===e.value)));g.unshift({key:"me",render:t=>(0,Te.jsx)(te.Z,{...t,title:(0,Te.jsx)(He,{}),checkState:e,style:i.isMobile?void 0:{fontSize:14}}),action:()=>{Ne(e?l.filter((e=>{let{value:t}=e;return"me"!==t})):[...l,{type:"relative",value:"me"}],this.props.onChange,this.props.propertyFilter)}})}const f=[];return g.length>0&&f.push({key:"user property",render:e=>(0,Te.jsx)(ge.Z,{...e}),items:g}),v.length>0&&f.push({key:"bot property",render:e=>(0,Te.jsx)(ge.Z,{...e,title:"Pick a bot"}),items:v}),(0,Te.jsx)(ae.Z,{...m,children:(0,d.vR)(e)&&(0,Te.jsxs)(Te.Fragment,{children:[t&&(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ce.Z,{title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"Something went wrong.",id:"database.filterValue.personType.searchPersonPropertyMenuItem.errorMessage"})})}),0===f.length&&o&&!t&&(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ce.Z,{title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"No results",id:"database.filterValue.personType.noResults.message"})})}),!o&&!t&&(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ke.Z,{})}),f.length>0&&(0,Te.jsx)(de.Z,{type:de.i.Vertical,initialFocus:0,sections:f,store:this.stores.menuListStore,onAccept:()=>{this.updateInputValue("")}})]})})}renderCheckboxMenu(e){var t;const{device:o}=this.environment,{context:n}=this.props;let i;i=o.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose}:{menuType:H.og.Popup,maxHeight:Pe,width:220,footer:(0,Te.jsx)(Ke,{onChange:this.props.onChange,propertyFilter:this.props.propertyFilter,onClose:this.props.onClose,filter:e})};const r=null===(t=e.value)||void 0===t?void 0:t.value;return(0,Te.jsxs)(ae.Z,{...i,children:[n===Ie.PropertyFilter&&(0,Te.jsx)(ge.Z,{children:!o.isMobile&&this.renderDesktopTopActions()}),(0,Te.jsx)(de.Z,{type:de.i.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Te.jsx)(ge.Z,{style:n===Ie.PropertyFilter?{paddingTop:0}:void 0,...e}),items:[{key:"unchecked",render:e=>(0,Te.jsx)(te.Z,{...e,title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"}),isTokenTitle:!0,checkState:!1===r}),action:()=>{Ne({type:"exact",value:!1},this.props.onChange,this.props.propertyFilter)}},{key:"checked",render:e=>(0,Te.jsx)(te.Z,{...e,title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"}),isTokenTitle:!0,checkState:!0===r}),action:()=>{Ne({type:"exact",value:!0},this.props.onChange,this.props.propertyFilter)}}]}],store:this.stores.menuListStore,onAccept:this.props.onClose}),o.isMobile&&(0,Te.jsx)(Ke,{onChange:this.props.onChange,propertyFilter:this.props.propertyFilter,onClose:this.props.onClose,filter:e})]})}renderRelationRequest(e){const t=this.stores.query.state,{currentSpaceStore:o}=z.default.state,n=Ue(this.props.schema,this.props.propertyFilter,this.props.parentStore);if(!n||!(0,c.p_)(n)||!o)return;const i=o.id,r=(0,c.F0)(n);return r?(0,Te.jsx)(me.Z,{request:{query:t,spaceId:i,collectionId:r},performRequest:this.getRelationAutocompleteResults,render:(t,o)=>this.renderRelationMenu(e,t,o)}):void 0}renderRelationMenu(e,t,o){const{intl:n}=this.props,{device:i}=this.environment,r=this.stores.query.state,s=Ue(this.props.schema,this.props.propertyFilter,this.props.parentStore);if(!s||!(0,c.p_)(s))return;const l=(0,c.F0)(s);if(!l)return;const a=(0,d.vR)(e)?(0,d.YO)(e):[],p=S.oA(a.map(((e,t)=>{if(!e.value)return;const o={format:i.isMobile?u.lo.Large:u.lo.Small,shouldWrap:!1,showRemoveButton:!0,isSingle:!1,shouldShrink:!0,onClickRemove:()=>{Ne(S.zu(a,e),this.props.onChange,this.props.propertyFilter)}},n=e.type;if("exact"===n)return(0,Te.jsx)(we.Z,{blockId:e.value,parentStore:this.props.parentStore,...o},e.value);if("relative"===n){var r;const{appConfigUri:n}=this.getRelatedCollectionPartial.state;if(!n)return;return(0,Te.jsx)(Fe.Z,{value:null===(r=k.qB[n])||void 0===r||null===(r=r[e.value.variable])||void 0===r?void 0:r.formattedMessage,backgroundColor:"transparent",showFullValueTooltip:!0,...o},t)}(0,R.t1)(n)}))),h=(0,Te.jsx)(Ze.Z,{focus:!i.isMobile||void 0,focusAfterAnimation:!0,format:Ze.Z.Format.FilterValue,tokens:p,placeholder:n.formatMessage({defaultMessage:"Search for one or more pages…",id:"database.filterValue.relationType.searchPlaceholder"}),onRemoveLastToken:()=>{Ne(a.slice(0,a.length-1),this.props.onChange,this.props.propertyFilter)},onClearButtonClick:()=>{var e,t;Ne([],this.props.onChange,this.props.propertyFilter),null===(e=(t=this.props).onClose)||void 0===e||e.call(t)},value:this.stores.query.state,onChange:e=>{this.updateInputValue(e.target.value)},dontShowBorderBottom:i.isAndroid,style:{maxHeight:"20vh",overflowY:"auto"},showClearButton:!0}),m=(0,Te.jsxs)(ge.Z,{desktopStyle:{paddingBottom:0},children:[!i.isMobile&&this.renderDesktopTopActions(),(0,d.vR)(e)&&h]});let g;g=i.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose,header:m}:{menuType:H.og.Popup,maxHeight:Pe,width:260,header:m,disableHeaderBorder:!0};const v=function(e,t){if(!e)return;const o=$.Xr.createChildStore(t,{table:F.n,id:e}).getParentBlockStore();if(!o)return;const n=(0,G.Dg)(o,1);if(!n)return;if(n.isTemplate())return n}(this.props.collectionViewId,this.props.parentStore);o&&!r&&v&&l&&v.getParentCollectionId()===l&&(o=S.jj([v.id,...o]));let f=[];if(o){const e=function(e,t,o,n,i){return e.map((e=>{const r={type:"exact",value:e},s=Oe(t,r),l=$.G.createChildStore(o,{table:w.iU,id:e});return{key:e,action:We(s,t,r,n,i),render:e=>(0,Te.jsx)(he.Z,{store:l,checkState:s,hidePath:!0,...e})}}))}(o,a,this.props.parentStore,this.props.propertyFilter,this.props.onChange);f=((0,d.a_)(this.props.propertyFilter.filter)?[]:this.getRelativeRelationMenuItems(r,a)).concat(e)}return(0,Te.jsx)(ae.Z,{...g,children:(0,d.vR)(e)&&(0,Te.jsxs)(Te.Fragment,{children:[t&&(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ce.Z,{title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"Something went wrong.",id:"database.filterValue.relationType.searchRelationPropertyMenuItem.errorMessage"})})}),0===f.length&&o&&!t&&(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ce.Z,{title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"No results",id:"database.filterValue.relationType.noResults.message"})})}),!o&&!t&&(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ke.Z,{})}),f.length>0&&(0,Te.jsx)(de.Z,{type:de.i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,Te.jsx)(ge.Z,{...e}),items:f}],store:this.stores.menuListStore,onAccept:()=>{this.updateInputValue("")}})]})})}renderDateMenu(e){const{context:t}=this.props,{device:o}=this.environment;let n;return n=o.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose}:{menuType:H.og.Popup,maxHeight:Pe},(0,Te.jsxs)(ae.Z,{...n,children:[t===Ie.PropertyFilter&&!o.isMobile&&(0,Te.jsx)(ge.Z,{desktopStyle:{paddingBottom:0},children:this.renderDesktopTopActions()}),(0,d.vR)(e)?(0,d.TQ)(e)?this.renderDateRangePicker(e):this.renderDatePicker(e):void 0]})}renderDateRangePicker(e){const t=Ue(this.props.schema,this.props.propertyFilter,this.props.parentStore);if(!t)return;let o;if((0,d.TQ)(e)&&"exact"===e.value.type&&e.value.value){const t=e.value.value;o={starting:t.start_date?{type:"date",start_date:t.start_date}:void 0,ending:t.end_date?{type:"date",start_date:t.end_date}:void 0}}else o=(0,d.TQ)(e)&&"relative"===e.value.type?e.value:{starting:void 0,ending:void 0};const n={disableMenuWrap:!0,title:t.name,value:o,onUpdate:e=>{var t,n;if(e.error)return;const i={...o,...e.value},r=null===(t=i.starting)||void 0===t?void 0:t.start_date,s=null===(n=i.ending)||void 0===n?void 0:n.start_date;Ge({operator:"date_is_within",value:{type:"exact",value:r||s?{type:"daterange",start_date:r,end_date:s}:void 0}},this.props.onChange,this.props.propertyFilter)},allowRelativeRangeFilter:this.props.allowRelativeDateFilter,relativeRangePopupStore:this.stores.dateRangeFilterPopupStore,onUpdateRelativeFilter:t=>{Ge({...e,value:t},this.props.onChange,this.props.propertyFilter)}};return(0,Te.jsx)(Te.Fragment,{children:(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(Me.Z,{...n})})})}renderDateInput(e,t){return(0,Te.jsx)(Ce.Z,{...t,placeholder:O.default.formatMessage(Re.startingMessage),focused:"exact"===e.value.type,value:e.value,onUpdate:t=>{var o;if(t.error)return;const n=null===(o=t.value)||void 0===o?void 0:o.start_date;Ge({...e,value:{type:"exact",value:n?{type:"date",start_date:n}:void 0}},this.props.onChange,this.props.propertyFilter)},inputRight:this.props.allowRelativeDateFilter&&(0,Te.jsx)(ie.Z,{icon:x.i,iconStyle:{width:12},style:{...!this.environment.device.isMobile&&{height:20,width:20},color:this.theme.mediumIconColor},onClick:()=>{this.stores.dateFilterPopupStore.setState({open:!0})}}),hideClearButton:"relative"===e.value.type||void 0,isRightLastElementOfInput:!0})}renderDatePicker(e){if(!(0,d.vR)(e))return;const t="exact"===e.value.type?e.value.value:(0,g.Id)(e.value);return!t||(0,m.J_)(t)?(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(be.Z,{type:"date",filterValue:e.value,onUpdate:t=>{Ge({...e,value:t},this.props.onChange,this.props.propertyFilter)},renderOrigin:t=>this.renderDateInput(e,t),disabled:"exact"===e.value.type&&this.props.allowRelativeDateFilter,buttonPopupStore:this.stores.dateFilterPopupStore})}),(0,Te.jsxs)(ge.Z,{style:{padding:"0px 14px 14px 14px"},children:[(0,Te.jsx)(Se.Z,{firstDayOfWeek:D.AK.state,value:t?g.OQ.notionDateToLuxon(t).toMillis():Date.now(),onChange:e=>{Ne({type:"exact",value:(0,g.hT)(e,(0,f.r)())},this.props.onChange,this.props.propertyFilter)}}),"relative"===e.value.type&&(0,Te.jsx)(ye.Z,{isSmall:!0,style:{marginLeft:4,marginTop:4},children:(0,Te.jsx)(A.FormattedMessage,{id:"collectionFilterMenu.dateFilter.relativeDateFilter.description",defaultMessage:"Filter will update with the current date"})})]})]}):void 0}renderVerificationMenu(e){const{device:t}=this.environment,{context:o}=this.props,n=(0,d.vR)(e)?(0,d.fl)(e):[],i=n.map((e=>{let{value:t}=e;return t})),r=V.zz.map((e=>{const t=i.includes(e);return{key:e,render:o=>(0,Te.jsx)(te.Z,{icon:(0,Te.jsx)(ne.Z,{checked:t,size:14,style:{fill:this.theme.regularIconColor,pointerEvents:"none"}}),title:(0,L.cq)({type:"exact",value:e}),...o}),action:()=>{if(t)Ne(n.filter((t=>{let{value:o}=t;return o!==e})),this.props.onChange,this.props.propertyFilter);else{const t={type:"exact",value:e};Ne([...n,t],this.props.onChange,this.props.propertyFilter)}}}}));let s;return s=t.isMobile?{menuType:H.og.Modal,title:this.renderMobileMenuTitle(),left:this.renderMobileMoreActions(),right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:this.props.onClose}:{menuType:H.og.Popup,maxHeight:Pe,width:220,footer:(0,Te.jsx)(Ke,{onChange:this.props.onChange,propertyFilter:this.props.propertyFilter,onClose:this.props.onClose,filter:e})},(0,Te.jsxs)(ae.Z,{...s,children:[o===Ie.PropertyFilter&&(0,Te.jsx)(ge.Z,{children:!t.isMobile&&this.renderDesktopTopActions()}),(0,Te.jsx)(de.Z,{type:de.i.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Te.jsx)(ge.Z,{...e}),items:r}],store:this.stores.menuListStore})]})}renderNumberOperator(e){return(0,Te.jsx)("span",{style:{color:this.theme.lightTextColor},children:(0,L.WC)(e.operator).toLocaleLowerCase()})}renderDesktopTopActions(){const e=this.props,{propertyFilter:t,schema:o,context:n}=e;if(n!==Ie.PropertyFilter)return;const{property:i}=t,r=o[i];return r?(0,Te.jsxs)("div",{style:{display:"flex",color:this.theme.lightTextColor,fontSize:12,marginBottom:6},children:[(0,Te.jsx)("span",{style:{flexShrink:1,marginLeft:8,...P.Z.textOverflowStyle},children:this.renderPropertyName(r)}),(0,d.a_)(t.filter)&&this.renderRollupOperatorSelect(),this.renderOperatorSelect(),(0,Te.jsx)("div",{style:{flexGrow:1}}),this.renderMoreActions()]}):void 0}renderPropertyName(e){return(0,d.c3)(e)?this.renderDateFilterModeSelect(e):e.name}renderDateFilterModeSelect(e){const{propertyFilter:t}=this.props,{device:o}=this.environment,n=t.filter;if(!(0,d.vR)(n)||!(0,d.gE)(n))return e.name;const i={width:190,items:d.T,selectedItem:(0,d.TX)(n),getKey:e=>e,onSelect:e=>{Ge({...n,use_end:(0,d.UG)(e)},this.props.onChange,this.props.propertyFilter)},renderItem:e=>(0,Te.jsx)(fe.Z,{renderTooltip:()=>(0,L._T)(e.value),render:t=>(0,Te.jsx)(te.Z,{title:(0,L.IF)(e.value),...(0,N.Z)(e,t)}),placement:fe.Z.Placement.Right,textWrap:!0,style:{width:"260px"}}),renderOrigin:e=>(0,Te.jsx)(ee.Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:4,flexShrink:0},children:(0,Te.jsxs)("div",{style:{display:"flex",alignItems:"center",...!o.isMobile&&{color:this.theme.mediumTextColor,fill:this.theme.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,Te.jsx)("span",{style:{marginRight:4},children:(0,L.IF)((0,d.TX)(n))}),(0,Te.jsx)(Ae,{})]})})};return(0,Te.jsx)(ve.Z,{...i,mobileActionSheet:!0})}renderMobileMenuTitle(){const{propertyFilter:e,schema:t,context:o}=this.props,{property:n}=e,i=t[n];if(i)return o===Ie.PropertyFilter?(0,Te.jsxs)("div",{style:{display:"flex"},children:[(0,Te.jsx)("span",{style:{fontWeight:P.Z.fontWeight.medium,flexShrink:1,marginLeft:8,maxWidth:150,...P.Z.textOverflowStyle},children:this.renderPropertyName(i)}),(0,d.a_)(e.filter)&&this.renderRollupOperatorSelect(),this.renderOperatorSelect()]}):i.name}renderMobileMoreActions(){const{context:e}=this.props;if(e===Ie.PropertyFilter)return this.renderMoreActions()}renderRollupOperatorSelect(){const{propertyFilter:e,intl:t,onChange:o}=this.props,{filter:n}=e,{device:i}=this.environment;if(!(0,d.a_)(n))return;const r={width:190,items:d.Rf,getKey:e=>e,selectedItem:n.operator,onSelect:e=>{null==o||o({...n,operator:e})},renderItem:e=>(0,Te.jsx)(te.Z,{title:(0,L.SW)(e.value,t),...e}),renderOrigin:e=>(0,Te.jsx)(ee.Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:4,flexShrink:0},children:(0,Te.jsxs)("div",{style:{display:"flex",alignItems:"center",...!i.isMobile&&{color:this.theme.lightTextColor,fontSize:12}},children:[(0,Te.jsx)("span",{style:{marginRight:4},children:(0,L.SW)(n.operator,t).toLocaleLowerCase()}),(0,Te.jsx)(Ae,{})]})})};return(0,Te.jsx)(ve.Z,{...r,mobileActionSheet:!0})}renderOperatorSelect(){const{propertyFilter:e,schema:t,parentStore:o}=this.props,{property:n}=e,{device:i}=this.environment,r=(0,d.a_)(e.filter)?e.filter.subfilter:e.filter;if((0,d.a_)(r))return;const s=(0,d.fI)({schema:t,property:n,getRecordModel:o.getRecordModel});let l=(0,d.xm)(s);"status"===s&&(l=l.filter((e=>!(0,d._N)(e))));const a={width:190,items:l,selectedItem:r.operator,getKey:e=>e,onSelect:e=>{Ge((0,L.li)(s,r,e,"propertyFilter"),this.props.onChange,this.props.propertyFilter)},renderItem:e=>(0,Te.jsx)(te.Z,{title:(0,L.WC)(e.value),...e}),renderOrigin:e=>(0,Te.jsx)(ee.Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:4,flexShrink:0},children:(0,Te.jsxs)("div",{style:{display:"flex",alignItems:"center",...!i.isMobile&&{color:this.theme.mediumTextColor,fill:this.theme.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,Te.jsx)("span",{style:{marginRight:4},children:(0,L.WC)(r.operator).toLocaleLowerCase()}),(0,Te.jsx)(Ae,{})]})})};return(0,Te.jsx)(ve.Z,{...a,mobileActionSheet:!0})}renderMoreActions(){const{device:e}=this.environment;return(0,Te.jsx)(oe.ZP,{popupType:this.environment.device.isMobile?ue.kQ.SlideUp:ue.kQ.Popup,render:this.renderMoreActionsPopup,renderOrigin:t=>(0,Te.jsx)(ie.Z,{icon:y.o,style:{...!e.isMobile&&{height:20,width:20,marginRight:8,marginTop:-2}},...t}),style:{width:240},originGap:2,placementToOrigin:oe.pO.Right,alignmentToOrigin:oe.vR.Start})}getRelativeRelationMenuItems(e,t){const{appConfigUri:o,schema:n}=this.getRelatedCollectionPartial.state;if(!o||!(0,E.Sh)(n,o))return[];const i=k.qB[o],r=Object.keys(i);return S.oA(r.map((o=>{if(!e||o.includes(e)){const e={type:"relative",value:{type:"builtin",variable:o}},n=Oe(t,e);return{key:o,render:e=>(0,Te.jsx)(te.Z,{...e,title:i[o].formattedMessage,checkState:n}),action:We(n,t,e,this.props.propertyFilter,this.props.onChange)}}})))}updateInputValue(e){this.stores.query.setState(e),this.stores.menuListStore.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}}function Ae(){window.__c={n:"OperatorChevron"};const{device:e}=(0,r.O7)();return(0,x.i)({width:10,height:10,...e.isMobile&&{marginTop:2}})}function Be(e){window.__c={n:"LocationFilterValueMenu"};const{filter:t,parentStore:o,updateValue:i,onClose:l,desktopTopActions:a,mobileMenuTitle:c,mobileMoreActions:p}=e,m=(0,r.O7)(),g=(0,n.useMemo)((()=>(0,d.vR)(t)?(0,d.u0)(t):[]),[t]),f=(0,r.Fy)(),x=(0,s.VK)((()=>S.oA(g.map((e=>{if(!e.value)return;const t=$.NW.createChildStore(o,{table:"collection",id:e.value});return(0,Te.jsx)(Fe.Z,{format:f.isMobile?u.lo.Large:u.lo.Small,value:(0,Te.jsx)(Y.Z,{collectionStore:t}),onClickRemove:()=>{const t=S.zu(g,e);i(t)},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showFullValueTooltip:!0},e.value)})))),[g,f.isMobile,o,i]),[y,C]=(0,n.useState)(""),b=(0,A.useIntl)(),M=(0,s.VK)((()=>{var e;return null===(e=z.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),k=(0,s.VK)((()=>{var e;return null===(e=z.default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),{status:w,typedCollections:j}=function(e){const{spaceId:t,environment:o,parentStore:n,databaseType:i}=e,[{value:r,status:s}]=(0,W.r5)((async()=>K.rG({environment:o,spaceId:t,databaseType:i,parentStore:n})),[t,i,o,n]);return{status:s,typedCollections:r}}({spaceId:M,environment:m,databaseType:h.iS,parentStore:o}),F=(0,s.VK)((()=>(0,v.ZP)(y,j||[],(e=>I.QaF(e.getName()??[])))),[y,j]),T=(0,s.qz)(void 0,q.Z),R=(0,n.useCallback)(((e,t)=>{const o=Boolean(t.find((t=>"exact"===t.type&&t.value===e.id)));return{key:e.id,render:t=>(0,Te.jsx)(te.Z,{...t,title:(0,Te.jsx)(Y.Z,{collectionStore:e}),isTokenTitle:!0,checkState:o}),action:()=>{const o=S.ln(t,[{type:"exact",value:e.id}],(e=>e.value));i(o)}}}),[i]),P=(0,s.VK)((()=>{const e=[],t={},n=[];for(const o of F){const e=G.VP(o);e?k&&e.getMembers().some((e=>"user"===e.entity_type&&e.user_id===k))&&(t[e.id]=[...t[e.id]??[],o]):n.push(o)}for(const[i,r]of Object.entries(t)){const t=$.zX.createChildStore(o,{table:Z.e0,id:i});e.push({key:i,items:r.map((e=>R(e,g))),render:e=>(0,Te.jsx)(ge.Z,{topBorder:!0,...e,title:(0,Te.jsx)(Te.Fragment,{children:t.getName()??""})})})}return n.length>0&&e.push({key:"private",items:n.map((e=>R(e,g))),render:e=>(0,Te.jsx)(ge.Z,{topBorder:!0,...e,title:(0,Te.jsx)(A.FormattedMessage,{id:"collectionFilterValueMenu.privateLocationSection",defaultMessage:"Private"})})}),e}),[F,k,o,R,g]),V=(0,Te.jsx)(Ze.Z,{focus:!f.isMobile||void 0,focusAfterAnimation:!0,format:Ze.Z.Format.FilterValue,tokens:x,placeholder:b.formatMessage({defaultMessage:"Search for one or more sources",id:"database.filterValue.locationType.searchPlaceholder"}),onRemoveLastToken:()=>{const e=g.slice(0,g.length-1);i(e)},onClearButtonClick:()=>{i([]),null==l||l()},value:y,onChange:e=>{C(e.target.value)},dontShowBorderBottom:f.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"}}),B=(0,Te.jsxs)(ge.Z,{desktopStyle:{paddingBottom:0},children:[!f.isMobile&&a,V]});let D;return D=f.isMobile?{menuType:H.og.Modal,title:c,left:p,right:(0,Te.jsx)(pe.DoneMenuText,{}),onClickRight:l,header:B}:{menuType:H.og.Popup,maxHeight:Pe,width:260,header:B,disableHeaderBorder:!0},(0,Te.jsx)(ae.Z,{...D,children:(0,d.vR)(t)&&(0,Te.jsxs)(Te.Fragment,{children:[("pending"===w||"idle"===w)&&(0,Te.jsx)(ge.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 0px"},children:(0,Te.jsx)(le.Z,{})}),"rejected"===w&&(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ce.Z,{title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"Something went wrong.",id:"database.filterValue.personType.searchPersonPropertyMenuItem.errorMessage"})})}),"resolved"===w&&(0,Te.jsxs)(Te.Fragment,{children:[0===(null==j?void 0:j.length)||0===F.length?(0,Te.jsx)(ge.Z,{children:(0,Te.jsx)(ce.Z,{title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}):null,j&&j.length>0&&(0,Te.jsx)(de.Z,{type:de.i.Vertical,initialFocus:0,sections:P,store:T,onAccept:()=>{C("")}})]})]})})}Ve.displayName="CollectionFilterValueMenu";const De=(0,A.injectIntl)(Ve);function _e(e){const{propertySchema:t,statusFilterValues:o,updateValue:n,isMobile:i,styles:r}=e,s=t.groups??[],l=t.options??[],a=[];for(const d of s){const e=()=>{const e=(0,_.CN)(s,l,o,{type:"is_group",value:d.name});e&&n(e)},t=(0,_.rQ)({group:d,options:l,filterValues:o}),c=l.filter((e=>{var t;return null===(t=d.optionIds)||void 0===t?void 0:t.includes(e.id)})),p=[];for(const a of c){const e=()=>{const e=(0,_.CN)(s,l,o,{type:"is_option",value:a.value});e&&n(e)};p.push({key:`option-${a.id}`,action:e,render:o=>(0,Te.jsx)(te.Z,{...o,icon:(0,Te.jsx)(ne.Z,{checked:t.optionCheckedInfo.get(a.id)??!1,size:14,onClick:e,style:r.checkboxIcon}),title:(0,Te.jsx)(je.F,{format:i?u.lo.Large:u.lo.Medium,isSingle:!0,value:a.value,color:a.color,showRemoveButton:!1,groupColor:d.color}),style:{paddingLeft:12}})})}a.push({key:`group-${d.id}`,action:e,render:o=>(0,Te.jsx)(te.Z,{...o,icon:(0,Te.jsx)(ne.Z,{checked:t.groupCheckState,size:14,onClick:e,style:r.checkboxIcon}),title:(0,Te.jsx)(J.r_,{group:d})})},...p)}return a}function Le(e){const{query:t,propertySchema:o,selectedValues:n,updateValue:i,isMobile:r,styles:s}=e,l=o.options||[];return(t?(0,v.ZP)(t,l,(e=>e.value)):l).map((e=>{const t=Boolean(n.find((t=>t.value===e.value)));return{key:e.value,render:o=>(0,Te.jsx)(te.Z,{icon:(0,Te.jsx)(ne.Z,{onClick:o.onClick,checked:t,size:14,style:s.checkboxIcon}),title:(0,Te.jsx)(je.a,{format:r?u.lo.Large:u.lo.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1}),isTokenTitle:!0,...o}),action:()=>{const o=t?n.filter((t=>{let{value:o}=t;return o!==e.value})):[...n,{type:"exact",value:e.value}];i(o)}}}))}function Ee(e){return Array.isArray(e)?0===e.length?{type:"exact",value:void 0}:1===e.length?e[0]:e:e}function Oe(e,t){return Boolean(e.find((e=>S.Xy(e,t))))}function He(){return(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})}function Ne(e,t,o){const{filter:n}=o;(0,d.a_)(n)?null==t||t({...n,subfilter:{...n.subfilter,value:Ee(e)}}):null==t||t({...n,value:Ee(e)})}function Ge(e,t,o){const{filter:n}=o;(0,d.a_)(n)?null==t||t({...n,subfilter:e}):null==t||t(e)}function Ue(e,t,o){const{property:n}=t,i=e[n];if(!(i&&"rollup"===i.type&&i.relation_property&&i.target_property))return i;{const t=e[i.relation_property];if(t&&(0,c.p_)(t)){const e=(0,c.j0)(t);if(e){const t=o.getRecordModel(e);if(!t)return;const n=t.getNormalizedSchema();if(n){const e=n[i.target_property];if(e&&"rollup"!==e.type)return e}}}}}function We(e,t,o,n,i){return()=>{Ne(e?t.filter((e=>!S.Xy(e,o))):[...t,o],i,n)}}function Ke(e){let{filter:t,onChange:o,propertyFilter:n,onClose:i}=e;return(0,d.yI)(t.value)?null:(0,Te.jsx)(ge.Z,{topBorder:!0,children:(0,Te.jsx)(te.Z,{focused:!1,title:(0,Te.jsx)(A.FormattedMessage,{defaultMessage:"Clear",id:"database.filterValue.clear.message"}),onClick:()=>{Ne({type:"exact",value:void 0},o,n),null==i||i()}})})}},68834:(e,t,o)=>{o.d(t,{Z:()=>l});o(67294);var n=o(86628),i=o(31278),r=o(76798),s=o(85893);const l=function(e){window.__c={n:"CollectionLocationToken"};const{collectionStore:t}=e,o=(0,n.VK)((()=>t.getIcon()),[t]);return(0,s.jsxs)("div",{style:{display:"flex",columnGap:4,alignItems:"center"},children:[(0,s.jsx)(i.Z,{disabled:!0,icon:o,isEmptyPage:!1,size:20}),(0,s.jsx)(r.Z,{store:t,style:{maxWidth:180}})]})}},31339:(e,t,o)=>{o.d(t,{Z:()=>r});o(67294);var n=o(480),i=o(85893);const r=function(e){window.__c={n:"CollectionMenuIcon"};const t=((0,n.O7)().device.isMobile,{width:16});return(0,i.jsx)("div",{style:t,children:e.icon(e.styles)})}},42917:(e,t,o)=>{o.d(t,{Z:()=>p});o(67294);var n=o(480),i=o(24405),r=o(8848),s=o(5257),l=o(56666),a=o(25130),d=o(52275),c=o(85893);const p=function(e){window.__c={n:"CollectionSettingsMenuItem"};const{icon:t,iconStyle:o,title:p,caption:u,right:h,rightStyle:m,isRed:g,isGray:v,isOrange:f,isPadded:x,onClick:y,onMouseDown:C,onMouseEnter:b,onMouseLeave:S,disabled:M,showChevron:k,chevronStyle:w,rotateChevron:j,showDragHandle:F,focused:Z,textWrapperStyle:T,shouldWrapCaption:I,desktopIconStyle:R}=e,P=(0,n.O7)(),{isMobile:V}=P.device,A=(0,i.yK)((e=>({style:{color:v?e.mediumTextColor:f?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularTextColor,fill:v?e.mediumIconColor:f?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:M?.4:void 0},redHoveredStyle:{color:r.ZP.red,fill:r.ZP.red},leftIconStyle:{width:24,height:x?24:V?18:16,marginRight:-2,...t===l.o&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:M?e.regularTextColor:e.lightTextColor,fill:M?e.regularIconColor:e.lightIconColor,flexShrink:0,...m},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...w},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[v,f,M,o,x,V,t,w,m]),[B,D]=(0,a.o$)(),_=(0,a.nq)(D);return(0,c.jsx)(d.Z,{ref:B,icon:null==t?void 0:t(A.leftIconStyle),focused:Z||!1,disabled:M,title:p,caption:u,shouldWrapCaption:I,desktopTitleStyle:{flexGrow:1,flexShrink:1},showDragHandle:F,buttonStyle:A.style,rightStyle:A.rightStyle,hoveredStyle:g?A.redHoveredStyle:void 0,ignoreLocalHoverState:!!M||void 0,right:(0,c.jsxs)(c.Fragment,{children:[h,!M&&k&&(0,s.o)({...A.rightIconStyle,...j&&A.rightIconRotatedStyle})]}),onClick:y,onMouseDown:C,onMouseEnter:b,onMouseLeave:S,textWrapperStyle:T,desktopIconStyle:R,disallowTabbing:!_})}},13709:(e,t,o)=>{o.d(t,{Z:()=>y});var n=o(67294),i=o(480),r=o(86628),s=o(68626),l=o(72126),a=o(91155),d=o(87279),c=o(61766),p=o(42917),u=o(52275),h=o(31945),m=o(78140),g=o(32163),v=o(53437),f=o(72495),x=o(85893);const y=function(e){let{icon:t,title:o,selectedKey:y,options:C,onChange:b,onClick:S,popupStyle:M,menuItemOptionsStyle:k,disabled:w,collectionContextStore:j,openButtonPopup:F}=e;window.__c={n:"CollectionSettingsPickListMenuItem"};const Z=(0,i.Fy)(),T=C.find((e=>l.Xy(e.key,y))),I=(0,r.qz)(void 0,c.Z),R=(0,r.Kw)(I);return(0,n.useEffect)((()=>{j&&F&&(I.setState({...I.state,open:F}),j.settingsStore.setState({...j.settingsStore.state,openButtonPopup:void 0})),T||s.log({level:"error",from:"CollectionSettingsPickListMenuItem",type:"InvalidSelectedItem",error:(0,a.Ui)("Selected key is invalid.")})})),(0,x.jsx)(h.ZP,{popupType:Z.isMobile?v.kQ.SlideUp:v.kQ.Popup,alignmentToOrigin:h.vR.End,placementToOrigin:h.pO.Bottom,style:M,originGap:0,buttonPopupStore:I,disabled:w,onClick:S,renderOrigin:e=>(0,x.jsx)(p.Z,{title:o,showChevron:!0,right:null==T?void 0:T.title,rotateChevron:R.open,disabled:w,icon:t,...e}),render:e=>{let t;t=Z.isMobile?{menuType:d.og.ActionSheet}:{menuType:d.og.Popup,width:250};const o=l.oA(C.map(((t,o)=>({key:o,render:e=>(0,x.jsx)(u.Z,{...e,disabled:!1,title:t.title,icon:t.icon,caption:t.caption,body:t.body,style:k,checkState:l.Xy(t.key,y)}),action:()=>{b(t.key),e.close()}}))));return(0,x.jsx)(m.Z,{...t,children:(0,x.jsx)(g.Z,{type:g.i.Vertical,sections:[{key:0,render:e=>(0,x.jsx)(f.Z,{enableActionSheetTitle:!0,...e}),items:o}],initialFocus:0})})}})}},28398:(e,t,o)=>{o.d(t,{R1:()=>L,ZP:()=>H,ep:()=>O});o(67294);var n=o(83355),i=o(49085),r=o(76205),s=o(61794),l=o(56666),a=o(21197),d=o(38715),c=o(55863),p=o(72126),u=o(97880),h=o(82990),m=o(31412),g=o(8406),v=o(40778),f=o(5149),x=o(39699),y=o(93959),C=o(97004),b=o(87279),S=o(98742),M=o(61766),k=o(42917),w=o(23063),j=o(52275),F=o(31945),Z=o(73063),T=o(78140),I=o(28992),R=o(32163),P=o(89728),V=o(53437),A=o(72495),B=o(26388),D=o(95691),_=o(85893);let L=function(e){return e[e.FilterBar=0]="FilterBar",e[e.SettingsFilters=1]="SettingsFilters",e[e.SettingsSort=2]="SettingsSort",e}({});class E extends n.Z{constructor(){super(...arguments),this.storeTypes={showMore:i.default.createClass(!1),moreActionsButtonPopupStore:M.Z},this.renderSaveActionsPopup=e=>{const{device:t}=this.environment;let o;o=t.isMobile?{menuType:b.og.ActionSheet}:{menuType:b.og.Popup,width:250};const n=p.oA([t.isPhone&&{key:"reset",render:e=>(0,_.jsx)(j.Z,{...e,disabled:!1,title:(0,_.jsx)(U,{})}),action:()=>{this.handleReset(e)}},{key:"newView",render:e=>(0,_.jsx)(j.Z,{...e,disabled:!1,title:(0,_.jsx)(N,{})}),action:()=>{this.handleSaveAsNewViewClick(e)}},K(this.props.collectionContextStore,this.props.context)&&{key:"merge",render:e=>(0,_.jsx)(B.Z,{placement:B.Z.Placement.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,_.jsx)("div",{children:(0,_.jsx)(O,{})}),render:t=>(0,_.jsx)(j.Z,{...(0,S.Z)(e,t),disabled:!1,title:(0,_.jsx)(G,{})})}),action:()=>{this.handleMergeIntoCombinatorFilter(e)}}]);return(0,_.jsx)(T.Z,{...o,children:(0,_.jsx)(R.Z,{type:R.i.Vertical,sections:[{key:0,render:e=>(0,_.jsx)(A.Z,{enableActionSheetTitle:!0,...e}),items:n}],initialFocus:0})})},this.handleSaveInCurrentViewClick=()=>{const{collectionContextStore:e,context:t}=this.props,o=e.collectionViewStore();o&&(g.wd({environment:this.environment,collectionContextStore:e,action:"click_save_control_save_in_current_view"}),x.createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveInCurrentViewClick",environment:this.environment,perform:n=>{v.Ys({environment:this.environment,type:t===L.FilterBar?v.mO.All:t===L.SettingsFilters?v.mO.Filters:v.mO.Sorts,collectionContextStore:e,targetCollectionView:o,transaction:n})}}),v.RD({environment:this.environment,seen:!0}))},this.handleSaveAsNewViewClick=e=>{const{collectionContextStore:t,intl:o}=this.props;g.wd({environment:this.environment,collectionContextStore:t,action:"click_save_control_save_as_new_view"}),x.createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveAsNewViewClick",environment:this.environment,perform:e=>{v.k7({environment:this.environment,collectionContextStore:t,transaction:e,intl:o})}}),null==e||e.close()},this.handleMergeIntoCombinatorFilter=e=>{const{collectionContextStore:t,context:o}=this.props,n=(0,C.Pi)(t),i=t.currentPropertyFiltersStore.state.filter((e=>(0,y.EE)(e.id)));v.iU({environment:this.environment,collectionContextStore:t,temporaryState:{...t.temporaryState.state,propertyFilters:{value:i},combinatorFilter:{value:n}}});const r=o===L.FilterBar?t.filterBarCombinatorFilterSettingsState:t.filterOptionsCombinatorFilterSettingsState;f.wl({collectionSettingsStore:r,item:{type:"filter"}}),g.wd({environment:this.environment,collectionContextStore:t,action:"merge_filter_into_combinator"}),null==e||e.close()},this.handleReset=e=>{const{collectionContextStore:t,context:o}=this.props;g.wd({environment:this.environment,collectionContextStore:t,action:"click_save_control_reset"});const n=t.temporaryState.state,i=o===L.SettingsFilters?{...n,propertyFilters:void 0,combinatorFilter:void 0}:o===L.SettingsSort?{...n,sorts:void 0}:void 0;v._x({environment:this.environment,collectionContextStore:t,temporaryState:i}),v.RD({environment:this.environment,seen:!0}),null==e||e.close()},this.handleMoreOptionsClick=()=>{const{collectionContextStore:e}=this.props;g.wd({environment:this.environment,collectionContextStore:e,action:"click_save_control_more_options_button"}),this.stores.showMore.setState(!0)},this.handleSaveActionsPopupClick=()=>{const{collectionContextStore:e}=this.props;g.wd({environment:this.environment,collectionContextStore:e,action:"click_save_control_more_options_popup"}),v.RD({environment:this.environment,seen:!0})},this.changeCount=this.createComputedStore((()=>{const{collectionContextStore:e,context:t}=this.props,o=e.localStateDiffStore.state;return t===L.SettingsFilters?(o.filters.moved.length>0?1:0)+o.filters.added.length+o.filters.removed.length+o.filters.updated.length:0}))}renderComponent(){const{context:e,collectionContextStore:t,showHoverActionsStore:o}=this.props,{showMore:n}=this.stores,{device:i}=this.environment,r=t.permissionScopes.state;if(e===L.FilterBar)return i.isPhone?r.canConfigureBlock?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(P.Z,{isOrange:!0,hovered:!0,style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:h.Z.fontWeight.semibold},onClick:this.handleSaveInCurrentViewClick,children:(0,_.jsx)(W,{})}),(0,_.jsx)(F.ZP,{popupType:this.environment.device.isMobile?V.kQ.SlideUp:V.kQ.Popup,render:this.renderSaveActionsPopup,originGap:4,onClick:this.handleSaveActionsPopupClick,buttonPopupStore:this.stores.moreActionsButtonPopupStore,renderOrigin:e=>(0,_.jsx)(Z.Z,{style:{width:32,height:32},iconStyle:{width:16},hovered:!0,icon:l.o,...e})})]}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(P.Z,{style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:h.Z.fontWeight.semibold},hovered:!0,isGray:!0,onClick:()=>this.handleReset(),children:(0,_.jsx)(U,{})})}):(0,_.jsx)(w.Z,{isVisible:t.isFullScreen.state||!o||o.state,animationStyle:{opacity:1},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,_.jsx)(P.Z,{isGray:!0,onClick:()=>this.handleReset(),style:{lineHeight:1.1,fontSize:i.isMobile?16:14},children:(0,_.jsx)(U,{})}),r.canConfigureBlock&&(0,_.jsx)(F.ZP,{popupType:this.environment.device.isMobile?V.kQ.SlideUp:V.kQ.Popup,render:this.renderSaveActionsPopup,originGap:4,onClick:this.handleSaveActionsPopupClick,buttonPopupStore:this.stores.moreActionsButtonPopupStore,renderOrigin:e=>(0,_.jsx)(D.Z,{title:(0,_.jsx)(W,{}),color:"orange",onClick:this.handleSaveInCurrentViewClick,dropdownEvents:e,style:{marginLeft:6,marginRight:i.isMobile?8:void 0,fontSize:i.isMobile?16:14,...i.isMobile?{height:30}:null}})})]})});if(e===L.SettingsFilters||e===L.SettingsSort){const t=e===L.SettingsFilters;return(0,_.jsxs)(_.Fragment,{children:[n.state&&r.canConfigureBlock&&(i.isMobile?(0,_.jsx)(I.Z,{style:{fontSize:12,color:this.theme.mediumTextColor},title:this.renderSaveExplanationMessage()}):(0,_.jsx)("div",{style:{fontSize:12,color:this.theme.mediumTextColor,paddingLeft:14,paddingRight:14,paddingTop:8,paddingBottom:8,maxWidth:220},children:this.renderSaveExplanationMessage()})),r.canConfigureBlock&&(0,_.jsx)(k.Z,{icon:d.N,isOrange:!0,title:(0,_.jsx)(W,{}),onClick:this.handleSaveInCurrentViewClick}),(0,_.jsx)(k.Z,{icon:c.s,isGray:!0,title:t?(0,_.jsx)(m.FormattedMessage,{defaultMessage:"Reset filters",id:"database.viewSettings.filterAndSortSaveControl.resetFilters"}):(0,_.jsx)(m.FormattedMessage,{defaultMessage:"Reset sorts",id:"database.viewSettings.filterAndSortSaveControl.resetSorts"}),onClick:()=>this.handleReset()}),r.canConfigureBlock&&!n.state&&(0,_.jsx)(k.Z,{icon:l.o,isGray:!0,title:(0,_.jsx)(m.FormattedMessage,{defaultMessage:"More options",id:"database.viewSettings.filterAndSortSaveControl.more"}),onClick:this.handleMoreOptionsClick}),r.canConfigureBlock&&n.state&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(k.Z,{icon:s.H,isPadded:!0,isGray:!0,title:(0,_.jsx)(N,{}),onClick:()=>{this.handleSaveAsNewViewClick()}}),K(this.props.collectionContextStore,this.props.context)&&(0,_.jsx)(B.Z,{placement:B.Z.Placement.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,_.jsx)("div",{children:(0,_.jsx)(O,{})}),render:e=>(0,_.jsx)(k.Z,{icon:a.Q,isGray:!0,title:(0,_.jsx)(G,{}),onClick:()=>{this.handleMergeIntoCombinatorFilter()},...e})})]})]})}(0,u.t1)(e)}renderSaveExplanationMessage(){const{context:e}=this.props;return e===L.SettingsFilters?(0,_.jsx)(m.FormattedMessage,{defaultMessage:"{count, plural, one {{count} filter changed from what other people see} other {{count} filters changed from what other people see}}",id:"database.viewSettings.filterAndSortSaveControl.filter.caption",values:{count:this.changeCount.state}}):(0,_.jsx)(m.FormattedMessage,{defaultMessage:"Sort has been changed from what other people see",id:"database.viewSettings.filterAndSortSaveControl.sort.caption"})}}function O(){return(0,_.jsx)(m.FormattedMessage,{id:"database.filterValue.mergeIntoAdvancedFilter.tooltip",defaultMessage:"Use an advanced filter to group filter rules and use AND/OR conditions."})}E.displayName="CollectionSettingsSaveControl";const H=(0,m.injectIntl)(E);function N(){return(0,_.jsx)(m.FormattedMessage,{defaultMessage:"Save as new view",id:"database.filterBar.changesControl.saveAsNewView.title"})}function G(){return(0,_.jsx)(m.FormattedMessage,{defaultMessage:"Merge into advanced filter",id:"database.filterBar.changesControl.mergeIntoAdvancedFilter.title"})}function U(){return(0,_.jsx)(m.FormattedMessage,{defaultMessage:"Reset",id:"database.filterBar.changesControl.reset.title"})}function W(){return(0,_.jsx)(m.FormattedMessage,{defaultMessage:"Save for everyone",id:"database.filterBar.changesControl.saveForEveryone.title"})}function K(e,t){const o=e.currentPropertyFiltersStore.state;return(t===L.FilterBar||t===L.SettingsFilters)&&Boolean(o.find((e=>(0,r.aN)(e.filter))))}},97180:(e,t,o)=>{o.d(t,{ZA:()=>m,r_:()=>v});o(67294);var n=o(24405),i=o(42613),r=o(16184),s=o(78807),l=o(98954),a=o(74101),d=o(31412),c=o(16173),p=o(32662),u=o(26388),h=o(85893);const m={[i.G1]:(0,h.jsx)(d.FormattedMessage,{...i.ct.statusGroupNameTodo}),[i.Ho]:(0,h.jsx)(d.FormattedMessage,{...i.ct.statusGroupNameInProgress}),[i.RW]:(0,h.jsx)(d.FormattedMessage,{...i.ct.statusGroupNameComplete}),[i.Ap]:(0,h.jsx)(d.FormattedMessage,{...c.sY.current}),[i.JV]:(0,h.jsx)(d.FormattedMessage,{...c.sY.future})},g={[i.G1]:a.K,[i.Ho]:l.Q,[i.RW]:s.l};function v(e){window.__c={n:"CollectionStatusGroupName"};const{group:t,disableGroup:o,style:i,showIcon:s,showColor:l}=e,d=(0,n.Fg)(),c=g[t.name]??a.K,v=t.color??"gray";return(0,h.jsxs)("div",{style:{...i,display:"inline-flex",alignItems:"center"},children:[s&&c({display:"inline-block",width:16,height:16,fill:l?d.accentColors[v][400]:d.mediumIconColor}),(0,h.jsx)("span",{style:{paddingLeft:s?6:void 0,color:l?d.accentColors[v][500]:void 0},children:m[t.name]??t.name}),o?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p.Z,{size:4}),(0,h.jsx)(u.Z,{placement:u.Z.Placement.Bottom,render:e=>(0,h.jsx)("div",{...e,children:(0,r.Q)({width:12})}),renderTooltip:e=>(0,h.jsx)("div",{...e,children:o.tooltipCaption}),disableTooltip:void 0===o.tooltipCaption})]}):null]})}},26909:(e,t,o)=>{o.d(t,{ZP:()=>g,cn:()=>p,fg:()=>h,l0:()=>u});o(67294);var n=o(83355),i=o(480),r=o(87279),s=o(36488),l=o(78140),a=o(28992),d=o(40721),c=o(85893);const p=8,u=8,h=32;class m extends n.Z{renderComponent(){const{device:e}=this.environment;return(0,c.jsx)(s.Z,{capture:!0,allowEsc:!0,allowUndo:!0,render:t=>{let o;return o=e.isMobile?{menuType:r.og.Modal,title:this.props.title,right:(0,c.jsx)(d.DoneMenuText,{}),onClickRight:this.props.onCancel,...t}:{menuType:r.og.Popup,...this.props.desktopMinWidth&&{minWidth:this.props.desktopMinWidth},...this.props.desktopMaxWidth&&{maxWidth:this.props.desktopMaxWidth},...this.props.desktopWidth&&{width:this.props.desktopWidth},...t},(0,c.jsx)(l.Z,{...o,header:(0,c.jsx)(v,{title:this.props.title,helpButton:this.props.helpButton}),children:this.props.children})}})}}m.displayName="CollectionViewMenu",m.headingStyle={height:h+p-2,paddingTop:p-2};const g=m;function v(e){let{title:t,helpButton:o}=e;window.__c={n:"Heading"};return(0,i.O7)().device.isMobile?null:(0,c.jsx)(a.Z,{style:m.headingStyle,title:t,right:o})}},93289:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(67294),i=o(13991),r=o(77907),s=o(85893);const l=function(e){let{firstDayOfWeek:t,value:o,selectValue:l=!0,onChange:a,disabledDays:d}=e;window.__c={n:"DatePicker"};const c=(0,n.useMemo)((()=>new Date(o)),[o]),[p,u]=(0,n.useState)(c),h=(0,n.useRef)(o);(0,n.useLayoutEffect)((()=>{h.current!==o&&(u(new Date(o)),h.current=o)}),[o]);const m=(0,n.useCallback)(((e,t,o)=>{a(e.getTime())}),[a]);return(0,s.jsx)(r.LazyDayPicker,{locale:i.SP,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:l?{value:c}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:m,onMonthSelected:u,disabled:d,month:p})}},78948:(e,t,o)=>{o.d(t,{Z:()=>s});o(67294);var n=o(68785),i=o(28992),r=o(85893);const s=function(){return(0,r.jsx)(i.Z,{title:(0,r.jsx)(n.Z,{})})}},77498:(e,t,o)=>{o.d(t,{Z:()=>b});o(30541);var n=o(43261),i=o.n(n),r=(o(67294),o(83355)),s=o(99036),l=o(80951),a=o(72126),d=o(31412),c=o(87279),p=o(33846),u=o(68894),h=o(78140),m=o(32163),g=o(43765),v=o(40721),f=o(72495),x=o(69872),y=o(85893);class C extends r.Z{constructor(){super(...arguments),this.storeTypes={inputStore:p.Z}}renderComponent(){const{onAccept:e,schema:t,onClose:o,allowProperty:n,intl:r,isRelationProperty:p}=this.props,{inputStore:C}=this.stores;let b=Object.keys(t);const S=b.some(l.wl);b=a.MR(b,(e=>{const o=(0,l.Qm)({schema:t,property:e});return o?o.name:""}));const M=S?`${l.UU}${s.iw}`:s.iw;b=a.zu(b,M),b.unshift(M);const k=C.state.inputValue;if(n&&(b=b.filter((e=>{const o=(0,l.Qm)({schema:t,property:e});return o&&n(o)}))),k){let e=b.map((e=>{const o=(0,l.Qm)({schema:t,property:e});return o&&o.name}));e=i().filter(k,e).map((e=>{let{original:t}=e;return t})),b=b.filter((o=>{const n=(0,l.Qm)({schema:t,property:o});return n&&n.name&&e.includes(n.name)}))}const w=a.oA(b.map((o=>{const n=(0,l.Qm)({schema:t,property:o});if(!n)return;return{key:o,render:e=>(0,y.jsx)(x.Z,{...e,propertySchema:n,format:x.Z.DisplayFormat.Name}),action:()=>e(o)}}))),j=[{key:0,render:e=>(0,y.jsx)(f.Z,{...e}),items:w}],{device:F}=this.environment,Z=(0,y.jsx)(f.Z,{isInput:!0,children:(0,y.jsx)(u.ZP,{focus:!F.isMobile||void 0,focusAfterAnimation:!0,value:k,onChange:e=>this.stores.inputStore.setState({focus:!0,inputValue:e.target.value}),placeholder:p?r.formatMessage({defaultMessage:"Search for a relation property…",id:"propertySelectMenu.searchForProperty.relation.placeholder"}):r.formatMessage({defaultMessage:"Search for a property…",id:"propertySelectMenu.searchForProperty.default.placeholder"})})});let T;return T=F.isMobile?{menuType:c.og.Modal,title:p?r.formatMessage({defaultMessage:"Relation property",id:"propertySelectMenu.mobileMenu.relationProperty.header"}):r.formatMessage({defaultMessage:"Property",id:"propertySelectMenu.mobileMenu.property.header"}),right:(0,y.jsx)(v.CancelMenuText,{}),onClickRight:o,header:Z}:{menuType:c.og.Popup,width:300,header:Z},(0,y.jsx)(h.Z,{...T,children:0===w.length?(0,y.jsx)(f.Z,{children:(0,y.jsx)(g.Z,{title:(0,y.jsx)(d.FormattedMessage,{defaultMessage:"No results",id:"propertySelectMenu.search.noResults.title"})})}):(0,y.jsx)(m.Z,{type:m.i.Vertical,sections:j,onAccept:o,initialFocus:k.length>0?0:void 0})})}}C.displayName="PropertySelectMenu";const b=(0,d.injectIntl)(C)},95691:(e,t,o)=>{o.d(t,{Z:()=>d});o(67294);var n=o(24405),i=o(8848),r=o(42853),s=o(82990),l=o(64921),a=o(85893);const d=function(e){window.__c={n:"SegmentedDropdownButton"};const{style:t,color:o,title:d,onClick:c,icon:p,dropdownEvents:u,className:h,disabled:m,disableDropdown:g}=e,v=(0,n.yK)((e=>({wrap:{position:"relative",display:"inline-flex",flexShrink:0,borderRadius:4,overflow:"hidden",height:28},mainButton:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderTopLeftRadius:4,borderBottomLeftRadius:4,paddingLeft:8,paddingRight:8,fontWeight:s.Z.fontWeight.medium,..."blue"===o&&{background:i.ZP.blue,color:i.ZP.white},..."orange"===o&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50],color:"dark"===e.mode?e.accentColors.orange[600]:e.accentColors.orange[400]}},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"center",width:24,alignSelf:"stretch",borderTopRightRadius:4,borderBottomRightRadius:4,..."blue"===o&&{background:i.ZP.blue,color:i.ZP.white,boxShadow:`inset 1px 0 0 ${e.darkDividerColor}`},..."orange"===o&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50],color:e.accentColors.orange[400],boxShadow:"dark"===e.mode?`${e.accentColors.orange[300]} 1px 0 0 inset`:`${e.accentColors.orange[200]} 1px 0 0 inset`}},dropdownButtonIcon:{width:10,marginTop:2,..."blue"===o&&{fill:i.ZP.white},..."orange"===o&&{fill:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]}},buttonHoveredStyle:{..."blue"===o&&{background:e.blueButtonHoveredBackground},..."orange"===o&&{background:"dark"===e.mode?e.accentColors.orange[200]:e.accentColors.orange[100]}},buttonPressedStyle:{..."blue"===o&&{background:e.blueButtonPressedBackground},..."orange"===o&&{background:"dark"===e.mode?e.accentColors.orange[300]:e.accentColors.orange[200]}},icon:{width:12,marginRight:6,..."blue"===o&&{fill:i.ZP.white},..."orange"===o&&{fill:e.accentColors.orange[400]}},border:{position:"absolute",pointerEvents:"none",borderRadius:4,top:0,left:0,right:0,bottom:0,..."blue"===o&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset, rgba(15, 15, 15, 0.1) 0px 1px 2px"},..."orange"===o&&{boxShadow:"dark"===e.mode?`${e.accentColors.orange[300]} 0px 0px 0px 1px inset`:`${e.accentColors.orange[200]} 0px 0px 0px 1px inset`}}})),[o]);return(0,a.jsxs)("div",{style:{...v.wrap,...t},className:h,children:[(0,a.jsxs)(l.Z,{style:v.mainButton,onClick:c,disabled:m,disabledFeedback:!0,hoveredStyle:v.buttonHoveredStyle,pressedStyle:v.buttonPressedStyle,children:[p&&p(v.icon),d]}),g||m?null:(0,a.jsx)(l.Z,{disabledFeedback:!0,style:v.dropdownButton,hoveredStyle:v.buttonHoveredStyle,pressedStyle:v.buttonPressedStyle,...u,children:(0,r.i)(v.dropdownButtonIcon)}),(0,a.jsx)("div",{style:v.border})]})}},22084:(e,t,o)=>{o.d(t,{F:()=>c,a:()=>d});o(67294);var n=o(24405),i=o(8848),r=o(82990),s=o(62896),l=o(85567),a=o(85893);function d(e){window.__c={n:"SelectToken"};const{value:t,color:o,descriptionTooltip:d,format:c,showEllipsis:p,onClickRemove:u,showRemoveButton:h,isSingle:m,shouldShrink:g,tooltipPlacement:v,...f}=e,x=(0,n.Fg)(),y=(0,n.yK)((e=>({token:{...p&&r.Z.textOverflowStyle},descriptionTooltip:{color:e.mediumInvertedTextColor}})),[p]),{textColor:C,backgroundColor:b}=(0,i.KR)(x,o);return t?(0,a.jsx)(l.Z,{format:c,value:(0,a.jsx)(s.Z,{children:t}),onClickRemove:u,showRemoveButton:h,isSingle:m,color:C,backgroundColor:b,shouldShrink:g,showFullValueTooltip:!0,tooltip:void 0!==d&&d.length>0?d:void 0,tooltipPlacement:v,style:y.token,...f}):null}function c(e){window.__c={n:"StatusSelectToken"};const{value:t,color:o,format:d,showEllipsis:c,onClickRemove:p,showRemoveButton:u,isSingle:h,shouldShrink:m,groupColor:g,descriptionTooltip:v,tooltipPlacement:f,...x}=e,y=(0,n.Fg)(),C=(0,n.yK)((()=>({token:{...c&&r.Z.textOverflowStyle}})),[c]);if(!t)return null;const{textColor:b,backgroundColor:S}=(0,i.KR)(y,o??g??"gray"),M=o&&"default"!==o?o:g??"gray";return(0,a.jsx)(l.Z,{format:d,value:(0,a.jsx)(s.Z,{children:t}),onClickRemove:p,showRemoveButton:u,isSingle:h,color:b,backgroundColor:S,shouldShrink:m,showFullValueTooltip:!0,style:C.token,isRound:!0,showColoredDot:M,tooltip:void 0!==v&&v.length>0?v:void 0,tooltipPlacement:f,...x})}},74648:(e,t,o)=>{o.d(t,{Z:()=>Je});o(57658);var n=o(67294),i=o(480),r=o(86628),s=o(24405),l=o(21114),a=o(51849),d=o(78106),c=o(66673),p=o(37652),u=o(13148),h=o(84169),m=o(54497),g=o(72126),v=o(149),f=o(70203),x=o(97880),y=o(82990),C=o(31412),b=o(62134),S=o(98104),M=o(39699),k=o(37181),w=o(17809),j=o(33929),F=o(68056),Z=o(18514),T=o(80444),I=o(24666),R=o(42922),P=o(73063),V=o(3386),A=o(16354),B=o(74420),D=o(89728),_=o(26388),L=o(39068),E=o(84619),O=o(84116),H=o(3067),N=o(68602);const G={true:{name:"true",type:{type:"checkbox"},description:N.Gw.true,examples:[{input:"true"},{input:[(0,H.h0)("Checked"),[" == true"]]}]},false:{name:"false",type:{type:"checkbox"},description:N.Gw.false,examples:[{input:"false"},{input:[(0,H.h0)("Checked"),[" == false"]]}]},and:{name:"and",type:{type:"checkbox"},description:N.Gw.and,examples:[{input:"3 > 2 and 2 > 3",output:"false"},{input:[(0,H.h0)("Naughty"),[" && "],(0,H.h0)("Nice")]}]},or:{name:"or",type:{type:"checkbox"},description:N.Gw.or,examples:[{input:"3 > 2 or 2 > 3",output:"true"},{input:[(0,H.h0)("Naughty"),[" || "],(0,H.h0)("Nice")]}]},not:{name:"not",type:{type:"checkbox"},description:N.Gw.not,examples:[{input:"not true",output:"false"},{input:"not (2 > 3)",output:"true"},{input:[["!"],(0,H.h0)("Checked")]}]},"+":{name:"+",type:{type:"number"},description:N.Gw["+"],examples:[{input:"3 + 2",output:"5"},{input:"add(-1, 2)",output:"1"}]},"-":{name:"-",type:{type:"number"},description:N.Gw["-"],examples:[{input:"3 - 2",output:"1"},{input:"subtract(-1, 2)",output:"-3"}]},"*":{name:"*",type:{type:"number"},description:N.Gw["*"],examples:[{input:"3 * 2",output:"6"},{input:"multiply(-1, 2)",output:"-2"}]},"/":{name:"/",type:{type:"number"},description:N.Gw["/"],examples:[{input:"3 / 2",output:"1.5"},{input:"divide(-1, 2)",output:"-0.5"}]},"%":{name:"%",type:{type:"number"},description:N.Gw["%"],examples:[{input:"3 % 2",output:"1"},{input:"mod(-1, 2)",output:"-1"}]},"^":{name:"^",type:{type:"number"},description:N.Gw["^"],examples:[{input:"3 ^ 2",output:"9"},{input:"pow(-1, 2)",output:"1"}]},"==":{name:"==",type:{type:"checkbox"},description:N.Gw["=="],examples:[{input:"3 == 2",output:"false"},{input:'equal("A", "A")',output:"true"}]},"!=":{name:"!=",type:{type:"checkbox"},description:N.Gw["!="],examples:[{input:"3 != 2",output:"true"},{input:'unequal("A", "A")',output:"false"}]},">":{name:">",type:{type:"checkbox"},description:N.Gw[">"],examples:[{input:"3 > 2",output:"true"},{input:'now() > parseDate("2040-01-01")',output:"false"}]},"<":{name:"<",type:{type:"checkbox"},description:N.Gw["<"],examples:[{input:"3 < 2",output:"false"},{input:'now() < parseDate("2040-01-01")',output:"true"}]},">=":{name:">=",type:{type:"checkbox"},description:N.Gw[">="],examples:[{input:"3 >= 2",output:"true"},{input:'now() >= parseDate("2040-01-01")',output:"false"}]},"<=":{name:"<=",type:{type:"checkbox"},description:N.Gw["<="],examples:[{input:"3 <= 2",output:"false"},{input:'now() <= parseDate("2040-01-01")',output:"true"}]}};var U=o(75e3),W=o(56505),K=o(87279),z=o(29798),Q=o(73657),q=o(64921),$=o(52275),Y=o(31945),X=o(78140),J=o(28992),ee=o(32163),te=o(40721),oe=o(72495),ne=o(42875),ie=o(75553),re=o(20852),se=o(82883),le=o(44805),ae=o(14871),de=o(95477),ce=o(60682),pe=o(24990),ue=o(62619),he=o(55227),me=o(77907),ge=o(85893);const ve=n.memo((e=>{let{infoHelper:t,getRecordModel:o,style:n}=e;const i=t;if(void 0===(null==i?void 0:i.kind))return null;switch(i.kind){case O.x2.Token:return(0,ge.jsx)(ye,{completion:i,getRecordModel:o,style:n});case O.x2.LibraryFunction:{const e=!(null==t||!t.calledFromUnifiedFunctionProperty),r=function(e,t){if(t&&void 0!==e.syntax[1])return e.syntax[1];return e.syntax[0]}(i.libraryFunction,e),s=function(e,t){if(t&&void 0!==e.examples[1])return e.examples[1];return e.examples[0]}(i.libraryFunction,e),l=i.libraryFunction.returnType;return(0,ge.jsx)(xe,{icon:Te("function"==typeof l?l([]).type:l.type),name:r,description:j.default.formatMessage(i.libraryFunction.description),examples:s.length>0?s.map(((e,t)=>(0,ge.jsx)(fe,{example:e,getRecordModel:o},t))):void 0,style:n})}case O.x2.Binding:var r;return i.text===O.GV?(0,ge.jsx)(xe,{icon:Te(i.type.type),name:i.text,description:j.default.formatMessage(Me.currentValueDescription),style:n}):i.text===O.WY?(0,ge.jsx)(xe,{icon:Te(i.type.type),name:i.text,description:j.default.formatMessage(Me.currentIndexDescription),style:n}):(0,ge.jsx)(xe,{icon:Te(i.type.type),name:i.text,description:j.default.formatMessage("array"===(null==i||null===(r=i.type)||void 0===r?void 0:r.type)?Me.listVariableType:Me.variableType),style:n});case O.x2.Builtin:{const e=G[i.builtin];return(0,ge.jsx)(xe,{icon:Te(e.type.type),name:e.name,description:j.default.formatMessage(e.description),examples:e.examples.length>0?e.examples.map(((e,t)=>(0,ge.jsx)(fe,{example:e,getRecordModel:o},t))):void 0,style:n})}default:return(0,x.t1)(i)}}));function fe(e){let{example:t,getRecordModel:o}=e;window.__c={n:"CodeExample"};const l=(0,me.useDependency)(me.deps.prismjs),a=(0,ce.kw)(),d=(0,i.O7)(),{device:c}=d,p=(0,r.VK)((()=>{var e;return null===(e=T.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),u=(0,s.Fg)(),h=(0,C.useIntl)(),m=(0,r.VK)((()=>pe.Z.state),[]),v=(0,r.VK)((()=>{var e;const n=document.createElement("div"),i="string"!=typeof t.input?f.QaF(t.input):t.input,r=(null===(e=l.value)||void 0===e?void 0:e.highlight(`${i}`,l.value.languages[re.PrismLanguages.notion],re.PrismLanguages.notion))??"";n.innerHTML=he.g7(r);const s=g.oA(Array.from(n.childNodes).map(be)),v="string"==typeof t.input?[[t.input],[" = "]]:t.input.concat([[" = "]]),x=he.kF(v,g.oA(s)),y=v.map(f.hDy).map(((e,t)=>le.fn({annotations:e,theme:u,getRecordModel:o,spaceId:p})));return x.map(((e,t)=>{const n=y[e.textTokenIndex],i=v[e.textTokenIndex];return f.km_(i)?(0,le.$i)({args:{textValue:{value:v,spaceId:p},getRecordModel:o,getRecordRole:()=>{},disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disableLinks:!1,userTimeZone:(0,ne.r)(),disabled:!1,isAndroid:c.isAndroid,isSafariOrIOS:c.isSafari||c.isIOS,isWindows:c.isWindows,showEmojiInline:c.isWindows,emojiType:a,highlightDiscussionId:void 0,theme:u,intl:h,renderedPageBlockId:void 0,parentBlockId:void 0,katex:void 0,isClient:!0,baseUrl:de.default.domainBaseUrl,publicDomainName:de.default.publicDomainName,currentUserId:d.currentUser.id,overwriteBaseUrlFromSpaceId:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:m},style:n.style,classNames:n.classNames,index:t,token:i,tokenValue:f.WiV(i),tokenAnnotations:f.hDy(i)}):(0,ge.jsx)("span",{className:[e.classNames||"",...n.classNames].join(" "),style:n.style,"data-token-index":e.textTokenIndex,children:e.value},t)}))}),[t.input,l.value,u,o,p,c.isAndroid,c.isSafari,c.isIOS,c.isWindows,a,h,d.currentUser.id,m]),x=(0,r.VK)((()=>Array.isArray(t.output)?(0,le.IY)({textValue:{value:t.output,spaceId:p},getRecordModel:o,getRecordRole:()=>{},disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disableLinks:!1,userTimeZone:(0,ne.r)(),disabled:!1,isAndroid:c.isAndroid,isSafariOrIOS:c.isSafari||c.isIOS,isWindows:c.isWindows,showEmojiInline:c.isWindows,emojiType:a,theme:u,intl:h,katex:void 0,isClient:!0,baseUrl:de.default.domainBaseUrl,publicDomainName:de.default.publicDomainName,currentUserId:d.currentUser.id,overwriteBaseUrlFromSpaceId:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:m}):t.output),[c.isAndroid,c.isIOS,c.isSafari,c.isWindows,m,a,d.currentUser.id,t.output,o,h,p,u]),y=!1!==t.isCopyable&&("string"==typeof t.input||!0===t.isCopyable),b=(0,n.useCallback)((()=>{if(y){const e=(Array.isArray(t.input)?(0,se.X)({intl:h,textValue:t.input,getRecordModel:o,userTimeZone:(0,ne.r)()}):t.input).replaceAll(/\/\*.*\*\//g,"").trim();ae.RD({stringValue:e,environment:d,copiedMessage:Se.copiedExampleMessage})}}),[d,t.input,o,h,y]),S=(0,s.yK)((e=>({code:{fontFamily:"monospace",whiteSpaceCollapse:"preserve",fontSize:11,borderRadius:5,border:`1px solid ${e.stroke.deemphasized}`,margin:"0 -4px",padding:"0 6px",pointerEvents:"none",opacity:.95,display:"flex",flexDirection:"row",alignItems:"center",tabSize:2},left:{flexGrow:1,padding:"6px 0"},right:{alignSelf:"center"},copyButton:{height:22,width:22,pointerEvents:"auto"},copyButtonIcon:{height:12,width:12}})),[]);return(0,ge.jsxs)("div",{style:S.code,children:[(0,ge.jsxs)("div",{style:S.left,children:[(0,ge.jsx)("div",{children:v}),x?(0,ge.jsxs)("div",{children:["= ",x]}):null]}),y?(0,ge.jsx)("div",{style:S.right,children:(0,ge.jsx)(P.Z,{ariaLabel:h.formatMessage(Se.copyToClipboard),onClick:b,icon:ie.U,style:S.copyButton,iconStyle:S.copyButtonIcon,disallowTabbing:!0})}):null]})}function xe(e){let{name:t,icon:o,description:n,examples:i,style:r}=e;window.__c={n:"FormulaHelperBody"};const l=(0,s.yK)((e=>({helper:{display:"flex",flexDirection:"column",fontSize:12,height:"auto",width:"100%",gap:8,overflow:"auto",textWrap:"wrap",...r},name:{fontSize:14,fontWeight:600,display:"flex",alignItems:"center"},description:{color:e.mediumTextColor},iconStyle:{height:14,width:14,fill:e.mediumIconColor,display:"inline",marginRight:6},divider:{borderColor:e.stroke.deemphasized},examples:{display:"flex",flexDirection:"column",gap:4}})),[r]);return(0,ge.jsxs)("div",{style:l.helper,children:[(0,ge.jsxs)("span",{style:l.name,children:[void 0!==o&&o(l.iconStyle),t]}),void 0!==n&&(0,ge.jsx)("span",{style:l.description,children:n}),void 0!==i&&(0,ge.jsx)("div",{style:l.examples,children:i})]})}function ye(e){let{completion:t,getRecordModel:o,style:n}=e;window.__c={n:"FormulaTokenCompletionHelper"};const{name:i,description:s,icon:l,examples:a}=(0,r.VK)((()=>{if(!o)return{};if(t.token.type===O.Oy.BlockProperty){var e;if(O.WG.includes(t.token.property)&&!t.token.collection){var n;const e=null===(n=O.dy[t.token.property])||void 0===n?void 0:n.type,i=e?L.wG[e]:void 0,r=H.QP[t.token.property],s="function"==typeof(null==r?void 0:r.description)?r.description():null==r?void 0:r.description,l=t.name??t.token.property;return{name:l,icon:i,description:s?j.default.formatMessage(s):void 0,examples:null!==r?Ce(r,o,{collection:t.token.collection,property:t.token.property,name:l},{name:l,type:t.token.property}):void 0}}if(!t.token.collection)return{};const i=(0,d.SR)(t.token.property),r=o(t.token.collection),s=null==r||null===(e=r.getNormalizedSchema())||void 0===e?void 0:e[i];if(!s)return{};const l=H.QP[s.type];return l?{name:t.name,icon:L.wG[s.type],description:j.default.formatMessage("function"==typeof l.description?l.description(s):l.description),examples:Ce(l,o,{collection:t.token.collection,property:i,name:t.name},s)}:{}}return{}}),[t,o]);return void 0===i?null:(0,ge.jsx)(xe,{name:i,icon:l,description:s,examples:a,style:n})}function Ce(e,t,o,n){const i=e.examples;let r=[];return r="function"==typeof i?i(o,n).map(((e,o)=>(0,ge.jsx)(fe,{example:e,getRecordModel:t},o))):i.map(((e,o)=>(0,ge.jsx)(fe,{example:e,getRecordModel:t},o))),r.length>0?r:void 0}function be(e){return ue.Gs(e)?[e.data]:ue.kK(e)?[e.textContent||"",e.className]:void 0}const Se=(0,C.defineMessages)({codeExamples:{id:"formula2Input.helperText.codeExamples",defaultMessage:"Examples"},copiedExampleMessage:{id:"formula2Input.helperText.copiedExampleMessage",defaultMessage:"Copied example to clipboard!"},copyToClipboard:{defaultMessage:"Copy to Clipboard",id:"database.copyButton.copyToClipboard"}}),Me=(0,C.defineMessages)({currentValueDescription:{id:"formula2Input.helperText.currentValueDescription",defaultMessage:"Returns the value of the current item in the list function."},currentIndexDescription:{id:"formula2Input.helperText.currentIndexDescription",defaultMessage:"Returns the index of the current item in the list function, starting from 0."},variableType:{id:"formula2Input.variableHelper.description",defaultMessage:"User-defined variable."},listVariableType:{id:"formula2Input.variableHelper.descriptionWithList",defaultMessage:"User-defined variable, list."},emailForUser:{id:"formula2Input.helperText.emailForUser",defaultMessage:"Returns the email address of a provided user."},nameForUser:{id:"formula2Input.helperText.nameForUser",defaultMessage:"Returns the display name of a provided user."}});var ke=o(21396);function we(e){window.__c={n:"FormulaAutocompleteMenu"};const{store:t,selection:o,cursorEditorInfo:l,cursorEditorInfoRef:a,context:c,onChange:p,getRecordModel:u,setInfoHelper:h}=e,m=(0,s.yK)((()=>({menu:{top:0,left:0,right:0,bottom:0,position:"absolute",marginBottom:2},menuSection:{paddingTop:6,paddingBottom:2}})),[]),v=(0,i.Fy)(),y=(0,r.qz)(void 0,z.Z),C=(0,n.useMemo)((()=>{const e=g.vM((null==l?void 0:l.completions)??[],"kind");let n=-1;return Object.entries(e).map(((e,i)=>{const[r,s]=e,l=s.map(((e,r)=>{n+=1;const s=n;return{key:`${i}-${r}`,render:t=>(0,ge.jsx)(je,{...t,completion:e,context:c,getRecordModel:u,menuListStore:y,indexGlobal:s,cursorEditorInfoRef:a,setInfoHelper:h}),action:()=>{var n;void 0!==e&&a.current&&(h({...e,calledFromUnifiedFunctionProperty:"member dot receiver"===(null===(n=a.current.completionsInfo)||void 0===n?void 0:n.type)}),function(e){var t;const{completion:o,store:n,selection:i,onChange:r,cursorEditorInfo:s}=e,l=(null==i?void 0:i.startIndex)||0,a=(null==i?void 0:i.endIndex)||0,c=l!==a,p=(null===(t=s.completionsInfo)||void 0===t?void 0:t.prefix)||"",u="overridePrefixLength"in o?o.overridePrefixLength??0:p.length,h=c?l:a-u,m=n.getValue();if(o.kind===O.x2.Token){if(o.token.type===O.Oy.Checkbox)return;if(o.token.type===O.Oy.BlockProperty){const e=(0,f._QS)(m,h,a),t=o.token.collection?(0,d.SR)(o.token.property):o.token.property,n=(0,f.YCD)((0,f.kbv)({collection:o.token.collection,property:t,name:o.name}));return void r({newValue:(0,f.P$X)(e,[n],h),newSelection:{startIndex:h+1,endIndex:h+1}})}if(o.token.type===O.Oy.ContextValue){const e=(0,f._QS)(m,h,a),t=(0,d.Kv)(o.token.valueId),n=(0,f.YCD)((0,f._QF)({id:t}));r({newValue:(0,f.P$X)(e,[n],h),newSelection:{startIndex:h+1,endIndex:h+1}})}else{if(o.token.type===O.Oy.Date||o.token.type===O.Oy.Block||o.token.type===O.Oy.Person)return;(0,x.t1)(o.token)}}else if(o.kind===O.x2.LibraryFunction){var g,v,y,C;const e=(0,f._QS)(m,h,a),t=(0,f.V3y)(`${o.libraryFunction.name}()`,[]),n=(0,f.P$X)(e,[t],h);let i=h+o.libraryFunction.name.length+1;void 0!==(null===(g=o.libraryFunction)||void 0===g||null===(g=g.parameters)||void 0===g?void 0:g.varargs)||null!==(v=o.libraryFunction)&&void 0!==v&&null!==(v=v.parameters)&&void 0!==v&&null!==(v=v.expected)&&void 0!==v&&v.length&&(1!==(null===(y=o.libraryFunction)||void 0===y||null===(y=y.parameters)||void 0===y||null===(y=y.expected)||void 0===y?void 0:y.length)||"member dot receiver"!==(null===(C=s.completionsInfo)||void 0===C?void 0:C.type))||(i+=1);r({newValue:n,newSelection:{startIndex:i,endIndex:i}})}else if(o.kind===O.x2.Binding||o.kind===O.x2.Builtin){const e=(0,f._QS)(m,h,a),t=o.kind===O.x2.Binding?o.text:`${o.builtin} `,n=(0,f.V3y)(t,[]),i=(0,f.P$X)(e,[n],h),s=h+t.length;r({newValue:i,newSelection:{startIndex:s,endIndex:s}})}else(0,x.t1)(o)}({completion:e,store:t,selection:o,onChange:p,cursorEditorInfo:a.current}))}}}));return{key:r,render:e=>(0,ge.jsx)(oe.Z,{...e,style:m.menuSection,title:j.default.formatMessage(Pe[r])}),items:l}}))}),[c,null==l?void 0:l.completions,a,u,y,p,o,h,t,m.menuSection]),b=(0,n.useCallback)((e=>{var t;if(v.isMobile)return;const o=void 0!==e.indexGlobal?null===(t=a.current)||void 0===t||null===(t=t.completions)||void 0===t?void 0:t[e.indexGlobal]:void 0;var n;o&&h({...o,calledFromUnifiedFunctionProperty:"member dot receiver"===(null===(n=a.current)||void 0===n||null===(n=n.completionsInfo)||void 0===n?void 0:n.type)})}),[a,v.isMobile,h]);let S;return(0,n.useEffect)((()=>{if(v.isMobile)return;const e=e=>{var t,o;if(void 0!==e.state.focus.indexGlobal&&null!==(t=a.current)&&void 0!==t&&t.completions&&(null===(o=a.current)||void 0===o?void 0:o.completions.length)>0){var n;const t=null===(n=a.current)||void 0===n||null===(n=n.completions)||void 0===n?void 0:n[e.state.focus.indexGlobal];void 0!==t&&h((e=>{var o;return void 0===e||void 0===(null===(o=a.current)||void 0===o?void 0:o.callParameter)?t:e}))}};return y.addListener(e),()=>y.removeListener(e)}),[a,y,h,v.isMobile]),(0,n.useEffect)((()=>{var e,t,o,n;if(v.isMobile)return;const i="function"===(null==l||null===(e=l.callParameter)||void 0===e||null===(e=e.expression)||void 0===e||null===(e=e.type)||void 0===e?void 0:e.type)?null===(t=l.callParameter.expression)||void 0===t?void 0:t.type:void 0;void 0!==i&&void 0!==(null==l||null===(o=l.callParameter)||void 0===o?void 0:o.parameterIndex)&&(null==l||null===(n=l.callParameter)||void 0===n?void 0:n.parameterIndex)>-1&&h({kind:O.x2.LibraryFunction,libraryFunction:i.libraryFunction,calledFromUnifiedFunctionProperty:i.calledFromUnifiedFunctionProperty})}),[null==l?void 0:l.callParameter,v.isMobile,h]),(0,n.useEffect)((()=>{C.length>0&&y.update((e=>({focus:{...e,section:0,indexLocal:0,indexGlobal:0}})))}),[C.length,y,h]),S=v.isPhone?{menuType:K.og.ActionSheet,disableBottomPadding:!0,maxHeight:"100%"}:{menuType:K.og.Popup,width:v.isPhone?180:228,minWidth:v.isPhone?180:228,maxWidth:v.isPhone?180:228},(0,ge.jsx)(X.Z,{...S,scrollerStyle:m.menu,children:(0,ge.jsx)(ee.Z,{type:ee.i.Vertical,initialFocus:0,priority:1,store:y,onKeyboardArrow:b,sections:g.oA([...C,0===C.length&&{key:"no-results",render:e=>(0,ge.jsx)(oe.Z,{...e,disableDesktopPadding:!0,style:m.menuSection,children:(0,ge.jsx)(Ie,{})}),items:[]}])})})}const je=n.forwardRef(((e,t)=>{window.__c={n:"CompletionMenuItem"};const{completion:o,context:l,getRecordModel:a,menuListStore:c,indexGlobal:p,cursorEditorInfoRef:u,setInfoHelper:h,onMouseEnter:m,...g}=e,v=(0,i.Fy)(),f=(0,s.yK)((e=>({icon:{width:14,fill:e.mediumIconColor},lightParens:{color:e.lightTextColor}})),[]),y=(0,n.useCallback)((e=>{if(!v.isMobile){var t;const e=null===(t=u.current)||void 0===t||null===(t=t.completions)||void 0===t?void 0:t[p];h(e)}null==m||m(e)}),[u,p,m,h,v.isMobile]),b=(0,r.VK)((()=>c.state.focus.indexGlobal===p),[c,p]),S=(0,n.useMemo)((()=>v.isMobile?(0,ge.jsx)(Y.ZP,{popupType:Y.Z4.SlideUp,renderOrigin:e=>(0,ge.jsx)(q.Z,{mobileFeedback:!0,style:{width:16,height:16},...e,children:(0,W.S)(f.icon)}),render:e=>{var t;let n;return n=v.isMobile?{menuType:K.og.Modal,title:(0,ge.jsx)(C.FormattedMessage,{defaultMessage:"Documentation",id:"database.formulaPropertyEntryMenuItem.title"}),right:(0,ge.jsx)(te.DoneMenuText,{}),onClickRight:e.close}:{menuType:K.og.Popup},(0,ge.jsx)(X.Z,{...n,children:(0,ge.jsx)(oe.Z,{children:(0,ge.jsx)(J.Z,{title:(0,ge.jsx)(ve,{infoHelper:{...o,calledFromUnifiedFunctionProperty:"member dot receiver"===(null==u||null===(t=u.current)||void 0===t||null===(t=t.completionsInfo)||void 0===t?void 0:t.type)},getRecordModel:a,style:{padding:4}}),style:{paddingTop:16,paddingBottom:16}})})})}}):(0,ge.jsx)(Fe,{visible:b})),[o,u,v.isMobile,a,b,f.icon]),M=(0,r.VK)((()=>{var e;if(o.kind!==O.x2.Token||o.token.type!==O.Oy.BlockProperty||!a)return;if(O.WG.includes(o.token.property))return o.token.property;if(!o.token.collection)return;const t=(0,d.SR)(o.token.property),n=a(o.token.collection);return null==n||null===(e=n.getNormalizedSchema())||void 0===e||null===(e=e[t])||void 0===e?void 0:e.type}),[o,a]);if(o.kind===O.x2.Token){if(o.token.type===O.Oy.Checkbox)return null;if(o.token.type===O.Oy.BlockProperty)return(0,ge.jsx)($.Z,{...g,icon:M?L.wG[M](f.icon):(0,ge.jsx)(Ze,{type:"unknown"}),title:o.name??o.token.property,right:S,onMouseEnter:y,ref:t});if(o.token.type===O.Oy.ContextValue){const e=(0,d.vx)(l.valueTypes,(0,d.Kv)(o.token.valueId));return e?(0,ge.jsx)($.Z,{...g,icon:(0,ge.jsx)(Ze,{type:e.type.type}),title:(0,ge.jsx)("div",{style:{display:"flex"},children:(0,ge.jsx)(ke.F,{value:e,format:E.lo.Medium,isSingle:!0,shouldShrink:!0})}),right:S,onMouseEnter:y,ref:t}):null}if(o.token.type===O.Oy.Date)return null;if(o.token.type===O.Oy.Block)return null;if(o.token.type===O.Oy.Person)return null;(0,x.t1)(o.token)}else{if(o.kind===O.x2.LibraryFunction){const e=o.libraryFunction.returnType;return(0,ge.jsx)($.Z,{...g,icon:(0,ge.jsx)(Ze,{type:"function"==typeof e?e([]).type:e.type}),title:(0,ge.jsxs)(ge.Fragment,{children:[o.libraryFunction.name,(0,ge.jsx)("span",{style:f.lightParens,children:"()"})]}),right:S,onMouseEnter:y,ref:t})}if(o.kind===O.x2.Builtin)return(0,ge.jsx)($.Z,{...g,title:o.builtin,icon:(0,ge.jsx)(Ze,{type:G[o.builtin].type.type}),right:S,onMouseEnter:y,ref:t});if(o.kind===O.x2.Binding)return(0,ge.jsx)($.Z,{...g,title:o.text,icon:(0,ge.jsx)(Ze,{type:o.type.type}),right:S,onMouseEnter:y,ref:t});(0,x.t1)(o)}})),Fe=n.memo((e=>{let{visible:t}=e;window.__c={n:"FormulaAutocompleteEnterIcon"};const o=(0,s.yK)((e=>({icon:{width:14,fill:e.mediumIconColor,transition:"opacity 50ms 200ms",visibility:t?"visible":"hidden",opacity:t?1:0}})),[t]);return(0,U.U)(o.icon)})),Ze=n.memo((e=>{var t;let{type:o}=e;window.__c={n:"FormulaValueTypeIcon"};const n=(0,s.yK)((e=>({icon:{width:14,fill:e.mediumIconColor,transition:"transform .3s ease"}})),[]);return null===(t=Te(o))||void 0===t?void 0:t(n.icon)}));function Te(e){return"text"===e?L.wG.text:"number"===e?L.wG.number:"checkbox"===e?L.wG.checkbox:"date"===e?L.wG.date:"block"===e?L.wG.relation:"person"===e?L.wG.person:"select"===e?L.wG.select:"array"===e?L.wG.multi_select:"function"===e||void 0===e||"unknown"===e?L.wG.formula:void(0,x.t1)(e)}function Ie(){return(0,ge.jsx)(Q.Z,{caption:(0,ge.jsx)(C.FormattedMessage,{defaultMessage:"No results",id:"FormulaAutocompleteMenu.noResults.message"})})}const Re=(0,C.defineMessages)({[O.x2.Token]:{defaultMessage:"Properties",id:"formulaAutocompleteMenu.token.message"},[O.x2.LibraryFunction]:{defaultMessage:"Functions",id:"formulaAutocompleteMenu.function.message"},[O.x2.Binding]:{defaultMessage:"Variables",id:"formulaAutocompleteMenu.variables.message"},[O.x2.Builtin]:{defaultMessage:"Built-ins",id:"formulaAutocompleteMenu.builtin.message"}}),Pe={[O.x2.Token]:Re[O.x2.Token],[O.x2.LibraryFunction]:Re[O.x2.LibraryFunction],[O.x2.Binding]:Re[O.x2.Binding],[O.x2.Builtin]:Re[O.x2.Builtin]};o(52262),o(24506);var Ve=o(83355),Ae=o(1302),Be=o(13991),De=o(14577),_e=o(15095),Le=o(62193),Ee=o(6746),Oe=o(16971),He=o(97444),Ne=o(56971),Ge=o(14976),Ue=o(45023),We=o(70219),Ke=o(89086),ze=o(30874),Qe=o(29595),qe=o(1743),$e=o(93262);class Ye extends Ve.Z{constructor(){super(...arguments),this.editor=null,this.mergeEditorRefs=(0,Le.sH)(),this.renderContentContainer=(e,t)=>{let{leafRef:o,wrapperRef:n,...i}=e;return(0,ge.jsx)("div",{ref:n,...i,onKeyDown:e=>{this.handleCommandEnterOnKeyDown(e),null==i||i.onKeyDown(e)},style:{flexGrow:1,display:"table"},children:(0,ge.jsx)(Qe.Z,{ref:this.mergeEditorRefs(this.editorRef,o),style:Ye.contentEditableStyle,getDisabled:this.isDisabled,getHtml:()=>this.getHtml(this.textValueStore.state,this.props.errorRanges),getSelection:this.getContainerSelection,onMutation:this.handleMutation,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",onSelect:t,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,suppressNewlineEvents:!1,placeholder:" "})})},this.renderSyntaxTokens=(e,t)=>{const o=he.kF(t,e),{device:n}=this.environment,i=t.map(f.hDy).map(((e,t)=>le.fn({annotations:e,theme:this.theme,getRecordModel:this.props.store.getRecordModel,spaceId:this.props.parentSpaceId})));return o.map(((e,o)=>{const r=t[e.textTokenIndex],s=i[e.textTokenIndex];return f.km_(r)?(0,le.$i)({args:{textValue:{value:t,spaceId:this.props.parentSpaceId},getRecordModel:this.props.store.getRecordModel,getRecordRole:this.props.store.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableDateStyleAnnotations:!1,disableLinks:!1,userTimeZone:(0,ne.r)(),disabled:!1,isAndroid:n.isAndroid,isSafariOrIOS:n.isSafari||n.isIOS,isWindows:n.isWindows,showEmojiInline:n.isWindows,emojiType:"raw",highlightDiscussionId:void 0,theme:this.theme,intl:j.default.getIntl(),renderedPageBlockId:void 0,parentBlockId:void 0,katex:void 0,isClient:!0,baseUrl:de.default.domainBaseUrl,publicDomainName:de.default.publicDomainName,currentUserId:this.environment.currentUser.id,overwriteBaseUrlFromSpaceId:(0,We.b)(this.environment),externalIntegrations:ze.Z.integrations.state,formulaValueTypes:this.props.valueTypes,emojiData:pe.Z.state},style:s.style,classNames:s.classNames,index:o,token:r,tokenValue:f.WiV(r),tokenAnnotations:f.hDy(r)}):(0,ge.jsx)("span",{className:[e.classNames||"",...s.classNames].join(" "),style:s.style,"data-token-index":e.textTokenIndex,children:e.value},o)}))},this.handleClick=e=>{Ge.SD({environment:this.environment,event:e,textValue:this.textValueStore.state,editorNode:this.getEditorNode(),store:this.props.store,canEdit:!this.isDisabled()})},this.handleMutation=e=>{let{newValue:t}=e;M.createAndCommit({userAction:"FormulaInputText.handleMutation",environment:this.environment,perform:e=>{He.aS({environment:this.environment,store:this.props.store,newValue:t,disableMentions:!0,disableDateMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableDateReminderMentions:!0,disableFilters:!0,transaction:e}),e.postEnqueueActions.push((()=>{M.createAndCommit({userAction:"FormulaInputText.normalizeTextValue",environment:this.environment,perform:e=>{He.vE({store:this.props.store,transaction:e})}})}))}})},this.handleDelete=e=>{if(this.isDisabled())return;const t=I.default.state;"editing"===t.mode&&t.multiSelection.start.store===this.props.store&&(M.createAndCommit({userAction:"FormulaInputText.handleDelete",environment:this.environment,perform:o=>{Ne.as({environment:this.environment,multiSelection:t.multiSelection,deleteForwards:!0,transaction:o,event:e})}}),this.scrollSelectionIntoView())},this.handleBackspace=e=>{if(this.isDisabled())return;const t=I.default.state;if("editing"===t.mode&&t.multiSelection.start.store===this.props.store){if(Ne.YV({device:this.environment.device,event:e,multiSelection:t.multiSelection}))return;M.createAndCommit({userAction:"FormulaInputText.handleBackspace",environment:this.environment,perform:o=>{Ne.as({environment:this.environment,multiSelection:t.multiSelection,deleteForwards:!1,transaction:o,event:e})}}),this.scrollSelectionIntoView()}},this.handleUndo=e=>{var t;e.preventDefault();const o=Oe.XT();(null==o||null===(t=o.getFirstStore())||void 0===t?void 0:t.id)===this.props.store.id&&Oe.Yw(this.environment)},this.handleRedo=e=>{var t;e.preventDefault();const o=Oe.M7();(null==o||null===(t=o.getFirstStore())||void 0===t?void 0:t.id)===this.props.store.id&&Oe.KX(this.environment)},this.handleCommandEnterOnKeyDown=e=>{(0,Ue.Z)(this.environment,e,"command+enter")&&(this.props.handleSave(),e.stopPropagation())},this.handleShiftEnter=e=>{var t,o,n;if(this.isDisabled())return;if(null===(t=e.preventDefault)||void 0===t||t.call(e),this.editor&&this.editor.isComposing)return;const i=I.default.state,r="editing"===i.mode&&(0,F.QY)(i.multiSelection);if(!r)return;const s=this.textValueStore.state,l=_e.p4(f.QaF(s)),a=null===(o=l.slice(0,r.selection.startIndex).join("").split("\n"))||void 0===o?void 0:o.at(-1),d=(null==a||null===(n=a.match(/^\t*/))||void 0===n?void 0:n[0].length)||0,c=(null==a?void 0:a.split("").reverse())||[];let p=0;const u=c.some((e=>{if(")"===e)p++;else if("("===e){if(0===p)return!0;p--}return!1}))?d+1:d;let h="\t".repeat(u);const m=")"===l[r.selection.endIndex],g=!(null==a||!a.endsWith("("))&&m;g&&(h+=`\n${"\t".repeat(u-1)}`),M.createAndCommit({userAction:"FormulaInputText.handleShiftEnter",environment:this.environment,perform:e=>{He.hJ({environment:this.environment,store:this.props.store,string:`\n${h}`,selection:r.selection,disableMentions:!0,disableDateMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e}),g&&S.Z5({store:this.props.store,selection:{startIndex:r.selection.startIndex+u+1,endIndex:r.selection.startIndex+u+1}})}}),this.scrollSelectionIntoView()},this.handleTab=e=>{if(this.isDisabled())return;e.preventDefault();const t=I.default.state,o="editing"===t.mode&&(0,F.QY)(t.multiSelection);o&&M.createAndCommit({userAction:"FormulaInputText.handleTab",environment:this.environment,perform:e=>{He.wA({environment:this.environment,store:this.props.store,selection:o.selection,transaction:e,shouldStripTokens:!1,disableFilters:!0})}})},this.handleUntab=e=>{if(this.isDisabled())return;e.preventDefault();const t=I.default.state,o="editing"===t.mode&&(0,F.QY)(t.multiSelection);o&&M.createAndCommit({userAction:"FormulaInputText.handleUntab",environment:this.environment,perform:e=>{He.O5({environment:this.environment,store:this.props.store,selection:o.selection,transaction:e,shouldStripTokens:!1,disableFilters:!0})}})},this.handleAnnotation=e=>{this.isDisabled()||e.preventDefault()},this.handleCopy=e=>{var t;const{markdownLinkifyIt:o}=this.props,n=window.getSelection();null!=n&&n.anchorNode&&null!==(t=this.editor)&&void 0!==t&&null!==(t=t.getNode())&&void 0!==t&&t.contains(n.anchorNode)&&ae.JG({environment:this.environment,event:e,markdownLinkifyIt:o})},this.handleCut=e=>{const{markdownLinkifyIt:t}=this.props;this.isDisabled()?e.preventDefault():(ae.by({environment:this.environment,event:e,markdownLinkifyIt:t}),this.scrollSelectionIntoView())},this.handlePaste=e=>{const{markdownLinkifyIt:t,tinyMceMicrosoftWordPasteFilter:o}=this.props;this.isDisabled()?e.preventDefault():(M.createAndCommit({userAction:"FormulaInputText.handlePaste",environment:this.environment,perform:n=>{ae.v({environment:this.environment,event:e,disableEmbedMenu:!0,transaction:n,onPasteFiles:ae.AL,markdownLinkifyIt:t,tinyMceMicrosoftWordPasteFilter:o})}}),this.scrollSelectionIntoView())},this.handleMoveUp=e=>{M.createAndCommit({userAction:"FormulaInputText.handleMoveUp",environment:this.environment,perform:e=>{He.fs({environment:this.environment,transaction:e,direction:"up"})}})},this.handleMoveDown=e=>{M.createAndCommit({userAction:"FormulaInputText.handleMoveDown",environment:this.environment,perform:e=>{He.fs({environment:this.environment,transaction:e,direction:"down"})}})},this.handleMouseOver=e=>{Ge.vO({environment:this.environment,event:e,textValue:this.textValueStore.state,editorNode:this.getEditorNode(),store:this.props.store,canEdit:!this.isDisabled()})},this.handleMouseOut=e=>{Ge.kV({environment:this.environment,event:e,textValue:this.textValueStore.state,editorNode:this.getEditorNode(),store:this.props.store,canEdit:!this.isDisabled()})},this.scrollSelectionIntoView=()=>{const e=window.getSelection();null!=e&&e.rangeCount&&Ae.default.afterNextFlush((()=>{var t;const o=e.getRangeAt(0).getClientRects()[0],n=null===(t=this.editor)||void 0===t||null===(t=t.getNode())||void 0===t||null===(t=t.parentElement)||void 0===t?void 0:t.parentElement,i=null==n?void 0:n.getBoundingClientRect();o&&n&&i&&(i.top>=o.top?n.scrollTo({top:n.scrollTop+(o.top-i.top)-6}):i.bottom<=o.bottom+o.height&&n.scrollTo({top:n.scrollTop+(o.bottom-i.bottom)+28}))}))},this.isDisabled=()=>this.props.disabled,this.createSyntaxToken=e=>ue.Gs(e)?[e.data]:ue.kK(e)?[e.textContent||"",e.className]:void 0,this.getHtml=(e,t)=>{const{Prism:o}=this.props,i=f.QaF(e),r="notion",s=o.languages.notion,l=document.createElement("div"),a=o.highlight(i,s,r);l.innerHTML=he.g7(a);const d=g.oA(Array.from(l.childNodes).map(this.createSyntaxToken));for(const n of t)e=f.aSf({textValue:e,selection:n,annotation:[f.GKr.FormulaError]});const c=this.renderSyntaxTokens(g.oA(d),e||[]),p=(0,ge.jsxs)(n.Fragment,{children:[c,(0,ge.jsx)("span",{children:"\n"})]});return Ee.Z.renderToStaticMarkup(p)},this.clearBrowserSelection=()=>{var e;null===(e=this.getEditorNode())||void 0===e||e.blur()},this.textValueStore=new De.Z((()=>this.props.store.getValue()||[]),{debugName:"FormulaInputText.textValueStore"}),this.isEditing=this.createComputedStore((()=>{var e;const t=I.default.state;return"editing"===t.mode&&(null===(e=(0,F.QY)(t.multiSelection))||void 0===e?void 0:e.store)===this.props.store})),this.getContainerSelection=()=>{if(this.isEditing.state)return(0,Ke.HE)(this.props.store)},this.getEndSelection=()=>{const e=_e.p4(f.QaF(this.textValueStore.state));return{startIndex:e.length,endIndex:e.length}},this.editorRef=e=>{this.editor=e}}willMount(e){e.focus&&S.NX({store:e.store})}renderComponent(){const{store:e,disabled:t,handleSave:o}=this.props;return(0,ge.jsx)(qe.Z,{capture:!0,allowEnter:!0,allowTabUntab:!0,allowUndo:!0,allowEsc:!0,allowCopyPaste:!0,children:(0,ge.jsx)($e.Z,{store:e,disabled:t,clearBrowserSelection:this.clearBrowserSelection,getEndSelection:this.getEndSelection,onClick:this.handleClick,onDelete:this.handleDelete,onBackspace:this.handleBackspace,onShiftEnter:this.handleShiftEnter,onCommandShiftEnter:g.yR,onTab:this.handleTab,onUntab:this.handleUntab,onToggleBold:this.handleAnnotation,onToggleItalics:this.handleAnnotation,onToggleUnderline:this.handleAnnotation,onToggleStrike:this.handleAnnotation,onToggleCode:g.yR,onCopy:this.handleCopy,onCut:this.handleCut,onPaste:this.handlePaste,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,onUndo:this.handleUndo,onRedo:this.handleRedo,onEsc:o,render:this.renderContentContainer,disableAnnotation:!0,disableMentions:!0,disableSlashCommands:!0,canSelectAllBlocks:!1,canInsertText:!0,canSelectionDrag:!0,disableMobileActionBar:!0,topBottomPadding:40,pasteBehavior:"inline"})})}getEditorNode(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.getNode())||void 0}}function Xe(e){window.__c={n:"FormulaInputTextWithDeps"};const{value:t}=(0,me.useDependency)(me.deps.prismjs),{value:o}=(0,me.useDependency)(me.deps.markdownLinkifyIt),{value:n}=(0,me.useDependency)(me.deps.tinyMceMicrosoftWordPasteFilter);return t?(0,ge.jsx)(Ye,{...e,Prism:t,markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:n}):null}Ye.displayName="FormulaInputText",Ye.contentEditableStyle={flexGrow:1,flexShrink:1,textAlign:"left",fontFamily:y.Z.getCompositeFontFamily(Be.SP).githubMono,fontSize:12,tabSize:2,whiteSpace:"pre-wrap",borderRadius:4,minHeight:"1em",height:"100%",wordBreak:"break-all",paddingLeft:12,paddingRight:13,paddingBottom:10};function Je(e){window.__c={n:"FormulaInput"};const{evaluationErrors:t,initialCode:o,parentSpaceId:p,outputFooter:u,disabled:h,typecheckContext:m,formulas:y,handleBack:b,onCodeChange:M,onTypeChange:k,parentCollection:j}=e,Z=(0,C.useIntl)(),R=(0,i.Fy)(),{store:P,setValue:A}=(0,w.Cl)({initialValue:o,onChange:M,source:"formula",parentCollection:j}),B=(0,n.useCallback)((e=>{if(A(e.newValue),e.newSelection){const t={start:{store:P,index:e.newSelection.startIndex},end:{store:P,index:e.newSelection.endIndex}};S.NA({multiSelection:t})}}),[A,P]),D=(0,r.VK)((()=>{var e;const t=I.default.state;if("editing"===t.mode&&(null===(e=(0,F.QY)(t.multiSelection))||void 0===e?void 0:e.store)===P)return{startIndex:t.multiSelection.start.index,endIndex:t.multiSelection.end.index}}),[P]),_=(0,r.VK)((()=>!g.Xy(P.getValue(),o)),[o,P]),{handleClose:L}=e,E=(0,n.useCallback)((()=>{L(P.getValue())}),[L,P]),O=(0,r.VK)((()=>P.getValue()),[P]),[H,N]=(0,r.VK)((()=>O?y.processFormulaInput(O):[void 0,void 0]),[O,y]),G=(0,r.VK)((()=>{if(H)return y.parseFormulaInputToCst(H,N)}),[H,y,N]),U=(0,r.VK)((()=>{if(G)return y.convertFormulaCSTToAST(G[0])}),[y,G]),[W,K]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{!async function(){if(U&&m&&v.x.isSuccess(U)){const e=await y.addTypesToFormulaASTAsync(U.value,m,N);K(e),null==k||k(e.node.type)}else K(void 0)}()}),[U,m,N,G,y,k]);const z=(0,n.useMemo)((()=>{const e=W?[...(0,d.Kl)(W.node,!1),...W.errors]:[];return{parseErrors:(null==G?void 0:G[1])??[],typeErrors:e,evaluationErrors:t}}),[W,t,G]),Q=(0,c.Kt)(z,400,Object.is),q=z.parseErrors.length+z.typeErrors.length+z.evaluationErrors.length>0,$=(0,r.VK)((()=>function(e){const{errors:t,intl:o,codeLength:n,formulas:i}=e,{parseErrors:r,typeErrors:s,evaluationErrors:a}=t,d=[];if(s&&s.length>0){const e=s.map((e=>{const t=(0,l.FR)((0,l.ic)(e));return{msg:o.formatMessage(...t),range:{startIndex:e.node.startOffset,endIndex:e.node.endOffset+1}}}));d.push(...e)}else if(a&&a.length>0){const e=a.map((e=>{const t=(0,l.FR)((0,l.OY)(e));return{msg:o.formatMessage(...t),range:i.isUniqueFormulaEvaluatorError(e)?{startIndex:e.node.startOffset,endIndex:e.node.endOffset+1}:void 0}}));d.push(...e)}if(r){const e=r.map((e=>{const t=(0,l.FR)((0,l.sG)(e));return{msg:o.formatMessage(...t),range:"eof"===e.offset?{startIndex:n-1,endIndex:n}:{startIndex:e.offset,endIndex:e.offset+1}}}));d.push(...e)}return d}({errors:Q,codeLength:N?(0,a.eD)(N):(0,f.QaF)(O).length,formulas:y,intl:Z})),[O,Q,y,Z,N]),Y=(0,n.useMemo)((()=>$.map((e=>e.range)).filter(x.$K)),[$]),[X,J]=(0,n.useState)(void 0),ee=(0,n.useRef)(void 0),[te,oe]=(0,n.useState)(void 0),ne=(0,n.useRef)(1);(0,n.useEffect)((()=>{ne.current++;const e=ne.current;!async function(){if(y){const t=await y.getFormulaEditorInfoAtPosition({formula:O??[],inputPosition:D&&D.startIndex===D.endIndex?D.startIndex:0,context:m,includeDeprecatedCompletions:!1});v.x.isSuccess(t)&&ne.current===e&&(ee.current=t.value,J(t.value))}}()}),[D,y,m,O]);const ie=(0,r.VK)((()=>{var e;return!(null!==(e=T.default.state.currentUserSettingsStore)&&void 0!==e&&null!==(e=e.getSettings())&&void 0!==e&&e.dismissed_formulas2_footer)||false}),[]),re=(0,n.useCallback)((()=>{A(o)}),[o,A]);const se=(0,s.yK)((e=>({container:{display:"flex",height:"100%",paddingBottom:ie?30:void 0,flexDirection:"column"},editorSection:{display:"flex",flexDirection:"column",backgroundColor:"light"===e.mode?e.cardBackground:e.accentColors.gray[30]},inputText:{display:"flex",flexGrow:1,flexShrink:1,overflow:"auto",maxHeight:"min(calc(90vh - 240px - 38px - 30px), 298px)",minHeight:"28px",cursor:"text"},bottomSection:{display:"flex",flexDirection:"row",height:R.isMobile?"100%":240,maxHeight:R.isMobile?void 0:"calc(90vh - 38px - 31px - 38px - 30px)",borderTop:`1px solid ${e.outlineButtonBorder}`},leftColumn:{position:"relative",borderRight:`1px solid ${e.outlineButtonBorder}`,width:R.isMobile?"100%":void 0},rightColumn:{display:"flex",flexGrow:1},infoHelper:{padding:"12px 14px"}})),[ie,R.isMobile]);return(0,ge.jsx)(V.Z,{capture:!0,children:(0,ge.jsxs)("div",{style:se.container,children:[(0,ge.jsxs)("div",{style:se.editorSection,children:[(0,ge.jsx)(et,{handleBack:b,handleClose:E,handleRevert:re,showRevert:_,disabled:h}),(0,ge.jsx)("div",{style:se.inputText,children:(0,ge.jsx)(Xe,{value:O,focus:!0,store:P,disabled:h,parentSpaceId:p,valueTypes:m.valueTypes,errorRanges:Y,handleSave:E},"input")})]}),$.length>0&&q?(0,ge.jsx)(tt,{errorMessagesWithRange:$}):u,!h&&(0,ge.jsxs)("div",{style:se.bottomSection,children:[(0,ge.jsx)("div",{style:se.leftColumn,children:(0,ge.jsx)(we,{store:P,context:m,selection:D,cursorEditorInfo:X,cursorEditorInfoRef:ee,onChange:B,getRecordModel:e.getRecordModel,setInfoHelper:oe})}),!R.isMobile&&(0,ge.jsx)("div",{style:se.rightColumn,children:(0,ge.jsx)(ve,{infoHelper:te,getRecordModel:e.getRecordModel,style:se.infoHelper})})]}),ie&&(0,ge.jsx)(nt,{})]})})}const et=n.memo((e=>{let{handleBack:t,handleClose:o,handleRevert:n,showRevert:r,disabled:l}=e;window.__c={n:"FormulaInputHeader"};const a=(0,i.O7)(),d=(0,s.yK)((e=>({headerRow:{display:"flex",color:e.mediumTextColor,flexDirection:"row",padding:"8px 2px 6px 12px",flexWrap:"wrap",fontWeight:500},headerLeft:{flexGrow:1,fontSize:14,display:"inline-flex",alignItems:"center"},headerTitle:{fontSize:12,display:"flex",alignItems:"center"},helpButton:{marginLeft:2,height:20,width:20},revertButton:{marginLeft:4,marginRight:4,color:e.mediumIconColor},buttonDone:{alignSelf:"right",marginRight:4,height:24,padding:"0 8px"},commandText:{color:e.mediumInvertedTextColor}})),[]);return(0,ge.jsxs)("span",{style:d.headerRow,children:[(0,ge.jsxs)("span",{style:d.headerLeft,children:[t&&(0,ge.jsx)(D.Z,{isGray:!0,isSmall:!0,icon:p.V,onClick:t,children:j.default.formatMessage(it.back)}),!t&&(0,ge.jsxs)("span",{style:d.headerTitle,children:[j.default.formatMessage(it.formulaHeader),(0,ge.jsx)(_.Z,{placement:_.Z.Placement.Top,render:e=>(0,ge.jsx)(P.Z,{...e,ariaLabel:j.default.formatMessage(it.learnTooltip),icon:h.m,href:(0,Z.UY)("guides.formulas"),external:!0,style:d.helpButton}),renderTooltip:()=>j.default.formatMessage(it.learnTooltip)})]})]}),r&&(0,ge.jsx)(_.Z,{placement:_.Z.Placement.Top,render:e=>(0,ge.jsx)(D.Z,{...e,"aria-label":j.default.formatMessage(it.revertTooltip),isGray:!0,isSmall:!0,style:d.revertButton,onClick:n,children:j.default.formatMessage(it.revert)}),renderTooltip:()=>j.default.formatMessage(it.revertTooltip)}),l?(0,ge.jsx)(R.Z,{onClick:o,style:d.buttonDone,children:j.default.formatMessage(it.close)}):(0,ge.jsx)(_.Z,{renderTooltip:()=>(0,ge.jsxs)("div",{children:[(0,ge.jsx)("span",{children:(0,ge.jsx)(C.FormattedMessage,{defaultMessage:"Accept",id:"database.formula.acceptFormulaInput.tooltip"})})," ",(0,ge.jsxs)("span",{style:d.commandText,children:[b.fg(a).command,"+Enter"]})]}),render:e=>(0,ge.jsx)(R.Z,{onClick:o,style:d.buttonDone,...e,children:j.default.formatMessage(it.done)})})]})})),tt=n.memo((e=>{let{errorMessagesWithRange:t}=e;window.__c={n:"FormulaErrorsHelper"};const o=(0,s.yK)((e=>({errors:{display:"flex",flexDirection:"row",alignItems:"center",padding:10,fontSize:y.Z.fontSize.UISmall.desktop,height:38,width:"100%",borderTop:`1px solid ${e.outlineButtonBorder}`,textWrap:"nowrap",color:e.darkTextColor,flexShrink:0},icon:{width:12,height:12,fill:"light"===e.mode?e.accentColors.red[400]:e.accentColors.red[700],display:"inline",marginRight:4,marginTop:1},errorMessages:{overflow:"hidden",textOverflow:"ellipsis",color:"light"===e.mode?e.accentColors.red[500]:e.accentColors.red[800]}})),[]);return 0===t.length?null:(0,ge.jsxs)("div",{style:o.errors,children:[(0,m.t)(o.icon),(0,ge.jsx)("span",{style:o.errorMessages,children:t.slice(0,3).map(((e,t)=>(0,ge.jsx)(ot,{index:t,errorMessageWithRange:e},t)))})]})}));function ot(e){let{errorMessageWithRange:t,index:o}=e;window.__c={n:"FormulaErrorsHelperError"};const{msg:n,range:i}=t,r=(0,s.yK)((()=>({errorRange:{opacity:.75}})),[]);return(0,ge.jsxs)(ge.Fragment,{children:[o>0?" ":null,n,void 0!==i&&(0,ge.jsxs)(ge.Fragment,{children:[" ",(0,ge.jsx)("span",{style:r.errorRange,children:`[${i.startIndex},${i.endIndex}]`})]})]})}const nt=n.memo((()=>{window.__c={n:"FormulaUpdateFooter"};const e=(0,i.Fy)(),t=(0,i.O7)(),o=(0,n.useCallback)((()=>{const e=T.default.state.currentUserSettingsStore;e&&M.createAndCommit({userAction:"TutorialActions.dismissTutorial",environment:t,perform:t=>{k.d2({userSettingsStore:e,transaction:t,data:{dismissed_formulas2_footer:!0}})},userId:e.id,canUndo:!1})}),[t]),r=(0,s.yK)((t=>({updateBanner:{zIndex:1,position:e.isMobile?void 0:"absolute",alignSelf:"flex-end",justifySelf:"flex-end",bottom:0,display:"flex",flex:"none",alignItems:"center",fontSize:y.Z.fontSize.UISmall.desktop,paddingLeft:4,paddingRight:8,minHeight:30,height:"auto",width:"100%",color:t.mediumTextColor,borderTop:`1px solid ${t.outlineButtonBorder}`},messageText:{flexGrow:1,marginLeft:4,marginTop:6,marginBottom:6},icon:{width:14,height:14,color:t.blueColor},dismissButton:{marginLeft:2,borderRadius:"100%"},iconCloseStyle:{width:12,height:12}})),[e.isMobile]);return(0,ge.jsxs)("div",{style:r.updateBanner,children:[(0,ge.jsx)(B.Z,{}),(0,ge.jsx)(A.Z,{href:(0,Z.UY)("guides.formulasWhatsChanged"),external:!0,style:r.messageText,children:j.default.formatMessage(it.learnMoreFooter)}),(0,ge.jsx)(P.Z,{ariaLabel:j.default.formatMessage(it.learnMoreFooter),style:r.dismissButton,onClick:o,icon:u.U})]})}));const it=(0,C.defineMessages)({learnMoreFooter:{id:"formula2Input.learnMore.button.label",defaultMessage:"We've recently updated our formula language! Learn more."},back:{defaultMessage:"Back",id:"formulas.SimpleFormulaValuePicker.back"},formulaHeader:{id:"formula2Input.NotionFormula",defaultMessage:"Notion Formula"},done:{id:"formula2Input.done",defaultMessage:"Done"},close:{id:"formula2Input.close",defaultMessage:"Close"},learnTooltip:{id:"formula2Input.learnAboutFormulas",defaultMessage:"Learn about formulas!"},revert:{id:"formula2Input.revert",defaultMessage:"Revert"},revertTooltip:{id:"formula2Input.revertTooltip",defaultMessage:"Revert to previous formula"},errorCount:{id:"formula2Input.errorCount",defaultMessage:"{count, plural, one {{count} error} other {{count} errors}}"}})},21396:(e,t,o)=>{o.d(t,{F:()=>u,e:()=>p});o(21703),o(67294);var n=o(24405),i=o(84116),r=o(49019),s=o(53016),l=o(26774),a=o(97880),d=o(93044),c=o(85893);function p(e){if(e.kind===i.yp.ContextValue)return e.name;if(e.kind===i.yp.Binding||e.kind===i.yp.ThisRow)throw new Error("Not implemented yet.");(0,a.t1)(e)}function u(e){window.__c={n:"FormulaValueToken"};const{value:t}=e,o=(0,n.Fg)(),i=p(t);let a,u;if("date"===t.type.type?a=s.V:"person"===t.type.type?a=l.O:("block"===t.type.type||"array"===t.type.type&&"block"===t.type.of.type)&&(a=r.e),a){const e=a;u=()=>e({width:12,height:12,marginRight:4})}return(0,c.jsx)(d.ZP,{...e,title:i,renderAvatar:u,shouldShrink:!0,style:{background:o.outlineBlueButtonPressedBackground,color:o.blueColor,padding:"2px 4px"}})}},17031:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(35431);class i extends n.Z{findCollectionTemplatePickerItemFromStore(e){if(e)return this.find((t=>t.props.templateStore===e))}}const r=new i},37652:(e,t,o)=>{o.d(t,{V:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("arrowLeft",{viewBox:"0 0 30 30",svg:(0,i.jsx)("polygon",{points:"29 14 4.813 14 13.406 5.406 12 4 1 15 12 26 13.406 24.594 4.813 16 29 16"})})},8597:(e,t,o)=>{o.d(t,{Z:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("arrowUp",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 14.5586C8.44434 14.5586 8.74512 14.251 8.74512 13.7998V5.30957L8.69043 3.83984L10.4951 5.84961L12.0469 7.38086C12.1836 7.51074 12.3682 7.59961 12.5801 7.59961C12.9902 7.59961 13.291 7.28516 13.291 6.86816C13.291 6.66992 13.2158 6.49219 13.0586 6.32812L8.55371 1.81641C8.40332 1.66602 8.20508 1.57715 8 1.57715C7.79492 1.57715 7.59668 1.66602 7.44629 1.81641L2.94141 6.32812C2.78418 6.49219 2.70898 6.66992 2.70898 6.86816C2.70898 7.28516 3.0166 7.59961 3.42676 7.59961C3.63184 7.59961 3.82324 7.51074 3.95312 7.38086L5.50488 5.84961L7.30957 3.83301L7.25488 5.30957V13.7998C7.25488 14.251 7.5625 14.5586 8 14.5586Z"})})},22109:(e,t,o)=>{o.d(t,{T:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("arrowsUpDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.11 2.385a.61.61 0 01.48-.211c.191 0 .353.07.486.21L8.03 5.409a.66.66 0 01.2.475c0 .191-.061.347-.182.469a.627.627 0 01-.463.181.59.59 0 01-.451-.187L5.926 5.098l-.72-.844.04 1.219v7.242a.624.624 0 01-.187.469.624.624 0 01-.47.187.636.636 0 01-.468-.187.635.635 0 01-.182-.47V5.474l.041-1.22-.726.845-1.201 1.248a.61.61 0 01-.457.187.627.627 0 01-.463-.181.634.634 0 01-.182-.47.66.66 0 01.2-.474l2.958-3.023zm7.786 10.781a.636.636 0 01-.486.205.665.665 0 01-.486-.205l-2.947-3.035a.64.64 0 01-.206-.475c0-.191.061-.345.182-.463a.634.634 0 01.469-.181c.18 0 .33.06.451.181l1.201 1.248.727.85-.041-1.219V2.824c0-.187.06-.342.181-.463a.636.636 0 01.47-.187.627.627 0 01.65.65v7.248l-.041 1.219.726-.85 1.207-1.248a.6.6 0 01.451-.181c.188 0 .342.06.463.181a.615.615 0 01.182.463.648.648 0 01-.2.475l-2.953 3.035z"})})},61794:(e,t,o)=>{o.d(t,{H:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("copyPadded",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M4.89062 18.5107C4.89062 19.9873 5.64941 20.7529 7.1123 20.7529H13.5107C14.9736 20.7529 15.7256 19.9805 15.7256 18.5107V17.2461H16.8877C18.3506 17.2461 19.1094 16.4805 19.1094 15.0039V9.58984C19.1094 8.69434 18.9248 8.12012 18.3848 7.56641L14.9736 4.09375C14.4609 3.56738 13.8525 3.36914 13.0664 3.36914H10.4893C9.0332 3.36914 8.26758 4.13477 8.26758 5.61133V6.86914H7.1123C5.64941 6.86914 4.89062 7.6416 4.89062 9.11133V18.5107ZM15.042 11.3262L11.3369 7.55957C10.8105 7.02637 10.3662 6.88281 9.60742 6.87598V5.68652C9.60742 5.05762 9.94238 4.70898 10.6055 4.70898H13.4629V7.97656C13.4629 8.82422 13.9141 9.26172 14.7549 9.26172H17.7695V14.9219C17.7695 15.5576 17.4414 15.9062 16.7715 15.9062H15.7256V13.2539C15.7256 12.3311 15.6162 11.9072 15.042 11.3262ZM14.584 7.80566V5.2627L17.4209 8.14062H14.9189C14.6865 8.14062 14.584 8.04492 14.584 7.80566ZM6.23047 18.4287V9.19336C6.23047 8.56445 6.55859 8.20898 7.22168 8.20898H9.32031V11.9551C9.32031 12.9326 9.80566 13.4111 10.7764 13.4111H14.3857V18.4287C14.3857 19.0645 14.0576 19.4131 13.3945 19.4131H7.22168C6.55859 19.4131 6.23047 19.0645 6.23047 18.4287ZM10.9062 12.2285C10.626 12.2285 10.5029 12.1055 10.5029 11.8252V8.46875L14.2012 12.2285H10.9062Z"})})},39132:(e,t,o)=>{o.d(t,{c:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("eye",{viewBox:"0 0 32 32",svg:(0,i.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},21197:(e,t,o)=>{o.d(t,{Q:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("filter",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M1.63574 5.17969H14.3643C14.7197 5.17969 15.0068 4.88574 15.0068 4.53027C15.0068 4.1748 14.7197 3.8877 14.3643 3.8877H1.63574C1.27344 3.8877 0.993164 4.1748 0.993164 4.53027C0.993164 4.88574 1.28027 5.17969 1.63574 5.17969ZM3.05078 8.71387H12.9766C13.332 8.71387 13.6191 8.41992 13.6191 8.06445C13.6191 7.70215 13.3389 7.41504 12.9766 7.41504H3.05078C2.68848 7.41504 2.4082 7.70898 2.4082 8.06445C2.4082 8.41309 2.69531 8.71387 3.05078 8.71387ZM4.43848 12.2412H11.5889C11.9512 12.2412 12.2314 11.9473 12.2314 11.5918C12.2314 11.2363 11.9512 10.9492 11.5889 10.9492H4.43848C4.07617 10.9492 3.7959 11.2363 3.7959 11.5918C3.7959 11.9473 4.07617 12.2412 4.43848 12.2412Z"})})},18557:(e,t,o)=>{o.d(t,{z:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("flag",{viewBox:"0 0 13 14",svg:(0,i.jsx)("path",{d:"M0.825195 13.8457C1.16699 13.8457 1.4541 13.5654 1.4541 13.2168V9.47754C1.63867 9.40918 2.21973 9.19727 3.10156 9.19727C5.59668 9.19727 7.25781 10.4414 9.66406 10.4414C10.7168 10.4414 11.1885 10.3115 11.7217 10.0654C12.207 9.84668 12.4941 9.4502 12.4941 8.82129V1.99219C12.4941 1.55469 12.1523 1.27441 11.6943 1.27441C11.3047 1.27441 10.6895 1.54102 9.58887 1.54102C7.20996 1.54102 5.52148 0.296875 3.0332 0.296875C1.99414 0.296875 1.5293 0.419922 0.975586 0.672852C0.49707 0.891602 0.196289 1.24707 0.196289 1.86914V13.2168C0.196289 13.5586 0.483398 13.8457 0.825195 13.8457ZM9.63672 9.16309C7.41504 9.16309 5.71289 7.92578 3.12207 7.92578C2.45215 7.92578 1.84375 8.00098 1.48145 8.14453V2.0332C1.59766 1.83496 2.11035 1.56836 3.05371 1.56836C5.38477 1.56836 7.09375 2.80566 9.56836 2.80566C10.2383 2.80566 10.792 2.73047 11.2158 2.61426V8.69824C11.0996 8.89648 10.5801 9.16309 9.63672 9.16309Z"})})},53523:(e,t,o)=>{o.d(t,{N:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("repeat",{viewBox:"0 0 16 14",svg:(0,i.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},38715:(e,t,o)=>{o.d(t,{N:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("save",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M7.99316 10.8877C8.16406 10.8877 8.31445 10.833 8.47168 10.6758L10.7686 8.46094C10.8848 8.34473 10.9463 8.22168 10.9463 8.05762C10.9463 7.74316 10.6934 7.51074 10.3857 7.51074C10.2285 7.51074 10.0713 7.5791 9.96191 7.70215L8.99805 8.7207L8.56055 9.21973L8.62891 8.20801V1.11914C8.62891 0.78418 8.3418 0.49707 7.99316 0.49707C7.65137 0.49707 7.36426 0.78418 7.36426 1.11914V8.20801L7.43262 9.22656L6.98828 8.7207L6.03125 7.70215C5.92188 7.5791 5.75781 7.51074 5.60059 7.51074C5.29297 7.51074 5.04004 7.74316 5.04004 8.05762C5.04004 8.22168 5.1084 8.34473 5.22461 8.46094L7.52148 10.6758C7.67871 10.833 7.8291 10.8877 7.99316 10.8877ZM4.0625 15.3174H11.9307C13.4072 15.3174 14.1729 14.5586 14.1729 13.1025V6.36914C14.1729 4.91309 13.4072 4.1543 11.9307 4.1543H10.0781V5.49414H11.8486C12.4775 5.49414 12.833 5.82227 12.833 6.48535V12.9863C12.833 13.6494 12.4775 13.9775 11.8486 13.9775H4.14453C3.50879 13.9775 3.16016 13.6494 3.16016 12.9863V6.48535C3.16016 5.82227 3.50879 5.49414 4.14453 5.49414H5.92871V4.1543H4.0625C2.58594 4.1543 1.82031 4.91309 1.82031 6.36914V13.1025C1.82031 14.5586 2.58594 15.3174 4.0625 15.3174Z"})})})},78807:(e,t,o)=>{o.d(t,{l:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,i.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})})},98954:(e,t,o)=>{o.d(t,{Q:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("statusInProgressGroup",{viewBox:"0 0 17 17",svg:(0,i.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.07031 11.4531L11.5938 8.80469C11.9297 8.60938 11.9219 8.125 11.5938 7.92969L7.07031 5.27344C6.71875 5.07031 6.26562 5.24219 6.26562 5.63281V11.0938C6.26562 11.4766 6.69531 11.6719 7.07031 11.4531Z"})})},74101:(e,t,o)=>{o.d(t,{K:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("statusTodoGroup",{viewBox:"0 0 17 17",svg:(0,i.jsx)("path",{d:"M8.52344 1.85156C8.97656 1.85156 9.34375 1.49219 9.34375 1.05469C9.34375 0.609375 8.97656 0.234375 8.52344 0.234375C8.08594 0.234375 7.72656 0.609375 7.72656 1.05469C7.72656 1.48438 8.09375 1.85156 8.52344 1.85156ZM10.7969 2.21875C11.2422 2.21875 11.6094 1.85156 11.6094 1.41406C11.6094 0.960938 11.2422 0.601562 10.7969 0.601562C10.3516 0.601562 9.99219 0.960938 9.99219 1.41406C9.99219 1.85156 10.3516 2.21875 10.7969 2.21875ZM6.27344 2.21875C6.71094 2.21875 7.07812 1.85156 7.07812 1.41406C7.07812 0.960938 6.71094 0.601562 6.27344 0.601562C5.82812 0.601562 5.46094 0.960938 5.46094 1.41406C5.46094 1.85156 5.82812 2.21875 6.27344 2.21875ZM12.8359 3.25781C13.2812 3.25781 13.6484 2.89844 13.6484 2.45312C13.6484 2.00781 13.2812 1.64062 12.8359 1.64062C12.3984 1.64062 12.0312 2.00781 12.0312 2.45312C12.0312 2.89062 12.3984 3.25781 12.8359 3.25781ZM4.23438 3.25781C4.67188 3.25781 5.03906 2.89062 5.03906 2.45312C5.03906 2.00781 4.67969 1.64062 4.23438 1.64062C3.78906 1.64062 3.42188 2.00781 3.42188 2.45312C3.42188 2.89844 3.78906 3.25781 4.23438 3.25781ZM14.4609 4.88281C14.9062 4.88281 15.2734 4.51562 15.2734 4.07812C15.2734 3.63281 14.9062 3.26562 14.4609 3.26562C14.0234 3.26562 13.6562 3.63281 13.6562 4.07812C13.6562 4.51562 14.0234 4.88281 14.4609 4.88281ZM2.625 4.88281C3.0625 4.88281 3.42969 4.51562 3.42969 4.07812C3.42969 3.63281 3.0625 3.26562 2.625 3.26562C2.17969 3.26562 1.8125 3.63281 1.8125 4.07812C1.8125 4.51562 2.17969 4.88281 2.625 4.88281ZM15.4922 6.90625C15.9375 6.90625 16.3047 6.54688 16.3047 6.10156C16.3047 5.65625 15.9375 5.28906 15.4922 5.28906C15.0547 5.28906 14.6875 5.65625 14.6875 6.10156C14.6875 6.53906 15.0547 6.90625 15.4922 6.90625ZM1.59375 6.90625C2.02344 6.90625 2.39062 6.53906 2.39062 6.10156C2.39062 5.65625 2.03125 5.28906 1.59375 5.28906C1.14062 5.28906 0.78125 5.65625 0.78125 6.10156C0.78125 6.54688 1.14062 6.90625 1.59375 6.90625ZM15.8828 9.17188C16.3281 9.17188 16.6953 8.80469 16.6953 8.35938C16.6953 7.92188 16.3281 7.55469 15.8828 7.55469C15.4453 7.55469 15.0781 7.92188 15.0781 8.35938C15.0781 8.80469 15.4453 9.17188 15.8828 9.17188ZM1.21094 9.17188C1.64844 9.17188 2.01562 8.80469 2.01562 8.35938C2.01562 7.92188 1.64844 7.55469 1.21094 7.55469C0.765625 7.55469 0.398438 7.92188 0.398438 8.35938C0.398438 8.80469 0.765625 9.17188 1.21094 9.17188ZM15.4922 11.4375C15.9375 11.4375 16.3047 11.0703 16.3047 10.625C16.3047 10.1797 15.9375 9.82031 15.4922 9.82031C15.0547 9.82031 14.6875 10.1875 14.6875 10.625C14.6875 11.0703 15.0547 11.4375 15.4922 11.4375ZM1.59375 11.4375C2.03125 11.4375 2.39062 11.0703 2.39062 10.625C2.39062 10.1875 2.02344 9.82031 1.59375 9.82031C1.14062 9.82031 0.78125 10.1797 0.78125 10.625C0.78125 11.0703 1.14062 11.4375 1.59375 11.4375ZM14.4609 13.4609C14.9062 13.4609 15.2734 13.0938 15.2734 12.6484C15.2734 12.2109 14.9062 11.8438 14.4609 11.8438C14.0234 11.8438 13.6562 12.2109 13.6562 12.6484C13.6562 13.0938 14.0234 13.4609 14.4609 13.4609ZM2.625 13.4609C3.0625 13.4609 3.42969 13.0938 3.42969 12.6484C3.42969 12.2109 3.0625 11.8438 2.625 11.8438C2.17969 11.8438 1.8125 12.2109 1.8125 12.6484C1.8125 13.0938 2.17969 13.4609 2.625 13.4609ZM12.8359 15.0859C13.2812 15.0859 13.6484 14.7188 13.6484 14.2734C13.6484 13.8281 13.2812 13.4688 12.8359 13.4688C12.3984 13.4688 12.0312 13.8359 12.0312 14.2734C12.0312 14.7188 12.3984 15.0859 12.8359 15.0859ZM4.23438 15.0859C4.67969 15.0859 5.03906 14.7188 5.03906 14.2734C5.03906 13.8359 4.67188 13.4688 4.23438 13.4688C3.78906 13.4688 3.42188 13.8281 3.42188 14.2734C3.42188 14.7188 3.78906 15.0859 4.23438 15.0859ZM10.7969 16.125C11.2422 16.125 11.6094 15.7656 11.6094 15.3125C11.6094 14.875 11.2422 14.5078 10.7969 14.5078C10.3516 14.5078 9.99219 14.875 9.99219 15.3125C9.99219 15.7656 10.3516 16.125 10.7969 16.125ZM6.27344 16.125C6.71094 16.125 7.07812 15.7656 7.07812 15.3125C7.07812 14.875 6.71094 14.5078 6.27344 14.5078C5.82812 14.5078 5.46094 14.875 5.46094 15.3125C5.46094 15.7656 5.82812 16.125 6.27344 16.125ZM8.52344 16.4922C8.97656 16.4922 9.34375 16.1172 9.34375 15.6719C9.34375 15.2344 8.97656 14.875 8.52344 14.875C8.09375 14.875 7.72656 15.2422 7.72656 15.6719C7.72656 16.1172 8.08594 16.4922 8.52344 16.4922Z"})})}}]);