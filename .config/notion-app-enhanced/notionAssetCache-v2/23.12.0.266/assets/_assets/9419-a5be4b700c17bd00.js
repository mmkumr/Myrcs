"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9419],{37834:(e,t,r)=>{r.d(t,{FF:()=>g,U4:()=>f,gs:()=>v,jN:()=>m,xx:()=>y,zb:()=>b});r(67294);var i=r(23867),o=r(82990),s=r(31412),n=r(77080),a=r(46096),d=r(50906),l=r(54642),c=r(47307),p=r(92625),h=r(85893);const u=(0,s.defineMessages)({restoringPreviousVersion:{id:"historyModalActions.restoringPreviousVersion.loadingMessage",defaultMessage:"Restoringâ€¦"}});function m(e){const{environment:t,from:r,...i}=e;d.ya1(t,r),a.Z.setState({...i,open:!0,size:50})}const g=()=>{const e=a.Z.state;e.open&&a.Z.setState({...e,size:e.size+20})},f=function(){a.Z.setState({open:!1})};function v(e){const{environment:t,snapshot:r,nextFutureSnapshot:i}=e;d.qDg(t,r);const o=a.Z.state;o.open&&a.Z.setState({...o,snapshot:r,nextFutureSnapshot:i,openSnapshotNearTimestamp:void 0})}function b(){const e=a.Z.state;e.open&&a.Z.setState({...e,snapshot:void 0,nextFutureSnapshot:void 0})}async function y(e){if(!a.Z.state.open)return;if(!a.Z.state.snapshot)return;const t="restore_collection",r=a.Z.state.pageHasCollection,m=n.default.checkGate("snapshot_optional_collection_rollback_enabled")&&r?[{key:t,text:(0,h.jsx)(s.FormattedMessage,{defaultMessage:"Also restore databases on this page",id:"historyModal.confirmDialog.selectOption.collection"}),description:(0,h.jsx)(s.FormattedMessage,{defaultMessage:"All database pages will be restored to the previous version, which may impact other users or database views.",id:"historyModal.confirmDialog.selectOption.collection.description"})}]:void 0,{accept:g,selectionResult:v}=await c.confirmUserActionV2({message:(0,h.jsx)("div",{style:{fontWeight:o.Z.fontWeight.semibold,fontSize:"medium"},children:(0,h.jsx)(s.FormattedMessage,{defaultMessage:"Restore to this version?",id:"historyModal.confirmDialog.description"})}),acceptLabel:(0,h.jsx)(s.FormattedMessage,{defaultMessage:"Restore",id:"historyModal.confirmDialog.restoreButton.label"}),selectionItems:m});if(!g)return;d.R9m(e,a.Z.state.snapshot),p.j({message:u.restoringPreviousVersion});const b=await l.restoreSnapshot(e,{block:{id:a.Z.state.blockStore.id,spaceId:(0,i.C)(a.Z.state.blockStore.pointer.spaceId)},timestamp:a.Z.state.snapshot.timestamp,shouldRestoreCollection:(null==v?void 0:v.restore_collection)??!1}).next();b.value.error&&c.showErrorMessage(b.value.error.message),p.x(),f()}},63381:(e,t,r)=>{r.d(t,{Z:()=>ee});r(57658);var i=r(67294),o=r(83355),s=r(13991),n=r(49085),a=r(40902),d=r(66897),l=r(17215),c=r(41432),p=r(15070),h=r(99036),u=r(80951),m=r(8848),g=r(63144),f=r(25501),v=r(14215),b=r(6695),y=r(38297),x=r(42875),k=r(13530),C=r(72126),j=r(59753),_=r(26825),S=r(27006),M=r(21202),w=r(77420),B=r(70279),T=r(23867),V=r(15047),I=r(29369),E=r(19889),P=r(70203),D=r(97880),Z=r(82990),F=r(7928),L=r(31412),R=r(42130),H=r(33929),A=r(77907),U=r(41662),N=r(30874),G=r(26350),K=r(2456),z=r(44295),q=r(31278),O=r(85893);class W extends o.Z{constructor(){super(...arguments),this.renderEdit=()=>{const{edit:e,formatProperty:t}=this.props;if("page_icon"===t){const r=e.block_data.before.block_value.format&&e.block_data.before.block_value.format[t],i=e.block_data.after.block_value.format&&e.block_data.after.block_value.format[t];return this.renderPageIconUpdatedEdit(r,i)}"is_placeholder"!==t&&(0,D.t1)(t)},this.renderPageIconUpdatedEdit=(e,t)=>{const{edit:r}=this.props;if(e||t)return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",color:this.theme.lightTextColor,fontSize:12,lineHeight:1,marginBottom:8},children:[(0,z.I)({width:12,height:12,marginRight:6}),(0,O.jsx)(L.FormattedMessage,{id:"editFormatDiff.pageIcon.label",defaultMessage:"Page Icon"})]}),(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(q.Z,{disabled:!0,isEmptyPage:!1,size:20,icon:e?{pointer:{table:M.iU,id:r.block_data.before.block_value.id},icon:e}:void 0}),(0,O.jsx)("div",{style:{padding:"0px 8px"},children:(0,k.s)({width:14,height:14,fill:this.theme.mediumIconColor})}),(0,O.jsx)(q.Z,{disabled:!0,isEmptyPage:!1,size:20,icon:t?{pointer:{table:M.iU,id:r.block_data.after.block_value.id},icon:t}:void 0})]})]})}}renderComponent(){return this.renderEdit()||null}}W.displayName="EditFormatDiff";const $=W;var J=r(14200),Q=r(75561),X=r(93178);class Y extends o.Z{constructor(){super(...arguments),this.storeTypes={isEditHovered:n.default.createClass(!1)},this.renderProperty=(e,t,r)=>(0,O.jsx)(K.KX,{value:e,propertySchema:t,labeled:r,rootStore:this.props.rootStore}),this.renderBlockProperty=(e,t,r,i)=>(0,O.jsx)(K.Tl,{blockValue:e,prop:t,labeled:r,schema:i,rootStore:this.props.rootStore}),this.renderBlockEditProperty=(e,t,r)=>{const i=ne(e,this.props.intl)[t],o="block-changed"===e.type?e.block_data.after.block_value:e.block_data.block_value,s=(0,K.SX)(o,t);if(i)return this.renderProperty({value:s,spaceId:(0,T.C)(o.space_id)},i,r)},this.renderBlockEditPropertyDiff=(e,t,r)=>{const i=ne(e,this.props.intl),o=i[t];if(!o)return;const s=(0,K.SX)(e.block_data.before.block_value,t),n=u.wV({property:t,schema:i,block:j.kk.fromBlock(e.block_data.before.block_value),getRecordModel:this.getRecordModel,userId:this.environment.currentUser.id,userTimeZone:(0,x.r)(),intl:this.props.intl}),a=(0,K.SX)(e.block_data.after.block_value,t),d=o.type;return n&&"text"!==d&&"title"!==d?this.renderProperty({value:a,spaceId:(0,T.C)(e.block_data.after.block_value.space_id)},o,r):(0,O.jsx)(K.Hq,{labeled:r,name:o.name,type:o.type,icon:o.icon,children:(0,O.jsx)(X.Z,{propertySchema:o,beforeValue:{value:s,spaceId:(0,T.C)(e.block_data.before.block_value.space_id)},afterValue:{value:a,spaceId:(0,T.C)(e.block_data.after.block_value.space_id)},rootStore:this.props.rootStore})})},this.renderBlockPropertyEditDiff=e=>{const{labeled:t,propertySchema:r,beforeValue:i,afterValue:o,spaceId:s}=e,n=(0,T.C)(s);return(0,O.jsx)(K.Hq,{labeled:t,name:r.name,type:r.type,icon:r.icon,children:(0,O.jsx)(X.Z,{propertySchema:r,beforeValue:{value:i,spaceId:n},afterValue:{value:o,spaceId:n},rootStore:this.props.rootStore})})},this.getRecordValue=this.props.rootStore.getRecordValue,this.getRecordModel=this.props.rootStore.getRecordModel}renderComponent(){return this.renderEdit()||null}renderEdit(){var e,t;if("comment-edit"===this.props.type){const{edit:e,discussionLocation:t,hideAuthorName:r,lineClamp:i}=this.props;switch(e.type){case"comment-created":return this.renderCommentCreatedEdit({edit:e,discussionLocation:t,hideAuthorName:r,lineClamp:i});case"comment-changed":return this.renderCommentChangedEdit(e);case"comment-deleted":return this.renderCommentDeletedEdit(e,t);default:(0,D.t1)(e)}}const{edit:r}=this.props;switch(r.type){case"block-created":return(0,O.jsx)(ae,{rootStore:this.props.rootStore,blockValue:r.block_data.block_value});case"block-deleted":return this.renderBlockDeletedEdit(r.block_data.block_value);case"block-changed":return this.renderBlockChangedEdit(r);case"block-property-changed":return this.renderBlockPropertyChangedEdit(r);case"collection-property-changed":return this.renderCollectionPropertyChangedEdit(r);case"collection-changed":return(0,O.jsx)("div",{style:R.v.wrapStyle,children:(0,O.jsx)(de,{rootStore:this.props.rootStore,spaceId:r.space_id,args:r.collection_data})});case"collection-created":return(0,O.jsx)("div",{style:R.v.wrapStyle,children:(0,O.jsx)(le,{rootStore:this.props.rootStore,description:(null===(e=r.collection_data)||void 0===e?void 0:e.description)&&{value:null===(t=r.collection_data)||void 0===t?void 0:t.description,spaceId:r.space_id}})});case"mention-created":return this.renderMentionCreated(r);case"permission-created":return this.renderPermissionCreated(r);case"permission-changed":return this.renderPermissionChanged(r);case"permission-deleted":return this.renderPermissionDeleted(r);case"permission-restriction-created":case"permission-restriction-deleted":return this.renderPermissionInheritanceChanged(r);case"permission-group-created":return this.renderPermissionGroupCreated(r);case"permission-group-changed":return this.renderPermissionGroupChanged(r);case"permission-group-deleted":return this.renderPermissionGroupDeleted(r);case"reminder-created":return this.renderReminderCreated(r);case"permission-group-mention-created":return this.renderPermissionGroupMentionCreated(r);case"permission-group-mention-deleted":case"mention-deleted":return null;default:(0,D.t1)(r)}}renderBlockChanged(e){switch(e.block_data.after.block_value.type){case c.Ti.text:return this.renderTextBlockChanged(e);case c.Ti.header:return this.renderHeaderBlockChanged(e);case c.Ti.subHeader:return this.renderSubHeaderBlockChanged(e);case c.Ti.subSubHeader:return this.renderSubSubHeaderBlockChanged(e);case c.Ti.toggle:return this.renderToggleBlockChanged(e);case c.Ti.bulletedList:return this.renderBulletedListBlockChanged(e);case c.Ti.numberedList:return this.renderNumberedListBlockChanged(e);case c.Ti.quote:return this.renderQuoteBlockChanged(e);case c.Ti.factory:return this.renderFactoryBlockChanged(e);case c.Ti.equation:return this.renderEquationBlockChanged(e);case c.Ti.toDo:return this.renderTodoBlockChanged(e);case c.Ti.code:return this.renderCodeBlockChanged(e);case c.Ti.bookmark:return this.renderBookmarkBlockChanged(e);case c.Ti.page:return this.renderPageBlockChanged(e);case c.Ti.collectionView:case c.Ti.collectionViewPage:return(0,O.jsx)(oe,{edit:e});case c.Ti.image:return this.renderImageBlockChanged(e);case c.Ti.embed:return this.renderEmbedBlockChanged(e,"embed");case c.Ti.framer:return this.renderEmbedBlockChanged(e,"framer");case c.Ti.tweet:return this.renderEmbedBlockChanged(e,"tweet");case c.Ti.gist:return this.renderEmbedBlockChanged(e,"gist");case c.Ti.drive:return(0,O.jsx)(ce,{rootStore:this.props.rootStore,edit:e});case c.Ti.maps:return this.renderEmbedBlockChanged(e,"maps");case c.Ti.invision:return this.renderEmbedBlockChanged(e,"invision");case c.Ti.video:return this.renderEmbedBlockChanged(e,"video");case c.Ti.audio:return this.renderEmbedBlockChanged(e,"audio");case c.Ti.file:return this.renderEmbedBlockChanged(e,"file");case c.Ti.callout:return this.renderCalloutBlockChanged(e);case c.Ti.whimsical:return this.renderEmbedBlockChanged(e,"whimsical");case c.Ti.miro:return this.renderEmbedBlockChanged(e,"miro");case c.Ti.abstract:return this.renderEmbedBlockChanged(e,"abstract");case c.Ti.mixpanel:return this.renderEmbedBlockChanged(e,"mixpanel");case c.Ti.sketch:return this.renderEmbedBlockChanged(e,"sketch");case c.Ti.replit:return this.renderEmbedBlockChanged(e,"replit");case c.Ti.excalidraw:return this.renderEmbedBlockChanged(e,"excalidraw");case c.Ti.tableRow:return this.renderSimpleTableRowBlockChanged(e);case c.Ti.hex:return this.renderEmbedBlockChanged(e,"hex");case c.Ti.hex:return this.renderEmbedBlockChanged(e,"deepnote");case c.Ti.externalObjectInstance:return this.renderExternalObjectInstanceBlockChanged(e)}}renderBlockDeletedEdit(e){const t=(0,O.jsx)(K.ZP,{rootStore:this.props.rootStore,blockValue:e,deleted:!0});if(t)switch(e.type){case c.Ti.quote:case c.Ti.video:case c.Ti.code:case c.Ti.equation:case c.Ti.file:case c.Ti.bookmark:case c.Ti.factory:return(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{style:R.v.getLabelStyle(this.theme),children:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Deleted",id:"edit.blockDeletedEditStyles.factoryLabel"})}),(0,O.jsx)("div",{style:{...R.v.wrapStyle},children:t})]});case c.Ti.table:return;case c.Ti.tableRow:return e.properties&&(0,D.Yd)(e.properties).length>0?(0,O.jsx)("div",{style:{...R.v.wrapStyle,...R.v.deletedStyle},children:t}):void 0;default:return(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{style:R.v.getLabelStyle(this.theme),children:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Deleted",id:"edit.blockDeletedEditStyles.defaultLabel"})}),(0,O.jsx)("div",{style:{...R.v.wrapStyle,...R.v.deletedStyle},children:t})]})}}renderBlockChangedEdit(e){const t=this.renderBlockChanged(e);if(t)return(0,O.jsx)("div",{style:R.v.wrapStyle,children:t})}renderBlockPropertyChangedEdit(e){return(0,O.jsx)("div",{children:Object.entries(e.property_updates).map((t=>{let[r,i]=t;const o=e.filtered_block_schema[r];if(!o)return;const s=i.before?i.before.value:[],n=i.after?i.after.value:[],a=this.renderBlockPropertyEditDiff({labeled:!0,propertySchema:o,beforeValue:s,afterValue:n,spaceId:e.space_id});return a?(0,O.jsx)("div",{style:R.v.wrapStyle,children:a},r):void 0})).filter(D.$K)})}renderCheckbox(e){return(0,O.jsx)("div",{style:{marginRight:6,marginTop:3},children:this.renderBlockProperty(e,"checked",!1)})}renderEditTitle(e){return this.renderBlockEditProperty(e,"title",!1)}renderEditTitleDiff(e){return this.renderBlockEditPropertyDiff(e,"title",!1)}renderTextBlockChanged(e){return this.renderEditTitleDiff(e)}renderCalloutBlockChanged(e){return(0,O.jsx)(f.Z,{title:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Callout",id:"edit.calloutBlockChanged.label"}),theme:this.theme,children:this.renderEditTitleDiff(e)})}renderExternalObjectInstanceBlockChanged(e){const t=t=>{const r=e.block_data[t].block_value,i=j.kk.fromBlock(r);return i.isType("external_object_instance")?l.$F(H.default.getIntl(),i,j.om.fromRecordMap(N.Z.getIntegrationsAsRecordMap())):null};return(0,O.jsxs)(f.Z,{title:(0,O.jsx)(L.FormattedMessage,{...l.V1.editLabel}),theme:this.theme,children:[(0,O.jsx)("div",{style:R.v.deletedStyle,children:t("before")}),(0,O.jsx)("div",{children:t("after")})]})}renderHeaderBlockChanged(e){return(0,O.jsx)("div",{style:R.v.headerStyle,children:this.renderEditTitleDiff(e)})}renderSubHeaderBlockChanged(e){return(0,O.jsx)("div",{style:R.v.subHeaderStyle,children:this.renderEditTitleDiff(e)})}renderSubSubHeaderBlockChanged(e){return(0,O.jsx)("div",{style:R.v.subSubHeaderStyle,children:this.renderEditTitleDiff(e)})}renderToggleBlockChanged(e){return(0,O.jsx)(K.ZD,{children:this.renderEditTitleDiff(e)})}renderBulletedListBlockChanged(e){return(0,O.jsx)("ul",{style:{margin:0,paddingLeft:28},children:(0,O.jsx)("li",{children:this.renderEditTitleDiff(e)})})}renderNumberedListBlockChanged(e){return(0,O.jsx)("ol",{style:{margin:0,paddingLeft:28},children:(0,O.jsx)("li",{children:this.renderEditTitleDiff(e)})})}renderQuoteBlockChanged(e){return(0,O.jsx)(f.Z,{title:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Quote",id:"edit.quoteBlockChanged.label"}),theme:this.theme,children:this.renderEditTitleDiff(e)})}renderFactoryBlockChanged(e){return(0,O.jsx)(f.Z,{title:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Template Button",id:"edit.templateButtonBlockChanged.label"}),theme:this.theme,children:this.renderEditTitleDiff(e)})}renderEquationBlockChanged(e){return(0,O.jsx)(f.Z,{title:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Equation",id:"edit.equationBlockChanged.label"}),theme:this.theme,children:this.renderEditTitleDiff(e)})}renderTodoBlockChanged(e){return a.j4({before:e.block_data.before.block_value,after:e.block_data.after.block_value,property:"checked"})?(0,O.jsxs)("div",{style:{display:"inline-flex"},children:[(0,O.jsx)("div",{style:{marginRight:6,marginTop:3,lineHeight:1},children:this.renderBlockEditPropertyDiff(e,"checked",!1)}),this.renderEditTitleDiff(e)]}):(0,O.jsxs)("div",{style:{display:"inline-flex"},children:[this.renderCheckbox(e.block_data.after.block_value),this.renderEditTitleDiff(e)]})}renderCodeBlockChanged(e){return a.j4({before:e.block_data.before.block_value,after:e.block_data.after.block_value,property:"language"})?(0,O.jsxs)(f.Z,{title:te(e.block_data.after.block_value),theme:this.theme,children:[(0,O.jsx)("span",{style:{fontFamily:Z.Z.getCompositeFontFamily(s.SP).mono,fontSize:12,tabSize:2},children:this.renderEditTitle(e)}),this.renderBlockEditPropertyDiff(e,"language",!0)]}):(0,O.jsx)(f.Z,{title:te(e.block_data.after.block_value),theme:this.theme,children:(0,O.jsx)("span",{style:{fontFamily:Z.Z.getCompositeFontFamily(s.SP).mono,fontSize:12,tabSize:2},children:this.renderEditTitle(e)})})}renderCaptionChanged(e){return ie(e,"caption")&&this.renderBlockEditPropertyDiff(e,"caption",!1)}renderEmbedBlockChanged(e,t){const{intl:r}=this.props,o=ie(e,"source")&&(0,O.jsxs)(f.Z,{title:l.xg(r,t),theme:this.theme,children:[(0,O.jsx)(se,{blockValue:e.block_data.after.block_value}),this.renderBlockEditPropertyDiff(e,"source",!1)]});return(0,O.jsxs)(i.Fragment,{children:[o,(0,O.jsx)("div",{style:{marginBottom:o?4:0},children:this.renderCaptionChanged(e)})]})}renderImageBlockChanged(e){const t=re(e.block_data.before.block_value),r=re(e.block_data.after.block_value),o=t!==r&&(0,O.jsxs)("div",{style:{marginTop:4,marginBottom:4},children:[(0,O.jsx)("div",{style:{...R.v.getLabelStyle(this.theme),marginBottom:4},children:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Updated",id:"edit.imageBlockChanged.updatedTitle"})}),r&&(0,O.jsx)(K.xP,{src:r,permissionRecord:{table:M.iU,id:e.block_id}})]});return(0,O.jsxs)(i.Fragment,{children:[o,(0,O.jsx)("div",{style:{marginBottom:o?4:0},children:this.renderCaptionChanged(e)})]})}renderComment(e){let{commentValue:t,discussionLocation:r,showEditedBadge:i,hideAuthorName:o,lineClamp:s}=e;if(!t.created_by_table||!t.created_by_id)return;if("comment-edit"!==this.props.type)return;const n=this.getRecordValue({table:t.created_by_table,id:t.created_by_id,spaceId:t.space_id}),a=n&&(0,d.LU)({table:t.created_by_table,value:n}),l=a?(0,d.$4)(this.props.intl,a):(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Unknown author",id:"edit.unknownAuthor.label"}),c=t.text&&(0,O.jsx)(J.Z,{propertySchema:{type:"text",name:""},value:{spaceId:t.space_id,value:this.props.highlightCurrentUser?this.highlightCurrentUserMentions(t.text,this.props.highlightCurrentUserStyle??"background_only"):t.text},rootStore:this.props.rootStore}),p=t.content&&t.content.length>0&&t.content.map((e=>{const r=this.getRecordValue({table:"block",id:e,spaceId:t.space_id});return r&&(0,O.jsx)(K.ZP,{blockValue:r,rootStore:this.props.rootStore})})).filter(D.$K),h=G.t1.createChildStore(this.props.rootStore,{table:B.x_,id:t.id,spaceId:(0,T.C)(this.props.rootStore.pointer.spaceId)}),u=h.getUserVisibleReactions().length>0,m=!u,g=this.stores.isEditHovered;return(0,O.jsxs)("div",{style:{...m&&{position:"relative"}},onMouseEnter:()=>g.setState(!0),onMouseLeave:()=>g.setState(!1),children:[!o&&(0,O.jsx)("div",{style:{...R.v.getLabelStyle(this.theme),marginBottom:2},children:l}),(0,O.jsx)("span",{style:{...Z.Z.textOverflowStyle,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:s||6},children:c}),p,(0,O.jsx)("div",{style:{...m&&{position:"absolute",top:-3,right:3}},children:(g.state||u)&&(0,O.jsx)(A.LazyReactionBar,{parentStore:h,discussionLocation:r,onClick:this.props.onReactionClick})}),i&&(0,O.jsx)("span",{style:{color:this.theme.mediumTextColor,paddingLeft:4},children:(0,O.jsx)(L.FormattedMessage,{id:"edit.editedBadge",defaultMessage:"(edited)"})})]})}renderCommentDiff(e){var t,r;const{before:o,after:s}=e;if(!s.created_by_table||!s.created_by_id)return;const n=this.getRecordValue({table:s.created_by_table,id:s.created_by_id,spaceId:s.space_id}),a=n&&(0,d.LU)({table:s.created_by_table,value:n}),l=a?(0,d.$4)(this.props.intl,a):(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Unknown author",id:"edit.unknownAuthorCommentDiff.label"}),c=o.text&&s.text&&(0,O.jsx)(X.Z,{propertySchema:{type:"text",name:""},beforeValue:{value:o.text||[],spaceId:o.space_id},afterValue:{value:s.text||[],spaceId:s.space_id},rootStore:this.props.rootStore}),p=null===(t=s.content)||void 0===t?void 0:t.filter((e=>{var t;return!(null!==(t=o.content)&&void 0!==t&&t.includes(e))})),h=null===(r=o.content)||void 0===r?void 0:r.filter((e=>{var t;return!(null!==(t=s.content)&&void 0!==t&&t.includes(e))})),u=(0,O.jsxs)(i.Fragment,{children:[null==h?void 0:h.map((e=>{const t=this.getRecordValue({table:M.iU,id:e,spaceId:s.space_id});return t&&this.renderBlockDeletedEdit(t)})),null==p?void 0:p.map((e=>{const t=this.getRecordValue({table:M.iU,id:e,spaceId:s.space_id});return t&&(0,O.jsx)(K.ZP,{blockValue:t,rootStore:this.props.rootStore})}))]});return(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{style:{...R.v.getLabelStyle(this.theme),marginBottom:2},children:l}),c,u]})}renderCollectionPropertyChangedDiff(e){if(!e||!e.before||!e.after)return;const{before:t,after:r}=e,i=u.IQ({before:t,after:r});if(!i)return;const{newOptions:o,modifiedOptions:s,removedOptions:n}=i;if([o,s,n].every((e=>0===e.length)))return;const a=e=>{let{option:t,strikethrough:r=!1}=e;const i=(0,m.KR)(this.theme,null==t?void 0:t.color);return(0,O.jsx)(Q.Z,{...i,strikethrough:r,children:t.value})};return(0,O.jsx)(K.Hq,{labeled:!0,name:r.name,icon:r.icon,type:r.type,children:(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:4},children:[o.length>0&&(0,O.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",columnGap:4},children:[(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Added",id:"Edit.renderCollectionPropertyChangedDiff.addedProperty"}),o.map((e=>(0,O.jsx)("span",{children:a({option:e})},e.id)))]}),n.length>0&&(0,O.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",columnGap:4},children:[(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Removed",id:"Edit.renderCollectionPropertyChangedDiff.removedProperty"}),n.map((e=>(0,O.jsx)("span",{children:a({option:e,strikethrough:!0})},e.id)))]}),s.length>0&&(0,O.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"row"},children:[(0,O.jsx)("span",{children:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Edited",id:"Edit.renderCollectionPropertyChangedDiff.editedProperty"})}),(0,O.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:s.map((e=>(0,O.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[(0,O.jsx)("span",{style:{marginLeft:4},children:a({option:e.before,strikethrough:!0})}),(0,O.jsx)("span",{style:{padding:"0px 8px"},children:(0,k.s)({width:10,height:10,fill:this.theme.mediumIconColor})}),a({option:e.after})]},e.before.id)))})]})]})})}renderBookmarkBlockChanged(e){const t=(ie(e,"title")||ie(e,"source"))&&(0,O.jsxs)(f.Z,{title:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Bookmark",id:"edit.bookmarkBlockPropertyChanged.label"}),theme:this.theme,children:[this.renderEditTitleDiff(e),this.renderBlockEditPropertyDiff(e,"link",!0)]});return(0,O.jsxs)(i.Fragment,{children:[t,ie(e,"caption")&&(0,O.jsx)("div",{style:{marginBottom:t?4:0},children:this.renderCaptionChanged(e)})]})}renderPageBlockChanged(e){const t=a.OS({before:e.block_data.before.block_value,after:e.block_data.after.block_value,schema:e.block_schema}),r=a.B9({before:e.block_data.before.block_value,after:e.block_data.after.block_value});return(0,O.jsxs)("div",{children:[t.map(((t,r,i)=>(0,O.jsx)("div",{children:this.renderBlockEditPropertyDiff(e,t,!0)},t))),r.map(((r,i,o)=>{const s=0===t.length&&0===i,n=i===o.length-1;return(0,O.jsx)("div",{style:{marginTop:s?6:10,marginBottom:n?0:6},children:(0,O.jsx)($,{formatProperty:r,edit:e})},r)}))]})}renderSimpleTableRowBlockChanged(e){const t=e.block_data.before.block_value,r=e.block_data.after.block_value,i=a.Yr({before:t,after:r});return(0,O.jsx)("div",{style:{display:"flex",alignItems:"stretch",flexDirection:"column"},children:i.map(((e,i)=>{const o=t.properties&&e in t.properties?t.properties[e]:void 0,s=r.properties&&e in r.properties?r.properties[e]:void 0,n=U.g$.renderCellValueForActivity({environment:this.environment,cellValue:o,spaceId:t.space_id,parentStore:this.props.rootStore,theme:this.theme}),a=U.g$.renderCellValueForActivity({environment:this.environment,cellValue:s,spaceId:r.space_id,parentStore:this.props.rootStore,theme:this.theme});return(0,O.jsxs)("div",{style:{display:"flex",border:`1px solid ${this.theme.tableDividerColor}`,overflowWrap:"anywhere",width:"max-content",maxWidth:"100%",verticalAlign:"top",lineHeight:Z.Z.lineHeight.UIRegular.desktop,padding:4,marginBottom:4},children:[(0,O.jsx)("span",{style:{...R.v.deletedStyle,marginBottom:void 0},children:n}),o&&s&&(0,k.s)({width:12,height:12,fill:this.theme.mediumIconColor,alignSelf:"center",margin:4}),(0,O.jsx)("span",{style:{...R.v.addedStyle},children:a})]},i)}))})}renderPermissionCreated(e){return(0,O.jsxs)("div",{style:{...R.v.permissionStyle,...R.v.addedStyle,marginTop:3,marginBottom:3},children:[(0,O.jsx)("div",{children:this.renderPermissionTarget(e)}),(0,O.jsx)("div",{children:(0,O.jsx)(pe,{item:e.permission_data})})]})}renderPermissionDeleted(e){return(0,O.jsxs)("div",{style:{...R.v.permissionStyle,...R.v.deletedStyle},children:[(0,O.jsx)("div",{children:this.renderPermissionTarget(e)}),(0,O.jsx)("div",{children:(0,O.jsx)(pe,{item:e.permission_data})})]})}renderPermissionChanged(e){return(0,O.jsxs)("div",{style:R.v.permissionStyle,children:[(0,O.jsx)("div",{children:this.renderPermissionTarget(e)}),(0,O.jsx)("div",{children:(0,O.jsxs)("div",{style:R.v.diffWrapStyle,children:[(0,O.jsx)(pe,{item:e.permission_data.before}),(0,O.jsx)("div",{style:{padding:"0px 8px"},children:(0,k.s)({width:14,height:14})}),(0,O.jsx)(pe,{item:e.permission_data.after})]})})]})}renderPermissionInheritanceChanged(e){var t;return((null===(t=e.permission_data)||void 0===t?void 0:t.calculated_changes)||[]).map(((t,r)=>{let[o,s]=t;const n={timestamp:e.timestamp,space_id:e.space_id,type:"permission-changed",permission_data:{before:o,after:s}};return(0,O.jsx)(i.Fragment,{children:this.renderPermissionChanged(n)},`inheritance-change-${r}`)}))}renderPermissionGroupCreated(e){const t=e.permission_group_data.user_ids||[],r=C.oA(t.map((e=>this.getRecordValue({table:E.KJ,id:e}))));if(0!==r.length)return(0,O.jsx)("div",{children:r.map((e=>(0,O.jsx)("div",{style:{...R.v.groupStyle,...R.v.addedStyle,marginTop:3,marginBottom:3},children:(0,F.Nz)(this.props.intl,e)},e.id)))})}renderPermissionGroupDeleted(e){const t=e.permission_group_data.user_ids||[],r=C.oA(t.map((e=>this.getRecordValue({table:E.KJ,id:e}))));if(0!==r.length)return(0,O.jsx)("div",{children:r.map((e=>(0,O.jsx)("div",{style:{...R.v.groupStyle,...R.v.deletedStyle},children:(0,F.Nz)(this.props.intl,e)},e.id)))})}renderPermissionGroupChanged(e){const t=e.permission_group_data.before.user_ids||[],r=e.permission_group_data.after.user_ids||[],i=(0,v.E)(t,r),o=C.oA(i.created.map((e=>this.getRecordValue({table:E.KJ,id:e})))),s=C.oA(i.deleted.map((e=>this.getRecordValue({table:E.KJ,id:e}))));if(0!==o.length||0!==s.length)return(0,O.jsxs)("div",{children:[o.map((e=>(0,O.jsx)("div",{style:{...R.v.groupStyle,...R.v.addedStyle,marginTop:3,marginBottom:3},children:(0,F.Nz)(this.props.intl,e)},e.id))),s.map((e=>(0,O.jsx)("div",{style:{...R.v.groupStyle,...R.v.deletedStyle},children:(0,F.Nz)(this.props.intl,e)},e.id)))]})}renderPermissionTarget(e){const t="permission-changed"===e.type?e.permission_data.after:e.permission_data;if((0,S.jg)(t)){const e=this.getRecordValue({table:E.KJ,id:t.user_id}),r=(0,F.Nz)(this.props.intl,e);return(0,O.jsx)("div",{style:R.v.permissionTypeWrapStyle,children:(0,O.jsx)("div",{style:R.v.getUserHeaderStyle(this.theme),children:r})})}if((0,S.ix)(t)){const t=this.getRecordValue({table:V.bx,id:e.space_id}),r=t?t.name:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Unknown",id:"edit.unknownSpacePermissionTarget.label"});return(0,O.jsx)("div",{style:R.v.permissionTypeWrapStyle,children:(0,O.jsx)("div",{style:R.v.getUserHeaderStyle(this.theme),children:r})})}if((0,S.$D)(t))return(0,O.jsx)("div",{style:R.v.permissionTypeWrapStyle,children:(0,O.jsx)("div",{style:R.v.getUserHeaderStyle(this.theme),children:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Published link",id:"edit.publishToWebPermissionTarget.label"})})});if((0,S.hV)(t)){const r=this.getRecordValue({table:V.bx,id:e.space_id}),i=(r&&r.permission_groups||[]).find((e=>e.id===t.group_id)),o=i&&i.name||(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Deleted group",id:"edit.deletedPermissionGroup.label"});return(0,O.jsx)("div",{style:R.v.permissionTypeWrapStyle,children:(0,O.jsx)("div",{style:R.v.getUserHeaderStyle(this.theme),children:o})})}if((0,S.FB)(t)){const r=this.getRecordValue({table:w.cZ,id:t.bot_id,spaceId:e.space_id}),i=(0,p.Mh)(r);return(0,O.jsx)("div",{style:R.v.permissionTypeWrapStyle,children:(0,O.jsx)("div",{style:R.v.getUserHeaderStyle(this.theme),children:i})})}if((0,S.zU)(t)){const r=this.getRecordValue({table:I.e0,id:t.team_id,spaceId:e.space_id});let i=(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Members of an unknown teamspace",id:"edit.teamMemberPermissionChanged.unknownTeam"});return null!=r&&r.name&&(i=(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Members of {teamName}",id:"edit.teamMemberPermissionChanged.knownTeam",values:{teamName:r.name}})),(0,O.jsx)("div",{style:R.v.permissionTypeWrapStyle,children:(0,O.jsx)("div",{style:R.v.getUserHeaderStyle(this.theme),children:i})})}if((0,S.LW)(t)){const r=this.getRecordValue({table:I.e0,id:t.team_id,spaceId:e.space_id});let i=(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Owners of an unknown teamspace",id:"edit.teamOwnerPermissionChanged.unknownTeam"});return null!=r&&r.name&&(i=(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Owners of {teamName}",id:"edit.teamOwnerPermissionChanged.knownTeam",values:{teamName:r.name}})),(0,O.jsx)("div",{style:R.v.permissionTypeWrapStyle,children:(0,O.jsx)("div",{style:R.v.getUserHeaderStyle(this.theme),children:i})})}}renderCommentCreatedEdit(e){const{edit:t,discussionLocation:r,hideAuthorName:i,lineClamp:o}=e,s=this.getRecordValue({table:B.x_,id:t.comment_id,spaceId:t.space_id}),n=Boolean(t.comment_data&&s&&(0,g.P)(j.kk.fromValue(B.x_,t.comment_data),j.kk.fromValue(B.x_,s)));if(s)return(0,O.jsx)("div",{style:R.v.wrapStyle,children:this.renderComment({commentValue:s,discussionLocation:r,showEditedBadge:n,hideAuthorName:i,lineClamp:o})})}renderCommentChangedEdit(e){return(0,O.jsx)("div",{style:R.v.wrapStyle,children:this.renderCommentDiff(e.comment_data)})}renderCommentDeletedEdit(e,t){const r=this.getRecordValue({table:B.x_,id:e.comment_id,spaceId:e.space_id}),i=e.comment_data||r;if(i)return(0,O.jsx)("div",{style:{...R.v.wrapStyle,...R.v.deletedStyle},children:this.renderComment({commentValue:i,discussionLocation:t,showEditedBadge:!1,hideAuthorName:!1})})}renderCollectionPropertyChangedEdit(e){const t=this.renderCollectionPropertyChangedDiff(e.collection_property_data);return t?(0,O.jsx)("div",{style:{...R.v.wrapStyle,paddingTop:6,paddingBottom:4},children:t}):null}renderMentionCreated(e){return this.renderBlockOrProperty({blockId:e.mentioned_block_id,property:e.mentioned_property})}renderPermissionGroupMentionCreated(e){return this.renderBlockOrProperty({blockId:e.mentioned_block_id,property:e.mentioned_property})}renderReminderCreated(e){return this.renderBlockOrProperty({blockId:e.reminder_block_id,property:e.reminder_property})}renderBlockOrProperty(e){const t=this.getRecordValue({table:M.iU,id:e.blockId});if(t){const i=(0,y.ky)({block:t,getRecordValue:this.getRecordValue});if(i){const r=h.oC(i),o=this.renderBlockProperty(t,e.property,!0,r);if(o)return(0,O.jsx)("div",{style:{...R.v.wrapStyle},children:o})}else{var r;const e=null===(r=t.properties)||void 0===r?void 0:r.title,i={...t,properties:{...t.properties,title:this.props.highlightCurrentUser&&e?this.highlightCurrentUserMentions(e,this.props.highlightCurrentUserStyle??"background_only"):e}},o=(0,O.jsx)(K.ZP,{blockValue:i,rootStore:this.props.rootStore});if(o)return(0,O.jsx)("div",{style:R.v.wrapStyle,children:o})}}}highlightCurrentUserMentions(e,t){const r=[],i=this.environment.currentUser;return P.lzi(e).forEach((e=>{if(P.km_(e)){const o=[];for(const r of P.hn0(e)){const e=P.IWo(r)&&r[1]===i.id,s=P._bk(r)&&this.currentUserIsMemberOfGroup(r[1],r[2]);e||s?(o.push(r),"text_only"!==t&&o.push([P.GKr.Highlight,"yellow_background"]),"background_only"!==t&&o.push([P.GKr.Highlight,"yellow"])):o.push(r)}r.push([e[0],o])}else r.push(e)})),r}currentUserIsMemberOfGroup(e,t){var r;const i=this.environment.currentUser.id;if(!i)return!1;const o=this.getRecordValue({table:V.bx,id:t});return new Set(null==o||null===(r=o.permission_groups)||void 0===r||null===(r=r.find((t=>t.id===e)))||void 0===r?void 0:r.user_ids).has(i)}}Y.displayName="Edit";const ee=(0,L.injectIntl)(Y);function te(e){const t=e&&e.properties&&e.properties.language;if(!t)return(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Code",id:"edit.codeBlockChanged.label"});const r=u.Sj(t,h.fG);return(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Code - {codeLanguage}",values:{codeLanguage:r},id:"edit.codeBlockWithLanguageChanged.label"})}function re(e){const t=e&&e.properties&&e.properties.source;return u.zB(t)}function ie(e,t){return!C.Xy(e.block_data.before.block_value&&e.block_data.before.block_value.properties&&e.block_data.before.block_value.properties[t],e.block_data.after.block_value&&e.block_data.after.block_value.properties&&e.block_data.after.block_value.properties[t])}function oe(e){let{edit:t}=e;return null}function se(e){let{blockValue:t}=e;const r=re(t);return(0,O.jsx)("span",{style:{wordBreak:"break-word"},children:r})}function ne(e,t){return e.block_schema?h.a5(e):h.Kc(t)}function ae(e){let{blockValue:t,rootStore:r}=e;const i=(0,O.jsx)(K.ZP,{blockValue:t,rootStore:r,created:!0});if(i)switch(t.type){case c.Ti.quote:case c.Ti.video:case c.Ti.code:case c.Ti.equation:case c.Ti.file:case c.Ti.bookmark:case c.Ti.factory:return(0,O.jsx)("div",{style:R.v.wrapStyle,children:i});case c.Ti.table:return null;case c.Ti.tableRow:return t.properties&&(0,D.Yd)(t.properties).length>0?(0,O.jsx)("div",{style:{...R.v.wrapStyle,...R.v.addedStyle},children:i}):null;default:return(0,O.jsx)("div",{style:{...R.v.wrapStyle,...R.v.addedStyle},children:i})}return null}function de(e){let{spaceId:t,args:r,rootStore:i}=e;if(!r||!r.before&&!r.after)return null;const o=r.before&&r.before.description||[],s=r.after&&r.after.description||[];return(0,O.jsx)(K.Hq,{labeled:!0,name:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Description",id:"edit.descriptionPropertyChanged.label"}),icon:void 0,type:"text",children:(0,O.jsx)(X.Z,{propertySchema:{type:"text",name:""},beforeValue:{value:o,spaceId:t},afterValue:{value:s,spaceId:t},rootStore:i})})}function le(e){let{description:t,rootStore:r}=e;return t?(0,O.jsx)(K.Hq,{labeled:!0,name:(0,O.jsx)(L.FormattedMessage,{defaultMessage:"Description",id:"edit.descriptionPropertyCreated.label"}),type:"text",icon:void 0,children:(0,O.jsx)(X.Z,{propertySchema:{type:"text",name:""},beforeValue:{value:[],spaceId:t.spaceId},afterValue:t,rootStore:r})}):null}function ce(e){let{edit:t,rootStore:r}=e;const o=(0,b.v0)(t.block_data.before.block_value),s=t.block_data.after.block_value,n=o!==(0,b.v0)(s);return(0,O.jsx)(i.Fragment,{children:n&&"drive"===s.type&&(0,O.jsx)(K.ZP,{blockValue:s,rootStore:r})})}function pe(e){let{item:t}=e;window.__c={n:"PermissionRole"};const r=(0,L.useIntl)(),i=t.role??"none",o=(0,_.kD)(i,void 0);return o?(0,O.jsx)("div",{style:R.v.getRoleStyle(),children:r.formatMessage(o)}):null}},93178:(e,t,r)=>{r.d(t,{Z:()=>C});r(57658),r(67294);var i=r(86628),o=r(24405),s=r(80951),n=r(14215),a=(r(30541),r(21703),r(67266)),d=r.n(a),l=r(5242),c=r.n(l),p=r(15095),h=r(72126),u=r(70203),m=r(97880);let g=function(e){return e[e.removed=-1]="removed",e[e.added=1]="added",e[e.same=0]="same",e}({});function f(e){const{before:t,after:r}=e,i={count:0,encoding:{},decoding:{},annotationEncoding:{},annotationDecoding:{}},o=e=>{const t=i.encoding[e];if(t)return t;{const t=String.fromCharCode(i.count);return i.count++,i.encoding[e]=t,i.decoding[t]=e,t}},s=e=>{const t=d()(e),r=i.annotationEncoding[t];if(r)return r;{const r=String.fromCharCode(i.count);return i.count++,i.annotationEncoding[t]=r,i.annotationDecoding[r]=e,r}},n=e=>h.xH(u.lzi(e).map((e=>{const t=p.p4(e[0]).map(o);if(u.km_(e)){const r=u.hDy(e),i=u.I$B(r);i&&(t[0]=s({type:"mention",value:i}),r.forEach((e=>{u.ZAl(e)||u.kuv(e)||u.QVC(e)||(t.unshift(s({type:"start",value:e})),t.push(s({type:"end",value:e})))})))}else if(u.YrK(e)){const r=u.hDy(e),i=u.Ap(r);if(i){t[0]=s({type:"equation",value:i});for(const e of r)u.ZAl(e)||u.kuv(e)||u.QVC(e)||(t.unshift(s({type:"start",value:e})),t.push(s({type:"end",value:e})))}}else if(u.AJd(e)){u.hDy(e).forEach((e=>{t.unshift(s({type:"start",value:e})),t.push(s({type:"end",value:e}))}))}return t}))).join("");if(i.count>65535)throw new Error("This string has way too many different characters.");const a=function(e,t){const r=new(c())({timeout:2,editCost:6}),i=r.main(t,e);return r.cleanupSemantic(i),i}(n(r),n(t)),l=[];let f=[];return a.forEach((e=>{let[t,r]=e;r.split("").forEach((e=>{if(i.decoding[e]){const r=i.decoding[e];t===g.added?l.push([r,[...f,["+"]]]):t===g.removed?l.push([r,[...f,["-"]]]):t===g.same&&l.push([r,f])}else{const r=i.annotationDecoding[e];if(t===g.added)if("mention"===r.type)l.push([u.qyI,[...f,["+"],r.value]]);else if("start"===r.type)f=[...f,r.value];else if("end"===r.type)f=f.filter((e=>!h.Xy(e,r.value)));else if("equation"===r.type){const e=u.xey(r.value),t=u.qZ6(e,[...f,["+"]]);l.push(t)}else(0,m.t1)(r);else if(t===g.removed){if("mention"===r.type)l.push([u.qyI,[...f,["-"],r.value]]);else if("equation"===r.type){const e=u.xey(r.value),t=u.qZ6(e,[...f,["-"]]);l.push(t)}}else if(t===g.same)if("mention"===r.type)l.push([u.qyI,[...f,r.value]]);else if("start"===r.type)f=[...f,r.value];else if("end"===r.type)f=f.filter((e=>!h.Xy(e,r.value)));else if("equation"===r.type){const e=u.xey(r.value),t=u.qZ6(e,f);l.push(t)}else(0,m.t1)(r)}}))})),u.Zxt(l)}var v=r(32566),b=r(21202),y=r(26350),x=r(14200),k=r(85893);function C(e){const t=e.propertySchema.type;switch(t){case"title":case"text":return(0,k.jsx)(j,{...e});case"relation":return(0,k.jsx)(_,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"checkbox":case"number":case"person":case"file":case"url":case"email":case"phone_number":case"created_time":case"created_by":case"last_edited_time":case"last_edited_by":case"last_visited_time":case"formula":case"rollup":case"select":case"multi_select":case"date":case"button":case"status":case"auto_increment_id":case"location":case"verification":return(0,k.jsx)(S,{...e});default:(0,m.t1)(t)}}function j(e){const t={value:f({before:e.beforeValue.value,after:e.afterValue.value}),spaceId:e.beforeValue.spaceId};return(0,k.jsx)(x.Z,{value:t,propertySchema:e.propertySchema,rootStore:e.rootStore})}function _(e){window.__c={n:"RelationPropertyDiff"};const{beforeValue:t,afterValue:r,propertySchema:o,rootStore:a}=e,d=(0,i.VK)((()=>{const e=(0,s.rq)(t.value),i=(0,s.rq)(r.value),d=(0,n.N)(e,i,(e=>`${e.id}${e.table}`)),l=new Set(s.j$({relationValue:d.created,getRecordModel:a.getRecordModel,propertySchema:o})),c=new Set(s.j$({relationValue:d.deleted,getRecordModel:a.getRecordModel,propertySchema:o})),p=[...l,...c];return p.flatMap(((e,t)=>{const r=y.G.createChildStore(a,{table:b.iU,id:e.id}).getPropertyValue("title")||[],i=[],o=u.lzi(r);for(const s of o)if(u.QJH(s)){const t=l.has(e)?"+":"-",r=[s[0],[[t]]];i.push(r)}else i.push(s);return t<p.length-1&&i.push(u.V3y("\n")),i}))}),[t,r,o,a]);return(0,k.jsx)(x.Z,{value:{value:d,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:a})}function S(e){window.__c={n:"ArrowPropertyDiff"};const t=(0,o.yK)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center"}})),[]);return(0,k.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,k.jsx)(x.Z,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),(0,k.jsx)(M,{}),(0,k.jsx)(x.Z,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function M(){window.__c={n:"Arrow"};const e=(0,o.yK)((e=>({container:{padding:"0px 8px"},icon:{width:15,height:15,fill:e.mediumIconColor}})),[]);return(0,k.jsx)("div",{style:e.container,children:(0,v.k)(e.icon)})}},24764:(e,t,r)=>{r.d(t,{t0:()=>C,Zk:()=>x,CA:()=>y});r(67294);var i=r(45433),o=r(98519),s=r(97880),n=r(31412),a=r(62967),d=r(57883),l=r(50906),c=r(9953),p=r(39699);function h(e){const{environment:t,key:r,selectedKey:i,following:o,followSettings:s,navigableBlockId:n,userId:a,spaceId:h,from:u}=e;p.createAndCommit({userAction:"UpdateSidebarFollowControl.setFollowing",environment:e.environment,canUndo:!1,perform:t=>{c.Ue({environment:e.environment,table:d.t0,args:{following:o,followSettings:s,navigableBlockId:n,userId:a,spaceId:h},inMemoryRecordCache:e.environment.defaultRecordCache.inMemoryRecordCache,transaction:t})}}),o?l.RJe(t,{from:"page_updates"}):l.ubm(t,{from:"page_updates"}),i!==r&&l.kLN(t,{from:u,navigableBlockId:n,oldSetting:i,newSetting:r})}var u=r(64964),m=r(93405),g=r(64369),f=r(80444),v=r(57538),b=r(85893);function y(e){const{followSettingsKey:t,environment:r,blockStore:o,from:s}=e,a=k({key:"none",selectedKey:t,title:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.repliesAndMentions.label",defaultMessage:"Replies and @mentions"}),environment:r,blockStore:o,from:s}),d=k({key:"comments",selectedKey:t,title:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.allComments.label",defaultMessage:"All comments"}),environment:r,blockStore:o,from:s}),l=k({key:"all",selectedKey:t,title:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.allUpdates.label",defaultMessage:"All updates"}),caption:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.simpleAllUpdates.caption",defaultMessage:"All comments and property changes"}),environment:r,blockStore:o,from:s}),c=o.getAssociatedCollectionStore();if(!c)return[d,a];const p=c.getDatabaseType();if(p===i.iS){return[l,k({key:"important",selectedKey:t,title:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesTasks.label",defaultMessage:"Important updates"}),caption:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesTasks.caption",defaultMessage:"All comments and changes to Status, Assignee, or Due Date"}),environment:r,blockStore:o,from:s}),a]}if(p===i.wW){return[l,k({key:"important",selectedKey:t,title:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesProjects.label",defaultMessage:"Important updates"}),caption:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.importantUpdatesProjects.caption",defaultMessage:"All comments and changes to Status or Date"}),environment:r,blockStore:o,from:s}),a]}return[l,k({key:"comments",selectedKey:t,title:(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.onlyCommentsAllComments.label",defaultMessage:"All comments"}),environment:r,blockStore:o,from:s}),a]}function x(e){const{followSettingsKey:t,environment:r,blockStore:i,from:o}=e;return[k({key:"important",selectedKey:t,title:(0,b.jsx)(n.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.allComments.label",defaultMessage:"All comments"}),caption:(0,b.jsx)(n.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.allComments.caption",defaultMessage:"Notified of all comments and @mentions"}),environment:r,blockStore:i,from:o}),k({key:"none",selectedKey:t,title:(0,b.jsx)(n.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.mentionsAndReplies.label",defaultMessage:"Replies and @mentions"}),caption:(0,b.jsx)(n.FormattedMessage,{id:"inAppNotificationsFollowingOptionsHelpers.mentionsAndReplies.caption",defaultMessage:"Notified of comment replies and @mentions"}),environment:r,blockStore:i,from:o})]}function k(e){const{key:t,title:r,caption:i,selectedKey:s,environment:n,blockStore:d,from:l}=e,c=C({key:t,userSelectedKey:s}),p={icon:{width:14,height:14},rightWrapper:i?{alignSelf:"flex-start",paddingTop:2}:{}};return{action:(0,a.cN)({key:t,displayName:void 0,analyticsName:t,validators:[],closeParentMenu:!0,action:()=>{const{currentUserRootStore:e}=f.default.state;if(e){const{following:r,followSettings:i}=(0,v.Z)(t),o=e.id,a=d.id,c=d.getSpaceId();h({environment:n,following:r,followSettings:i,navigableBlockId:a,spaceId:c,userId:o,from:l,key:t,selectedKey:s}),"inbox"!==l&&"more_menu"!==l||u.d4({item:{label:j(t)},undoFunc:()=>{const{following:e,followSettings:r}=(0,v.Z)(s);h({environment:n,following:e,followSettings:r,navigableBlockId:a,spaceId:c,userId:o,from:l,key:t,selectedKey:s})}})}},render:e=>(0,b.jsx)(m.Z,{...e,title:(0,b.jsx)(g.Z,{children:r}),caption:i,shouldWrapCaption:!0,right:c?(0,o.k)(p.icon):(0,b.jsx)("div",{style:p.icon}),rightStyle:p.right})}),title:r,isSelectedOption:c}}function C(e){const{key:t,userSelectedKey:r}=e;return"important"===r||"comments"===r?"important"===t||"comments"===t:t===r}function j(e){switch(e){case"none":return(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.subscribedRepliesAndMentionsSuccess.snackbarMessage",defaultMessage:"Subscribed to replies and @mentions"});case"comments":return(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.subscribedAllCommentsSuccess.snackbarMessage",defaultMessage:"Subscribed to all comments"});case"important":return(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.subscribedImportantUpdatesSuccess.snackbarMessage",defaultMessage:"Subscribed to important updates"});case"all":return(0,b.jsx)(n.FormattedMessage,{id:"GetNotifiedDropdown.subscribedAllUpdatesSuccess.snackbarMessage",defaultMessage:"Subscribed to all updates"});default:(0,s.t1)(e)}}},46096:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(49085);class o extends i.default{getInitialState(){return{open:!1}}}const s=new o},52867:(e,t,r)=>{r.d(t,{H:()=>s});r(67294);var i=r(45238),o=r(85893);const s=(0,i.I)("archive",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M4.083 14.585h7.499c1.347 0 2.064-.697 2.064-2.037V5.739c.664-.11 1.019-.608 1.019-1.34V3.36c0-.834-.458-1.36-1.299-1.36H2.3C1.499 2 1 2.526 1 3.36V4.4c0 .73.355 1.23 1.019 1.34v6.808c0 1.347.717 2.037 2.064 2.037zM2.579 4.728c-.342 0-.478-.144-.478-.486v-.724c0-.342.136-.486.478-.486h10.514c.342 0 .472.144.472.486v.724c0 .342-.13.486-.472.486H2.579zm1.49 8.825c-.615 0-.95-.335-.95-.95V5.76h9.427v6.842c0 .616-.342.95-.95.95H4.069zM5.58 8.515h4.512c.287 0 .492-.199.492-.5v-.218c0-.3-.205-.492-.492-.492H5.58c-.287 0-.485.191-.485.492v.219c0 .3.198.499.485.499z"})})},90334:(e,t,r)=>{r.d(t,{O:()=>s});r(67294);var i=r(45238),o=r(85893);const s=(0,i.I)("ellipsis",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.887 9.014c.273 0 .52-.064.738-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.41 1.41 0 00-1.04-.417c-.264 0-.505.066-.724.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.307.394.526.526.219.128.46.192.725.192zm5.113 0a1.412 1.412 0 001.244-.718c.132-.219.198-.46.198-.725 0-.405-.14-.747-.423-1.025A1.386 1.386 0 008 6.129c-.264 0-.506.066-.725.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.308.394.526.526.22.128.46.192.725.192zm5.106 0c.265 0 .506-.064.725-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.394 1.394 0 00-1.026-.417 1.474 1.474 0 00-1.265.718c-.127.218-.19.46-.19.724 0 .265.063.506.19.725.133.219.308.394.527.526.223.128.47.192.738.192z"})})},30134:(e,t,r)=>{r.d(t,{c:()=>s});r(67294);var i=r(45238),o=r(85893);const s=(0,i.I)("export",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.0625 15.8174C2.32422 15.8174 1.76595 15.6305 1.3877 15.2568C1.00944 14.8831 0.820312 14.3294 0.820312 13.5957V6.86914C0.820312 6.13997 1.00944 5.58854 1.3877 5.21484C1.76595 4.83659 2.32422 4.64746 3.0625 4.64746H4.92871V5.99414H3.14453C2.82552 5.99414 2.58171 6.07845 2.41309 6.24707C2.24902 6.41113 2.16699 6.65951 2.16699 6.99219V13.4795C2.16699 13.8122 2.24902 14.0605 2.41309 14.2246C2.58171 14.3932 2.82552 14.4775 3.14453 14.4775H10.8486C11.1631 14.4775 11.4046 14.3932 11.5732 14.2246C11.7464 14.0605 11.833 13.8122 11.833 13.4795V6.99219C11.833 6.65951 11.7464 6.41113 11.5732 6.24707C11.4046 6.07845 11.1631 5.99414 10.8486 5.99414H9.07812V4.64746H10.9375C11.6758 4.64746 12.234 4.83659 12.6123 5.21484C12.9906 5.58854 13.1797 6.13997 13.1797 6.86914V13.5957C13.1797 14.3249 12.9906 14.8763 12.6123 15.25C12.234 15.6283 11.6758 15.8174 10.9375 15.8174H3.0625ZM7 11.3877C6.91797 11.3877 6.83822 11.374 6.76074 11.3467C6.68327 11.3148 6.60124 11.2578 6.51465 11.1758L4.21777 8.96094C4.10384 8.84245 4.04688 8.70801 4.04688 8.55762C4.04688 8.39811 4.09928 8.26823 4.2041 8.16797C4.31348 8.06771 4.44792 8.01758 4.60742 8.01758C4.7806 8.01758 4.92188 8.0791 5.03125 8.20215L5.98828 9.2207L6.43262 9.71973L6.36426 8.70117V1.61914C6.36426 1.45052 6.42578 1.30469 6.54883 1.18164C6.67643 1.05859 6.82682 0.99707 7 0.99707C7.17318 0.99707 7.32129 1.05859 7.44434 1.18164C7.57194 1.30469 7.63574 1.45052 7.63574 1.61914V8.70117L7.56738 9.71973L8.00488 9.2207L8.96191 8.20215C9.07585 8.0791 9.21712 8.01758 9.38574 8.01758C9.54069 8.01758 9.67285 8.06771 9.78223 8.16797C9.89616 8.26823 9.95312 8.39811 9.95312 8.55762C9.95312 8.70801 9.89388 8.84245 9.77539 8.96094L7.47852 11.1758C7.39648 11.2578 7.31673 11.3148 7.23926 11.3467C7.16178 11.374 7.08203 11.3877 7 11.3877Z"})})},82356:(e,t,r)=>{r.d(t,{l:()=>s});r(67294);var i=r(45238),o=r(85893);const s=(0,i.I)("import",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},5686:(e,t,r)=>{r.d(t,{J:()=>s});r(67294);var i=r(45238),o=r(85893);const s=(0,i.I)("mailOpen",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.88965 15.9277C2.17415 15.9277 1.63639 15.75 1.27637 15.3945C0.920898 15.0436 0.743164 14.515 0.743164 13.8086V7.00684C0.743164 6.76074 0.756836 6.54427 0.78418 6.35742C0.816081 6.17057 0.863932 6.00423 0.927734 5.8584C0.996094 5.71257 1.08496 5.57812 1.19434 5.45508C1.30371 5.32747 1.43815 5.19987 1.59766 5.07227L6.88184 0.916016C7.12793 0.715495 7.36035 0.558268 7.5791 0.444336C7.80241 0.325846 8.03939 0.266602 8.29004 0.266602C8.54069 0.266602 8.77539 0.325846 8.99414 0.444336C9.21745 0.558268 9.45215 0.715495 9.69824 0.916016L14.9824 5.07227C15.1419 5.19987 15.2764 5.32747 15.3857 5.45508C15.4951 5.57812 15.5817 5.71257 15.6455 5.8584C15.7139 6.00423 15.7617 6.17057 15.7891 6.35742C15.821 6.54427 15.8369 6.76074 15.8369 7.00684V13.8086C15.8369 14.515 15.6569 15.0436 15.2969 15.3945C14.9414 15.75 14.4059 15.9277 13.6904 15.9277H2.88965ZM2.84863 14.8818H13.7314C14.0687 14.8818 14.3285 14.7907 14.5107 14.6084C14.6976 14.4307 14.791 14.1641 14.791 13.8086V6.82227C14.791 6.6582 14.7751 6.51921 14.7432 6.40527C14.7113 6.29134 14.6611 6.19108 14.5928 6.10449C14.529 6.01335 14.4424 5.92448 14.333 5.83789L9.11035 1.76367C8.94173 1.63607 8.80046 1.53809 8.68652 1.46973C8.57259 1.39681 8.44043 1.36035 8.29004 1.36035C8.13965 1.36035 8.00749 1.39681 7.89355 1.46973C7.77962 1.53809 7.63835 1.63607 7.46973 1.76367L2.24707 5.83789C2.1377 5.92448 2.04883 6.01335 1.98047 6.10449C1.91667 6.19108 1.86882 6.29134 1.83691 6.40527C1.80501 6.51921 1.78906 6.6582 1.78906 6.82227V13.8086C1.78906 14.1641 1.88021 14.4307 2.0625 14.6084C2.24479 14.7907 2.50684 14.8818 2.84863 14.8818ZM1.51562 14.6357L6.88184 9.37207C7.11882 9.13509 7.35352 8.96419 7.58594 8.85938C7.82292 8.75456 8.06217 8.70215 8.30371 8.70215C8.54525 8.70215 8.78223 8.75456 9.01465 8.85938C9.24707 8.96419 9.48405 9.13509 9.72559 9.37207L15.085 14.6357L14.374 15.3467L9.13086 10.1787C8.98047 10.0283 8.83691 9.92122 8.7002 9.85742C8.56803 9.78906 8.43587 9.75488 8.30371 9.75488C8.16699 9.75488 8.03027 9.78906 7.89355 9.85742C7.76139 9.92122 7.6224 10.0283 7.47656 10.1787L2.2334 15.3467L1.51562 14.6357ZM5.81543 10.6094L1.5498 6.3916L2.26074 5.68066L6.5332 9.90527L5.81543 10.6094ZM10.0742 9.90527L14.3398 5.68066L15.0508 6.3916L10.7852 10.6094L10.0742 9.90527Z"})})},70753:(e,t,r)=>{r.d(t,{F:()=>s});r(67294);var i=r(45238),o=r(85893);const s=(0,i.I)("notificationRead",{viewBox:"0 0 18 18",svg:(0,o.jsx)("path",{d:"M3.066 17.998h11.846c2.05 0 3.066-1.016 3.066-3.027V3.047c0-2.012-1.015-3.027-3.066-3.027H3.066C1.026.02 0 1.025 0 3.047V14.97c0 2.021 1.025 3.027 3.066 3.027Zm.02-1.572c-.977 0-1.514-.518-1.514-1.533V3.125c0-1.016.537-1.533 1.514-1.533h11.807c.966 0 1.513.517 1.513 1.533v11.768c0 1.015-.547 1.533-1.513 1.533Zm4.844-2.793c.322 0 .595-.156.79-.46l4.464-7.02c.117-.196.234-.41.234-.626 0-.44-.39-.722-.791-.722-.254 0-.498.156-.684.44l-4.052 6.503-1.924-2.49c-.235-.313-.45-.39-.713-.39a.759.759 0 0 0-.762.77c0 .216.088.42.225.606l2.383 2.93c.244.322.507.459.83.459Z"})})},61248:(e,t,r)=>{r.d(t,{F:()=>s});r(67294);var i=r(45238),o=r(85893);const s=(0,i.I)("notificationUnread",{viewBox:"0 0 20 21.5",svg:(0,o.jsx)("path",{d:"M0 14.521c0 1.67.146 3.057 1.143 4.053.996.996 2.402 1.153 4.062 1.153h7.588c1.67 0 3.076-.157 4.072-1.153s1.143-2.383 1.143-4.053v-6.65c-.43.147-.899.225-1.387.205-.068.02-.117.02-.185.03v6.68c0 1.015-.127 2.05-.723 2.646-.586.586-1.64.722-2.647.722H4.941c-1.005 0-2.06-.136-2.656-.722-.586-.596-.713-1.631-.713-2.647V6.768c0-1.026.127-2.08.713-2.666.596-.596 1.66-.723 2.686-.723h6.738c0-.068.01-.127.02-.186-.02-.488.058-.957.205-1.386H5.186c-1.641 0-3.047.156-4.043 1.152C.146 3.955 0 5.352 0 6.982Zm16.426-7.744c1.846 0 3.379-1.533 3.379-3.388C19.805 1.533 18.27 0 16.425 0a3.403 3.403 0 0 0-3.388 3.389 3.403 3.403 0 0 0 3.389 3.388Z"})})},8504:(e,t,r)=>{r.d(t,{J:()=>s});r(67294);var i=r(45238),o=r(85893);const s=(0,i.I)("versionHistoryThick",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M0 7C0 3.136 3.129 0 6.993 0C10.864 0 14 3.136 14 7C14 10.864 10.864 14 6.993 14C3.129 14 0 10.864 0 7ZM1.4 7C1.4 10.094 3.906 12.6 7 12.6C10.094 12.6 12.6 10.094 12.6 7C12.6 3.906 10.094 1.4 7 1.4C3.906 1.4 1.4 3.906 1.4 7ZM6.3 3.5H7.35V7.175L10.5 9.044L9.975 9.905L6.3 7.7V3.5Z"})})}}]);