"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8324],{7476:(e,t,o)=>{o.d(t,{t:()=>r});var i=o(80444),n=o(56681),s=o(34047);function r(e){var t;let{discussionStore:o,commentStore:r}=e;if(!r.isDefined())return!1;const a=null===(t=i.default.state.currentUserStore)||void 0===t?void 0:t.id;const l=n.Z.state[o.id];if(r.getCreatedById()===a)return!1;const d=function(){if(!o.isDefined()||!a)return 0;const{pageVisitStore:e}=i.default.state,{lastViewTime:t,lastExitTime:n}=e.state;return n||t}();if(void 0===d)return!1;const c=(0,s.NI)(o).filter((e=>e.getCreatedById()===a)).reverse()[0],u=r.getCreatedTime();return!u||!(c&&u<c.getCreatedTime())&&(!(l&&u<l)&&u>d)}},19446:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Fe});var i=o(67294),n=o(1302),s=o(480),r=o(6740),a=o(97511),l=o(33125),d=o(86628),c=o(24405),u=o(59194),m=o(69651),p=o(27006),g=o(21202),h=o(82990),f=o(31412),x=o(54564),v=o(47307),S=o(9953),b=o(61045),C=o(98104),y=o(39699),w=o(74136),j=o(26388),M=o(64369),k=o(42402),I=o(67706),L=o(65085),R=o(12740),D=o(65187),T=o(11368),Z=o(4708),B=o(65598),_=o(16402),F=o(89574),P=o(61766),V=o(96049),A=o(26350),E=o(17707),K=o(95306),N=o(34047),O=o(82994),z=(o(57658),o(15145)),U=o(41432),W=o(37652),H=o(56666),$=o(27714),q=o(25651),X=o(40350),G=o(18101),J=o(58167),Q=o(98519),Y=o(37612),ee=o(72126),te=o(19889),oe=o(97880),ie=o(14871),ne=o(52275),se=o(31945),re=o(73063),ae=o(78140),le=o(32163),de=o(72495),ce=o(83182),ue=o(95477),me=o(43250),pe=o(87279),ge=o(18514),he=o(80444),fe=o(90895),xe=o(85893);function ve(e){window.__c={n:"CommentActionGroup"};const{discussionLocation:t}=e,o=(0,f.useIntl)(),n=(0,s.O7)(),r=n.device,l=(0,i.useRef)(null),c=(0,a.l)(),u=(0,d.VK)((()=>Boolean(e.discussionStore.getResolved())),[e.discussionStore]),m=(0,d.VK)((()=>e.store.isDefined()),[e.store]),g=(0,d.VK)((()=>{var e;return null===(e=he.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),h=(0,d.VK)((()=>{const t=e.store.getCreatedById();return e.store.getCreatedByTable()===te.KJ&&g===t}),[g,e.store]),v=(0,d.VK)((()=>{var e;const t=null===(e=he.default.state.currentSpaceStore)||void 0===e?void 0:e.getRole();return t&&p.zz(t)}),[]),S=(0,d.VK)((()=>e.blockStore.getRole()),[e.blockStore]),b=(0,d.VK)((()=>{var e;return null==c||null===(e=c.publicEditModeStore.state)||void 0===e?void 0:e.permission}),[null==c?void 0:c.publicEditModeStore]),C="comment_only"===S||"comment"===b;if(!m||!g)return null;const w=()=>{y.createAndCommit({userAction:"Comment.handleReopen",environment:n,perform:t=>{E.bh({environment:n,commentStore:e.store,discussionStore:e.discussionStore,transaction:t,discussionLocation:e.discussionLocation})}})},j=t=>{y.createAndCommit({userAction:"Comment.handleResolve",environment:n,perform:t=>{E.DX({environment:n,commentStore:e.store,discussionStore:e.discussionStore,transaction:t,discussionLocation:e.discussionLocation})}}),x.Xv(),null==t||t.stopPropagation()},M=()=>{var t,o;const i=e.store.getParentStore();if(!i||null==i||!i.isDefined())return null;let s=i.getParentStore();if(null===(t=s)||void 0===t||!t.isDefined())return null;var r;s.getType()===U.Ti.tableRow&&(s=null===(r=s)||void 0===r?void 0:r.getParentBlockStore());if(null===(o=s)||void 0===o||!o.isDefined())return null;const a=s.getModel().getRenderUrl({baseUrl:ue.default.domainBaseUrl,getRecordModel:e.store.getRecordModel,discussionId:i.id,pageVisitSource:z.tY.CopyLink});ie.RD({environment:n,stringValue:a,copiedMessage:ie.tq.copiedLinkToClipboard})};if(!n.currentUser.isLoggedIn())return null;const k=S&&p.rz(S);if(k)return null;const I=e.isFirstComment&&"comment_unfurl"!==t&&!r.isMobile&&!C&&!k,L=[];!r.isMobile||C||k||(u?L.push("reopen"):L.push("resolve")),h&&L.push("edit"),e.isFirstComment&&L.push("copyLink"),(h||v)&&L.push("delete");const R=L.length>0;return R||I||e.canShowReactions?(0,xe.jsx)(se.ZP,{ref:l,popupType:r.isMobile?se.Z4.SlideUp:se.Z4.Popup,buttonPopupStore:e.buttonPopupStore,placementToOrigin:se.pO.Right,stopClickPropagation:!0,renderOrigin:i=>(0,xe.jsx)(Se,{buttonConfig:{resolve:{visible:I,resolved:u,onResolve:j,onReopen:w},react:{visible:e.canShowReactions,onReact:()=>{var i;(0,fe.openEmojiMenuForReaction)(n,o,e.store,(null===(i=l.current)||void 0===i?void 0:i.getAnchor())??null,t,e.handleReaction)}},moreActions:{visible:R}},visible:e.visible,buttonPopupEvents:i,discussionLocation:e.discussionLocation,store:e.store}),render:t=>{let o;o=r.isMobile?{menuType:pe.og.ActionSheet}:{menuType:pe.og.Popup};const i=L.map((t=>"reopen"===t?{key:"reopen",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,W.V)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.reopenDiscussion.button",defaultMessage:"Re-open discussion"})}),action:w}:"resolve"===t?{key:"resolve",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,Q.k)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.resolveDiscussion.button",defaultMessage:"Resolve comments"})}),action:()=>j()}:"edit"===t?{key:"edit",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,q.R)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.editComment.button",defaultMessage:"Edit comment"})}),action:e.handleEditComment}:"delete"===t?{key:"delete",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,Y.y)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.deleteComment.button",defaultMessage:"Delete comment"})}),action:e.handleDeleteComment}:"copyLink"===t?{key:"copyLink",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,$.N)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.copyLinkToDiscussion.button",defaultMessage:"Copy link to discussion"})}),action:M}:void(0,oe.t1)(t)));return(0,xe.jsx)("div",{className:me.G6g,children:(0,xe.jsxs)(ae.Z,{...o,children:[(0,xe.jsx)(le.Z,{type:le.i.Vertical,initialFocus:void 0,onAccept:t.close,sections:ee.oA([i.length&&{key:0,render:e=>(0,xe.jsx)(de.Z,{...e}),items:i}])}),!r.isMobile&&(0,xe.jsx)(de.Z,{topBorder:!0,disableDesktopPadding:!1,children:(0,xe.jsx)(ce.Z,{title:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Learn about comments",id:"comments.learn"}),href:(0,ge.UY)("guides.comments"),analyticsFrom:"comments"})})]})})}}):null}function Se(e){window.__c={n:"ActionGroupOrigin"};const{buttonPopupEvents:t,discussionLocation:o}=e,{resolved:i,onResolve:n,onReopen:r}=e.buttonConfig.resolve,a=(0,s.O7)().device,l=(0,c.yK)((t=>({addIcon:{width:15,fill:t.mediumIconColor},container:{display:"flex",boxShadow:t.lightBoxShadow,position:"absolute",flexShrink:0,padding:"2px",backgroundColor:t.buttonGroupBackground,...a.isMobile?{borderRadius:4,marginTop:4,right:16}:{marginRight:"margin_comments"===o?0:8,marginTop:"updates_sidebar"===e.discussionLocation?6:0,right:"margin_comments"===o?12:16,top:"margin_comments"===o?6:0,opacity:e.visible?1:0,gap:1,borderRadius:4,transition:"opacity 100ms ease-out",zIndex:1}}})),[a.isMobile,o,e.discussionLocation,e.visible]);return(0,xe.jsxs)("div",{style:l.container,children:[e.buttonConfig.react.visible&&(0,xe.jsx)(j.Z,{renderTooltip:()=>(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Add reaction",id:"comment.actions.addReaction.label"}),render:t=>(0,xe.jsx)(re.Z,{hasBackground:!1,showShadow:!1,icon:()=>(0,X.V)(l.addIcon),onClick:e.buttonConfig.react.onReact,style:{height:22,width:22,flex:"0 0 auto"},...t})}),e.buttonConfig.resolve.visible&&(0,xe.jsx)(j.Z,{renderTooltip:()=>i?(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Re-open",id:"comment.actions.reopenButton.label"}):(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Resolve",id:"comment.actions.resolveButton.label"}),render:e=>(0,xe.jsx)(re.Z,{hasBackground:!1,showShadow:!1,icon:i?G.b:J.i,onClick:i?r:n,style:{height:22,width:22,flex:"0 0 auto"},...e})}),e.buttonConfig.moreActions.visible&&(0,xe.jsx)(j.Z,{renderTooltip:()=>(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"More actions",id:"comment.actions.moreActions.label"}),render:e=>(0,xe.jsx)(re.Z,{...t,...e,hasBackground:!1,showShadow:!1,icon:H.o,style:{height:22,width:22,flex:"0 0 auto"}})})]})}var be=o(70775),Ce=o(95538),ye=o(70203),we=o(31781),je=o(53471),Me=o(68785),ke=o(97496),Ie=o(69721),Le=o(79954),Re=o(20830);function De(e){if("image"!==e.getType())return!1;const t=ye.QaF(e.getPropertyValue("source"));return void 0!==t&&!(0,Ce.y_)(t,".jfif")&&!(0,Ce.y_)(t,".webp")}function Te(e){window.__c={n:"CommentContent"};const t=e.discussionFormat===N.O2.Sidebar?we.vW.SidebarComment:we.vW.PageComment,{filmStripFiles:o,embedBlockStores:i}=(0,d.VK)((()=>{if(e.collapsed)return{filmStripFiles:je.nQ(e.contentStores),embedBlockStores:[]};if(e.discussionFormat===N.O2.Page&&e.contentStores.filter((e=>De(e))).length>1){const[t,o]=ee.uK(e.contentStores,(e=>De(e)));return{filmStripFiles:je.nQ(t),embedBlockStores:o}}return{filmStripFiles:[],embedBlockStores:e.contentStores}}),[e.contentStores,e.collapsed,e.discussionFormat]),n=i.length>0&&i.map((o=>(0,xe.jsx)(Le.Z,{store:o,analyticsName:"comment_media",actionSectionGroupKey:"comment_media",canTriggerContextMenu:!0,style:{marginTop:8},children:ke.Z.hasRendererForStore(o)?(0,xe.jsx)(ke.Z,{disabled:!1,disableDrag:!0,store:o,disableResizers:!0,preserveScale:!0,inlineContentStyle:{height:"auto",width:"auto",maxHeight:240,maxWidth:"100%",cursor:"zoom-in"},blockLocation:t,iconSvg:()=>(0,xe.jsx)(Me.Z,{style:{marginRight:10}}),onRemoveBlockFromComment:e.onRemoveContent,children:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Uploading file...",id:"comment.embeddedFile.uploadInProgressMessage"})}):(0,xe.jsx)(Ie.Z,{disabled:!1,store:o})},o.id))),s=o.length>0&&(0,xe.jsx)(Re.Z,{files:o,disableRemove:!0});return(0,xe.jsxs)(xe.Fragment,{children:[s,n]})}function Ze(){window.__c={n:"CommentNewBar"};const e=(0,c.yK)((e=>({newBarLine:{height:"0px",borderBottom:`1px solid ${e.darkDividerColor}`,width:"100%",marginLeft:0},newBarWrapper:{color:e.mediumTextColor,textTransform:"uppercase",fontSize:10.5,letterSpacing:.5,fontWeight:h.Z.fontWeight.semibold,display:"flex",alignItems:"center",marginRight:16,marginLeft:16,marginTop:10,marginBottom:10},newBarText:{padding:"0 10px"}})),[]);return(0,xe.jsxs)("div",{style:e.newBarWrapper,children:[(0,xe.jsx)("div",{style:e.newBarLine}),(0,xe.jsx)("div",{style:e.newBarText,children:(0,xe.jsx)(f.FormattedMessage,{id:"comment.newIndicator.label",defaultMessage:"New comments"})}),(0,xe.jsx)("div",{style:e.newBarLine})]})}var Be=o(55541);function _e(e){switch(e){case"margin_comments":return 0;case"updates_sidebar":return 35;case"comment_unfurl":return 29;default:return 32}}const Fe=function(e){window.__c={n:"Comment"};const{store:t,discussionContext:o,maxLines:z,discussionLocation:U}=e,W=(0,s.O7)(),H=(0,f.useIntl)(),[$,q]=(0,i.useState)(!1),[X,G]=(0,i.useState)(!1),[J,Q]=(0,i.useState)(!1),Y=_e(U),ee=(0,d.VK)((()=>e.store.isDefined()?new O.Z(W,e.store.getSpaceId()):void 0),[W,e.store]),te=(0,d.VK)((()=>B.le(e.store).filter((e=>(0,A.Vh)(e,{table:g.iU,id:e.id},"alive").getValue()))),[e.store]),oe=(0,d.VK)((()=>e.discussionStore.getResolved()),[e.discussionStore]),ie=(0,d.VK)((()=>null==ee?void 0:ee.state.files),[ee]),ne=(0,d.VK)((()=>null==ee?void 0:ee.state.textStore),[ee]),se=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&G(!0)}),[]),re=(0,i.useCallback)((()=>{G(!1)}),[]),ae=(0,i.useCallback)((()=>{V.Z.state||Q(!0)}),[]),le=(0,i.useCallback)((()=>{Q(!1)}),[]),de=(0,a.l)(),ce=(0,d.qz)(void 0,P.Z),ue=(0,d.VK)((()=>ce.state.open),[ce]),me=(0,d.VK)((()=>{const t=e.discussionStore.getComments();return Boolean(t&&t[0]===e.store.id)}),[e.discussionStore,e.store.id]),pe=(0,d.VK)((()=>{var t;const o=e.blockStore.getRole(),i=me&&"comment_unfurl"!==U,n=o&&p.rz(o),{device:s}=W,r="comment_only"===o||de&&"comment"===(null===(t=de.publicEditModeStore.state)||void 0===t?void 0:t.permission),a=i&&!s.isMobile&&!r&&!n;return J||X||e.hoveringDiscussion&&i||ue||s.isMobile||e.showResolveButtonByDefaultIfPossible&&a}),[e.blockStore,e.hoveringDiscussion,e.showResolveButtonByDefaultIfPossible,me,U,W,de,J,X,ue]),ge=(0,i.useContext)(T.Ue),he=(0,d.VK)((()=>{const e=t.getCreatedByPointer();return e?{createdByPointer:e,lastEditedTime:t.getLastEditedTime(),createdTime:t.getCreatedTime(),text:t.getText(),reactions:t.getUserVisibleReactions()}:null}),[t]),Se=(0,d.VK)((()=>{if(!he)return null;const e=A.t1.createChildStore(t,he.createdByPointer);return{displayName:e.getDisplayName(H),store:e}}),[he,H,t]),Ce=(0,d.VK)((()=>(0,Z.En)()),[]),ye=(0,i.useCallback)((()=>{y.createAndCommit({userAction:"Comment.deleteComment",environment:W,perform:t=>{E.YF({environment:W,commentStore:e.store,transaction:t,discussionLocation:U})},skipUpdatingEditedMetadata:!0})}),[W,e.store,U]),we=(0,i.useCallback)((async()=>{await v.confirmUserAction({message:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Would you like to delete this comment?",id:"comment.confirmDialog.deleteComment.prompt"}),acceptLabel:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Delete",id:"comment.confirmDialog.deleteComment.deleteButton.label"})})&&(ye(),x.Xv(),K.Cd(W))}),[ye,W]),je=(0,i.useCallback)((async t=>{const o=B.zP(e.store).getValue(),i=B.le(e.store).filter((e=>e.id!==t.id)),n=o&&o.length>0,s=0===i.length;!n&&s?(await we(),q(!1)):y.createAndCommit({userAction:"Comment.handleRemoveFileFromActions",environment:W,perform:o=>{E.Zo({commentStore:e.store,fileBlocks:[t],transaction:o})}})}),[W,we,e.store]),Me=(0,i.useCallback)((()=>{De.current&&b.bx({element:De.current,scrollers:{verticalScroller:null==ge?void 0:ge.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[ge]),ke=(0,i.useCallback)((async()=>{if(!ee)return;const t=B.zP(e.store).getValue()||[],o=ee.state.textStore;y.createAndCommit({userAction:"Comment.handleEditComment",environment:W,perform:e=>{S.sO({store:o,value:t,transaction:e})}}),q(!0),await n.default.afterNextFlush(),await n.default.afterNextFlush(),C.NX({store:o})}),[ee,W,e.store]),Ie=(0,i.useCallback)((async()=>{if(!ee)return!1;if(!(0,N.hu)(ee,e.store))return q(!1),!0;if(await v.confirmUserAction({message:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Do you want to discard this edit?",id:"comment.confirmDialog.discardEdit.prompt"}),acceptLabel:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Discard",id:"comment.confirmDialog.discardEdit.discardButton.label"})}))return q(!1),!0;return!1}),[ee,e.store]),Le=(0,i.useCallback)((async()=>{const t=null==ne?void 0:ne.getValue();t&&t.length>0||ie&&ie.length>0?y.createAndCommit({userAction:"Comment.handleSubmitEdit",environment:W,perform:o=>{E.DF({environment:W,store:e.store,text:t||[],transaction:o,discussionLocation:U,files:ie||[]})}}):await we(),q(!1)}),[ie,ne,U,W,we,e.store]),Re=(0,i.useRef)(null),De=(0,i.useRef)(null);(0,l.c)(F.Z,(()=>({edit:ke,handleCancelEdit:Ie,getNode:()=>Re.current,isEditing:()=>$,discussionLocation:U,commentId:e.store.id})),[ke,Ie,$,U,e.store.id]);const Fe=N.Je[U],Pe=null==he?void 0:he.text,Ve=void 0!==Pe&&Pe.length>0,Ae=Ve&&(0,N.p9)(Pe),Ee=function(e){let{discussionLocation:t,isAllEmojis:o,avatarSize:i}=e;const n=_e(t);return(0,c.yK)((e=>({container:{flexGrow:"comment_unfurl"===t?1:void 0},comment:{display:"flex",alignItems:"flex-start",position:"relative",fontSize:14},avatar:{marginRight:10,marginTop:"comment_unfurl"===t?16:2,userSelect:"none",WebkitUserSelect:"none"},userRow:{alignItems:"center",position:"relative",display:"flex",flexDirection:"row",padding:"margin_comments"===t?"12px 16px 0px 12px":"comment_unfurl"===t?"6px 16px 0px 10px":"6px 16px 0px 18px",marginTop:"comment_unfurl"===t?-11:void 0,userSelect:"none",WebkitUserSelect:"none"},placeholder:{height:8,width:81,borderRadius:4,background:e.lightDividerColor},userNameTooltip:{backgroundColor:e.contentBackground},unfurlLessWrapper:{color:e.regularTextColor,fontWeight:h.Z.fontWeight.medium,paddingLeft:n,marginLeft:7},unfurlMoreWrapper:{color:e.lightTextColor,fontWeight:"comment_unfurl"===t?h.Z.fontWeight.medium:void 0},attachIcon:{width:18,height:18,fill:e.mediumIconColor},text:{cursor:"comment_unfurl"!==t?"text":void 0,paddingLeft:n,marginLeft:"comment_unfurl"===t?8:void 0,...o?{fontSize:32}:{}},textWrapper:{padding:"margin_comments"===t?"2px 16px 2px 42px":"0px 16px 3px 16px",marginTop:"comment_unfurl"===t?"-14px":void 0},reactionContainer:{marginLeft:"margin_comments"===t?41:50,marginRight:14,marginTop:4,marginBottom:4},attachmentContainer:{padding:"0px 16px 6px 54px",marginTop:-12,display:"flex",alignItems:"center"},timestamp:{margin:"0 6px",flexBasis:"comment_unfurl"!==t?140:void 0,whiteSpace:"normal",flexGrow:"updates_sidebar"===t||"comment_unfurl"===t?void 0:1,display:"inline"},commentAttachment:{margin:"0px 16px 0px "+("margin_comments"===t?"40px":"50px")},commentAuthorPlaceholder:{marginRight:8,marginTop:"comment_unfurl"===t?14:2,height:i,width:i,borderRadius:20,flexShrink:0}})),[t,n,o,i])}({discussionLocation:U,isAllEmojis:Ae,avatarSize:Fe});if(!ee)return null;if(!he||!Se)return null;const Ke="comment_unfurl"!==U;let Ne,Oe;he.lastEditedTime&&he.lastEditedTime>he.createdTime+100?(Ne=(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"{lastEditedTime} (edited)",id:"comment.editedAtTime.label",values:{lastEditedTime:(0,_.IS)(he.lastEditedTime)}}),Oe=(0,_.uy)(he.lastEditedTime)):(Ne=(0,_.IS)(he.createdTime),Oe=(0,_.uy)(he.createdTime));const ze=(0,xe.jsx)("div",{style:Ee.commentAttachment,children:(0,xe.jsx)(Te,{contentStores:te,onRemoveContent:je,discussionFormat:(0,N.ad)(U),collapsed:e.collapsed})});return(0,xe.jsxs)("div",{ref:Re,onClick:e=>$&&e.stopPropagation(),style:Ee.container,children:[e.showNewBar&&(0,xe.jsx)(Ze,{}),(0,xe.jsxs)("div",{style:Ee.comment,onFocus:se,onBlur:re,onMouseMove:ae,onMouseLeave:le,children:[(0,xe.jsxs)("div",{style:{flexGrow:1,minWidth:0},children:[(0,xe.jsxs)("div",{style:Ee.userRow,children:[(0,xe.jsx)(be.S,{authorStore:null==Se?void 0:Se.store,avatarSize:Fe,avatarStyle:Ee.avatar,placeholderStyle:Ee.commentAuthorPlaceholder}),(0,xe.jsxs)("div",{style:{overflow:"hidden"},children:[(0,xe.jsx)("span",{style:{fontWeight:h.Z.fontWeight.semibold,whiteSpace:"normal"},children:Ce?(0,xe.jsx)(j.Z,{renderTooltip:()=>Se&&Se.store instanceof A.U6?(0,xe.jsx)(R.Z,{targetUserStore:Se.store}):null,placement:j.Z.Placement.Top,alignment:j.Z.Alignment.End,render:e=>(0,xe.jsx)("span",{...e,children:Se.displayName}),style:Ee.userNameTooltip,delayThreshold:600}):Se.displayName||(0,xe.jsx)("span",{style:Ee.placeholder})}),(0,xe.jsx)(M.Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:Ee.timestamp,children:(0,xe.jsx)(I.Z,{text:Ne,tooltipText:Oe,icon:m.C})}),"comment_unfurl"===U&&oe&&(0,xe.jsx)("div",{style:{display:"inline-flex"},children:(0,xe.jsx)(w.Z,{children:(0,xe.jsx)(f.FormattedMessage,{id:"comment.unfurl.resolvedStatus",defaultMessage:"Resolved"})})})]})]}),(0,xe.jsx)("div",{style:{paddingLeft:Y+15,paddingRight:16},children:o}),$?(0,xe.jsx)("div",{style:(0,N.ad)(U)===N.O2.Margin?{marginTop:8}:void 0,children:(0,xe.jsx)(Be.default,{containerStyle:{padding:"margin_comments"===U?"0px 16px 4px 16px":"0px 10px 0px 45px"},showAvatar:!1,parentStore:e.store,blockStore:e.blockStore,onCancel:Ie,onSubmit:Le,discussionInputStore:ee,isEditingExistingComment:!0,isMobileSlideUpMenu:!0,shouldSaveUnsentComments:!1,commentStore:e.store,discussionFormat:(0,N.ad)(U),canDrop:!0})}):(0,xe.jsxs)(xe.Fragment,{children:[Ve&&!$&&(0,xe.jsx)("div",{style:Ee.textWrapper,children:(0,xe.jsx)(L.Z,{onMore:"comment_unfurl"===U?void 0:()=>{},lessElement:"comment_unfurl"===U?(0,xe.jsx)("span",{className:"notion-link",style:Ee.unfurlLessWrapper,children:(0,xe.jsx)(f.FormattedMessage,{id:"comments.showLessLabel",defaultMessage:"show less"})}):void 0,moreElement:(0,xe.jsxs)(k.Z,{disableUnderline:!0,style:Ee.unfurlMoreWrapper,children:["…"," ",(0,xe.jsx)("span",{children:(0,xe.jsx)(f.FormattedMessage,{id:"text.truncated.showMoreLabel",defaultMessage:"more"})})]}),maxLines:e.collapsed?z:void 0,children:(0,xe.jsx)(D.Z,{style:Ee.text,store:B.zP(e.store),disabled:!0,disableDateMentions:!0,disableEquationInteraction:!0})})}),"comment_unfurl"!==U?ze:!Ve&&(0,xe.jsxs)("div",{style:Ee.attachmentContainer,children:[(0,xe.jsx)("div",{style:{marginRight:5},children:(0,u.s)(Ee.attachIcon)}),(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"{numberOfAttachments, plural, one {{numberOfAttachments} attachment} other {{numberOfAttachments} attachments}}",values:{numberOfAttachments:te.length},id:"comment.unfurl.attachments.title"})]})]}),(0,xe.jsx)("div",{ref:De,children:Ke&&he.reactions.length>0&&(0,xe.jsx)("div",{style:Ee.reactionContainer,children:(0,xe.jsx)(fe.default,{parentStore:e.store,discussionLocation:U})})})]}),"comment_unfurl"!==U&&!$&&(0,xe.jsx)(ve,{store:e.store,discussionStore:e.discussionStore,blockStore:e.blockStore,discussionLocation:U,visible:pe,isFirstComment:me,buttonPopupStore:ce,canShowReactions:Ke,handleEditComment:ke,handleDeleteComment:we,handleReaction:Me})]})]})}},70775:(e,t,o)=>{o.d(t,{S:()=>p});o(67294);var i=o(86628),n=o(24405),s=o(54368),r=o(77420),a=o(19889),l=o(97880),d=o(70301),c=o(45653),u=o(83420),m=o(85893);function p(e){let{authorStore:t,avatarSize:o,avatarStyle:p,placeholderStyle:g}=e;window.__c={n:"CommentAuthorAvatar"};const h=(0,n.Fg)(),f=(0,i.VK)((()=>(0,u.TL)(t)),[t]);return f.asActor?f.table===a.KJ?(0,m.jsx)(c.Z,{hasTooltip:!0,userValue:f.asActor,style:p,size:o,avatarShouldShowShadow:!0}):f.table===r.cZ?(0,m.jsx)(d.Z,{botValue:f,size:o,style:p}):f.table===s.y?(0,m.jsx)("div",{style:{...g,background:h.lightDividerColor}}):void(0,l.t1)(f):(0,m.jsx)("div",{style:{...g,background:h.lightDividerColor}})}},43590:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Y});var i=o(67294),n=o(1302),s=o(480),r=o(33125),a=o(86628),l=o(24405),d=o(72126),c=o(70203),u=o(97880),m=o(31412),p=o(47307),g=o(61045),h=o(98104),f=o(39699),x=o(53336),v=o(79954),S=o(93963),b=o(65598),C=o(89574),y=o(46351),w=o(95802),j=o(21853),M=o(34859),k=o(96049),I=o(45589),L=o(17707),R=o(7476),D=o(34047),T=o(82994),Z=o(19446),B=o(13991),_=o(41432),F=o(99036),P=o(8848),V=o(25501),A=o(59753),E=o(82990),K=o(2456),N=o(33929),O=o(85893);const z=new Set([_.Ti.toggle,_.Ti.bulletedList,_.Ti.numberedList,_.Ti.quote,_.Ti.toDo,_.Ti.code,_.Ti.callout,_.Ti.header,_.Ti.subHeader,_.Ti.subSubHeader,_.Ti.tableRow]);function U(e){window.__c={n:"DiscussionContext"};const t=(0,l.Fg)(),o=(0,a.VK)((()=>{var t;return e.store.isDefined()?null===(t=e.store.getParentStore())||void 0===t?void 0:t.getValue():null}),[e.store]),i=(0,a.VK)((()=>e.blockStore.getSpaceId()),[e.blockStore]),n=(0,a.VK)((()=>{if(!e.store.isDefined())return;const t=e.store.getContext();if(!t)return;return c.VP_(t,(t=>!c.xw5(t)||c.h19(t)===e.store.id))}),[e.store]),s=o=>{let{textValue:n,propertySchema:s,discussionParentValue:r}=o;const a=(0,O.jsx)("div",{style:{maxHeight:72,overflow:"hidden",lineHeight:"24px"},children:(0,O.jsx)(K.KX,{value:{value:n,spaceId:i},propertySchema:s,labeled:!1,rootStore:e.blockStore,disableStyleAnnotations:!0,disableDateStyleAnnotations:!0})});if(!r)return a;const l=r.type;return l===_.Ti.code?(0,O.jsx)(V.Z,{title:(0,K.SP)(r),theme:t,style:{marginTop:0,marginBottom:0},children:(0,O.jsx)("span",{style:{fontFamily:E.Z.getCompositeFontFamily(B.SP).mono,fontSize:12,tabSize:2},children:a})}):(0,K.pH)(l)?(0,O.jsx)(V.Z,{title:(0,K.pH)(l),theme:t,style:{marginTop:0,marginBottom:0},children:a}):a};function r(e){if(!n)return null;const o={display:"flex",alignItems:"flex-start",fontSize:14,marginTop:8,marginBottom:8,color:t.mediumTextColor,width:"100%"},i=F.Kc(N.default.getIntl()).title;return i?(0,O.jsx)("div",{style:o,children:(0,O.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,O.jsx)(W,{}),s({textValue:n,discussionParentValue:e,propertySchema:i})]})}):null}if("updates_sidebar"===e.discussionLocation){if(!o)return null;if("text"!==o.type)return(0,O.jsx)("div",{onClick:e.onClick,style:{display:"flex",cursor:A.kk.fromBlock(o).isType(_.Zi)?"text":void 0},children:n&&z.has(o.type)?r(o):(0,O.jsxs)("div",{style:{display:"flex",marginTop:8,marginBottom:8,width:"100%"},children:[(0,O.jsx)(W,{}),(0,O.jsx)(K.ZP,{blockValue:o,rootStore:e.blockStore,blockPreviewLocation:"comments_sidebar"})]})})}return(0,O.jsx)("div",{onClick:e.onClick,style:{cursor:"text"},children:r()})}function W(){return(0,O.jsx)("div",{style:{width:3,borderRadius:4,marginLeft:2,marginRight:8,background:P.DB,flexShrink:0,paddingBottom:2}})}var H=o(7189),$=o(27006),q=o(26388),X=o(55541);const G=i.forwardRef(((e,t)=>{window.__c={n:"DiscussionPopupInput"};const o=(0,s.O7)(),{format:i,role:n,showMoreCommentsButton:r,onMoreCommentsClick:d,inputVisible:c}=e,u=n&&$.rz(n),p=o.currentUser.isLoggedIn(),{device:g,WindowSizeStore:h}=o,f=(0,l.Fg)(),x=(0,a.VK)((()=>({paddingLeft:g.isMobile&&h.getSafePaddingLeftCSS(18)||i===D.O2.Margin&&9||13,paddingRight:g.isMobile&&h.getSafePaddingLeftCSS(14)||i===D.O2.Margin&&12||16})),[h,g.isMobile,i]),v=(0,l.yK)((t=>({container:{paddingTop:e.collapsed?1:4,paddingLeft:x.paddingLeft,paddingRight:x.paddingRight,paddingBottom:(g.isMobile&&i!==D.O2.Page?8:i===D.O2.Sidebar&&14)||0,position:"relative"},moreCommentsWrapper:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:1,left:0,right:0,marginTop:-32,height:30,background:`linear-gradient(to bottom, ${t.contentBackgroundTransparent} 0px, ${t.selectedMarginDiscussionBackground} 30px`},tooltip:{...(0,q.J)(t,!1),cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"}})),[x,g.isMobile,i,e.collapsed]);return(0,O.jsx)(O.Fragment,{children:p&&!u&&(0,O.jsxs)("div",{style:v.container,children:[r&&(0,O.jsx)("div",{style:v.moreCommentsWrapper,children:(0,O.jsxs)("div",{style:v.tooltip,onClick:d,children:[(0,O.jsx)("div",{style:{marginRight:5},children:(0,H.K)({fill:f.regularInvertedTextColor,height:12,width:12})}),(0,O.jsx)(m.FormattedMessage,{defaultMessage:"More",id:"discussion.moreMessageTooltip"})]})}),c&&(0,O.jsx)(X.default,{showAvatar:"margin_comments"!==e.discussionLocation,containerStyle:g.isMobile?void 0:{paddingLeft:5,paddingRight:2},parentStore:e.store,onCancel:e.onCancel,onSubmit:e.onSubmit,discussionInputStore:e.discussionInputStore,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,onEditPreviousComment:e.onEditPreviousComment,inReplyToDiscussionId:e.store.id,discussionFormat:e.format,showCtaButtons:e.showCtaButtons,ref:t,onFileUploaded:e.onFileUploaded})]})})}));var J=o(62385);function Q(e){window.__c={n:"DiscussionShowAllButton"};const t=(0,l.yK)((t=>({newBarLine:{height:"0px",borderBottom:`1px solid ${t.darkDividerColor}`,marginLeft:0,flex:1},moreCommentsWrapper:{color:t.lightTextColor,fontSize:14,paddingLeft:e.insetButton?38:25,flexGrow:1,display:"flex",alignItems:"center"},button:{padding:"14px 12px",margin:"1px 4px",borderRadius:4,fontSize:14,color:t.mediumTextColor,width:"calc(100% - 8px)",justifyContent:"space-between"},buttonHovered:{background:t.focusDiscussionInputBackground}})),[e.insetButton]);return e.count<=0?null:(0,O.jsx)(J.Z,{style:t.button,onClick:e.onClick,hoveredStyle:t.buttonHovered,children:(0,O.jsx)("div",{style:t.moreCommentsWrapper,children:(0,O.jsx)(m.FormattedMessage,{defaultMessage:"{moreCommentsNumber, plural, one {{moreCommentsNumber} more comment} other {{moreCommentsNumber} more comments}}",id:"discussion.showMoreCommentsSidebarButton.label",values:{moreCommentsNumber:e.count}})})},"show")}function Y(e){window.__c={n:"Discussion"};const t=(0,i.useRef)(null),o=(0,s.O7)(),B=(0,a.VK)((()=>b.D4(e.store)),[e.store]),_=(0,a.VK)((()=>B.filter((e=>e.isDefined()))),[B]),F=(0,i.useRef)(e.discussionInputStore||new T.Z(o,e.store.pointer.spaceId)).current,P=(0,a.VK)((()=>(0,D.n9)(F)),[F]),V=(0,a.VK)((()=>e.store.isDefined()),[e.store]),A=(0,a.VK)((()=>e.store.getResolved()),[e.store]),[E,K]=(0,i.useState)(!1),[N,z]=(0,i.useState)(!1),[W,H]=(0,i.useState)(!0),$=(0,a.qz)(void 0,I.Z),q=(0,a.VK)((()=>$.state.clientRect),[$]),X=e.format===D.O2.Sidebar,J=e.format===D.O2.Margin,Y=(0,i.useRef)(null);(0,r.c)(y.Z,(()=>({isSidebarFormat:()=>X,isMarginFormat:()=>J,getStore:()=>e.store,getInputStore:()=>F,getNode:()=>Y.current})),[X,J,e.store,F]);const te=(0,a.VK)((()=>{if(!X)return;return(0,D.NI)(e.store).find((t=>R.t({discussionStore:e.store,commentStore:t})))}),[X,e.store]),oe=(0,i.useRef)(te),ie=(0,a.VK)((()=>{const{showAllRepliesAfterTimestamp:t}=e,o=(()=>{var o;if(N||_.length<=5||"block_menu"===e.discussionLocation||"page_discussion"===e.discussionLocation)return _;const i=[t,null===(o=oe.current)||void 0===o?void 0:o.getCreatedTime(),null==te?void 0:te.getCreatedTime()].filter(u.$K),n=i.length>0?Math.min(...i):void 0;if(n){const e=_.filter((e=>(e.getCreatedTime()||0)>n)),t=_.filter((e=>(e.getCreatedTime()||0)<=n));return t.length<=5?_:[...d.pm(t,2),...e]}return d.pm(_,2)})(),i=new Set(o.map((e=>e.id))),n=_.filter((e=>!i.has(e.id))),s=n.length;return{commentStores:_,commentsToShow:o,commentsToCollapse:n,remainingCommentCount:s,shouldRenderFirstComment:s>0}}),[_,te,e,N],{useDeepEqual:!0}),ne=(0,i.useCallback)((()=>{if(!e.store.isDefined())return;const t=e.store.getContext();if(!t)return;return c.VP_(t,(t=>!c.xw5(t)||c.h19(t)===e.store.id))}),[e.store]),se=(0,a.VK)((()=>{if(!X)return;return(0,D.NI)(e.store).find((t=>R.t({discussionStore:e.store,commentStore:t})))}),[X,e.store]),re=i.createRef(),ae=(0,i.useRef)(e.blockStore.clone()).current,le=(0,l.yK)((t=>({discussionWrapper:{...e.format===D.O2.Page&&{margin:"14px -14px 14px"},...e.format===D.O2.Menu&&{paddingTop:10,paddingBottom:12,marginLeft:-2,boxShadow:e.isFirst?"none":`0 -1px 0 ${t.regularDividerColor}`,marginTop:e.isFirst?0:1},...e.format===D.O2.Margin&&{paddingBottom:e.collapsed?7:14,borderRadius:4}}})),[e.collapsed,e.format,e.isFirst]);(0,i.useEffect)((()=>{o.KatexStore.loadIfNeeded(ne)}),[o.KatexStore,ne]);const de=t=>{const{device:i}=o;if(!i.isMobile)return;if(!e.store.isDefined())return;t.stopPropagation(),t.preventDefault(),j.Z.setState({open:!1});const n=d.oA(w.C.findSelectablesFromIds([e.store.getParentId()])),s=null==n?void 0:n[0];s&&g.NQ({component:s,vertical:{reveal:"bottom"},horizontal:{reveal:"closest"},animate:!0})},ce=()=>{const o=(0,D.QT)(B.length);if(!e.collapsed)return(0,O.jsx)(x.Z,{style:{display:"flex",flexDirection:"column",maxHeight:500,overflowY:"scroll"},ref:t,type:M.Z.Y,store:$,children:B.map((t=>(0,O.jsx)(Z.default,{store:t,discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:E,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o},t.id)))});const i=B[0]&&(0,O.jsx)(Z.default,{store:B[0],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:E,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o,collapsed:e.collapsed},B[0].id),n=B.length>1&&B[B.length-1]&&(0,O.jsx)(Z.default,{store:B[B.length-1],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:E,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o,collapsed:e.collapsed},B[B.length-1].id),s=B.length-2;return(0,O.jsxs)(O.Fragment,{children:[i,(0,O.jsx)(Q,{insetButton:!J,count:s,onClick:xe}),n]})};const ue=(0,a.VK)((()=>e.blockStore.getRole()),[e.blockStore]),me=t.current,pe=(0,a.VK)((()=>(null==me?void 0:me.atScrollEnd())??!0),[me]),ge=W&&!e.collapsed&&J&&q&&t.current&&!pe,he=()=>{n.default.afterNextFlush((()=>{t.current&&t.current.scrollToBottom({animate:!0})}))},fe=d.Ds((()=>{setTimeout((()=>H(!0)),50)}),50),xe=e=>{J||(e.stopPropagation(),z(!0))},ve=()=>{F.reset()};return(0,O.jsx)(v.Z,{store:ae,analyticsName:"discussion",canNativeDropOnto:!0,onNativeDrop:async e=>{let{files:t}=e;re.current&&await re.current.uploadFiles(t)},keepTextSelectionOnDrop:!0,shouldShowDropZone:!0,children:(0,O.jsxs)("div",{ref:Y,style:le.discussionWrapper,onMouseMove:()=>{k.Z.state||K(!0)},onMouseLeave:()=>{K(!1)},children:[function(){if(J)return ce();const{commentStores:t,shouldRenderFirstComment:o,commentsToShow:i,commentsToCollapse:n}=ie,s=i.map(((t,i)=>{var n;return(0,O.jsx)(Z.default,{store:t,discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:E,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,discussionContext:!o&&e.format!==D.O2.Margin&&0===i&&(0,O.jsx)(U,{format:e.format,discussionLocation:e.discussionLocation,store:e.store,blockStore:e.blockStore,onClick:de}),showNewBar:t.id===(null===(n=oe.current)||void 0===n?void 0:n.id)&&0!==i},t.id)})),r=o&&(0,O.jsx)(Z.default,{store:t[0],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:E,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,discussionContext:e.format!==D.O2.Margin&&V&&(0,O.jsx)(U,{format:e.format,discussionLocation:e.discussionLocation,store:e.store,blockStore:e.blockStore,onClick:de})},t[0].id);return(0,O.jsxs)("div",{style:{position:"relative"},children:[r,X&&se&&(0,O.jsx)(S.z,{style:ee}),(0,O.jsx)(Q,{insetButton:!J,count:n.length-1,onClick:xe}),s]})}(),A?(0,O.jsx)("div",{style:{height:8}}):(0,O.jsx)(G,{ref:re,showMoreCommentsButton:!!ge,onMoreCommentsClick:he,inputVisible:!e.collapsed||!P,store:e.store,format:e.format,discussionInputStore:F,discussionLocation:e.discussionLocation,onCancel:async()=>{if((0,D.hu)(F)){await p.confirmUserAction({message:(0,O.jsx)(m.FormattedMessage,{defaultMessage:"Do you want to discard this reply?",id:"discussion.confirmDialog.discardReply.prompt"}),acceptLabel:(0,O.jsx)(m.FormattedMessage,{defaultMessage:"Discard",id:"discussion.confirmDialog.discardReplyButton.label"})})?(ve(),e.onDismiss&&e.onDismiss()):(await n.default.afterNextFlush(),h.NX({store:F.state.textStore}))}else ve(),e.onDismiss&&e.onDismiss()},onSubmit:async()=>{H(!1);const{device:t}=o,{store:i,discussionLocation:s}=e;f.createAndCommit({userAction:"Discussion.handleSubmitReply",environment:o,perform:e=>{L.Xi({environment:o,discussionStore:i,textValue:F.state.textStore.getValue()||[],transaction:e,discussionLocation:s,files:F.state.files})}}),ve(),h.ZH(o),he(),fe(),t.isMobile||(await n.default.afterNextFlush(),h.N_({store:F.state.textStore}))},onEditPreviousComment:()=>{const t=o.currentUser.id;if(!t)return;const i=b.D4(e.store).filter((e=>e.getCreatedById()===t)),n=d.Z$(i);if(!n)return;const s=C.Z.find((t=>t.commentId===n.id&&t.discussionLocation===e.discussionLocation));s&&(h.ZH(o),s.edit())},showCtaButtons:!!J||void 0,onFileUploaded:()=>{const e=w.C.findSelectableFromStore(ae);e&&g.NQ({component:e,vertical:{reveal:"bottom"},horizontal:{reveal:"closest"},animate:!0})},role:ue})]})})}const ee={marginRight:4,position:"absolute",right:16,top:14}},55541:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ie});var i=o(67294),n=o(1302),s=o(480),r=o(6740),a=o(86628),l=o(24405),d=o(15157),c=o(72126),u=o(31412),m=o(50906),p=o(47307),g=o(67060),h=o(97444),f=o(98104),x=o(39699),v=o(53471),S=o(23063),b=o(37601),C=o(3386),y=o(45653),w=o(79954),j=o(65187),M=o(28020),k=o(43250),I=o(33929),L=o(68056),R=o(77546),D=o(89224),T=o(24666),Z=o(65598);var B=o(34047),_=o(59194),F=o(91315),P=o(64275),V=o(22962),A=o(83065),E=o(61519),K=o(73063),N=o(1892),O=o(26388),z=o(85893);const U=function(e){window.__c={n:"CommentActionButton"};const t=(0,s.O7)(),{icon:o,onClick:i,tooltip:n}=e;return(0,z.jsx)(N.Z,{capture:!0,render:e=>(0,z.jsx)(O.Z,{renderTooltip:()=>n,render:s=>(0,z.jsx)(K.Z,{ariaLabel:n,icon:o,iconStyle:{width:t.device.isMobile?20:16,height:t.device.isMobile?20:16},style:{marginLeft:t.device.isMobile?16:10},onClick:i,...s,...e})})})},W=(0,u.defineMessages)({defaultPlaceholder:{defaultMessage:"Add a comment…",id:"discussionInput.defaultPlaceholder.addComment"},pasteFileIntoCommentNotAllowed:{id:"clipboardActions.pasteFileIntoCommentError.message",defaultMessage:"Sorry, you cannot paste files into a comment."},replyInputPlaceholder:{defaultMessage:"Reply...",id:"updateSidebar.placeholder.addComment"}}),H={height:{stiffness:80,damping:12,precision:.001}};const $=function(e){window.__c={n:"CommentInputActionBar"};const t=(0,u.useIntl)(),o=(0,s.O7)(),{device:i}=o,n=(0,l.yK)((e=>({icon:{background:e.mediumIconColor,borderRadius:"50%",marginLeft:o.device.isMobile?16:12,pointerEvents:"auto",height:20,width:20},iconHovered:{background:e.lightIconColor}})),[o.device.isMobile]),{canSend:r,visible:a,onSend:d,onCancel:c,isEditing:m,animated:p,onMention:g,onAttach:h,inline:f}=e,x={opacity:a?1:0};return(0,z.jsx)(S.Z,{springConfig:H,isVisible:!0,animationStyle:x,render:()=>(0,z.jsx)("div",{style:{display:"flex",...f?{flexDirection:"column-reverse",alignItems:"end",marginRight:8}:{flexDirection:"row",position:"absolute",bottom:7,right:12,alignItems:"center"},pointerEvents:a?void 0:"none",...p&&x},children:(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,z.jsx)(U,{icon:_.s,onClick:h,tooltip:t.formatMessage({id:"discussionInput.uploadFile.button.tooltip",defaultMessage:"Attach file"})}),!i.isMobileBrowser&&(0,z.jsx)(U,{icon:V.O,onClick:g,tooltip:t.formatMessage({id:"discussionInput.insertMention.button.tooltip",defaultMessage:"Mention a person, page, or date"})}),m&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:{height:14,marginLeft:o.device.isMobile?10:8},children:(0,z.jsx)(E.Z,{vertical:!0,size:1})}),(0,z.jsx)(N.Z,{capture:!0,render:e=>(0,z.jsx)(K.Z,{icon:P.D,isDarkIconColor:!0,onClick:c,iconStyle:{fill:"white",height:o.device.isMobile?18:16,width:o.device.isMobile?18:16},hoveredStyle:n.iconHovered,style:n.icon,...e})})]}),m?(0,z.jsx)(N.Z,{capture:!0,render:e=>(0,z.jsx)(K.Z,{icon:F.r,onClick:d,isBlue:r,disabled:!r,iconStyle:{height:o.device.isMobile?23:21,width:o.device.isMobile?23:21},style:{marginLeft:o.device.isMobile?16:12,pointerEvents:"auto",height:20,width:20},...e})}):(0,z.jsx)(N.Z,{capture:!0,render:e=>(0,z.jsx)(K.Z,{icon:A._,onClick:d,isBlue:r,disabled:!r,iconStyle:{height:o.device.isMobile?26:24,width:o.device.isMobile?26:24},style:{marginLeft:o.device.isMobile?16:12,pointerEvents:"auto",height:20,width:20},...e})})]})})})};var q=o(20830);const X=i.forwardRef(((e,t)=>{var o;window.__c={n:"DiscussionInput"};const w=(0,s.O7)(),{device:R,currentUser:D}=w,[_,F,P]=(0,a.AF)(e.discussionInputStore),{textStore:V,files:A}=_,E=(0,a.VK)((()=>V.getValue()),[V]),[K,N]=(0,i.useState)(!1),[O,U]=(0,i.useState)(!1),X=(0,i.useRef)(null),{commentStore:te}=e,ie=e.discussionFormat!==B.O2.Page;(0,i.useImperativeHandle)(t,(()=>({uploadFiles:me})));const ne=(0,a.VK)((()=>(0,M.B7)(w)),[w]),se=(0,i.useRef)(null===(o=e.blockStore)||void 0===o?void 0:o.clone()),re=(0,a.VK)((()=>{const e=T.default.state;return"editing"===e.mode&&(0,L.qS)(e.multiSelection)&&e.multiSelection.start.store===V}),[V]),ae=(0,a.VK)((()=>({isEmpty:(0,B.n9)(P),hasChanged:(0,B.hu)(P,te)})),[P,te]),le=(0,a.VK)((()=>re||!ae.isEmpty),[ae.isEmpty,re]),de=(0,i.useCallback)((async()=>{const e=T.default.state;"editing"===e.mode&&(0,L.qS)(e.multiSelection)&&e.multiSelection.start.store===V||(f.NX({store:V}),await n.default.afterNextFlush())}),[V]),ce=e=>{const t=P.state;P.setState({...t,files:t.files.filter((t=>t.id!==e.id))})},ue=async e=>{await me(e.files),m.Zq6(w,{type:"paste"})},me=(0,i.useCallback)((async t=>{var o;if(await de(),A.length+t.length>10)return void p.showErrorMessage((0,z.jsx)(u.FormattedMessage,{id:"discussionInput.uploadFile.tooManyFilesErrorMessage",defaultMessage:"You cannot upload more than {maxFiles} files per comment.",values:{maxFiles:10}}));const i=t.map(v.Xo);F({..._,files:[...A,...i]}),null===(o=e.onFileUploaded)||void 0===o||o.call(e)}),[de,A,F,_,e]),pe=e.discussionFormat===B.O2.Margin,ge=e.discussionFormat===B.O2.Sidebar;(0,i.useEffect)((()=>{e.commentStore&&function(e,t){const o=Z.le(t),i=v.nQ(o);e.setState({...e.state,files:i})}(P,e.commentStore)}),[P,e.commentStore]);const he=(0,i.useRef)(!1),fe=(0,i.useCallback)((t=>{t?d.Z.set({userId:D.id,key:oe(e.parentStore.id,e.inReplyToDiscussionId),value:t??null}):d.Z.remove({userId:D.id,key:oe(e.parentStore.id,e.inReplyToDiscussionId)})}),[D.id,e.inReplyToDiscussionId,e.parentStore.id]);(0,i.useEffect)((()=>{e.shouldSaveUnsentComments&&he.current&&fe(E),he.current=!0}),[e.shouldSaveUnsentComments,fe,E]);const xe=(0,i.useRef)(V);(0,i.useEffect)((()=>{if(e.shouldSaveUnsentComments){const t=d.Z.get({userId:D.id,key:oe(e.parentStore.id,e.inReplyToDiscussionId)});t&&x.createAndCommit({userAction:"DiscussionInput.willMount",environment:w,perform:e=>{h.sO({environment:w,store:xe.current,value:t,transaction:e})}})}}),[w,D.id,e.inReplyToDiscussionId,e.parentStore.id,e.shouldSaveUnsentComments]);const ve=(0,i.useRef)(A);(0,i.useEffect)((()=>{ve.current=A}),[A]),(0,i.useEffect)((()=>()=>{ve.current&&ve.current.forEach((e=>{"local"===e.type&&e.dataURL&&URL.revokeObjectURL(e.dataURL)}))}),[]);const Se=!(!e.isEditingExistingComment&&(e.discussionFormat===B.O2.Page||e.discussionFormat===B.O2.Menu)),be=()=>{var e;return null===(e=X.current)||void 0===e?void 0:e.focus()},Ce=A&&A.length>0,ye=!(e.discussionFormat===B.O2.Menu&&e.inReplyToDiscussionId)&&(ge||pe&&!e.isNewComment),we=void 0!==e.showCtaButtons?e.showCtaButtons:e.isEditingExistingComment||le||K,je={paddingBottom:Se&&we?34:4},Me=!e.isMobileSlideUpMenu,ke=(pe||ge)&&!e.isNewComment,Ie=(0,l.yK)((t=>({inputWrapper:{display:"flex",flexDirection:"column",alignItems:"bottom",minHeight:pe?void 0:32,width:"100%",fontSize:14,paddingTop:pe?1:4,paddingBottom:pe?1:4,borderRadius:4,boxShadow:!e.isNewComment&&pe?`0px 0px 0px 1px ${t.darkDividerColor}`:void 0,transition:"background 300ms ease",background:O&&!we&&t.focusDiscussionInputBackground||we&&!e.isEditingExistingComment&&(e.isNewComment&&pe?t.selectedMarginDiscussionBackground:t.discussionInputActivatedBackground)||"inherit",cursor:we?"text":"pointer",alignSelf:"center",position:"relative"}})),[O,pe,e.isEditingExistingComment,e.isNewComment,we]),Le=ge?23:20,Re={fontSize:14,marginTop:ge?2:3,marginBottom:2,paddingLeft:6,paddingRight:10,maxHeight:R.isMobileNative?"50vh":"70vh",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",userSelect:"auto",WebkitUserSelect:"auto"},De=(0,a.VK)((()=>0===(V.getValue()||[]).length),[V]),Te=function(e){const{isEditing:t,shouldTrapCursorInInput:o,onEditPreviousComment:i,textRef:n}=e;if(!t)return{};const s=o?()=>ee(n.current,"start"):void 0,r=o?()=>ee(n.current,"end"):void 0;return{onUp:i??s,onDown:r,onRight:r,onLeft:s}}({isEditing:re,shouldTrapCursorInInput:ie,onEditPreviousComment:De?e.onEditPreviousComment:void 0,textRef:X}),Ze=()=>{fe(void 0),e.onSubmit()},Be=()=>{if(!R.isMobile)return void Ze();const e="editing"===T.default.state.mode&&T.default.state.multiSelection;e&&x.createAndCommit({userAction:"DiscussionInput.handleEnter",environment:w,perform:t=>{h.hJ({environment:w,string:"\n",multiSelection:e,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})},_e=(0,z.jsx)($,{visible:we,onAttach:async()=>{const{device:e}=w;e.isIOS&&e.isMobileNative&&!e.isTablet&&(f.ZH(w),await n.default.afterNextFlush());const t=await v.y({multiple:!0});await me(t),m.Zq6(w,{type:"file_picker"})},onMention:async()=>{await de(),g.lZ(w,{page:!0,createPage:!1,user:!0,bot:!0,date:!0,reminder:!1,templateVariable:!1,group:!0})},canSend:!ae.isEmpty,onSend:Ze,onCancel:e.onCancel,isEditing:e.isEditingExistingComment||!1,animated:pe,inline:!Se});return(0,z.jsx)(C.Z,{capture:re,onCommandEnter:c.yR,children:(0,z.jsx)(Y,{enabled:!!se.current&&!!e.canDrop,store:se.current,onNativeDrop:async e=>{let{files:t}=e;await me(t),m.Zq6(w,{type:"drop"})},children:(0,z.jsx)("div",{className:e.isEditingExistingComment?k.hzx:k.wFE,style:{...G,...e.containerStyle||{}},onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&N(!0)},onBlur:()=>N(!1),onMouseOver:()=>U(!0),onMouseOut:()=>U(!1),children:(0,z.jsxs)("div",{style:J,children:[e.showAvatar&&(0,z.jsx)(y.Z,{userStore:ne,size:Le,avatarShouldShowShadow:!0,style:Q}),(0,z.jsx)(S.Z,{springConfig:H,isVisible:!0,animationStyle:je,render:()=>(0,z.jsxs)("div",{className:ye?k.Wh_:"",onClick:be,style:{...Ie.inputWrapper,...pe&&je},tabIndex:-1,children:[(0,z.jsxs)("div",{style:{flexGrow:1,display:"flex"},children:[(0,z.jsx)(j.Z,{style:Re,store:V,parentStore:e.parentStore,disabled:!1,onEnter:Be,onCommandEnter:Ze,onPasteFiles:ue,onEsc:e.onCancel,...Te,placeholder:I.default.formatMessage(ke?W.replyInputPlaceholder:W.defaultPlaceholder),ref:X,isDiscussionInput:!0,disableSlashCommands:!0,disableInsertText:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableEmbedMenu:!0,disableDateReminderMentions:!0,disableMobileActionBar:!0,disableStyleAnnotations:R.isMobileBrowser,pasteBehavior:"inline"}),!Se&&_e]}),Ce&&(0,z.jsx)("div",{style:{paddingBottom:Se?8:0,paddingLeft:8,paddingRight:8},children:(0,z.jsx)(q.Z,{files:A,onRemoveFile:ce})}),Se&&_e]})}),Me&&(0,z.jsx)(b.Z,{show:re,onDismiss:()=>f.ZH(w)})]})})})})})),G={display:"flex",flexDirection:"column",width:"100%",cursor:"pointer"},J={display:"flex",alignItems:"center",flexGrow:1},Q={flexShrink:0,flexGrow:0,marginRight:6,alignSelf:"flex-start",marginTop:6};function Y(e){const{enabled:t,children:o,store:i,onNativeDrop:n}=e;return t&&i?(0,z.jsx)(w.Z,{store:i,analyticsName:"discussion_input",canNativeDropOnto:!0,onNativeDrop:n,keepTextSelectionOnDrop:!0,shouldShowDropZone:!0,children:o}):(0,z.jsx)(z.Fragment,{children:o})}function ee(e,t){if(!e)return;const o=e.getNode();if(!(o&&o instanceof HTMLElement)||document.activeElement!==o)return;const i=o.parentNode;if(!i)return;const n=te(i);if(!n)return;const s=n.scrollTop,r=D.toStaticRange(D.get());if(!r)return;const a=()=>{n.scrollTop=s,"start"===t?f.N_({store:e.props.store}):f.NX({store:e.props.store})};window.requestAnimationFrame((()=>{const e=Math.abs(n.scrollTop-s),i=D.toStaticRange(D.get()),l=document.activeElement!==o;if(!i)return;const d=!D.areRangesEqual(r,i),c=o.contains(i.startContainer)&&o.contains(i.endContainer);let u=!1;var m;0!==e&&(m=n,Math.abs(m.scrollHeight-m.clientHeight-m.scrollTop)<1)&&!l&&!d?u=!0:c||(u=!0),u&&(o.focus(),a(),window.requestAnimationFrame((()=>{a(),"end"===t&&window.requestAnimationFrame(a)})))}))}function te(e){const t=(0,R.VW)(e);return t&&t.style.maxHeight&&t.parentNode?te(t.parentNode):t}function oe(e,t){return t?`UnsentDiscussion-${e}-${t}`:`UnsentDiscussion-${e}`}const ie=X},20830:(e,t,o)=>{o.d(t,{Z:()=>V});var i=o(67294),n=o(86628),s=o(24405),r=o(31505),a=o(39301),l=o(73063),d=o(53336),c=o(73744),u=o(34859),m=o(45589),p=o(480),g=o(95538),h=o(64275),f=o(64921),x=o(54604),v=o(12981),S=o(81865),b=o(85893);function C(e){window.__c={n:"FullScreenImage"};const{url:t,imageNaturalHeight:o,imageNaturalWidth:n}=e,s=(0,i.useMemo)((()=>({display:"block",width:`min(${n}px, 100%)`,height:`min(${o}px, 100%)`,pointerEvents:"auto",objectFit:"cover"})),[n,o]);return(0,b.jsx)("div",{style:y,children:(0,b.jsx)(v.Z,{src:t,style:s,placeholderLoadedStyle:{display:"flex",justifyContent:"center",alignItems:"center"}})})}const y={alignSelf:"center",margin:"0 auto",position:"relative",height:"100%",width:"100%",overflow:"hidden"};const w=function(e){window.__c={n:"DiscussionInputImageRenderer"};const t=(0,i.useRef)(null),{file:o}=e,n=(0,p.O7)(),r=(0,s.yK)((e=>({imageThumbnail:{borderRadius:4,border:`1px solid ${e.lightDividerColor}`,objectFit:"cover",height:48,width:48,cursor:"zoom-in"}})),[]),a=(0,i.useCallback)((()=>{var e;const i=null===(e=t.current)||void 0===e?void 0:e.getImageDimensions();if(!i)return;const{naturalHeight:n,naturalWidth:s}=i;return"local"===o.type?(0,b.jsx)(C,{url:o.dataURL,imageNaturalHeight:n,imageNaturalWidth:s}):(0,b.jsx)(S.Z,{url:o.source,render:(e,t)=>(0,b.jsx)(C,{url:t,error:e,imageNaturalHeight:n,imageNaturalWidth:s}),isAuthenticated:!0,permissionRecord:o.store.pointer})}),[o]),l=(0,i.useCallback)((e=>{var o;e.stopPropagation();const i=null===(o=t.current)||void 0===o?void 0:o.getImageDimensions();i&&x.ui({environment:n,renderFullScreenNode:a,fullScreenNodeRect:i.clientRect,contentAspectRatio:i.naturalHeight/i.naturalWidth})}),[a,n]);return"local"===o.type?(0,b.jsx)(v.Z,{src:o.dataURL,style:r.imageThumbnail,placeholderStyle:r.imageThumbnail,onClick:l,ref:t}):(0,b.jsx)(S.Z,{url:o.source,isAuthenticated:!0,permissionRecord:o.store.pointer,render:(e,o)=>(0,b.jsx)(v.Z,{src:o,style:r.imageThumbnail,placeholderStyle:r.imageThumbnail,onClick:l,ref:t})})};var j=o(95477),M=o(52455),k=o(60973),I=o(82990);function L(e){window.__c={n:"DiscussionInputFileRenderer"};const{file:t,type:o}=e,n=(0,s.Fg)(),r=(0,i.useMemo)((()=>({doc:{title:"DOC",color:n.msDocDiscussionInputPreview},docx:{title:"DOCX",color:n.msDocDiscussionInputPreview},xls:{title:"XLS",color:n.msExcelDiscussionInputPreview},xlsx:{title:"XLSX",color:n.msExcelDiscussionInputPreview},pdf:{title:"PDF",color:n.pdfDiscussionInputPreview},video:{icon:k.g}})),[n]),a=(0,s.yK)((e=>{const t=r[o];return{wrapper:{height:48,width:220,display:"flex",background:"transparent",borderRadius:5,overflow:"hidden",border:`1px solid ${e.regularDividerColor}`},fileTypeArea:{background:null!=t&&t.color?t.color:e.sidebarSecondaryBackground,height:48,width:48,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0},icon:{height:26,width:26,fill:e.regularIconColor},fileType:{fontSize:11,lineHeight:"16.8px",fontWeight:I.Z.fontWeight.semibold,color:e.regularInvertedTextColor},fileDescription:{padding:"6px 12px 6px 12px",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},fileTitle:{color:e.regularTextColor,textOverflow:"ellipsis",fontSize:14,lineHeight:"19.6px",whiteSpace:"nowrap",overflow:"hidden",width:"100%",paddingBottom:20},fileSize:{color:e.lightTextColor,fontSize:12,lineHeight:"16.8px",width:"100%"}}}),[o,r]),l=r[o];return(0,b.jsxs)("div",{style:a.wrapper,children:[(0,b.jsx)("div",{style:a.fileTypeArea,children:null!=l&&l.title?(0,b.jsx)("div",{style:a.fileType,children:l.title}):null!=l&&l.icon?l.icon(a.icon):(0,M.X)(a.icon)}),(0,b.jsxs)("div",{style:a.fileDescription,children:[(0,b.jsx)("div",{style:a.fileTitle,children:t.name}),(0,b.jsx)("div",{style:a.fileSize,children:t.size})]})]})}const R={image:w,pdf:L,doc:L,xls:L,embed:L},D={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/msword":"doc","application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx",image:"image"};function T(e){return"local"===e.type?function(e){const[t]=e.split("/");return D[e]||D[t]}(e.file.type)||(0,g.Dz)({url:e.file.name,baseUrl:j.default.domainBaseUrl,publicDomainName:j.default.publicDomainName}):(0,g.y_)(e.source,".doc")?"doc":(0,g.y_)(e.source,".docx")?"docx":(0,g.y_)(e.source,".xls")?"xls":(0,g.y_)(e.source,".xlsx")?"xlsx":(0,g.Dz)({url:e.source,baseUrl:j.default.domainBaseUrl,publicDomainName:j.default.publicDomainName})}function Z(e){let{file:t,onRemoveFile:o,disableRemove:n}=e;window.__c={n:"DiscussionInputFilePreview"};const[s,r]=(0,i.useState)(!1),a=(0,i.useCallback)((()=>null==o?void 0:o(t)),[t,o]),d=(0,p.O7)(),c=!n&&(s||d.device.isMobile);(0,i.useEffect)((()=>()=>{"local"===t.type&&t.dataURL&&URL.revokeObjectURL(t.dataURL)}),[t]);const u=T(t),m=R[u]||L;return(0,b.jsxs)(f.Z,{style:F,hoveredStyle:B,pressedStyle:_,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,b.jsx)(m,{file:t,type:u}),c&&(0,b.jsx)(l.Z,{icon:h.D,style:P,hasBackground:!0,isDarkIconColor:!0,hovered:!1,showShadow:!0,onClick:a})]})}const B={background:"none"},_={background:"none"},F={display:"flex",alignItems:"center",justifyContent:"center",position:"relative",paddingRight:"10px",cursor:"pointer"},P={position:"absolute",top:"-5px",right:"6px",height:18,width:18,borderRadius:18,padding:4};function V(e){window.__c={n:"DiscussionInputFilmStrip"};const t=(0,i.useRef)(null),o=(0,s.yK)((e=>({leftArrowStyle:{left:10,top:26,background:e.mediumIconColor,...K},rightArrowStyle:{right:10,top:26,background:e.mediumIconColor,...K},iconStyle:{height:6,fill:e.contentBackground},hoveredStyle:{background:e.regularIconColor}})),[]),[{scrollLeft:p,scrollWidth:g,clientWidth:h},,f]=(0,n.AF)(void 0,m.Z),x=(0,i.useCallback)((e=>{var o;e.stopPropagation(),null===(o=t.current)||void 0===o||o.scrollByOffset(0,-.8*h,{animate:!0})}),[h]),v=(0,i.useCallback)((e=>{var o;e.stopPropagation(),null===(o=t.current)||void 0===o||o.scrollByOffset(0,.8*h,{animate:!0})}),[h]),S=(0,i.useCallback)((()=>{var e;null===(e=t.current)||void 0===e||e.getClientRect()}),[]);(0,i.useEffect)((()=>(c.lj(window,"resize",S),()=>{c.ZV(window,"resize",S)})),[S]);const C=(0,i.useMemo)((()=>Math.floor(p)>0),[p]),y=(0,i.useMemo)((()=>Math.ceil(p+h)<g),[p,g,h]);return(0,i.useEffect)((()=>{S()}),[e.files,S]),0===e.files.length?null:(0,b.jsxs)("div",{style:E,children:[(0,b.jsx)(d.Z,{style:A,ref:t,type:u.Z.X,onScroll:S,zIndex:0,store:f,children:e.files.filter((e=>"local"===e.type||Boolean(e.source))).map((t=>(0,b.jsx)(Z,{file:t,onRemoveFile:e.onRemoveFile,disableRemove:e.disableRemove},t.id)))}),C&&(0,b.jsx)(l.Z,{icon:r.Y,hovered:!1,showShadow:!0,onClick:x,style:o.leftArrowStyle,iconStyle:o.iconStyle,hoveredStyle:o.hoveredStyle}),y&&(0,b.jsx)(l.Z,{icon:a.n,hovered:!1,showShadow:!0,onClick:v,style:o.rightArrowStyle,iconStyle:o.iconStyle,hoveredStyle:o.hoveredStyle})]})}const A={overflow:"scroll",display:"flex",alignItems:"flex-start",flexDirection:"row",paddingTop:10},E={display:"flex",paddingRight:0,position:"relative"},K={position:"absolute",borderRadius:4,width:16,height:16,opacity:1,flexShrink:0,boxShadow:"none"}},82386:(e,t,o)=>{o.r(t),o.d(t,{default:()=>M});var i=o(67294),n=o(480),s=o(86628),r=o(24405),a=o(36488),l=o(56940),d=o(53437),c=o(3553),u=o(73935),m=o(83355),p=o(14568),g=o(49085);class h extends g.default{getInitialState(){return{}}}const f=h;class x extends m.Z{constructor(){super(...arguments),this.storeTypes={store:f},this.rootNode=void 0,this.observer=void 0,this.handleMutation=()=>{this.rootNode&&this.stores.store.setState({node:this.rootNode})}}get registries(){return[p.Z]}didMount(){this.props.capture&&this.startListeners()}willUpdate(e){e.capture&&!this.props.capture?this.startListeners():!e.capture&&this.props.capture&&this.stopListeners()}willUnmount(){this.stopListeners()}startListeners(){const e=u.findDOMNode(this);e&&(this.rootNode=e,this.observer=new MutationObserver(this.handleMutation),this.observer.observe(this.rootNode,{attributes:!0,subtree:!0}))}stopListeners(){this.observer&&(this.observer.disconnect(),this.rootNode=void 0,this.observer=void 0)}renderComponent(){return i.Children.only(this.props.children)}}x.displayName="SlideUpInputArea";const v=x;var S=o(18821),b=o(34047),C=o(92650),y=o(48514),w=o(55541),j=o(85893);const M=function(){window.__c={n:"NewDiscussionMenu"};const e=(0,n.O7)(),{device:t,WindowSizeStore:o}=e,i=(0,s.VK)((()=>y.Z.state.rect),[]),u=(0,s.VK)((()=>{if(y.Z.state.open){const{blockStore:t,discussionInputStore:o}=y.Z.state;return{blockStore:t,discussionInputStore:o,canMarginCommentsRender:(0,C.az)(e,t)}}return null}),[e]),m=(0,s.VK)((()=>({paddingLeft:t.isMobileNative?o.getSafePaddingLeftCSS(10):10,paddingRight:t.isMobileNative?o.getSafePaddingRightCSS(10):10})),[o,t.isMobileNative]),p=(0,r.yK)((()=>({inputWrapper:{width:t.isMobileNative?"100%":470,maxWidth:t.isMobileBrowser?"90vw":"100%",paddingTop:8,paddingBottom:t.isAndroid?12:8,paddingLeft:m.paddingLeft,paddingRight:m.paddingRight}})),[t,m]),g=()=>{S.ZL(e)},h=()=>{u&&S.uK(u.discussionInputStore,e)};return null!=u&&u.canMarginCommentsRender?null:(0,j.jsx)(d.ZP,{popupType:t.isMobileNative?d.ZP.PopupType.SlideUp:d.ZP.PopupType.Popup,keepFocus:!0,open:null!==u,originRect:i,placementToOrigin:d.ZP.Placement.Bottom,alignmentToOrigin:d.ZP.Alignment.Center,originGap:4,onDismiss:h,render:()=>{if(u){const{blockStore:e,discussionInputStore:t}=u;return(0,j.jsx)(l.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!1,render:()=>(0,j.jsx)(v,{capture:!0,children:(0,j.jsx)(a.Z,{capture:!0,allowOpenLinkMenu:!0,render:()=>(0,j.jsx)(c.Z,{store:e,droppable:!0,render:()=>(0,j.jsx)("div",{style:p.inputWrapper,children:(0,j.jsx)(w.default,{showAvatar:!0,parentStore:e,onCancel:h,onSubmit:g,discussionInputStore:t,isMobileSlideUpMenu:!0,shouldSaveUnsentComments:!1,discussionFormat:b.O2.Page,blockStore:e,canDrop:!0})})},e.id)})})})}}})}},90895:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U,openEmojiMenuForReaction:()=>z});var i=o(67294),n=o(73935),s=o(480),r=o(86628),a=o(24405),l=o(8848),d=o(40350),c=o(97880),u=o(82990),m=o(31412),p=o(27153),g=o(4615),h=o(80396),f=o(23867),x=o(19889),v=o(94419),S=o(26350),b=o(50906),C=o(9953),y=o(39699);function w(e){const{discussionLocation:t,environment:o,transaction:i,commentStore:n,icon:s}=e,r=function(e){let{commentStore:t,icon:o}=e;const i=(0,S.Vh)(t,t.pointer,"reactions").getValue();if(void 0===i)return;return i.map((e=>{const o=S.t1.createChildStore(t,{table:h.yo,id:e,spaceId:(0,f.C)(t.pointer.spaceId)});if(o.isDefined())return o})).filter(c.$K).find((e=>e.getIcon()===o))}({commentStore:n,icon:s});if(void 0===o.currentUser.id)return;const a={table:x.KJ,id:o.currentUser.id};null!=r&&r.isDefined()?function(e){var t;let{store:o,actorPointer:i,transaction:n,environment:s,discussionLocation:r}=e;const a={store:o,actorPointer:i,transaction:n,environment:s,discussionLocation:r};(null===(t=o.getActors())||void 0===t?void 0:t.some((e=>e.id===i.id)))?function(e){const{store:t,actorPointer:o,discussionLocation:i,transaction:n,environment:s}=e;if(!t.isDefined())return;const r=t.getParentStore(),a=null==r?void 0:r.getParentStore();b.Eml({environment:s,reaction_value:t.getIcon(),comment_id:t.getParentId(),discussion_id:null==a?void 0:a.id,parent_block_id:null==a?void 0:a.getParentId(),reaction_count:t.getActors().length??0,from:i});const l=t.getModel();y.applyOperation({transaction:n,store:t,operation:l.ops.removeActor(o)})}(a):function(e){const{store:t,actorPointer:o,discussionLocation:i,transaction:n,environment:s}=e;if(!t.isDefined())return;const r=t.getParentStore(),a=null==r?void 0:r.getParentStore();b.pPS({environment:s,reaction_value:t.getIcon(),comment_id:t.getParentId(),discussion_id:null==a?void 0:a.id,parent_block_id:null==a?void 0:a.getParentId(),reaction_count:t.getActors().length??0,from:i});const l=t.getModel();y.applyOperation({transaction:n,store:t,operation:l.ops.appendActor(o)})}(a)}({environment:o,store:r,actorPointer:a,transaction:i,discussionLocation:t}):function(e){let{environment:t,transaction:o,commentStore:i,icon:n,currentActorPointer:s,discussionLocation:r}=e;const a=(0,g.ZP)(),l=i.getParentStore();b.pPS({environment:t,reaction_value:n,comment_id:i.id,discussion_id:null==l?void 0:l.id,parent_block_id:null==l?void 0:l.getParentId(),reaction_count:0,from:r});const d=C.Ue({environment:t,table:h.yo,args:{id:a,spaceId:(0,f.C)(i.pointer.spaceId),commentId:i.id,icon:n,actorPointer:s},inMemoryRecordCache:i.inMemoryRecordCache,transaction:o}),c=(0,S.Vh)(i,i.pointer,"reactions");v.R3({parent:c,append:d,transaction:o})}({environment:o,transaction:i,commentStore:n,icon:s,currentActorPointer:a,discussionLocation:t})}var j=o(64921),M=o(73063),k=o(26388),I=o(11059),L=o(72187),R=o(31945),D=o(78140),T=o(28992),Z=o(66957),B=o(87279);var _=o(70775),F=o(85893);function P(e){let{reactionStores:t,initialIndex:o}=e;window.__c={n:"ReactionSheetContent"};const[n,s]=i.useState(o),a=(0,m.useIntl)(),l=(0,r.VK)((()=>t.map((e=>e.getIcon()))),[t]),d=(0,r.VK)((()=>t[n].getActorStores().map((e=>({id:e.id,store:e,name:e.getDisplayName(a)}))).filter(c.$K)),[t,n,a]);return(0,F.jsxs)(D.Z,{menuType:B.og.ActionSheet,children:[(0,F.jsx)(Z.Z,{tabStyle:{flex:1,justifyContent:"center",display:"flex",minWidth:60},tabs:l,selectedIndex:n,onChange:e=>s(e)}),d.map((e=>(0,F.jsx)(T.Z,{title:e.name,dontShrinkIcon:!0,icon:(0,F.jsx)(_.S,{authorStore:e.store,avatarSize:20,avatarStyle:{width:20,height:20},placeholderStyle:{width:20,height:20}})},e.id)))]})}function V(e){window.__c={n:"ReactionSheet"};const t=(0,s.Fy)(),o=(0,r.VK)((()=>e.commentStore.getUserVisibleReactions()),[e.commentStore]),n=(0,i.useRef)(null),a=function(e){const t=(0,s.O7)(),{onLongPress:o,hapticsEnabled:n=!0,timeout:r=300}=e,a=(0,i.useCallback)((()=>{var e,i,s;n&&(null!==(e=t.mobileNative)&&void 0!==e&&e.buzz?t.mobileNative.buzz():null===(i=(s=window.navigator).vibrate)||void 0===i||i.call(s,20)),o()}),[t.mobileNative,n,o]),l=(0,i.useRef)(),d=(0,i.useCallback)((()=>clearTimeout(l.current)),[]);return(0,i.useEffect)((()=>d),[d]),{onTouchStart:(0,i.useCallback)((()=>{clearTimeout(l.current),l.current=setTimeout(a,r)}),[r,a]),onTouchEnd:d,onTouchCancel:d}}({onLongPress:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.setOpen(!0)}});if(!t.isMobile)return(0,F.jsx)(F.Fragment,{children:e.children});const l=o.findIndex((t=>!e.reactionStore||t===e.reactionStore))??0;return(0,F.jsx)(R.ZP,{ref:n,renderOrigin:()=>(0,F.jsx)("div",{...a,children:e.children}),popupType:t.isTablet?R.Z4.Popup:R.Z4.SlideUp,render:()=>(0,F.jsx)(P,{initialIndex:l,reactionStores:o})},e.commentStore.id)}function A(){const{isMobile:e}=(0,s.Fy)();return(0,a.yK)((t=>({reaction:{display:"flex",margin:"1px",padding:"1px 6px 1px 6px",justifyContent:"center",gap:"4px",border:`1px solid ${t.regularDividerColor}`,borderRadius:"100px",fontSize:14,lineHeight:"20px",fontVariantNumeric:"tabular-nums",background:t.whiteButtonBackground},count:{color:t.mediumTextColor,fontSize:e?u.Z.fontSize.UISmall.mobile:u.Z.fontSize.UISmall.desktop,lineHeight:"20px"},countReacted:{color:t.blueColor},reacted:{background:l.ZP.blueWithAlpha(.08),border:`1px solid ${t.filterPillBorder}`,fontWeight:500},reactedHover:{background:l.ZP.blueWithAlpha(.18)},emojiStyle:{color:"black",display:"inline-block"}})),[e])}function E(e){let{store:t,disabled:o,onClick:i}=e;window.__c={n:"Reaction"};const n=(0,r.VK)((()=>t.getActors()),[t]),a=(0,r.VK)((()=>t.getIcon()),[t]),l=A(),{currentUser:d}=(0,s.O7)();if(!n||!a)return null;if(0===n.length)return null;const c=n.some((e=>e.id===d.id)),u={...l.reaction,...c&&l.reacted},m={...l.count,...c&&l.countReacted};return(0,F.jsx)(k.Z,{placement:k.Z.Placement.Bottom,delayThreshold:300,renderTooltip:()=>(0,F.jsx)(K,{store:t,icon:a}),render:e=>(0,F.jsxs)(j.Z,{disabled:o,style:u,hoveredStyle:c?l.reactedHover:void 0,onClick:i,...e,children:[(0,F.jsx)("span",{style:l.emojiStyle,children:(0,F.jsx)(I.Z,{size:14,char:a})}),(0,F.jsx)("span",{style:m,children:n.length})]})})}function K(e){let{store:t,icon:o}=e;window.__c={n:"ReactionTooltip"};const i=(0,a.yK)((e=>({text:{color:e.mediumInvertedTextColor}})),[]),n=(0,m.useIntl)(),s=(0,r.VK)((()=>t.getActorStores()),[t]),l=(0,r.VK)((()=>s.map((e=>e.getDisplayName(n))).filter(c.$K)),[s,n]);return(0,F.jsx)(m.FormattedMessage,{defaultMessage:"{numberOfNames, plural, one {{nameOrNames} <medium>reacted with</medium> {icon}} other {{nameOrNames} <medium>reacted with</medium> {icon}}}",id:"ReactionBar.hoverTooltip.text",values:{numberOfNames:l.length,nameOrNames:l.join(", "),medium:e=>(0,F.jsx)("span",{style:i.text,children:e}),icon:(0,F.jsx)(I.Z,{size:14,char:o})}})}function N(e){window.__c={n:"NewReaction"};const{commentStore:t,discussionLocation:o,onEmojiSelection:n,disableDropShadow:r}=e,l=(0,s.O7)(),c=(0,i.useRef)(null),u=(0,s.Fy)(),p=(0,a.yK)((e=>({container:{padding:2,display:"flex",boxShadow:e.lightBoxShadow,backgroundColor:e.buttonGroupBackground,borderRadius:u.isMobile?3:4,...r&&{borderWidth:1,borderStyle:"solid",borderColor:e.stroke.regular,borderRadius:6,boxShadow:void 0}},addIcon:{width:15,fill:e.mediumIconColor},iconButton:{height:22,width:22,flex:"0 0 auto"}})),[u.isMobile,r]),g=(0,m.useIntl)();return(0,F.jsx)("div",{style:p.container,children:(0,F.jsx)(M.Z,{hasBackground:!0,ariaLabel:g.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),showShadow:!1,icon:()=>(0,d.V)(p.addIcon),style:p.iconButton,ref:c,onClick:()=>z(l,g,t,null==c?void 0:c.current,o,n)})})}function O(e){let{commentStore:t,discussionLocation:o,onEmojiSelection:n}=e;window.__c={n:"NewInlineReaction"};const r=(0,a.Fg)(),l=(0,s.O7)(),c=(0,i.useRef)(null),u=A(),p=(0,m.useIntl)(),g=(0,d.V)({width:15,height:20,marginTop:.5,marginLeft:.5,fill:r.mediumIconColor});return(0,F.jsx)(j.Z,{style:{...u.reaction,minWidth:"2em"},ref:c,onClick:()=>z(l,p,t,null==c?void 0:c.current,o,n),children:g})}function z(e,t,o,i,s,r){const a=n.findDOMNode(i);if(!a)return;if(!(a instanceof Element))return;const l=a.getBoundingClientRect();p.$(e,{originGap:4,originRect:l,popupWidth:L.FZ,popupHeight:L.kX,isSmallWidth:!1,title:t.formatMessage({defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"}),currentTab:"emoji",tabs:[{type:"emoji",title:(0,F.jsx)(m.FormattedMessage,{defaultMessage:"Emojis",id:"recordIcon.emojiTab.title"}),hideRandomButton:!0,onChange:(t,i)=>{r&&r(),y.createAndCommit({environment:e,userAction:"Comment.toggleReactionFromMenu",perform:n=>{w({environment:e,transaction:n,commentStore:o,icon:t,discussionLocation:s}),i&&i.keepVisible||p.Z()}})}}]})}const U=function(e){window.__c={n:"ReactionBar"};const{parentStore:t,discussionLocation:o,onClick:i,disableDropShadow:n}=e,a=(0,r.VK)((()=>t.canComment()),[t]),l=(0,r.VK)((()=>t.getUserVisibleReactions()),[t]),d=(0,s.O7)();return(0,F.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginTop:"4px",marginBottom:"4px"},children:[l.map((e=>(0,F.jsx)(V,{reactionStore:e,commentStore:t,children:(0,F.jsx)(E,{disabled:!a,store:e,onClick:()=>{e.isDefined()&&(i&&i(),y.createAndCommit({environment:d,userAction:"Comment.toggleReaction",perform:i=>{w({environment:d,transaction:i,commentStore:t,icon:e.getIcon(),discussionLocation:o})}}))}})},e.id))),a&&l.length>0&&(0,F.jsx)(V,{commentStore:t,children:(0,F.jsx)(O,{commentStore:t,discussionLocation:o,onEmojiSelection:i})}),a&&0===l.length&&(0,F.jsx)(N,{commentStore:t,discussionLocation:o,onEmojiSelection:i,disableDropShadow:n})]})}},70418:(e,t,o)=>{o.r(t),o.d(t,{default:()=>re});var i=o(67294),n=o(480),s=o(86628),r=o(24405),a=o(23063),l=o(78316),d=o(82136),c=o(92650),u=o(14577),m=o(72126),p=o(44805),g=o(80503),h=o(51454),f=o(39500),x=o(49427),v=o(36391),S=o(24229),b=o(50628),C=o(17707),y=o(92120),w=o(48514),j=o(97880),M=o(41432),k=o(69651),I=o(37240),L=o(21202),R=o(19889),D=o(82990),T=o(31412),Z=o(76798),B=o(64369),_=o(67706),F=o(43250),P=o(65598),V=o(16402),A=o(26350),E=o(70775),K=o(85893);function N(e){let{discussionData:{groupedDiscussionsData:t,id:o},onClick:n}=e;window.__c={n:"GroupedMarginDiscussionItem"};const[a,l]=(0,i.useState)(!1),d=(0,i.useCallback)((()=>{l(!0)}),[]),u=(0,i.useCallback)((()=>{l(!1)}),[]),m=(0,i.useCallback)((async e=>{const o=t[0].discussionStore;await n(e,o)}),[n,t]),p=(0,s.VK)((()=>t.flatMap((e=>(0,P.D4)(e.discussionStore)))),[t]),g=(0,s.VK)((()=>{const e=t[0].parentBlockStore;return[...new Set(p.map((e=>e.getCreatedById())).filter(j.$K))].map((t=>A.U6.createChildStore(e,{table:R.KJ,id:t}))).slice(0,3)}),[t,p]),h=(0,s.VK)((()=>{const e=t[0].closestVisibleParentId,o=t[0].parentBlockStore;if(!e)return;const i=A.G.createChildStore(o,{table:L.iU,id:e}),n=i.getParentStore();return n&&n.table===L.iU&&n.getType()===M.Ti.tab?i:void 0}),[t]),f=(0,s.VK)((()=>{const e=p.map((e=>e.getLastEditedTime()));return Math.max(...e)}),[p]),x=(0,r.yK)((e=>({discussion:{border:`1px solid ${e.regularDividerColor}`,borderRadius:4,background:a?e.hoveredMarginDiscussionBackground:e.contentBackground,width:c.Z,display:"flex",padding:"10px 12px",cursor:"pointer"},userAvatarsContainer:{display:"flex",marginRight:6,justifyContent:"center",alignItems:"center",flexDirection:"row-reverse"},hiddenUsers:{fontSize:14,color:e.mediumTextColor,marginRight:6},commentCount:{fontSize:14,fontWeight:D.Z.fontWeight.semibold,whiteSpace:"normal",marginLeft:6},textPlaceholder:{background:e.lightDividerColor,height:14,width:81,borderRadius:4,marginLeft:4},lastEditedTime:{margin:"1px 0px 0px 6px",whiteSpace:"normal",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"21px"},commentAuthorAvatarStyle:{width:20,height:20,borderRadius:20,marginRight:-3,position:"relative",userSelect:"none",WebkitUserSelect:"none"},commentAuthorPlaceholderStyle:{width:20,height:20,borderRadius:20,marginRight:-3,position:"relative"},secondaryLabel:{fontSize:D.Z.fontSize.UISmall.desktop,marginLeft:4,color:e.lightTextColor,marginTop:1,whiteSpace:"normal",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"21px"},expandIcon:{width:D.Z.fontSize.UISmall.desktop,height:D.Z.fontSize.UISmall.desktop,fill:e.lightTextColor,marginTop:1}})),[a]);return(0,K.jsx)("div",{style:x.discussion,onMouseEnter:d,onMouseLeave:u,onClick:m,className:F.S9A,children:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{style:x.userAvatarsContainer,children:g.map((e=>(0,K.jsx)(E.S,{authorStore:e,avatarSize:20,avatarStyle:x.commentAuthorAvatarStyle,placeholderStyle:x.commentAuthorPlaceholderStyle},e.id)))}),p.length>0?(0,K.jsx)("div",{style:x.commentCount,children:(0,K.jsx)(T.FormattedMessage,{defaultMessage:"{numComments, plural, one {{numComments} comment} other {{numComments} comments}}",id:"marginComments.collapsed.numComments.count",values:{numComments:p.length}})}):(0,K.jsx)("div",{style:x.textPlaceholder}),a?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{style:{marginLeft:10,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,I.s)(x.expandIcon)}),(0,K.jsx)("div",{style:x.secondaryLabel,children:(0,K.jsx)(T.FormattedMessage,{defaultMessage:"Expand",id:"marginComments.collapsed.expand.label"})})]}):f&&(0,K.jsx)(B.Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:x.lastEditedTime,children:(0,K.jsx)(_.Z,{text:(0,V.IS)(f),tooltipText:(0,V.uy)(f),icon:k.C})}),h&&(0,K.jsx)("div",{style:x.secondaryLabel,children:(0,K.jsx)(Z.Z,{store:h,maxLength:10})})]})})}var O=o(74725),z=o(18821),U=o(34047),W=o(55541);function H(e){let{discussionData:{parentBlockStore:t,discussionInputStore:o},isVisible:s}=e;window.__c={n:"NewMarginDiscussionItem"};const a=(0,i.useRef)(null),l=(0,n.O7)(),d=(0,i.useCallback)((()=>{z.ZL(l)}),[l]),u=(0,i.useCallback)((()=>{z.uK(o,l)}),[l,o]),m=(0,i.useMemo)((()=>[`.${F.mJW}`]),[]);(0,O.O)({active:s,closeHandler:u,ref:a,excludedSelectors:m,ignoreKeydown:!0});const p=(0,r.yK)((e=>({discussion:{borderRadius:6,boxShadow:e.marginDiscussionSelectedShadow,width:c.Z,background:e.selectedMarginDiscussionBackground},discussionInputContainer:{borderRadius:6,padding:"6px 4px 4px 8px"}})),[]);return(0,K.jsx)("div",{style:p.discussion,ref:a,className:F.S9A,children:(0,K.jsx)(W.default,{parentStore:t,discussionInputStore:o,shouldSaveUnsentComments:!1,isMobileSlideUpMenu:!1,discussionFormat:U.O2.Margin,onSubmit:d,onCancel:u,isNewComment:!0,blockStore:t,canDrop:!0,showAvatar:!1,containerStyle:p.discussionInputContainer,showCtaButtons:!0})})}var $=o(22491),q=o(50906),X=o(54564),G=o(89574),J=o(82994),Q=o(43590);function Y(e){let{discussionData:{discussionStore:t,parentBlockStore:o},timeMounted:s,onClick:a,isVisible:l,isDiscussionSelected:d,isDiscussionHovered:u}=e;window.__c={n:"SingleMarginDiscussionItem"};const m=(0,i.useRef)(null),p=(0,n.O7)(),[g,h]=(0,i.useState)((()=>new J.Z(p,t.pointer.spaceId))),f=t.id,x=(0,i.useMemo)((()=>[`.${(0,$.dk)({discussionId:f})}`,`.${F.mJW}`,`.${F.S9A}`]),[f]),v=(0,i.useCallback)((async()=>{const e=G.Z.find((e=>e.isEditing()));if(e){if(!(await e.handleCancelEdit()))return}X.LZ()}),[]);(0,O.O)({active:l&&d,closeHandler:v,ref:m,excludedSelectors:x,ignoreKeydown:!0});const S=(0,r.yK)((e=>({discussion:{border:d?void 0:`1px solid ${e.lightDividerColor}`,borderRadius:6,padding:d?"1px":void 0,background:d?e.selectedMarginDiscussionBackground:u?e.hoveredMarginDiscussionBackground:e.contentBackground,boxShadow:d?e.marginDiscussionSelectedShadow:void 0,width:c.Z,willChange:"transform",transition:"transform 200ms ease",transform:d?"translateX(-20px)":u?"translateX(-5px)":void 0,cursor:d?void 0:"pointer"}})),[u,d]),b=(0,i.useCallback)((async e=>{d||(q.UwD(p,{discussion_id:t.id,from:"margin_comments",parent_block_id:t.getParentId()}),await a(e,t))}),[a,t,d,p]);return(0,K.jsx)("div",{style:S.discussion,onClick:b,ref:m,className:F.S9A,children:(0,K.jsx)(Q.default,{store:t,blockStore:o,format:U.O2.Margin,isFirst:!1,isOnly:!1,showResolveButtonByDefaultIfPossible:!1,discussionLocation:"margin_comments",showAllRepliesAfterTimestamp:s,discussionInputStore:g,collapsed:!d})})}const ee=i.memo(Y);function te(e){window.__c={n:"MarginDiscussionItem"};const{discussionData:t,isLastItem:o,isDiscussionSelected:n,discussionItemElementMap:s}=e,a=(0,r.yK)((e=>({discussionContainer:{transition:"background 300ms ease\n\t\t\t\t"+(t.hide?"":", top 200ms ease-in-out"),top:t.offsetTop,position:"absolute",paddingBottom:o?c.Vs:c.wo,zIndex:n?1:void 0,opacity:t.hide?0:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",pointerEvents:"auto"}})),[t.hide,t.offsetTop,n,o]);let l;const d=t.type;"existing"===d?l=(0,K.jsx)(ee,{...e,discussionData:t}):"new"===d?l=(0,K.jsx)(H,{...e,discussionData:t}):"grouped"===d?l=(0,K.jsx)(N,{...e,discussionData:t}):(0,j.t1)(d);const u=(0,i.useCallback)((()=>{y.Z.setState({source:"margin_comments",discussionIds:[t.id]})}),[t.id]),m=(0,i.useCallback)((()=>{y.Z.setState({discussionIds:[]})}),[]),p=(0,i.useCallback)((e=>{s.set(t.id,e)}),[t.id,s]);return(0,K.jsx)("div",{style:a.discussionContainer,onMouseEnter:u,onMouseLeave:m,ref:p,children:l})}const oe=i.memo(te),ie=`.${p.zd}, .${p.FB}`;function ne(e){let{pageBlockStore:t,timeMounted:o,isVisible:a,animating:l,pageViewBlockAccessor:d,width:p}=e;window.__c={n:"MarginCommentsContent"};const j=(0,n.O7)(),M=(0,i.useRef)(null),k=(0,i.useRef)(new Map),I=(0,i.useRef)(new Map),L=(0,s.VK)((()=>y.Z.getFirstSelectedDiscussionId()),[]),R=(0,i.useCallback)((async(e,o)=>{(0,f.X9)()||e.target instanceof Element&&e.target.closest(ie)||await C.Ri({discussionStore:o,currentBlockStore:t,environment:j,analyticsFrom:"margin_comments",currentEl:M.current})}),[t,j]),[D,T]=(0,i.useState)({data:[],hasNewDiscussion:!1,selectedDiscussion:void 0}),[Z,B]=(0,i.useState)(!1),{WindowSizeStore:_}=j,F=g.R6(j.device.isElectronMac);(0,i.useEffect)((()=>{if(!a)return;const e=new u.Z((()=>({selectableRectMap:b.Z.state.selectableRectMap,pageContentStores:t.getContentStores(),sidebarIsAnimating:v.ZP.state.isAnimating,windowHeight:_.state.height})),{debugName:"effectDataStore"}),o=new u.Z((()=>c.EM.state),{debugName:"discussionStoresStore"}),i=new u.Z((()=>{const e=w.Z.state;if(e.open&&e.rect&&x.Z.isBlockInFrame(e.blockStore))return{blockStore:e.blockStore,discussionInputStore:e.discussionInputStore}}),{debugName:"newMarginDiscussionArgsStore"}),n=new u.Z((()=>S.Z.getFramePageFirstSelectedDiscussionId()),{debugName:"selectedDiscussionIdStore"});let s=!1;const r=(0,m.Ds)((()=>{const{selectableRectMap:r,pageContentStores:a,sidebarIsAnimating:u,windowHeight:m}=e.state,p=o.state,g=i.state,h=n.state;if(l||u)return;const f=d();if(!(f&&M.current&&r&&r.size))return;(0,c.H0)({discussionStores:p,pageContentStores:a,marginDiscussionItemRefs:k.current,selectedDiscussionId:h,newMarginDiscussionArgs:g,marginContainerElement:M.current,pageViewBlockElement:f,onComputeComplete:(e,t)=>{s||(I.current=t,Z||B(!0),T(e))},computedOnce:Z,topbarHeight:F,windowHeight:m,isFullWidth:t.isFullWidth(),prevSelectedDiscussionId:D.selectedDiscussion,previousDiscussionElements:I.current})}),5);return e.addListener(r),o.addListener(r),n.addListener(r),i.addListener(r),()=>{s=!0,e.removeListener(r),o.removeListener(r),n.removeListener(r),i.removeListener(r)}}),[a,l,d,Z,t,D.selectedDiscussion,_,F]);const P=(0,r.yK)((()=>({marginCommentsContainer:{display:"flex",flexDirection:"column",paddingTop:8,paddingBottom:8,paddingLeft:c.fS,paddingRight:c.fS,width:p-2*c.fS,flexShrink:0,height:"100%",position:"relative",pointerEvents:"none",zIndex:h.p8}})),[p]);return(0,K.jsx)("div",{style:P.marginCommentsContainer,ref:M,children:D.data.map(((e,t)=>(0,K.jsx)(oe,{discussionData:e,timeMounted:o,onClick:R,isVisible:a,discussionItemElementMap:k.current,isDiscussionSelected:e.selected||"new"===e.type,isDiscussionHovered:e.id===L,isLastItem:t===D.data.length-1},`margin-discussion-${e.id}`)))})}const se=i.memo(ne);function re(e){let{pageBlockStore:t,isVisible:o,pageViewBlockAccessor:u,context:m,isCollapsedAnchor:p}=e;window.__c={n:"MarginCommentsSection"};const[g,h]=(0,i.useState)(!1),f=(0,n.O7)(),x=(0,i.useMemo)((()=>(new Date).getTime()),[]),v=(0,s.VK)((()=>t.isFullWidth()||m===d.S.CollectionPageView),[m,t]),S=(0,s.VK)((()=>p?{paddingLeft:v?96:42,height:0}:v?void 0:{position:"absolute",right:(0,c.oS)(f,(0,l.en)(t),(0,l.Ks)(t))}),[v,f,t,p]),b=(0,i.useCallback)((()=>{h(!0)}),[]),C=(0,i.useCallback)((()=>{h(!1)}),[]),y=(0,r.yK)((()=>({marginCommentsSection:{display:o||g?"flex":"none",flexShrink:0,pointerEvents:"none",width:o?c.QB:0,...S}})),[o,g,S]);return(0,K.jsx)(a.Z,{isVisible:!0,animationStyle:{opacity:o?1:0},onAnimationStart:b,onAnimationEnd:C,render:()=>(0,K.jsx)("div",{style:y.marginCommentsSection,children:(0,K.jsx)(se,{pageBlockStore:t,timeMounted:x,isVisible:o,animating:g,pageViewBlockAccessor:u,width:c.QB})})})}},67706:(e,t,o)=>{o.d(t,{Z:()=>l});o(67294);var i=o(24405),n=o(82990),s=o(53437),r=o(26388),a=o(85893);function l(e){let{text:t,tooltipText:o,icon:l}=e;window.__c={n:"InlineTextWithIconTooltip"};const d=(0,i.yK)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.lightBoxShadow},container:{display:"flex",alignItems:"center",fontWeight:n.Z.fontWeight.regular,color:e.mediumTextColor,fontSize:n.Z.fontSize.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,a.jsx)(r.Z,{style:d.tooltip,render:e=>(0,a.jsx)("div",{style:d.text,...e,children:t}),renderTooltip:()=>(0,a.jsxs)("div",{style:d.container,children:[l(d.icon),(0,a.jsx)("div",{children:o})]}),alignment:s.ZP.Alignment.Start,placement:s.ZP.Placement.Bottom})}},12740:(e,t,o)=>{o.d(t,{Z:()=>_});o(57658);var i=o(67294),n=o(480),s=o(86628),r=o(24405),a=o(6695),l=o(72126),d=o(4615),c=o(21202),u=o(19889),m=o(82990),p=o(31412),g=(o(95477),o(66890)),h=o(80444),f=o(886),x=o(88632),v=o(77080),S=o(19671),b=o(26350),C=o(78291),y=o(88893),w=o(97039),j=o(78030),M=o(45653),k=o(29551),I=o(99036),L=(o(51365),o(33929)),R=(o(61766),o(13023),o(24118)),D=(o(53876),o(12867),o(85893));R.Ae;function T(e){return(0,s.VK)((()=>{if(!e)return{collectionStore:void 0,schema:void 0,format:void 0};const t=e.getAssociatedCollectionStore();let o,i;return o=t?t.getSchema():I.Kc(L.default.getIntl()),t&&(i=a.iB(t.getFormat(),o,void 0,a.j5.Collection)),{collectionStore:t,schema:o,format:i}}),[e])}const Z=["Title","Pronoun","Teams (via Teams DB)","Office","Manager","Languages (Fluency)","Tenure"],B={"Teams (via Teams DB)":"Teams","Languages (Fluency)":"Languages"};function _(e){let{targetUserStore:t}=e;window.__c={n:"PeopleProfilePopup"};const o=(0,r.yK)((e=>({wrapper:{minWidth:100,maxWidth:300},profile:{padding:"10px 12px 12px 10px"},content:{padding:"8px 10px 10px"},breadcrumb:{color:e.text.secondary},profileTitle:{paddingLeft:20,fontSize:18,lineHeight:1.25,fontWeight:m.Z.fontWeight.semibold,color:e.text.primary},profileSubtitle:{paddingLeft:20,paddingTop:2,fontSize:m.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:1},profileKeyRow:{minWidth:80},profileKeyText:{textTransform:"capitalize",fontWeight:500},description:{padding:"6px 8px 12px 20px",fontSize:m.Z.fontSize.UISmall.desktop,color:e.icon.primary,borderTop:`1px solid ${e.regularDividerColor}`}})),[]),l=(0,s.VK)((()=>h.default.state.currentSpaceStore),[]),u=(0,s.VK)((()=>h.default.state.currentUserStore),[]),p=(0,s.VK)((()=>!!t&&t.isDefined()),[t]),x=(0,s.VK)((()=>{if(!t)return;const e=t.getEmail();if(!e)return;const o=v.default.getConfigKey("notion_people_block_id","data")[e];if(!o)return;return b.G.createChildStore(t,{table:c.iU,id:(0,d.Mt)(o)})}),[t]),{collectionStore:C,schema:y,format:M}=T(x),I=function(e){let{collectionStore:t,format:o,schema:i,userPeopleCollectionPage:n}=e;return(0,s.VK)((()=>{var e;if(!(t&&o&&i&&n))return;const s=a.iB(o,i,void 0,a.j5.Collection),r=null==s||null===(e=s.collection_page_properties)||void 0===e?void 0:e.filter((e=>{var t;const o=null===(t=i[e.property])||void 0===t?void 0:t.name;return void 0!==o&&Z.includes(o)}));if(!r)return;const l={};return r.forEach((e=>{var o;l[(null===(o=i[e.property])||void 0===o?void 0:o.name)||""]=(0,D.jsx)(w.Z,{store:n,property:e.property,locked:!0,disabled:!0,format:j.C.Page,onTab:()=>{},onUntab:()=>{},tableWrap:!1,blockPropertyValueOverlayStore:S.Z,showRelationTooltip:!1,collectionStore:t})})),l}),[t,i,o,n])}({collectionStore:C,format:M,schema:y,userPeopleCollectionPage:x}),L=(0,n.O7)(),R=(0,i.useMemo)((()=>new f.Z(L)),[L]);(0,i.useEffect)((()=>{C&&R.setContext({type:"collectionPage",collectionStore:C})}),[R,C]);const B=(0,s.VK)((()=>!!(t&&u&&p)&&t.id===u.id),[t,u,p]);return t&&p&&l?x&&R&&I?(0,D.jsx)("div",{style:o.wrapper,children:(0,D.jsx)(g.L1,{value:R,children:(0,D.jsxs)(k.Ht,{children:[(0,D.jsx)(k.gq,{gap:3,alignItems:"center",style:o.profile,children:(0,D.jsx)(F,{userStore:t,styles:o})}),(0,D.jsxs)("div",{style:o.description,children:[(0,D.jsx)(P,{userProfile:I,styles:o}),B?(0,D.jsx)(k.gq,{gap:1,alignItems:"center",children:(0,D.jsx)(V,{spaceStore:l,limit:5,styles:o})}):void 0]})]})})}):(0,D.jsx)("div",{style:o.wrapper,children:(0,D.jsxs)(k.Ht,{children:[(0,D.jsx)(k.gq,{gap:3,alignItems:"center",style:o.profile,children:(0,D.jsx)(F,{userStore:t,styles:o})}),B?(0,D.jsx)("div",{style:o.description,children:(0,D.jsx)(k.gq,{gap:1,alignItems:"center",children:(0,D.jsx)(V,{spaceStore:l,limit:5,styles:o})})}):void 0]})}):null}function F(e){let{userStore:t,styles:o}=e;window.__c={n:"UserContactCard"};const i=(0,p.useIntl)(),{name:n,email:r}=(0,s.VK)((()=>({name:t.getFullName(i),email:t.getEmail()})),[t,i]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M.Z,{userStore:t,size:70,borderStyle:"none"}),(0,D.jsxs)(k.Ht,{gap:1,children:[(0,D.jsx)("div",{style:o.profileTitle,children:n}),(0,D.jsx)("div",{style:o.profileSubtitle,children:r})]})]})}function P(e){let{userProfile:t,styles:o}=e;return t?(0,D.jsx)(D.Fragment,{children:Z.filter((e=>t[e])).map((e=>(0,D.jsxs)(k.gq,{gap:1,alignItems:"center",children:[(0,D.jsx)(k.Ht,{children:(0,D.jsx)(k.gq,{style:o.profileKeyRow,children:(0,D.jsx)("div",{style:o.profileKeyText,children:B[e]?B[e]:e})})}),(0,D.jsx)(k.Ht,{style:{transform:"scale(0.9)",transformOrigin:"center left"},children:t[e]})]},e)))}):null}function V(e){let{spaceStore:t,limit:o,styles:i}=e;window.__c={n:"UserSimilarity"};const{userSimilarityList:n}=(0,s.VK)((()=>{var e,i;const n=null===(e=C.default.state)||void 0===e?void 0:e.data,s=n?y.CM(n):[],r=(null==n?void 0:n.userSimilarity)||{},a=s.map((e=>{const t=r[e.userId];return{id:e.userId,similarity:t||0}})).sort(((e,t)=>t.similarity-e.similarity)).slice(0,o),d=[],c=l.yW(a.map((e=>{const o=b.U6.createChildStore(t,{table:u.KJ,id:e.id});return d.push({id:e.id,similarity:e.similarity,userStore:o}),o.isReady()})));return{isOnline:x.Z.state.online,subscriptionDataStoreData:n,userSimilarityData:(null===(i=C.default.state.data)||void 0===i?void 0:i.userSimilarity)||{},visibleUsersLoaded:c,visibleUsers:s,userSimilarityList:d}}),[t,o]);return t&&n&&0!==n.length?(0,D.jsxs)(k.gq,{gap:1,alignItems:"center",style:{paddingTop:4},children:[(0,D.jsx)(k.Ht,{children:(0,D.jsx)(k.gq,{style:i.profileKeyRow,children:(0,D.jsx)("div",{style:i.profileKeyText,children:"Coworkers"})})}),(0,D.jsx)(k.Ht,{children:(0,D.jsx)(k.gq,{gap:5,children:(0,D.jsx)("div",{children:(0,D.jsx)("div",{style:{display:"flex",position:"relative",float:"right"},children:n.map((e=>(0,D.jsx)("div",{style:{marginLeft:1.5},children:(0,D.jsx)(M.Z,{userStore:e.userStore,size:18})},e.id)))})})})})]}):null}},93963:(e,t,o)=>{o.d(t,{z:()=>r});o(67294);var i=o(24405),n=o(31412),s=o(85893);function r(e){let{color:t,size:o,style:r}=e;window.__c={n:"StatusDot"};const a=(0,n.useIntl)(),l=(0,i.yK)((e=>({dot:{height:o||8,width:o||8,background:t||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...r}})),[o,t,r]);return(0,s.jsx)("div",{role:"img","aria-label":a.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:l.dot})}},66957:(e,t,o)=>{o.d(t,{Z:()=>u});var i=o(67294),n=o(480),s=o(86628),r=o(24405),a=o(87279),l=o(89728),d=o(85893);function c(e){let{tabs:t,selectedIndex:o,onChange:c,separatorIndexes:u,right:m,style:p,rightStyle:g,tabStyle:h,tabTitleStyle:f,tabBorderStyle:x,selectedTabStyle:v,readOnly:S,hideTabBorder:b}=e;window.__c={n:"TabBarMenuItem"};const C=(0,i.useContext)(a.Xp),{device:y,WindowSizeStore:w}=(0,n.O7)(),{safePaddingLeft:j,safePaddingRight:M}=(0,s.VK)((()=>({safePaddingLeft:w.getSafePaddingLeftCSS(16),safePaddingRight:w.getSafePaddingRightCSS(16)})),[w]),k=(0,r.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...h},o=`inset 0 -1px 0 ${e.regularDividerColor}`,i=C.menuType===a.og.Popup,n={fontSize:16,paddingTop:2,paddingLeft:i?16:j,paddingRight:i?16:M,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:b?void 0:o,...y.isMobile?n:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...p},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...v},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...x},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...g}}}),[C.menuType,y.isMobile,g,j,M,v,p,x,h,b]);return(0,d.jsxs)("div",{className:"hide-scrollbar",style:k.container,children:[t.map(((e,t)=>{const n=t===o;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)("div",{style:n?k.selectedTab:k.tab,children:[(0,d.jsx)(l.Z,{style:f,onClick:()=>c(t),disabled:S,mobileFeedback:y.isMobile,children:e}),n&&(0,d.jsx)("div",{style:k.border})]},`tabButton-${t}`),u&&u.includes(t)&&(0,d.jsx)("div",{style:k.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),m&&(0,d.jsx)("div",{style:k.rightContainer,children:m})]})}const u=i.memo(c)},83420:(e,t,o)=>{o.d(t,{TL:()=>u,nc:()=>c,ue:()=>d});var i=o(66897),n=o(54368),s=o(77420),r=o(19889),a=o(97880),l=o(26350);function d(e){const{parentStore:t,pointer:o}=e,n=(0,l.Kv)(t,o).getValue();if(n)return(0,i.LU)({table:o.table,value:n})}function c(e){const{parentStore:t,pointer:o}=e;return o.table===s.cZ?l.Qx.createChildStore(t,o):o.table===r.KJ?l.U6.createChildStore(t,o):o.table===n.y?l.fg.createChildStore(t,o):void(0,a.t1)(o)}function u(e){return e.table===s.cZ?(0,i.ON)(e.getValue()):e.table===r.KJ?(0,i.m3)(e.getValue()):e.table===n.y?(0,i.I4)(e.getValue()):void(0,a.t1)(e)}},14568:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(35431);class n extends i.Z{}const s=new n},63334:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(49085);class n extends i.default{getInitialState(){return{}}}const s=n},7189:(e,t,o)=>{o.d(t,{K:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},37652:(e,t,o)=>{o.d(t,{V:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("arrowLeft",{viewBox:"0 0 30 30",svg:(0,n.jsx)("polygon",{points:"29 14 4.813 14 13.406 5.406 12 4 1 15 12 26 13.406 24.594 4.813 16 29 16"})})},91315:(e,t,o)=>{o.d(t,{r:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},64275:(e,t,o)=>{o.d(t,{D:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("closeSmall",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},31505:(e,t,o)=>{o.d(t,{Y:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("collectionTimelineArrowLeft",{viewBox:"0 0 9 7",svg:(0,n.jsx)("path",{d:"M0 3.5021C0 3.70786 0.0939831 3.93041 0.237195 4.06479L3.11934 6.76065C3.28493 6.91602 3.48633 7 3.67877 7C4.17106 7 4.48881 6.68506 4.48881 6.27774C4.48881 6.03839 4.37245 5.86203 4.22029 5.72345L3.19095 4.77025L2.56887 4.22855L3.47737 4.27055L8.13625 4.27055C8.6554 4.27055 9 3.96401 9 3.5021C9 3.04019 8.6554 2.73365 8.13625 2.73365L3.47737 2.73365L2.56887 2.77564L3.19095 2.23395L4.22029 1.27654C4.37245 1.13377 4.48881 0.961608 4.48881 0.722255C4.48881 0.314937 4.17106 0 3.67877 0C3.48633 0 3.28493 0.0839832 3.11487 0.239352L0.237195 2.93941C0.0939831 3.07378 0 3.29634 0 3.5021Z"})})},39301:(e,t,o)=>{o.d(t,{n:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("collectionTimelineArrowRight",{viewBox:"0 0 9 7",svg:(0,n.jsx)("path",{d:"M9 3.4979C9 3.29214 8.90602 3.06959 8.7628 2.93521L5.88066 0.239352C5.71507 0.0839835 5.51368 3.13148e-07 5.32123 2.96324e-07C4.82894 2.53287e-07 4.51119 0.314937 4.51119 0.722256C4.51119 0.961608 4.62755 1.13797 4.77971 1.27654L5.80905 2.22975L6.43113 2.77145L5.52263 2.72945L0.863749 2.72945C0.344604 2.72945 -6.62078e-07 3.03599 -7.02459e-07 3.4979C-7.4284e-07 3.95981 0.344604 4.26635 0.863749 4.26635L5.52263 4.26635L6.43113 4.22436L5.80905 4.76605L4.77971 5.72346C4.62755 5.86623 4.51119 6.03839 4.51119 6.27774C4.51119 6.68506 4.82894 7 5.32123 7C5.51367 7 5.71507 6.91602 5.88513 6.76065L8.7628 4.06059C8.90602 3.92622 9 3.70366 9 3.4979Z"})})},52455:(e,t,o)=>{o.d(t,{X:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("fileAttachment",{viewBox:"0 0 28 28",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{width:"28",height:"28",fill:"none"}),(0,n.jsx)("path",{d:"M7.70703 27.3799H21.2783C23.7412 27.3799 24.9854 26.1104 24.9854 23.6348V11.7266C24.9854 10.3555 24.8076 9.74609 23.9697 8.88281L16.5049 1.3418C15.6924 0.516602 15.0322 0.326172 13.8008 0.326172H7.70703C5.26953 0.326172 4 1.58301 4 4.05859V23.6348C4 26.1104 5.25684 27.3799 7.70703 27.3799ZM7.7832 25.8057C6.32324 25.8057 5.57422 25.0312 5.57422 23.5967V4.09668C5.57422 2.7002 6.32324 1.8877 7.7959 1.8877H13.7246V9.53027C13.7246 10.9775 14.4609 11.6631 15.8701 11.6631H23.4238V23.5967C23.4238 25.0312 22.6621 25.8057 21.2021 25.8057H7.7832ZM16.0352 10.1777C15.4512 10.1777 15.21 9.94922 15.21 9.36523V2.20508L23.1064 10.1777H16.0352Z"})]})})},22962:(e,t,o)=>{o.d(t,{O:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("mention",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M1 9.86523C1 15.2939 4.72705 18.6807 9.98975 18.6807C11.3511 18.6807 12.4634 18.5312 13.1606 18.2905C13.6919 18.1079 13.8828 17.8174 13.8828 17.4521C13.8828 17.0537 13.6089 16.7715 13.1523 16.7715C13.0195 16.7715 12.8784 16.7881 12.6958 16.8213C11.9238 16.9873 11.2266 17.1118 10.2637 17.1118C5.74805 17.1118 2.74316 14.4058 2.74316 9.91504C2.74316 5.56543 5.61523 2.56055 9.88184 2.56055C13.7417 2.56055 16.7383 4.97607 16.7383 9.11816C16.7383 11.3511 15.9995 12.8452 14.8125 12.8452C14.0239 12.8452 13.5757 12.3472 13.5757 11.4839V6.44531C13.5757 5.84766 13.252 5.49072 12.6709 5.49072C12.0981 5.49072 11.7578 5.84766 11.7578 6.44531V7.10107H11.6333C11.21 6.09668 10.2305 5.49072 9.01855 5.49072C6.90186 5.49072 5.43262 7.28369 5.43262 9.89844C5.43262 12.5547 6.91846 14.3892 9.11816 14.3892C10.3799 14.3892 11.3013 13.7417 11.7578 12.6045H11.8823C12.1147 13.7168 13.0942 14.3809 14.4307 14.3809C16.8877 14.3809 18.3984 12.1895 18.3984 8.96045C18.3984 4.1626 14.8706 1 9.89014 1C4.66064 1 1 4.56104 1 9.86523ZM9.5415 12.7207C8.26318 12.7207 7.46631 11.6499 7.46631 9.92334C7.46631 8.21338 8.27148 7.14258 9.5498 7.14258C10.8364 7.14258 11.6582 8.20508 11.6582 9.89844C11.6582 11.625 10.8281 12.7207 9.5415 12.7207Z"})})},40350:(e,t,o)=>{o.d(t,{V:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("reactionAdd",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M8.7207 12.0259C8.7207 12.4243 9.04492 12.7446 9.43945 12.7446H11.4199V14.7251C11.4199 15.1235 11.7441 15.4438 12.1426 15.4438C12.5371 15.4438 12.8613 15.1235 12.8613 14.7251V12.7446H14.8418C15.2363 12.7446 15.5605 12.4243 15.5605 12.0259C15.5605 11.6274 15.2363 11.3032 14.8418 11.3032H12.8613V9.32666C12.8613 8.92822 12.5371 8.604 12.1426 8.604C11.7441 8.604 11.4199 8.92822 11.4199 9.32666V11.3032H9.43945C9.04492 11.3032 8.7207 11.6274 8.7207 12.0259Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.02947 13.6952C8.43019 13.8731 7.79681 13.9688 7.14258 13.9688C3.46729 13.9688 0.439453 10.9409 0.439453 7.25928C0.439453 3.58398 3.46094 0.556152 7.14258 0.556152C10.8179 0.556152 13.8457 3.58398 13.8457 7.25928C13.8457 7.72257 13.7979 8.1755 13.7069 8.61336C13.439 8.02567 12.8508 7.61289 12.1648 7.60415C12.1724 7.49021 12.1763 7.37521 12.1763 7.25928C12.1763 4.47266 9.9292 2.22559 7.14258 2.22559C4.34961 2.22559 2.11523 4.47266 2.11523 7.25928C2.11523 10.0522 4.35596 12.2993 7.14258 12.2993C7.34385 12.2993 7.54226 12.2876 7.73717 12.2649C7.83478 12.9674 8.35636 13.53 9.02947 13.6952ZM6.02539 5.83105C6.02539 6.31982 5.67627 6.67529 5.28271 6.67529C4.88916 6.67529 4.55908 6.31982 4.55908 5.83105C4.55908 5.33594 4.88916 4.98047 5.28271 4.98047C5.67627 4.98047 6.02539 5.33594 6.02539 5.83105ZM9.73242 5.83105C9.73242 6.31982 9.3833 6.67529 8.99609 6.67529C8.60254 6.67529 8.26611 6.31982 8.26611 5.83105C8.26611 5.33594 8.59619 4.98047 8.99609 4.98047C9.38965 4.98047 9.73242 5.33594 9.73242 5.83105ZM9.37695 8.9668C9.37695 9.39844 8.48193 10.2808 7.14258 10.2808C5.79688 10.2808 4.90186 9.39844 4.90186 8.9668C4.90186 8.80811 5.06055 8.72559 5.21289 8.80176L5.22971 8.81029C5.68936 9.04333 6.22701 9.31592 7.14258 9.31592C8.01512 9.31592 8.53968 9.05921 8.99207 8.83782C9.01689 8.82568 9.04149 8.81364 9.06592 8.80176C9.21826 8.73193 9.37695 8.80811 9.37695 8.9668Z"})]})})},18101:(e,t,o)=>{o.d(t,{b:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("reopen",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M1.64844 7.88477C1.64844 10.791 3.98047 13.1289 6.88086 13.1289C9.78125 13.1289 12.1133 10.791 12.1133 7.88477C12.1133 7.53906 11.873 7.29297 11.5273 7.29297C11.1934 7.29297 10.9707 7.53906 10.9707 7.88477C10.9707 10.1582 9.14844 11.9805 6.88086 11.9805C4.61328 11.9805 2.79688 10.1582 2.79688 7.88477C2.79688 5.59961 4.60156 3.78906 6.86328 3.78906C7.25 3.78906 7.60742 3.81836 7.90625 3.88281L6.3125 5.46484C6.20703 5.57617 6.1543 5.69922 6.1543 5.85156C6.1543 6.17383 6.39453 6.41992 6.71094 6.41992C6.875 6.41992 7.00977 6.36719 7.10938 6.26172L9.51758 3.83594C9.64062 3.71289 9.69922 3.57227 9.69922 3.41406C9.69922 3.26172 9.63477 3.10938 9.51758 2.99219L7.10938 0.548828C7.00977 0.4375 6.875 0.378906 6.71094 0.378906C6.39453 0.378906 6.1543 0.636719 6.1543 0.953125C6.1543 1.10547 6.20703 1.24023 6.30664 1.3457L7.72461 2.74609C7.4668 2.69336 7.16797 2.66406 6.86328 2.66406C3.96875 2.66406 1.64844 4.98438 1.64844 7.88477Z"})})},58167:(e,t,o)=>{o.d(t,{i:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("resolve",{viewBox:"0 0 16 16",svg:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("path",{d:"M6.6123 14.2646C7.07715 14.2646 7.43945 14.0869 7.68555 13.7109L14.0566 3.96973C14.2344 3.69629 14.3096 3.44336 14.3096 3.2041C14.3096 2.56152 13.8311 2.09668 13.1748 2.09668C12.7236 2.09668 12.4434 2.26074 12.1699 2.69141L6.57812 11.5098L3.74121 7.98926C3.48828 7.68848 3.21484 7.55176 2.83203 7.55176C2.16895 7.55176 1.69043 8.02344 1.69043 8.66602C1.69043 8.95312 1.7793 9.20605 2.02539 9.48633L5.55273 13.7588C5.84668 14.1074 6.1748 14.2646 6.6123 14.2646Z"})})})},83065:(e,t,o)=>{o.d(t,{_:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("sendArrow",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},60973:(e,t,o)=>{o.d(t,{g:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("videoAttachment",{viewBox:"0 0 28 28",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{width:"28",height:"28",fill:"none"}),(0,n.jsx)("path",{d:"M14.1333 26.4668C21.103 26.4668 26.8667 20.7031 26.8667 13.7334C26.8667 6.75098 21.103 1 14.1206 1C7.15088 1 1.3999 6.75098 1.3999 13.7334C1.3999 20.7031 7.16357 26.4668 14.1333 26.4668ZM14.1333 24.8164C7.98877 24.8164 3.05029 19.8652 3.05029 13.7334C3.05029 7.58887 7.98877 2.6377 14.1206 2.6377C20.2651 2.6377 25.2163 7.58887 25.229 13.7334C25.229 19.8652 20.2778 24.8164 14.1333 24.8164ZM18.9702 14.3936C19.4653 14.1016 19.4526 13.4287 18.9702 13.1367L11.7212 8.79492C11.2261 8.49023 10.5786 8.73145 10.5786 9.27734V18.2275C10.5786 18.7734 11.188 19.0273 11.7212 18.71L18.9702 14.3936Z"})]})})},80503:(e,t,o)=>{o.d(t,{Aj:()=>n,R6:()=>r,TT:()=>i,br:()=>s,u3:()=>a});const i=52,n=45,s=37;function r(e,t){return t?i:e?s:n}function a(e){return 2*r(e)}}}]);