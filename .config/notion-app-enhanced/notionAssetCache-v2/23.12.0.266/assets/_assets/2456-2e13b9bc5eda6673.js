"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2456],{2456:(e,t,r)=>{r.d(t,{Hq:()=>U,KX:()=>z,SP:()=>W,SX:()=>I,Tl:()=>A,ZD:()=>H,ZP:()=>K,pH:()=>E,xP:()=>D});var o=r(67294),i=r(83355),l=r(13991),s=r(24405),n=r(17215),a=r(41432),d=r(99036),c=r(80951),u=r(25501),h=r(39068),p=r(6695),m=r(42875),g=r(54851),x=r(91),y=r(22808),b=r(59753),v=r(21202),f=r(6287),S=r(23867),k=r(97880),j=r(82990),T=r(31412),B=r(42130),V=r(33929),w=r(41662),R=r(30874),P=r(81865),M=r(31278),C=r(14200),Z=r(85893);const _=(0,T.defineMessages)({[a.Ti.quote]:{defaultMessage:"Quote",id:"edit.quoteBlock.label"},[a.Ti.callout]:{defaultMessage:"Callout",id:"edit.calloutBlock.label"},[a.Ti.button]:{defaultMessage:"Button",id:"edit.buttonBlock.label"},[a.Ti.factory]:{defaultMessage:"Template Button",id:"edit.templateButtonBlock.label"},[a.Ti.bookmark]:{defaultMessage:"Bookmark",id:"edit.bookmarkBlockProperty.label"},[a.Ti.equation]:{defaultMessage:"Equation",id:"edit.equationBlock.label"}});function E(e){return _[e]&&V.default.formatMessage(_[e])}function I(e,t){return b.kk.fromBlock(e).getProperties()[t]||[]}class F extends i.Z{constructor(){super(...arguments),this.inCommentsSidebar=()=>"comments_sidebar"===this.props.blockPreviewLocation,this.getRecordValue=this.props.rootStore.getRecordValue,this.getRecordModel=b.om.fromGetRecordValueFn(this.getRecordValue)}renderComponent(){const{blockValue:e}=this.props;switch(e.type){case a.Ti.text:return(0,Z.jsx)(Q,{rootStore:this.props.rootStore,blockValue:e});case a.Ti.header:return(0,Z.jsx)(Y,{rootStore:this.props.rootStore,blockValue:e});case a.Ti.subHeader:return(0,Z.jsx)(J,{rootStore:this.props.rootStore,blockValue:e});case a.Ti.subSubHeader:return(0,Z.jsx)(ee,{rootStore:this.props.rootStore,blockValue:e});case a.Ti.toggle:return(0,Z.jsx)(te,{rootStore:this.props.rootStore,blockValue:e});case a.Ti.bulletedList:return(0,Z.jsx)(re,{rootStore:this.props.rootStore,blockValue:e});case a.Ti.numberedList:return(0,Z.jsx)(oe,{rootStore:this.props.rootStore,blockValue:e});case a.Ti.quote:return this.renderQuoteBlock(e);case a.Ti.factory:return this.renderFactoryBlock(e);case a.Ti.button:{const t=b.kk.fromBlock(e).getAutomationPointer();if(t){const e=this.getRecordModel(t);if(e)return this.renderButtonBlock(e)}break}case a.Ti.equation:return this.renderEquationBlock(e);case a.Ti.toDo:return(0,Z.jsx)(ie,{rootStore:this.props.rootStore,blockValue:e});case a.Ti.code:return this.renderCodeBlock(e);case a.Ti.bookmark:return this.renderBookmarkBlock(e);case a.Ti.page:return this.renderPageBlock(b.kk.fromBlock(e));case a.Ti.collectionView:case a.Ti.collectionViewPage:{const t=b.kk.fromBlock(e).getCollectionPointer();if(t){const e=this.getRecordModel(t);if(e)return this.renderCollectionBlock(e)}break}case a.Ti.image:return(0,Z.jsx)(le,{rootStore:this.props.rootStore,blockPreviewLocation:this.props.blockPreviewLocation,blockValue:e});case a.Ti.embed:return this.renderEmbedBlock(e,"embed");case a.Ti.framer:return this.renderEmbedBlock(e,"framer");case a.Ti.tweet:return this.renderEmbedBlock(e,"tweet");case a.Ti.gist:return this.renderEmbedBlock(e,"gist");case a.Ti.drive:return this.renderDriveBlock(e);case a.Ti.maps:return this.renderEmbedBlock(e,"maps");case a.Ti.invision:return this.renderEmbedBlock(e,"invision");case a.Ti.video:return this.renderEmbedBlock(e,"video");case a.Ti.audio:return this.renderEmbedBlock(e,"audio");case a.Ti.file:return this.renderEmbedBlock(e,"file");case a.Ti.callout:return this.renderCalloutBlock(e);case a.Ti.whimsical:return this.renderEmbedBlock(e,"whimsical");case a.Ti.miro:return this.renderEmbedBlock(e,"miro");case a.Ti.abstract:return this.renderEmbedBlock(e,"abstract");case a.Ti.mixpanel:return this.renderEmbedBlock(e,"mixpanel");case a.Ti.sketch:return this.renderEmbedBlock(e,"sketch");case a.Ti.excalidraw:return this.renderEmbedBlock(e,"excalidraw");case a.Ti.replit:return this.renderEmbedBlock(e,"replit");case a.Ti.pdf:return this.renderEmbedBlock(e,"pdf");case a.Ti.table:return this.renderSimpleTableBlock(e);case a.Ti.tableRow:return this.renderSimpleTableRowBlock(e);case a.Ti.externalObjectInstance:return this.renderExternalObjectInstanceBlock(e);case a.Ti.linkToPage:case a.Ti.personalHomePage:case a.Ti.linkToCollection:case a.Ti.divider:case a.Ti.columnList:case a.Ti.column:case a.Ti.copyIndicator:case a.Ti.breadcrumb:case a.Ti.figma:case a.Ti.loom:case a.Ti.typeform:case a.Ti.codepen:case a.Ti.tableOfContents:case a.Ti.alias:case a.Ti.transclusionContainer:case a.Ti.transclusionReference:case a.Ti.hex:case a.Ti.tab:case a.Ti.deepnote:case a.Ti.externalObjectInstancePage:case a.Ti.aiBlock:case a.Ti.drawing:return;default:(0,k.t1)(e)}}getEditBoxStyle(){return this.inCommentsSidebar()?{marginTop:0,marginBottom:0}:void 0}renderCalloutBlock(e){return(0,Z.jsx)(u.Z,{title:E(a.Ti.callout),theme:this.theme,created:this.props.created,style:this.getEditBoxStyle(),deleted:this.props.deleted,children:(0,Z.jsx)(G,{rootStore:this.props.rootStore,blockValue:e})})}renderQuoteBlock(e){return(0,Z.jsx)(u.Z,{title:E(a.Ti.quote),theme:this.theme,style:this.getEditBoxStyle(),created:this.props.created,deleted:this.props.deleted,children:(0,Z.jsx)(G,{rootStore:this.props.rootStore,blockValue:e})})}renderFactoryBlock(e){return(0,Z.jsx)(u.Z,{title:E(a.Ti.factory),theme:this.theme,style:this.getEditBoxStyle(),created:this.props.created,deleted:!0,children:(0,Z.jsx)(G,{rootStore:this.props.rootStore,blockValue:e})})}renderButtonBlock(e){var t;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(u.Z,{title:E(a.Ti.button),theme:this.theme,style:this.getEditBoxStyle(),created:this.props.created,deleted:this.props.deleted,children:(null===(t=e.getProperties())||void 0===t?void 0:t.name)??(0,Z.jsx)(T.FormattedMessage,{defaultMessage:"Untitled",id:"edit.buttonBlock.defaultTitle"})}),(0,Z.jsx)(T.FormattedMessage,{defaultMessage:"{numberOfActions, plural, one {{numberOfActions} workflow step} other {{numberOfActions} workflow steps}}",id:"edit.buttonBlock.actionCount",values:{numberOfActions:(e.getActionIds()||[]).length}})]})}renderEquationBlock(e){return(0,Z.jsx)(u.Z,{title:E(a.Ti.equation),theme:this.theme,style:this.getEditBoxStyle(),created:this.props.created,deleted:this.props.deleted,children:(0,Z.jsx)(G,{rootStore:this.props.rootStore,blockValue:e})})}renderCodeBlock(e){return(0,Z.jsx)(u.Z,{title:W(e),theme:this.theme,style:this.getEditBoxStyle(),created:this.props.created,deleted:this.props.deleted,children:(0,Z.jsx)("span",{style:{fontFamily:j.Z.getCompositeFontFamily(l.SP).mono,fontSize:12,tabSize:2},children:(0,Z.jsx)(G,{rootStore:this.props.rootStore,blockValue:e})})})}renderEmbedBlock(e,t){const{intl:r}=this.props;return(0,Z.jsxs)(o.Fragment,{children:[(0,Z.jsx)(u.Z,{title:n.xg(r,t),theme:this.theme,style:this.getEditBoxStyle(),created:this.props.created,deleted:this.props.deleted,children:(0,Z.jsx)(X,{blockValue:e})}),(0,Z.jsx)("div",{style:{marginBottom:4},children:(0,Z.jsx)($,{rootStore:this.props.rootStore,blockValue:e})})]})}renderBookmarkBlock(e){const t=q(e,"title")&&(0,Z.jsx)(u.Z,{title:E(a.Ti.bookmark),theme:this.theme,style:this.getEditBoxStyle(),created:this.props.created,children:(0,Z.jsx)(G,{rootStore:this.props.rootStore,blockValue:e})});return(0,Z.jsxs)(o.Fragment,{children:[t,q(e,"caption")&&(0,Z.jsx)("div",{style:{marginBottom:t?4:0},children:(0,Z.jsx)($,{rootStore:this.props.rootStore,blockValue:e})})]})}renderDriveBlock(e){const t=(0,p.v0)(e);return t&&t.title?(0,Z.jsx)("div",{children:(0,Z.jsx)(u.Z,{title:(0,Z.jsx)(T.FormattedMessage,{defaultMessage:"Google Drive file",id:"edit.googleDriveFile.label"}),created:!this.props.deleted,deleted:this.props.deleted,theme:this.theme,style:this.getEditBoxStyle(),children:t.title})}):e.content?this.renderEmbedBlock(e,"drive"):void 0}renderPageBlock(e){var t;const r=this.getRecordModel({table:v.iU,id:e.id})||e,o=r.getRenderTitle({getRecordModel:this.getRecordModel,userTimeZone:(0,m.r)(),intl:this.props.intl})||(0,Z.jsx)(T.FormattedMessage,{defaultMessage:"Untitled",id:"edit.pageBlock.untitled"});return(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,Z.jsx)("div",{style:{paddingRight:6},children:(0,Z.jsx)(L,{icon:null==r||null===(t=r.getFormat())||void 0===t?void 0:t.page_icon,rootStore:this.props.rootStore,blockValue:this.props.blockValue})}),(0,Z.jsx)("div",{className:"notranslate",style:{flex:1,textOverflow:"ellipsis",overflow:"hidden"},children:o})]})}renderCollectionBlock(e){const t=this.getRecordModel({table:f.v,id:e.id})||e,r=t.getRenderTitle({intl:this.props.intl,getRecordModel:this.getRecordModel,userTimeZone:(0,m.r)()})||(0,Z.jsx)(T.FormattedMessage,{defaultMessage:"Untitled",id:"edit.collectionBlock.untitled"});return(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)("div",{style:{paddingRight:4},children:(0,Z.jsx)(L,{icon:t.icon,rootStore:this.props.rootStore,blockValue:this.props.blockValue})}),(0,Z.jsx)("div",{style:{flex:1},children:r})]})}renderSimpleTableBlock(e){var t,r,o;const i=(null===(t=e.content)||void 0===t?void 0:t.length)||0,l=(null===(r=e.format)||void 0===r||null===(r=r.table_block_column_order)||void 0===r?void 0:r.length)||0;if(!i||!l)return;const s=e.content?e.content.map((t=>this.getRecordModel({table:e.parent_table,id:t,spaceId:e.space_id}))):[],n=null===(o=e.format)||void 0===o?void 0:o.table_block_column_order;return(0,Z.jsx)("div",{style:{overflow:"scroll"},children:(0,Z.jsx)("table",{children:(0,Z.jsx)("tbody",{children:s.map((e=>e?(0,Z.jsx)("tr",{children:null==n?void 0:n.map((t=>this.renderSimpleTableCell(e,t)))},e.id):void 0))})})})}renderSimpleTableRowBlock(e){var t;if(!e.properties||0===(0,k.Yd)(e.properties).length)return;const r=this.getRecordModel({table:e.parent_table,id:e.parent_id,spaceId:e.space_id});if(!r)return;const o=null===(t=r.getFormat())||void 0===t?void 0:t.table_block_column_order;return(0,Z.jsx)("div",{style:{display:"flex",alignItems:"stretch",margin:4},children:(0,Z.jsx)("table",{children:(0,Z.jsx)("tr",{children:null==o?void 0:o.map((t=>this.renderSimpleTableCell(b.kk.fromBlock(e),t)))})})})}renderExternalObjectInstanceBlock(e){const t=b.kk.fromBlock(e);return(0,Z.jsx)(u.Z,{title:(0,Z.jsx)(T.FormattedMessage,{...n.V1.editLabel}),theme:this.theme,created:this.props.created,style:this.getEditBoxStyle(),deleted:this.props.deleted,children:n.$F(V.default.getIntl(),t,b.om.fromRecordMap(R.Z.getIntegrationsAsRecordMap()))})}renderSimpleTableCell(e,t){const r=I(e,t),o=r&&r.length>0?w.g$.renderCellValueForActivity({environment:this.environment,cellValue:r,spaceId:e.space_id,parentStore:this.props.rootStore,theme:this.theme}):(0,Z.jsx)("span",{children:" "});return(0,Z.jsx)("td",{style:{border:`1px solid ${this.theme.tableDividerColor}`,height:"100%"},children:(0,Z.jsx)("div",{style:{overflowWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis",width:"max-content",maxWidth:120,verticalAlign:"top",lineHeight:j.Z.lineHeight.UIRegular.desktop,padding:4},children:o})},t)}}function z(e){let{value:t,propertySchema:r,labeled:o,rootStore:i,disableStyleAnnotations:l,disableDateStyleAnnotations:s}=e;return(0,Z.jsx)(U,{labeled:o,type:r.type,icon:r.icon,name:r.name,children:(0,Z.jsx)(C.Z,{propertySchema:r,value:t,rootStore:i,disableStyleAnnotations:l,disableDateStyleAnnotations:s})})}function A(e){let{blockValue:t,prop:r,labeled:o,schema:i,rootStore:l}=e;window.__c={n:"BlockProperty"};const s=(0,T.useIntl)(),n=(i||d.Kc(s))[r];if(n){const e=I(t,r);return(0,Z.jsx)(z,{value:{value:e,spaceId:(0,S.C)(t.space_id)},propertySchema:n,labeled:o,rootStore:l})}return null}function H(e){let{children:t}=e;const r=(0,Z.jsx)("div",{style:{width:"1em",height:"1em",display:"flex",alignSelf:"stretch",justifyContent:"center",flexShrink:0,marginLeft:6,marginRight:6,marginTop:6},children:(0,x.L)({width:"0.6875em",height:"0.6875em",transform:"rotateZ(90deg)"})});return(0,Z.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[r,(0,Z.jsx)("span",{children:t})]})}function D(e){let{src:t,permissionRecord:r}=e;window.__c={n:"BlockPreviewImage"};const o=(0,s.Fg)();return t?(0,Z.jsx)(P.Z,{url:t,isAuthenticated:!0,permissionRecord:r,width:170,render:(e,t)=>{if(t)return(0,Z.jsx)("img",{src:t,style:{maxHeight:170,maxWidth:170}})}}):(0,Z.jsx)("div",{style:{backgroundColor:o.lightTextColor,height:170,width:170}})}function L(e){let{icon:t,rootStore:r,blockValue:o}=e;if(t){if((0,y.Z)(t))return(0,Z.jsx)("div",{style:{fontSize:16.2,display:"inline-block"},children:t});{const e=b.kk.fromBlock(o).getRenderIcon({getRecordModel:r.getRecordModel});return(0,Z.jsx)(M.Z,{disabled:!0,icon:e,isEmptyPage:!1,size:18,style:{marginTop:6,marginBottom:6}})}}return(0,g.S)({height:18,width:18})}function U(e){let{children:t,type:r,icon:o,name:i,labeled:l,style:n}=e;window.__c={n:"BlockPreviewPropertyLabel"};const a=(0,s.Fg)();return l?(0,Z.jsxs)("div",{style:n,children:[(0,Z.jsxs)("div",{style:{display:"flex",color:a.lightTextColor,paddingTop:7,fontSize:12,lineHeight:1,marginBottom:2},children:[(0,Z.jsx)(h.ZP,{type:r,icon:o,size:14,theme:a}),(0,Z.jsx)("div",{style:{marginLeft:6},children:i})]}),(0,Z.jsx)("div",{style:{display:"flex",alignItems:"center",minHeight:24},children:t})]}):(0,Z.jsx)("div",{style:n,children:t})}function W(e){const t=e&&e.properties&&e.properties.language;if(!t)return(0,Z.jsx)(T.FormattedMessage,{defaultMessage:"Code",id:"edit.codeBlockChanged.label"});const r=c.Sj(t,d.fG);return(0,Z.jsx)(T.FormattedMessage,{defaultMessage:"Code - {codeLanguage}",values:{codeLanguage:r},id:"edit.codeBlockWithLanguageChanged.label"})}F.displayName="BlockPreview";const K=(0,T.injectIntl)(F);function O(e){const t=e&&e.properties&&e.properties.source;return c.zB(t)}function q(e,t){return Boolean(e&&e.properties&&e.properties[t])}function X(e){let{blockValue:t}=e;const r=O(t);return(0,Z.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,Z.jsx)("span",{style:{wordBreak:"break-word"},children:r})})}function G(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)(A,{rootStore:r,blockValue:t,prop:"title",labeled:!1})}function N(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)("div",{style:{marginRight:6,marginTop:3},children:(0,Z.jsx)(A,{rootStore:r,blockValue:t,prop:"checked",labeled:!1})})}function $(e){let{blockValue:t,rootStore:r}=e;return q(t,"caption")?(0,Z.jsx)(A,{rootStore:r,blockValue:t,prop:"caption",labeled:!1}):null}function Q(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)(G,{rootStore:r,blockValue:t})}function Y(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)("div",{style:B.v.headerStyle,children:(0,Z.jsx)(G,{rootStore:r,blockValue:t})})}function J(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)("div",{style:B.v.subHeaderStyle,children:(0,Z.jsx)(G,{rootStore:r,blockValue:t})})}function ee(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)("div",{style:B.v.subSubHeaderStyle,children:(0,Z.jsx)(G,{rootStore:r,blockValue:t})})}function te(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)(H,{children:(0,Z.jsx)(G,{rootStore:r,blockValue:t})})}function re(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)("ul",{style:{margin:0,paddingLeft:28},children:(0,Z.jsx)("li",{children:(0,Z.jsx)(G,{rootStore:r,blockValue:t})})})}function oe(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsx)("ol",{style:{margin:0,paddingLeft:28},children:(0,Z.jsx)("li",{children:(0,Z.jsx)(G,{rootStore:r,blockValue:t})})})}function ie(e){let{blockValue:t,rootStore:r}=e;return(0,Z.jsxs)("div",{style:{display:"inline-flex"},children:[(0,Z.jsx)(N,{rootStore:r,blockValue:t}),(0,Z.jsx)(G,{rootStore:r,blockValue:t})]})}function le(e){let{blockValue:t,rootStore:r,blockPreviewLocation:i}=e;const l=O(t);if(!l)return null;const s=(0,Z.jsx)($,{rootStore:r,blockValue:t});return"comments_sidebar"===i?(0,Z.jsx)(o.Fragment,{children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)(D,{src:l,permissionRecord:{table:v.iU,id:t.id}}),s&&(0,Z.jsx)("div",{style:{marginBottom:4},children:s})]})}):(0,Z.jsxs)(o.Fragment,{children:[(0,Z.jsx)("div",{style:{display:"flex"},children:(0,Z.jsx)("div",{style:{marginTop:4,marginBottom:4},children:(0,Z.jsx)(D,{src:l,permissionRecord:{table:v.iU,id:t.id}})})}),s&&(0,Z.jsx)("div",{style:{marginBottom:4},children:s})]})}},14200:(e,t,r)=>{r.d(t,{Z:()=>E});r(57658);var o=r(67294),i=r(83355),l=r(80951),s=r(8848),n=r(40506),a=r(36591),d=r(65628),c=r(72126),u=r(21768),h=r(74446),p=r(21202),m=r(77420),g=r(23867),x=r(19889),y=r(97880),b=r(82990),v=r(31412),f=r(60682),S=r(14976),k=r(26350),j=r(39111),T=r(29302),B=r(89845),V=r(75561),w=r(86628),R=r(54368),P=r(70693),M=r(4308),C=r(85893);function Z(e){window.__c={n:"EditVerificationProperty"};const{textValue:t,rootStore:r}=e,i=(0,v.useIntl)(),s=(0,o.useMemo)((()=>{const e=l._w(t);return e?M.WN(e):{type:"none"}}),[t]),n=(0,w.VK)((()=>{if("none"!==s.type)return k.t1.createChildStore(r,s.actorPointer)}),[s,r]);if("none"===s.type)return(0,C.jsx)("span",{children:i.formatMessage(M.X3.none)});let a;return void 0===n?a=(0,C.jsx)(T.Z,{userStore:void 0,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):n.table===x.KJ?a=(0,C.jsx)(T.Z,{userStore:n,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):n.table===m.cZ?a=(0,C.jsx)(j.Z,{botStore:n,style:{display:"inline-flex",alignItems:"baseline"}}):n.table===R.y?a=(0,C.jsx)(T.Z,{userStore:void 0,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):(0,y.t1)(n),"verified"===s.type&&s.isIndefinite?(0,C.jsx)("div",{children:i.formatMessage(M.X3.verifiedIndefinitely,{actor:a})}):(0,C.jsx)("div",{children:i.formatMessage(M.X3.verifiedUntil,{actor:a,datetime:P.nK({dateTime:s.dateTimeRange.end,intl:i,displayInUserTimezone:!0})})})}class _ extends i.Z{constructor(){super(...arguments),this.renderRelation=(e,t)=>{const r=this.getPageTitle(e),{disableStyleAnnotations:o=!1,disableDateStyleAnnotations:i=!1}=this.props;return(0,C.jsx)("div",{style:{maxWidth:180,...b.Z.textOverflowStyle},children:S.IY({environment:this.environment,textValue:{value:r,spaceId:(0,g.C)(e.spaceId)},parentStore:this.props.rootStore,disableHover:!0,disableStyleAnnotations:o,disableDateStyleAnnotations:i,disabled:!0,theme:this.theme,emojiType:(0,f.e_)(this.environment),katex:this.environment.KatexStore.getKatex(),formulaValueTypes:[]})},t)},this.getUserValue=e=>k.U6.createChildStore(this.props.rootStore,{table:x.KJ,id:e}).getValue(),this.getRecordModel=u.o.fromMonomorphicFunctionUnsafe((e=>this.getBlockStore(e.id).getRecordModel(e)),h.mF.fromMonomorphicFunctionUnsafe((e=>this.getBlockStore(e.id).getRecordValue(e)))),this.getRenderableTextValue=()=>{const{value:e,propertySchema:t}=this.props;if("text"===t.type||"title"===t.type)return e.value;if("relation"===t.type){const e=this.getRelationValue();if(!e)return;const t=e.map(this.getPageTitle);return c.xH(t)}},this.getPageTitle=e=>{const t=this.getBlockValue(e.id);return t&&(0,l.wS)(t,"title")||[]}}willMountOrUpdate(){const{propertySchema:e}=this.props;"text"!==e.type&&"title"!==e.type&&"relation"!==e.type||this.environment.KatexStore.loadIfNeeded(this.getRenderableTextValue)}renderComponent(){const{value:e}=this.props,t=this.props.propertySchema.type;return"checkbox"!==t&&0===e.value.length?this.renderEmptyProperty():"text"===t?this.renderTextProperty():"checkbox"===t?(0,C.jsx)(I,{value:this.props.value}):"multi_select"===t?this.renderMultiSelectProperty():"select"===t?this.renderSelectProperty():"status"===t?this.renderStatusProperty():"person"===t?this.renderPersonProperty():"number"===t?(0,C.jsx)(F,{value:this.props.value}):"date"===t?(0,C.jsx)(z,{propertySchema:this.props.propertySchema,value:this.props.value}):"url"===t?(0,C.jsx)(A,{value:this.props.value}):"file"===t?(0,C.jsx)(H,{value:this.props.value}):"email"===t?(0,C.jsx)(D,{value:this.props.value}):"phone_number"===t?(0,C.jsx)(L,{value:this.props.value}):"title"===t?this.renderTextProperty():"created_time"===t?(0,C.jsx)(z,{propertySchema:this.props.propertySchema,value:this.props.value}):"created_by"===t?this.renderPersonProperty():"relation"===t?this.renderRelationProperty():"auto_increment_id"===t?(0,C.jsx)(F,{value:this.props.value}):"verification"===t?(0,C.jsx)(U,{value:this.props.value,rootStore:this.props.rootStore}):"formula"===t||"rollup"===t||"last_edited_by"===t||"last_edited_time"===t||"last_visited_time"===t||"button"===t||"location"===t?null:void(0,y.t1)(t)}renderEmptyProperty(){return(0,C.jsx)("div",{style:{color:this.theme.mediumTextColor,fontSize:12},children:(0,C.jsx)(v.FormattedMessage,{defaultMessage:"Empty",id:"editProperty.emptyProperty.label"})})}renderTextProperty(){const{value:e,disableStyleAnnotations:t=!1,disableDateStyleAnnotations:r=!1}=this.props,o=S.IY({environment:this.environment,textValue:e,parentStore:this.props.rootStore,disableStyleAnnotations:t,disableDateStyleAnnotations:r,disableHover:!0,disabled:!0,theme:this.theme,emojiType:(0,f.e_)(this.environment),katex:this.environment.KatexStore.getKatex(),formulaValueTypes:[]});return(0,C.jsx)("span",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:o})}renderMultiSelectProperty(){const e=this.props.propertySchema.options||[],t=l.Ak(this.props.value.value);return(0,C.jsx)("div",{style:{display:"inline-flex"},children:t.map(((t,r,i)=>{const l=e.find((e=>e.value===t)),n=i.length-1===r,a=(0,s.KR)(this.theme,null==l?void 0:l.color),d=t??S.Xh(this.props.value.value,this.props.rootStore);return(0,o.createElement)(V.Z,{...a,key:r,rightMargin:!n},d)}))})}renderSelectProperty(){const e=this.props.propertySchema.options||[],t=l.Sj(this.props.value.value,e),r=t??S.Xh(this.props.value.value,this.props.rootStore),o=e.find((e=>e.value===t)),i=(0,s.KR)(this.theme,null==o?void 0:o.color);return(0,C.jsx)("div",{style:{display:"inline-flex"},children:(0,C.jsx)(V.Z,{...i,children:r})})}renderStatusProperty(){const e=this.props.propertySchema,t=l.yp(this.props.value.value,e),r=t??S.Xh(this.props.value.value,this.props.rootStore),o=(e.options??[]).find((e=>e.value===t)),i=(0,s.KR)(this.theme,null==o?void 0:o.color);return(0,C.jsx)("div",{style:{display:"inline-flex"},children:(0,C.jsx)(V.Z,{...i,children:r})})}renderPersonProperty(){const e=l.DW({textValue:this.props.value.value,propertySchema:this.props.propertySchema,blockCreatorPointer:void 0}),t=[];return e.forEach(((r,o)=>{const i=e.length-1===o;if(r.table===x.KJ){const e=r.id,l=this.getUserValue(e);t.push((0,C.jsx)("div",{style:{marginTop:4,marginRight:i?0:8},children:(0,C.jsx)(T.Z,{userValue:l,inline:!0,avatarSize:18,style:{fontSize:12},avatarShouldShowShadow:!0})},o))}else{const e=function(e,t){return k.Qx.createChildStore(t,{table:m.cZ,id:e})}(r.id,this.props.rootStore);t.push((0,C.jsx)("div",{style:{marginTop:4,marginRight:i?0:8},children:(0,C.jsx)(j.Z,{botStore:e})},o))}})),(0,C.jsx)("div",{style:{display:"inline-flex"},children:t})}renderRelationProperty(){let e=this.getRelationValue();if(!e)return;if(e.length>5){const t=e.slice(5).length;return e=e.slice(0,5),(0,C.jsxs)("div",{children:[e.map(this.renderRelation),(0,C.jsx)("div",{style:{maxWidth:180,color:this.theme.mediumTextColor},children:(0,C.jsx)(v.FormattedMessage,{defaultMessage:"{leftoverCountNumber} more",id:"editProperty.relationEditedProperties.moreCount.label",values:{leftoverCountNumber:t}})})]})}return(0,C.jsx)("div",{children:e.map(this.renderRelation)})}getBlockStore(e){return k.G.createChildStore(this.props.rootStore,{table:p.iU,id:e})}getBlockValue(e){return this.getBlockStore(e).getValue()}getRelationValue(){if("relation"===this.props.propertySchema.type)return l.j$({relationValue:l.rq(this.props.value.value),getRecordModel:this.getRecordModel,propertySchema:this.props.propertySchema})}}_.displayName="EditProperty";const E=_;function I(e){let{value:t}=e;const r=l.Ml(t.value);return(0,C.jsx)("div",{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,backgroundColor:r?s.ZP.blue:s.ZP.transparent},children:r?(0,a.e)({fill:s.ZP.white,width:12,height:12}):(0,d.z)()})}function F(e){let{value:t}=e;const r=l.VY(t.value);return(0,C.jsx)("div",{children:r})}function z(e){let{propertySchema:t,value:r}=e;const o=t,i=l.Gl(r.value);return(0,C.jsx)(B.Z,{value:i,dateFormat:o.date_format||n.sF,timeFormat:o.time_format||n.c_})}function A(e){let{value:t}=e;return(0,C.jsx)(C.Fragment,{children:l.zB(t.value)})}function H(e){let{value:t}=e;const r=l.g(t.value);return(0,C.jsx)("div",{style:{display:"inline-flex"},children:r.map(((e,t,r)=>{const o=r.length-1===t;return(0,C.jsx)(V.Z,{rightMargin:!o,children:e.url},t)}))})}function D(e){let{value:t}=e;const r=l.zB(t.value);return(0,C.jsx)("div",{children:r})}function L(e){let{value:t}=e;const r=l.zB(t.value);return(0,C.jsx)("div",{children:r})}function U(e){let{value:t,rootStore:r}=e;return(0,C.jsx)(Z,{textValue:t.value,rootStore:r})}},75561:(e,t,r)=>{r.d(t,{Z:()=>l});r(67294);var o=r(82990),i=r(85893);function l(e){const{children:t,textColor:r,backgroundColor:l,rightMargin:s,strikethrough:n}=e;return(0,i.jsx)("div",{style:{backgroundColor:l,color:r,display:"inline-flex",alignItems:"center",fontSize:12,height:18,paddingLeft:8,paddingRight:8,borderRadius:4,marginRight:s?4:0,textDecoration:n?"line-through":void 0},children:(0,i.jsx)("span",{style:{...o.Z.textOverflowStyle},children:t})})}},42130:(e,t,r)=>{r.d(t,{v:()=>l});var o=r(8848),i=r(82990);class l{static getLabelStyle(e){return{fontSize:12,lineHeight:1,paddingTop:8,color:e.lightTextColor}}static getUserHeaderStyle(e){return{fontSize:12,color:e.mediumTextColor}}static getRoleStyle(){return{fontSize:14,whiteSpace:"nowrap"}}}l.wrapStyle={display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1,overflow:"hidden",fontSize:14,minHeight:29},l.headerStyle={fontWeight:i.Z.fontWeight.semibold},l.subHeaderStyle={fontWeight:i.Z.fontWeight.semibold},l.subSubHeaderStyle={fontWeight:i.Z.fontWeight.semibold},l.permissionStyle={display:"flex",flexDirection:"column",minHeight:28,paddingTop:4,paddingBottom:4},l.groupStyle={display:"flex",alignItems:"center",minHeight:28,fontSize:14,paddingTop:4,paddingBottom:4},l.permissionTypeWrapStyle={display:"flex",alignItems:"center",fontSize:14,marginRight:6,whiteSpace:"nowrap"},l.diffWrapStyle={display:"flex",alignItems:"center"},l.addedStyle={color:o.ZP.blue,backgroundColor:o.ZP.blueWithAlpha(.14)},l.deletedStyle={opacity:.4,marginBottom:6,textDecoration:"line-through"}},25501:(e,t,r)=>{r.d(t,{Z:()=>l});r(67294);var o=r(8848),i=r(85893);const l=function(e){const{children:t,created:r,deleted:l,style:s,theme:n,title:a}=e,d={boxShadow:`inset 0 0 0 1px ${n.regularDividerColor}`,borderRadius:4,padding:"6px 8px",fontSize:14,overflow:"hidden",flexGrow:1,marginTop:4,marginBottom:4,...r&&{color:o.ZP.diffTextColor,backgroundColor:o.ZP.diffBackground},...s},c={fontSize:12,lineHeight:1,marginTop:2,marginBottom:4,color:n.regularTextColor};return(0,i.jsxs)("div",{style:d,children:[(0,i.jsx)("div",{style:c,children:a}),(0,i.jsx)("div",{style:{...l&&{opacity:.4,marginBottom:6,textDecoration:"line-through"}},children:t})]})}}}]);