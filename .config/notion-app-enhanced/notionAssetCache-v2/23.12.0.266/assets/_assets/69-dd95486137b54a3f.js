"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[69],{44499:(e,t,s)=>{s.d(t,{Hn:()=>m,XQ:()=>u,Xk:()=>p,qB:()=>g});s(57658);var o=s(41432),i=s(45433),a=s(21202),n=s(6287),r=s(55367),l=s(42330),c=s(26350),d=s(75770);function p(e,t){return!(!e.isNavigableBlock()&&e.getType()!==o.Ti.alias)&&(!e.isLinkedCollectionView()&&(!e.getMovedStore().getValue()&&!(0,d.ru)({targets:t,destination:e,direction:r.vh.Onto})))}function u(e){let{recentPageResults:t,blockResults:s,suggestedPages:o}=e;const i=new Set;for(const a of o){const e=a instanceof c.NW?a.getParentId():a.id;e&&i.add(e)}return[...t.filter((e=>!i.has(e.blockId))),...s.filter((e=>!i.has(e.blockId)))]}function g(e){const t=[];for(const o of e){const e=o.getParentPointer();if(e)if(e.table===a.iU)t.push(e.id);else if(e.table===n.v){var s;const e=null===(s=o.getAssociatedCollectionStore())||void 0===s?void 0:s.getParentPointer();e&&e.table===a.iU&&t.push(e.id)}}return t}function m(){const e=l.ZP.getTargetsDatabaseType(),t=l.ZP.getVariant();return("typedInitialized"===t||"typedUninitialized"===t)&&e&&e!==i.GZ}},20069:(e,t,s)=>{s.d(t,{Z:()=>rt,s:()=>at});s(57658),s(21703);var o=s(67294),i=s(83355),a=s(41892),n=s(6906),r=s(45433),l=s(58573),c=s(42853),d=s(90199),p=s(47453),u=s(35840),g=s(54497),m=s(72126),h=s(21202),v=s(97880),S=s(82990),f=s(31412),y=s(88295),M=s(60870),T=s(31299),x=s(39699),I=s(37181),b=s(52275),j=s(61519),w=s(1743),P=s(56940),C=s(68894),k=s(3386),A=s(16354),Z=s(68785),B=s(78140),V=s(89728),F=s(31278),L=s(72495),N=s(45959),O=s(33411),R=s(26388),D=s(64369),_=s(45653),q=s(60442),E=s(28020),W=s(75081),K=s(87279),z=s(98742),U=s(44499),H=s(98165),Q=s(58239),G=s(18514),X=s(38755),Y=s(95697),$=s(80444),J=s(88632),ee=s(77080),te=s(63334),se=s(29798),oe=s(49085);class ie extends oe.default{getInitialState(){return{chosenSpaceId:void 0}}getChosenSpaceId(){const{chosenSpaceId:e}=this.state,{currentSpaceStore:t}=$.default.state;return e||(null==t?void 0:t.id)}getChosenSpaceStore(){var e;return null===(e=this.getChosenSpaceViewStore())||void 0===e?void 0:e.getSpaceStore()}getChosenSpaceViewStore(){const{chosenSpaceId:e}=this.state,{currentSpaceViewStore:t,currentUserRootStore:s}=$.default.state;if(!e&&t)return t;if(e&&s){return s.getSpaceViewStores().find((t=>t.getSpaceId()===e))}}}const ae=ie;var ne=s(42330),re=s(26350),le=s(72087),ce=s(30765),de=s(32163),pe=s(43765),ue=s(77137),ge=s(85893);function me(e){let{query:t,spaceId:s,menuListStore:o,requestStore:i,getAutocompleteItems:a}=e;return(0,ge.jsx)(ue.Z,{request:{query:t,spaceId:s},render:(e,s)=>(0,ge.jsx)(he,{sections:s,error:e,menuListStore:o,initialFocus:Boolean(t)?0:void 0}),requestStore:i,debounce:T.vp,performRequest:a})}function he(e){let{sections:t,error:s,menuListStore:o,initialFocus:i}=e;return s?(0,ge.jsx)(L.Z,{children:(0,ge.jsx)(pe.Z,{title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Something went wrong.",id:"moveBlockMenu.errorOnMove.label"})})}):t&&0===t.length?(0,ge.jsx)(L.Z,{children:(0,ge.jsx)(pe.Z,{title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"No results",id:"moveBlockMenu.noResults.label"})})}):(0,ge.jsx)(de.Z,{type:de.i.Vertical,initialFocus:i,sections:t||[],store:o})}var ve=s(6287),Se=s(15047),fe=s(29369),ye=s(86628),Me=s(24405),Te=s(11470),xe=s(76798),Ie=s(65598);function be(e){window.__c={n:"MoveToMenuItem"};const{store:t,menuListItemProps:s,hidePath:o}=e,i=(0,ye.VK)((()=>function(e){if((0,Ie.OY)(e)&&!e.canEdit())return(0,ge.jsx)(f.FormattedMessage,{id:"moveBlockMenu.needEditAccess.tooltip",defaultMessage:'You need "Can edit" access to "{parentName}" to move this page',values:{parentName:(0,ge.jsx)(xe.Z,{store:e,shouldWrap:!0})}});if((0,Ie.Y)(e)&&!e.canAddOrRemoveTopLevelPages())return(0,ge.jsx)(f.FormattedMessage,{id:"moveBlockMenu.TeamSidebarLocked.tooltip",defaultMessage:"This teamspace has its sidebar locked. You must be a teamspace owner to move to this teamspace."})}(t)),[t]),a=Boolean(i),n=(0,Me.yK)((e=>({disabledTooltip:{maxWidth:240},recordMenuItem:a?{color:e.mediumTextColor}:{}})),[a]);return(0,ge.jsx)(R.Z,{placement:R.Z.Placement.Left,textWrap:!0,style:n.disabledTooltip,disableTooltip:!a,renderTooltip:()=>i,render:e=>(0,ge.jsx)(Te.Z,{...(0,z.Z)(s,e),disabled:a,store:t,hidePath:o,style:n.recordMenuItem})})}var je=s(480),we=s(86176),Pe=s(75024);function Ce(e){let{spaceStore:t,collectionStore:s,menuListItemProps:o}=e;window.__c={n:"MoveToModalTypedItem"};const i=(0,je.O7)(),a=(0,Me.yK)((e=>({caption:{color:e.lightTextColor,fontSize:(0,Pe.yv)(i,"UISmall")}})),[i]);return(0,ge.jsx)(Te.Z,{caption:(0,ge.jsx)("div",{style:a.caption,children:(0,ge.jsx)(ke,{spaceStore:t,collectionStore:s})}),store:s,...o})}function ke(e){let{spaceStore:t,collectionStore:s}=e;window.__c={n:"PathCaption"};const o=(0,je.O7)(),i=(0,ye.VK)((()=>function(e){let{environment:t,spaceStore:s,collectionStore:o}=e;const i=(0,W.tV)({environment:t,spaceStore:s,collectionStore:o});switch(i){case"team":return null;case"private":return(0,ge.jsx)(f.FormattedMessage,{id:"moveToHelpers.privatePageCaptionPrefix",defaultMessage:"Private"});case"other":return(0,ge.jsx)(f.FormattedMessage,{id:"moveToHelpers.sharedPageCaptionPrefix",defaultMessage:"Shared"});default:(0,v.t1)(i)}}({environment:o,spaceStore:t,collectionStore:s})),[o,t,s]),a=(0,ye.VK)((()=>(0,we.L)(s)),[s])&&(0,ge.jsx)(we.Z,{store:s,showFullPathInTooltip:!0});return a&&i?(0,ge.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[i,(0,ge.jsx)("div",{style:{paddingLeft:4,paddingRight:4},children:"/"}),a]}):a&&!i?a:(0,ge.jsx)(ge.Fragment,{children:i})}function Ae(e){let{spaceStore:t,value:s,showPath:o,isCreateIn:i,onAccept:a}=e;const n=function(e){let{spaceStore:t,value:s}=e;const{type:o}=s;switch(o){case"page":return re.G.createChildStore(t,{table:h.iU,id:s.id});case"collection":return re.NW.createChildStore(t,{table:ve.v,id:s.id});case"space":return re.H2.createChildStore(t,{table:Se.bx,id:s.id});case"team":return re.zX.createChildStore(t,{table:fe.e0,id:s.id});case"space-private-pages":return;default:(0,v.t1)(o)}}({spaceStore:t,value:s});if(n)return(0,U.Hn)()&&n instanceof re.NW?{key:n.id,render:e=>(0,ge.jsx)(Ce,{spaceStore:t,collectionStore:n,menuListItemProps:e}),action:()=>a(s)}:{key:n.id,render:e=>(0,ge.jsx)(be,{store:n,menuListItemProps:e,hidePath:!!i&&!o}),action:()=>a(s)}}var Ze=s(59054),Be=s(69327),Ve=s(41432),Fe=s(16184),Le=s(39567),Ne=s(50906),Oe=s(64921),Re=s(5210),De=s(35026),_e=s(74016);function qe(e){return 14*(e+1)}function Ee(e){window.__c={n:"MoveToOutlinerItem"};const{store:t,spaceStore:s,spaceViewStore:i,depth:a,isAlias:n}=e,r=(0,je.O7)(),l=(0,Me.Fg)(),[c,p]=o.useState(!1),u=(0,Me.yK)((e=>({noChildrenLabelItem:{paddingLeft:qe(a)+24,fontSize:14,paddingBottom:6.5,color:e.lightTextColor},outlinerItem:{display:"flex",flexDirection:"row",fontSize:14,height:28,paddingLeft:qe(a),color:e.regularTextColor,alignItems:"center"},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:22,height:18,marginRight:4,position:"relative"}})),[a]);function g(){const e=ne.ZP.state;e.isOpen&&(p(!c),Ne.w6U(r,{flowId:e.flowId,is_toggled:!c,destination_type:t?t.table:"private_pages"}))}const m=(0,ye.VK)((()=>{if(t){const e=(0,ge.jsx)("div",{children:(0,Le.Y)({position:"absolute",width:"50%",height:"50%",right:0,bottom:0})});return t instanceof re.zX?(0,ge.jsx)("div",{style:u.icon,children:(0,ge.jsx)(_e.p,{disabled:!0,store:t,size:18})}):(0,ge.jsxs)("div",{style:u.icon,children:[(0,ge.jsx)(F.Z,{icon:t instanceof re.G?t.getIcon():void 0,isEmptyPage:t instanceof re.G&&t.isEmptyPage(),title:void 0,size:18,disabled:!0}),n&&e]})}return(0,ge.jsx)(_.Z,{size:16,userStore:(0,E.B7)(r),style:{marginLeft:3}})}),[t,u.icon,r,n]),v=(0,ye.VK)((()=>t?t.table===fe.e0?"private"!==t.getTeamAccessLevel()?(0,ge.jsx)("div",{style:{maxWidth:"80%"},children:(0,ge.jsx)(xe.Z,{store:t})}):(0,ge.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"80%"},children:[(0,ge.jsx)(xe.Z,{store:t}),(0,Fe.Q)({width:14,height:14,marginLeft:4,fill:l.mediumIconColor})]}):(0,ge.jsx)("div",{style:{maxWidth:"80%"},children:(0,ge.jsx)(xe.Z,{store:t})}):(0,ge.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:7},children:[(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Private pages",id:"outliner.addToPrivatePages"}),(0,ge.jsx)("div",{style:{marginLeft:2},children:(0,d.b)({width:14,height:14,fill:l.mediumIconColor,marginLeft:4})})]})),[t,l.mediumIconColor]),S=(0,ye.VK)((()=>{const e=new Set([Ve.Ti.page,Ve.Ti.collectionViewPage,Ve.Ti.collectionView,Ve.Ti.alias]),s=new Set([Ve.Ti.factory]);let o=[];return t?t instanceof re.zX?o=t.getTeamPagesStores():t instanceof re.G&&(o=(0,De.Q2)(t,s,e)):o=i.getPrivatePages(r),o}),[t,i,r]);const y=0!==S.length?(0,ge.jsx)(We,{spaceStore:s,spaceViewStore:i,itemStores:S,depth:a+1,onAccept:e.onAccept,targets:e.targets}):(0,ge.jsx)("div",{style:u.noChildrenLabelItem,children:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})});return(0,ge.jsxs)(ge.Fragment,{children:[(0,ge.jsx)(Oe.Z,{onClick:function(){e.moveToPagesOnly&&(null==t?void 0:t.table)!==h.iU?g():t?t instanceof re.G?e.onAccept({type:"page",id:t.id,spaceId:s.id}):e.onAccept({type:"team",id:t.id,spaceId:s.id}):e.onAccept({type:"space-private-pages",spaceId:s.id})},children:(0,ge.jsxs)("div",{style:u.outlinerItem,children:[(0,ge.jsx)(Re.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:c,color:l.mediumIconColor,onClick:g}),m,v]})}),c&&a<100&&y]})}function We(e){window.__c={n:"MoveToOutliner"};const{spaceStore:t,spaceViewStore:s,itemStores:o,depth:i}=e,a=(0,ye.VK)((()=>{const a=o?m.oA(o.map((o=>{if(o instanceof re.zX&&o.canAddOrRemoveTopLevelPages()||o instanceof re.G&&(0,U.Xk)(o,e.targets)&&o.canEdit()){const a=o instanceof re.G&&o.getType()===Ve.Ti.alias,n=a?o.getAliasTargetStore():void 0,r=n instanceof re.G?n:o;return(0,ge.jsx)(Ee,{spaceStore:t,spaceViewStore:s,store:r,depth:i,onAccept:e.onAccept,targets:e.targets,isAlias:a,moveToPagesOnly:e.moveToPagesOnly},o.id)}}))):[];return e.addedItems?[...e.addedItems,...a]:a}),[o,e.addedItems,e.moveToPagesOnly,e.targets,e.onAccept,t,s,i]),n=(0,Me.yK)((e=>({sectionHeader:{color:e.mediumTextColor,fontSize:12,fontWeight:S.Z.fontWeight.medium,padding:"12px 14px 4px 14px"}})),[]);return(0,ge.jsxs)(w.Z,{capture:!0,children:[e.title&&(0,ge.jsx)("div",{style:n.sectionHeader,children:(0,ge.jsx)(D.Z,{isSmall:!0,children:e.title})}),(0,ge.jsx)("div",{children:a})]})}function Ke(e){window.__c={n:"MoveToModal"};const{spaceStore:t,spaceViewStore:s,targets:o,moveToPagesOnly:i}=e,a=(0,ye.VK)((()=>$.default.state.currentUserStore),[]),n=(0,je.O7)(),r=(0,f.useIntl)(),l=(0,Me.yK)((()=>({modal:{height:374,maxHeight:"70vh",paddingBottom:12},body:{width:"100%"}})),[]),[c]=(0,Ze.r5)((async()=>t&&a?await(0,Y.qX)({environment:n,spaceStore:t,currentUserId:a.id}):[]),[n,t,a]),d=(0,ye.VK)((()=>{if(!c.value)return;const e=s.getTeamsStores().filter((e=>e.canAddOrRemoveTopLevelPages()));return e.length>=7?e:m.mN([...e,...c.value||[]],(e=>e.id)).filter((e=>e.canAddOrRemoveTopLevelPages())).slice(0,7)}),[s,c.value]),p=(0,ye.VK)((()=>ze({spaceStore:t,targets:o})),[t,o]),u=(0,ye.VK)((()=>s.getWorkspacePages().filter((e=>(0,U.Xk)(e,o)&&e.canEdit()))),[s,o]),g=(0,ye.VK)((()=>{if(Ue({environment:n,targets:o,chosenSpaceStore:t}))return(0,ge.jsx)(Ee,{spaceStore:t,spaceViewStore:s,store:void 0,depth:0,onAccept:e.onAccept,targets:e.targets,moveToPagesOnly:i},"MoveToModal private item")}),[n,i,e,t,s,o]);return t&&s?(0,ge.jsx)("div",{style:l.modal,children:(0,ge.jsx)("div",{style:l.body,children:(0,ge.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ge.jsx)(We,{spaceStore:t,spaceViewStore:s,itemStores:p,addedItems:[g],moveToPagesOnly:i,depth:0,title:r.formatMessage({defaultMessage:"Suggested",id:"moveToModal.suggestedSection.title"}),onAccept:e.onAccept,targets:e.targets}),d&&d.length>0&&(0,ge.jsx)(We,{spaceStore:t,spaceViewStore:s,itemStores:d,moveToPagesOnly:i,depth:0,title:r.formatMessage({defaultMessage:"Teamspaces",id:"moveToModal.teamsSection.title"}),onAccept:e.onAccept,targets:e.targets}),u.length>0&&(0,ge.jsx)(We,{spaceStore:t,spaceViewStore:s,itemStores:u,moveToPagesOnly:i,depth:0,title:r.formatMessage({defaultMessage:"Workspace",id:"moveToModal.workspaceSection.title"}),onAccept:e.onAccept,targets:e.targets})]})})}):null}function ze(e){let{spaceStore:t,targets:s}=e,o=Be.Z.getWithoutSubscribing(t.id).map((e=>{let{store:t}=e;return t})).filter((e=>e.pathIsAccessibleAndAlive()&&!s.some((t=>"block"===t.table&&t.id===e.id))));const i=s.filter((e=>"block"===e.getParentTable())).map((e=>e.getParentId())),a=i.length===s.length,n=[...new Set(i)];return a&&1===n.length&&(o=o.filter((e=>e.id!==n[0]))),o.slice(0,7)}function Ue(e){let{environment:t,targets:s,chosenSpaceStore:o}=e;const i=(0,X.Cx)(o),a=s.every((e=>e.isTopLevelPrivatePage({spaceStore:o,environment:t})));return!i&&!a}var He=s(84169),Qe=s(73063),Ge=s(43568),Xe=s(54814);function Ye(e){let{environment:t,typedDatabases:s,spaceStore:o,joinedTeamIds:i,blocksToFilterParents:a}=e;return Je({typedDatabases:function(e){let{environment:t,typedDatabases:s,spaceStore:o,joinedTeamIds:i}=e;const{privateDatabases:a,otherDatabases:n,teamDatabases:r}=(0,W.x1)({environment:t,typedCollections:s,spaceStore:o});return[...$e({teamDatabases:r,joinedTeamIds:i}),...n,...a]}({environment:t,spaceStore:o,typedDatabases:s.filter((e=>{const t=(0,H.VP)(e);return!t||!t.isArchived()})),joinedTeamIds:i}),blocksToFilterParents:a})}function $e(e){let{teamDatabases:t,joinedTeamIds:s}=e;const o=[];for(const[n,r]of Object.entries(t))for(const e of r)o.push([n,e]);if(0===o.length)return[];const i=Object.keys(t).filter((e=>!s.includes(e))),a=[...s,...i];return o.sort(((e,t)=>{let[s,o]=e,[i,n]=t;return a.indexOf(s)-a.indexOf(i)||String(o.getName()).localeCompare(String(n.getName()))})).map((e=>{let[t,s]=e;return s}))}function Je(e){let{typedDatabases:t,blocksToFilterParents:s}=e;const o=s?new Set((0,U.qB)(s)):void 0;return t.filter((e=>{if(!e.canEdit())return!1;if(!o)return!0;const t=e.getParentPointer();return!t||t.table!==h.iU||!o.has(t.id)}))}function et(e){let{environment:t,spaceStore:s,joinedTeamIds:o,parentStore:i,moveToTargets:a}=e;const n=(0,ye.VK)((()=>{const e=null==s?void 0:s.id;if(e)return function(e){if(!ne.ZP.state.isOpen||"typedInitialized"!==ne.ZP.state.variant)return;if(e!==ne.ZP.state.spaceId)return;return ne.ZP.state.typedDatabases}(e)}),[null==s?void 0:s.id]),r=(0,ye.VK)((()=>ee.default.checkGate("typed_move_to_improved_default_results")),[]),[{value:l,status:c}]=(0,Ze.r5)((async()=>{if(n)return n;if(!s)return;const e=ne.ZP.getTargetsDatabaseType();if(!e)return;let l=[];if(r){l=Je({typedDatabases:((await T.RT({environment:t,query:"",limit:20,databaseType:[e],spaceStore:s,parentStore:s,collectionViewBlockStore:void 0})).results||[]).map((e=>re.NW.createChildStore(i,{table:ve.v,id:e}))),blocksToFilterParents:a})}else{const a=await Xe.rG({environment:t,spaceId:s.id,databaseType:e,parentStore:i})??[];l=Ye({environment:t,typedDatabases:a,spaceStore:s,joinedTeamIds:o})}return ne.ZP.setState({...ne.ZP.state,variant:"typedInitialized",typedDatabases:l,spaceId:s.id}),l}),[n,s,r,t,a,i,o]);return n?{success:!0,typedDatabases:n}:"resolved"===c&&l?{success:!0,typedDatabases:l}:{success:!1}}var tt=s(20658);function st(e){window.__c={n:"MoveToModalTypedEmptyState"};const{onClick:t,databaseType:s}=e,o=(0,je.O7)(),i=(0,Me.yK)((e=>({modal:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:32,marginBottom:32},icon:{width:20,fill:e.mediumTextColor},title:{marginTop:6,fontWeight:S.Z.fontWeight.semibold,color:e.mediumTextColor},subtitle:{marginTop:2,marginLeft:14,marginRight:14,textAlign:"center"},button:{fontWeight:S.Z.fontWeight.semibold,fontSize:(0,Pe.yv)(o,"UISmall")}})),[o]),a=(0,W.sN)(s),n=(0,W.Q_)(s);return(0,ge.jsxs)("div",{style:i.modal,children:[(0,tt.$)(i.icon),(0,ge.jsx)(D.Z,{isSmall:!0,style:i.title,children:(0,ge.jsx)(f.FormattedMessage,{id:"moveToModalTypedEmptyState.title",defaultMessage:"No other {singleItemName} databases",values:{singleItemName:a}})}),(0,ge.jsx)(D.Z,{isSmall:!0,isMultiline:!0,style:i.subtitle,children:(0,ge.jsx)(f.FormattedMessage,{id:"moveToModalTypedEmptyState.subtitle",defaultMessage:"Try adding {pluralItemName} to another teamspace",values:{pluralItemName:n}})}),(0,ge.jsx)(V.Z,{isBlue:!0,onClick:t,style:i.button,children:(0,ge.jsx)(f.FormattedMessage,{id:"moveToModalTypedEmptyState.button",defaultMessage:"Move somewhere else"})})]})}function ot(e){let{spaceStore:t,spaceViewStore:s,targets:o,menuListStore:i,onAccept:a}=e;window.__c={n:"MoveToModalTyped"};const l=(0,je.O7)(),c=(0,Me.yK)((()=>({modal:{maxHeight:"70vh"},loadingShimmer:{padding:16}})),[]),d=(0,ye.VK)((()=>s.getTeamsStores().map((e=>e.id))),[s]),p=et({environment:l,spaceStore:t,parentStore:t,joinedTeamIds:d,moveToTargets:o}),u=(0,ye.VK)((()=>p.success?p.typedDatabases.map((e=>function(e){const{store:t,spaceStore:s,onAccept:o}=e;return{key:t.id,render:e=>(0,ge.jsx)(Ce,{spaceStore:s,collectionStore:t,menuListItemProps:e}),action:()=>o({type:"collection",id:t.id,spaceId:s.id})}}({store:e,spaceStore:t,onAccept:a}))):[]),[p,t,a]),g=(0,ye.VK)((()=>ne.ZP.getTargetsDatabaseType()),[]);if(!p.success)return(0,ge.jsx)("div",{style:c.loadingShimmer,children:(0,ge.jsx)(Ge.Z,{paragraphs:[{lineHeight:18,lineMargin:4,sectionWidths:[100],repeat:1,sectionMargin:0},{lineHeight:14,lineMargin:4,sectionWidths:[100,40],repeat:1,sectionMargin:-2}]})});if(!g)throw new Error("Trying to show typed moveTo modal when database type is not available.");if(0===u.length)return(0,ge.jsx)(st,{databaseType:g,onClick:()=>{ne.ZP.state.isOpen&&ne.ZP.setState({...ne.ZP.state,variant:r.br})}});const m=(0,W.sN)(g),h=[{key:"suggested",render:e=>(0,ge.jsx)(L.Z,{...e,title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"{typedItemName} databases",id:"moveToModalTyped.suggestedMenuSection.title",values:{typedItemName:(0,n.Z)(m)}}),right:(0,ge.jsx)(it,{typedItemName:m})}),items:u.slice(0,7)}];return(0,ge.jsx)("div",{style:c.modal,children:(0,ge.jsx)(de.Z,{initialFocus:0,type:de.i.Vertical,sections:h||[],store:i})})}function it(e){let{typedItemName:t}=e;window.__c={n:"TypedMoveToTooltip"};const s=(0,Me.yK)((e=>({icon:{width:13,height:13,fill:e.mediumIconColor},iconButton:{height:18,width:18,padding:0,marginTop:-4,marginBottom:-4,marginRight:-4}})),[]),o=(0,f.useIntl)();return(0,je.Fy)().isMobile?null:(0,ge.jsx)(R.Z,{placement:R.Z.Placement.Bottom,style:{width:220},textWrap:!0,renderTooltip:()=>(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"{typedItemName} properties will be kept when moving to these locations",id:"moveTypedMenu.tooltip",values:{typedItemName:m.kC(t)}}),render:e=>(0,ge.jsx)(Qe.Z,{ariaLabel:o.formatMessage({id:"moveToModalTyped.helpIcon.ariaLabel",defaultMessage:"Help icon for moving typed pages."}),icon:He.m,iconStyle:s.icon,style:s.iconButton,...e})})}const at=(0,f.defineMessages)({createSubpage:{id:"moveToOrCreateMenu.createSubpage.description",defaultMessage:"Create a new sub-page where your cursor is, inside the current block."},newPageIn:{id:"moveToOrCreateMenu.newPageIn.description",defaultMessage:"Create a new page inside any existing page, then link to it in one go."},turnInto:{id:"moveToOrCreateMenu.turnInto.description",defaultMessage:"Turn blocks into new pages inside any existing database or page."},privatePagesTitle:{defaultMessage:"Private Pages",id:"moveBlockMenu.privatePagesMenuTitle"}});class nt extends i.Z{constructor(){super(...arguments),this.storeTypes={ignoreSelectionAreaStore:te.Z,moveToSpaceMenuStore:ae,requestStore:le.Z,menuListStore:se.Z},this.getAutocompleteItems=async e=>{const{currentUserRootStore:t,mainEditorCurrentBlockStore:s,currentSpaceStore:o}=$.default.state,{query:i}=e,a=this.stores.moveToSpaceMenuStore.getChosenSpaceStore();if(!(t&&a&&s&&o))return[];const n=(0,Q.lX)({spaceStore:a,currentUserId:this.environment.currentUser.id}),[r,l,c,d]=await this.getPageAndCollectionResults(a,i),p=await n;return(0,U.Hn)()?await this.getTypedAutoCompleteItems({chosenSpaceStore:a,savedQuickAddParent:p,query:i,blockResults:r,recentPageResults:d}):this.props.isCreateIn?this.createAutoCompleteItems(a,i,r,l,c,d):this.getAutoCompleteItems(a,p,i,r,l,c,d)},this.getPageAndCollectionResults=async(e,t)=>{const s=[],o=[],i=[];let a=[];if(t&&lt()){const o=await T.nJ({environment:this.environment,query:t,limit:20,spaceId:e.id,requireEditPermissions:!1,excludeTemplates:!1,source:"move_to_menu",boostRecentlyViewedPages:!0});for(const t of o.results){const o=re.G.createChildStore(e.getPagesStore(),{table:h.iU,id:t});if((0,U.Xk)(o,this.props.targets)){const e={blockId:o.id,isEditable:o.canEdit()};this.shouldDisplayInTemplatesSection(o)?i.push(e):s.push(e)}}}else{a=(await M.I0(e,e.id)).map((t=>{const s=re.G.createChildStore(e.getPagesStore(),{table:h.iU,id:t});return{blockId:s.id,isEditable:s.canEdit()}})),a=a.filter((t=>{let{blockId:s}=t;const o=re.G.createChildStore(e.getPagesStore(),{table:h.iU,id:s});if((0,U.Xk)(o,this.props.targets)){const e={blockId:o.id,isEditable:o.canEdit()};return!this.shouldDisplayInTemplatesSection(o)||(i.push(e),!1)}}));const t=E.Xb(this.environment);for(const e of t)if((0,U.Xk)(e,this.props.targets)){const t={blockId:e.id,isEditable:e.canEdit()};this.shouldDisplayInTemplatesSection(e)?i.push(t):o.push(t)}}return[s,o,i,a]},this.createAutoCompleteItems=(e,t,s,o,i,a)=>{const{isAddTo:n,isTurnIntoPage:r}=this.props,l=[],c=new Set,d=e=>{if(!e)return!1;const{key:t}=e;return!c.has(t)&&(c.add(t),!0)},p=m.oA([this.getCurrentBlockMenuItem({query:t})]);!p.length||Boolean(r)||Boolean(n)||l.push({key:"defaults",render:e=>(0,ge.jsx)(L.Z,{...e}),items:p});const u=m.oA([...a.slice(0,5).map((t=>{let{blockId:s}=t;return Ae({spaceStore:e,value:{type:"page",id:s,spaceId:e.id},showPath:!Boolean(r)&&!Boolean(n),isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})})),...s.slice(0,10).map((s=>{let{blockId:o}=s;return Ae({spaceStore:e,value:{type:"page",id:o,spaceId:e.id},showPath:!t,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})})),...o.slice(0,10).map((s=>{let{blockId:o}=s;return Ae({spaceStore:e,value:{type:"page",id:o,spaceId:e.id},showPath:!t,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})}))].slice(0,20).filter(d));u.length>0&&l.push({key:"blocks",render:e=>(0,ge.jsx)(L.Z,{...e,title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Suggested",id:"moveBlockMenu.suggestedSection.title"}),topBorder:l.length>0&&!Boolean(r)&&!Boolean(n)}),items:u});const g=m.oA(this.getMoveToTeamMenuItems(t).filter(d));g.length>0&&(0,Y.bq)()&&l.push({key:"teams",render:e=>(0,ge.jsx)(L.Z,{...e,isTitleUppercase:!0,title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Teamspaces",id:"moveBlockMenu.teamsSection.title"}),topBorder:l.length>0}),items:g});const h=m.oA(i.slice(0,5).map((t=>{let{blockId:s}=t;return Ae({spaceStore:e,value:{type:"page",id:s,spaceId:e.id},showPath:!0,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})})).filter(d));return h.length>0&&l.push({key:"templates",render:e=>(0,ge.jsx)(L.Z,{...e,isTitleUppercase:!0,title:n?(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Add from template",id:"moveBlockMenu.addFromTemplate.title"}):(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Move to template",id:"moveBlockMenu.moveToTemplate.title"}),topBorder:l.length>0}),items:h}),p.length&&(Boolean(r)||Boolean(n))&&l.push({key:"defaults",render:e=>(0,ge.jsx)(L.Z,{...e,topBorder:l.length>0}),items:p}),l},this.getAutoCompleteItems=(e,t,s,o,i,a,n)=>{const r=this.getSuggestedMenuSection(s,e),l=[...n.slice(0,3),...o.slice(0,20)],c={key:"pages",render:e=>(0,ge.jsx)(L.Z,{...e,title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Pages",id:"moveBlockMenu.pagesSection.title"})}),items:m.mN(m.VS(m.oA([this.getSavedQuickAddParentMenuItem({query:s,savedQuickAddParent:t}),...l.map((t=>{let{blockId:o}=t;return Ae({spaceStore:e,value:{type:"page",id:o,spaceId:e.id},showPath:!s,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})}))])),(e=>e.key))};return[r,{key:"teams",render:e=>(0,ge.jsx)(L.Z,{...e,title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Teamspaces",id:"moveBlockMenu.teamsSection.title"})}),items:m.oA(this.getMoveToTeamMenuItems(s)).slice(0,10)},c].filter((e=>e.items.length>0))},this.getTypedAutoCompleteItems=async e=>{let{chosenSpaceStore:t,savedQuickAddParent:s,query:o,blockResults:i,recentPageResults:a}=e;const{typedSuggestedMenuSection:n,typedSuggestedResults:r}=await this.getTypedSuggestedMenuSection(o);if(ne.ZP.state.isOpen&&"aggregated_type"===ne.ZP.state.moveToContext)return[n].filter((e=>e.items.length>0));let l=(0,U.XQ)({recentPageResults:a,blockResults:i,suggestedPages:r});const c=new Set((0,U.qB)(this.props.targets));c.size>0&&(l=l.filter((e=>!c.has(e.blockId))));const d=m.mN(m.VS(m.oA([this.getSavedQuickAddParentMenuItem({query:o,savedQuickAddParent:s}),...l.map((e=>{let{blockId:s}=e;return Ae({spaceStore:t,value:{type:"page",id:s,spaceId:t.id},showPath:!o,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})}))])),(e=>e.key)),p=m.oA(this.getMoveToTeamMenuItems(o)).slice(0,5),u=n.items.length>0,g={key:"teams",render:e=>(0,ge.jsx)(L.Z,{...e,desktopStyle:{paddingTop:u?0:6,paddingBottom:6},title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Teamspaces",id:"typedMoveBlockMenu.teamsSection.title"})}),items:p},h=n.items.length>0&&0===g.items.length;return[n,g,{key:"pages",render:e=>(0,ge.jsx)(L.Z,{...e,desktopStyle:{paddingTop:h?0:6,paddingBottom:6},title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Pages",id:"typedMoveBlockMenu.pagesSection.title"})}),items:d}].filter((e=>e.items.length>0))},this.typedMoveOnAccept=e=>{var t;this.props.onAccept(e);const s=ne.ZP.getTargetsDatabaseType(),o=null===(t=$.default.state.currentSpaceStore)||void 0===t?void 0:t.id;"collection"===e.type&&s&&o&&x.createAndCommit({userAction:"TypedMoveToMenu.handleClick",environment:this.environment,perform:t=>{I.zq({transaction:t,dbType:s,collectionId:e.id})}})},this.getTypedSuggestedMenuSection=async e=>{if(!ne.ZP.state.isOpen||ne.ZP.state.variant===r.br||"typedUninitialized"===ne.ZP.state.variant)throw new Error("Trying to render section when it's either not open, untyped, or typed but uninitialized (i.e. the typed databases are not fetched yet)");const t=ne.ZP.getTargetsDatabaseType(),s=(0,W.sN)(t),{typedDatabases:o}=ne.ZP.state;let i;i=ee.default.checkGate("typed_move_to_improved_search")?await this.getTypedCollectionMenuItemsFromSearch({query:e,databaseType:t?[t]:void 0}):this.getTypedMoveToMenuItems({query:e,typedDatabases:o});return{typedSuggestedMenuSection:{key:"suggested",render:e=>(0,ge.jsx)(L.Z,{...e,title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"{typedItemName} databases",id:"moveBlockMenu.typedSuggestedSection.title",values:{typedItemName:(0,n.Z)(s)}}),right:(0,ge.jsx)(it,{typedItemName:s})}),items:i.slice(0,5)},typedSuggestedResults:o}},this.allTargetsAreNavigableStore=this.createComputedStore((()=>this.props.targets.every((e=>e.isNavigableBlock()))))}renderComponent(){if(!this.props.isAddTo&&!this.props.isCreateIn&&!ne.ZP.state.isOpen)return(0,ge.jsx)(ge.Fragment,{});const{device:e}=this.environment,{autocompleteQuery:t,isAddTo:s,isTurnIntoPage:o}=this.props,{requestStore:i,menuListStore:a}=this.stores,n=!i.state.ready&&t.length>0;let r,l;return r=lt()?e.isMobile?this.renderInputMenuItem(n):(0,ge.jsx)(L.Z,{isInput:!0,children:this.renderInputMenuItem(n)}):void 0,l=e.isMobile?{onMouseEnter:this.props.onMouseEnter,menuType:K.og.Modal,title:o?(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Add to another page",id:"moveBlockMenu.mobileNewPageInj.label"}):s?(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Add new page in",id:"moveBlockMenu.mobileAddTo.label"}):(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Move to",id:"moveBlockMenu.mobileMoveTo.label"}),right:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Done",id:"moveBlockMenu.rightDoneButton.label"}),onClickRight:this.props.onCancel,header:r}:{onMouseEnter:this.props.onMouseEnter,menuType:K.og.Popup,width:this.props.desktopWidth,header:r},(0,ge.jsxs)(w.Z,{capture:!0,allowMenuList:!0,allowEsc:!0,allowTabUntab:!1,allowUndo:!1,children:[(0,ge.jsx)(k.Z,{capture:!0,onEsc:this.props.onCancel}),(0,ge.jsx)(P.Z,{store:this.stores.ignoreSelectionAreaStore,capture:this.props.captureSelection,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:this.props.restoreSelection,render:()=>{var e;const t=!Boolean(this.props.autocompleteQuery)&&!this.environment.device.isMobile||(0,U.Hn)()&&!Boolean(this.props.autocompleteQuery);return(0,ge.jsx)(B.Z,{...l,footer:this.renderFooter(),children:t?this.renderMoveToModal():(0,ge.jsx)(me,{query:this.props.autocompleteQuery,spaceId:null===(e=this.getChosenSpaceStore())||void 0===e?void 0:e.id,menuListStore:a,requestStore:i,getAutocompleteItems:this.getAutocompleteItems})})}})]})}renderMoveToModal(){const e=this.getChosenSpaceStore(),t=this.getChosenSpaceViewStore();if(!t||!e)return;if((0,U.Hn)())return(0,ge.jsx)(ot,{spaceStore:e,spaceViewStore:t,onAccept:this.typedMoveOnAccept,targets:this.props.targets,menuListStore:this.stores.menuListStore});const s=(0,X.Cx)(e);return(0,ge.jsx)(Ke,{spaceStore:e,spaceViewStore:t,onAccept:this.props.onAccept,targets:this.props.targets,moveToPagesOnly:!this.allTargetsAreNavigableStore.state||s})}renderFooter(){const{isCreateIn:e,isAddTo:t,intl:s}=this.props,{currentUserRootStore:o,currentSpaceStore:i}=$.default.state,a=this.stores.moveToSpaceMenuStore.getChosenSpaceStore();if(!o||!a||!i)return;if(!(this.allTargetsAreNavigableStore.state&&!i.getDisableMoveToSpace()&&!e&&!t))return null;const n=o.getSpaceViewStores(),r=m.mN(m.oA(n.map((e=>{const t=e.getSpaceStore();return!(0,X.Cx)(t)&&t}))),(e=>e.id)),l={menuTitle:s.formatMessage({defaultMessage:"Workspaces",id:"moveBlockMenu.spaceSwitcher.menuTitle"}),items:r,selectedItem:a,onSelect:e=>{this.stores.moveToSpaceMenuStore.setState({chosenSpaceId:e.id})},getKey:e=>e.id,renderItem:e=>(0,ge.jsx)(b.Z,{...e,checkState:e.value.id===a.id,title:(0,X.rn)(this.environment,e.value),icon:(0,ge.jsx)(F.Z,{icon:(0,X.Wd)(this.environment,e.value),isEmptyPage:!1,size:20,disabled:!0,title:(0,X.rn)(this.environment,e.value)})}),renderOrigin:e=>(0,ge.jsxs)(V.Z,{isSmall:!0,style:{fontWeight:"normal",fontSize:12,flexShrink:1},...e,children:[(0,ge.jsx)(F.Z,{disabled:!0,icon:a.getIcon(),isEmptyPage:!1,size:16,title:a.getName(),style:{marginRight:4}}),(0,ge.jsx)(ce.s,{children:(0,X.rn)(this.environment,a)}),(0,c.i)(this.getSpaceChevronStyle())]}),width:150};return(0,ge.jsxs)("div",{children:[(0,ge.jsx)(j.Z,{vertical:!1,size:1}),(0,ge.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",padding:"4px"},children:(0,ge.jsx)(N.Z,{...l},"space-switcher")})]})}renderInputMenuItemLabel(){const{intl:e,isAddTo:t,isTurnIntoPage:s}=this.props;if(this.isMovingToAnotherSpace())return e.formatMessage({defaultMessage:"Duplicate page…",id:"moveToMenuRenderer.duplicateToSpace.label"});if((0,U.Hn)()){const t=(0,W.sN)(ne.ZP.getTargetsDatabaseType());return e.formatMessage({defaultMessage:"Move {typedItemName} to…",id:"moveToMenuRenderer.moveTo.typedLabel"},{typedItemName:t})}return s?e.formatMessage({defaultMessage:"Search page to add in…",id:"moveToMenuRenderer.addNewPageIn.label"}):t?e.formatMessage({defaultMessage:"Search page to add to…",id:"moveToMenuRenderer.addTo.label"}):e.formatMessage({defaultMessage:"Move page to…",id:"moveToMenuRenderer.moveTo.teamLabel"})}renderInputMenuItem(e){const{device:t}=this.environment,{autocompleteQuery:s}=this.props,o=(0,U.Hn)()&&ne.ZP.state.isOpen&&"typedUninitialized"===ne.ZP.state.variant;return(0,ge.jsxs)(ge.Fragment,{children:[(0,ge.jsx)(C.ZP,{onCancel:()=>{ne.ZP.state.isOpen&&ne.ZP.setState({...ne.ZP.state,isOpen:!1})},disabled:o,focus:!t.isMobile||void 0,focusAfterAnimation:!0,value:s,onChange:e=>{this.props.onAutocompleteQueryChange(e.target.value),this.stores.menuListStore.setState({...this.stores.menuListStore.state,focus:{section:0,indexLocal:0,indexGlobal:0}})},placeholder:this.renderInputMenuItemLabel(),inputLeft:(0,ge.jsx)(C.f_,{icon:u.R}),inputRight:(0,ge.jsx)(O.Z,{show:e,showDelay:400,showHold:0,render:e=>e&&(0,ge.jsx)(Z.Z,{style:{marginRight:2}})}),style:{marginBottom:-2}}),this.isMovingToAnotherSpace()&&(0,ge.jsxs)(D.Z,{isMultiline:!0,isSecondaryColor:!1,style:{background:this.theme.accentColors.gray[30],marginTop:12,marginLeft:12,marginRight:12,padding:8,borderRadius:6},children:[(0,g.t)({fill:this.theme.accentColors.orange[400],width:14,height:14,marginRight:4,alignSelf:"center",display:"inline-block",verticalAlign:"text-bottom"}),(0,ge.jsx)("span",{children:(0,ge.jsx)(f.FormattedMessage,{id:"moveBlockMenu.duplicateToSpace.message",defaultMessage:"You can only duplicate pages into another workspace — not move them."})}),(0,ge.jsx)(A.Z,{href:(0,G.UY)("guides.duplicateToSpace"),style:{color:this.theme.accentColors.gray[500],fontWeight:S.Z.fontWeight.semibold,marginTop:4},children:(0,ge.jsx)(f.FormattedMessage,{id:"moveBlockMenu.duplicateToSpace.learnMoreLink",defaultMessage:"Learn more"})})]})]})}getSuggestedMenuSection(e,t){const s=0===e.length&&t?ze({spaceStore:t,targets:this.props.targets}):[];return{key:"suggested",render:e=>(0,ge.jsx)(L.Z,{...e,title:(0,ge.jsx)(f.FormattedMessage,{defaultMessage:"Suggested",id:"moveBlockMenu.suggestedSection.title"})}),items:m.oA([this.getPrivatePagesMenuItem({query:e,chosenSpaceStore:t}),...s.filter((e=>(0,U.Xk)(e,this.props.targets))).map((e=>Ae({spaceStore:t,value:{type:"page",id:e.id,spaceId:t.id},showPath:!1,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})))])}}async getTypedCollectionMenuItemsFromSearch(e){const{databaseType:t,query:s}=e,o=this.getChosenSpaceStore();if(!o)return[];return(await T.RT({environment:this.environment,query:s,limit:20,databaseType:t,parentStore:o,spaceStore:o,collectionViewBlockStore:void 0})).results.map((e=>Ae({spaceStore:o,value:{type:"collection",id:e,spaceId:o.id},showPath:!0,isCreateIn:this.props.isCreateIn,onAccept:this.props.isCreateIn?this.props.onAccept:this.typedMoveOnAccept}))).filter(v.$K)}getCurrentBlockMenuItem(e){const t=this.props;if(!t.isAddTo||!t.isCreateIn)return;if(e.query)return;const s=$.default.state.mainEditorCurrentBlockStore;if(!s)return;const o=t.parentBlockId?re.G.createChildStore(s,{table:h.iU,id:t.parentBlockId}):void 0,i=y.gt(o);return i?{key:i.pageStore.id,render:e=>{const s=s=>(0,ge.jsx)(b.Z,{...(0,z.Z)(s||{},e),icon:(0,p.R)({width:14}),title:t.targets.length>1?(0,ge.jsx)(f.FormattedMessage,{id:"moveBlockMenu.currentPage.pluralAddTitle",defaultMessage:"New sub-pages"}):(0,ge.jsx)(f.FormattedMessage,{id:"moveBlockMenu.currentPage.singleAddTitle",defaultMessage:"New sub-page"})});return this.environment.device.isMobile?s():(0,ge.jsx)(R.Z,{renderTooltip:()=>(0,ge.jsx)(q.Z,{imageURL:a.Z.images.tooltips.pageMenu.newSubpagePng,imageWidth:140,imageHeight:100,caption:(0,ge.jsx)(f.FormattedMessage,{...at.createSubpage})}),placement:R.Z.Placement.Right,delayThreshold:0,render:e=>s(e)})},action:()=>t.onAccept(i.createInValue)}:void 0}getPrivatePagesMenuItem(e){var t;const{query:s,chosenSpaceStore:o}=e,i=at.privatePagesTitle,a=this.props.intl.formatMessage(i).replace(/<[^>]*>/g,""),n=s?null===(t=(0,l.C6)(s,a))||void 0===t?void 0:t.score:void 0,r=s&&(n||0)>=l.V5;if((!s||r)&&this.allTargetsAreNavigableStore.state&&(!o||Ue({environment:this.environment,targets:this.props.targets,chosenSpaceStore:o})))return{key:"private",render:e=>(0,ge.jsx)(b.Z,{icon:(0,ge.jsx)(_.Z,{size:22,userStore:(0,E.B7)(this.environment)}),title:(0,ge.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,ge.jsx)("span",{children:(0,ge.jsx)(f.FormattedMessage,{...i})}),(0,Y.bq)()&&(0,ge.jsx)("div",{style:{marginLeft:2},children:(0,d.b)({width:14,height:14,fill:this.theme.mediumIconColor})})]}),...e}),action:()=>{this.props.onAccept({type:"space-private-pages"})}}}getSavedQuickAddParentMenuItem(e){const{isAddTo:t}=this.props,{query:s,savedQuickAddParent:o}=e,i=this.getChosenSpaceStore();if(i)return t&&!s&&"space"===o.type||"page"===o.type?Ae({spaceStore:i,value:o,showPath:!0,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept}):void 0}getTypedMoveToMenuItems(e){const{query:t,typedDatabases:s}=e,o=this.getChosenSpaceStore();if(!o||!t||!s)return[];return(0,l.ZP)(t,s,(e=>{const t=String(e.getName())||"",s=(0,H.u3)(e);return[t,s instanceof re.zX&&s.getName()||""].join(" ")})).map((e=>Ae({spaceStore:o,value:{type:"collection",id:e.id,spaceId:o.id},showPath:!0,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept}))).filter(v.$K)}getMoveToTeamMenuItems(e){if(e&&!this.allTargetsAreNavigableStore.state)return[];const t=this.getChosenSpaceStore(),s=this.getChosenSpaceViewStore();if(!t||!s)return[];let o=s.getTeamsStores();return e&&(o=(0,l.ZP)(e,o,(e=>e.getName()||""))),o.map((e=>Ae({spaceStore:t,value:{type:"team",id:e.id,spaceId:t.id},showPath:!1,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept}))).filter(v.$K)}shouldDisplayInTemplatesSection(e){return!!this.props.isCreateIn&&e.isTemplate()}getSpaceChevronStyle(){return{width:10,marginLeft:4,fill:this.theme.lightIconColor}}isMovingToAnotherSpace(){var e;const{moveToSpaceMenuStore:t}=this.stores;return!!t&&t.getChosenSpaceId()!==(null===(e=$.default.state.currentSpaceStore)||void 0===e?void 0:e.id)}getChosenSpaceStore(){return this.stores.moveToSpaceMenuStore.getChosenSpaceStore()??$.default.state.currentSpaceStore}getChosenSpaceViewStore(){return this.stores.moveToSpaceMenuStore.getChosenSpaceViewStore()??$.default.state.currentSpaceViewStore}}nt.displayName="MoveToOrCreateMenu";const rt=(0,f.injectIntl)(nt);function lt(){return J.Z.state.online}},63334:(e,t,s)=>{s.d(t,{Z:()=>a});var o=s(49085);class i extends o.default{getInitialState(){return{}}}const a=i},30765:(e,t,s)=>{s.d(t,{s:()=>c});var o=s(67294),i=s(480),a=s(24405),n=s(82990),r=s(26388);var l=s(85893);function c(e){let{children:t,style:s}=e;window.__c={n:"TextOverflowWithTooltip"};const{isSafari:c}=(0,i.Fy)(),d=(0,o.useRef)(null),p=function(e){const[t,s]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const{current:t}=e;if(!t)return void s(!1);const o="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;s(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==o||o.observe(t),()=>null==o?void 0:o.unobserve(t)}),[]),t}(d),u=(0,a.yK)((()=>({overflowText:{...n.Z.textOverflowStyle,...s}})),[s]);return(0,l.jsx)(r.Z,{delayThreshold:500,placement:r.Z.Placement.Bottom,forceVisibleState:!(c||!p)&&void 0,renderTooltip:()=>p?t:void 0,render:e=>(0,l.jsx)("div",{ref:d,style:u.overflowText,...e,children:t})})}},20658:(e,t,s)=>{s.d(t,{$:()=>a});s(67294);var o=s(45238),i=s(85893);const a=(0,o.I)("boxedPerson",{viewBox:"0 0 26 25",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M21.719 19.406h-2.004V21.2c0 2.414-1.219 3.633-3.68 3.633H4.27c-2.438 0-3.668-1.219-3.668-3.633V9.34c0-2.413 1.23-3.632 3.668-3.632h2.015V3.914C6.285 1.5 7.515.281 9.953.281H21.72c2.46 0 3.68 1.219 3.68 3.633v11.86c0 2.414-1.22 3.632-3.68 3.632Zm-.024-1.886c1.172 0 1.817-.633 1.817-1.852V4.02c0-1.22-.645-1.852-1.817-1.852H9.988c-1.16 0-1.816.633-1.816 1.852v1.687h7.863c2.461 0 3.68 1.207 3.68 3.633v8.18h1.98Zm-5.683 5.425c1.16 0 1.816-.633 1.816-1.851V9.445c0-1.218-.656-1.851-1.816-1.851H4.305c-1.16 0-1.817.633-1.817 1.851v11.649c0 1.218.657 1.851 1.817 1.851h11.707Z"}),(0,i.jsx)("path",{d:"M10.24 14.855c1.176 0 2.164-1.042 2.164-2.39 0-1.316-1-2.32-2.165-2.32s-2.17 1.02-2.164 2.33c0 1.338.993 2.38 2.164 2.38ZM6.661 19.85h7.15c.6 0 .966-.285.966-.757 0-1.386-1.757-3.287-4.539-3.287-2.787 0-4.538 1.901-4.538 3.287 0 .472.36.757.961.757Z"})]})})}}]);