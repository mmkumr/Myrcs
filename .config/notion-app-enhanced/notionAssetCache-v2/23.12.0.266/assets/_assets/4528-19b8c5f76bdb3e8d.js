"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4528],{48298:(e,s,t)=>{t.d(s,{Vy:()=>q,YN:()=>x,kj:()=>j,kn:()=>C,mY:()=>R,yW:()=>w});t(57658);var i=t(59753),a=t(27006),o=t(58129),r=t(21202),n=t(15047),l=t(19889),d=t(97880),c=t(50906),p=t(54642),m=t(76464),u=t(9953),b=t(39699),g=t(15010),h=t(33954),f=t(33929),v=t(26350),_=t(98905),M=t(34583),y=t(47307);const C=async e=>{const{environment:s,store:t,accessRequestStore:i,forActor:a,status:o,from:r,onResolveComplete:n}=e,d=s.currentUser.id;if("approved"===o){const e={type:"existingUser",value:a,spaceRole:"read_and_write"};if(!(await m.n_({environment:s,store:t,inviteTargets:[e],inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return void(null==n||n(!1))}b.createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:s,perform:e=>{u.sW({store:i,transaction:e,data:{granted_time:Date.now(),granted_by_table:l.KJ,granted_by_id:d,resolved_time:Date.now(),resolved_by_table:l.KJ,resolved_by_id:d,status:o}})}}),c.O8I(s,{status:o,request_id:i.id,from:r,for_actor_id:a.id,space_role:t.getRole()}),null==n||n(!0)},x=async e=>{const{environment:s,store:t,status:i,requests:a,onResolveComplete:o}=e,r=s.currentUser.id;if("approved"===i){const e=a.map((e=>({type:"existingUser",value:e.forActor,spaceRole:"read_and_write"})));if(!(await m.n_({environment:s,store:t,inviteTargets:e,inviteRole:"read_and_write",isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return void(null==o||o(!1))}b.createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:s,perform:e=>{a.map((s=>{const t=s.accessRequestStore;u.sW({store:t,transaction:e,data:{granted_time:Date.now(),granted_by_table:l.KJ,granted_by_id:r,resolved_time:Date.now(),resolved_by_table:l.KJ,resolved_by_id:r,status:i}})}))}}),null==o||o(!0)};async function w(e){const{environment:s,status:t,accessRequest:i,onResolveComplete:a,from:o,forActor:r}=e;if(!i.isGuestInviteRequest())return;const n=await p.resolveAccessRequest(s,{accessRequestId:i.id,status:t,spaceId:i.getParentId()});if("failed"===n.type)return null==a||a(!1),void y.showErrorMessage((0,h.wf)(f.default.getIntl(),n));null==a||a(!0),await M.bi(s);const l=i.getAttributes().permission_records_and_roles[0].role,d=i.getAttributes().permission_records_and_roles[0].id;var m;"approved"===t&&c.jBu(s,{role:l,is_space:!1,invite_targets:[{type:"existingUser",value:{id:r.id,version:0,email:r.getEmail()},spaceRole:"none"}],is_onboarding:!1,invite_origin:"guest_invite_request",permission_items:[{type:"user_permission",role:l,user_id:r.id}],invite_message_length:(null===(m=i.getAttributes().invite_message)||void 0===m?void 0:m.length)??0,domainType:(0,g.JF)()});c.CgF(s,{status:t,request_id:i.id,for_actor_id:i.getForActorId(),created_by_id:i.getCreatedById(),requested_page_id:d,requested_role:l,from:o})}async function R(e){const{environment:s,status:t,requests:a,onResolveComplete:o,from:r}=e,n=[],l=[];await Promise.all(a.map((e=>{const{accessRequest:a,forActor:o}=e,d=i.kk.fromAccessRequest(a),c=i.kk.fromUser(o);return w({environment:s,status:t,accessRequest:d,onResolveComplete:e=>{e?n.push(c):l.push(c)},forActor:c,from:r})}))),null==o||o(n,l)}async function j(e){if(_.Z.reset(),!e.canAdmin)return;const{environment:s,spaceId:t}=e,i=await p.getUnreadAccessRequestCount(s,{parentTable:n.bx,parentId:t,size:1});"success"===i.type&&_.Z.setState({spaceId:t,count:i.data.count})}async function q(e,s){var t;const n=new Set(null===(t=e.getModel())||void 0===t?void 0:t.getMemberIds()),c=new Map,p=function(e){const s=new Map;for(const a of e){var t;const e=i.kk.fromAccessRequest(a.accessRequest),o=A(e);if(!(0,d.$K)(o))continue;const r=null===(t=s.get(o))||void 0===t?void 0:t.accessRequest;r&&r.created_time>e.getCreatedTime()||s.set(o,a)}return Array.from(s.values())}(s.map((s=>{const t=(0,v.Kv)(e,{table:o.J8,id:s}),i=t.getValue();if(i)return{accessRequest:i,accessRequestStore:t}})).filter(d.$K));return await Promise.all(p.map((async s=>{let{accessRequest:t,accessRequestStore:o}=s;if(t.for_actor_table!==l.KJ||t.created_by_table!==l.KJ)return;const p=(0,v.Kv)(e,{table:t.for_actor_table,id:t.for_actor_id});await p.load();const m=p.getValue();if(!m)return;const u=(0,v.Kv)(e,{table:t.created_by_table,id:t.created_by_id});await u.load();const b=u.getValue();if(!b)return;const g=i.kk.fromAccessRequest(t);g.isGuestInviteRequest()&&!function(e){let{spaceStore:s,accessRequest:t,spaceMemberIds:i}=e;if(i.has(t.for_actor_id))return!1;const o=t.getAttributes().permission_records_and_roles[0].id,n=t.getForActorId(),l=v.G.createChildStore(s,{id:o,spaceId:s.id,table:r.iU});if(!l||l.getPermissionItems().some((e=>(0,a.jg)(e)&&e.user_id===n&&(0,a.YX)(e.role))))return!1;return!0}({accessRequest:g,spaceMemberIds:n,spaceStore:e})||function(e){const{accessRequest:s,requests:t,createdByValue:a,forActorValue:o,accessRequestStore:r}=e,n=i.kk.fromAccessRequest(s),l=function(e){if(e.isGuestInviteRequest()){const s=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${s.id}:${s.role}`}if(e.isSpaceMembershipRequest())return`space_membership_${e.getForActorId()}`;if(e.isTeamMembershipRequest())return;if(e.isPageAccessRequest())return;(0,d.t1)(e)}(n);if(!(0,d.$K)(l))return;if(t.has(l)){const e=t.get(l);if(!e)return;s.created_time>e.latestRequestTime?t.set(l,{...e,createdByActorsWithReason:[{actor:a,reason:s.message},...e.createdByActorsWithReason],accessRequest:s,accessRequestStore:r,latestRequestTime:s.created_time}):t.set(l,{...e,createdByActorsWithReason:[...e.createdByActorsWithReason,{actor:a,reason:s.message}]})}else t.set(l,{forActor:o,createdByActorsWithReason:[{actor:a,reason:s.message}],accessRequest:s,accessRequestStore:r,latestRequestTime:s.created_time,requestType:n.isGuestInviteRequest()?"guest":"member"})}({requests:c,accessRequest:t,createdByValue:b,forActorValue:m,accessRequestStore:o})}))),Array.from(c.values())}function A(e){if(e.isGuestInviteRequest()){const s=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${s.id}:${e.getCreatedById()}`}if(e.isSpaceMembershipRequest())return`space_membership_${e.getForActorId()}:${e.getCreatedById()}}`;e.isTeamMembershipRequest()||e.isPageAccessRequest()||(0,d.t1)(e)}},15025:(e,s,t)=>{t.d(s,{VR:()=>p,ac:()=>c,zq:()=>d});t(67294);var i=t(24405),a=t(13148),o=t(98519),r=t(31412),n=t(85893);function l(e){window.__c={n:"CapabilityItem"};const{enabled:s,labelIfEnabled:t,labelIfDisabled:a}=e,o=(0,i.yK)((e=>({container:{color:s?e.mediumTextColor:e.lightTextColor}})),[s]);return(0,n.jsxs)("div",{style:o.container,children:[m(s)," ",s?t:a]})}function d(e){const s="none"!==e;return[(0,n.jsx)(l,{enabled:s&&e.read_content,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,n.jsx)(l,{enabled:s&&e.insert_content,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,n.jsx)(l,{enabled:s&&e.update_content,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,n.jsx)(l,{enabled:s&&e.insert_comment,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,n.jsx)(l,{enabled:s&&e.read_comment,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function c(e){return[(0,n.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,n.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function p(e){return[(0,n.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,n.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,n.jsx)(r.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function m(e){const s={width:12,display:"inline",verticalAlign:"middle"};return e?(0,o.k)(s):(0,a.U)(s)}},84015:(e,s,t)=>{t.d(s,{_:()=>d});t(67294);var i=t(480),a=t(26825),o=t(31412),r=t(15025),n=t(28992),l=t(85893);function d(e){window.__c={n:"CumulativeBotBlockRoleTooltip"};const{role:s}=e,t=(0,o.useIntl)(),{device:d}=(0,i.O7)(),c=(0,r.zq)(s);return(0,l.jsx)(n.Z,{...e,title:t.formatMessage((0,a.Gx)(s,void 0).label),shouldWrapCaption:!0,style:d.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,l.jsx)("div",{children:c})})}},33241:(e,s,t)=>{t.d(s,{M:()=>u,d:()=>m});t(67294);var i=t(24405),a=t(8848),o=t(82855),r=t(26825),n=t(15047),l=t(97880),d=t(31412),c=t(89728),p=t(85893);function m(e){let{role:s,events:t,disabled:a,buttonStyle:r,buttonContents:n,icon:l,table:m,isRemovable:b,isCurrentUser:g}=e;window.__c={n:"PermissionRoleButton"};const h=(0,i.yK)((e=>({button:{marginRight:8,...r},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[r]),f=l||!a&&o.E;return(0,p.jsxs)(c.Z,{...t,disabled:a,style:h.button,children:[n||(0,p.jsx)("span",{className:"notranslate",children:(0,p.jsx)(d.FormattedMessage,{...u(s,m,b,g).label})}),f&&f(h.icon)]})}function u(e,s,t,i){if("access"===e)return{label:r.mq.canAccessLabel};if("limited"===e)return{label:r.mq.limitedAccessLabel};if((0,r.oF)(e))return(0,r.Gx)(e,s);switch(e){case"editor":return s===n.bx?{label:r.mq.workspaceOwnerLabel,caption:r.mq.workspaceOwnerCaption}:{label:r.mq.fullAccessLabel,caption:r.mq.fullAccessCaption};case"membership_admin":return s===n.bx?{label:r.mq.membershipAdminLabel,caption:r.mq.membershipAdminCaption}:{label:r.mq.canEditLabel,caption:r.mq.canEditCaption};case"read_and_write":return s===n.bx?{label:r.mq.memberLabel,caption:r.mq.memberCaption}:{label:r.mq.canEditLabel,caption:r.mq.canEditCaption};case"content_only_editor":return{label:r.mq.canEditContentLabel,caption:r.mq.canEditContentCaption};case"reader":return{label:r.mq.canReadLabel,caption:r.mq.canReadCaption};case"comment_only":return{label:r.mq.canCommentLabel,caption:r.mq.canCommentCaption};case"none":return t?s===n.bx?i?{label:r.mq.leaveWorkspaceLabel,style:{color:a.ZP.red}}:{label:r.mq.removeFromWorkspaceLabel,style:{color:a.ZP.red}}:{label:r.mq.removeWorkspaceLabel,style:{color:a.ZP.red}}:{label:r.mq.noAccessLabel,style:{color:a.ZP.red}};default:(0,l.t1)(e)}}},7567:(e,s,t)=>{t.d(s,{ZP:()=>G});t(57658),t(67294);var i=t(83355),a=t(41892),o=t(36591),r=t(26825),n=t(27006),l=t(15047),d=t(47425),c=t(97880),p=t(31412),m=t(47307),u=t(1865),b=t(95477),g=t(43250),h=t(33929),f=t(87279),v=t(98742),_=t(67669),M=t(18514),y=t(61766),C=t(31194),x=t(70060),w=t(88893),R=t(35057),j=t(52275),q=t(31945),A=t(78140),k=t(28992),I=t(32163),T=t(74136),F=t(72495),P=t(26388),S=t(64369),Z=t(84015),U=t(42402),L=t(33241),B=t(60442),D=t(42115),W=t(85893);const E=(0,p.defineMessages)({fullAccessTeamGuestsDisabledMessage:{id:"permissionRoleSelect.teamGuestPermissionItem.disabledPermissionitem.tooltip",defaultMessage:"Teamspace guests can't have full access."}});class O extends i.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:y.Z},this.renderPermissionOverrideLabel=()=>{const{device:e}=this.environment;return(0,W.jsx)(S.Z,{style:{padding:12,backgroundColor:this.theme.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`,marginTop:e.isMobile?28:1},isMultiline:!0,isSmall:!0,children:(0,W.jsx)(p.FormattedMessage,{id:"permissionRoleSelect.overrideMessage.caption",defaultMessage:"You’ll override permissions from the parent page if you change this role."})})},this.isRemovingSelfRole=e=>this.props.isUserPermission&&(0,r.nl)(this.props.role,e)===this.props.role&&"none"===e,this.isDowngradingSelfRole=e=>this.props.isUserPermission&&(0,r.nl)(this.props.role,e)===this.props.role}renderComponent(){const{device:e}=this.environment,s=!!this.props.isUserPermission;return(0,W.jsx)(q.ZP,{onClick:e=>{e.stopPropagation()},popupType:e.isMobile?q.Z4.SlideUp:q.Z4.Popup,buttonPopupStore:this.stores.buttonPopupStore,renderOrigin:e=>this.props.origin?this.props.origin:this.props.isMenuItem?(0,W.jsx)(j.Z,{...e,title:(0,W.jsx)(p.FormattedMessage,{...(0,L.M)(this.props.role,this.props.table,$(this.props.type,this.props.isRemovableOverride),s).label}),focused:!1,showExtensionArrow:!0}):(0,W.jsx)(L.d,{role:this.props.role,events:e,disabled:this.props.disabled,buttonContents:this.props.buttonContents,buttonStyle:this.props.buttonStyle,table:this.props.table,isRemovable:$(this.props.type,this.props.isRemovableOverride),isCurrentUser:s}),placementToOrigin:this.props.placementToOrigin?this.props.placementToOrigin:C.Iw.Bottom,alignmentToOrigin:this.props.alignmentToOrigin,render:s=>{const t=this.props.role;let i,a;if((0,r.oF)(t))i=[{key:"mixed_role_section",render:e=>(0,W.jsx)(F.Z,{...e,topBorder:!1}),items:[{key:"mixed_role_description",render:()=>(0,W.jsx)(Z._,{role:t}),action:()=>{}}]},{key:"bot_capabilities_warning",render:e=>(0,W.jsx)(F.Z,{...e,topBorder:!0}),items:[{key:"warning_details",render:e=>(0,W.jsx)(k.Z,{...e,shouldWrapCaption:!0,caption:"Integration permissions cannot be changed on a page. You can manage integrations in settings."}),action:()=>{}}]},{key:"remove_bot",render:e=>(0,W.jsx)(F.Z,{...e,topBorder:!0}),items:[{key:"none",render:e=>this.getItem({role:"none"},e.focused,e),action:()=>{this.handleSelect("none"),s.close()}}]}];else{i=[{key:"roles",render:e=>(0,W.jsx)(F.Z,{...e,topBorder:0!==e.index}),items:function(e,s,t,i,a,o){if(a&&a.length>0)return a;const r=[];"explicit_team_guest_permission"===e?r.push({role:"editor",disabledInfo:{isDisabled:!0,disabledMessage:h.default.formatMessage(E.fullAccessTeamGuestsDisabledMessage)}}):"bot_permission"!==e&&r.push({role:"editor"});"space"===s&&(0,_.U7)()&&r.push({role:"membership_admin"});r.push({role:"read_and_write"}),"collection_view"!==o&&"collection_view_page"!==o||"bot_permission"===e&&"content_only_editor"!==t||r.push({role:"content_only_editor"});s!==l.bx&&("bot_permission"!==e&&r.push({role:"comment_only"}),"bot_permission"===e&&"reader"!==t||r.push({role:"reader"}));i||r.push({role:"none"});return r}(this.props.type,this.props.table,this.props.role,this.props.isInvite,this.props.availableRoleItems,this.props.blockType).map((e=>({key:e.role,render:s=>this.getItem(e,s.focused,s),action:()=>{this.handleSelect(e.role),s.close()}})))}]}return a=e.isMobile?{menuType:f.og.Modal,title:(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.mobile.title",defaultMessage:"Select role"}),right:(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.mobile.doneButton.label",defaultMessage:"Done"}),onClickRight:s.close}:{menuType:f.og.Popup,width:264},(0,W.jsxs)(A.Z,{className:g.a6i,header:this.props.header,footer:this.props.footer,...a,children:[(0,W.jsx)(I.Z,{type:I.i.Vertical,initialFocus:void 0,sections:i}),this.props.showPermissionOverrideWarning&&this.renderPermissionOverrideLabel()]})}})}getItem(e,s,t){const i=!!this.props.isUserPermission;return this.renderItem({...(0,L.M)(e.role,this.props.table,$(this.props.type,this.props.isRemovableOverride),i),focused:s,props:t,disabledMessage:V(e.role,this.props.table,this.props.type),availableRole:e})}renderItem(e){const{device:s}=this.environment,{onClick:t,key:i,...a}=e.props,r=e.availableRole.disabledInfo,n=this.environment.device.isMobile&&x.bQ(),l=Boolean(e.disabledMessage)&&!n;return r&&r.isDisabled?(0,W.jsx)(P.Z,{delayThreshold:0,renderTooltip:e=>(0,W.jsx)("div",{...e,children:r.disabledMessage}),placement:P.Z.Placement.Right,textWrap:!0,render:t=>(0,W.jsx)(j.Z,{...t,focused:e.focused,disabled:!0,disabledFeedback:!0,right:this.props.role===e.availableRole.role?(0,W.jsx)("div",{style:{width:s.isMobile?16:14},children:(0,o.e)()}):void 0,title:(0,W.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,W.jsx)("div",{style:{...e.style,marginRight:e.disabledMessage?6:0},children:(0,W.jsx)(p.FormattedMessage,{...e.label})})}),caption:e.caption&&(0,W.jsx)("span",{style:{color:this.theme.mediumTextColor},children:(0,W.jsx)(p.FormattedMessage,{...e.caption})}),shouldWrapCaption:!0})}):(0,W.jsx)(D.Z,{requireUpgradeToTier:Boolean(e.disabledMessage)&&w.M9(this.environment),analyticsName:this.props.upgradeButtonName,renderUpgradeTooltip:()=>e.disabledMessage,tooltipPlacement:P.Z.Placement.Left,onClick:t,onUpgradeClick:this.props.onUpgradeButtonClick,render:(t,i)=>{const{focused:r,...n}=(0,v.Z)(a,t);return(0,W.jsx)(j.Z,{...n,focused:r||e.focused,right:this.props.role===e.availableRole.role?(0,W.jsx)("div",{style:{width:s.isMobile?16:14},children:(0,o.e)()}):void 0,title:(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,W.jsx)("div",{style:{...e.style,marginRight:e.disabledMessage?6:0},children:(0,W.jsx)(p.FormattedMessage,{...e.label})}),i,e.availableRole.tag&&(0,W.jsx)(T.Z,{desktopStyle:{marginLeft:7},children:e.availableRole.tag})]}),caption:e.caption&&(0,W.jsx)("span",{style:{color:this.theme.mediumTextColor},children:(0,W.jsx)(p.FormattedMessage,{...e.caption})}),shouldWrapCaption:!0,disabled:l})}},i)}async handleSelect(e){const{table:s,role:t}=this.props;if(t===e)return;const i=()=>{this.props.onChange&&this.props.onChange(e)};if(V(e,this.props.table,this.props.type)&&!b.default.isAdminMode)u.y(this.environment,{from:this.props.upgradeButtonName,for:w.M9(this.environment)||"plus"}),this.props.onUpgradeButtonClick&&this.props.onUpgradeButtonClick();else if(this.isRemovingSelfRole(e))m.showDialog({showCancel:!0,keepFocus:!1,message:s===l.bx?(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromWorkspace.confirmationMessage",defaultMessage:"Are you sure you want to remove your own access? You will lose access to the workspace, and any private pages will be lost."}):(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromPage.confirmationMessage",defaultMessage:"Are you sure you want to remove your own access?"}),items:[{label:(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeSelfButton.label",defaultMessage:"Remove"}),color:"red",onAccept:i}]});else if(this.isDowngradingSelfRole(e))m.showDialog({showCancel:!0,keepFocus:!1,message:(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfFromWorkspaceOrPage.confirmationMessage",defaultMessage:"Are you sure you want to downgrade your own access?"}),items:[{label:(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfButton.label",defaultMessage:"Downgrade"}),color:"red",onAccept:i}]});else if(function(e,s){return s===l.bx&&"none"===e}(e,this.props.table))if(this.props.onRemoveMemberClick)this.props.onRemoveMemberClick();else{await async function(e){const{message:s}=e;return new Promise((e=>{m.showDialog({showCancel:!0,keepFocus:!1,handleCancel:()=>e(!1),message:s,items:[{label:(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeUserButton.label",defaultMessage:"Remove"}),color:"red",onAccept:()=>e(!0)}]})}))}({message:K(!0)})&&i()}else i()}}function K(e){return e&&(0,R.wP)()?(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.enterprise.confirmationMessage",defaultMessage:"If you remove this member, they will lose workspace access. After their removal, you may transfer their private pages to another member. <transferpagelink>Learn more</transferpagelink>.",values:{transferpagelink:e=>(0,W.jsx)(U.Z,{href:(0,M.UY)("guides.transferContent"),external:!0,children:e})}}):e?(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to the workspace, and any private pages will be lost."}):(0,W.jsx)(p.FormattedMessage,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromPage.confirmationMessage",defaultMessage:"Are you sure you want to remove this person?"})}O.displayName="PermissionRoleSelect";const G=O;function V(e,s,t){const i=(0,R.zt)();if((0,d.QM)(i)){if((s===l.bx?n.RN(e):n.J5(e)&&!n.zz(e))&&"public_permission"!==t&&"bot_permission"!==t)return s===l.bx?(0,W.jsx)(B.Z,{imageURL:a.Z.images.tooltips.upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,W.jsx)(p.FormattedMessage,{defaultMessage:"Members cannot change workspace settings or invite new members.",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.caption"}),title:(0,W.jsx)(p.FormattedMessage,{defaultMessage:"Upgrade to add non-admin members",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.title"})}):(0,W.jsx)(B.Z,{imageURL:a.Z.images.tooltips.upsells.userReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,W.jsx)(p.FormattedMessage,{defaultMessage:"Users with edit access can edit a page but not share it with others.",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.caption"}),title:(0,W.jsx)(p.FormattedMessage,{defaultMessage:"Upgrade to add editors",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.title"})})}return!1}function $(e,s){if(void 0!==s)return s;switch(e){case"user_permission":case"bot_permission":case"group_permission":return!0;case"space_permission":case"explicit_team_permission":case"team_permission":case"team_owner_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":case"public_permission":case"exclusive_user_permission":return!1;default:(0,c.t1)(e)}}},93963:(e,s,t)=>{t.d(s,{z:()=>r});t(67294);var i=t(24405),a=t(31412),o=t(85893);function r(e){let{color:s,size:t,style:r}=e;window.__c={n:"StatusDot"};const n=(0,a.useIntl)(),l=(0,i.yK)((e=>({dot:{height:t||8,width:t||8,background:s||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...r}})),[t,s,r]);return(0,o.jsx)("div",{role:"img","aria-label":n.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:l.dot})}},42115:(e,s,t)=>{t.d(s,{Z:()=>d});t(67294);var i=t(480),a=t(1865),o=t(98742),r=t(26388),n=t(91718),l=t(85893);const d=function(e){window.__c={n:"UpsellGate"};const s=(0,i.O7)(),{render:t,requireUpgradeToTier:d,analyticsName:c,renderUpgradeTooltip:p,onUpgradeClick:m,alwaysAllowClick:u,tooltipPlacement:b,upgradeButtonDesktopStyle:g,upgradeButtonMobileStyle:h}=e;let f,{onClick:v,renderTooltip:_}=e;return d&&(f=(0,l.jsx)(n.Z,{subscriptionTier:d,analyticsName:c,desktopStyle:{display:"inline-block",pointerEvents:"none",...g},mobileStyle:{display:"inline-block",pointerEvents:"none",...h}}),u||(v=e=>{a.y(s,{from:c,for:d}),m&&m(e)},_=p)),(0,l.jsx)(r.Z,{renderTooltip:_||(()=>null),render:e=>t((0,o.Z)(e,{onClick:v}),f),disableTooltip:!_,placement:b})}},98905:(e,s,t)=>{t.d(s,{Z:()=>o});var i=t(49085);class a extends i.default{getInitialState(){return{count:0}}}const o=new a},32566:(e,s,t)=>{t.d(s,{k:()=>o});t(67294);var i=t(45238),a=t(85893);const o=(0,i.I)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},82855:(e,s,t)=>{t.d(s,{E:()=>o});t(67294);var i=t(45238),a=t(85893);const o=(0,i.I)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,a.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},8843:(e,s,t)=>{t.d(s,{h:()=>o});t(67294);var i=t(45238),a=t(85893);const o=(0,i.I)("mailRound",{viewBox:"0 0 17 12",svg:(0,a.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})},44295:(e,s,t)=>{t.d(s,{I:()=>o});t(67294);var i=t(45238),a=t(85893);const o=(0,i.I)("random",{viewBox:"0 0 14 14",svg:(0,a.jsx)("path",{d:"M9.45002,6.2999567 C8.87013,6.2999567 8.40002,5.8298565 8.40002,5.24995625 C8.40002,4.670056 8.87013,4.1999558 9.45002,4.1999558 C10.0299,4.1999558 10.5,4.670056 10.5,5.24995625 C10.5,5.8298565 10.0299,6.2999567 9.45002,6.2999567 Z M4.55,6.2999567 C3.9701,6.2999567 3.5,5.8298565 3.5,5.24995625 C3.5,4.670056 3.9701,4.1999558 4.55,4.1999558 C5.1299,4.1999558 5.6,4.670056 5.6,5.24995625 C5.6,5.8298565 5.1299,6.2999567 4.55,6.2999567 Z M6.993,0 C10.864,0 14,3.13600534 14,7.000007 C14,10.8639987 10.864,14 6.993,14 C3.129,14 0,10.8639987 0,7.000007 C0,3.13600534 3.129,0 6.993,0 Z M7,12.5999994 C10.094,12.5999994 12.6,10.0939983 12.6,7.000007 C12.6,3.90600567 10.094,1.4000046 7,1.4000046 C3.906,1.4000046 1.4,3.90600567 1.4,7.000007 C1.4,10.0939983 3.906,12.5999994 7,12.5999994 Z M7,10.8499986 C5.369,10.8499986 3.976,9.83499821 3.416,8.4000076 L4.585,8.4000076 C5.075,9.23299796 5.964,9.7999982 7,9.7999982 C8.036,9.7999982 8.932,9.23299796 9.415,8.4000076 L10.584,8.4000076 C10.024,9.83499821 8.631,10.8499986 7,10.8499986 Z"})})}}]);