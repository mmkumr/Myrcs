"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9529],{16091:(e,t,s)=>{s.d(t,{RD:()=>I,gc:()=>T,gl:()=>k,u7:()=>w});var r=s(67294),i=s(36769),n=s(480),o=s(86628),a=s(41432),l=s(31412),d=s(39699),c=s(37181),u=s(81415),h=(s(95477),s(19124)),p=s(68056),g=s(89086),m=s(28685),f=s(80444),v=s(77080),y=s(83212),x=s(26350),S=s(24666),b=s(41752),C=s(89626),M=s(85893);const j=(0,l.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Get instant answers to your questions"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"Ask a question about anything in your workspace. Notion AI will search across your pages and generate an answer."}});function w(){window.__c={n:"SpaceForAiOnboardingTooltip"};const e=(0,n.O7)(),t=function(){const e=(0,n.O7)(),t=(0,o.VK)((()=>{const t=f.default.state.mainEditorCurrentBlockStore;return t&&y.Z.getMode(e,t)}),[e]);return(0,o.VK)((()=>{if(e.device.isMobile)return;if(!v.default.checkGate("space_for_ai_tooltip_enabled"))return;const{currentUserSettingsStore:s,inAppCalloutStore:r}=f.default.state;if(!r.canShow("ai_onboarding_tooltip"))return;const i=null==s?void 0:s.getSettings();if(!i)return;if(i.signup_time&&i.signup_time>16770636e5)return;if("space_for_ai"!==(0,C.sy)())return;if(!(0,h.GD)(t))return;const n=S.default.state;if("editing"===n.mode){const e=(0,p.QY)(n.multiSelection);if(e&&(0,g.wd)(e.selection)){const t=e.store,s=m.E.findEditableWithStore(t);if(s){const e="block"===t.pointer.table?x.G.createChildStore(t,t.pointer):void 0,r=e&&e.getType(),i=Boolean(r&&(0,a.hD)(r)),n=t.getValue();if(i&&!n)return s}}}}),[e,t])}();return t?(0,M.jsx)(u.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,M.jsx)(l.FormattedMessage,{...j.spaceForAiHeader}),content:(0,M.jsx)(l.FormattedMessage,{...j.spaceForAiContent}),onCloseClick:()=>(0,C.h1)(e)}):null}function I(e){window.__c={n:"AskAIAnythingOnboardingTooltip"};const{originRef:t,openState:s}=e,r=(0,n.O7)(),i=(0,o.VK)((()=>(0,C.sy)()),[]);if(r.device.isMobile)return null;return"ask_ai_anything"===i&&"initialPrompt"===s.stage?(0,M.jsx)(u.U,{origin:t,placementToOrigin:"top",header:(0,M.jsx)(l.FormattedMessage,{...j.askAiAnythingHeader}),content:(0,M.jsx)(l.FormattedMessage,{...j.askAiAnythingContent}),onCloseClick:()=>(0,C.h1)(r)}):null}function k(e){window.__c={n:"RefineAIResponseOnboardingTooltip"};const{originRef:t,openState:s,isInputEmpty:r}=e,i=(0,n.O7)(),a=(0,o.VK)((()=>(0,C.sy)()),[]);if(i.device.isMobile)return null;const d="refine_ai_response"===a&&"results"===s.stage&&!s.loading&&"cursor"===s.context.type&&r;return(0,M.jsx)(u.U,{origin:d?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,M.jsx)(l.FormattedMessage,{...j.refineAiResponseHeader}),content:(0,M.jsx)(l.FormattedMessage,{...j.refineAiResponseContent}),onCloseClick:()=>(0,C.h1)(i)})}function T(e){window.__c={n:"ShowAssistantLocationTooltip"};const{origin:t}=e,s=(0,n.O7)(),i=(0,r.useCallback)((()=>{const{currentUserSettingsStore:e}=f.default.state;e&&(0,b.C)(s,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e})}),[s]);return(0,M.jsx)(u.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,M.jsx)(l.FormattedMessage,{...j.showAssistantLocationHeader}),content:(0,M.jsx)(l.FormattedMessage,{...j.showAssistantLocationContent}),onCloseClick:i})}(0,i.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=f.default.state;t&&d.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{c.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},41752:(e,t,s)=>{s.d(t,{C:()=>n});var r=s(39699),i=s(37181);function n(e,t){const{phase:s,transactionUserAction:n,userSettingsStore:o}=t;r.createAndCommit({environment:e,userAction:n,perform:e=>{i.d2({userSettingsStore:o,transaction:e,data:{ai_qna_intro_onboarding_phase:s}})}})}},40824:(e,t,s)=>{s.d(t,{N:()=>o});var r=s(49085),i=s(92595);class n extends r.default{getInitialState(){return{currentState:"default",lastStepLoadingCompletionUnixEpochMs:-1/0,aiWindowLastSeenUnixEpochMs:-1/0}}setAssistantLastViewedTime(){o.setState({...o.state,aiWindowLastSeenUnixEpochMs:Date.now()})}}const o=new n;(0,i.exposeDebugValue)("AssistantOriginElementStore",o)},92660:(e,t,s)=>{s.d(t,{Z:()=>l});s(67294);var r=s(480),i=s(86628),n=s(50506),o=s(53437),a=s(85893);function l(e){window.__c={n:"DefaultPopupOrModal"};const t=(0,r.O7)(),{modalStore:s,render:l}=e,{device:d}=t,c=(0,i.VK)((()=>s.state.open),[s]);return d.isMobile?(0,a.jsx)(o.ZP,{ariaLabel:e.ariaLabel,open:c,popupType:o.ZP.PopupType.SlideUp,origin:e.origin,onDismiss:e.onDismiss,render:l,style:e.style}):(0,a.jsx)(n.Z,{ariaLabel:e.ariaLabel,open:c,preventHideChildrenWhileOpening:!0,render:l,onDismiss:e.onDismiss,style:e.style,innerStyle:e.innerStyle})}},30676:(e,t,s)=>{s.d(t,{F:()=>a});s(67294);var r=s(86628),i=s(74016),n=s(52275),o=s(85893);function a(e){window.__c={n:"TeamMenuItem"};const{teamStore:t}=e,{name:s}=(0,r.VK)((()=>({name:t.getName()})),[t]);return(0,o.jsx)(n.Z,{...e,icon:(0,o.jsx)(i.p,{size:14,store:t,disabled:!0}),title:s})}},22715:(e,t,s)=>{s.d(t,{Z:()=>o});s(67294);var r=s(480),i=s(24405),n=(s(58047),s(85893));function o(){window.__c={n:"WebComponentNotSupportedInMobileNativeWarning"};(0,r.O7)(),(0,i.yK)((e=>({container:{margin:"8px 16px",background:e.accentColors.yellow[100],borderRadius:8,height:"fit-content"}})),[]);return(0,n.jsx)(n.Fragment,{})}},93481:(e,t,s)=>{s.d(t,{Z:()=>M});s(67294);var r=s(83355),i=s(69651),n=s(97880),o=s(31412),a=s(48141),l=s(41558),d=s(33338),c=s(42922),u=s(52275),h=s(3386),p=s(89728),g=s(53437),m=s(72495),f=s(83264),v=s(255),y=s(75689),x=s(91642),S=s(8319),b=s(85893);class C extends r.Z{constructor(){super(...arguments),this.storeTypes={store:l.Z},this.renderActiveButtonOrigin=()=>{const{value:e,dateFormat:t,disabled:s,focused:r,intl:n}=this.props,o=this.styles,l=this.getThemeColors(),d={...o.menuItem,...l.activeMenuItem},c=a._Q(e,n,t),h=(0,b.jsx)(v.Z,{onClick:this.handleClear,disabled:s});return(0,b.jsx)(u.Z,{focused:r,disabled:s,icon:(0,i.C)(o.iconActiveDesktop),title:c,right:h,isTokenTitle:!0,alignIconTop:!0,onClick:this.handleOriginActivate,desktopTitleStyle:o.menuItemTitleDesktop,desktopIconStyle:o.iconActiveDesktopWrapper,style:d})},this.renderInactiveButtonOrigin=()=>{const{title:e,icon:t,disabled:s,focused:r,mode:i}=this.props,n=this.styles,o=this.getThemeColors(),a={...n.menuItem,...o.buttonMenuItem,...i===S.Z.Mode.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,b.jsx)(u.Z,{focused:r,disabled:s,icon:t(n.icon),title:e,onClick:this.handleOriginActivate,style:a})},this.renderPillButtonOrigin=()=>{const{value:e,title:t}=this.props;return(0,b.jsx)(d.Z,{on:Boolean(e.starting||e.ending),icon:(0,i.C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,b.jsx)("span",{children:t}),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e,showButtons:t}=this.props,{store:s}=this.stores;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Z,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:s,onDismiss:this.handleMenuClose}),t&&(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,b.jsx)(p.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:this.handleMenuClose,children:(0,b.jsx)(o.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,b.jsx)(c.Z,{onClick:()=>this.props.onChange(this.stores.store.state.temporaryDateRange),children:(0,b.jsx)(o.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]})]})},this.renderFooter=()=>{const{store:e}=this.stores;return(0,b.jsxs)(m.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"},children:[(0,b.jsx)(p.Z,{onClick:()=>{e.setState({...e.state,temporaryDateRange:{starting:void 0,ending:void 0}}),this.props.onChange({})},children:(0,b.jsx)(o.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,b.jsx)(c.Z,{onClick:this.handleMenuClose,children:(0,b.jsx)(o.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})},this.handleOriginActivate=()=>{const{disabled:e}=this.props,{store:t}=this.stores;e||t.setState({...t.state,isOpen:!0,focus:"starting"})},this.handleMenuClose=e=>{const{onChange:t,onMenuDismiss:s}=this.props,{store:r}=this.stores,{temporaryDateRange:i}=r.state;a.zD(e)||(this.props.showButtons||t(i),r.setState({...r.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s&&s())},this.handleClear=()=>{const{onChange:e}=this.props;e({starting:void 0,ending:void 0})},this.handleMenuListKey=e=>{e.preventDefault&&e.preventDefault()},this.updateTemporary=e=>{const{store:t}=this.stores;if(!e.error)return t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},sectionMenuItem:{display:"flex"},summary:{display:"inline-flex"}}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t}=this.props,{store:s}=this.stores,r=this.styles,i=e===S.z.Section,o=i?t:void 0,a=(()=>e===S.Z.Mode.Section?this.renderActiveButtonOrigin():e===S.Z.Mode.Button?this.renderInactiveButtonOrigin():e===S.Z.Mode.Pill?this.renderPillButtonOrigin():void(0,n.t1)(e))();return(0,b.jsx)(x.Z,{title:o,marginAfter:i,children:(0,b.jsx)(h.Z,{capture:s.state.isOpen,onUp:this.handleMenuListKey,onDown:this.handleMenuListKey,onEnter:this.handleMenuListKey,children:(0,b.jsx)(g.ZP,{popupType:j(this.environment),open:s.state.isOpen,origin:a,render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:g.ZP.Placement.Bottom,alignmentToOrigin:g.ZP.Alignment.Start,keepFocus:!0,style:r.popup})})})}renderMobile(e){const{store:t}=this.stores,s=e===S.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return(0,b.jsx)(g.ZP,{popupType:g.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:s,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:s}=this.props,r=this.styles;return(0,b.jsx)(u.Z,{disabled:s,focused:!1,icon:e(r.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,dateFormat:s,disabled:r,intl:n}=this.props,o=this.styles,l=(0,b.jsxs)("div",{style:o.summary,children:[(0,i.C)(o.iconActiveMobile),a._Q(t,n,s)]});return(0,b.jsx)(y.Z,{disabled:r,onClick:this.handleOriginActivate,onClickClear:this.handleClear,label:e,title:l})}getCurrentValue(){const{value:e}=this.props,{store:t}=this.stores,{temporaryDateRange:s}=t.state;return{...e,...s}}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},activeMenuItem:{color:this.theme.regularTextColor}}}}C.displayName="SearchDateFilter";const M=(0,o.injectIntl)(C);function j(e){const{device:t}=e;return t.isMobile?g.ZP.PopupType.SlideUp:g.ZP.PopupType.Popup}},33991:(e,t,s)=>{s.r(t),s.d(t,{DEFAULT_MODAL_WIDTH_WITH_SIDE_PEEK:()=>Y,INACTIVE_TIMEOUT_MS:()=>G,SearchStaticContext:()=>X,SearchStoresContext:()=>J,default:()=>te});s(57658);var r=s(67294),i=s(83355),n=s(18466),o=s(49085),a=s(15145),l=s(1800),d=s(12174),c=s(15157),u=s(72126),h=s(4615),p=s(94804),g=s(70203),m=s(97880),f=s(63143),v=s(50906),y=s(47839),x=s(98730),S=s(75018),b=s(87531),C=s(81598),M=s(40824),j=(s(95477),s(34700)),w=s(73744),I=s(69988),k=s(98165),T=s(65598),P=s(59139),F=s(48141),R=s(95697),Z=s(74948),B=s(80444),A=s(77080),O=s(32470),L=s(55320),D=s(92338),_=s(62965),V=s(29026);class E extends o.default{getInitialState(){return{insertedActionResultsCount:0,localResults:void 0,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0,serverResultsAllLoaded:!1,errorState:q,selectedQueryResultQuery:void 0}}setState(e){const t={...this.instanceState};if(!(0,_.Z)(this.instanceState,t))return;const s=function(e){const{newState:t,priorState:s}=e,{localResults:r,serverError:i,serverResultsLoading:n,serverResults:o}=t,a=Boolean(r),l=n?void 0:i;if(!a&&n)return!s.errorState.isLoading&&s.errorState.showMajorError?s.errorState:{isLoading:n};if(a)return{hasLocalResults:a,serverError:l,isLoading:!1,showMajorError:!1};if(l)return{hasLocalResults:a,serverError:l,isLoading:!1,showMajorError:!0};if(0===(null==o?void 0:o.results.length))return{hasLocalResults:a,serverError:D.Ix.NoResults,isLoading:!1,showMajorError:!0};return{hasLocalResults:a,serverError:l,isLoading:!1,showMajorError:!1}}({newState:e,priorState:t});super.setState({...e,errorState:s})}getResultCount(){const{serverResults:e,localResults:t}=this.state,s=(null==e?void 0:e.total)??(null==t?void 0:t.total)??0,r=Boolean(e&&s>=100);return{count:s,isLowerBound:Boolean(e&&t&&s<V.Xv)||r}}}const q={showMajorError:!1,isLoading:!1,hasLocalResults:!1,serverError:void 0};const N=E;var H=s(30857),W=s(87956),z=s(88893),K=s(9019),U=s(98670),$=s(86244),Q=s(85893);const G=120*f.C0,X=r.createContext(null),J=r.createContext(null),Y=700;class ee extends i.Z{constructor(){super(...arguments),this.inactiveTimer=void 0,this.spaceId=void 0,this.isOpen=!1,this.shouldClearServerResultsOnQueryChange=!1,this.queryResultsSectionRef=r.createRef(),this.searchFilterMenuRef=r.createRef(),this.modalBodyMenuRef=r.createRef(),this.searchResultStore=new N,this.secondarySearchResultStore=new N,this.globalFocusedIndex=o.default.createValue(0),this.defaultBodyFocusedResult=o.default.createValue(void 0),this.searchActionItemsList=o.default.createValue([]),this.getStaticContext=u.HP((()=>({queryResultsSectionRef:this.queryResultsSectionRef,searchFilterMenuRef:this.searchFilterMenuRef,modalBodyMenuRef:this.modalBodyMenuRef,handleSelectResult:this.handleQueryResultSelect,handleRecentPageSelect:this.handleRecentPageSelect,handleQueryChange:this.handleQueryChange,handlePopupOpen:this.handlePopupOpen,handlePopupClose:this.handlePopupClose,searchResultStore:this.searchResultStore,secondarySearchResultStore:this.secondarySearchResultStore,globalFocusedIndex:this.globalFocusedIndex,defaultBodyFocusedResult:this.defaultBodyFocusedResult,searchActionItemsStore:this.searchActionItemsList,isQuickSearch:this.props.quickSearchMode}))),this.getStoresContext=u.HP((e=>({parentStore:e}))),this.renderContent=e=>{const t=this.currentMode.state,s=this.isPopupOpen.state;return(0,Q.jsx)(X.Provider,{value:this.getStaticContext(),children:(0,Q.jsxs)(J.Provider,{value:this.getStoresContext(this.props.parentStore),children:[this.props.quickSearchMode&&!s&&(0,Q.jsx)("div",{style:{position:"absolute",height:$.$,width:"100%",...(0,j.X)({drag:!0})}}),"search"===t?(0,Q.jsx)(U.$T,{renderAsPage:this.props.renderAsPage,quickSearchMode:this.props.quickSearchMode,searchContentPaneType:e,onClose:this.handleComponentClose}):(0,Q.jsx)(C.yX,{renderAsPage:this.props.renderAsPage,quickSearchMode:this.props.quickSearchMode,searchContentPaneType:e,onClose:this.handleComponentClose})]})})},this.handleRecentPageSelect=e=>{this.handleSelectResult({...e,context:"recent_pages"})},this.handleQueryResultSelect=e=>{this.handleSelectResult({...e,context:"query_results"})},this.handlePopupOpen=()=>{V.ZP.setIsAnyPopupOpen(!0)},this.handlePopupClose=()=>{V.ZP.setIsAnyPopupOpen(!1)},this.handleComponentOpenClose=()=>{const e=L.default.state.open||L.default.state.openAsPage;this.isOpen!==e&&(this.isOpen=e,(L.default.state.open||L.default.state.openAsPage)&&(clearTimeout(this.inactiveTimer),V.ZP.update((e=>({...e,hasScrolled:!1})))))},this.handleComponentClose=e=>{const{device:t}=this.environment,{selectedQueryResult:s,numKeystrokes:r,numServerRequests:i,numLocalRequests:n,hadMetaClick:o}=H.default.state,{serverEventProperties:a}=this.searchResultStore.state,{query:l,hasScrolled:c,mode:u}=V.ZP.state;if(r>0&&(i>0||n>0)&&!s&&!o&&(L.default.state.openAsPage||L.default.state.open)){const e=Date.now(),s=L.default.state.openedTimeMs,n=L.default.state.sessionId,o=H.default.state.firstKeyStrokeTimeMs;v.EH8(this.environment,{...a,timeToAbandonMs:e-s,timeFromFirstKeyStrokeToAbandonMs:o?e-o:void 0,numKeystrokes:r,numResultsAboveFold:this.getNumResultsAboveFold(),searchSessionId:n,searchSessionFlowNumber:i,hasScrolled:c,numLocalResults:this.getNumLocalResults(),numTotalLocalResults:this.getNumTotalLocalResults(),numVisibleMembers:(0,z.qX)(),isMobile:t.isMobile})}"assistant"===u&&"keydown"===(null==e?void 0:e.type)?V.ZP.switchToSearchPane():this.props.quickSearchMode?(L.default.closeAndResetMetricsState(),H.default.reset(),s&&!o&&this.resetState(),y.closeQuickSearch()):b.IB(this.environment),"assistant"===u&&M.N.setAssistantLastViewedTime(),""===l.text.trim()&&"assistant"!==u&&V.ZP.reset();const h=A.default.getEligibleGroup({experimentId:"search-shorten-inactive-timer",defaultGroup:"control"});let p=G;"control"!==h&&d.g6["search-shorten-inactive-timer"].includes(h)&&(p=parseInt(h,10)*f.C0),this.inactiveTimer&&clearTimeout(this.inactiveTimer),p>0?this.inactiveTimer=window.setTimeout(this.resetState,p):this.resetState(),!this.props.renderAsPage&&t.isMobile&&Z.close(),H.default.reset()},this.handleVisibilityChange=(e,t)=>{this.props.quickSearchMode&&(t?b.UT({environment:this.environment,analyticsFrom:"quick-search",isQuickSearch:!0,renderAsPage:!0}):this.handleComponentClose())},this.handleOpenFromQuickSearch=()=>{b.UT({environment:this.environment,analyticsFrom:"keyboard-shortcut-quick-search-hotkey",isQuickSearch:!1,renderAsPage:!1})},this.handlePotentialWebSearchAbandon=e=>{this.props.renderAsPage&&this.handleComponentClose()},this.handleSelectResult=e=>{var t,s;let{action:r,sectionName:i,context:n,selectedResult:o,allSearchResults:d}=e;const{serverEventProperties:c,store:u}=o,{numKeystrokes:h,hadMetaClick:g}=H.default.state;if(!L.default.state.open&&!L.default.state.openAsPage)return;const{event:f}=r,x=w.DJ(f);"query_results"===n&&(H.default.update((e=>({...e,selectedQueryResult:!0}))),this.searchResultStore.update((e=>({...e,selectedQueryResultQuery:V.ZP.state.query}))));const b=Date.now(),{openedTimeMs:C,sessionId:M}=L.default.state,{firstKeyStrokeTimeMs:j}=H.default.state,{numServerRequests:I}=H.default.state,{query:k}=V.ZP.state,T=(0,z.qX)(),P=(null==d?void 0:d.filter((e=>{var t;return void 0!==(null===(t=e.matchedCollectionProperties)||void 0===t?void 0:t.collectionText)})).length)??0,R=(null==d?void 0:d.filter((e=>{var t;return void 0!==(null===(t=e.highlight)||void 0===t?void 0:t.collectionText)})).length)??0,Z=void 0!==(null===(t=o.matchedCollectionProperties)||void 0===t?void 0:t.collectionText),B=void 0!==(null===(s=o.highlight)||void 0===s?void 0:s.collectionText);v.nLf(this.environment,{...c,context:n,queryStringLength:k.text.trim().length,hasFilters:F.FN(k.filters),activeFilters:k.filters,selectedItemIndex:r.index,selectedItemLocalIndex:{sectionName:i,index:r.indexLocal.indexLocal},numKeystrokes:h,isMetaClick:Boolean(x),isSidebarOpen:V.ZP.isDebugSidebarOpen(),timeToSelectMs:b-C,timeFromFirstKeyStrokeToSelectMs:j?b-j:b-C,sources:null==o?void 0:o.sources,localSources:[...(null==o?void 0:o.localSource)??[]],indexInRecentPages:null==o?void 0:o.indexInRecentPages,timeSinceLastViewedMs:null==o?void 0:o.timeSinceLastViewedMs,hadMetaClick:g,numResultsAboveFold:this.getNumResultsAboveFold(),selectedSearchResultMetadata:this.getSearchResultMetadata(o),selectedSearchResultContent:void 0,allSearchResultMetadata:null==d?void 0:d.slice(0,ee.MAX_RESULT_TO_TRACK).map((e=>this.getSearchResultMetadata(e))),totalSearchResultCount:null==d?void 0:d.length,searchSessionId:M,searchSessionFlowNumber:I,originalPosition:null==o?void 0:o.originalPosition,numLocalResults:this.getNumLocalResults(),numTotalLocalResults:this.getNumTotalLocalResults(),numVisibleMembers:T,isMobile:this.environment.device.isMobile,resultWithCollectionPropertyMatchCount:P,resultWithCollectionPropertyHighlightCount:R,isCollectionPropertyMatch:Z,isCollectionPropertyHighlight:B});const A=(null==c?void 0:c["server-queryId"])??(0,p.A7)({searchSessionId:M,searchSessionFlowNumber:I});let O;"recent_pages"===n?O=a.tY.SearchRecents:"query_results"===n?O=a.tY.SearchQuery:(0,m.t1)(n);if(this.environment.device.isElectron&&this.props.quickSearchMode){const e=(0,l.Z)({pageModel:o.store.getModel(),pageId:o.store.id,scrollToBlockId:(0,F.dy)(o),pageVisitSource:O});y.openQuickSearchResult(e)}else S.navigateToSearchResult({searchResult:o,environment:this.environment,pageVisitSource:O,queryId:A,openInNew:x,openInSidePeek:false});W.Z.setState({queryId:A,pageId:u.id,timeEntered:new Date}),x?H.default.update((e=>({...e,hadMetaClick:!0}))):this.handleComponentClose()},this.handleQueryChange=e=>{this.shouldClearServerResultsOnQueryChange&&(this.searchResultStore.update((e=>({...e,serverResults:void 0}))),this.secondarySearchResultStore.update((e=>({...e,serverResults:void 0})))),""!==e?(H.default.update((e=>({...e,numKeystrokes:e.numKeystrokes+1}))),V.ZP.updateQueryText(e)):V.ZP.resetQuery({resetFilters:!1})},this.getNumResultsAboveFold=()=>F.MQ({environment:this.environment,searchResultsSection:this.queryResultsSectionRef.current,modalBodyMenu:this.modalBodyMenuRef.current,searchFilterMenu:this.searchFilterMenuRef.current}),this.getNumLocalResults=()=>{var e;return(null===(e=this.searchResultStore.state.localResults)||void 0===e?void 0:e.results.length)??0},this.getNumTotalLocalResults=()=>{var e;return(null===(e=this.searchResultStore.state.localResults)||void 0===e?void 0:e.total)??0},this.getSearchResultMetadata=e=>{const{store:t,highlight:s,sources:r,localSource:i}=e;return n.Z.withListenerIgnored((()=>{var n,o,a,l,d;return{blockId:t.id,blockType:t.getType(),lowestNavigableAncestorId:null===(n=t.getNavigableBlockStore())||void 0===n?void 0:n.id,depth:k.qA(t).length,matchesText:Boolean(null==s?void 0:s.text),matchesPathText:Boolean((null==s?void 0:s.pathText)||(null==s?void 0:s.title)),matchesTitle:Boolean(null==s?void 0:s.title),isNavigable:t.isNavigableBlock(),lastEditedTime:t.getLastEditedTime(),isTeamArchived:null===(o=(0,k.VP)(t))||void 0===o?void 0:o.isArchived(),sources:r,localSource:[...i??[]],badges:(null===(a=e.badges)||void 0===a?void 0:a.map((e=>e.type)))??[],isCollectionPropertyMatch:void 0!==(null===(l=e.matchedCollectionProperties)||void 0===l?void 0:l.collectionText),isCollectionPropertyHighlight:void 0!==(null===(d=e.highlight)||void 0===d?void 0:d.collectionText),featureGroups:e.featureGroups}}))},this.getPathText=e=>{const t=[];return k.uJ(e).forEach((e=>{if(T.OY(e)){var s;const r=(0,g.QaF)(null===(s=e.getNavigableBlockStore())||void 0===s?void 0:s.getTitleValue());r&&t.push(r)}else if((0,R.bq)()&&T.Y(e)){const s=e.getName();s&&t.push(s)}})),t},this.handleSpaceChange=()=>{const e=B.default.state.currentSpaceStore&&B.default.state.currentSpaceStore.id;this.spaceId!==e&&(this.spaceId=e,this.resetStateWhenSpaceChange(),x.S(this.environment),this.spaceId&&B.default.state.currentUserStore&&this.props.quickSearchMode&&y.quickSearchReady())},this.handleSidePeekPreferenceChange=()=>{var e;const t=null===(e=B.default.state.currentUserStore)||void 0===e?void 0:e.id;t&&c.Z.set({userId:t,key:p.Y6,value:L.default.state.preferSidePeekOpen})},this.resetState=()=>{V.ZP.reset(),this.searchResultStore.reset(),this.secondarySearchResultStore.reset(),H.default.reset(),this.props.quickSearchMode?L.default.closeAndResetMetricsState():L.default.reset()},this.resetStateWhenSpaceChange=()=>{V.ZP.reset(),this.searchResultStore.reset(),this.secondarySearchResultStore.reset(),this.props.quickSearchMode||(L.default.reset(),H.default.reset())},this.currentMode=this.createComputedStore((()=>V.ZP.state.mode)),this.isPopupOpen=this.createComputedStore((()=>V.ZP.state.isPopupOpen))}willMount(e){var t;this.spaceId=null===(t=B.default.state.currentSpaceStore)||void 0===t?void 0:t.id,this.shouldClearServerResultsOnQueryChange="on"===A.default.getGroup("search-clear-results-on-query-change"),(0,O.lO)(),B.default.state.currentSpaceStore&&B.default.state.currentUserStore&&e.quickSearchMode&&y.quickSearchReady()}willMountOrUpdate(e){if(e.renderAsPage&&!e.quickSearchMode&&!L.default.state.sessionId){const e=(0,h.ZP)();L.default.update((t=>({...t,open:!1,openAsPage:!0,openedTimeMs:Date.now(),sessionId:e}))),v.wFN(this.environment,{from:"nativeTab-search-direct-link",searchSessionId:e})}}didMount(){B.default.addListener(this.handleSpaceChange),L.default.addListener(this.handleSidePeekPreferenceChange),this.props.renderAsPage&&!this.props.quickSearchMode||L.default.addListener(this.handleComponentOpenClose),this.props.quickSearchMode?y.quickSearchVisibilityState.addListener(this.handleVisibilityChange):y.openSearchModalFromQuickSearch.addListener(this.handleOpenFromQuickSearch),S.potentialWebSearchAbandonEventEmitter.addListener(this.handlePotentialWebSearchAbandon)}willUnmount(){this.resetState(),this.props.renderAsPage&&!this.props.quickSearchMode||(L.default.removeListener(this.handleComponentOpenClose),y.openSearchModalFromQuickSearch.removeListener(this.handleOpenFromQuickSearch)),this.props.quickSearchMode&&y.quickSearchVisibilityState.removeListener(this.handleVisibilityChange),S.potentialWebSearchAbandonEventEmitter.removeListener(this.handlePotentialWebSearchAbandon),B.default.removeListener(this.handleSpaceChange),L.default.removeListener(this.handleSidePeekPreferenceChange),this.inactiveTimer&&(clearTimeout(this.inactiveTimer),this.inactiveTimer=void 0)}renderComponent(){const e=Boolean(V.ZP.state.query.text.trim())||F.VA(V.ZP.state.query.filters)?"search_results":"default_body";if(this.props.renderAsPage)return this.renderContent(e);const{device:t,mobileNative:s}=this.environment,r=Boolean(L.default.state.open);return(0,Q.jsx)(K.Z,{open:r,onDismiss:this.handleComponentClose,modalStyle:this.getModalStyle(e),disableAnimation:!t.isMobile||(null==s?void 0:s.supportsNativeHomeOnPhone())||!1,renderContent:()=>this.renderContent(e)})}getSearchResultContent(e,t){return n.Z.withListenerIgnored((()=>{var s;return{title:(0,g.QaF)(null===(s=e.getNavigableBlockStore())||void 0===s?void 0:s.getTitleValue()),pathText:this.getPathText(e),highlight:{text:(0,I.fe)(null==t?void 0:t.text),pathText:(0,I.fe)(null==t?void 0:t.pathText)}}}))}getModalStyle(e){const{renderAsPage:t}=this.props,s=(0,U.ip)({searchContentPaneType:e,renderAsPage:t,environment:this.environment});return{width:"100%",minHeight:s.minHeight,maxHeight:s.maxHeight,transform:"translate3d(0,0,0)",background:this.theme.popoverBackground,maxWidth:re(this.environment),borderRadius:12}}}ee.displayName="Search",ee.MAX_RESULT_TO_TRACK=50;const te=ee;function se(e){return F.bC(e)}function re(e){const t=(0,O.gq)({device:e.device}),s=(0,U.X1)({device:e.device,isPublicAccessPermissionForPage:se(e).hasPublicAccessPermission});if(t)return"90vw";if((0,P.rd)(e))return Y;let r=660;return s&&(r+=250),r}},98670:(e,t,s)=>{s.d(t,{$T:()=>Oi,ip:()=>Di,X1:()=>qi});var r=s(67294),i=s(480),n=s(86628),o=s(24405),a=s(72126),l=s(29477),d=s(80503),c=s(98730),u=s(43250),h=s(87279),p=s(59139),g=s(48141),m=s(85665),f=s(5162),v=s(80444),y=s(88632),x=s(69454),S=s(32470),b=s(55320),C=s(29026),M=s(36488),j=s(56940),w=s(78140),I=s(40721),k=s(83785),T=s(22715),P=s(33991),F=s(83355),R=s(12174),Z=s(67220),B=s(69651),A=s(64275),O=s(6637),L=s(60291),D=s(37612),_=s(83303),V=s(53772),E=s(97880),q=s(82990),N=s(31412),H=s(95477),W=s(34700),z=s(95697),K=s(61766),U=s(77080),$=s(23063),Q=s(64921),G=s(52275),X=s(31945),J=s(60458),Y=s(89728),ee=s(72495),te=s(93481),se=s(84619),re=s(90028),ie=s(21202),ne=s(31299),oe=s(33929),ae=s(15447),le=s(26350),de=s(31278),ce=s(11470),ue=s(76798),he=s(255),pe=s(85567),ge=s(8319),me=s(85893);const fe=(0,N.defineMessages)({searchPages:{defaultMessage:"Search pages",id:"searchPageFilter.searchTokenFilter.tokenInput.placeholder"},selectAPage:{defaultMessage:"Select a page",id:"searchPageFilter.searchTokenFilter.resultSection.title"}});class ve extends F.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:s,onRemove:r,onClick:i}=t;const n=this.styles,o=this.createBlockStore(e),a=(0,me.jsx)(he.Z,{disabled:s,onClick:r});return(0,me.jsx)(ce.Z,{disabled:s,focused:!1,store:o,right:a,style:n.menuItem,desktopTitleStyle:n.menuItemTitle,onClick:i})},this.renderItemForSummary=e=>(0,me.jsx)(ue.Z,{store:this.createBlockStore(e),shouldWrap:!0,maxLength:50}),this.renderToken=(e,t)=>{const{blockIds:s}=this.props,r=this.tokenStyles,i=1===s.length,n=this.createBlockStore(e),o=(0,me.jsxs)("div",{style:r.token,children:[(0,me.jsx)(de.Z,{disabled:!0,icon:n.getIcon(),isEmptyPage:!1,size:20,style:r.icon}),(0,me.jsx)(ue.Z,{store:n})]});return(0,me.jsx)(pe.Z,{format:this.environment.device.isMobile?se.lo.Large:se.lo.Small,value:o,showRemoveButton:!0,onClickRemove:t.onRemove,isSingle:i,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1},e)},this.renderResultMenuItem=(e,t)=>{const s=this.createBlockStore(e);return(0,r.createElement)(ce.Z,{...t,key:e,store:s})},this.performRequest=async e=>{let{query:t,current:s}=e;const{currentSpaceStore:r}=v.default.state;if(!r)return[];const i=t?(await ne.nJ({environment:this.environment,query:t,limit:20,spaceId:r.id,requireEditPermissions:!1,excludeTemplates:!1,source:"ancestor_filter_page_search",boostRecentlyViewedPages:!0})).results:ae.X4.state.map((e=>e.pageId)),n=new Set(s);return i.filter((e=>!n.has(e)))},this.createBlockStore=e=>{const{parentStore:t}=this.props;return le.G.createChildStore(t,{table:ie.iU,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{fill:"currentColor"}},this.tokenStyles={token:{display:"flex",alignItems:"center"},icon:{marginRight:4}}}renderComponent(){const{mode:e,title:t,blockIds:s,onChange:r,disabled:i,focused:n,onMenuDismiss:o,onMenuOpen:a}=this.props;return(0,me.jsx)(ge.Z,{mode:e,hasItemsSelected:(null==s?void 0:s.length)>0,title:t,icon:re.j,iconStyles:this.styles.recordIcon,items:s,onChange:r,focused:n,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Add another page",id:"searchPageFilter.searchTokenFilter.addAPage.button"}),labelText:{title:t,tokenInputPlaceholder:oe.default.formatMessage(fe.searchPages),componentDebugName:"SearchPageFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,disabled:i,onMenuDismiss:o,onMenuOpen:a})}}ve.displayName="SearchPageFilter";const ye=ve;var xe=s(83890),Se=s(88507),be=s(29369),Ce=s(92338),Me=s(30397),je=s(93044),we=s(30676);class Ie extends F.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:s,onRemove:r,onClick:i}=t;const n=this.styles,o=this.createTeamStore(e),a=(0,me.jsx)(he.Z,{disabled:s,onClick:r});return(0,me.jsx)(we.F,{disabled:s,focused:!1,teamStore:o,right:a,style:n.menuItem,desktopTitleStyle:n.menuItemTitle,onClick:i},e)},this.renderItemForSummary=e=>this.createTeamStore(e).getName(),this.renderAvatarFactory=e=>{const t=e.getIcon();return e=>(0,me.jsx)(de.Z,{disabled:!0,icon:t,isEmptyPage:!1,size:e})},this.renderToken=(e,t)=>{const{teamIds:s}=this.props,r=(0,Ce.iY)(s),i=1===(null==r?void 0:r.length),n=this.createTeamStore(e);if(!n)return;const o=n.getName();return(0,me.jsx)(je.ZP,{format:this.environment.device.isMobile?je.lP.Large:je.lP.Small,showRemoveButton:!0,isSingle:i,onClickRemove:t.onRemove,renderAvatar:this.renderAvatarFactory(n),title:o,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const s=this.createTeamStore(e);return(0,r.createElement)(we.F,{...t,key:e,teamStore:s})},this.performRequest=async e=>{var t;let{query:s,current:r}=e;const i=new Set(r),n=v.default.state.currentSpaceViewStore,o=v.default.state.currentSpaceStore,a=null===(t=v.default.state.currentUserStore)||void 0===t?void 0:t.id;if(!n||!o||!a)return[];if(!s){const e=new Set(n.getTeamsStores().map((e=>e.id)));if(Me.Z.state.teams.map((e=>e.id)).forEach((t=>e.add(t))),e.size>0)return[...e]}const l=await(0,z.qX)({environment:this.environment,spaceStore:o,currentUserId:a});return(await ne.zf({query:s,spaceViewStore:n,teamStores:l})).filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))},this.createTeamStore=e=>{const{parentStore:t}=this.props;return le.zX.createChildStore(t,{table:be.e0,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:6,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,teamIds:s,onChange:r,disabled:i,focused:n,onMenuDismiss:o,onMenuOpen:a,intl:l}=this.props,d=(0,Ce.iY)(s);return(0,me.jsx)(ge.Z,{mode:e,title:t,icon:Se.I,iconStyles:this.styles.recordIcon,items:d||[],onChange:r,disabled:i,focused:n,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Add a teamspace",id:"search.filterMenu.addATeamButton.label"}),labelText:{title:t,tokenInputPlaceholder:l.formatMessage({defaultMessage:"Search teamspaces",id:"search.filterMenu.searchTeams.placeholder"}),componentDebugName:"SearchTeamFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:o,onMenuOpen:a,hasItemsSelected:Boolean(d&&(null==d?void 0:d.length)>0)})}}Ie.displayName="SearchTeamFilter";const ke=(0,N.injectIntl)(Ie);var Te=s(33338),Pe=s(86825),Fe=s(75689),Re=s(91642);class Ze extends F.Z{constructor(){super(...arguments),this.handleToggle=()=>{const{value:e,onChange:t}=this.props;t(!e)},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},pillIcon:{height:16,width:16,fill:"currentColor",marginRight:6},sectionMenuItem:{display:"flex"}}}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){return(0,me.jsx)(Re.Z,{marginAfter:!1,style:this.styles.sectionMenuItem,children:this.renderSwitcherMenuItem(e)})}renderMobile(e){const{title:t,value:s,disabled:r}=this.props;return e===ge.z.Button?this.renderSwitcherMenuItem(e):(0,me.jsx)(Fe.Z,{disabled:r,onClick:this.handleToggle,label:t,isToggle:!0,isToggleActive:s})}renderSwitcherMenuItem(e){const{title:t,icon:s,value:r,style:i,...n}=this.props,o=this.styles,a=this.getThemeColors(),l={...o.menuItem,...a.menuItem,...i};return e===ge.z.Pill?(0,me.jsx)(Te.Z,{on:r,hideChevron:!0,title:(0,me.jsx)("span",{children:t}),onClick:this.handleToggle,icon:s(o.pillIcon)}):(0,me.jsx)(Pe.Z,{title:t,icon:s(o.icon),on:r,onClick:this.handleToggle,style:l,...n})}getThemeColors(){return{menuItem:{color:this.theme.mediumTextColor}}}}Ze.displayName="SearchToggleFilter",Ze.Mode=ge.z;const Be=Ze;var Ae=s(8848),Oe=s(42853),Le=s(32163);function De(e){window.__c={n:"SearchExperimentFilterPopupButton"};const t=(0,i.Fy)();return(0,me.jsx)(X.ZP,{popupType:t.isMobile?X.Z4.SlideUp:X.Z4.Popup,renderOrigin:t=>(0,me.jsx)(Ve,{events:t,...e}),render:t=>(0,me.jsx)(_e,{parent:t,...e})})}function _e(e){let{parent:t,experiment:s,searchExperimentOverrides:r,onChange:n}=e;window.__c={n:"SearchExperimentFilterMenu"};const a=(0,i.Fy)(),l=(0,o.yK)((()=>({menuOptionStyle:{color:Ae.ZP.mediumTextColor}})),[]);let d;d=a.isMobile?{menuType:h.og.Modal,title:s.experimentId,right:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:t.close}:{menuType:h.og.Popup,width:250};const c=s.groups.map((e=>({key:e,action:r=>{n({experimentId:s.experimentId,group:e}),t.close()},render:(t,s)=>(0,me.jsx)(G.Z,{...t,title:e,style:l.menuOptionStyle})})));return(0,me.jsx)(w.Z,{...d,children:(0,me.jsx)(Le.Z,{type:Le.i.Vertical,initialFocus:void 0,sections:[{key:s.experimentId,render:e=>(0,me.jsx)(ee.Z,{...e}),items:c}]})})}function Ve(e){let{experiment:t,events:s,searchExperimentOverrides:i}=e;window.__c={n:"SearchExperimentFilterMenuButton"};const n=(0,o.yK)((e=>({experimentGroupButtonChevronStyle:{width:10,fill:e.lightIconColor},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left",overflow:"hidden",marginLeft:6,color:e.mediumTextColor},rowContainer:{display:"flex",overflow:"hidden",flexDirection:"row"},groupCell:{overflow:"hidden",marginRight:4}})),[]);return(0,r.createElement)(Y.Z,{...s,isSmall:!0,key:t.experimentId,style:n.experimentGroupButtonStyle},(0,me.jsxs)("div",{style:n.rowContainer,children:[(0,me.jsx)("div",{style:n.groupCell,children:i[t.experimentId]||t.group}),(0,me.jsx)("div",{children:(0,Oe.i)(n.experimentGroupButtonChevronStyle)})]}))}const Ee=e=>({fontSize:14,lineHeight:1.2,color:e.mediumTextColor,marginRight:4,display:"flex",alignItems:"center",whiteSpace:"nowrap"}),qe=function(e){window.__c={n:"SearchExperimentFilter"};const{experiment:t}=e,{leftOverrides:s,rightOverrides:i,experimentDiffers:a,experimentAgreesButNondefault:l}=(0,n.VK)((()=>{const e=S.v_.state.searchExperimentOverrides,s=S.BJ.state.searchExperimentOverrides,r=(e[t.experimentId]??t.group)!==(s[t.experimentId]??t.group);return{leftOverrides:e,rightOverrides:s,experimentDiffers:r,experimentAgreesButNondefault:!r&&void 0!==s[t.experimentId]&&e[t.experimentId]!==t.group}}),[t]),d=(0,o.yK)((e=>({rowContainer:{backgroundColor:a?e.equationErrorPlaceholderBackground:l?e.accentColors.yellow[100]:void 0},titleCell:{...Ee(e),maxWidth:180,textOverflow:"ellipsis",overflow:"hidden"}})),[l,a]),c=(0,r.useCallback)((e=>{const{experimentId:t,group:s,store:r}=e;r.setState({...r.state,searchExperimentOverrides:{...r.state.searchExperimentOverrides,[t]:s}})}),[]);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("div",{style:{...d.titleCell,...d.rowContainer},children:t.experimentId.replace("search-","")}),(0,me.jsx)("div",{style:d.rowContainer,children:(0,me.jsx)(De,{experiment:t,searchExperimentOverrides:s,onChange:e=>{c({...e,store:S.v_})}})}),(0,me.jsx)("div",{style:d.rowContainer,children:(0,me.jsx)(De,{experiment:t,searchExperimentOverrides:i,onChange:e=>{c({...e,store:S.BJ})}})})]})};var Ne=s(53877),He=s(42875),We=s(22686);let ze=function(e){return e[e.Button=0]="Button",e[e.MenuItem=1]="MenuItem",e}({});class Ke extends F.Z{constructor(){super(...arguments),this.handleFilterClick=e=>{const{onMenuDismiss:t}=this.props;this.applyFilter(e),this.openSidebar(),t&&t()},this.applyFilter=e=>{C.ZP.updateFilters(e)},this.openSidebar=()=>{C.ZP.isDebugSidebarOpen()||C.ZP.setState({...C.ZP.state,isDebugSidebarOpen:!0})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},buttonFilter:{padding:"4px 8px",display:"flex",alignItems:"center",overflow:"hidden"},buttonText:{...q.Z.textOverflowStyle},icon:{display:"inline-block",height:14,width:14,fill:"currentColor"},buttonIcon:{marginRight:6}}}renderComponent(){const{mode:e}=this.props;return e===ze.Button?this.renderAsButton():e===ze.MenuItem?this.renderAsMenuItem():void(0,E.t1)(e)}renderAsButton(){const{icon:e,title:t,filter:s}=this.props,r=this.styles,i=this.getThemeColors();return(0,me.jsxs)(Q.Z,{style:{...r.buttonFilter,...i.buttonFilter},onClick:()=>this.handleFilterClick(s),children:[e&&e({...r.icon,...r.buttonIcon}),(0,me.jsx)("span",{style:r.buttonText,children:t})]})}renderAsMenuItem(){const{icon:e,title:t,filter:s,focused:r}=this.props,i=this.styles,n=this.getThemeColors(),o={...i.menuItem,...n.menuItem};return(0,me.jsx)(G.Z,{icon:e&&e(i.icon),focused:r,title:t,onClick:()=>this.handleFilterClick(s),style:o})}getThemeColors(){const{device:e}=this.environment;return{menuItem:{color:e.isDesktop?this.theme.mediumTextColor:void 0,...this.props.isLastInSection&&{boxShadow:void 0}},buttonFilter:{color:this.theme.mediumTextColor}}}}Ke.displayName="SearchFilterPreset",Ke.Mode=ze;class Ue extends F.Z{renderComponent(){const e=Ue.getCurrentPageFilter();if(e)return(0,me.jsx)(Ke,{icon:re.j,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.quickFilters.inCurrentPage",defaultMessage:"In current page"}),filter:e,...this.props})}static isActive(e){const t=Ue.getCurrentPageFilter();if(!t)return!1;if(!t.ancestors)return!1;const s=t.ancestors[0];return-1!==e.ancestors.indexOf(s)}}Ue.displayName="InCurrentPagePreset",Ue.getCurrentPageFilter=()=>{const{mainEditorCurrentBlockStore:e}=v.default.state;if(e&&e.id)return{ancestors:[e.id]}};class $e extends F.Z{renderComponent(){const e=$e.getCurrentUserFilter(this.environment);if(e)return(0,me.jsx)(Ke,{icon:We.f,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.quickFilters.createdByMe",defaultMessage:"Created by me"}),filter:e,...this.props})}static isActive(e,t){const s=$e.getCurrentUserFilter(e);if(!s)return!1;if(!s.createdBy)return!1;const r=s.createdBy[0];return-1!==t.createdBy.indexOf(r)}}$e.displayName="CreatedByMePreset",$e.getCurrentUserFilter=e=>{const{id:t}=e.currentUser;if(t)return{createdBy:[t]}};class Qe extends F.Z{renderComponent(){const e=Qe.getPastWeekFilter();if(e)return(0,me.jsx)(Ke,{icon:B.C,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.quickFilters.editedLastWeek",defaultMessage:"Edited last week"}),filter:e,...this.props})}static isActive(e){const{lastEditedTime:t}=Qe.getPastWeekFilter();return a.Xy(t,e.lastEditedTime)}}Qe.displayName="EditedLastWeekPreset",Qe.getPastWeekFilter=()=>({lastEditedTime:{starting:Ne.Oo((0,He.r)()),ending:Ne.Lg((0,He.r)())}});var Ge=s(1743),Xe=s(74194);function Je(e){window.__c={n:"SearchStringOverrideControls"};const{leftValue:t,rightValue:s,setLeftValue:i,setRightValue:n,placeholder:a,label:l}=e,{titleCell:d,rightTitleCell:c,leftTitleCell:u}=(0,o.yK)((e=>{const r=Ee(e);return{titleCell:r,rightTitleCell:{...r,color:s?r.color:e.lightTextColor,width:"95%"},leftTitleCell:{...r,color:t?r.color:e.lightTextColor,width:"95%"}}}),[t,s]),[h,p]=(0,r.useState)(s),[g,m]=(0,r.useState)(t);(0,r.useEffect)((()=>{void 0===s&&p(void 0),void 0===t&&m(void 0)}),[s,t]);const f=(0,r.useCallback)((()=>{n(h)}),[n,h]),v=(0,r.useCallback)((()=>{i(g)}),[i,g]),y=(0,r.useCallback)((e=>{p(e.target.value)}),[]),x=(0,r.useCallback)((e=>{m(e.target.value)}),[]);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("div",{style:d,children:l}),(0,me.jsxs)(Ge.Z,{capture:!0,allowMenuList:!1,children:[(0,me.jsx)(Xe.Z,{style:u,onBlur:v,value:g,onChange:x,placeholder:a}),(0,me.jsx)(Xe.Z,{style:c,onBlur:f,value:h,onChange:y,placeholder:a})]})]})}let Ye=function(e){return e.Button="Button",e.Section="Section",e}({});class et extends F.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:K.Z},this.renderAddFilterOrigin=e=>{const t=this.styles;return(0,me.jsx)(Y.Z,{...e,style:t.addFilterButtonMobile,icon:O.I,isBlue:!0,children:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Add filter",id:"search.addFilter.button.label"})})},this.renderAddFilterMenu=()=>(0,me.jsxs)(w.Z,{menuType:h.og.ActionSheet,children:[this.renderSuggestedFilters(),(0,me.jsxs)(Re.Z,{title:(0,me.jsx)(dt,{}),children:[this.renderCreatedByFilter(ge.Z.Mode.Button),this.renderCreatedTimeFilter(ge.Z.Mode.Button),this.renderLastEditedTimeFilter(ge.Z.Mode.Button),this.renderAncestorFilter(ge.Z.Mode.Button),this.renderInTeamFilter(ge.Z.Mode.Button)]})]}),this.searchExperimentsToToggle=this.createComputedStore((()=>Object.entries(R.g6).map((e=>{let[t,s]=e;return{experimentId:t,experimentVersion:1,group:U.default.getGroup(t),groups:["control",...s]}})))),this.closeAddFilterMenu=()=>{const{buttonPopupStore:e}=this.stores;e.setState({...e.state,open:!1})},this.callTitleFilterUpdateFns=e=>{C.ZP.updateFilters({navigableBlockContentOnly:e})},this.closeSidebar=()=>{C.ZP.update((e=>({...e,isDebugSidebarOpen:!1})))},this.styles={sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 250px",minHeight:400},sidebarHidden:{display:"none"},addFilterButtonMobile:{fontSize:this.props.isMobile?q.Z.fontSize.UISmall.mobile:q.Z.fontSize.UISmall.desktop,fontWeight:q.Z.fontWeight.medium,marginRight:-8}}}renderComponent(){return this.props.isMobile?this.props.mode===Ye.Button?this.renderAddButtonMobile():this.props.mode===Ye.Section?this.renderActiveFiltersMobile():void(0,E.t1)(this.props.mode):this.renderSidebar()}renderActiveFiltersMobile(){const{state:e}=C.ZP,t=g.De(e.query.filters);return(0,me.jsxs)(ee.Z,{disableMobilePadding:!0,disableMobileBorders:!0,children:[this.renderTitlesOnlyFilter(ge.z.Section),(0,me.jsx)(lt,{mode:ge.z.Section}),this.renderActiveFilters(t,ge.Z.Mode.Section)]})}renderAddButtonMobile(){const{buttonPopupStore:e}=this.stores;return(0,me.jsx)(X.ZP,{popupType:X.Z4.SlideUp,buttonPopupStore:e,renderOrigin:this.renderAddFilterOrigin,render:this.renderAddFilterMenu})}renderActiveFilters(e,t){return(0,me.jsxs)(r.Fragment,{children:[e.createdBy&&this.renderCreatedByFilter(t),e.createdTime&&this.renderCreatedTimeFilter(t),e.lastEditedTime&&this.renderLastEditedTimeFilter(t),e.ancestors&&this.renderAncestorFilter(t),e.inTeams&&this.renderInTeamFilter(t)]})}renderSuggestedFilters(){const{filters:e}=C.ZP.state.query,t=$e.isActive(this.environment,e),s=Qe.isActive(e),r=Ue.isActive(e);if(!(t&&s&&r))return(0,me.jsxs)(Re.Z,{title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.quickFiltersSection.title",defaultMessage:"Quick filters"}),marginAfter:!0,children:[!t&&(0,me.jsx)($e,{mode:ze.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu}),!s&&(0,me.jsx)(Qe,{mode:ze.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu}),!r&&(0,me.jsx)(Ue,{mode:ze.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu,isLastInSection:!0})]})}renderSidebar(){const e=this.styles,t=this.getThemeColors(),s={...e.sidebar,...t.sidebar,...!C.ZP.isDebugSidebarOpen()&&e.sidebarHidden},r=(0,p.bN)(this.environment);return(0,me.jsxs)("aside",{style:s,children:[(0,me.jsx)(Q.Z,{onClick:this.closeSidebar,style:{display:"flex",alignItems:"center",justifyContent:"center",background:void 0,borderRadius:6,width:16,height:16,position:"absolute",top:10,right:10,...r&&(0,W.X)({noDrag:!0})},children:(0,A.D)({width:14,fill:this.theme.mediumTextColor})}),this.renderDevToolsSection()]})}renderDevToolsSection(){if((0,V.x)(H.default))return(0,me.jsx)(Re.Z,{title:"Dev Tools",children:(0,me.jsx)($.Z,{isVisible:!0,animationStyle:{height:"100%"},render:()=>(0,me.jsxs)("div",{style:{overflow:"scroll"},children:[(0,me.jsx)(ot,{}),(0,me.jsx)(at,{}),(0,me.jsx)(nt,{}),(0,me.jsxs)(Re.Z,{style:{marginTop:16},title:"Quick Switch",children:[(0,me.jsx)(st,{title:"No local at all",searchExperimentOverrides:{"search-no-local-blending":"on","search-debug-only-no-recent-boosting":"on"}}),(0,me.jsx)(st,{title:"No local results",searchExperimentOverrides:{"search-no-local-blending":"on"}}),(0,me.jsx)(st,{title:"No local boosting",searchExperimentOverrides:{"search-debug-only-no-recent-boosting":"on"}}),(0,me.jsx)(st,{title:"Vector only",searchExperimentOverrides:{"search-vectors":"log-norm"}})]}),(0,me.jsx)(Re.Z,{style:{marginTop:16},title:"Dev Experiments",right:(0,me.jsx)(Y.Z,{onClick:()=>{S.v_.reset(),S.BJ.reset()},style:{paddingLeft:0,paddingRight:0,height:"unset"},children:(0,L.b)({width:12})}),children:(0,me.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr 1fr",minWidth:"100%",maxWidth:"100%",paddingLeft:14},children:[(0,me.jsx)("div",{}),(0,me.jsx)("div",{}),(0,me.jsx)(tt,{columnStore:S.BJ}),this.searchExperimentsToToggle.state.map((e=>(0,me.jsx)(qe,{experiment:e},e.experimentId))),(0,me.jsx)(Je,{leftValue:S.v_.state.forcedClusterPattern,rightValue:S.BJ.state.forcedClusterPattern,setLeftValue:S.v_.updateForcedClusterPattern,setRightValue:S.BJ.updateForcedClusterPattern,placeholder:"cluster-pattern",label:"forced cluster pattern"}),(0,me.jsx)(Je,{leftValue:S.v_.state.forcedBlockIds,rightValue:S.BJ.state.forcedBlockIds,setLeftValue:S.v_.updateForcedBlockIds,setRightValue:S.BJ.updateForcedBlockIds,placeholder:"block ids",label:"forced block ids"})]})})]})})})}renderTitlesOnlyFilter(e){const{filters:t}=C.ZP.state.query;return(0,me.jsx)(Be,{mode:e,focused:!1,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.onlyMatchTitlesToggle.label",defaultMessage:"Title only"}),icon:_.c,value:t.navigableBlockContentOnly||!1,onChange:this.callTitleFilterUpdateFns})}renderAncestorFilter(e){const{filters:t}=C.ZP.state.query;return(0,me.jsx)(P.SearchStoresContext.Consumer,{children:s=>{let{parentStore:r}=s;return(0,me.jsx)(ye,{mode:e,focused:!1,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.inPage",defaultMessage:"In"}),parentStore:r,blockIds:t.ancestors,onMenuDismiss:this.closeAddFilterMenu,onChange:it("ancestors")})}})}renderCreatedByFilter(e){const{filters:t}=C.ZP.state.query;return(0,me.jsx)(P.SearchStoresContext.Consumer,{children:s=>{let{parentStore:r}=s;return(0,me.jsx)(xe.Z,{mode:e,focused:!1,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.createdBy",defaultMessage:"Created by"}),parentStore:r,userIds:t.createdBy,onMenuDismiss:this.closeAddFilterMenu,onChange:it("createdBy")})}})}renderCreatedTimeFilter(e){const{filters:t}=C.ZP.state.query;return(0,me.jsx)(te.Z,{mode:e,focused:!1,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.created",defaultMessage:"Created"}),icon:B.C,value:t.createdTime,onMenuDismiss:this.closeAddFilterMenu,onChange:it("createdTime")})}renderLastEditedTimeFilter(e){const{filters:t}=C.ZP.state.query;return(0,me.jsx)(te.Z,{mode:e,focused:!1,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.lastEdited",defaultMessage:"Last edited"}),icon:B.C,value:t.lastEditedTime,onMenuDismiss:this.closeAddFilterMenu,onChange:it("lastEditedTime")})}renderInTeamFilter(e){if(!(0,z.bq)())return;const{filters:t}=C.ZP.state.query;return(0,me.jsx)(P.SearchStoresContext.Consumer,{children:s=>{let{parentStore:r}=s;return(0,me.jsx)(ke,{mode:e,focused:!1,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.inTeams",defaultMessage:"Teamspace"}),parentStore:r,teamIds:t.inTeams,onMenuDismiss:this.closeAddFilterMenu,onChange:it("inTeams")})}})}getThemeColors(){return{sidebar:{backgroundColor:this.theme.sidebarSecondaryBackground,borderLeft:`1px solid ${this.theme.regularDividerColor}`}}}}function tt(e){let{columnStore:t}=e;window.__c={n:"ExperimentColumnShowHeader"};const s=(0,n.VK)((()=>t.state.visible),[t]);return(0,me.jsx)(G.Z,{icon:(0,me.jsx)(J.Z,{checked:s,size:14,onClick:()=>t.update((e=>({...e,visible:!e.visible})))}),focused:!1,title:"Show",onClick:()=>t.update((e=>({...e,visible:!e.visible})))})}function st(e){let{title:t,searchExperimentOverrides:s}=e;return(0,me.jsx)(G.Z,{focused:!1,title:t,onClick:()=>{S.BJ.update((e=>({...e,visible:!1}))),S.v_.update((e=>({...e,searchExperimentOverrides:s})))}})}et.displayName="SearchFilterMenu";const rt=et;function it(e){return t=>C.ZP.updateFilters({[e]:t})}function nt(){return null}function ot(){window.__c={n:"ShowDebugInfoToggle"};const e=(0,n.VK)((()=>S.ZP.state.showDebugInfo),[]);return(0,me.jsx)(Be,{mode:ge.z.Button,focused:!1,title:"Show debug info",icon:Z.S,value:e,onChange:e=>{S.ZP.setState({...S.ZP.state,showDebugInfo:Boolean(e)})}})}function at(){window.__c={n:"ShowDebugSearchToggle"};const e=(0,n.VK)((()=>"everything"===S.ZP.state.debug),[]);return(0,me.jsx)(Be,{mode:ge.z.Button,focused:!1,title:"Profile query",icon:Z.S,value:e,onChange:e=>{S.ZP.setState({...S.ZP.state,debug:e?"everything":void 0})}})}function lt(e){let{mode:t}=e;window.__c={n:"DeletedOnlyFilter"};const s=(0,n.VK)((()=>C.ZP.state.query.filters),[]);return(0,me.jsx)(Be,{mode:t,focused:!1,title:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.deletedOnlyToggle.label",defaultMessage:"Deleted only"}),icon:D.y,value:s.isDeletedOnly||!1,onChange:it("isDeletedOnly")})}function dt(){return(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFiltersSection.title",defaultMessage:"More filters"})}var ct=s(28992),ut=s(98519),ht=s(4023),pt=s(7931);const gt=function(e){window.__c={n:"SearchSortMenu"};const t=r.useRef(),s=(0,i.Fy)(),{isMobile:n}=s,{activeOption:a,items:l}=r.useMemo((()=>function(e){const{currentSortBy:t,setSortBy:s,sortOptions:r,selectButton:i}=e;let n=r[0];const o=r.map((e=>{const r=t.field,o=`${r}.${"relevance"===r?"":t.direction}`,a=e.key===o;return a&&(n=e),{key:e.key,action:()=>{s(e.sort),i&&i.current&&i.current.closeMenu()},render:t=>(0,me.jsx)(G.Z,{...t,title:e.formattedName,right:a&&(0,ut.k)({fill:Ae.ZP.regularIconColor,width:14,height:14})})}}));return{activeOption:n,items:o}}({...e,selectButton:t})),[e,t]),d=(0,o.yK)((e=>({selectedTitle:{color:e.mediumTextColor},label:{marginRight:2,fontSize:n?q.Z.fontSize.UISmall.mobile:q.Z.fontSize.UISmall.desktop,transform:"translateY(0.5px)"},innerButton:{color:e.mediumTextColor,fontWeight:q.Z.fontWeight.semibold,fontSize:n?q.Z.fontSize.UISmall.mobile:q.Z.fontSize.UISmall.desktop,height:20,padding:"2px 4px",marginRight:1,transform:"translateY(0.5px)"},menu:{minWidth:200}})),[n]),c=n?(0,me.jsx)(N.FormattedMessage,{id:"search.sort.sortMenuTitle",defaultMessage:"Sort By"}):void 0;return(0,me.jsx)(pt.Z,{ref:e=>{e&&(t.current=e)},alignmentToOrigin:ht.v.Start,selectedTitle:(0,me.jsx)("div",{style:d.selectedTitle,children:a.formattedName}),label:void 0,renderMenuSections:()=>[{key:"searchSortOrder",render:e=>(0,me.jsx)(Re.Z,{...e,title:c,desktopStyle:d.menu,disableDesktopPadding:!1}),items:l}],labelStyle:d.label,innerButtonStyle:d.innerButton})};class mt extends F.Z{constructor(){super(...arguments),this.styles={menuItemMobile:{paddingBottom:0},titleWrapper:{flex:void 0,marginTop:-3,marginBottom:-1},showSidebarButton:()=>{const{device:e}=this.environment;return{padding:"0 4px",fontSize:e.isMobile?q.Z.fontSize.UISmall.mobile:q.Z.fontSize.UISmall.desktop,fontWeight:q.Z.fontWeight.medium,borderRadius:4,height:20,lineHeight:"20px"}}}}renderComponent(){const{device:e}=this.environment,t=this.styles,s={...e.isMobile&&t.menuItemMobile},r=!this.props.isPublicPageSearch&&(0,me.jsx)(xt,{});return(0,me.jsx)(ct.Z,{title:(0,me.jsx)(yt,{}),right:r,textWrapperStyle:t.titleWrapper,style:s})}}mt.displayName="SearchHeader";const ft=[{key:"relevance.",formattedName:(0,me.jsx)(N.FormattedMessage,{id:"search.sort.sortOrder.bestMatches",defaultMessage:"Best matches"}),sort:{field:"relevance"}},{key:"lastEdited.desc",formattedName:(0,me.jsx)(N.FormattedMessage,{id:"search.sort.sortOrder.lastEdited.newestFirst",defaultMessage:"Last edited: Newest first"}),sort:{field:"lastEdited",direction:"desc"}},{key:"lastEdited.asc",formattedName:(0,me.jsx)(N.FormattedMessage,{id:"search.sort.sortOrder.lastEdited.oldestFirst",defaultMessage:"Last edited: Oldest first"}),sort:{field:"lastEdited",direction:"asc"}},{key:"created.desc",formattedName:(0,me.jsx)(N.FormattedMessage,{id:"search.sort.sortOrder.created.newestFirst",defaultMessage:"Created: Newest first"}),sort:{field:"created",direction:"desc"}},{key:"created.asc",formattedName:(0,me.jsx)(N.FormattedMessage,{id:"search.sort.sortOrder.created.oldestFirst",defaultMessage:"Created: Oldest first"}),sort:{field:"created",direction:"asc"}}],vt=mt;function yt(){window.__c={n:"SortMenu"};const e=(0,n.VK)((()=>C.ZP.state.query.sort),[]);return(0,me.jsx)(gt,{currentSortBy:e,setSortBy:e=>{C.ZP.setState({...C.ZP.state,query:{...C.ZP.state.query,sort:e}})},sortOptions:ft})}function xt(){window.__c={n:"AddFilterButton"};const e=(0,i.O7)(),{device:t}=e;return t.isMobile?(0,me.jsx)(rt,{isMobile:!0,mode:Ye.Button}):null}var St=s(86244),bt=(s(57658),s(11751)),Ct=s(87531),Mt=s(41752),jt=s(16091),wt=s(38755),It=s(77907),kt=s(21273),Tt=s(98180),Pt=s(69327),Ft=s(29798),Rt=s(88923),Zt=s(27724),Bt=s(43145),At=s(94184),Ot=s.n(At),Lt=s(8597),Dt=s(75e3),_t=s(63296),Vt=s(64369);function Et(e,t){window.__c={n:"SearchActionMenuItem"};const{inline:s,title:r,focused:i,className:n,blueOutlineFocused:a,compact:l,shouldShowArrowUp:d}=e,{icon:c,...u}=e,h=(0,o.yK)((e=>({hoveredStyle:{background:e.buttonHoveredBackground}})),[]),p=(0,o.yK)((e=>({style:{minHeight:36,paddingTop:8,paddingBottom:8,width:l?"min-content":"100%",display:"flex"},textWrapper:{marginLeft:4,alignItems:void 0,flex:void 0,display:"block",textOverflow:"ellipsis",...s&&{alignItems:"baseline"}},icon:{display:"block",flexShrink:0,height:18,width:18,color:e.mediumTextColor,overflow:"visible",marginRight:6},enterIcon:{height:12,width:12,fill:e.mediumIconColor},iconContainer:{overflow:"visible"},compactButtonHover:{background:e.buttonHoveredBackground},compactButton:{borderRadius:44,marginLeft:10,marginRight:10,padding:"6px 12px",display:"inline-flex",boxShadow:a?e.focusedShadow:void 0,maxWidth:"calc(100% - 20px)"},menuItem:{overflow:"hidden"},menuItemTextWrapper:{marginLeft:0,marginRight:0},right:{marginLeft:i?8:void 0,marginRight:2}})),[s,a,i,l]),g={title:r,icon:c?qt(c,p.icon,p.iconContainer):void 0,style:p.style,textWrapperStyle:p.textWrapper,right:d?(0,Lt.Z)(p.enterIcon):Nt(i,p.enterIcon),className:Ot()("notranslate",n),buttonStyle:{paddingLeft:2,width:l?"min-content":void 0},hoveredStyle:h.hoveredStyle};return l?(0,me.jsx)(_t.Z,{style:p.compactButton,icon:e=>g.icon,...u,ref:t,hoveredStyle:p.compactButtonHover,children:(0,me.jsx)(ct.Z,{title:(0,me.jsx)("div",{style:p.menuItem,children:r}),textWrapperStyle:p.menuItemTextWrapper,style:p.menuItem,allowTextSelection:void 0,right:i?g.right:void 0,rightStyle:p.right})}):(0,me.jsx)(G.Z,{...u,...g,disableTransition:!0,ignoreLocalHoverState:!0})}function qt(e,t,s){return(0,me.jsx)(Vt.Z,{style:s,children:e(t)})}function Nt(e,t){const s={...t,opacity:e?1:0};return(0,me.jsx)("div",{style:{display:"flex"},children:(0,Dt.U)(s)})}const Ht=r.forwardRef(Et);var Wt=s(18442),zt=s(75024);class Kt extends F.Z{constructor(){super(...arguments),this.openSidebar=()=>C.ZP.setState({...C.ZP.state,isDebugSidebarOpen:!0}),this.styles={footer:()=>{const{device:e}=this.environment;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:e.isMobile?q.Z.fontSize.UIRegular.mobile:q.Z.fontSize.UIRegular.desktop}},footerWrapper:{flexShrink:0},footerText:{color:this.theme.lightTextColor,fontSize:zt.yv(this.environment,"UISmall"),...q.Z.textOverflowStyle},footerDebugButton:{...Ut(this.theme),marginRight:6},debugGearIcon:{color:this.theme.accentColors.gray[400]},hoveredDebugGearIcon:{color:this.theme.accentColors.gray[600]}}}renderComponent(){const e=this.styles;return(0,me.jsx)("footer",{style:e.footerWrapper,children:(0,me.jsxs)(ee.Z,{topBorder:!0,style:e.footer(),disableDesktopPadding:!0,children:[(0,me.jsx)(ct.Z,{...this.props,style:e.footerText}),(0,V.x)(H.default)&&!C.ZP.state.isDebugSidebarOpen&&(0,me.jsx)(Y.Z,{onClick:()=>C.ZP.setState({...C.ZP.state,isDebugSidebarOpen:!0}),isSmall:!0,style:e.debugGearIcon,hoveredStyle:e.hoveredDebugGearIcon,children:(0,Wt.H)({width:12,height:12})})]})})}}Kt.displayName="SearchFooterContainer";const Ut=e=>({fontSize:12,color:e.lightTextColor,marginLeft:6,paddingRight:4,paddingLeft:4,height:24}),$t=Kt;var Qt=s(41892),Gt=s(22109),Xt=s(43039),Jt=s(47839),Yt=s(62134),es=s(86706),ts=s(24042),ss=s(74420),rs=s(26388);function is(){window.__c={n:"SearchFooterNavigationHints"};const e=(0,i.O7)(),t=(0,N.useIntl)(),{isQuickSearch:s}=(0,r.useContext)(P.SearchStaticContext),a=(0,o.yK)((t=>({listStyle:{...zt.mK,...q.Z.textOverflowStyle,display:"inline-flex",fontSize:zt.yv(e,"UISmall"),color:t.lightTextColor,gap:20},upDownIcon:{marginBottom:-2,display:"inline",width:12,height:12,fill:t.mediumIconColor},enterIcon:{marginBottom:-2,display:"inline",width:11,height:11,fill:t.mediumIconColor},commandGlyph:{fontSize:.75*zt.yv(e,"UIRegular"),paddingRight:1,color:t.mediumIconColor},inlineHint:{display:"flex",gap:6,alignItems:"center"},forwardSlash:{fontSize:9,userSelect:"none",fontWeight:500,display:"flex",lineHeight:1.4},toggleSidePeekHotkey:{display:"inline-flex",marginRight:4}})),[e]),l=(0,n.VK)((()=>(0,p.rd)(e)),[e]),d=(0,n.VK)((()=>e.device.isElectron&&(l||s)),[e.device.isElectron,s,l]),[c,u]=(0,n.VK)((()=>{const t=C.ZP.state.query.text.length>0;return[l&&U.default.checkGate("search_toggle_side_peek")&&t,(0,p.Qi)(e)]}),[e,l]),{command:h}=Yt.fg(e);return(0,me.jsxs)("ul",{style:a.listStyle,children:[(0,me.jsxs)("li",{style:a.inlineHint,children:[(0,Gt.T)(a.upDownIcon),t.formatMessage({id:"searchFooter.helpText.selectHint",defaultMessage:"Select"})]}),(0,me.jsxs)("li",{style:a.inlineHint,children:[(0,Dt.U)(a.enterIcon),t.formatMessage({id:"searchFooter.helpText.openHint",defaultMessage:"Open"})]}),d?(0,me.jsx)("li",{style:a.inlineHint,onClick:()=>Jt.openQuickSearchShortcutSetting(),children:(0,me.jsx)(ns,{environment:e,containerStyles:a.inlineHint})}):void 0,l?null:(0,me.jsxs)("li",{style:a.inlineHint,children:[(0,me.jsxs)("span",{children:[(0,me.jsx)("span",{style:a.commandGlyph,children:h}),(0,Dt.U)(a.enterIcon)]}),t.formatMessage({id:"searchFooter.helpText.openNewTab",defaultMessage:"Open in a new tab"})]}),c?(0,me.jsxs)("li",{style:a.inlineHint,children:[(0,me.jsxs)("span",{style:a.toggleSidePeekHotkey,children:[(0,me.jsx)("span",{style:a.commandGlyph,children:h}),(0,me.jsx)("span",{style:a.forwardSlash,children:"\\"})]}),u?t.formatMessage({id:"searchFooter.helpText.closeSidePeek",defaultMessage:"Close preview"}):t.formatMessage({id:"searchFooter.helpText.openSidePeek",defaultMessage:"Preview"})]}):null]})}function ns(e){window.__c={n:"CommandSearchFooterShortcut"};const{environment:t,containerStyles:s}=e,[i,a]=(0,r.useState)(!1),l=(0,o.yK)((e=>({container:{...s,cursor:"pointer"},commandSearchHint:{display:"flex",alignItems:"center"},commandText:{padding:"2px 4px",borderRadius:4,background:i?e.buttonHoveredBackground:void 0},hintAndBadgeContainer:{display:"flex",gap:3,alignItems:"center",width:"max-content"},tooltip:{background:"transparent",boxShadow:"none"}})),[s,i]),d=(0,n.VK)((()=>t.device.isMac),[t.device.isMac]),c=(0,N.useIntl)(),u=(0,n.VK)((()=>{var e;const t=null===(e=ts.Z.state.preferences)||void 0===e?void 0:e.quickSearchShortcut;if(!t)return;const s=(0,es.Uy)(t);return(0,es.K9)(s,d)}),[d]);return(0,me.jsx)(rs.Z,{delayThreshold:400,placement:rs.Z.Placement.Bottom,originGap:8,renderTooltip:()=>(0,me.jsx)(os,{shortcut:u}),closeDelay:0,style:l.tooltip,render:e=>(0,me.jsxs)("div",{...e,style:l.container,onClick:()=>Jt.openQuickSearchShortcutSetting(),onMouseEnter:t=>{e.onMouseEnter&&e.onMouseEnter(t),i||a(!0)},onMouseLeave:t=>{e.onMouseLeave&&e.onMouseLeave(t),i&&setTimeout((()=>{a(!1)}),200)},children:[(0,me.jsx)("span",{style:l.commandText,children:u}),(0,me.jsx)("div",{style:l.commandSearchHint,children:i?(0,me.jsx)("span",{children:c.formatMessage({id:"searchFooter.commandSearch.editText",defaultMessage:"Click to edit shortcut"})}):(0,me.jsxs)("div",{style:l.hintAndBadgeContainer,children:[c.formatMessage({id:"searchFooter.commandSearch.defaultText",defaultMessage:"Command Search"}),(0,me.jsx)(ss.Z,{style:{marginLeft:0}})]})})]})})}function os(e){window.__c={n:"CommandSearchTooltipHelper"};const{shortcut:t}=e,s=(0,o.yK)((e=>({container:{width:260,borderRadius:8,backgroundColor:"transparent"},textContainer:{whiteSpace:"break-spaces",padding:15,display:"flex",flexDirection:"column",gap:1,backgroundColor:"light"===e.mode?e.accentColors.gray[700]:e.accentColors.gray[300],borderTopRightRadius:8,borderTopLeftRadius:8},description:{fontWeight:q.Z.fontWeight.regular,color:"light"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[600]},image:{width:"100%"}})),[]);return(0,me.jsxs)("div",{style:s.container,children:[(0,me.jsxs)("div",{style:s.textContainer,children:[(0,me.jsx)("div",{children:(0,me.jsx)(N.FormattedMessage,{id:"searchFooter.commandSearch.tooltip.header",defaultMessage:"Use search and Q&A anywhere"})}),(0,me.jsx)("div",{style:s.description,children:(0,me.jsx)(N.FormattedMessage,{id:"searchFooter.commandSearch.tooltip.description",defaultMessage:"Try {shortcut} or click on {menuBarIcon} in your menubar to access search and Ask AI anytime, even with Notion minimized.",values:{shortcut:t,menuBarIcon:(0,me.jsx)(as,{})}})})]}),(0,me.jsx)("img",{style:s.image,src:Qt.Z.images.commandSearch.tooltipPng})]})}function as(){window.__c={n:"MenuBarIcon"};const e=(0,o.yK)((e=>({container:{display:"inline-block",position:"relative"},placeholder:{width:15,height:15,display:"inline-block"},flatMenuIcon:{position:"absolute",left:0,top:3,width:15,height:15,fill:"light"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[600]}})),[]);return(0,me.jsxs)("div",{style:e.container,children:[(0,me.jsx)("span",{style:e.placeholder}),(0,Xt.m)(e.flatMenuIcon)]})}var ls=s(49085),ds=s(15145);function cs(e){var t;let{explanation:s,simple:r=!1,filterZeros:i=!1}=e;return function e(t,s){if(!t)return[];const{value:n,description:o,details:a}=t;if(0===n&&i)return[];const l=(0===n?"0":n.toFixed(4)).padStart(8);function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return`${"  ".repeat(s+t)}${e}`}const c=`[${l}] ${o}`;if(o.startsWith("match on required clause")){return[d(`[${l}] match on required clause ${null==a?void 0:a[1].description}`)]}if(["max of:","sum of:","min of:"].includes(o)&&1===(null==a?void 0:a.length))return e(a[0],s);if(o.startsWith("tf")||o.startsWith("idf")){var u;const e=o.split(",")[0],t=null===(u=o.split(" computed as ")[1])||void 0===u?void 0:u.replace(" from:","");return[d(`[${l}] ${e}: [${(a??[]).map((e=>`${e.description.split(",")[0]}=${e.value}`)).join(" ")}] --\x3e ${t}`)]}if(o.startsWith("ConstantScore(_id:"))return[d(`[${l}] ids query`)];const h=r&&0!==s&&(o.startsWith("weight")||o.startsWith("Function"));return[d(c.replace(", result of:","").replace(" from:","").replace(" [PerFieldSimilarity]","").replace(/:$/,"").trim()),...(h?[]:a??[]).flatMap((t=>e(t,s+1)))]}(null==s||null===(t=s.details)||void 0===t?void 0:t[0],0)}s(75553),s(32240);var us=s(94308),hs=s(58203);var ps=s(14871),gs=s(75018),ms=s(97820),fs=s(28020),vs=s(69988),ys=s(84210),xs=s(98742),Ss=s(98165),bs=s(16402),Cs=s(35057),Ms=s(24039),js=s(90403),ws=s(64133),Is=s(73063),ks=s(50506),Ts=s(86176),Ps=s(3043),Fs=s(96525);function Rs(e){window.__c={n:"SearchBreadcrumbFilterPopup"};const{parent:t,store:s,onClick:n}=e,o=(0,i.O7)(),{device:a}=o;let l;l=a.isMobile?{menuType:h.og.Modal,title:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,me.jsx)(I.DoneMenuText,{}),onClickRight:t.close}:{menuType:h.og.Popup,width:240};const d=(0,r.useCallback)((()=>{null==n||n({store:s,action:"include"})}),[n,s]),c=(0,r.useCallback)((()=>{null==n||n({store:s,action:"exclude"})}),[n,s]),u=s instanceof le.zX?"teamspace":"parent page",p={key:"results",render:e=>(0,me.jsx)(ee.Z,{...e}),items:[{key:"include-filter",render:e=>(0,me.jsx)(G.Z,{...e,title:`Add ${u} to filter`}),action:d},{key:"exclude-filter",render:e=>(0,me.jsx)(G.Z,{...e,title:`Exclude ${u} from results`}),action:c}]};return(0,me.jsx)(w.Z,{...l,children:(0,me.jsx)(Le.Z,{type:Le.i.Vertical,onAccept:t.close,initialFocus:void 0,sections:[p]})})}class Zs extends F.Z{constructor(){super(...arguments),this.getFilterPopupRenderer=e=>t=>(0,me.jsx)(Rs,{parent:t,store:e,onClick:this.props.onClick}),this.getBreadcrumbCommonProps=e=>({maxWidth:this.props.ancestorMaxWidth,popupRenderer:this.getFilterPopupRenderer(e),iconSize:this.props.iconSize,titleStyle:this.getTitleStyle(),iconStyle:Zs.iconStyle,highlighter:this.props.highlighter})}renderComponent(){const{store:e}=this.props,t=e.getTitleStore();if(t&&t.isReady())return(0,me.jsx)("div",{style:this.getStyle(),className:"notranslate",children:this.renderAncestors()})}renderAncestors(){const{store:e,maxAncestorCount:t}=this.props,s=Ss.uJ(e),r=e.isNavigableBlock()?s.slice(1):[...s];if(r.reverse(),s.reverse(),r.length>t){const[e,i,n]=[r[0],r.slice(1,r.length-t+1),r.slice(r.length-t+1)];if((0,z.bq)()){const t=n.length;return[this.renderButtonForStore({store:e,showDivider:!this.props.isMobile}),(0,me.jsx)(Os,{isMobile:this.props.isMobile,style:this.props.style,onClick:this.props.onClick,stores:this.props.isMobile?s:i},"blocks-as-popup"),...n.map(((e,s)=>{const r=!this.props.hideCurrentPage||s!==t-1;return e instanceof le.zX?(0,me.jsx)(Ps.Yo,{store:e,showDivider:r,...this.getBreadcrumbCommonProps(e)},e.id):(0,me.jsx)(Ps.Qe,{store:e,showDivider:r,...this.getBreadcrumbCommonProps(e)},e.id)}))]}{const e=r.filter((e=>e instanceof le.G)),s=r.filter((e=>e instanceof le.G)),i=e.length;return[(0,me.jsx)(Ps.Qe,{store:e[0],showDivider:!this.props.isMobile,...this.getBreadcrumbCommonProps(e[0])},e[0].id),(0,me.jsx)(Os,{isMobile:this.props.isMobile,style:this.props.style,onClick:this.props.onClick,stores:this.props.isMobile?s:e.slice(1,e.length-t+1)},"blocks-as-popup"),...e.slice(e.length-t+1).map(((e,t)=>(0,me.jsx)(Ps.Qe,{store:e,showDivider:!this.props.hideCurrentPage||t!==i-1,...this.getBreadcrumbCommonProps(e)},e.id)))]}}{const e=r.length;return r.map(((t,s)=>this.renderButtonForStore({store:t,showDivider:!this.props.hideCurrentPage||s!==e-1})))}}renderButtonForStore(e){const{store:t,showDivider:s}=e;return t instanceof le.zX?(0,me.jsx)(Ps.Yo,{store:t,showDivider:s,...this.getBreadcrumbCommonProps(t)}):(0,me.jsx)(Ps.Qe,{store:t,showDivider:s,...this.getBreadcrumbCommonProps(t)})}getStyle(){return{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:this.props.isMobile?q.Z.fontSize.UIRegular.mobile:q.Z.fontSize.UIRegular.desktop,color:this.theme.text.tertiary,filter:"grayscale(70%)",...this.props.style}}getTitleStyle(){return{lineHeight:1.2,fontSize:this.props.isMobile?q.Z.fontSize.UISmall.mobile:q.Z.fontSize.UISmall.desktop,color:this.theme.text.tertiary}}}Zs.displayName="SearchPathBreadcrumb",Zs.iconStyle={marginRight:3};const Bs={marginLeft:3,marginRight:3};function As(e,t,s){const r=t?X.Z4.SlideUp:X.Z4.Popup;return[{key:"results",render:e=>(0,me.jsx)(ee.Z,{...e}),items:e.map(((e,t)=>({key:e.id,render:i=>(0,me.jsx)(Fs.Z,{...i,stopClickPropagation:!0,popupType:r,renderOrigin:s=>(0,me.jsx)(ce.Z,{...s,isSubpage:0!==t,store:e,hidePath:!0,focused:!1}),render:t=>(0,me.jsx)(Rs,{parent:t,store:e,onClick:s})}),action:()=>{}})))}]}function Os(e){let{stores:t,isMobile:s,style:r,onClick:i}=e;const n={display:"flex",alignItems:"center",flexShrink:0};return(0,me.jsx)(X.ZP,{popupType:s?X.Z4.SlideUp:X.Z4.Popup,renderOrigin:e=>s?(0,me.jsxs)(Q.Z,{style:n,mobileFeedback:!0,...e,children:[(0,me.jsx)(Ps.fY,{}),(0,me.jsx)("div",{style:Bs,children:"..."}),(0,me.jsx)(Ps.fY,{})]}):(0,me.jsxs)("div",{style:n,children:[(0,me.jsx)(Y.Z,{isSmall:!0,...e,style:{paddingLeft:2,paddingRight:2,fontSize:null==r?void 0:r.fontSize},children:"..."}),(0,me.jsx)(Ps.fY,{})]}),render:e=>{let r;return r=s?{menuType:h.og.Modal,title:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,me.jsx)(I.DoneMenuText,{}),onClickRight:e.close}:{menuType:h.og.Popup,width:240},(0,me.jsx)(w.Z,{...r,children:(0,me.jsx)(Le.Z,{type:Le.i.Vertical,initialFocus:void 0,sections:As(t,s,i)})})}},"pages-popup")}var Ls=s(66897),Ds=s(95341),_s=s(96895),Vs=s(90683);function Es(e){window.__c={n:"SearchResultToolTip"};const{store:t}=e,s=(0,n.VK)((()=>{const e=t.getCreatedByPointer();if(e)return(0,Ls.Hl)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),r=(0,n.VK)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,Ls.Hl)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),i=(0,o.yK)((e=>({container:{backgroundColor:Ae.FN.light.gray[900],display:"flex",flexDirection:"column",borderRadius:8},preview:{fontSize:14,color:Ae.FN.light.gray[100],fontWeight:400,display:"flex",gap:10,alignItems:"center"}})),[]),a=(0,N.useIntl)();return(0,me.jsxs)("div",{style:i.container,children:[s&&(0,me.jsx)(qs,{store:t,activity:"created",actor:s}),r&&(0,me.jsx)(qs,{store:t,activity:"edited",actor:r}),(0,me.jsxs)("div",{style:{padding:10,display:"flex",justifyContent:"space-between",cursor:"pointer",alignItems:"center"},onClick:()=>b.default.update((e=>({...e,preferSidePeekOpen:!0}))),children:[(0,me.jsxs)("div",{style:i.preview,children:[(0,me.jsx)("span",{children:(0,_s.q)({height:14,width:14})}),(0,me.jsx)("span",{children:a.formatMessage({id:"searchResultMenuItem.tooltip.sidePeek",defaultMessage:"Preview"})})]}),(0,me.jsx)("div",{style:{color:"#7F7F7F"},children:(0,Ds.d)({height:14,width:14})})]})]})}function qs(e){window.__c={n:"UserActivity"};const{activity:t,actor:s,store:r}=e,i=(0,o.yK)((e=>({container:{display:"flex",flexDirection:"column",padding:"8px 10px 10px 10px",gap:8,borderBottom:`1px solid ${Ae.FN.light.gray[800]}`,minWidth:195},actorAvatarAndName:{display:"flex",alignItems:"center",gap:5},actorActivityInfo:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10,fontSize:14},description:{color:"#7F7F7F",fontSize:12,fontWeight:600},date:{color:"#7F7F7F",fontSize:12}})),[]),[a]=(0,n.VK)((()=>{const e="created"===t?r.getCreatedTime():r.getLastEditedTime();return[(0,bs.IS)(e,{useCompactFormat:!0,useLowercase:!0})]}),[t,r]),l=(0,N.useIntl)();return(0,me.jsxs)("div",{style:i.container,children:[(0,me.jsx)("div",{style:i.description,children:"edited"===t?l.formatMessage({id:"searchResultMenuItem.tooltip.lastEditedBy",defaultMessage:"Last edited by"}):l.formatMessage({id:"searchResultMenuItem.tooltip.createdBy",defaultMessage:"Created by"})}),(0,me.jsxs)("div",{style:i.actorActivityInfo,children:[(0,me.jsxs)("div",{style:i.actorAvatarAndName,children:[(0,me.jsx)("span",{children:(0,Vs.a)({actor:s,size:20,style:{}})}),(0,me.jsx)("span",{children:(0,Ls.$4)(l,s)})]}),(0,me.jsx)("div",{style:i.date,children:a})]})]})}(0,N.defineMessages)({openInSidePeekButtonLabel:{id:"search.result.openInSidePeek.button.label",defaultMessage:"Open search result in side peek"},copySearchResultLinkButtonLabel:{id:"search.result.copyLink.button.label",defaultMessage:"Copy link to search result"}});class Ns extends F.Z{constructor(){super(...arguments),this.storeTypes={explanationModalOpen:ls.default.createClass(!1)},this.renderTooltip=()=>(0,p.rd)(this.environment)?(0,me.jsx)(Es,{store:this.props.store}):(0,me.jsx)(Ms.Z,{store:this.props.store}),this.handleSearchPathBreadcrumbClick=e=>{let{store:t,action:s}=e;"block"===t.table?"include"===s?C.ZP.updateFilters({ancestors:a.jj(C.ZP.state.query.filters.ancestors.concat(t.id))}):C.ZP.updateFilters({dev_excludedPages:a.jj((C.ZP.state.query.filters.dev_excludedPages||[]).concat(t.id))}):"team"===t.table&&("include"===s?C.ZP.updateFilters({inTeams:a.jj((Ce.iY(C.ZP.state.query.filters.inTeams)||[]).concat(t.id))}):C.ZP.updateFilters({dev_excludedTeams:a.jj((C.ZP.state.query.filters.dev_excludedTeams||[]).concat(t.id))}))},this.renderVerifiedBadge=e=>(0,me.jsx)(js.Z,{style:this.styles.badge,content:(0,me.jsxs)("div",{style:this.styles.badgeContent,children:[(0,us.f)(this.styles.verifiedBadgeIcon),(0,me.jsx)("div",{style:this.styles.badgeCaption,children:e})]})}),this.renderPopularThisWeekBadge=e=>(0,me.jsx)(js.Z,{style:this.styles.badge,content:(0,me.jsx)("div",{style:this.styles.badgeCaption,children:e})}),this.renderMostViewedBadge=e=>(0,me.jsx)(js.Z,{style:this.styles.badge,content:(0,me.jsx)("div",{style:this.styles.badgeCaption,children:e})}),this.renderIsTemplateBadge=e=>(0,me.jsx)(js.Z,{content:(0,me.jsx)("div",{style:this.styles.grayedOutBadgeCaption,children:e})}),this.renderIsTeamArchivedBadge=()=>(0,me.jsx)(js.Z,{content:(0,me.jsx)("div",{style:this.styles.grayedOutBadgeCaption,children:(0,me.jsx)(N.FormattedMessage,{id:"search.result.archived.badge.text",defaultMessage:"Archived"})})}),this.renderCurrentPageBadge=()=>(0,me.jsx)(js.Z,{content:(0,me.jsx)("div",{style:this.styles.grayedOutBadgeCaption,children:(0,me.jsx)(N.FormattedMessage,{id:"search.result.current.page.badge.text",defaultMessage:"Current Page"})})}),this.getPageVisitSource=()=>"recent_pages"===this.props.type?ds.tY.SearchRecents:ds.tY.SearchQuery,this.handleOpenInSidePeek=()=>{const{store:e,queryId:t,result:s}=this.props,r=this.getPageVisitSource();s?gs.navigateToSearchResult({searchResult:s,openInSidePeek:!0,environment:this.environment,pageVisitSource:r,queryId:t,openInNew:void 0}):gs.navigateToPage({store:e,queryId:t,environment:this.environment,pageVisitSource:r,openInSidePeek:!0,peekMode:"s"})},this.handleCopy=()=>{const{store:e,queryId:t}=this.props,s=(0,ys.ZP)({store:e,pageVisitSource:this.getPageVisitSource(),queryId:t});ps.RD({environment:this.environment,stringValue:s,copiedMessage:ps.tq.copiedLinkToClipboard})},this.styles={title:{fontWeight:q.Z.fontWeight.medium,lineHeight:"20px"},titleContent:{display:"flex",...this.props.inline?{}:{width:0,flexGrow:1}},menuItem:{minHeight:36,paddingTop:this.environment.device.isMobile?12:8,paddingBottom:this.environment.device.isMobile?12:8},textWrapper:{marginLeft:4,alignItems:"center",width:"100%"},inlineTextWrapper:{alignItems:"center"},highlight:{fontWeight:q.Z.fontWeight.medium},vectorHighlight:{fontWeight:q.Z.fontWeight.medium,whiteSpace:"pre-wrap"},rightContentWrapper:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},rightIcon:{height:12,width:12},rightIconButtonIcon:{height:12,width:12},rightIconButtonWrapper:{height:18,width:18,marginRight:6},uniqueIDBadgeWrapper:{display:"flex",gap:8,marginRight:8,alignItems:"center"},caption:{marginTop:1},debugArea:{fontFamily:"monospace"},timestamp:{fontSize:q.Z.fontSize.UISmall.desktop,fontWeight:q.Z.fontWeight.regular},tooltip:{maxWidth:300},sidePeekTooltip:{background:"transparent",boxShadow:"none"},tooltipTitle:{fontWeight:q.Z.fontWeight.medium,fontSize:q.Z.fontSize.UISmall.desktop},tooltipText:{fontWeight:q.Z.fontWeight.medium,fontSize:q.Z.fontSize.UISmall.desktop,marginLeft:0,paddingRight:20},tooltipValue:{fontSize:q.Z.fontSize.UISmall.desktop,fontWeight:q.Z.fontWeight.regular},tooltipMenuItem:{minHeight:20},badge:{background:"light"===this.theme.mode?this.theme.accentColors.blue[30]:this.theme.accentColors.blue[200]},badgeContent:{display:"flex",alignItems:"center",width:"100%"},badgeCaption:{marginLeft:2,color:this.theme.blueColor},grayedOutBadgeCaption:{marginLeft:1},vectorBadge:{background:this.theme.invoiceGreen,color:this.theme.contentBackground},verifiedBadgeIcon:{width:10,height:10,fill:this.theme.blueColor},right:{display:"flex"},collectionTextMatchingProperty:{lineHeight:2,fontSize:12}},this.debugHitCustomRenderer=e=>{let{data:t,keyPath:s}=e;if(2===s.length&&"_explanation"===s[0])return{element:(0,me.jsx)(me.Fragment,{children:(0,me.jsx)("button",{onClick:e=>{this.stores.explanationModalOpen.setState(!0),e.stopPropagation()},children:"show simplified explanation"})}),expanded:!1};const r=t._ltrlog;if(r)return function(e){const t=Object.keys(e[0])[0],s=e[0][t].map(((e,t)=>{const s=t%2==0?Ks:zs;return(0,me.jsxs)("tr",{children:[(0,me.jsx)("td",{style:s,children:`${t}`}),(0,me.jsx)("td",{style:s,children:`${e.name}`}),(0,me.jsx)("td",{style:s,children:`${e.value}`})]},e.name)}));return{element:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("div",{children:(0,me.jsx)("b",{children:`Featureset: ${t}`})}),(0,me.jsx)("div",{style:Us,children:(0,me.jsx)("table",{style:$s,children:s})})]}),expanded:!1}}(r);if(!["_score","matched_queries"].every((e=>t[e])))return null;const{_score:i,matched_queries:n}=t;return{element:(0,me.jsx)(me.Fragment,{children:`score ${i}, ${(n??[]).length} matched query clauses`}),expanded:!1}}}renderComponent(){const{focused:e,isLastInSection:t,inline:s,className:r}=this.props,i=this.styles,n=this.getThemeColors(),o={...i.menuItem,...!s&&!t&&!e&&n.menuItemBorder},a={...i.caption,...n.caption},l={...i.timestamp,...n.timestamp},d={...i.textWrapper,...this.props.inline&&i.inlineTextWrapper},c={title:this.renderTitle(),icon:(0,me.jsx)(Js,{store:this.props.store}),caption:this.renderCaption(),body:this.renderPreview(),right:this.renderRight(),rightStyle:e?void 0:l,dontShrinkRight:!0,captionStyle:a,style:o,spacerStyle:(u=this.props.store,h=this.props.hidePath,h||!(0,Ts.L)(u)?Qs:void 0),textWrapperStyle:d,className:Ot()("notranslate",r),buttonStyle:{paddingLeft:2},hoveredStyle:{background:this.theme.tint.regular}};var u,h;const g=U.default.checkGate("search_toggle_side_peek"),m=(0,p.rd)(this.environment)&&g,f=(0,Cs.Mk)()&&!(0,p.Qi)(this.environment)&&!C.ZP.state.isDebugSidebarOpen,v=f&&m&&this.props.focused;return f?(0,me.jsx)(rs.Z,{delayThreshold:50,placement:rs.Z.Placement.Right,originGap:18,renderTooltip:this.renderTooltip,style:v?i.sidePeekTooltip:i.tooltip,forceVisibleState:!!v||void 0,allowHover:!!v,render:e=>(0,me.jsx)(G.Z,{...this.props,...c,disableTransition:!0,...(0,xs.Z)(this.props,e)}),closeDelay:0}):(0,me.jsx)(G.Z,{...this.props,...c,disableTransition:!0,ignoreLocalHoverState:!0})}renderTitle(){var e;const{store:t,result:s,placeholder:r,index:i}=this.props,n=this.styles,o=this.getThemeColors(),a=void 0===s,l={...n.title,...!a&&!this.props.focused&&o.nonHighlightedTextColor},d=[];if(s&&s.highlight)if(d.push(...(0,vs.fe)(s.highlight.pathText)),Gs(this.props.result))d.push(...(0,vs.fe)(s.highlight.title));else{le.G.createChildStore(this.props.store,{table:ie.iU,id:s.id,spaceId:s.spaceId}).isNavigableBlock()&&d.push(...(0,vs.fe)(s.highlight.text))}const c=this.props.focused?void 0:this.getWordHighlighter({words:d}),u=null===(e=(0,Ss.VP)(t))||void 0===e?void 0:e.isArchived(),h=function(e){if(e)return e.sources.includes(Ce.vp.ElasticsearchUniqueID)}(s),p=(0,fs.zj)(),g=p&&p===(null==s?void 0:s.id)&&"on"===U.default.getGroup("search-includes-current-page-in-local-search");const m=(0,Cs.Mk)()&&!g&&!u?function(){function e(e){var t;return null==s||null===(t=s.badges)||void 0===t?void 0:t.find((t=>t.type===e))}for(const t of["is_template","popular_this_week","most_viewed","verified"]){const s=e(t);if(void 0!==s)return{type:s.type,label:s.label}}}():void 0,f={is_template:this.renderIsTemplateBadge,verified:this.renderVerifiedBadge,popular_this_week:this.renderPopularThisWeekBadge,most_viewed:this.renderMostViewedBadge};return(0,me.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",...l},children:[(0,me.jsxs)("div",{style:n.titleContent,children:[S.ZP.state.showDebugInfo&&void 0!==i&&`${i+1}. `,h&&this.renderUniqueIdHighlight(s),(0,me.jsx)(ue.Z,{style:l,store:t,placeholder:r,highlighter:c}),!1,u&&this.renderIsTeamArchivedBadge(),g&&this.renderCurrentPageBadge(),m&&f[m.type](m.label)]}),S.ZP.state.showDebugInfo&&(0,me.jsx)(Xs,{result:this.props.result,index:this.props.index,originalPosition:this.props.originalPosition})]})}renderUniqueIdHighlight(e){var t;const{focused:s}=this.props,r=null==e||null===(t=e.highlight)||void 0===t?void 0:t.uniqueId;if(!r)return;const i="dark"===this.environment.ThemeStore.state.mode,n=this.styles,o=this.getWordHighlighter({words:[r]}),a=s?i?Ae.FN.dark.translucentGray[300]:Ae.se.light.darkgray.alpha(.09):i?Ae.FN.dark.translucentGray[200]:Ae.se.light.darkgray.alpha(.06);return(0,me.jsxs)("div",{style:n.uniqueIDBadgeWrapper,children:[(0,me.jsx)("div",{children:(0,me.jsx)(ws.Z,{text:r,highlighter:o})}),(0,me.jsx)("div",{style:{borderRight:`1.5px solid ${a}`,height:14,borderRadius:1}})]})}renderRight(){return(0,me.jsx)("div",{style:this.styles.right,children:this.rightContent()})}rightContent(){const{lastViewed:e,focused:t}=this.props;if(this.environment.device.isMobile)return;if(e&&!t)return(0,bs.IS)(e,{useCompactFormat:!0});const s=this.styles,r=this.getThemeColors(),i={...s.rightIcon,...r.enterIcon,opacity:t?1:0};s.rightIconButtonIcon;return(0,Dt.U)(i)}renderCaption(){const{store:e,inline:t,result:s,debugLocal:r,debugHits:i}=this.props,{device:n}=this.environment,o=this.getWordHighlighter({words:(0,vs.fe)(s&&s.highlight&&s.highlight.pathText),removeDuplicate:!0}),a=t||n.isMobile?0:2,l=(i??[]).find((e=>"elasticsearch"===e.type&&void 0!==e._explanation)),d="elasticsearch"===(null==l?void 0:l.type)?null==l?void 0:l._explanation:void 0,c=Boolean(S.ZP.getDebugLevel());return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Ts.Z,{store:e,extraLength:a,showFullPathInTooltip:!0,highlighter:o,enableHoverAncestor:!0,tooltipStyle:this.getThemeColors().captionTooltip,tooltipDividerStyle:this.getThemeColors().captionTooltipDivider}),(0,me.jsxs)("div",{ref:this.props.debugAreaRef,children:[r&&(0,me.jsx)("div",{style:this.styles.debugArea,children:(0,me.jsx)(It.LazyAdminReactJson,{data:{debugLocal:r},defaultCollapsed:!0,customCollapsedRenderers:[Ws],showCopyButton:!1,showModalButton:!1})}),i&&(0,me.jsx)("div",{style:this.styles.debugArea,children:(0,me.jsx)(It.LazyAdminReactJson,{data:{debugHits:i},defaultCollapsed:!0,customCollapsedRenderers:[this.debugHitCustomRenderer],showCopyButton:"small",showModalButton:!0})}),i&&(null==s?void 0:s.rankingSignals)&&(0,me.jsx)("div",{style:this.styles.debugArea,children:(0,me.jsx)(It.LazyAdminReactJson,{data:{rankingSignals:s.rankingSignals},defaultCollapsed:!0,showCopyButton:"small",showModalButton:!1})}),c&&(null==s?void 0:s.featureGroups)&&(0,me.jsx)("div",{style:this.styles.debugArea,children:(0,me.jsx)(It.LazyAdminReactJson,{data:{featureGroups:s.featureGroups},defaultCollapsed:!0,showCopyButton:"small",showModalButton:!1})}),d&&(0,me.jsx)(ks.Z,{open:this.stores.explanationModalOpen.state,innerStyle:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},onDismiss:()=>{this.stores.explanationModalOpen.setState(!1)},render:()=>(0,me.jsx)("pre",{children:cs({explanation:d}).join("\n")})})]})]})}renderPreview(){var e,t;const{result:s}=this.props;if(!s)return;if(!s.highlight)return;if(le.G.createChildStore(this.props.store,{table:ie.iU,id:s.id,spaceId:s.spaceId}).isNavigableBlock()&&!Gs(this.props.result))return;let r,i;if(s.highlight.text)r=s.highlight.text;else if(s.highlight.collectionText){var n;r=s.highlight.collectionText,i=null==s||null===(n=s.matchedCollectionProperties)||void 0===n?void 0:n.collectionText}if(r=(0,hs.$B)(r),!r)return;const o=(0,vs.ZP)(r);let a=!1;if(Gs(this.props.result)){const e=e=>e.filter(vs.il).map((e=>e[0].toLowerCase())),t=t=>void 0===t?[]:e((0,vs.ZP)(t)),r=[...new Set([...t(s.highlight.title),...t(s.highlight.pathText)])],i=e=>r.some((t=>t.includes(e)));a=e(o).every((e=>i(e)))}const l=null!==(e=s.sources)&&void 0!==e&&e.includes(Ce.vp.VectorDBBlock)||null!==(t=s.sources)&&void 0!==t&&t.includes(Ce.vp.VectorDBCollection)?this.styles.vectorHighlight:this.styles.highlight,{highlightedText:d}=this.getThemeColors(),c=a?{}:{...l,...d};return(0,me.jsxs)(me.Fragment,{children:[void 0!==i&&(0,me.jsx)(ms.Z,{propertySchema:i,showIcon:!0,style:this.styles.collectionTextMatchingProperty}),(0,me.jsx)(ws.Z,{text:r,highlighter:{tokenize:e=>(0,vs.Vu)(o),style:c}})]})}getWordHighlighter(e){const{words:t,removeDuplicate:s}=e;if(0===t.length)return;const r={...this.styles.highlight,...this.getThemeColors().highlightedText},i=s?new Set:void 0;return{tokenize:e=>(0,vs.XT)({text:e,patterns:t,uniqueTokenHighlighterContext:i}),style:r}}shouldComponentUpdate(e,t,s){var r,i;const n=e.focused!==this.props.focused,o=(null===(r=e.result)||void 0===r?void 0:r.highlight)!==(null===(i=this.props.result)||void 0===i?void 0:i.highlight);return n||o}getThemeColors(){return{nonHighlightedTextColor:{color:this.theme.text.secondary},menuItemBorder:{boxShadow:`0 1px 0 ${this.theme.lightDividerColor}`},highlightedText:{color:this.theme.text.primary},enterIcon:{fill:this.theme.icon.secondary},bookmarkedIcon:{fill:this.theme.topbarFavorite},caption:{color:this.theme.text.secondary},captionTooltip:{color:this.theme.text.contrast},captionTooltipDivider:{color:this.theme.text.contrast},timestamp:{color:this.theme.text.tertiary},tooltipTitle:{color:this.theme.text.secondary},tooltipText:{color:this.theme.text.primary},tooltipValue:{color:this.theme.text.tertiary}}}}Ns.displayName="SearchResultMenuItem",Ns.contextTypes={...h.mw,...F.w};const Hs=Ns,Ws=e=>{let{data:t}=e;const s=t;if(!s)return null;const{localSource:r}=s;let i=r;return i||(i=new Set(["unknown"])),{element:(0,me.jsx)(me.Fragment,{children:`from ${[...i].join(",")}`}),expanded:!1}},zs={paddingLeft:5,paddingRight:20,paddingTop:2,paddingBottom:2,border:"1px solid black",color:Ae.FN.dark.green[900]},Ks={...zs,color:Ae.FN.dark.gray[30]},Us={maxHeight:200,overflowY:"scroll"},$s={border:"1px solid black"};const Qs={visibility:"hidden"};function Gs(e){return e&&!e.sources.includes(Ce.vp.Local)}function Xs(e){var t;let{result:s,index:r,originalPosition:i}=e;const n=null===(t=(null==s?void 0:s.sources)??[])||void 0===t?void 0:t.flatMap((e=>e===Ce.vp.Local?["💻"]:e===Ce.vp.ElasticSearch?["🌐"]:e===Ce.vp.Postgres?["🐘"]:e===Ce.vp.VectorDBBlock||e===Ce.vp.VectorDBCollection?["🔭"]:e===Ce.vp.ElasticsearchRandom?["🎲"]:e===Ce.vp.ElasticsearchUniqueID?["🆔"]:e===Ce.vp.ElasticsearchForcedRecentRecall?["⏰"]:void(0,E.t1)(e))).reverse(),o=[...void 0===r||void 0===i?[" "]:r>i?["⬇️"]:r<i?["⬆️"]:[],...n].join("").trim();return o?(0,me.jsx)("span",{children:o}):null}function Js(e){let{store:t}=e;window.__c={n:"Icon"};const s=(0,n.VK)((()=>t.getIcon()),[t]),r=(0,n.VK)((()=>t.isEmptyPage()),[t]);return(0,me.jsx)(de.Z,{disabled:!0,icon:s,isEmptyPage:r,size:20,largeIcon:!1})}function Ys(e){switch(e){case"Today":return(0,me.jsx)(N.FormattedMessage,{id:"search.recentPagesTimeBuckets.today.text",defaultMessage:"Today"});case"Yesterday":return(0,me.jsx)(N.FormattedMessage,{id:"search.recentPagesTimeBuckets.yesterday.text",defaultMessage:"Yesterday"});case"Past Week":return(0,me.jsx)(N.FormattedMessage,{id:"search.recentPagesTimeBuckets.pastWeek.text",defaultMessage:"Past Week"});case"Past 30 Days":return(0,me.jsx)(N.FormattedMessage,{id:"search.recentPagesTimeBuckets.past30Days.text",defaultMessage:"Past 30 Days"});case"Older":return(0,me.jsx)(N.FormattedMessage,{id:"search.recentPagesTimeBuckets.older.text",defaultMessage:"Older"})}(0,E.t1)(e)}const er=function(e){window.__c={n:"SearchDefaultBody"};const{onSelect:t,spaceId:s,extraTopPadding:l}=e,[d,c]=r.useState(!1),[u,h]=r.useState(!1),p=(0,n.qz)(void 0,Ft.Z),{section:g,indexLocal:m}=(0,n.VK)((()=>p.state.focus),[p]),f=(0,i.O7)(),y=(0,i.Fy)(),x=(0,o.yK)((e=>({wrapper:{width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto"},sectionHeader:{marginBottom:8},section:{marginBottom:18},sectionBorderBottom:{paddingBottom:10,boxShadow:`0 1px 0 ${e.lightDividerColor}`},notionAiLabel:{lineHeight:"20px",fontSize:14,textOverflow:"ellipsis",overflow:"hidden",display:"block",fontWeight:q.Z.fontWeight.medium},notionAiIcon:{fill:e.aiPurpleColor,overflow:"visible"}})),[]),{defaultBodyFocusedResult:S,isQuickSearch:b}=(0,r.useContext)(P.SearchStaticContext),C=(0,n.VK)((()=>{const e=Rt.default.state,t=Rt.default.isCenterPeekOpen()||Zt.default.isInPeekRenderer();return e.open&&(t||e.isOpening)?e.target:v.default.state.mainEditorCurrentBlockStore}),[]),M=(0,n.VK)((()=>ae.X4.state.filter((e=>e.pageId!==(null==C?void 0:C.id)))),[null==C?void 0:C.id]),j=(0,n.VK)((()=>kt.Z.shouldShowSearchMenuItemAskAI(y)),[y]),w=(0,n.VK)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t,mainEditorCurrentBlockStore:s}=v.default.state;if(!e||!e.isReady())return!1;if(!t||!s||!s.canRead())return!1;if(f.device.isMobile)return!1;const r=e.getSettings();return!!r&&"tooltip"===r.ai_qna_intro_onboarding_phase}),[f.device]);(0,r.useEffect)((()=>()=>{S.setState(void 0)}),[S]);const I=(0,r.useRef)(null),k=(0,n.VK)((()=>j?[{key:"actionMenuItem.assistant",action:()=>{const{currentUserSettingsStore:e}=v.default.state;e&&(0,Mt.C)(f,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipClose",userSettingsStore:e}),Ct.em({environment:f,shouldResetAssistantStore:Tt.Z.wasActiveSessionLastOpenedOutsideOfHistorySavedWindow(),isQuickSearch:b}),Tt.Z.setLastSessionInitializedUnixEpochTime()},render:e=>{const t=null==C?void 0:C.getSpaceStore(),s=t?(0,wt.rn)(f,t):void 0;return(0,me.jsxs)(me.Fragment,{children:[w&&(0,me.jsx)(jt.gc,{origin:I}),(0,me.jsx)(Ht,{type:"assistant",...e,blueOutlineFocused:w,ref:I,title:(0,me.jsx)("div",{className:"notranslate",style:x.notionAiLabel,children:s?(0,me.jsx)(N.FormattedMessage,{id:"searchDefaultBody.searchActionMenuItem.askAiInSpace",defaultMessage:"Ask AI anything in {spaceName}",values:{spaceName:s}}):(0,me.jsx)(N.FormattedMessage,{id:"searchDefaultBody.searchActionMenuItem.askNotionAi",defaultMessage:"Ask Notion AI about..."})}),icon:e=>(0,bt.t)({...e,...x.notionAiIcon})})]})}}]:[]),[b,j,f,C,w,x.notionAiLabel,x.notionAiIcon]),T=(0,n.VK)((()=>{const e={};return M.forEach((t=>{let{pageId:s,visitedAt:r}=t;return e[s]=r})),e}),[M]),F=(0,n.VK)((()=>{const e=new Map;return M.map(((s,r)=>{const i=ae._5(s.visitedAt),n="Today"!==i&&"Yesterday"!==i,o={result:{key:`${s.store.id}:${r}`,action:e=>t({action:{...e,index:e.index-k.length},sectionName:"recents",selectedResult:{store:s.store,id:s.store.id,score:-1,spaceId:s.store.getSpaceId(),sources:[Ce.vp.Local],featureGroups:[],originalPosition:r,serverEventProperties:void 0}}),render:e=>(0,me.jsx)(Hs,{...e,inline:!y.isMobile,store:s.store,hidePath:!1,lastViewed:n?T[s.store.id]:void 0,buttonStyle:{paddingLeft:1},type:"recent_pages"})},store:s.store};var a;e.has(i)?null===(a=e.get(i))||void 0===a||a.push(o):e.set(i,[o])})),e}),[k.length,y.isMobile,M,t,T]),R=(0,It.useDependency)(It.deps.AppTemplates),Z=(0,n.VK)((()=>{var e;return null===(e=v.default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.persona}),[]),B=(0,n.VK)((()=>{var e;const t=null===(e=R.value)||void 0===e?void 0:e.templatePickerItems.getSuggestedTemplatesForSearch(Z).slice(0,3);return null==t?void 0:t.map(((e,t)=>({key:`${t}:${e.name}`,action:e.onClick,render:t=>(0,me.jsx)(Ht,{...t,title:e.name,icon:()=>e.icon,type:"page_result"})})))}),[R,Z]),A=(0,n.VK)((()=>!(!B||0===B.length)&&"on"===U.default.getEligibleGroup({experimentId:"search_modal_suggested_templates"})),[B]),O=(0,n.VK)((()=>{const e=[];k.length>0&&e.push({key:"actions",items:k,render:e=>(0,me.jsx)(ee.Z,{title:"Actions",desktopTitleStyle:x.sectionHeader,disableDesktopPadding:!0,extraTopPadding:l,style:{...x.section},children:e.children})});for(const[t,s]of F.entries()){const r=Ys(t),i={key:t,items:s.map((e=>e.result)),render:e=>(0,me.jsx)(ee.Z,{title:r,desktopTitleStyle:x.sectionHeader,disableDesktopPadding:!0,style:x.section,children:e.children})};e.push(i)}return!b&&B&&B.length>0&&A&&e.push({key:"templates",items:B,render:e=>(0,me.jsx)(ee.Z,{title:(0,me.jsx)(N.FormattedMessage,{id:"search.templateSuggestions.header",defaultMessage:"Start with a template"}),desktopTitleStyle:x.sectionHeader,disableDesktopPadding:!0,extraTopPadding:l,style:{...x.section},children:e.children})}),e}),[b,k,F,l,x.section,x.sectionHeader,B,A]),L=(0,r.useCallback)((e=>{const t=()=>{const e=Pt.Z.getWithoutSubscribing(s),t=e[e.length-1];return null==t?void 0:t.visitedAt},r=a.P2((async()=>{const e=t(),r=f.currentUser.id;if(!r||!e)return;c(!0);const i=await ae.Od(e,{environment:f,userId:r,spaceId:s});c(!1),i||h(!0)}),300);t()&&e<=200&&!d&&!u&&r()}),[u,d,f,s]);(0,r.useEffect)((()=>{var e;if(void 0===g&&void 0===m)return;const t=null===(e=O[g])||void 0===e?void 0:e.key;if(t&&"string"==typeof t)if("actions"===t)S.setState({type:"assistant"});else if(ae._k.includes(t)){var s;const e=null===(s=F.get(t))||void 0===s||null===(s=s[m])||void 0===s?void 0:s.store;e&&S.setState({type:"page_result",value:e})}}),[S,g,m,F,O]);const D=!y.isMobile&&M.length>0;return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)("div",{style:x.wrapper,children:[(0,me.jsx)(Le.Z,{store:p,type:Le.i.Vertical,initialFocus:0,disableKeyboardArrowWrap:!0,sections:O,unfocusOnScroll:!0}),(0,me.jsx)(Bt.Z,{onChange:L})]}),D&&(0,me.jsx)($t,{title:(0,me.jsx)(is,{})})]})};var tr=s(36308),sr=s(15157),rr=s(34859),ir=s(79131),nr=s(53336),or=s(76725),ar=s(19889),lr=s(7928);function dr(e){window.__c={n:"SearchFilterBarTitle"};const{filterUIName:t}=e,{parentStore:s}=(0,r.useContext)(P.SearchStoresContext),i=(0,n.VK)((()=>C.ZP.state.query.filters),[]),l=(0,o.yK)((e=>({title:{maxWidth:220,...q.Z.textOverflowStyle}})),[]),d=(0,n.VK)((()=>{switch(t){case"personFilter":return function(e,t){const s=e.createdBy,r=oe.default.getIntl(),i=a.oA(s.map((e=>{const s=le.U6.createChildStore(t,{table:ar.KJ,id:e});return(0,lr.Nz)(r,s.getModel())})));return(0,or.Z)(i,pr)}(i,s);case"teamsFilter":case"dev_notInTeamFilter":return function(e,t){const s=(0,Ce.iY)(e.inTeams);if(!s)return[];const r=a.oA(s.map((e=>le.zX.createChildStore(t,{table:be.e0,id:e}).getName())));return(0,or.Z)(r,pr)}(i,s);case"pageFilter":return gr(i,s);case"dateFilter":return function(e){const t=oe.default.getIntl(),s=ur(e);if("createdTime"===s)return g._Q(e.createdTime,t);if("lastEditedTime"===s)return g._Q(e.lastEditedTime,t);return""}(i);case"pageFilter":case"dev_notInPageFilter":return gr(i,s);case"titleToggle":return[];default:(0,E.t1)(t)}}),[s,t,i]);return(0,me.jsx)("div",{style:l.title,children:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"{filterName}{colon} {filterOperator} {filterValues}",id:"search.filterBarFilter.title",values:{filterName:cr(t),filterOperator:0===d.length?void 0:hr(t,i),filterValues:d,colon:0===d.length?void 0:":"}})})}function cr(e){switch(e){case"personFilter":return(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.person",defaultMessage:"Created by"});case"teamsFilter":return(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.inTeams",defaultMessage:"Teamspace"});case"pageFilter":return(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.inPage",defaultMessage:"In"});case"dateFilter":return(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.date",defaultMessage:"Date"});case"titleToggle":return(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.onlyMatchTitlesToggle.label",defaultMessage:"Title only"});case"dev_notInPageFilter":return(0,me.jsx)(N.FormattedMessage,{id:"[DO NOT TRANSLATE].search.filterMenu.notInPageFilter.label",defaultMessage:"[dev] Not in page"});case"dev_notInTeamFilter":return(0,me.jsx)(N.FormattedMessage,{id:"[DO NOT TRANSLATE].search.filterMenu.notInTeamFilter.label",defaultMessage:"[dev] Not in teamspace"})}(0,E.t1)(e)}function ur(e){const t=g.VD.createdTime(e.createdTime),s=g.VD.lastEditedTime(e.lastEditedTime);return t?"createdTime":s?"lastEditedTime":void 0}function hr(e,t){switch(e){case"personFilter":case"teamsFilter":case"pageFilter":case"dev_notInPageFilter":case"dev_notInTeamFilter":case"dateFilter":case"titleToggle":return}(0,E.t1)(e)}const pr=e=>", ";function gr(e,t){const s=e.ancestors,r=a.oA(s.map((e=>{const s=le.G.createChildStore(t,{table:ie.iU,id:e});return s.isDefined()?s.getModel().getRenderTitle({getRecordModel:s.getRecordModel,userTimeZone:(0,He.r)(),intl:oe.default.getIntl()}):""})));return(0,or.Z)(r,pr)}var mr=s(41558),fr=s(3386),vr=s(53437),yr=s(45959),xr=s(83264);const Sr={today:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Today",id:"searchDateFilter.quickActions.today.label"}),pastWeek:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Last 7 days",id:"searchDateFilter.quickActions.last7Days.label"}),pastMonth:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Last 30 days",id:"searchDateFilter.quickActions.last30Days.label"})};function br(e){let{date:t,onClick:s,onDismiss:r}=e;const i=(0,He.r)(),n=Ne.Lg(i),o=n;let a;const l=Sr[t];"today"===t?a=n:"pastWeek"===t?a=Ne.Oo(i):"pastMonth"===t?a=Ne.dj(i):(0,E.t1)(t);return(0,me.jsx)(G.Z,{focused:!1,icon:(0,B.C)({height:18,width:18}),title:l,onClick:e=>{s({value:{starting:{type:"date",start_date:a.start_date},ending:{type:"date",start_date:o.start_date}}}),r(e)}})}class Cr extends F.Z{constructor(){super(...arguments),this.storeTypes={store:mr.Z},this.renderPillButtonOrigin=()=>{const{icon:e,title:t}=this.props,{store:s}=this.stores,r=this.styles,{dateFilterType:i}=s.state,n=C.ZP.state.query.filters[i].starting;return(0,me.jsx)(Te.Z,{on:Boolean(n),icon:e(r.pillIcon),title:(0,me.jsx)("span",{children:t}),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e}=this.props,{store:t}=this.stores;return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)("div",{style:this.styles.dateFilterHeader,children:[this.renderOperatorSelect(),(0,me.jsx)(Q.Z,{style:this.styles.clearButton,onClick:this.handleClear,children:(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Clear",id:"searchDateFilter.clearButton.label"})})]}),(0,me.jsxs)("div",{style:this.styles.quickDatesWrapper,children:[(0,me.jsx)(br,{date:"today",onClick:this.updateTemporary,onDismiss:this.handleMenuClose}),(0,me.jsx)(br,{date:"pastWeek",onClick:this.updateTemporary,onDismiss:this.handleMenuClose}),(0,me.jsx)(br,{date:"pastMonth",onClick:this.updateTemporary,onDismiss:this.handleMenuClose})]}),(0,me.jsx)(xr.Z,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:t,onDismiss:this.handleMenuClose,hideDateInputMenuItems:!0})]})},this.handleOriginActivate=()=>{const{disabled:e,onMenuOpen:t}=this.props,{store:s}=this.stores;e||(t&&t(),s.setState({...s.state,isOpen:!0,focus:"starting"}))},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{store:s}=this.stores,{temporaryDateRange:r,dateFilterType:i}=s.state;g.zD(e)||(jr(i,r),s.setState({...s.state,isOpen:!1}),t&&t())},this.handleClear=()=>{const{store:e}=this.stores,{dateFilterType:t}=e.state;jr(t,{starting:void 0,ending:void 0}),e.clearTemporaryDateRange()},this.handleMenuListKey=e=>{e.preventDefault&&e.preventDefault()},this.updateTemporary=e=>{const{store:t}=this.stores;if(e.error)return;t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}});const{dateFilterType:s,temporaryDateRange:r}=t.state,{starting:i,ending:n}=r;i&&n&&jr(s,{starting:i,ending:n})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},sectionMenuItem:{display:"flex"},icon:{height:14,width:14,fill:"currentColor"},pillIcon:{height:16,width:16,fill:"currentColor",marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"},quickDatesWrapper:{marginTop:12,boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,paddingBottom:15,marginBottom:15},clearButton:{color:this.theme.mediumTextColor,fill:this.theme.lightIconColor,fontWeight:500,fontSize:13,paddingLeft:2,paddingRight:2,paddingBottom:2,borderRadius:4,flexShrink:0},dateFilterHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:12,marginRight:12}}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{store:t}=this.stores,s=this.styles;return(0,me.jsx)(Re.Z,{style:s.sectionMenuItem,children:(0,me.jsx)(fr.Z,{capture:t.state.isOpen,onUp:this.handleMenuListKey,onDown:this.handleMenuListKey,onEnter:this.handleMenuListKey,children:(0,me.jsx)(vr.ZP,{popupType:Ir(this.environment),open:t.state.isOpen,origin:this.renderPillButtonOrigin(),render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:vr.ZP.Placement.Bottom,alignmentToOrigin:vr.ZP.Alignment.Start,keepFocus:!0,style:s.popup})})})}updateFilterFromToggle(e){const{value:t}=this.props,{store:s}=this.stores,{dateFilterType:r}=s.state;jr(e,t),e!==r&&(jr(r,{starting:void 0,ending:void 0}),s.setState({...s.state,dateFilterType:e}))}renderOperatorSelect(){const{device:e}=this.environment,{store:t}=this.stores,{dateFilterType:s}=t.state,r={width:190,items:["createdTime","lastEditedTime"],selectedItem:s,getKey:e=>e,onSelect:e=>this.updateFilterFromToggle(e),renderItem:e=>(0,me.jsx)(G.Z,{title:wr(e.value),...e}),renderOrigin:t=>(0,me.jsx)(Q.Z,{...t,style:{paddingLeft:2,paddingRight:2,paddingBottom:2,borderRadius:4,flexShrink:0},children:(0,me.jsxs)("div",{style:{display:"flex",alignItems:"center",...!e.isMobile&&{color:this.theme.mediumTextColor,fill:this.theme.lightIconColor,fontWeight:500,fontSize:13}},children:[(0,me.jsx)("span",{style:{marginRight:4},children:wr(s)}),(0,me.jsx)(kr,{})]})})};return(0,me.jsx)(yr.Z,{...r,mobileActionSheet:!0})}renderMobile(e){const{store:t}=this.stores,s=e===ge.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return(0,me.jsx)(vr.ZP,{popupType:vr.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:s,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:s}=this.props,r=this.styles;return(0,me.jsx)(G.Z,{disabled:s,focused:!1,icon:e(r.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,dateFormat:s,disabled:r,intl:i}=this.props,n=this.styles,o=(0,me.jsxs)("div",{style:n.summary,children:[(0,B.C)(n.iconActiveMobile),g._Q(t,i,s)]});return(0,me.jsx)(Fe.Z,{disabled:r,onClick:this.handleOriginActivate,onClickClear:this.handleClear,label:e,title:o})}getCurrentValue(){const{store:e}=this.stores,{dateFilterType:t,temporaryDateRange:s}=e.state;return{...C.ZP.state.query.filters[t],...s}}}Cr.displayName="SearchGenericDateFilter";const Mr=(0,N.injectIntl)(Cr);function jr(e,t){C.ZP.updateFilters({[e]:t})}function wr(e){return{lastEditedTime:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.lastEdited",defaultMessage:"Last edited"}),createdTime:(0,me.jsx)(N.FormattedMessage,{id:"search.filterMenu.moreFilters.created",defaultMessage:"Created"})}[e]}function Ir(e){const{device:t}=e;return t.isMobile?vr.ZP.PopupType.SlideUp:vr.ZP.PopupType.Popup}function kr(){window.__c={n:"OperatorChevron"};const e=(0,i.O7)(),{device:t}=e;return(0,Oe.i)({width:10,height:10,...t.isMobile&&{marginTop:2}})}function Tr(e){const t=C.ZP.state.query.sort,s=ft.find((e=>a.Xy(e.sort,t)))??ft[0],r="relevance"===s.sort.field?(0,me.jsx)(N.FormattedMessage,{id:"search.sort.sortOrder.bestMatches.title",defaultMessage:"Sort"}):s.formattedName;return(0,me.jsx)(Te.Z,{disabled:!1,title:r,onClick:e.onClick,icon:(0,Gt.T)({width:16,marginRight:6,fill:"currentColor"})})}function Pr(){const e=C.ZP.state.query.sort,t=ft.findIndex((t=>a.Xy(t.sort,e))),s=[];for(const r of ft)s.push({key:r.key,render:e=>(0,me.jsx)(G.Z,{...e,title:r.formattedName}),action:()=>{C.ZP.setState({...C.ZP.state,query:{...C.ZP.state.query,sort:r.sort}})}});return(0,me.jsx)(w.Z,{menuType:h.og.Popup,children:(0,me.jsx)(Le.Z,{type:Le.i.Vertical,initialFocus:t<0?0:t,sections:[{key:"sortOptions",items:s,render:e=>(0,me.jsx)(ee.Z,{...e,disableDesktopPadding:!0})}]})})}const Fr=function(e){window.__c={n:"SearchSortButton"};const t=(0,o.yK)((()=>({popup:{paddingTop:12,paddingBottom:8}})),[]);return(0,me.jsx)(X.ZP,{popupType:X.Z4.Popup,renderOrigin:Tr,render:Pr,disabled:!1,placementToOrigin:vr.ZP.Placement.Bottom,alignmentToOrigin:vr.ZP.Alignment.Start,style:t.popup,onClick:e.onMenuOpen,onClose:e.onMenuDismiss})},Rr="SearchFilterSettings";function Zr(e){window.__c={n:"SearchFilterBar"};const{isMobile:t}=e,{parentStore:s}=(0,r.useContext)(P.SearchStoresContext),{handlePopupOpen:l,handlePopupClose:d}=(0,r.useContext)(P.SearchStaticContext),c=(0,i.O7)(),u=(0,n.VK)((()=>c.currentUser.id),[c]),h=(0,n.VK)((()=>C.ZP),[]),p=(0,n.Kw)(h),g=p.query.filters,m=(0,n.VK)((()=>b.default.state.isPublicPageSearch),[]),f=(0,n.VK)((()=>(0,z.bq)()&&U.default.checkGate("enable_search_team_filter")&&!m),[m]),v=(0,n.VK)((()=>!m),[m]),y=!1,x=(0,o.yK)((e=>({scroller:{display:"flex",alignItems:"center",paddingTop:10,paddingRight:12,paddingBottom:10,paddingLeft:12},barContainer:{display:"flex",alignItems:"center"},scrollerContainer:{position:"relative",flexGrow:0,overflow:"hidden"},draggableList:{display:"flex",flexShrink:0,marginLeft:6},divider:{height:16,width:1,borderRadius:1,backgroundColor:e.stroke.deemphasized}})),[]),S=(0,r.useCallback)((e=>t=>h.updateFilters({[e]:t})),[h]),M=(0,r.useCallback)((e=>{const{onMenuDismiss:t,onMenuOpen:r}=e;if(v)return(0,me.jsx)(xe.Z,{mode:ge.z.Pill,focused:!1,title:(0,me.jsx)(dr,{filterUIName:"personFilter"}),parentStore:s,userIds:g.createdBy,onMenuDismiss:t,onMenuOpen:r,onChange:S("createdBy")})}),[v,s,g.createdBy,S]),j=(0,r.useCallback)((e=>{const{onMenuDismiss:t,onMenuOpen:r}=e;return f&&(0,me.jsx)(ke,{mode:ge.z.Pill,focused:!1,title:(0,me.jsx)(dr,{filterUIName:"teamsFilter"}),parentStore:s,teamIds:g.inTeams,onMenuDismiss:t,onMenuOpen:r,onChange:S("inTeams")})}),[s,g.inTeams,S,f]),w=(0,r.useCallback)((e=>{const{onMenuDismiss:t,onMenuOpen:r}=e;return(0,me.jsx)(ye,{mode:ge.z.Pill,focused:!1,title:(0,me.jsx)(dr,{filterUIName:"pageFilter"}),parentStore:s,blockIds:g.ancestors,onMenuDismiss:t,onMenuOpen:r,onChange:S("ancestors")})}),[s,g.ancestors,S]),I=(0,r.useCallback)((()=>null),[s,g.dev_excludedPages,S,y]),k=(0,r.useCallback)((()=>null),[s,g.dev_excludedTeams,S,y]),T=(0,r.useCallback)((e=>{const{onMenuDismiss:t,onMenuOpen:s}=e;return(0,me.jsx)(Mr,{mode:ge.z.Pill,focused:!1,title:(0,me.jsx)(dr,{filterUIName:"dateFilter"}),icon:B.C,value:g.lastEditedTime,onMenuDismiss:t,onMenuOpen:s})}),[g.lastEditedTime]),F=(0,r.useCallback)((()=>!t&&(0,me.jsx)(Be,{mode:ge.z.Pill,focused:!1,title:(0,me.jsx)(dr,{filterUIName:"titleToggle"}),icon:tr.V,value:g.navigableBlockContentOnly||!1,onChange:S("navigableBlockContentOnly")})),[g.navigableBlockContentOnly,S,t]);(0,r.useEffect)((()=>{const e=sr.Z.get({userId:u,key:Rr});e&&a.Xy(new Set(e.filterOrder),new Set(p.filterBar.order))&&!a.Xy(e.filterOrder,p.filterBar.order)&&e.filterOrder&&h.updateFilterOrder(e.filterOrder)}),[p.filterBar.order,u,h]);const R={onMenuOpen:l,onMenuDismiss:d},Z={titleToggle:F(),personFilter:M(R),teamsFilter:j(R),pageFilter:w(R),dateFilter:T(R),dev_notInPageFilter:I(),dev_notInTeamFilter:k()};const A=(0,r.useCallback)((e=>{const{onMenuDismiss:t,onMenuOpen:s}=e;return(0,me.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,me.jsx)(Fr,{onMenuOpen:s,onMenuDismiss:t}),(0,me.jsx)("div",{style:x.divider})]})}),[x.divider]);return(0,me.jsx)("div",{style:x.barContainer,children:(0,me.jsx)("div",{style:x.scrollerContainer,children:(0,me.jsxs)(nr.Z,{type:rr.Z.X,style:x.scroller,showLeftRightOverlay:!1,children:[(0,me.jsx)(me.Fragment,{children:A(R)}),(0,me.jsx)(me.Fragment,{children:(0,me.jsx)(ir.ZP,{direction:"horizontal",keys:p.filterBar.order,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,renderKey:e=>Z[e],style:x.draggableList,onDrop:e=>function(e){const t={filterOrder:e};sr.Z.set({userId:u,key:Rr,value:t}),h.updateFilterOrder(e)}(e)})})]})})})}var Br=s(68785),Ar=s(33411),Or=s(25904),Lr=s(1800),Dr=s(54642),_r=s(47307),Vr=s(64964),Er=s(31194),qr=s(1310),Nr=s(16354),Hr=s(43765),Wr=s(92660);const zr=(0,N.defineMessages)({additionalInformationPlaceholder:{id:"SearchBadResultsForm.additionalInformation.placeholder",defaultMessage:"Any additional comments or context (e.g. ...)"},urlPlaceholder:{id:"SearchBadResultsForm.url.placeholder",defaultMessage:"Link to page you were looking for"}}),Kr=e=>{window.__c={n:"SearchResultPicker"};const t=(0,o.Fg)(),s=(0,n.qz)(void 0,K.Z);return(0,me.jsx)(X.ZP,{popupType:X.Z4.Popup,buttonPopupStore:s,renderOrigin:e=>(0,me.jsx)(me.Fragment,{children:(0,me.jsxs)(Y.Z,{style:{width:"100%"},...e,children:[(0,me.jsx)(Hr.Z,{title:"Select Result"}),(0,Oe.i)({width:10,marginLeft:4,fill:t.lightIconColor})]})}),placementToOrigin:Er.Iw.Bottom,alignmentToOrigin:Er.lU.Start,render:t=>{var s;const r=[{key:"results",render:e=>(0,me.jsx)(ee.Z,{...e,topBorder:0!==e.index}),items:(null===(s=e.results)||void 0===s?void 0:s.map((s=>({key:s.id,render:e=>(0,me.jsx)(ce.Z,{store:s.store,checkState:!1,hidePath:!0,...e}),action:()=>{e.onSelect(s),t.close()}}))))||[]}],i={menuType:h.og.Popup,width:240};return(0,me.jsx)(w.Z,{...i,children:(0,me.jsx)(Le.Z,{type:Le.i.Vertical,initialFocus:void 0,sections:r})})}})};function Ur(){Or.Z.reset()}const $r=e=>{var t;let{searchStoreState:s,currentSpaceStore:r,serverResults:i,localResults:n,environment:o,experiments:a}=e;const l=Or.Z.getState(),d=g.AX(i),c=g.AX(n),u={query:s.query,limit:s.limit,debug:"everything"},{publicAccessPermissionAncestorBlockId:h}=g.bC(o),p=g.gC({input:u,spaceId:null==r?void 0:r.id,publicAccessPermissionAncestorBlockId:h,source:"report_bad_search"});if(!p)return;const m=null===(t=document.getElementsByClassName("search-results-list")[0])||void 0===t?void 0:t.outerHTML,f="on"===(null==a?void 0:a["vector-search-vanilla-ltr"])||d.some((e=>e.sources.includes(Ce.vp.VectorDBBlock)||e.sources.includes(Ce.vp.VectorDBCollection)));f&&d.splice(0,-20);const v={queryText:s.query.text.trim(),apiRequest:p,serverResults:JSON.stringify(d,null,2),localResults:JSON.stringify(c,null,2),desiredUrl:l.desiredUrl,additionalInformation:l.additionalInformation,renderedHtml:m,experiments:JSON.stringify(a??{},null,2),isVectorSearchEnabled:f};Dr.reportBadSearch(o,v).then((e=>{if("failed"===e.type)_r.showErrorMessage((0,me.jsx)("h1",{children:"Failed to submit report"}));else{const{url:t}=e.data;Vr.oV({label:(0,me.jsx)("div",{children:(0,me.jsx)(Nr.Z,{href:t,children:"Your report has been submitted, thanks!"})}),durationMs:qr.JY})}})),Or.Z.reset()},Qr=function(e){window.__c={n:"ReportBadSearchForm"};const{serverResults:t,localResults:s,experiments:a}=e,l=(0,o.yK)((e=>({textArea:{width:"100%",background:e.popoverBackground,display:"block",marginTop:17,marginBottom:17},urlArea:{width:"100%",height:"50%",background:e.popoverBackground,display:"block",marginTop:17,marginBottom:17},modalWrap:{width:360,padding:24,fontSize:14},modalTitle:{fontSize:16,marginBottom:12,fontWeight:q.Z.fontWeight.medium},buttonArea:{display:"flex",justifyContent:"flex-end",marginTop:18},outlineButton:{marginRight:12}})),[]),[d]=(0,r.useState)(C.ZP),c=(0,n.VK)((()=>v.default.state.currentSpaceStore),[]),[u,h]=(0,n.AF)(Or.Z),p=(0,i.O7)(),m=(0,r.useCallback)((e=>{h({...u,desiredUrl:e?(0,Lr.Z)({pageId:e.store.id,pageModel:e.store.getModel(),baseUrl:H.default.domainBaseUrl,pageVisitSource:void 0}):void 0})}),[u,h]),f=(0,r.useCallback)((()=>{$r({searchStoreState:d.state,currentSpaceStore:c,serverResults:t,localResults:s,experiments:a,environment:p})}),[d,c,t,s,a,p]);return(0,me.jsx)(Wr.Z,{onDismiss:Ur,render:()=>(0,me.jsx)(M.Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!1,render:e=>(0,me.jsxs)("div",{style:l.modalWrap,...e,children:[(0,me.jsx)("div",{style:l.modalTitle,children:(0,me.jsx)(N.FormattedMessage,{id:"SearchBadResultsForm.title",defaultMessage:"Report Bad Search"})}),(0,me.jsx)(Xe.Z,{textarea:!0,style:l.textArea,placeholder:oe.default.formatMessage(zr.additionalInformationPlaceholder),value:u.additionalInformation,onChange:e=>{h({...u,additionalInformation:e.target.value})},focusInitial:!0}),(0,me.jsx)(Kr,{results:g.oO({localResults:s,serverResults:t}),onSelect:m}),(0,me.jsx)(Xe.Z,{textarea:!0,style:l.urlArea,placeholder:oe.default.formatMessage(zr.urlPlaceholder),value:u.desiredUrl,onChange:e=>{h({...u,desiredUrl:e.target.value})}}),(0,me.jsxs)("div",{style:l.buttonArea,children:[(0,me.jsx)(_t.Z,{isLarge:!0,onClick:Ur,style:l.outlineButton,children:(0,me.jsx)(N.FormattedMessage,{id:"SearchBadResultsForm.cancelButton.label",defaultMessage:"Cancel"})}),(0,me.jsx)(_t.Z,{isRed:!0,isLarge:!0,onClick:f,disabledFeedback:!0,children:(0,me.jsx)(N.FormattedMessage,{id:"SearchBadResultsForm.reportButton.label",defaultMessage:"Submit"})})]})]})}),requireOnline:!0,modalStore:Or.Z})};function Gr(e){window.__c={n:"ReportBadSearchButton"};const[t,s]=(0,n.AF)(Or.Z),r=(0,o.yK)((t=>({button:{...Ut(t),...e.buttonStyles}})),[e.buttonStyles]);return(0,me.jsxs)(_t.Z,{style:r.button,onClick:()=>{s({...t,open:!0})},children:[(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Report bad search",id:"search.header.badSearch.button.label"}),(0,me.jsx)(Qr,{...e})]})}class Xr extends F.Z{constructor(){super(...arguments),this.storeTypes={requestModalOpen:ls.default.createClass(!1),responseModalOpen:ls.default.createClass(!1)},this.styles={footer:()=>{const{device:e}=this.environment;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:e.isMobile?q.Z.fontSize.UIRegular.mobile:q.Z.fontSize.UIRegular.desktop}},footerText:{fontSize:zt.yv(this.environment,"UISmall"),...q.Z.textOverflowStyle},inlineHint:{display:"inline",marginRight:16},resultCountWrapper:{display:"flex",alignItems:"center",...q.Z.textOverflowStyle},resultCount:{fontWeight:q.Z.fontWeight.medium},resultText:{verticalAlign:"middle",marginRight:6},spinner:{display:"inline",width:12,height:12,verticalAlign:"middle"},keyboardShortcut:{marginRight:4,marginBottom:1,fontVariant:"all-small-caps",fontSize:1.1*zt.yv(this.environment,"UISmall")},commandGlyph:{fontSize:.75*zt.yv(this.environment,"UIRegular")},footerDebugButton:Ut(this.theme),debugModalStyle:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},navigationHints:{marginLeft:15}}}renderComponent(){var e;const{localResults:t,serverResults:s}=this.props.searchResultStore.state,{shouldShow:r}=this.props;if(!r)return;const i=this.styles,n=this.getThemeColors(),o={...i.resultCount,...n.resultCount},{count:a,isLowerBound:l}=this.props.searchResultStore.getResultCount(),d=(0,me.jsx)("span",{style:i.resultText,children:l?this.props.intl.formatMessage({id:"SearchResultsFooter.helpText.resultCountApproximate",defaultMessage:"{resultCount, plural, other {<resultwrapper>{resultCount}+</resultwrapper> results}}"},{resultCount:a,resultwrapper:e=>(0,me.jsx)("span",{style:o,children:e})}):this.props.intl.formatMessage({id:"SearchResultsFooter.helpText.resultCount",defaultMessage:"{resultCount, plural, one {<resultwrapper>{resultCount}</resultwrapper> result} other {<resultwrapper>{resultCount}</resultwrapper> results}}"},{resultCount:a,resultwrapper:e=>(0,me.jsx)("span",{style:o,children:e})})}),c=(0,p.rd)(this.environment),u=(0,p.XP)()||c,h=u?(0,me.jsx)(is,{}):(0,me.jsxs)("div",{style:i.resultCountWrapper,children:[u?void 0:(0,me.jsxs)("div",{children:[d,this.renderSpinner(this.props.showSpinner)]}),(0,me.jsx)("div",{style:i.navigationHints,children:(0,me.jsx)(is,{})})]}),g=!c&&!1;return(0,me.jsx)($t,{title:h,right:(0,me.jsxs)(me.Fragment,{children:[g&&(0,me.jsx)(Gr,{experiments:null==s||null===(e=s.serverEventProperties)||void 0===e?void 0:e["server-searchExperiments"],localResults:null==t?void 0:t.results,serverResults:null==s?void 0:s.results}),this.renderSearchDebugButtons()]})})}renderSpinner(e){const t=this.styles;return(0,me.jsx)(Ar.Z,{show:e,showDelay:500,showHold:200,render:e=>e&&(0,me.jsx)(Br.Z,{style:t.spinner})})}renderSearchDebugButtons(){var e;if(!S.ZP.state.debug&&!S.ZP.state.showDebugInfo)return;const{rawRequests:t,rawResponses:s}=(null===(e=this.props.searchResultStore.state.serverResults)||void 0===e||null===(e=e.debugInfo)||void 0===e?void 0:e.response)||{};return(0,me.jsxs)(me.Fragment,{children:[t&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ks.Z,{open:this.stores.requestModalOpen.state,innerStyle:this.styles.debugModalStyle,onDismiss:()=>{this.stores.requestModalOpen.setState(!1)},render:()=>(0,me.jsx)(It.LazyAdminReactJson,{showCopyButton:"large",defaultCollapsed:!1,data:t})}),(0,me.jsx)(_t.Z,{style:this.styles.footerDebugButton,onClick:()=>this.stores.requestModalOpen.setState(!0),children:"Open Request"})]}),s&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ks.Z,{open:this.stores.responseModalOpen.state,innerStyle:this.styles.debugModalStyle,onDismiss:()=>{this.stores.responseModalOpen.setState(!1)},render:()=>(0,me.jsx)(It.LazyAdminReactJson,{showCopyButton:"large",data:{rawResponses:s},defaultCollapsed:!1})}),(0,me.jsx)(_t.Z,{style:this.styles.footerDebugButton,onClick:()=>this.stores.responseModalOpen.setState(!0),children:"Open Response"})]})]})}getThemeColors(){return{footerText:{color:this.theme.lightTextColor},resultCount:{color:this.theme.mediumTextColor},keyboardShortcut:{color:this.theme.mediumTextColor}}}}Xr.displayName="SearchResultsFooter";const Jr=(0,N.injectIntl)(Xr);var Yr=s(73935),ei=s(36896),ti=s(44604),si=s(36596),ri=s(39634);class ii extends F.Z{constructor(){super(...arguments),this.styles={menuItem:{minHeight:void 0,...this.environment.device.isMobile&&{background:void 0,boxShadow:void 0},paddingTop:32,paddingBottom:32},text:{textAlign:"center"},title:{margin:0,fontWeight:q.Z.fontWeight.medium,fontSize:zt.yv(this.environment,"UIRegular"),lineHeight:zt.Dp(this.environment,"UIRegular")},caption:{fontSize:zt.yv(this.environment,"UIRegular")}}}renderComponent(){const{style:e,captionStyle:t,...s}=this.props,r={...this.styles.menuItem,...e},i={...this.styles.caption,...t};return(0,me.jsx)(ct.Z,{...s,title:this.renderTitle(),caption:this.renderCaption(i),textWrapperStyle:this.styles.text,style:r,captionStyle:i})}renderTitle(){const{title:e}=this.props;if(!e)return;const t=this.styles,s=this.getThemeColors(),r={...t.title,...s.title};return(0,me.jsx)("h4",{role:"alert",style:r,children:e})}renderCaption(e){const{caption:t}=this.props;if(!t)return;const s={...e,...this.getThemeColors().caption};return(0,me.jsx)("div",{style:s,children:t})}getThemeColors(){return{title:{color:this.theme.mediumTextColor},caption:{color:this.theme.lightTextColor}}}}ii.displayName="ErrorMenuItem",ii.contextTypes={...h.mw,...F.w};const ni=ii,oi=(0,me.jsx)(N.FormattedMessage,{defaultMessage:"No results",id:"searchErrorMenuItem.error.noResults"});const ai=function(e){window.__c={n:"SearchErrorMenuItem"};const t=(0,o.yK)((e=>({menuItem:{marginTop:"auto",marginBottom:"auto"},caption:{marginTop:"auto"},reportProblemButton:{display:"inline",color:e.blueColor},searchDeletedButton:{display:"inline",lineHeight:"25px",color:e.blueColor}})),[]),s=(0,i.O7)(),{isQuickSearch:a}=(0,r.useContext)(P.SearchStaticContext),l=()=>{ri.j({environment:s,from:"quick_find"})};function d(s){const r=function(s){if(s)return;const r=g.FN(c);if(!g.VD.isDeletedOnly(c.isDeletedOnly))return(0,me.jsx)(N.FormattedMessage,{id:"searchErrorMenuItem.errorPrompt.searchDeleted",defaultMessage:"Some results may be in your deleted pages.{br}<searchdeleted>Search deleted pages</searchdeleted>",values:{searchdeleted:s=>(0,me.jsx)(Nr.Z,{onClick:e.handleSearchDeletedOnly,style:t.searchDeletedButton,children:s}),br:(0,me.jsx)("br",{})}});return r?(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Try different search terms or filters",id:"searchErrorMenuItem.errorPrompt.searchTermsAndFilters"}):(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Try different search terms",id:"searchErrorMenuItem.errorPrompt.searchTerms"})}(s);return{title:oi,caption:r}}const c=(0,n.VK)((()=>C.ZP.state.query.filters),[]);return(0,me.jsx)(ni,{...function(s){const r=e.error;switch(r.type){case Ce.Ix.NoResults.type:return d(s);case Ce.Ix.Offline.type:return function(){const e=(0,me.jsx)(N.FormattedMessage,{defaultMessage:"Go online for more results.",id:"searchErrorMenuItem.errorPrompt.goOnline"});return{title:oi,caption:e}}();case Ce.Ix.RequestFailed.type:return{title:(0,me.jsx)(N.FormattedMessage,{id:"searchErrorMenuItem.error.genericErrorMessage",defaultMessage:"Something went wrong"}),caption:(0,me.jsx)(N.FormattedMessage,{id:"searchErrorMenuItem.errorPrompt.refreshOrReport",defaultMessage:"Try refreshing or <reportlink>report a problem</reportlink>.",values:{reportlink:e=>(0,me.jsx)(Nr.Z,{onClick:l,style:t.reportProblemButton,children:e})}})};default:(0,E.t1)(r)}}(a??!1),style:t.menuItem,captionStyle:t.caption,shouldWrapCaption:!0})};const li=8;function di(e){window.__c={n:"SearchResultShimmers"};const{numberOfShimmerResults:t,assistantActionsEnabled:s}=e,r=t===li&&s,i=(0,o.yK)((e=>({container:{margin:(r?"0px":"8px")+" 10px 6px 10px",display:"flex",flexDirection:"column",gap:10},icon:{width:20,height:20,borderRadius:5,marginLeft:6},titleAndPath:{width:"100%",display:"flex",flexDirection:"column",gap:5},title:{height:18,borderRadius:5},path:{height:12,borderRadius:5},resultContainer:{display:"flex",gap:10,boxShadow:`0 1px 0 ${e.lightDividerColor}`,paddingBottom:10},sectionHeader:{marginBottom:7,marginTop:8}})),[r]),n=Array.from({length:t},(()=>!0));return(0,me.jsxs)("div",{children:[r&&(0,me.jsx)(ee.Z,{desktopTitleStyle:i.sectionHeader,title:(0,me.jsx)(N.FormattedMessage,{id:"search.searchResultsShimmer.bestMatches.text",defaultMessage:"Best matches"})}),(0,me.jsx)("div",{style:i.container,children:n.map(((e,t)=>(0,me.jsxs)("div",{style:{...i.resultContainer,...t===n.length-1&&{boxShadow:"none"}},children:[(0,me.jsx)(si.Z,{style:i.icon}),(0,me.jsxs)("div",{style:i.titleAndPath,children:[(0,me.jsx)(si.Z,{style:{...i.title,width:a.UP(["30%","45%","55%","60%","70%","75%","80%","90%"])}}),(0,me.jsx)(si.Z,{style:{...i.path,width:a.UP(["10%","15%","20%","25%","30%","35%","55%","70%"])}})]})]},`shimmer-item-${t}`)))})]})}const ci=r.memo(di);function ui(e,t,s){if(!t.isLoading)return t.showMajorError?(0,me.jsx)(ai,{error:t.serverError,handleSearchDeletedOnly:()=>{const t=C.ZP.state.query.text;Ct.IB(e),ei.Z.setState({...ei.Z.state,open:!0}),ti.Z.setState({...ti.Z.state,currentTab:"all_pages",filter:t,limit:ti.Z.startLimit})}}):t.serverError&&t.serverError!==Ce.Ix.NoResults?function(e,t){return(0,me.jsx)(ee.Z,{disableMobilePadding:!0,disableMobileBorders:!0,children:(0,me.jsx)(Hr.Z,{title:e,style:t})})}(t.serverError.message,s):void 0}function hi(e,t){return(0,me.jsx)(ee.Z,{disableMobilePadding:!0,disableMobileBorders:!0,topBorder:!1,style:{marginTop:0,paddingTop:0},children:(0,me.jsx)(ct.Z,{body:e,bodyStyle:t})})}const pi=(0,N.injectIntl)((function(e){var t,s,l,d,c,h;window.__c={n:"SearchResultsMenuList"};const[m,f]=(0,r.useState)(!1),v=(0,i.Fy)().isMobile,y=(0,o.yK)((e=>({results:{flex:1,display:"flex",flexDirection:"column",overflow:"auto",height:"100%"},messageMenuItem:{...v&&{background:void 0,boxShadow:void 0}},debugMessageMenuItemTextStyle:{whiteSpace:"pre-wrap",fontFamily:"monospace",marginTop:0},actionMenuItemTitle:{fontWeight:q.Z.fontWeight.medium,lineHeight:"20px",fontSize:15,color:e.mediumTextColor,textOverflow:"ellipsis",overflow:"hidden",display:"block"},menuListContainer:{display:"flex",flexDirection:"column",gap:12,marginTop:v?13:void 0,marginBottom:4}})),[v]),{searchResultStore:x,localResults:b,serverResults:M,resultListStore:j,searchExperimentOverrides:w,intl:I,showActions:k,extraTopPadding:T}=e,F=e.errorState,R=(0,n.VK)((()=>C.ZP.state.query.text),[]),{globalFocusedIndex:Z}=(0,r.useContext)(P.SearchStaticContext),B=(0,n.VK)((()=>Z.state),[Z]),A=(0,n.VK)((()=>k.length),[k]),O=A>0?{key:"actions",render:e=>(0,me.jsx)(ee.Z,{...e,shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,extraTopPadding:T,title:(0,me.jsx)(N.FormattedMessage,{id:"search.searchActions.actions.text",defaultMessage:"Actions"})}),items:a.oA(k.map(((e,t)=>function(e){const{type:t,title:s,icon:r,action:i,shouldShowArrowUp:n}=e;return{key:`actionMenuItem.${t}`,action:i,render:e=>(0,me.jsx)(Ht,{type:t,...e,title:s,icon:r,shouldShowArrowUp:n})}}({...e,title:e.renderTitle(R,I,y.actionMenuItemTitle),shouldShowArrowUp:void 0!==e.shouldShowArrowUp&&e.shouldShowArrowUp({currentGlobalFocusedIndex:B,actionItemCount:A})}))))}:void 0,L=(0,n.VK)((()=>(0,p.XP)()),[]),D=(0,g.IV)({intentBasedGrouping:L,localResults:b,serverResults:M}),{allSearchResults:_}=D,V=(0,r.useCallback)((t=>{const{results:s,sectionTitle:i,compact:n,rendersTimeSinceLastViewedMs:o}=t,{id:l,title:d}=function(e){if(!e)return{id:"allSearchResults",title:void 0};switch(e.type){case"unique-id":return{id:"uniqueIdSearchResults",title:(0,me.jsx)(N.FormattedMessage,{id:"search.searchResultBuckets.uniqueID.text",defaultMessage:"ID matches"})};case"jump-back-in":return{id:"jumpBackInSearchResults",title:(0,me.jsx)(N.FormattedMessage,{id:"search.searchResultBuckets.topResults.text",defaultMessage:"Top results"})};case"server":return{id:"serverOnlySearchResults",title:(0,me.jsx)(N.FormattedMessage,{id:"search.searchResultBuckets.server.text",defaultMessage:"{count}{maybeLowerBoundSign} results",values:{count:e.values.count,maybeLowerBoundSign:e.values.isLowerBound?"+":""}})};case"main":return{id:"mainSearchResults",title:(0,me.jsx)(N.FormattedMessage,{id:"search.searchResultBuckets.bestMatches.text",defaultMessage:"Best matches"})};default:(0,E.t1)(e)}}(i);return s.length>0?{key:l,render:e=>(0,me.jsx)(ee.Z,{...e,shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:d}),items:a.oA(s.map(((t,s)=>{var i,a;return function(e){var t;const{selectedResult:s,index:i,globalIndexOffset:n,sectionName:o,allSearchResults:a,props:l,compact:d,timeSinceLastViewedMs:c}=e,{store:h}=s,p=h.isNavigableBlock()?h:h.getNavigableBlockStore();if(!p)return;const g=r.createRef(),m=Boolean(S.ZP.getDebugLevel()),f=m&&s.sources.includes(Ce.vp.Local)?{score:s.score,frecencyScore:s.frecencyScore,localSource:s.localSource,personalizationBoost:s.personalizationBoost,id:s.id}:void 0,v=m&&(s.sources.includes(Ce.vp.ElasticSearch)||s.sources.includes(Ce.vp.VectorDBBlock)||s.sources.includes(Ce.vp.VectorDBCollection))?null===(t=l.debugInfo)||void 0===t||null===(t=t.response)||void 0===t?void 0:t.resultsDebugMap[h.id]:void 0,y=l.clusterInfo,x=Date.now();return{key:`${h.id}:${i}`,action:e=>{const{event:t}=e;function r(e){const s=Yr.findDOMNode(e.current);return Boolean(s&&"target"in t&&t.target&&(s===t.target||s.contains(t.target)))}g.current&&r(g)||l.handleSelectResult({action:{...e,index:e.index+(n??0)},selectedResult:s,sectionName:o,allSearchResults:a})},render:e=>{var t;return(0,me.jsx)(Hs,{...e,index:i,originalPosition:s.originalPosition,isFirstInSection:0===i,store:p,hidePath:!1,result:s,className:u.ulv,debugLocal:f,debugHits:v,debugAreaRef:g,clusterInfo:y,inline:d&&!m,inlineCaptionMinWidthPercentage:20,lastViewed:c?x-c:void 0,queryId:null===(t=s.serverEventProperties)||void 0===t?void 0:t["server-queryId"],type:"query_results"})}}}({selectedResult:t,index:s,globalIndexOffset:-((null==O||null===(i=O.items)||void 0===i?void 0:i.length)??0),sectionName:l,allSearchResults:_,props:e,compact:n,timeSinceLastViewedMs:o&&null!==(a=t.localSource)&&void 0!==a&&a.has("recentVisit")?t.timeSinceLastViewedMs:void 0})})))}:void 0}),[null==O||null===(t=O.items)||void 0===t?void 0:t.length,_,e]),H=(0,n.VK)((()=>V({results:"intent-based-grouping"===D.type?D.sections.jumpBackInSearchResults:[],sectionTitle:{type:"jump-back-in"},compact:!0,rendersTimeSinceLastViewedMs:!0})),[V,D.sections,D.type]),W=(0,n.VK)((()=>{const e="intent-based-grouping"===D.type?D.sections.serverOnlySearchResults:[],{count:t,isLowerBound:s}=x.getResultCount();return V({results:e,sectionTitle:{type:"server",values:{count:t,isLowerBound:s}},compact:!1})}),[V,D.sections,D.type,x]),z=(0,n.VK)((()=>V({results:"uniqueIdSearchResults"in D.sections?D.sections.uniqueIdSearchResults:[],sectionTitle:{type:"unique-id"},compact:!1})),[V,D.sections]),K=(0,n.VK)((()=>V({results:"unique-id"===D.type?D.sections.nonUniqueIdSearchResults:"all"===D.type?D.sections.allSearchResults:[],sectionTitle:"unique-id"===D.type||((null==O?void 0:O.items)??[]).length>0?{type:"main"}:void 0,compact:!1})),[null==O?void 0:O.items,V,D.sections,D.type]),U=[O,H,z,W,K].filter(E.$K),$=null===(s=e.debugInfo)||void 0===s||null===(s=s.response)||void 0===s?void 0:s.parsedQueries,Q=null===(l=e.debugInfo)||void 0===l||null===(l=l.response)||void 0===l?void 0:l.detectedLanguages,G=null===(d=e.debugInfo)||void 0===d?void 0:d.traceLogs,X=null===(c=e.debugInfo)||void 0===c||null===(c=c.response)||void 0===c?void 0:c.debugUrls,J=(0,r.useCallback)(((t,s)=>{const{onMaybeLoadMoreResults:r}=e,i=t<=200;i&&!m&&r(),f(i),s.offsetFromTop&&C.ZP.update((e=>({...e,hasScrolled:!0})))}),[m,e]),Y=K||W?(null==O||null===(h=O.items)||void 0===h?void 0:h.length)??0:0,te=(0,n.VK)((()=>kt.Z.showSearchAiFeatures()),[]),se=(0,i.O7)(),re=(0,n.VK)((()=>{const e=void 0===M;if(!(e&&(te||(0,p.rd)(se))))return 0;const t=x.state.serverResultsLoading,s=(null==b?void 0:b.length)??0,r="serverError"in F&&void 0!==F.serverError;return(e&&!t||t)&&!r?li-s:0}),[se,x,null==b?void 0:b.length,M,F,te]);return(0,me.jsx)(P.SearchStaticContext.Consumer,{children:e=>{let{queryResultsSectionRef:t}=e;return(0,me.jsxs)("section",{style:y.results,ref:t,children:[!a.xb(w)&&hi((0,me.jsx)(me.Fragment,{children:(0,me.jsx)(It.LazyAdminReactJson,{data:{searchExperimentOverrides:w},showCopyButton:!1,showModalButton:!1,defaultCollapsed:!1})}),y.debugMessageMenuItemTextStyle),$&&hi((0,me.jsx)(It.LazyAdminReactJson,{data:{parsedQueries:$},customCollapsedRenderers:[vi],showCopyButton:"small",showModalButton:!0,defaultCollapsed:!0}),y.debugMessageMenuItemTextStyle),Q&&hi((0,me.jsx)(It.LazyAdminReactJson,{data:{detectedLanguages:Q},customCollapsedRenderers:[fi]}),y.debugMessageMenuItemTextStyle),G&&hi((0,me.jsx)(It.LazyAdminReactJson,{data:{tracer:{traceLogs:G}},customCollapsedRenderers:[mi],defaultCollapsed:!0}),y.debugMessageMenuItemTextStyle),X&&hi((0,me.jsx)(It.LazyAdminReactJson,{data:{debugUrls:X},defaultCollapsed:!0,customCollapsedRenderers:[xi],showCopyButton:"small",showModalButton:!0,maxLinkValueLength:40}),y.debugMessageMenuItemTextStyle),U&&(0,me.jsx)("div",{className:"search-results-list",children:(0,me.jsx)(Le.Z,{type:Le.i.Vertical,initialFocus:Y,store:j,disableKeyboardArrowWrap:!0,sections:U,style:y.menuListContainer})}),ui(se,F,y.messageMenuItem)||(0,me.jsx)(Bt.Z,{onChange:J}),re>0&&(0,me.jsx)(ci,{numberOfShimmerResults:re,assistantActionsEnabled:te})]})}})}));function gi(e){const t=e.replaceAll(/\(MatchNoDocsQuery\("Matching no documents because no terms present"\)\)\^[0-9\.]/g,"").replaceAll(/MatchNoDocsQuery\("Matching no documents because no terms present"\)/g,"").replaceAll(/ConstantScore\(([^)]+):([^)]+)\)/g,"<i>$1</i>:<b>$2</b>").replace(/function score \(\((.*)\), functions:.*\)/,"$1").replaceAll("( ","(").replaceAll(" )",")").replaceAll("|","| <br/>").replaceAll(/([^( ]+):"([^"]+)"/g,'<i>$1</i>:<b>"$2"</b>').replaceAll(/([^( ]+):([^) ]+)/g,"<i>$1</i>:<b>$2</b>");return(0,me.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})}const mi=e=>{let{data:t,keyPath:s}=e;if("traceLogs"===(null==s?void 0:s[0])&&a.PO(t)&&Array.isArray(t.log)&&t.log.length>0){const{log:e,startTimeMs:s}=t;return{element:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("div",{children:(0,me.jsx)("b",{children:`Trace started at ${s}`})}),e.map(((e,t)=>(0,me.jsxs)("div",{children:[(0,me.jsx)("span",{style:yi,children:`[${e.timestamp-s}ms][${e.callerFileName.split(".")[0]}]`}),(0,me.jsx)("span",{children:`${e.msg}`})]},t)))]}),expanded:!1}}return null},fi=e=>{let{data:t,keyPath:s}=e;return"detectedLanguages"===s.join(".")&&a.PO(t)?{element:(0,me.jsx)(me.Fragment,{children:Object.entries(t).filter((e=>{let[t,s]=e;return Boolean(s)})).map((e=>{let[t]=e;return t})).join(", ")||"None"}),expanded:!1}:null},vi=e=>{var t,s;let{data:r,keyPath:i}=e;const n=r,o=Object.values(n).find((e=>void 0!==e));if(!o)return null;if(!["type","description","time_in_nanos"].every((e=>o[e])))return null;if(1===i.length)return{element:gi(o.description),expanded:!1};let a=o.description??"";return null!==(t=a)&&void 0!==t&&t.includes("permissions.teamIds")&&(a="PermissionsQuery"),null!==(s=a)&&void 0!==s&&s.includes("(_id:[")&&(a="BoostRecentPageIds"),{element:gi(a),expanded:!1}},yi={color:"blue"},xi=e=>{let{data:t}=e;const s=t;if(!s)return null;const r=Object.values(s).find((e=>{let{clusterName:t}=e;return void 0!==t}));if(r){const{clusterName:e}=r;return{element:(0,me.jsx)(me.Fragment,{children:e}),expanded:!1}}return{element:(0,me.jsx)(me.Fragment,{children:"unknown"}),expanded:!1}};const Si=function(e){window.__c={n:"SearchResultsBody"};const{searchResultStore:t,sxsMode:s,searchDebugColumnStore:a,extraTopPadding:l}=e,d=(0,i.O7)(),c=(0,i.Fy)(),u=(0,o.yK)((e=>({container:{display:"flex",flexDirection:"column",width:s?"50%":"100%",flex:1,overflow:"hidden"},askAiLabel:{color:e.regularTextColor,fontWeight:q.Z.fontWeight.medium,fontSize:14},askAiQuery:{fontWeight:q.Z.fontWeight.regular},askAiIcon:{fill:e.aiPurpleColor}})),[s]),h=(0,n.qz)(void 0,Ft.Z),m=(0,n.VK)((()=>h.state.focus.indexGlobal),[h]),{handleSelectResult:f,globalFocusedIndex:v,searchActionItemsStore:y,isQuickSearch:x}=(0,r.useContext)(P.SearchStaticContext),{localResults:b,serverResults:M,clusterInfo:j,debugInfo:w,serverResultsLoading:I,searchExperimentOverrides:k,hasPublicAccessPermission:T,errorState:F,serverResultsAllLoaded:R}=(0,n.VK)((()=>{var e,s;const{hasPublicAccessPermission:r}=g.bC(d);return{localResults:t.state.localResults,serverResults:t.state.serverResults,serverResultsLoading:t.state.serverResultsLoading,clusterInfo:null===(e=t.state.serverResults)||void 0===e?void 0:e.clusterInfo,debugInfo:null===(s=t.state.serverResults)||void 0===s?void 0:s.debugInfo,searchExperimentOverrides:a.state.searchExperimentOverrides,hasPublicAccessPermission:r,errorState:t.state.errorState,serverResultsAllLoaded:t.state.serverResultsAllLoaded}}),[t,a,d]),Z=!1===F.isLoading&&F.showMajorError,B=Boolean(b||M),A=(0,r.useCallback)((()=>{!I&&!R&&void 0!==M&&C.ZP.update((e=>({...e,limit:e.limit+C.Xv,isScrolled:!0,source:"quick_find_scroll"})))}),[I,R,M]),O=(0,n.VK)((()=>g.oO({localResults:null==b?void 0:b.results,serverResults:null==M?void 0:M.results})),[b,M]),L=(0,n.VK)((()=>{if(s)return[];return[{type:"assistant",renderTitle:(e,t,s)=>function(e,t){return(0,me.jsx)("div",{className:"notranslate",style:t,children:e})}((0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("span",{children:(0,me.jsx)(N.FormattedMessage,{id:"searchResultsBody.askAiMenuItem.title",defaultMessage:"Ask Notion AI"})}),(0,me.jsx)("span",{style:u.askAiQuery,children:e?` “${e}”`:""})]}),{...s,...u.askAiLabel}),icon:e=>(0,bt.t)({...e,...u.askAiIcon}),action:()=>{Ct.em({environment:d,shouldResetAssistantStore:C.ZP.state.query.text.length>0||Tt.Z.wasActiveSessionLastOpenedOutsideOfHistorySavedWindow(),isQuickSearch:x})},shouldShow:()=>kt.Z.shouldShowSearchMenuItemAskAI(c),shouldShowArrowUp:e=>{let{currentGlobalFocusedIndex:t,actionItemCount:s}=e;return void 0!==t&&t===s}}].filter((e=>e.shouldShow(d)))}),[x,d,u,s,c],{useDeepEqual:!0}),D=(0,n.VK)((()=>{if(s)return 0;{const e=L.map((e=>({type:e.type})));return y.update((t=>e)),y.state.length}}),[s,L,y]);(0,n.VK)((()=>{const e=t.state.insertedActionResultsCount,s=D;e!==s&&t.update((e=>({...e,insertedActionResultsCount:s})))}),[t,D]);const _=(0,r.useCallback)((()=>h.update((e=>e.focus.isInitialized&&0===e.focus.section&&0===e.focus.indexLocal&&0===e.focus.indexGlobal?e:{...e,focus:L.length>0?{section:1,indexLocal:0,indexGlobal:L.length}:{section:0,indexLocal:0,indexGlobal:0}}))),[h,L]);(0,r.useEffect)((()=>{_()}),[O,_]),(0,r.useEffect)((()=>{v.setState(m)}),[v,m]);const V=(0,n.VK)((()=>{const e=S.ZP.state.showDebugInfo;return!Z&&B&&!c.isMobile&&!(0,p.rd)(d)||e||s}),[c.isMobile,B,Z,s,d]);return(0,me.jsxs)("div",{style:u.container,children:[(0,me.jsx)(pi,{errorState:F,handleSelectResult:f,onMaybeLoadMoreResults:A,resultListStore:h,searchResultStore:t,localResults:null==b?void 0:b.results,serverResults:null==M?void 0:M.results,debugInfo:w,clusterInfo:j,publicAccessPermission:T,searchExperimentOverrides:k,showActions:L,extraTopPadding:l}),(0,me.jsx)(Jr,{searchResultStore:t,showSpinner:I,shouldShow:V})]})};function bi(e){window.__c={n:"SearchNavigationalView"};const{searchContentPaneType:t}=e,{searchFilterMenuRef:s,handleRecentPageSelect:a,searchResultStore:l,secondarySearchResultStore:d}=(0,r.useContext)(P.SearchStaticContext),c=(0,i.Fy)(),{errorState:u,shouldShowSxSView:h}=(0,n.VK)((()=>({shouldShowSxSView:Boolean((0,S.gq)({device:c})&&S.BJ.state.visible),errorState:l.state.errorState})),[l,c]),p=(0,o.yK)((()=>({container:{display:"flex",flexDirection:"column",width:h?"50%":"100%"},sxsContainer:{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden",maxWidth:"100%"}})),[h]),g=!1===u.isLoading&&u.showMajorError,m=(0,n.VK)((()=>C.ZP.state.filterBar.show),[]),f=!c.isMobile&&!m,y={searchResultStore:l,searchDebugColumnStore:S.v_,sxsMode:h,extraTopPadding:f},x=(0,n.VK)((()=>{var e;return null===(e=v.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,me.jsxs)(me.Fragment,{children:[!c.isMobile&&m&&(0,me.jsx)(Zr,{isMobile:c.isMobile}),"search_results"===t?(0,me.jsxs)(me.Fragment,{children:[!g&&c.isMobile&&(0,me.jsx)(rt,{isMobile:!0,mode:Ye.Section,ref:s}),(0,me.jsxs)("div",{style:p.sxsContainer,children:[(0,me.jsx)(Si,{...y}),h&&(0,me.jsx)(Si,{...y,searchResultStore:d,searchDebugColumnStore:S.BJ})]})]}):x?(0,me.jsx)(er,{onSelect:a,spaceId:x,extraTopPadding:f}):null]})}var Ci=s(97439),Mi=s(27714),ji=s(26825),wi=s(37034),Ii=s(10912),ki=s(84076);function Ti(e){window.__c={n:"SearchSidePeekPanelMetadataItem"};const{itemName:t,itemValue:s,associatedUser:r}=e,i=(0,o.yK)((e=>({itemName:{fontSize:12,color:e.lightTextColor},itemValue:{fontSize:12,...r&&{display:"grid",gridTemplateColumns:"1fr auto auto",gap:5,textAlign:"right"}},itemContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:12},metadataActorName:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),[r]),n=r;return(0,me.jsxs)("div",{style:i.itemContainer,children:[(0,me.jsx)("div",{style:i.itemName,children:t}),(0,me.jsxs)("div",{style:i.itemValue,children:[n&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(rs.Z,{delayThreshold:50,placement:rs.Z.Placement.Top,allowHover:!0,renderTooltip:()=>(0,me.jsxs)("div",{style:{display:"flex",gap:5},children:[n.avatar,n.name]}),closeDelay:0,render:e=>(0,me.jsx)("span",{...e,style:i.metadataActorName,children:n.name})}),(0,me.jsx)("span",{children:"·"})]}),(0,me.jsx)("span",{children:s})]})]})}const Pi={createdBy:(0,me.jsx)(N.FormattedMessage,{id:"search.preview.metadata.createdBy",defaultMessage:"Created by"}),created:(0,me.jsx)(N.FormattedMessage,{id:"search.preview.metadata.created",defaultMessage:"Created"}),lastEditedBy:(0,me.jsx)(N.FormattedMessage,{id:"search.preview.metadata.lastEditedBy",defaultMessage:"Last edited by"}),lastEdited:(0,me.jsx)(N.FormattedMessage,{id:"search.preview.metadata.lastEdited",defaultMessage:"Edited"})},Fi={type:"page_content"};function Ri(e){var t;window.__c={n:"SearchSidePeekPanel"};const{selectedResult:s}=e,{type:a,value:l}=s,d="page_result"===a,c=(0,o.yK)((e=>({sidePeekPanel:{width:250,overflowY:"auto",overflowX:"hidden",minHeight:400,borderLeft:`1px solid ${e.lightDividerColor}`,display:"flex",flexDirection:d?"column":"row",justifyContent:d?"space-between":"center",alignItems:d?"normal":"center",zIndex:1},emoji:{width:20},sidePeekContentContainer:{margin:16},report:{fontSize:12,position:"absolute",bottom:0,right:0,margin:16,display:"flex",gap:10},sidePeekActionContainer:{margin:16},pageIconAndTitleContainer:{marginTop:12,display:"flex",gap:8,flexDirection:"column",justifyContent:"space-between"},title:{fontSize:16,fontWeight:q.Z.fontWeight.semibold,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},untitledPageColor:{color:e.text.tertiary},titleAndLinkContainer:{display:"grid",gridTemplateColumns:"1fr auto",width:"fit-content",gap:5},previewContainer:{marginTop:8,marginBottom:8,display:"flex",flexDirection:"column",position:"relative"},hoveredOrPressedPreview:{background:"unset",boxShadow:"unset"},preview:{borderRadius:6,background:"unset",boxShadow:"unset",border:`1px solid ${e.lightDividerColor}`,padding:12},contentCover:{color:e.text.primary,fontSize:11,lineHeight:1.5,marginBottom:0,width:"110%",transform:"translateX(-12px) translateY(-4px) scale(0.91)",padding:12,borderRadius:6,border:`1px solid ${e.lightDividerColor}`,background:"transparent"},contentCoverFade:{height:48,background:`linear-gradient(to bottom, transparent, ${"light"===e.mode?e.contentBackground:e.sidebarBackground} 100%)`},metadataContainer:{marginTop:8,display:"flex",flexDirection:"column",gap:8},action:{borderRadius:4,background:"unset",fontSize:12,display:"flex"},metadataActorWrapper:{overflow:"hidden"},metadataActorAvatar:{marginRight:5},doubleChevronIcon:{color:e.accentColors.gray[400],cursor:"pointer",width:"max-content"},debugGearIcon:{color:e.accentColors.gray[400]},hoveredDebugGearIcon:{color:e.accentColors.gray[600]}})),[d]),u=(0,n.VK)((()=>c.sidePeekPanel),[c.sidePeekPanel]),h=(0,i.O7)(),p=(0,N.useIntl)(),g=(0,n.VK)((()=>{if("page_result"!==a)return;const e=(0,wi.V)(l,p,h);return e&&e.trim().length>0?e:void 0}),[p,h,a,l]),m=(0,n.VK)((()=>v.default.state.currentSpaceStore?(0,wt.jv)(v.default.state.currentSpaceStore):[]),[]),f=(0,r.useCallback)((e=>{const{id:t,spaceStore:s,table:r,showAvatar:i}=e;if(void 0===t||void 0===r)return;const n=(0,Ls.Hl)({pointer:{id:t,spaceId:s.id,table:r},getRecordModel:s.getRecordModel}).asActor;return void 0!==n&&(0,ji.GU)({spacePermissions:m,userId:n.id})?{name:(0,Ls.$4)(p,n),avatar:i?(0,Vs.a)({actor:n,size:18,style:c.metadataActorAvatar}):void 0}:void 0}),[p,m,c.metadataActorAvatar]),y=(0,r.useCallback)((e=>(0,bs.IS)(e,{useUltraCompactFormat:!0,useWeeks:!0,useLowercase:!0})),[]),{createdBy:x,created:S,lastEditedBy:b,lastEdited:M}=(0,n.VK)((()=>{const e=v.default.state.currentSpaceStore;return void 0===e||"page_result"!==a?{createdBy:void 0,created:void 0,lastEditedBy:void 0,lastEdited:void 0}:{createdBy:f({id:l.getCreatedById(),table:l.getCreatedByTable(),spaceStore:e,showAvatar:!0}),created:y(l.getCreatedTime()),lastEditedBy:f({id:l.getLastEditedById(),table:l.getLastEditedByTable(),spaceStore:e,showAvatar:!0}),lastEdited:y(l.getLastEditedTime())}}),[y,f,l,a]),j=[{key:"created",itemName:Pi.created,itemValue:S,associatedUser:x},{key:"lastEdited",itemName:Pi.lastEdited,itemValue:M,associatedUser:b}],{previewIcon:w,isEmptyPage:I}=(0,n.VK)((()=>"page_result"!==a?{previewIcon:void 0,isEmptyPage:!0}:{previewIcon:l.getIcon(),isEmptyPage:l.isEmptyPage()}),[l,a]),k=(0,n.VK)((()=>{if("page_result"===a)return(0,ys.ZP)({store:l,collectionViewId:l.id,fullyQualified:!0,pageVisitSource:ds.tY.SearchQuery})}),[l,a]),T=(0,r.useCallback)((()=>{k&&ps.RD({environment:h,stringValue:k,copiedMessage:ps.tq.copiedLinkToClipboard})}),[h,k]),F=(0,n.VK)((()=>U.default.checkGate("search_toggle_side_peek")),[]),{searchResultStore:R}=(0,r.useContext)(P.SearchStaticContext),{localResults:Z,serverResults:B}=(0,n.VK)((()=>R.state),[R]),A=(0,V.x)(H.default);return(0,me.jsxs)("aside",{style:u,children:[(0,me.jsx)("div",{style:c.sidePeekContentContainer,children:"page_result"===a?(0,me.jsxs)(me.Fragment,{children:[F&&(0,me.jsx)("div",{onClick:()=>Ct.bn(),style:c.doubleChevronIcon,children:(0,Ci.D)({width:15,height:15})}),(0,me.jsxs)("div",{style:c.pageIconAndTitleContainer,children:[(0,me.jsx)(de.Z,{disabled:!0,icon:w,isEmptyPage:I,size:26,largeIcon:!0}),(0,me.jsxs)("span",{style:c.titleAndLinkContainer,children:[(0,me.jsx)("span",{style:{...c.title,...!g&&c.untitledPageColor},children:g??(0,me.jsx)(N.FormattedMessage,{id:"search.preview.untitledPage",defaultMessage:"Untitled"})}),(0,me.jsx)(Bi,{onClick:T})]})]}),(0,me.jsx)(ki.Z,{style:c.previewContainer,href:k,hoveredStyle:c.hoveredOrPressedPreview,pressedStyle:c.hoveredOrPressedPreview,children:(0,me.jsx)(Ii.Z,{variant:"default",store:l,coverFormat:Fi,coverSizeFormat:"large",showEmptyGalleryCover:!1,coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:c.contentCoverFade,contentWrapStyle:c.contentCover,coverHeight:180,onLoadProxiedImage:()=>{},renderAdditionalBlocks:!0,rendererBlockStyle:{fontSize:9}})}),(0,me.jsx)("div",{style:c.metadataContainer,children:j.filter((e=>void 0!==e.itemValue)).map(((e,t)=>(0,me.jsx)(Ti,{isFirstInList:0===t,itemName:e.itemName,itemValue:e.itemValue,associatedUser:e.associatedUser},e.key)))})]}):(0,me.jsx)(Zi,{query:l??""})}),A?(0,me.jsxs)("div",{style:c.report,children:[(0,me.jsx)(Gr,{experiments:null==B||null===(t=B.serverEventProperties)||void 0===t?void 0:t["server-searchExperiments"],localResults:null==Z?void 0:Z.results,serverResults:null==B?void 0:B.results}),(0,me.jsx)(Is.Z,{ariaLabel:"Button to open search's debug side panel",onClick:()=>C.ZP.setState({...C.ZP.state,isDebugSidebarOpen:!0}),style:c.debugGearIcon,hoveredStyle:c.hoveredDebugGearIcon,icon:e=>(0,Wt.H)({width:12,height:12})})]}):null]})}function Zi(e){window.__c={n:"QnaPanel"};const{query:t}=e,s=(0,o.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:30},chatAndAvatarContainer:{display:"flex",gap:6,alignItems:"flex-end"},chatContainer:{display:"flex",flexDirection:"column",gap:10,flexGrow:1,justifyContent:"center"},questionBubble:{backgroundColor:e.cardHoveredBackground,color:e.lightTextColor,padding:8,borderRadius:16,fontSize:12,minWidth:40,minHeight:32,width:"fit-content",maxWidth:180,alignSelf:"flex-end",userSelect:"none",overflow:"hidden",textOverflow:"ellipsis"},introBubble:{backgroundColor:e.accentColors.purple[50],color:e.accentColors.purple[500],padding:"8px 12px",borderRadius:16,fontSize:14,width:170,userSelect:"none",overflow:"hidden",display:"flex",flexDirection:"column",gap:6,textOverflow:"ellipsis"},helperDescription:{textAlign:"center",fontSize:12,color:e.lightTextColor,display:"flex",justifyContent:"center"},loadingDots:{border:`1px solid ${e.lightDividerColor}`,padding:12,borderRadius:100,width:"max-content"},writingIndicatorCircle:{height:5,width:5,opacity:.6,backgroundColor:e.lightIconColor,borderRadius:"100%"},writingButtonWrapper:{display:"flex",alignItems:"center",justifyContent:"center",gap:3,width:"inherit",height:"inherit"}})),[]);return(0,me.jsxs)("div",{style:s.container,children:[(0,me.jsxs)("div",{style:s.chatAndAvatarContainer,children:[(0,me.jsx)(Ai,{}),(0,me.jsx)("div",{style:s.chatContainer,children:t?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("div",{style:s.questionBubble,children:t}),(0,me.jsx)("div",{style:s.loadingDots,children:(0,me.jsxs)("div",{role:"decorative",style:s.writingButtonWrapper,children:[(0,me.jsx)("div",{role:"decorative",style:s.writingIndicatorCircle}),(0,me.jsx)("div",{role:"decorative",style:s.writingIndicatorCircle}),(0,me.jsx)("div",{role:"decorative",style:s.writingIndicatorCircle})]})})]}):(0,me.jsxs)("div",{style:s.introBubble,children:[(0,me.jsx)("div",{children:(0,me.jsx)(N.FormattedMessage,{id:"searchSidePeekPanel.welcomeMessage.title",defaultMessage:"Hi! I'm Notion AI."})}),(0,me.jsx)(N.FormattedMessage,{id:"searchSidePeekPanel.welcomeMessage.caption",defaultMessage:"Let me help you find information and answer questions."})]})})]}),(0,me.jsx)("div",{style:s.helperDescription,children:(0,me.jsx)("div",{style:{width:"90%"},children:(0,me.jsx)(N.FormattedMessage,{id:"SearchSidePeek.caption",defaultMessage:"Get quick answers for anything in your workspace"})})})]})}function Bi(e){window.__c={n:"CopyLinkIcon"};const t=(0,o.yK)((e=>({linkIcon:{width:14,height:14,fill:"light"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[500]},hoveredBackground:{backgroundColor:e.buttonHoveredBackground}})),[]);return(0,me.jsx)(rs.Z,{delayThreshold:600,placement:rs.Z.Placement.Top,allowHover:!0,renderTooltip:()=>(0,me.jsx)(N.FormattedMessage,{id:"search.preview.copyLink",defaultMessage:"Copy link"}),closeDelay:0,render:s=>(0,me.jsx)(Is.Z,{...s,icon:e=>(0,Mi.N)(t.linkIcon),ariaLabel:"Button to toggle the filter bar",hoveredStyle:t.hoveredBackground,onClick:e.onClick})})}function Ai(){window.__c={n:"AssistantLogo"};const e=(0,o.yK)((e=>({faceImgWrap:{width:32,height:32,borderRadius:"100%",background:e.whiteButtonBackground,border:`1px solid ${e.lightDividerColor}`,overflow:"hidden",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"},faceImg:{width:40,pointerEvents:"none"},aiSparklesFill:{height:14,width:14,fill:"light"===e.mode?e.aiPurpleColor:e.mediumIconColor,pointerEvents:"none"}})),[]);return(0,me.jsx)("div",{style:e.faceImgWrap,children:(0,bt.t)(e.aiSparklesFill)})}function Oi(e){window.__c={n:"SearchContentPane"};const t=(0,i.Fy)(),s=(0,i.O7)();return(0,r.useEffect)((()=>{c.S(s)}),[s]),(0,m.Z)(),(0,me.jsx)(j.Z,{capture:!0,ignoreBlockSelection:!0,focusOffscreenInput:!1,restoreSelection:!t.isMobile,render:()=>(0,me.jsx)(M.Z,{capture:!0,allowMenuList:!0,render:t=>(0,me.jsx)(Li,{...e,ignoreAreaEvents:t})})})}function Li(e){window.__c={n:"SearchContentPaneInner"};const{ignoreAreaEvents:t,renderAsPage:s,quickSearchMode:l,onClose:d,searchContentPaneType:c}=e,{handleQueryChange:m,searchFilterMenuRef:f,modalBodyMenuRef:v,searchResultStore:M,globalFocusedIndex:j,defaultBodyFocusedResult:I,searchActionItemsStore:k}=(0,r.useContext)(P.SearchStaticContext),[F,R]=(0,r.useState)(!1),[Z,B]=(0,r.useState)(!1),A=(0,i.O7)(),O=(0,i.Fy)(),L=(0,n.VK)((()=>C.ZP.state.query.text),[]),{isSearchMenuOpen:D,shouldShowDebugSidebar:_,hasPublicAccessPermission:V,shouldShowSpinner:E}=(0,n.VK)((()=>{const e=Boolean(y.Z.state.online),{hasPublicAccessPermission:t}=g.bC(A);return{isSearchMenuOpen:b.default.state.open,shouldShowSpinner:e&&Boolean(L)&&M.state.serverResultsLoading&&!F,shouldShowDebugSidebar:qi({device:O,isPublicAccessPermissionForPage:t}),hasPublicAccessPermission:t}}),[F,M,O,A,L]),q=(0,r.useMemo)((()=>a.Ds((()=>{const{activeElement:e}=document;e instanceof HTMLInputElement&&e.blur()}),500,{leading:!0})),[]),N=(0,r.useCallback)((()=>{Z&&q()}),[q,Z]),H=(0,r.useCallback)((e=>{B(e),e||O.isMobileNative&&x.Z.updateKeyboardPhase(A,x.i.willHide,0)}),[O.isMobileNative,A]),W=(0,n.VK)((()=>g.pG({searchResultStore:M,globalFocusedIndexStore:j,searchActionsStore:k})),[M,j,k]),z=(0,n.VK)((()=>I.state),[I]),K=(0,r.useMemo)((()=>(0,me.jsx)(St.Z,{isOpen:Boolean(s||D),onTypingChange:R,onFocusChange:H,showSpinner:E,onQueryChange:m,quickSearchMode:l,selectedResult:"page_result"===(null==W?void 0:W.type)?W.value:void 0})),[s,D,H,E,m,l,W]),U=(0,n.VK)((()=>Di({searchContentPaneType:c,renderAsPage:s,environment:A})),[c,s,A]),$=(0,o.yK)((e=>({body:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column",zIndex:2},topbar:{height:void 0,marginTop:10,marginLeft:16,marginBottom:10,marginRight:16},topbarRightButtonWrapper:{flex:void 0,paddingLeft:16},topbarButton:{fontWeight:void 0,padding:0,color:e.mediumTextColor},scroller:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",maxHeight:U.maxHeight,minHeight:U.minHeight}})),[U.maxHeight,U.minHeight]),Q=(0,r.useMemo)((()=>{if(O.isMobile){return{menuType:h.og.Modal,left:K,shouldRenderLeftDirectly:!0,width:s?"100vw":void 0,...Vi({isPhone:O.isPhone,renderAsPage:s,style:$.topbarRightButtonWrapper,onClick:d}),header:"search_results"===c&&(0,me.jsx)(vt,{isPublicPageSearch:V}),disableHeaderShadow:!0,topbarStyle:$.topbar,leftRightButtonStyle:$.topbarButton,onScroll:Ei(O)?N:void 0,bodyScrollerClassName:u.GZn,...t}}return{menuType:h.og.Popup,maxHeight:U.maxHeight,minHeight:U.minHeight,maxWidth:"100%",...l?{width:"100vw"}:{},disableScroller:!0,scrollerStyle:$.scroller,...t}}),[O,$,t,K,s,d,c,V,N,U.minHeight,U.maxHeight,l]),G=z||W;"assistant"===(null==G?void 0:G.type)&&(G.value=L);const X=(0,n.VK)((()=>!(0,p.bN)(A)&&A.WindowSizeStore.state.width<P.DEFAULT_MODAL_WIDTH_WITH_SIDE_PEEK),[A]),J=(0,n.VK)((()=>!((0,S.gq)({device:O})||X||C.ZP.state.isDebugSidebarOpen||void 0===G||"default_body"===c)&&(0,p.Qi)(A)),[A,c,G,O,X]);return(0,n.VK)((()=>{C.ZP.state.isSidePeekPanelOpen!==J&&C.ZP.update((e=>({...e,isSidePeekPanelOpen:J})))}),[J]),(0,me.jsx)(w.Z,{...Q,className:u.Oau,ref:v,children:(0,me.jsxs)(_i,{enableLazyLoading:s,children:[(0,me.jsxs)("div",{style:$.body,children:[(0,me.jsx)(T.Z,{}),!O.isMobile&&K,(0,me.jsx)(bi,{searchContentPaneType:c})]}),J&&void 0!==G?(0,me.jsx)(Ri,{selectedResult:G}):void 0,_&&(0,me.jsx)(rt,{ref:f})]})})}function Di(e){const{searchContentPaneType:t,renderAsPage:s,environment:r}=e;if(s)return{maxHeight:"100vh",minHeight:"100vh"};if((0,p.rd)(r)){const e=550,s=r.WindowSizeStore.state.height>e+(0,d.u3)(r.device.isElectronMac)?e:0;return{minHeight:`max(${"search_results"===t?70:50}vh, ${s}px)`,maxHeight:`max(${"search_results"===t?70:50}vh, ${s}px)`}}return"assistant"===C.ZP.state.mode?{maxHeight:"80vh",minHeight:570}:{maxHeight:"80vh",minHeight:50}}function _i(e){window.__c={n:"SearchMenuContentsWrapper"};const{enableLazyLoading:t,children:s}=e,n=(0,i.O7)();return t?(0,me.jsx)(k.Z,{fetch:async()=>{var e;await l.Vs(0),await v.default.waitUntil((()=>void 0!==v.default.state.currentSpaceStore)),null===(e=n.mobileNative)||void 0===e||e.markTransitionReady({type:"search"})},loading:()=>(0,me.jsx)(r.Fragment,{}),render:()=>s}):(0,me.jsx)(r.Fragment,{children:s})}function Vi(e){let{isPhone:t,style:s,renderAsPage:r,onClick:i}=e;return t&&(0,f.Y)("supportsNativeHome")||r?{rightOuterStyle:{display:"none"}}:{right:(0,me.jsx)(I.CancelMenuText,{}),onClickRight:i,rightOuterStyle:s}}function Ei(e){return!!e.isMobile&&(!e.isIOS||e.isMobileNative)}function qi(e){let{device:t,isPublicAccessPermissionForPage:s}=e;if(!s&&!t.isMobile)return C.ZP.isDebugSidebarOpen()}},86244:(e,t,s)=>{s.d(t,{$:()=>K,Z:()=>Q});var r=s(67294),i=s(83355),n=s(480),o=s(86628),a=s(24405),l=s(6637),d=s(35840),c=s(94804),u=s(70203),h=s(82990),p=s(31412),g=s(34700),m=s(59139),f=s(48141),v=s(38755),y=s(5162),x=s(80444),S=s(21273),b=s(25904),C=s(30857),M=s(29026),j=s(73063),w=s(74194),I=s(68785),k=s(31278),T=s(33411),P=s(26388),F=s(72787),R=s(72126),Z=s(50906),B=s(87531),A=s(70782),O=s(81598),L=s(29741),D=s(78861),_=s(69327),V=s(55320),E=s(31945),q=s(53437),N=s(33991),H=s(85893);function W(e){window.__c={n:"WorkspaceIcon"};const{events:t,spaceIcon:s,spaceName:i}=e,[n,o]=(0,r.useState)(!1),l=(0,a.yK)((e=>({downIcon:{height:8,width:8,stroke:e.icon.tertiary},wrapper:{display:"flex",alignItems:"center",gap:2,paddingRight:5,...(0,g.X)({noDrag:!0}),cursor:"pointer"},recordIcon:{backgroundColor:n?e.buttonHoveredBackground:void 0,padding:4,height:void 0,width:void 0}})),[n]);return(0,H.jsxs)("span",{...t,style:l.wrapper,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,H.jsx)(k.Z,{bucket:"public",disabled:!0,icon:s,isEmptyPage:!1,size:24,style:l.recordIcon,title:i}),(0,F.Y)(l.downIcon)]})}const z=function(){window.__c={n:"SearchWorkspaceSwitcher"};const e=(0,o.VK)((()=>x.default.state.currentSpaceStore),[]),t=(0,o.VK)((()=>null==e?void 0:e.id),[null==e?void 0:e.id]),s=(0,n.O7)(),i=(0,o.VK)((()=>s.currentUser.id),[s.currentUser.id]),{handlePopupOpen:a,handlePopupClose:l}=(0,r.useContext)(N.SearchStaticContext),d=(0,r.useCallback)((async e=>{const{newSpaceView:t,associatedUserId:r,closeSwitcherPopupFn:n}=e,o=t.getSpaceId();if(t&&i&&o){var a;const e=null===(a=x.default.state.currentSpaceViewStore)||void 0===a?void 0:a.id,l=V.default.state.sessionId;e&&l&&o&&Z.fho(s,{currentSearchSessionId:l,currentWorkspaceId:e,newWorkspaceId:o}),n(),x.default.update((e=>({...e,currentSpaceViewStore:t,currentSpaceStore:null==t?void 0:t.getSpaceStore()}))),i!==r&&await A.x({environment:s,newCurrentUserId:r}),S.Z.isAiEnabled()&&O.L6.loader().then((e=>{let{assistantActions:t}=e;t.clearAllAssistantSessions()})),_.Z.reinitializeState(s,r,o),V.default.closeAndResetMetricsState(),C.default.reset(),B.UT({environment:s,analyticsFrom:"quick-search-switch-workspace",isQuickSearch:!0,renderAsPage:!0})}}),[i,s]),{spaceIcon:c,spaceName:u}=(0,o.VK)((()=>e?{spaceName:e.getName(),spaceIcon:(0,v.Wd)(s,e)}:{spaceName:void 0,spaceIcon:void 0}),[e,s]),h=[...D.Z.getUserIds(s)],p=(0,o.VK)((()=>{var e;return R.mN(R.oA((null===(e=x.default.state.currentUserRootStore)||void 0===e?void 0:e.getSpaceViewStores())??[]),(e=>e.getSpaceId()))}),[]);return e?!t||!i||!e||p.length<=1&&1===h.length?null:(0,H.jsx)(E.ZP,{popupType:E.Z4.Popup,renderOrigin:e=>(0,H.jsx)(W,{events:e,spaceIcon:c,spaceName:u}),render:e=>(0,H.jsx)(H.Fragment,{children:h.map(((t,s)=>(0,H.jsx)(L.LP,{onSpaceClick:s=>d({newSpaceView:s.spaceViewStore,associatedUserId:t,closeSwitcherPopupFn:e.close}),userId:t,isLastUser:s===h.length-1,disableAccountActions:!0,hideShortcuts:!0},`commandSearch-userworkspaces-${s}`)))}),onClick:a,onClose:l,disabled:!1,placementToOrigin:q.ZP.Placement.Bottom,alignmentToOrigin:q.ZP.Alignment.Start,style:{...(0,g.X)({noDrag:!0}),marginRight:30}}):null},K=48;class U extends i.Z{constructor(){super(...arguments),this.typingTimer=void 0,this.renderLeft=()=>{const{showSpinner:e,selectedResult:t,quickSearchMode:s}=this.props,{device:r}=this.environment,i=this.styles,n={...this.getThemeColors().searchIcon,...i.searchIcon};if(s)return(0,H.jsx)(z,{});const o=null==t?void 0:t.getIcon(),a=Boolean(M.ZP.state.query.text.trim())&&!r.isMobile;return(0,H.jsx)(T.Z,{show:e,showDelay:500,showHold:200,render:e=>(e=>(0,H.jsx)("div",{style:i.headerIcon,children:e?(0,H.jsx)(I.Z,{style:n}):a?(0,H.jsx)(k.Z,{disabled:!0,icon:o,isEmptyPage:Boolean(o),size:20}):(0,d.R)(n)}))(e)})},this.handleQueryChange=e=>{this.handleTyping();const t=String(e.target.value);this.props.onQueryChange(t)},this.handleClearButtonClick=()=>{M.ZP.resetQuery({resetFilters:!0}),M.ZP.update((e=>({...e,source:"quick_find"})))},this.handleFocus=()=>{const{onFocusChange:e}=this.props;e(!0)},this.handleBlur=()=>{const{onFocusChange:e}=this.props;e(!1)},this.isPopupOpen=this.createComputedStore((()=>M.ZP.state.isPopupOpen)),this.styles={inputDesktop:{fontSize:18,height:K,paddingLeft:12,paddingRight:16,alignItems:"center",flexGrow:0,flexShrink:0,zIndex:1},inputMobile:{fontSize:16,border:"none",boxShadow:"none",borderRadius:7,lineHeight:"1.2",padding:"6px 8px"},searchIcon:{width:16,height:16},headerIcon:{height:24,width:24,display:"flex",alignItems:"center",justifyContent:"center"},input:{minWidth:0,...h.Z.textOverflowStyle},suggestedText:{whiteSpace:"pre",color:this.theme.mediumTextColor},suggestedTextWrapper:{overflow:"hidden",textOverflow:"ellipsis"},autoCompletedText:{background:this.theme.tint.regular},clearButton:{marginLeft:8},userInputAndSuggestedTextContainer:{display:"grid",gridTemplateColumns:"auto 1fr"}}}willUnmount(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=void 0)}renderComponent(){const{device:e}=this.environment,{isOpen:t,selectedResult:s,quickSearchMode:r}=this.props,i=this.styles,n=this.getThemeColors(),o=M.ZP.state.query.text,a=function(e,t,s){if(0===s.length||s.length>=20||e.isMobile||void 0===t)return;const r=u.Jcv(t.getTitleValue()),i=r.replaceAll("\n"," "),n=r.slice(0,s.length),o=i.substring(s.length);if(r.length>0&&n.toLocaleLowerCase()===s.toLocaleLowerCase())return`${o} — ${U.messages.open.defaultMessage}`;return` — ${U.messages.open.defaultMessage}`}(e,s,o),l=o.trim().length>0&&a?(0,H.jsxs)("div",{style:i.userInputAndSuggestedTextContainer,children:[(0,H.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:o}),(0,H.jsx)("div",{style:{...i.suggestedTextWrapper,...r&&!this.isPopupOpen.state&&(0,g.X)({drag:!0})},children:(0,H.jsx)("span",{style:i.autoCompletedText,children:a})})]}):"",d=e.isMobile?w.Z.Format.ExtraLarge:w.Z.Format.Transparent,c=e.isMobile?{...i.inputMobile,...n.inputMobile}:{...i.inputDesktop,...n.inputDesktop},h=S.Z.showSearchAiFeatures()||(0,m.rd)(this.environment),p={...i.input,...r&&(0,g.X)({noDrag:!0}),width:0===o.length&&r?`${G(this.props.intl,this.environment).length}ch`:"100%"};return(0,H.jsx)("div",{style:{display:"flex",flex:1},children:(0,H.jsx)(w.Z,{format:d,placeholder:G(this.props.intl,this.environment),left:this.renderLeft(),value:o,suggestedText:l,suggestedTextStyle:i.suggestedText,focus:e.isMobile?void 0:t&&!b.Z.state.open,focusInitial:!(0,y.Y)("supportsNativeHome")&&e.isMobile,focusAfterAnimation:!0,showClearButton:!0,right:!e.isMobile&&h&&(0,H.jsx)($,{quickSearchMode:r}),isRightLastElementOfInput:!0,selectAll:!0,onChange:this.handleQueryChange,onClearButtonClick:this.handleClearButtonClick,onFocus:this.handleFocus,onBlur:this.handleBlur,style:c,inputStyle:p,clearButtonStyle:{...r&&(0,g.X)({noDrag:!0})}})})}handleTyping(){void 0===C.default.state.firstKeyStrokeTimeMs&&C.default.update((e=>({...e,firstKeyStrokeTimeMs:Date.now()})));const{onTypingChange:e}=this.props;this.typingTimer&&window.clearTimeout(this.typingTimer),e(!0),this.typingTimer=window.setTimeout((()=>e(!1)),U.TYPING_DEBOUNCE_MS)}getThemeColors(){return{inputDesktop:{boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`},inputMobile:{background:this.theme.inputBackground},searchIcon:{fill:this.theme.mediumIconColor}}}}function $(e){window.__c={n:"FilterIconButton"};const[t,s]=(0,o.VK)((()=>{const e=M.ZP.state.query.filters,t=(0,f.FN)(e);return[M.ZP.state.filterBar.show,t]}),[]),r=(0,n.O7)();(0,o.VK)((()=>{const e=r.currentUser.id;if(!e)return;!1===(0,c.fe)(e)&&!0===t&&M.ZP.collapseFilterBar()}),[r,t]);const i=(0,a.yK)((t=>({container:{padding:4,marginLeft:5,borderRadius:4,height:"fit-content",width:"fit-content",display:"flex",...e.quickSearchMode&&(0,g.X)({noDrag:!0})},hoveredContainerStyles:{background:s?t.accentColors.interactiveBlue[100]:t.buttonHoveredBackground},icon:{width:17,height:17,cursor:"pointer",fill:s?t.accentColors.interactiveBlue[500]:"light"===t.mode?t.accentColors.gray[300]:t.accentColors.gray[500]}})),[s,e.quickSearchMode]);return(0,H.jsx)(P.Z,{renderTooltip:()=>(0,H.jsx)(H.Fragment,{children:(0,H.jsx)("div",{children:t?(0,H.jsx)(p.FormattedMessage,{id:"searchInputMenuItem.filterBarToggleButtonTooltip.hide",defaultMessage:"Hide filters"}):(0,H.jsx)(p.FormattedMessage,{id:"searchInputMenuItem.filterBarToggleButtonTooltip.show",defaultMessage:"Show filters"})})}),placement:P.Z.Placement.Bottom,alignment:P.Z.Alignment.Start,disableTooltip:r.device.isMobile,delayThreshold:400,render:e=>(0,H.jsx)(j.Z,{...e,icon:e=>(0,l.I)(i.icon),ariaLabel:"Button to toggle the filter bar",style:i.container,hoveredStyle:i.hoveredContainerStyles,onClick:()=>t?M.ZP.collapseFilterBar():M.ZP.expandFilterBar()})})}U.displayName="SearchInputMenuItem",U.messages=(0,p.defineMessages)({open:{id:"search.inputMenu.suggestedText.open",defaultMessage:"Open"}}),U.TYPING_DEBOUNCE_MS=300;const Q=(0,p.injectIntl)(U);function G(e,t){const{currentSpaceStore:s,mainEditorCurrentBlockStore:r}=x.default.state,i=s&&(0,v.rn)(t,s);if(i&&S.Z.showSearchAiFeatures())return e.formatMessage({id:"searchInputMenuItem.placeholder.SearchOrAskQuestionInSpace",defaultMessage:"Search or ask question in {spaceName}…"},{spaceName:i});if(i)return e.formatMessage({id:"searchInputMenuItem.placeholder.searchInSpace",defaultMessage:"Search {spaceName}…"},{spaceName:i});if(r){const t=u.Jcv(r.getTitleValue()).slice(0,100);return e.formatMessage({id:"searchInputMenuItem.placeholder.namedPage",defaultMessage:"Search in {pageTitle}…"},{pageTitle:t})}return e.formatMessage({id:"searchInputMenuItem.placeholder.unnamedPage",defaultMessage:"Search in page…"})}},85665:(e,t,s)=>{s.d(t,{Z:()=>D});var r=s(67294),i=s(480),n=s(86628),o=s(33991),a=s(32470),l=s(59054),d=s(72126),c=s(21202),u=s(92338),h=s(97880),p=s(63143),g=(s(21703),s(74487));const m=Symbol("JSON Schema"),f=Symbol("JSON Schema Components"),v=Symbol("No JSON Schema"),y={isNull:()=>({type:"null",[f]:{}}),boolean:()=>({type:"boolean",[f]:{}}),number:()=>({type:"number",[f]:{}}),integer:()=>({type:"integer",[f]:{}}),string:()=>({type:"string",[f]:{}}),dateString:()=>({type:"string",format:"date",[f]:{}}),literal:e=>({enum:[e],[f]:{}}),literals:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return{enum:t,[f]:{}}},uuid:()=>({type:"string",format:"uuid",[f]:{}}),uuidWithoutDashes:()=>({type:"string",format:"uuid",[f]:{}}),any:()=>S,array:e=>({type:"array",items:e[m],[f]:e[m][f]}),tuple:e=>({type:"tuple",items:!1,prefixItems:e.map((e=>e[m])).filter((e=>e!==v)),[f]:Object.assign({},...e.map((e=>e[m][f])))}),record:(e,t)=>({type:"object",additionalProperties:t[m],[f]:t[m][f]}),object:e=>{let{required:t,optional:s,exact:r}=e;return{type:"object",properties:(0,p.m8)(Object.entries({...t,...s}).filter((e=>{let[t,s]=e;return s[m]!==v})).map((e=>{let[t,s]=e;return[t,s[m]]}))),...r&&{additionalProperties:!1},...Object.keys(t).length>0&&{required:Object.keys(t)},[f]:Object.assign({},...Object.values({...t,...s}).map((e=>e[m][f])))}},union:e=>({anyOf:e.map((e=>e[m])).filter((e=>e!==v)),[f]:Object.assign({},...e.map((e=>e[m][f])))}),gte:(e,t)=>{const s=e[m];return s!==v?{...s,minimum:t}:s},lte:(e,t)=>{const s=e[m];return s!==v?{...s,maximum:t}:s},maxLength:(e,t)=>{const s=e[m];if(s===v)return s;if("type"in s){if("string"===s.type)return{...s,maxLength:t};if("array"===s.type)return{...s,maxItems:t}}throw new Error("Unknown type for max length.")},minLength:(e,t)=>{const s=e[m];if(s===v)return s;if("type"in s){if("string"===s.type)return{...s,minLength:t};if("array"===s.type)return{...s,minItems:t}}throw new Error("Unknown type for min length.")},nonEmpty:e=>{const t=e[m];if(t===v)return t;if("type"in t){if("string"===t.type)return{...t,minLength:1};if("object"===t.type)return{...t,minProperties:1};if("array"===t.type)return{...t,minItems:1}}throw new Error("Unknown non-emptyable type.")},nullable:e=>{const t=e[m];if(t===v)return t;if("type"in t)if(Array.isArray(t.type)){if("null"===t.type[1])return t;(0,h.t1)(t.type[1])}else{if("string"===t.type)return{...t,type:[t.type,"null"]};if("object"===t.type)return{...t,type:[t.type,"null"]};if("array"===t.type)return{...t,type:[t.type,"null"]};if("tuple"===t.type)return{...t,type:[t.type,"null"]};if("boolean"===t.type)return{...t,type:[t.type,"null"]};if("integer"===t.type)return{...t,type:[t.type,"null"]};if("number"===t.type)return{...t,type:[t.type,"null"]};if("null"===t.type)return t;(0,h.t1)(t.type)}else{if("const"in t)return{...t,enum:[t.const,null]};if("enum"in t)return{...t,enum:[...t.enum,null]};if("anyOf"in t)return{...t,anyOf:t.anyOf.map((e=>y.nullable({[m]:e})))};if("$ref"in t)return{anyOf:[t,{type:"null"}],[f]:t[f]};if(b(t))return t;(0,h.t1)(t)}}},x=(0,p.m8)(Object.entries(y).map((e=>{let[t,s]=e;return[t,function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return 1===r.length&&(0,h.Kn)(r[0])&&("id"in r[0]||"description"in r[0])?function(){const{description:e,examples:i,id:n}=r[0];let o={description:e,...i&&{examples:i},...s(...arguments)};return n&&(o={$ref:`#/components/schemas/${n}`,[f]:{...o[f],[n]:o}}),{[m]:o,...g[t](...arguments)}}:{[m]:s(...r),...g[t](...r)}}]}))),S=(Symbol("Exact empty object ({})"),x.object({id:"emptyObject"})({required:{},optional:{},exact:!0}),{});function b(e){return(0,h.Kn)(e)&&0===Object.keys(e).length}var C=s(50906),M=s(59139),j=s(48141),w=s(18245),I=s(80444),k=s(88632),T=s(77080),P=s(69327),F=s(84166),R=s(26350),Z=s(55320),B=s(30857),A=s(29026);function O(e){let{dependencies:t,debugColumnStore:s,localDebounce:o=75,serverDebounce:a=225,searchResultStore:c,permanentFilterOverride:u,enabled:h}=e;const p=(0,i.O7)(),g=(0,n.VK)((()=>function(e){const{isOnline:t,debugColumnStore:s}=e,r=s.state.searchExperimentOverrides;function i(e){return(null==r?void 0:r[e])??T.default.getGroup(e,{disableExposureLogging:!0})}return{shouldSearchLocal:"on"!==i("search-no-local-blending")&&t,forcedClusterPattern:s.state.forcedClusterPattern,searchExperimentOverrides:s.state.searchExperimentOverrides,forcedBlockIds:s.state.forcedBlockIds}}({isOnline:t.isOnline,debugColumnStore:s})),[t.isOnline,s]),m=(0,r.useMemo)((()=>d.Ds(L,a)),[a]);(0,l.r5)((()=>h?async function(e){var t;const{query:s,openAsPage:r,store:i,fetchServerResultsFn:n}=e;if(r&&d.Xy(s,i.state.selectedQueryResultQuery))return;"quick_find_scroll"!==A.ZP.state.source&&function(e){const{shouldSearchLocal:t,parentStore:s,environment:r,query:i,debug:n,limit:o,hasPublicAccessPermission:a,isOnline:l,store:d,permanentFilterOverride:c}=e;let u;const h={...i,filters:{...i.filters,...c}};t&&(u=j.b9(function(e){const{parentStore:t,requestInput:s,isOnline:r,environment:i,hasPublicAccessPermission:n,localSearchCache:o}=e,{query:a}=s;if(!o)return;if(!a.text.trim())return;if(n)return;const l=w.default.mark("rum.local_quick_search_query"),d=void 0,c=j.Y_({query:s,localCachedPages:o,parentStore:t,environment:i,isOnline:r,shouldLimitLocalResultsWhenOnline:!0,applyScoreThresholdWhenOnline:!0,maxLocalResultsOverride:d,canUseLtr:!0});return w.default.measure(l,{environment:i}),c}({parentStore:s,environment:r,requestInput:{query:h,debug:n,limit:o},hasPublicAccessPermission:a,isOnline:l,localSearchCache:F.Z.state.localSearchableBlocksCache})),B.default.update((e=>({...e,numLocalRequests:e.numLocalRequests+1}))),d.update((e=>({...e,localResults:u}))))}(e);const o=new Set;null===(t=i.state.localResults)||void 0===t||t.results.forEach((e=>o.add(e.id))),await n({...e,excludedBlockIds:[...o]})}({...t,...g,store:c,fetchServerResultsFn:m,environment:p,permanentFilterOverride:u}):Promise.resolve()),[t,g,c,m,p,u,h],{debounce:o})}async function L(e){let{parentStore:t,environment:s,query:r,debug:i,isOnline:n,publicAccessPermissionAncestorBlockId:o,currentSpaceStore:l,searchExperimentOverrides:g,forcedClusterPattern:m,store:f,forcedBlockIds:v,limit:y,permanentFilterOverride:x,excludedBlockIds:S}=e;const I={query:{...r,filters:{...r.filters,...x}},debug:i,limit:y};f.update((e=>({...e,serverResultsLoading:!0}))),B.default.update((e=>({...e,numServerRequests:e.numServerRequests+1})));const k=f.state.serverResults,T=A.ZP.state.source,F=await async function(e){const{parentStore:t,requestInput:s,isOnline:r,environment:i,publicAccessPermissionAncestorBlockId:n,searchSessionId:o,searchSessionFlowNumber:a,source:l,spaceId:d,searchExperimentOverrides:g,forcedClusterPattern:m,forcedBlockIds:f,excludedBlockIds:v}=e,{query:y}=s;if(!y.text.trim()&&!j.FN(y.filters))return;if(!r)return{error:u.Ix.Offline};const x=w.default.mark("rum.server_quick_search_query"),S=await j.MS({environment:i,input:s,spaceId:d,publicAccessPermissionAncestorBlockId:n,searchSessionId:o,searchSessionFlowNumber:a,source:l,searchExperimentOverrides:g,forcedClusterPattern:m,recentPagesForBoosting:d&&"on"!==(null==g?void 0:g["search-debug-only-no-recent-boosting"])?P.Z.getWithoutSubscribing(d):[],forcedBlockIds:f,excludedBlockIds:v});if(!S)return;if("failed"===S.type)return S.offline?{error:u.Ix.Offline}:{error:u.Ix.RequestFailed};const C=S.data.trackEventProperties,M=b(C)?{}:(0,p.m8)((0,h.Yd)(C).map((e=>[`server-${e}`,C[e]]))),I=S.data.results.map(((e,s)=>({...e,serverEventProperties:M,originalPosition:s,store:R.G.createChildStore(t,{table:c.iU,id:e.id})})));return w.default.measure(x,{environment:i}),{value:{results:I,total:S.data.total,debugInfo:S.data.debug,serverEventProperties:M,clusterInfo:S.data.clusterInfo}}}({parentStore:t,environment:s,requestInput:I,spaceId:null==l?void 0:l.id,searchSessionId:Z.default.state.sessionId,searchSessionFlowNumber:B.default.state.numServerRequests,publicAccessPermissionAncestorBlockId:o,isOnline:n,source:T,searchExperimentOverrides:g,forcedClusterPattern:m,forcedBlockIds:v,excludedBlockIds:S}),O={query:{...A.ZP.state.query,filters:{...A.ZP.state.query.filters,...x}},limit:A.ZP.state.limit,debug:a.ZP.getDebugLevel()};if(!d.Xy(I,O))return;const L=j.b9(F),D="quick_find_scroll"===T?j.Nu({existingResults:k,newPageResults:L}):L;if(F&&!F.error){var _,V,E;const e=F.value.results;f.update((t=>({...t,serverError:null==F?void 0:F.error,serverResultsLoading:!1,serverResults:D,serverResultsAllLoaded:e.length<y,serverEventProperties:F.value.serverEventProperties})));const t=(null==D?void 0:D.results.map((e=>{var t;return{id:e.id,badges:(null===(t=e.badges)||void 0===t?void 0:t.map((e=>e.type)))??[]}})))??[],r=new Map;for(const{badges:s}of t)for(const e of s){const t=r.get(e)??0;r.set(e,t+1)}const{sections:i}=j.IV({intentBasedGrouping:(0,M.XP)(),localResults:null===(_=f.state.localResults)||void 0===_?void 0:_.results,serverResults:null==D?void 0:D.results}),n={};for(const[s,o]of Object.entries(i))n[s]=o.map((e=>e.id));C.ZfC(s,{numLocalResults:(null===(V=f.state.localResults)||void 0===V?void 0:V.results.length)||0,numServerResults:(null==D?void 0:D.results.length)||0,localResultsIds:(null===(E=f.state.localResults)||void 0===E?void 0:E.results.map((e=>e.id)))||[],...F.value.serverEventProperties,badgeCounts:r,badgesByResultId:t,idsBySection:n})}else f.update((e=>({...e,serverError:null==F?void 0:F.error,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0})))}function D(){const e=(0,i.Fy)(),{searchResultStore:t,secondarySearchResultStore:s}=(0,r.useContext)(o.SearchStaticContext),{parentStore:l}=(0,r.useContext)(o.SearchStoresContext),d=function(e){const t=(0,i.O7)();return(0,n.VK)((()=>{const{hasPublicAccessPermission:s,publicAccessPermissionAncestorBlockId:r}=j.bC(t);return{isOnline:Boolean(k.Z.state.online),limit:A.ZP.state.limit,parentStore:e,hasPublicAccessPermission:s,publicAccessPermissionAncestorBlockId:r,currentSpaceStore:I.default.state.currentSpaceStore,debug:a.ZP.getDebugLevel(),openAsPage:Z.default.state.openAsPage,currentSpaceViewStore:I.default.state.currentSpaceViewStore,query:A.ZP.state.query}}),[t,e])}(l),c=(0,n.VK)((()=>Boolean((0,a.gq)({device:e})&&a.BJ.state.visible)),[e]);O({dependencies:d,searchResultStore:t,debugColumnStore:a.v_,enabled:!0}),O({dependencies:d,searchResultStore:s,debugColumnStore:a.BJ,enabled:c})}},91190:(e,t,s)=>{s.d(t,{C:()=>n,E:()=>i});var r=s(61766);const i=new r.Z,n=new r.Z},63334:(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(49085);class i extends r.default{getInitialState(){return{}}}const n=i},25904:(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(49085);class i extends r.default{getInitialState(){return{open:!1}}}const n=new i},30857:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});var r=s(49085);class i extends r.default{getInitialState(){return{selectedQueryResult:!1,numKeystrokes:0,numServerRequests:0,numLocalRequests:0,hadMetaClick:!1,firstKeyStrokeTimeMs:void 0}}}const n=new i},54983:(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(49085);class i extends r.default{getInitialState(){return{}}}const n=i},95341:(e,t,s)=>{s.d(t,{d:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("arrowRightSquare",{viewBox:"0 0 18 18",svg:(0,i.jsx)("path",{d:"M3.06641 17.998L14.9121 17.998C16.9629 17.998 17.9785 16.9824 17.9785 14.9707L17.9785 3.04688C17.9785 1.03516 16.9629 0.0195312 14.9121 0.0195312L3.06641 0.0195312C1.02539 0.0195312 0 1.02539 0 3.04688L0 14.9707C0 16.9922 1.02539 17.998 3.06641 17.998ZM14.1797 8.98438C14.1797 9.20898 14.082 9.38477 13.8867 9.57031L10.4883 12.9785C10.3516 13.1152 10.1758 13.1934 9.96094 13.1934C9.54102 13.1934 9.22852 12.8711 9.22852 12.4512C9.22852 12.2363 9.31641 12.0508 9.45312 11.9141L10.7129 10.6738L11.9238 9.6582L9.79492 9.73633L4.56055 9.73633C4.12109 9.73633 3.80859 9.42383 3.80859 8.98438C3.80859 8.53516 4.12109 8.22266 4.56055 8.22266L9.79492 8.22266L11.9238 8.31055L10.7129 7.29492L9.45312 6.05469C9.32617 5.9082 9.22852 5.72266 9.22852 5.50781C9.22852 5.08789 9.54102 4.77539 9.96094 4.77539C10.1758 4.77539 10.3516 4.84375 10.4883 4.98047L13.8867 8.39844C14.0918 8.60352 14.1797 8.75977 14.1797 8.98438Z"})})},8597:(e,t,s)=>{s.d(t,{Z:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("arrowUp",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 14.5586C8.44434 14.5586 8.74512 14.251 8.74512 13.7998V5.30957L8.69043 3.83984L10.4951 5.84961L12.0469 7.38086C12.1836 7.51074 12.3682 7.59961 12.5801 7.59961C12.9902 7.59961 13.291 7.28516 13.291 6.86816C13.291 6.66992 13.2158 6.49219 13.0586 6.32812L8.55371 1.81641C8.40332 1.66602 8.20508 1.57715 8 1.57715C7.79492 1.57715 7.59668 1.66602 7.44629 1.81641L2.94141 6.32812C2.78418 6.49219 2.70898 6.66992 2.70898 6.86816C2.70898 7.28516 3.0166 7.59961 3.42676 7.59961C3.63184 7.59961 3.82324 7.51074 3.95312 7.38086L5.50488 5.84961L7.30957 3.83301L7.25488 5.30957V13.7998C7.25488 14.251 7.5625 14.5586 8 14.5586Z"})})},22109:(e,t,s)=>{s.d(t,{T:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("arrowsUpDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.11 2.385a.61.61 0 01.48-.211c.191 0 .353.07.486.21L8.03 5.409a.66.66 0 01.2.475c0 .191-.061.347-.182.469a.627.627 0 01-.463.181.59.59 0 01-.451-.187L5.926 5.098l-.72-.844.04 1.219v7.242a.624.624 0 01-.187.469.624.624 0 01-.47.187.636.636 0 01-.468-.187.635.635 0 01-.182-.47V5.474l.041-1.22-.726.845-1.201 1.248a.61.61 0 01-.457.187.627.627 0 01-.463-.181.634.634 0 01-.182-.47.66.66 0 01.2-.474l2.958-3.023zm7.786 10.781a.636.636 0 01-.486.205.665.665 0 01-.486-.205l-2.947-3.035a.64.64 0 01-.206-.475c0-.191.061-.345.182-.463a.634.634 0 01.469-.181c.18 0 .33.06.451.181l1.201 1.248.727.85-.041-1.219V2.824c0-.187.06-.342.181-.463a.636.636 0 01.47-.187.627.627 0 01.65.65v7.248l-.041 1.219.726-.85 1.207-1.248a.6.6 0 01.451-.181c.188 0 .342.06.463.181a.615.615 0 01.182.463.648.648 0 01-.2.475l-2.953 3.035z"})})},67220:(e,t,s)=>{s.d(t,{S:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("bot",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.996 16C12.381 16 16 12.38 16 8s-3.627-8-8.012-8C3.611 0 0 3.62 0 8s3.62 8 7.996 8zm0-1.594A6.375 6.375 0 011.61 8a6.366 6.366 0 016.38-6.398A6.393 6.393 0 0114.398 8a6.383 6.383 0 01-6.403 6.406zM4.648 8.518c0 .21.17.364.386.364h2.53l-1.346 3.605c-.202.527.355.813.703.395l4.168-5.176a.515.515 0 00.132-.325c0-.209-.17-.356-.379-.356H8.305l1.346-3.613c.201-.518-.356-.812-.704-.395l-4.16 5.184a.484.484 0 00-.14.317z"})})},6637:(e,t,s)=>{s.d(t,{I:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("filterCircled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.41797 6.75879H11.5889C11.9307 6.75879 12.1699 6.54688 12.1699 6.22559C12.1699 5.9043 11.9307 5.68555 11.5889 5.68555H4.41797C4.07617 5.68555 3.84375 5.9043 3.84375 6.22559C3.84375 6.54688 4.07617 6.75879 4.41797 6.75879ZM5.36816 9.02148H10.6455C10.9805 9.02148 11.2197 8.80273 11.2197 8.48145C11.2197 8.16016 10.9805 7.94141 10.6455 7.94141H5.36816C5.02637 7.94141 4.78711 8.16016 4.78711 8.48145C4.78711 8.80273 5.02637 9.02148 5.36816 9.02148ZM6.35254 11.2773H9.6543C9.99609 11.2773 10.2354 11.0654 10.2354 10.7441C10.2354 10.4229 9.99609 10.2041 9.6543 10.2041H6.35254C6.01074 10.2041 5.77148 10.4229 5.77148 10.7441C5.77148 11.0654 6.01074 11.2773 6.35254 11.2773Z"})})},43039:(e,t,s)=>{s.d(t,{m:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("flatNotionLogoMenuBar",{viewBox:"0 0 128 128",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.8 10.25H51.2C42.07 10.25 35.839 10.258 31.0171 10.6519C26.3149 11.0361 23.8625 11.7357 22.1257 12.6206C18.0332 14.7059 14.7059 18.0332 12.6206 22.1257C11.7357 23.8625 11.0361 26.3149 10.6519 31.0171C10.258 35.839 10.25 42.07 10.25 51.2V76.8C10.25 85.93 10.258 92.161 10.6519 96.9829C11.0361 101.685 11.7357 104.138 12.6206 105.874C14.7059 109.967 18.0332 113.294 22.1257 115.379C23.8625 116.264 26.3149 116.964 31.0171 117.348C35.839 117.742 42.07 117.75 51.2 117.75H76.8C85.93 117.75 92.161 117.742 96.9829 117.348C101.685 116.964 104.138 116.264 105.874 115.379C109.967 113.294 113.294 109.967 115.379 105.874C116.264 104.138 116.964 101.685 117.348 96.9829C117.742 92.161 117.75 85.93 117.75 76.8V51.2C117.75 42.07 117.742 35.839 117.348 31.0171C116.964 26.3149 116.264 23.8625 115.379 22.1257C113.294 18.0332 109.967 14.7059 105.874 12.6206C104.138 11.7357 101.685 11.0361 96.9829 10.6519C92.161 10.258 85.93 10.25 76.8 10.25ZM3.48779 17.4723C0 24.3175 0 33.2783 0 51.2V76.8C0 94.7217 0 103.683 3.48779 110.528C6.55574 116.549 11.4511 121.444 17.4723 124.512C24.3175 128 33.2783 128 51.2 128H76.8C94.7217 128 103.683 128 110.528 124.512C116.549 121.444 121.444 116.549 124.512 110.528C128 103.683 128 94.7217 128 76.8V51.2C128 33.2783 128 24.3175 124.512 17.4723C121.444 11.4511 116.549 6.55574 110.528 3.48779C103.683 0 94.7217 0 76.8 0H51.2C33.2783 0 24.3175 0 17.4723 3.48779C11.4511 6.55574 6.55574 11.4511 3.48779 17.4723Z"}),(0,i.jsx)("path",{d:"M34.8247 30H51.877L82.6339 73.8338V38.7877L72.8 36.9046C72.5211 35.0215 72.9047 33.4174 73.9508 32.0923C74.997 30.6974 76.6708 30 78.9723 30H99.5816C100.14 31.4646 100.105 32.7897 99.4769 33.9754C98.919 35.161 97.838 36.1026 96.2339 36.8L92.8862 38.3692V97.1631C90.9334 98.0697 89.4339 98.6626 88.3877 98.9415C87.3416 99.2205 86.0513 99.36 84.517 99.36C82.4246 99.36 80.5416 98.8718 78.8677 97.8954C77.1939 96.919 75.6595 95.4195 74.2646 93.3969L45.4954 52.7015V89.3169L55.957 91.2C56.2359 93.0831 55.8523 94.722 54.8062 96.1169C53.76 97.5118 52.0862 98.2092 49.7847 98.2092C48.32 98.2092 46.2975 98.1744 43.717 98.1046C41.1365 98.0349 38.8 98 36.7077 98C34.8944 98 33.1857 98.0349 31.5816 98.1046C30.0472 98.1046 29.0011 98.1395 28.4431 98.2092C28.3036 97.8605 28.199 97.4769 28.1293 97.0585C28.0595 96.64 28.0247 96.2564 28.0247 95.9077C28.0247 94.9313 28.2688 94.0246 28.757 93.1877C29.3149 92.3508 30.2565 91.6882 31.5816 91.2L35.2431 89.7354V37.9508L28.6524 36.5908C28.3734 34.7077 28.757 33.1385 29.8031 31.8831C30.8493 30.6277 32.5231 30 34.8247 30Z"})]})})},88507:(e,t,s)=>{s.d(t,{I:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("openTeamSearch",{viewBox:"0 0 16 14",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M9.506 13.342h4.447c.348 0 .621-.11.82-.328.2-.22.3-.516.3-.891V4.852c0-.375-.1-.67-.3-.885-.199-.219-.472-.328-.82-.328H9.922v1.136h3.709c.101 0 .178.026.228.077.051.05.076.127.076.228v6.815c0 .101-.025.177-.076.228-.05.05-.127.076-.228.076H9.506v1.143zm2.28-6.358h.925c.129 0 .193-.064.193-.193v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .129.062.193.187.193zm0 2.168h.925c.129 0 .193-.066.193-.199v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .133.062.2.187.2zm0 2.163h.925c.129 0 .193-.067.193-.2v-.896c0-.13-.064-.194-.193-.194h-.926c-.125 0-.187.065-.187.194v.896c0 .133.062.2.187.2zm-10.864.808c0 .375.1.672.299.89.199.22.474.329.826.329H9.44c.348 0 .621-.11.82-.328.204-.22.305-.516.305-.891V1.928c0-.38-.101-.676-.304-.89-.2-.22-.473-.329-.82-.329H2.046c-.352 0-.627.11-.826.328-.2.215-.3.512-.3.89v10.196zm1.142-.228V2.162c0-.105.026-.183.077-.234.05-.051.127-.076.228-.076h6.75c.102 0 .178.025.229.076.05.05.076.129.076.234v9.733c0 .101-.026.177-.076.228-.051.05-.127.076-.229.076H2.37c-.101 0-.178-.025-.228-.076-.051-.05-.077-.127-.077-.228zm1.588.85h.891v-1.946c0-.117.06-.176.182-.176h2.039c.12 0 .181.059.181.176v1.945h.89V10.5c0-.25-.058-.435-.175-.557-.117-.125-.295-.187-.533-.187H4.36c-.238 0-.416.062-.533.187-.117.122-.176.307-.176.557v2.244zm.17-8.362h1.12c.156 0 .234-.078.234-.235v-1.09c0-.156-.078-.234-.235-.234H3.822c-.148 0-.222.078-.222.235v1.09c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.235v-1.09c0-.156-.077-.234-.229-.234H6.541c-.152 0-.229.078-.229.235v1.09c0 .156.077.234.229.234zM3.822 6.627h1.12c.156 0 .234-.078.234-.234V5.309c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.234V5.309c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .156.077.234.229.234zm-2.719 2.25h1.12c.156 0 .234-.08.234-.24V7.553c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .16.074.24.222.24zm2.719 0h1.12c.152 0 .228-.08.228-.24V7.553c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .16.077.24.229.24z"})})})},90028:(e,t,s)=>{s.d(t,{j:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("searchInPage",{viewBox:"0 0 12 14",svg:(0,i.jsx)("path",{d:"M2.877 13.365h6.24c.63 0 1.104-.164 1.424-.492.32-.324.48-.8.48-1.43V6.13c0-.274-.015-.504-.046-.691a1.531 1.531 0 00-.182-.522 2.185 2.185 0 00-.387-.498l-3.07-3.123a2.11 2.11 0 00-.48-.38 1.528 1.528 0 00-.51-.183A3.464 3.464 0 005.7.68H2.877c-.629 0-1.104.164-1.424.492-.32.324-.48.8-.48 1.43v8.841c0 .633.16 1.112.48 1.436.32.324.795.486 1.424.486zm.094-1.154c-.282 0-.492-.072-.633-.217-.14-.144-.211-.351-.211-.621V2.678c0-.27.07-.479.21-.627.142-.149.354-.223.64-.223h2.496V5.04c0 .418.101.73.304.938.207.207.52.31.938.31h3.158v5.086c0 .27-.07.477-.21.621-.142.145-.354.217-.64.217H2.971zm3.855-6.938c-.12 0-.209-.027-.263-.082-.051-.054-.077-.142-.077-.263V1.986l3.229 3.287H6.826z"})})},96895:(e,t,s)=>{s.d(t,{q:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("sidebarRight",{viewBox:"0 0 23 18",svg:(0,i.jsx)("path",{d:"M3.06641 17.998L19.9609 17.998C22.0117 17.998 23.0273 16.9824 23.0273 14.9707L23.0273 3.04688C23.0273 1.03516 22.0117 0.0195312 19.9609 0.0195312L3.06641 0.0195312C1.02539 0.0195312 0 1.02539 0 3.04688L0 14.9707C0 16.9922 1.02539 17.998 3.06641 17.998ZM3.08594 16.4258C2.10938 16.4258 1.57227 15.9082 1.57227 14.8926L1.57227 3.125C1.57227 2.10938 2.10938 1.5918 3.08594 1.5918L19.9414 1.5918C20.9082 1.5918 21.4551 2.10938 21.4551 3.125L21.4551 14.8926C21.4551 15.9082 20.9082 16.4258 19.9414 16.4258ZM14.082 16.7285L15.6152 16.7285L15.6152 1.29883L14.082 1.29883ZM17.4902 5.21484L19.5801 5.21484C19.8828 5.21484 20.1367 4.95117 20.1367 4.66797C20.1367 4.375 19.8828 4.12109 19.5801 4.12109L17.4902 4.12109C17.1973 4.12109 16.9336 4.375 16.9336 4.66797C16.9336 4.95117 17.1973 5.21484 17.4902 5.21484ZM17.4902 7.74414L19.5801 7.74414C19.8828 7.74414 20.1367 7.48047 20.1367 7.1875C20.1367 6.89453 19.8828 6.65039 19.5801 6.65039L17.4902 6.65039C17.1973 6.65039 16.9336 6.89453 16.9336 7.1875C16.9336 7.48047 17.1973 7.74414 17.4902 7.74414ZM17.4902 10.2637L19.5801 10.2637C19.8828 10.2637 20.1367 10.0195 20.1367 9.72656C20.1367 9.43359 19.8828 9.17969 19.5801 9.17969L17.4902 9.17969C17.1973 9.17969 16.9336 9.43359 16.9336 9.72656C16.9336 10.0195 17.1973 10.2637 17.4902 10.2637Z"})})},36308:(e,t,s)=>{s.d(t,{V:()=>n});s(67294);var r=s(45238),i=s(85893);const n=(0,r.I)("title",{viewBox:"0 0 14 10",svg:(0,i.jsx)("path",{d:"M10.674 9.45c.293 0 .576-.052.85-.153.273-.098.515-.238.726-.422.215-.184.383-.4.504-.65h.03v.662a.569.569 0 00.163.416c.11.101.25.152.422.152a.579.579 0 00.428-.164c.11-.105.164-.256.164-.451V4.973c0-.43-.104-.805-.31-1.125-.208-.32-.5-.569-.88-.744-.378-.18-.828-.27-1.347-.27-.594 0-1.114.115-1.559.346-.445.226-.75.533-.914.92-.031.07-.056.14-.076.21a.684.684 0 00-.03.194c0 .148.05.27.147.363.102.09.23.135.387.135a.61.61 0 00.287-.064.555.555 0 00.217-.2c.172-.32.377-.554.615-.703.238-.148.533-.223.885-.223.426 0 .76.112 1.002.334.242.223.363.528.363.915v.486l-1.828.1c-.77.042-1.361.23-1.775.562-.41.328-.616.773-.616 1.336 0 .379.09.71.27.996.183.285.435.508.756.668.324.16.697.24 1.119.24zm.328-.938c-.367 0-.666-.092-.897-.276a.906.906 0 01-.345-.738.86.86 0 01.34-.709c.23-.184.558-.29.984-.322l1.664-.106v.598c0 .293-.078.557-.234.791a1.69 1.69 0 01-.627.557c-.266.136-.56.205-.885.205zM.689 9.414c.2 0 .354-.045.463-.135.114-.086.202-.234.264-.445l.65-1.816h3.346l.65 1.816c.063.21.149.36.258.445.114.09.268.135.463.135.207 0 .371-.057.492-.17a.593.593 0 00.188-.463c0-.129-.027-.27-.082-.422L4.79 1.357c-.09-.246-.22-.43-.393-.55C4.23.686 4.012.625 3.742.625c-.508 0-.847.244-1.02.732L.116 8.39a1.3 1.3 0 00-.076.404c0 .195.057.348.17.457.117.11.277.164.48.164zm1.717-3.486L3.73 2.119h.03l1.324 3.809H2.406z"})})}}]);