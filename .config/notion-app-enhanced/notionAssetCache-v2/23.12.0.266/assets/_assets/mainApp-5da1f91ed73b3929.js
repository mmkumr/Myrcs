(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5906],{78519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initialize:()=>s});var i=n(80444),o=n(54642);async function s(e,t){if(await i.default.waitUntilRendered(),e.currentUser.isLoggedIn()&&!Boolean(t.fromPageRefresh)){const{CsatMilestoneStore:t}=e,n=await o.getCsatMilestones(e,{});"success"===n.type&&t.setState({data:n.data})}}},22974:(e,t,n)=>{"use strict";n.d(t,{MH:()=>b,rz:()=>v,h0:()=>u,I6:()=>g,LH:()=>f});var i=n(8848);var o=n(97880),s=n(18514),r=n(30021),a=n(4926),d=n(47839);let l;const c=10;function u(e,t){const{device:n,ThemeStore:o}=e,{mode:s,usingSystemTheme:r}=t,l={mode:s};o.setState(l),e.mobileNative&&e.mobileNative.setTheme(s,r),d.setTheme(function(e){const t=(0,i.gh)({theme:e});return{mode:e,colors:{white:i.ZP.white,blue:i.ZP.blue},borderRadius:4,textColor:t.regularTextColor,popoverBackgroundColor:t.popoverBackground,popoverBoxShadow:t.mediumBoxShadow,inputBoxShadow:t.inputBoxShadow,inputBackgroundColor:t.inputBackground,dividerColor:t.darkDividerColor,shadowOpacity:t.shadowOpacity}}(s)),localStorage.setItem("theme",JSON.stringify(l)),function(e,t){if(0===e.nativeScrollbarWidth)return;const n=document.getElementById("scroll-properties");n&&(n.innerHTML=`\n\t\t\t::-webkit-scrollbar {\n\t\t\t\twidth: 10px;\n\t\t\t\theight: 10px;\n\t\t\t}\n\t\t\t::-webkit-scrollbar {\n\t\t\t\tbackground: transparent;\n\t\t\t}\n\t\t\t::-webkit-scrollbar-track {\n\t\t\t\tbackground: ${p[t]};\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb {\n\t\t\t\tbackground:${h[t]};\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\t\tbackground:${m[t]};\n\t\t\t}\n\t\t`,a.Z.setState(c))}(n,s),"dark"===s?document.body.classList.add("dark"):document.body.classList.remove("dark")}const p={light:"#EDECE9",dark:"rgba(202, 204, 206, 0.04)"},h={light:"#D3D1CB",dark:"#474c50"},m={light:"#AEACA6",dark:"rgba(202, 204, 206, 0.3)"};function g(e){l=e}function v(e){l=void 0,r.Z.setState(e)}function f(e){const t=S(e);switch(t){case"dark":case"light":u(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let n="light";n=t&&t.api.getTheme?await t.api.getTheme():e.device.prefersDarkInterface?"dark":"light",u(e,{mode:n,usingSystemTheme:!0})}(e);break;default:(0,o.t1)(t)}}function b(e){return l||S(e)}function S(e){let t=r.Z.state;return t||(t=e.device.isMobile||(0,s.Sr)()?"system":e.ThemeStore.state.mode),"dark"===(n=t)||"light"===n||"system"===n?n:"system";var n}},16091:(e,t,n)=>{"use strict";n.d(t,{RD:()=>j,gc:()=>T,gl:()=>I,u7:()=>M});var i=n(67294),o=n(36769),s=n(480),r=n(86628),a=n(41432),d=n(31412),l=n(39699),c=n(37181),u=n(81415),p=(n(95477),n(19124)),h=n(68056),m=n(89086),g=n(28685),v=n(80444),f=n(77080),b=n(83212),S=n(26350),y=n(24666),w=n(41752),x=n(89626),k=n(85893);const C=(0,d.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Get instant answers to your questions"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"Ask a question about anything in your workspace. Notion AI will search across your pages and generate an answer."}});function M(){window.__c={n:"SpaceForAiOnboardingTooltip"};const e=(0,s.O7)(),t=function(){const e=(0,s.O7)(),t=(0,r.VK)((()=>{const t=v.default.state.mainEditorCurrentBlockStore;return t&&b.Z.getMode(e,t)}),[e]);return(0,r.VK)((()=>{if(e.device.isMobile)return;if(!f.default.checkGate("space_for_ai_tooltip_enabled"))return;const{currentUserSettingsStore:n,inAppCalloutStore:i}=v.default.state;if(!i.canShow("ai_onboarding_tooltip"))return;const o=null==n?void 0:n.getSettings();if(!o)return;if(o.signup_time&&o.signup_time>16770636e5)return;if("space_for_ai"!==(0,x.sy)())return;if(!(0,p.GD)(t))return;const s=y.default.state;if("editing"===s.mode){const e=(0,h.QY)(s.multiSelection);if(e&&(0,m.wd)(e.selection)){const t=e.store,n=g.E.findEditableWithStore(t);if(n){const e="block"===t.pointer.table?S.G.createChildStore(t,t.pointer):void 0,i=e&&e.getType(),o=Boolean(i&&(0,a.hD)(i)),s=t.getValue();if(o&&!s)return n}}}}),[e,t])}();return t?(0,k.jsx)(u.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,k.jsx)(d.FormattedMessage,{...C.spaceForAiHeader}),content:(0,k.jsx)(d.FormattedMessage,{...C.spaceForAiContent}),onCloseClick:()=>(0,x.h1)(e)}):null}function j(e){window.__c={n:"AskAIAnythingOnboardingTooltip"};const{originRef:t,openState:n}=e,i=(0,s.O7)(),o=(0,r.VK)((()=>(0,x.sy)()),[]);if(i.device.isMobile)return null;return"ask_ai_anything"===o&&"initialPrompt"===n.stage?(0,k.jsx)(u.U,{origin:t,placementToOrigin:"top",header:(0,k.jsx)(d.FormattedMessage,{...C.askAiAnythingHeader}),content:(0,k.jsx)(d.FormattedMessage,{...C.askAiAnythingContent}),onCloseClick:()=>(0,x.h1)(i)}):null}function I(e){window.__c={n:"RefineAIResponseOnboardingTooltip"};const{originRef:t,openState:n,isInputEmpty:i}=e,o=(0,s.O7)(),a=(0,r.VK)((()=>(0,x.sy)()),[]);if(o.device.isMobile)return null;const l="refine_ai_response"===a&&"results"===n.stage&&!n.loading&&"cursor"===n.context.type&&i;return(0,k.jsx)(u.U,{origin:l?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,k.jsx)(d.FormattedMessage,{...C.refineAiResponseHeader}),content:(0,k.jsx)(d.FormattedMessage,{...C.refineAiResponseContent}),onCloseClick:()=>(0,x.h1)(o)})}function T(e){window.__c={n:"ShowAssistantLocationTooltip"};const{origin:t}=e,n=(0,s.O7)(),o=(0,i.useCallback)((()=>{const{currentUserSettingsStore:e}=v.default.state;e&&(0,w.C)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e})}),[n]);return(0,k.jsx)(u.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,k.jsx)(d.FormattedMessage,{...C.showAssistantLocationHeader}),content:(0,k.jsx)(d.FormattedMessage,{...C.showAssistantLocationContent}),onCloseClick:o})}(0,o.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=v.default.state;t&&l.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{c.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},55031:(e,t,n)=>{"use strict";n.d(t,{G:()=>c,y:()=>l});var i=n(51454),o=n(28020),s=n(24646),r=n(4926),a=n(85394),d=n(31156);function l(e,t){const{theme:n,rightEdgeDistance:a,isInPeekRenderer:l}=t,u=t.width??36,p=(0,s.ll)(e,l)-(0,s.vJ)(e);return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",background:n.whiteButtonBackground,bottom:c(e,16+r.Z.state),right:a+r.Z.state,width:u,height:u,borderRadius:"100%",fontSize:20,boxShadow:n.lightBoxShadow,zIndex:i.hT,opacity:o.tu.state?0:1,transform:`translateX(-${p}px) translateZ(0)`,transition:`\n\t\t\topacity ${d.Z.transitionDuration}ms,\n\t\t\tcolor ${d.Z.transitionDuration}ms,\n\t\t\ttransform 200ms\n\t\t`}}function c(e,t){const n=e.device.isMobileNative&&e.device.isTablet&&e.device.isIOS;return e.WindowSizeStore.getSafePaddingBottomCSS(t+(n?a.default.height:0))}},77207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});n(67294);var i=n(480),o=n(86628),s=n(55367),r=n(80796),a=n(69784),d=n(85893);const l=function(e){window.__c={n:"CursorListener"};const t=(0,i.Fy)(),n=(0,o.VK)((()=>({initiator:r.Z.state.initiator,isDragging:s.ZP.state.isDragging})),[]),l=(0,o.VK)((()=>({active:a.Z.state.isActive,moved:!!a.Z.state.isActive&&a.Z.state.moved})),[]),c=l.moved?"default":n.isDragging?"-webkit-grabbing":"text";let u="notion-cursor-listener";return"-webkit-grabbing"===c&&(u+=" notion-disable-local-cursor"),t.isIOS&&("touch"===n.initiator||n.isDragging||l.active?document.body.classList.add("notion-disable-webkit-user-select"):document.body.classList.remove("notion-disable-webkit-user-select")),(0,d.jsx)("div",{style:{...e.style,cursor:c},className:u,children:e.children})}},85394:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var i=n(67294),o=n(83355),s=n(480),r=n(42107),a=n(81846),d=n(57037),l=n(20162),c=n(51454),u=n(50906),p=n(16971),h=n(87531),m=n(43250),g=n(74948),v=n(5162),f=n(80444),b=n(72653),S=n(64921),y=n(58925),w=n(85893);class x extends o.Z{constructor(){super(...arguments),this.handleClickFind=()=>{h.Kf({environment:this.environment,analyticsFrom:"mobile-bottom-bar"}),u.nBz(this.environment,{itemName:"search"})},this.handleClickQuickAdd=()=>{g.quickAddPage({environment:this.environment,from:"mobile_bottom_bar"}),u.nBz(this.environment,{itemName:"add_page"})},this.handleUndo=()=>{p.Yw(this.environment,!0),u.nBz(this.environment,{itemName:"undo"})},this.handleRedo=()=>{p.KX(this.environment,!0),u.nBz(this.environment,{itemName:"redo"})},this.canQuickAdd=this.createComputedStore((()=>Boolean(f.default.state.currentSpaceStore&&f.default.state.currentSpaceStore.canEdit())))}renderComponent(){const e=b.Z.state,t=(0,v.Y)("supportsNativeBottomBar"),{isTablet:n}=this.environment.device;if(e)return t?(0,w.jsx)("div",{className:m.alX,children:(0,w.jsx)(I,{})}):(0,w.jsx)("div",{style:this.getWrapStyle(e),className:m.rKl,children:n?this.renderTabletButtons():this.renderPhoneButtons()})}renderPhoneButtons(){return(0,w.jsxs)(i.Fragment,{children:[this.renderSearchButton(),(0,w.jsx)(I,{}),this.renderQuickAddPageButton()]})}renderTabletButtons(){return(0,w.jsxs)(i.Fragment,{children:[this.renderSearchButton(),(0,w.jsx)(I,{}),this.renderQuickAddPageButton(),this.renderUndoRedoButtons()]})}renderSearchButton(){return(0,w.jsx)(S.Z,{style:C(this.environment),onClick:this.handleClickFind,mobileFeedback:!0,children:(0,d.w)(this.getIconStyle())})}renderQuickAddPageButton(){return(0,w.jsx)(S.Z,{style:M(this.environment),onClick:this.handleClickQuickAdd,mobileFeedback:!0,disabled:!this.canQuickAdd.state,disabledFeedback:!0,children:(0,r.d)(this.getIconStyle())})}renderUndoRedoButtons(){return(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)(S.Z,{style:j(this.environment),onClick:this.handleUndo,mobileFeedback:!0,disabled:!p.L0(),disabledFeedback:!0,children:(0,l.O)(this.getIconStyle())}),(0,w.jsx)(S.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"none",width:x.tabletButtonWidth,paddingRight:4},onClick:this.handleRedo,mobileFeedback:!0,disabled:!p.AZ(),disabledFeedback:!0,children:(0,a.Y)(this.getIconStyle())})]})}getWrapStyle(e){const{WindowSizeStore:t}=this.environment,{isTablet:n}=this.environment.device;return{position:"absolute",left:0,right:0,bottom:0,display:"flex",justifyContent:n?"flex-start":"space-around",height:t.getSafePaddingBottomCSS(x.height),paddingBottom:t.state.paddingBottomCSS,background:this.theme.contentBackground,borderTop:`1px ${this.theme.darkDividerColor} solid`,zIndex:c.D_,pointerEvents:e?"auto":"none",cursor:"pointer"}}getIconStyle(){return{width:26,fill:this.theme.regularTextColor}}}x.displayName="MobileBottomBar",x.height=44,x.tabletButtonWidth=54;const k=x;function C(e){const{WindowSizeStore:t}=e,{isTablet:n}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1,paddingLeft:t.getSafePaddingLeftCSS(18),...n&&{flex:"none",paddingLeft:2,width:x.tabletButtonWidth,justifyContent:"center"}}}function M(e){const{WindowSizeStore:t}=e,{isTablet:n}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:1,paddingRight:t.getSafePaddingRightCSS(18),...n&&{justifyContent:"center",flex:"none",paddingRight:0,width:x.tabletButtonWidth,marginRight:"auto"}}}function j(e){const{WindowSizeStore:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:"none",paddingLeft:t.getSafePaddingLeftCSS(18),width:x.tabletButtonWidth}}function I(){window.__c={n:"MobileBottomBarUpdatesButton"};const e=(0,s.O7)(),{isTablet:t}=e.device;return(0,w.jsx)(y.Z,{format:t?y.Z.Format.MobileBottomBarTablet:y.Z.Format.MobileBottomBarPhone})}},49273:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>cd});var i=n(67294),o=n(34958),s=n(77907),r=n(83355),a=n(13991),d=n(79946),l=n(49271),c=n(8848),u=n(25278),p=n(71644),h=n(99405),m=n(89101),g=n(29369),v=n(32739),f=n(12139),b=n(31412),S=n(50906),y=n(47839),w=n(32603),x=n(91376),k=n(75018),C=n(73966),M=n(70782),j=n(39634),I=n(37181),T=n(95477),_=n(80444),L=n(26350);const P=(0,s.lazyComponent)(s.deps.StudentGroupSignup,(e=>e.default));var A=n(480),Z=n(86628),E=n(24405),U=n(59054),B=n(49204),R=n(82990),N=n(42922),V=n(61519),O=n(63296),D=n(64369),z=n(74016),F=n(85893);const W=function(e){window.__c={n:"TeamInviteLinkJoinPage"};const{teamStore:t}=e,n=(0,A.O7)(),{teamName:i}=(0,Z.VK)((()=>({teamName:t.getName()})),[t]),o=(0,E.yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:R.Z.fontWeight.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:R.Z.fontWeight.semibold,marginLeft:10}})),[]);return(0,F.jsxs)("div",{style:o.container,children:[(0,F.jsx)(z.p,{store:t,disabled:!0,size:55}),(0,F.jsx)("div",{style:o.title,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.page.title",defaultMessage:"You've been invited to join {teamName}",values:{teamName:i}})}),(0,F.jsx)("div",{style:o.subtitle,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.page.subtitle",defaultMessage:"You can access the content in the teamspace if you join the teamspace."})}),(0,F.jsxs)("div",{style:o.buttonContainer,children:[(0,F.jsx)(N.Z,{isLarge:!0,onClick:async()=>{const e=n.currentUser.id;if(!e)return;const i=[{type:"member",entity_type:"user",user_id:e}];await B.um({environment:n,userId:e,teamStore:t,user:i}),S.Phj(n,{store:t,selection:"yes"})},children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.joinTeam.label",defaultMessage:"Join teamspace"})}),(0,F.jsx)(O.Z,{isLarge:!0,style:o.rightButton,onClick:async()=>{S.Phj(n,{store:t,selection:"no"}),await B.Id({environment:n})},children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,F.jsx)(V.Z,{size:48,innerStyle:o.divider}),(0,F.jsx)(D.Z,{isSmall:!0,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkJoinPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})};var q=n(14889);function H(e){window.__c={n:"TeamInviteLinkRequestPageContent"};const{teamStore:t,teamName:n,onRequestClick:i}=e,o=(0,A.O7)(),s=(0,E.yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:R.Z.fontWeight.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:R.Z.fontWeight.semibold,marginLeft:10}})),[]);return(0,F.jsxs)("div",{style:s.container,children:[(0,F.jsx)(z.p,{store:t,disabled:!0,size:55}),(0,F.jsx)("div",{style:s.title,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.title",defaultMessage:"Request access to {teamName}",values:{teamName:n??K()}})}),(0,F.jsx)("div",{style:s.subtitle,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.subtitle",defaultMessage:"You can access this teamspace if a teamspace owner approves your request."})}),(0,F.jsxs)("div",{style:s.buttonContainer,children:[(0,F.jsx)(N.Z,{isLarge:!0,onClick:i,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.label",defaultMessage:"Request access"})}),(0,F.jsx)(O.Z,{isLarge:!0,style:s.rightButton,onClick:async()=>{await B.Id({environment:o})},children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,F.jsx)(V.Z,{size:48,innerStyle:s.divider}),(0,F.jsx)(D.Z,{isSmall:!0,children:(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})}function K(){return(0,F.jsx)(b.FormattedMessage,{id:"teamInviteLinkRequestPage.privateTeamspace.label",defaultMessage:"Private Teamspace"})}const G=function(e){window.__c={n:"TeamInviteLinkRequestPage"};const{teamStore:t}=e,[n,o]=(0,i.useState)(!1),{teamName:s}=(0,Z.VK)((()=>({teamName:t.getName()})),[t]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(H,{teamStore:t,teamName:s,onRequestClick:()=>o(!0)}),(0,F.jsx)(q.Z,{teamStore:t,teamName:s??K(),teamId:t.id,isModalOpen:n,onDismiss:()=>o(!1)})]})};function $(e){const{teamAccessLevel:t,teamStore:n}=e;switch(t){case"open":return(0,F.jsx)(W,{teamStore:n});case"closed":case"private":return(0,F.jsx)(G,{teamStore:n})}}const Q=function(e){window.__c={n:"TeamInviteLinkPage"};const{teamId:t}=e,n=(0,A.O7)(),{teamAccessLevel:o,teamStore:r}=(0,Z.VK)((()=>{const e=new L.zX(n,{table:g.e0,id:t});return{teamAccessLevel:e.getTeamAccessLevel(),teamStore:e}}),[n,t]),[{value:a}]=(0,U.r5)((async()=>await B.Ng({environment:n,teamId:t})),[n,t]);(0,i.useEffect)((()=>{!0===(null==a?void 0:a.isValidTeamRequest)&&null!=a&&a.isTeamMember&&(async()=>{var e;const t=null===(e=n.currentUser)||void 0===e?void 0:e.id;t&&r&&await B.t_({environment:n,userId:t,teamStore:r})})()}),[n,r,a]);const d=(0,E.yK)((()=>({container:{display:"flex",justifyContent:"center",height:"100%"}})),[]);return a?(0,F.jsx)("div",{style:d.container,children:a.isValidTeamRequest?(0,F.jsx)($,{teamStore:r,teamAccessLevel:o}):"nonSpaceMember"===a.invalidRequestReason?(0,F.jsx)(s.LazyPageError,{route:{name:"teamsInvite",teamId:t},publicPageData:void 0}):(0,F.jsx)(s.LazyPageError,{route:{name:"notFound"},publicPageData:void 0})}):null},Y=(0,s.lazyComponent)(s.deps.Templates,(e=>e.TemplateSubmission));var X=n(84549),J=n(6495),ee=n(11342);function te(e,t){const n=t.deviceType,i=t.mobileAppVersion;if(!(0,J.wv)(e)||"local"===e||!t.isMobileNative||!i)return!1;return function(e){const{environmentName:t,deviceType:n,mobileAppVersion:i,androidVersions:o,iosVersions:s}=e,r=(0,ee.parseMobileAppVersion)(i,"android"===n);if(!r)return!1;if("android"===n&&!o||"ios"===n&&!s)return!1;let a;if("android"===n){if(!o)return!1;a=(0,ee.parseMobileAppVersion)(o[t],!0)}else{if(!s)return!1;a=(0,ee.parseMobileAppVersion)(s[t],!1)}return!!a&&(0,ee.isLessThanVersion)(r,a)}({environmentName:e,deviceType:n,mobileAppVersion:i,iosVersions:{staging:"0.1.1022",development:"0.5.1168",production:"0.4.1021"}})}var ne=n(51454),ie=n(50950),oe=n(16971),se=n(72899),re=n(16091),ae=n(81598),de=n(69098),le=n(30106),ce=n(28020),ue=n(19124),pe=n(64286),he=n(67669);const me=(0,s.lazyComponent)(s.deps.moveTo,(e=>e.MoveToMenuRenderer));var ge=n(48451),ve=n(50770),fe=n(94841),be=n(74948),Se=n(36596),ye=n(38676);function we(){window.__c={n:"SidebarLoadingSkeleton"};const e=(0,Z.VK)((()=>ye.gV.state?ye.GZ.state:0),[]),t=(0,E.yK)((t=>{const n={width:22,height:22,borderRadius:4},i={height:10,minHeight:10,borderRadius:10};return{sidebar:{backgroundColor:t.sidebarBackground,boxShadow:t.sidebarBoxShadow,display:"flex",minWidth:e,flexDirection:"column",padding:"12px 14px",overflow:"hidden"},heroSection:{marginBottom:19,display:"flex",alignItems:"center"},heroSectionIcon:{padding:"1px",...n},heroSectionTitle:{width:177,marginLeft:8,...i},toplevelMenu:{marginBottom:16,width:78,...i},toplevelMenuLast:{marginBottom:36,width:135,...i},sectionHeader:{marginBottom:12,width:56,...i},pageRow:{display:"flex",alignItems:"center",marginBottom:8},pageChevron:{width:12,height:12,display:"block",marginRight:4,fill:"dark"===t.mode?t.accentColors.gray[300]:t.accentColors.gray[100]},pageIcon:{...n},pageTitle:{marginLeft:6,...i}}}),[e]),n=(0,F.jsxs)("div",{style:t.heroSection,children:[(0,F.jsx)(Se.Z,{style:t.heroSectionIcon,emphasized:!0}),(0,F.jsx)(Se.Z,{style:t.heroSectionTitle,emphasized:!0})]}),o=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Se.Z,{style:t.toplevelMenu,emphasized:!0}),(0,F.jsx)(Se.Z,{style:t.toplevelMenu,emphasized:!0}),(0,F.jsx)(Se.Z,{style:t.toplevelMenuLast,emphasized:!0})]}),s=(0,F.jsx)(Se.Z,{style:t.sectionHeader,emphasized:!0}),r=(0,i.useMemo)((()=>Array(5).fill(null).map((()=>Array(4).fill(null).map((()=>Math.floor(4*Math.random())))))),[]).map(((e,n)=>e.map(((e,i)=>(0,F.jsxs)("div",{style:{...xe(n),...t.pageRow},children:[(0,F.jsx)("svg",{viewBox:"0 0 30 30",style:t.pageChevron,children:(0,F.jsx)("polygon",{points:"17.4,15 7,25.2 9.8,28 23,15 9.8,2 7,4.8"})}),(0,F.jsx)(Se.Z,{style:t.pageIcon,emphasized:!0}),(0,F.jsx)(Se.Z,{style:{...t.pageTitle,width:80+20*e},emphasized:!0})]},`${n}-${i}`)))));return(0,F.jsxs)("div",{style:t.sidebar,children:[n,o,s,r]})}function xe(e){return 0===e?{}:{animation:`1s ease-in ${e}s 1 normal both running fadein`}}var ke=n(24646),Ce=n(5162),Me=n(51),je=n(21273),Ie=n(43604),Te=n(77080),_e=n(27242),Le=n(78291),Pe=n(12309),Ae=n(33293);function Ze(){window.__c={n:"BillingModalContainer"};const e=(0,Z.VK)((()=>Pe.Z.state.modalInfoById),[]);return(0,F.jsx)(F.Fragment,{children:Object.entries(e).map((e=>{let[t,n]=e;const{content:i,dismissUsing:o,isOpen:s,modalStyle:r,onClosed:a,onDismiss:d}=n;return(0,F.jsx)(Ae.q,{dismissUsing:o,isOpen:s,onClosed:a,onDismiss:d,style:r,children:i},t)}))})}n(21703);var Ee=n(30120),Ue=n(92595),Be=n(54642);async function Re(e,t){const n=await Be.stripeGetTestClock(t,{spaceId:e});if("success"===n.type){if("advancing"===n.data.status)throw new Error("Test clock is advancing. Please try again in a few seconds.");return n.data.epochSeconds}}async function Ne(e){const{environment:t,spaceId:n,advanceTestClockArgument:i}=e;if(i)return"number"==typeof i?i:"function"==typeof i?await async function(e){const{environment:t,spaceId:n,callback:i}=e,o=await Re(n,t);if(o)return i(o)}({environment:t,spaceId:n,callback:i}):"object"==typeof i?await async function(e){const{environment:t,spaceId:n,durationLike:i}=e,o=await Re(n,t);if(!o)return;const s=Ee.ou.fromSeconds(o),r=Ee.nL.fromDurationLike(i);return s.plus(r).toSeconds()}({environment:t,spaceId:n,durationLike:i}):void 0}const Ve=function(){window.__c={n:"StripeTestClockSupport"};const e=["local","staging","development"].includes("production"),t=(0,A.O7)();return(0,i.useEffect)((()=>{e&&((0,Ue.exposeDebugValue)("refreshTestClock",(async()=>{const{spaceId:e}=Le.default.state;if(e){const n=await Re(e,t);if(n){const e=Ee.ou.fromSeconds(n);console.log(`Test clock time is ${e.toString()} (${n} seconds)`),Le.default.setTestClockSeconds(n)}}})),(0,Ue.exposeDebugValue)("advanceTestClock",(async e=>{if(!e)throw new Error("advanceTestClock requires an argument. You can pass an epoch timestamp in seconds, a relative DurationLike object like { months: 2 }, or a function that takes the current epoch seconds and returns the new epoch seconds.");const{spaceId:n}=Le.default.state;if(!n)return;const i=await Ne({environment:t,spaceId:n,advanceTestClockArgument:e});i&&(await Be.stripeAdvanceTestClock(t,{spaceId:n,epochSeconds:i}),Le.default.setTestClockSeconds(i))})))}),[e,t]),null};var Oe=n(1404),De=n(59260),ze=n(62142),Fe=(n(57658),n(9852)),We=n(63143),qe=n(99334);const He=10*We.C0,Ke=5*He;function Ge(){return window.__c={n:"TabAnalyticsTracker"},(0,i.useEffect)((()=>{if(!window.BroadcastChannel)return;const e=(0,Fe.getSessionTabId)(),t=new Map,n=new BroadcastChannel("notion_tab_tracker");n.onmessage=e=>{const n=e.data;"string"==typeof n&&t.set(n,Date.now())};const i=window.setInterval((()=>{(()=>{const e=[],n=Date.now();for(const[i,o]of t.entries())n-o>Ke&&e.push(i);e.length;for(const i of e)t.delete(i)})(),n.postMessage(e);const i=t.size+1;(0,qe.$)(i)}),He);return()=>{n.close(),window.clearInterval(i)}}),[]),null}var $e=n(22491),Qe=n(72126),Ye=n(70203),Xe=n(44805),Je=n(92120),et=n(24229),tt=n(48588);function nt(e){const{discussionId:t,level:n}=e;return`\n\t\t.${(0,$e.vE)({level:n})}.${(0,$e.dk)({discussionId:t})}.${Xe.kB} {\n\t\t\tbackground: ${(0,c.Hu)(e)} !important;\n\t\t\topacity: unset !important;\n\t\t\tborder-bottom: 2px solid ${c.mO};\n\t\t}\n\t`}function it(){function e(){var e,t,n;const i=(null===(e=Je.Z.state)||void 0===e?void 0:e.discussionIds)||[],o=null!==(t=et.Z.state)&&void 0!==t&&t.open&&(null===(n=et.Z.state)||void 0===n?void 0:n.discussionIds)||[];return[...i.flatMap((e=>Qe.DZ($e.nB).map((t=>nt({discussionId:e,level:t+1,hovered:!0,selected:!1}))))),...o.flatMap((e=>Qe.DZ($e.nB).map((t=>nt({discussionId:e,level:t+1,hovered:!1,selected:!0})))))].join("\n")}function t(){var e,t;const n=null===(e=tt.Z.state)||void 0===e?void 0:e.store,i=null===(t=tt.Z.state)||void 0===t||null===(t=t.annotations)||void 0===t?void 0:t.find(Ye.j0F);if(!i)return"";const o=(0,Ye.zW$)(i);return"block"!==(null==n?void 0:n.table)?"":`\n\t\t\t.${(0,$e.S$)({href:o,blockId:n.id})}.${Xe.kB} {\n\t\t\t\ttransition: border-color 100ms ease-in, opacity 100ms ease-in;\n\t\t\t\tborder-color: currentColor !important;\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`}window.__c={n:"CSSOverrideStyle"};const n=(0,Z.VK)((()=>[e(),t()].filter(Boolean).join("\n")),[]);return n?(0,F.jsx)("style",{dangerouslySetInnerHTML:{__html:n}}):null}var ot=n(77207),st=n(74055),rt=n(7339);function at(e){return(0,F.jsx)("div",{id:"test-customer-io",style:{width:334,height:200,position:"absolute",bottom:64,right:21,zIndex:1,display:e?void 0:"none"}})}const dt=function(){window.__c={n:"CustomerIoInAppCallout"};const e=(0,A.O7)(),{currentUser:t}=e,n=(0,Z.VK)((()=>rt.C.state.ready),[]),o=(0,Z.VK)((()=>t.isLoggedIn()&&n&&Te.default.checkGate("customerio")),[t,n]),s=(0,Z.VK)((()=>_.default.state.inAppCalloutStore),[]),r=(0,Z.VK)((()=>"dark"!==e.ThemeStore.state.mode),[e]);(0,i.useEffect)((()=>{o&&(s.canShow("customer_io")?r?st.Z.state.suppressReason===st.V.IN_APP_CALLOUT_CONFLICT?st.Z.setState({...st.Z.state,isVisible:!0,suppressReason:void 0}):st.Z.setState({...st.Z.state,suppressReason:void 0}):st.Z.setState({isVisible:!1,suppressReason:st.V.DARK_MODE}):st.Z.setState({isVisible:!1,suppressReason:st.V.IN_APP_CALLOUT_CONFLICT}))}),[s,o,r]);const a=(0,Z.VK)((()=>st.Z.state.isVisible&&s.canShow("customer_io")),[s]);return(0,i.useEffect)((()=>{if(a)return s.updateCalloutStatus({calloutId:"customer_io",visible:!0}),()=>{s.updateCalloutStatus({calloutId:"customer_io",visible:!1})}}),[s,a]),o?at(!!a):null};var lt=n(41056);function ct(e){return window.__c={n:"DateTodayUpdater"},(0,i.useEffect)((()=>{const e=window.setInterval(lt.u,5e3);return()=>{window.clearInterval(e)}}),[]),null}var ut=n(41892),pt=n(15095),ht=n(43593),mt=n(17755),gt=n(42875),vt=n(79362),ft=n(22808),bt=n(82883),St=n(64002),yt=n(60682),wt=n(24990),xt=n(19037);async function kt(e){const t=document.createElement("canvas");t.width=32,t.height=32;const n=t.getContext("2d"),i=document.createElement("img");return i.src=e,new Promise((e=>{i.onload=()=>{n.drawImage(i,0,0,32,32),e(t.toDataURL("image/png"))},i.onerror=()=>{e("")}}))}var Ct=n(84210),Mt=n(83055),jt=n(33929),It=n(19034),Tt=n(80641),_t=n(5315);class Lt extends r.Z{constructor(){super(...arguments),this.lastSetIconString=void 0,this.updateBrowserState=()=>{const{device:e}=this.environment,t=this.computedStore.state;if(!t)return;const{url:n,title:i,icon:o}=t;let r,a,d;o&&(0,vt.V2)(o.icon)?d=o.icon:o&&(0,ft.Z)(o.icon)?r=o.icon:o&&ht.F8(o.icon)&&(a=o);const{intl:l}=this.props,c=t.isNonverified&&!t.hasBypassedContentClassification&&!t.isMemberOfSpace;i&&document.title!==i&&(c?document.title=l.formatMessage({id:"pageTitle.flaggedContent",defaultMessage:"Flagged Content"}):e.isSafari&&r?document.title=`${r} ${i}`:document.title=i),n&&St.T1(n)!==St.T1(window.location.href)&&(window.history.replaceState(window.history.state,void 0,n),k.updateRouterStateForDocumentTitleChange({environment:this.environment,url:window.location.href}));const u=document.querySelector("link[rel='shortcut icon']");if(u){const t=ut.Z.images.faviconIco;if(c)u.href=t,this.lastSetIconString=t;else if(r)r!==this.lastSetIconString&&(this.lastSetIconString=r,async function(e,t){const n=document.createElement("canvas");n.width=32,n.height=32;const i=n.getContext("2d");if(i.font="normal normal normal 32px/32px sans",i.textAlign="center",i.textBaseline="middle","raw"===t)return i.fillText(e,n.width/2,n.height/2+4),n;const o=await s.deps.emojiData.loader(),r=(0,pt.yz)(e,o);if(!r)return;const a=document.createElement("img");a.src=(0,pt.bk)(t);const d=(0,pt.G0)(r);return new Promise((e=>{a.onload=()=>{i.drawImage(a,d.x,d.y,d.size,d.size,0,0,32,32),e(n)},a.onerror=()=>{e(void 0)}}))}(r,(0,yt.e_)(this.environment)).then((async e=>{await Mt.aO(),u.href=(null==e?void 0:e.toDataURL("image/png"))||""})));else if(d){if(d!==this.lastSetIconString){this.lastSetIconString=d;const t=`${d}?mode=${this.theme.mode}`;e.isFirefox?u.href=t:kt(t).then((e=>{u.href=e}))}}else if(a){const{icon:e,...t}=a,n=mt.EK({url:e,width:100,permissionRecord:t.pointer,baseUrl:T.default.domainBaseUrl,fullyQualified:!1,userId:this.environment.currentUser.id});n!==this.lastSetIconString&&(this.lastSetIconString=n,_t.transactionQueue.awaitRecordTransaction(t.pointer).then((()=>kt(n))).then((e=>{u.href=e})))}else t!==this.lastSetIconString&&(u.href=t,this.lastSetIconString=t)}y.electronApi&&y.electronApi.setWindowTitle&&i&&y.electronApi.setWindowTitle(i)},this.updateBrowserStateDebounced=Qe.Ds(this.updateBrowserState,500,{leading:!0}),this.computedStore=this.createComputedStore((()=>{var e;const{intl:t}=this.props,{RouterStore:n,device:i}=this.environment,o=n.state.route;if("chat"===o.name)return{title:"Ask AI"};const s=_.default.state.mainEditorCurrentBlockStore;if(!s||!s.isReady())return;const r="page"===o.name&&o.blockId===s.id,a="space"===o.name&&o.requestedOnPublicDomain&&(null===(e=s.getSpaceStore())||void 0===e?void 0:e.getPublicHomePage())===s.id;if(!r&&!a)return;const d=It.Z.getTotalUnreadMentionsCount(),l=s.getTitleStore();let c;const u=s.getModel(),p=s.getCollectionViewIds(),h=null==l?void 0:l.getRecordModel(l.pointer);if(l&&h){if(c=(0,bt.X)({intl:jt.default.getIntl(),textValue:l.getValue(),userTimeZone:(0,gt.r)(),getRecordModel:s.getRecordModel})||h.getEmptyTitlePlaceholder({getRecordModel:l.getRecordModel,userTimeZone:(0,gt.r)(),intl:t}),"block"===l.table&&(0,fe.WE)(s)){const{currentSpaceStore:e}=_.default.state;if(e){c=`${e.getName()} - ${t.formatMessage({id:"DocumentTitleListener.personalHomeLabel",defaultMessage:"Home"})}`}}if("collection"===l.table&&u&&u.isCollectionView()&&p.length>1){const e=_.default.state.currentCollectionViewStore;e&&e.getName()&&(c=`${c} | ${e.getName()}`)}i.isElectron||(c=(0,pt.db)(c.slice(0,100),wt.Z.state)),he.IJ(this.environment,s)||this.environment.device.isElectron||(d>9?c=`(9+) ${c}`:d>0&&(c=`(${d}) ${c}`))}const m="page"===o.name?(0,Ct.ZP)({store:s,fullyQualified:!1,scrollToBlockId:null==o?void 0:o.scrollToBlockId,peekViewBlockId:o.peekViewBlockId,peekMode:o.peekMode,collectionViewId:o.collectionViewId,discussionId:o.discussionId,showMoveTo:o.showMoveTo,saveParent:o.saveParent,templateGalleryItem:o.templateGalleryItem,projectManagementLaunch:o.projectManagementLaunch,pageVisitSource:void 0}):(0,Ct.ZP)({store:s,fullyQualified:!1,pageVisitSource:void 0}),g=s.getIcon(),v=null==u?void 0:u.isNonverifiedContentClassification();return{title:c,url:m,icon:g,isNonverified:v,hasBypassedContentClassification:v&&u&&Tt.Z.bypassedPage(s.id),isMemberOfSpace:(0,xt.I)({blocks:[s],environment:this.environment,publicEditMode:void 0})}}))}willMount(){this.savedTitle=document.title,this.computedStore.addListener(this.updateBrowserStateDebounced)}willUnmount(){this.computedStore.removeListener(this.updateBrowserStateDebounced),document.title=this.savedTitle}}Lt.displayName="DocumentTitleListener";const Pt=(0,b.injectIntl)(Lt);class At extends r.Z{constructor(){super(...arguments),this.konami=void 0,this.unlock=!1,this.handleSuccess=()=>{this.unlock=!0,this.forceUpdate()}}willMountOrUpdate(){this.environment.device.isDesktop?this.loadKonami():this.unloadKonami()}loadKonami(){var e,t;this.konami||(this.konami=(e=this.handleSuccess,(t={addEvent:function(e,t,n){e.addEventListener(t,n,!1)},removeEvent:function(e,t,n){e.removeEventListener(t,n)},input:"",pattern:"38384040373937396665",keydownHandler:function(n){t.input+=n.keyCode,t.input.length>t.pattern.length&&(t.input=t.input.substr(t.input.length-t.pattern.length)),t.input===t.pattern&&(e(),t.input="")},load:function(){this.addEvent(document,"keydown",this.keydownHandler)},unload:function(){this.removeEvent(document,"keydown",this.keydownHandler)}}).load(),t))}unloadKonami(){this.konami&&(this.konami.unload(),this.konami=void 0)}renderComponent(){if(this.unlock)return(0,F.jsx)("img",{className:"nyan",style:{position:"fixed",top:"calc(50vh - 100px)",zIndex:1e3,left:"50%",animationName:"leftOrRight",animationDuration:"9s",animationIterationCount:"infinite",pointerEvents:"none",userSelect:"none"},src:ut.Z.images.nyancatGif})}}At.displayName="EasterEgg";const Zt=At;var Et=n(15944),Ut=n(81415);const Bt=(0,b.defineMessages)({pressSlashHeader:{id:"EducationTooltips.pressSlash.header",defaultMessage:"Press {slashkey} for commands"}});function Rt(e){return(0,F.jsx)("div",{style:{background:c.ZP.whiteWithAlpha(.1),padding:3,paddingRight:8,paddingLeft:8,marginRight:6,marginLeft:6,borderRadius:4},children:e.char})}function Nt(){window.__c={n:"PressSlashTooltip"};const e=(0,A.O7)(),t=Et.o();return(0,Z.VK)((()=>{const{currentUserSettingsStore:e}=_.default.state;var t;return!e||!e.isReady()||Boolean(null===(t=e.getSettings())||void 0===t?void 0:t.pressed_slash_tooltip)}),[])||e.device.isMobile||!t?null:(0,F.jsx)(Ut.U,{hideCloseButton:!0,origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,F.jsx)(b.FormattedMessage,{...Bt.pressSlashHeader,values:{slashkey:(0,F.jsx)(Rt,{char:"/"})}}),content:null,onCloseClick:()=>Et.q(e)})}n(30541);var Vt=n(41432),Ot=n(82855),Dt=n(16880),zt=n(9953),Ft=n(3898),Wt=n(42858),qt=n(39699),Ht=n(69316),Kt=n(83212),Gt=n(24666),$t=n(68894),Qt=n(32302);function Yt(e){window.__c={n:"FindAndReplace"};const[t,n]=(0,i.useState)(""),o=(0,i.useCallback)((e=>{Ht.Z.setState({...Ht.Z.state,findQuery:e})}),[]),s=(0,Z.VK)((()=>Ht.Z.state),[]);return(0,F.jsx)("div",{children:s.open?(0,F.jsx)(Xt,{...e,find:s.findQuery,setFind:o,replace:t,setReplace:n}):null})}function Xt(e){window.__c={n:"FindAndReplaceComponent"};const{environment:t,pageStore:n,replace:o,setReplace:s,find:r,setFind:a}=e,[d,l]=(0,i.useState)(0);(0,i.useEffect)((()=>{l(-1),"empty"!==Gt.default.state.mode&&Gt.default.setState({mode:"empty"})}),[r,n]);const c=(0,Z.VK)((()=>function(e){const{pageStore:t,find:n}=e;if(!t||!t.getContentStores()||0===n.length)return[];const i=[],o=t.getContentStores();for(;o.length>0;){const e=o.shift(),t=null==e?void 0:e.getType();if(!e||!t)continue;const s=(0,Vt.XD)(t),r=e.getProperties();if(s&&r){const{title:t}=r,o=[...t?Ye.Oqk({textValue:t,substring:n,ignoreCase:!0}).map((t=>({blockId:e.id,propertyType:"title",selection:t,blockStore:e}))):[]];o.length>0&&i.push(...o)}const a=e.getContentStores();a&&o.unshift(...a)}return i}({find:r,pageStore:n})),[r,n]),u=(0,i.useCallback)((async e=>{if(!c||0===c.length)return;const i="down"===e?1:-1,o=c[d+i],[s,r]=[c[0],c[c.length-1]];if(!s||!r)return;const a="down"===e?s:r;switch(e){case"down":l((e=>o?e+i:0));break;case"up":l((e=>o?e+i:c.length-1))}const u=(null==o?void 0:o.blockId)??a.blockId;await Ft.Nz(n,[u]),Wt.WG(t,[u])}),[d,c,t,n]),p=(0,E.yK)((e=>({container:{position:"absolute",top:0,right:0,display:"grid",gridTemplateColumns:"repeat(4, auto)",gridTemplateRows:"repeat(3, auto)",flexDirection:"column",padding:10,margin:"3rem 2rem 0",gap:10,boxShadow:e.lightBoxShadow,backgroundColor:"white",zIndex:999,borderRadius:10}})),[]);return(0,F.jsxs)("div",{style:p.container,children:[(0,F.jsx)(Jt,{currentSelectionIndex:d,totalResults:c.length,jumpToResultFn:u}),(0,F.jsx)($t.ZP,{value:r,itemMarginLeft:0,itemMarginRight:0,showClearButton:!0,onChange:e=>a(e.target.value),title:"input title",placeholder:"Find",style:{gridColumn:"1/3",gridRow:"1/1"},onSubmit:()=>u("down"),onCancel:()=>Qt.x(),focusInitial:!0},"find input element"),(0,F.jsx)($t.ZP,{value:o,itemMarginLeft:0,itemMarginRight:0,showClearButton:!0,onChange:e=>s(e.target.value),title:"input title",placeholder:"Replace",style:{gridColumn:"1/3",gridRow:"2/2"}},"replace input element"),(0,F.jsx)(O.Z,{onClick:()=>{},style:{gridArea:"3/1"},disabled:!0,children:"Replace"}),(0,F.jsx)(O.Z,{onClick:()=>{!function(e){const{find:t,replace:n,pageStore:i,environment:o}=e,s=null==i?void 0:i.getContentStores();if(!i||i.isLocked()||!s)return;for(;s.length>0;){var r,a;const e=s.shift();if(!e)continue;const i=Kt.Z.getMode(o,e),d=e.canEdit()&&"comment"!==i.permission;if(i.permission,!d)continue;const l=null===(r=e.getModel())||void 0===r?void 0:r.type,c=null===(a=e.getModel())||void 0===a?void 0:a.getProperties();if(c&&l&&(0,Vt.XD)(l)){const i=c.title;if(!i)continue;for(const e of i)e[0]=e[0].replace(t,n);qt.createAndCommit({userAction:"findAndReplaceAll",environment:o,perform:t=>{zt.sW({store:e.getPropertiesStore(),data:{title:i},transaction:t})}})}const u=null==e?void 0:e.getContentStores();u&&s.unshift(...u)}}({find:r,replace:o,pageStore:n,environment:t})},style:{gridArea:"3/2"},children:"Replace All"})]})}function Jt(e){const{jumpToResultFn:t,totalResults:n,currentSelectionIndex:i}=e;return(0,F.jsxs)("div",{style:{gridArea:"1/3",fontSize:".8rem",display:"flex",alignItems:"center",gap:"5px"},children:[(0,F.jsxs)("div",{style:{fontSize:".8rem",display:"flex",gap:"5px"},children:[(0,F.jsx)("span",{children:i+1}),(0,F.jsx)("span",{children:"of"}),(0,F.jsx)("span",{children:n})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{style:{cursor:"pointer"},onClick:()=>t("up"),children:(0,Dt.R)({width:10,height:10})}),(0,F.jsx)("div",{style:{cursor:"pointer"},onClick:()=>t("down"),children:(0,Ot.E)({width:10,height:10})})]})]})}var en=n(21202),tn=n(3297),nn=n(87279),on=n(83941),sn=n(68785),rn=n(78140),an=n(32163),dn=n(50506),ln=n(72495),cn=n(26673);class un extends r.Z{constructor(){super(...arguments),this.didSingleWorkspaceFork=!1,this.isStatsigReady=this.createComputedStore((()=>rt.C.state.ready)),this.isDeviceEligibleForModalExperiment=this.createComputedStore((()=>!this.environment.device.isMobile))}didMountOrUpdate(){const e=(e,t,n,i)=>{this.didSingleWorkspaceFork=!0;return tn.DK({environment:this.environment,store:e,spaceStore:t,spaceViewStore:n,isPrivate:i,context:"public_page_duplicate_single_workspace"})};if(!this.environment.currentUser.isLoggedIn()){const{environment:e}=this;return tn.nM({currentUserId:void 0,blockId:this.props.blockId}),"public_page"!==this.props.from&&"notion_template_gallery"!==this.props.from||S.HU0(e,{from:this.props.from,is_paid:!1,template_block_id:this.props.blockId,public_page_device_id:this.props.tid}),void k.navigate({environment:e,url:m._j.login})}const{currentUserRootStore:t}=_.default.state;if(t&&t&&!this.didSingleWorkspaceFork){const n=L.G.createChildStore(t,{table:en.iU,id:this.props.blockId}),i=ce.o(t);if(1===i.length){const t=i[0],o=t.getSpaceStore();if(!o)return;e(n,o,t,!0)}else if(this.props.workspaceId&&i.length>1){const t=i.filter((e=>e.pointer.spaceId===this.props.workspaceId))[0],o=null==t?void 0:t.getSpaceStore();if(!o)return;e(n,o,t,!0)}else if(this.isDeviceEligibleForModalExperiment.state&&this.isStatsigReady.state){(0,on.Mr)({disableExposureLogging:!1})&&(le.Z.setState({open:!0,blockStore:n,spaceStore:void 0,spaceViewStore:void 0,teamStore:void 0}),k.navigate({environment:this.environment,url:m._j.root,redirect:!0}))}}}renderComponent(){if(this.isDeviceEligibleForModalExperiment.state&&!this.isStatsigReady.state)return(0,F.jsx)(dn.Z,{open:!0,render:()=>(0,F.jsx)("div",{style:hn(this.environment),children:(0,F.jsx)(sn.Z,{})})});const{device:e}=this.environment,{currentUserRootStore:t}=_.default.state;if(!t)return;const{mainEditorCurrentBlockStore:n}=_.default.state;if(!n)return;if(!n.isDefined())return;const i=[{key:"spaces",render:t=>(0,F.jsx)(ln.Z,{title:e.isMobile?void 0:(0,F.jsx)(b.FormattedMessage,{id:"forkPageScreen.chooseWorkspaceForDuplication.message",defaultMessage:"Choose a workspace to duplicate into"}),isTitleUppercase:!0,...t}),items:cn.default.getSpaceViewMenuItems(this.environment,n)}];let o;return o=e.isMobile?{menuType:nn.og.Modal,title:(0,F.jsx)(b.FormattedMessage,{id:"forkPageScreen.chooseWorkspace.message",defaultMessage:"Choose a workspace"}),width:"100vw"}:{menuType:nn.og.Popup,height:"auto"},(0,F.jsx)(dn.Z,{open:!0,render:()=>(0,F.jsx)("div",{style:hn(this.environment),children:(0,F.jsx)(rn.Z,{...o,children:(0,F.jsx)(an.Z,{type:an.i.Vertical,sections:i,initialFocus:1})})})})}}un.displayName="ForkPageScreen";const pn=un;function hn(e){const{device:t}=e;return{width:"100vw",height:"100vh",paddingLeft:t.isMobile?16:30,paddingRight:t.isMobile?16:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}var mn=n(81059),gn=n(24553),vn=n(35253),fn=n(4708),bn=n(5382),Sn=n(91754);function yn(){window.__c={n:"InviteBannerListener"};const e=(0,A.Fy)(),t=(0,A.O7)(),n=(0,Z.VK)((()=>_.default.state.currentSpaceStore),[]),{isBannerVisible:o,bannerType:s}=(0,Z.VK)((()=>{if(e.isMobile)return{isBannerVisible:!1,bannerType:void 0};if(n&&!(0,fn.fW)(t,{spaceStore:n}))return{isBannerVisible:!1,bannerType:void 0};const i=(0,Fe.getRedirectType)();return i&&["invite_page","invite_space"].includes(i||"")?{isBannerVisible:!0,bannerType:i}:{isBannerVisible:!1,bannerType:void 0}}),[e.isMobile,n,t]);return i.useEffect((()=>{if(o)switch(s){case"invite_page":vn.Bw({bannerStore:bn.Z,id:"InvitePageBanner",contentKey:"invite_page",styleKey:Sn.v.PageNotification});break;case"invite_space":vn.Bw({bannerStore:bn.Z,id:"InviteSpaceBanner",contentKey:"invite_space",styleKey:Sn.v.PageNotification})}return()=>{vn.qL({bannerStore:bn.Z,id:"InviteSpaceBanner"}),vn.qL({bannerStore:bn.Z,id:"InvitePageBanner"})}}),[o,s,t,n]),null}var wn=n(65556);function xn(){window.__c={n:"PageReloadConfirmationListener"};const e=(0,A.O7)();return(0,i.useEffect)((()=>{function t(t){S.f73(e,{reason:t})}return wn.showConfirmationDialogEventEmitter.addListener(t),()=>{wn.showConfirmationDialogEventEmitter.removeListener(t)}}),[e]),null}var kn=n(82540),Cn=n(15145),Mn=n(99553),jn=n(61045),In=n(43250),Tn=n(75079),_n=n(78316),Ln=n(85957),Pn=n(45010),An=n(18245),Zn=n(34859),En=n(4926),Un=n(42330),Bn=n(82136),Rn=n(88923),Nn=n(42057),Vn=n(27724),On=n(41464),Dn=n(23063),zn=n(3386),Fn=n(4827),Wn=n(53336),qn=n(26957),Hn=n(88274),Kn=n(31192),Gn=n(45433),$n=n(7525),Qn=n(80503),Yn=n(34700);function Xn(e){const{theme:t,isSidePeekOpen:n,borderRadius:i}=e;return{zIndex:n?ne.LI:ne.Bh,background:t.peekModalBackground,borderTopLeftRadius:i??5,borderTopRightRadius:i??5}}function Jn(e){const{environment:t,padding:n,height:i}=e,o=t.device.isMobile?4:n??12;return{height:i??Qn.R6(t.device.isElectronMac)-1,display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:o,paddingRight:o}}var ei=n(73742),ti=n(91551);const ni=new(n(61766).Z);var ii=n(98452),oi=n(99332),si=n(24612),ri=n(73063),ai=n(58261),di=n(26388),li=n(22789),ci=n(73935),ui=n(42853),pi=n(11302),hi=n(58239);var mi=n(38755),gi=n(89728),vi=n(31278),fi=n(76798),bi=n(45653);class Si extends r.Z{constructor(){super(...arguments),this.buttonEl=null,this.handleButtonMount=e=>{this.buttonEl=e},this.handleOpenPopup=e=>{if(e.preventDefault(),this.buttonEl){const e=ci.findDOMNode(this.buttonEl);e&&pi.bA({environment:this.environment,blocks:[this.props.store],originRect:e.getBoundingClientRect(),moveToContext:this.moveToContext.state,onAccept:this.handleMoveToAccept,isAddTo:!0,isDefaultPrivateLocation:ki(this.props.store),disableSuccessToast:!0,forceUntyped:(t=this.props.pageType,!t||"page"===t)})}var t},this.handleMoveToAccept=e=>{const{pageType:t,saveParent:n}=this.props,{currentSpaceStore:i}=_.default.state;if(i&&n){let n;!function(e){const{pageType:t,spaceStore:n,currentUserId:i,result:o}=e;(0,hi.rq)({currentUserId:i,spaceId:n.id,value:o}),t&&(0,hi.ZT)({currentUserId:i,spaceId:n.id,databaseType:Gn.wg[t],parent:o})}({pageType:n||t,spaceStore:i,currentUserId:this.environment.currentUser.id,result:e})}},this.moveToContext=this.createComputedStore((()=>{const e=_.default.state.mainEditorCurrentBlockStore;return e&&((0,fe.WE)(e)||(0,ce.qG)(e.id))?"aggregated_type":"quick_add"}))}renderComponent(){const{store:e,prefix:t,buttonStyle:n}=this.props,i=e.getParentStore();if(i&&!(i instanceof L.T5)&&!(i instanceof L.zq)&&!(i instanceof L.Vf)){const e=t?(0,F.jsx)("span",{style:{color:this.theme.mediumTextColor,marginRight:4},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:t.defaultMessage,id:t.id})}):void 0;return(0,F.jsx)(zn.Z,{capture:!0,onMoveTo:this.handleOpenPopup,children:(0,F.jsx)("div",{style:Si.wrapStyle,children:(0,F.jsx)(di.Z,{renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Set the default page or database",id:"peekMoveToMenu.tooltip"}),(0,F.jsx)("br",{}),(0,F.jsx)(ai.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"moveTo"})]}),render:t=>(0,F.jsxs)(gi.Z,{onClick:this.handleOpenPopup,ref:this.handleButtonMount,shouldShrink:!0,style:n,...t,children:[(0,F.jsx)(wi,{parentStore:i,prefixText:e}),(0,ui.i)({width:10,marginLeft:4,fill:this.theme.lightTextColor})]})})})})}}}function yi(e,t){return e&&e instanceof L.H2&&t&&e.id===t.id}function wi(e){window.__c={n:"PeekMoveToPageName"};const{parentStore:t,prefixText:n}=e,i=(0,A.O7)(),o=(0,Z.VK)((()=>(0,ce.B7)(i)),[i]),s=(0,Z.VK)((()=>t instanceof L.G&&t.isEmptyPage()),[t]),r=(0,Z.VK)((()=>t instanceof L.H2?(0,mi.Wd)(i,t):t.getIcon()),[i,t]),a=(0,Z.VK)((()=>t instanceof L.H2?(0,mi.rn)(i,t):void 0),[i,t]),d=(0,Z.VK)((()=>{const{currentSpaceStore:e}=_.default.state;return yi(t,e)}),[t]),l=(0,E.yK)((()=>({privatePagesText:{fontWeight:R.Z.fontWeight.medium,marginLeft:4,...R.Z.textOverflowStyle,overflow:"hidden"},icon:{marginRight:4,marginTop:1},title:{fontWeight:R.Z.fontWeight.semibold}})),[]);return(0,F.jsx)(F.Fragment,{children:d?(0,F.jsxs)(F.Fragment,{children:[n,(0,F.jsx)(bi.Z,{size:22,avatarShouldShowShadow:!0,userStore:o}),(0,F.jsx)("span",{style:l.privatePagesText,children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Private pages",id:"peekMoveToMenu.addTo.privatePages"})})]}):(0,F.jsxs)(F.Fragment,{children:[n,(0,F.jsx)(vi.Z,{disabled:!0,icon:r,isEmptyPage:s,title:a,size:18,style:l.icon}),(0,F.jsx)(fi.Z,{style:l.title,store:t})]})})}Si.displayName="PeekMoveToMenu",Si.wrapStyle={display:"flex",alignItems:"center",fontSize:14,minWidth:0};const xi=Si;function ki(e){const t=e.getParentStore(),{currentSpaceStore:n}=_.default.state;return yi(t,n)}var Ci=n(3553),Mi=n(60526),ji=n(79075),Ii=n(96677),Ti=n(10137),_i=n(63437),Li=n(68626),Pi=n(64530),Ai=n(91155),Zi=n(8406),Ei=n(5149),Ui=n(48543),Bi=n(98165),Ri=n(52275),Ni=n(31945),Vi=n(16354),Oi=n(53437),Di=n(49085),zi=n(13148),Fi=n(3418);const Wi=165888e7;class qi extends r.Z{constructor(){super(...arguments),this.storeTypes={visible:Di.default.createClass(!1)},this.timeout=void 0,this.renderPopup=()=>(0,F.jsxs)("div",{style:{fontSize:12,color:c.ZP.white,position:"absolute",top:"calc(100% + 12px)",left:"calc(50% - 110px)",background:c.ZP.blue,borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:this.theme.largeLightBoxShadow,zIndex:99},children:[(0,F.jsx)("div",{style:{position:"absolute",top:-12,left:"calc(50% - 2.5px)",background:c.ZP.blue,width:5,height:5,borderRadius:5,boxShadow:`0 0 0 1.5px ${this.theme.contentBackground}`}}),(0,F.jsx)("div",{style:{position:"absolute",top:-12,left:"calc(50% - 1px)",background:c.ZP.blue,width:2,height:12}}),(0,F.jsx)("div",{style:{width:"90%",fontWeight:500,marginBottom:2},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"New! Open pages in side peek",id:"peekModeIntroTooltip.title"})}),(0,F.jsx)("div",{style:{opacity:.8,lineHeight:1.35},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Use Tables, Boards, Lists and Timelines while opening pages on the side for faster workflows. Switch to other peek modes here.",id:"peekModeIntroTooltip.subtitle"})}),(0,F.jsx)(ri.Z,{icon:zi.U,style:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:c.ZP.white},onClick:this.handleCloseClick})]}),this.handleCloseClick=()=>{Mn.Om({environment:this.environment,seen:!0})}}willMountOrUpdate(){(function(e){const{device:t}=e;if(t.isPhone)return!1;if(Fi.Z.state.openPopups.size>0)return!1;const{currentUserSettingsStore:n}=_.default.state;if(!n||!n.isReady())return!1;const i=n.getSettings();if(null!=i&&i.signup_time&&(null==i?void 0:i.signup_time)>Wi)return!1;if(null!=i&&i.seen_peek_mode_tooltip)return!1;return!0})(this.environment)?(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.stores.visible.setState(!0)}),500)):(clearTimeout(this.timeout),this.stores.visible.setState(!1))}renderComponent(){const{origin:e}=this.props,{visible:t}=this.stores,{device:n}=this.environment;return n.isMobile?e:(0,F.jsxs)("div",{style:{position:"relative"},children:[e,(0,F.jsx)(Dn.Z,{isVisible:t.state,animationStyle:{opacity:1},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:this.renderPopup})]})}}qi.displayName="PeekModeIntroTooltip";const Hi=(0,b.injectIntl)(qi);const Ki=(0,b.defineMessages)({changeForThisView:{id:"peekTopbar.changePeekOption.changeForThisView",defaultMessage:"Edit view default"}});class Gi extends r.Z{constructor(){super(...arguments),this.getPeekModeUrl=e=>{const{store:t}=this.props,{mainEditorCurrentBlockStore:n}=_.default.state,i=Bi.uJ(t),o=t.isNavigableBlock()?i.slice(1):[...i],s=o.length>0?o[0]:void 0;return(0,_n.mb)({store:t,mainEditorCurrentBlockStore:s instanceof L.G&&!Rn.default.state.open?s:n,collectionContextStore:Rn.default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,Rn.getPeekModeFromCollectionPeekModeFormat)(e)})},this.handlePeekModePickerClick=()=>{if(!Rn.default.state.open)return;const e=Rn.default.state.collectionContextStore;e?Zi.nS({environment:this.environment,collectionContextStore:e,from:"peek_topbar",peek_target_id:Rn.default.state.target.id,from_peek_mode:Rn.default.state.mode}):S.v2k(this.environment,{from:"peek_topbar",peek_target_id:Rn.default.state.target.id,from_peek_mode:Rn.default.state.mode})}}willMount(){const e=this.getPeekModeFormatOptions(),t=Rn.default.getPeekMode();e.find((e=>Qe.Xy(e.key,t)))||Li.log({level:"warning",from:"TopbarPeekModeButton",type:"InvalidSelectedPeekMode",error:(0,Ai.Ui)("Selected key is invalid.")})}renderComponent(){const{device:e}=this.environment,{mainEditorCurrentBlockStore:t}=_.default.state,n=this.getPeekModeFormatOptions(),i=Rn.default.getPeekMode();return i?(0,F.jsx)(Ni.ZP,{popupType:e.isMobile?Oi.kQ.SlideUp:Oi.kQ.Popup,alignmentToOrigin:Ni.vR.Center,placementToOrigin:Ni.pO.Bottom,style:{minWidth:190},originGap:0,onClick:this.handlePeekModePickerClick,renderOrigin:e=>(0,F.jsx)(Hi,{origin:(0,F.jsx)(di.Z,{renderTooltip:()=>(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Switch peek mode",id:"peekTopbar.openPagesAs.button"})}),render:t=>(0,F.jsx)(ri.Z,{...e,...t,icon:(0,Ui.RO)(i),iconStyle:{fill:this.theme.mediumIconColor}})})}),render:o=>{var s,r,a;let d;d=e.isMobile?{menuType:nn.og.ActionSheet}:{menuType:nn.og.Popup,width:220};const l=Qe.oA([...n.map(((e,t)=>{const n=e.key,s="full_page"===n?(0,Ct.ZP)({store:this.props.store,fullyQualified:!1,pageVisitSource:Cn.tY.Expand}):this.getPeekModeUrl(n);return{key:t,render:t=>(0,F.jsx)(Vi.Z,{href:s,onClick:()=>{var e;Mn.Om({environment:this.environment,seen:!0}),S.UZT(this.environment,{from:"peek_topbar",peek_mode:n,from_peek_mode:i,target_page_id:null===(e=Rn.default.peekTarget.state)||void 0===e?void 0:e.id}),o.close()},children:(0,F.jsx)(Ri.Z,{...t,disabled:!1,title:e.title,icon:e.icon,caption:e.caption,body:e.body,checkState:Qe.Xy(e.key,i)})}),action:()=>{}}}))]),c=Rn.default.state.open?Rn.default.state.collectionContextStore:void 0,u=Rn.default.state.open?Rn.default.state.target:void 0,p=t&&t.id===(null==c||null===(s=c.collectionViewBlockStore())||void 0===s?void 0:s.getRecordStoreUIRoot().id),h=(null==c||null===(r=c.collectionStore())||void 0===r?void 0:r.id)===(null==u||null===(a=u.getAssociatedCollectionStore())||void 0===a?void 0:a.id)&&(null==c?void 0:c.permissionScopes.state.canConfigureBlock)&&p;return(0,F.jsx)(rn.Z,{...d,children:(0,F.jsx)(an.Z,{type:an.i.Vertical,sections:Qe.oA([{key:0,render:e=>(0,F.jsx)(ln.Z,{enableActionSheetTitle:!0,...e}),items:l},h&&{key:1,render:e=>(0,F.jsx)(ln.Z,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:[{key:"change_for_view",render:e=>(0,F.jsx)(Ri.Z,{...e,disabled:!1,title:jt.default.formatMessage(Ki.changeForThisView),icon:(0,Pi.y)({width:16,height:16,fill:this.theme.regularIconColor})}),action:e=>{!function(e,t){const n=Rn.default.state.open?Rn.default.state.collectionContextStore:void 0;n&&(Mn.Om({environment:e,seen:!0}),Rn.default.isCenterPeekOpen()&&t&&t(),Ei.r$({collectionContextStore:n,collectionSettingsStore:n.settingsStore}),Ei.H4({collectionSettingsStore:n.settingsStore,item:{type:"layout"}}),n.settingsStore.setState({...n.settingsStore.state,openButtonPopup:"peekModeFormat"}))}(this.environment,this.props.onClose),o.close()}}]}]),initialFocus:0})})}}):null}getPeekModeFormatOptions(){return["side_peek","center_peek","full_page"].map((e=>({key:e,title:(0,Ui.LQ)(e),icon:(0,Ui.RO)(e)({width:16,fill:this.theme.mediumTextColor})})))}}Gi.displayName="TopbarPeekModeButton";const $i=Gi;var Qi=n(58810);const Yi=function(e){window.__c={n:"TopbarPeekOpenAsPageButton"};const{store:t,shouldShowMoveToMenu:n}=e,o=(0,A.O7)(),s=(0,b.useIntl)(),r=(0,Z.VK)((()=>(0,Ct.ZP)({store:t,fullyQualified:!1,pageVisitSource:Cn.tY.Expand})),[t]),a=(0,E.yK)((e=>({keyboardShortcut:{color:e.mediumInvertedTextColor},iconButtonWrapper:{height:24}})),[]),d=(0,i.useCallback)((()=>{var e,t,i;S.sxo(o,{isNewPage:n,peek_mode:Rn.default.state.mode,from:"topbar_button",target_page_id:null===(e=Rn.default.peekTarget.state)||void 0===e?void 0:e.id}),S.$CH(o,{peek_mode:Rn.default.state.mode,from:"topbar_open_as_page_button",target_page_id:null===(t=Rn.default.peekTarget.state)||void 0===t?void 0:t.id,target_parent_id:null===(i=Rn.default.peekTarget.state)||void 0===i?void 0:i.getParentId()})}),[o,n]);return(0,F.jsx)(di.Z,{renderTooltip:()=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Open in full page",id:"peekTopbar.navigateToPage.tooltip"})}),(0,F.jsx)(ai.Z,{style:a.keyboardShortcut,name:"commandEnter"})]}),render:e=>(0,F.jsx)("div",{style:a.iconButtonWrapper,children:(0,F.jsx)(ri.Z,{...e,icon:Qi.Z,iconStyle:{width:16,height:16},href:r,onClick:d,ariaLabel:s.formatMessage({id:"peekTopbar.navigateToPage.tooltip",defaultMessage:"Open in full page"})})})})};var Xi=n(67485),Ji=n(12253),eo=n(19368),to=n(23727);const no=(0,b.defineMessages)({moveToPrefixText:{id:"peekMoveToMenu.addTo.addTo",defaultMessage:"Add to"}});class io extends r.Z{renderComponent(){const{store:e,shouldShowMoveToMenu:t}=this.props,n=Rn.default.isSidePeekOpen();return(0,F.jsx)(Ci.Z,{store:e,disableRectangularSelection:!0,disableEditNearestBlock:!0,isPeekRenderer:!0,render:i=>{let{selectableEvents:o}=i;return(0,F.jsxs)("div",{...o,style:Xn({theme:this.theme,isSidePeekOpen:n}),children:[(0,F.jsxs)("div",{style:Jn({environment:this.environment}),children:[(0,F.jsxs)("div",{style:(r=this.environment,{...(0,Yn.X)({noDrag:r.device.isElectronMac}),display:"grid",gridAutoFlow:"column",gridColumnGap:2,alignItems:"center"}),children:[this.renderPeekClose(),(0,F.jsx)(Yi,{store:e,shouldShowMoveToMenu:t}),Rn.default.state.open&&(0,F.jsx)($i,{store:e,onClose:this.props.onClose}),this.renderPeekNavArrows(),(0,F.jsx)(so,{store:this.props.store,shouldShowMoveToMenu:this.props.shouldShowMoveToMenu}),(0,F.jsx)(li.Z,{store:e,isMobile:!1,buttonStyle:{...!this.props.shouldShowMoveToMenu&&{marginLeft:12}}})]}),(0,F.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,F.jsx)(ro,{store:this.props.store,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,pageVisitStore:this.props.pageVisitStore,presenceStore:this.props.presenceStore})]}),(0,F.jsx)(s.LazyBannersRenderer,{banners:ti.Z.state.banners,isMobile:!1,isInPeekRenderer:!0})]});var r}})}renderPeekClose(){if(Rn.default.isSidePeekOpen())return(0,F.jsx)(di.Z,{renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Close",id:"peekTopbar.close.button"}),(0,F.jsx)("br",{}),(0,F.jsx)(ai.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"esc"})]}),render:e=>(0,F.jsx)(ri.Z,{...e,icon:$n.t,iconStyle:{width:16,height:16},onClick:()=>this.props.onClose("close_button")})})}renderPeekNavArrows(){if(!Rn.default.state.open)return;if(this.props.shouldShowMoveToMenu)return;const{target:e,resultsStore:t}=Rn.default.state,n=null==t?void 0:t.getState(),i=e.id;return n&&n.length>0&&n.some((e=>e.id===i))?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(_i.Z,{}),(0,F.jsx)(di.Z,{renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Previous page",id:"peekTopbar.peekNavUpArrow.tooltip"}),(0,F.jsx)("br",{}),(0,F.jsx)(ai.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"peekUp"})]}),render:e=>(0,F.jsx)(ri.Z,{...e,disabled:i===n[0].id,icon:Dt.R,onClick:()=>k.goUpInPeekMode(),iconStyle:{fill:this.theme.mediumIconColor}})}),(0,F.jsx)(di.Z,{renderTooltip:()=>(0,F.jsxs)("div",{children:[(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Next page",id:"peekTopbar.peekNavDownArrow.tooltip"}),(0,F.jsx)("br",{}),(0,F.jsx)(ai.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"peekDown"})]}),render:e=>(0,F.jsx)(ri.Z,{...e,disabled:i===n[n.length-1].id,icon:Ot.E,onClick:()=>k.goDownInPeekMode(),iconStyle:{fill:this.theme.mediumIconColor}})})]}):void 0}}io.displayName="PeekTopbar";const oo=io;function so(e){let{store:t,shouldShowMoveToMenu:n}=e;window.__c={n:"MoveToMenu"};const[i,o]=(0,Z.VK)((()=>[Rn.default.state.open,!!Rn.default.state.open&&Rn.default.state.saveParent]),[]),s=(0,Z.VK)((()=>{const e=t.getParentCollectionStore();return(null==e?void 0:e.getDatabaseType())===Gn.iS?"tasks":void 0}),[t]);return i&&n?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(_i.Z,{}),(0,F.jsx)(xi,{store:t,saveParent:o,prefix:no.moveToPrefixText,pageType:s})]}):null}function ro(e){let{store:t,spaceStore:n,spaceViewStore:i,pageVisitStore:o,presenceStore:s}=e;window.__c={n:"ActionButtons"};const r=(0,A.O7)(),{device:a}=r,d=(0,Z.VK)((()=>(0,he.IJ)(r,t)),[r,t]),l=(0,Z.VK)((()=>ce.qG(t.id)),[t]),c=!a.isMobile&&n&&i&&!d&&!l,u=(0,Z.VK)((()=>Boolean(n&&!n.canEdit())),[n]),p=(0,Z.VK)((()=>t.canEdit()),[t]),h=(0,Z.VK)((()=>t.isRestricted()),[t]),m=n&&i&&!d&&(0,Mi.UP)({isSpaceGuest:u,canEditPage:p})&&!l;return(0,F.jsxs)("div",{style:{display:"flex",alignItems:"stretch",flexGrow:0,flexShrink:0,zIndex:1},children:[h&&(0,F.jsx)(Ji.Z,{style:{marginRight:14},onClick:()=>{oi.Z.setState({open:!0})}}),p&&(0,F.jsx)(Xi.Z,{rootStore:t,pageVisitStore:o,presenceStore:s}),m&&(0,F.jsx)(eo.Z,{store:t,buttonPopupStore:oi.Z}),c&&(0,F.jsx)(ji.Z,{blockStore:t,spaceStore:n,buttonPopupStore:ni}),c&&(0,F.jsx)(to.Z,{blockStore:t,spaceStore:n,buttonPopupStore:si.Z}),n&&i&&!d&&(0,F.jsx)(Ii.Z,{store:t,spaceViewStore:i}),l&&(0,F.jsx)(ei.Z,{}),c&&(0,F.jsx)(Ti.Z,{store:t,buttonPopupStore:ii.Z})]})}var ao=n(78901),lo=n(55064);function co(){window.__c={n:"CenterPeekRenderer"};const{open:e}=(0,Z.VK)((()=>Rn.default.state),[]),t=(0,Z.VK)((()=>En.Z.state),[]),n=(0,E.yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:ne.Nn,background:e.overlaySmokescreen},contentStyles:{...go(e),top:Rn.PeekModeOuterPadding,left:Rn.PeekModeOuterPadding,right:Rn.PeekModeOuterPadding,marginRight:"auto",height:`calc(100% - ${Rn.PeekModeOuterPadding}px*2)`,maxWidth:Rn.CenterPeekModeOuterWidth+t,borderRadius:4}})),[t]);return(0,F.jsx)(Fn.Z,{open:e,children:(0,F.jsx)(ho,{enableCaptureClick:!0,horizontalPadding:Rn.PeekModePadding.horizontal[Rn.PeekModeCenter],priority:void 0,showResizer:!1,styles:n})})}function uo(){window.__c={n:"SidePeekRenderer"};const e=(0,A.O7)(),t=(0,Z.VK)((()=>Rn.default.state),[]),n=(0,Z.VK)((()=>Rn.default.getSidePeekWidth(e.WindowSizeStore.state.width)),[e]),i=(0,E.yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,translateX:n,width:n,zIndex:ne.YO},contentStyles:{...go(e),top:0,right:0,width:"100%",height:"100%",borderRadius:0}})),[n]);return(0,F.jsx)(Dn.Z,{isVisible:!0,useCompositeLayer:!0,animationStyle:{translateX:t.open&&!t.isClosing?0:n},springConfig:{translateX:{stiffness:t.open&&t.isClosing?50:80,precision:1}},render:()=>(0,F.jsx)(ho,{enableCaptureClick:!1,horizontalPadding:Rn.PeekModePadding.horizontal[Rn.PeekModeSide],priority:-1,showResizer:!0,styles:i}),enterAnimationStyle:{translateX:t.open?0:n},onAnimationEnd:()=>{t.open&&t.isClosing?(Rn.default.setState({...t,isClosing:!1}),Mn.ME()):t.open&&t.isOpening&&Rn.default.setState({...t,isOpening:!1})}})}function po(){window.__c={n:"SideAndCenterPeekTopbar"};const e=(0,A.O7)(),t=(0,Z.VK)((()=>Rn.default.state),[]),{currentSpaceStore:n,currentSpaceViewStore:i}=(0,Z.VK)((()=>_.default.state),[]);return t.open?(0,F.jsx)(oo,{store:t.target,spaceStore:n,spaceViewStore:i,pageVisitStore:t.pageVisitStore,presenceStore:t.presenceStore,shouldShowMoveToMenu:t.showMoveTo,onClose:t=>{bo(e,t)}}):null}function ho(e){window.__c={n:"PeekContainer"};const{priority:t}=e,n=(0,A.O7)(),o=(0,Z.VK)((()=>Rn.default.state),[]),{shouldShowFrame:s}=(0,Z.VK)((()=>(0,ce.h1)(n)),[n]),r=(0,Z.VK)((()=>Ln.Tx()),[]),a=(0,Z.VK)((()=>o.open&&0===Vn.default.state.stores.length&&!Vn.default.state.pivot&&"editing"!==Gt.default.state.mode&&!Un.ZP.state.isOpen),[o.open]),d=(0,i.useCallback)((()=>{So(n)}),[n]),l=(0,i.useCallback)((()=>{!function(e){Rn.default.peekTarget.state&&(k.navigateToBlock({environment:e,store:Rn.default.peekTarget.state,pageVisitSource:Cn.tY.Expand}),S.sxo(e,{isNewPage:Rn.default.state.open&&Rn.default.state.showMoveTo,peek_mode:Rn.default.state.mode,from:"command_enter",target_page_id:Rn.default.peekTarget.state.id}),S.$CH(e,{peek_mode:Rn.default.state.mode,from:"command_enter",target_page_id:Rn.default.peekTarget.state.id,target_parent_id:Rn.default.peekTarget.state.getParentId()}))}(n)}),[n]);return s?o.open?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(On.Z,{priority:t,capture:r}),(0,F.jsx)(zn.Z,{capture:a,onEsc:d,onCommandEnter:l,children:(0,F.jsx)(mo,{...e})},o.target.id)]}):(0,F.jsx)(mo,{...e}):null}function mo(e){window.__c={n:"PeekContentContainer"};const{enableCaptureClick:t,bottomBar:n,horizontalPadding:o,showResizer:s,styles:r}=e,a=(0,i.useRef)(void 0);Pn.Z.PeekViewScroller=a.current;const d=(0,b.useIntl)(),l=(0,A.O7)(),c=(0,Z.VK)((()=>Rn.default.state),[]),u=(0,Z.SI)((()=>c.open?Kt.Z.getMode(l,c.target):Kt.m.disabled),[l,c]),p=(0,Z.VK)((()=>{if(!c.open)return;const{currentSpaceStore:e,currentSpaceViewStore:t}=_.default.state;return{pageStore:c.target,spaceStore:e,spaceViewStore:t,presenceStore:c.presenceStore,pageVisitStore:c.pageVisitStore,publicEditModeStore:u}}),[c,u]),h=(0,i.useCallback)((()=>{So(l)}),[l]),m=(0,i.useCallback)((e=>{let{startTime:t,endTime:n}=e;const i=c.open?_n.fm(c.target):void 0;An.default.measure({metricName:"collections.max_scroll_lag_in_session",startTime:t,endTime:n},{environment:l,data:Tn.vS(i)})}),[l,c]),g=(0,i.useCallback)((()=>{!function(e){bo(e,"empty_space_click")}(l)}),[l]);return(0,F.jsx)(kn.Mi,{value:p,children:(0,F.jsx)("div",{role:"region","aria-label":d.formatMessage({id:"peekRenderer.ariaLabel",defaultMessage:"Side Peek"}),"aria-hidden":!c.open||void 0,style:r.containerStyles,className:In.p1Q,children:c.open&&(0,F.jsxs)(F.Fragment,{children:[t&&(0,F.jsx)("div",{style:{width:"100%",height:"100%"},onClick:g}),(0,F.jsxs)("div",{style:r.contentStyles,children:[s&&(0,F.jsx)(lo.Z,{type:"peek"}),(0,F.jsx)(po,{}),(0,F.jsx)(Ci.Z,{store:c.target,isDefaultContainer:!0,droppable:!0,isPeekRenderer:!0,render:e=>{let{selectableEvents:t,selectableHoverMenuOverlay:n}=e;return(0,F.jsx)(i.Suspense,{fallback:(0,F.jsx)(qn.Z,{peekMode:Rn.default.getPeekMode(),isVisible:!0,store:c.target}),children:(0,F.jsx)(Hn.Z,{pageStore:c.target,pageVisitStore:c.pageVisitStore,initialChunkSize:25,incrementChunkSize:25,store:c.loadingContainerStore,render:e=>{let{ready:s,initialRequestCompleted:r,endOfResultsReached:d,isCollectionInPage:p}=e;return(0,F.jsxs)(i.Fragment,{children:[(0,F.jsxs)(Wn.Z,{ref:a,onScrollLagMeasure:p?m:void 0,preventType:s?jn.Q7(l):Zn.Z.All,type:Zn.Z.Y,style:{display:"flex",flexDirection:"column",flexGrow:1,position:"relative",transform:"translateZ(0)",...s?{}:vo},store:Nn.Z,...t,children:[n,(0,ue.GD)(u.state)&&(0,F.jsx)(se.GC,{scrollerStore:Nn.Z}),r&&(0,F.jsxs)(i.Fragment,{children:[(0,F.jsx)(Kn.Z,{context:Bn.S.PeekView,loadingContainerStore:c.loadingContainerStore,store:c.target,onTitleEsc:h,forceSelectTitleOnMount:!0,paddingLeft:o,paddingRight:o,paddingBottom:80,pageCoverHeight:"20vh",disabled:!c.open||c.isClosing}),(0,F.jsx)(ao.Z,{pageVisitStore:c.pageVisitStore,presenceStore:c.presenceStore,isPeekView:!0})]}),s&&!d&&(0,F.jsx)(sn.Z,{style:{zIndex:1,opacity:.5,width:fo,height:fo,marginTop:0,marginBottom:24,marginLeft:"auto",marginRight:"auto"}})]}),(0,F.jsx)(qn.Z,{peekMode:Rn.default.getPeekMode(),isVisible:!s,store:c.target})]})}})})}},c.target.id),n]})]})})})}function go(e){return{flexDirection:"column",position:"absolute",display:"flex",marginLeft:"auto",background:e.peekModalBackground,boxShadow:e.largeLightBoxShadow}}const vo={opacity:0,pointerEvents:"none",height:0},fo="1.375em";function bo(e,t){Mn.xv(e,t)}function So(e){bo(e,"esc")}const yo=function(){window.__c={n:"PeekRenderer"};const e=(0,A.O7)(),t=(0,i.useCallback)((()=>{Rn.default.state.open&&Rn.default.isSidePeekOpen()&&(be.toggleLeftSidebarByWindowSize(e),Rn.default.setState({...Rn.default.state,isOpening:!1}))}),[e]);switch((0,i.useEffect)((()=>(e.WindowSizeStore.addListener(t),e.WindowSizeStore.removeListener(t))),[e.WindowSizeStore,t]),(0,Z.VK)((()=>Rn.default.getPeekMode()),[])){case Rn.PeekModeCenter:return(0,F.jsx)(co,{});case Rn.PeekModeSide:return(0,F.jsx)(uo,{})}};var wo=n(20993),xo=n(64275),ko=n(55449),Co=n(15157),Mo=n(60113);const jo=(0,b.defineMessages)({"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.a.title":{defaultMessage:"Import your workspace (A)",id:"templateChecklist.quickNote.a.title"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.a.description":{defaultMessage:"See your docs and wiki in action (A)",id:"templateChecklist.quickNote.a.description"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.b.title":{defaultMessage:"Import your workspace (B)",id:"templateChecklist.quickNote.b.title"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.b.description":{defaultMessage:"See your docs and wiki in action (B)",id:"templateChecklist.quickNote.b.description"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.c.title":{defaultMessage:"Import your workspace (C)",id:"templateChecklist.quickNote.c.title"},"7e89f436-7aac-4f66-b0a6-6e65ec868d2a.c.description":{defaultMessage:"See your docs and wiki in action (C)",id:"templateChecklist.quickNote.c.description"}});function Io(e){return`templateChecklist--${e}--visible`}class To extends Di.default{getInitialState(){return{open:!0}}}const _o=new To;class Lo extends Di.default{getInitialState(){return{templateChecklistRecord:void 0,completed:!1,hide:!1}}}const Po=Lo;class Ao extends Di.default{getInitialState(){return{step:"list",templateChecklistRecord:void 0}}}const Zo=Ao;var Eo=n(64921),Uo=n(77137),Bo=n(15047);const Ro=e=>{let{percentComplete:t=.33}=e;return(0,F.jsx)("div",{style:{height:4,width:288,borderRadius:10,backgroundColor:"#E7E6E5"},children:(0,F.jsx)("div",{style:{height:4,width:288*t+"px",borderRadius:10,position:"relative",backgroundColor:"#2383E2"}})})};class No extends r.Z{renderComponent(){return(0,F.jsxs)("div",{children:[(0,ko.L)({height:24,width:24}),(0,F.jsx)("div",{style:this.getHeaderStyle(),children:Oo(this.props.useCase)}),(0,F.jsx)(Ro,{...this.props})]})}getHeaderStyle(){return{paddingTop:12,paddingBottom:12,color:this.theme.regularTextColor,fontWeight:R.Z.fontWeight.semibold,fontSize:17,lineHeight:1.4}}}No.displayName="TemplateChecklistHeader";const Vo=No;function Oo(e){switch(e){case"wiki":return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.wiki",defaultMessage:"Getting started with wikis & docs"});case"doc_notes":case"notes":return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.notes",defaultMessage:"Getting started with notes"});case"bookmarks":return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.databases",defaultMessage:"Getting started with databases"});case"project_management":return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.projectManagement",defaultMessage:"Getting started with projects & tasks"});default:return(0,F.jsx)(b.FormattedMessage,{id:"templateChecklistHeader.useCaseHeader.default",defaultMessage:"Getting started with Notion"})}}var Do=n(5257),zo=n(60458);class Fo extends r.Z{constructor(){super(...arguments),this.showingMore=Di.default.createValue(!1)}renderComponent(){const{title:e,description:t}=this.props;return(0,F.jsxs)("div",{style:{paddingTop:12,display:"flex",flexDirection:"row",width:"100%",...this.showingMore.state?{borderBottom:"1px solid #ECEBEA",marginBottom:12,paddingBottom:12}:{}},children:[(0,F.jsx)("div",{style:{paddingRight:10},children:(0,F.jsx)(zo.Z,{size:22,checked:this.props.checked,onClick:()=>this.props.onClick(),round:!0,fill:c.ZP.white})}),(0,F.jsxs)("div",{style:{width:"100%",paddingRight:"14px"},children:[(0,F.jsxs)("div",{style:{fontSize:14,fontWeight:R.Z.fontWeight.semibold,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e,(0,F.jsx)("span",{onClick:()=>this.showingMore.setState(!this.showingMore.state),children:this.showingMore.state?(0,ui.i)({height:11,width:11,display:"inline"}):(0,Do.o)({height:11,width:11,display:"inline"})})]}),this.showingMore.state&&(0,F.jsx)("div",{style:{fontSize:14,color:this.theme.mediumTextColor},children:t})]})]})}}Fo.displayName="TemplateChecklistStep";const Wo=Fo;class qo extends r.Z{constructor(){super(...arguments),this.completed=Di.default.createValue(!1),this.renderStepContent=e=>(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{style:{paddingBottom:8,width:"100%"},children:(0,F.jsx)(Vo,{percentComplete:e.getStepsCompleted().length/e.getSteps().length,useCase:Bo.rz})}),e.getSteps().map((t=>{if(null==e||!e.isDefined())return;const{title:n,description:i}=function(e,t){const n=jo[`${e}.${t}.title`],i=jo[`${e}.${t}.description`];if(!n||!i)throw new Error(`No title or description for ${e} at step ${t}`);return{title:n,description:i}}(e.getCopiedFrom(),t);return(0,F.jsx)(Wo,{title:(0,F.jsx)(b.FormattedMessage,{...n}),description:(0,F.jsx)(b.FormattedMessage,{...i}),checked:e.getStepsCompleted().includes(t),onClick:()=>{!function(e){const{environment:t,record:n,step:i}=e;if(!n.isDefined())return;const o=n.getStepsCompleted(),s={steps_completed:o.includes(i)?Qe.hX(o,(e=>e!==i)):Qe.jj([...o,i])};qt.createAndCommit({userAction:"templateChecklistActions.toggleStep",environment:t,perform:e=>{zt.sW({store:n,data:s,transaction:e})}})}({environment:this.environment,record:e,step:t})}},t)}))]}),this.renderCompleted=()=>(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",textAlign:"center"},children:[(0,F.jsx)("img",{style:{width:165,height:80},src:ut.Z.images.feedbackThankYouPng}),(0,F.jsx)("div",{style:this.getCompletedTitleStyle(),children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"You're done!",id:"templateChecklist.completed.header"})}),(0,F.jsx)("div",{style:this.getCompletedDescriptionStyle(),children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"For more inspirations, go to Notion Guides to sharpen your skills and explore new ways to use Notion.",id:"templateChecklist.completed.description"})})]}),this.handleCancel=()=>{this.props.onCancel()},this.flexCenteredStyle={display:"flex",alignItems:"center",flexDirection:"column"}}renderComponent(){return(0,F.jsx)(Dn.Z,{isVisible:_o.state.open,enterAnimationStyle:{opacity:1,scale:1},exitAnimationStyle:{opacity:0,scale:.95},render:()=>(0,F.jsxs)("div",{style:this.getContainerStyle(),children:[this.renderCancel(),this.renderStep()]})})}renderCancel(){return(0,F.jsx)(Eo.Z,{onClick:this.handleCancel,style:this.getCancelStyle(),hoveredStyle:{background:this.theme.buttonPressedBackground},children:(0,xo.D)({width:14,fill:this.theme.mediumTextColor})})}renderStep(){const e=this.props.templateChecklistStore.state.templateChecklistRecord;if(null==e||!e.isDefined())return;const t=e.getStepsCompleted().length!==e.getSteps().length;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Dn.Z,{isVisible:t,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},onAnimationEnd:()=>{this.completed.setState(!0),Qe.gw((()=>{_o.setState({open:!1}),this.props.onComplete()}),2e3)},render:()=>this.renderStepContent(e)}),(0,F.jsx)(Dn.Z,{isVisible:!t&&this.completed.state,enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:0},render:this.renderCompleted})]})}getContainerStyle(){return{...this.flexCenteredStyle,cursor:"default",padding:16,textAlign:"left",justifyContent:"start",background:this.theme.popoverBackground,borderRadius:4,boxShadow:this.theme.lightBoxShadow,position:"absolute",bottom:65+En.Z.state,right:16+En.Z.state,width:325,height:400,zIndex:ne.hT,clipPath:"inset(-10px -10px -10px -10px)"}}getCancelStyle(){return{position:"absolute",top:"10px",right:"10px",background:this.theme.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center"}}getCompletedTitleStyle(){return{color:this.theme.regularTextColor,fontWeight:R.Z.fontWeight.semibold,fontSize:14}}getCompletedDescriptionStyle(){return{color:this.theme.mediumTextColor,fontSize:12}}}qo.displayName="TemplateChecklist";const Ho=qo;var Ko=n(31156);class Go extends r.Z{constructor(){super(...arguments),this.storeTypes={templateChecklistButtonStore:Po},this.handleCancel=()=>{const{templateChecklistRecord:e}=this.stores.templateChecklistButtonStore.state;e&&(!function(e){const{environment:t,record:n}=e,i={opt_out:!0};qt.createAndCommit({userAction:"templateChecklistActions.optOut",environment:t,perform:e=>{zt.sW({store:n,data:i,transaction:e})}})}({environment:this.environment,record:e}),_o.setState({..._o.state,open:!1}))}}renderComponent(){const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=_.default.state;if(null!=e&&e.isDefined()&&null!=t&&t.isDefined())return(0,F.jsx)(Uo.Z,{throttle:1e3,request:{spaceId:t.id,blockId:e.id},performRequest:async e=>{let{blockId:t,spaceId:n}=e;const i=await Be.getTemplateChecklistForBlock(this.environment,{blockId:t,spaceId:n});if("success"===i.type){const{templateChecklistId:e}=i.data;if(!e)return;const t=new L.XJ(this.environment,{table:Mo.$,id:e});if(this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,templateChecklistRecord:t}),t.isDefined()){const e=Co.Z.get({userId:this.environment.currentUser.id,key:Io(t.id)});this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,hide:"boolean"==typeof e&&!e})}}},render:(e,t,n)=>{if(!n)return;const{templateChecklistRecord:i,completed:o}=this.stores.templateChecklistButtonStore.state;if(null==i||!i.isDefined()||i.getStepsCompleted().length===i.getSteps().length||o)return;const s=new Zo;return s.setState({...s.state,templateChecklistRecord:i}),this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,templateChecklistRecord:i}),i.getOptOut()?void 0:(0,F.jsxs)("div",{children:[(0,F.jsxs)(Eo.Z,{style:this.getRoundButtonStyle(),hoveredStyle:{background:this.theme.whiteButtonHoveredBackground},pressedStyle:{background:this.theme.whiteButtonPressedBackground},onClick:()=>{const e=this.stores.templateChecklistButtonStore.state.hide;this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,hide:!e}),Qo(e,i.id,this.environment)},children:[(0,ko.L)({height:18}),this.stores.templateChecklistButtonStore.state.hide&&(0,F.jsx)(Eo.Z,{onClick:this.handleCancel,style:this.getCancelStyle(),hoveredStyle:{background:this.theme.buttonPressedBackground},children:(0,xo.D)({width:14,fill:this.theme.mediumTextColor})})]}),!this.stores.templateChecklistButtonStore.state.hide&&(0,F.jsx)(Ho,{templateChecklistStore:s,onComplete:()=>this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,completed:!0}),onCancel:()=>{Qo(!1,i.id,this.environment),this.stores.templateChecklistButtonStore.setState({...this.stores.templateChecklistButtonStore.state,hide:!0})}})]})}})}getRoundButtonStyle(){return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",background:this.theme.buttonBackground,bottom:16+En.Z.state,right:60+En.Z.state,width:36,height:36,borderRadius:"100%",boxShadow:this.theme.lightBoxShadow,zIndex:ne.hT,opacity:ce.tu.state?0:1,transition:`\n\t\t\t\topacity ${Ko.Z.transitionDuration}ms,\n\t\t\t\tcolor ${Ko.Z.transitionDuration}ms\n\t\t\t`}}getCancelStyle(){return{position:"absolute",top:-2,right:-1,background:this.theme.buttonHoveredBackground,borderRadius:"100%"}}}Go.displayName="TemplateChecklistButton";const $o=Go;function Qo(e,t,n){Co.Z.set({userId:n.currentUser.id,key:Io(t),value:e})}var Yo=n(90965);function Xo(e){let{}=e;window.__c={n:"TransferWorkspaceModalWrapper"};const t=(0,Z.VK)((()=>_.default.state.currentSpaceStore),[]),n=(0,Z.VK)((()=>{var e;if(!t)return;const n=null===(e=t.getSettings())||void 0===e?void 0:e.space_request;return(0,Yo.DI)(n)?n:void 0}),[t]);return n?(0,F.jsx)(s.LazyTransferWorkspaceModal,{workspaceTransfer:n}):null}class Jo extends r.Z{constructor(){super(...arguments),this.appRenderState=this.createComputedStore((()=>ce.h1(this.environment))),this.handleFrameBlockerClick=()=>{be.close()},this.showHelpButtonStore=this.createComputedStore((()=>{if(!this.environment.currentUser.isLoggedIn())return!1;if(this.environment.device.isMobile)return!1;const{mainEditorCurrentBlockStore:e}=_.default.state;return!!e&&(!(0,he.IJ)(this.environment,e)&&!this.shouldIncludeAssistantButton.state)})),this.showTemplateChecklistStore=this.createComputedStore((()=>{if(!this.environment.currentUser.isLoggedIn())return!1;if(this.environment.device.isMobile)return!1;const{mainEditorCurrentBlockStore:e}=_.default.state;if(!e)return!1;return!("on"!==Te.default.getGroup("template-checklist"))})),this.isAssistantLabelerModeEnabledStore=this.createComputedStore((()=>(0,ue.Gw)())),this.isAssistant2EnabledStore=this.createComputedStore((()=>je.Z.isAssistant2Enabled(void 0))),this.shouldIncludeAssistantButton=this.createComputedStore((()=>{const{device:e}=this.environment,{RouterStore:t}=this.environment,{route:n}=t.state;return"chat"!==n.name&&je.Z.shouldShowAssistantInCorner(e)})),this.frameBlockerStyle={position:"absolute",top:0,left:(0,ke.qG)(this.environment),right:0,bottom:0,zIndex:ne.l6}}didMount(){var e;null!==(e=this.environment.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&this.environment.mobileNative.api.appComponentMountState(!0),Te.default.checkGate("use_new_undo_redo_behavior")&&oe.mF()}willUnmount(){var e;null!==(e=this.environment.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&this.environment.mobileNative.api.appComponentMountState(!1)}renderComponent(){const{isElectronMac:e,isMobile:t}=this.environment.device,{RouterStore:n}=this.environment,{route:i}=n.state,{mainEditorCurrentBlockStore:o,currentSpaceStore:r,currentUserRootStore:a,currentCollectionViewStore:d,currentUserSettingsStore:l}=_.default.state,{publicPageData:c}=Me.Z.state,u=this.environment.currentUser.isLoggedIn(),g=ye.TC.state,v=(0,ke.in)(this.environment),{state:{shouldShowSidebar:f,shouldShowFrame:b,shouldShowError:S}}=this.appRenderState,y="page"===i.name&&i.shouldDuplicate&&o&&(0,he.S4)(o),w="page"===i.name&&o&&le.Z.state.open&&(0,he.S4)(le.Z.state.blockStore),x=!u&&"modal"===i.name&&(i.templateGalleryItem||i.projectManagementLaunch),C="page"===i.name&&i.workspaceId?i.workspaceId:void 0,M=(0,h.wO)(i)&&a||"nativeTab"===i.name&&a||"quickSearch"===i.name&&a||a||o,j="nativeTab"===i.name&&"search"===i.tab||"quickSearch"===i.name,I=this.isAssistant2EnabledStore.state&&"chat"===i.name,T="quickSearch"===i.name,L="nativeTab"===i.name,P=(0,Ce.Y)("supportsNativeHome"),A=te("production",this.environment.device)||!(0,Ce.Y)("supportsNativeSearch"),Z=(0,ve.H)(),E=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(s.LazySidebarCreateTeamModal,{}),(0,F.jsx)(s.LazySidebarTeamModal,{}),(0,F.jsx)(s.LazyCreateTeamFromPageConfirmModal,{}),(0,F.jsx)(s.LazyConfirmPrivilegedActionModal,{})]});ie.wk({environment:this.environment});const U=Le.default.state.data;if(x){const{environment:e}=this;return i.projectManagementLaunch?k.setQueryParamRedirect({currentUserId:void 0,params:{tg:"gallery"}}):i.templateGalleryItem&&k.setQueryParamRedirect({currentUserId:void 0,params:{tg:i.templateGalleryItem}}),void k.navigate({environment:e,url:m._j.login})}return T?(0,F.jsxs)(ot.Z,{style:this.getStyle(),children:[M&&!S&&A&&(0,F.jsx)(s.LazySearch,{parentStore:M,renderAsPage:!0,renderId:(0,p.ZP)(),quickSearchMode:!0}),"rendered"===_.default.state.renderPhase&&(0,F.jsx)(s.LazyAppComponents,{})]}):(0,F.jsxs)(ot.Z,{style:this.getStyle(),children:[f&&!t&&(0,F.jsx)(es,{isElectronMac:e,isExpanded:v}),f&&t&&!P&&(0,F.jsx)(s.LazySidebarMobile,{}),f&&t&&P&&(0,F.jsx)(s.LazyTopLevelMobileComponents,{}),f&&Z&&(0,F.jsx)(ge.HX,{}),(0,F.jsx)(it,{}),(0,F.jsx)(X.R,{}),"workspaceSetup"===i.name&&(0,F.jsx)(s.LazyAppsSetup,{}),o&&b&&(0,F.jsx)(mn.Z,{routerState:this.props.routerState,store:o,collectionViewStore:d}),I&&"chat"===i.name&&(0,F.jsx)(ae.PS,{route:i}),y?(0,F.jsx)(pn,{blockId:i.blockId,workspaceId:C,tid:i.tid,from:i.from}):w&&(0,F.jsx)(s.LazyForkPageModal,{}),S&&c&&!y&&!w&&(0,F.jsx)(s.LazyPageError,{route:this.props.routerState.route,publicPageData:c}),f&&!(0,ke.Jr)(this.environment)&&g&&this.renderMobileSidebarFrameBlocker(),(0,F.jsx)(dt,{}),this.showHelpButtonStore.state&&(0,F.jsx)(gn.Z,{}),this.shouldIncludeAssistantButton.state&&(0,F.jsx)(ae.eC,{}),this.shouldIncludeAssistantButton.state&&(0,F.jsx)(ae.Q,{}),this.showTemplateChecklistStore.state&&(0,F.jsx)($o,{}),this.isAssistantLabelerModeEnabledStore.state&&(0,F.jsx)(ae.Zl,{}),o&&(0,F.jsx)(Yt,{pageStore:o,environment:this.environment}),(0,ue.GD)(void 0)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(re.u7,{}),(0,F.jsx)(se.oF,{})]}),(0,pe.u)(this.environment)&&(0,F.jsx)(Nt,{}),ns(this.environment)&&u&&o&&r&&(0,F.jsx)(s.LazyMobileBottomBar,{store:o}),!t&&"nativeTab"!==this.props.routerState.route.name&&"workspaceSetup"!==this.props.routerState.route.name&&(0,F.jsx)(yo,{}),"rendered"===_.default.state.renderPhase&&(0,F.jsxs)(F.Fragment,{children:[u&&(0,F.jsxs)(F.Fragment,{children:[E,(0,F.jsx)(me,{}),(0,F.jsx)(s.LazyCustomizePageMenuRenderer,{}),(0,F.jsx)(s.LazyTopbarPageAnalyticsOptOutMenu,{}),(0,F.jsx)(s.LazyImportModal,{}),(0,F.jsx)(s.LazyExportModal,{}),(0,F.jsx)(s.LazyPageTemplateModal,{}),(0,F.jsx)(s.LazyTemplateGalleryModal,{}),(0,F.jsx)(s.LazyIntegrationGalleryModal,{}),(0,F.jsx)(s.LazyGoogleAuthPromptModal,{}),(0,F.jsx)(s.LazyStudentNotEligibleModal,{}),(0,F.jsx)(s.LazyTypedDBMigrationModal,{}),(0,F.jsx)(s.LazyContactModal,{}),(0,F.jsx)(s.LazyPersonaCollectionModal,{}),(0,F.jsx)(s.LazyCookieModal,{}),(0,F.jsx)(s.LazyAutomationModal,{}),Ie.Z.state.open&&(0,F.jsx)(s.LazyConfirmOverwriteModal,{...Ie.Z.state}),(0,F.jsx)(s.LazyConfigureIntegrationModal,{}),(0,F.jsx)(s.LazyConnectOAuthIntegrationModal,{}),r&&U&&_e.Z.state.open&&(0,F.jsx)(s.LazySpaceSubscriptionUpgradeModal,{data:U,spaceStore:r}),r&&U&&ze.Z.state.open&&(0,F.jsx)(s.LazyClaimAndUpgradeModal,{spaceStore:r,data:U}),r&&U&&(0,F.jsx)(s.LazySpaceSubscriptionUpdateModal,{data:U}),r&&U&&(0,F.jsx)(s.LazyAddOnUpgradeModal,{data:U}),r?(0,F.jsx)(s.LazySubscriptionDebugCommands,{}):null,l&&r&&o&&(0,F.jsx)(s.LazyCsatPopup,{userSettingsStore:l,spaceStore:r,blockStore:o}),b&&(0,F.jsx)(s.LazyOpenInDesktopAppPopup,{}),b&&(0,F.jsx)(s.LazyWikiPromoPopup,{}),b&&(0,F.jsx)(s.LazyAddOnDiscountPopup,{}),b&&(0,F.jsx)(s.LazyAiQnaIntroModal,{}),b&&(0,F.jsx)(s.LazyAiQnaWaitlistModal,{}),b&&(0,F.jsx)(s.LazyEnterpriseLaunchModal,{})]}),(0,F.jsx)(s.LazyReportPageModal,{}),M&&!S&&A&&(0,F.jsx)(s.LazySearch,{parentStore:M,renderAsPage:j,renderId:j?(0,p.ZP)():void 0,quickSearchMode:!1}),L&&(0,F.jsx)(s.LazyMobileNativeFullPageComponents,{route:i}),(0,F.jsx)(s.LazyForkPagePopup,{}),void 0,(0,F.jsx)(Xo,{}),void 0]}),(0,F.jsx)(Pt,{}),"rendered"===_.default.state.renderPhase&&(0,F.jsx)(ct,{}),"rendered"===_.default.state.renderPhase&&(0,F.jsx)(s.LazyAppComponents,{}),(0,F.jsx)(Zt,{}),f&&!t&&o&&(0,F.jsx)(ge.$H,{currentBlockStore:o,isElectronMac:e}),(0,F.jsx)(s.LazyAdminModeBannerListener,{}),(0,F.jsx)(Oe.Z,{}),(0,F.jsx)(De.Z,{}),(0,F.jsx)(wo.Z,{subscriptionDataStore:Le.default}),(0,F.jsx)(yn,{}),(0,F.jsx)(Ve,{}),(0,F.jsx)(Ze,{}),(0,F.jsx)(de.j,{}),(0,F.jsx)(Ge,{}),(0,F.jsx)(xn,{})]})}renderMobileSidebarFrameBlocker(){return(0,F.jsx)("div",{style:this.frameBlockerStyle,onClick:this.handleFrameBlockerClick})}getStyle(){const{mainEditorCurrentBlockStore:e}=_.default.state;return{width:"100vw",height:"100%",position:"relative",display:"flex",flex:1,background:(0,fe.WE)(e)?this.theme.personalHomeBackground:this.theme.contentBackground}}}function es(e){let{isElectronMac:t,isExpanded:n}=e;window.__c={n:"AppLazySidebarComponent"};const o=(0,i.useCallback)((()=>(0,F.jsx)(we,{})),[]);return(0,F.jsx)(s.LazySidebarComponent,{isElectronMac:t,isExpanded:n,renderLoading:o})}Jo.displayName="App";const ts=Jo;function ns(e){const{isTablet:t,isMobileNative:n,isIOS:i}=e.device;return n&&i&&!t}var is=n(3403),os=n(97880);var ss=n(40754);function rs(e){let{payload:t}=e;window.__c={n:"ConfirmUnsubscribePage"};const n=(0,A.O7)(),[o,s]=(0,i.useState)(t?{type:"unconfirmed"}:{type:"error"}),r=(0,i.useCallback)((async()=>{if(!t)return void s({type:"error"});s({type:"loading"});const e=await async function(e){let{environment:t,payload:n}=e;const i=await Be.unsubscribeFromEmails(t,{payload:n});return"success"===i.type?{type:"success",spaceName:i.data.spaceName}:{type:"error"}}({environment:n,payload:t});s("error"===e.type?{type:"error"}:{type:"confirmed",spaceName:e.spaceName})}),[n,t]),a=(0,E.yK)((()=>({confirmUnsubscribeDescription:{marginBottom:10}})),[]);switch(o.type){case"loading":return(0,F.jsx)(ss.Z,{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Loading…",id:"confirmUnsubscribePage.loadingMessage"})});case"unconfirmed":return(0,F.jsxs)(ss.Z,{children:[(0,F.jsx)("div",{style:a.confirmUnsubscribeDescription,children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Are you sure you want to unsubscribe from this list?",id:"unsubscribeFromEmails.workspace.confirmUnsubscribeDescription"})}),(0,F.jsx)(N.Z,{isLarge:!0,onClick:r,children:(0,F.jsx)(b.FormattedMessage,{id:"confirmUnsubscribePage.confirmButton",defaultMessage:"Unsubscribe"})})]});case"confirmed":return(0,F.jsx)(ss.Z,{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"You have successfully unsubscribed from emails for {workspaceName}",values:{workspaceName:(0,F.jsx)("b",{children:o.spaceName})},id:"unsubscribeFromEmails.workspace.message"})});case"error":return(0,F.jsx)(ss.Z,{children:(0,F.jsx)(b.FormattedMessage,{id:"confirmUnsubscribePage.errorMessage",defaultMessage:"Could not unsubscribe."})});default:(0,os.t1)(o)}}n(82801);var as=n(73420);const ds=(0,b.defineMessages)({pageTitle:{id:"desktopEmailConfirmPage.title",defaultMessage:"Please check your email to confirm"},pageCaption:{id:"desktopEmailConfirmPage.subtitle",defaultMessage:"Almost there!"},pageDescription1:{id:"desktopEmailConfirmPage.description1",defaultMessage:"Please check your email and click the link to confirm."},pageDescription2:{id:"desktopEmailConfirmPage.description2",defaultMessage:"Once confirmed, you'll be able to return to the desktop app to complete signup."},checkYourGmail:{id:"desktopEmailConfirmPage.button.checkYourGmail",defaultMessage:"Check your Gmail inbox"}}),ls=()=>(0,F.jsxs)("svg",{style:{display:"block",height:42},viewBox:"0 0 87 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,F.jsx)("path",{d:"M1.805 1.294l16.6-1.226c2.039-.175 2.563-.057 3.845.875l5.299 3.733c.874.642 1.165.817 1.165 1.516v20.473c0 1.283-.466 2.042-2.097 2.158L7.34 29.99c-1.224.058-1.807-.117-2.448-.934L.99 23.982c-.7-.934-.99-1.633-.99-2.45V3.334c0-1.049.466-1.924 1.805-2.04z",fill:"#fff"}),(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.405.068l-16.6 1.226C.466 1.41 0 2.285 0 3.334v18.198c0 .817.29 1.516.99 2.45l3.902 5.074c.641.817 1.224.992 2.448.934l19.277-1.167c1.63-.116 2.097-.875 2.097-2.158V6.192c0-.663-.262-.854-1.033-1.42a85.473 85.473 0 01-.133-.096L22.25.943c-1.282-.932-1.806-1.05-3.845-.875zM7.776 5.857c-1.574.106-1.931.13-2.825-.597L2.678 3.452c-.231-.234-.115-.526.467-.584l15.958-1.166c1.34-.117 2.038.35 2.562.758l2.737 1.983c.117.059.408.408.058.408l-16.48.992-.204.014zM5.941 26.49V9.11c0-.759.233-1.109.931-1.168L25.8 6.834c.642-.058.932.35.932 1.108v17.264c0 .759-.117 1.401-1.165 1.459l-18.113 1.05c-1.048.058-1.513-.291-1.513-1.225zm17.88-16.448c.116.525 0 1.05-.525 1.11l-.873.173v12.832c-.758.408-1.456.641-2.039.641-.932 0-1.165-.292-1.863-1.166l-5.709-8.982v8.69l1.806.409s0 1.05-1.457 1.05l-4.017.233c-.117-.234 0-.817.407-.933l1.049-.291v-11.49L9.144 12.2c-.117-.525.174-1.283.99-1.342l4.31-.29 5.94 9.098v-8.049l-1.514-.174c-.117-.643.349-1.11.931-1.167l4.02-.234z",fill:"#000"}),(0,F.jsx)("path",{className:"fill",d:"M41.434 21.251v-7.91h.137l5.704 7.91h1.796V9.627h-1.997v7.902h-.137l-5.704-7.902H39.43V21.25h2.005zM54.715 21.429c2.635 0 4.238-1.724 4.238-4.584 0-2.852-1.611-4.584-4.238-4.584-2.618 0-4.237 1.74-4.237 4.584 0 2.86 1.595 4.584 4.237 4.584zm0-1.676c-1.393 0-2.19-1.063-2.19-2.908 0-1.837.797-2.908 2.19-2.908 1.386 0 2.183 1.071 2.183 2.908 0 1.845-.789 2.908-2.183 2.908zM60.778 10.28v2.215h-1.393v1.595h1.393v4.809c0 1.708.806 2.393 2.828 2.393.386 0 .757-.04 1.047-.097v-1.563c-.242.024-.395.04-.677.04-.837 0-1.208-.386-1.208-1.256V14.09h1.885v-1.595h-1.885v-2.216h-1.99zM65.85 21.251h1.99v-8.813h-1.99v8.813zm.991-10.27c.66 0 1.192-.533 1.192-1.201 0-.669-.531-1.209-1.192-1.209-.652 0-1.192.54-1.192 1.209 0 .668.54 1.2 1.192 1.2zM73.299 21.429c2.634 0 4.237-1.724 4.237-4.584 0-2.852-1.611-4.584-4.237-4.584-2.619 0-4.238 1.74-4.238 4.584 0 2.86 1.595 4.584 4.238 4.584zm0-1.676c-1.394 0-2.192-1.063-2.192-2.908 0-1.837.798-2.908 2.192-2.908 1.385 0 2.183 1.071 2.183 2.908 0 1.845-.79 2.908-2.183 2.908zM78.725 21.251h1.998V16.12c0-1.297.75-2.119 1.941-2.119 1.217 0 1.78.677 1.78 2.022v5.228h1.999v-5.703c0-2.103-1.072-3.287-3.037-3.287-1.314 0-2.2.604-2.619 1.587h-.137v-1.41h-1.925v8.813z",fill:"#000"})]});function cs(){return(0,F.jsx)("div",{style:{padding:24},children:(0,F.jsx)(ls,{})})}function us(e){const{experimentVariant:t}=e;return(0,F.jsx)("div",{style:{width:800,height:"80vh",margin:"0 auto"},children:(0,F.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},children:[(0,F.jsxs)(as.sg,{gap:16,padding:16,children:[(0,F.jsx)("div",{style:{fontSize:36,fontWeight:R.Z.fontWeight.bold},children:(0,F.jsx)(b.FormattedMessage,{...ds.pageTitle})}),(0,F.jsx)("div",{style:{fontWeight:R.Z.fontWeight.bold},children:(0,F.jsx)(b.FormattedMessage,{...ds.pageCaption})}),(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{...ds.pageDescription1})}),(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{...ds.pageDescription2})}),"with_gmail_cta"===t&&(0,F.jsx)(N.Z,{style:{width:"fit-content"},isLarge:!0,onClick:()=>{window.location.href="https://mail.google.com/mail/u/0/#search/Your+Notion+signup+code+is"},children:(0,F.jsx)(b.FormattedMessage,{...ds.checkYourGmail})})]}),(0,F.jsx)(as.sg,{children:(0,F.jsx)("img",{style:{width:350},src:ut.Z.images.onboarding.couch2Png})})]})})}function ps(){window.__c={n:"DesktopEmailConfirmPage"};const e=(0,A.O7)(),[t,n]=(0,i.useState)(null);return(0,i.useEffect)((()=>{try{const t=new URLSearchParams(window.location.search).get("state");if(!t)return;const i=JSON.parse(atob(t));i.experimentVariant&&n(i.experimentVariant),i.email&&i.deviceId&&S.$kb(e,{desktopAppRerouteEmail:i.email,desktopAppDeviceId:i.deviceId})}catch(t){}}),[e,n]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(cs,{}),(0,F.jsx)(us,{experimentVariant:t})]})}n(84456),n(53238);var hs=n(13559),ms=n(44819);function gs(e){window.__c={n:"FrontFallbackPage"};const{preventFrontRedirect:t}=e,n=(0,A.O7)(),{pathname:i,search:o,hash:r}=window.location;if(!t&&(0,ms.XR)(n,i)){const e=o.length>0?`${o}&${hs.AM}=1`:`?${hs.AM}=1`;return window.location.href=i+e+r,null}return(0,F.jsx)(s.LazyFrontLoginPage,{isSignup:!n.currentUser.isLoggedIn()})}var vs=n(26198);class fs extends r.Z{constructor(){super(...arguments),this.intersectionObserver=void 0,this.registry=new Map,this.handleIntersectionObserverEntries=(e,t)=>{for(const n of e){if(!(n.target instanceof HTMLElement))continue;const e=this.registry.get(n.target);e&&(e.isVisible=n.isIntersecting,e.latestTimestamp=n.time,e.isVisible&&!e.isSpawned&&(e.isSpawned=!0,e.onVisibilityChange(!0)))}this.despawnOldFrames()}}willMount(){void 0!==window.IntersectionObserver&&(this.intersectionObserver=new IntersectionObserver(this.handleIntersectionObserverEntries))}willUnmount(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}didUpdate(e){this.props.maxPreferredIFrames<e.maxPreferredIFrames&&this.despawnOldFrames()}despawnOldFrames(){const e=Array.from(this.registry.values()).filter((e=>e.isSpawned)),t=e.length-this.props.maxPreferredIFrames;if(t<=0)return;const n=e.filter((e=>!e.isVisible));n.sort(((e,t)=>e.latestTimestamp-t.latestTimestamp));for(const i of n.slice(0,t))i.isSpawned=!1,i.onVisibilityChange(!1)}track(e,t){this.intersectionObserver?(this.registry.set(e,{isVisible:!1,isSpawned:!1,latestTimestamp:0,onVisibilityChange:Qe.Ds(t,50)}),this.intersectionObserver.observe(e)):vs.uf.track(e,t)}untrack(e){this.intersectionObserver?(this.intersectionObserver.unobserve(e),this.registry.delete(e)):vs.uf.untrack(e)}renderComponent(){return(0,F.jsx)(vs.Lr.Provider,{value:this,children:this.props.children})}}function bs(e){let t=e.isMobile?10:50;return e.ramSizeInGB&&(t=Math.floor(2*e.ramSizeInGB)),{maxPreferredIFrames:t}}fs.displayName="IFrameManager";var Ss=n(25777);const ys=function(e){window.__c={n:"Index"};const t=(0,A.O7)(),n={position:"absolute",top:0,left:0,bottom:0,right:0},{device:i}=t;return t.currentUser.isLoggedIn()?(0,F.jsx)("div",{style:n,children:(0,F.jsx)(Ss.Z,{style:{width:"100%",height:"100%"},spinnerSize:mn.Z.spinnerSize,showSpinnerTimeout:500})}):i.isElectron?(0,F.jsx)(s.LazyLoginDesktop,{}):i.isMobileNative?(0,F.jsx)(s.LazyLoginMobileNative,{}):(0,F.jsx)(gs,{preventFrontRedirect:!0})};var ws=n(42402),xs=n(83785),ks=n(84076);class Cs extends r.Z{constructor(){super(...arguments),this.handleOpenInNativeApp=()=>{k.openInNativeApp({url:this.props.redirect,environment:this.environment})}}didMount(){this.handleOpenInNativeApp()}renderComponent(){return(0,F.jsxs)(ss.Z,{children:[(0,F.jsx)("div",{style:{color:this.theme.regularTextColor},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Redirecting to your Notion app…",id:"webApp.redirectingToDesktop.message"})}),(0,F.jsx)(ks.Z,{onClick:this.handleOpenInNativeApp,style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:this.theme.lightTextColor},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"If you weren't redirected, click here.",id:"webApp.redirectingToDesktop.directLink.message"})}),(0,F.jsx)(ks.Z,{href:this.props.redirect,style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:c.ZP.uiGray},children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Or, continue in your browser",id:"webApp.redirectingToDesktop.continueInBrowser.message"})})]})}}Cs.displayName="NativeRedirect";const Ms=Cs;var js=n(93214),Is=n(24211),Ts=n(90287),_s=n(47307),Ls=n(57400),Ps=n(24215),As=n(22974),Zs=n(30021);function Es(){return window.__c={n:"AppearanceSettingListener"},function(){const e=(0,A.O7)(),t=(0,i.useCallback)((()=>{As.LH(e)}),[e]);(0,i.useEffect)((()=>(t(),Zs.Z.addListener(t),()=>{Zs.Z.removeListener(t)})),[t])}(),null}var Us=n(81236);function Bs(){return window.__c={n:"IdentifyCurrentUser"},function(){const e=(0,A.O7)(),t=(0,A.Fy)(),n=(0,Z.VK)((()=>{const{currentUserStore:n,currentUserSettingsStore:i,currentUserRootStore:o}=_.default.state;if(!(e.currentUser.id&&n&&i&&o))return e.publicDomainUserId?{user_id:e.publicDomainUserId}:void 0;const s=o.getSpaceViewStores(),r=s.length>0&&s.every((e=>e.isReady()));if(!n.isDefined()||!i.isDefined()||!r)return;const a=Qe.oA(s.map((e=>e.getSpaceId()))).map((t=>Us.Z.getPublicSpaceData(e,t)));if(!a.every((e=>Boolean(e)||null===e)))return;const d=(0,Ps.ls)(a),l=i.getSettings();if(!l)return;if(void 0===Le.default.state.data)return;const c={user_id:n.id,email:n.getEmail(),user_persona:l.persona,user_team_role:l.team_role,user_use_cases:l.use_cases,user_company_size:l.company_size,user_source:l.source,user_plan_type:d,user_subscription_tier:Le.default.state.data.subscriptionTier,user_has_at_least_one_free_tier_space:(0,Ps.nZ)(a),time_zone:l.time_zone,locale:l.locale,preferred_locale:l.preferred_locale,signup_time:l.signup_time,app_version:t.version};return l.signup_time&&(c.created_at=Math.floor(l.signup_time/1e3)),t.desktopAppVersion&&(c.desktop_app_version=t.desktopAppVersion),t.mobileAppVersion&&(c.mobile_app_version=t.mobileAppVersion),l.used_desktop_web_app&&(c.used_desktop_web_app=l.used_desktop_web_app),l.used_mobile_web_app&&(c.used_mobile_web_app=l.used_mobile_web_app),l.used_mac_app&&(c.used_mac_app=l.used_mac_app),l.used_windows_app&&(c.used_windows_app=l.used_windows_app),l.used_ios_app&&(c.used_ios_app=l.used_ios_app),l.used_android_app&&(c.used_android_app=l.used_android_app),c}),[e,t],{useDeepEqual:!0});(0,i.useEffect)((()=>{n&&"none"!==n.user_plan_type&&Rs(e,n)}),[e,n]);const o=void 0!==n;(0,i.useEffect)((()=>{const t=window.setTimeout((()=>{!o&&e.currentUser.id&&Rs(e,{user_id:e.currentUser.id})}),5e3);return()=>{window.clearTimeout(t)}}),[e,o])}(),null}const Rs=Qe.P2(S.XWf,5e3);var Ns=n(55632),Vs=n(58455);function Os(){return window.__c={n:"InitializeEventTrailApi"},function(){const e=(0,A.O7)(),t=(0,Z.VK)((()=>Vs.default.state.isLoaded),[]),n=(0,Z.VK)((()=>Vs.default.state.isLoggingEnabled),[]);(0,i.useEffect)((()=>{t&&async function(){const t=await(0,Ps.cG)(e);await Ns.j2({config:T.default,isEnabled:n,deviceId:t,cookieImpl:e.cookieImpl})}()}),[e,t,n])}(),null}var Ds=n(2991);function zs(){return window.__c={n:"RegisterDesktopApp"},function(){const{deviceType:e}=(0,A.Fy)(),t=(0,A.O7)(),n=t.currentUser.isLoggedIn();(0,i.useEffect)((()=>{if(!n)return;if("windows-desktop"!==e&&"mac-desktop"!==e)return;const i=async()=>{await y.isMainTabOrWindow()&&Be.registerDesktopApp(t,{deviceType:e})};i();const o=window.setInterval((()=>{i()}),5*We.hM);return()=>{window.clearInterval(o)}}),[n,e,t])}(),null}function Fs(){return window.__c={n:"TrackLoadCachedPageChunkMetrics"},function(){const e=(0,A.O7)(),t=(0,i.useCallback)((t=>{const n={compressed:t.decodedBodySize!==t.encodedBodySize,local_cache_hit:0===t.transferSize,next_hop_protocol:t.nextHopProtocol,did_prefetch:e.prefetchCache.isEnabled},i={dns_lookup:{startTime:t.domainLookupStart,endTime:t.domainLookupEnd},connection_establish:{startTime:t.connectStart,endTime:t.connectEnd},request_queued:{startTime:t.connectEnd,endTime:t.requestStart},response_wait:{startTime:t.requestStart,endTime:t.responseStart},response_download:{startTime:t.responseStart,endTime:t.responseEnd}};An.default.measure({metricName:"load_cached_page_chunk.fetch",startTime:t.fetchStart,endTime:t.responseEnd},{environment:e,data:{...n,sub_metrics:{dns_lookup:i.dns_lookup.endTime-i.dns_lookup.startTime,connection_establish:i.connection_establish.endTime-i.connection_establish.startTime,request_queued:i.request_queued.endTime-i.request_queued.startTime,response_wait:i.response_wait.endTime-i.response_wait.startTime,response_download:i.response_download.endTime-i.response_download.startTime}}});for(const[o,{startTime:s,endTime:r}]of Object.entries(i))An.default.measure({metricName:`load_cached_page_chunk.fetch.${o}`,startTime:s,endTime:r},{environment:e,data:n})}),[e]);(0,i.useEffect)((()=>{const e=new PerformanceObserver((n=>{const i=n.getEntries().find((e=>e.name.includes(`${T.default.api.http}/loadCachedPageChunk`)&&!e.name.endsWith("s")));i&&("resource"===i.entryType&&t(i),null==e||e.disconnect())}));return e.observe({type:"resource",buffered:!0}),()=>{e.disconnect()}}),[t])}(),null}var Ws=n(98794),qs=n(27534);class Hs extends r.Z{constructor(){super(...arguments),this.multiSelectionStartStore=void 0,this.multiSelectionEndStore=void 0,this.handleTextSelectionChange=()=>{const e=Gt.default.state,t="empty"===e.mode?void 0:e.multiSelection.start.store,n="empty"===e.mode?void 0:e.multiSelection.end.store;if(this.multiSelectionStartStore===t&&this.multiSelectionEndStore===n)return;if(this.multiSelectionStartStore=t,this.multiSelectionEndStore=n,this.multiSelectionStartStore!==this.multiSelectionEndStore)return;const i=qs.getSimpleTableCellFromTextSelection();if(!i)return;const{rowIndex:o,columnIndex:s,simpleTableStore:r}=i.props;Ws.selectCell({environment:this.environment,rowIndex:o,columnIndex:s,simpleTableStore:r})}}willMount(){Gt.default.addListener(this.handleTextSelectionChange)}willUnmount(){Gt.default.removeListener(this.handleTextSelectionChange),this.multiSelectionStartStore=void 0,this.multiSelectionEndStore=void 0}}Hs.displayName="TextAndSimpleTableSelectionSyncer";const Ks=Hs;var Gs=n(82246),$s=n(81212),Qs=n(4615);async function Ys(e){var t,n;void 0!==_.default.state.currentUserStore&&void 0!==_.default.state.currentSpaceStore||await _.default.waitUntil((()=>void 0!==_.default.state.currentUserStore&&void 0!==_.default.state.currentSpaceStore));const i=null===(t=_.default.state.currentUserStore)||void 0===t?void 0:t.id,o=null===(n=_.default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(!document.hasFocus())return;if(!i||!o)return;const s=Ps.Cd({userId:i,spaceId:o}),r=Date.now();s?Ps.ci({userId:i,spaceId:o,session:{...s,lastFocusedTime:r}}):Ps.ci({userId:i,spaceId:o,session:{id:(0,Qs.ZP)(),sessionStartTime:r,lastFocusedTime:r}})}function Xs(){return window.__c={n:"AnalyticsSessionListener"},function(){const e=(0,A.O7)();(0,i.useEffect)((()=>{let e;document.hasFocus()&&(e=setInterval((()=>{Ys()}),6e4),Ys());const t=()=>{e&&clearInterval(e),e=setInterval((()=>{Ys()}),6e4),Ys()},n=()=>{e&&clearInterval(e),e=void 0};return window.addEventListener("focus",t),window.addEventListener("blur",n),()=>{e&&clearInterval(e),window.removeEventListener("focus",t),window.removeEventListener("blur",n)}}),[e])}(),null}var Js=n(54064),er=n(88632),tr=n(29755),nr=n(17963);const ir=new Js.Z;const or=function(){window.__c={n:"ApiListener"};const e=(0,i.useRef)(!1),t=(0,A.O7)(),n=(0,i.useCallback)((async e=>{if(e.currentUser.id&&Be.pendingTaskIds.size>0){const t=await Be.getTasks(e,{taskIds:Array.from(Be.pendingTaskIds.values())});if("success"===t.type){const{results:n}=t.data,i=new Set(Be.pendingTaskIds);for(const t of n)i.delete(t.id),t.status&&Be.handleRecordMapForResponse({environment:e,eventName:t.eventName,response:t.status,userId:e.currentUser.id}),Be.pendingTaskEventsById.emit(t.id,t),ir.emit(t.eventName,t),"failure"!==t.state&&"success"!==t.state||Be.pendingTaskIds.delete(t.id);if(i.size>0)for(const e of i.values())Be.pendingTaskIds.delete(e)}}}),[]),o=(0,i.useCallback)((async e=>{if(e.currentUser.id){const t=await Be.getUserTasks(e,{});if("success"===t.type){for(const e of t.data.taskIds)Be.pendingTaskIds.add(e);t.data.taskIds.length>0&&n(e)}}}),[n]),s=(0,i.useCallback)((()=>{const n=er.Z.state.online;n&&!e.current&&o(t),e.current=n}),[t,o]);function r(e){"success"===e.state?tr.Z.setStatus(e.request.blockId,void 0):"in_progress"===e.state||"not_started"===e.state?tr.Z.setStatus(e.request.blockId,e.status):tr.Z.setStatus(e.request.blockId,void 0)}function a(e){"success"===e.state?nr.Z.setStatus(e.request.blockId,!1):"in_progress"===e.state||"not_started"===e.state?nr.Z.setStatus(e.request.blockId,!0):nr.Z.setStatus(e.request.blockId,!1)}return(0,i.useEffect)((()=>{e.current=er.Z.state.online;const i=setInterval((()=>n(t)),1e3);return o(t),er.Z.addListener(s),ir.addListener("importEvernote",r),ir.addListener("extractWebClipperContent",a),()=>{clearInterval(i),er.Z.removeListener(s),ir.removeListener("importEvernote",r),ir.removeListener("extractWebClipperContent",a)}}),[t,n,s,o]),null};var sr=n(12321);class rr extends r.Z{async willMountOrUpdate(){const{currentUserRootStore:e}=_.default.state;if(!e)return;await sr.w();const t=e.getSpaceViewStores();for(const n of t){const e=n.getBookmarkedPageStores();for(const n of e)dr(n);const t=n.getSharedPageStores();for(const n of t)dr(n);const i=n.getTeamsStores();for(const n of i){const e=n.getTeamPagesStores();for(const t of e)dr(t)}const o=n.getSpaceStore();if(o){Us.Z.getPublicSpaceData(this.environment,o.id);const e=(0,mi.XD)(this.environment,o);for(const t of e)dr(t)}}}}rr.displayName="AppRecordStoreListener";const ar=rr;function dr(e){e.load();const t=e.getCollectionViewSourceOrLinkCollectionStores();for(const n of t)n.load()}var lr=n(54153),cr=n(2449),ur=n(10854),pr=n(73329),hr=n(85844);class mr extends r.Z{constructor(){super(...arguments),this.handleElectronUpdateChecking=()=>{const{AppUpdateStore:e}=this.environment;e.setState({appUpdate:e.state.appUpdate,electronUpdate:{state:"checking"}})},this.handleElectronUpdateError=(e,t)=>{const{AppUpdateStore:n}=this.environment;n.setState({appUpdate:n.state.appUpdate,electronUpdate:{state:"error",error:t}})},this.handleElectronUpdateNotAvailable=()=>{const{AppUpdateStore:e}=this.environment;e.setState({appUpdate:e.state.appUpdate,electronUpdate:{state:"no-update",timestamp:Date.now()}})},this.handleElectronUpdateAvailable=(e,t)=>{const{AppUpdateStore:n}=this.environment,i=(0,ee.parseVersion)(t.version),o=y.getDesktopVersion(),s=(0,ee.getUpdateType)({currentVersion:o,nextVersion:i,app:"desktop"});n.setState({appUpdate:n.state.appUpdate,electronUpdate:{state:"downloading",type:s,version:i,timestamp:Date.now(),progress:0}})},this.handleElectronUpdateProgress=(e,t)=>{const{AppUpdateStore:n}=this.environment,i=n.state;i.electronUpdate&&"downloading"===i.electronUpdate.state&&n.setState({appUpdate:i.appUpdate,electronUpdate:{...i.electronUpdate,progress:t.transferred/t.total}})},this.handleElectronUpdateReady=(e,t)=>{const{device:n}=this.environment,{AppUpdateStore:i}=this.environment,o=lr.Z.get(ur.Tm),s=t.version;if(o===s){if(n.isMac)return i.setState({appUpdate:i.state.appUpdate,electronUpdate:{state:"ready",type:ee.UpdateType.Major,version:void 0}}),void _s.showDialog({message:(0,F.jsx)(b.FormattedMessage,{id:"desktopAppUpdater.moveNotionToApplicationsFolderDialog.prompt",defaultMessage:"Please move the Notion app into the Applications folder for the auto-updater to work."}),showCancel:!1,keepFocus:!1,handleCancel:()=>(0,ur.mK)(this.environment),items:[{label:(0,F.jsx)(b.FormattedMessage,{id:"desktopAppUpdater.moveNotionToApplicationsFolderDialog.dismissButton.label",defaultMessage:"Okay"}),onAccept:()=>(0,ur.mK)(this.environment)}]});Li.log({level:"error",from:"AppUpdateListener",type:"electronUpdateFailed",data:{miscDataToConvertToString:{previousUpdateReady:o,nextUpdateReady:s}}})}const r=y.getDesktopVersion(),a=(0,ee.parseVersion)(t.version),d=(0,ee.getUpdateType)({currentVersion:r,nextVersion:a,app:"desktop"});i.setState({appUpdate:i.state.appUpdate,electronUpdate:{state:"ready",type:d,version:a}})},this.handleAppUpdateChecking=()=>{const{AppUpdateStore:e}=this.environment;e.state.appUpdate&&"ready"===e.state.appUpdate.state||e.setState({electronUpdate:e.state.electronUpdate,appUpdate:{state:"checking"}})},this.handleElectronAppUpdateError=(e,t)=>{this.handleAppUpdateError(t)},this.handleAppUpdateError=e=>{const{AppUpdateStore:t}=this.environment;t.state.appUpdate&&"ready"===t.state.appUpdate.state||t.setState({electronUpdate:t.state.electronUpdate,appUpdate:{state:"error",error:e}})},this.handleAppUpdateNotAvailable=()=>{const{AppUpdateStore:e}=this.environment;e.state.appUpdate&&"ready"===e.state.appUpdate.state||e.setState({electronUpdate:e.state.electronUpdate,appUpdate:{state:"no-update",timestamp:Date.now()}})},this.handleElectronAppUpdateAvailable=(e,t)=>{this.handleAppUpdateAvailable(t)},this.handleAppUpdateAvailable=e=>{const{AppUpdateStore:t}=this.environment;if(t.state.appUpdate&&"ready"===t.state.appUpdate.state)return;const n=(0,ee.parseVersion)(e.version),i=cr.ac(),o=(0,ee.getUpdateType)({currentVersion:i,nextVersion:n,app:"client"});t.setState({electronUpdate:t.state.electronUpdate,appUpdate:{state:"downloading",type:o,version:n,timestamp:Date.now(),progress:0}})},this.handleElectronAppUpdateProgress=(e,t)=>{this.handleAppUpdateProgress(t)},this.handleAppUpdateProgress=e=>{const{AppUpdateStore:t}=this.environment,n=t.state;n.appUpdate&&"downloading"===n.appUpdate.state&&t.setState({electronUpdate:n.electronUpdate,appUpdate:{...n.appUpdate,progress:e.downloaded/e.total}})},this.handleElectronAppUpdateReady=(e,t)=>{this.handleAppUpdateReady(t)},this.handleAppUpdateReady=e=>{const{AppUpdateStore:t}=this.environment,n=(0,ee.parseVersion)(e.version),i=cr.ac(),o=(0,ee.getUpdateType)({currentVersion:i,nextVersion:n,app:"client"});if(!cr.M0(n)){const e={state:"ready",type:o,version:n};t.setState({electronUpdate:t.state.electronUpdate,appUpdate:e})}fr(o,n,this.environment)},this.handleAppUpdateReload=e=>{vn.Js({bannerStore:pr.Z}),cr.hC({environment:this.environment,url:window.location.href,version:e})},this.handleElectronAppUpdateInstall=()=>{const e=this.environment.AppUpdateStore;if(er.Z.getState().online&&e.isSilentUpdate()){const t=e.state.appUpdate;cr.hC({environment:this.environment,url:window.location.href,version:t.version})}},this.pollForAppJsUpdates=async()=>{let e="";for(await new Promise((e=>setTimeout(e,5e3)));this.componentIsMounted;){if(void 0===hr.Z.state.isVisible||!0===hr.Z.state.isVisible)try{const t=cr.ac(),n=await Be.getAssetsJsonV2(this.environment,{hash:e});if("success"===n.type){const i=n.data;if("version"in i){const e=(0,ee.parseVersion)(i.version);e&&((0,ee.isEqualVersion)(e,t)||this.handleAppUpdateReady(i))}"hash"in i&&(e=i.hash||"")}}catch(t){}await new Promise((e=>setTimeout(e,6e4)))}}}didMount(){const{device:e,mobileNative:t}=this.environment;if(e.isElectron?(y.electronUpdateReady.addListener(this.handleElectronUpdateReady),y.electronUpdateError.addListener(this.handleElectronUpdateError),y.electronUpdateChecking.addListener(this.handleElectronUpdateChecking),y.electronUpdateAvailable.addListener(this.handleElectronUpdateAvailable),y.electronUpdateProgress.addListener(this.handleElectronUpdateProgress),y.electronUpdateNotAvailable.addListener(this.handleElectronUpdateNotAvailable),y.appUpdateReady.addListener(this.handleElectronAppUpdateReady),y.appUpdateError.addListener(this.handleElectronAppUpdateError),y.appUpdateChecking.addListener(this.handleAppUpdateChecking),y.appUpdateAvailable.addListener(this.handleElectronAppUpdateAvailable),y.appUpdateInstall.addListener(this.handleElectronAppUpdateInstall),y.appUpdateProgress.addListener(this.handleElectronAppUpdateProgress),y.appUpdateNotAvailable.addListener(this.handleAppUpdateNotAvailable),y.appUpdateReload.addListener(this.handleAppUpdateReload)):t?t.updateReceiveApiHandlers({appUpdateReady:this.handleAppUpdateReady,appUpdateError:this.handleAppUpdateError,appUpdateChecking:this.handleAppUpdateChecking,appUpdateAvailable:this.handleAppUpdateAvailable,appUpdateProgress:this.handleAppUpdateProgress,appUpdateNotAvailable:this.handleAppUpdateNotAvailable}):T.default.isAdminMode||T.default.isLocalhost&&!T.default.offline||this.pollForAppJsUpdates(),this.displayBannerIfSilentUpdate(),e.isMobileNative&&t&&t.api.openUpdateSettings){const t=e.osVersion,n=e.isAndroid&&(0,ee.isLessThanVersion)(t,[7,0]),i=e.isIOS&&(0,ee.isLessThanVersion)(t,[15,0]);(n||i)&&function(e){const{mobileNative:t}=e;if(!t)return;vn.Bw({bannerStore:pr.Z,id:"PlatformUpdateWarning",contentKey:"mobile_platform_unsupported",styleKey:Sn.v.Red})}(this.environment)}}willUnmount(){const{device:e}=this.environment;e.isElectron&&(y.electronUpdateReady.removeListener(this.handleElectronUpdateReady),y.electronUpdateError.removeListener(this.handleElectronUpdateError),y.electronUpdateChecking.removeListener(this.handleElectronUpdateChecking),y.electronUpdateAvailable.removeListener(this.handleElectronUpdateAvailable),y.electronUpdateProgress.removeListener(this.handleElectronUpdateProgress),y.electronUpdateNotAvailable.removeListener(this.handleElectronUpdateNotAvailable),y.appUpdateReady.removeListener(this.handleElectronAppUpdateReady),y.appUpdateError.removeListener(this.handleElectronAppUpdateError),y.appUpdateChecking.removeListener(this.handleAppUpdateChecking),y.appUpdateAvailable.removeListener(this.handleElectronAppUpdateAvailable),y.appUpdateProgress.removeListener(this.handleElectronAppUpdateProgress),y.appUpdateNotAvailable.removeListener(this.handleAppUpdateNotAvailable),y.appUpdateReload.removeListener(this.handleAppUpdateReload))}displayBannerIfSilentUpdate(){const e=cr.ac(),t=cr.uG();if(!(0,ee.isEqualVersion)(e,t)){0,fr((0,ee.getUpdateType)({currentVersion:e,nextVersion:t,app:"client"}),t,this.environment)}}}mr.displayName="AppUpdateListener";const gr=(0,b.injectIntl)(mr);async function vr(e){await async function(e){await _.default.waitUntilRendered();const{mainEditorCurrentBlockStore:t,currentUserStore:n}=_.default.state;return!(!n||!t||(0,he.IJ)(e,t))}(e)&&vn.Bw({bannerStore:pr.Z,id:"AppUpdate",contentKey:"minor_app_update",styleKey:Sn.v.Blue})}function fr(e,t,n){e===ee.UpdateType.Major?t&&cr.M0(t)?(cr.D$(t),vr(n)):function(e){_s.showDialog({message:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"We just launched new features!",id:"breakingUpdateDialog.title"}),showCancel:!1,keepFocus:!1,handleCancel:()=>(0,ur.mK)(e),items:[{label:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Update and see what's new",id:"breakingUpdateDialog.updateButtonTitle"}),color:"blue",onAccept:()=>(0,ur.mK)(e)}],innerStyle:{width:380}})}(n):e===ee.UpdateType.Minor?(t&&cr.M0(t)&&cr.D$(t),vr(n)):t&&cr.M0(t)&&cr.D$(t)}var br=n(32223);function Sr(e){er.Z.setState({...er.Z.state,online:e,lastOfflineTimestamp:e?er.Z.state.lastOfflineTimestamp:Date.now()})}class yr extends r.Z{constructor(){super(...arguments),this.connectionIntervalUpdateRequest=void 0}willMount(){this.connectionIntervalUpdateRequest||(this.connectionIntervalUpdateRequest=window.setInterval((()=>async function(e){if((e.device.isBrowser||e.device.isElectron)&&document.hidden)return;if(br.isConnected())return void Sr(!0);if(!1===navigator.onLine&&!T.default.isLocalhost)return void Sr(!1);"success"===(await Be.ping(e,{})).type?Sr(!0):Sr(!1)}(this.environment)),5e3))}willUnmount(){window.clearInterval(this.connectionIntervalUpdateRequest),this.connectionIntervalUpdateRequest=void 0}}yr.displayName="ConnectionListener";const wr=yr;var xr=n(78354),kr=n(77788),Cr=n(27186),Mr=n(24042);function jr(){window.__c={n:"ElectronListener"};const e=(0,A.O7)(),t=(0,Z.VK)((()=>({observedWidth:ye.H3.rect.state.width,targetWidth:ye.GZ.state,isExpanded:ye.gV.state,resizing:ye.cY.state})),[]),n=e.currentUser.isLoggedIn(),[o,s]=(0,i.useState)(!1),{isTabsFeatureEnabled:r}=(0,Z.Kw)(Mr.Z);(0,i.useEffect)((()=>{o&&r&&y.windowSidebarState.set({isLoggedIn:n,...t})}),[t,n,o,r]),(0,i.useEffect)((()=>{let e;e=n?t.isExpanded?"expanded":"collapsed":"disabled",y.sidebarState.set(e)}),[t.isExpanded,n]);const a=(0,i.useCallback)(((t,n,i)=>{Ps.j(e,n,i)}),[e]);(0,i.useEffect)((()=>(y.track.addListener(a),()=>{y.track.removeListener(a)})),[a]);const d=(0,i.useCallback)(((e,t)=>{s(t)}),[]);(0,i.useEffect)((()=>(y.isActiveTab.get().then((e=>{s(e)})),y.isActiveTab.addListener(d),()=>{y.isActiveTab.removeListener(d)})),[d]);const l=(0,i.useCallback)(((e,t)=>{void 0===t.isShowingTabBar&&(t.isShowingTabBar=t.isTabsFeatureEnabled),Mr.Z.setState(t)}),[]);(0,i.useEffect)((()=>{var e;return null===(e=y.electronAppFeatures.get())||void 0===e||e.then((e=>{Mr.Z.setState(e)})),y.electronAppFeatures.addListener(l),()=>{y.electronAppFeatures.removeListener(l)}}),[l]);const c=(0,i.useCallback)((n=>{be.setExpand({environment:e,isExpanded:!t.isExpanded,from:"electron_listener"})}),[e,t.isExpanded]);(0,i.useEffect)((()=>(y.sidebarState.addToggleListener(c),()=>{y.sidebarState.removeToggleListener(c)})),[c]);const u=(0,i.useCallback)(((e,t)=>{ye.gV.setState(t.isExpanded),ye.GZ.setState(t.targetWidth)}),[]);return(0,i.useEffect)((()=>(y.windowSidebarState.addListener(u),()=>{y.windowSidebarState.removeListener(u)})),[u]),null}var Ir=n(64496);class Tr extends r.Z{constructor(){super(...arguments),this.experimentIntervalRequest=void 0}willMount(){Lr(this.environment),this.experimentIntervalRequest||(this.experimentIntervalRequest=window.setInterval((()=>Lr(this.environment)),6e5))}willUnmount(){window.clearInterval(this.experimentIntervalRequest),this.experimentIntervalRequest=void 0}}Tr.displayName="ExperimentListener";const _r=Tr;function Lr(e){(0,Ir._3)(e)?Ls.Tm(e):Ls.Th({environment:e,force:!1})}var Pr=n(24608);class Ar extends r.Z{constructor(){super(...arguments),this.refreshFileTokenRequest=void 0}willMount(){Er(this.environment),this.refreshFileTokenRequest||(this.refreshFileTokenRequest=window.setInterval((()=>Er(this.environment)),36e5))}willUnmount(){window.clearInterval(this.refreshFileTokenRequest),this.refreshFileTokenRequest=void 0}}Ar.displayName="FileTokenRefresh";const Zr=Ar;function Er(e){(0,Pr.ZP)({url:`${T.default.secureFileConfig.rootPath}/refresh`,environment:e,method:"GET",format:"text"})}var Ur=n(45483);function Br(e){window.__c={n:"InertWhenModalsAreOpen"};const t=(0,Z.VK)((()=>"on"===Te.default.getEligibleGroup({experimentId:"use_inert_html_attribute"})),[]),n=(0,Z.VK)((()=>Ur.Z.state.openModals.size>0),[]),i={inert:t&&n?"true":null};return(0,F.jsx)("div",{style:e.style,...i,children:e.children})}var Rr=n(62134),Nr=n(45023);class Vr extends r.Z{constructor(){super(...arguments),this.handleEvent=e=>{Rr.Zm(this.environment,e)},this.handleKeyDown=e=>{const{shortcutMap:t}=this.environment.KeyboardShortcutStackStore,n=Qe.w_(t,((t,n)=>(0,Nr.Z)(this.environment,e,t)));n&&!{cut:!0,copy:!0,paste:!0}[n]&&Rr.dJ(this.environment,e,n)}}willMount(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("cut",this.handleEvent),window.addEventListener("copy",this.handleEvent),window.addEventListener("paste",this.handleEvent),window.addEventListener("keypress",this.handleEvent)}willUnmount(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("cut",this.handleEvent),window.removeEventListener("copy",this.handleEvent),window.removeEventListener("paste",this.handleEvent),window.removeEventListener("keypress",this.handleEvent)}}Vr.displayName="KeyboardShortcutStackListener";const Or=Vr;var Dr=n(91948),zr=n(31104),Fr=n(17294);class Wr extends r.Z{constructor(){super(...arguments),this.renderModal=()=>{const e=zr.Z.state;if(!e.open)return;const{targetRecordId:t}=e;return(0,F.jsxs)("div",{style:(n=this.environment,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:180,padding:"18px 24px 20px",textAlign:"center",maxWidth:n.device.isMobile?"300px":"100%"}),children:[(0,F.jsxs)("div",{style:this.getMessageStyle(),children:[e.message,(0,F.jsx)(sn.Z,{style:{marginLeft:6}})]}),Hr(t)&&(0,F.jsx)(Dr.Z,{targetRecordId:t,style:{marginTop:10}})]});var n}}renderComponent(){const e=zr.Z.state;return(0,F.jsx)(dn.Z,{open:e.open,render:this.renderModal,overlayZIndex:ne._})}getMessageStyle(){return{display:"flex",alignItems:"center",fontSize:14,color:this.theme.mediumTextColor}}}Wr.displayName="LoadingStateRenderer";const qr=Wr;function Hr(e){return void 0!==e&&Boolean(Fr.Z.state[e])}class Kr extends r.Z{willMountOrUpdate(){const{device:e,mobileNative:t}=this.environment;e.isElectron&&y.setLogglyData(Li.clientLogglyEnvironmentData),t&&t.setLogglyData(Li.clientLogglyEnvironmentData)}}Kr.displayName="LogglyDataListener";const Gr=Kr;var $r=n(1302),Qr=n(69454);class Yr extends r.Z{constructor(){super(...arguments),this.handleEstimatedKeyboardWebViewOverlapStoreChange=()=>{$r.default.afterNextFlush((()=>{jn.hQ(this.environment)}))},this.estimatedKeyboardWebViewOverlapStore=this.createComputedStore((()=>{const e=Qr.Z.state;return e.phase===Qr.i.willShow?0:e.estimatedKeyboardWebViewOverlap}))}willMount(){this.environment.device.isMobile&&(Gt.default.addListener(this.handleEstimatedKeyboardWebViewOverlapStoreChange),this.estimatedKeyboardWebViewOverlapStore.addListener(this.handleEstimatedKeyboardWebViewOverlapStoreChange))}willUnmount(){this.environment.device.isMobile&&(Gt.default.removeListener(this.handleEstimatedKeyboardWebViewOverlapStoreChange),this.estimatedKeyboardWebViewOverlapStore.removeListener(this.handleEstimatedKeyboardWebViewOverlapStoreChange))}}Yr.displayName="MobileListener";const Xr=Yr;var Jr=n(27328);const ea=["compact","regular","unknown"];var ta=n(92338),na=n(36054),ia=n(74487),oa=n(97977),sa=n(98958),ra=n(31299),aa=n(87531),da=n(24677),la=n(29974),ca=n(98104),ua=n(12955),pa=n(51783),ha=n(44499),ma=n(45162),ga=n(18514),va=n(48141);function fa(e){const t=(0,Jr.w_)(e);switch(t.type){case"native":return;case"web":const e=t.route;switch(e.name){case"page":return e.collectionViewId?"collection":"page";case"nativeTab":switch(e.tab){case"search":return"search";case"updates":return"updates"}break;default:return}}}var ba=n(19361),Sa=n(55081),ya=n(75538),wa=n(97799),xa=n(91190),ka=n(36896),Ca=n(44604),Ma=n(12252),ja=n(64233),Ia=n(69327),Ta=n(475),_a=n(65686),La=n(53610),Pa=n(66881),Aa=n(62820),Za=n(34583);const Ea=(0,b.defineMessages)({failedToMovePageGeneric:{id:"MobileNativeListener.failedToMovePage",defaultMessage:"Failed to move page"}});let Ua;class Ba extends r.Z{constructor(){super(...arguments),this.bottomBarVisibility=this.createComputedStore((()=>{const{currentUserStore:e,renderPhase:t}=_.default.state,n=Boolean(null==e?void 0:e.id),{shouldShowError:i}=ce.h1(this.environment),o="rendered"===t&&i,s=ya.default.state.isOnboarding,r=(0,Ce.Y)("supportsNativeBottomBarOverlappingWebView")?Fi.Z.hasOpenMobileSlideUps():Fi.Z.hasOpenPopups();return!o&&n&&!s&&!r})),this.customAddCommentMenuItemEnabled=this.createComputedStore((()=>{var e;if(!(0,Ce.Y)("supportsCustomAddCommentMenuItem"))return!1;const{currentUserStore:t}=_.default.state;if(!Boolean(null==t?void 0:t.id))return!1;if((0,Ce.Y)("supportsNativeBottomBarOverlappingWebView")?Fi.Z.hasOpenMobileSlideUps():Fi.Z.hasOpenPopups())return!1;const{TabbedRouterStore:n}=this.environment,i=(0,Jr.w_)(n.state),o="web"===i.type&&((null===(e=i.redirectedTo)||void 0===e?void 0:e.route)||i.route);if(!o||"page"!==o.name)return!1;const s=Gt.default.state;if("empty"===s.mode)return!1;const r=(0,ma.tp)({multiSelection:s.multiSelection,filterCommonAncestors:!0,focus:void 0});if(!r||0===r.stores.length)return!1;let a=!0;return r.stores.forEach((e=>{a&&(a=a&&e.canComment())})),a})),this.isOnUpdatesPage=this.createComputedStore((()=>{const e=this.environment.TabbedRouterStore.state;return"updates"===e.activeTab&&0===e.tabs.updates.pages.length})),this.aiAssistantEnabledState=this.createComputedStore((()=>{const{currentUserStore:e,currentSpaceStore:t}=_.default.state;if(!e||!t)return;const n=je.Z.isShowingQNAOnMobile();return{userId:e.id,spaceId:t.id,enabled:n}})),this.sideBarExpandedStateChangeHandler=()=>{var e;null===(e=this.environment.mobileNative)||void 0===e||e.sidebarVisibility(ye.gV.state&&!(0,ke.YR)(this.environment),(0,ke.qG)(this.environment))},this.bottomBarVisibilityChange=()=>{var e;const t=this.bottomBarVisibility.state;null===(e=this.environment.mobileNative)||void 0===e||e.toggleBottomBar(t),t||ba.Z.update((e=>({...e,active:!1})))},this.aiAssistantEnabledStateChange=()=>{var e;const t=this.aiAssistantEnabledState.state;t&&(null===(e=this.environment.mobileNative)||void 0===e||e.updateAiAssistantEnabledState(t))},this.handleStatusBarTap=()=>{this.scrollToTop()},this.scrollToTop=()=>{_a.Z.getPreventScrollType()===Zn.Z.None&&(ye.TC.state?Pn.Z.SidebarMobileScroller&&Pn.Z.SidebarMobileScroller.scrollToTop({animate:!0,animationCallback:Qe.yR}):Pn.Z.MenuScroller?Pn.Z.MenuScroller.scrollToTop({animate:!0,animationCallback:Qe.yR}):Pn.Z.MenuPageScroller?Pn.Z.MenuPageScroller.scrollToTop({animate:!0,animationCallback:Qe.yR}):Pn.Z.PageScroller&&Pn.Z.PageScroller.scrollToTop({animate:!0,animationCallback:Qe.yR}))},this.handleSwipeNavigation=()=>{const{mobileNative:e,RouterStore:t}=this.environment;if(e&&e.setWebViewAllowsNavigationGestures){const{route:n}=t.state;"onboarding"===n.name||ye.TC.state||_a.Z.getPreventScrollType()!==Zn.Z.None?!1!==Ua&&(Ua=!1,e.setWebViewAllowsNavigationGestures(!1)):!0!==Ua&&(Ua=!0,e.setWebViewAllowsNavigationGestures(!0))}},this.spaceViewId=void 0,this.userId=void 0,this.handleAppChange=()=>{const{currentUserStore:e,currentSpaceStore:t}=_.default.state;null!=e&&e.id&&null!=t&&t.id&&Ia.Z.reinitializeState(this.environment,e.id,t.id);(void 0===(null==e?void 0:e.id)||this.userId!==(null==e?void 0:e.id))&&this.handleUserChange(e);const n=_.default.state.currentSpaceViewStore;this.spaceViewId!==(null==n?void 0:n.id)&&this.handleSpaceViewChange(n)},this.handleSpaceViewChange=e=>{var t;this.spaceViewId=null==e?void 0:e.id;const{mobileNative:n,TabbedRouterStore:i,currentUser:o}=this.environment,s=_.default.state.currentSpaceStore,r=null==s?void 0:s.id;if(null!=n&&null!==(t=n.api)&&void 0!==t&&t.setCurrentSpaceInfo&&(Li.log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"Web calling nativeAPI setCurrentSpaceInfo",spaceId:r}}),n.api.setCurrentSpaceInfo({spaceId:r,spaceViewId:null==e?void 0:e.id,userId:o.id,editable:(null==s?void 0:s.canEdit())??!0})),(0,ga.__)(this.environment)){const e=e=>{if("web"!==e.type)return;const t={...e.queryParams},n=r&&(0,Qs.cj)(r);t.spaceId=n,e.queryParams=t,e.route.spaceId=n},t=Qe.Xh(i.state);e(t.tabs.search.rootPage),e(t.tabs.updates.rootPage),e(t.tabs.addPage.rootPage),this.clearTabbedRouterStoreState(t),i.setState(t)}this.getLocalSearchCache(this.environment,void 0)},this.handleUserChange=e=>{var t;this.userId=null==e?void 0:e.id,null!==(t=this.environment.mobileNative)&&void 0!==t&&null!==(t=t.api)&&void 0!==t&&t.setCurrentUserInfo&&this.environment.mobileNative.api.setCurrentUserInfo({userId:null==e?void 0:e.id,loggedInUserIds:this.environment.currentUser.loggedInUserIds});const n=!(0,ga.__)(this.environment)||void 0===this.environment.currentUser.id,{TabbedRouterStore:i}=this.environment,o=Qe.Xh(i.state);this.clearTabbedRouterStoreState(o,n),i.setState(o)},this.handleKeyboardAutoScroll=()=>{Qr.Z.state.phase===Qr.i.willShow&&$r.default.afterNextFlush((()=>jn.hQ(this.environment)))},this.handleMobileNativeKeyboardStore=()=>{if(Qr.Z.state.phase===Qr.i.hidden){if(ja.Z.state.open)return;const{NativeMobileActionBarStore:e,device:t}=this.environment;if(e&&null!==e.state.menuType&&t.isAndroid)return;ca.ZH(this.environment)}},this.setCurrentUserId=async e=>{this.environment.currentUser.id!==e&&await M.x({environment:this.environment,newCurrentUserId:e})},this.setCurrentSpace=async(e,t)=>{const n=await M.x({environment:this.environment,newCurrentUserId:e}),{currentUserRootStore:i,currentUserSettingsStore:o}=_.default.state;if(!i)return;await i.load();const s=(0,mi.w3)(t);s&&await la.y3({environment:n,spaceViewStore:s,userSettingsStore:o,userRootStore:i,pageVisitSource:Cn.tY.SwitchSpace})},this.openSearch=()=>{(0,Ce.Y)("supportsNativeHome")&&this.environment.device.isPhone?(k.clearHistoryState({RouterStore:this.environment.RouterStore,currentUserId:this.environment.currentUser.id}),aa.UT({environment:this.environment,analyticsFrom:"mobile-bottom-bar",renderAsPage:!0})):aa.UT({environment:this.environment,analyticsFrom:"mobile-bottom-bar"}),S.nBz(this.environment,{itemName:"search",logging_source:"mobile_native"})},this.openAllUpdates=()=>{(0,Ce.Y)("supportsNativeHome")&&this.environment.device.isPhone?(k.clearHistoryState({RouterStore:this.environment.RouterStore,currentUserId:this.environment.currentUser.id}),k.navigate({environment:this.environment,url:`${m.VP.nativeTab}/updates`,redirect:!0})):Aa.Z.setState({...Aa.Z.state,open:!0})},this.openMembersSettings=()=>{La.Z.setState({...La.Z.state,open:!0})},this.openHelp=()=>{Ta.Z.setState({...Ta.Z.state,open:!0})},this.openSupportMessages=()=>{j.j({environment:this.environment,from:"help_button"})},this.openMoveTo=e=>{const t=new L.G(this.environment,{table:en.iU,id:e});pi.bA({environment:this.environment,blocks:[t],moveToContext:"home_tab",onAccept:e=>{k.navigateToPage({store:t,environment:this.environment,pageVisitSource:Cn.tY.Move})}})},this.createOrJoinWorkspace=async()=>{await Sa.xN(this.environment)},this.openSettings=()=>{wa.Z.setState({open:!0,source:wa.Y.Home})},this.openTrash=e=>{ka.Z.setState({open:!0});const{query:t}=e;t&&Ca.Z.setState({...Ca.Z.state,currentTab:"all_pages",filter:t,limit:Ca.Z.startLimit})},this.openAIAssistant=e=>{Pa.g.update((t=>({query:e.query,searchSessionId:e.searchSessionId,from:e.from??"search",shouldReset:Boolean(e.query&&e.query.trim().length>0)}))),k.navigate({environment:this.environment,url:`${m.VP.nativeTab}/assistant`,redirect:!0})},this.openAddAccount=()=>{xa.C.setState({...xa.C.state,open:!0})},this.openAddPage=()=>{(0,Ce.Y)("supportsNativeHome")&&this.environment.device.isPhone?(k.clearHistoryState({RouterStore:this.environment.RouterStore,currentUserId:this.environment.currentUser.id}),be.quickAddPage({environment:this.environment,from:"mobile_bottom_bar",redirect:!0,quickAddParentOverride:{type:"space-private-pages"}})):be.quickAddPage({environment:this.environment,from:"mobile_bottom_bar"}),S.nBz(this.environment,{itemName:"add_page"})},this.handleTabbedRouterStoreChange=()=>{var e;const{mobileNative:t,TabbedRouterStore:n}=this.environment,i=null==t||null===(e=t.api)||void 0===e?void 0:e.handleTabbedRouterStateUpdate;if(i){const e=n.state;i({state:e,topPage:(0,Jr.w_)(e),webTransitionType:fa(e),updateId:(0,Qs.ZP)()});const t=n.getPreviousState();if(!t)return;const o=(0,Jr.F9)(t),s=(0,Jr.F9)(e);Qe.Xy(o,s)||S.w3M(this.environment,{origin:o,destination:s,from:e.navigationSource,action:e.navigationAction,logging_source:"mobile_native"})}},this.handleCustomAddMenuItemEnabledChanged=()=>{if(!(0,Ce.Y)("supportsCustomAddCommentMenuItem"))return;const e=this.customAddCommentMenuItemEnabled.state,{mobileNative:t}=this.environment;null==t||t.updateCustomAddCommentMenuItemEnabled(e)},this.getLocalSearchCache=Qe.HP(((e,t)=>ra.tw(e)),((e,t)=>{var n;return`${e.currentUser.id}-${(null===(n=_.default.state.currentSpaceViewStore)||void 0===n?void 0:n.id)??"none"}-${t??"none"}`})),this.clearTabbedRouterStoreState=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.keys(e.tabs).forEach((n=>{const i=n;t&&(e.tabs[i].nativeRootPageOverrideEnabled=void 0),e.tabs[i].pages="home"!==i?[]:e.tabs[i].pages.splice(0,1)}))}}willMount(){const{mobileNative:e,RouterStore:t,TabbedRouterStore:n,device:i}=this.environment;var o;i.isMobileNative&&e&&(this.handleAppChange(),_.default.addListener(this.handleAppChange),ye.TC.addListener(this.handleSwipeNavigation),ye.gV.addListener(this.sideBarExpandedStateChangeHandler),Gs.Z.addListener(this.handleSwipeNavigation),t.addListener(this.handleSwipeNavigation),Qr.Z.addListener(this.handleKeyboardAutoScroll),this.bottomBarVisibility.addListener(this.bottomBarVisibilityChange),this.aiAssistantEnabledState.addListener(this.aiAssistantEnabledStateChange),this.environment.WindowSizeStore.addListener(this.sideBarExpandedStateChangeHandler),n.addListener(this.handleTabbedRouterStoreChange),this.customAddCommentMenuItemEnabled.addListener(this.handleCustomAddMenuItemEnabledChanged),e.updateReceiveApiHandlers({statusBarTap:this.handleStatusBarTap,backButtonPress:()=>Rr.Zm(this.environment,{type:"backbutton"}),keyboardWillShow:e=>{Qr.Z.updateKeyboardPhase(this.environment,Qr.i.willShow,e??0)},keyboardDidShow:e=>Qr.Z.updateKeyboardPhase(this.environment,Qr.i.shown,e??0),keyboardWillHide:()=>{var e;(Qr.Z.updateKeyboardPhase(this.environment,Qr.i.willHide,0),(0,Ce.Y)("supportsIpadOS16Keyboard"))||i.isIpad&&(da.ZH(this.environment),null===(e=this.environment.NativeMobileActionBarStore)||void 0===e||e.clear(!0))},keyboardDidHide:()=>{var e;(Qr.Z.updateKeyboardPhase(this.environment,Qr.i.hidden,0),(0,Ce.Y)("supportsIpadOS16Keyboard"))&&(i.isIpad&&(da.ZH(this.environment),null===(e=this.environment.NativeMobileActionBarStore)||void 0===e||e.clear(!0)))},keyboardShortcut:e=>Rr.Zm(this.environment,e),pushNotificationTokenRefresh:e=>sa.handleTokenRefresh(this.environment,e,"refresh"),resume:Ma.Z.resume,pause:Ma.Z.pause,refreshSubscriptionData:async e=>{await Be.invalidateSubscriptionData(this.environment,{spaceId:e,provider:"revenue_cat"}),await Za.bi(this.environment)},refreshSubscriptionDataV2:async()=>{await Za.bi(this.environment)},processMobileActionBarAction:t=>{const{componentId:n,action:i}=t;e.componentEvents.dispatch("MobileActionBar",n,"onAction",{action:i})},updateExperimentData:async e=>{if((0,Ir._3)(this.environment)){const t=await(0,ua.getExperimentDeviceId)(this.environment),n=this.environment.currentUser.id,i=(0,Ir.fP)(t,n,e);i&&Te.default.updateState(i,this.environment)}},trackExperimentExposure:async e=>{await S.Bb7({environment:this.environment,experiment_id:e.experimentId,experiment_version:e.experimentVersion,experiment_group:e.group||"ineligible",logging_source:"mobile_native"})},receiveRawMessageStoreMessage:e=>{br.onMobileNativeReceiveRawMessageStoreMessage(e,this.environment)},updateMessageStoreState:e=>{br.onMobileNativeUpdateMessageStoreState(e,this.environment)},logout:e=>{oa.logoutSingleAccount({environment:this.environment,userId:e})},logoutAll:()=>{oa.logout(this.environment)},openDestinationV2:e=>{switch(Fi.Z.closeAll(),(0,ga.__)(this.environment)&&k.navigateToTab({environment:this.environment,tab:n.state.activeTab,nativeRootPageOverrideEnabled:!1}),e.type){case"moveTo":this.openMoveTo(e.blockId);break;case"trash":this.openTrash({query:e.query});break;case"AIAssistant":this.openAIAssistant({query:e.query,searchSessionId:e.searchSessionId,from:e.from})}},openDestination:e=>{Fi.Z.closeAll();switch("closePopup"!==e&&(0,ga.__)(this.environment)&&k.navigateToTab({environment:this.environment,tab:n.state.activeTab,nativeRootPageOverrideEnabled:!1}),e){case"search":this.openSearch();break;case"addPage":this.openAddPage();break;case"allUpdates":this.openAllUpdates();break;case"addAccount":this.openAddAccount();break;case"createOrJoinWorkspace":return this.createOrJoinWorkspace();case"notificationAndSettings":this.openSettings();break;case"trash":this.openTrash({});break;case"memberSettings":this.openMembersSettings();break;case"help":this.openHelp();break;case"intercom_messages":this.openSupportMessages()}},setCurrentUserId:async e=>{await this.setCurrentUserId(e)},setCurrentSpace:async e=>{await this.setCurrentSpace(e.userId,e.spaceId)},updateHorizontalSizeClass:t=>{const n=(0,na.Gu)(ia.literals(...ea),t)?"unknown":t;n!==e.horizontalSizeClass.state&&e.horizontalSizeClass.setState(n)},updateTabbedRouterState:e=>{var t;const{TabbedRouterStore:n}=this.environment,i=n.state;e.tab!==i.activeTab||null!==(t=e.pages)&&void 0!==t&&t.length||i.tabs[i.activeTab].pages.length?k.navigateToTab({environment:this.environment,tab:e.tab,queryParams:e.queryParams,pages:e.pages,nativeRootPageOverrideEnabled:e.nativeRootPageOverrideEnabled,navigationAction:e.navigationAction,navigationSource:e.navigationSource}):this.scrollToTop();const o=n.state;return[{state:o,topPage:(0,Jr.w_)(o),webTransitionType:fa(o),updateId:e.updateId??(0,Qs.ZP)()}]},getLocalSearchResults:async e=>{const t=await this.getLocalSearchCache(this.environment,e.searchSessionId);if(!t)return[{error:"Local cache does not exist"}];const n=(0,na.Gu)(ta.GA,e.sort);if(n)return[{error:`old sort type is unsupported! ${n}`}];const i=e.sort,o=va.iA({query:{query:{text:e.query??"",filters:e.filters,sort:i},limit:e.limit},localCachedPages:t,includeRecordMap:!1,userId:this.environment.currentUser.id,environment:this.environment,applyRecallScoreThreshold:!1,canUseLtr:!1}),s=[{value:{total:0,results:[],recordMap:{},trackEventProperties:{}}}];if(!o||0===o.results.length)return s;const r=er.Z.state.online?va.g8(this.environment,o.results):o.results;return[{value:{results:r,total:r.length,recordMap:{},trackEventProperties:{}}}]},customAddCommentMenuItemTapped:()=>{(0,pa.ol)(this.environment,!0,"custom_add_comment_menu_item")},filterValidMoveToBlocks:e=>{const t=e.targets.map((e=>new L.G(this.environment,{table:en.iU,id:e}))),n=e.blocks.filter((e=>{const n=new L.G(this.environment,{table:en.iU,id:e});return n.canEdit()&&(0,ha.Xk)(n,t)}));return[{value:{targets:e.targets,blocks:n}}]},completeMoveToTransaction:async e=>{const{targets:t,destination:n,moveToContext:i,timeToSelectMs:o,isSearchResult:s,flowId:r}=e,a=this.environment,d=t.map((e=>new L.G(this.environment,{table:en.iU,id:e}))),l=pi.QF(a,t,n);if(d&&d.length>0&&!l)try{return await qt.createAndCommitAsync({userAction:"MobileNativeListener.completeMoveTo",environment:a,waitForServerCommit:!1,perform:async e=>{await pi.RL({targets:d,value:n,transaction:e,environment:a,moveToContext:i,renderType:"native",timeToSelectMs:o,disableSuccessToast:!0,isSearchResult:s,flowId:r})}}),[{value:e}]}catch(c){}return S.fW6(a,{type:"moved_to_subpage"}),[{error:jt.default.formatMessage(Ea.failedToMovePageGeneric)}]},undoRevision:()=>{oe.Yw(this.environment,!0)},searchTeams:async e=>{const{query:t}=e,n=_.default.state.currentSpaceStore,i=_.default.state.currentSpaceViewStore;if(!n||!i)return[{error:"SpaceStore or SpaceViewStore was undefined"}];return[{value:{ids:(await ra.zf({spaceViewStore:i,query:t,teamStores:i.getTeamsStores()})).map((e=>e.id))}}]}}),i.isAndroid&&Qr.Z.addListener(this.handleMobileNativeKeyboardStore),null!==(o=this.environment.mobileNative)&&void 0!==o&&o.api.ready&&this.environment.mobileNative.api.ready(),this.sideBarExpandedStateChangeHandler(),this.handleCustomAddMenuItemEnabledChanged())}willUnmount(){const{mobileNative:e,RouterStore:t,TabbedRouterStore:n,device:i}=this.environment;i.isMobileNative&&e&&(_.default.removeListener(this.handleAppChange),ye.TC.removeListener(this.handleSwipeNavigation),ye.gV.removeListener(this.sideBarExpandedStateChangeHandler),Gs.Z.removeListener(this.handleSwipeNavigation),t.removeListener(this.handleSwipeNavigation),Qr.Z.removeListener(this.handleKeyboardAutoScroll),this.bottomBarVisibility.removeListener(this.bottomBarVisibilityChange),this.aiAssistantEnabledState.removeListener(this.aiAssistantEnabledStateChange),n.removeListener(this.handleTabbedRouterStoreChange),this.customAddCommentMenuItemEnabled.removeListener(this.handleCustomAddMenuItemEnabledChanged),i.isAndroid&&Qr.Z.removeListener(this.handleMobileNativeKeyboardStore))}}Ba.displayName="MobileNativeListener";const Ra=Ba;var Na=n(71474);const Va=()=>{window.__c={n:"NativeMetricsLoader"};const e=(0,A.O7)();return(0,i.useEffect)((()=>{const{mobileNative:t}=e;t&&t.enableBridgeMetricsCollection(e,An.default,Te.default)}),[e]),null};class Oa extends r.Z{constructor(){super(...arguments),this.updatePageVisibility=()=>{hr.Z.setState({...hr.Z.state,isVisible:!document.hidden});const e=cr.W$(),t=e&&(Date.now()-e)/We.A0>=7;if(this.environment.device.isBrowser&&!document.hidden&&(!e||t)&&er.Z.getState().online){const e=this.environment.AppUpdateStore;if(e.isSilentUpdate()){const t=e.state.appUpdate;cr.hC({environment:this.environment,url:window.location.href,version:t.version})}}}}didMount(){document.addEventListener("visibilitychange",this.updatePageVisibility),this.updatePageVisibility()}willUnmount(){document.removeEventListener("visibilitychange",this.updatePageVisibility)}}Oa.displayName="PageVisibilityListener";const Da=Oa;var za=n(18466);new Set(["destinations","emergencyThrottlePercentage","amplitudeOptions","datadogOptions","snowflakeOptions","statsigOptions"]),ia.literals("connected_apps_settings","compliance_connected_apps_settings","external_object_instance_block","external_object_instance_inline_popup","external_object_instance_block_error_dropdown","placeholder_root_external_collection_view_block","connected_relation_property_menu","source_picker_connect_another_account","integration_gallery","collection_settings_property_type","integration_file_picker","send_to_notion","unfurl","messages_tab","install_redirect","all_updates","notifications_and_settings","collection_view_settings","share_menu","space_settings","workspace_connections_redirect");var Fa=n(77897);function Wa(){return 1}function qa(e){let{id:t,targetRenderPhase:n="all",samplePercent:o=Wa(),children:s}=e;window.__c={n:"PerformanceProfiler"};const r=(0,A.O7)(),a=(0,i.useCallback)(((e,t,i,s,a,d)=>{(0,Fa.lB)(o)&&("all"!==n&&t!==n||Ps.j(r,`render_duration.${e}`,{time:i,render_phase:t}))}),[r,n,o]),[d]=(0,i.useState)(za.Z.withListenerIgnored((()=>Te.default.checkGate("client-performance-profiler"))));return d?(0,F.jsx)(i.Profiler,{id:t,onRender:a,children:s}):(0,F.jsx)(F.Fragment,{children:s})}var Ha=n(89224),Ka=n(59238);const Ga=()=>{window.__c={n:"TouchSelectionGestureListener"};const e=(0,A.O7)(),t=(0,i.useRef)("none"),n=(0,i.useCallback)((e=>{const n=t.current;e!==n&&(t.current=e,"dragging"===e?Ka.Z.setState({isDragging:!0}):"dragging"===n&&Ka.Z.setState({isDragging:!1}))}),[]),o=(0,i.useCallback)((()=>{"none"===t.current&&n("touching")}),[n]),s=(0,i.useCallback)((()=>{n("none")}),[n]),r=(0,i.useCallback)((()=>{"touching"===t.current&&Ha.isExpanded(Ha.get())&&n("dragging")}),[n]);return(0,i.useEffect)((()=>{if(e.device.isIOS)return window.addEventListener("touchstart",o),window.addEventListener("touchend",s),window.addEventListener("touchcancel",s),document.addEventListener("selectionchange",r),()=>{window.removeEventListener("touchstart",o),window.removeEventListener("touchend",s),window.removeEventListener("touchcancel",s),document.removeEventListener("selectionchange",r)}}),[e.device.isIOS,o,s,r]),null},$a=()=>{window.__c={n:"SelectionListener"};const e=(0,A.O7)(),t=(0,i.useCallback)((()=>{$r.default.afterNextFlush((()=>{ca.ls()}))}),[]),n=(0,i.useCallback)((()=>{setTimeout((()=>{Ha.get()||ca.ZH(e)}),0)}),[e]);return(0,i.useEffect)((()=>(window.addEventListener("mousedown",t),e.device.isMobileBrowser&&document.addEventListener("focusout",n),()=>{window.removeEventListener("mousedown",t),document.removeEventListener("focusout",n)})),[e,t,n]),(0,F.jsx)(Ga,{})};class Qa extends r.Z{constructor(e){super(e),this.mediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),this.initialSet=Di.default.createValue(!1),this.handleThemeChange=this.handleThemeChange.bind(this)}willMount(){this.setTheme();const{mobileNative:e,device:t}=this.environment;t.isAndroid&&e?e.updateReceiveApiHandlers({themeChanged:e=>this.setTheme()}):this.mediaQueryList.addEventListener?this.mediaQueryList.addEventListener("change",this.handleThemeChange):this.mediaQueryList.addListener&&this.mediaQueryList.addListener(this.handleThemeChange)}willUnmount(){this.mediaQueryList.removeEventListener?this.mediaQueryList.removeEventListener("change",this.handleThemeChange):this.mediaQueryList.removeListener&&this.mediaQueryList.removeListener(this.handleThemeChange)}willUpdate(){var e;!this.initialSet.state&&null!==(e=_.default.state.mainEditorCurrentBlockStore)&&void 0!==e&&e.isReady()&&(this.setTheme(),this.initialSet.setState(!0))}handleThemeChange(e){this.setTheme()}setTheme(){"system"===As.MH(this.environment)&&Zs.Z.emit()}}Qa.displayName="SystemThemeListener";const Ya=Qa;class Xa extends r.Z{constructor(){super(...arguments),this.updateConnectionStateWithEnvironment=()=>qt.updateConnectionState(this.environment)}willMount(){er.Z.addListener(this.updateConnectionStateWithEnvironment),qt.updateConnectionState(this.environment)}willUnmount(){er.Z.removeListener(this.updateConnectionStateWithEnvironment)}}Xa.displayName="TransactionListener";const Ja=Xa;var ed=n(64964);function td(){window.__c={n:"WebpackHotReloadIndicator"};const e=T.default.isLocalhost||!1;return(0,i.useEffect)((()=>{function t(t){if(!e)return;if(!t.data||"string"!=typeof t.data.type)return;const n=t.data.type;"webpackInvalid"===n?ed.oV({label:(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{style:{paddingRight:10},children:"Webpack Compiling"}),(0,F.jsx)("img",{src:"/images/favicon-local.ico",className:"loading-spinner",style:{display:"inline-block"}})]}),position:"top",durationMs:"keep"}):"webpackOk"!==n&&"webpackWarnings"!==n||ed.rN()}return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}),[e]),null}class nd extends r.Z{willMount(){const{device:e,mobileNative:t}=this.environment;if(Ts.mc(this.environment),Ls.Yh(this.environment),t&&t.hideSplashscreen(),e.isMobile){const e=document.body.parentElement;e&&e.classList.add(In.aiP)}Ps.pH(this.environment),d.rQ({device:e,config:T.default,cookieImpl:this.environment.cookieImpl}),e.isElectronMac&&y.getAppPath().then((e=>{e&&(e.startsWith("/Volumes/Notion Installer")||e.startsWith("/Volumes/Notion Dev Installer")||e.startsWith("/Volumes/Notion Stg Installer"))&&_s.showMessage({message:this.props.intl.formatMessage({defaultMessage:"Please move the Notion.app into the /Applications folder for the auto-updater to work.",id:"notionAppContainer.dialog.notionAppNotInApplications.message"})})})),Is.DM(a.SP),(0,js.np)(window.location.href)}didMount(){const{device:e,mobileNative:t}=this.environment;"external"===(0,h.Wj)({url:window.location.href,isMobile:e.isMobile,baseUrl:T.default.domainBaseUrl,publicDomainName:T.default.publicDomainName,protocol:T.default.protocol,currentUrl:window.location.href}).name&&_s.showDialog({message:"Mismatch between origin and baseUrl (dev).",showCancel:!1,keepFocus:!1,items:[{label:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Okay",id:"notionAppContainer.dialog.mismatchedOriginURL.okayButton.label"}),onAccept:()=>{const e=St.O_({relativeUrl:St.T1(window.location.href),baseUrl:T.default.domainBaseUrl}),t=St.Qc(e);t.protocol=St.Qc(window.location.href).protocol,window.location.href=St.WU(t)}}]}),null==t||t.markTransitionReady({type:"mount"})}renderComponent(){const e="light"===this.theme.mode?In.MsS:In.Xj_;return(0,F.jsx)(qa,{id:"app",targetRenderPhase:"mount",children:(0,F.jsxs)("div",{style:this.getStyle(),className:["notion-app-inner",e].join(" "),children:[(0,F.jsx)(td,{}),(0,F.jsx)(gr,{},"AppUpdateListener"),(0,F.jsx)(Gr,{},"ElectronLogglyDataListener"),(0,F.jsx)(Br,{style:{height:"100%"},children:this.props.children}),(0,F.jsx)(kr.Z,{store:Gs.Z,zIndex:ne.mJ,isDefault:!0}),(0,F.jsx)(kr.Z,{store:$s.Z,zIndex:ne.O7,isDefault:!1}),(0,F.jsx)(xr.Z,{}),(0,F.jsx)(qr,{}),(0,F.jsx)(ar,{}),(0,F.jsx)(Bs,{}),!this.environment.device.isMobileNative&&(0,F.jsx)(Xs,{}),(0,F.jsx)(Ja,{}),(0,F.jsx)($a,{}),(0,F.jsx)(Or,{}),(0,F.jsx)(Ra,{}),(0,F.jsx)(Va,{}),this.environment.device.isMobileNative&&(0,F.jsx)(s.LazyNativeVoiceInput,{}),this.environment.device.isElectron&&(0,F.jsx)(jr,{}),(0,F.jsx)(zs,{}),(0,F.jsx)(Xr,{}),(0,F.jsx)(Cr._g,{}),(0,F.jsx)(Es,{}),(0,F.jsx)(Ya,{}),(0,F.jsx)(Na.Z,{}),(0,F.jsx)(or,{}),(0,F.jsx)(Zr,{}),(0,F.jsx)(_r,{}),(0,F.jsx)(wr,{}),(0,F.jsx)(Da,{}),(0,F.jsx)(Ks,{}),(0,F.jsx)(Os,{}),(0,F.jsx)(s.LazyInjectThirdPartyScripts,{}),(0,F.jsx)(Ds.Kd,{}),(0,F.jsx)(Fs,{})]})})}getStyle(){return{...(0,l.N7)(a.SP),color:this.theme.regularTextColor,WebkitFontSmoothing:"auto",backgroundColor:this.theme.contentBackground}}}nd.displayName="Notion";const id=(0,b.injectIntl)(nd);var od=n(94273);class sd extends r.Z{willMount(){const e=v.u5({schemeUrl:window.location.href,baseUrl:T.default.domainBaseUrl});k.navigateToExternalURL({environment:this.environment,url:e}),od.vq(),k.navigate({environment:this.environment,url:m._j.root,redirect:!0})}}sd.displayName="OpenExternal";const rd=sd;class ad extends r.Z{constructor(){super(...arguments),this.didCatchError=!1,this.caughtErrorId=void 0,this.openSupportMessages=()=>{j.j({environment:this.environment,from:"page_error"})},this.handleOpenNativeLink=e=>{"string"==typeof e?this.handleOpenNativeLinkV2(e,!1,!1):this.handleOpenNativeLinkV2(e.url,!1,!1)},this.handleOpenNativeLinkV2=(e,t,n)=>{const{RouterStore:i}=this.environment,o=v.RD({url:e,protocol:T.default.protocol,baseUrl:T.default.domainBaseUrl}),s=v.u5({schemeUrl:o,baseUrl:T.default.domainBaseUrl}),r=h.Wj({url:s,baseUrl:T.default.domainBaseUrl,publicDomainName:T.default.publicDomainName,isMobile:this.environment.device.isMobile,protocol:T.default.protocol,currentUrl:window.location.href});(this.environment.device.isAndroid||t)&&k.clearHistoryState({RouterStore:i,currentUserId:this.environment.currentUser.id}),this.environment.mobileNative&&this.environment.mobileNative.closeInAppBrowser(),"googleAuthCallback"!==r.name&&"samlAuthCallback"!==r.name?k.navigate({environment:this.environment,url:s,redirect:t,updateMobileTabbedRouterArgs:{clearNativeRootPageOverride:n},queryId:"page"===r.name?r.queryId:void 0}):k.navigate({environment:this.environment,url:s})}}didMount(){this.environment.currentUser.isLoggedIn()&&_.default.waitUntil((()=>{const e=_.default.state.currentUserSettingsStore,t=(null==e?void 0:e.isDefined())??!1;if(e&&t){const t=e.getSettings(),n=null==t?void 0:t.disable_auto_set_timezone;t&&!n&&C.wk({environment:this.environment,userSettingsStore:e})}return t}))}willMount(){const{RouterStore:e,currentUser:t}=this.environment,n=t.id;window.addEventListener("beforeunload",(()=>{k.updateHistoryState({historyId:e.state.id,currentUserId:n})})),window.onpopstate=async t=>{const n=window.location.href,i=t.state?t.state.currentUserId:void 0;let o=this.environment;i&&i!==this.environment.currentUser.id&&(o=await M.x({environment:o,newCurrentUserId:i}));const s=e.state.route,r=h.Wj({url:n,isMobile:o.device.isMobile,baseUrl:T.default.domainBaseUrl,publicDomainName:T.default.publicDomainName,protocol:T.default.protocol,currentUrl:window.location.href}),a="page"===s.name&&"page"===r.name&&s.blockId===r.blockId,d="onboarding"!==s.name&&"onboarding"===r.name;k.updateHistoryState({historyId:e.state.id,currentUserId:i}),await k.updateRouterState({environment:o,id:t.state&&t.state.id||(0,p.ZP)(),action:"pop",href:n}),d&&!this.environment.device.isMobileNative&&k.navigate({environment:o,url:m._j.root}),a&&k.handleNavigateWithinSamePage(o)},this.environment.mobileNative&&this.environment.mobileNative.subscribeToOpenLink(this.handleOpenNativeLinkV2),y.subscribeToProtocolUrl(this.handleOpenNativeLink),y.subscribeToSettingsMenuItem(ld),y.ready(),y.onNewWindow(((e,t)=>{e.preventDefault(),k.navigate({environment:this.environment,url:t,openInNew:"tab"})}))}componentDidCatch(e,t){console.error("Client crash during React render:",e),this.caughtErrorId=f.rn(e,{from:"Router",type:"ClientCrash",data:{miscDataToConvertToString:t}}),this.didCatchError=!0,this.forceUpdate()}renderComponent(){return(0,F.jsx)(b.IntlProvider,{defaultLocale:"en-US",locale:a.SP,messages:a.sY,children:(0,F.jsx)(fs,{...bs(this.environment.device),children:this.renderRouteOrError()})})}renderRouteOrError(){return this.didCatchError?(0,F.jsxs)("div",{style:ad.reactErrorStyle,children:[(0,u.H)({width:42,height:42}),(0,F.jsxs)("div",{style:ad.reactErrorMessageStyle,children:[(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Oops! Something went wrong.",id:"router.renderErrorPage.message.part1"})}),(0,F.jsx)("div",{children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Please refresh and try again or <textlink>message support</textlink>.",id:"router.renderErrorPage.message.part2",values:{textlink:e=>(0,F.jsx)(ws.Z,{onClick:this.openSupportMessages,children:e})}})}),this.caughtErrorId&&(0,F.jsx)("div",{style:ad.reactErrorMessageIdStyle,children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Error ID: {errorId}",id:"router.renderErrorPage.message.errorId",values:{errorId:this.caughtErrorId.slice(0,8)}})})]}),(0,F.jsx)(N.Z,{isLarge:!0,onClick:()=>window.location.reload(),children:(0,F.jsx)(b.FormattedMessage,{defaultMessage:"Refresh",id:"router.renderErrorPage.reloadButton.label"})})]}):(0,F.jsx)(id,{children:this.renderRoute()})}renderRoute(){const{RouterStore:e}=this.environment,t=e.state;if("root"!==t.route.name&&"page"!==t.route.name&&"space"!==t.route.name&&(w.setInitialRenderCompleted(),_.default.setState({..._.default.state,renderPhase:"rendered"})),this.environment.currentUser.isLoggedIn()||"page"===t.route.name||"space"===t.route.name||d.j({device:this.environment.device,event:{facebook:{eventName:"PageView",data:{content_name:window.location.href}},google:{eventName:"pageView",path:window.location.pathname}},cookieImpl:this.environment.cookieImpl}),this.environment.currentUser.isLoggedIn()&&_.default.state.currentUserSettingsStore){const{currentUserSettingsStore:e}=_.default.state;I.dM(this.environment,e)}const{device:i}=this.environment;if(i.isNative&&h.lQ[t.route.name])return(0,F.jsx)(rd,{});if("front"===t.route.name)return(0,F.jsx)(gs,{preventFrontRedirect:t.route.alreadyRedirected});if("root"===t.route.name)return(0,F.jsx)(ys,{route:t.route});if("nativeRedirect"===t.route.name)return(0,F.jsx)(Ms,{redirect:t.route.redirect});if("login"===t.route.name)return(0,F.jsx)(s.LazyLoginPage,{isSignup:!1,email:t.route.email,redirectURL:t.route.redirectURL});if("desktopEmailConfirm"===t.route.name)return(0,F.jsx)(ps,{});if("teamsInvite"===t.route.name){const{teamId:e}=t.route;return S.uAt(this.environment,{teamId:e}),(0,F.jsx)(xs.Z,{fetch:async()=>{const t=new L.zX(this.environment,{table:g.e0,id:e});await t.load()},render:()=>(0,F.jsx)(Q,{teamId:e})})}if("signup"===t.route.name)return(0,F.jsx)(s.LazyLoginPage,{isSignup:!0,email:t.route.email});if("unsubscribe"===t.route.name)return(0,F.jsx)(rs,{payload:t.route.payload});if("onboarding"===t.route.name)return(0,F.jsx)(s.LazyOnboarding,{});if("upcomingInvoice"===t.route.name)return(0,F.jsx)(s.LazyInvoice,{route:t.route});if("invoiceById"===t.route.name)return(0,F.jsx)(s.LazyInvoice,{route:t.route});if(t.route.name,t.route.name,"admin"===t.route.name&&T.default.isAdminMode)return(0,F.jsx)(xs.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(1798),n.e(9307),n.e(2328)]).then(n.bind(n,64349)),render:e=>{let{default:t}=e;return(0,F.jsx)(t,{})}});if("adminListData"===t.route.name){const{category:e}=t.route;if(T.default.isAdminMode)return(0,F.jsx)(xs.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(1798),n.e(9307),n.e(2328)]).then(n.bind(n,65585)),render:t=>{let{default:n}=t;return(0,F.jsx)(n,{category:e})}})}if("adminSingleRecord"===t.route.name&&T.default.isAdminMode){const{id:e,table:i}=t.route;return(0,F.jsx)(xs.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(1798),n.e(9307),n.e(3854)]).then(n.bind(n,48807)),render:t=>{let{default:n}=t;return(0,F.jsx)(n,{table:i,id:e})}})}if("oauthAuthorization"===t.route.name){const{responseType:e,redirectUri:i,integrationId:o,state:s,owner:r,userId:a,spaceId:d}=t.route;return(0,F.jsx)(xs.Z,{fetch:()=>Promise.all([n.e(2774),n.e(2743),n.e(1908),n.e(9342),n.e(3370)]).then(n.bind(n,31074)),render:t=>{let{default:n}=t;return(0,F.jsx)(n,{responseType:e,redirectUri:i,integrationId:o,state:s,owner:r,userId:a,spaceId:d})}})}if("initiateExternalAuthentication"===t.route.name){const{notion_user_id:e,notion_workspace_id:i,notion_last_visited_url:o,notion_authorization_code:s,external_object_instance_block_id:r,callback_type:a,integration_id:d,redirectToAuth:l}=t.route;return(0,F.jsx)(xs.Z,{fetch:()=>n.e(1023).then(n.bind(n,84750)),render:t=>{let{default:n}=t;return(0,F.jsx)(n,{notion_user_id:e,notion_workspace_id:i,notion_last_visited_url:o,notion_authorization_code:s,external_object_instance_block_id:r,callback_type:a,integration_id:d,redirectToAuth:l})}})}return"myIntegrations"===t.route.name?"pointer"in t.route?(0,F.jsx)(s.LazyDeveloperIntegrationViewV2,{botOrIntegrationPointer:t.route.pointer}):(0,F.jsx)(s.LazyDeveloperIntegrationsList,{}):"myIntegrationsLab"===t.route.name?(0,F.jsx)(s.LazyDeveloperIntegrationLab,{integrationPointer:t.route.pointer}):"inAppTemplateSubmission"===t.route.name?"inAppTemplateCreatorSubmission"===(null===(o=t.initialRoute)||void 0===o?void 0:o.name)?(0,F.jsx)(Y,{openCreatorProfileModal:!0}):(0,F.jsx)(Y,{openCreatorProfileModal:!1}):("inAppTemplateCreatorSubmission"===t.route.name&&k.navigate({environment:this.environment,url:m._j.templateSubmission,redirect:!0}),"studentGroupSignup"===t.route.name?(0,F.jsx)(P,{}):"notFound"===t.route.name?(0,F.jsx)(s.LazyPageError,{route:t.route,publicPageData:void 0}):"page"===t.route.name||"space"===t.route.name||"nativeTab"===t.route.name||"workspaceSetup"===t.route.name||"modal"===t.route.name||"quickSearch"===t.route.name||"chat"===t.route.name?(0,F.jsx)(ts,{routerState:t}):(0,F.jsx)(is.Z,{}));var o}}ad.displayName="Router",ad.reactErrorStyle={width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:100,...(0,l.N7)(a.SP)},ad.reactErrorMessageStyle={fontSize:14,textAlign:"center",marginTop:6,marginBottom:12,color:c.ZP.uiGray},ad.reactErrorMessageIdStyle={fontSize:10,marginTop:8};const dd=ad;function ld(e){x.r$({currentTab:e})}function cd(e){let{environment:t,onMount:n}=e;window.__c={n:"NotionRoot"};const r=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{r.current||(r.current=!0,null==n||n())}),[n]),(0,F.jsx)(o.B9,{value:t,children:(0,F.jsx)(s.DependencyProviderAll,{children:(0,F.jsx)(dd,{})})})}},14694:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});n(67294);var i=n(480),o=n(86628),s=n(24405),r=n(39567),a=n(50659),d=n(85893);function l(){window.__c={n:"AliasIcon"};const e=(0,s.yK)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.regularTextColor:"#3E3C38",stroke:"dark"===e.mode?e.sidebarBackground:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,d.jsx)("div",{children:(0,r.Y)(e.icon)})}function c(e){var t;window.__c={n:"SidebarItem"};const n=(0,i.O7)(),r=n.device.isMobile,c=(0,o.VK)((()=>{var t,i;if(r)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(i=e.style)||void 0===i?void 0:i.paddingLeft:10)}),[n.WindowSizeStore,r,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),u=(0,s.yK)((t=>({wrapper:{...r?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:c,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:e.disableMobileBorder?void 0:`0 1px 0 ${t.regularDividerColor}`,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:27,paddingTop:2,paddingBottom:2,marginTop:1,marginBottom:1,...(0,a.MF)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:r?28:22,height:r?24:18,marginLeft:-3,marginRight:4,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.mediumTextColor,width:r?26:22,height:r?24:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!r?"clip":"ellipsis",...e.childrenStyle}})),[r,c,e.disableMobileBorder,e.shouldShowMobileMarginBottom,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,d.jsxs)("div",{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:u.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,d.jsx)("div",{style:u.left,children:e.left}),e.icon&&(0,d.jsxs)("div",{style:u.icon,children:[e.icon,e.isAlias&&(0,d.jsx)(l,{})]}),(0,d.jsx)("div",{style:u.children,children:e.children}),e.right&&(0,d.jsx)("div",{style:u.right,children:e.right})]})}},55064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var i=n(67294),o=n(83355),s=n(97880),r=n(51454),a=n(31412),d=n(17659),l=n(99553),c=n(24677),u=n(98742),p=n(89224),h=n(74948),m=n(24646),g=n(38676),v=n(36391),f=n(96049),b=n(31792),S=n(45325),y=n(88923),w=n(6685),x=n(26388),k=n(85893);class C extends o.Z{constructor(){super(...arguments),this.didDragMove=!1,this.storeTypes={mouseStore:b.Z},this.renderTooltip=()=>{const e=function(e,t){switch(e){case"page":return(0,m.in)(t);case"update":return(0,m.Sx)(t);case"peek":return y.default.state.open;case"inbox":return S.ZP.isOpen();default:(0,s.t1)(e)}}(this.props.type,this.environment),t=this.theme.mediumInvertedTextColor;return(0,k.jsxs)("div",{style:{textAlign:"center"},children:[(0,k.jsx)(a.FormattedMessage,{defaultMessage:"Drag <invertedcolor>to resize</invertedcolor>",id:"sidebarResizer.tooltip.dragMessage",values:{invertedcolor:e=>(0,k.jsx)("span",{style:{color:t},children:e})}}),(0,k.jsxs)(i.Fragment,{children:[(0,k.jsx)("br",{}),(0,k.jsx)(a.FormattedMessage,{defaultMessage:"Click <invertedcolor>to {expanded, select, true {close} other {lock open}}</invertedcolor>",id:"sidebarResizer.clickToToggleSidebar.message",values:{expanded:e,invertedcolor:e=>(0,k.jsx)("span",{style:{color:t},children:e})}})]})]})},this.handleMouseEnter=e=>{g.ck.setState(e.clientY)},this.handleMouseMove=()=>{j({isResizerHovered:!0},this.props.type)},this.handleMouseLeave=()=>{j({isResizerHovered:!1},this.props.type)},this.handleDragStart=()=>{c.ZH(this.environment),this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!0}),this.didDragMove=!1,j({...g.cY.state,isResizing:!0},this.props.type)},this.handleDragMove=e=>{const{type:t}=this.props;switch(p.clear(this.environment),this.didDragMove=!0,t){case"page":h.setWidth({width:T(e.currentX,this.props.type),environment:this.environment});break;case"update":h.setUpdateWidth({width:T(e.currentX,this.props.type),environment:this.environment});break;case"peek":h.setPeekWidth({width:T(e.currentX,this.props.type),environment:this.environment});break;case"inbox":S.ZP.update((t=>({...t,width:T(e.currentX,this.props.type)})));break;default:(0,s.t1)(t)}},this.handleDragEnd=()=>{const{type:e}=this.props;if(!this.didDragMove){switch(e){case"page":h.setExpand({environment:this.environment,isExpanded:!g.gV.state,from:"sidebar_resizer"}),g.TC.setState(!1);break;case"update":h.setUpdateExpand({environment:this.environment,isExpanded:!(0,m.Sx)(this.environment),from:"drag"});break;case"peek":l.xv(this.environment,"resizer_click");break;case"inbox":d.qQ({environment:this.environment,open:!S.ZP.isOpen()});break;default:(0,s.t1)(e)}this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1})}this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!1}),j({isResizing:!1},this.props.type)},this.handleDragCancel=()=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mousePressed:!1}),j({isResizing:!1},this.props.type)}}renderComponent(){const{device:e}=this.environment,{type:t}=this.props,n=function(e){const t=function(e){switch(e){case"page":return g.GZ.state;case"inbox":return S.ZP.getPanelWidth();case"update":return v.ZP.state.width;case"peek":return y.default.state.preferredSidePeekWidth;default:(0,s.t1)(e)}}(e);switch(e){case"page":return t;case"inbox":return g.GZ.state+S.ZP.getPanelWidth();case"peek":case"update":return window.innerWidth-t;default:(0,s.t1)(e)}}(this.props.type),i=g.ck.state;if(!f.Z.state&&!e.isChromebook)return(0,k.jsx)(x.Z,{renderTooltip:this.renderTooltip,originRect:new DOMRect(n,i,0,0),delayThreshold:500,placement:"page"===t||"inbox"===t?x.Z.Placement.Right:x.Z.Placement.Left,originGap:10,render:e=>(0,k.jsx)("div",{style:_(this.props.type,this.environment),...(0,u.Z)(e,{onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter}),children:(0,k.jsx)(w.Z,{onDraggableDragStart:this.handleDragStart,onDraggableDragMove:this.handleDragMove,onDraggableDragEnd:this.handleDragEnd,onDraggableDragCancel:this.handleDragCancel,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,k.jsx)("div",{style:I(this.props.type),...e})})})})}}C.displayName="SidebarResizer";const M=C;function j(e,t){switch(t){case"page":g.cY.update((t=>({...t,...e})));break;case"update":v.ZP.update((t=>({...t,...e})));break;case"inbox":S.ZP.update((t=>({...t,...e})));break;case"peek":break;default:(0,s.t1)(t)}}function I(e){return{cursor:"col-resize",height:"100%",width:12,marginLeft:"update"===e?-v.ZP.state.width:-6}}function T(e,t){let n;switch(t){case"page":n=e;break;case"inbox":n=e-(g.gV.state?g.GZ.state:0);break;case"peek":case"update":n=window.innerWidth-e;break;default:(0,s.t1)(t)}const i=function(e){const t=window.innerWidth;switch(e){case"page":return 480;case"update":return Math.min(t/2,m.Nc);case"peek":return t>2*y.sidePeekMinWidth?t/1.5:t;case"inbox":return 420;default:(0,s.t1)(e)}}(t),o=function(e){switch(e){case"page":return g.nP;case"update":return v.AO;case"peek":return y.sidePeekMinWidth;case"inbox":return 320;default:(0,s.t1)(e)}}(t);return n>i?i:n<o?o:n}function _(e,t){const n=(0,m.in)(t);return{position:"absolute",left:"peek"===e?0:void 0,right:"peek"!==e?0:void 0,width:0,flexGrow:0,zIndex:"peek"===e?r.YO:1,top:n?0:-1,bottom:n?0:-1,pointerEvents:"auto"}}},58925:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});n(67294);var i=n(83355),o=n(9555),s=n(79102),r=n(82990),a=n(31412),d=n(19719),l=n(17659),c=n(75018),u=n(98742),p=n(50659),h=n(18514),m=n(51811),g=n(77907),v=n(4023),f=n(5162),b=n(62820),S=n(4761),y=n(64921),w=n(31945),x=n(58261),k=n(26388),C=n(39849),M=n(92955),j=n(14694),I=n(85893);class T extends i.Z{constructor(){super(...arguments),this.closeMenu=()=>{(0,f.Y)("supportsNativeInbox")&&h.__(this.environment)&&h.NW(this.environment)?c.back(this.environment):(this.handleCloseUpdatesPopup(),b.Z.setState({...b.Z.state,open:!1}))},this.handleDismiss=()=>{this.handleCloseUpdatesPopup()},this.handleClick=()=>{S.ZP.endSession(),l.G7({environment:this.environment,newTab:"mentions",shouldTrack:!0})},this.handleCloseUpdatesPopup=()=>{d.nI(this.environment),l.G7({environment:this.environment,newTab:"mentions",shouldTrack:!1})},this.showUpdatesButtonWithBoldText=()=>{if(this.props.format!==m.EX.Sidebar)return!1;return b.Z.state.open}}willUnmount(){this.handleCloseUpdatesPopup()}renderComponent(){const{device:e,mobileNative:t}=this.environment;if(this.props.format===m.EX.RenderAsPage)return(0,I.jsx)("div",{style:{background:this.theme.popoverBackground},children:(0,I.jsx)(g.LazyUpdatesPopup,{format:this.props.format,onClose:this.closeMenu})});const n=(0,I.jsx)(a.FormattedMessage,{defaultMessage:"Updates for all pages in this workspace",id:"updatesButton.tooltip"});return(0,I.jsx)(k.Z,{renderTooltip:()=>(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{children:n}),(0,I.jsx)(x.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleAllUpdates"})]}),originGap:6,placement:v.u.Right,render:n=>(0,I.jsx)(w.ZP,{popupType:e.isMobile?w.Z4.SlideUp:w.Z4.Popup,alignmentToOrigin:v.v.Start,placementToOrigin:v.u.Right,onClick:this.handleClick,originGap:0,style:{...!e.isMobile&&{width:500,overflow:"hidden"}},isWideTabletWidth:!0,render:()=>(0,I.jsx)(g.LazyUpdatesPopup,{format:this.props.format,onClose:this.closeMenu}),onClose:this.handleDismiss,isFullWidthOnMobile:!0,preventScaleTransition:!0,preventSlideUpTransition:(null==t?void 0:t.supportsNativeHomeOnPhone())||!1,buttonPopupStore:b.Z,renderOrigin:e=>this.renderButton(n,e)})})}renderButton(e,t){const n=this.props.format,i=b.Z.state.open,d=l.aY(),c=C.Z.Color.Red;if(n===m.EX.MobileBottomBarPhone)return(0,I.jsx)(y.Z,{style:T.mobileBottomBarPhoneButtonStyle,mobileFeedback:!0,...t,children:(0,I.jsxs)("div",{style:{position:"relative"},children:[(0,o.Y)({width:26,fill:this.theme.regularTextColor}),(0,I.jsx)(M.Z,{type:"currentSpace",color:c,style:{position:"absolute",top:-3,right:d<99?-5:-8}})]})});if(n===m.EX.MobileBottomBarTablet)return(0,I.jsx)(y.Z,{style:T.mobileBottomBarTabletButtonStyle,mobileFeedback:!0,...t,children:(0,I.jsxs)("div",{style:{position:"relative"},children:[(0,o.Y)({width:26,fill:this.theme.regularTextColor}),(0,I.jsx)(M.Z,{type:"currentSpace",color:c,style:{position:"absolute",top:-3,right:d<99?-5:-8}})]})});if(n===m.EX.TopbarMobile)return(0,I.jsxs)(y.Z,{style:{...T.actionButtonStyle,marginLeft:2,marginRight:2},mobileFeedback:!0,...t,children:[(0,o.Y)({width:26}),(0,I.jsx)(M.Z,{type:"currentSpace",color:c,style:{position:"absolute",top:8,right:0}})]});if(n===m.EX.SidebarMobile)return(0,I.jsxs)(y.Z,{style:T.actionButtonStyle,mobileFeedback:!0,...t,children:[(0,o.Y)({width:26}),(0,I.jsx)(M.Z,{type:"currentSpace",color:c,style:{position:"absolute",top:8,right:0}})]});if(n===m.EX.Sidebar){const n=this.showUpdatesButtonWithBoldText(),o=(0,I.jsx)(a.FormattedMessage,{defaultMessage:"Updates",id:"updatesButton.allUpdates.sidebarButton"}),d=(0,s.Y)({fill:n?this.theme.regularIconColor:this.theme.mediumIconColor,width:20});return(0,I.jsx)(y.Z,{style:{...n&&{fontWeight:r.Z.fontWeight.medium,color:this.theme.regularTextColor},...(0,p.G$)({isMobile:!1})},...(0,u.Z)(e,t),children:(0,I.jsx)(j.Z,{left:(0,I.jsx)("div",{style:{color:n?this.theme.regularTextColor:"inherit"},children:d}),right:(0,I.jsx)(M.Z,{type:"currentSpace",color:c,style:{marginBottom:2,marginLeft:6}}),style:{background:i?this.theme.buttonHoveredBackground:"none"},children:o})})}}}T.displayName="UpdatesButton",T.Format=m.EX,T.actionButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,height:"100%",minWidth:34,position:"relative"},T.mobileBottomBarPhoneButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",flex:1},T.mobileBottomBarTabletButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",width:62,flex:"none"};const _=T},24553:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L});var i=n(67294),o=n(13991),s=n(480),r=n(6740),a=n(86628),d=n(24405),l=n(84169),c=n(88642),u=n(31412),p=n(50906),h=n(39634),m=n(24215),g=n(43250),v=n(79897),f=n(98742),b=n(77907),S=n(58455),y=n(77080),w=n(475),x=n(16194),k=n(55031),C=n(64921),M=n(31945),j=n(26388),I=n(14694),T=n(85893);function _(e){window.__c={n:"HelpButtonOrigin"};const t=(0,s.O7)(),{isMobile:n}=t.device,o=(0,u.useIntl)(),c=(0,d.Fg)(),p=(0,a.VK)((()=>w.Z.state.open),[]),h=(0,d.yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),m=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&x.Z.setState(!0)}),[]),v=(0,i.useCallback)((()=>{x.Z.setState(!1)}),[]);if(n)return(0,T.jsx)(C.Z,{hovered:p,testId:g.lmr,mobileFeedback:n,...e,children:(0,T.jsx)(I.Z,{left:(0,l.m)(h.helpIcon),disableMobileBorder:!0,children:(0,T.jsx)(u.FormattedMessage,{defaultMessage:"Help & feedback",id:"helpButton.mobileHelpFeedbackButton.label"})})});const b=o.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),S=(0,f.Z)(e,{onFocus:m,onBlur:v});return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(j.Z,{renderTooltip:()=>(0,T.jsx)("span",{children:(0,T.jsx)(u.FormattedMessage,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,T.jsx)("br",{})}})}),render:e=>(0,T.jsx)(C.Z,{ariaLabel:b,className:g.lmr,testId:g.lmr,style:(0,k.y)(t,{theme:c,rightEdgeDistance:16,isInPeekRenderer:!1}),hoveredStyle:h.hoveredStyle,pressedStyle:h.pressedStyle,...(0,f.Z)(S,e),children:"?"})})})}const L=(0,u.injectIntl)((function(){window.__c={n:"HelpButton"};const e=(0,s.O7)(),{isMobile:t}=e.device,n=(0,a.VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),r=(0,i.useCallback)((()=>{p.Ar6(e);const t=S.default.state;if((0,m.Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:n,isSalesAssistedPlan:i}=(0,v.r)(e);c.j({locale:o.SP,analyticsSettings:t,isForethoughtEnabled:y.default.checkGate("forethought"),forethoughtInitializeArgs:h.z(e),userHighestPlanType:n,isSalesAssistedPlan:i,cookieImpl:e.cookieImpl})}}),[e]);return(0,T.jsx)(M.ZP,{popupType:t?M.Z4.SlideUp:M.Z4.Popup,hidesMobileNativeBottomBar:n,preventSlideUpTransition:n,renderOrigin:e=>(0,T.jsx)(_,{...e}),originGap:t?0:12,placementToOrigin:t?M.pO.Right:M.pO.Top,alignmentToOrigin:t?M.vR.Center:M.vR.End,buttonPopupStore:w.Z,onClick:r,render:()=>(0,T.jsx)(b.LazyHelpButtonContent,{shouldRenderAsStaticModal:n})})}))},69098:(e,t,n)=>{"use strict";n.d(t,{j:()=>c,o:()=>i});var i={};n.r(i),n.d(i,{showAsyncModal:()=>p,showAsyncModalComponent:()=>h,testOnly:()=>w});var o=n(67294),s=n(86628),r=n(49085);class a extends r.default{getInitialState(){return{asyncModals:[]}}}const d=new a;var l=n(85893);const c=o.memo((e=>{window.__c={n:"AsyncModalRenderer"};const{store:t=d}=e,n=(0,s.VK)((()=>t.state.asyncModals),[t]);return(0,l.jsx)(l.Fragment,{children:n.map((e=>{const{id:t,internalRenderModal:n,isOpen:i}=e,s=n(i);return(0,l.jsx)(o.Fragment,{children:s},t)}))})}));var u=n(4615);function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return new Promise(((n,i)=>{try{m({asyncModal:b({renderModal:e,promiseResolve:n,promiseReject:i,store:t}),store:t})}catch(o){i(o)}}))}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;const n=t=>o.createElement(e,t);return p(n,t)}function m(e){const{asyncModal:t,store:n=d}=e;n.update((e=>({asyncModals:[...e.asyncModals,t]})))}function g(e){const{id:t,promiseResolve:n,store:i=d}=e;return e=>{const o=S({id:t,store:i});null!=o&&o.isOpen&&(y({id:t,store:i,update:{isOpen:!1}}),n(e))}}function v(e){const{id:t,promiseResolve:n,store:i=d}=e;return()=>{const e=S({id:t,store:i});null!=e&&e.isOpen&&(y({id:t,store:i,update:{isOpen:!1}}),n())}}function f(e){const{id:t,store:n=d}=e;return()=>{n.update((e=>({asyncModals:e.asyncModals.filter((e=>e.id!==t))})))}}function b(e){const{renderModal:t,promiseResolve:n,promiseReject:i,store:o=d}=e,s=(0,u.ZP)(),r=f({id:s,store:o}),a=v({id:s,promiseResolve:n,store:o}),l=g({id:s,promiseResolve:n,store:o});return{id:s,internalRenderModal:e=>{try{return t({isOpen:e,onClosed:r,onDismiss:a,resolve:l})}catch(n){throw i(n),n}},isOpen:!0}}function S(e){const{id:t,store:n=d}=e;return n.state.asyncModals.find((e=>e.id===t))}function y(e){const{id:t,update:n,store:i=d}=e;i.update((e=>({asyncModals:e.asyncModals.map((e=>e.id!==t?e:{...e,...n}))})))}const w={addAsyncModal:m,createAsyncModal:b,createOnClosed:f,createOnDismiss:v,createResolve:g,getAsyncModal:S,updateAsyncModal:y}},30106:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(49085);class o extends i.default{getInitialState(){return{open:!1}}}const s=new o},65556:(e,t,n)=>{"use strict";n.r(t),n.d(t,{setupOnBeforeUnload:()=>a,showConfirmationDialogEventEmitter:()=>s});var i=n(33147),o=n(51214);const s=new i.Z,r={transaction_queue_has_tasks:"Changes you made may not be saved. Are you sure you want to quit?",uploading_files:"The files you are currently uploading may not be saved. Are you sure you want to quit?",generating_ai_completions:"Changes being made by AI may not be saved. Are you sure you want to quit?"};function a(e){const{TransactionQueue:t,device:n,AppUpdateStore:i,GlobalFileUploadStore:a}=e;window.onbeforeunload=function(){const e=!t.hasTasks()||n.isMobileNative||n.isElectron||i.isMajorUpdate()?a.isUploading()?"uploading_files":o.Z.isGeneratingAtAll()?"generating_ai_completions":void 0:"transaction_queue_has_tasks";if(e)return s.emit(e),r[e]}}},70511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{setupTransactionLoadGenerator:()=>d});var i=n(92595),o=n(97444),s=n(39699),r=n(80444),a=n(24666);function d(e){(0,i.exposeDebugValue)("generateTransactionLoad",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const d=r.default.state.mainEditorCurrentBlockStore;if(!d)return void console.info("Cannot generateTransactionLoad: No current block");const l=d.getTitleStore();if(!l)return void console.info("Cannot generateTransactionLoad: block has no title");if("editing"!==a.default.state.mode)return void console.info("not editing anything. Click the page title.");const c=t=>{s.createAndCommit({userAction:"generateTransactionLoad.createTransaction",environment:e,perform:i=>{console.info("createAndCommit #",t);for(let s=0;s<n;s++){const n=`This is transaction #${t+1}, op ${s+1}, of load started at ${u}`;o.aS({environment:e,store:l,newValue:n,disableMentions:!0,disableDateMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:i})}}})},u=new Date;if(0===i)for(let e=0;e<t;e++)c(e);else{let e=0;const n=setInterval((()=>{e<t?(c(e),e++):clearInterval(n)}),i)}}))}},92725:(e,t,n)=>{"use strict";n.r(t),n.d(t,{instrumentRenderQueue:()=>l});var i=n(1302),o=n(77897),s=n(29091),r=n(24215),a=n(97448);const d={componentRender:{enabledPercent:0,sampleRate:0},recomputeStore:{enabledPercent:0,sampleRate:0}};function l(e){const t=(0,a.fastGetConfig)("event_trail_events"),n=(null==t?void 0:t.get("browser.render_queue.component_render",d.componentRender))||d.componentRender,l=(null==t?void 0:t.get("browser.render_queue.store_recompute",d.recomputeStore))||d.recomputeStore;if(0===n.enabledPercent&&0===l.enabledPercent)return;const c=Math.random(),u=(0,s.XJ)(1e4);(0,o.aw)(n.enabledPercent,(()=>c))&&i.default.setComponentRenderTracker({shouldTrackThisRender:()=>(0,o.aw)(n.sampleRate,u),trackRender:t=>{let{componentName:n,renderTime:i}=t;r.j(e,"browser.render_queue.component_render",{time:i,component:n})}}),(0,o.aw)(l.enabledPercent,(()=>c))&&i.default.setStoreRecomputeTracker({shouldTrackThisRecompute:()=>(0,o.aw)(l.sampleRate,u),trackRecompute:(t,n)=>{r.j(e,"browser.render_queue.store_recompute",{time:n,computed_store:t})}})}},19077:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initialize:()=>a});var i=n(68626),o=n(95477),s=n(77080),r=n(15517);function a(e){"object"==typeof o.default&&o.default.version&&(i.clientLogglyEnvironmentData.version=o.default.version);const{device:t,currentUser:n}=e;t.isMobileNative&&(i.clientLogglyEnvironmentData.isMobileNative=!0),t.isMobile&&(i.clientLogglyEnvironmentData.isMobile=!0),t.isAndroid&&(i.clientLogglyEnvironmentData.isAndroid=!0),t.isIOS&&(i.clientLogglyEnvironmentData.isIOS=!0),t.isElectron&&(i.clientLogglyEnvironmentData.isElectron=!0),t.isChromeExtension&&(i.clientLogglyEnvironmentData.isChromeExtension=!0),i.clientLogglyEnvironmentData.os=t.os,i.clientLogglyEnvironmentData.platform=t.platform,window.navigator.userAgent&&(i.clientLogglyEnvironmentData.userAgent=window.navigator.userAgent),document.referrer&&(i.clientLogglyEnvironmentData.referrer=document.referrer),n.id&&(i.clientLogglyEnvironmentData.userId=n.id),i.clientLogglyEnvironmentData.experiments=s.default.getUsedNonControlExperimentsMap(),s.default.addListener((()=>{i.clientLogglyEnvironmentData.experiments=s.default.getUsedNonControlExperimentsMap()})),(0,r.sK)().then((e=>{e&&(i.clientLogglyEnvironmentData.storageUsageEstimate=e.usage,i.clientLogglyEnvironmentData.storageQuotaEstimate=e.quota)}))}},44499:(e,t,n)=>{"use strict";n.d(t,{Hn:()=>m,XQ:()=>p,Xk:()=>u,qB:()=>h});n(57658);var i=n(41432),o=n(45433),s=n(21202),r=n(6287),a=n(55367),d=n(42330),l=n(26350),c=n(75770);function u(e,t){return!(!e.isNavigableBlock()&&e.getType()!==i.Ti.alias)&&(!e.isLinkedCollectionView()&&(!e.getMovedStore().getValue()&&!(0,c.ru)({targets:t,destination:e,direction:a.vh.Onto})))}function p(e){let{recentPageResults:t,blockResults:n,suggestedPages:i}=e;const o=new Set;for(const s of i){const e=s instanceof l.NW?s.getParentId():s.id;e&&o.add(e)}return[...t.filter((e=>!o.has(e.blockId))),...n.filter((e=>!o.has(e.blockId)))]}function h(e){const t=[];for(const i of e){const e=i.getParentPointer();if(e)if(e.table===s.iU)t.push(e.id);else if(e.table===r.v){var n;const e=null===(n=i.getAssociatedCollectionStore())||void 0===n?void 0:n.getParentPointer();e&&e.table===s.iU&&t.push(e.id)}}return t}function m(){const e=d.ZP.getTargetsDatabaseType(),t=d.ZP.getVariant();return("typedInitialized"===t||"typedUninitialized"===t)&&e&&e!==o.GZ}},50659:(e,t,n)=>{"use strict";n.d(t,{G$:()=>o,MF:()=>s,Z3:()=>i});function i(e){let{isMobile:t}=e;return{...!t&&{borderRadius:3}}}function o(e){let{isMobile:t}=e;return t?{}:{...i({isMobile:t}),marginLeft:4,marginRight:4,width:"calc(100% - 8px)"}}function s(){return{paddingLeft:10,paddingRight:10}}},51811:(e,t,n)=>{"use strict";n.d(t,{EX:()=>i,HB:()=>d,IS:()=>l,Tj:()=>a,yW:()=>r});let i=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.MobileBottomBarPhone=2]="MobileBottomBarPhone",e[e.MobileBottomBarTablet=3]="MobileBottomBarTablet",e[e.TopbarMobile=4]="TopbarMobile",e[e.RenderAsPage=5]="RenderAsPage",e}({});const o=new Map,s=new Map;function r(e,t){o.set(c(e),t)}function a(e){return o.get(c(e))}function d(e,t){s.set(u(e),t)}function l(e){return s.get(u(e))??[]}function c(e){return Object.keys(e).sort().map((t=>{const n=e[t];return JSON.stringify(n)})).join("-")}function u(e){return Object.keys(e).sort().map((t=>{const n=e[t];return JSON.stringify(n)})).join("-")}},48916:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mainApp:()=>i});n(21703);async function i(e){const{minimalEnvironment:t,mainStartTime:i,prefetchInitiatedTime:o,prefetchCache:s}=e,{device:r}=t,[{setupOnBeforeUnload:a},d,{createClientEnvironment:l},{setupTransactionQueue:c},{default:u},p]=await Promise.all([Promise.resolve().then(n.bind(n,65556)),Promise.resolve().then(n.bind(n,68626)),Promise.resolve().then(n.bind(n,78200)),Promise.resolve().then(n.bind(n,5315)),Promise.resolve().then(n.bind(n,27411)),Promise.resolve().then(n.bind(n,44133))]);let h=await l({minimalEnvironment:t,prefetchCache:s});const{ElectronSqlite:m}=h;p.setupRecordCacheDebugging(r);const g=await c(h);a({device:r,TransactionQueue:g,AppUpdateStore:h.AppUpdateStore,GlobalFileUploadStore:u});const[v,{default:f}]=await Promise.all([Promise.resolve().then(n.bind(n,19077)),Promise.resolve().then(n.bind(n,18245))]);if(v.initialize(h),r.isMobileNative){const e=f.mark("initialize_react_native_from_js"),[t,i]=await Promise.all([Promise.resolve().then(n.bind(n,98958)),Promise.resolve().then(n.bind(n,57491))]);await t.initializeMobileNativeApp(h),Object.assign(d.clientLogglyEnvironmentData,i.getMobileNativeDeviceInfo()),f.measure(e,{environment:h})}if(r.isElectron){const e=await Promise.resolve().then(n.bind(n,47839));await e.initializeElectron({device:r,electronSqlite:m});const t=await Promise.resolve().then(n.bind(n,74503)),i=await t.getDesktopDeviceInfo();Object.assign(d.clientLogglyEnvironmentData,i,{desktopVersion:r.desktopAppVersion})}const[b,S,y,w,x,k,{getAppRefreshed:C}]=await Promise.all([Promise.resolve().then(n.bind(n,97977)),Promise.resolve().then(n.bind(n,74948)),Promise.resolve().then(n.bind(n,89224)),Promise.resolve().then(n.bind(n,75018)),Promise.resolve().then(n.bind(n,39699)),Promise.resolve().then(n.bind(n,78519)),Promise.resolve().then(n.bind(n,9852))]),{setupTransactionLoadGenerator:M}=await Promise.resolve().then(n.bind(n,70511));M(h);const j=performance.now(),[{default:I},T,_,L,{CurrentUser:P},{getGhostAdminUserId:A},{default:Z}]=await Promise.all([Promise.resolve().then(n.bind(n,49273)),Promise.resolve().then(n.t.bind(n,67294,19)),Promise.resolve().then(n.t.bind(n,73935,19)),Promise.resolve().then(n.t.bind(n,20745,19)),Promise.resolve().then(n.bind(n,87997)),Promise.resolve().then(n.bind(n,12955)),Promise.resolve().then(n.bind(n,77080))]);S.initialize(),y.startListeners(r),h=await b.initialize(h),h.updateCurrentUserId=async e=>{const t=await A(h),n={...e.environment,currentUser:new P({id:e.currentUserId,loggedInUserIds:e.userIds,adminUserId:t})};q(n)},w.initialize(h),g.startLoop();const[{maybeClearCookies:E,refreshNotionCookies:U,validateHasPermissionArgs:B,clearNotionCookiesWithNoPermission:R,clearThirdPartyCookiesAndLocalStorageWithNoPermission:N},{clearNotionLocalStorageWithNoPermission:V},{instrumentRenderQueue:O},D,z,{deviceSupportsSqlite:F}]=await Promise.all([Promise.resolve().then(n.bind(n,12955)),Promise.resolve().then(n.bind(n,18613)),Promise.resolve().then(n.bind(n,92725)),Promise.resolve().then(n.bind(n,32223)),Promise.resolve().then(n.bind(n,32603)),Promise.resolve().then(n.bind(n,26492))]);E(),Promise.all([R(h),N(h)]).then((()=>U(h))),V(),B(h),k.initialize(h,{fromPageRefresh:C()});const[{TransactionQueueDependenciesImpl:W}]=await Promise.all([Promise.resolve().then(n.bind(n,68026))]);if(F(h.device)){const{default:e}=await Promise.resolve().then(n.bind(n,41226));e.setNotionPerformance(f)}O(h);const q=e=>{const t=performance.now(),n=document.querySelector("#notion-app");if(!n)throw new Error('Could not find element with id "notion-app"');const s=Z.checkGate("react_18_concurrent_rendering");g.updateDependencies(new W(e)),x.updateConnectionState(e),D.updateEnvironment(e),d.clientLogglyEnvironmentData.userId=e.currentUser.id;const r=()=>{const e=document.getElementById("initial-loading-spinner"),n=document.getElementById("skeleton");e&&e.remove(),n&&n.remove();const s=performance.now();z.setSubMetricsAtRenderCallback({mainStartTime:i,prefetchInitiatedTime:o,renderStartTime:t,renderEndTime:s,mainImportEndTime:j})},a=T.createElement(I,{environment:e,onMount:s?r:void 0});if(s){L.createRoot(n).render(a)}else _.render(a,n,r)};return q(h),{transactionQueue:g,environment:h}}},19361:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(49085);class o extends i.default{getInitialState(){return{isSupported:!1,active:!1,stage:"inactive",totalResults:0}}toggleActiveState(e){this.update((t=>({...t,active:e,stage:e?t.stage:"inactive",totalResults:e?0:t.totalResults})))}}const s=new o},78200:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createClientEnvironment:()=>le});var i=n(26263),o=n(45631),s=n(87997),r=n(58287),a=n(94023),d=n(91814),l=n(27328),c=n(42389),u=n(20475),p=n(99747),h=n(47839),m=n(12955),g=n(84709),v=(n(21703),n(57658),n(28084)),f=n(68626),b=n(55652),S=n(72126),y=n(45953),w=n(21202),x=n(97664),k=n(12139),C=n(66504),M=n(84693);let j=1;class I{constructor(e,t){this.getLatency=new b.s,this.batchReadWorkers=15,this.pendingWrites=y.Ao.create(),this.getManyFromDisk=async e=>{const t=y.Ao.create();e.forEach(((e,n)=>{let{pointer:i}=e;t.set(i,n)}));const n=await M.Q6(this.connection,e),i=y.Ao.create();for(const o of n)this.setCachedRecordMap(i,o);return e.map((e=>{let{pointer:t,userId:n}=e;const o=this.getInMemory(t,n);if(o)return o;const s=i.get(t);return s&&s[n]}))},this.diskReadQueue=new v.Z({batchSize:Math.floor(x.mz/3)-1,maxWorkers:this.batchReadWorkers>0?this.batchReadWorkers:1,performRequests:this.getManyFromDisk}),this.flushWrites=async()=>{const e=this.pendingWrites;this.pendingWrites=y.Ao.create();const t=S.VS(Array.from(e),(e=>{let{value:t}=e;return t?Object.values(t):[]}));await M.Y3(this.connection,this.maxSize,t)},this.debouncedFlushWrites=S.Ds(this.flushWrites,500,{maxWait:3e3}),this.connection=e,this.maxSize=t}async initialize(e){}set(e,t,n,i,o){if(void 0===e||void 0===e.id){const t=new Error("Attempting to set a record with an invalid pointer.");return f.log({level:"error",from:"SqliteRecordCache",type:"SqliteRecordCache.setBadPointer",error:{message:"Attempting to set a record with an invalid pointer.",stack:t.stack},data:{pointer:e}}),void k.IE(t)}const s={pointer:e,userId:i=i||C.I,value:t,timestamp:Date.now(),importance:n};this.removePendingWrite(e,i,"delete"),this.enqueueWrite({type:"set",record:s,maybeStaleRecord:o})}async get(e,t){const n=`get ${j}`;t=t||C.I,j++,this.getLatency.start(n);try{const i=this.getInMemory(e,t);if(i)return this.enqueueWrite({type:"access",record:i}),this.getLatency.end(n,"memory"),i.value;const o=await(this.batchReadWorkers>0?this.diskReadQueue.enqueue({pointer:e,userId:t}):this.getFromDiskUnbatched(e,t));if(o)return this.enqueueWrite({type:"access",record:o}),this.getLatency.end(n,"disk"),o.value}finally{this.getLatency.end(n,"miss")}}deleteRecord(e,t){t=t||C.I,this.removePendingWrite(e,t,"set"),this.enqueueWrite({type:"delete",record:{pointer:e,userId:t}})}async getBlocksWithParent(e){const t=Date.now(),n=e.userId||C.I,i=await M.lR(this.connection,{...e,timestamp:t,userId:n}),o=y.Ao.create(),s=S.oA(Array.from(this.pendingWrites).map((i=>{const s=i&&i.value&&n&&i.value[n];if(!s||"set"!==s.type)return;const r=s.record.value?s.record.value.value:void 0;if(!r)return;if(s.record.pointer.table!==w.iU)return;const a=r;return a.parent_id===e.parent.id&&a.parent_table===e.parent.table?(o.set(s.record.pointer,!0),s.record.timestamp<t&&(s.record.timestamp=t),s.record.value):void 0})));for(const r of i)o.get(r.pointer)||this.getInMemory(r.pointer,r.userId)||s.push(r.value);return s}async getPageBlocksByParent(e){const t=Date.now(),n=e.userId||C.I,i=await M.GF(this.connection,{...e,timestamp:t,userId:n});return i.forEach((e=>{this.enqueueWrite({type:"access",record:{pointer:e.pointer,timestamp:t,userId:n,importance:void 0,value:e.value}})})),i}async reset(){this.pendingWrites=y.Ao.create(),await M.G$(this.connection)}enqueueWrite(e){this.debouncedFlushWrites();const{pointer:t,userId:n}=e.record,i=this.pendingWrites.get(t),o=i&&i[n];if(o){if("set"===o.type&&"access"===e.type){const t={type:"set",record:{...o.record,timestamp:e.record.timestamp}};return void this.setCacheOperationMap(this.pendingWrites,t)}const t="set"===o.type&&!o.maybeStaleRecord&&o.record.value&&o.record.value.value?o.record.value.value.version:void 0,n="set"===e.type&&e.maybeStaleRecord&&e.record.value&&e.record.value.value?e.record.value.value.version:void 0;if("number"==typeof t&&"number"==typeof n&&t>=n)return}this.setCacheOperationMap(this.pendingWrites,e)}async getFromDiskUnbatched(e,t){const[n]=await this.getManyFromDisk([{pointer:e,userId:t}]);return n}getInMemory(e,t){const n=this.pendingWrites.get(e),i=n&&n[t];if(i&&"set"===i.type)return i.record}setCacheOperationMap(e,t){const n=t,{pointer:i,userId:o}=n.record,s=e.get(i)||{};e.set(i,{...s,[o]:n})}setCachedRecordMap(e,t){const{pointer:n,userId:i}=t,o=e.get(n)||{};e.set(n,{...o,[i]:t})}removePendingWrite(e,t,n){const i=this.pendingWrites.get(e);i&&i[t]&&i[t].type===n&&this.pendingWrites.delete(e)}}var T=n(4615),_=n(65044),L=n(77892);const P=[WebSocket.OPEN,WebSocket.CONNECTING];class A{constructor(){this.sqliteConnection=void 0,this.environment=void 0,this.requests=new Map}setEnvironment(e){var t;this.environment=e,null===(t=this.sqliteConnection)||void 0===t||t.setEnvironment(e)}async initialize(){if(h.electronApi&&h.electronApi.sqliteServerEnabled){await this.initializeWebSocket();const e={execSqliteBatchV2:async e=>{const t=(0,T.ZP)(),{batch:n,precondition:i}=e,o=JSON.stringify({id:t,batch:n,precondition:i,auth:this.authToken});return await this.execSqliteBatchInner(t,o)},execSqliteBatch:async e=>{const t=(0,T.ZP)(),n=JSON.stringify({id:t,batch:e,auth:this.authToken});return await this.execSqliteBatchInner(t,n)}};this.sqliteConnection=new _.s({connection:e,type:"v2",migrations:await(0,L.kk)(e)})}}async execSqliteBatchInner(e,t){const n=new Promise((t=>{this.requests.set(e,t)}));this.ws.readyState===WebSocket.CLOSED&&await this.initializeWebSocket();try{this.ws.send(t)}catch(o){const e=this.ws;this.ws.onopen=function(n){e.send(t)}}const i=await n;if(i.error)throw new Error("Received SQLite error.");return i.value}async initializeWebSocket(){if(!h.electronApi||!h.electronApi.getSqliteMeta)return;const e=await h.electronApi.getSqliteMeta();if(e.error)return;if(this.ws&&P.includes(this.ws.readyState))return;const{serverProcessPort:t,authToken:n}=e.value;this.authToken=n;const i=`ws://127.0.0.1:${t}`;this.ws=new WebSocket(i),this.ws.onclose=()=>{f.log({level:"warning",from:"electronSqlite",type:"reinitializingWebsocket"}),this.initializeWebSocket()},this.ws.addEventListener("message",(e=>{const t=e.data.toString(),{id:n,result:i}=JSON.parse(t),o=this.requests.get(n);o&&(this.requests.delete(n),o({value:i}))})),await new Promise((e=>{this.ws.onopen=()=>{e()}}))}}var Z=n(758),E=n(49085);class U extends E.default{getInitialState(){return{}}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state.data)))}}const B=U;var R=n(77080),N=n(70203),V=n(77907);class O extends E.default{getInitialState(){return{loading:!1,loaded:!1}}async loadIfNeeded(e){if(this.state.loaded||this.state.loading)return;const t=e();if(!t)return;if(0===N.CGe(t).length)return;const n=V.deps.katex.loader();this.setState({loading:!0,loaded:!1,result:n}),this.setState({loading:!1,loaded:!0,result:await n})}getKatex(){if(this.state.loaded)return this.state.result}}var D=n(15157),z=n(44615),F=n(606),W=n(63143),q=n(54642),H=n(2688),K=n(5315);class G extends E.default{static getCacheKey(e){return`LocalBacklinkStore2:${e}`}getInitialState(){return{}}initializeBacklinks(e){let{block:t,currentUserId:n,environment:i}=e;if(this.instanceState[t.id])return;const o=this.getCachedBacklinkState({blockId:t.id,currentUserId:n});o?this.setState({...this.instanceState,[t.id]:{state:o,loaded:!0}}):this.setState({...this.instanceState,[t.id]:{state:{backlinks:[],inaccessibleBacklinkCount:0},loaded:!1}}),$(i,t),this.startMessageListeners(t,i)}awaitLoaded(e){return this.waitUntil((()=>{const t=this.state[e];return Boolean(t&&t.loaded)}))}destroyBacklinks(e,t){this.stopMessageListeners(e,t),delete this.instanceState[e]}getBacklinkState(e){let{blockId:t,currentUserId:n}=e;const i=this.state[t];return i?i.state:this.getCachedBacklinkState({blockId:t,currentUserId:n})||{backlinks:[],inaccessibleBacklinkCount:0}}setBacklinkState(e){let{blockId:t,state:n,currentUserId:i}=e;this.setCachedBacklinkState({blockId:t,state:n,currentUserId:i});const o=this.state[t];o&&this.setState({...this.state,[t]:{...o,state:n,loaded:!0}})}updateBacklinks(e){const{createdBacklinks:t,deletedBacklinks:n,currentUserId:i}=e,o=(0,W.cf)(t),s=(0,W.cf)(n),r=o.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),a=s.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),d=new Set([...Object.keys(r),...Object.keys(a)]);return d.forEach((e=>{const t=r[e]||[],n=a[e]||[],o=this.getBacklinkState({blockId:e,currentUserId:i}),s=t.filter((e=>!o.backlinks.some((t=>S.Xy(e,t))))),d=[...o.backlinks,...s].filter((e=>!n.some((t=>S.Xy(e,t)))));this.setBacklinkState({blockId:e,state:{...o,backlinks:d},currentUserId:i})})),Array.from(d)}resetBacklinkState(e){let{blockIds:t,currentUserId:n}=e;for(const i of t)this.setCachedBacklinkState({blockId:i,state:{backlinks:[],inaccessibleBacklinkCount:0},currentUserId:n})}getCachedBacklinkState(e){let{blockId:t,currentUserId:n}=e;return D.Z.get({userId:n,key:G.getCacheKey(t)})}setCachedBacklinkState(e){let{blockId:t,state:n,currentUserId:i}=e;return D.Z.set({userId:i,key:G.getCacheKey(t),value:n})}async startMessageListeners(e,t){const n=F.dr.fromSpaceShardRecordId(e,w.iU);K.transactionQueue.isPendingTransactionForRecord(n)&&await K.transactionQueue.drain();const i=this.instanceState[n.id];if(!i)return;let o,s=!1;const r=S.P2(((n,i)=>{const r=o,a=i||void 0;o=a,s?r!==a&&$(t,e):s=!0}),1e3),a=(0,z.Mv)(n.id);i.messageStoreListenerReference=H.Z.addListener(a,r,void 0,t)}stopMessageListeners(e,t){const n=this.instanceState[e];n&&n.messageStoreListenerReference&&(H.Z.removeListener(n.messageStoreListenerReference,t),n.messageStoreListenerReference=void 0)}}async function $(e,t){await K.transactionQueue.awaitRecordTransaction({id:t.id,table:w.iU});const n=await q.getBacklinksForBlock(e,{block:t});"failed"!==n.type&&e.LocalBacklinkStore.setBacklinkState({blockId:t.id,state:{backlinks:n.data.backlinks,inaccessibleBacklinkCount:n.data.inaccessibleBacklinkCount},currentUserId:e.currentUser.id})}var Q=n(29477);class Y extends E.default{getInitialState(){return{isOpen:!1,isSubMenuOverridden:!1,subMenuType:null,menuType:null,shouldRestoreSelectionForMenu:!0,enableShouldShowDebugging:!1}}clear(e){this.update((t=>({...t,menuType:null,shouldRestoreSelectionForMenu:e})))}async clearNativeActionMenuAndRestoreSelectionIfNecessary(){null!==this.state.menuType&&(this.clear(!0),await Q.Vs(10))}}var X=n(97880);function J(e){return`PageDetailsStore:${e.type}:${e.id}`}class ee extends E.default{getInitialState(){return{}}static getDefaultToggleState(e){return"discussion"===e.type||"backlinks"!==e.type&&void(0,X.t1)(e)}getToggleState(e){const t=J(e);if(t in this.state)return this.state[t]}setToggleState(e,t){const n=J(e);this.setState({...this.state,[n]:t})}}var te=n(54153);const ne="spellcheckEnabled";class ie{constructor(e){let{device:t}=e;this.enabled=void 0,this.currentLanguages=void 0;const n=te.Z.get(ne);this.setEnabled(void 0===n||n)}setEnabled(e){var t,n;(this.enabled=e,te.Z.set(ne,e),null!==(t=h.electronApi)&&void 0!==t&&t.setSpellCheckerEnabled)&&(null===(n=h.electronApi)||void 0===n||n.setSpellCheckerEnabled(e))}isEnabled(){return this.enabled}getCorrections(e){return e.dictionarySuggestions}addToDictionary(e){var t;null!==(t=h.electronApi)&&void 0!==t&&t.addToDictionary&&h.electronApi.addToDictionary(e)}setLanguages(e){var t;S.Xy(this.currentLanguages,e)||(this.currentLanguages=e,null!==(t=h.electronApi)&&void 0!==t&&t.setSpellCheckerLanguages&&h.electronApi.setSpellCheckerLanguages(0===e.length?[navigator.language]:e))}async getLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=h.electronApi)&&void 0!==e&&e.getSpellCheckerLanguages){const e=await h.electronApi.getSpellCheckerLanguages();for(const i of e)n.push({code:i,name:t.of(i)})}return n}async getAvailableLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=h.electronApi)&&void 0!==e&&e.getAvailableSpellCheckerLanguages){const e=await h.electronApi.getAvailableSpellCheckerLanguages();for(const i of e)n.push({code:i,name:t.of(i)})}return n}}var oe=n(14577);class se extends oe.Z{}const re=["nativeRedirect","page","space","nativeTab","onboarding","unsubscribe","unknown","uiDoc","root"],ae=[...re,"login","signup","quickSearch"];let de=0;async function le(e){var t,n;const{minimalEnvironment:v,prefetchCache:f}=e,{device:b,mobileNative:S,cookieImpl:y}=v,w=""+de++,x=b.isElectron&&Boolean(null===(t=h.electronApi)||void 0===t?void 0:t.sqliteServerEnabled)?await async function(e){var t;if(!e.device.isElectron||null===(t=h.electronApi)||void 0===t||!t.sqliteServerEnabled)return;const n=new A;return await n.initialize(),n}({device:b}):void 0,k=new d.Z,C=new l.Xk,M=new u.Z;let j;j=null!==(n=h.electronApi)&&void 0!==n&&n.getAvailableSpellCheckerLanguages?new ie({device:b}):new Z.P({device:b});const T=(null==S?void 0:S.sqliteConnection)||(null==x?void 0:x.sqliteConnection),_=T?new I(T,1e5):void 0,L=function(e){const{device:t,RouterStore:n,ThemeStore:i}=e;let o=re;return(t.isElectron||t.isMobileNative)&&(o=ae),new se((()=>{const e=n.state.route;return e&&o.includes(e.name)?i.state.mode:"light"}),{debugName:"ThemeModeStore"})}({device:b,RouterStore:k,ThemeStore:M}),P=b.isMobile?new Y:void 0,E=await m.getPublicDomainUserId({device:b,mobileNative:S,cookieImpl:y}),U={key:w,AppUpdateStore:new r.D,device:b,WindowSizeStore:new p.j({device:b},window,{mobileBrowserRemoveBottomPaddingHack:R.default.checkGate("mobile_browser_remove_bottom_padding_hack")}),KeyboardShortcutStackStore:new a.h({device:b}),defaultRecordCache:new o.q({inMemoryRecordCache:new i.Z({name:"default"}),persistedRecordCache:_}),mobileNative:S,RouterStore:k,ThemeStore:M,ThemeModeStore:L,ElectronSqlite:x,KatexStore:new O,LocalBacklinkStore:new G,PageDetailsStore:new ee,updateCurrentUserId:void 0,currentUser:new s.CurrentUser,SpellCheckStore:j,CsatMilestoneStore:new B,NativeMobileActionBarStore:P,TextSelectionCompositionStore:new c.h,recordSubscriptionActions:g,prefetchCache:f,TabbedRouterStore:C,cookieImpl:y,publicDomainUserId:E};return null==x||x.setEnvironment(U),null==S||S.setEnvironment(U),U}},91190:(e,t,n)=>{"use strict";n.d(t,{C:()=>s,E:()=>o});var i=n(61766);const o=new i.Z,s=new i.Z},26492:(e,t,n)=>{"use strict";function i(e){return e.isElectron||e.isMobileNative}n.r(t),n.d(t,{deviceSupportsSqlite:()=>i})},30021:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(53809),o=n(30548);const s=new i.D({key:"appearanceSettingStorageKey",namespace:o.$p,important:!0,trackingType:"necessary"})},43604:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n(49085).default.createValue({open:!1})},74055:(e,t,n)=>{"use strict";n.d(t,{V:()=>o,Z:()=>r});var i=n(49085);let o=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class s extends i.default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const r=new s},81212:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=new(n(61364).Z)},53610:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=new(n(61766).Z)},66881:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});const i=n(49085).default.createValue({shouldReset:!1})},72653:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(14577),o=n(5162),s=n(69454),r=n(55320);const a=new i.Z((()=>{const{phase:e}=s.Z.state;if(r.default.state.open)return!0;return(0,o.Y)("supportsFixedSizeWebView")&&!s.Z.state.shouldResizeWebView||e===s.i.hidden||e===s.i.willHide}),{debugName:"MobileBottomBarStore"})},12309:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(49085),o=n(4615);class s extends i.default{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=(0,o.ZP)();return new Promise((n=>{const i=e((e=>{n(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const n={...t.modalInfoById};return delete n[e],{modalInfoById:n}}))}internalCloseModal(e,t){this.update((n=>({modalInfoById:{...n.modalInfoById,[e]:{...n.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const r=new s},82855:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},16880:(e,t,n)=>{"use strict";n.d(t,{R:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},64878:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("dot",{viewBox:"0 0 5 4",svg:(0,o.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},25278:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("eyes",{viewBox:"0 0 72 72",svg:(0,o.jsx)("path",{d:"M17.0312 64.4375C26.25 64.4375 33.5625 52.9688 33.5625 36.4375C33.5625 19.9062 26.25 8.46875 17.0312 8.46875C7.8125 8.46875 0.5 19.9062 0.5 36.4375C0.5 52.9688 7.8125 64.4375 17.0312 64.4375ZM54.9688 64.4375C64.1875 64.4375 71.5 52.9688 71.5 36.4375C71.5 19.9062 64.1875 8.46875 54.9688 8.46875C45.75 8.46875 38.4375 19.9062 38.4375 36.4375C38.4375 52.9688 45.75 64.4375 54.9688 64.4375ZM10.0625 47.1875C15.125 47.1875 18.4688 43.6562 18.4688 38.3438C18.4688 33.0938 15.125 29.5625 10.0625 29.5625C7.6875 29.5625 5.71875 30.3125 4.25 31.6875C5.375 19.9375 10.6875 11.9375 17.0312 11.9062C24.25 11.875 30.125 22.0312 30.125 36.4375C30.125 50.7812 24.25 60.9688 17.0312 61C11.5312 61.0312 6.78125 54.9688 4.90625 45.5938C6.28125 46.625 8.03125 47.1875 10.0625 47.1875ZM47.9688 47.1875C53 47.1875 56.4062 43.6562 56.4062 38.3438C56.4062 33.0938 53 29.5625 47.9688 29.5625C45.5938 29.5625 43.5938 30.3438 42.1562 31.6875C43.2812 19.9375 48.5938 11.9375 54.9688 11.9375C62.1562 11.9062 68 22.0938 68 36.4375C68 50.7812 62.1562 60.9688 54.9688 60.9688C49.4375 61 44.6875 54.9375 42.7812 45.5938C44.1562 46.5938 45.9375 47.1875 47.9688 47.1875ZM45.5312 37.4062C44.4375 37.25 43.75 35.9688 44.0312 34.6562C44.3125 33.3125 45.3125 32.3438 46.375 32.5312C47.4688 32.75 48.0938 34.0312 47.8438 35.3125C47.5938 36.6562 46.5938 37.5938 45.5312 37.4062ZM7.625 37.4062C6.53125 37.25 5.84375 35.9688 6.09375 34.6562C6.375 33.3125 7.40625 32.3438 8.4375 32.5312C9.5625 32.7812 10.1875 34.0312 9.9375 35.3125C9.6875 36.6562 8.65625 37.5938 7.625 37.4062Z"})})},42107:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("mobileBottomBarAddPage",{viewBox:"0 0 26 26",svg:(0,o.jsx)("path",{d:"M22.5713 3.95215L23.3447 3.15722C23.71 2.78125 23.7207 2.25488 23.3555 1.90039L23.1084 1.64258C22.7754 1.30957 22.2383 1.35254 21.8945 1.69629L21.1104 2.46972L22.5713 3.95215ZM10.207 15.124L12.3018 14.2109L21.7764 4.73633L20.3047 3.28613L10.8408 12.7607L9.87402 14.7803C9.78809 14.9629 10.0029 15.21 10.207 15.124ZM5.74902 23.1162H18.3604C20.2832 23.1162 21.4111 21.999 21.4111 19.7861V7.83008L19.6816 9.55957V19.7002C19.6816 20.8174 19.0693 21.3867 18.3281 21.3867H5.77051C4.69629 21.3867 4.10547 20.8174 4.10547 19.7002V7.50781C4.10547 6.39062 4.69629 5.81054 5.77051 5.81054H15.0625L16.792 4.08105H5.74902C3.50391 4.08105 2.37598 5.19824 2.37598 7.41113V19.7861C2.37598 22.0098 3.50391 23.1162 5.74902 23.1162Z"})})},81846:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("mobileBottomBarRedo",{viewBox:"0 0 26 26",svg:(0,o.jsx)("path",{d:"M2.84863 17.498C2.84863 21.6123 5.54492 24.3516 10.3574 24.3516H12.8389C13.4297 24.3516 13.8164 23.9219 13.8164 23.3955C13.8164 22.8691 13.4297 22.4395 12.8389 22.4395H10.3682C6.70508 22.4395 4.76074 20.291 4.76074 17.3906C4.76074 14.501 6.70508 12.4814 10.3682 12.4814H17.7373L20.2617 12.374L18.2207 14.1143L15.127 17.1328C14.9551 17.3047 14.8691 17.5088 14.8691 17.7881C14.8691 18.3467 15.2451 18.7334 15.8145 18.7334C16.0508 18.7334 16.3301 18.626 16.5127 18.4326L22.8291 12.2344C23.0439 12.0303 23.1514 11.7832 23.1514 11.5254C23.1514 11.2568 23.0439 11.0098 22.8291 10.8057L16.5127 4.60742C16.3301 4.4248 16.0508 4.30664 15.8145 4.30664C15.2451 4.30664 14.8691 4.69336 14.8691 5.25195C14.8691 5.53125 14.9551 5.73535 15.127 5.90723L18.2207 8.93652L20.2617 10.6768L17.7373 10.5586H10.5293C5.62012 10.5586 2.84863 13.3945 2.84863 17.498Z"})})},57037:(e,t,n)=>{"use strict";n.d(t,{w:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("mobileBottomBarSearch",{viewBox:"0 0 26 26",svg:(0,o.jsx)("path",{d:"M11.1416 19.3779C12.9355 19.3779 14.5898 18.7979 15.9434 17.8311L21.0352 22.9229C21.2715 23.1592 21.583 23.2773 21.916 23.2773C22.6143 23.2773 23.1084 22.7402 23.1084 22.0527C23.1084 21.7305 23.001 21.4297 22.7646 21.1934L17.7051 16.123C18.7686 14.7266 19.4023 12.9971 19.4023 11.1172C19.4023 6.57324 15.6855 2.85645 11.1416 2.85645C6.59766 2.85645 2.88086 6.57324 2.88086 11.1172C2.88086 15.6611 6.59766 19.3779 11.1416 19.3779ZM11.1416 17.5947C7.59668 17.5947 4.66406 14.6621 4.66406 11.1172C4.66406 7.57227 7.59668 4.63965 11.1416 4.63965C14.6865 4.63965 17.6191 7.57227 17.6191 11.1172C17.6191 14.6621 14.6865 17.5947 11.1416 17.5947Z"})})},20162:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("mobileBottomBarUndo",{viewBox:"0 0 26 26",svg:(0,o.jsx)("path",{d:"M23.1514 17.498C23.1514 13.3945 20.3691 10.5586 15.4707 10.5586H8.25195L5.73828 10.6768L7.76855 8.93652L10.873 5.90723C11.0342 5.73535 11.1309 5.53125 11.1309 5.25195C11.1309 4.69336 10.7549 4.30664 10.1748 4.30664C9.94922 4.30664 9.66992 4.4248 9.4873 4.60742L3.1709 10.8057C2.95605 11.0098 2.84863 11.2568 2.84863 11.5254C2.84863 11.7832 2.95605 12.0303 3.1709 12.2344L9.4873 18.4326C9.66992 18.626 9.94922 18.7334 10.1748 18.7334C10.7549 18.7334 11.1309 18.3467 11.1309 17.7881C11.1309 17.5088 11.0342 17.3047 10.873 17.1328L7.76855 14.1143L5.73828 12.374L8.25195 12.4814H15.6318C19.2949 12.4814 21.2285 14.501 21.2285 17.3906C21.2285 20.291 19.2949 22.4395 15.6318 22.4395H13.1611C12.5703 22.4395 12.1836 22.8691 12.1836 23.3955C12.1836 23.9219 12.5703 24.3516 13.1611 24.3516H15.6426C20.4443 24.3516 23.1514 21.6123 23.1514 17.498Z"})})},9555:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("mobileBottomBarUpdates",{viewBox:"0 0 26 26",svg:(0,o.jsx)("path",{d:"M4.48145 20.4092H15.2988C15.2129 21.8594 14.2891 22.7832 12.9893 22.7832C11.7002 22.7832 10.7656 21.8594 10.6904 20.4092H9.01465C9.10059 22.4717 10.7227 24.2871 12.9893 24.2871C15.2666 24.2871 16.8887 22.4824 16.9746 20.4092H21.5078C22.5176 20.4092 23.1299 19.8828 23.1299 19.1094C23.1299 18.0352 22.0342 17.0684 21.1104 16.1123C20.4014 15.3711 20.208 13.8457 20.1221 12.6104C20.0469 8.37793 18.9512 5.63867 16.0938 4.60742C15.7285 3.21094 14.5791 2.09375 12.9893 2.09375C11.4102 2.09375 10.25 3.21094 9.89551 4.60742C7.03809 5.63867 5.94238 8.37793 5.86719 12.6104C5.78125 13.8457 5.58789 15.3711 4.87891 16.1123C3.94434 17.0684 2.85938 18.0352 2.85938 19.1094C2.85938 19.8828 3.46094 20.4092 4.48145 20.4092ZM4.94336 18.7871V18.6582C5.13672 18.3359 5.78125 17.7129 6.33984 17.0791C7.11328 16.2197 7.47852 14.8447 7.5752 12.7393C7.66113 8.05566 9.05762 6.55176 10.8945 6.05762C11.1631 5.99316 11.3135 5.85352 11.3242 5.58496C11.3564 4.45703 12.001 3.67285 12.9893 3.67285C13.9883 3.67285 14.6221 4.45703 14.665 5.58496C14.6758 5.85352 14.8154 5.99316 15.084 6.05762C16.9316 6.55176 18.3281 8.05566 18.4141 12.7393C18.5107 14.8447 18.876 16.2197 19.6387 17.0791C20.208 17.7129 20.8418 18.3359 21.0352 18.6582V18.7871H4.94336Z"})})},70954:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})},55449:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("onboardingUseCaseBook",{viewBox:"0 0 18 22",svg:(0,o.jsx)("path",{d:"M3.654 21.535H16.36c.518 0 .918-.4.918-.918 0-.44-.302-.762-.674-.937-1.2-.537-1.435-2.198-.214-3.36.498-.44.879-.927.879-1.914V3.596c0-2.11-1.084-3.213-3.184-3.213H3.674C1.584.383.49 1.477.49 3.596v14.756c0 2.09 1.094 3.183 3.164 3.183zM13.908 2.326c.947 0 1.416.498 1.416 1.397v10.38c0 .479-.273.743-.761.743h-9.59V2.326h8.935zM2.434 15.187V3.723c0-.81.38-1.29 1.152-1.377v12.51a3 3 0 00-1.152.332zM6.72 6.8h6.826c.38 0 .693-.313.693-.694a.696.696 0 00-.693-.693H6.72a.696.696 0 00-.694.693c0 .381.313.694.694.694zm0 2.724h5.175c.381 0 .694-.312.694-.693a.696.696 0 00-.694-.693H6.721a.696.696 0 00-.694.693c0 .38.313.693.694.693zM3.918 19.7c-1.045 0-1.592-.596-1.592-1.514 0-.888.625-1.503 1.66-1.503h9.746c.108 0 .215-.01.313-.03-.488 1.035-.43 2.159.098 3.047H3.918z",fill:"#6E6C62"})})},64530:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("settingsNotificationsAndPersonal",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M12.5361 7.54883C13.2744 7.54883 13.9033 7.09082 14.1631 6.44141H16.4258C16.7607 6.44141 17.0479 6.14746 17.0479 5.79199C17.0479 5.43652 16.7676 5.14258 16.4258 5.14258H14.1699C13.9102 4.49316 13.2744 4.03516 12.5361 4.03516C11.7979 4.03516 11.1621 4.49316 10.9023 5.14258H3.59473C3.23242 5.14258 2.95215 5.43652 2.95215 5.79199C2.95215 6.14746 3.23926 6.44141 3.59473 6.44141H10.9023C11.1621 7.09082 11.7979 7.54883 12.5361 7.54883ZM12.5361 6.62598C12.0713 6.62598 11.6953 6.25684 11.6953 5.79199C11.6953 5.31348 12.0713 4.95117 12.5361 4.95117C13.0078 4.95117 13.3701 5.31348 13.3701 5.79199C13.3701 6.25684 13.0078 6.62598 12.5361 6.62598ZM3.56738 9.40137C3.23242 9.40137 2.95215 9.68848 2.95215 10.0508C2.95215 10.3994 3.23926 10.6934 3.56738 10.6934H5.91211C6.16504 11.3428 6.80078 11.8076 7.5459 11.8076C8.27734 11.8076 8.91309 11.3428 9.17285 10.6934H16.4053C16.7607 10.6934 17.0479 10.4062 17.0479 10.0508C17.0479 9.68848 16.7676 9.40137 16.4053 9.40137H9.17285C8.91309 8.75195 8.27734 8.29395 7.5459 8.29395C6.80762 8.29395 6.17188 8.75195 5.91211 9.40137H3.56738ZM7.5459 10.8848C7.07422 10.8848 6.70508 10.5156 6.70508 10.0508C6.70508 9.57227 7.07422 9.20996 7.5459 9.20996C8.01758 9.20996 8.37988 9.57227 8.37988 10.0508C8.37988 10.5156 8.01758 10.8848 7.5459 10.8848ZM12.5361 16.0596C13.2744 16.0596 13.9102 15.6016 14.1699 14.9521H16.4258C16.7607 14.9521 17.0479 14.6582 17.0479 14.3027C17.0479 13.9404 16.7676 13.6533 16.4258 13.6533H14.1631C13.9102 13.0039 13.2744 12.5459 12.5361 12.5459C11.7979 12.5459 11.1621 13.0039 10.9023 13.6533H3.59473C3.23242 13.6533 2.95215 13.9473 2.95215 14.3027C2.95215 14.6582 3.23926 14.9521 3.59473 14.9521H10.9023C11.1621 15.6016 11.7979 16.0596 12.5361 16.0596ZM12.5361 15.1436C12.0713 15.1436 11.6953 14.7676 11.6953 14.3027C11.6953 13.8311 12.0713 13.4619 12.5361 13.4619C13.0078 13.4619 13.3701 13.8311 13.3701 14.3027C13.3701 14.7676 13.0078 15.1436 12.5361 15.1436Z"})})},79102:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});n(67294);var i=n(45238),o=n(85893);const s=(0,i.I)("sidebarUpdates",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M6.87695 10.8601C6.72038 10.8601 6.58708 10.8072 6.47705 10.7014C6.37126 10.5956 6.31836 10.4644 6.31836 10.3079C6.31836 10.1555 6.37126 10.0264 6.47705 9.92065C6.58708 9.81486 6.72038 9.76196 6.87695 9.76196H9.44775V6.24536C9.44775 6.08879 9.50065 5.9576 9.60645 5.85181C9.71224 5.74601 9.84131 5.69312 9.99365 5.69312C10.1502 5.69312 10.2814 5.74601 10.3872 5.85181C10.493 5.9576 10.5459 6.08879 10.5459 6.24536V10.3079C10.5459 10.4644 10.493 10.5956 10.3872 10.7014C10.2814 10.8072 10.1502 10.8601 9.99365 10.8601H6.87695ZM10 16.6174C9.0944 16.6174 8.2417 16.4439 7.44189 16.0969C6.64209 15.7542 5.9375 15.2781 5.32812 14.6687C4.71875 14.0593 4.24056 13.3569 3.89355 12.5613C3.55078 11.7615 3.37939 10.9067 3.37939 9.99683C3.37939 9.09123 3.55078 8.24064 3.89355 7.44507C4.24056 6.64526 4.71663 5.94067 5.32178 5.3313C5.93115 4.72192 6.63574 4.24585 7.43555 3.90308C8.23535 3.55607 9.08805 3.38257 9.99365 3.38257C10.8993 3.38257 11.752 3.55607 12.5518 3.90308C13.3558 4.24585 14.0604 4.72192 14.6655 5.3313C15.2749 5.94067 15.7531 6.64526 16.1001 7.44507C16.4471 8.24064 16.6206 9.09123 16.6206 9.99683C16.6206 10.9067 16.4471 11.7615 16.1001 12.5613C15.7531 13.3569 15.2749 14.0593 14.6655 14.6687C14.0604 15.2781 13.3579 15.7542 12.5581 16.0969C11.7583 16.4439 10.9056 16.6174 10 16.6174ZM10 15.1638C10.7152 15.1638 11.3838 15.0305 12.0059 14.7639C12.6322 14.4973 13.1823 14.1292 13.6562 13.6594C14.1302 13.1855 14.5005 12.6375 14.7671 12.0154C15.0337 11.3891 15.167 10.7162 15.167 9.99683C15.167 9.28166 15.0316 8.61304 14.7607 7.99097C14.4941 7.36466 14.1239 6.81453 13.6499 6.34058C13.1802 5.86662 12.6322 5.49634 12.0059 5.22974C11.3838 4.96313 10.7131 4.82983 9.99365 4.82983C9.27848 4.82983 8.60775 4.96313 7.98145 5.22974C7.35938 5.49634 6.81136 5.86662 6.3374 6.34058C5.86768 6.81453 5.49951 7.36466 5.23291 7.99097C4.97054 8.61304 4.83936 9.28166 4.83936 9.99683C4.83936 10.7162 4.97054 11.3891 5.23291 12.0154C5.49951 12.6375 5.86979 13.1855 6.34375 13.6594C6.81771 14.1292 7.36572 14.4973 7.98779 14.7639C8.6141 15.0305 9.28483 15.1638 10 15.1638Z"})})},18613:(e,t,n)=>{"use strict";n.r(t),n.d(t,{clearNotionLocalStorageWithNoPermission:()=>s});var i=n(46637),o=n(72128);function s(){i.Z.removeAllIfNoPermission(),o.Z.removeAllIfNoPermission()}},35717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},27117:(e,t,n)=>{var i=n(17187),o=n(35717);function s(e){if(!(this instanceof s))return new s(e);"number"==typeof e&&(e={max:e}),e||(e={}),i.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}e.exports=s,o(s,i.EventEmitter),Object.defineProperty(s.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),s.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},s.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},s.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},s.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},s.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},s.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge)||(this.remove(e),this.emit("evict",{key:e,value:t.value}),!1)},s.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},s.prototype.evict=function(){if(this.tail){var e=this.tail,t=this.remove(this.tail);this.emit("evict",{key:e,value:t})}}},20745:(e,t,n)=>{"use strict";var i=n(73935);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot}}]);