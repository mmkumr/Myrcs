"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2979],{5480:(e,t,r)=>{r.d(t,{Z:()=>oe});var i=r(67294),s=r(83355),n=r(97107),o=r(31412),a=r(50906),l=r(42858),d=r(39699),h=r(98742),c=r(36896),u=r(44604),p=r(80444),m=r(64921),g=r(31945),b=r(79954),f=r(14694),S=r(15145),x=r(1800),v=r(35840),y=r(37612),Z=r(55863),C=r(21202),j=r(75018),M=r(31299),T=r(39865),w=r(95477),B=r(43250),k=r(33929),I=r(87279),P=r(18514),R=r(74948),O=r(88632),H=r(26350),L=r(72087),U=r(68894),F=r(68785),V=r(78140),N=r(32163),E=r(43765),_=r(40721),W=r(89728),D=r(11470),A=r(77137),K=r(43145),G=r(72495),Y=r(30506),q=r(33411),X=r(26388),z=r(83182),$=r(46247),J=r(66957),Q=r(85893);const ee=(0,o.defineMessages)({filterByPlaceholder:{id:"sidebarTrash.filterBy.placeholder",defaultMessage:"Filter by page titleâ€¦"}});class te extends s.Z{constructor(){super(...arguments),this.storeTypes={requestStore:L.Z},this.renderTrashPages=(e,t)=>{const{device:r}=this.environment,s=t?t.results:[],{mainEditorCurrentBlockStore:n}=p.default.state;if(!n)return;const a=s.map((e=>H.G.createChildStore(n,{table:C.iU,id:e}))).filter((e=>e.isDefined()&&!u.Z.state.excludePages.has(e.id))).map((e=>({key:e.id,action:t=>{let{event:i}=t;if("metaKey"in i&&i.metaKey){const t=(0,x.Z)({baseUrl:w.default.domainBaseUrl,pageId:e.id,pageVisitSource:S.tY.SidebarTrash});j.navigateToExternalURL({environment:this.environment,url:t})}else j.navigateToBlock({environment:this.environment,store:e,pageVisitSource:S.tY.SidebarTrash}),c.Z.setState({...c.Z.state,open:!1});r.isMobile&&R.close()},render:t=>(0,Q.jsx)(D.Z,{...t,dontShrinkRight:!0,store:e,right:(0,Q.jsxs)("div",{style:{display:"flex"},children:[(0,Q.jsx)(X.Z,{placement:X.Z.Placement.Bottom,renderTooltip:()=>(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Restore",id:"sidebarTrash.restorePageButton.tooltip"}),render:t=>(0,Q.jsx)(W.Z,{isGray:!0,onClick:()=>this.handleRestoreClick(e),...t,children:(0,Z.s)({width:18,height:18})})}),(0,Q.jsx)(X.Z,{placement:X.Z.Placement.Bottom,renderTooltip:()=>(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Delete permanently",id:"sidebarTrash.deletePagePermanentlyButton.tooltip"}),render:t=>(0,Q.jsx)(W.Z,{isGray:!0,onClick:()=>this.handleDeleteClick(e),...t,children:(0,y.y)({width:18,height:18})})})]})})})));return 0===a.length?(0,Q.jsx)(G.Z,{children:r.isMobile?(0,Q.jsx)(E.Z,{title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"No matches found.",id:"sidebarTrash.mobileFilterBy.noMatchesPrompt"})}):(0,Q.jsx)("div",{style:{fontSize:14,color:this.theme.mediumTextColor,textAlign:"center"},children:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"No matches found.",id:"sidebarTrash.filterBy.noMatchesPrompt"})})}):(0,Q.jsxs)(i.Fragment,{children:[(0,Q.jsx)(N.Z,{type:N.i.Vertical,initialFocus:void 0,sections:[{key:0,items:a,render:e=>(0,Q.jsx)(G.Z,{...e})}]}),(0,Q.jsx)(q.Z,{show:this.stores.requestStore.state.loading,showDelay:500,showHold:200,render:e=>{if(e)return(0,Q.jsx)("div",{style:{height:44,display:"flex",flex:1,alignItems:"center",justifyContent:"center"},children:(0,Q.jsx)(F.Z,{})})}}),(0,Q.jsx)(K.Z,{onChange:this.handleScrollOffsetChange})]})},this.handleSwipeLeft=()=>{const e=te.tabs.indexOf(u.Z.state.currentTab)+1,t=te.tabs[e];void 0!==t&&this.changeTab(t)},this.handleSwipeRight=()=>{const e=te.tabs.indexOf(u.Z.state.currentTab)-1,t=te.tabs[e];void 0!==t&&this.changeTab(t)},this.handleTabChange=e=>{const t=te.tabs[e];this.changeTab(t)},this.handleRestoreClick=e=>{const{currentSpaceStore:t}=p.default.state;t&&T.DV({environment:this.environment,block:e,spaceId:e.pointer.spaceId||t.id})},this.handleDeleteClick=e=>{T.Rn({environment:this.environment,blocks:[e]})},this.handleSearchInputChange=e=>{u.Z.setState({...u.Z.state,filter:e.target.value,limit:u.Z.startLimit})},this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{c.Z.setState({...c.Z.state,open:!1})};null!=e&&e.supportsNativeHomeOnPhone()?j.navigateToHomeTab(this.environment,t):t()},this.handleScrollOffsetChange=e=>{const{requestStore:t}=this.stores,{ready:r,loading:i,result:s}=t.state,n=s;e<=u.Z.loadMoreOffset&&n&&r&&!i&&!n.endOfResultsReached&&u.Z.setState({...u.Z.state,limit:u.Z.state.limit+u.Z.limitIncrement})},this.performSearchRequest=async e=>{const{currentSpaceStore:t,mainEditorCurrentBlockStore:r,currentUserStore:i}=p.default.state;if(!t||!r||!i)return;const{limit:s,filter:n,currentTab:o}=u.Z.state;let a,l;if("in_current_page"===o)if(r.isCollectionView()){if(!r.isDefined())return;const e=r.getCollectionPointer();if(!e)return;l=e.id}else l=r.id;else"last_edited_by_me"===o&&(a=i.id);return await M.bI({environment:this.environment,query:n,limit:s,ancestorId:l,spaceId:t.id,editedById:a})}}willMount(e){super.willMount(e),u.Z.setState({...u.Z.state,limit:u.Z.startLimit,excludePages:new Set})}willUnmount(){u.Z.setState({...u.Z.state,filter:""})}renderComponent(){const{mobileNative:e}=this.environment;return null!=e&&e.supportsNativeHomeOnPhone()?this.renderNativeHomeEnabledLayout():this.renderLayout()}renderLayout(){const{device:e}=this.environment;let t;return t=e.isMobile?{menuType:I.og.Modal,title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:(0,Q.jsx)(se,{}),right:(0,Q.jsx)(_.DoneMenuText,{}),onClickRight:this.handleClose,onCancel:this.handleClose,header:this.renderHeaderWithTabs()}:{menuType:I.og.Popup,height:"50vh",width:414,header:this.renderHeaderWithTabs(),footer:(0,Q.jsx)(ie,{})},(0,Q.jsx)(Y.Z,{onSwipeLeft:this.handleSwipeLeft,onSwipeRight:this.handleSwipeRight,render:e=>(0,Q.jsx)(V.Z,{...t,...e,className:B.TYv,children:this.renderPages()})})}renderNativeHomeEnabledLayout(){const e={menuType:I.og.Modal,title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:(0,Q.jsx)(se,{}),right:(0,Q.jsx)(_.DoneMenuText,{}),onClickRight:this.handleClose,onCancel:this.handleClose,header:this.renderSearchInput()};return(0,Q.jsx)(V.Z,{...e,className:B.TYv,children:this.renderPages()})}renderHeaderWithTabs(){const{device:e}=this.environment,t=u.Z.state.currentTab,r=te.tabs.indexOf(t);return(0,Q.jsxs)(i.Fragment,{children:[(0,Q.jsx)(J.Z,{tabs:[(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"All pages",id:"sidebarTrash.allPages.tabHeader"},"allPages"),(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"In current page",id:"sidebarTrash.inCurrentPage.tabHeader"},"currentPage"),(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Last edited by me",id:"sidebarTrash.lastEditedByMe.tabHeader"},"lastEditedByMe")],selectedIndex:r,onChange:this.handleTabChange}),(0,Q.jsx)("div",{style:{margin:e.isMobile?0:"10px 0"},children:this.renderSearchInput()})]})}renderSearchInput(){const{device:e}=this.environment;return(0,Q.jsx)(U.ZP,{left:(0,Q.jsx)(q.Z,{show:this.stores.requestStore.state.loading,showDelay:500,showHold:200,render:e=>e?(0,Q.jsx)(F.Z,{style:this.getSearchIconStyle()}):(0,v.R)(this.getSearchIconStyle())}),style:{...e.isAndroid&&{borderBottom:"none"}},showClearButton:!0,placeholder:k.default.formatMessage(ee.filterByPlaceholder),focus:!e.isMobile||void 0,value:u.Z.state.filter,onChange:this.handleSearchInputChange})}renderPages(){if(!O.Z.state.online)return(0,Q.jsx)(G.Z,{children:(0,Q.jsx)(E.Z,{title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Please go online to view the Trash.",id:"sidebarTrash.goOnline.prompt"})})});{const{filter:e,limit:t,currentTab:r}=u.Z.state,i=`${e}:${t}${r}`;return(0,Q.jsx)(A.Z,{requestStore:this.stores.requestStore,request:i,performRequest:this.performSearchRequest,render:this.renderTrashPages,debounce:M.vp})}}changeTab(e){u.Z.setState({...u.Z.state,currentTab:e,limit:u.Z.startLimit}),this.stores.requestStore.setState({...this.stores.requestStore.state,result:null}),a.vqh(this.environment,{tab:e})}getSearchIconStyle(){return{width:14,height:14,flexGrow:0,flexShrink:0,color:this.theme.regularIconColor}}}te.displayName="SidebarTrash",te.tabs=["all_pages","in_current_page","last_edited_by_me"];const re=te;function ie(){return(0,Q.jsx)(G.Z,{topBorder:!0,disableDesktopPadding:!0,children:(0,Q.jsx)(z.Z,{title:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Learn about deleting and restoring pages",id:"sidebarTrash.learnMore.prompt"}),href:(0,P.UY)("guides.trash"),analyticsFrom:"trash"})})}function se(){return(0,Q.jsx)($.Z,{href:(0,P.UY)("guides.trash"),analyticsFrom:"trash"})}class ne extends s.Z{constructor(){super(...arguments),this.renderOrigin=e=>{const{onClick:t,...r}=(0,h.Z)(e,{onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave});return(0,Q.jsx)(b.Z,{store:this.clonedStore,canDropOnto:!0,onSelectableDrop:this.handleDrop,analyticsName:"sidebar_trash",shouldShowDropZone:!0,children:(0,Q.jsx)(m.Z,{...r,style:this.props.buttonStyle,onClick:t||this.handleClick,mobileFeedback:this.props.isMobile,children:(0,Q.jsx)(f.Z,{left:this.renderIcon(),style:{...c.Z.state.open&&{background:this.theme.buttonHoveredBackground}},disableMobileBorder:!0,children:(0,Q.jsx)(o.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})})},this.renderSidebarTrash=()=>{const{currentSpaceStore:e}=p.default.state;if(e)return(0,Q.jsx)(re,{spaceStore:e})},this.handleClick=e=>{u.Z.setState({...u.Z.state,currentTab:"all_pages"}),a.YFJ(this.environment)},this.handleDrop=e=>{const{droppedStores:t,duplicate:r}=e;r||d.createAndCommit({userAction:"SidebarTrashButton.handleDrop",environment:this.environment,perform:e=>{l.Cl({environment:this.environment,blocks:t,transaction:e})}})}}willMount(e){super.willMount(e),this.clonedStore=e.store.clone()}renderComponent(){const{device:e,mobileNative:t}=this.environment,r=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return(0,Q.jsx)(g.ZP,{popupType:e.isMobile?g.Z4.SlideUp:g.Z4.Popup,hidesMobileNativeBottomBar:r,preventSlideUpTransition:r,buttonPopupStore:c.Z,alignmentToOrigin:g.vR.Start,placementToOrigin:g.pO.Right,originGap:0,onClick:this.handleClick,isFullWidthOnMobile:!0,render:this.renderSidebarTrash,preventScaleTransition:!0,renderOrigin:this.renderOrigin})}renderIcon(){const{device:e}=this.environment,t=this.theme.mediumIconColor;return e.isMobile?(0,n.w)({fill:t,height:16}):(0,n.w)({fill:t,width:14})}}ne.displayName="SidebarTrashButton";const oe=ne},73499:(e,t,r)=>{r(67294),r(480),r(24405),r(43906),r(31412),r(75018),r(95477),r(4023),r(64921),r(26388),r(14694),r(85893)},58925:(e,t,r)=>{r.d(t,{Z:()=>k});r(67294);var i=r(83355),s=r(9555),n=r(79102),o=r(82990),a=r(31412),l=r(19719),d=r(17659),h=r(75018),c=r(98742),u=r(50659),p=r(18514),m=r(51811),g=r(77907),b=r(4023),f=r(5162),S=r(62820),x=r(4761),v=r(64921),y=r(31945),Z=r(58261),C=r(26388),j=r(39849),M=r(92955),T=r(14694),w=r(85893);class B extends i.Z{constructor(){super(...arguments),this.closeMenu=()=>{(0,f.Y)("supportsNativeInbox")&&p.__(this.environment)&&p.NW(this.environment)?h.back(this.environment):(this.handleCloseUpdatesPopup(),S.Z.setState({...S.Z.state,open:!1}))},this.handleDismiss=()=>{this.handleCloseUpdatesPopup()},this.handleClick=()=>{x.ZP.endSession(),d.G7({environment:this.environment,newTab:"mentions",shouldTrack:!0})},this.handleCloseUpdatesPopup=()=>{l.nI(this.environment),d.G7({environment:this.environment,newTab:"mentions",shouldTrack:!1})},this.showUpdatesButtonWithBoldText=()=>{if(this.props.format!==m.EX.Sidebar)return!1;return S.Z.state.open}}willUnmount(){this.handleCloseUpdatesPopup()}renderComponent(){const{device:e,mobileNative:t}=this.environment;if(this.props.format===m.EX.RenderAsPage)return(0,w.jsx)("div",{style:{background:this.theme.popoverBackground},children:(0,w.jsx)(g.LazyUpdatesPopup,{format:this.props.format,onClose:this.closeMenu})});const r=(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Updates for all pages in this workspace",id:"updatesButton.tooltip"});return(0,w.jsx)(C.Z,{renderTooltip:()=>(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{children:r}),(0,w.jsx)(Z.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleAllUpdates"})]}),originGap:6,placement:b.u.Right,render:r=>(0,w.jsx)(y.ZP,{popupType:e.isMobile?y.Z4.SlideUp:y.Z4.Popup,alignmentToOrigin:b.v.Start,placementToOrigin:b.u.Right,onClick:this.handleClick,originGap:0,style:{...!e.isMobile&&{width:500,overflow:"hidden"}},isWideTabletWidth:!0,render:()=>(0,w.jsx)(g.LazyUpdatesPopup,{format:this.props.format,onClose:this.closeMenu}),onClose:this.handleDismiss,isFullWidthOnMobile:!0,preventScaleTransition:!0,preventSlideUpTransition:(null==t?void 0:t.supportsNativeHomeOnPhone())||!1,buttonPopupStore:S.Z,renderOrigin:e=>this.renderButton(r,e)})})}renderButton(e,t){const r=this.props.format,i=S.Z.state.open,l=d.aY(),h=j.Z.Color.Red;if(r===m.EX.MobileBottomBarPhone)return(0,w.jsx)(v.Z,{style:B.mobileBottomBarPhoneButtonStyle,mobileFeedback:!0,...t,children:(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,s.Y)({width:26,fill:this.theme.regularTextColor}),(0,w.jsx)(M.Z,{type:"currentSpace",color:h,style:{position:"absolute",top:-3,right:l<99?-5:-8}})]})});if(r===m.EX.MobileBottomBarTablet)return(0,w.jsx)(v.Z,{style:B.mobileBottomBarTabletButtonStyle,mobileFeedback:!0,...t,children:(0,w.jsxs)("div",{style:{position:"relative"},children:[(0,s.Y)({width:26,fill:this.theme.regularTextColor}),(0,w.jsx)(M.Z,{type:"currentSpace",color:h,style:{position:"absolute",top:-3,right:l<99?-5:-8}})]})});if(r===m.EX.TopbarMobile)return(0,w.jsxs)(v.Z,{style:{...B.actionButtonStyle,marginLeft:2,marginRight:2},mobileFeedback:!0,...t,children:[(0,s.Y)({width:26}),(0,w.jsx)(M.Z,{type:"currentSpace",color:h,style:{position:"absolute",top:8,right:0}})]});if(r===m.EX.SidebarMobile)return(0,w.jsxs)(v.Z,{style:B.actionButtonStyle,mobileFeedback:!0,...t,children:[(0,s.Y)({width:26}),(0,w.jsx)(M.Z,{type:"currentSpace",color:h,style:{position:"absolute",top:8,right:0}})]});if(r===m.EX.Sidebar){const r=this.showUpdatesButtonWithBoldText(),s=(0,w.jsx)(a.FormattedMessage,{defaultMessage:"Updates",id:"updatesButton.allUpdates.sidebarButton"}),l=(0,n.Y)({fill:r?this.theme.regularIconColor:this.theme.mediumIconColor,width:20});return(0,w.jsx)(v.Z,{style:{...r&&{fontWeight:o.Z.fontWeight.medium,color:this.theme.regularTextColor},...(0,u.G$)({isMobile:!1})},...(0,c.Z)(e,t),children:(0,w.jsx)(T.Z,{left:(0,w.jsx)("div",{style:{color:r?this.theme.regularTextColor:"inherit"},children:l}),right:(0,w.jsx)(M.Z,{type:"currentSpace",color:h,style:{marginBottom:2,marginLeft:6}}),style:{background:i?this.theme.buttonHoveredBackground:"none"},children:s})})}}}B.displayName="UpdatesButton",B.Format=m.EX,B.actionButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,height:"100%",minWidth:34,position:"relative"},B.mobileBottomBarPhoneButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",flex:1},B.mobileBottomBarTabletButtonStyle={display:"flex",alignItems:"center",justifyContent:"center",width:62,flex:"none"};const k=B},27556:(e,t,r)=>{r.d(t,{Ke:()=>i.LazyOutlinerViewAllButton,k4:()=>s,uO:()=>n,vJ:()=>i.LazyOutlinerViewAllPopup});var i=r(77907);const s=30,n=20},51811:(e,t,r)=>{r.d(t,{EX:()=>i,HB:()=>l,IS:()=>d,Tj:()=>a,yW:()=>o});let i=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.MobileBottomBarPhone=2]="MobileBottomBarPhone",e[e.MobileBottomBarTablet=3]="MobileBottomBarTablet",e[e.TopbarMobile=4]="TopbarMobile",e[e.RenderAsPage=5]="RenderAsPage",e}({});const s=new Map,n=new Map;function o(e,t){s.set(h(e),t)}function a(e){return s.get(h(e))}function l(e,t){n.set(c(e),t)}function d(e){return n.get(c(e))??[]}function h(e){return Object.keys(e).sort().map((t=>{const r=e[t];return JSON.stringify(r)})).join("-")}function c(e){return Object.keys(e).sort().map((t=>{const r=e[t];return JSON.stringify(r)})).join("-")}},47765:(e,t,r)=>{r.d(t,{Z:()=>M});var i=r(67294),s=r(480),n=r(86628),o=r(24405),a=r(15145),l=r(56996),d=r(82990),h=r(31412),c=r(58261),u=r(84076),p=r(74420),m=r(26388),g=r(14694),b=r(50659),f=r(39699),S=r(37181),x=r(80444);var v=r(30806),y=r(94841),Z=r(4023),C=r(85893);function j(e){let{}=e;window.__c={n:"SidebarPersonalHomeButton"};const t=(0,s.O7)(),{isMobile:r}=(0,s.Fy)(),j=(0,n.VK)((()=>{const{currentSpaceViewStore:e}=x.default.state;if(e)return y.Al(e)}),[]),M=(0,n.VK)((()=>{const e=x.default.state.mainEditorCurrentBlockStore;return!!e&&y.Kj(e.id)}),[]),T=(0,n.VK)((()=>y.pr(t)),[t]),w=(0,i.useCallback)((()=>{!function(e){const{currentUserSettingsStore:t}=x.default.state;t&&f.createAndCommit({userAction:"SidebarPersonalHomeButton.markAsSeen",environment:e,perform:e=>{S.d2({userSettingsStore:t,transaction:e,data:{seen_personal_home:!0}})}})}(t),(0,v.$X)({environment:t,from:"sidebar"})}),[t]),B=(0,o.yK)((e=>({tooltip:{width:200},shortcutLabel:{color:e.mediumInvertedTextColor},sidebarItem:{...(0,b.G$)({isMobile:r}),...M&&{fontWeight:d.Z.fontWeight.semibold,background:e.sidebarItemSelectedBackground,color:e.regularTextColor}},icon:{fill:M?e.regularTextColor:e.mediumIconColor,width:20,height:20}})),[r,M]),k=(0,n.VK)((()=>{var e;return null==j||null===(e=j.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:null==j?void 0:j.getRecordModel,pageVisitSource:a.tY.SidebarHome})}),[j]);return(0,C.jsx)(m.Z,{renderTooltip:()=>(0,C.jsxs)("div",{style:B.tooltip,children:[(0,C.jsx)("div",{children:(0,C.jsx)(h.FormattedMessage,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"})}),(0,C.jsx)(c.Z,{style:B.shortcutLabel,name:"openHome"})]}),originGap:6,textWrap:!0,placement:Z.u.Right,render:e=>(0,C.jsx)(u.Z,{...e,style:B.sidebarItem,href:k,onClick:w,children:(0,C.jsx)(g.Z,{left:(0,l.z)(B.icon),right:T&&(0,C.jsx)(p.Z,{}),disableMobileBorder:!0,children:(0,C.jsx)(h.FormattedMessage,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}const M=i.memo(j)},52344:(e,t,r)=>{r.d(t,{u:()=>b});var i=r(67294),s=r(480),n=r(86628),o=r(72126),a=r(69246),l=r(150),d=r(79131),h=r(28020);var c=r(80444),u=r(73292),p=r(77999),m=r(29165),g=r(85893);function b(e){let{teams:t,reorderable:r,onNavigate:b,id:f}=e;window.__c={n:"TeamOutlinerList"};const S=(0,s.O7)(),x=function(){const e=(0,s.O7)();return(0,n.VK)((()=>(0,h.k_)(e).state),[e])}(),{currentSpaceViewStore:v,currentSpaceStore:y}=(0,n.VK)((()=>{const{currentSpaceViewStore:e,currentSpaceStore:t}=c.default.state;return{currentSpaceViewStore:e,currentSpaceStore:t}}),[]),Z=(0,n.VK)((()=>t.map((e=>e.id))),[t]),C=(0,n.VK)((()=>o.KX(t,"id")),[t]),[j,M]=(0,i.useState)({});(0,i.useEffect)((()=>{(null==y?void 0:y.id)&&M((e=>u.oO({teamIds:Z,oldState:e,spaceId:y.id,userId:S.currentUser.id})))}),[null==y?void 0:y.id,S.currentUser.id,Z]);const T=(0,n.VK)((()=>{const e=p.default.state.initialTeamStoreId;return Z.find((t=>t===e))??o.Ps(Z)}),[Z]);return v&&x?(0,g.jsx)(d.ZP,{id:f,direction:"vertical",keys:Z,disabled:!r,renderKey:e=>j[e]&&(0,g.jsx)(m.O,{shouldPersistToggleState:!0,teamStore:C[e],sidebarState:x,isLastTeam:o.Z$(Z)===e,teamOutlinerType:a.kg,customToggleStore:j[e],onNavigate:b,sidebarTourStep:T===e?"prebuilt_templates":void 0},e),onDrop:(e,t)=>{l.Ct({environment:S,currentSpaceViewStore:v,orderedTeamIds:e,userAction:"SidebarOutliner.SidebarOutliner",isExplicitUserAction:!0,dropArgs:t})}}):(0,g.jsx)(g.Fragment,{})}},22709:(e,t,r)=>{r.d(t,{_S:()=>F,g6:()=>V,ZP:()=>N});r(67294);var i=r(83355),s=r(49085),n=r(80503),o=r(31412),a=r(14720),l=r(50906),d=r(65452),h=r(64921),c=r(31945),u=r(39849),p=r(92955),m=r(37240),g=r(82990),b=r(38755),f=r(56496),S=r(31278),x=r(14694),v=r(24405),y=r(46783),Z=r(85893);const C=function(e){window.__c={n:"SidebarPlaceholderItem"};const{showIcon:t}=e,r=(0,v.Fg)(),i=(0,v.yK)((e=>{const r=Math.ceil(60),i=Math.floor(85),s=`${Math.floor(Math.random()*(i-r+1))+r}%`;return{placeholderPageStyle:{height:28,display:"flex",alignItems:"center",width:"100%",padding:t?"0 15px":"0 0px"},placeholderTextWrapStyle:{flexGrow:1,marginLeft:t?10:0,height:28,display:"flex",alignItems:"center"},placeholderTextStyle:{height:4,background:e.buttonHoveredBackground,width:s}}}),[t]);return(0,Z.jsxs)("div",{style:i.placeholderPageStyle,children:[t&&(0,y.w)({width:16,height:16,fill:r.buttonHoveredBackground}),(0,Z.jsx)("div",{style:i.placeholderTextWrapStyle,children:(0,Z.jsx)("div",{style:i.placeholderTextStyle})})]})};class j extends i.Z{willMountOrUpdate(){"store"===this.props.type&&this.props.spaceStore.getValue()}renderComponent(){const{device:e}=this.environment,{props:t}=this,{activeUserEmailAddress:r,isMobile:i,style:s,showExpand:n}=t,o="store"===t.type?(0,b.rn)(this.environment,t.spaceStore):t.spaceName;return(0,Z.jsxs)(x.Z,{style:{overflow:"hidden",...i&&{fontSize:14,padding:0,marginRight:12},...!i&&{paddingLeft:10,paddingRight:10},...s||{}},left:o?this.renderRecordIcon(o,"store"===t.type?void 0:t.spaceIcon,i,"store"===t.type?t.spaceStore:void 0):(0,Z.jsx)(T,{}),disableMobileBorder:!0,children:[!o&&(0,Z.jsx)(w,{}),o&&(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:r?"space-between":"start"},className:"notranslate",children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginRight:6,marginTop:e.isAndroid?3:0,...j.truncateStyle},children:[(0,Z.jsx)("div",{style:{color:this.theme.regularTextColor,fontWeight:g.Z.fontWeight.medium,...j.truncateStyle},children:o}),(0,Z.jsx)("div",{style:{color:this.theme.mediumTextColor,fontSize:11,lineHeight:"12px",fontWeight:g.Z.fontWeight.regular,...j.truncateStyle},children:r})]}),n&&(0,Z.jsx)("div",{style:{flexGrow:0,flexShrink:0,width:10,height:10,fill:this.theme.mediumIconColor},children:(0,m.s)()})]})]})}renderRecordIcon(e,t,r,i){const s=i?(0,b.Wd)(this.environment,i):t?{icon:t,pointer:{table:"space",id:"undefined"}}:void 0,n=i?(0,b.rn)(this.environment,i):e;return(0,Z.jsx)(S.Z,{disabled:!0,icon:s,isEmptyPage:!1,title:n,size:r?24:22,style:{marginTop:1,color:this.theme.regularTextColor,fontWeight:g.Z.fontWeight.medium}})}}j.displayName="SidebarSpaceName",j.truncateStyle={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};const M=j;function T(){return(0,Z.jsx)("div",{style:{opacity:.25},children:(0,Z.jsx)(f.Z,{size:20,title:void 0})})}function w(){return(0,Z.jsx)(C,{showIcon:!1})}var B=r(29538),k=r(43250),I=r(80444),P=r(30278),R=r(85974),O=r(28517),H=r(19034),L=r(97852),U=r(78861);let F=function(e){return e[e.Regular=0]="Regular",e[e.DesktopMac=1]="DesktopMac",e[e.Mobile=2]="Mobile",e}({});class V extends i.Z{constructor(){super(...arguments),this.sidebarSwitcherIsHovered=s.default.createValue(!1),this.storeTypes={loginStore:R.Z,loginPermissionsStore:P.Z},this.height={[F.Regular]:n.Aj-8,[F.DesktopMac]:n.br-8,[F.Mobile]:"auto"},this.handleClick=()=>{L.Z.setState({...L.Z.state,open:!0}),l.air(this.environment),U.Z.getUserIds(this.environment).forEach((e=>{U.Z.getSpaceViewStores(this.environment,e).forEach((t=>{const r=t.getSpaceId();r&&(d.h({environment:this.environment,spaceId:r,userId:e}),O.I({environment:this.environment,spaceId:r,userId:e}))}))}))}}renderComponent(){const{device:e}=this.environment,{shouldShowUnexpandButton:t}=this.props,{currentSpaceStore:r,currentUserStore:i}=I.default.state,s=U.Z.getUserIds(this.environment);if(!r||!i)return;const n=s.length>1?i.getEmail():void 0,o=H.Z.getUnreadMentionsCountForOtherSpaces(),l=Boolean(this.props.disabled),d=this.stores;return(0,Z.jsx)(c.ZP,{popupType:e.isMobile?c.Z4.SlideUp:c.Z4.Popup,buttonPopupStore:L.Z,renderOrigin:()=>{return(0,Z.jsxs)(h.Z,{style:{...V.buttonStyle,height:this.height[this.props.format],marginLeft:4,marginRight:4,marginTop:4,width:"calc(100% - 8px)",borderRadius:4,marginBottom:n?e.isMobile?0:8:0,padding:0,...this.props.buttonStyle},mobileFeedback:e.isMobile,onClick:this.handleClick,disabled:l,className:k.rli,hovered:this.sidebarSwitcherIsHovered.state,ignoreLocalHoverState:!0,onMouseEnter:()=>this.sidebarSwitcherIsHovered.setState(!0),onMouseLeave:()=>this.sidebarSwitcherIsHovered.setState(!1),children:[(0,Z.jsx)(M,{isMobile:(i=this.props.format,i===F.Mobile),spaceStore:r,activeUserEmailAddress:n,showExpand:!l,type:"store",style:{marginLeft:0}}),(0,Z.jsxs)("div",{className:k.JiD,style:{display:"flex",alignItems:"center",height:"100%",marginLeft:"auto",marginRight:o?0:12},children:[t&&(0,Z.jsx)(B.V,{}),(0,Z.jsx)(p.Z,{type:"otherSpaces",color:u.Z.Color.Red,style:{marginLeft:10,marginRight:10}})]})]});var i},originGap:0,disableMutationObserver:!0,forceInitialInbound:!0,style:e.isMobile?{}:{width:320,overflow:"hidden"},render:e=>(0,Z.jsx)(a.Rv,{parent:e,redirectURL:this.props.redirectURL,disableLoginLink:this.props.disableLoginLink,onSpaceClick:this.props.onSpaceClick,loginStore:d.loginStore,loginPermissionsStore:d.loginPermissionsStore})})}}V.displayName="SidebarSwitcherMultiAccount",V.Format=F,V.buttonStyle={display:"flex",alignItems:"center",minWidth:0,height:"100%",width:"100%"};const N=(0,o.injectIntl)(V)},30278:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(49085);class s extends i.default{getInitialState(){return{contacts:!1}}}const n=s},43906:(e,t,r)=>{r(67294);var i=r(45238),s=r(85893);(0,i.I)("gift",{viewBox:"0 0 14 14",svg:(0,s.jsx)("path",{d:"M7.95789 3.54464C8.00247 3.30845 8.16614 2.97748 8.48043 2.66319C8.84104 2.30258 9.38851 1.92751 9.87755 1.74943C10.1088 1.66523 10.237 1.65112 10.2972 1.65266C10.6256 1.99575 10.8618 2.39413 10.9488 2.70912C10.9917 2.86422 10.9849 2.94927 10.9797 2.97718L10.9792 2.98003C10.9777 2.9894 10.9767 2.99539 10.9553 3.01675C10.5461 3.42596 10.0755 3.57832 9.4321 3.60836C9.09223 3.62423 8.7328 3.60413 8.31688 3.57258C8.25969 3.56824 8.20022 3.56356 8.13892 3.55874L7.95789 3.54464ZM6.97082 2.14136C7.10128 1.95114 7.25234 1.76996 7.41977 1.60253C8.39608 0.626221 10.3325 -0.434439 11.3089 0.541871C12.2852 1.51818 12.9923 3.10109 12.016 4.07741C11.4993 4.59409 10.9264 4.86563 10.3362 4.99913H14V7.99913H13H8V5.05253C7.65076 5.02523 7.31443 4.99913 7.00006 4.99913C6.99017 4.98924 6.98043 4.9793 6.97082 4.96932C6.96122 4.9793 6.95148 4.98924 6.94159 4.99913C6.64476 4.99913 6.32836 5.0224 6 5.04797V7.99913H1H0V4.99913H3.60548C3.01529 4.86563 2.44237 4.59409 1.92569 4.07741C0.949377 3.10109 1.65648 1.51818 2.6328 0.541871C3.60911 -0.434439 5.54557 0.626221 6.52188 1.60253C6.68931 1.76996 6.84037 1.95114 6.97082 2.14136ZM10.3411 1.66021C10.3418 1.65908 10.3348 1.65588 10.3179 1.65399C10.3319 1.6604 10.3404 1.66134 10.3411 1.66021ZM1 8.99913V13.9991H6V8.99913H1ZM8 8.99913V13.9991H13V8.99913H8ZM5.46122 2.66319C5.77551 2.97748 5.93918 3.30845 5.98376 3.54464L5.80273 3.55874C5.74143 3.56356 5.68196 3.56824 5.62477 3.57258C5.20886 3.60413 4.84942 3.62423 4.50955 3.60836C3.86611 3.57832 3.39557 3.42596 2.98635 3.01675C2.965 2.99539 2.96399 2.9894 2.96241 2.98003L2.96191 2.97718C2.95674 2.94927 2.94998 2.86422 2.99284 2.70912C3.07987 2.39413 3.31602 1.99575 3.64441 1.65266C3.70469 1.65112 3.83287 1.66523 4.0641 1.74943C4.55314 1.92751 5.10061 2.30258 5.46122 2.66319ZM3.60056 1.66021C3.59983 1.65908 3.60685 1.65588 3.6238 1.65399C3.60977 1.6604 3.60129 1.66134 3.60056 1.66021Z"})})}}]);