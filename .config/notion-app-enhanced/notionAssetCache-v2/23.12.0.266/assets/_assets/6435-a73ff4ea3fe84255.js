"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6435],{32603:(e,t,o)=>{o.r(t),o.d(t,{measureSubMetricsInBrowserProfiler:()=>c,setInitialRenderCompleted:()=>d,setSubMetric:()=>a,setSubMetricsAtRenderCallback:()=>s,updateMetricData:()=>l});var n=o(5809),i=o(83055),r=o(77144);function s(e){const{mainStartTime:t,prefetchInitiatedTime:o,renderStartTime:i,renderEndTime:s,mainImportEndTime:a}=e,l=(0,n.$)();if(!l)return;const d={app_start_to_main_start:{startTime:l,endTime:t},main_start_to_prefetch_initiated:{startTime:t,endTime:o},prefetch_initiated_to_render_start:{startTime:o,endTime:i},render_start_to_render_end:{startTime:i,endTime:s},import_start:{startTime:0,endTime:t},import_start_to_prefetch_stage_completion:{startTime:t,endTime:o},main_import:{startTime:t,endTime:a},react_render:{startTime:i,endTime:s}};r.Z.state.subMetrics.update((e=>({...e,...d})))}function a(e){const{name:t,endTime:o}=e,n=e.startTime(r.Z.state.subMetrics.state);n&&r.Z.state.subMetrics.update((e=>({...e,[t]:{startTime:n,endTime:o}})))}function l(e){r.Z.state.metricData.update((t=>({...t,...e})))}function d(){r.Z.update((e=>({...e,initialRenderCompleted:!0})))}function c(){for(const[t,o]of Object.entries(i.D9())){if(!o)break;try{window.performance.measure(t,{start:o.startTime,end:o.endTime})}catch(e){}}}},61916:(e,t,o)=>{o.d(t,{YT:()=>d,kQ:()=>l,nI:()=>c,vn:()=>s});var n=o(70203),i=o(96802),r=o(39699);function s(e){if(e){const t=(0,n.QaF)(e.getValue());return Boolean(t)}return!1}function a(e){if(e){const t=e.getSettings();if(t&&t.hidden_collection_descriptions)return t.hidden_collection_descriptions}return[]}function l(e){const{environment:t,store:o,value:n}=e;r.createAndCommit({userAction:"PageViewBlock.setCollectionViewPageDescription",environment:t,perform:e=>{i.FH({stores:[o],update:{hide_collection_view_page_description:n},transaction:e})}})}function d(e){const{environment:t,pageId:o,isExpanded:n,store:i,userSettingsStore:l,descriptionStore:d}=e,c=i.state.isExpanded;i.setState({isExpanded:n});s(d)&&l&&c!==n&&r.createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,perform:e=>{if(n){const t={pointer:{table:"user_settings",id:l.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:o}};r.applyOperation({store:l,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:l.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:o}};r.applyOperation({store:l,transaction:e,operation:t});let n=a(l);for(;n.length>1e3;){const t=n[0],o={pointer:{table:"user_settings",id:l.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};r.applyOperation({store:l,transaction:e,operation:o}),n=a(l)}}}})}function c(e){const{pageId:t,store:o,userSettingsStore:n,descriptionHasText:i}=e;let r=i;a(n).includes(t)&&(r=!1),o.setState({isExpanded:r})}},59389:(e,t,o)=>{o.d(t,{T_:()=>y,Ud:()=>f,eV:()=>m});var n=o(1302),i=o(45953),r=o(42),s=o(58202),a=o(50906),l=o(41433),d=o(96802),c=o(94419),p=o(9953),u=o(24677),h=o(98104),g=o(68422);function m(e){const{environment:t,store:o,transaction:i,preventTextSelection:r}=e,s=o.useCrdt(),l=p.j4({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:i,spaceId:o.pointer.spaceId,useCrdt:s}),d=c.R3({parent:o.getContentStore(),append:l,transaction:i}).child;return r||n.default.afterNextFlush((()=>{u.eP({environment:t,store:d}),h.N_({store:d.getBlockTitleStore()})})),a.W2j(t,{from:"template_picker",type:"text"}),d}function y(e){const{environment:t,store:o,transaction:n}=e;d.is({store:o,transaction:n}),m({environment:t,store:o,transaction:n})}function f(e){var t;const{environment:o,store:d,viewType:c,transaction:u}=e,h=null===(t=d.getBlockTitleStore())||void 0===t?void 0:t.getValue();l.ZI({environment:o,sourceBlockId:"root",targetBlockPointer:d.pointer,sourceBlockSubtree:(0,i.R3)((0,r.iC)({isInline:!1,viewType:c})),targetRecordCache:d.inMemoryRecordCache,transaction:u,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:d.useCrdt()}),g.vs({environment:o,block:d,blockType:"collection_view_page",transaction:u}),h&&p.sO({store:d.getBlockTitleStore(),value:h,transaction:u}),n.default.afterNextFlush((()=>{const e=s.R.findCollectionViewBlockFromStore(d);null==e||e.handleCreated()})),a.W2j(o,{from:"template_picker",type:"collection_view_page"})}},19977:(e,t,o)=>{o.d(t,{Z:()=>d});o(67294);var n=o(86628),i=o(68709),r=o(77907),s=o(82136),a=o(92650),l=o(85893);function d(e){window.__c={n:"MarginComments"};const{pageBlockStore:t,isVisible:o,context:d}=e,c=(0,n.VK)((()=>t.isFullWidth()||d===s.S.CollectionPageView),[d,t]);return(0,l.jsx)(i.p,{allowSelectionWithin:!0,style:{width:c&&o?a.QB:0},children:(0,l.jsx)(r.LazyMarginCommentsSection,{...e})})}},56199:(e,t,o)=>{o.d(t,{Z:()=>c});o(67294);var n=o(86628),i=o(24405),r=o(64369),s=o(45653),a=o(65187),l=o(85893);function d(e){window.__c={n:"TranscriptSnippet"};const t=(0,n.VK)((()=>e.store.getTextStore()),[e.store]),o=(0,n.VK)((()=>e.store.getParticipantName()||""),[e.store]),d=(0,i.yK)((()=>({wrapper:{display:"flex",gap:10,marginBottom:20},avatar:{display:"flex"},speaker:{display:"flex",gap:10,marginBottom:4}})),[]);return(0,l.jsxs)("div",{style:d.wrapper,children:[(0,l.jsx)("div",{style:d.avatar,children:(0,l.jsx)(s.Z,{userStore:void 0,size:22,avatar:{name:o,avatarUrl:""}})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:d.speaker,children:(0,l.jsx)(r.Z,{style:{fontWeight:500,fontSize:16},children:o})}),(0,l.jsx)(a.Z,{style:{opacity:.8},disabled:!0,store:t,parentStore:e.store})]})]})}const c=function(e){window.__c={n:"MeetingNoteTranscriptSnippets"};const t=(0,n.VK)((()=>e.store.getTranscriptSnippetStores()),[e.store]);return(0,l.jsx)("div",{children:t.map((e=>(0,l.jsx)(d,{store:e},e.id)))})}},16738:(e,t,o)=>{o.d(t,{Z:()=>ue});var n=o(67294),i=o(83355),r=o(72126),s=o(96802),a=o(39699),l=o(66890),d=o(79131),c=(o(57658),o(73935)),p=o(1302),u=o(86628),h=o(24405),g=o(49085),m=o(41432),y=o(99036),f=o(80951),S=o(39068),v=o(84619),x=o(45433),C=o(89767),b=o(47453),M=o(70663),P=o(35840),w=o(4615),k=o(21202),j=o(6287),T=o(70203),R=o(82990),_=o(31412),I=o(50906),Z=o(51365),V=o(31869),L=o(98834),B=o(60971),E=o(9953),K=o(14473),F=o(98104),O=o(49616),D=o(75079),N=o(75081),A=o(33929),H=o(65598),W=o(29376),z=o(77907),U=o(86098),$=o(45452),Q=o(29798),G=o(85526),Y=o(26350),q=o(78030),X=o(88071),J=o(64921),ee=o(32163),te=o(72495),oe=o(26388),ne=o(80559),ie=o(68139),re=o(85893);class se extends i.Z{constructor(){super(...arguments),this.storeTypes={menuListStore:Q.Z,customTokenLimit:g.default.createClass(10),draggableListStore:$.Z},this.getRelationMenuRows=(e,t,o,n,i,r)=>{const{store:s,collectionStore:a,disabled:l,property:d,locked:c}=this.props,p=o.getFormatStore().getKeyStore("app_config_uri").getValue()===x.p$;return e.reduce(((e,u,h)=>{const g=Y.G.createChildStore(s,u),m=g.getAssociatedCollectionStore();if((null==m?void 0:m.id)===y.F0(t)){const u={key:g.id,render:e=>(0,re.jsx)(ie.Z,{...e,canDrag:i&&1!==t.limit&&s.canEdit(),collectionStore:a,targetCollectionStore:o,relatedPageStore:g,disabled:l,canConfigureCollection:r,locked:c,isSelected:!0,pageStore:s,property:d,rowType:"section",onActionButtonClick:()=>this.handleRemoveRelationClick(n,g,o),onMouseLeave:()=>this.stores.menuListStore.unsetFocus(),onSecondaryButtonClick:()=>this.handleCreateNewRelation(h+1,o,"relation_section_inline"),onInsertInline:p?()=>{F.ZH(this.environment)}:()=>this.handleCreateNewRelation(h+1,o,"relation_section_inline"),onOpenPageButtonClick:()=>{K.O(n,g,this.environment,"relation_section_inline")},index:h+1,propertyLimit:t.limit}),action:e=>{}};e.push(u)}return e}),[])},this.relationValueStore=this.createComputedStore((()=>{const{store:e,schema:t,property:o}=this.props,n=t[o];if(!n||"relation"!==n.type)return[];const i=e.getPropertyValue(o);return f.j$({relationValue:f.rq(i),propertySchema:n,getRecordModel:e.getRecordModel})}),!0),this.numberOfRelations=this.createComputedStore((()=>this.relationValueStore.state.length)),this.handleRemoveRelationClick=(e,t,o)=>{var n;const{store:i,schema:r,property:s,blockPropertyValueOverlayStore:l}=this.props,{collectionContextStore:d}=this.context,c=r[s];if("relation"!==(null==c?void 0:c.type)||!d)return;const p=c.limit?[]:e.filter((e=>e.id!==t.id));a.createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:this.environment,perform:e=>{V.sf({store:i,propertyId:s,value:p,environment:this.environment,relatedPageId:t.id,propertySchema:c,transaction:e,collectionContextStore:d,analyticsData:{isFromBulkActionsToolbar:O.VM(l),analyticsFrom:O.Sy(q.C.Page)},isUnthrottled:!1})}}),I.WFT(this.environment,{from:this.props.analyticsFrom,collection_id:null===(n=this.props.collectionStore)||void 0===n?void 0:n.id,target_collection_id:null==o?void 0:o.id})},this.handleDraggableListDrop=(e,t)=>{const{menuListStore:o}=this.stores,{collectionStore:n,schema:i,property:r,store:s}=this.props,a=i[r];if(!a||"relation"!==a.type)return;const l=y.j0(a);if(!l)return;const d=Y.NW.createChildStore(s,l);if(!(0,H.OY)(s)||!this.props.property)return;const c=s.getPropertyValue(this.props.property),p=f.j$({relationValue:f.rq(c),propertySchema:a,getRecordModel:s.getRecordModel}),u=[...e.map((e=>({id:e,spaceId:n.pointer.spaceId,table:k.iU}))),...p.slice(e.length)];this.handleRelationPropertyMenuUpdate({value:u},d),I.yT1(this.environment,{from:this.props.analyticsFrom}),B.sv({store:o,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition}})},this.handleOpenProperty=(e,t,o)=>{const{blockPropertyValueOverlayStore:n,store:i,property:r}=this.props,{collectionContextStore:s}=this.context,a=c.findDOMNode(this.relationPropertyPageSectionRef);if(!(a&&a instanceof Element))return;const l=o?null==o?void 0:o.getBoundingClientRect():a.getBoundingClientRect(),d=e?l.top+W.Mu:l.top+5,p=new DOMRect(l.left,d,l.width,l.height);Z.bA({environment:this.environment,blockPropertyValueOverlayStore:n,store:i,property:r,rect:p,format:q.C.Page,mode:t,collectionContextStore:s}),I.udZ(this.environment,{from:this.props.analyticsFrom})},this.handleRelationPropertyPageSectionRefMount=e=>{e&&(this.relationPropertyPageSectionRef=e)},this.handleClearProperty=e=>{this.handleRelationPropertyMenuUpdate({value:[]},e)},this.handleCreateNewRelation=(e,t,o)=>{const{store:n,schema:i,property:r,collectionStore:s}=this.props,{collectionContextStore:a}=this.context;if(!r)return;const l=i[r];if(!l||"relation"!==l.type)return;if(!n.canEdit())return;const d=(0,w.ZP)(),c=s.pointer.spaceId,p=l.limit,u={id:d,table:k.iU,spaceId:c};if(!(0,H.OY)(n)||!this.props.property)return;const h=n.getPropertyValue(this.props.property),g=f.j$({relationValue:f.rq(h),propertySchema:l,getRecordModel:n.getRecordModel}),{customTokenLimit:m}=this.stores,y=m.state;e&&e+1>y&&m.setState(e+1);const S=p?[u]:e?[...g.slice(0,e),u,...g.slice(e)]:[u,...g];this.handleRelationPropertyMenuUpdate({newPage:{id:d,spaceId:c,name:""},value:S},t),I.kmb(this.environment,{...(0,D.Pn)(a),from:o,target_collection_id:null==t?void 0:t.id})},this.handleRelationPropertyMenuUpdate=(e,t)=>{const{store:o,property:n}=this.props;if(!(0,H.OY)(o)||!n)return;let i;a.createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:this.environment,perform:r=>{const s=t.id;if(e.newPage&&s){const o=T.TPx(e.newPage.name),n={id:e.newPage.id,version:0,type:m.Ti.page,parent_id:s,parent_table:j.v,alive:!0,properties:{title:o},collection_id:void 0,space_id:e.newPage.spaceId};i=E.ae({environment:this.environment,table:k.iU,value:n,inMemoryRecordCache:t.inMemoryRecordCache,transaction:r});const a=Y.G.createChildStore(this.props.store,i.pointer),l=t.getDefaultTemplatePageStore();l&&L.ob({title:{text:o},environment:this.environment,store:a,templateStore:l,isKeyboard:!1,isCreateIn:!1,transaction:r,from:"relation_property_page_section"})}if(e.value){const t=f.ow(e.value),i=o.getPropertyStore(n);E.sO({store:i,value:t,transaction:r})}}}),p.default.afterNextFlush((()=>{if(!i)return;const e=U.Z.findRow(i.id,"section",n);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),r=o.getValue(),s=r?r[0][0].length:0,a={start:{index:s,store:o},end:{index:s,store:o}};F.NA({multiSelection:a})}))}}renderComponent(){const{schema:e,format:t,locked:o,property:n,collectionStore:i,store:r,disabled:s,visibility:a,isInPeekRenderer:l,topBorder:c}=this.props,{device:p}=this.environment,{collectionContextStore:u}=this.context,h=e[n];if("relation"!==(null==h?void 0:h.type)||!u)return;const g=y.j0(h);if(!g)return;const m=Y.NW.createChildStore(r,g),f=u.permissionScopes.state,S=this.relationValueStore.state,{customTokenLimit:P}=this.stores,w=P.state,k=S.slice(0,w),j=m.getFormatStore().getKeyStore("app_config_uri").getValue()===x.p$;if("section_hide"===a)return;if("minimal"===a||0===this.numberOfRelations.state)return(0,re.jsx)(ae,{property:n,propertySchema:h,numberOfRelations:this.numberOfRelations.state,onHandleOpenProperty:this.handleOpenProperty,onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,schema:e,format:t,disabled:s,locked:o,canConfigureCollection:f.canConfigureCollection,blockStore:r,collectionStore:i,collectionContextStore:u,isInPeekRenderer:l,targetCollectionStore:m});const T=1===h.limit,R=!(p.isMobile||s||o||T),I=this.getRelationMenuRows(k,h,m,S,R,f.canConfigureCollection),Z=I.map((e=>e.key.toString())),V=(0,re.jsx)(ee.Z,{type:ee.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,re.jsx)(te.Z,{...e,disableDesktopPadding:!0,disableMobileBorders:!0,children:R?(0,re.jsx)(d.ZP,{direction:"vertical",keys:Z,renderKey:t=>e.children[Z.indexOf(t)],onDrop:this.handleDraggableListDrop,store:this.stores.draggableListStore}):e.children}),items:I}]}),L=m.canEdit(),B=r.canEdit(),E={maxWidth:p.isMobile?"none":300,...!p.isMobile&&{width:"auto"},...p.isMobile&&{paddingLeft:"none"}};return(0,re.jsx)(le,{collectionContextStore:u,title:(0,re.jsx)(ne.Q,{schema:e,format:t,property:n,blockStore:r,collectionStore:i,disabled:s,locked:o,canConfigureCollection:f.canConfigureCollection,intl:A.default.getIntl(),style:E,popupStyle:E,isInPeekRenderer:l}),collectionStore:i,targetCollectionStore:m,property:n,showRight:!0,disabled:s,schema:e,format:t,locked:o,canEditTargetCollection:m.canEdit(),canConfigureCollection:f.canConfigureCollection,canEditCurrentPage:B,handleMouseMove:this.props.handleMouseMove,onHandleOpenProperty:()=>{this.handleOpenProperty(!1)},onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,onTitleEnter:()=>this.handleCreateNewRelation(void 0,m,"relation_section_inline"),handleClearProperty:()=>this.handleClearProperty(m),topBorder:c,children:(0,re.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",paddingBottom:"12px",paddingTop:"12px",width:"100%",...p.isMobile&&{paddingLeft:"none"}},onMouseMove:this.props.handleMouseMove,onMouseLeave:this.props.handleMouseLeave,children:[V,S.length>w&&(0,re.jsx)(J.Z,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>P.setState(w+10),children:(0,re.jsx)(X.Z,{count:S.length-w,format:v.lo.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),L&&B&&!o&&(0,re.jsxs)(J.Z,{style:this.getAddNewRelationButtonWrapperStyle(),onClick:()=>{j?this.handleClearProperty(m):this.handleCreateNewRelation(S.length>=w?w:S.length+1,m,"relation_section_footer")},disabled:s||o,children:[j?(0,C.R)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===h.limit?(0,M.h)(this.getAddNewRelationButtonIconStyle()):(0,b.R)(this.getAddNewRelationButtonIconStyle()),(0,re.jsxs)("div",{style:se.addNewRelationButtonTitleStyle,children:[j&&(0,re.jsx)("span",{style:{color:this.theme.mediumTextColor},children:(0,re.jsx)(_.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!j&&(1===h.limit?(0,re.jsx)(_.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace linked page from {propertyName}",values:{propertyName:h.name}}):(0,re.jsx)(_.FormattedMessage,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New page in {propertyName}",values:{propertyName:h.name}}))]})]})]})},n)}getAddNewRelationButtonWrapperStyle(){return{display:"flex",alignItems:"center",color:this.theme.lightTextColor,borderRadius:4,paddingLeft:4,paddingRight:6,height:32,width:"100%",fontSize:14}}getAddNewRelationButtonIconStyle(){return{width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:this.theme.lightIconColor}}}function ae(e){window.__c={n:"RelationPropertyMinimalPageSection"};const{property:t,propertySchema:o,numberOfRelations:i,schema:r,format:s,disabled:a,locked:l,canConfigureCollection:d,blockStore:c,collectionStore:p,onHandleOpenProperty:g,onHandleRelationPropertyPageSectionRefMount:m,isInPeekRenderer:y,targetCollectionStore:f}=e,v=(0,h.yK)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"inline-flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:R.Z.fontWeight.medium,color:e.mediumTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:R.Z.fontWeight.medium,color:e.mediumTextColor},iconStyle:{width:14,height:14,fill:e.mediumIconColor,marginRight:6,alignItems:"baseline"},pagePropertiesRowName:{width:"100%",display:"inline-flex",flexWrap:"wrap"}})),[]),C=(0,h.Fg)(),b=(0,n.useCallback)((()=>{G.Z.setState({...G.Z.state,hoveredProperty:t})}),[t]),M=(0,n.useCallback)((()=>{G.Z.setState({...G.Z.state,hoveredProperty:void 0})}),[]),P=(0,u.VK)((()=>f.getFormatStore().getKeyStore("app_config_uri").getValue()),[f]),w=(0,N.sN)(x.p$),k=(0,N.Q_)(x.p$);return(0,re.jsx)("div",{style:v.hoverButton,onMouseMove:b,onMouseLeave:M,children:(0,re.jsx)(ne.Q,{schema:r,format:s,property:t,blockStore:c,collectionStore:p,disabled:a,locked:l,canConfigureCollection:d,intl:A.default.getIntl(),style:v.pagePropertiesRowName,popupStyle:v.pagePropertiesRowName,origin:(0,re.jsx)("div",{ref:m,style:v.minimalButtonWrapper,children:(0,re.jsx)(J.Z,{style:v.minimalButton,onClick:()=>g(!0),onContextMenu:e=>{a||l||!d||(e.preventDefault(),G.Z.setState({...G.Z.state,openProperty:{property:t,isInPeekRenderer:y}}))},children:(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,re.jsx)(S.ZP,{size:14,style:v.iconStyle,theme:C,type:o.type??"relation",icon:o.icon}),P===x.p$?(0,re.jsx)(_.FormattedMessage,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:i,propertyName:o.name,singleTypedItemName:w,pluralTypedItemName:k}}):(0,re.jsx)(_.FormattedMessage,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:i,propertyName:o.name}})]})},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:y})})}function le(e){window.__c={n:"RelationPropertyPageSectionHeader"};const{collectionStore:t,targetCollectionStore:o,property:n,showRight:i,disabled:r,locked:s,style:a,children:l,canEditTargetCollection:d,canConfigureCollection:c,canEditCurrentPage:p,handleMouseMove:h,onHandleOpenProperty:g,onHandleRelationPropertyPageSectionRefMount:m,onTitleEnter:f,topBorder:S=!0}=e,v=(0,u.VK)((()=>o.isSyncedCollection()),[o]),C=(0,u.VK)((()=>{const e=t.getSchema()[n];return Boolean(e&&y.NK(e))}),[t,n]),M=(0,u.VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===x.p$),[o]);return(0,re.jsx)("div",{style:{width:"100%"},ref:m,children:(0,re.jsx)(te.Z,{...e,topBorder:S,children:l,noTextOverflow:!0,isTitleUppercase:!1,right:i&&!v&&!C&&(0,re.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[p&&(0,re.jsx)(de,{disabled:r,handleMouseMove:h,onClick:g,icon:P.R,tooltipMessage:M?(0,re.jsx)(_.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,re.jsx)(_.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${n}`),d&&p&&!M&&!s&&(0,re.jsx)(de,{disabled:r,handleMouseMove:h,onClick:f,icon:b.R,tooltipMessage:M?(0,re.jsx)(_.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButtonSprints.message",defaultMessage:"Create new sprint"}):(0,re.jsx)(_.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButton.message",defaultMessage:"Add new page"})},`addIcon-${n}`),(0,re.jsx)(z.LazyRelationPropertyCustomizeLayoutMenu,{collectionStore:t,targetCollectionStore:o,property:n,disabled:r||!c,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:2,width:"100%",...a},desktopTitleStyle:{height:6,paddingLeft:0,paddingRight:8,paddingTop:24,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function de(e){window.__c={n:"RelationPropertyPageSectionHeaderButton"};const{disabled:t,handleMouseMove:o,onClick:n,icon:i,tooltipMessage:r}=e,s=(0,h.yK)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,re.jsx)(oe.Z,{renderTooltip:()=>r,render:e=>(0,re.jsx)(J.Z,{style:s.buttonStyle,onMouseMove:o,onClick:n,disabled:t,...e,children:i(s.iconStyle)})})}se.displayName="RelationPropertyPageSection",se.contextTypes={...i.w,...l.xm},se.addNewRelationButtonTitleStyle={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};const ce=se;class pe extends i.Z{constructor(){super(...arguments),this.renderSection=(e,t)=>{const{schema:o,format:n,locked:i,collectionStore:r,store:s,disabled:a,isInPeekRenderer:l,handleMouseMove:d,handleMouseLeave:c,blockPropertyValueOverlayStore:p,topBorder:u}=this.props,h=(n.collection_page_sections||[]).filter((t=>t.section===e)).map((e=>e.visibility))[0];return(0,re.jsx)(ce,{store:s,collectionStore:r,disabled:a,locked:i,property:e,schema:o,handleMouseMove:d,handleMouseLeave:c,handleContextMenu:()=>{},blockPropertyValueOverlayStore:p,format:n,visibility:h,analyticsFrom:"relation_section",isInPeekRenderer:l,topBorder:u&&0!==t})},this.handleReorder=e=>{const{collectionStore:t,format:o}=this.props,n=o.collection_page_sections||[],i=[...r.oA(e.map((e=>n.find((t=>t.section===e))))),...n.filter((t=>!e.includes(t.section)))];a.createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:this.environment,perform:e=>{s.FH({stores:[t],update:{collection_page_sections:i},transaction:e})}})}}renderComponent(){const{locked:e,disabled:t,propertyIds:o,type:n}=this.props,{collectionContextStore:i}=this.context;if(!i)return;const r=i.permissionScopes.state;return"minimal"===n?o.map(((e,t)=>(0,re.jsx)("div",{children:this.renderSection(e,t)},e))):t||e||!r.canConfigureCollection?(0,re.jsx)("div",{style:d.yA,children:o.map(((e,t)=>(0,re.jsx)("div",{children:this.renderSection(e,t)},e)))}):(0,re.jsx)(d.ZP,{direction:"vertical",keys:o,renderKey:this.renderSection,onDrop:this.handleReorder})}}pe.displayName="RelationPropertyPageSections",pe.contextTypes={...i.w,...l.xm};const ue=pe},44862:(e,t,o)=>{o.d(t,{Z:()=>m});o(67294);var n=o(83355),i=o(8848),r=o(60291),s=o(54497),a=o(31412),l=o(5149),d=o(41232),c=o(32363),p=o(16402),u=o(84076),h=o(85893);class g extends n.Z{constructor(){super(...arguments),this.handleNavigateToSourceClick=()=>{const{collectionContextStore:e}=this.props;e&&(l.r$({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),l.H4({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}}renderComponent(){const{collectionStore:e}=this.props;if(e.isSyncedCollection())return this.renderSyncedCollectionIndicators()}renderSyncedCollectionIndicators(){const{collectionStore:e}=this.props,t=e.getFormatStore().getKeyStore("original_url").getValue(),o=e.getSpaceId(),n=Boolean(e.getFormatStore().getKeyStore("sync_state").getValue()),i=t&&(0,d.pI)(t,o);return(0,h.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[i&&(0,h.jsx)(u.Z,{href:i,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...this.getStyle()},external:!0,children:(0,c.wY)(t,o)}),n?(0,h.jsx)("span",{style:{color:this.theme.mediumTextColor},children:"•"}):null,n?this.renderSyncState():null]})}renderSyncState(){var e,t;const{collectionStore:o}=this.props,n=o.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue(),l=o.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue(),d=null===(e=this.props.collectionContextStore)||void 0===e?void 0:e.numberChildrenUnfurled.state,c=null===(t=this.props.collectionContextStore)||void 0===t?void 0:t.numberChildrenReceived.state,g=d&&c&&d/c<1&&!this.environment.device.isMobile,m=n&&this.environment.device.isMobile;let y;return l&&(y=(0,h.jsx)(a.FormattedMessage,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,p.IS)(l,{useLowercase:!0})}})),"row_limit_exceeded"===n?(0,h.jsx)(u.Z,{style:{display:"inline-flex",...this.getStyle()},onClick:this.handleNavigateToSourceClick,children:(0,h.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...this.getStyle()},children:[(0,s.t)({fill:(0,i.fi)("orange",this.theme).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,h.jsx)(a.FormattedMessage,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):g||m?(0,h.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...this.getStyle()},children:[(0,h.jsx)(a.FormattedMessage,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,r.b)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,h.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...this.getStyle()},children:y})}getStyle(){return{color:this.theme.mediumTextColor,fontSize:14,lineHeight:1.2}}}g.displayName="SyncedCollectionIndicators";const m=(0,a.injectIntl)(g)},37451:(e,t,o)=>{o.d(t,{Z:()=>_});o(67294);var n=o(83355),i=o(15145),r=o(49271),s=o(31412),a=o(50906),l=o(98834),d=o(75018),c=o(59389),p=o(39699),u=o(66213),h=o(78316),g=o(19124),m=o(84210),y=o(12534),f=o(17504),S=o(77907),v=o(80444),x=o(88632),C=o(83212),b=o(34583),M=o(64921),P=o(21199),w=o(24405),k=o(36596),j=o(85893);function T(){window.__c={n:"TemplatePickerShimmer"};const e=(0,w.yK)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginLeft:5,width:26,height:26,marginRight:10},menuItem:{height:20,marginTop:5,marginBottom:5,width:"20%"}})),[]);return(0,j.jsx)(j.Fragment,{children:[...Array(8)].map(((t,o)=>(0,j.jsxs)("div",{style:e.menu,children:[(0,j.jsx)(k.Z,{style:e.icon}),(0,j.jsx)(k.Z,{style:e.menuItem})]},o)))})}class R extends n.Z{constructor(){super(...arguments),this.publicEditModeStore=this.createComputedStore((()=>C.Z.getMode(this.environment,this.props.store))),this.handleEmptyPageContinueClick=e=>{(0,y.ZP)({event:e,context:y.Af.EditorClick,callback:()=>{b.M_(this.environment)&&(p.createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:this.environment,perform:e=>{c.eV({environment:this.environment,store:this.props.store,transaction:e})}}),a.rNQ(this.environment,{template_name:"empty",is_keyboard:!1}))}})},this.handleCreateDatabaseTemplateClick=()=>{const{store:e}=this.props,t=e.getAssociatedCollectionStore();if(t&&b.M_(this.environment)){const{performResult:e}=p.createAndCommit({userAction:"TemplatePicker.newPage",environment:this.environment,perform:e=>l.nx({environment:this.environment,collectionStore:t,transaction:e})});e&&this.navigateToBlock(e),a.dZq(this.environment,{collection_id:t.id})}}}navigate(e){this.context.overrideLinkClick?this.context.overrideLinkClick(e):d.navigate({environment:this.environment,url:e})}willMount(e){super.willMount(e),e.menuListStore.reset()}renderComponent(){const e=x.Z.state.online;return(0,j.jsx)(P.Z,{capture:!0,render:t=>(0,f.Z)((o=>(0,j.jsxs)("div",{...t,...o,style:R.wrapStyle,children:[this.renderPlaceholder(),e&&(0,j.jsx)(S.LazyTemplatePickerTemplateList,{...this.props,renderLoading:()=>(0,j.jsx)(T,{})})]})))})}renderPlaceholder(){const e=this.renderPlaceholderMessage();return e?(0,j.jsx)("div",{style:R.placeholderWrapStyle,children:(0,j.jsx)("div",{style:this.getPlaceholderStyle(),onClick:this.handleEmptyPageContinueClick,children:e})}):void 0}renderPlaceholderMessage(){const{device:e}=this.environment,t=this.props.store.isTemplate(),o=x.Z.state.online,n=(i=this.props.store,Boolean(i.getAssociatedCollectionStore()));var i;const r=function(e){const t=e.getParentCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(this.props.store),a=n&&!r;return o?t?(0,j.jsx)(s.FormattedMessage,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:e.isMobile}}):e.isMobile?a?(0,j.jsx)(s.FormattedMessage,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:!I(this.props.store),templatebutton:e=>(0,j.jsx)(M.Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:this.handleCreateDatabaseTemplateClick,children:e})}}):e.isTablet?(0,j.jsx)(s.FormattedMessage,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,j.jsx)(s.FormattedMessage,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):a?(0,j.jsx)(s.FormattedMessage,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:!I(this.props.store),templatebutton:e=>(0,j.jsx)(M.Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:this.handleCreateDatabaseTemplateClick,children:e})}}):!(0,g.GD)(this.publicEditModeStore.state)||n?(0,j.jsx)(s.FormattedMessage,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"}):void 0:(0,j.jsx)(s.FormattedMessage,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:e.isMobile}})}navigateToBlock(e){const{mainEditorCurrentBlockStore:t}=v.default.state,o=t?(0,m.ZP)({store:t,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:i.tY.LinkInPage}):(0,m.ZP)({store:e,fullyQualified:!1,pageVisitSource:i.tY.LinkInPage});this.navigate(o)}getPlaceholderStyle(){return{...r.ZD,color:this.theme.lightTextColor,paddingTop:5,paddingBottom:24}}}R.displayName="TemplatePicker",R.contextTypes={...u.wK,...n.w},R.wrapStyle={width:"100%",display:"flex",flexDirection:"column",marginBottom:"14vh"},R.placeholderWrapStyle={width:"100%"};const _=(0,s.injectIntl)(R);function I(e){const t=e.getAssociatedCollectionStore(),o=t&&t.getParentBlockStore();return h.eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}},58792:(e,t,o)=>{o.d(t,{B:()=>s});o(67294);var n=o(5618),i=o(35943),r=o(85893);const s=e=>{let{store:t,isEditable:o,hasCover:s,isInSidePeek:a,paddingLeft:l,paddingRight:d,openMenuOnMount:c,openMenuOnMountCallback:p,...u}=e;return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,r.jsx)(n.Z,{store:t,isEditable:o,hasCover:s,isInSidePeek:a,openMenuOnMount:c,openMenuOnMountCallback:p}),(0,r.jsx)(i.Z,{store:t,isInSidePeek:a,paddingLeft:l,paddingRight:d,...u})]})}},98272:(e,t,o)=>{o.d(t,{X:()=>a});o(67294);var n=o(24405),i=o(31412),r=o(68785),s=o(85893);function a(){window.__c={n:"ImportingMessage"};const e=(0,n.yK)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.mediumTextColor}})),[]);return(0,s.jsxs)("div",{style:e.wrapper,children:[(0,s.jsx)(r.Z,{}),(0,s.jsx)("div",{style:e.message,children:(0,s.jsx)(i.FormattedMessage,{defaultMessage:"Importing…",id:"frame.importingMessage"})})]})}},67064:(e,t,o)=>{o.d(t,{E:()=>a,_:()=>s});o(67294);var n=o(86628),i=o(16738),r=o(85893);function s(e){window.__c={n:"InlinePageSections"};const{state:t,store:o,disabled:s,isInPeekRenderer:a,blockPropertyValueOverlayStore:l,onMouseEnter:d,onMouseLeave:c,topBorder:p}=e,u=(0,n.VK)((()=>o.isLocked()),[o]),h=(0,n.VK)((()=>o.getSchema()),[o]);return(0,r.jsx)(i.Z,{topBorder:p,propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:s,locked:u,schema:h,handleMouseMove:d,handleMouseLeave:c,handleContextMenu:()=>{},blockPropertyValueOverlayStore:l,isInPeekRenderer:a})}function a(e){const{collectionStore:t,format:o,sectionPropertyIds:n}=e;return t&&o&&n&&n.length?{type:"visible",collectionStore:t,format:o,sectionPropertyIds:n}:{type:"hidden"}}},61679:(e,t,o)=>{o.d(t,{$K:()=>f,Ar:()=>u,Cq:()=>C,bU:()=>m,cx:()=>S,hy:()=>y,i2:()=>v,kg:()=>x});var n=o(94184),i=o.n(n),r=o(67294),s=o(60177),a=o(64338),l=o(24405),d=o(73420),c=o(97053),p=o(85893);function u(e){let{children:t,type:o,gap:n,withBottomPadding:r,style:s}=e;window.__c={n:"Layout"};const a=(0,c.Bt)(o);return(0,p.jsx)("div",{className:i()("layout",{"layout-wide":"wide"===o,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===o,"layout-side-peek":"side-peek"===o,"layout-center-peek":"center-peek"===o,"layout-wiki":"wiki"===o,"layout-wiki-right-margin-expanded":"wiki-right-margin-expanded"===o,"layout-home":"home"===o,"layout-home-phone":"home-phone"===o,"layout-phone":"phone"===o,"layout-tablet":"tablet"===o,"layout-template-preview":"template-preview"===o}),style:{paddingBottom:r?a:void 0,gap:n,...s},children:t})}const h="layout-nested-grid",g="layout-two-column";function m(e){return(0,p.jsx)("div",{className:i()("layout-content",e.className),style:e.style,children:e.children})}function y(e){return(0,p.jsx)("div",{className:"layout-full",style:e.style,children:e.children})}function f(e){return(0,p.jsx)("div",{className:"layout-margin-right",children:e.children})}const S=(0,r.forwardRef)((function(e,t){return(0,p.jsx)("div",{className:i()(h,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function v(e){return(0,p.jsx)("div",{className:i()(h,"layout-margin-scrollable",{"hide-scrollbar":e.hideScrollbar}),style:e.style,children:(0,p.jsx)(m,{children:e.children})})}function x(e){let{items:t,style:o}=e;window.__c={n:"LayoutTabs"};const[n,i]=r.useState(0),c=(0,r.useRef)([]),u=(0,s.Dl)();(0,a.q7)(null==u?void 0:u.domLock);const h=(0,l.yK)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},tab:"centered"===o?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:"centered"===o?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor}})),[o]),g=(0,r.useId)(),y=(0,r.useCallback)((e=>`${g}-tab-${e}`),[g]),f=(0,r.useCallback)((e=>`${g}-tabpanel-${e}`),[g]),v=(0,r.useCallback)((e=>{let o;var r;("ArrowLeft"===e.key?(e.preventDefault(),o=(n+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),o=(n+1)%t.length),void 0!==o)&&(i(o),null===(r=c.current[o])||void 0===r||r.focus())}),[n,t.length]);return(0,p.jsxs)(S,{children:[(0,p.jsx)(m,{children:(0,p.jsx)("div",{role:"tablist",children:(0,p.jsx)(d.X2,{justifyContent:"centered"===o?"center":"flex-start",children:t.map(((e,t)=>{var o;return(0,p.jsx)("button",{ref:e=>{e&&(c.current[t]=e)},id:y(t),role:"tab","aria-controls":f(t),"aria-selected":t===n,tabIndex:t===n?void 0:-1,onKeyDown:v,style:{...h.tab,...t===n&&h.tabSelected},onClick:e=>{e.stopPropagation(),i(t)},children:(0,p.jsxs)(d.X2,{gap:4,alignItems:"center",children:[null===(o=e.icon)||void 0===o?void 0:o.call(e,h.icon),e.label&&(0,p.jsx)("div",{style:h.label,children:e.label})]})},e.key)}))})})}),(0,p.jsx)(S,{id:f(n),role:"tabpanel","aria-labelledby":y(n),children:t[n]?t[n].children:null})]})}function C(e){return(0,p.jsxs)("div",{className:g,style:{"--min-column-width":`${e.minWidth}px`},children:[e.left,e.right]})}},99731:(e,t,o)=>{o.d(t,{f:()=>a});o(67294);var n=o(31412),i=o(77933),r=o(97053),s=o(85893);const a=e=>{let{store:t}=e;return(0,s.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:r.m4,onClick:r.h9,children:(0,s.jsx)(i.Z,{type:"page",store:t,headerText:(0,s.jsx)(n.FormattedMessage,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}},79354:(e,t,o)=>{o.d(t,{o:()=>s});o(67294);var n=o(82136),i=o(53223),r=o(85893);function s(e){let{store:t,collectionViewId:o,context:s,disabled:a}=e;return(0,r.jsx)(i.D,{overridePaddingLeft:0,overridePaddingRight:0,store:t,isFullScreen:!0,viewId:o,disabled:a,hideHeaderActions:s===n.S.InAppTemplatePreview})}},16720:(e,t,o)=>{o.d(t,{Z:()=>I,k:()=>Z});var n=o(67294),i=o(83355),r=o(480),s=o(86628),a=o(24405),l=o(90199),d=o(1436),c=o(82990),p=o(31412),u=o(50906),h=o(61916),g=o(97444),m=o(39699),y=o(68056),f=o(67669),S=o(18514),v=o(61766),x=o(31792),C=o(24666),b=o(84076),M=o(31278),P=o(76798),w=o(32662),k=o(26388),j=o(65187),T=o(85893);class R extends i.Z{constructor(){super(...arguments),this.editor=null,this.storeTypes={buttonPopupStore:v.Z},this.renderLockedTooltip=()=>{const{collectionStore:e}=this.props,t=e&&e.getIcon();return(0,T.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,T.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,l.b)({width:12})}),(0,T.jsx)("div",{children:(0,T.jsx)("div",{children:(0,T.jsx)(p.FormattedMessage,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:(0,T.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:c.Z.fontWeight.bold},children:[t&&(0,T.jsx)(M.Z,{disabled:!0,icon:t,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),e&&(0,T.jsx)(P.Z,{store:e,style:{display:"inline"}})]})}})})})]})},this.handleTab=e=>!0,this.handleUntab=e=>!0,this.handleEnter=e=>{if(!this.canEdit())return;if(e.preventDefault(),this.editor&&this.editor.isComposing())return;const t=C.default.state;if("editing"===t.mode){const e=(0,y.QY)(t.multiSelection);if(!e)return;m.createAndCommit({userAction:"PageDescription.handleEnter",environment:this.environment,perform:t=>{g.hJ({environment:this.environment,store:this.props.descriptionStore,string:"\n",selection:e.selection,disableMentions:!0,disableDateMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})}},this.handleToggleExpanded=e=>{V(this.props.toggleStore)||e.preventDefault(),function(e,t,o,n,i){const r=V(e);h.YT({environment:n,pageId:t,isExpanded:!r,store:e,userSettingsStore:i,descriptionStore:o})}(this.props.toggleStore,this.props.pageId,this.props.descriptionStore,this.environment,this.props.userSettingsStore)}}renderComponent(){return(0,T.jsx)("div",{style:{maxWidth:"100%",borderRadius:4,overflow:"hidden",marginBottom:12},children:this.renderExpanded()})}renderExpanded(){return this.environment.device.isMobile?(0,T.jsx)(n.Fragment,{children:this.renderDescriptionText()}):(0,T.jsx)(k.Z,{renderTooltip:this.renderLockedTooltip,disableTooltip:!this.props.locked||!this.props.canEdit,render:e=>(0,T.jsx)("div",{children:(0,T.jsx)("div",{style:{display:"flex",cursor:"text"},...e,children:this.renderDescriptionText()})})})}renderDescriptionText(){const{device:e}=this.environment,{intl:t}=this.props;if(this.props.descriptionStore)return(0,T.jsx)(j.Z,{ref:e=>{this.editor=e},store:this.props.descriptionStore,style:{..._,width:780},disabled:this.props.disabled,placeholder:t.formatMessage({defaultMessage:"Add a description…",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disableDateMentions:!0,disableMentions:!0,onTab:this.handleTab,onUntab:this.handleUntab,onEnter:this.handleEnter,onClick:V(this.props.toggleStore)?()=>{}:this.handleToggleExpanded,disableStyleAnnotations:e.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline"})}canEdit(){const{descriptionStore:e}=this.props,t=this.pageContext&&this.pageContext.publicEditModeStore.state;return!this.props.disabled&&(!(0,f.YF)(t)&&e.canEdit())}}R.displayName="PageDescription",R.stores={buttonPopupStore:v.Z};const _={fontSize:14,paddingLeft:6,paddingBottom:4,paddingTop:3},I=(0,p.injectIntl)(R);function Z(){window.__c={n:"SprintBoardPageDescription"};const e=(0,r.O7)(),t=(0,s.qz)(void 0,x.Z),o=(0,s.VK)((()=>t.state.mouseEntered),[t]),n=(0,a.yK)((e=>({linkStyle:{..._,color:o?e.mediumTextColor:e.lightTextColor,cursor:"pointer"}})),[o]);return(0,T.jsx)("div",{style:{display:"flex"},onClick:()=>u.Fsx(e,{from:"sprint_board_learn_how_to_use"}),children:(0,T.jsxs)(b.Z,{style:n.linkStyle,href:(0,S.UY)("guides.sprintPlanning"),external:!0,disabled:!0,onMouseEnter:()=>t.enter(),onMouseLeave:()=>t.exit(),children:[(0,T.jsx)(p.FormattedMessage,{defaultMessage:"Learn how to use Sprints",id:"pageDescription.sprintBoard.message"}),(0,T.jsx)(w.Z,{size:2}),(0,d.g)({width:16,display:"inline-block",position:"relative",top:"3px",height:void 0})]})})}function V(e){return e.isExpanded()}},6779:(e,t,o)=>{o.d(t,{z:()=>b});var n=o(67294),i=o(43250),r=o(97053),s=o(1302),a=o(480),l=o(86628),d=o(23867),c=o(98104),p=o(39699),u=o(18821),h=o(34047),g=o(82994),m=o(77907),y=o(46351),f=o(82136),S=o(85893);const v=e=>{window.__c={n:"NewPageDiscussion"};const{store:t}=e,o=(0,a.O7)(),i=(0,n.useMemo)((()=>new g.Z(o,(0,d.C)(t.pointer.spaceId))),[o,t.pointer.spaceId]),r=(0,n.useCallback)((()=>{c.ZH(o)}),[o]),s=x({environment:o,discussionInputStore:i,store:t});return(0,S.jsx)(m.LazyDiscussionInput,{showAvatar:!0,parentStore:t,onSubmit:s,onCancel:r,discussionInputStore:i,discussionFormat:h.O2.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})},x=e=>{const{environment:t,discussionInputStore:o,store:i}=e,r=(0,l.qz)(void 0,f.Z),a=(0,n.useCallback)((e=>{var o;const n=i.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:n},e)}),[t,i.id]);return(0,n.useCallback)((async()=>{const e=o.state.textStore.getValue(),n=o.state.files;if(e&&e.length>0||n.length>0){const{performResult:l}=p.createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,perform:o=>u.i8({environment:t,blockStore:i,commentTextValue:e||[],transaction:o,files:n}),skipUpdatingEditedMetadata:!0});if(o.reset(),r.setState({...r.state,forceDiscussionOpen:!1}),a(!0),l&&!t.device.isMobile){await s.default.afterNextFlush();const e=y.Z.find((e=>e.getStore().id===l.id));e&&c.NX({store:e.getInputStore().state.textStore})}}}),[o,t,r,a,i])},C=e=>{window.__c={n:"UnresolvedPageDiscussion"};const{store:t,discussionStore:o,isFirst:i,isOnly:r}=e,s=(0,a.O7)(),l=(0,n.useMemo)((()=>new g.Z(s,(0,d.C)(t.pointer.spaceId))),[s,t.pointer.spaceId]);return(0,S.jsx)(m.LazyDiscussion,{store:o,format:h.O2.Page,isFirst:i,isOnly:r,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:l},o.id)},b=e=>{const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:n}=e;return(0,S.jsxs)("div",{style:{width:"100%",margin:"0 auto"},onMouseDown:r.m4,onClick:r.h9,className:i.KA2,children:[n.map(((e,o,n)=>(0,S.jsx)(C,{store:t,discussionStore:e,isFirst:0===o,isOnly:1===n.length},e.id))),o&&(0,S.jsx)("div",{style:{padding:"6px 4px 12px"},children:(0,S.jsx)(v,{store:t})})]})}},2524:(e,t,o)=>{o.d(t,{e:()=>h});var n=o(67294),i=o(60177),r=o(64338),s=o(86628),a=o(43250),l=o(68785),d=o(55217),c=o(37451),p=o(97053),u=o(85893);const h=(0,n.forwardRef)((function(e,t){let{store:o,disabled:n,loadingContainerStore:h,templatePickerMenuListStore:g,onClick:m,legacyStyles:y}=e;window.__c={n:"PageEditor"};const f=(0,i.Dl)();(0,r.q7)(null==f?void 0:f.domLock);const S=(0,p.Nr)(o),v=(0,p.xC)(o,h),x=(0,p.Qg)(o),C=(0,s.VK)((()=>o.isLocked()||n),[o,n]);return(0,u.jsxs)("div",{className:a.QS0,onClick:m,style:y,ref:t,children:[!x&&(0,u.jsx)(d.Z,{store:o.getContentStore(),emptyDroppableStyle:{width:"100%"},disabled:C}),S&&(0,u.jsx)(l.Z,{}),v&&(0,u.jsx)(c.Z,{store:o,menuListStore:g})]})}))},56507:(e,t,o)=>{o.d(t,{U:()=>i});o(67294);var n=o(85893);function i(e){let{onMouseEnter:t,onMouseMove:o,onMouseLeave:i,headerControls:r}=e;return(0,n.jsx)("div",{onMouseEnter:t,onMouseMove:o,onMouseLeave:i,children:r})}},5618:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(67294),i=o(480),r=o(86628),s=o(41432),a=o(43593),l=o(31412),d=o(9953),c=o(39699),p=o(95477),u=o(28020),h=o(31278),g=o(85893);const m=n.memo((e=>{let{store:t,isEditable:o,hasCover:m,isInSidePeek:y,openMenuOnMount:f,openMenuOnMountCallback:S}=e;window.__c={n:"PageIcon"};const v=(0,i.O7)(),x=(0,l.useIntl)(),C=(0,r.VK)((()=>t.hasIcon()),[t]),b=(0,r.VK)((()=>{if(C)return t.getIcon()}),[C,t]),M=(0,r.VK)((()=>t.getIconStore()),[t]),P=(0,r.VK)((()=>t.getType()),[t]),w=(0,r.VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(s.Ti.externalObjectInstancePage)}),[t]),k=(0,r.VK)((()=>t.isCollectionView()||y),[t,y]),j=(0,r.VK)((()=>k?36:w?74:140),[k,w]),T=(0,r.VK)((()=>t.isEmptyPage()),[t]),R=(0,n.useCallback)((async e=>{const o=t.getIconStore();if(o){const t=(0,a.Wv)(e,p.default.secureFileS3.url,p.default.secureFileS3V2.url,p.default.secureFileConfig.rootPath,p.default.secureFileConfig.hostname),n=t?t.link:e,{serverCommitResult:i}=c.createAndCommit({userAction:"PageIcon.handleChange",environment:v,perform:e=>{d.sO({store:o,value:n,transaction:e})}});await i}}),[v,t]);if(!C)return null;const _={position:"relative",zIndex:1,marginLeft:3,marginBottom:v.device.isMobile?8:0,marginTop:4,pointerEvents:"auto"};let I;k?_.marginRight=6:_.marginTop=m?-80:v.device.isMobile?0:(0,u.CP)(v),I=k?{marginTop:(v.device.isMobile,4),marginRight:8}:{marginTop:m?-42:v.device.isMobile?0:(0,u.CP)(v)};const Z=k?36:78;if(o){const e=null==M?void 0:M.table;return(0,g.jsx)(h.Z,{disabled:!1,bucket:"secure",icon:b,store:t,isEmptyPage:T,onChange:R,size:j,emojiSize:Z,style:_,emojiStyle:I,largeIcon:!0,openMenuOnMount:f,openMenuOnMountCallback:S,iconLoggingData:{recordTable:e,source:"page_header",block_type:P,collection_id:"collection"===e?null==M?void 0:M.id:void 0},label:x.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"})})}return(0,g.jsx)(h.Z,{disabled:!0,icon:b,isEmptyPage:T,size:j,emojiSize:Z,style:_,emojiStyle:I,largeIcon:!0,label:x.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"})})}))},22735:(e,t,o)=>{o.d(t,{$:()=>I});var n=o(67294),i=o(86628),r=o(480),s=o(24405),a=o(80951),l=o(6695),d=o(42875),c=o(72126),p=o(31412),u=o(82356),h=o(27714),g=o(4615),m=o(14871),y=o(63296),f=o(95477),S=o(77080),v=o(62878),x=o(13555),C=o(85893);const b=(0,p.defineMessages)({linkCopied:{defaultMessage:"Link copied. Share it with others who may find this useful.",id:"ai.gtmFavoriteActions.linkCopied"},share:{defaultMessage:"Share as AI favorite",id:"ai.gtmFavoriteActions.share"},add:{defaultMessage:"Add to AI favorites",id:"ai.gtmFavoriteActions.add"}});function M(e){window.__c={n:"GtmFavoriteButtons"};const{blockId:t}=e,o=(0,r.O7)(),i=(0,p.useIntl)(),s=(0,n.useCallback)((()=>{(0,v.importGtmFavorite)({environment:o,importArgs:{name:"aiGtmFavoriteImport",blockId:t}})}),[t,o]),a=(0,n.useCallback)((()=>{const e=`${f.default.domainBaseUrl}/ai-gtm/${(0,g.cj)(t)}`;m.RD({environment:o,stringValue:e,copiedMessage:b.linkCopied})}),[t,o]);return(0,C.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,C.jsx)(y.Z,{onClick:a,icon:h.N,children:i.formatMessage(b.share)}),o.currentUser.isLoggedIn()&&(0,C.jsx)(y.Z,{onClick:s,style:{marginLeft:12},icon:u.l,children:i.formatMessage(b.add)})]})}var P=o(31792),w=o(85526),k=o(50478),j=o(41883),T=o(12867),R=o(65091);function _(e){var t;window.__c={n:"PagePropertiesSection"};const{collectionStore:o,schema:u,store:h,format:g}=e,m=(0,p.useIntl)(),y=(0,r.O7)(),f=(0,n.useRef)(null),v=(0,i.qz)(void 0,P.Z),b=(0,s.yK)((e=>({pageProperties:{width:"100%",fontSize:14},dragHandle:{marginLeft:-(k.C$+10),marginRight:6},hidePropertiesButton:{margin:"0 0 10px"},showMoreButton:{margin:0},addPropertyButton:{margin:"4px 0 0"},moreProperties:{border:`1px solid ${"dark"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[75]}`,borderRadius:4,padding:"8px 6px"}})),[]),_=(0,i.VK)((()=>Boolean(h.isAssociatedCollectionAPageTree())),[h]),I=(g.collection_page_properties||[]).filter((e=>{var t;return null===(t=g.collection_page_sections)||void 0===t||!t.some((t=>t.section===e.property&&("inline"===t.visibility||"minimal"===t.visibility)))})),Z=(0,i.VK)((()=>{const e=h.getModel(),t="on"===S.default.getGroup("default-new-page-property-to-hide-when-empty")?l.iB(g,u,void 0,l.j5.Collection):o.getFormat(),n=t&&t.property_visibility;if(n){return I.map((t=>({visibility:"show",hasValue:!Boolean(e&&(0,a.no)({block:e,property:t.property,schema:u,getRecordModel:h.getRecordModel,userId:y.currentUser.id,userTimeZone:(0,d.r)(),intl:m})),...t,...n.find((e=>e.property===t.property))})))}return I?I.map((e=>({...e,visibility:"show",hasValue:Boolean(h.getPropertyValue(e.property))}))):[]}),[h,g,u,o,I,m,y.currentUser.id]),V=(0,i.VK)((()=>w.Z.state.forceShowProperties),[]),[L,B]=(0,n.useMemo)((()=>c.uK(Z,(e=>{var t;return!!(null===(t=u[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}))),[Z,u]),E=function(e){return(0,i.VK)((()=>{if(!S.default.checkGate("ai_favorites"))return!1;const t=(0,x.OF)();return!!t&&t.spaceId===e.getSpaceId()&&t.collectionId===e.id}),[e])}(o),K=L.concat(B),{paddingLeft:F,paddingRight:O,width:D}=e,N=((null===(t=f.current)||void 0===t?void 0:t.clientWidth)??Number.MAX_VALUE)<Math.min(5,L.length)*T.Uv;let A;return A=!_||y.device.isMobile||N?(0,C.jsxs)("div",{style:{paddingBottom:8},children:[(0,C.jsx)(j.Z,{...e,showHiddenProperties:V,mergedProperties:_?K:Z}),(0,C.jsx)(R.ZP,{...e,mergedProperties:_?K:Z})]}):(0,C.jsx)(T.ZP,{...e,rowLength:5,compactProperties:L,hiddenProperties:B}),(0,C.jsx)("div",{style:b.pageProperties,onMouseEnter:()=>{v.setState({...v.state,mouseEntered:!0})},onMouseLeave:()=>{v.setState({...v.state,mouseEntered:!1})},ref:f,children:(0,C.jsx)("div",{style:{paddingLeft:F,paddingRight:O,width:D,maxWidth:"100%",padding:_?"10px 0":"8px 0",margin:"0 auto"},children:(0,C.jsxs)("div",{style:{paddingLeft:F,paddingRight:O,width:D,maxWidth:"100%",paddingTop:"8px",margin:"0 auto"},children:[A,E&&(0,C.jsx)(M,{blockId:h.id})]})})})}function I(e){window.__c={n:"PageProperties"};const{store:t,format:o,collectionStore:n,disabled:r,blockPropertyValueOverlayStore:s,isInPeekRenderer:a}=e,l=(0,i.VK)((()=>n.getSchema()),[n]),d=(0,i.VK)((()=>t.isLocked()),[t]);return(0,C.jsx)(_,{store:t,collectionStore:n,schema:l,format:o,disabled:r,locked:d,width:"100%",blockPropertyValueOverlayStore:s,isInPeekRenderer:a})}},35943:(e,t,o)=>{o.d(t,{Z:()=>B});var n=o(67294),i=o(13991),r=o(480),s=o(97511),a=o(86628),l=o(24405),d=o(49271),c=o(41432),p=o(42509),u=o(42875),h=o(27714),g=o(82990),m=o(31412),y=o(75018),f=o(28020),S=o(41232),v=o(33929),x=o(67669),C=o(24646),b=o(26350),M=o(99757),P=o(68709),w=o(15560),k=o(73063),j=o(84076),T=o(26388),R=o(19987),_=o(79954),I=o(44862),Z=o(65187),V=o(85893);function L(e){window.__c={n:"SyncedIndicators"};const{store:t,collectionContextStore:o}=e,n=(0,a.VK)((()=>t.isCollectionView()),[t]),i=(0,a.VK)((()=>t.getCollectionViewSourceCollectionStore()),[t]);return n&&o&&i?(0,V.jsx)(I.Z,{collectionStore:i,collectionContextStore:o}):null}const B=n.memo((e=>{let{store:t,disabled:o,isInSidePeek:n,extraStyles:I,paddingLeft:B,paddingRight:E,titlePlaceholder:K,collectionContextStore:F,shouldShowTemplatePicker:O,onTitleChange:D,onTitleEditText:N,onTitleEsc:A,onTitleUntab:H,onTitleTab:W}=e;window.__c={n:"PageTitle"};const z=(0,r.O7)(),U=(0,s.l)(),$=(0,a.VK)((()=>t.getTitleStore()),[t]),Q=(0,a.VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(c.Ti.externalObjectInstancePage)}),[t]),G=(0,a.VK)((()=>{if(o)return!1;if(M.n.state)return!1;const e=U&&U.publicEditModeStore.state;return!(0,x.YF)(e)&&t.canEditCollection()}),[o,U,t]),Y=(0,a.VK)((()=>{if(!t.isCollectionView())return!1;const e=t.getCollectionViewSourceCollectionStore();return!!e&&(0,p.OY)(e.getValue())}),[t]),q=(0,a.VK)((()=>{const e=t.getModel();return K??(null==e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,u.r)(),intl:v.default.getIntl()}))}),[t,K]),X=!z.device.isMobile&&n,J=(0,a.VK)((()=>G&&!t.isLocked()&&!Q&&!(0,f.qG)(t.id)),[G,Q,t]),ee=(0,a.VK)((()=>t.isEmptyPage()),[t]),te=(0,a.VK)((()=>t.isTemplate()),[t]),oe=(0,a.VK)((()=>t.getParentCollectionTemplateStores()),[t]),ne=(0,a.VK)((()=>t.getSyncedUri()),[t]),ie=(0,a.VK)((()=>t.shouldShowBetaTagForProjectManagementLaunch()),[t]),re=function(e){const{store:t,paddingLeft:o,paddingRight:n,isInSidePeek:s,shouldShowBetaTagForProjectManagementLaunch:c,extraStyles:p}=e,u=(0,r.O7)(),h=(0,a.VK)((()=>t.getFormat()),[t]),m=(0,a.VK)((()=>t.isCollectionView()),[t]),y=(0,a.VK)((()=>(0,C.$3)(u)),[u]),f=(0,a.VK)((()=>(0,C.vJ)(u)),[u]),S=(0,a.VK)((()=>t.getAppContainerBlockStore()),[t]),v=(0,a.VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]);return(0,l.yK)((e=>{const t=!!h.page_small_text||u.device.isMobile||m||s?32:40,r=y+f-o-n;return{title:{...d.ZD,width:v||c?"fit-content":"100%"},selectable:{color:e.regularTextColor,fontWeight:g.Z.fontWeight.bold,lineHeight:1.2,fontSize:t,fontFamily:g.Z.getHeaderFontFamily({pageFont:h.page_font,locale:i.SP}),cursor:"text",display:"flex",alignItems:"center",textRendering:u.device.isSafari?"optimizeSpeed":void 0,width:m&&!S?r:void 0,...p},link:{width:16,fill:e.mediumIconColor},placeholder:{...d.ZD,WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text"}}}),[S,f,u.device.isMobile,u.device.isSafari,p,h.page_font,h.page_small_text,m,v,s,y,o,n,c])}({store:t,isInSidePeek:n,paddingLeft:B,paddingRight:E,shouldShowBetaTagForProjectManagementLaunch:ie,extraStyles:I}),se=(0,a.VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),ae=(0,a.VK)((()=>t.isExternalCollectionBlockStore()?t:void 0),[t]),le=(0,a.VK)((()=>(null==ae?void 0:ae.canEdit())??!1),[ae]),de=(0,a.VK)((()=>ne?(0,S.pI)(ne,t.pointer.spaceId):void 0),[t.pointer.spaceId,ne]);if(Y)return null;if(!$)return null;const ce=b.G.createChildStore($,t.pointer),pe=oe&&0===oe.length,ue=z.device.isIOS,he=(0,V.jsx)(Z.Z,{tagName:"h1",style:{...re.title,fontSize:"1em",fontWeight:"inherit",margin:0},store:$,placeholderStyle:re.placeholder,disabled:!J,placeholder:q,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:A,onUntab:H,onTab:W,disableUpDownArrows:!(!O||te||pe||z.device.isMobile)&&ee,disableEnter:!(!O||te||pe||z.device.isMobile)&&ee,onChange:D,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title"});return(0,V.jsxs)("div",{style:X?{flex:1}:void 0,children:[(0,V.jsxs)(_.Z,{canSelect:!1,canDrag:!1,canEditText:J,onEditText:N,store:ce,style:re.selectable,analyticsName:"page_content",shouldShowDropZone:!0,children:[ue?(0,V.jsx)(P.p,{style:re.title,allowSelectionWithin:!0,children:he}):he,ie&&(0,V.jsx)(w.Z,{style:{marginTop:8,marginLeft:8}}),se&&(0,V.jsx)(T.Z,{placement:T.Z.Placement.Bottom,renderTooltip:e=>(0,V.jsx)(m.FormattedMessage,{...e,defaultMessage:"Link to original url",description:"Link to the original source of the data.",id:"PageTitle.syncedBlock.original"}),render:e=>(0,V.jsx)(j.Z,{href:de,ignoreLocalHoverState:!0,hovered:!1,children:(0,V.jsx)(k.Z,{ariaLabel:"Link",...e,icon:()=>(0,h.N)(re.link),style:{marginLeft:4},onClick:()=>{de&&y.navigateToExternalURL({url:de,environment:z})}})})}),ae&&!z.device.isMobile&&(0,V.jsx)(R.Z,{store:ae,canEdit:le,buttonStyle:{fontWeight:"normal",margin:0}})]}),(0,V.jsx)("div",{style:{marginLeft:4},children:(0,V.jsx)(L,{store:t,collectionContextStore:F})})]})}))},21953:(e,t,o)=>{o.d(t,{J:()=>g});var n=o(67294),i=o(480),r=o(6740),s=o(86628),a=o(77907),l=o(5382),d=o(68709),c=o(19987),p=o(5618),u=o(35943),h=o(85893);const g=e=>{let{store:t,hasCover:o,headerFocusStore:g,headerControls:m,isEditable:y,openMenuOnMount:f,openMenuOnMountCallback:S,pageViewBlockStore:v,discussionInputStore:x,...C}=e;window.__c={n:"PageTitleWithIcon"};const{device:b,WindowSizeStore:M}=(0,i.O7)(),P=b.isMobile&&!o,w=!b.isMobile&&C.isInSidePeek,k=(0,s.VK)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),j=(0,s.VK)((()=>l.Z.state.banners),[]),T=(0,s.VK)((()=>t.canEdit()),[t]),R=(0,s.VK)((()=>M.getSafePaddingLeftCSS(C.paddingLeft)),[M,C.paddingLeft]),_=(0,s.VK)((()=>M.getSafePaddingRightCSS(C.paddingRight)),[M,C.paddingRight]),I=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,r.E)(t)&&g.setState(!0)}),[g]),Z=(0,n.useCallback)((e=>{g.setState(!1)}),[g]),V=(0,h.jsx)(p.Z,{store:t,isEditable:y,hasCover:o,isInSidePeek:C.isInSidePeek,openMenuOnMount:f,openMenuOnMountCallback:S}),L=(0,h.jsx)(u.Z,{store:t,...C});return(0,h.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:R,width:"100%"},onClick:e=>{e.stopPropagation()},children:[(0,h.jsx)(a.LazyBannersRenderer,{pageViewBlockStore:v,discussionInputStore:x,banners:j,isMobile:!1,isInPeekRenderer:!1}),(0,h.jsxs)(d.p,{onFocus:I,onBlur:Z,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[P&&m,!w&&V,!P&&m]}),(0,h.jsx)("div",{style:{paddingRight:_},children:w?(0,h.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[V,L]}):L}),k?(0,h.jsx)(c.Z,{store:k,canEdit:T}):null]})}},97053:(e,t,o)=>{o.d(t,{Bt:()=>x,Nr:()=>f,Qg:()=>v,h9:()=>y,m4:()=>m,xC:()=>S});var n=o(480),i=o(97511),r=o(86628),s=o(41432),a=o(61045),l=o(57819),d=o(19124),c=o(12534),p=o(16772),u=o(19111),h=o(94896),g=o(17963);function m(e){(0,c.ZP)({event:e,context:c.Af.EditorMouseDown,callback:()=>{}})}function y(e){(0,c.ZP)({event:e,context:c.Af.EditorClick,callback:()=>{}})}function f(e){return(0,r.VK)((()=>Boolean(g.Z.state.pageMap[e.id])||h.Z.state.pages.has(e.id)),[e.id])}function S(e,t){const o=(0,n.O7)(),s=(0,i.l)(),a=f(e),l=v(e);return(0,r.VK)((()=>{const n=o.currentUser.isLoggedIn(),i=s&&s.publicEditModeStore.state;return Boolean(e&&t&&e.isDefined()&&!e.isLocked()&&e.canEdit()&&!e.hasContent()&&n&&(!(null!=i&&i.hasPublicPermission)||"edit"===(null==i?void 0:i.permission))&&!a&&t.state.ready&&!l&&(!(0,d.GD)(i)||"completionPopup"!==p.default.state.type))}),[o,l,t,s,a,e])}function v(e){return(0,r.VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(s.Ti.externalObjectInstancePage)}),[e])}function x(e){const{device:t,WindowSizeStore:o}=(0,n.O7)(),i=(0,r.VK)((()=>{const e=o.state.height,n=t.isMobile&&u.Z.state.open?e:0;return a._4()+n}),[o,t.isMobile]);return(0,r.VK)((()=>Boolean((0,l.RR)(p.default.state))?600:t.isTablet?380:t.isIOS?Math.max(350,i):t.isMobile?400:"side-peek"===e||"center-peek"===e||"home"===e?80:"30vh"),[t,i,e])}},70177:(e,t,o)=>{o.d(t,{L:()=>p});var n=o(13991),i=o(65669),r=o(90902),s=o(24990);const a={ko:()=>o.e(692).then(o.bind(o,13547)),es:()=>o.e(883).then(o.bind(o,98610)),de:()=>o.e(3224).then(o.bind(o,36802)),fr:()=>o.e(5038).then(o.bind(o,96627)),pt:()=>o.e(2138).then(o.bind(o,88048)),zh:()=>o.e(7835).then(o.bind(o,41787)),ja:()=>o.e(6377).then(o.bind(o,28202)),da:()=>o.e(7677).then(o.bind(o,99815)),fi:()=>o.e(6970).then(o.bind(o,65651)),nb:()=>o.e(3031).then(o.bind(o,92967)),nl:()=>o.e(2579).then(o.bind(o,86541)),sv:()=>o.e(382).then(o.bind(o,63462))};let l=!1,d=!1;async function c(e){for(const[o,n]of Object.entries(e.emojiLocaleKeywords)){var t;r.Q4[o]={...r.Q4[o],keywords:[...n,...(null===(t=r.Q4[o])||void 0===t?void 0:t.keywords)||[]]}}await s.Z.waitUntilLoaded(),s.Z.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}const p=(0,i.Z)((async()=>{await async function(){d||(await c(await o.e(3552).then(o.bind(o,62706))),d=!0)}(),await async function(){if(l)return;const[e]=n.SP.split("-");e in a&&(await c(await a[e]()),l=!0)}()}))},29755:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const r=new i},63971:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.default{getInitialState(){return{isExpanded:!0}}isExpanded(){return Boolean(this.state.isExpanded)}}const r=i},5382:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(8297).Z)},17963:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=!0:delete o[e],this.emit()}}const r=new i},65669:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{Z:()=>n})},65955:(e,t,o)=>{o.d(t,{o:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("addPage",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},64788:(e,t,o)=>{o.d(t,{P:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("addPageCover",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})})},68074:(e,t,o)=>{o.d(t,{v:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("addPageDiscussion",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})})},89767:(e,t,o)=>{o.d(t,{R:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("collectionInbox",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},70406:(e,t,o)=>{o.d(t,{p:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("transcript",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M3.99805 5.92188C3.85352 5.92188 3.72656 5.86719 3.61719 5.75781C3.50781 5.64844 3.45312 5.52148 3.45312 5.37695C3.45312 5.22852 3.50781 5.09961 3.61719 4.99023C3.72656 4.88086 3.85352 4.82617 3.99805 4.82617C4.15039 4.82617 4.2793 4.88086 4.38477 4.99023C4.49023 5.0957 4.54297 5.22461 4.54297 5.37695C4.54297 5.52539 4.49023 5.6543 4.38477 5.76367C4.2793 5.86914 4.15039 5.92188 3.99805 5.92188ZM3.99805 7.65625C3.85352 7.65625 3.72656 7.60352 3.61719 7.49805C3.50781 7.38867 3.45312 7.25977 3.45312 7.11133C3.45312 6.96289 3.50781 6.83594 3.61719 6.73047C3.72656 6.62109 3.85352 6.56641 3.99805 6.56641C4.15039 6.56641 4.2793 6.61914 4.38477 6.72461C4.49023 6.83008 4.54297 6.95898 4.54297 7.11133C4.54297 7.26367 4.49023 7.39258 4.38477 7.49805C4.2793 7.60352 4.15039 7.65625 3.99805 7.65625ZM3.99805 9.38477C3.84961 9.38477 3.7207 9.33203 3.61133 9.22656C3.50586 9.12109 3.45312 8.99219 3.45312 8.83984C3.45312 8.69141 3.50586 8.56445 3.61133 8.45898C3.7207 8.35352 3.84961 8.30078 3.99805 8.30078C4.15039 8.30078 4.2793 8.35352 4.38477 8.45898C4.49023 8.56445 4.54297 8.69141 4.54297 8.83984C4.54297 8.99219 4.49023 9.12109 4.38477 9.22656C4.2793 9.33203 4.15039 9.38477 3.99805 9.38477ZM3.99805 11.2129C3.85352 11.2129 3.72656 11.1582 3.61719 11.0488C3.50781 10.9395 3.45312 10.8105 3.45312 10.6621C3.45312 10.5137 3.50781 10.3848 3.61719 10.2754C3.72656 10.166 3.85352 10.1113 3.99805 10.1113C4.15039 10.1113 4.2793 10.166 4.38477 10.2754C4.49023 10.3809 4.54297 10.5098 4.54297 10.6621C4.54297 10.8145 4.49023 10.9453 4.38477 11.0547C4.2793 11.1602 4.15039 11.2129 3.99805 11.2129ZM5.67383 5.75195C5.56836 5.75195 5.47852 5.71484 5.4043 5.64062C5.33008 5.56641 5.29297 5.47852 5.29297 5.37695C5.29297 5.27148 5.33008 5.18164 5.4043 5.10742C5.48242 5.0293 5.57227 4.99023 5.67383 4.99023H12.1836C12.2891 4.99023 12.3789 5.0293 12.4531 5.10742C12.5312 5.18164 12.5703 5.27148 12.5703 5.37695C12.5703 5.47852 12.5332 5.56641 12.459 5.64062C12.3848 5.71484 12.293 5.75195 12.1836 5.75195H5.67383ZM5.67383 7.49219C5.57227 7.49219 5.48242 7.45508 5.4043 7.38086C5.33008 7.30664 5.29297 7.2168 5.29297 7.11133C5.29297 7.00586 5.33008 6.91602 5.4043 6.8418C5.47852 6.76367 5.56836 6.72461 5.67383 6.72461H9.31836C9.42383 6.72461 9.51367 6.76367 9.58789 6.8418C9.66211 6.91602 9.69922 7.00586 9.69922 7.11133C9.69922 7.2168 9.66211 7.30664 9.58789 7.38086C9.51367 7.45508 9.42383 7.49219 9.31836 7.49219H5.67383ZM5.67383 9.22656C5.56836 9.22656 5.47852 9.18945 5.4043 9.11523C5.33008 9.04102 5.29297 8.94922 5.29297 8.83984C5.29297 8.73828 5.33008 8.65039 5.4043 8.57617C5.47852 8.50195 5.56836 8.46484 5.67383 8.46484H12.1836C12.293 8.46484 12.3848 8.50195 12.459 8.57617C12.5332 8.65039 12.5703 8.73828 12.5703 8.83984C12.5703 8.94922 12.5332 9.04102 12.459 9.11523C12.3848 9.18945 12.293 9.22656 12.1836 9.22656H5.67383ZM5.67383 11.043C5.57227 11.043 5.48242 11.0059 5.4043 10.9316C5.33008 10.8535 5.29297 10.7637 5.29297 10.6621C5.29297 10.5566 5.33008 10.4668 5.4043 10.3926C5.47852 10.3184 5.56836 10.2812 5.67383 10.2812H9.31836C9.42383 10.2812 9.51367 10.3184 9.58789 10.3926C9.66211 10.4668 9.69922 10.5566 9.69922 10.6621C9.69922 10.7637 9.66211 10.8535 9.58789 10.9316C9.51367 11.0059 9.42383 11.043 9.31836 11.043H5.67383ZM2.97852 13.4922C2.3457 13.4922 1.86719 13.332 1.54297 13.0117C1.21875 12.6914 1.05664 12.2188 1.05664 11.5938V4.45703C1.05664 3.83203 1.21875 3.35938 1.54297 3.03906C1.86719 2.71484 2.3457 2.55273 2.97852 2.55273H13.0098C13.6465 2.55273 14.127 2.71484 14.4512 3.03906C14.7754 3.35938 14.9375 3.83203 14.9375 4.45703V11.5938C14.9375 12.2188 14.7754 12.6914 14.4512 13.0117C14.127 13.332 13.6465 13.4922 13.0098 13.4922H2.97852ZM3.04883 12.3438H12.9453C13.2148 12.3438 13.4219 12.2734 13.5664 12.1328C13.7109 11.9883 13.7832 11.7754 13.7832 11.4941V4.55664C13.7832 4.27539 13.7109 4.06445 13.5664 3.92383C13.4219 3.7793 13.2148 3.70703 12.9453 3.70703H3.04883C2.77539 3.70703 2.56641 3.7793 2.42188 3.92383C2.28125 4.06445 2.21094 4.27539 2.21094 4.55664V11.4941C2.21094 11.7754 2.28125 11.9883 2.42188 12.1328C2.56641 12.2734 2.77539 12.3438 3.04883 12.3438Z"})})})}}]);