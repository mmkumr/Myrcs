"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9765],{37252:(e,s,t)=>{t.r(s),t.d(s,{InjectThirdPartyScripts:()=>T,useThirdPartyScripts:()=>Z});var a=t(67294),i=t(13991),n=t(480),o=t(86628),r=t(72126),l=(t(57658),t(74686)),d=t(66673),c=t(65454),u=t(4615);const p="a2a8e2144b2bbbb4074a",g="901895b8-45c7-40c8-ba91-626cfc6739b3";function f(){var e,s,t;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},s=["load","identify","sidentify","track","page","on","off","reset"],t=0;t<s.length;t++)window._cio[s[t]]=e(s[t])}var m=t(7250),y=t(93724),I=t(49902),S=t(50906),v=t(75018),b=t(95477),w=t(15010),k=t(94134),_=t(58455),C=t(80444),E=t(61893),h=t(74055),R=t(77080),K=t(3418),V=t(69454),P=t(7339),M=t(77907);function Z(){const e=(0,n.O7)(),s=(0,n.Fy)(),{currentUser:t}=e,Z=(0,o.VK)((()=>{var e;return null===(e=C.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),T=(0,o.VK)((()=>P.C.state.ready),[]);!function(e){let{isEnabled:s,isLoggedIn:t,userId:i,onMessageOpened:n,onMessageDismissed:o,onMessageError:r,onMessageAction:m,cookieImpl:y}=e;(0,a.useEffect)((()=>{(async function(){return!!s&&!!(await l.ec({service:"customer_io",cookieImpl:y}))&&!("cio-tracker"in window)})().then((e=>{if(e)return f(),(0,c.ZP)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":p,"data-use-array-params":"true","data-in-app-org-id":g,"data-use-in-app":"true","data-auto-track-page":"false"}})}))}),[s,y]);const I=(0,d.D9)(i);(0,a.useEffect)((()=>{I!==i&&(f(),t&&void 0!==i?(window._cio.identify({id:(0,u.cj)(i)}),n&&window._cio.on("in-app:message-opened",n),o&&window._cio.on("in-app:message-dismissed",o),m&&window._cio.on("in-app:message-action",m),window._cio.on("in-app:message-error",r)):window._cio.reset())}),[t,i,I,n,o,r,m])}({isEnabled:(0,o.VK)((()=>t.isLoggedIn()&&T&&R.default.checkGate("customerio")),[t,T]),isLoggedIn:t.isLoggedIn(),userId:t.id,onMessageOpened:s=>{h.Z.state.suppressReason?S.EKj(e,{message_id:s.detail.messageId,reason:h.Z.state.suppressReason}):(h.Z.setState({...h.Z.state,isVisible:!0}),S.IMV(e,{message_id:s.detail.messageId}))},onMessageDismissed:s=>{h.Z.setState({...h.Z.state,isVisible:!1}),S.x91(e,{message_id:s.detail.messageId})},onMessageError:s=>{S.ybK(e,{message_id:s.detail.messageId})},onMessageAction:s=>{if(s.detail.actionValue.startsWith("relative_url=")){const t=s.detail.actionValue.split("relative_url=")[1];v.navigate({environment:e,url:t})}s.detail.message.dismiss()},cookieImpl:e.cookieImpl}),(0,I.kI)({...(0,o.VK)((()=>{const e=_.default.state.isSprigEnabled&&E.Z.state.permission.performance&&R.default.checkGate("sprig")&&s.isDesktop,{currentUserSettingsStore:t,currentSpaceStore:a,currentUserStore:i}=C.default.state,n=null==i?void 0:i.getEmail(),o=t?(0,w.e2)(t):null,r=Boolean(null==a?void 0:a.canAdmin()),l=(null==a?void 0:a.getUserMemberCount())??0;return{isEnabled:e,userEmail:n,userDaysSinceSignup:o??0,userDomainType:(0,w.JF)(),isSpaceAdmin:r,spaceMemberCount:l}}),[s]),isLoggedIn:t.isLoggedIn(),userId:t.id,spaceId:Z,sprigConfig:b.default.sprig}),(0,m.oG)({getLocale:(0,a.useCallback)((()=>i.SP),[]),analyticsSettings:(0,o.VK)((()=>r.ei(_.default.state,["isIntercomEnabled","intercomAppId","intercomUserHash","noIntercomUserId","user_id","user_email"])),[]),onVisibilityChange:(0,a.useCallback)((s=>{V.Z.updateShouldResizeWebview(e,s,"v1"),s?K.Z.addNamedPopup("intercom"):K.Z.removeNamedPopup("intercom")}),[e]),cookieImpl:e.cookieImpl}),function(e){var s;const{userId:t,spaceId:i,...n}=e,o=(0,M.useDependency)(M.deps.sentry);(0,a.useEffect)((()=>{if(!o.value)return;const{Sentry:e,sentryInitializeFull:s}=o.value;s({Sentry:{...e,isFullSDK:!0},config:b.default,...n})}),[o.value,n]);const r=null===(s=o.value)||void 0===s?void 0:s.Sentry;(0,a.useEffect)((()=>{r&&r.setUser(t?{id:t}:null)}),[r,t]),(0,a.useEffect)((()=>{r&&r.setTag("space.id",i)}),[r,i])}({userId:t.id,spaceId:Z,getErrorsSampleRate:(0,a.useCallback)((()=>R.default.getConfigKey("sentry","errorsSampleRate")),[]),getTracesSampleRate:(0,a.useCallback)((()=>R.default.getConfigKey("sentry","tracesSampleRate-v0")),[]),getReplaysSessionSampleRate:(0,a.useCallback)((()=>R.default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),getReplaysOnErrorSampleRate:(0,a.useCallback)((()=>R.default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[]),getIsProfilingEnabled:(0,a.useCallback)((()=>"sentry"===(0,k.getProfilingToolForSession)()),[]),getProfilesSampleRate:(0,a.useCallback)((()=>R.default.getConfigKey("sentry","profilesSampleRate")),[])}),(0,y.useConfigurePalette)({userId:t.id,spaceId:Z,pageType:(0,o.VK)((()=>{var e;return null===(e=C.default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getType()}),[]),device:s})}function T(){return window.__c={n:"InjectThirdPartyScripts"},Z(),null}},74055:(e,s,t)=>{t.d(s,{V:()=>i,Z:()=>o});var a=t(49085);let i=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class n extends a.default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const o=new n}}]);